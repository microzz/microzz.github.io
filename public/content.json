[{"title":"å‰ç«¯æ°´å°ç”Ÿæˆæ–¹æ¡ˆ","date":"2018-07-01T11:30:02.000Z","path":"2018/07/01/watermark/","text":"å‰ç«¯æ°´å°ç”Ÿæˆæ–¹æ¡ˆ &nbsp;&nbsp;&nbsp;&nbsp;å‰æ®µæ—¶é—´åšæŸç³»ç»Ÿå®¡æ ¸åå°ï¼Œå‡ºç°äº†å®¡æ ¸äººå‘˜æˆªå›¾æŠŠå†…å®¹å¤–æ³„éœ²çš„æƒ…å†µï¼Œè™½ç„¶æˆªå›¾å†…å®¹ä¸æ˜¯ç‰¹åˆ«æ•æ„Ÿï¼Œä½†æ˜¯å®‰å…¨é—®é¢˜è¿˜æ˜¯ä¸èƒ½å¿½è§†ã€‚äºæ˜¯ä¾¿åœ¨ç³»ç»Ÿé¡µé¢ä¸Šé¢åŠ ä¸Šäº†æ°´å°ï¼Œå¯¹äºå®¡æ ¸äººå‘˜æˆªå›¾ç­‰æ•æ„Ÿæ“ä½œæœ‰ä¸€å®šçš„æç¤ºä½œç”¨ã€‚ ç½‘é¡µæ°´å°ç”Ÿæˆè§£å†³æ–¹æ¡ˆé€šè¿‡canvasç”Ÿæˆæ°´å° Canvaså…¼å®¹æ€§ è¿™é‡Œæˆ‘ä»¬ç”¨canvasæ¥ç”Ÿæˆbase64å›¾ç‰‡ï¼Œé€šè¿‡CanIUseç½‘ç«™æŸ¥è¯¢å…¼å®¹æ€§ï¼Œå¦‚æœåœ¨ç§»åŠ¨ç«¯ä»¥åŠä¸€äº›ç®¡ç†ç³»ç»Ÿä½¿ç”¨ï¼Œå…¼å®¹æ€§é—®é¢˜å¯ä»¥å®Œå…¨å¿½ç•¥ã€‚ HTMLCanvasElement.toDataURL æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«å›¾ç‰‡å±•ç¤ºçš„ data URI ã€‚å¯ä»¥ä½¿ç”¨ type å‚æ•°å…¶ç±»å‹ï¼Œé»˜è®¤ä¸º PNG æ ¼å¼ã€‚å›¾ç‰‡çš„åˆ†è¾¨ç‡ä¸º96dpiã€‚ å¦‚æœç”»å¸ƒçš„é«˜åº¦æˆ–å®½åº¦æ˜¯0ï¼Œé‚£ä¹ˆä¼šè¿”å›å­—ç¬¦ä¸²â€œdata:,â€ã€‚å¦‚æœä¼ å…¥çš„ç±»å‹éâ€œimage/pngâ€ï¼Œä½†æ˜¯è¿”å›çš„å€¼ä»¥â€œdata:image/pngâ€å¼€å¤´ï¼Œé‚£ä¹ˆè¯¥ä¼ å…¥çš„ç±»å‹æ˜¯ä¸æ”¯æŒçš„ã€‚Chromeæ”¯æŒâ€œimage/webpâ€ç±»å‹ã€‚å…·ä½“å‚è€ƒHTMLCanvasElement.toDataURL å…·ä½“ä»£ç å®ç°å¦‚ä¸‹ï¼š (function () { // canvas å®ç° watermark function __canvasWM({ // ä½¿ç”¨ ES6 çš„å‡½æ•°é»˜è®¤å€¼æ–¹å¼è®¾ç½®å‚æ•°çš„é»˜è®¤å–å€¼ // å…·ä½“å‚è§ https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Default_parameters container = document.body, width = &#39;200px&#39;, height = &#39;150px&#39;, textAlign = &#39;center&#39;, textBaseline = &#39;middle&#39;, font = &quot;20px microsoft yahei&quot;, fillStyle = &#39;rgba(184, 184, 184, 0.8)&#39;, content = &#39;è¯·å‹¿å¤–ä¼ &#39;, rotate = &#39;30&#39;, zIndex = 1000 } = {}) { var args = arguments[0]; var canvas = document.createElement(&#39;canvas&#39;); canvas.setAttribute(&#39;width&#39;, width); canvas.setAttribute(&#39;height&#39;, height); var ctx = canvas.getContext(&quot;2d&quot;); ctx.textAlign = textAlign; ctx.textBaseline = textBaseline; ctx.font = font; ctx.fillStyle = fillStyle; ctx.rotate(Math.PI / 180 * rotate); ctx.fillText(content, parseFloat(width) / 2, parseFloat(height) / 2); var base64Url = canvas.toDataURL(); const watermarkDiv = document.createElement(&quot;div&quot;); watermarkDiv.setAttribute(&#39;style&#39;, ` position:absolute; top:0; left:0; width:100%; height:100%; z-index:${zIndex}; pointer-events:none; background-repeat:repeat; background-image:url(&#39;${base64Url}&#39;)`); container.style.position = &#39;relative&#39;; container.insertBefore(watermarkDiv, container.firstChild); }); window.__canvasWM = __canvasWM; })(); // è°ƒç”¨ __canvasWM({ content: &#39;QQMusicFE&#39; }) æ•ˆæœå¦‚ä¸‹ï¼š Canvaså®ç°ç½‘é¡µæ°´å°æ•ˆæœ ä¸ºäº†ä½¿è¿™ä¸ªæ–¹æ³•æ›´é€šç”¨ï¼Œå…¼å®¹ä¸åŒçš„å¼•ç”¨æ–¹å¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åŠ ä¸Šè¿™æ®µä»£ç ï¼š // ä¸ºäº†å…¼å®¹ä¸åŒçš„ç¯å¢ƒ if (typeof module != &#39;undefined&#39; &amp;&amp; module.exports) { //CMD module.exports = __canvasWM; } else if (typeof define == &#39;function&#39; &amp;&amp; define.amd) { // AMD define(function () { return __canvasWM; }); } else { window.__canvasWM = __canvasWM; } è¿™æ ·ä¼¼ä¹èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œç¨å¾®æ‡‚ä¸€ç‚¹æµè§ˆå™¨çš„ä½¿ç”¨æˆ–è€…ç½‘é¡µçŸ¥è¯†çš„ç”¨æˆ·ï¼Œå¯ä»¥ç”¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·æ¥åŠ¨æ€æ›´æ”¹DOMçš„å±æ€§æˆ–è€…ç»“æ„å°±å¯ä»¥å»æ‰äº†ã€‚è¿™ä¸ªæ—¶å€™æœ‰ä¸¤ä¸ªè§£å†³åŠæ³•ï¼š ç›‘æµ‹æ°´å°divçš„å˜åŒ–ï¼Œè®°å½•åˆšç”Ÿæˆçš„divçš„innerHTMLï¼Œæ¯éš”å‡ ç§’å°±å–ä¸€æ¬¡æ–°çš„å€¼ï¼Œä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™é‡æ–°ç”Ÿæˆæ°´å°ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼å¯èƒ½å½±å“æ€§èƒ½ï¼› ä½¿ç”¨MutationObserver MutationObserverç»™å¼€å‘è€…ä»¬æä¾›äº†ä¸€ç§èƒ½åœ¨æŸä¸ªèŒƒå›´å†…çš„DOMæ ‘å‘ç”Ÿå˜åŒ–æ—¶ä½œå‡ºé€‚å½“ååº”çš„èƒ½åŠ›ã€‚ MutationObserverå…¼å®¹æ€§ é€šè¿‡å…¼å®¹æ€§è¡¨å¯ä»¥çœ‹å‡ºé«˜çº§æµè§ˆå™¨ä»¥åŠç§»åŠ¨æµè§ˆå™¨æ”¯æŒéå¸¸ä¸é”™ã€‚Mutation Observer API ç”¨æ¥ç›‘è§† DOM å˜åŠ¨ã€‚DOM çš„ä»»ä½•å˜åŠ¨ï¼Œæ¯”å¦‚èŠ‚ç‚¹çš„å¢å‡ã€å±æ€§çš„å˜åŠ¨ã€æ–‡æœ¬å†…å®¹çš„å˜åŠ¨ï¼Œè¿™ä¸ª API éƒ½å¯ä»¥å¾—åˆ°é€šçŸ¥ã€‚ä½¿ç”¨MutationObserveræ„é€ å‡½æ•°ï¼Œæ–°å»ºä¸€ä¸ªè§‚å¯Ÿå™¨å®ä¾‹ï¼Œå®ä¾‹çš„æœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å˜åŠ¨æ•°ç»„ï¼Œç¬¬äºŒä¸ªæ˜¯è§‚å¯Ÿå™¨å®ä¾‹ã€‚MutationObserver çš„å®ä¾‹çš„observeæ–¹æ³•ç”¨æ¥å¯åŠ¨ç›‘å¬ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ‰€è¦è§‚å¯Ÿçš„ DOM èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼šä¸€ä¸ªé…ç½®å¯¹è±¡ï¼ŒæŒ‡å®šæ‰€è¦è§‚å¯Ÿçš„ç‰¹å®šå˜åŠ¨ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ï¼š å±æ€§ æè¿° childList å¦‚æœéœ€è¦è§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹çš„å­èŠ‚ç‚¹(æ–°å¢äº†æŸä¸ªå­èŠ‚ç‚¹,æˆ–è€…ç§»é™¤äº†æŸä¸ªå­èŠ‚ç‚¹),åˆ™è®¾ç½®ä¸ºtrue. attributes å¦‚æœéœ€è¦è§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹çš„å±æ€§èŠ‚ç‚¹(æ–°å¢æˆ–åˆ é™¤äº†æŸä¸ªå±æ€§,ä»¥åŠæŸä¸ªå±æ€§çš„å±æ€§å€¼å‘ç”Ÿäº†å˜åŒ–),åˆ™è®¾ç½®ä¸ºtrue. characterData å¦‚æœç›®æ ‡èŠ‚ç‚¹ä¸ºcharacterDataèŠ‚ç‚¹(ä¸€ç§æŠ½è±¡æ¥å£,å…·ä½“å¯ä»¥ä¸ºæ–‡æœ¬èŠ‚ç‚¹,æ³¨é‡ŠèŠ‚ç‚¹,ä»¥åŠå¤„ç†æŒ‡ä»¤èŠ‚ç‚¹)æ—¶,ä¹Ÿè¦è§‚å¯Ÿè¯¥èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹æ˜¯å¦å‘ç”Ÿå˜åŒ–,åˆ™è®¾ç½®ä¸ºtrue. subtree é™¤äº†ç›®æ ‡èŠ‚ç‚¹,å¦‚æœè¿˜éœ€è¦è§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹çš„æ‰€æœ‰åä»£èŠ‚ç‚¹(è§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹æ‰€åŒ…å«çš„æ•´æ£µDOMæ ‘ä¸Šçš„ä¸Šè¿°ä¸‰ç§èŠ‚ç‚¹å˜åŒ–),åˆ™è®¾ç½®ä¸ºtrue. attributeOldValue åœ¨attributeså±æ€§å·²ç»è®¾ä¸ºtrueçš„å‰æä¸‹,å¦‚æœéœ€è¦å°†å‘ç”Ÿå˜åŒ–çš„å±æ€§èŠ‚ç‚¹ä¹‹å‰çš„å±æ€§å€¼è®°å½•ä¸‹æ¥(è®°å½•åˆ°ä¸‹é¢MutationRecordå¯¹è±¡çš„oldValueå±æ€§ä¸­),åˆ™è®¾ç½®ä¸ºtrue. characterDataOldValue åœ¨characterDataå±æ€§å·²ç»è®¾ä¸ºtrueçš„å‰æä¸‹,å¦‚æœéœ€è¦å°†å‘ç”Ÿå˜åŒ–çš„characterDataèŠ‚ç‚¹ä¹‹å‰çš„æ–‡æœ¬å†…å®¹è®°å½•ä¸‹æ¥(è®°å½•åˆ°ä¸‹é¢MutationRecordå¯¹è±¡çš„oldValueå±æ€§ä¸­),åˆ™è®¾ç½®ä¸ºtrue. attributeFilter ä¸€ä¸ªå±æ€§åæ•°ç»„(ä¸éœ€è¦æŒ‡å®šå‘½åç©ºé—´),åªæœ‰è¯¥æ•°ç»„ä¸­åŒ…å«çš„å±æ€§åå‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šè¢«è§‚å¯Ÿåˆ°,å…¶ä»–åç§°çš„å±æ€§å‘ç”Ÿå˜åŒ–åä¼šè¢«å¿½ç•¥. MutationObserveråªèƒ½ç›‘æµ‹åˆ°è¯¸å¦‚å±æ€§æ”¹å˜ã€å¢åˆ å­ç»“ç‚¹ç­‰ï¼Œå¯¹äºè‡ªå·±æœ¬èº«è¢«åˆ é™¤ï¼Œæ˜¯æ²¡æœ‰åŠæ³•çš„å¯ä»¥é€šè¿‡ç›‘æµ‹çˆ¶ç»“ç‚¹æ¥è¾¾åˆ°è¦æ±‚ã€‚å› æ­¤æœ€ç»ˆæ”¹é€ ä¹‹åä»£ç ä¸ºï¼š (function () { // canvas å®ç° watermark function __canvasWM({ // ä½¿ç”¨ ES6 çš„å‡½æ•°é»˜è®¤å€¼æ–¹å¼è®¾ç½®å‚æ•°çš„é»˜è®¤å–å€¼ // å…·ä½“å‚è§ https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Default_parameters container = document.body, width = &#39;300px&#39;, height = &#39;200px&#39;, textAlign = &#39;center&#39;, textBaseline = &#39;middle&#39;, font = &quot;20px Microsoft Yahei&quot;, fillStyle = &#39;rgba(184, 184, 184, 0.6)&#39;, content = &#39;è¯·å‹¿å¤–ä¼ &#39;, rotate = &#39;30&#39;, zIndex = 1000 } = {}) { const args = arguments[0]; const canvas = document.createElement(&#39;canvas&#39;); canvas.setAttribute(&#39;width&#39;, width); canvas.setAttribute(&#39;height&#39;, height); const ctx = canvas.getContext(&quot;2d&quot;); ctx.textAlign = textAlign; ctx.textBaseline = textBaseline; ctx.font = font; ctx.fillStyle = fillStyle; ctx.rotate(Math.PI / 180 * rotate); ctx.fillText(content, parseFloat(width) / 2, parseFloat(height) / 2); const base64Url = canvas.toDataURL(); const __wm = document.querySelector(&#39;.__wm&#39;); const watermarkDiv = __wm || document.createElement(&quot;div&quot;); const styleStr = ` position:absolute; top:0; left:0; width:100%; height:100%; z-index:${zIndex}; pointer-events:none; background-repeat:repeat; background-image:url(&#39;${base64Url}&#39;)`; watermarkDiv.setAttribute(&#39;style&#39;, styleStr); watermarkDiv.classList.add(&#39;__wm&#39;); if (!__wm) { container.style.position = &#39;relative&#39;; container.insertBefore(watermarkDiv, container.firstChild); } const MutationObserver = window.MutationObserver || window.WebKitMutationObserver; if (MutationObserver) { let mo = new MutationObserver(function () { const __wm = document.querySelector(&#39;.__wm&#39;); // åªåœ¨__wmå…ƒç´ å˜åŠ¨æ‰é‡æ–°è°ƒç”¨ __canvasWM if ((__wm &amp;&amp; __wm.getAttribute(&#39;style&#39;) !== styleStr) || !__wm) { // é¿å…ä¸€ç›´è§¦å‘ mo.disconnect(); mo = null; __canvasWM(JSON.parse(JSON.stringify(args))); } }); mo.observe(container, { attributes: true, subtree: true, childList: true }) } } if (typeof module != &#39;undefined&#39; &amp;&amp; module.exports) { //CMD module.exports = __canvasWM; } else if (typeof define == &#39;function&#39; &amp;&amp; define.amd) { // AMD define(function () { return __canvasWM; }); } else { window.__canvasWM = __canvasWM; } })(); // è°ƒç”¨ __canvasWM({ content: &#39;QQMusicFE&#39; }); é€šè¿‡SVGç”Ÿæˆæ°´å°SVGï¼šå¯ç¼©æ”¾çŸ¢é‡å›¾å½¢ï¼ˆè‹±è¯­ï¼šScalable Vector Graphicsï¼ŒSVGï¼‰æ˜¯ä¸€ç§åŸºäºå¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ˆXMLï¼‰ï¼Œç”¨äºæè¿°äºŒç»´çŸ¢é‡å›¾å½¢çš„å›¾å½¢æ ¼å¼ã€‚ SVGç”±W3Cåˆ¶å®šï¼Œæ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ã€‚ â€“ ç»´åŸºç™¾ç§‘ SVGæµè§ˆå™¨å…¼å®¹æ€§ ç›¸æ¯”Canvasï¼ŒSVGæœ‰æ›´å¥½çš„æµè§ˆå™¨å…¼å®¹æ€§ï¼Œä½¿ç”¨SVGç”Ÿæˆæ°´å°çš„æ–¹å¼ä¸Canvasçš„æ–¹å¼ç±»ä¼¼ï¼Œåªæ˜¯base64Urlçš„ç”Ÿæˆæ–¹å¼æ¢æˆäº†SVGã€‚å…·ä½“å¦‚ä¸‹ï¼š (function () { // svg å®ç° watermark function __svgWM({ container = document.body, content = &#39;è¯·å‹¿å¤–ä¼ &#39;, width = &#39;300px&#39;, height = &#39;200px&#39;, opacity = &#39;0.2&#39;, fontSize = &#39;20px&#39;, zIndex = 1000 } = {}) { const args = arguments[0]; const svgStr = `&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;${width}&quot; height=&quot;${width}&quot;&gt; &lt;text x=&quot;50%&quot; y=&quot;50%&quot; dy=&quot;12px&quot; text-anchor=&quot;middle&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1&quot; stroke-opacity=&quot;${opacity}&quot; fill=&quot;none&quot; transform=&quot;rotate(-45, 120 120)&quot; style=&quot;font-size: ${fontSize};&quot;&gt; ${content} &lt;/text&gt; &lt;/svg&gt;`; const base64Url = `data:image/svg+xml;base64,${window.btoa(unescape(encodeURIComponent(svgStr)))}`; const __wm = document.querySelector(&#39;.__wm&#39;); const watermarkDiv = __wm || document.createElement(&quot;div&quot;); // ... // ä¸ canvas çš„ä¸€è‡´ // ... })(); __svgWM({ content: &#39;QQMusicFE&#39; }) é€šè¿‡NodeJSç”Ÿæˆæ°´å°èº«ä¸ºç°ä»£å‰ç«¯å¼€å‘è€…ï¼ŒNode.JSä¹Ÿæ˜¯éœ€è¦æŒæ¡çš„ã€‚æˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡NodeJSæ¥ç”Ÿæˆç½‘é¡µæ°´å°(å‡ºäºæ€§èƒ½è€ƒè™‘æ›´å¥½çš„æ–¹å¼æ˜¯åˆ©ç”¨ç”¨æˆ·å®¢æˆ·ç«¯æ¥ç”Ÿæˆ)ã€‚å‰ç«¯å‘ä¸€ä¸ªè¯·æ±‚ï¼Œå‚æ•°å¸¦ä¸Šæ°´å°å†…å®¹ï¼Œåå°è¿”å›å›¾ç‰‡å†…å®¹ã€‚å…·ä½“å®ç°(Koa2ç¯å¢ƒ)ï¼š å®‰è£…gmä»¥åŠç›¸å…³ç¯å¢ƒï¼Œè¯¦æƒ…çœ‹gmæ–‡æ¡£ ctx.type = &#39;image/png&#39;;è®¾ç½®å“åº”ä¸ºå›¾ç‰‡ç±»å‹ ç”Ÿæˆå›¾ç‰‡è¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥éœ€è¦åŒ…è£…ä¸€å±‚Promiseï¼Œè¿™æ ·æ‰èƒ½ä¸ºé€šè¿‡ async/await æ–¹å¼ä¸º ctx.body èµ‹å€¼ const fs = require(&#39;fs&#39;) const gm = require(&#39;gm&#39;); const imageMagick = gm.subClass({ imageMagick: true }); const router = require(&#39;koa-router&#39;)(); router.get(&#39;/wm&#39;, async (ctx, next) =&gt; { const { text } = ctx.query; ctx.type = &#39;image/png&#39;; ctx.status = 200; ctx.body = await ((() =&gt; { return new Promise((resolve, reject) =&gt; { imageMagick(200, 100, &quot;rgba(255,255,255,0)&quot;) .fontSize(40) .drawText(10, 50, text) .write(require(&#39;path&#39;).join(__dirname, `./${text}.png`), function (err) { if (err) { reject(err); } else { resolve(fs.readFileSync(require(&#39;path&#39;).join(__dirname, `./${text}.png`))) } }); }) })()); }); å¦‚æœåªæ˜¯ç®€å•çš„æ°´å°å±•ç¤ºï¼Œå»ºè®®åœ¨æµè§ˆå™¨ç”Ÿæˆï¼Œæ€§èƒ½æ›´å¥½ å›¾ç‰‡æ°´å°ç”Ÿæˆè§£å†³æ–¹æ¡ˆé™¤äº†ç»™ç½‘é¡µåŠ ä¸Šæ°´å°ä¹‹å¤–ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç»™å›¾ç‰‡ä¹ŸåŠ ä¸Šæ°´å°ï¼Œè¿™æ ·åœ¨ç”¨æˆ·ä¿å­˜å›¾ç‰‡åï¼Œå¸¦ä¸Šäº†æ°´å°æ¥æºä¿¡æ¯ï¼Œæ—¢å¯ä»¥ä¿æŠ¤ç‰ˆæƒï¼Œæ°´å°çš„å…¶ä»–ä¿¡æ¯ä¹Ÿå¯ä»¥é˜²æ­¢æ³„å¯†ã€‚ é€šè¿‡canvasç»™å›¾ç‰‡åŠ æ°´å°å®ç°å¦‚ä¸‹ï¼š (function() { function __picWM({ url = &#39;&#39;, textAlign = &#39;center&#39;, textBaseline = &#39;middle&#39;, font = &quot;20px Microsoft Yahei&quot;, fillStyle = &#39;rgba(184, 184, 184, 0.8)&#39;, content = &#39;è¯·å‹¿å¤–ä¼ &#39;, cb = null, textX = 100, textY = 30 } = {}) { const img = new Image(); img.src = url; img.crossOrigin = &#39;anonymous&#39;; img.onload = function() { const canvas = document.createElement(&#39;canvas&#39;); canvas.width = img.width; canvas.height = img.height; const ctx = canvas.getContext(&#39;2d&#39;); ctx.drawImage(img, 0, 0); ctx.textAlign = textAlign; ctx.textBaseline = textBaseline; ctx.font = font; ctx.fillStyle = fillStyle; ctx.fillText(content, img.width - textX, img.height - textY); const base64Url = canvas.toDataURL(); cb &amp;&amp; cb(base64Url); } } if (typeof module != &#39;undefined&#39; &amp;&amp; module.exports) { //CMD module.exports = __picWM; } else if (typeof define == &#39;function&#39; &amp;&amp; define.amd) { // AMD define(function () { return __picWM; }); } else { window.__picWM = __picWM; } })(); // è°ƒç”¨ __picWM({ url: &#39;http://localhost:3000/imgs/google.png&#39;, content: &#39;QQMusicFE&#39;, cb: (base64Url) =&gt; { document.querySelector(&#39;img&#39;).src = base64Url }, }); æ•ˆæœå¦‚ä¸‹ï¼š Canvasç»™å›¾ç‰‡ç”Ÿæˆæ°´å° é€šè¿‡NodeJSæ‰¹é‡ä¸ºå›¾ç‰‡åŠ æ°´å°æˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡gmè¿™ä¸ªåº“æ¥ç»™å›¾ç‰‡åŠ ä¸Šæ°´å° function picWM(path, text) { imageMagick(path) .drawText(10, 50, text) .write(require(&#39;path&#39;).join(__dirname, `./${text}.png`), function (err) { if (err) { console.log(err); } }); } å¦‚æœéœ€è¦æ‰¹å¤„ç†å›¾ç‰‡ï¼Œåªéœ€è¦éå†ç›¸å…³æ–‡ä»¶å³å¯ã€‚ å¦‚æœåªæ˜¯ç®€å•çš„æ°´å°å±•ç¤ºï¼Œå»ºè®®åœ¨æµè§ˆå™¨ç”Ÿæˆï¼Œæ€§èƒ½æ›´å¥½ æ‹“å±•éšæ°´å°å‰æ®µæ—¶é—´é˜¿é‡Œå‡­æˆªå›¾æŸ¥åˆ°äº†æœˆé¥¼äº‹ä»¶çš„æ³„å¯†è€…ï¼Œå…¶å®å°±æ˜¯ç”¨äº†éšæ°´å°ã€‚è¿™å…¶å®å¾ˆå¤§ç¨‹åº¦ä¸æ˜¯å‰ç«¯çš„èŒƒç•´äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿåº”è¯¥äº†è§£ã€‚AlloyTeamå›¢é˜Ÿå†™è¿‡ä¸€ç¯‡ ä¸èƒ½è¯´çš„ç§˜å¯†â€”â€”å‰ç«¯ä¹Ÿèƒ½ç©çš„å›¾ç‰‡éšå†™æœ¯ ï¼Œé€šè¿‡Canvasç»™å›¾ç‰‡åŠ ä¸Šäº†â€œéšæ°´å°â€ï¼Œé’ˆå¯¹ç”¨æˆ·ä¿å­˜çš„å›¾ç‰‡ï¼Œæ˜¯å¯ä»¥è½»æ¾è¿˜åŸé‡Œé¢éšå«çš„å†…å®¹ï¼Œä½†æ˜¯å¯¹äºæˆªå›¾æˆ–è€…å¤„ç†è¿‡çš„ç…§ç‰‡å´æ— èƒ½ä¸ºåŠ›ï¼Œä¸è¿‡å¯¹äºä¸€äº›æœºå¯†å›¾ç‰‡æ–‡ä»¶å±•ç¤ºï¼Œæ˜¯å¯ä»¥å·å·ç”¨ä¸Šè¯¥æŠ€æœ¯çš„ã€‚ ä½¿ç”¨åŠ å¯†åçš„æ°´å°å†…å®¹å‰ç«¯ç”Ÿæˆçš„æ°´å°ä¹Ÿå¯ä»¥ï¼Œåˆ«äººä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼ç”Ÿæˆï¼Œå¯èƒ½ä¼šæœ‰â€œå«ç¥¸äºäººâ€ï¼ˆå¯èƒ½è¿™æ˜¯å¤šè™‘çš„ï¼‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦æœ‰æ›´å®‰å…¨çš„è§£å†³æ–¹æ³•ã€‚æ°´å°å†…å®¹å¯ä»¥åŒ…å«å¤šç§ç¼–ç åçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·åã€ç”¨æˆ·IDã€æ—¶é—´ç­‰ã€‚æ¯”å¦‚æˆ‘ä»¬åªæ˜¯æƒ³ä¿å­˜ç”¨æˆ·å”¯ä¸€çš„ç”¨æˆ·IDï¼Œéœ€è¦æŠŠç”¨æˆ·IDä¼ å…¥ä¸‹é¢çš„md5æ–¹æ³•ï¼Œå°±å¯ä»¥ç”Ÿæˆå”¯ä¸€æ ‡è¯†ã€‚ç¼–ç åçš„ä¿¡æ¯æ˜¯ä¸å¯é€†çš„ï¼Œä½†å¯ä»¥é€šè¿‡å…¨å±€éå†æ‰€æœ‰ç”¨æˆ·çš„æ–¹å¼è¿›è¡Œè¿½æº¯ã€‚è¿™æ ·å°±å¯ä»¥é˜²æ­¢æ°´å°é€ å‡ä¹Ÿå¯ä»¥è¿½æº¯çœŸæ­£æ°´å°çš„ä¿¡æ¯ã€‚ // MD5åŠ å¯†åº“ utility const utils = require(&#39;utility&#39;) // åŠ ç›MD5 exports.md5 = function (content) { const salt = &#39;microzz_asd!@#IdSDAS~~&#39;; return utils.md5(utils.md5(content + salt)); } æ€»ç»“å®‰å…¨é—®é¢˜ä¸èƒ½å¤§æ„ï¼Œå¯¹äºä¸€äº›æ¯”è¾ƒæ•æ„Ÿçš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»„åˆä½¿ç”¨ä¸Šè¿°çš„æ°´å°æ–¹æ¡ˆï¼Œè¿™æ ·æ‰èƒ½æœ€å¤§ç¨‹åº¦ç»™æµè§ˆè€…è­¦ç¤ºçš„ä½œç”¨ï¼Œå‡å°‘æ³„å¯†çš„æƒ…å†µã€‚ å‚è€ƒé“¾æ¥ ä¸èƒ½è¯´çš„ç§˜å¯†â€”â€”å‰ç«¯ä¹Ÿèƒ½ç©çš„å›¾ç‰‡éšå†™æœ¯ é˜®ä¸€å³°-Mutation Observer API lucifer-åŸºäºKMæ°´å°çš„å›¾ç‰‡ç½‘é¡µæ°´å°å®ç°æ–¹æ¡ˆ damon-ç½‘é¡µæ°´å°æ˜æ°´å°å‰ç«¯SVGå®ç°æ–¹æ¡ˆ","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"Canvas","slug":"Canvas","permalink":"https://microzz.com/tags/Canvas/"},{"name":"SVG","slug":"SVG","permalink":"https://microzz.com/tags/SVG/"},{"name":"éšæ°´å°","slug":"éšæ°´å°","permalink":"https://microzz.com/tags/éšæ°´å°/"},{"name":"NodeJS","slug":"NodeJS","permalink":"https://microzz.com/tags/NodeJS/"}]},{"title":"Linux/Macä¸‹SSHæ— å¯†ç ç™»å½•æœåŠ¡å™¨é…ç½®","date":"2018-03-27T09:57:24.000Z","path":"2018/03/27/ssh-login/","text":"Linux/Macä¸‹å®ç°SSHæ— å¯†ç ç™»å½•æœåŠ¡å™¨åœ¨å¯ä¿¡è®¾å¤‡ä¸Šæ¯æ¬¡è¿æ¥æœåŠ¡å™¨éƒ½æ¯”è¾ƒç¹çï¼Œç°åœ¨é€šè¿‡é…ç½®å…¬ç§é’¥å°±å¯ä»¥å®ç°æ— å¯†ç ç™»å½•ã€‚ æ­¥éª¤é¦–å…ˆæˆ‘ä»¬åœ¨è‡ªå·±çš„Linuxç³»ç»Ÿï¼ˆå®¢æˆ·ç«¯ï¼Œè¿™é‡Œæ˜¯Macï¼‰ä¸Šç”Ÿæˆä¸€å¯¹SSH Keyï¼šSSHå¯†é’¥å’ŒSSHå…¬é’¥ã€‚å¯†é’¥ä¿å­˜åœ¨è‡ªå·±çš„Linuxç³»ç»Ÿä¸Šã€‚ç„¶åå…¬é’¥ä¸Šä¼ åˆ°LinuxæœåŠ¡å™¨ã€‚ä¹‹åæˆ‘ä»¬å°±èƒ½æ— å¯†ç SSHç™»å½•äº†ã€‚SSHå¯†é’¥å°±å¥½æ¯”æ˜¯ä½ çš„èº«ä»½è¯æ˜ å®¢æˆ·ç«¯è¿™é‡Œç”¨Macçš„ç»ˆç«¯ç¯å¢ƒåšæ¼”ç¤º åˆ‡æ¢åˆ°ç”¨æˆ·åä¸‹é¢çš„.sshè·¯å¾„ä¸‹:cd ~/.ssh lsæŸ¥çœ‹ç›®å½•ä¸‹é¢æœ‰æ²¡æœ‰id_rsaã€id_rsa.pubæ–‡ä»¶ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å¯ä»¥è·³è¿‡3æ“ä½œ æ‰“å¼€ç»ˆç«¯ï¼Œä½¿ç”¨ä¸‹é¢çš„ssh-keygenæ¥ç”ŸæˆRSAå¯†é’¥å’Œå…¬é’¥ï¼-tè¡¨ç¤ºtypeï¼Œå°±æ˜¯è¯´è¦ç”ŸæˆRSAåŠ å¯†çš„é’¥åŒ™ï¼é»˜è®¤çš„RSAé•¿åº¦æ˜¯2048ä½ã€‚å¦‚æœä½ éå¸¸æ³¨é‡å®‰å…¨ï¼Œé‚£ä¹ˆå¯ä»¥æŒ‡å®š4096ä½çš„é•¿åº¦ssh-keygen -t rsa -b 4096 -C &quot;Your Email&quot;ç”ŸæˆSSH Keyçš„è¿‡ç¨‹ä¸­ä¼šè¦æ±‚ä½ æŒ‡å®šä¸€ä¸ªæ–‡ä»¶æ¥ä¿å­˜å¯†é’¥ï¼ŒæŒ‰Enteré”®ä½¿ç”¨é»˜è®¤çš„æ–‡ä»¶å°±è¡Œäº†ã€‚ç„¶åéœ€è¦è¾“å…¥ä¸€ä¸ªå¯†ç æ¥åŠ å¯†ä½ çš„SSH Keyã€‚SSHç§é’¥ä¼šä¿å­˜åœ¨ç›®å½•ä¸‹çš„ï½/.ssh/id_rsaæ–‡ä»¶ä¸­ã€‚SSHå…¬é’¥ä¿å­˜åœ¨ï½/.ssh/id_rsa.pubæ–‡ä»¶ä¸­ æœåŠ¡å™¨ åœ¨ç”¨æˆ·ï½/ç›®å½•ä¸‹ï¼ŒåŒæ ·ç”Ÿæˆç§é’¥å’Œå…¬é’¥ssh-keygen -t rsa -b 4096 -C &quot;Your Email&quot; å¼€å¯sshä»£ç†eval &quot;$(ssh-agent -s)&quot; æŠŠkeyåŠ å…¥ä»£ç†ä¸­ssh-add ~/.ssh/id_rsa ç²˜è´´æœ¬åœ°çš„å…¬é’¥åˆ°æœåŠ¡å™¨ vi ~/.ssh/authorized_keys ä¹Ÿå¯ä»¥ä½¿ç”¨ssh-copy-idå‘½ä»¤æ¥å®Œæˆã€‚ssh-copy-id username@remote-serverè¾“å…¥è¿œç¨‹ç”¨æˆ·çš„å¯†ç åï¼ŒSSHå…¬é’¥å°±ä¼šè‡ªåŠ¨ä¸Šä¼ äº†ã€‚SSHå…¬é’¥ä¿å­˜åœ¨è¿œç¨‹LinuxæœåŠ¡å™¨çš„ï½/.ssh/authorized_keysæ–‡ä»¶ä¸­ï¼ æˆæƒæ–‡ä»¶chmod 600 authorized_keys é‡å¯æœåŠ¡sudo service sshd restart åˆ°è¿™é‡Œä½ å°±å¯ä»¥ç›´æ¥åœ¨ä½ æœ¬åœ°ssh username@remote-serverå®ç°æ— å¯†ç ç™»å½•æœåŠ¡å™¨äº†ï¼Œéå¸¸æ–¹ä¾¿ã€‚ alias åˆ«åç™»å½•ä¸Šé¢æˆ‘ä»¬è¦ç™»å½•æœåŠ¡å™¨æ—¶è¿˜æ˜¯è¦ssh username@remote-serveræœåŠ¡å™¨åœ°å€ä¸€èˆ¬ä¸å¥½è®°ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥åœ¨Macç»ˆç«¯é‡Œé¢è®¾ç½®åˆ«åï¼Œç®€å†™å¾ˆå¤šæ“ä½œã€‚è¿™é‡Œä»¥zshä¸ºä¾‹ä¿®æ”¹aliasåˆ«åå¿«æ·æ–¹å¼ï¼Œå®ç°å¿«é€Ÿç™»å½•æœåŠ¡å™¨ æ‰“å¼€é…ç½®æ–‡ä»¶vi ~/.zshrc æ·»åŠ åˆ«åé…ç½® alias cvm=&quot;ssh root@your_server_address&quot; alias codes=&quot;cd ~/codes&quot; alias down=&quot;cd ~/Downloads&quot; alias desk=&quot;cd ~/Desktop&quot; alias ~=&quot;cd ~&quot; 3.ä½¿é…ç½®ç”Ÿæ•ˆ source ~/.zshrc ç°åœ¨æˆ‘ä»¬åœ¨ç»ˆç«¯è¾“å…¥ cvm å°±å¯ä»¥æ— å¯†ç å¿«é€Ÿç™»å½•è‡ªå·±çš„æœåŠ¡å™¨äº†è¾“å…¥codeså°±å¯ä»¥å¿«æ·è¿›å…¥~/codesæ–‡ä»¶å¤¹ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„å¿«æ·æ–¹å¼ä½ å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ ","tags":[{"name":"Linux","slug":"Linux","permalink":"https://microzz.com/tags/Linux/"},{"name":"ssh","slug":"ssh","permalink":"https://microzz.com/tags/ssh/"},{"name":"æœåŠ¡å™¨","slug":"æœåŠ¡å™¨","permalink":"https://microzz.com/tags/æœåŠ¡å™¨/"}]},{"title":"å‡ è¡Œä»£ç äº†è§£JSä¸­çš„æŸ¯é‡ŒåŒ–å’ŒåæŸ¯é‡ŒåŒ–","date":"2018-01-01T03:29:36.000Z","path":"2018/01/01/curryanduncurry/","text":"å‡ è¡Œä»£ç äº†è§£JavaScriptä¸­çš„curringå’Œuncurringcurry æŸ¯é‡ŒåŒ–åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–ï¼ˆè‹±è¯­ï¼šCurryingï¼‰ï¼Œåˆè¯‘ä¸ºå¡ç‘åŒ–æˆ–åŠ é‡ŒåŒ–ï¼Œæ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚ â€“ ç»´åŸºç™¾ç§‘ ä¸‹é¢å‡ è¡Œä»£ç è¯´æ˜ä¸€ä¸‹ï¼š var curry = function(fn) { var _args = []; return function _f() { if (arguments.length) { Array.prototype.push.apply(_args, arguments); return _f; } return fn.apply(this, _args); } } // ç´¯åŠ æ–¹æ³• var add = curry(function() { return Array.prototype.reduce.call(arguments, function(acc, cur) { return acc + cur; }, 0); }); add(1)(2)(3)(); // 6 add(4)(); // 10 æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å½“å‚æ•°ä¸ºç©ºæ—¶å€™å°±å¯ä»¥æ±‚å‡ºå¯¹åº”çš„å€¼ï¼Œä¹Ÿèµ·åˆ°äº†ä¸€ä¸ªæƒ°æ€§æ±‚å€¼(å»¶è¿Ÿæ±‚å€¼)çš„ç›®çš„ï¼Œåœ¨æŸäº›åœºæ™¯å¯¹æ€§èƒ½æå‡æœ‰ä¸€å®šçš„å¸®åŠ©ã€‚è¿™ä¸ªä¾‹å­å¯èƒ½å¤§å®¶ä¸å¤ªç†Ÿæ‚‰ï¼Œä¸‹é¢è¿™ä¸ªä¾‹å­å¤§å®¶åº”è¯¥éƒ½ä¸é™Œç”Ÿï¼š function add(a) { return function (b) { return a + b; } } var add5 = add(5); add5(10); // 15 add5(20); // 25 uncurry åæŸ¯é‡ŒåŒ–åcurringå°±æ˜¯æŠŠåŸæ¥å·²ç»å›ºå®šçš„å‚æ•°æˆ–è€…thisä¸Šä¸‹æ–‡ç­‰å½“ä½œå‚æ•°å»¶è¿Ÿåˆ°æœªæ¥ä¼ é€’ã€‚ Function.prototype.uncurry = function() { var _this = this; return function() { return Function.prototype.call.apply(_this, arguments); } } var obj = {}; var arr = []; var push = Array.prototype.push.uncurry(); push(obj, &#39;hello&#39;, &#39;world&#39;); // obj {0: &quot;hello&quot;, 1: &quot;world&quot;, length: 2} push(arr, &#39;hello&#39;, &#39;world&#39;); // arr [&quot;hello&quot;, &quot;world&quot;] Aboutä¸ªäººç½‘ç«™ï¼šğŸ”—microzz-ITæŠ€æœ¯åˆ†äº« GitHubï¼šğŸ”—microzz","tags":[{"name":"curring","slug":"curring","permalink":"https://microzz.com/tags/curring/"},{"name":"uncurring","slug":"uncurring","permalink":"https://microzz.com/tags/uncurring/"},{"name":"æŸ¯é‡ŒåŒ–","slug":"æŸ¯é‡ŒåŒ–","permalink":"https://microzz.com/tags/æŸ¯é‡ŒåŒ–/"},{"name":"åæŸ¯é‡ŒåŒ–","slug":"åæŸ¯é‡ŒåŒ–","permalink":"https://microzz.com/tags/åæŸ¯é‡ŒåŒ–/"}]},{"title":"è…¾è®¯AlloyTeamå‰ç«¯å¤§ä¼šAC2017","date":"2017-10-30T05:51:31.000Z","path":"2017/10/30/ac2017/","text":"è…¾è®¯AlloyTeamå‰ç«¯å¤§ä¼šAC2017ä»‹ç» æœ¬æ¬¡å¤§ä¼šå¹²è´§æ¯”è¾ƒå¤šï¼Œå†…å®¹å€¼å¾—æ¯ä¸€ä¸ªå‰ç«¯erå¥½å¥½å¸æ”¶ï¼ˆåé¢æœ‰å¤§ä¼šçš„PPTèµ„æ–™ï¼‰ å¼€åœºèˆè¹ˆè…¾è®¯ä¸“å±èˆå›¢SOSå¥³å­ç»„åˆèˆè¹ˆè¡¨æ¼” è…¾è®¯ä¸“å±èˆå›¢SOSå¥³å­ç»„åˆèˆè¹ˆ é¢å‘äº¿ä¸‡çº§ç”¨æˆ·çš„WebåŒæ„ç›´å‡ºæå¼º AlloyTeam-æå¼º ç›´å‡ºæŠ€æœ¯ä½œä¸ºæå‡é¡µé¢é¦–å±æ€§èƒ½çš„ç»ˆææ‰‹æ®µï¼Œæ—©å·²è¿ç”¨åˆ°è…¾è®¯çš„å„ä¸ªä¸šåŠ¡ä¸­ï¼Œåˆ©ç”¨ç›´å‡ºæŠ€æœ¯ï¼ŒWebé¦–å±é¡µé¢çš„åŠ è½½é€Ÿåº¦èƒ½å¾—åˆ°æå¤§æå‡ã€‚è€Œæœ‰äº†Nodejsçš„æ”¯æŒï¼Œä½¿å¾—åŒæ„ç›´å‡ºä¹Ÿæˆä¸ºäº†å¯èƒ½ï¼Œåˆ©ç”¨åŒæ„ç›´å‡ºï¼Œå‰åç«¯ä¸å¿…å†ä¸ºéœ€è¦åŒæ—¶ç»´æŠ¤ä¸¤å¥—ä»£ç è€Œçƒ¦æ¼ã€‚å…´è¶£éƒ¨è½ä½œä¸ºæ‰‹Qå†…æ—¥å‡è®¿é—®é‡é«˜è¾¾5äº¿+çš„å¤§å‹webä¸šåŠ¡ï¼Œåœ¨åŒæ„ç›´å‡ºæ–¹é¢ä¹Ÿæœ‰éå¸¸å¤šçš„å®æˆ˜ç»éªŒæ¥ä¿è¯æœåŠ¡åœ¨é«˜å¹¶å‘é‡ä¸‹çš„å¯ç”¨æ€§ã€‚æå¼ºå°†ä¸ºä½ æ­æ™“è¿™ä¸€åˆ‡ã€‚ å¤§å‹Webé¡¹ç›®å¯ç”¨æ€§æå‡ - é›¶è„šæœ¬é”™è¯¯çš„å®æˆ˜éƒ­æ—çƒ AlloyTeam-éƒ­æ—çƒ è„šæœ¬é”™è¯¯å¯¹äºå‰ç«¯å¼€å‘è€…ä¸€ç‚¹éƒ½ä¸é™Œç”Ÿï¼Œä¸€æ—¦å‘ç”Ÿè„šæœ¬é”™è¯¯ï¼Œè½»åˆ™å½±å“é¡µé¢çš„ä¸€äº›åŠŸèƒ½ï¼Œé‡åˆ™ç›´æ¥å¯¼è‡´é¡µé¢ç™½å±ã€‚è™½ç„¶æˆ‘ä»¬åœ¨å¼€å‘ä¸­ç«­åŠ›é¿å…é¡µé¢å‡ºç°è„šæœ¬é”™è¯¯ï¼Œä½†å› ä¸ºç”¨æˆ·å¤„åœ¨å„å¼‚çš„ç½‘ç»œæƒ…å†µã€ä¸åŒçš„æµè§ˆå™¨ç±»å‹ç­‰å¤æ‚åœºæ™¯ä¸­ï¼Œè„šæœ¬é”™è¯¯æ¯å¤©ä»ç„¶å¤§é‡å‘ç”Ÿåœ¨ç”¨æˆ·çš„é¡µé¢ä¸Šã€‚AlloyTeamå›¢é˜Ÿåœ¨903036377ç¾¤ç­‰äº¿çº§pvçš„é¡¹ç›®ä¸­ç§¯ç´¯äº†å¤§é‡è„šæœ¬é”™è¯¯ç›‘æ§å’Œä¼˜åŒ–çš„ç›¸å…³ç»éªŒã€‚Joeyguoå°†é€šè¿‡æ­¤æ¬¡åˆ†äº«ï¼Œç”±æµ…å…¥æ·±æ¥è®²è§£å¦‚ä½•è®¾è®¡å’Œæ­å»ºä¸€ä¸ªå®Œå–„çš„è„šæœ¬é”™è¯¯ç›‘æ§ä¸ŠæŠ¥ã€é«˜æ•ˆå®šä½ä»¥åŠè°ƒä¼˜çš„å®æˆ˜æ–¹æ¡ˆã€‚ å¦‚ä½•æ„å»ºåç°ä»£å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘ä½“ç³»ææˆç†™ AlloyTeam-ææˆç†™ AlloyTeamä¸€ç›´æ˜¯è…¾è®¯å‰ç«¯çš„ä¸šç•Œæ ‡æ†ã€‚åœ¨ä¸šåŠ¡ä¸Šï¼Œå›¢é˜Ÿè´Ÿè´£903036377ç¾¤ã€å…´è¶£éƒ¨è½ã€äº’åŠ¨ç›´æ’­ç­‰å‡ å¤§ä¸šåŠ¡çš„ä¼—å¤šéœ€æ±‚ã€‚åœ¨å…¬å¸å†…ï¼Œå›¢é˜Ÿåˆ›é€ å¹¶ç»´æŠ¤äº†è®¸å¤šå·¥å…·å¹³å°ã€‚åœ¨å…¬å¸å¤–ï¼Œå›¢é˜ŸåŠå¤§ä¼šï¼Œåšå¼€æºï¼Œå†™æ–‡ç« ï¼Œåšåˆ†äº«ã€‚åˆ°åº•æ˜¯AlloyTeamæ˜¯å‡­å€Ÿä»€ä¹ˆæˆä¸ºå¦‚æ­¤é«˜æ•ˆçš„å¼€å‘å›¢é˜Ÿå‘¢ï¼Ÿææˆç†™çš„æ­¤æ¬¡åˆ†äº«å°†ä¼šä¸ºä½ æ­å¼€ç¥ç§˜é¢çº±ï¼Œä»‹ç»AlloyTeamæˆå‘˜å¦‚ä½•åˆ©ç”¨å‰ç«¯ç°ä»£åŒ–å¼€å‘ä½“ç³»æ¥æé«˜è‡ªå·±çš„å·¥ä½œæ•ˆç‡ã€‚å¦‚æœä½ å¸Œæœ›è‡ªå·±æˆä¸ºä¸€ä¸ªé«˜æ•ˆç‡çš„å‰ç«¯å¼€å‘è€…ï¼Œæ­¤æ¬¡åˆ†äº«ä¸å®¹é”™è¿‡ã€‚ Javascriptä¸æœºå™¨å­¦ä¹ çš„å‰ä¸–ä»Šç”Ÿå¼ ç£Š AlloyTeam-å¼ ç£Š äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ æ˜¯ç›®å‰æœ€ç«çƒ­çš„æŠ€æœ¯ï¼ŒGoogle DeepMindçš„AlphaGoåœ¨ä¸‡ä¼—ç©ç›®ä¸‹æ‰“è´¥äº†å›´æ£‹å¤§å¸ˆæä¸–ä¹­ä¹æ®µå’ŒæŸ¯æ°ä¹æ®µï¼Œæ›´æ˜¯è®©äººä»¬å¯¹äººå·¥æ™ºèƒ½çš„æœŸå¾…åˆ°è¾¾äº†é¡¶ç‚¹ã€‚ä½œä¸ºå¯¹äººå·¥æ™ºèƒ½æ„Ÿå…´è¶£çš„å‰ç«¯å¼€å‘è€…ï¼Œæœºå™¨å­¦ä¹ å’ŒJavaScriptç»“åˆèƒ½å¸®åŠ©æˆ‘ä»¬åšäº›ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿå‰ç«¯å¼€å‘è€…æœ‰æ²¡æœ‰å¯èƒ½åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸè¿›è¡Œæ·±è€•ï¼ŸJavaScriptç¨‹åºå‘˜èƒ½å¤Ÿä»¥ä½•ç§æ–¹å¼è¿›å…¥äººå·¥æ™ºèƒ½ç ”ç©¶çš„é¢†åŸŸï¼ŸAlloyTeamå›¢é˜Ÿçš„å¼ ç£Šå°†ä¸ºä½ ä¸€ä¸€è§£å¯†ã€‚ é«˜æ•ˆH5åŠ¨ç”»è®¾è®¡ä¸æ€§èƒ½ä¼˜åŒ–å»–æ³½æº AlloyTeam-å»–æ³½æº åœ¨ç§»åŠ¨è®¾å¤‡æ€§èƒ½è¶Šæ¥è¶Šå¥½çš„ä»Šå¤©ï¼ŒåŸºæœ¬çš„webå›¾æ–‡å±•ç¤ºæ—©å·²ä¸èƒ½æ»¡è¶³å¹¿å¤§ç”¨æˆ·çš„éœ€æ±‚ï¼Œè€Œéšç€flashæ­£å¼é€€å‡ºå†å²èˆå°ï¼Œh5åŠ¨ç”»å¿…å°†è¿æ¥åˆä¸€æ¬¡çš„é£è·ƒå‘å±•ã€‚å»–æ³½æºçš„æœ¬æ¬¡åˆ†äº«å°†å‘å¤§å®¶ä»‹ç»H5åŠ¨ç”»çš„å„ç§å®ç°åŸç†ã€åœ¨ä¸åŒåœºæ™¯ä¸‹å¦‚ä½•é€‰æ‹©æœ€åˆé€‚çš„åŠ¨ç”»å®ç°æ–¹å¼ã€å¦‚ä½•åœ¨ä¸åŒæœºå‹ä¸‹è¿›è¡Œé€‚é…ï¼Œä»¥åŠå¯¹åŠ¨ç”»æ€§èƒ½å’Œå¯é…ç½®æ€§ä¸Šè¿›è¡Œæ·±å…¥æ¢ç´¢ï¼Œå¸®åŠ©ä½ è½»æ¾åœ¨é¡¹ç›®ä¸­å®ç°å„ç§å„æ ·çš„åŠ¨ç”»ã€‚ ES2017æ—¶ä»£çš„åå‡½æ•°å¼ç¼–ç¨‹ç‹æ–Œ AlloyTeam-ç‹æ–Œ å‡½æ•°å¼ç¼–ç¨‹è‡³ä»Šå·²æœ‰60å¹´å†å²ï¼Œä½†æ—¶è‡³ä»Šæ—¥ä»ç„¶æœ‰è®¸å¤šå¼€å‘è€…è¢«å‡½æ•°å¼ç¼–ç¨‹çš„é­…åŠ›æ‰€æŠ˜æœã€‚å¦‚æœæˆ‘ä»¬å…³æ³¨è¿‡jqueryã€reactã€reduxç­‰æ¡†æ¶çš„æºä»£ç ï¼Œä¼šå‘ç°è¿™äº›æ¡†æ¶ä½œè€…éƒ½åŠ å…¥äº†éå¸¸å¤šçš„å‡½æ•°å¼ç¼–ç¨‹æŠ€å·§ã€‚å‡½æ•°å¼ç¼–ç¨‹ç©¶ç«Ÿæœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿå¯¹æˆ‘ä»¬å‰ç«¯å¼€å‘è€…ç¼–å†™ä»£ç ç©¶ç«Ÿæœ‰ä»€ä¹ˆå¸®åŠ©å‘¢ï¼Ÿç‹æ–Œå°†ä¸ºä½ ä»æµ…å…¥æ·±ä»‹ç»å‡½æ•°å¼ç¼–ç¨‹çš„åŸç†å’Œå®æˆ˜æŠ€å·§ï¼Œè®©ä½ åƒjqueryã€reactã€reduxä½œè€…ä¸€æ ·å†™å‡ºä¼˜é›…çš„ä»£ç ã€‚ å¦‚ä½•æŠŠè‡ªå·±æ„å»ºæˆå¤§å‹äº’è”ç½‘å…¬å¸éœ€è¦çš„å‰ç«¯äººæ‰æ½˜ä½³éŸ© Alloyteam-æ½˜ä½³éŸ© ä½œä¸ºä¸€ä¸ªå‰ç«¯æ–°äººï¼Œä¹Ÿè®¸ä½ æœ‰ç±»ä¼¼è¿™æ ·çš„é—®é¢˜ï¼šâ€œæˆ‘ç°åœ¨å¤§ä¸‰ï¼Œæ€ä¹ˆæ‰èƒ½è¿›å…¥è…¾è®¯å®ä¹ ï¼Ÿâ€â€œæˆ‘ç°åœ¨æ¯•ä¸š1å¹´ï¼Œå¦‚ä½•å­¦ä¹ å‰ç«¯â€â€œæ„Ÿè§‰æˆ‘ç°åœ¨çš„å·¥ä½œæ²¡ä»€ä¹ˆæŠ€æœ¯å«é‡ï¼Œè…¾è®¯çš„å‰ç«¯å·¥ç¨‹å¸ˆæ˜¯æ€ä¹ˆæ ·å·¥ä½œçš„ï¼Ÿâ€è€æ•™æˆ12å¹´è¿›å…¥è…¾è®¯AlloyTeamå·¥ä½œï¼Œä»å‰ç«¯å°ç™½æˆé•¿ä¸ºé«˜çº§å·¥ç¨‹å¸ˆå’Œé¢è¯•å®˜ã€‚æ­¤æ¬¡åˆ†äº«å°†ç»“åˆè€æ•™æˆè‡ªå·±çš„æˆé•¿ç»å†ï¼Œè®²è¿°å¦‚ä½•åœ¨å­¦æ ¡å’Œå·¥ä½œæ—¶å¦‚ä½•æ›´é«˜æ•ˆåœ°å­¦ä¹ å‰ç«¯çŸ¥è¯†ã€æ ¡æ‹›å’Œç¤¾æ‹›é¢è¯•æˆ‘ä»¬åˆ°åº•éœ€è¦ä»€ä¹ˆæ ·çš„å‰ç«¯äººæ‰ã€ä»¥åŠå‰ç«¯æ–°äººå¦‚ä½•è§„åˆ’èŒä¸šå‘å±•ã€‚ä¸è®ºæ˜¯å‰ç«¯æ–°äººè¿˜æ˜¯æœ‰ä¸€å®šå·¥ä½œç»éªŒçš„å¼€å‘è€…ï¼Œæ­¤æ¬¡åˆ†äº«éƒ½å¯ä»¥è®©ä½ å°‘èµ°å¼¯è·¯ï¼Œæ—©æ—¥æˆä¸ºå‰ç«¯å¤§ç‰›ã€‚ AC2017å¤§ä¼šPPTèµ„æ–™ä¸‹è½½é“¾æ¥ï¼šAlloyTeam Conf 2017å¤§ä¼šPPT(å¯†ç ï¼šLcSQjy)","tags":[{"name":"AlloyTeam","slug":"AlloyTeam","permalink":"https://microzz.com/tags/AlloyTeam/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://microzz.com/tags/å‰ç«¯/"},{"name":"åˆ†äº«","slug":"åˆ†äº«","permalink":"https://microzz.com/tags/åˆ†äº«/"},{"name":"é™„ä»¶","slug":"é™„ä»¶","permalink":"https://microzz.com/tags/é™„ä»¶/"}]},{"title":"JSä¸­çš„å±æ€§æè¿°å¯¹è±¡","date":"2017-09-10T00:49:28.000Z","path":"2017/09/10/js-attributes/","text":"JavaScriptä¸­çš„å±æ€§æè¿°å¯¹è±¡æ¦‚è¿°JavaScriptæä¾›äº†ä¸€ä¸ªå†…éƒ¨æ•°æ®ç»“æ„ï¼Œç”¨æ¥æè¿°ä¸€ä¸ªå¯¹è±¡çš„å±æ€§çš„è¡Œä¸ºï¼Œæ§åˆ¶å®ƒçš„è¡Œä¸ºã€‚è¿™è¢«ç§°ä¸ºâ€œå±æ€§æè¿°å¯¹è±¡â€ï¼ˆattributes objectï¼‰ã€‚æ¯ä¸ªå±æ€§éƒ½æœ‰è‡ªå·±å¯¹åº”çš„å±æ€§æè¿°å¯¹è±¡ï¼Œä¿å­˜è¯¥å±æ€§çš„ä¸€äº›å…ƒä¿¡æ¯ã€‚ ä¸‹é¢æ˜¯å±æ€§æè¿°å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ã€‚ { value: 123, writable: false, enumerable: true, configurable: false, get: undefined, set: undefined } å±æ€§æè¿°å¯¹è±¡æä¾›6ä¸ªå…ƒå±æ€§ã€‚ ï¼ˆ1ï¼‰value valueå­˜æ”¾è¯¥å±æ€§çš„å±æ€§å€¼ï¼Œé»˜è®¤ä¸ºundefinedã€‚ ï¼ˆ2ï¼‰writable writableå­˜æ”¾ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå±æ€§å€¼ï¼ˆvalueï¼‰æ˜¯å¦å¯æ”¹å˜ï¼Œé»˜è®¤ä¸ºtrueã€‚ ï¼ˆ3ï¼‰enumerable enumerableå­˜æ”¾ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å±æ€§æ˜¯å¦å¯æšä¸¾ï¼Œé»˜è®¤ä¸ºtrueã€‚å¦‚æœè®¾ä¸ºfalseï¼Œä¼šä½¿å¾—æŸäº›æ“ä½œï¼ˆæ¯”å¦‚for...inå¾ªç¯ã€Object.keys()ï¼‰è·³è¿‡è¯¥å±æ€§ã€‚ ï¼ˆ4ï¼‰configurable configurableå­˜æ”¾ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºâ€œå¯é…ç½®æ€§â€ï¼Œé»˜è®¤ä¸ºtrueã€‚å¦‚æœè®¾ä¸ºfalseï¼Œå°†é˜»æ­¢æŸäº›æ“ä½œæ”¹å†™è¯¥å±æ€§ï¼Œæ¯”å¦‚ï¼Œæ— æ³•åˆ é™¤è¯¥å±æ€§ï¼Œä¹Ÿä¸å¾—æ”¹å˜è¯¥å±æ€§çš„å±æ€§æè¿°å¯¹è±¡ï¼ˆvalueå±æ€§é™¤å¤–ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œconfigurableå±æ€§æ§åˆ¶äº†å±æ€§æè¿°å¯¹è±¡çš„å¯å†™æ€§ã€‚ ï¼ˆ5ï¼‰get getå­˜æ”¾ä¸€ä¸ªå‡½æ•°ï¼Œè¡¨ç¤ºè¯¥å±æ€§çš„å–å€¼å‡½æ•°ï¼ˆgetterï¼‰ï¼Œé»˜è®¤ä¸ºundefinedã€‚ ï¼ˆ6ï¼‰set setå­˜æ”¾ä¸€ä¸ªå‡½æ•°ï¼Œè¡¨ç¤ºè¯¥å±æ€§çš„å­˜å€¼å‡½æ•°ï¼ˆsetterï¼‰ï¼Œé»˜è®¤ä¸ºundefinedã€‚ Object.getOwnPropertyDescriptor()Object.getOwnPropertyDescriptoræ–¹æ³•å¯ä»¥è¯»å‡ºå¯¹è±¡è‡ªèº«å±æ€§çš„å±æ€§æè¿°å¯¹è±¡ã€‚ var o = { p: &#39;a&#39; }; Object.getOwnPropertyDescriptor(o, &#39;p&#39;) // Object { value: &quot;a&quot;, // writable: true, // enumerable: true, // configurable: true // } ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œä½¿ç”¨Object.getOwnPropertyDescriptoræ–¹æ³•ï¼Œè¯»å–oå¯¹è±¡çš„på±æ€§çš„å±æ€§æè¿°å¯¹è±¡ã€‚ Object.defineProperty()ï¼ŒObject.defineProperties()Object.definePropertyæ–¹æ³•å…è®¸é€šè¿‡å®šä¹‰å±æ€§æè¿°å¯¹è±¡ï¼Œæ¥å®šä¹‰æˆ–ä¿®æ”¹ä¸€ä¸ªå±æ€§ï¼Œç„¶åè¿”å›ä¿®æ”¹åçš„å¯¹è±¡ã€‚å®ƒçš„æ ¼å¼å¦‚ä¸‹ã€‚ Object.defineProperty(object, propertyName, attributesObject) ä¸Šé¢ä»£ç ä¸­ï¼ŒObject.definePropertyæ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å±æ€§æ‰€åœ¨çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯å±æ€§åï¼ˆå®ƒåº”è¯¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰ï¼Œç¬¬ä¸‰ä¸ªæ˜¯å±æ€§çš„æè¿°å¯¹è±¡ã€‚æ¯”å¦‚ï¼Œæ–°å»ºä¸€ä¸ªoå¯¹è±¡ï¼Œå¹¶å®šä¹‰å®ƒçš„på±æ€§ï¼Œå†™æ³•å¦‚ä¸‹ã€‚ var o = Object.defineProperty({}, &#39;p&#39;, { value: 123, writable: false, enumerable: true, configurable: false }); o.p // 123 o.p = 246; o.p // 123 // å› ä¸ºwritableä¸ºfalseï¼Œæ‰€ä»¥æ— æ³•æ”¹å˜è¯¥å±æ€§çš„å€¼ å¦‚æœå±æ€§å·²ç»å­˜åœ¨ï¼ŒObject.definePropertyæ–¹æ³•ç›¸å½“äºæ›´æ–°è¯¥å±æ€§çš„å±æ€§æè¿°å¯¹è±¡ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒObject.definePropertyæ–¹æ³•å’Œåé¢çš„Object.definePropertiesæ–¹æ³•ï¼Œéƒ½æœ‰æ€§èƒ½æŸè€—ï¼Œä¼šæ‹–æ…¢æ‰§è¡Œé€Ÿåº¦ï¼Œä¸å®œå¤§é‡ä½¿ç”¨ã€‚ å¦‚æœä¸€æ¬¡æ€§å®šä¹‰æˆ–ä¿®æ”¹å¤šä¸ªå±æ€§ï¼Œå¯ä»¥ä½¿ç”¨Object.definePropertiesæ–¹æ³•ã€‚ var o = Object.defineProperties({}, { p1: { value: 123, enumerable: true }, p2: { value: &#39;abc&#39;, enumerable: true }, p3: { get: function () { return this.p1 + this.p2 }, enumerable:true, configurable:true } }); o.p1 // 123 o.p2 // &quot;abc&quot; o.p3 // &quot;123abc&quot; ä¸Šé¢ä»£ç ä¸­çš„p3å±æ€§ï¼Œå®šä¹‰äº†å–å€¼å‡½æ•°getã€‚è¿™æ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦å®šä¹‰äº†å–å€¼å‡½æ•°getï¼ˆæˆ–å­˜å€¼å‡½æ•°setï¼‰ï¼Œå°±ä¸èƒ½å°†writableè®¾ä¸ºtrueï¼Œæˆ–è€…åŒæ—¶å®šä¹‰valueå±æ€§ï¼Œä¼šæŠ¥é”™ã€‚ var o = {}; Object.defineProperty(o, &#39;p&#39;, { value: 123, get: function() { return 456; } }); // TypeError: Invalid property. // A property cannot both have accessors and be writable or have a value, ä¸Šé¢ä»£ç åŒæ—¶å®šä¹‰äº†getå±æ€§å’Œvalueå±æ€§ï¼Œç»“æœå°±æŠ¥é”™ã€‚ Object.defineProperty()å’ŒObject.defineProperties()çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå±æ€§å¯¹è±¡ã€‚å®ƒçš„writableã€configurableã€enumerableè¿™ä¸‰ä¸ªå±æ€§çš„é»˜è®¤å€¼éƒ½ä¸ºfalseã€‚ var obj = {}; Object.defineProperty(obj, &#39;foo&#39;, { configurable: true }); Object.getOwnPropertyDescriptor(obj, &#39;foo&#39;) // { // value: undefined, // writable: false, // enumerable: false, // configurable: true // } ä¸Šé¢ä»£ç ä¸­ï¼Œå®šä¹‰objå¯¹è±¡çš„fooå±æ€§æ—¶ï¼Œåªå®šä¹‰äº†å¯é…ç½®æ€§configurableä¸ºtrueã€‚ç»“æœï¼Œå…¶ä»–å…ƒå±æ€§éƒ½æ˜¯é»˜è®¤å€¼ã€‚ writableå±æ€§ä¸ºfalseï¼Œè¡¨ç¤ºå¯¹åº”çš„å±æ€§çš„å€¼å°†ä¸å¾—æ”¹å†™ã€‚ var o = {}; Object.defineProperty(o, &#39;p&#39;, { value: &quot;bar&quot; }); o.p // bar o.p = &#39;foobar&#39;; o.p // bar Object.defineProperty(o, &#39;p&#39;, { value: &#39;foobar&#39;, }); // TypeError: Cannot redefine property: p ä¸Šé¢ä»£ç ç”±äºwritableå±æ€§é»˜è®¤ä¸ºfalseï¼Œå¯¼è‡´æ— æ³•å¯¹på±æ€§é‡æ–°èµ‹å€¼ï¼Œä½†æ˜¯ä¸ä¼šæŠ¥é”™ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ï¼‰ã€‚ä¸è¿‡ï¼Œå¦‚æœå†ä¸€æ¬¡ä½¿ç”¨Object.definePropertyæ–¹æ³•å¯¹valueå±æ€§èµ‹å€¼ï¼Œå°±ä¼šæŠ¥é”™ã€‚ configurableå±æ€§ä¸ºfalseï¼Œå°†æ— æ³•åˆ é™¤è¯¥å±æ€§ï¼Œä¹Ÿæ— æ³•ä¿®æ”¹attributeså¯¹è±¡ï¼ˆvalueå±æ€§é™¤å¤–ï¼‰ã€‚ var o = {}; Object.defineProperty(o, &#39;p&#39;, { value: &#39;bar&#39;, }); delete o.p o.p // &quot;bar&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºconfigurableå±æ€§é»˜è®¤ä¸ºfalseï¼Œå¯¼è‡´æ— æ³•åˆ é™¤æŸä¸ªå±æ€§ã€‚ enumerableå±æ€§ä¸ºfalseï¼Œè¡¨ç¤ºå¯¹åº”çš„å±æ€§ä¸ä¼šå‡ºç°åœ¨for...inå¾ªç¯å’ŒObject.keysæ–¹æ³•ä¸­ã€‚ var o = { p1: 10, p2: 13, }; Object.defineProperty(o, &#39;p3&#39;, { value: 3, }); for (var i in o) { console.log(i, o[i]); } // p1 10 // p2 13 ä¸Šé¢ä»£ç ä¸­ï¼Œp3å±æ€§æ˜¯ç”¨Object.definePropertyæ–¹æ³•å®šä¹‰çš„ï¼Œç”±äºenumerableå±æ€§é»˜è®¤ä¸ºfalseï¼Œæ‰€ä»¥ä¸å‡ºç°åœ¨for...inå¾ªç¯ä¸­ã€‚ å…ƒå±æ€§å±æ€§æè¿°å¯¹è±¡çš„å±æ€§ï¼Œè¢«ç§°ä¸ºâ€œå…ƒå±æ€§â€ï¼Œå› ä¸ºå®ƒå¯ä»¥çœ‹ä½œæ˜¯æ§åˆ¶å±æ€§çš„å±æ€§ã€‚ å¯æšä¸¾æ€§ï¼ˆenumerableï¼‰JavaScriptçš„æœ€åˆç‰ˆæœ¬ï¼Œin è¿ç®—ç¬¦å’ŒåŸºäºå®ƒçš„for...inå¾ªç¯ï¼Œä¼šéå†å¯¹è±¡å®ä¾‹çš„æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬ç»§æ‰¿çš„å±æ€§ã€‚ var obj = {}; &#39;toString&#39; in obj // true ä¸Šé¢ä»£ç ä¸­ï¼ŒtoStringä¸æ˜¯objå¯¹è±¡è‡ªèº«çš„å±æ€§ï¼Œä½†æ˜¯inè¿ç®—ç¬¦ä¹Ÿè¿”å›trueï¼Œå¯¼è‡´è¢«for...inå¾ªç¯éå†ï¼Œè¿™æ˜¾ç„¶ä¸å¤ªåˆç†ã€‚åæ¥å°±å¼•å…¥äº†â€œå¯æšä¸¾æ€§â€è¿™ä¸ªæ¦‚å¿µï¼Œåªæœ‰å¯æšä¸¾çš„å±æ€§ï¼Œæ‰ä¼šè¢«for...inå¾ªç¯éå†ï¼ŒåŒæ—¶è¿˜è§„å®šåŸç”Ÿç»§æ‰¿çš„å±æ€§éƒ½æ˜¯ä¸å¯æšä¸¾çš„ï¼Œè¿™æ ·å°±ä¿è¯äº†for...inå¾ªç¯çš„å¯ç”¨æ€§ã€‚ å¯æšä¸¾æ€§ï¼ˆenumerableï¼‰ç”¨æ¥æ§åˆ¶æ‰€æè¿°çš„å±æ€§ï¼Œæ˜¯å¦å°†è¢«åŒ…æ‹¬åœ¨for...inå¾ªç¯ä¹‹ä¸­ã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªå±æ€§çš„enumerableä¸ºfalseï¼Œä¸‹é¢ä¸‰ä¸ªæ“ä½œä¸ä¼šå–åˆ°è¯¥å±æ€§ã€‚ for..inå¾ªç¯ Object.keysæ–¹æ³• JSON.stringifyæ–¹æ³• å› æ­¤ï¼Œenumerableå¯ä»¥ç”¨æ¥è®¾ç½®â€œç§˜å¯†â€å±æ€§ã€‚ var o = {a: 1, b: 2}; o.c = 3; Object.defineProperty(o, &#39;d&#39;, { value: 4, enumerable: false }); o.d // 4 for (var key in o) { console.log(o[key]); } // 1 // 2 // 3 Object.keys(o) // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;] JSON.stringify(o) // &quot;{a:1, b:2, c:3}&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œdå±æ€§çš„enumerableä¸ºfalseï¼Œæ‰€ä»¥ä¸€èˆ¬çš„éå†æ“ä½œéƒ½æ— æ³•è·å–è¯¥å±æ€§ï¼Œä½¿å¾—å®ƒæœ‰ç‚¹åƒâ€œç§˜å¯†â€å±æ€§ï¼Œä½†ä¸æ˜¯çœŸæ­£çš„ç§æœ‰å±æ€§ï¼Œè¿˜æ˜¯å¯ä»¥ç›´æ¥è·å–å®ƒçš„å€¼ã€‚ åŸºæœ¬ä¸Šï¼ŒJavaScriptåŸç”Ÿæä¾›çš„å±æ€§éƒ½æ˜¯ä¸å¯æšä¸¾çš„ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§éƒ½æ˜¯å¯æšä¸¾çš„ã€‚ ä¸æšä¸¾æ€§ç›¸å…³çš„å‡ ä¸ªæ“ä½œçš„åŒºåˆ«çš„æ˜¯ï¼Œfor...inå¾ªç¯åŒ…æ‹¬ç»§æ‰¿è‡ªåŸå‹å¯¹è±¡çš„å±æ€§ï¼ŒObject.keysæ–¹æ³•åªè¿”å›å¯¹è±¡æœ¬èº«çš„å±æ€§ã€‚å¦‚æœéœ€è¦è·å–å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ï¼Œä¸ç®¡æ˜¯å¦å¯æšä¸¾ï¼Œå¯ä»¥ä½¿ç”¨Object.getOwnPropertyNamesæ–¹æ³•ï¼Œè¯¦è§ä¸‹æ–‡ã€‚ è€ƒè™‘åˆ°JSON.stringifyæ–¹æ³•ä¼šæ’é™¤enumerableä¸ºfalseçš„å€¼ï¼Œæœ‰æ—¶å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œä¸ºå¯¹è±¡æ·»åŠ æ³¨é‡Šä¿¡æ¯ã€‚ var car = { id: 123, color: &#39;red&#39;, ownerId: 12 }; var owner = { id: 12, name: &#39;Jack&#39; }; Object.defineProperty(car, &#39;ownerInfo&#39;, { value: owner, enumerable: false }); car.ownerInfo // {id: 12, name: &quot;Jack&quot;} JSON.stringify(car) // &quot;{&quot;id&quot;: 123,&quot;color&quot;: &quot;red&quot;,&quot;ownerId&quot;: 12}&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œownerå¯¹è±¡ä½œä¸ºæ³¨é‡Šéƒ¨åˆ†ï¼ŒåŠ å…¥carå¯¹è±¡ã€‚ç”±äºownerInfoå±æ€§ä¸å¯æšä¸¾ï¼Œæ‰€ä»¥JSON.stringifyæ–¹æ³•æœ€åè¾“å‡ºcarå¯¹è±¡æ—¶ï¼Œä¼šå¿½ç•¥ownerInfoå±æ€§ã€‚ è¿™æç¤ºæˆ‘ä»¬ï¼Œå¦‚æœä½ ä¸æ„¿æ„æŸäº›å±æ€§å‡ºç°åœ¨JSONè¾“å‡ºä¹‹ä¸­ï¼Œå¯ä»¥æŠŠå®ƒçš„enumerableå±æ€§è®¾ä¸ºfalseã€‚ å¯é…ç½®æ€§ï¼ˆconfigurableï¼‰å¯é…ç½®æ€§ï¼ˆconfigurableï¼‰å†³å®šäº†æ˜¯å¦å¯ä»¥ä¿®æ”¹å±æ€§æè¿°å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“configurableä¸ºfalseçš„æ—¶å€™ï¼Œvalueã€writableã€enumerableå’Œconfigurableéƒ½ä¸èƒ½è¢«ä¿®æ”¹äº†ã€‚ var o = Object.defineProperty({}, &#39;p&#39;, { value: 1, writable: false, enumerable: false, configurable: false }); Object.defineProperty(o,&#39;p&#39;, {value: 2}) // TypeError: Cannot redefine property: p Object.defineProperty(o,&#39;p&#39;, {writable: true}) // TypeError: Cannot redefine property: p Object.defineProperty(o,&#39;p&#39;, {enumerable: true}) // TypeError: Cannot redefine property: p Object.defineProperties(o,&#39;p&#39;,{configurable: true}) // TypeError: Cannot redefine property: p ä¸Šé¢ä»£ç é¦–å…ˆå®šä¹‰å¯¹è±¡oï¼Œå¹¶ä¸”å®šä¹‰oçš„å±æ€§pçš„configurableä¸ºfalseã€‚ç„¶åï¼Œé€ä¸€æ”¹åŠ¨valueã€writableã€enumerableã€configurableï¼Œç»“æœéƒ½æŠ¥é”™ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œwritableåªæœ‰åœ¨ä»falseæ”¹ä¸ºtrueä¼šæŠ¥é”™ï¼Œä»trueæ”¹ä¸ºfalseåˆ™æ˜¯å…è®¸çš„ã€‚ var o = Object.defineProperty({}, &#39;p&#39;, { writable: true, configurable: false }); Object.defineProperty(o,&#39;p&#39;, {writable: false}) // ä¿®æ”¹æˆåŠŸ è‡³äºvalueï¼Œåªè¦writableå’Œconfigurableæœ‰ä¸€ä¸ªä¸ºtrueï¼Œå°±å…è®¸æ”¹åŠ¨ã€‚ var o1 = Object.defineProperty({}, &#39;p&#39;, { value: 1, writable: true, configurable: false }); Object.defineProperty(o1,&#39;p&#39;, {value: 2}) // ä¿®æ”¹æˆåŠŸ var o2 = Object.defineProperty({}, &#39;p&#39;, { value: 1, writable: false, configurable: true }); Object.defineProperty(o2,&#39;p&#39;, {value: 2}) // ä¿®æ”¹æˆåŠŸ å¦å¤–ï¼Œconfigurableä¸ºfalseæ—¶ï¼Œç›´æ¥å¯¹è¯¥å±æ€§èµ‹å€¼ï¼Œä¸æŠ¥é”™ï¼Œä½†ä¸ä¼šæˆåŠŸã€‚ var o = Object.defineProperty({}, &#39;p&#39;, { value: 1, configurable: false }); o.p = 2; o.p // 1 ä¸Šé¢ä»£ç ä¸­ï¼Œoå¯¹è±¡çš„på±æ€§æ˜¯ä¸å¯é…ç½®çš„ï¼Œå¯¹å®ƒèµ‹å€¼æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚ å¯é…ç½®æ€§å†³å®šäº†ä¸€ä¸ªå˜é‡æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ï¼ˆdeleteï¼‰ã€‚ var o = Object.defineProperties({}, { p1: { value: 1, configurable: true }, p2: { value: 2, configurable: false } }); delete o.p1 // true delete o.p2 // false o.p1 // undefined o.p2 // 2 ä¸Šé¢ä»£ç ä¸­çš„å¯¹è±¡oæœ‰ä¸¤ä¸ªå±æ€§ï¼Œp1æ˜¯å¯é…ç½®çš„ï¼Œp2æ˜¯ä¸å¯é…ç½®çš„ã€‚ç»“æœï¼Œp2å°±æ— æ³•åˆ é™¤ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä½¿ç”¨varå‘½ä»¤å£°æ˜å˜é‡æ—¶ï¼Œå˜é‡çš„configurableä¸ºfalseã€‚ var a1 = 1; Object.getOwnPropertyDescriptor(this,&#39;a1&#39;) // Object { // value: 1, // writable: true, // enumerable: true, // configurable: false // } è€Œä¸ä½¿ç”¨varå‘½ä»¤å£°æ˜å˜é‡æ—¶ï¼ˆæˆ–è€…ä½¿ç”¨å±æ€§èµ‹å€¼çš„æ–¹å¼å£°æ˜å˜é‡ï¼‰ï¼Œå˜é‡çš„å¯é…ç½®æ€§ä¸ºtrueã€‚ a2 = 1; Object.getOwnPropertyDescriptor(this,&#39;a2&#39;) // Object { // value: 1, // writable: true, // enumerable: true, // configurable: true // } // æˆ–è€…å†™æˆ window.a3 = 1; Object.getOwnPropertyDescriptor(window, &#39;a3&#39;) // Object { // value: 1, // writable: true, // enumerable: true, // configurable: true // } ä¸Šé¢ä»£ç ä¸­çš„this.a3 = 1ä¸a3 = 1æ˜¯ç­‰ä»·çš„å†™æ³•ã€‚windowæŒ‡çš„æ˜¯æµè§ˆå™¨çš„é¡¶å±‚å¯¹è±¡ã€‚ è¿™ç§å·®å¼‚æ„å‘³ç€ï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ˜¯ä½¿ç”¨varå‘½ä»¤ç”Ÿæˆçš„ï¼Œå°±æ— æ³•ç”¨deleteå‘½ä»¤åˆ é™¤ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œdeleteåªèƒ½åˆ é™¤å¯¹è±¡çš„å±æ€§ã€‚ var a1 = 1; a2 = 1; delete a1 // false delete a2 // true a1 // 1 a2 // ReferenceError: a2 is not defined å¯å†™æ€§ï¼ˆwritableï¼‰å¯å†™æ€§ï¼ˆwritableï¼‰å†³å®šäº†å±æ€§çš„å€¼ï¼ˆvalueï¼‰æ˜¯å¦å¯ä»¥è¢«æ”¹å˜ã€‚ var o = {}; Object.defineProperty(o, &#39;a&#39;, { value: 37, writable: false }); o.a // 37 o.a = 25; o.a // 37 ä¸Šé¢ä»£ç å°†oå¯¹è±¡çš„aå±æ€§å¯å†™æ€§è®¾ä¸ºfalseï¼Œç„¶åæ”¹å˜è¿™ä¸ªå±æ€§çš„å€¼ï¼Œå°±ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœã€‚ æ³¨æ„ï¼Œæ­£å¸¸æ¨¡å¼ä¸‹ï¼Œå¯¹å¯å†™æ€§ä¸ºfalseçš„å±æ€§èµ‹å€¼ä¸ä¼šæŠ¥é”™ï¼Œåªä¼šé»˜é»˜å¤±è´¥ã€‚ä½†æ˜¯ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ï¼Œå³ä½¿æ˜¯å¯¹aå±æ€§é‡æ–°èµ‹äºˆä¸€ä¸ªåŒæ ·çš„å€¼ã€‚ å…³äºå¯å†™æ€§ï¼Œè¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚å°±æ˜¯å¦‚æœåŸå‹å¯¹è±¡çš„æŸä¸ªå±æ€§çš„å¯å†™æ€§ä¸ºfalseï¼Œé‚£ä¹ˆæ´¾ç”Ÿå¯¹è±¡å°†æ— æ³•è‡ªå®šä¹‰è¿™ä¸ªå±æ€§ã€‚ var proto = Object.defineProperty({}, &#39;foo&#39;, { value: &#39;a&#39;, writable: false }); var o = Object.create(proto); o.foo = &#39;b&#39;; o.foo // &#39;a&#39; ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡protoçš„fooå±æ€§ä¸å¯å†™ï¼Œç»“æœprotoçš„æ´¾ç”Ÿå¯¹è±¡oï¼Œä¹Ÿä¸å¯ä»¥å†è‡ªå®šä¹‰è¿™ä¸ªå±æ€§äº†ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™æ ·åšè¿˜ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªè§„é¿æ–¹æ³•ï¼Œå°±æ˜¯é€šè¿‡è¦†ç›–å±æ€§æè¿°å¯¹è±¡ï¼Œç»•è¿‡è¿™ä¸ªé™åˆ¶ï¼ŒåŸå› æ˜¯è¿™ç§æƒ…å†µä¸‹ï¼ŒåŸå‹é“¾ä¼šè¢«å®Œå…¨å¿½è§†ã€‚ Object.defineProperty(o, &#39;foo&#39;, { value: &#39;b&#39; }); o.foo // &#39;b&#39; Object.getOwnPropertyNames()Object.getOwnPropertyNamesæ–¹æ³•è¿”å›ç›´æ¥å®šä¹‰åœ¨æŸä¸ªå¯¹è±¡ä¸Šé¢çš„å…¨éƒ¨å±æ€§çš„åç§°ï¼Œè€Œä¸ç®¡è¯¥å±æ€§æ˜¯å¦å¯æšä¸¾ã€‚ var o = Object.defineProperties({}, { p1: { value: 1, enumerable: true }, p2: { value: 2, enumerable: false } }); Object.getOwnPropertyNames(o) // [&quot;p1&quot;, &quot;p2&quot;] ä¸€èˆ¬æ¥è¯´ï¼Œç³»ç»ŸåŸç”Ÿçš„å±æ€§ï¼ˆå³éç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§ï¼‰éƒ½æ˜¯ä¸å¯æšä¸¾çš„ã€‚ // æ¯”å¦‚ï¼Œæ•°ç»„å®ä¾‹è‡ªå¸¦lengthå±æ€§æ˜¯ä¸å¯æšä¸¾çš„ Object.keys([]) // [] Object.getOwnPropertyNames([]) // [ &#39;length&#39; ] // Object.prototypeå¯¹è±¡çš„è‡ªå¸¦å±æ€§ä¹Ÿéƒ½æ˜¯ä¸å¯æšä¸¾çš„ Object.keys(Object.prototype) // [] Object.getOwnPropertyNames(Object.prototype) // [&#39;hasOwnProperty&#39;, // &#39;valueOf&#39;, // &#39;constructor&#39;, // &#39;toLocaleString&#39;, // &#39;isPrototypeOf&#39;, // &#39;propertyIsEnumerable&#39;, // &#39;toString&#39;] ä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œæ•°ç»„çš„å®ä¾‹å¯¹è±¡ï¼ˆ[]ï¼‰æ²¡æœ‰å¯æšä¸¾å±æ€§ï¼Œä¸å¯æšä¸¾å±æ€§æœ‰lengthï¼›Object.prototypeå¯¹è±¡ä¹Ÿæ²¡æœ‰å¯æšä¸¾å±æ€§ï¼Œä½†æ˜¯æœ‰ä¸å°‘ä¸å¯æšä¸¾å±æ€§ã€‚ Object.prototype.propertyIsEnumerable()å¯¹è±¡å®ä¾‹çš„propertyIsEnumerableæ–¹æ³•ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå±æ€§æ˜¯å¦å¯æšä¸¾ã€‚ var o = {}; o.p = 123; o.propertyIsEnumerable(&#39;p&#39;) // true o.propertyIsEnumerable(&#39;toString&#39;) // false ä¸Šé¢ä»£ç ä¸­ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„på±æ€§æ˜¯å¯æšä¸¾çš„ï¼Œè€Œç»§æ‰¿è‡ªåŸå‹å¯¹è±¡çš„toStringå±æ€§æ˜¯ä¸å¯æšä¸¾çš„ã€‚ å­˜å–å™¨ï¼ˆaccessorï¼‰é™¤äº†ç›´æ¥å®šä¹‰ä»¥å¤–ï¼Œå±æ€§è¿˜å¯ä»¥ç”¨å­˜å–å™¨ï¼ˆaccessorï¼‰å®šä¹‰ã€‚å…¶ä¸­ï¼Œå­˜å€¼å‡½æ•°ç§°ä¸ºsetterï¼Œä½¿ç”¨setå‘½ä»¤ï¼›å–å€¼å‡½æ•°ç§°ä¸ºgetterï¼Œä½¿ç”¨getå‘½ä»¤ã€‚ å­˜å–å™¨æä¾›çš„æ˜¯è™šæ‹Ÿå±æ€§ï¼Œå³è¯¥å±æ€§çš„å€¼ä¸æ˜¯å®é™…å­˜åœ¨çš„ï¼Œè€Œæ˜¯æ¯æ¬¡è¯»å–æ—¶è®¡ç®—ç”Ÿæˆçš„ã€‚åˆ©ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥å®ç°è®¸å¤šé«˜çº§ç‰¹æ€§ï¼Œæ¯”å¦‚æ¯ä¸ªå±æ€§ç¦æ­¢èµ‹å€¼ã€‚ var o = { get p() { return &#39;getter&#39;; }, set p(value) { console.log(&#39;setter: &#39; + value); } }; ä¸Šé¢ä»£ç ä¸­ï¼Œoå¯¹è±¡å†…éƒ¨çš„getå’Œsetå‘½ä»¤ï¼Œåˆ†åˆ«å®šä¹‰äº†på±æ€§çš„å–å€¼å‡½æ•°å’Œå­˜å€¼å‡½æ•°ã€‚å®šä¹‰äº†è¿™ä¸¤ä¸ªå‡½æ•°ä¹‹åï¼Œå¯¹på±æ€§å–å€¼æ—¶ï¼Œå–å€¼å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨ï¼›å¯¹på±æ€§èµ‹å€¼æ—¶ï¼Œå­˜å€¼å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨ã€‚ o.p // &quot;getter&quot; o.p = 123 // &quot;setter: 123&quot; æ³¨æ„ï¼Œå–å€¼å‡½æ•°Getterä¸èƒ½æ¥å—å‚æ•°ï¼Œå­˜å€¼å‡½æ•°Setteråªèƒ½æ¥å—ä¸€ä¸ªå‚æ•°ï¼ˆå³å±æ€§çš„å€¼ï¼‰ã€‚å¦å¤–ï¼Œå¯¹è±¡ä¹Ÿä¸èƒ½æœ‰ä¸å–å€¼å‡½æ•°åŒåçš„å±æ€§ã€‚æ¯”å¦‚ï¼Œä¸Šé¢çš„å¯¹è±¡oè®¾ç½®äº†å–å€¼å‡½æ•°pä»¥åï¼Œå°±ä¸èƒ½å†å¦å¤–å®šä¹‰ä¸€ä¸ªpå±æ€§ã€‚ å­˜å–å™¨å¾€å¾€ç”¨äºï¼Œå±æ€§çš„å€¼éœ€è¦ä¾èµ–å¯¹è±¡å†…éƒ¨æ•°æ®çš„åœºåˆã€‚ var o ={ $n : 5, get next() { return this.$n++ }, set next(n) { if (n &gt;= this.$n) this.$n = n; else throw &#39;æ–°çš„å€¼å¿…é¡»å¤§äºå½“å‰å€¼&#39;; } }; o.next // 5 o.next = 10; o.next // 10 ä¸Šé¢ä»£ç ä¸­ï¼Œnextå±æ€§çš„å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°ï¼Œéƒ½ä¾èµ–äºå¯¹å†…éƒ¨å±æ€§$nçš„æ“ä½œã€‚ å­˜å–å™¨ä¹Ÿå¯ä»¥é€šè¿‡Object.definePropertyå®šä¹‰ã€‚ var d = new Date(); Object.defineProperty(d, &#39;month&#39;, { get: function () { return d.getMonth(); }, set: function (v) { d.setMonth(v); } }); ä¸Šé¢ä»£ç ä¸ºDateçš„å®ä¾‹å¯¹è±¡dï¼Œå®šä¹‰äº†ä¸€ä¸ªå¯è¯»å†™çš„monthå±æ€§ã€‚ å­˜å–å™¨ä¹Ÿå¯ä»¥ä½¿ç”¨Object.createæ–¹æ³•å®šä¹‰ã€‚ var o = Object.create(Object.prototype, { foo: { get: function () { return &#39;getter&#39;; }, set: function (value) { console.log(&#39;setter: &#39;+value); } } }); å¦‚æœä½¿ç”¨ä¸Šé¢è¿™ç§å†™æ³•ï¼Œå±æ€§fooå¿…é¡»å®šä¹‰ä¸€ä¸ªå±æ€§æè¿°å¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„getå’Œsetå±æ€§ï¼Œåˆ†åˆ«æ˜¯fooçš„å–å€¼å‡½æ•°å’Œå­˜å€¼å‡½æ•°ã€‚ åˆ©ç”¨å­˜å–å™¨ï¼Œå¯ä»¥å®ç°æ•°æ®å¯¹è±¡ä¸DOMå¯¹è±¡çš„åŒå‘ç»‘å®šã€‚ Object.defineProperty(user, &#39;name&#39;, { get: function () { return document.getElementById(&#39;foo&#39;).value; }, set: function (newValue) { document.getElementById(&#39;foo&#39;).value = newValue; }, configurable: true }); ä¸Šé¢ä»£ç ä½¿ç”¨å­˜å–å‡½æ•°ï¼Œå°†DOMå¯¹è±¡fooä¸æ•°æ®å¯¹è±¡userçš„nameå±æ€§ï¼Œå®ç°äº†ç»‘å®šã€‚ä¸¤è€…ä¹‹ä¸­åªè¦æœ‰ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œå°±èƒ½åœ¨å¦ä¸€ä¸ªå¯¹è±¡ä¸Šå®æ—¶åæ˜ å‡ºæ¥ã€‚ å¯¹è±¡çš„æ‹·è´æœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œæ‹·è´åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚ES5æ²¡æœ‰æä¾›è¿™ä¸ªæ–¹æ³•ï¼Œå¿…é¡»è‡ªå·±å®ç°ã€‚ var extend = function (to, from) { for (var property in from) { to[property] = from[property]; } return to; } extend({}, { a: 1 }) // {a: 1} ä¸Šé¢è¿™ä¸ªæ–¹æ³•çš„é—®é¢˜åœ¨äºï¼Œå¦‚æœé‡åˆ°å­˜å–å™¨å®šä¹‰çš„å±æ€§ï¼Œä¼šåªæ‹·è´å€¼ã€‚ extend({}, { get a() { return 1 } }) // {a: 1} ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Object.definePropertyæ–¹æ³•æ¥æ‹·è´å±æ€§ã€‚ var extend = function (to, from) { for (var property in from) { Object.defineProperty( to, property, Object.getOwnPropertyDescriptor(from, property) ); } return to; } extend({}, { get a(){ return 1 } }) // { get a(){ return 1 } }) è¿™æ®µä»£ç è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œæ‹·è´æŸäº›å±æ€§æ—¶ä¼šå¤±æ•ˆã€‚ extend(document.body.style, { backgroundColor: &quot;red&quot; }); ä¸Šé¢ä»£ç çš„ç›®çš„æ˜¯ï¼Œè®¾ç½®document.body.style.backgroundColorå±æ€§ä¸ºredï¼Œä½†æ˜¯å®é™…ä¸Šç½‘é¡µçš„èƒŒæ™¯è‰²å¹¶ä¸ä¼šå˜çº¢ã€‚ä½†æ˜¯ï¼Œå¦‚æœç”¨ç¬¬ä¸€ç§ç®€å•æ‹·è´çš„æ–¹æ³•ï¼Œåè€Œèƒ½å¤Ÿè¾¾åˆ°ç›®çš„ã€‚è¿™æç¤ºæˆ‘ä»¬ï¼Œå¯ä»¥æŠŠä¸¤ç§æ–¹æ³•ç»“åˆèµ·æ¥ï¼Œå¯¹äºç®€å•å±æ€§ï¼Œå°±ç›´æ¥æ‹·è´ï¼Œå¯¹äºé‚£äº›é€šè¿‡å±æ€§æè¿°å¯¹è±¡è®¾ç½®çš„å±æ€§ï¼Œåˆ™ä½¿ç”¨Object.definePropertyæ–¹æ³•æ‹·è´ã€‚ var extend = function (to, from) { for (var property in from) { var descriptor = Object.getOwnPropertyDescriptor(from, property); if (descriptor &amp;&amp; ( !descriptor.writable || !descriptor.configurable || !descriptor.enumerable || descriptor.get || descriptor.set)) { Object.defineProperty(to, property, descriptor); } else { to[property] = from[property]; } } } ä¸Šé¢çš„è¿™æ®µä»£ç ï¼Œå¯ä»¥å¾ˆå¥½åœ°æ‹·è´å¯¹è±¡æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰çš„å±æ€§ã€‚ æ§åˆ¶å¯¹è±¡çŠ¶æ€JavaScriptæä¾›äº†ä¸‰ç§æ–¹æ³•ï¼Œç²¾ç¡®æ§åˆ¶ä¸€ä¸ªå¯¹è±¡çš„è¯»å†™çŠ¶æ€ï¼Œé˜²æ­¢å¯¹è±¡è¢«æ”¹å˜ã€‚æœ€å¼±ä¸€å±‚çš„ä¿æŠ¤æ˜¯Object.preventExtensionsï¼Œå…¶æ¬¡æ˜¯Object.sealï¼Œæœ€å¼ºçš„Object.freezeã€‚ Object.preventExtensions()Object.preventExtensionsæ–¹æ³•å¯ä»¥ä½¿å¾—ä¸€ä¸ªå¯¹è±¡æ— æ³•å†æ·»åŠ æ–°çš„å±æ€§ã€‚ var o = new Object(); Object.preventExtensions(o); Object.defineProperty(o, &#39;p&#39;, { value: &#39;hello&#39; }); // TypeError: Cannot define property:p, object is not extensible. o.p = 1; o.p // undefined å¦‚æœæ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ (function () { &#39;use strict&#39;; o.p = &#39;1&#39; }()); // TypeError: Can&#39;t add property bar, object is not extensible ä¸è¿‡ï¼Œå¯¹äºä½¿ç”¨äº†preventExtensionsæ–¹æ³•çš„å¯¹è±¡ï¼Œå¯ä»¥ç”¨deleteå‘½ä»¤åˆ é™¤å®ƒçš„ç°æœ‰å±æ€§ã€‚ var o = new Object(); o.p = 1; Object.preventExtensions(o); delete o.p; o.p // undefined Object.isExtensible()Object.isExtensibleæ–¹æ³•ç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä½¿ç”¨äº†Object.preventExtensionsæ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥ä¸ºä¸€ä¸ªå¯¹è±¡æ·»åŠ å±æ€§ã€‚ var o = new Object(); Object.isExtensible(o) // true Object.preventExtensions(o); Object.isExtensible(o) // false ä¸Šé¢ä»£ç æ–°ç”Ÿæˆäº†ä¸€ä¸ªoå¯¹è±¡ï¼Œå¯¹è¯¥å¯¹è±¡ä½¿ç”¨Object.isExtensibleæ–¹æ³•ï¼Œè¿”å›trueï¼Œè¡¨ç¤ºå¯ä»¥æ·»åŠ æ–°å±æ€§ã€‚å¯¹è¯¥å¯¹è±¡ä½¿ç”¨Object.preventExtensionsæ–¹æ³•ä»¥åï¼Œå†ä½¿ç”¨Object.isExtensibleæ–¹æ³•ï¼Œè¿”å›falseï¼Œè¡¨ç¤ºå·²ç»ä¸èƒ½æ·»åŠ æ–°å±æ€§äº†ã€‚ Object.seal()Object.sealæ–¹æ³•ä½¿å¾—ä¸€ä¸ªå¯¹è±¡æ—¢æ— æ³•æ·»åŠ æ–°å±æ€§ï¼Œä¹Ÿæ— æ³•åˆ é™¤æ—§å±æ€§ã€‚ var o = { p: &#39;hello&#39; }; Object.seal(o); delete o.p; o.p // &quot;hello&quot; o.x = &#39;world&#39;; o.x // undefined ä¸Šé¢ä»£ç ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡æ‰§è¡ŒObject.sealæ–¹æ³•ä»¥åï¼Œå°±æ— æ³•æ·»åŠ æ–°å±æ€§å’Œåˆ é™¤æ—§å±æ€§äº†ã€‚ Object.sealå®è´¨æ˜¯æŠŠå±æ€§æè¿°å¯¹è±¡çš„configurableå±æ€§è®¾ä¸ºfalseï¼Œå› æ­¤å±æ€§æè¿°å¯¹è±¡ä¸å†èƒ½æ”¹å˜äº†ã€‚ var o = { p: &#39;a&#39; }; // sealæ–¹æ³•ä¹‹å‰ Object.getOwnPropertyDescriptor(o, &#39;p&#39;) // Object { // value: &quot;a&quot;, // writable: true, // enumerable: true, // configurable: true // } Object.seal(o); // sealæ–¹æ³•ä¹‹å Object.getOwnPropertyDescriptor(o, &#39;p&#39;) // Object { // value: &quot;a&quot;, // writable: true, // enumerable: true, // configurable: false // } Object.defineProperty(o, &#39;p&#39;, { enumerable: false }) // TypeError: Cannot redefine property: p ä¸Šé¢ä»£ç ä¸­ï¼Œä½¿ç”¨Object.sealæ–¹æ³•ä¹‹åï¼Œå±æ€§æè¿°å¯¹è±¡çš„configurableå±æ€§å°±å˜æˆäº†falseï¼Œç„¶åæ”¹å˜enumerableå±æ€§å°±ä¼šæŠ¥é”™ã€‚ å¯å†™æ€§ï¼ˆwritableï¼‰æœ‰ç‚¹ç‰¹åˆ«ã€‚å¦‚æœwritableä¸ºfalseï¼Œä½¿ç”¨Object.sealæ–¹æ³•ä»¥åï¼Œå°†æ— æ³•å°†å…¶å˜æˆtrueï¼›ä½†æ˜¯ï¼Œå¦‚æœwritableä¸ºtrueï¼Œä¾ç„¶å¯ä»¥å°†å…¶å˜æˆfalseã€‚ var o1 = Object.defineProperty({}, &#39;p&#39;, { writable: false }); Object.seal(o1); Object.defineProperty(o1, &#39;p&#39;, { writable:true }) // Uncaught TypeError: Cannot redefine property: p var o2 = Object.defineProperty({}, &#39;p&#39;, { writable: true }); Object.seal(o2); Object.defineProperty(o2, &#39;p&#39;, { writable:false }); Object.getOwnPropertyDescriptor(o2, &#39;p&#39;) // { // value: &#39;&#39;, // writable: false, // enumerable: true, // configurable: false // } ä¸Šé¢ä»£ç ä¸­ï¼ŒåŒæ ·æ˜¯ä½¿ç”¨äº†Object.sealæ–¹æ³•ï¼Œå¦‚æœwritableåŸä¸ºfalseï¼Œæ”¹å˜è¿™ä¸ªè®¾ç½®å°†æŠ¥é”™ï¼›å¦‚æœåŸä¸ºtrueï¼Œåˆ™ä¸ä¼šæœ‰é—®é¢˜ã€‚ è‡³äºå±æ€§å¯¹è±¡çš„valueæ˜¯å¦å¯æ”¹å˜ï¼Œæ˜¯ç”±writableå†³å®šçš„ã€‚ var o = { p: &#39;a&#39; }; Object.seal(o); o.p = &#39;b&#39;; o.p // &#39;b&#39; ä¸Šé¢ä»£ç ä¸­ï¼ŒObject.sealæ–¹æ³•å¯¹på±æ€§çš„valueæ— æ•ˆï¼Œæ˜¯å› ä¸ºæ­¤æ—¶på±æ€§çš„writableä¸ºtrueã€‚ Object.isSealed()Object.isSealedæ–¹æ³•ç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä½¿ç”¨äº†Object.sealæ–¹æ³•ã€‚ var o = { p: &#39;a&#39; }; Object.seal(o); Object.isSealed(o) // true è¿™æ—¶ï¼ŒObject.isExtensibleæ–¹æ³•ä¹Ÿè¿”å›falseã€‚ var o = { p: &#39;a&#39; }; Object.seal(o); Object.isExtensible(o) // false Object.freeze()Object.freezeæ–¹æ³•å¯ä»¥ä½¿å¾—ä¸€ä¸ªå¯¹è±¡æ— æ³•æ·»åŠ æ–°å±æ€§ã€æ— æ³•åˆ é™¤æ—§å±æ€§ã€ä¹Ÿæ— æ³•æ”¹å˜å±æ€§çš„å€¼ï¼Œä½¿å¾—è¿™ä¸ªå¯¹è±¡å®é™…ä¸Šå˜æˆäº†å¸¸é‡ã€‚ var o = { p: &#39;hello&#39; }; Object.freeze(o); o.p = &#39;world&#39;; o.p // hello o.t = &#39;hello&#39;; o.t // undefined ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹ç°æœ‰å±æ€§é‡æ–°èµ‹å€¼ï¼ˆo.p = &#39;world&#39;ï¼‰æˆ–è€…æ·»åŠ ä¸€ä¸ªæ–°å±æ€§ï¼Œå¹¶ä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯é»˜é»˜åœ°å¤±è´¥ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°±ä¼šæŠ¥é”™ã€‚ var o = { p: &#39;hello&#39; }; Object.freeze(o); // å¯¹ç°æœ‰å±æ€§é‡æ–°èµ‹å€¼ (function () { &#39;use strict&#39;; o.p = &#39;world&#39;; }()) // TypeError: Cannot assign to read only property &#39;p&#39; of #&lt;Object&gt; // æ·»åŠ ä¸å­˜åœ¨çš„å±æ€§ (function () { &#39;use strict&#39;; o.t = 123; }()) // TypeError: Can&#39;t add property t, object is not extensible Object.isFrozen()Object.isFrozenæ–¹æ³•ç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä½¿ç”¨äº†Object.freeze()æ–¹æ³•ã€‚ var obj = { p: &#39;hello&#39; }; Object.freeze(obj); Object.isFrozen(obj) // true å‰é¢è¯´è¿‡ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡è¢«å†»ç»“ï¼Œå†å¯¹å®ƒçš„å±æ€§èµ‹å€¼ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ã€‚Object.isFrozenæ–¹æ³•å¯ä»¥é˜²æ­¢å‘ç”Ÿè¿™æ ·çš„é”™è¯¯ã€‚ var obj = { p: &#39;hello&#39; }; Object.freeze(obj); if (!Object.isFrozen(obj)) { obj.p = &#39;world&#39;; } ä¸Šé¢ä»£ç ä¸­ï¼Œç¡®è®¤objæ²¡æœ‰è¢«å†»ç»“åï¼Œå†å¯¹å®ƒçš„å±æ€§èµ‹å€¼ï¼Œå°±ä¸ä¼šæŠ¥é”™äº†ã€‚ å±€é™æ€§ä¸Šé¢çš„æ–¹æ³•é”å®šå¯¹è±¡çš„å¯å†™æ€§æœ‰ä¸€ä¸ªæ¼æ´ï¼Œä¾ç„¶å¯ä»¥é€šè¿‡æ”¹å˜åŸå‹å¯¹è±¡ï¼Œæ¥ä¸ºå¯¹è±¡å¢åŠ å±æ€§ã€‚ var obj = new Object(); Object.preventExtensions(obj); var proto = Object.getPrototypeOf(obj); proto.t = &#39;hello&#39;; obj.t // hello ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ï¼ŒæŠŠåŸå‹ä¹Ÿå†»ç»“ä½ã€‚ var obj = Object.seal( Object.create( Object.freeze({x: 1}), { y: { value: 2, writable: true } } ) ); Object.getPrototypeOf(obj).hello = &quot;hello&quot;; obj.hello // undefined å¦å¤–ä¸€ä¸ªå±€é™æ˜¯ï¼Œå¦‚æœå±æ€§å€¼æ˜¯å¯¹è±¡ï¼Œä¸Šé¢è¿™äº›æ–¹æ³•åªèƒ½å†»ç»“å±æ€§æŒ‡å‘çš„å¯¹è±¡ï¼Œè€Œä¸èƒ½å†»ç»“å¯¹è±¡æœ¬èº«çš„å†…å®¹ã€‚ var obj = { foo: 1, bar: [&#39;a&#39;, &#39;b&#39;] }; Object.freeze(obj); obj.bar.push(&#39;c&#39;); obj.bar // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;] ä¸Šé¢ä»£ç ä¸­ï¼Œobj.barå±æ€§æŒ‡å‘ä¸€ä¸ªæ•°ç»„ï¼Œobjå¯¹è±¡è¢«å†»ç»“ä»¥åï¼Œè¿™ä¸ªæŒ‡å‘æ— æ³•æ”¹å˜ï¼Œå³æ— æ³•æŒ‡å‘å…¶ä»–å€¼ï¼Œä½†æ˜¯æ‰€æŒ‡å‘çš„æ•°ç»„æ˜¯å¯ä»¥æ”¹å˜çš„ã€‚ å…³äºæœ¬æ–‡ä»…ä¾›å­¦ä¹ äº¤æµåˆ†äº«ï¼ŒåŸæ–‡é“¾æ¥ å±æ€§æè¿°å¯¹è±¡ï¼Œæ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆ","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"Descriptor","slug":"Descriptor","permalink":"https://microzz.com/tags/Descriptor/"},{"name":"å±æ€§æè¿°å¯¹è±¡","slug":"å±æ€§æè¿°å¯¹è±¡","permalink":"https://microzz.com/tags/å±æ€§æè¿°å¯¹è±¡/"}]},{"title":"JavaScriptä¸­çš„RegExpå¯¹è±¡","date":"2017-08-26T02:04:05.000Z","path":"2017/08/26/js-regexp/","text":"JSä¸­çš„æ­£åˆ™å¯¹è±¡æ¦‚è¿°æ­£åˆ™è¡¨è¾¾å¼ï¼ˆregular expressionï¼‰æ˜¯ä¸€ç§è¡¨è¾¾æ–‡æœ¬æ¨¡å¼ï¼ˆå³å­—ç¬¦ä¸²ç»“æ„ï¼‰çš„æ–¹æ³•ï¼Œæœ‰ç‚¹åƒå­—ç¬¦ä¸²çš„æ¨¡æ¿ï¼Œå¸¸å¸¸ç”¨ä½œæŒ‰ç…§â€œç»™å®šæ¨¡å¼â€åŒ¹é…æ–‡æœ¬çš„å·¥å…·ã€‚æ¯”å¦‚ï¼Œæ­£åˆ™è¡¨è¾¾å¼ç»™å‡ºä¸€ä¸ª Email åœ°å€çš„æ¨¡å¼ï¼Œç„¶åç”¨å®ƒæ¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸º Email åœ°å€ã€‚JavaScript çš„æ­£åˆ™è¡¨è¾¾å¼ä½“ç³»æ˜¯å‚ç…§ Perl 5 å»ºç«‹çš„ã€‚ æ–°å»ºæ­£åˆ™è¡¨è¾¾å¼æœ‰ä¸¤ç§æ–¹æ³•ã€‚ä¸€ç§æ˜¯ä½¿ç”¨å­—é¢é‡ï¼Œä»¥æ–œæ è¡¨ç¤ºå¼€å§‹å’Œç»“æŸã€‚ var regex = /xyz/; å¦ä¸€ç§æ˜¯ä½¿ç”¨ RegExp æ„é€ å‡½æ•°ã€‚ var regex = new RegExp(&#39;xyz&#39;); ä¸Šé¢ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼Œéƒ½æ–°å»ºäº†ä¸€ä¸ªå†…å®¹ä¸ºxyzçš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚å®ƒä»¬çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œç¬¬ä¸€ç§æ–¹æ³•åœ¨ç¼–è¯‘æ—¶æ–°å»ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œç¬¬äºŒç§æ–¹æ³•åœ¨è¿è¡Œæ—¶æ–°å»ºæ­£åˆ™è¡¨è¾¾å¼ã€‚ RegExp æ„é€ å‡½æ•°è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä¿®é¥°ç¬¦ï¼ˆè¯¦ç»†è§£é‡Šè§ä¸‹æ–‡ï¼‰ã€‚ var regex = new RegExp(&#39;xyz&#39;, &quot;i&quot;); // ç­‰ä»·äº var regex = /xyz/i; ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼/xyz/æœ‰ä¸€ä¸ªä¿®é¥°ç¬¦iã€‚ è¿™ä¸¤ç§å†™æ³•â€”â€”å­—é¢é‡å’Œæ„é€ å‡½æ•°â€”â€”åœ¨è¿è¡Œæ—¶æœ‰ä¸€ä¸ªç»†å¾®çš„åŒºåˆ«ã€‚é‡‡ç”¨å­—é¢é‡çš„å†™æ³•ï¼Œæ­£åˆ™å¯¹è±¡åœ¨ä»£ç è½½å…¥æ—¶ï¼ˆå³ç¼–è¯‘æ—¶ï¼‰ç”Ÿæˆï¼›é‡‡ç”¨æ„é€ å‡½æ•°çš„æ–¹æ³•ï¼Œæ­£åˆ™å¯¹è±¡åœ¨ä»£ç è¿è¡Œæ—¶ç”Ÿæˆã€‚è€ƒè™‘åˆ°ä¹¦å†™çš„ä¾¿åˆ©å’Œç›´è§‚ï¼Œå®é™…åº”ç”¨ä¸­ï¼ŒåŸºæœ¬ä¸Šéƒ½é‡‡ç”¨å­—é¢é‡çš„å†™æ³•ã€‚ æ­£åˆ™å¯¹è±¡ç”Ÿæˆä»¥åï¼Œæœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š æ­£åˆ™å¯¹è±¡çš„æ–¹æ³•ï¼šå°†å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œæ¯”å¦‚regex.test(string)ã€‚ å­—ç¬¦ä¸²å¯¹è±¡çš„æ–¹æ³•ï¼šå°†æ­£åˆ™å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œæ¯”å¦‚string.match(regex)ã€‚ è¿™ä¸¤ç§ä½¿ç”¨æ–¹å¼ä¸‹é¢éƒ½ä¼šä»‹ç»ã€‚ æ­£åˆ™å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•å±æ€§æ­£åˆ™å¯¹è±¡çš„å±æ€§åˆ†æˆä¸¤ç±»ã€‚ ä¸€ç±»æ˜¯ä¿®é¥°ç¬¦ç›¸å…³ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå¯¹åº”çš„ä¿®é¥°ç¬¦æ˜¯å¦è®¾ç½®ã€‚ ignoreCaseï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†iä¿®é¥°ç¬¦ï¼Œè¯¥å±æ€§åªè¯»ã€‚ globalï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†gä¿®é¥°ç¬¦ï¼Œè¯¥å±æ€§åªè¯»ã€‚ multilineï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†mä¿®é¥°ç¬¦ï¼Œè¯¥å±æ€§åªè¯»ã€‚ var r = /abc/igm; r.ignoreCase // true r.global // true r.multiline // true å¦ä¸€ç±»æ˜¯ä¸ä¿®é¥°ç¬¦æ— å…³çš„å±æ€§ï¼Œä¸»è¦æ˜¯ä¸‹é¢ä¸¤ä¸ªã€‚ lastIndexï¼šè¿”å›ä¸‹ä¸€æ¬¡å¼€å§‹æœç´¢çš„ä½ç½®ã€‚è¯¥å±æ€§å¯è¯»å†™ï¼Œä½†æ˜¯åªåœ¨è®¾ç½®äº†gä¿®é¥°ç¬¦æ—¶æœ‰æ„ä¹‰ã€‚ sourceï¼šè¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²å½¢å¼ï¼ˆä¸åŒ…æ‹¬åæ–œæ ï¼‰ï¼Œè¯¥å±æ€§åªè¯»ã€‚ var r = /abc/igm; r.lastIndex // 0 r.source // &quot;abc&quot; test()æ­£åˆ™å¯¹è±¡çš„testæ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰æ¨¡å¼æ˜¯å¦èƒ½åŒ¹é…å‚æ•°å­—ç¬¦ä¸²ã€‚ /cat/.test(&#39;cats and dogs&#39;) // true ä¸Šé¢ä»£ç éªŒè¯å‚æ•°å­—ç¬¦ä¸²ä¹‹ä¸­æ˜¯å¦åŒ…å«catï¼Œç»“æœè¿”å›trueã€‚ å¦‚æœæ­£åˆ™è¡¨è¾¾å¼å¸¦æœ‰gä¿®é¥°ç¬¦ï¼Œåˆ™æ¯ä¸€æ¬¡testæ–¹æ³•éƒ½ä»ä¸Šä¸€æ¬¡ç»“æŸçš„ä½ç½®å¼€å§‹å‘ååŒ¹é…ã€‚ var r = /x/g; var s = &#39;_x_x&#39;; r.lastIndex // 0 r.test(s) // true r.lastIndex // 2 r.test(s) // true r.lastIndex // 4 r.test(s) // false ä¸Šé¢ä»£ç çš„æ­£åˆ™å¯¹è±¡ä½¿ç”¨äº†gä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºè¦è®°å½•æœç´¢ä½ç½®ã€‚æ¥ç€ï¼Œä¸‰æ¬¡ä½¿ç”¨testæ–¹æ³•ï¼Œæ¯ä¸€æ¬¡å¼€å§‹æœç´¢çš„ä½ç½®éƒ½æ˜¯ä¸Šä¸€æ¬¡åŒ¹é…çš„åä¸€ä¸ªä½ç½®ã€‚ å¸¦æœ‰gä¿®é¥°ç¬¦æ—¶ï¼Œå¯ä»¥é€šè¿‡æ­£åˆ™å¯¹è±¡çš„lastIndexå±æ€§æŒ‡å®šå¼€å§‹æœç´¢çš„ä½ç½®ã€‚ var r = /x/g; var s = &#39;_x_x&#39;; r.lastIndex = 4; r.test(s) // false ä¸Šé¢ä»£ç æŒ‡å®šä»å­—ç¬¦ä¸²çš„ç¬¬äº”ä¸ªä½ç½®å¼€å§‹æœç´¢ï¼Œè¿™ä¸ªä½ç½®æ˜¯æ²¡æœ‰å­—ç¬¦çš„ï¼Œæ‰€ä»¥è¿”å›falseã€‚ lastIndexå±æ€§åªå¯¹åŒä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æœ‰æ•ˆï¼Œæ‰€ä»¥ä¸‹é¢è¿™æ ·å†™æ˜¯é”™è¯¯çš„ã€‚ var count = 0; while (/a/g.test(&#39;babaa&#39;)) count++; ä¸Šé¢ä»£ç ä¼šå¯¼è‡´æ— é™å¾ªç¯ï¼Œå› ä¸ºwhileå¾ªç¯çš„æ¯æ¬¡åŒ¹é…æ¡ä»¶éƒ½æ˜¯ä¸€ä¸ªæ–°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯¼è‡´lastIndexå±æ€§æ€»æ˜¯ç­‰äº0ã€‚ å¦‚æœæ­£åˆ™æ¨¡å¼æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œåˆ™åŒ¹é…æ‰€æœ‰å­—ç¬¦ä¸²ã€‚ new RegExp(&#39;&#39;).test(&#39;abc&#39;) // true exec()æ­£åˆ™å¯¹è±¡çš„execæ–¹æ³•ï¼Œå¯ä»¥è¿”å›åŒ¹é…ç»“æœã€‚å¦‚æœå‘ç°åŒ¹é…ï¼Œå°±è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯æ¯ä¸€ä¸ªåŒ¹é…æˆåŠŸçš„å­å­—ç¬¦ä¸²ï¼Œå¦åˆ™è¿”å›nullã€‚ var s = &#39;_x_x&#39;; var r1 = /x/; var r2 = /y/; r1.exec(s) // [&quot;x&quot;] r2.exec(s) // null ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™å¯¹è±¡r1åŒ¹é…æˆåŠŸï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯åŒ¹é…ç»“æœï¼›æ­£åˆ™å¯¹è±¡r2åŒ¹é…å¤±è´¥ï¼Œè¿”å›nullã€‚ å¦‚æœæ­£åˆ™è¡¨ç¤ºå¼åŒ…å«åœ†æ‹¬å·ï¼ˆå³å«æœ‰â€œç»„åŒ¹é…â€ï¼‰ï¼Œåˆ™è¿”å›çš„æ•°ç»„ä¼šåŒ…æ‹¬å¤šä¸ªæˆå‘˜ã€‚ç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯æ•´ä¸ªåŒ¹é…æˆåŠŸçš„ç»“æœï¼Œåé¢çš„æˆå‘˜å°±æ˜¯åœ†æ‹¬å·å¯¹åº”çš„åŒ¹é…æˆåŠŸçš„ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬äºŒä¸ªæˆå‘˜å¯¹åº”ç¬¬ä¸€ä¸ªæ‹¬å·ï¼Œç¬¬ä¸‰ä¸ªæˆå‘˜å¯¹åº”ç¬¬äºŒä¸ªæ‹¬å·ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ•´ä¸ªæ•°ç»„çš„lengthå±æ€§ç­‰äºç»„åŒ¹é…çš„æ•°é‡å†åŠ 1ã€‚ var s = &#39;_x_x&#39;; var r = /_(x)/; r.exec(s) // [&quot;_x&quot;, &quot;x&quot;] ä¸Šé¢ä»£ç çš„execæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚ç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯æ•´ä¸ªåŒ¹é…çš„ç»“æœï¼Œç¬¬äºŒä¸ªæˆå‘˜æ˜¯åœ†æ‹¬å·åŒ¹é…çš„ç»“æœã€‚ execæ–¹æ³•çš„è¿”å›æ•°ç»„è¿˜åŒ…å«ä»¥ä¸‹ä¸¤ä¸ªå±æ€§ï¼š inputï¼šæ•´ä¸ªåŸå­—ç¬¦ä¸²ã€‚ indexï¼šæ•´ä¸ªæ¨¡å¼åŒ¹é…æˆåŠŸçš„å¼€å§‹ä½ç½®ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰ã€‚ var r = /a(b+)a/; var arr = r.exec(&#39;_abbba_aba_&#39;); arr // [&quot;abbba&quot;, &quot;bbb&quot;] arr.index // 1 arr.input // &quot;_abbba_aba_&quot; ä¸Šé¢ä»£ç ä¸­çš„indexå±æ€§ç­‰äº1ï¼Œæ˜¯å› ä¸ºä»åŸå­—ç¬¦ä¸²çš„ç¬¬äºŒä¸ªä½ç½®å¼€å§‹åŒ¹é…æˆåŠŸã€‚ å¦‚æœæ­£åˆ™è¡¨è¾¾å¼åŠ ä¸Šgä¿®é¥°ç¬¦ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¤šæ¬¡execæ–¹æ³•ï¼Œä¸‹ä¸€æ¬¡æœç´¢çš„ä½ç½®ä»ä¸Šä¸€æ¬¡åŒ¹é…æˆåŠŸç»“æŸçš„ä½ç½®å¼€å§‹ã€‚ var r = /a(b+)a/g; var a1 = r.exec(&#39;_abbba_aba_&#39;); a1 // [&#39;abbba&#39;, &#39;bbb&#39;] a1.index // 1 r.lastIndex // 6 var a2 = r.exec(&#39;_abbba_aba_&#39;); a2 // [&#39;aba&#39;, &#39;b&#39;] a2.index // 7 r.lastIndex // 10 var a3 = r.exec(&#39;_abbba_aba_&#39;); a3 // null a3.index // TypeError: Cannot read property &#39;index&#39; of null r.lastIndex // 0 var a4 = r.exec(&#39;_abbba_aba_&#39;); a4 // [&#39;abbba&#39;, &#39;bbb&#39;] a4.index // 1 r.lastIndex // 6 ä¸Šé¢ä»£ç è¿ç»­ç”¨äº†å››æ¬¡execæ–¹æ³•ï¼Œå‰ä¸‰æ¬¡éƒ½æ˜¯ä»ä¸Šä¸€æ¬¡åŒ¹é…ç»“æŸçš„ä½ç½®å‘ååŒ¹é…ã€‚å½“ç¬¬ä¸‰æ¬¡åŒ¹é…ç»“æŸä»¥åï¼Œæ•´ä¸ªå­—ç¬¦ä¸²å·²ç»åˆ°è¾¾å°¾éƒ¨ï¼Œæ­£åˆ™å¯¹è±¡çš„lastIndexå±æ€§é‡ç½®ä¸º0ï¼Œæ„å‘³ç€ç¬¬å››æ¬¡åŒ¹é…å°†ä»å¤´å¼€å§‹ã€‚ åˆ©ç”¨gä¿®é¥°ç¬¦å…è®¸å¤šæ¬¡åŒ¹é…çš„ç‰¹ç‚¹ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªå¾ªç¯å®Œæˆå…¨éƒ¨åŒ¹é…ã€‚ var r = /a(b+)a/g; var s = &#39;_abbba_aba_&#39;; while(true) { var match = r.exec(s); if (!match) break; console.log(match[1]); } // bbb // b æ­£åˆ™å¯¹è±¡çš„lastIndexå±æ€§ä¸ä»…å¯è¯»ï¼Œè¿˜å¯å†™ã€‚ä¸€æ—¦æ‰‹åŠ¨è®¾ç½®äº†lastIndexçš„å€¼ï¼Œå°±ä¼šä»æŒ‡å®šä½ç½®å¼€å§‹åŒ¹é…ã€‚ä½†æ˜¯ï¼Œè¿™åªåœ¨è®¾ç½®äº†gä¿®é¥°ç¬¦çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šæœ‰æ•ˆã€‚ var r = /a/; r.lastIndex = 7; // æ— æ•ˆ var match = r.exec(&#39;xaxa&#39;); match.index // 1 r.lastIndex // 7 ä¸Šé¢ä»£ç è®¾ç½®äº†lastIndexå±æ€§ï¼Œä½†æ˜¯å› ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰gä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥æ˜¯æ— æ•ˆçš„ã€‚æ¯æ¬¡åŒ¹é…éƒ½æ˜¯ä»å­—ç¬¦ä¸²çš„å¤´éƒ¨å¼€å§‹ã€‚ å¦‚æœæœ‰gä¿®é¥°ç¬¦ï¼ŒlastIndexå±æ€§å°±ä¼šç”Ÿæ•ˆã€‚ var r = /a/g; r.lastIndex = 2; var match = r.exec(&#39;xaxa&#39;); match.index // 3 r.lastIndex // 4 ä¸Šé¢ä»£ç ä¸­ï¼ŒlastIndexå±æ€§æŒ‡å®šä»å­—ç¬¦çš„ç¬¬ä¸‰ä¸ªä½ç½®å¼€å§‹åŒ¹é…ã€‚æˆåŠŸåï¼Œä¸‹ä¸€æ¬¡åŒ¹é…å°±æ˜¯ä»ç¬¬äº”ä¸ªä½ç½®å¼€å§‹ã€‚ å¦‚æœæ­£åˆ™å¯¹è±¡æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œåˆ™execæ–¹æ³•ä¼šåŒ¹é…æˆåŠŸï¼Œä½†è¿”å›çš„ä¹Ÿæ˜¯ç©ºå­—ç¬¦ä¸²ã€‚ var r1 = new RegExp(&#39;&#39;); var a1 = r1.exec(&#39;abc&#39;); a1 // [&#39;&#39;] a1.index // 0 r1.lastIndex // 0 var r2 = new RegExp(&#39;()&#39;); var a2 = r2.exec(&#39;abc&#39;); a2 // [&#39;&#39;, &#39;&#39;] a2.index // 0 r2.lastIndex // 0 å­—ç¬¦ä¸²å¯¹è±¡çš„æ–¹æ³•å­—ç¬¦ä¸²å¯¹è±¡çš„æ–¹æ³•ä¹‹ä¸­ï¼Œæœ‰4ç§ä¸æ­£åˆ™å¯¹è±¡æœ‰å…³ã€‚ match()ï¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯æ‰€æœ‰åŒ¹é…çš„å­å­—ç¬¦ä¸²ã€‚ search()ï¼šæŒ‰ç…§ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢ï¼Œè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºåŒ¹é…å¼€å§‹çš„ä½ç½®ã€‚ replace()ï¼šæŒ‰ç…§ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ›¿æ¢ï¼Œè¿”å›æ›¿æ¢åçš„å­—ç¬¦ä¸²ã€‚ split()ï¼šæŒ‰ç…§ç»™å®šè§„åˆ™è¿›è¡Œå­—ç¬¦ä¸²åˆ†å‰²ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«åˆ†å‰²åçš„å„ä¸ªæˆå‘˜ã€‚ ä¸‹é¢é€ä¸€ä»‹ç»ã€‚ String.prototype.match()å­—ç¬¦ä¸²å¯¹è±¡çš„matchæ–¹æ³•å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ­£åˆ™åŒ¹é…ï¼Œè¿”å›åŒ¹é…ç»“æœã€‚ var s = &#39;_x_x&#39;; var r1 = /x/; var r2 = /y/; s.match(r1) // [&quot;x&quot;] s.match(r2) // null ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œå­—ç¬¦ä¸²çš„matchæ–¹æ³•ä¸æ­£åˆ™å¯¹è±¡çš„execæ–¹æ³•éå¸¸ç±»ä¼¼ï¼šåŒ¹é…æˆåŠŸè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ¹é…å¤±è´¥è¿”å›nullã€‚ å¦‚æœæ­£åˆ™è¡¨è¾¾å¼å¸¦æœ‰gä¿®é¥°ç¬¦ï¼Œåˆ™è¯¥æ–¹æ³•ä¸æ­£åˆ™å¯¹è±¡çš„execæ–¹æ³•è¡Œä¸ºä¸åŒï¼Œä¼šä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰åŒ¹é…æˆåŠŸçš„ç»“æœã€‚ var s = &#39;abba&#39;; var r = /a/g; s.match(r) // [&quot;a&quot;, &quot;a&quot;] r.exec(s) // [&quot;a&quot;] è®¾ç½®æ­£åˆ™è¡¨è¾¾å¼çš„lastIndexå±æ€§ï¼Œå¯¹matchæ–¹æ³•æ— æ•ˆï¼ŒåŒ¹é…æ€»æ˜¯ä»å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ã€‚ var r = /a|b/g; r.lastIndex = 7; &#39;xaxb&#39;.match(r) // [&#39;a&#39;, &#39;b&#39;] r.lastIndex // 0 ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œè®¾ç½®lastIndexå±æ€§æ˜¯æ— æ•ˆçš„ã€‚ String.prototype.search()å­—ç¬¦ä¸²å¯¹è±¡çš„searchæ–¹æ³•ï¼Œè¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„åŒ¹é…ç»“æœåœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä½ç½®ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•åŒ¹é…ï¼Œåˆ™è¿”å›-1ã€‚ &#39;_x_x&#39;.search(/x/) // 1 ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªåŒ¹é…ç»“æœå‡ºç°åœ¨å­—ç¬¦ä¸²çš„1å·ä½ç½®ã€‚ è¯¥æ–¹æ³•ä¼šå¿½ç•¥gä¿®é¥°ç¬¦ã€‚ var r = /x/g; r.lastIndex = 2; // æ— æ•ˆ &#39;_x_x&#39;.search(r) // 1 ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨gä¿®é¥°ç¬¦ä¹‹åï¼Œä½¿ç”¨lastIndexå±æ€§æŒ‡å®šå¼€å§‹åŒ¹é…çš„ä½ç½®ï¼Œç»“æœæ— æ•ˆï¼Œè¿˜æ˜¯ä»å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹åŒ¹é…ã€‚ String.prototype.replace()å­—ç¬¦ä¸²å¯¹è±¡çš„replaceæ–¹æ³•å¯ä»¥æ›¿æ¢åŒ¹é…çš„å€¼ã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æœç´¢æ¨¡å¼ï¼Œç¬¬äºŒä¸ªæ˜¯æ›¿æ¢çš„å†…å®¹ã€‚ str.replace(search, replacement) æœç´¢æ¨¡å¼å¦‚æœä¸åŠ gä¿®é¥°ç¬¦ï¼Œå°±æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…æˆåŠŸçš„å€¼ï¼Œå¦åˆ™æ›¿æ¢æ‰€æœ‰åŒ¹é…æˆåŠŸçš„å€¼ã€‚ &#39;aaa&#39;.replace(&#39;a&#39;, &#39;b&#39;) // &quot;baa&quot; &#39;aaa&#39;.replace(/a/, &#39;b&#39;) // &quot;baa&quot; &#39;aaa&#39;.replace(/a/g, &#39;b&#39;) // &quot;bbb&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œæœ€åä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨äº†gä¿®é¥°ç¬¦ï¼Œå¯¼è‡´æ‰€æœ‰çš„béƒ½è¢«æ›¿æ¢æ‰äº†ã€‚ replaceæ–¹æ³•çš„ä¸€ä¸ªåº”ç”¨ï¼Œå°±æ˜¯æ¶ˆé™¤å­—ç¬¦ä¸²é¦–å°¾ä¸¤ç«¯çš„ç©ºæ ¼ã€‚ var str = &#39; #id div.class &#39;; str.replace(/^\\s+|\\s+$/g, &#39;&#39;) // &quot;#id div.class&quot; replaceæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ä½¿ç”¨ç¾å…ƒç¬¦å·$ï¼Œç”¨æ¥æŒ‡ä»£æ‰€æ›¿æ¢çš„å†…å®¹ã€‚ $&amp; æŒ‡ä»£åŒ¹é…çš„å­å­—ç¬¦ä¸²ã€‚ $` æŒ‡ä»£åŒ¹é…ç»“æœå‰é¢çš„æ–‡æœ¬ã€‚ $&#39; æŒ‡ä»£åŒ¹é…ç»“æœåé¢çš„æ–‡æœ¬ã€‚ $n æŒ‡ä»£åŒ¹é…æˆåŠŸçš„ç¬¬nç»„å†…å®¹ï¼Œnæ˜¯ä»1å¼€å§‹çš„è‡ªç„¶æ•°ã€‚ $$ æŒ‡ä»£ç¾å…ƒç¬¦å·$ã€‚ &#39;hello world&#39;.replace(/(\\w+)\\s(\\w+)/, &#39;$2 $1&#39;) // &quot;world hello&quot; &#39;abc&#39;.replace(&#39;b&#39;, &#39;[$`-$&amp;-$\\&#39;]&#39;) // &quot;a[a-b-c]c&quot; replaceæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°†æ¯ä¸€ä¸ªåŒ¹é…å†…å®¹æ›¿æ¢ä¸ºå‡½æ•°è¿”å›å€¼ã€‚ &#39;3 and 5&#39;.replace(/[0-9]+/g, function(match){ return 2 * match; }) // &quot;6 and 10&quot; var a = &#39;The quick brown fox jumped over the lazy dog.&#39;; var pattern = /quick|brown|lazy/ig; a.replace(pattern, function replacer(match) { return match.toUpperCase(); }); // The QUICK BROWN fox jumped over the LAZY dog. ä½œä¸ºreplaceæ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°çš„æ›¿æ¢å‡½æ•°ï¼Œå¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•æ‰åˆ°çš„å†…å®¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•æ‰åˆ°çš„ç»„åŒ¹é…ï¼ˆæœ‰å¤šå°‘ä¸ªç»„åŒ¹é…ï¼Œå°±æœ‰å¤šå°‘ä¸ªå¯¹åº”çš„å‚æ•°ï¼‰ã€‚æ­¤å¤–ï¼Œæœ€åè¿˜å¯ä»¥æ·»åŠ ä¸¤ä¸ªå‚æ•°ï¼Œå€’æ•°ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•æ‰åˆ°çš„å†…å®¹åœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼ˆæ¯”å¦‚ä»ç¬¬äº”ä¸ªä½ç½®å¼€å§‹ï¼‰ï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯åŸå­—ç¬¦ä¸²ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç½‘é¡µæ¨¡æ¿æ›¿æ¢çš„ä¾‹å­ã€‚ var prices = { &#39;pr_1&#39;: &#39;$1.99&#39;, &#39;pr_2&#39;: &#39;$9.99&#39;, &#39;pr_3&#39;: &#39;$5.00&#39; }; var template = &#39;/* ... */&#39;; // è¿™é‡Œå¯ä»¥æ”¾ç½‘é¡µæ¨¡å—å­—ç¬¦ä¸² template.replace( /(&lt;span id=&quot;)(.*?)(&quot;&gt;)(&lt;\\/span&gt;)/g, function(match, $1, $2, $3, $4){ return $1 + $2 + $3 + prices[$2] + $4; } ); ä¸Šé¢ä»£ç çš„æ•æ‰æ¨¡å¼ä¸­ï¼Œæœ‰å››ä¸ªæ‹¬å·ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿå››ä¸ªç»„åŒ¹é…ï¼Œåœ¨åŒ¹é…å‡½æ•°ä¸­ç”¨$1åˆ°$4è¡¨ç¤ºã€‚åŒ¹é…å‡½æ•°çš„ä½œç”¨æ˜¯å°†ä»·æ ¼æ’å…¥æ¨¡æ¿ä¸­ã€‚ String.prototype.split()å­—ç¬¦ä¸²å¯¹è±¡çš„splitæ–¹æ³•æŒ‰ç…§æ­£åˆ™è§„åˆ™åˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªç”±åˆ†å‰²åçš„å„ä¸ªéƒ¨åˆ†ç»„æˆçš„æ•°ç»„ã€‚ str.split(separator, [limit]) è¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åˆ†éš”è§„åˆ™ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿”å›æ•°ç»„çš„æœ€å¤§æˆå‘˜æ•°ã€‚ // éæ­£åˆ™åˆ†éš” &#39;a, b,c, d&#39;.split(&#39;,&#39;) // [ &#39;a&#39;, &#39; b&#39;, &#39;c&#39;, &#39; d&#39; ] // æ­£åˆ™åˆ†éš”ï¼Œå»é™¤å¤šä½™çš„ç©ºæ ¼ &#39;a, b,c, d&#39;.split(/, */) // [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39; ] // æŒ‡å®šè¿”å›æ•°ç»„çš„æœ€å¤§æˆå‘˜ &#39;a, b,c, d&#39;.split(/, */, 2) [ &#39;a&#39;, &#39;b&#39; ] ä¸Šé¢ä»£ç ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œå»é™¤äº†å­å­—ç¬¦ä¸²çš„é€—å·åé¢çš„ç©ºæ ¼ã€‚ // ä¾‹ä¸€ &#39;aaa*a*&#39;.split(/a*/) // [ &#39;&#39;, &#39;*&#39;, &#39;*&#39; ] // ä¾‹äºŒ &#39;aaa**a*&#39;.split(/a*/) // [&quot;&quot;, &quot;*&quot;, &quot;*&quot;, &quot;*&quot;] ä¸Šé¢ä»£ç çš„åˆ†å‰²è§„åˆ™æ˜¯0æ¬¡æˆ–å¤šæ¬¡çš„aï¼Œç”±äºæ­£åˆ™é»˜è®¤æ˜¯è´ªå©ªåŒ¹é…ï¼Œæ‰€ä»¥ä¾‹ä¸€çš„ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦æ˜¯aaaï¼Œç¬¬äºŒä¸ªåˆ†å‰²ç¬¦æ˜¯aï¼Œå°†å­—ç¬¦ä¸²åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†ï¼ŒåŒ…å«å¼€å§‹å¤„çš„ç©ºå­—ç¬¦ä¸²ã€‚ä¾‹äºŒçš„ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦æ˜¯aaaï¼Œç¬¬äºŒä¸ªåˆ†éš”ç¬¦æ˜¯0ä¸ªaï¼ˆå³ç©ºå­—ç¬¦ï¼‰ï¼Œç¬¬ä¸‰ä¸ªåˆ†éš”ç¬¦æ˜¯aï¼Œæ‰€ä»¥å°†å­—ç¬¦ä¸²åˆ†æˆå››ä¸ªéƒ¨åˆ†ã€‚ å¦‚æœæ­£åˆ™è¡¨è¾¾å¼å¸¦æœ‰æ‹¬å·ï¼Œåˆ™æ‹¬å·åŒ¹é…çš„éƒ¨åˆ†ä¹Ÿä¼šä½œä¸ºæ•°ç»„æˆå‘˜è¿”å›ã€‚ &#39;aaa*a*&#39;.split(/(a*)/) // [ &#39;&#39;, &#39;aaa&#39;, &#39;*&#39;, &#39;a&#39;, &#39;*&#39; ] ä¸Šé¢ä»£ç çš„æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨äº†æ‹¬å·ï¼Œç¬¬ä¸€ä¸ªç»„åŒ¹é…æ˜¯â€œaaaâ€ï¼Œç¬¬äºŒä¸ªç»„åŒ¹é…æ˜¯â€œaâ€ï¼Œå®ƒä»¬éƒ½ä½œä¸ºæ•°ç»„æˆå‘˜è¿”å›ã€‚ åŒ¹é…è§„åˆ™æ­£åˆ™è¡¨è¾¾å¼å¯¹å­—ç¬¦ä¸²çš„åŒ¹é…æœ‰å¾ˆå¤æ‚çš„è§„åˆ™ã€‚ä¸‹é¢ä¸€ä¸€ä»‹ç»è¿™äº›è§„åˆ™ã€‚ å­—é¢é‡å­—ç¬¦å’Œå…ƒå­—ç¬¦å¤§éƒ¨åˆ†å­—ç¬¦åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå°±æ˜¯å­—é¢çš„å«ä¹‰ï¼Œæ¯”å¦‚/a/åŒ¹é…aï¼Œ/b/åŒ¹é…bã€‚å¦‚æœåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¹‹ä¸­ï¼ŒæŸä¸ªå­—ç¬¦åªè¡¨ç¤ºå®ƒå­—é¢çš„å«ä¹‰ï¼ˆå°±åƒå‰é¢çš„aå’Œbï¼‰ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å«åšâ€œå­—é¢é‡å­—ç¬¦â€ï¼ˆliteral charactersï¼‰ã€‚ /dog/.test(&quot;old dog&quot;) // true ä¸Šé¢ä»£ç ä¸­æ­£åˆ™è¡¨è¾¾å¼çš„dogï¼Œå°±æ˜¯å­—é¢é‡å­—ç¬¦ï¼Œæ‰€ä»¥/dog/åŒ¹é…â€œold dogâ€ï¼Œå› ä¸ºå®ƒå°±è¡¨ç¤ºâ€œdâ€ã€â€œoâ€ã€â€œgâ€ä¸‰ä¸ªå­—æ¯è¿åœ¨ä¸€èµ·ã€‚ é™¤äº†å­—é¢é‡å­—ç¬¦ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†å­—ç¬¦æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œä¸ä»£è¡¨å­—é¢çš„æ„æ€ã€‚å®ƒä»¬å«åšâ€œå…ƒå­—ç¬¦â€ï¼ˆmetacharactersï¼‰ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªã€‚ ï¼ˆ1ï¼‰ç‚¹å­—ç¬¦ï¼ˆ.) ç‚¹å­—ç¬¦ï¼ˆ.ï¼‰åŒ¹é…é™¤å›è½¦ï¼ˆ\\rï¼‰ã€æ¢è¡Œ(\\n) ã€è¡Œåˆ†éš”ç¬¦ï¼ˆ\\u2028ï¼‰å’Œæ®µåˆ†éš”ç¬¦ï¼ˆ\\u2029ï¼‰ä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦ã€‚ /c.t/ ä¸Šé¢ä»£ç ä¸­ï¼Œc.tåŒ¹é…cå’Œtä¹‹é—´åŒ…å«ä»»æ„ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µï¼Œåªè¦è¿™ä¸‰ä¸ªå­—ç¬¦åœ¨åŒä¸€è¡Œï¼Œæ¯”å¦‚catã€c2tã€c-tç­‰ç­‰ï¼Œä½†æ˜¯ä¸åŒ¹é…cootã€‚ ï¼ˆ2ï¼‰ä½ç½®å­—ç¬¦ ä½ç½®å­—ç¬¦ç”¨æ¥æç¤ºå­—ç¬¦æ‰€å¤„çš„ä½ç½®ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªå­—ç¬¦ã€‚ ^ è¡¨ç¤ºå­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½® $ è¡¨ç¤ºå­—ç¬¦ä¸²çš„ç»“æŸä½ç½® // testå¿…é¡»å‡ºç°åœ¨å¼€å§‹ä½ç½® /^test/.test(&#39;test123&#39;) // true // testå¿…é¡»å‡ºç°åœ¨ç»“æŸä½ç½® /test$/.test(&#39;new test&#39;) // true // ä»å¼€å§‹ä½ç½®åˆ°ç»“æŸä½ç½®åªæœ‰test /^test$/.test(&#39;test&#39;) // true /^test$/.test(&#39;test test&#39;) // false ï¼ˆ3ï¼‰é€‰æ‹©ç¬¦ï¼ˆ|ï¼‰ ç«–çº¿ç¬¦å·ï¼ˆ|ï¼‰åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­è¡¨ç¤ºâ€œæˆ–å…³ç³»â€ï¼ˆORï¼‰ï¼Œå³cat|dogè¡¨ç¤ºåŒ¹é…catæˆ–dogã€‚ /11|22/.test(&#39;911&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼æŒ‡å®šå¿…é¡»åŒ¹é…11æˆ–22ã€‚ å¤šä¸ªé€‰æ‹©ç¬¦å¯ä»¥è”åˆä½¿ç”¨ã€‚ // åŒ¹é…fredã€barneyã€bettyä¹‹ä¸­çš„ä¸€ä¸ª /fred|barney|betty/ é€‰æ‹©ç¬¦ä¼šåŒ…æ‹¬å®ƒå‰åçš„å¤šä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚/ab|cd/æŒ‡çš„æ˜¯åŒ¹é…abæˆ–è€…cdï¼Œè€Œä¸æ˜¯æŒ‡åŒ¹é…bæˆ–è€…cã€‚å¦‚æœæƒ³ä¿®æ”¹è¿™ä¸ªè¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨åœ†æ‹¬å·ã€‚ /a( |\\t)b/.test(&#39;a\\tb&#39;) // true ä¸Šé¢ä»£ç æŒ‡çš„æ˜¯ï¼Œaå’Œbä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼æˆ–è€…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ã€‚ å…¶ä»–çš„å…ƒå­—ç¬¦è¿˜åŒ…æ‹¬\\\\ã€\\*ã€+ã€?ã€()ã€[]ã€{}ç­‰ï¼Œå°†åœ¨ä¸‹æ–‡è§£é‡Šã€‚ è½¬ä¹‰ç¬¦æ­£åˆ™è¡¨è¾¾å¼ä¸­é‚£äº›æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼Œå¦‚æœè¦åŒ¹é…å®ƒä»¬æœ¬èº«ï¼Œå°±éœ€è¦åœ¨å®ƒä»¬å‰é¢è¦åŠ ä¸Šåæ–œæ ã€‚æ¯”å¦‚è¦åŒ¹é…åŠ å·ï¼Œå°±è¦å†™æˆ\\+ã€‚ /1+1/.test(&#39;1+1&#39;) // false /1\\+1/.test(&#39;1+1&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ç›´æ¥ç”¨åŠ å·åŒ¹é…ï¼Œç»“æœåŠ å·è§£é‡Šæˆé‡è¯ï¼Œå¯¼è‡´ä¸åŒ¹é…ã€‚ç¬¬äºŒä¸ªæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨åæ–œæ å¯¹åŠ å·è½¬ä¹‰ï¼Œå°±èƒ½åŒ¹é…æˆåŠŸã€‚ æ­£åˆ™æ¨¡å¼ä¸­ï¼Œéœ€è¦ç”¨æ–œæ è½¬ä¹‰çš„ï¼Œä¸€å…±æœ‰12ä¸ªå­—ç¬¦ï¼š^ã€.ã€[ã€$ã€(ã€)ã€|ã€*ã€+ã€?ã€{å’Œ\\\\ã€‚éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½¿ç”¨RegExpæ–¹æ³•ç”Ÿæˆæ­£åˆ™å¯¹è±¡ï¼Œè½¬ä¹‰éœ€è¦ä½¿ç”¨ä¸¤ä¸ªæ–œæ ï¼Œå› ä¸ºå­—ç¬¦ä¸²å†…éƒ¨ä¼šå…ˆè½¬ä¹‰ä¸€æ¬¡ã€‚ (new RegExp(&#39;1\\+1&#39;)).test(&#39;1+1&#39;) // false (new RegExp(&#39;1\\\\+1&#39;)).test(&#39;1+1&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼ŒRegExpä½œä¸ºæ„é€ å‡½æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä½†æ˜¯ï¼Œåœ¨å­—ç¬¦ä¸²å†…éƒ¨ï¼Œåæ–œæ ä¹Ÿæ˜¯è½¬ä¹‰å­—ç¬¦ï¼Œæ‰€ä»¥å®ƒä¼šå…ˆè¢«åæ–œæ è½¬ä¹‰ä¸€æ¬¡ï¼Œç„¶åå†è¢«æ­£åˆ™è¡¨è¾¾å¼è½¬ä¹‰ä¸€æ¬¡ï¼Œå› æ­¤éœ€è¦ä¸¤ä¸ªåæ–œæ è½¬ä¹‰ã€‚ ç‰¹æ®Šå­—ç¬¦æ­£åˆ™è¡¨è¾¾å¼å¯¹ä¸€äº›ä¸èƒ½æ‰“å°çš„ç‰¹æ®Šå­—ç¬¦ï¼Œæä¾›äº†è¡¨è¾¾æ–¹æ³•ã€‚ \\cX è¡¨ç¤ºCtrl-[X]ï¼Œå…¶ä¸­çš„Xæ˜¯A-Zä¹‹ä¸­ä»»ä¸€ä¸ªè‹±æ–‡å­—æ¯ï¼Œç”¨æ¥åŒ¹é…æ§åˆ¶å­—ç¬¦ã€‚ [\\b] åŒ¹é…é€€æ ¼é”®(U+0008)ï¼Œä¸è¦ä¸\\bæ··æ·†ã€‚ \\n åŒ¹é…æ¢è¡Œé”®ã€‚ \\r åŒ¹é…å›è½¦é”®ã€‚ \\t åŒ¹é…åˆ¶è¡¨ç¬¦tabï¼ˆU+0009ï¼‰ã€‚ \\v åŒ¹é…å‚ç›´åˆ¶è¡¨ç¬¦ï¼ˆU+000Bï¼‰ã€‚ \\f åŒ¹é…æ¢é¡µç¬¦ï¼ˆU+000Cï¼‰ã€‚ \\0 åŒ¹é…nullå­—ç¬¦ï¼ˆU+0000ï¼‰ã€‚ \\xhh åŒ¹é…ä¸€ä¸ªä»¥ä¸¤ä½åå…­è¿›åˆ¶æ•°ï¼ˆ\\x00-\\xFFï¼‰è¡¨ç¤ºçš„å­—ç¬¦ã€‚ \\uhhhh åŒ¹é…ä¸€ä¸ªä»¥å››ä½åå…­è¿›åˆ¶æ•°ï¼ˆ\\u0000-\\uFFFFï¼‰è¡¨ç¤ºçš„unicodeå­—ç¬¦ã€‚ å­—ç¬¦ç±»å­—ç¬¦ç±»ï¼ˆclassï¼‰è¡¨ç¤ºæœ‰ä¸€ç³»åˆ—å­—ç¬¦å¯ä¾›é€‰æ‹©ï¼Œåªè¦åŒ¹é…å…¶ä¸­ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚æ‰€æœ‰å¯ä¾›é€‰æ‹©çš„å­—ç¬¦éƒ½æ”¾åœ¨æ–¹æ‹¬å·å†…ï¼Œæ¯”å¦‚[xyz] è¡¨ç¤ºxã€yã€zä¹‹ä¸­ä»»é€‰ä¸€ä¸ªåŒ¹é…ã€‚ /[abc]/.test(&#39;hello world&#39;) // false /[abc]/.test(&#39;ï£¿&#39;) // true ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå­—ç¬¦ä¸²â€œhello worldâ€ä¸åŒ…å«aã€bã€cè¿™ä¸‰ä¸ªå­—æ¯ä¸­çš„ä»»ä¸€ä¸ªï¼Œè€Œå­—ç¬¦ä¸²â€œï£¿â€åŒ…å«å­—æ¯aã€‚ æœ‰ä¸¤ä¸ªå­—ç¬¦åœ¨å­—ç¬¦ç±»ä¸­æœ‰ç‰¹æ®Šå«ä¹‰ã€‚ ï¼ˆ1ï¼‰è„±å­—ç¬¦ï¼ˆ&#94;ï¼‰ å¦‚æœæ–¹æ‹¬å·å†…çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯[^]ï¼Œåˆ™è¡¨ç¤ºé™¤äº†å­—ç¬¦ç±»ä¹‹ä¸­çš„å­—ç¬¦ï¼Œå…¶ä»–å­—ç¬¦éƒ½å¯ä»¥åŒ¹é…ã€‚æ¯”å¦‚ï¼Œ[^xyz]è¡¨ç¤ºé™¤äº†xã€yã€zä¹‹å¤–éƒ½å¯ä»¥åŒ¹é…ã€‚ /[^abc]/.test(&#39;hello world&#39;) // true /[^abc]/.test(&#39;bbc&#39;) // false ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå­—ç¬¦ä¸²â€œhello worldâ€ä¸åŒ…å«å­—æ¯aã€bã€cä¸­çš„ä»»ä¸€ä¸ªï¼Œæ‰€ä»¥è¿”å›trueï¼›å­—ç¬¦ä¸²â€œbbcâ€ä¸åŒ…å«aã€bã€cä»¥å¤–çš„å­—æ¯ï¼Œæ‰€ä»¥è¿”å›falseã€‚ å¦‚æœæ–¹æ‹¬å·å†…æ²¡æœ‰å…¶ä»–å­—ç¬¦ï¼Œå³åªæœ‰[^]ï¼Œå°±è¡¨ç¤ºåŒ¹é…ä¸€åˆ‡å­—ç¬¦ï¼Œå…¶ä¸­åŒ…æ‹¬æ¢è¡Œç¬¦ï¼Œè€Œç‚¹å·ï¼ˆ.ï¼‰æ˜¯ä¸åŒ…æ‹¬æ¢è¡Œç¬¦çš„ã€‚ var s = &#39;Please yes\\nmake my day!&#39;; s.match(/yes.*day/) // null s.match(/yes[^]*day/) // [ &#39;yes\\nmake my day&#39;] ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²så«æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œç‚¹å·ä¸åŒ…æ‹¬æ¢è¡Œç¬¦ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å¤±è´¥ï¼›ç¬¬äºŒä¸ªæ­£åˆ™è¡¨è¾¾å¼[^]åŒ…å«ä¸€åˆ‡å­—ç¬¦ï¼Œæ‰€ä»¥åŒ¹é…æˆåŠŸã€‚ æ³¨æ„ï¼Œè„±å­—ç¬¦åªæœ‰åœ¨å­—ç¬¦ç±»çš„ç¬¬ä¸€ä¸ªä½ç½®æ‰æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¦åˆ™å°±æ˜¯å­—é¢å«ä¹‰ã€‚ ï¼ˆ2ï¼‰è¿å­—ç¬¦ï¼ˆ-ï¼‰ æŸäº›æƒ…å†µä¸‹ï¼Œå¯¹äºè¿ç»­åºåˆ—çš„å­—ç¬¦ï¼Œè¿å­—ç¬¦ï¼ˆ-ï¼‰ç”¨æ¥æä¾›ç®€å†™å½¢å¼ï¼Œè¡¨ç¤ºå­—ç¬¦çš„è¿ç»­èŒƒå›´ã€‚æ¯”å¦‚ï¼Œ[abc]å¯ä»¥å†™æˆ[a-c]ï¼Œ[0123456789]å¯ä»¥å†™æˆ[0-9]ï¼ŒåŒç†[A-Z]è¡¨ç¤º26ä¸ªå¤§å†™å­—æ¯ã€‚ /a-z/.test(&#39;b&#39;) // false /[a-z]/.test(&#39;b&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œå½“è¿å­—å·ï¼ˆdashï¼‰ä¸å‡ºç°åœ¨æ–¹æ‹¬å·ä¹‹ä¸­ï¼Œå°±ä¸å…·å¤‡ç®€å†™çš„ä½œç”¨ï¼Œåªä»£è¡¨å­—é¢çš„å«ä¹‰ï¼Œæ‰€ä»¥ä¸åŒ¹é…å­—ç¬¦bã€‚åªæœ‰å½“è¿å­—å·ç”¨åœ¨æ–¹æ‹¬å·ä¹‹ä¸­ï¼Œæ‰è¡¨ç¤ºè¿ç»­çš„å­—ç¬¦åºåˆ—ã€‚ ä»¥ä¸‹éƒ½æ˜¯åˆæ³•çš„å­—ç¬¦ç±»ç®€å†™å½¢å¼ã€‚ [0-9.,] [0-9a-fA-F] [a-zA-Z0-9-] [1-31] ä¸Šé¢ä»£ç ä¸­æœ€åä¸€ä¸ªå­—ç¬¦ç±»[1-31]ï¼Œä¸ä»£è¡¨1åˆ°31ï¼Œåªä»£è¡¨1åˆ°3ã€‚ æ³¨æ„ï¼Œå­—ç¬¦ç±»çš„è¿å­—ç¬¦å¿…é¡»åœ¨å¤´å°¾ä¸¤ä¸ªå­—ç¬¦ä¸­é—´ï¼Œæ‰æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¦åˆ™å°±æ˜¯å­—é¢å«ä¹‰ã€‚æ¯”å¦‚ï¼Œ[-9]å°±è¡¨ç¤ºåŒ¹é…è¿å­—ç¬¦å’Œ9ï¼Œè€Œä¸æ˜¯åŒ¹é…0åˆ°9ã€‚ è¿å­—ç¬¦è¿˜å¯ä»¥ç”¨æ¥æŒ‡å®šUnicodeå­—ç¬¦çš„èŒƒå›´ã€‚ var str = &quot;\\u0130\\u0131\\u0132&quot;; /[\\u0128-\\uFFFF]/.test(str) // true å¦å¤–ï¼Œä¸è¦è¿‡åˆ†ä½¿ç”¨è¿å­—ç¬¦ï¼Œè®¾å®šä¸€ä¸ªå¾ˆå¤§çš„èŒƒå›´ï¼Œå¦åˆ™å¾ˆå¯èƒ½é€‰ä¸­æ„æ–™ä¹‹å¤–çš„å­—ç¬¦ã€‚æœ€å…¸å‹çš„ä¾‹å­å°±æ˜¯[A-z]ï¼Œè¡¨é¢ä¸Šå®ƒæ˜¯é€‰ä¸­ä»å¤§å†™çš„Aåˆ°å°å†™çš„zä¹‹é—´52ä¸ªå­—æ¯ï¼Œä½†æ˜¯ç”±äºåœ¨ASCIIç¼–ç ä¹‹ä¸­ï¼Œå¤§å†™å­—æ¯ä¸å°å†™å­—æ¯ä¹‹é—´è¿˜æœ‰å…¶ä»–å­—ç¬¦ï¼Œç»“æœå°±ä¼šå‡ºç°æ„æ–™ä¹‹å¤–çš„ç»“æœã€‚ /[A-z]/.test(&#39;\\\\&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºåæ–œæ ï¼ˆ\\\\ï¼‰çš„ASCIIç åœ¨å¤§å†™å­—æ¯ä¸å°å†™å­—æ¯ä¹‹é—´ï¼Œç»“æœä¼šè¢«é€‰ä¸­ã€‚ é¢„å®šä¹‰æ¨¡å¼é¢„å®šä¹‰æ¨¡å¼æŒ‡çš„æ˜¯æŸäº›å¸¸è§æ¨¡å¼çš„ç®€å†™æ–¹å¼ã€‚ \\d åŒ¹é…0-9ä¹‹é—´çš„ä»»ä¸€æ•°å­—ï¼Œç›¸å½“äº[0-9]ã€‚ \\D åŒ¹é…æ‰€æœ‰0-9ä»¥å¤–çš„å­—ç¬¦ï¼Œç›¸å½“äº[^0-9]ã€‚ \\w åŒ¹é…ä»»æ„çš„å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œç›¸å½“äº[A-Za-z0-9_]ã€‚ \\W é™¤æ‰€æœ‰å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ä»¥å¤–çš„å­—ç¬¦ï¼Œç›¸å½“äº[^A-Za-z0-9_]ã€‚ \\s åŒ¹é…ç©ºæ ¼ï¼ˆåŒ…æ‹¬åˆ¶è¡¨ç¬¦ã€ç©ºæ ¼ç¬¦ã€æ–­è¡Œç¬¦ç­‰ï¼‰ï¼Œç›¸ç­‰äº[\\t\\r\\n\\v\\f]ã€‚ \\S åŒ¹é…éç©ºæ ¼çš„å­—ç¬¦ï¼Œç›¸å½“äº[^\\t\\r\\n\\v\\f]ã€‚ \\b åŒ¹é…è¯çš„è¾¹ç•Œã€‚ \\B åŒ¹é…éè¯è¾¹ç•Œï¼Œå³åœ¨è¯çš„å†…éƒ¨ã€‚ ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ã€‚ // \\sçš„ä¾‹å­ /\\s\\w*/.exec(&#39;hello world&#39;) // [&quot; world&quot;] // \\bçš„ä¾‹å­ /\\bworld/.test(&#39;hello world&#39;) // true /\\bworld/.test(&#39;hello-world&#39;) // true /\\bworld/.test(&#39;helloworld&#39;) // false // \\Bçš„ä¾‹å­ /\\Bworld/.test(&#39;hello-world&#39;) // false /\\Bworld/.test(&#39;helloworld&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œ\\sè¡¨ç¤ºç©ºæ ¼ï¼Œæ‰€ä»¥åŒ¹é…ç»“æœä¼šåŒ…æ‹¬ç©ºæ ¼ã€‚\\bè¡¨ç¤ºè¯çš„è¾¹ç•Œï¼Œæ‰€ä»¥â€œworldâ€çš„è¯é¦–å¿…é¡»ç‹¬ç«‹ï¼ˆè¯å°¾æ˜¯å¦ç‹¬ç«‹æœªæŒ‡å®šï¼‰ï¼Œæ‰ä¼šåŒ¹é…ã€‚åŒç†ï¼Œ\\Bè¡¨ç¤ºéè¯çš„è¾¹ç•Œï¼Œåªæœ‰â€œworldâ€çš„è¯é¦–ä¸ç‹¬ç«‹ï¼Œæ‰ä¼šåŒ¹é…ã€‚ é€šå¸¸ï¼Œæ­£åˆ™è¡¨è¾¾å¼é‡åˆ°æ¢è¡Œç¬¦ï¼ˆ\\nï¼‰å°±ä¼šåœæ­¢åŒ¹é…ã€‚ var html = &quot;&lt;b&gt;Hello&lt;/b&gt;\\n&lt;i&gt;world!&lt;/i&gt;&quot;; /.*/.exec(html)[0] // &quot;&lt;b&gt;Hello&lt;/b&gt;&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²htmlåŒ…å«ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œç»“æœç‚¹å­—ç¬¦ï¼ˆ.ï¼‰ä¸åŒ¹é…æ¢è¡Œç¬¦ï¼Œå¯¼è‡´åŒ¹é…ç»“æœå¯èƒ½ä¸ç¬¦åˆåŸæ„ã€‚è¿™æ—¶ä½¿ç”¨\\så­—ç¬¦ç±»ï¼Œå°±èƒ½åŒ…æ‹¬æ¢è¡Œç¬¦ã€‚ var html = &quot;&lt;b&gt;Hello&lt;/b&gt;\\n&lt;i&gt;world!&lt;/i&gt;&quot;; /[\\S\\s]*/.exec(html)[0] // &quot;&lt;b&gt;Hello&lt;/b&gt;\\n&lt;i&gt;world!&lt;/i&gt;&quot; // å¦ä¸€ç§å†™æ³•ï¼ˆç”¨åˆ°äº†éæ•è·ç»„ï¼‰ /(?:.|\\s)*/.exec(html)[0] // &quot;&lt;b&gt;Hello&lt;/b&gt;\\n&lt;i&gt;world!&lt;/i&gt;&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œ[\\S\\s]æŒ‡ä»£ä¸€åˆ‡å­—ç¬¦ã€‚ é‡å¤ç±»æ¨¡å¼çš„ç²¾ç¡®åŒ¹é…æ¬¡æ•°ï¼Œä½¿ç”¨å¤§æ‹¬å·ï¼ˆ{}ï¼‰è¡¨ç¤ºã€‚{n}è¡¨ç¤ºæ°å¥½é‡å¤næ¬¡ï¼Œ{n,}è¡¨ç¤ºè‡³å°‘é‡å¤næ¬¡ï¼Œ{n,m}è¡¨ç¤ºé‡å¤ä¸å°‘äºnæ¬¡ï¼Œä¸å¤šäºmæ¬¡ã€‚ /lo{2}k/.test(&#39;look&#39;) // true /lo{2,5}k/.test(&#39;looook&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªæ¨¡å¼æŒ‡å®šoè¿ç»­å‡ºç°2æ¬¡ï¼Œç¬¬äºŒä¸ªæ¨¡å¼æŒ‡å®šoè¿ç»­å‡ºç°2æ¬¡åˆ°5æ¬¡ä¹‹é—´ã€‚ é‡è¯ç¬¦é‡è¯ç¬¦ç”¨æ¥è®¾å®šæŸä¸ªæ¨¡å¼å‡ºç°çš„æ¬¡æ•°ã€‚ ? é—®å·è¡¨ç¤ºæŸä¸ªæ¨¡å¼å‡ºç°0æ¬¡æˆ–1æ¬¡ï¼Œç­‰åŒäº{0, 1}ã€‚ * æ˜Ÿå·è¡¨ç¤ºæŸä¸ªæ¨¡å¼å‡ºç°0æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰åŒäº{0,}ã€‚ + åŠ å·è¡¨ç¤ºæŸä¸ªæ¨¡å¼å‡ºç°1æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰åŒäº{1,}ã€‚ // tå‡ºç°0æ¬¡æˆ–1æ¬¡ /t?est/.test(&#39;test&#39;) // true /t?est/.test(&#39;est&#39;) // true // tå‡ºç°1æ¬¡æˆ–å¤šæ¬¡ /t+est/.test(&#39;test&quot;) // true /t+est/.test(&#39;ttest&#39;) // true /t+est/.test(&#39;est&#39;) // false // tå‡ºç°0æ¬¡æˆ–å¤šæ¬¡ /t*est/.test(&#39;test&#39;) // true /t*est/.test(&#39;ttest&#39;) // true /t*est/.test(&#39;tttest&#39;) // true /t*est/.test(&#39;est&#39;) // true è´ªå©ªæ¨¡å¼ä¸Šä¸€å°èŠ‚çš„ä¸‰ä¸ªé‡è¯ç¬¦ï¼Œé»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯æœ€å¤§å¯èƒ½åŒ¹é…ï¼Œå³åŒ¹é…ç›´åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸æ»¡è¶³åŒ¹é…è§„åˆ™ä¸ºæ­¢ã€‚è¿™è¢«ç§°ä¸ºè´ªå©ªæ¨¡å¼ã€‚ var s = &#39;aaa&#39;; s.match(/a+/) // [&quot;aaa&quot;] ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡å¼æ˜¯/a+/ï¼Œè¡¨ç¤ºåŒ¹é…1ä¸ªaæˆ–å¤šä¸ªaï¼Œé‚£ä¹ˆåˆ°åº•ä¼šåŒ¹é…å‡ ä¸ªaå‘¢ï¼Ÿå› ä¸ºé»˜è®¤æ˜¯è´ªå©ªæ¨¡å¼ï¼Œä¼šä¸€ç›´åŒ¹é…åˆ°å­—ç¬¦aä¸å‡ºç°ä¸ºæ­¢ï¼Œæ‰€ä»¥åŒ¹é…ç»“æœæ˜¯3ä¸ªaã€‚ å¦‚æœæƒ³å°†è´ªå©ªæ¨¡å¼æ”¹ä¸ºéè´ªå©ªæ¨¡å¼ï¼Œå¯ä»¥åœ¨é‡è¯ç¬¦åé¢åŠ ä¸€ä¸ªé—®å·ã€‚ var s = &#39;aaa&#39;; s.match(/a+?/) // [&quot;a&quot;] ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡å¼ç»“å°¾æ·»åŠ äº†ä¸€ä¸ªé—®å·/a+?/ï¼Œè¿™æ—¶å°±æ”¹ä¸ºéè´ªå©ªæ¨¡å¼ï¼Œä¸€æ—¦æ¡ä»¶æ»¡è¶³ï¼Œå°±ä¸å†å¾€ä¸‹åŒ¹é…ã€‚ é™¤äº†éè´ªå©ªæ¨¡å¼çš„åŠ å·ï¼Œè¿˜æœ‰éè´ªå©ªæ¨¡å¼çš„æ˜Ÿå·ï¼ˆ*ï¼‰ã€‚ *?ï¼šè¡¨ç¤ºæŸä¸ªæ¨¡å¼å‡ºç°0æ¬¡æˆ–å¤šæ¬¡ï¼ŒåŒ¹é…æ—¶é‡‡ç”¨éè´ªå©ªæ¨¡å¼ã€‚ +?ï¼šè¡¨ç¤ºæŸä¸ªæ¨¡å¼å‡ºç°1æ¬¡æˆ–å¤šæ¬¡ï¼ŒåŒ¹é…æ—¶é‡‡ç”¨éè´ªå©ªæ¨¡å¼ã€‚ ä¿®é¥°ç¬¦ä¿®é¥°ç¬¦ï¼ˆmodifierï¼‰è¡¨ç¤ºæ¨¡å¼çš„é™„åŠ è§„åˆ™ï¼Œæ”¾åœ¨æ­£åˆ™æ¨¡å¼çš„æœ€å°¾éƒ¨ã€‚ ä¿®é¥°ç¬¦å¯ä»¥å•ä¸ªä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å¤šä¸ªä¸€èµ·ä½¿ç”¨ã€‚ // å•ä¸ªä¿®é¥°ç¬¦ var regex = /test/i; // å¤šä¸ªä¿®é¥°ç¬¦ var regex = /test/ig; ï¼ˆ1ï¼‰gä¿®é¥°ç¬¦ é»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€æ¬¡åŒ¹é…æˆåŠŸåï¼Œæ­£åˆ™å¯¹è±¡å°±åœæ­¢å‘ä¸‹åŒ¹é…äº†ã€‚gä¿®é¥°ç¬¦è¡¨ç¤ºå…¨å±€åŒ¹é…ï¼ˆglobalï¼‰ï¼ŒåŠ ä¸Šå®ƒä»¥åï¼Œæ­£åˆ™å¯¹è±¡å°†åŒ¹é…å…¨éƒ¨ç¬¦åˆæ¡ä»¶çš„ç»“æœï¼Œä¸»è¦ç”¨äºæœç´¢å’Œæ›¿æ¢ã€‚ var regex = /b/; var str = &#39;abba&#39;; regex.test(str); // true regex.test(str); // true regex.test(str); // true ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™æ¨¡å¼ä¸å«gä¿®é¥°ç¬¦ï¼Œæ¯æ¬¡éƒ½æ˜¯ä»å­—ç¬¦ä¸²å¤´éƒ¨å¼€å§‹åŒ¹é…ã€‚æ‰€ä»¥ï¼Œè¿ç»­åšäº†ä¸‰æ¬¡åŒ¹é…ï¼Œéƒ½è¿”å›trueã€‚ var regex = /b/g; var str = &#39;abba&#39;; regex.test(str); // true regex.test(str); // true regex.test(str); // false ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™æ¨¡å¼å«æœ‰gä¿®é¥°ç¬¦ï¼Œæ¯æ¬¡éƒ½æ˜¯ä»ä¸Šä¸€æ¬¡åŒ¹é…æˆåŠŸå¤„ï¼Œå¼€å§‹å‘ååŒ¹é…ã€‚å› ä¸ºå­—ç¬¦ä¸²â€œabbaâ€åªæœ‰ä¸¤ä¸ªâ€œbâ€ï¼Œæ‰€ä»¥å‰ä¸¤æ¬¡åŒ¹é…ç»“æœä¸ºtrueï¼Œç¬¬ä¸‰æ¬¡åŒ¹é…ç»“æœä¸ºfalseã€‚ ï¼ˆ2ï¼‰iä¿®é¥°ç¬¦ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­£åˆ™å¯¹è±¡åŒºåˆ†å­—æ¯çš„å¤§å°å†™ï¼ŒåŠ ä¸Šiä¿®é¥°ç¬¦ä»¥åè¡¨ç¤ºå¿½ç•¥å¤§å°å†™ï¼ˆignorecaseï¼‰ã€‚ /abc/.test(&#39;ABC&#39;) // false /abc/i.test(&#39;ABC&#39;) // true ä¸Šé¢ä»£ç è¡¨ç¤ºï¼ŒåŠ äº†iä¿®é¥°ç¬¦ä»¥åï¼Œä¸è€ƒè™‘å¤§å°å†™ï¼Œæ‰€ä»¥æ¨¡å¼abcåŒ¹é…å­—ç¬¦ä¸²ABCã€‚ ï¼ˆ3ï¼‰mä¿®é¥°ç¬¦ mä¿®é¥°ç¬¦è¡¨ç¤ºå¤šè¡Œæ¨¡å¼ï¼ˆmultilineï¼‰ï¼Œä¼šä¿®æ”¹^å’Œ$çš„è¡Œä¸ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ˆå³ä¸åŠ mä¿®é¥°ç¬¦æ—¶ï¼‰ï¼Œ^å’Œ$åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹å¤„å’Œç»“å°¾å¤„ï¼ŒåŠ ä¸Šmä¿®é¥°ç¬¦ä»¥åï¼Œ^å’Œ$è¿˜ä¼šåŒ¹é…è¡Œé¦–å’Œè¡Œå°¾ï¼Œå³^å’Œ$ä¼šè¯†åˆ«æ¢è¡Œç¬¦ï¼ˆ\\nï¼‰ã€‚ /world$/.test(&#39;hello world\\n&#39;) // false /world$/m.test(&#39;hello world\\n&#39;) // true ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²ç»“å°¾å¤„æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚å¦‚æœä¸åŠ mä¿®é¥°ç¬¦ï¼ŒåŒ¹é…ä¸æˆåŠŸï¼Œå› ä¸ºå­—ç¬¦ä¸²çš„ç»“å°¾ä¸æ˜¯â€œworldâ€ï¼›åŠ ä¸Šä»¥åï¼Œ$å¯ä»¥åŒ¹é…è¡Œå°¾ã€‚ /^b/m.test(&#39;a\\nb&#39;) // true ä¸Šé¢ä»£ç è¦æ±‚åŒ¹é…è¡Œé¦–çš„bï¼Œå¦‚æœä¸åŠ mä¿®é¥°ç¬¦ï¼Œå°±ç›¸å½“äºbåªèƒ½å¤„åœ¨å­—ç¬¦ä¸²çš„å¼€å§‹å¤„ã€‚ ç»„åŒ¹é…ï¼ˆ1ï¼‰æ¦‚è¿° æ­£åˆ™è¡¨è¾¾å¼çš„æ‹¬å·è¡¨ç¤ºåˆ†ç»„åŒ¹é…ï¼Œæ‹¬å·ä¸­çš„æ¨¡å¼å¯ä»¥ç”¨æ¥åŒ¹é…åˆ†ç»„çš„å†…å®¹ã€‚ /fred+/.test(&#39;fredd&#39;) // true /(fred)+/.test(&#39;fredfred&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªæ¨¡å¼æ²¡æœ‰æ‹¬å·ï¼Œç»“æœ+åªè¡¨ç¤ºé‡å¤å­—æ¯dï¼Œç¬¬äºŒä¸ªæ¨¡å¼æœ‰æ‹¬å·ï¼Œç»“æœ+å°±è¡¨ç¤ºåŒ¹é…â€œfredâ€è¿™ä¸ªè¯ã€‚ ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªåˆ†ç»„æ•è·çš„ä¾‹å­ã€‚ var m = &#39;abcabc&#39;.match(/(.)b(.)/); m // [&#39;abc&#39;, &#39;a&#39;, &#39;c&#39;] ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼/(.)b(.)/ä¸€å…±ä½¿ç”¨ä¸¤ä¸ªæ‹¬å·ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·æ•è·aï¼Œç¬¬äºŒä¸ªæ‹¬å·æ•è·cã€‚ æ³¨æ„ï¼Œä½¿ç”¨ç»„åŒ¹é…æ—¶ï¼Œä¸å®œåŒæ—¶ä½¿ç”¨gä¿®é¥°ç¬¦ï¼Œå¦åˆ™matchæ–¹æ³•ä¸ä¼šæ•è·åˆ†ç»„çš„å†…å®¹ã€‚ var m = &#39;abcabc&#39;.match(/(.)b(.)/g); m // [&#39;abc&#39;, &#39;abc&#39;] ä¸Šé¢ä»£ç ä½¿ç”¨å¸¦gä¿®é¥°ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œç»“æœmatchæ–¹æ³•åªæ•è·äº†åŒ¹é…æ•´ä¸ªè¡¨è¾¾å¼çš„éƒ¨åˆ†ã€‚ åœ¨æ­£åˆ™è¡¨è¾¾å¼å†…éƒ¨ï¼Œå¯ä»¥ç”¨\\nå¼•ç”¨æ‹¬å·åŒ¹é…çš„å†…å®¹ï¼Œnæ˜¯ä»1å¼€å§‹çš„è‡ªç„¶æ•°ï¼Œè¡¨ç¤ºå¯¹åº”é¡ºåºçš„æ‹¬å·ã€‚ /(.)b(.)\\1b\\2/.test(&quot;abcabc&quot;) // true ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ\\1è¡¨ç¤ºå‰ä¸€ä¸ªæ‹¬å·åŒ¹é…çš„å†…å®¹ï¼ˆå³â€œaâ€ï¼‰ï¼Œ\\2è¡¨ç¤ºç¬¬äºŒä¸ªæ‹¬å·åŒ¹é…çš„å†…å®¹ï¼ˆå³â€œbâ€ï¼‰ã€‚ ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚ /y(..)(.)\\2\\1/.test(&#39;yabccab&#39;) // true æ‹¬å·è¿˜å¯ä»¥åµŒå¥—ã€‚ /y((..)\\2)\\1/.test(&#39;yabababab&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œ\\1æŒ‡å‘å¤–å±‚æ‹¬å·ï¼Œ\\2æŒ‡å‘å†…å±‚æ‹¬å·ã€‚ ç»„åŒ¹é…éå¸¸æœ‰ç”¨ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªåŒ¹é…ç½‘é¡µæ ‡ç­¾çš„ä¾‹å­ã€‚ var tagName = /&lt;([^&gt;]+)&gt;[^&lt;]*&lt;\\/\\1&gt;/; tagName.exec(&quot;&lt;b&gt;bold&lt;/b&gt;&quot;)[1] // &#39;b&#39; ä¸Šé¢ä»£ç ä¸­ï¼Œåœ†æ‹¬å·åŒ¹é…å°–æ‹¬å·ä¹‹ä¸­çš„æ ‡ç­¾ï¼Œè€Œ\\1å°±è¡¨ç¤ºå¯¹åº”çš„é—­åˆæ ‡ç­¾ã€‚ ä¸Šé¢ä»£ç ç•¥åŠ ä¿®æ”¹ï¼Œå°±èƒ½æ•è·å¸¦æœ‰å±æ€§çš„æ ‡ç­¾ã€‚ var html = &#39;&lt;b class=&quot;hello&quot;&gt;Hello&lt;/b&gt;&lt;i&gt;world&lt;/i&gt;&#39;; var tag = /&lt;(\\w+)([^&gt;]*)&gt;(.*?)&lt;\\/\\1&gt;/g; var match = tag.exec(html); match[1] // &quot;b&quot; match[2] // &quot;class=&quot;hello&quot;&quot; match[3] // &quot;Hello&quot; match = tag.exec(html); match[1] // &quot;i&quot; match[2] // &quot;&quot; match[3] // &quot;world&quot; ï¼ˆ2ï¼‰éæ•è·ç»„ (?:x)ç§°ä¸ºéæ•è·ç»„ï¼ˆNon-capturing groupï¼‰ï¼Œè¡¨ç¤ºä¸è¿”å›è¯¥ç»„åŒ¹é…çš„å†…å®¹ï¼Œå³åŒ¹é…çš„ç»“æœä¸­ä¸è®¡å…¥è¿™ä¸ªæ‹¬å·ã€‚ éæ•è·ç»„çš„ä½œç”¨è¯·è€ƒè™‘è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œå‡å®šéœ€è¦åŒ¹é…fooæˆ–è€…foofooï¼Œæ­£åˆ™è¡¨è¾¾å¼å°±åº”è¯¥å†™æˆ/(foo){1, 2}/ï¼Œä½†æ˜¯è¿™æ ·ä¼šå ç”¨ä¸€ä¸ªç»„åŒ¹é…ã€‚è¿™æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨éæ•è·ç»„ï¼Œå°†æ­£åˆ™è¡¨è¾¾å¼æ”¹ä¸º/(?:foo){1, 2}/ï¼Œå®ƒçš„ä½œç”¨ä¸å‰ä¸€ä¸ªæ­£åˆ™æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸ä¼šå•ç‹¬è¾“å‡ºæ‹¬å·å†…éƒ¨çš„å†…å®¹ã€‚ è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚ var m = &#39;abc&#39;.match(/(?:.)b(.)/); m // [&quot;abc&quot;, &quot;c&quot;] ä¸Šé¢ä»£ç ä¸­çš„æ¨¡å¼ï¼Œä¸€å…±ä½¿ç”¨äº†ä¸¤ä¸ªæ‹¬å·ã€‚å…¶ä¸­ç¬¬ä¸€ä¸ªæ‹¬å·æ˜¯éæ•è·ç»„ï¼Œæ‰€ä»¥æœ€åè¿”å›çš„ç»“æœä¸­æ²¡æœ‰ç¬¬ä¸€ä¸ªæ‹¬å·ï¼Œåªæœ‰ç¬¬äºŒä¸ªæ‹¬å·åŒ¹é…çš„å†…å®¹ã€‚ ä¸‹é¢æ˜¯ç”¨æ¥åˆ†è§£ç½‘å€çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ // æ­£å¸¸åŒ¹é… var url = /(http|ftp):\\/\\/([^/\\r\\n]+)(\\/[^\\r\\n]*)?/; url.exec(&#39;http://google.com/&#39;); // [&quot;http://google.com/&quot;, &quot;http&quot;, &quot;google.com&quot;, &quot;/&quot;] // éæ•è·ç»„åŒ¹é… var url = /(?:http|ftp):\\/\\/([^/\\r\\n]+)(\\/[^\\r\\n]*)?/; url.exec(&#39;http://google.com/&#39;); // [&quot;http://google.com/&quot;, &quot;google.com&quot;, &quot;/&quot;] ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå‰ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ˜¯æ­£å¸¸åŒ¹é…ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·è¿”å›ç½‘ç»œåè®®ï¼›åä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ˜¯éæ•è·åŒ¹é…ï¼Œè¿”å›ç»“æœä¸­ä¸åŒ…æ‹¬ç½‘ç»œåè®®ã€‚ ï¼ˆ3ï¼‰å…ˆè¡Œæ–­è¨€ x(?=y)ç§°ä¸ºå…ˆè¡Œæ–­è¨€ï¼ˆPositive look-aheadï¼‰ï¼Œxåªæœ‰åœ¨yå‰é¢æ‰åŒ¹é…ï¼Œyä¸ä¼šè¢«è®¡å…¥è¿”å›ç»“æœã€‚æ¯”å¦‚ï¼Œè¦åŒ¹é…åé¢è·Ÿç€ç™¾åˆ†å·çš„æ•°å­—ï¼Œå¯ä»¥å†™æˆ/\\d+(?=%)/ã€‚ â€œå…ˆè¡Œæ–­è¨€â€ä¸­ï¼Œæ‹¬å·é‡Œçš„éƒ¨åˆ†æ˜¯ä¸ä¼šè¿”å›çš„ã€‚ var m = &#39;abc&#39;.match(/b(?=c)/); m // [&quot;b&quot;] ä¸Šé¢çš„ä»£ç ä½¿ç”¨äº†å…ˆè¡Œæ–­è¨€ï¼Œbåœ¨cå‰é¢æ‰€ä»¥è¢«åŒ¹é…ï¼Œä½†æ˜¯æ‹¬å·å¯¹åº”çš„cä¸ä¼šè¢«è¿”å›ã€‚ å†çœ‹ä¸€ä¸ªä¾‹å­ã€‚ /Jack (?=Sprat|Frost)/.test(&#39;Jack Frost&#39;) // true ï¼ˆ4ï¼‰å…ˆè¡Œå¦å®šæ–­è¨€ x(?!y)ç§°ä¸ºå…ˆè¡Œå¦å®šæ–­è¨€ï¼ˆNegative look-aheadï¼‰ï¼Œxåªæœ‰ä¸åœ¨yå‰é¢æ‰åŒ¹é…ï¼Œyä¸ä¼šè¢«è®¡å…¥è¿”å›ç»“æœã€‚æ¯”å¦‚ï¼Œè¦åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯ç™¾åˆ†å·çš„æ•°å­—ï¼Œå°±è¦å†™æˆ/\\d+(?!%)/ã€‚ /\\d+(?!\\.)/.exec(&#39;3.14&#39;) // [&quot;14&quot;] ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼æŒ‡å®šï¼Œåªæœ‰ä¸åœ¨å°æ•°ç‚¹å‰é¢çš„æ•°å­—æ‰ä¼šè¢«åŒ¹é…ï¼Œå› æ­¤è¿”å›çš„ç»“æœå°±æ˜¯14ã€‚ â€œå…ˆè¡Œå¦å®šæ–­è¨€â€ä¸­ï¼Œæ‹¬å·é‡Œçš„éƒ¨åˆ†æ˜¯ä¸ä¼šè¿”å›çš„ã€‚ var m = &#39;abd&#39;.match(/b(?!c)/); m // [&#39;b&#39;] ä¸Šé¢çš„ä»£ç ä½¿ç”¨äº†å…ˆè¡Œå¦å®šæ–­è¨€ï¼Œbä¸åœ¨cå‰é¢æ‰€ä»¥è¢«åŒ¹é…ï¼Œè€Œä¸”æ‹¬å·å¯¹åº”çš„dä¸ä¼šè¢«è¿”å›ã€‚ å‚è€ƒé“¾æ¥ Axel Rauschmayer, JavaScript: an overview of the regular expression API Mozilla Developer Network, Regular Expressions Axel Rauschmayer, The flag /g of JavaScriptâ€™s regular expressions Sam Hughes, Learn regular expressions in about 55 minutes å…³äºæœ¬æ–‡ä»…ä¾›å­¦ä¹ äº¤æµåˆ†äº«ï¼ŒåŸæ–‡é“¾æ¥ RegExpå¯¹è±¡ï¼Œæ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆ","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"RegExp","slug":"RegExp","permalink":"https://microzz.com/tags/RegExp/"}]},{"title":"JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³•","date":"2017-08-22T14:03:04.000Z","path":"2017/08/22/js-binarytree/","text":"JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³•ä»€ä¹ˆæ˜¯äºŒå‰æ ‘ &nbsp;&nbsp;&nbsp;åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒäºŒå‰æ ‘ï¼ˆè‹±è¯­ï¼šBinary treeï¼‰æ˜¯æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªæœ‰ä¸¤ä¸ªåˆ†æ”¯(ä¸å­˜åœ¨åˆ†æ”¯åº¦å¤§äº2çš„èŠ‚ç‚¹)çš„æ ‘ç»“æ„ã€‚é€šå¸¸åˆ†æ”¯è¢«ç§°ä½œâ€œå·¦å­æ ‘â€å’Œâ€œå³å­æ ‘â€ã€‚äºŒå‰æ ‘çš„åˆ†æ”¯å…·æœ‰å·¦å³æ¬¡åºï¼Œä¸èƒ½é¢ å€’ã€‚ ä»¥ä¸Šæ˜¯ç»´åŸºç™¾ç§‘å¯¹äºŒå‰æ ‘çš„ç®€å•ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å›¾ç‰‡å½¢è±¡è¡¨ç¤ºï¼š äºŒå‰æ ‘ç»“æ„ JSæ¥å®ç°äºŒå‰æ ‘ä¸‹é¢æˆ‘ä»¬é€šè¿‡JavaScriptæ¥æ¨¡æ‹ŸäºŒå‰æ ‘çš„æ•°æ®ç»“æ„ /** * JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³• */ function BinaryTree() { // äºŒå‰æ ‘æ ¹èŠ‚ç‚¹ this.root = null; // ç”ŸæˆäºŒå‰æ ‘èŠ‚ç‚¹ const Node = function(key) { this.key = key; this.left = null; this.right = null; } // æ’å…¥èŠ‚ç‚¹ const insertNode = function(node, newNode) { if (newNode.key &lt; node.key) { if (node.left === null) { node.left = newNode; } else { insertNode(node.left, newNode); } } else { if (node.right === null) { node.right = newNode; } else { insertNode(node.right, newNode); } } } // å®ä¾‹è°ƒç”¨çš„æ’å…¥èŠ‚ç‚¹æ–¹æ³• this.insert = function(key) { let newNode = new Node(key); if (this.root === null) { this.root = newNode; } else { insertNode(this.root, newNode); } } } // æ¨¡æ‹Ÿæ•°æ® const data = [8, 3, 10, 1, 6, 14, 4, 7, 13]; // å®ä¾‹åŒ–äºŒå‰æ ‘çš„æ•°æ®ç»“æ„ const binaryTree = new BinaryTree(); // éå†æ•°æ®å¹¶æ’å…¥ data.forEach(item =&gt; binaryTree.insert(item)); // æ‰“å°ç»“æœ console.log(binaryTree.root); ç»“æœ binaryTree.root ä¹Ÿå³å¯¹åº”å›¾åƒï¼š äºŒå‰æ ‘ç»“æ„ ä»¥ä¸Šå°±æ˜¯ç”¨JavaScriptå¯¹äºŒå‰æ ‘çš„ç®€å•æè¿°ã€‚","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"äºŒå‰æ ‘","slug":"äºŒå‰æ ‘","permalink":"https://microzz.com/tags/äºŒå‰æ ‘/"},{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"https://microzz.com/tags/æ•°æ®ç»“æ„ä¸ç®—æ³•/"}]},{"title":"Webå®‰å…¨ä¹‹CSRF","date":"2017-08-19T09:02:10.000Z","path":"2017/08/19/csrf/","text":"Webå®‰å…¨ä¹‹CSRFä»€ä¹ˆæ˜¯CSRF &nbsp;&nbsp;è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆè‹±è¯­ï¼šCross-site request forgeryï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸º one-click attack æˆ–è€… session ridingï¼Œé€šå¸¸ç¼©å†™ä¸º CSRF æˆ–è€… XSRFï¼Œ æ˜¯ä¸€ç§æŒŸåˆ¶ç”¨æˆ·åœ¨å½“å‰å·²ç™»å½•çš„Webåº”ç”¨ç¨‹åºä¸Šæ‰§è¡Œéæœ¬æ„çš„æ“ä½œçš„æ”»å‡»æ–¹æ³•ã€‚è·Ÿè·¨ç½‘ç«™è„šæœ¬ï¼ˆXSSï¼‰ç›¸æ¯”ï¼ŒXSS åˆ©ç”¨çš„æ˜¯ç”¨æˆ·å¯¹æŒ‡å®šç½‘ç«™çš„ä¿¡ä»»ï¼ŒCSRF åˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·ç½‘é¡µæµè§ˆå™¨çš„ä¿¡ä»»ã€‚ç®€å•åœ°è¯´ï¼Œæ˜¯æ”»å‡»è€…é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ¬ºéª—ç”¨æˆ·çš„æµè§ˆå™¨å»è®¿é—®ä¸€ä¸ªè‡ªå·±æ›¾ç»è®¤è¯è¿‡çš„ç½‘ç«™å¹¶æ‰§è¡Œä¸€äº›æ“ä½œï¼ˆå¦‚å‘é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç”šè‡³è´¢äº§æ“ä½œå¦‚è½¬è´¦å’Œè´­ä¹°å•†å“ï¼‰ã€‚ç”±äºæµè§ˆå™¨æ›¾ç»è®¤è¯è¿‡ï¼Œæ‰€ä»¥è¢«è®¿é—®çš„ç½‘ç«™ä¼šè®¤ä¸ºæ˜¯çœŸæ­£çš„ç”¨æˆ·æ“ä½œè€Œå»æ‰§è¡Œã€‚è¿™åˆ©ç”¨äº†webä¸­ç”¨æˆ·èº«ä»½éªŒè¯çš„ä¸€ä¸ªæ¼æ´ï¼šç®€å•çš„èº«ä»½éªŒè¯åªèƒ½ä¿è¯è¯·æ±‚å‘è‡ªæŸä¸ªç”¨æˆ·çš„æµè§ˆå™¨ï¼Œå´ä¸èƒ½ä¿è¯è¯·æ±‚æœ¬èº«æ˜¯ç”¨æˆ·è‡ªæ„¿å‘å‡ºçš„ã€‚ ä»¥ä¸Šæ˜¯ç»´åŸºç™¾ç§‘å¯¹CSRFçš„è§£é‡Šï¼Œæˆ‘ç”»ä¸€å¹…æ€ç»´å¯¼å›¾æ›´å¥½ç†è§£ï¼š CSRFæ”»å‡»åŸç† ç”¨æˆ·é€šè¿‡æºç«™ç‚¹é¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®æºç«™ç‚¹æœåŠ¡å™¨æ¥å£ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¯èƒ½è¢«é’“é±¼è¿›å…¥ä¼ªç«™ç‚¹æ¥è®¿é—®æºæœåŠ¡å™¨ï¼Œå¦‚æœä¼ªç«™ç‚¹é€šè¿‡ç¬¬ä¸‰æ–¹æˆ–ç”¨æˆ·ä¿¡æ¯æ‹¼æ¥ç­‰æ–¹å¼è·å–åˆ°äº†ç”¨æˆ·çš„ä¿¡æ¯ï¼Œç›´æ¥è®¿é—®æºç«™ç‚¹çš„æœåŠ¡å™¨æ¥å£è¿›è¡Œå…³é”®æ€§æ“ä½œï¼ˆä¾‹å¦‚æ”¯ä»˜æ‰£æ¬¾æˆ–è¿”å›ç”¨æˆ·éšç§ä¿¡æ¯ç­‰æ“ä½œï¼‰ï¼Œæ­¤æ—¶å¦‚æœæºç«™ç‚¹æœåŠ¡å™¨æœªåšæ ¡éªŒé˜²æŠ¤ï¼Œä¼ªç«™ç‚¹çš„è¯·æ±‚æ“ä½œå°±å¯ä»¥è¢«æˆåŠŸæ‰§è¡Œã€‚å¦ä¸€ç§æƒ…å†µåˆ™å¯èƒ½æ˜¯ç›—åˆ·æºç«™ç‚¹çš„ç™»å½•ç­‰æ¥å£æ¥æš´åŠ›ç ´è§£ç”¨æˆ·å¯†ç çš„æƒ…å†µï¼Œå¦‚æœæºç«™ç‚¹ä¸æ·»åŠ é˜²æŠ¤æªæ–½ï¼Œç”¨æˆ·ä¿¡æ¯å°±æå¯èƒ½è¢«ç›—å– ä¾‹å­å‡å¦‚ä¸€å®¶é“¶è¡Œç”¨ä»¥æ‰§è¡Œè½¬è´¦æ“ä½œçš„URLåœ°å€å¦‚ä¸‹ï¼š http://www.examplebank.com/withdraw?account=AccoutName&amp;amount=1000&amp;for=PayeeName é‚£ä¹ˆï¼Œä¸€ä¸ªæ¶æ„æ”»å‡»è€…å¯ä»¥åœ¨å¦ä¸€ä¸ªç½‘ç«™ä¸Šæ”¾ç½®å¦‚ä¸‹ä»£ç ï¼š &lt;img src=&quot;http://www.examplebank.com/withdraw?account=Alice&amp;amount=1000&amp;for=Badman&quot;&gt; å¦‚æœæœ‰è´¦æˆ·åä¸ºAliceçš„ç”¨æˆ·è®¿é—®äº†æ¶æ„ç«™ç‚¹ï¼Œè€Œå¥¹ä¹‹å‰åˆšè®¿é—®è¿‡é“¶è¡Œä¸ä¹…ï¼Œç™»å½•ä¿¡æ¯å°šæœªè¿‡æœŸï¼Œé‚£ä¹ˆå¥¹å°±ä¼šæŸå¤±1000èµ„é‡‘ã€‚è¿™ç§æ¶æ„çš„ç½‘å€å¯ä»¥æœ‰å¾ˆå¤šç§å½¢å¼ï¼Œè—èº«äºç½‘é¡µä¸­çš„è®¸å¤šåœ°æ–¹ã€‚æ­¤å¤–ï¼Œæ”»å‡»è€…ä¹Ÿä¸éœ€è¦æ§åˆ¶æ”¾ç½®æ¶æ„ç½‘å€çš„ç½‘ç«™ã€‚ä¾‹å¦‚ä»–å¯ä»¥å°†è¿™ç§åœ°å€è—åœ¨è®ºå›ï¼Œåšå®¢ç­‰ä»»ä½•ç”¨æˆ·ç”Ÿæˆå†…å®¹çš„ç½‘ç«™ä¸­ã€‚è¿™æ„å‘³ç€å¦‚æœæœåŠ¡å™¨ç«¯æ²¡æœ‰åˆé€‚çš„é˜²å¾¡æªæ–½çš„è¯ï¼Œç”¨æˆ·å³ä½¿è®¿é—®ç†Ÿæ‚‰çš„å¯ä¿¡ç½‘ç«™ä¹Ÿæœ‰å—æ”»å‡»çš„å±é™©ã€‚é€è¿‡ä¾‹å­èƒ½å¤Ÿçœ‹å‡ºï¼Œæ”»å‡»è€…å¹¶ä¸èƒ½é€šè¿‡CSRFæ”»å‡»æ¥ç›´æ¥è·å–ç”¨æˆ·çš„è´¦æˆ·æ§åˆ¶æƒï¼Œä¹Ÿä¸èƒ½ç›´æ¥çªƒå–ç”¨æˆ·çš„ä»»ä½•ä¿¡æ¯ã€‚ä»–ä»¬èƒ½åšåˆ°çš„ï¼Œæ˜¯æ¬ºéª—ç”¨æˆ·æµè§ˆå™¨ï¼Œè®©å…¶ä»¥ç”¨æˆ·çš„åä¹‰æ‰§è¡Œæ“ä½œã€‚ é˜²å¾¡æªæ–½æ£€æŸ¥Refererå­—æ®µHTTPå¤´ä¸­æœ‰ä¸€ä¸ªRefererå­—æ®µï¼Œè¿™ä¸ªå­—æ®µç”¨ä»¥æ ‡æ˜è¯·æ±‚æ¥æºäºå“ªä¸ªåœ°å€ã€‚åœ¨å¤„ç†æ•æ„Ÿæ•°æ®è¯·æ±‚æ—¶ï¼Œé€šå¸¸æ¥è¯´ï¼ŒRefererå­—æ®µåº”å’Œè¯·æ±‚çš„åœ°å€ä½äºåŒä¸€åŸŸåä¸‹ã€‚ä»¥ä¸Šæ–‡é“¶è¡Œæ“ä½œä¸ºä¾‹ï¼ŒRefererå­—æ®µåœ°å€é€šå¸¸åº”è¯¥æ˜¯è½¬è´¦æŒ‰é’®æ‰€åœ¨çš„ç½‘é¡µåœ°å€ï¼Œåº”è¯¥ä¹Ÿä½äºwww.examplebank.comä¹‹ä¸‹ã€‚è€Œå¦‚æœæ˜¯CSRFæ”»å‡»ä¼ æ¥çš„è¯·æ±‚ï¼ŒRefererå­—æ®µä¼šæ˜¯åŒ…å«æ¶æ„ç½‘å€çš„åœ°å€ï¼Œä¸ä¼šä½äºwww.examplebank.comä¹‹ä¸‹ï¼Œè¿™æ—¶å€™æœåŠ¡å™¨å°±èƒ½è¯†åˆ«å‡ºæ¶æ„çš„è®¿é—®ã€‚è¿™ç§åŠæ³•ç®€å•æ˜“è¡Œï¼Œå·¥ä½œé‡ä½ï¼Œä»…éœ€è¦åœ¨å…³é”®è®¿é—®å¤„å¢åŠ ä¸€æ­¥æ ¡éªŒã€‚ä½†è¿™ç§åŠæ³•ä¹Ÿæœ‰å…¶å±€é™æ€§ï¼Œå› å…¶å®Œå…¨ä¾èµ–æµè§ˆå™¨å‘é€æ­£ç¡®çš„Refererå­—æ®µã€‚è™½ç„¶httpåè®®å¯¹æ­¤å­—æ®µçš„å†…å®¹æœ‰æ˜ç¡®çš„è§„å®šï¼Œä½†å¹¶æ— æ³•ä¿è¯æ¥è®¿çš„æµè§ˆå™¨çš„å…·ä½“å®ç°ï¼Œäº¦æ— æ³•ä¿è¯æµè§ˆå™¨æ²¡æœ‰å®‰å…¨æ¼æ´å½±å“åˆ°æ­¤å­—æ®µã€‚å¹¶ä¸”ä¹Ÿå­˜åœ¨æ”»å‡»è€…æ”»å‡»æŸäº›æµè§ˆå™¨ï¼Œç¯¡æ”¹å…¶Refererå­—æ®µçš„å¯èƒ½ã€‚ æ·»åŠ æ ¡éªŒtokenç”±äºCSRFçš„æœ¬è´¨åœ¨äºæ”»å‡»è€…æ¬ºéª—ç”¨æˆ·å»è®¿é—®è‡ªå·±è®¾ç½®çš„åœ°å€ï¼Œæ‰€ä»¥å¦‚æœè¦æ±‚åœ¨è®¿é—®æ•æ„Ÿæ•°æ®è¯·æ±‚æ—¶ï¼Œè¦æ±‚ç”¨æˆ·æµè§ˆå™¨æä¾›ä¸ä¿å­˜åœ¨cookieä¸­ï¼Œå¹¶ä¸”æ”»å‡»è€…æ— æ³•ä¼ªé€ çš„æ•°æ®ä½œä¸ºæ ¡éªŒï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±æ— æ³•å†æ‰§è¡ŒCSRFæ”»å‡»ã€‚è¿™ç§æ•°æ®é€šå¸¸æ˜¯è¡¨å•ä¸­çš„ä¸€ä¸ªæ•°æ®é¡¹ã€‚æœåŠ¡å™¨å°†å…¶ç”Ÿæˆå¹¶é™„åŠ åœ¨è¡¨å•ä¸­ï¼Œå…¶å†…å®¹æ˜¯ä¸€ä¸ªä¼ªä¹±æ•°ã€‚å½“å®¢æˆ·ç«¯é€šè¿‡è¡¨å•æäº¤è¯·æ±‚æ—¶ï¼Œè¿™ä¸ªä¼ªä¹±æ•°ä¹Ÿä¸€å¹¶æäº¤ä¸Šå»ä»¥ä¾›æ ¡éªŒã€‚æ­£å¸¸çš„è®¿é—®æ—¶ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨èƒ½å¤Ÿæ­£ç¡®å¾—åˆ°å¹¶ä¼ å›è¿™ä¸ªä¼ªä¹±æ•°ï¼Œè€Œé€šè¿‡CSRFä¼ æ¥çš„æ¬ºéª—æ€§æ”»å‡»ä¸­ï¼Œæ”»å‡»è€…æ— ä»äº‹å…ˆå¾—çŸ¥è¿™ä¸ªä¼ªä¹±æ•°çš„å€¼ï¼ŒæœåŠ¡å™¨ç«¯å°±ä¼šå› ä¸ºæ ¡éªŒtokençš„å€¼ä¸ºç©ºæˆ–è€…é”™è¯¯ï¼Œæ‹’ç»è¿™ä¸ªå¯ç–‘è¯·æ±‚ã€‚ æˆ‘ä»¬åœ¨æºç«™ç‚¹æœåŠ¡è¯·æ±‚è°ƒç”¨æ—¶æ·»åŠ äº†å¯¹æºç«™ç‚¹çš„éªŒè¯ï¼Œä½¿ç”¨æœåŠ¡å™¨ç«¯å®æ—¶è¿”å›åŠ å¯†çš„éªŒè¯ Tokenç»™æºç«™ç‚¹é¡µé¢ï¼Œåœ¨æºç«™ç‚¹é¡µé¢æäº¤æ—¶å°† Tokenä¸€èµ·å¸¦ç»™æœåŠ¡å™¨éªŒè¯ï¼Œè€ŒTokenæ˜¯ä¸ä¼šè¢«å…¶ä»–ä¼ªç«™ç‚¹åˆ©ç”¨çš„ã€‚è€Œéæ³•çš„ä¼ªç«™ç‚¹å’Œç›—åˆ·çš„è¡Œä¸ºå°±å¯ä»¥è¢«ç›´æ¥æ‹’ç»æ‰ï¼Œè¿™æ ·å°±å¤§å¤§é™ä½äº†CSRFå‘ç”Ÿçš„æ¦‚ç‡ã€‚æ‰€ä»¥åœ¨Webåç«¯ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šè¿›è¡Œ Tokençš„éªŒè¯ï¼Œå…¶ä¸­ä¸€ç§å½¢å¼æ˜¯å°†é¡µé¢æäº¤åˆ°åå°çš„éªŒè¯ Tokenä¸ sessionä¸´æ—¶ä¿å­˜çš„ Tokenè¿›è¡Œæ¯”è¾ƒå°±å¯ä»¥æ¥å®ç°äº†ã€‚ //ç”Ÿæˆéšæœºçš„csrféªŒè¯ Tokenï¼Œå¹¶è¿”å›ç»™å‰ç«¯é¡µé¢ this.session.csrf = md5(math.random(0, 1).tostring().slice(5, 15); this.body = yield render(&#39;user/login&#39;, { csrf: ctx.session.csrf }); //æäº¤æ—¶éªŒè¯ Tokenæ˜¯å¦ä¸æºç«™çš„ Tokenç›¸åŒ let csrf = this.request.body[&#39;csrf&#39;]; if (csrf !== this.session.csrf) { res = { code: 403, msg: &#39;ä¸æ˜ç½‘ç«™æ¥æºæäº¤&#39; } } else { // æ­£å¸¸æäº¤åçš„é€»è¾‘ } å†ç”¨æ€ç»´å¯¼å›¾è¡¨ç¤ºä¸€ä¸‹ï¼š CSRF ç›®å‰è§£å†³CSRFçš„æœ€ä½³æ–¹å¼å°±æ˜¯é€šè¿‡åŠ å¯†è®¡ç®—çš„ TokenéªŒè¯ï¼Œè€Œ Tokené™¤äº†é€šè¿‡ sessionä¹Ÿå¯ä»¥ä½¿ç”¨HTTPè¯·æ±‚å¤´ä¸­ Authorizationçš„ç‰¹å®šè®¤è¯å­—æ®µæ¥ä¼ é€’ã€‚å½“ç„¶å¹¶ä¸æ˜¯è¯´ä½¿ç”¨äº†Tokenï¼Œç½‘ç«™è°ƒç”¨æœåŠ¡å°±å®‰å…¨äº†ï¼Œå•çº¯çš„ TokenéªŒè¯é˜²æ­¢CSRFçš„æ–¹å¼ç†è®ºä¸Šä¹Ÿæ˜¯å¯ä»¥è¢«ç ´è§£çš„ï¼Œä¾‹å¦‚å¯ä»¥é€šè¿‡åŸŸåä¼ªé€ å’Œæ‹‰å–æºç«™å®æ—¶ Tokenä¿¡æ¯çš„æ–¹å¼æ¥è¿›è¡Œæäº¤ã€‚å¦å¤–ï¼Œä»»ä½•æ‰€è°“çš„å®‰å…¨éƒ½æ˜¯ç›¸å¯¹çš„ï¼Œåªæ˜¯è¯´ç†è®ºçš„ç ´è§£æ—¶é—´å˜é•¿äº†ï¼Œè€Œä¸å®¹æ˜“è¢«æ”»å‡»ã€‚å¾ˆå¤šæ—¶å€™è¦ä½¿ç”¨å¤šç§æ–¹æ³•ç»“åˆçš„æ–¹å¼æ¥ä¸€èµ·å¢åŠ ç½‘ç«™çš„å®‰å…¨æ€§ï¼Œå¯ä»¥ç»“åˆéªŒè¯ç ç­‰æ‰‹æ®µå¤§å¤§å‡å°‘ç›—åˆ·ç½‘ç«™ç”¨å°¸ä¿¡æ¯çš„é¢‘ç‡ç­‰ï¼Œè¿›ä¸€æ­¥å¢å¼ºç½‘ç«™å†…å®¹çš„å®‰å…¨æ€§ã€‚ å‚è€ƒèµ„æ–™è·¨ç«™è¯·æ±‚ä¼ªé€ ã€Šç°ä»£å‰ç«¯æŠ€æœ¯è§£æã€‹","tags":[{"name":"CSRF","slug":"CSRF","permalink":"https://microzz.com/tags/CSRF/"},{"name":"XSS","slug":"XSS","permalink":"https://microzz.com/tags/XSS/"},{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://microzz.com/tags/Webå®‰å…¨/"}]},{"title":"Webå®‰å…¨ä¹‹XSS","date":"2017-08-17T14:27:41.000Z","path":"2017/08/17/xss/","text":"XSSè·¨ç«™è„šæœ¬æ”»å‡»æ¦‚å¿µ &nbsp;&nbsp;&nbsp;&nbsp;è·¨ç«™è„šæœ¬ï¼ˆCross-site scriptingï¼Œé€šå¸¸ç®€ç§°ä¸ºï¼šXSSï¼‰æ˜¯ä¸€ç§ç½‘ç«™åº”ç”¨ç¨‹åºçš„å®‰å…¨æ¼æ´æ”»å‡»ï¼Œæ˜¯ä»£ç æ³¨å…¥çš„ä¸€ç§ã€‚å®ƒå…è®¸æ¶æ„ç”¨æˆ·å°†ä»£ç æ³¨å…¥åˆ°ç½‘é¡µä¸Šï¼Œå…¶ä»–ç”¨æˆ·åœ¨è§‚çœ‹ç½‘é¡µæ—¶å°±ä¼šå—åˆ°å½±å“ã€‚è¿™ç±»æ”»å‡»é€šå¸¸åŒ…å«äº†HTMLä»¥åŠç”¨æˆ·ç«¯è„šæœ¬è¯­è¨€ã€‚XSSæ”»å‡»é€šå¸¸æŒ‡çš„æ˜¯é€šè¿‡åˆ©ç”¨ç½‘é¡µå¼€å‘æ—¶ç•™ä¸‹çš„æ¼æ´ï¼Œé€šè¿‡å·§å¦™çš„æ–¹æ³•æ³¨å…¥æ¶æ„æŒ‡ä»¤ä»£ç åˆ°ç½‘é¡µï¼Œä½¿ç”¨æˆ·åŠ è½½å¹¶æ‰§è¡Œæ”»å‡»è€…æ¶æ„åˆ¶é€ çš„ç½‘é¡µç¨‹åºã€‚è¿™äº›æ¶æ„ç½‘é¡µç¨‹åºé€šå¸¸æ˜¯JavaScriptï¼Œä½†å®é™…ä¸Šä¹Ÿå¯ä»¥åŒ…æ‹¬Javaï¼ŒVBScriptï¼ŒActiveXï¼ŒFlashæˆ–è€…ç”šè‡³æ˜¯æ™®é€šçš„HTMLã€‚æ”»å‡»æˆåŠŸåï¼Œæ”»å‡»è€…å¯èƒ½å¾—åˆ°æ›´é«˜çš„æƒé™ï¼ˆå¦‚æ‰§è¡Œä¸€äº›æ“ä½œï¼‰ã€ç§å¯†ç½‘é¡µå†…å®¹ã€ä¼šè¯å’Œcookieç­‰å„ç§å†…å®¹ã€‚ ä»¥ä¸Šæ˜¯ç»´åŸºç™¾ç§‘å¯¹XSSçš„è§£é‡Šï¼ŒXSSåœ¨Webå®‰å…¨ä¸­éå¸¸å¸¸è§ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åº”è¯¥å¼•èµ·é‡è§†çš„ã€‚ä¸‹é¢å°±è¯¦ç»†è¿›è¡Œä¸€ä¸‹ä»‹ç»ã€‚ åˆ†ç±»XSSé€šå¸¸å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š åå°„å‹XSSå‘å‡ºè¯·æ±‚æ—¶ï¼ŒXSSä»£ç å‡ºç°åœ¨URLä¸­ï¼Œä½œä¸ºè¾“å…¥æäº¤åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯è§£æåå“åº”ï¼ŒXSSä»£ç éšå“åº”å†…å®¹ä¸€èµ·ä¼ å›æµè§ˆå™¨ï¼Œæœ€åæµè§ˆå™¨è§£ææ‰§è¡ŒXSSä»£ç ã€‚è¿™ä¸ªè¿‡ç¨‹åƒä¸€æ¬¡åå°„ï¼Œæ•…å«åå°„æ€§XSSã€‚ ä»£ç æ¼”ç¤ºåå°„å‹XSSä¸ºäº†æ–¹ä¾¿å®éªŒï¼Œæˆ‘é€‰ç”¨äº†Koa2åšåç«¯ï¼Œæ¨¡ç‰ˆä½¿ç”¨Ejsã€‚ æˆ‘ä»¬å¯¹ä¸€ä¸ªè·¯ç”±åšå¦‚ä¸‹å¤„ç†ï¼š router.get(&#39;/&#39;, async (ctx, next) =&gt; { ctx.set(&#39;X-XSS-Protection&#39;, 0); await ctx.render(&#39;index&#39;, { title: &#39;XSSæ”»å‡»ç¤ºä¾‹&#39;, xss: ctx.request.query.xss }) }) æˆ‘ä»¬éœ€è¦æ³¨æ„ä»£ç ä¸­è¿˜é¢å¤–è®¾ç½®äº†ä¸€ä¸ªheaderctx.set(&#39;X-XSS-Protection&#39;, 0);å› ä¸ºå¾ˆå¤šç°åœ¨å¾ˆå¤šç°ä»£æµè§ˆå™¨éƒ½æœ‰xssçš„æ‹¦æˆªæªæ–½è¿›è¡Œä¿æŠ¤ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®çš„è¯ä¼šæœ‰å¦‚ä¸‹ç»“æœï¼š XSS æ‰“å¼€æ§åˆ¶å°å°±ä¼šæœ‰æŠ¥é”™ä¿¡æ¯ï¼š XSS &lt;!-- index.ejs é¦–é¡µæ¨¡ç‰ˆé¡µ --&gt; &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt; &lt;link rel=&#39;stylesheet&#39; href=&#39;/stylesheets/style.css&#39; /&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt; &lt;div&gt;&lt;%- xss %&gt;&lt;/div&gt; &lt;/body&gt; &lt;/html&gt; (æ³¨æ„ï¼šå†™æˆ&lt;%= xss %&gt;å°±ä¸ä¼šæœ‰æ•ˆæœäº†ï¼Œä¸ºäº†æ¼”ç¤ºéœ€è¦å†™æˆ&lt;%- xss %&gt;) æ­£å¸¸çš„æ˜¾ç¤ºæ˜¯è¿™æ ·çš„ï¼š XSS ç”¨æˆ·è¾“å…¥ä¸€äº›æ¶æ„ä»£ç çš„æ—¶å€™å°±ä¼šå‡ºç°ä¸‹é¢çš„æƒ…å†µ,æ¯”å¦‚é€šè¿‡imgæ ‡ç­¾çš„onerroräº‹ä»¶è·å–cookie XSSè·å–cookie åŠ è½½ä¸€äº›éåŒæºjsï¼š XSS æ‰“å¼€ç½‘ç»œé¢æ¿å’Œæ§åˆ¶å°ï¼Œå‘ç°æˆåŠŸåŠ è½½äº†jQueryï¼Œå¦‚æœæ˜¯å…¶ä»–æ¶æ„çš„è„šæœ¬åæœå¾ˆä¸¥é‡ã€‚ XSS åµŒå…¥ä¸€ä¸ªiframeæ’å…¥å„ç§å¹¿å‘Šæˆ–è€…å…¶ä»–æ¶æ„ç«™ç‚¹ XSS å­˜å‚¨å‹XSSå­˜å‚¨å‹XSSå’Œåå°„å‹XSSå·®åˆ«ä»…åœ¨äºæäº¤çš„ä»£ç ä¼šå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯(æ•°æ®åº“ï¼Œå†…å­˜ï¼Œæ–‡ä»¶ç³»ç»Ÿç­‰)ï¼Œä¸‹æ¬¡è¯·æ±‚ç›®æ ‡é¡µé¢æ—¶ä¸ç”¨å†æäº¤XSSä»£ç  ä¸‹é¢é€šè¿‡ä¸€ä¸ªå›¾è¯´æ˜ XSS ä»£ç æ¼”ç¤ºå­˜å‚¨å‹XSS å‰ç«¯ å‰ç«¯å±•ç¤ºæ˜¯ä¸€ä¸ªå¤šè¡Œæ–‡æœ¬æ¡†ï¼Œç„¶åæ”¯æŒè¯„è®ºå’Œè·å–è¯„è®ºçš„è¾“å…¥æ¡†ï¼Œå¦‚ä¸‹å›¾ï¼š XSS ä»£ç éƒ¨åˆ†(ä¸ºäº†ä½¿æ¼”ç¤ºæ›´æ–¹ä¾¿ï¼Œæœ‰äº›åœ°æ–¹æ²¡æœ‰è€ƒè™‘å…¼å®¹æ€§) &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt; &lt;link rel=&#39;stylesheet&#39; href=&#39;/stylesheets/style.css&#39; /&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt; &lt;div&gt; &lt;textarea name=&quot;name&quot; rows=&quot;8&quot; cols=&quot;80&quot;&gt; &lt;p&gt;microzz.com&lt;/p&gt; &lt;img src=&quot;null&quot; alt=&quot;æ— æ³•æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡&quot; onerror=&quot;alert(&#39;onerror&#39;)&quot;&gt; &lt;button onclick=&quot;alert(&#39;ä¸­å¥–å•¦&#39;)&quot;&gt;å»æŠ½å¥–&lt;/button&gt; &lt;/textarea&gt; &lt;button id=&quot;comment&quot;&gt;è¯„è®º&lt;/button&gt; &lt;button id=&quot;get&quot;&gt;è·å–è¯„è®º&lt;/button&gt; &lt;div&gt; &lt;script&gt; const oTextArea = document.querySelector(&#39;textarea&#39;); const oCommentBtn = document.querySelector(&#39;#comment&#39;); const oGetBtn = document.querySelector(&#39;#get&#39;); oGetBtn.addEventListener(&#39;click&#39;, () =&gt; { fetch(&#39;/get&#39;) .then(result =&gt; result.json()) .then(data =&gt; { let oP = document.createElement(&#39;p&#39;); oP.innerHTML = data.comment; document.body.appendChild(oP); }) }); oCommentBtn.addEventListener(&#39;click&#39;, () =&gt; { fetch(`/comment?comment=${oTextArea.value}`) }) &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; æœåŠ¡ç«¯ ä¸ºäº†ä½¿æ¼”ç¤ºæ–¹ä¾¿å¹¶æ²¡æœ‰ä½¿ç”¨æ•°æ®åº“ï¼Œè¿™é‡Œä½¿ç”¨Objectæ¥æ¨¡æ‹Ÿä»£æ›¿ï¼Œè·¯ç”±éƒ¨åˆ†å¦‚ä¸‹ï¼š const router = require(&#39;koa-router&#39;)() const db = { comment: &#39;&#39; }; router.get(&#39;/get&#39;, async (ctx, next) =&gt; { ctx.body = { comment: db.comment } }) router.get(&#39;/comment&#39;, async (ctx, next) =&gt; { db.comment = ctx.request.query.comment; ctx.body = { msg: &#39;ok&#39; } }) æˆ‘ä»¬çœ‹ä¸€ä¸‹è¯„è®ºåè·å–è¯„è®ºçš„æ•ˆæœï¼š XSS è¯±å¯¼æ˜¯ç”¨æˆ·ç‚¹å‡»ï¼š XSS ä¸åŒåˆ†ç±»XSSæ”»å‡»ä»æ”»å‡»çš„æ–¹å¼å¯ä»¥åˆ†ä¸º åå°„å‹ å­˜å‚¨å‹ æ–‡æ¡£å‹(MXSS, ä¹Ÿå«DOM XSS) è¿™ç§åˆ†ç±»æ–¹å¼æœ‰äº›è¿‡æ—¶ï¼Œé•¿ä¹…ä»¥æ¥ï¼Œäººä»¬è®¤ä¸ºXSSåˆ†ç±»æœ‰ä»¥ä¸Šä¸‰ç§ï¼Œä½†å®é™…æƒ…å†µä¸­ç»å¸¸æ— æ³•åŒºåˆ†ï¼Œæ‰€ä»¥æ›´æ˜ç¡®çš„åˆ†ç±»æ–¹å¼å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼š client(å®¢æˆ·ç«¯å‹) server(æœåŠ¡ç«¯å‹) å½“ä¸€ç«¯xssä»£ç æ˜¯åœ¨æœåŠ¡ç«¯è¢«æ’å…¥çš„ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯æœåŠ¡ç«¯å‹xssï¼ŒåŒç†ï¼Œå¦‚æœä»£ç åœ¨å®¢æˆ·ç«¯æ’å…¥ï¼Œå°±æ˜¯å®¢æˆ·ç«¯å‹xssã€‚ é˜²å¾¡æªæ–½ ç¼–ç  è¿‡æ»¤ æ ¡æ­£ CSP ç¼–ç å¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡ŒHTML Entityç¼–ç  HTML å…·ä½“å¯ä»¥æŸ¥é˜… ğŸ‘‰ https://dev.w3.org/html5/html-author/charref æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼š // å¯¹ç”¨æˆ·çš„æäº¤è¿›è¡Œç¼–ç  function htmlEncode(str) { return str .replace(/&amp;/g, &#39;&amp;amp;&#39;) .replace(/&lt;/g, &#39;&amp;lt;&#39;) .replace(/&gt;/g, &#39;&amp;gt;&#39;) .replace(/ /g, &#39;&amp;nbsp;&#39;) .replace(/\\&#39;/g, &#39;&amp;#39;&#39;) .replace(/\\&quot;/g, &#39;&amp;quot;&#39;) .replace(/\\n/g, &#39;&lt;br&gt;&#39;); } æˆ‘ä»¬å¯¹ä¸Šé¢çš„è·¯ç”±è¿›è¡Œä¸€ä¸‹æ”¹é€ ï¼š router.get(&#39;/comment&#39;, async (ctx, next) =&gt; { db.comment = htmlEncode(ctx.request.query.comment); ctx.body = { msg: &#39;ok&#39; } }) æ­¤æ—¶é¡µé¢å°±æ˜¾ç¤ºæ­£å¸¸çš„å†…å®¹äº† XSS è¿‡æ»¤ ç§»é™¤ç”¨æˆ·ä¸Šä¼ çš„DOMå±æ€§ï¼Œå¦‚onerror(onerroräº‹ä»¶å¯ä»¥æ‰§è¡Œjsä»£ç )ã€clickç­‰äº‹ä»¶ ç§»é™¤ç”¨æˆ·ä¸Šä¼ çš„Linkã€StyleèŠ‚ç‚¹(å¯ä»¥åˆ©ç”¨!importanté‡ç½®é¡µé¢æ ·å¼ï¼Œæ¯”å¦‚: body{display: none)}ã€ScriptèŠ‚ç‚¹(æ‰§è¡Œjsä»£ç ï¼ŒåŠ è½½éåŒæºjs)ã€IframeèŠ‚ç‚¹(æ’å…¥æ¶æ„é¡µé¢æˆ–è€…å¹¿å‘Š)ç­‰ æ ¡æ­£ é¿å…ç›´æ¥å¯¹HTML Entityè§£ç ï¼Œå¦åˆ™ç¼–ç æ„ä¹‰ä¸å¤§äº† ä½¿ç”¨DOM Parseè½¬æ¢ï¼Œæ ¡æ­£ä¸é…å¯¹çš„DOMæ ‡ç­¾ CSPå†…å®¹å®‰å…¨ç­–ç•¥(CSP)æ˜¯ä¸€ä¸ªé¢å¤–çš„å®‰å…¨å±‚ï¼Œæœ‰åŠ©äºæ£€æµ‹å’Œå‡è½»æŸäº›ç±»å‹çš„æ”»å‡»ï¼ŒåŒ…æ‹¬è·¨ç«™è„šæœ¬ (XSS) å’Œæ•°æ®æ³¨å…¥æ”»å‡»ã€‚è¿™äº›æ”»å‡»ç”¨äºä»æ•°æ®çªƒå–åˆ°ç°åœºæ±¡æŸ“æˆ–æ¶æ„è½¯ä»¶åˆ†å‘çš„ä¸€åˆ‡ã€‚ CSP çš„å®è´¨å°±æ˜¯ç™½åå•åˆ¶åº¦ï¼Œå¼€å‘è€…æ˜ç¡®å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œå“ªäº›å¤–éƒ¨èµ„æºå¯ä»¥åŠ è½½å’Œæ‰§è¡Œï¼Œç­‰åŒäºæä¾›ç™½åå•ã€‚å®ƒçš„å®ç°å’Œæ‰§è¡Œå…¨éƒ¨ç”±æµè§ˆå™¨å®Œæˆï¼Œå¼€å‘è€…åªéœ€æä¾›é…ç½®ã€‚CSP å¤§å¤§å¢å¼ºäº†ç½‘é¡µçš„å®‰å…¨æ€§ã€‚æ”»å‡»è€…å³ä½¿å‘ç°äº†æ¼æ´ï¼Œä¹Ÿæ²¡æ³•æ³¨å…¥è„šæœ¬ï¼Œé™¤éè¿˜æ§åˆ¶äº†ä¸€å°åˆ—å…¥äº†ç™½åå•çš„å¯ä¿¡ä¸»æœºã€‚ å¯ç”¨æ–¹æ³• HTTP å¤´ä¿¡æ¯Content-Security-Policy æˆ‘ä»¬æ”¹é€ ä¸€ä¸‹å‰é¢åŠ è½½éåŒæºçš„jQueryè„šæœ¬çš„ä»£ç ï¼Œåç«¯è·¯ç”±è¿›è¡Œè¿™æ ·çš„æ”¹é€ ï¼š router.get(&#39;/&#39;, async (ctx, next) =&gt; { ctx.set(&#39;X-XSS-Protection&#39;, 0); ctx.set(&#39;Content-Security-Policy&#39;, `default-src &#39;self&#39;`) await ctx.render(&#39;index&#39;, { title: &#39;XSSæ”»å‡»ç¤ºä¾‹&#39;, xss: ctx.request.query.xss }) }) æ­¤æ—¶é»˜è®¤åªå…è®¸åŠ è½½æœ¬ç«™çš„è„šæœ¬ï¼Œçœ‹ä¸€ä¸‹ç½‘ç»œè¯·æ±‚ï¼Œå“åº”å¤´ä¸Šå¤šäº†Content-Security-Policy: default-src &#39;self&#39;è¡¨ç¤ºä¸€ä¸ªç½‘ç«™ç®¡ç†è€…æƒ³è¦æ‰€æœ‰å†…å®¹å‡æ¥è‡ªç«™ç‚¹è‡ªå·± (è¿™æ’é™¤å­åŸŸå.) XSS æ­¤æ—¶æ§åˆ¶å°ä¹Ÿä¼šæŠ¥é”™ XSS é€šè¿‡ç½‘é¡µçš„æ ‡ç­¾ä¹Ÿå¯ä»¥å¼€å¯&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;script-src &#39;self&#39;; object-src &#39;none&#39;; style-src cdn.example.org third-party.org; child-src https:&quot;&gt; ä¸Šé¢ä»£ç ä¸­ï¼ŒCSP åšäº†å¦‚ä¸‹é…ç½®ï¼š &lt;object&gt;æ ‡ç­¾ï¼šä¸ä¿¡ä»»ä»»ä½•URLï¼Œå³ä¸åŠ è½½ä»»ä½•èµ„æº æ ·å¼è¡¨ï¼šåªä¿¡ä»»cdn.example.orgå’Œthird-party.org æ¡†æ¶ï¼ˆframeï¼‰ï¼šå¿…é¡»ä½¿ç”¨HTTPSåè®®åŠ è½½ å…¶ä»–èµ„æºï¼šæ²¡æœ‰é™åˆ¶ å¯ç”¨åï¼Œä¸ç¬¦åˆ CSP çš„å¤–éƒ¨èµ„æºå°±ä¼šè¢«é˜»æ­¢åŠ è½½ã€‚ èµ„æºåŠ è½½é™åˆ¶default-src æŒ‡ä»¤å®šä¹‰äº†é‚£äº›æ²¡æœ‰è¢«æ›´ç²¾ç¡®æŒ‡ä»¤æŒ‡å®šçš„ï¼ˆé»˜è®¤ï¼‰å®‰å…¨ç­–ç•¥ã€‚è¯¥æŒ‡ä»¤åŒ…å«äº†ä»¥ä¸‹æŒ‡ä»¤ï¼š script-srcï¼šå¤–éƒ¨è„šæœ¬ style-srcï¼šæ ·å¼è¡¨ img-srcï¼šå›¾åƒ media-srcï¼šåª’ä½“æ–‡ä»¶ï¼ˆéŸ³é¢‘å’Œè§†é¢‘ï¼‰ font-srcï¼šå­—ä½“æ–‡ä»¶ object-srcï¼šæ’ä»¶ï¼ˆæ¯”å¦‚ Flashï¼‰ child-srcï¼šæ¡†æ¶ frame-ancestorsï¼šåµŒå…¥çš„å¤–éƒ¨èµ„æºï¼ˆæ¯”å¦‚&lt;frame&gt;ã€&lt;iframe&gt;ã€&lt;embed&gt;å’Œ&lt;applet&gt;ï¼‰ connect-srcï¼šHTTP è¿æ¥ï¼ˆé€šè¿‡ XHRã€WebSocketsã€EventSourceç­‰ï¼‰ worker-srcï¼šworkerè„šæœ¬ manifest-srcï¼šmanifest æ–‡ä»¶ è¯¦ç»†å¯ä»¥å‚è€ƒMDN ğŸ‘‰ https://developer.mozilla.org/zh-CN/docs/Web/Security/CSP/CSP_policy_directives æ³¨æ„ç‚¹ï¼ˆ1ï¼‰script-srcå’Œobject-srcæ˜¯å¿…è®¾çš„ï¼Œé™¤éè®¾ç½®äº†default-srcã€‚å› ä¸ºæ”»å‡»è€…åªè¦èƒ½æ³¨å…¥è„šæœ¬ï¼Œå…¶ä»–é™åˆ¶éƒ½å¯ä»¥è§„é¿ã€‚è€Œobject-srcå¿…è®¾æ˜¯å› ä¸º Flash é‡Œé¢å¯ä»¥æ‰§è¡Œå¤–éƒ¨è„šæœ¬ã€‚ï¼ˆ2ï¼‰script-srcä¸èƒ½ä½¿ç”¨unsafe-inlineå…³é”®å­—ï¼ˆé™¤éä¼´éšä¸€ä¸ªnonceå€¼ï¼‰ï¼Œä¹Ÿä¸èƒ½å…è®¸è®¾ç½®data:URLã€‚ä¸‹é¢æ˜¯ä¸¤ä¸ªæ¶æ„æ”»å‡»çš„ä¾‹å­ã€‚ ``` ï¼ˆ3ï¼‰å¿…é¡»ç‰¹åˆ«æ³¨æ„ JSONP çš„å›è°ƒå‡½æ•°ã€‚ ä¸Šé¢çš„ä»£ç ä¸­ï¼Œè™½ç„¶åŠ è½½çš„è„šæœ¬æ¥è‡ªå½“å‰åŸŸåï¼Œä½†æ˜¯é€šè¿‡æ”¹å†™å›è°ƒå‡½æ•°ï¼Œæ”»å‡»è€…ä¾ç„¶å¯ä»¥æ‰§è¡Œæ¶æ„ä»£ç ã€‚ #### ç¼ºé™· * æ—¥å¿—ä¸è¯¦ç»†ï¼šä¸ŠæŠ¥çš„åªæœ‰è¿è§„çš„ç«™ç‚¹åæ²¡æœ‰å…·ä½“è·¯å¾„ * è§„åˆ™ä¸çµæ´»ï¼šCSP ç›®å‰åªæ”¯æŒç™½åå•åˆ—è¡¨ * æ— æ³•å’Œé¡µé¢äº¤äº’ * ä¸ŠæŠ¥æ–¹å¼ä¸å¯æ§ï¼šåªèƒ½ä½¿ç”¨ POST + JSON çš„æ–¹å¼æäº¤ï¼Œæ— æ³•è®¾å®šä¸€ä¸ªç¼“å­˜æ—¶é—´ï¼Œæ§åˆ¶é‡å¤ä¸ŠæŠ¥çš„é—´éš” * æµªè´¹å¸¦å®½ * ç»´æŠ¤ç¹ç * å…¼å®¹æ€§ä¸é«˜ ### X-Frame-Options è¿™æ˜¯responseå¤´ä¸ªç°åœ¨æ­£åœ¨ä½¿ç”¨ï¼Œä½†ä»¥åå¯ä»¥è¢«CSPçš„ frame-ancestorså–ä»£ã€‚ç›®å‰æ”¯æŒçš„çŠ¶æ€æ¯”èµ· CSP frame-ancestorsè¦å¥½ ä½¿ç”¨çš„æ–¹å¼: X-Frame-Options:DENY//è¿™ä¸ªé¡µé¢ä¸å…è®¸è¢«ä»¥frameçš„æ–¹å¼åŠ è½½X-Frame-Options:SAMEORIGIN//è¿™ä¸ªé¡µé¢åªå…è®¸åŒæºé¡µé¢åŠ è½½X-Frame-Options: //è¿™ä¸ªé¡µé¢åªèƒ½è¢«ç‰¹å®šçš„åŸŸåŠ è½½``` è°·æ­Œåœ¨è¿™ç‚¹å°±åšçš„æ¯”è¾ƒå¥½ï¼š XSS Http-Onlyä½¿ç”¨http-only ä¿æŠ¤cookieï¼Œå¯ä»¥ä¿è¯å³ä½¿å‘ç”Ÿäº†xssï¼Œç”¨æˆ·çš„cookieä¹Ÿæ˜¯å®‰å…¨çš„ã€‚ä½¿ç”¨http-only ä¿æŠ¤çš„cookieæ˜¯ä¸ä¼šè¢«javascriptè¯»å†™çš„ã€‚ å…¶ä»–æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ä¸€äº›æˆç†Ÿæµè¡Œçš„å¼€æºåº“æ¥å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¢å¼ºå®‰å…¨æ€§ï¼Œé˜²èŒƒXSSæ”»å‡»ã€‚ æœªå®Œå¾…ç»­é˜²èŒƒXSSæ”»å‡»æ˜¯ä¸€ä¸ªæŒä¹…è‰°å·¨çš„ä»»åŠ¡ï¼Œå³ä½¿æ˜¯ä¸€çº¿äº’è”ç½‘å…¬å¸ä¹Ÿä¼šé­é‡æ­¤ç±»æ”»å‡»ã€‚åªæœ‰åœ¨æ¯ä¸€ä¸ªæ­¥éª¤éƒ½æ—¶åˆ»æ³¨æ„ï¼Œæ‰èƒ½å¾ˆå¥½é¿å…æ­¤ç±»äº‹ä»¶ã€‚ å‚è€ƒé“¾æ¥CSP ç­–ç•¥æŒ‡ä»¤Content Security Policy å…¥é—¨æ•™ç¨‹ã€XSSã€‘åˆ©ç”¨ onload äº‹ä»¶ç›‘æ§æµé‡åŠ«æŒ","tags":[{"name":"CSRF","slug":"CSRF","permalink":"https://microzz.com/tags/CSRF/"},{"name":"XSS","slug":"XSS","permalink":"https://microzz.com/tags/XSS/"},{"name":"Webå®‰å…¨","slug":"Webå®‰å…¨","permalink":"https://microzz.com/tags/Webå®‰å…¨/"},{"name":"è·¨ç«™è„šæœ¬æ”»å‡»","slug":"è·¨ç«™è„šæœ¬æ”»å‡»","permalink":"https://microzz.com/tags/è·¨ç«™è„šæœ¬æ”»å‡»/"}]},{"title":"ç”¨JSå®ç°é“¾è¡¨çš„æ•°æ®ç»“æ„","date":"2017-08-01T11:04:29.000Z","path":"2017/08/01/js-link/","text":"ç”¨JavaScriptå®ç°é“¾è¡¨çš„æ•°æ®ç»“æ„ &nbsp;&nbsp;&nbsp;&nbsp;é“¾è¡¨ï¼ˆLinked listï¼‰æ˜¯ä¸€ç§å¸¸è§çš„åŸºç¡€æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ç§çº¿æ€§è¡¨ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæŒ‰çº¿æ€§çš„é¡ºåºå­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹é‡Œå­˜åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ(Pointer) &nbsp;&nbsp;â€” ç»´åŸºç™¾ç§‘ ä¸Šé¢æ˜¯ç»´åŸºç™¾ç§‘å¯¹é“¾è¡¨çš„è§£è¯»ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨JavaScriptä»£ç å¯¹é“¾è¡¨çš„æ•°æ®ç»“æ„è¿›è¡Œå®ç° å®ç°Nodeç±»è¡¨ç¤ºèŠ‚ç‚¹/** * Node ç±»ç”¨æ¥è¡¨ç¤ºèŠ‚ç‚¹ * element ç”¨æ¥ä¿å­˜èŠ‚ç‚¹ä¸Šçš„æ•°æ® * next ç”¨æ¥ä¿å­˜æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„é“¾æ¥ */ function Node(element) { this.element = element; this.next = null; } LListç±»æä¾›å¯¹é“¾è¡¨æ“ä½œçš„æ–¹æ³•/** * LList ç±»æä¾›äº†å¯¹é“¾è¡¨è¿›è¡Œæ“ä½œçš„æ–¹æ³• * é“¾è¡¨åªæœ‰ä¸€ä¸ªå±æ€§ï¼Œ * ä½¿ç”¨ä¸€ä¸ª Node å¯¹è±¡æ¥ä¿å­˜è¯¥é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚ */ class LList { constructor() { this.head = new Node(&#39;head&#39;); } // æŸ¥æ‰¾èŠ‚ç‚¹ find(item) { let currNode = this.head; while(currNode.element !== item) { currNode = currNode.next; } return currNode; } // æŸ¥æ‰¾å‰ä¸€ä¸ªèŠ‚ç‚¹ findPre(item) { if(item === &#39;head&#39;) throw new Error(&#39;now is head!&#39;); let currNode = this.head; while (currNode.next &amp;&amp; currNode.next.element !== item) { currNode = currNode.next; } return currNode; } // æ’å…¥æ–°èŠ‚ç‚¹ insert(newElement, item) { let newNode = new Node(newElement); let currNode = this.find(item); newNode.next = currNode.next; currNode.next = newNode; } // åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ remove(item) { let preNode = this.findPre(item); if(preNode.next !== null) { preNode.next = preNode.next.next; } } // æ˜¾ç¤ºé“¾è¡¨ä¸­çš„å…ƒç´  display() { let currNode = this.head; while(currNode.next !== null) { console.log(currNode.next.element); currNode = currNode.next; } } } æµ‹è¯•ä»£ç const list = new LList(); // LList { head: Node { element: &#39;head&#39;, next: null } } list.insert(&#39;0&#39;, &#39;head&#39;); list.insert(&#39;1&#39;, &#39;0&#39;); list.insert(&#39;2&#39;, &#39;1&#39;); list.insert(&#39;3&#39;, &#39;2&#39;); list.remove(&#39;1&#39;); console.log(list); // LList { head: Node { element: &#39;head&#39;, next: Node { element: &#39;0&#39;, next: [Object] } } } console.log(list.display()); // 0 2 3 console.log(list.findPre(&#39;1&#39;)); // Node { element: &#39;0&#39;, next: Node { element: &#39;1&#39;, next: Node { element: &#39;2&#39;, next: [Object] } } } ä¸Šé¢å°±æ˜¯ç”¨JavaScriptå¯¹ç®€å•é“¾è¡¨çš„æ•°æ®ç»“æ„çš„ç®€å•å®ç°ğŸ˜„","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"https://microzz.com/tags/æ•°æ®ç»“æ„ä¸ç®—æ³•/"},{"name":"é“¾è¡¨","slug":"é“¾è¡¨","permalink":"https://microzz.com/tags/é“¾è¡¨/"}]},{"title":"ç”¨JSå®ç°æ ˆçš„æ•°æ®ç»“æ„","date":"2017-07-31T11:04:29.000Z","path":"2017/07/31/js-stack/","text":"ç”¨JavaScriptå®ç°æ ˆçš„æ•°æ®ç»“æ„ &nbsp;&nbsp;&nbsp;&nbsp;å †æ ˆï¼ˆè‹±è¯­ï¼šstackï¼‰ï¼Œä¹Ÿå¯ç›´æ¥ç§°æ ˆï¼Œåœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ä¸²åˆ—å½¢å¼çš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„ç‰¹æ®Šä¹‹å¤„åœ¨äºåªèƒ½å…è®¸åœ¨é“¾æ¥ä¸²åˆ—æˆ–é˜µåˆ—çš„ä¸€ç«¯ï¼ˆç§°ä¸ºå †å é¡¶ç«¯æŒ‡æ ‡ï¼Œè‹±è¯­ï¼štopï¼‰è¿›è¡ŒåŠ å…¥æ•°æ®ï¼ˆpushï¼‰å’Œè¾“å‡ºæ•°æ®ï¼ˆpopï¼‰çš„è¿ç®—ã€‚å¦å¤–æ ˆä¹Ÿå¯ä»¥ç”¨ä¸€ç»´æ•°ç»„æˆ–è¿ç»“ä¸²åˆ—çš„å½¢å¼æ¥å®Œæˆã€‚&nbsp;&nbsp;&nbsp;&nbsp;ç”±äºå †å æ•°æ®ç»“æ„åªå…è®¸åœ¨ä¸€ç«¯è¿›è¡Œæ“ä½œï¼Œå› è€ŒæŒ‰ç…§åè¿›å…ˆå‡ºï¼ˆLIFO, Last In First Outï¼‰çš„åŸç†è¿ä½œã€‚ â€“ ç»´åŸºç™¾ç§‘ ä¸Šé¢æ˜¯ç»´åŸºç™¾ç§‘å¯¹æ ˆçš„è§£è¯»ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨JavaScript(ES6)ä»£ç å¯¹æ ˆçš„æ•°æ®ç»“æ„è¿›è¡Œå®ç° å®ç°ä¸€ä¸ªStackç±»/** * Stack ç±» */ class Stack { constructor() { this.data = []; // å¯¹æ•°æ®åˆå§‹åŒ– this.top = 0; // åˆå§‹åŒ–æ ˆé¡¶ä½ç½® } // å…¥æ ˆæ–¹æ³• push() { const args = [...arguments]; args.forEach(arg =&gt; this.data[this.top++] = arg); return this.top; } // å‡ºæ ˆæ–¹æ³• pop() { if (this.top === 0) throw new Error(&#39;The stack is already empty!&#39;); const peek = this.data[--this.top]; this.data = this.data.slice(0, -1); return peek; } // è¿”å›æ ˆé¡¶å…ƒç´  peek() { return this.data[this.top - 1]; } // è¿”å›æ ˆå†…å…ƒç´ ä¸ªæ•° length() { return this.top; } // æ¸…é™¤æ ˆå†…æ‰€æœ‰å…ƒç´  clear() { this.top = 0; return this.data = []; } // åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º isEmpty() { return this.top === 0; } } // å®ä¾‹åŒ– const stack = new Stack(); stack.push(1); stack.push(2, 3); console.log(stack.data); // [1, 2, 3] console.log(stack.peek()); // 3 console.log(stack.pop()); // 3, now data is [1, 2] stack.push(3); console.log(stack.length()); // 3 stack.clear(); // now data is [] ç”¨æ ˆçš„æ€æƒ³å°†æ•°å­—è½¬æ¢ä¸ºäºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶/** * å°†æ•°å­—è½¬æ¢ä¸ºäºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶ */ const numConvert = (num, base) =&gt; { const stack = new Stack(); let converted = &#39;&#39;; while(num &gt; 0) { stack.push(num % base); num = Math.floor(num / base); } while(stack.length() &gt; 0) { converted += stack.pop(); } return +converted; } console.log(numConvert(10, 2)); // 1010 ç”¨æ ˆçš„æ€æƒ³åˆ¤æ–­ç»™å®šå­—ç¬¦ä¸²æˆ–è€…æ•°å­—æ˜¯å¦æ˜¯å›æ–‡/** * åˆ¤æ–­ç»™å®šå­—ç¬¦ä¸²æˆ–è€…æ•°å­—æ˜¯å¦æ˜¯å›æ–‡ */ const isPalindrome = words =&gt; { const stack = new Stack(); let wordsCopy = &#39;&#39;; words = words.toString(); Array.prototype.forEach.call(words, word =&gt; stack.push(word)); while(stack.length() &gt; 0) { wordsCopy += stack.pop(); } return words === wordsCopy; } console.log(isPalindrome(&#39;1a121a1&#39;)); // true console.log(isPalindrome(2121)); // false ä¸Šé¢å°±æ˜¯ç”¨JavaScriptå¯¹æ ˆçš„æ•°æ®ç»“æ„çš„å®ç°ï¼Œæœ‰äº›ç®—æ³•å¯èƒ½æ¬ å¦¥ï¼Œä½†æ˜¯ä»…ä»…æ˜¯ä¸ºäº†æ¼”ç¤ºJSå¯¹æ ˆçš„å®ç°ğŸ˜„","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"æ•°æ®ç»“æ„ä¸ç®—æ³•","permalink":"https://microzz.com/tags/æ•°æ®ç»“æ„ä¸ç®—æ³•/"},{"name":"æ ˆ","slug":"æ ˆ","permalink":"https://microzz.com/tags/æ ˆ/"}]},{"title":"JavaScript å†…å­˜æ³„éœ²æ•™ç¨‹","date":"2017-05-25T13:26:23.000Z","path":"2017/05/25/memory-leak/","text":"JavaScript å†…å­˜æ³„éœ²æ•™ç¨‹ä¸€ã€ä»€ä¹ˆæ˜¯å†…å­˜æ³„éœ²ï¼Ÿç¨‹åºçš„è¿è¡Œéœ€è¦å†…å­˜ã€‚åªè¦ç¨‹åºæå‡ºè¦æ±‚ï¼Œæ“ä½œç³»ç»Ÿæˆ–è€…è¿è¡Œæ—¶ï¼ˆruntimeï¼‰å°±å¿…é¡»ä¾›ç»™å†…å­˜ã€‚ å¯¹äºæŒç»­è¿è¡Œçš„æœåŠ¡è¿›ç¨‹ï¼ˆdaemonï¼‰ï¼Œå¿…é¡»åŠæ—¶é‡Šæ”¾ä¸å†ç”¨åˆ°çš„å†…å­˜ã€‚å¦åˆ™ï¼Œå†…å­˜å ç”¨è¶Šæ¥è¶Šé«˜ï¼Œè½»åˆ™å½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œé‡åˆ™å¯¼è‡´è¿›ç¨‹å´©æºƒã€‚ ä¸å†ç”¨åˆ°çš„å†…å­˜ï¼Œæ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œå°±å«åšå†…å­˜æ³„éœ²ï¼ˆmemory leakï¼‰ã€‚ æœ‰äº›è¯­è¨€ï¼ˆæ¯”å¦‚ C è¯­è¨€ï¼‰å¿…é¡»æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œç¨‹åºå‘˜è´Ÿè´£å†…å­˜ç®¡ç†ã€‚ char * buffer; buffer = (char*) malloc(42); // Do something with buffer free(buffer); ä¸Šé¢æ˜¯ C è¯­è¨€ä»£ç ï¼Œmallocæ–¹æ³•ç”¨æ¥ç”³è¯·å†…å­˜ï¼Œä½¿ç”¨å®Œæ¯•ä¹‹åï¼Œå¿…é¡»è‡ªå·±ç”¨freeæ–¹æ³•é‡Šæ”¾å†…å­˜ã€‚ è¿™å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥å¤§å¤šæ•°è¯­è¨€æä¾›è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œå‡è½»ç¨‹åºå‘˜çš„è´Ÿæ‹…ï¼Œè¿™è¢«ç§°ä¸ºâ€œåƒåœ¾å›æ”¶æœºåˆ¶â€ï¼ˆgarbage collectorï¼‰ã€‚ äºŒã€åƒåœ¾å›æ”¶æœºåˆ¶åƒåœ¾å›æ”¶æœºåˆ¶æ€ä¹ˆçŸ¥é“ï¼Œå“ªäº›å†…å­˜ä¸å†éœ€è¦å‘¢ï¼Ÿ æœ€å¸¸ä½¿ç”¨çš„æ–¹æ³•å«åšâ€œå¼•ç”¨è®¡æ•°â€ï¼ˆreference countingï¼‰ï¼šè¯­è¨€å¼•æ“æœ‰ä¸€å¼ â€œå¼•ç”¨è¡¨â€ï¼Œä¿å­˜äº†å†…å­˜é‡Œé¢æ‰€æœ‰çš„èµ„æºï¼ˆé€šå¸¸æ˜¯å„ç§å€¼ï¼‰çš„å¼•ç”¨æ¬¡æ•°ã€‚å¦‚æœä¸€ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°æ˜¯0ï¼Œå°±è¡¨ç¤ºè¿™ä¸ªå€¼ä¸å†ç”¨åˆ°äº†ï¼Œå› æ­¤å¯ä»¥å°†è¿™å—å†…å­˜é‡Šæ”¾ã€‚ ä¸Šå›¾ä¸­ï¼Œå·¦ä¸‹è§’çš„ä¸¤ä¸ªå€¼ï¼Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥é‡Šæ”¾ã€‚ å¦‚æœä¸€ä¸ªå€¼ä¸å†éœ€è¦äº†ï¼Œå¼•ç”¨æ•°å´ä¸ä¸º0ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶æ— æ³•é‡Šæ”¾è¿™å—å†…å­˜ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„éœ²ã€‚ const arr = [1, 2, 3, 4]; console.log(&#39;hello world&#39;); ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„[1, 2, 3, 4]æ˜¯ä¸€ä¸ªå€¼ï¼Œä¼šå ç”¨å†…å­˜ã€‚å˜é‡arræ˜¯ä»…æœ‰çš„å¯¹è¿™ä¸ªå€¼çš„å¼•ç”¨ï¼Œå› æ­¤å¼•ç”¨æ¬¡æ•°ä¸º1ã€‚å°½ç®¡åé¢çš„ä»£ç æ²¡æœ‰ç”¨åˆ°arrï¼Œå®ƒè¿˜æ˜¯ä¼šæŒç»­å ç”¨å†…å­˜ã€‚ å¦‚æœå¢åŠ ä¸€è¡Œä»£ç ï¼Œè§£é™¤arrå¯¹[1, 2, 3, 4]å¼•ç”¨ï¼Œè¿™å—å†…å­˜å°±å¯ä»¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶é‡Šæ”¾äº†ã€‚ const arr = [1, 2, 3, 4]; console.log(&#39;hello world&#39;); arr = null; ä¸Šé¢ä»£ç ä¸­ï¼Œarré‡ç½®ä¸ºnullï¼Œå°±è§£é™¤äº†å¯¹[1, 2, 3, 4]çš„å¼•ç”¨ï¼Œå¼•ç”¨æ¬¡æ•°å˜æˆäº†0ï¼Œå†…å­˜å°±å¯ä»¥é‡Šæ”¾å‡ºæ¥äº†ã€‚ å› æ­¤ï¼Œå¹¶ä¸æ˜¯è¯´æœ‰äº†åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œç¨‹åºå‘˜å°±è½»æ¾äº†ã€‚ä½ è¿˜æ˜¯éœ€è¦å…³æ³¨å†…å­˜å ç”¨ï¼šé‚£äº›å¾ˆå ç©ºé—´çš„å€¼ï¼Œä¸€æ—¦ä¸å†ç”¨åˆ°ï¼Œä½ å¿…é¡»æ£€æŸ¥æ˜¯å¦è¿˜å­˜åœ¨å¯¹å®ƒä»¬çš„å¼•ç”¨ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œå°±å¿…é¡»æ‰‹åŠ¨è§£é™¤å¼•ç”¨ã€‚ ä¸‰ã€å†…å­˜æ³„éœ²çš„è¯†åˆ«æ–¹æ³•æ€æ ·å¯ä»¥è§‚å¯Ÿåˆ°å†…å­˜æ³„éœ²å‘¢ï¼Ÿ ç»éªŒæ³•åˆ™æ˜¯ï¼Œå¦‚æœè¿ç»­äº”æ¬¡åƒåœ¾å›æ”¶ä¹‹åï¼Œå†…å­˜å ç”¨ä¸€æ¬¡æ¯”ä¸€æ¬¡å¤§ï¼Œå°±æœ‰å†…å­˜æ³„éœ²ã€‚è¿™å°±è¦æ±‚å®æ—¶æŸ¥çœ‹å†…å­˜å ç”¨ã€‚ 3.1 æµè§ˆå™¨Chrome æµè§ˆå™¨æŸ¥çœ‹å†…å­˜å ç”¨ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚ æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œé€‰æ‹© Timeline é¢æ¿ åœ¨é¡¶éƒ¨çš„Captureå­—æ®µé‡Œé¢å‹¾é€‰ Memory ç‚¹å‡»å·¦ä¸Šè§’çš„å½•åˆ¶æŒ‰é’®ã€‚ åœ¨é¡µé¢ä¸Šè¿›è¡Œå„ç§æ“ä½œï¼Œæ¨¡æ‹Ÿç”¨æˆ·çš„ä½¿ç”¨æƒ…å†µã€‚ ä¸€æ®µæ—¶é—´åï¼Œç‚¹å‡»å¯¹è¯æ¡†çš„ stop æŒ‰é’®ï¼Œé¢æ¿ä¸Šå°±ä¼šæ˜¾ç¤ºè¿™æ®µæ—¶é—´çš„å†…å­˜å ç”¨æƒ…å†µã€‚ å¦‚æœå†…å­˜å ç”¨åŸºæœ¬å¹³ç¨³ï¼Œæ¥è¿‘æ°´å¹³ï¼Œå°±è¯´æ˜ä¸å­˜åœ¨å†…å­˜æ³„éœ²ã€‚ åä¹‹ï¼Œå°±æ˜¯å†…å­˜æ³„éœ²äº†ã€‚ 3.2 å‘½ä»¤è¡Œå‘½ä»¤è¡Œå¯ä»¥ä½¿ç”¨ Node æä¾›çš„process.memoryUsageæ–¹æ³•ã€‚ console.log(process.memoryUsage()); // { rss: 27709440, // heapTotal: 5685248, // heapUsed: 3449392, // external: 8772 } process.memoryUsageè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº† Node è¿›ç¨‹çš„å†…å­˜å ç”¨ä¿¡æ¯ã€‚è¯¥å¯¹è±¡åŒ…å«å››ä¸ªå­—æ®µï¼Œå•ä½æ˜¯å­—èŠ‚ï¼Œå«ä¹‰å¦‚ä¸‹ã€‚ rssï¼ˆresident set sizeï¼‰ï¼šæ‰€æœ‰å†…å­˜å ç”¨ï¼ŒåŒ…æ‹¬æŒ‡ä»¤åŒºå’Œå †æ ˆã€‚ heapTotalï¼šâ€œå †â€å ç”¨çš„å†…å­˜ï¼ŒåŒ…æ‹¬ç”¨åˆ°çš„å’Œæ²¡ç”¨åˆ°çš„ã€‚ heapUsedï¼šç”¨åˆ°çš„å †çš„éƒ¨åˆ†ã€‚ externalï¼š V8 å¼•æ“å†…éƒ¨çš„ C++ å¯¹è±¡å ç”¨çš„å†…å­˜ã€‚ åˆ¤æ–­å†…å­˜æ³„éœ²ï¼Œä»¥heapUsedå­—æ®µä¸ºå‡†ã€‚ å››ã€WeakMapå‰é¢è¯´è¿‡ï¼ŒåŠæ—¶æ¸…é™¤å¼•ç”¨éå¸¸é‡è¦ã€‚ä½†æ˜¯ï¼Œä½ ä¸å¯èƒ½è®°å¾—é‚£ä¹ˆå¤šï¼Œæœ‰æ—¶å€™ä¸€ç–å¿½å°±å¿˜äº†ï¼Œæ‰€ä»¥æ‰æœ‰é‚£ä¹ˆå¤šå†…å­˜æ³„éœ²ã€‚ æœ€å¥½èƒ½æœ‰ä¸€ç§æ–¹æ³•ï¼Œåœ¨æ–°å»ºå¼•ç”¨çš„æ—¶å€™å°±å£°æ˜ï¼Œå“ªäº›å¼•ç”¨å¿…é¡»æ‰‹åŠ¨æ¸…é™¤ï¼Œå“ªäº›å¼•ç”¨å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå½“å…¶ä»–å¼•ç”¨æ¶ˆå¤±ä»¥åï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å°±å¯ä»¥é‡Šæ”¾å†…å­˜ã€‚è¿™æ ·å°±èƒ½å¤§å¤§å‡è½»ç¨‹åºå‘˜çš„è´Ÿæ‹…ï¼Œä½ åªè¦æ¸…é™¤ä¸»è¦å¼•ç”¨å°±å¯ä»¥äº†ã€‚ ES6 è€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ï¼Œæ¨å‡ºäº†ä¸¤ç§æ–°çš„æ•°æ®ç»“æ„ï¼šWeakSet å’Œ WeakMapã€‚å®ƒä»¬å¯¹äºå€¼çš„å¼•ç”¨éƒ½æ˜¯ä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶çš„ï¼Œæ‰€ä»¥åå­—é‡Œé¢æ‰ä¼šæœ‰ä¸€ä¸ªâ€œWeakâ€ï¼Œè¡¨ç¤ºè¿™æ˜¯å¼±å¼•ç”¨ã€‚ ä¸‹é¢ä»¥ WeakMap ä¸ºä¾‹ï¼Œçœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆè§£å†³å†…å­˜æ³„éœ²çš„ã€‚ const wm = new WeakMap(); const element = document.getElementById(&#39;example&#39;); wm.set(element, &#39;some information&#39;); wm.get(element) // &quot;some information&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œå…ˆæ–°å»ºä¸€ä¸ª Weakmap å®ä¾‹ã€‚ç„¶åï¼Œå°†ä¸€ä¸ª DOM èŠ‚ç‚¹ä½œä¸ºé”®åå­˜å…¥è¯¥å®ä¾‹ï¼Œå¹¶å°†ä¸€äº›é™„åŠ ä¿¡æ¯ä½œä¸ºé”®å€¼ï¼Œä¸€èµ·å­˜æ”¾åœ¨ WeakMap é‡Œé¢ã€‚è¿™æ—¶ï¼ŒWeakMap é‡Œé¢å¯¹elementçš„å¼•ç”¨å°±æ˜¯å¼±å¼•ç”¨ï¼Œä¸ä¼šè¢«è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼ŒDOM èŠ‚ç‚¹å¯¹è±¡çš„å¼•ç”¨è®¡æ•°æ˜¯1ï¼Œè€Œä¸æ˜¯2ã€‚è¿™æ—¶ï¼Œä¸€æ—¦æ¶ˆé™¤å¯¹è¯¥èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œå®ƒå ç”¨çš„å†…å­˜å°±ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶é‡Šæ”¾ã€‚Weakmap ä¿å­˜çš„è¿™ä¸ªé”®å€¼å¯¹ï¼Œä¹Ÿä¼šè‡ªåŠ¨æ¶ˆå¤±ã€‚ åŸºæœ¬ä¸Šï¼Œå¦‚æœä½ è¦å¾€å¯¹è±¡ä¸Šæ·»åŠ æ•°æ®ï¼Œåˆä¸æƒ³å¹²æ‰°åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ WeakMapã€‚ äº”ã€WeakMap ç¤ºä¾‹WeakMap çš„ä¾‹å­å¾ˆéš¾æ¼”ç¤ºï¼Œå› ä¸ºæ— æ³•è§‚å¯Ÿå®ƒé‡Œé¢çš„å¼•ç”¨ä¼šè‡ªåŠ¨æ¶ˆå¤±ã€‚æ­¤æ—¶ï¼Œå…¶ä»–å¼•ç”¨éƒ½è§£é™¤äº†ï¼Œå·²ç»æ²¡æœ‰å¼•ç”¨æŒ‡å‘ WeakMap çš„é”®åäº†ï¼Œå¯¼è‡´æ— æ³•è¯å®é‚£ä¸ªé”®åæ˜¯ä¸æ˜¯å­˜åœ¨ã€‚ æˆ‘ä¸€ç›´æƒ³ä¸å‡ºåŠæ³•ï¼Œç›´åˆ°æœ‰ä¸€å¤©è´ºå¸ˆä¿Šè€å¸ˆæç¤ºï¼Œå¦‚æœå¼•ç”¨æ‰€æŒ‡å‘çš„å€¼å ç”¨ç‰¹åˆ«å¤šçš„å†…å­˜ï¼Œå°±å¯ä»¥é€šè¿‡process.memoryUsageæ–¹æ³•çœ‹å‡ºæ¥ã€‚ æ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œç½‘å‹ vtxf è¡¥å……äº†ä¸‹é¢çš„ä¾‹å­ã€‚ é¦–å…ˆï¼Œæ‰“å¼€ Node å‘½ä»¤è¡Œã€‚ $ node --expose-gc ä¸Šé¢ä»£ç ä¸­ï¼Œ--expose-gcå‚æ•°è¡¨ç¤ºå…è®¸æ‰‹åŠ¨æ‰§è¡Œåƒåœ¾å›æ”¶æœºåˆ¶ã€‚ ç„¶åï¼Œæ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚ // æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ï¼Œä¿è¯è·å–çš„å†…å­˜ä½¿ç”¨çŠ¶æ€å‡†ç¡® &gt; global.gc(); undefined // æŸ¥çœ‹å†…å­˜å ç”¨çš„åˆå§‹çŠ¶æ€ï¼ŒheapUsed ä¸º 4M å·¦å³ &gt; process.memoryUsage(); { rss: 21106688, heapTotal: 7376896, heapUsed: 4153936, external: 9059 } &gt; const wm = new WeakMap(); undefined &gt; const b = new Object(); undefined &gt; global.gc(); undefined // æ­¤æ—¶ï¼ŒheapUsed ä»ç„¶ä¸º 4M å·¦å³ &gt; process.memoryUsage(); { rss: 20537344, heapTotal: 9474048, heapUsed: 3967272, external: 8993 } // åœ¨ WeakMap ä¸­æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹ï¼Œ // é”®åä¸ºå¯¹è±¡ bï¼Œé”®å€¼ä¸ºä¸€ä¸ª 5*1024*1024 çš„æ•°ç»„ &gt; wm.set(b, new Array(5*1024*1024)); WeakMap {} // æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ &gt; global.gc(); undefined // æ­¤æ—¶ï¼ŒheapUsed ä¸º 45M å·¦å³ &gt; process.memoryUsage(); { rss: 62652416, heapTotal: 51437568, heapUsed: 45911664, external: 8951 } // è§£é™¤å¯¹è±¡ b çš„å¼•ç”¨ &gt; b = null; null // å†æ¬¡æ‰§è¡Œåƒåœ¾å›æ”¶ &gt; global.gc(); undefined // è§£é™¤ b çš„å¼•ç”¨ä»¥åï¼ŒheapUsed å˜å› 4M å·¦å³ // è¯´æ˜ WeakMap ä¸­çš„é‚£ä¸ªé•¿åº¦ä¸º 5*1024*1024 çš„æ•°ç»„è¢«é”€æ¯äº† &gt; process.memoryUsage(); { rss: 20639744, heapTotal: 8425472, heapUsed: 3979792, external: 8956 } ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦å¤–éƒ¨çš„å¼•ç”¨æ¶ˆå¤±ï¼ŒWeakMap å†…éƒ¨çš„å¼•ç”¨ï¼Œå°±ä¼šè‡ªåŠ¨è¢«åƒåœ¾å›æ”¶æ¸…é™¤ã€‚ç”±æ­¤å¯è§ï¼Œæœ‰äº†å®ƒçš„å¸®åŠ©ï¼Œè§£å†³å†…å­˜æ³„éœ²å°±ä¼šç®€å•å¾ˆå¤šã€‚ å…­ã€å‚è€ƒé“¾æ¥ Simple Guide to Finding a JavaScript Memory Leak in Node.js Understanding Garbage Collection and hunting Memory Leaks in Node.js Debugging Memory Leaks in Node.js Applications ï¼ˆå®Œï¼‰ å…³äºæœ¬æ–‡ä»…ä¾›å­¦ä¹ äº¤æµåˆ†äº«ï¼ŒåŸæ–‡é“¾æ¥ JavaScript å†…å­˜æ³„æ¼æ•™ç¨‹ï¼Œæ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆ","tags":[{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"æ€§èƒ½ä¼˜åŒ–","permalink":"https://microzz.com/tags/æ€§èƒ½ä¼˜åŒ–/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"}]},{"title":"JSæ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰ç»","date":"2017-05-22T14:08:21.000Z","path":"2017/05/22/reg-lookahead/","text":"JavaScriptæ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰ç»æ¦‚å¿µ&nbsp;&nbsp;&nbsp;&nbsp;æ­£åˆ™è¡¨è¾¾å¼ä»æ–‡æœ¬å¤´éƒ¨å‘å°¾éƒ¨å¼€å§‹è§£æï¼Œæ–‡æœ¬å°¾éƒ¨ç§°ä¸ºâ€œå‰â€ã€‚&nbsp;&nbsp;&nbsp;&nbsp;å‰ç»å°±æ˜¯åœ¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…åˆ°è§„åˆ™çš„æ—¶å€™ï¼Œå‘å‰æ£€æŸ¥æ˜¯å¦ç¬¦åˆæ–­è¨€ã€‚åé¡¾/åç»æ–¹å‘ç›¸åã€‚ exp(?=assert)ï¼šæ­£å‘å‰ç»exp(?!assert)ï¼šè´Ÿå‘å‰ç»exp(?&lt;=assert)ï¼šæ­£å‘åé¡¾ exp(?&lt;!assert)ï¼šè´Ÿå‘åé¡¾ *JSä¸æ”¯æŒåé¡¾ã€‚ ç¤ºä¾‹// åˆ¤æ–­ä¸€ä¸ªå•è¯å­—ç¬¦ä¹‹åæ˜¯å¦æ˜¯æ•°å­—ï¼ˆæ­£å‘å‰ç»ï¼‰ï¼Œ // æ˜¯çš„è¯ï¼Œåˆ™ç¬¦åˆåŒ¹é…ï¼Œè¿›è¡Œæ›¿æ¢ var str = &quot;a2*3&quot;; var reg = /\\w(?=\\d)/g; str.replace(reg,&quot;X&quot;); //&#39;X2*3&#39; //åˆ¤æ–­ä¸€ä¸ªå•è¯å­—ç¬¦ä¹‹åæ˜¯å¦æ˜¯éæ•°å­—ï¼ˆè´Ÿå‘å‰ç»ï¼‰ï¼Œ // æ˜¯çš„è¯ï¼Œåˆ™ç¬¦åˆåŒ¹é…ï¼Œè¿›è¡Œæ›¿æ¢ var str = &quot;a2*3&quot;; var reg = /\\w(?!\\d)/g; str.replace(reg,&quot;X&quot;); // &#39;aX*X&#39; AboutGitHub: ğŸ‘‰https://github.com/microzzä¸ªäººç½‘ç«™: ğŸ‘‰https://microzz.com/","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"RegExp","slug":"RegExp","permalink":"https://microzz.com/tags/RegExp/"},{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"https://microzz.com/tags/æ­£åˆ™è¡¨è¾¾å¼/"}]},{"title":"Rediså‘½ä»¤å¤§å…¨","date":"2017-05-20T12:47:52.000Z","path":"2017/05/20/redis/","text":"Rediså‘½ä»¤å¤§å…¨Redisä»‹ç»&nbsp;&nbsp;&nbsp;&nbsp;Redisæ˜¯ä¸€ä¸ªkey-valueå­˜å‚¨ç³»ç»Ÿã€‚å’ŒMemcachedç±»ä¼¼ï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„valueç±»å‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬string(å­—ç¬¦ä¸²)ã€list(é“¾è¡¨)ã€set(é›†åˆ)ã€zset(sorted set â€“æœ‰åºé›†åˆ)å’Œhashï¼ˆå“ˆå¸Œç±»å‹ï¼‰ã€‚è¿™äº›æ•°æ®ç±»å‹éƒ½æ”¯æŒpush/popã€add/removeåŠå–äº¤é›†å¹¶é›†å’Œå·®é›†åŠæ›´ä¸°å¯Œçš„æ“ä½œï¼Œè€Œä¸”è¿™äº›æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œredisæ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æ’åºã€‚ä¸memcachedä¸€æ ·ï¼Œä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚åŒºåˆ«çš„æ˜¯redisä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†master-slave(ä¸»ä»)åŒæ­¥ã€‚&nbsp;&nbsp;&nbsp;&nbsp;Redis æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„key-valueæ•°æ®åº“ã€‚ redisçš„å‡ºç°ï¼Œå¾ˆå¤§ç¨‹åº¦è¡¥å¿äº†memcachedè¿™ç±»key/valueå­˜å‚¨çš„ä¸è¶³ï¼Œåœ¨éƒ¨ åˆ†åœºåˆå¯ä»¥å¯¹å…³ç³»æ•°æ®åº“èµ·åˆ°å¾ˆå¥½çš„è¡¥å……ä½œç”¨ã€‚å®ƒæä¾›äº†Javaï¼ŒC/C++ï¼ŒC#ï¼ŒPHPï¼ŒJavaScriptï¼ŒPerlï¼ŒObject-Cï¼ŒPythonï¼ŒRubyï¼ŒErlangç­‰å®¢æˆ·ç«¯ï¼Œä½¿ç”¨å¾ˆæ–¹ä¾¿ã€‚ å¯¼èˆªStrings get | set | del Lists rpush | lrange | lindex | lpop Sets sadd | smembers | sismember | srem Hashes hset | hget | hgetall | hdel Sorted sets zadd | zrange | zrangebyscore | szrem | zrevrank | zrevrange Other Commandssort publish/subscribesubscribe | unsubscribe | publish |psubscribe | punsubscribe expiring keyspersist | ttl | expire | expireat |pttl | pexpire | pexpireat å­—ç¬¦ä¸²(Strings) Get key-name - è·å–å­˜å‚¨åœ¨ç»™å®šé”®ä¸­çš„å€¼ Set key-name - è·å–å­˜å‚¨åœ¨ç»™å®šé”®ä¸­çš„å€¼ Del key-name - åˆ é™¤å­˜å‚¨åœ¨ç»™å®šé”®ä¸­çš„å€¼ï¼ˆé€‚ç”¨äºæ‰€æœ‰ç±»å‹ï¼‰ åˆ—è¡¨(Lists) RPush list-key item - å°†ç»™å®šå€¼æ¨å…¥åˆ—è¡¨çš„å³ç«¯ LRange list-key start stop - è·å–åˆ—è¡¨åœ¨ç»™å®šèŒƒå›´ä¸Šçš„æ‰€æœ‰å€¼ LIndex list-key index - è·å–åˆ—è¡¨åœ¨ç»™å®šä½ç½®ä¸Šçš„å•ä¸ªå…ƒç´  LPop list-key - ä»åˆ—è¡¨çš„å·¦ç«¯popå‡ºä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›è¯¥å€¼ é›†åˆ(Sets) sadd set-key item - å°†ç»™å®šå…ƒç´ itemæ·»åŠ åˆ°é›†åˆï¼ˆè¿”å›0è¡¨ç¤ºå…ƒç´ å·²å­˜åœ¨äºé›†åˆä¸­ï¼Œ1è¡¨ç¤ºæ·»åŠ æˆåŠŸï¼‰ smembers set-key - è¿”å›é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´  sismember set-key item - æ£€æŸ¥ç»™å®šå…ƒç´ itemæ˜¯å¦å­˜åœ¨äºé›†åˆä¸­ srem set-key item - å¦‚æœitemå­˜åœ¨äºé›†åˆä¸­ï¼Œç§»é™¤è¯¥å…ƒç´ ï¼ˆè¿”å›ç§»é™¤å…ƒç´ çš„æ•°é‡ï¼‰ æ•£åˆ—(Hashes) hset hash-key sub-key value - åœ¨æ•£åˆ—ä¸­è®¾ç½®ç»™å®šçš„é”®å€¼å¯¹ hget hash-key sub-key - åœ¨æ•£åˆ—ä¸­è·å–æŒ‡å®šé”®çš„å€¼ hgetall hash-key - è·å–æ•£åˆ—ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹ hdel hash-key sub-key - ç§»é™¤æ•£åˆ—ä¸­çš„ç»™å®šé”®ï¼ˆå­˜åœ¨è¿”å›1ï¼Œä¸å­˜åœ¨è¿”å›0ï¼‰ æœ‰åºé›†åˆ(Sorted Sets) zadd zset-key score member - å°†ä¸€ä¸ªå¸¦æœ‰ç»™å®šåˆ†å€¼çš„æˆå‘˜æ·»åŠ åˆ°æœ‰åºé›†åˆä¸­ zrange zset-key start stop [withscores] - æ ¹æ®å…ƒç´ åœ¨æœ‰åºé›†åˆä¸­æ‰€å¤„çš„ä½ç½®ï¼Œä»æœ‰åºé›†åˆé‡Œé¢è·å–å¤šä¸ªå…ƒç´  zrangebyscore zset-key start stop [withscores] - è·å–æœ‰åºé›†åˆåœ¨ç»™å®šåˆ†å€¼èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´  zrem zset-key member - åœ¨æœ‰åºé›†åˆä¸­ç§»é™¤ç»™å®šæˆå‘˜ï¼ˆå­˜åœ¨è¿”å›1ï¼Œä¸å­˜åœ¨è¿”å›0ï¼‰ zrevrank zset-key member - è¿”å›æœ‰åºé›†åˆæˆå‘˜ memberçš„æ’åï¼Œæˆå‘˜æŒ‰ç…§åˆ†å€¼ä»å¤§åˆ°å°æ’åˆ— zrevrange zset-key start stop [withscores] - è¿”å›æœ‰åºé›†åˆç»™å®šæ’åèŒƒå›´å†…çš„æˆå‘˜ï¼Œæˆå‘˜æŒ‰ç…§åˆ†å€¼ä»å¤§åˆ°å°æ’åˆ— å…¶ä»–å‘½ä»¤(Other Commands) sort source-key [BY pattern] [Limit offset count] [Get pattern [Get pattern ...]] [Asc|Desc] [Alpha] [Store dest-key] - æ ¹æ®ç»™å®šçš„é€‰é¡¹ï¼Œå¯¹è¾“å…¥çš„åˆ—è¡¨ã€é›†åˆæˆ–è€…æœ‰åºé›†åˆè¿›è¡Œæ’åºï¼Œè¿”å›æˆ–å­˜å‚¨æ’åºçš„ç»“æœå‘å¸ƒ/è®¢é˜…(publish/subscribe) subscribe channel [channel ...] - è®¢é˜…ç»™å®šçš„é¢‘é“ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰ unsubscribe [channel [channel ...]] - é€€è®¢ç»™å®šçš„é¢‘é“ï¼Œå¦‚æœæ²¡æœ‰ç»™å®šé¢‘é“ï¼Œå°†é€€è®¢æ‰€æœ‰é¢‘é“ publish channel message - å‘ç»™å®šé¢‘é“å‘é€æ¶ˆæ¯ psubscribe pattern [pattern ...] - è®¢é˜…ç»™å®šæ¨¡å¼åŒ¹é…çš„é¢‘é“ punsubscribe [pattern [pattern ...]] - é€€è®¢ç»™å®špatternåŒ¹é…çš„æ‰€æœ‰æ¨¡å¼ï¼Œå¦‚æœæ²¡æœ‰ç»™å®šæ¨¡å¼ï¼Œå°†é€€è®¢æ‰€æœ‰æ¨¡å¼è¿‡æœŸæ—¶é—´(expiring keys) persist key-name - ç§»é™¤é”®çš„è¿‡æœŸæ—¶é—´ ttl key-name - æŸ¥çœ‹ç»™å®šé”®è·ç¦»è¿‡æœŸè¿˜æœ‰å¤šå°‘ç§’ expire key-name seconds - è®©æŒ‡å®šé”®åœ¨ç»™å®šç§’æ•°åè¿‡æœŸ expireat key-name timestamp - å°†ç»™å®šçš„è¿‡æœŸæ—¶é—´è®¾ç½®ä¸ºç»™å®šçš„Unixæ—¶é—´æˆ³ pttl key-name - æŸ¥çœ‹ç»™å®šé”®è·ç¦»è¿‡æœŸè¿˜æœ‰å¤šå°‘æ¯«ç§’(version &gt;= 2.6) pexpire key-name milliseconds - è®©æŒ‡å®šé”®åœ¨ç»™å®šæ¯«ç§’æ•°åè¿‡æœŸ(version &gt;= 2.6) pexpireat key-name timestamp-milliseconds - å°†ç»™å®šçš„è¿‡æœŸæ—¶é—´è®¾ç½®ä¸ºç»™å®šçš„æ¯«ç§’çº§ç²¾åº¦çš„Unixæ—¶é—´æˆ³(version &gt;= 2.6) AboutGitHub: ğŸ‘‰https://github.com/microzzä¸ªäººç½‘ç«™: ğŸ‘‰https://microzz.com/","tags":[{"name":"Redis","slug":"Redis","permalink":"https://microzz.com/tags/Redis/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"https://microzz.com/tags/æ•°æ®åº“/"},{"name":"å‘½ä»¤","slug":"å‘½ä»¤","permalink":"https://microzz.com/tags/å‘½ä»¤/"}]},{"title":"JSä¸­çš„å‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–","date":"2017-05-18T14:35:44.000Z","path":"2017/05/18/throttle-debounce/","text":"JavaScriptä¸­çš„å‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–å‡½æ•°èŠ‚æµæŒ‡è®©å‡½æ•°æœ‰è§„å¾‹çš„è¿›è¡Œè°ƒç”¨ï¼Œåº”ç”¨åœºæ™¯ï¼šwindow.resizeï¼Œæ¸¸æˆä¸­å­å¼¹å‘å°„(1såªèƒ½å‘å°„ä¸€é¢—å­å¼¹)ç­‰ï¼› å‡½æ•°é˜²æŠ–è®©å‡½æ•°åœ¨â€è°ƒç”¨â€™â€™ä¹‹åçš„ä¸€æ®µæ—¶é—´åç”Ÿæ•ˆï¼Œåº”ç”¨åœºæ™¯:è¾“å…¥æ¡†(ä¾‹ï¼šåœ¨ç”¨æˆ·åœæ­¢è¾“å…¥çš„500msåå†å¤„ç†ç”¨æˆ·æ•°æ®)ã€‚ //å‡½æ•°èŠ‚æµ /* * @params {Function} fun è°ƒç”¨å‡½æ•° * @params {delay} number å»¶è¿Ÿæ—¶é—´ */ const throttle = (fun, delay, ...rest) =&gt; { let last = null; return () =&gt; { const now = + new Date(); if (now - last &gt; delay) { fun(rest); last = now; } } } //å®ä¾‹ const throttleExample = throttle(() =&gt; console.log(1), 1000); //è°ƒç”¨ throttleExample(); throttleExample(); throttleExample(); //å‡½æ•°é˜²æŠ– const debouce = (fun, delay, ...rest) =&gt; { let timer = null; return () =&gt; { clearTimeout(timer); timer = setTimeout(() =&gt; { fun(rest); }, delay); } } //å®ä¾‹ const debouceExample = debouce(() =&gt; console.log(1), 1000); //è°ƒç”¨ debouceExample(); debouceExample(); debouceExample(); AboutGitHub: ğŸ‘‰https://github.com/microzz","tags":[{"name":"throttle","slug":"throttle","permalink":"https://microzz.com/tags/throttle/"},{"name":"debounce","slug":"debounce","permalink":"https://microzz.com/tags/debounce/"},{"name":"å‡½æ•°èŠ‚æµ","slug":"å‡½æ•°èŠ‚æµ","permalink":"https://microzz.com/tags/å‡½æ•°èŠ‚æµ/"},{"name":"å‡½æ•°é˜²æŠ–","slug":"å‡½æ•°é˜²æŠ–","permalink":"https://microzz.com/tags/å‡½æ•°é˜²æŠ–/"}]},{"title":"Redisé…ç½®è®¤è¯å¯†ç ","date":"2017-05-15T14:32:28.000Z","path":"2017/05/15/redispass/","text":"Redisé…ç½®è®¤è¯å¯†ç é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®yumæ–¹å¼å®‰è£…çš„redisé…ç½®æ–‡ä»¶é€šå¸¸åœ¨/etc/redis.confä¸­ï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶æ‰¾åˆ° #requirepass foobaredå»æ‰è¡Œå‰çš„æ³¨é‡Šï¼Œå¹¶ä¿®æ”¹å¯†ç ä¸ºæ‰€éœ€çš„å¯†ç ,ä¿å­˜æ–‡ä»¶requirepass myRedisé‡å¯redis sudo service redis restart sudo service redis stop sudo redis-server /etc/redis.conf è¿™ä¸ªæ—¶å€™å°è¯•ç™»å½•redisï¼Œå‘ç°å¯ä»¥ç™»ä¸Šï¼Œä½†æ˜¯æ‰§è¡Œå…·ä½“å‘½ä»¤æ˜¯æç¤ºæ“ä½œä¸å…è®¸ redis-cli -h 127.0.0.1 -p 6379 redis 127.0.0.1:6379&gt; redis 127.0.0.1:6379&gt; keys * (error) ERR operation not permitted redis 127.0.0.1:6379&gt; select 1 (error) ERR operation not permitted redis 127.0.0.1:6379[1]&gt; å°è¯•ç”¨å¯†ç ç™»å½•å¹¶æ‰§è¡Œå…·ä½“çš„å‘½ä»¤çœ‹åˆ°å¯ä»¥æˆåŠŸæ‰§è¡Œ redis-cli -h 127.0.0.1 -p 6379 -a myRedis redis 127.0.0.1:6379&gt; keys * 1) &quot;myset&quot; 2) &quot;mysortset&quot; redis 127.0.0.1:6379&gt; select 1 OK redis 127.0.0.1:6379[1]&gt; config get requirepass 1) &quot;requirepass&quot; 2) &quot;myRedis&quot; é€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œé…ç½®redis 127.0.0.1:6379[1]&gt; config set requirepass my_redis OK redis 127.0.0.1:6379[1]&gt; config get requirepass 1) &quot;requirepass&quot; 2) &quot;my_redis&quot; æ— éœ€é‡å¯redisä½¿ç”¨ç¬¬ä¸€æ­¥ä¸­é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„è€å¯†ç ç™»å½•redisï¼Œä¼šå‘ç°åŸæ¥çš„å¯†ç å·²ä¸å¯ç”¨ï¼Œæ“ä½œè¢«æ‹’ç» redis-cli -h 127.0.0.1 -p 6379 -a myRedis redis 127.0.0.1:6379&gt; config get requirepass (error) ERR operation not permitted ä½¿ç”¨ä¿®æ”¹åçš„å¯†ç ç™»å½•redisï¼Œå¯ä»¥æ‰§è¡Œç›¸åº”æ“ä½œ redis-cli -h 127.0.0.1 -p 6379 -a my_redis redis 127.0.0.1:6379&gt; config get requirepass 1) &quot;requirepass&quot; 2) &quot;my_redis å°è¯•é‡å¯ä¸€ä¸‹redisï¼Œç”¨æ–°é…ç½®çš„å¯†ç ç™»å½•redisæ‰§è¡Œæ“ä½œï¼Œå‘ç°æ–°çš„å¯†ç å¤±æ•ˆï¼Œredisé‡æ–°ä½¿ç”¨äº†é…ç½®æ–‡ä»¶ä¸­çš„å¯†ç  sudo service redis restart Stopping redis-server: [ OK ] Starting redis-server: [ OK ] redis-cli -h 127.0.0.1 -p 6379 -a my_redis redis 127.0.0.1:6379&gt; config get requirepass (error) ERR operation not permitted redis-cli -h 127.0.0.1 -p 6379 -a myRedis redis 127.0.0.1:6379&gt; config get requirepass 1) &quot;requirepass&quot; 2) &quot;myRedis&quot; é™¤äº†åœ¨ç™»å½•æ—¶é€šè¿‡ -a å‚æ•°åˆ¶å®šå¯†ç å¤–ï¼Œè¿˜å¯ä»¥ç™»å½•æ—¶ä¸æŒ‡å®šå¯†ç ï¼Œè€Œåœ¨æ‰§è¡Œæ“ä½œå‰è¿›è¡Œè®¤è¯ã€‚ redis-cli -h 127.0.0.1 -p 6379 redis 127.0.0.1:6379&gt; config get requirepass (error) ERR operation not permitted redis 127.0.0.1:6379&gt; auth myRedis OK redis 127.0.0.1:6379&gt; config get requirepass 1) &quot;requirepass&quot; 2) &quot;myRedis&quot; masteré…ç½®äº†å¯†ç ï¼Œslaveå¦‚ä½•é…ç½®è‹¥masteré…ç½®äº†å¯†ç åˆ™slaveä¹Ÿè¦é…ç½®ç›¸åº”çš„å¯†ç å‚æ•°å¦åˆ™æ— æ³•è¿›è¡Œæ­£å¸¸å¤åˆ¶çš„ã€‚slaveä¸­é…ç½®æ–‡ä»¶å†…æ‰¾åˆ°å¦‚ä¸‹è¡Œï¼Œç§»é™¤æ³¨é‡Šï¼Œä¿®æ”¹å¯†ç å³å¯ #masterauth mstpassword AboutGitHub: ğŸ‘‰https://github.com/microzzä¸ªäººç½‘ç«™: ğŸ‘‰https://microzz.com/","tags":[{"name":"Redis","slug":"Redis","permalink":"https://microzz.com/tags/Redis/"},{"name":"å®‰å…¨","slug":"å®‰å…¨","permalink":"https://microzz.com/tags/å®‰å…¨/"}]},{"title":"Webå‰ç«¯æ€§èƒ½ä¼˜åŒ–","date":"2017-05-13T14:37:32.000Z","path":"2017/05/13/Performance/","text":"Webæ€§èƒ½ä¼˜åŒ–ï¼šPerformanceï¼Œæ•°æ®æœé›†æ–¹æ³•æµè§ˆå™¨æ–°æä¾›çš„performanceæ¥å£ç²¾ç¡®çš„å‘Šè¯‰æˆ‘ä»¬å½“è®¿é—®ä¸€ä¸ªç½‘ç«™é¡µé¢æ—¶å½“å‰ç½‘é¡µæ¯ä¸ªå¤„ç†é˜¶æ®µçš„ç²¾ç¡®æ—¶é—´(timestamp)ï¼Œä»¥æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œå‰ç«¯åˆ†æã€‚å®ƒæ˜¯æµè§ˆå™¨çš„ç›´æ¥å®ç°ï¼Œæ¯”ä¹‹å‰åœ¨ç½‘é¡µä¸­ç”¨jsè®¾ç½®Date.timeæˆ–è€…cookieæ¥åˆ†æç½‘é¡µæ—¶é—´ä¸Šè¦ç²¾ç¡®å¾ˆå¤šã€‚ readyStart = timing.fetchStart - timing.navigationStart; // å‡†å¤‡æ–°é¡µé¢æ—¶é—´è€—æ—¶ redirectTime = timing.redirectEnd - timing.redirectStart; // é‡å®šå‘è€—æ—¶ appcacheTime = timing.domainLookupStart - timing.fetchStart; // Appcache è€—æ—¶ unloadEventTime = timing.unloadEventEnd - timing.unloadEventStart; // unload å‰æ–‡æ¡£è€—æ—¶ lookupDomainTime = timing.domainLookupEnd - timing.domainLookupStart; // DNS æŸ¥è¯¢è€—æ—¶ connectTime = timing.connectEnd - timing.connectStart; // TCPè¿æ¥è€—æ—¶ requestTime = timing.responseEnd - timing.requestStart; // requestè¯·æ±‚è€—æ—¶ initDomTreeTime = timing.domInteractive - timing.responseEnd; // è¯·æ±‚å®Œæ¯•è‡³DOMåŠ è½½: domReadyTime = timing.domComplete - timing.domInteractive; // è§£é‡Šdomæ ‘è€—æ—¶: loadTime = timing.loadEventEnd - timing.navigationStart // ä»å¼€å§‹è‡³loadæ€»è€—æ—¶: performanceNavigation(performance.navigation)å¯¹è±¡çš„æˆå‘˜performanceNavigation.typeè¿”å›å€¼åº”è¯¥æ˜¯0,1,2 ä¸­çš„ä¸€ä¸ª.åˆ†åˆ«å¯¹åº”ä¸‰ä¸ªæšä¸¾å€¼: 0. : TYPE_NAVIGATE (ç”¨æˆ·é€šè¿‡å¸¸è§„å¯¼èˆªæ–¹å¼è®¿é—®é¡µé¢,æ¯”å¦‚ç‚¹ä¸€ä¸ªé“¾æ¥ï¼Œæˆ–è€…ä¸€èˆ¬çš„getæ–¹å¼.) 1. : TYPE_RELOAD (ç”¨æˆ·é€šè¿‡åˆ·æ–°,åŒ…æ‹¬JSè°ƒç”¨åˆ·æ–°æ¥å£ç­‰æ–¹å¼è®¿é—®é¡µé¢) 2. : TYPE_BACK_FORWARD (ç”¨æˆ·é€šè¿‡åé€€æŒ‰é’®è®¿é—®æœ¬é¡µé¢) 3. ps:è‰æ¡ˆä¸­å…¶å®è¿˜æœ‰ TYPE_RESERVED (ä¿ç•™,å…¶ä»–éå‰ä¸‰ç§æ–¹å¼è®¿é—®.) performanceNavigation.redirectCountä¸€ä¸ªåªè¯»å±æ€§,è¿”å›å½“å‰é¡µé¢æ˜¯å‡ æ¬¡é‡å®šå‘æ‰è¿‡æ¥çš„.ä½†æ˜¯è¿™ä¸ªæ¥å£æœ‰åŒæºç­–ç•¥é™åˆ¶,å³ä»…èƒ½æ£€æµ‹åŒæºçš„é‡å®šå‘. bugs: 1. IE9,å½“ä¸€ä¸ªåŒæºçš„é¡µé¢aè¿æ¥åˆ°åœ°å€b(æ˜¯å¦äºa,cåŒæºéƒ½å¦‚æ­¤),åè¢«é‡å®šå‘åˆ°åŒæºé¡µé¢cæ—¶.navigation.redirectCountå±…ç„¶ä¼šæ˜¯1.è€Œä¸æ˜¯0,æ­¤bugå·²è¢«IE10 PP2ä¿®å¤.** performanceTiming(performance.timing)å¯¹è±¡çš„æˆå‘˜:.navigationStartæµè§ˆå™¨å®Œæˆå¸è½½å‰ä¸€ä¸ªæ–‡æ¡£çš„æ—¶é—´(ä¹Ÿå°±æ˜¯å‡†å¤‡åŠ è½½æ–°é¡µé¢çš„é‚£ä¸ªèµ·å§‹æ—¶é—´).å¦‚æœæ²¡æœ‰å‰ä¸€ä¸ªæ–‡æ¡£ï¼Œé‚£ä¹ˆå°±è¿”å› timing.fetchStartçš„å€¼. ä¼¼ä¹åªæœ‰Chrome éå¸¸ä¸¥æ ¼éµå®ˆäº†æ­¤è‰æ¡ˆ. å³ä¸æŠŠåˆ·æ–°é¡µé¢ ï¼Œä»¥åŠä¸€ä¸ªæ ‡ç­¾é¡µè¾“å…¥åœ°å€åˆ°æŒ‡å®šé¡µé¢ï¼Œè§†ä¸ºå‘ç”Ÿæ–‡æ¡£çš„å¸è½½ bugs: 1. IE9,å½“å‘ç”Ÿé‡å®šå‘æ—¶,.navigationStart ä¼šæ˜¯0. IE10 PP2 å·²ä¿®å¤æ­¤é—®é¢˜. 2. IE9-IE10 PP2,çš„ä¸€ä¸ªé—®é¢˜æ˜¯åˆ·æ–°å½“å‰é¡µé¢,æˆ–åœ¨æŸä¸ªæ ‡ç­¾é¡µè¾“å…¥åœ°å€ä¸ºéç›¸åŒé¡µé¢æ—¶, ä¼šè¢«è§†ä¸ºå­˜åœ¨å‰ä¸€ä¸ªæ–‡æ¡£ï¼Œä¹Ÿå°±æ˜¯è¯´,å…¶navigationStartä¼šæ—©äºfetchStart.(é™¤éåœ¨å½“å‰é¡µå†æ¬¡è¾“å…¥åœ°å€æŒ‰å›è½¦.å†æ¬¡è¿›å…¥è¯¥é¡µé¢ï¼Œåˆ™è¢«è§†ä¸ºæ— å‰ä¸€ä¸ªæ–‡æ¡£è¢«å¸è½½.).è€Œå®é™…ä¸Šè¿™æ—¶å€™navigationStart,æ˜¯unloadEventEndçš„æ—¶é—´. 3. Firefox7-Firefox10,ä¸€ä¸ªæ–°æ ‡ç­¾é¡µä¹Ÿä¼šè¢«è§†ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„æ–‡æ¡£. æ‰€ä»¥è¿™æ—¶å€™,ä¼šæœ‰å€¼ï¼Œä¸”ä¸æ˜¯fetchStartçš„å€¼. .unloadEventStartå¦‚æœå‰ä¸€ä¸ªæ–‡æ¡£ï¼Œå’Œå½“å‰æ–‡æ¡£åŒæº,è¿”å›å‰ä¸€ä¸ªæ–‡æ¡£å‘ç”Ÿunloadäº‹ä»¶å‰çš„æ—¶é—´.å¦‚æœæ²¡æœ‰å‰ä¸€ä¸ªæ–‡æ¡£ï¼Œæˆ–ä¸åŒæº,åˆ™è¿”å›0. bugs: 1. IE9-IE10 pp2,Chrome17-,åœ¨å‰ä¸€ä¸ªæ–‡æ¡£ä¸å½“å‰æ–‡æ¡£ä¸­é—´å‘ç”Ÿé‡å®šå‘æ—¶, ä¸”å‰åä¸¤ä¸ªæ–‡æ¡£åŒæºæ—¶, unloadEventStart,ä¹Ÿä¼šè¿”å›0 .unloadEventEndå¦‚æœå‰ä¸€ä¸ªæ–‡æ¡£å’Œå½“å‰æ–‡æ¡£åŒæº.è¿”å›å‰ä¸€ä¸ªæ–‡æ¡£å‘ç”Ÿunloadäº‹ä»¶çš„æ—¶é—´. å¦‚æœæ²¡æœ‰å‰ä¸€ä¸ªæ–‡æ¡£ï¼Œæˆ–ä¸åŒæº,åˆ™è¿”å›0. å¦‚æœ,å‘ç”Ÿäº†HTTPé‡å®šå‘,æˆ–è€…ç±»ä¼¼çš„äº‹æƒ….å¹¶ä¸”,ä»å¯¼èˆªå¼€å§‹ä¸­é—´çš„æ¯æ¬¡é‡å®šå‘ï¼Œå¹¶ä¸éƒ½å’Œå½“å‰æ–‡æ¡£åŒåŸŸçš„è¯,.åˆ™è¿”å›0 bugs: 1. IE9-IE10 pp2,Chrome17-,åœ¨å‰ä¸€ä¸ªæ–‡æ¡£ä¸å½“å‰æ–‡æ¡£ä¸­é—´å‘ç”Ÿé‡å®šå‘æ—¶, ä¸”å‰åä¸¤ä¸ªæ–‡æ¡£åŒæºæ—¶, unloadEventEnd,ä¹Ÿä¼šè¿”å›0 .redirectStartå¦‚æœ,å‘ç”Ÿäº†HTTPé‡å®šå‘,æˆ–è€…ç±»ä¼¼çš„äº‹æƒ….å¹¶ä¸”,ä»å¯¼èˆªå¼€å§‹,ä¸­é—´çš„æ¯æ¬¡é‡å®šå‘ï¼Œéƒ½å’Œå½“å‰æ–‡æ¡£åŒåŸŸçš„è¯,å°±è¿”å›å¼€å§‹é‡å®šå‘çš„,timing.fetchStartçš„å€¼.å…¶ä»–æƒ…å†µï¼Œåˆ™è¿”å›0. bugs: 1. IE9-IE10 pp2,åœ¨é¡µé¢a,é“¾æ¥åˆ°åœ°å€b,å¹¶é‡å®šå‘åˆ°ä¸båŒæºçš„é¡µé¢cæ—¶. redirectStart,å°†ä¸º0.å³åŒæºç­–ç•¥ï¼Œå±…ç„¶ä¼šè€ƒè™‘å¯¼èˆªé¡µ. .redirectEndå¦‚æœ,å‘ç”Ÿäº†HTTPé‡å®šå‘,æˆ–è€…ç±»ä¼¼çš„äº‹æƒ….å¹¶ä¸”,ä»å¯¼èˆªå¼€å§‹,ä¸­é—´çš„æ¯æ¬¡é‡å®šå‘ï¼Œéƒ½å’Œå½“å‰æ–‡æ¡£åŒåŸŸçš„è¯,å°±è¿”å›æœ€åä¸€æ¬¡é‡å®šå‘ï¼Œæ¥æ”¶åˆ°æœ€åä¸€ä¸ªå­—èŠ‚æ•°æ®åçš„é‚£ä¸ªæ—¶é—´.å…¶ä»–æƒ…å†µåˆ™è¿”å›0. bugs: 1. IE9-IE10 pp2,åœ¨é¡µé¢a,é“¾æ¥åˆ°åœ°å€b,å¹¶é‡å®šå‘åˆ°ä¸båŒæºçš„é¡µé¢cæ—¶. redirectSEnd,å°†ä¸º0.å³åŒæºç­–ç•¥ï¼Œå±…ç„¶ä¼šè€ƒè™‘å¯¼èˆªé¡µ. .fetchStartå¦‚æœä¸€ä¸ªæ–°çš„èµ„æº(è¿™é‡Œæ˜¯æŒ‡å½“å‰æ–‡æ¡£)è·å–è¢«å‘èµ·,æˆ–ç±»ä¼¼çš„äº‹æƒ…å‘ç”Ÿ,åˆ™ fetchStartå¿…é¡»è¿”å›ç”¨æˆ·ä»£ç†å¼€å§‹æ£€æŸ¥å…¶ç›¸å…³ç¼“å­˜çš„é‚£ä¸ªæ—¶é—´,å…¶ä»–æƒ…å†µåˆ™è¿”å›å¼€å§‹è·å–è¯¥èµ„æºçš„æ—¶é—´. .domainLookupStartè¿”å›ç”¨æˆ·ä»£ç†å¯¹å½“å‰æ–‡æ¡£æ‰€å±åŸŸè¿›è¡ŒDNSæŸ¥è¯¢å¼€å§‹çš„æ—¶é—´. å¦‚æœæ­¤è¯·æ±‚æ²¡æœ‰DNSæŸ¥è¯¢è¿‡ç¨‹,å¦‚é•¿è¿æ¥ï¼Œèµ„æºcache,ç”šè‡³æ˜¯æœ¬åœ°èµ„æºç­‰. é‚£ä¹ˆå°±è¿”å› fetchStartçš„å€¼. bugs: 1. Firefox7-Firefox10,çš„å®ç°æœ‰é”™è¯¯. å› ä¸ºå…¶å€¼,å¹¶æ²¡æœ‰éµå®ˆæ ‡å‡†æ‰€æè¿°çš„å¯¹åº”æ—¶é—´èŠ‚ç‚¹.è€Œæ˜¯é»˜è®¤ä»¥navigationStartä½œä¸ºæ—¶é—´èµ·ç‚¹,å¹¶ä»¥ä¸­é—´çš„é‡å®šå‘æ—¶é—´åšç´¯åŠ .è€Œå¾—åˆ°domainLookupStartçš„æ—¶é—´.å³ä½¿è¿™ä¸ªé‡å®šå‘æ˜¯éåŒæºçš„é‡å®šå‘.æ‰€æ¶ˆè€—çš„æ—¶é—´éƒ½ä¼šè¢«è®¡ç®—è¿›å». é‚£ä¹ˆï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ï¼Œä¸ºä»€ä¹ˆå½“æ²¡æœ‰é‡å®šå‘å‘ç”Ÿæ—¶, domainLookupStart - fetchStart, æˆ‘ä»¬å¾€å¾€ä¼šå¾—åˆ°ä¸€ä¸ªè´Ÿå€¼çš„åŸå› ,å› ä¸ºnavigationStart,æ˜¯è¦æ—©äº fetchStartçš„. .domainLookupEndè¿”å›ç”¨æˆ·ä»£ç†å¯¹ç»“æŸå¯¹å½“å‰æ–‡æ¡£æ‰€å±åŸŸè¿›è¡ŒDNSæŸ¥è¯¢çš„æ—¶é—´.å¦‚æœæ­¤è¯·æ±‚æ²¡æœ‰DNSæŸ¥è¯¢è¿‡ç¨‹,å¦‚é•¿è¿æ¥ï¼Œèµ„æºcache,ç”šè‡³æ˜¯æœ¬åœ°èµ„æºç­‰. é‚£ä¹ˆå°±è¿”å› fetchStartçš„å€¼. bugs: 1.å‚è€ƒdomainLookupStartçš„bug. Endå…·å¤‡ç›¸åŒçš„é—®é¢˜. .connectStartè¿”å›ç”¨æˆ·ä»£ç†å‘æœåŠ¡å™¨æœåŠ¡å™¨è¯·æ±‚æ–‡æ¡£ï¼Œå¼€å§‹å»ºç«‹è¿æ¥çš„é‚£ä¸ªæ—¶é—´,å¦‚æœæ­¤è¿æ¥æ˜¯ä¸€ä¸ªé•¿è¿æ¥,åˆæˆ–è€…ç›´æ¥ä»ç¼“å­˜ä¸­è·å–èµ„æºï¼ˆå³æ²¡æœ‰ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼‰.åˆ™è¿”å›domainLookupEndçš„å€¼. bugs: 1. Firefox7 å½“èµ„æºèµ°cache,å³å¹¶æœªåˆ›å»ºè¿æ¥æ—¶. connentStart çš„å€¼ä¸º0. 2. Firefox8-Firefox10,å½“å¹¶æœªåˆ›å»ºè¿æ¥æ—¶,connetStartçš„å€¼æ˜¯fetchStartçš„å€¼ï¼Œè€Œä¸æ˜¯domainLookEndçš„å€¼. ä½†è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªæƒ¯æ€§é—®é¢˜ï¼Œå› ä¸ºdomainLookupEndçš„ç´¯ç§¯æ—¶é—´å°±å·²ç»èƒŒç¦»äº†æ ‡å‡†äº†ï¼Œæ‰€ä»¥å³ä½¿connectStartéµå®ˆæ ‡å‡†.ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰é—®é¢˜çš„å€¼. .connectEndè¿”å›ç”¨æˆ·ä»£ç†å‘æœåŠ¡å™¨æœåŠ¡å™¨è¯·æ±‚æ–‡æ¡£ï¼Œå»ºç«‹è¿æ¥æˆåŠŸå(æ³¨æ„ï¼Œä¸æ˜¯æ–­å¼€è¿æ¥çš„æ—¶é—´.)çš„é‚£ä¸ªæ—¶é—´.å¦‚æœæ­¤è¿æ¥æ˜¯ä¸€ä¸ªé•¿è¿æ¥ï¼Œåˆæˆ–ç›´æ¥ä»ç¼“å­˜ä¸­è·å–èµ„æº ï¼ˆå³æ²¡æœ‰ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼‰,åˆ™è¿”å›domainLookupEndçš„å€¼. bugs: å‚è€ƒconnectStartçš„é—®é¢˜.connectEndå…·å¤‡åŒæ ·çš„é—®é¢˜. å¦‚æœè¿æ¥å»ºç«‹å¤±è´¥,è€Œç”¨æˆ·ä»£ç†è¿›è¡Œé‡è¿,åˆ™connectStartå’ŒconnectEndåˆ™åº”è¯¥æ˜¯è¿™æ¬¡é‡è¿çš„ç›¸å…³çš„å€¼.å…¶ä¸­connectEndå¿…é¡»åŒ…æ‹¬å»ºç«‹è¿æ¥çš„æ—¶é—´ä»¥åŠ,SSHæ¡æ‰‹åè®®å’ŒSOCKSè®¤è¯ç­‰æ—¶é—´. .secureConnectionStartå¯é€‰ç‰¹æ€§.ç”¨æˆ·ä»£ç†å¦‚æœæ²¡æœ‰å¯¹åº”çš„ä¸œä¸œ,å°±è¦æŠŠè¿™ä¸ªè®¾ç½®ä¸ºundefined.å¦‚æœæœ‰è¿™ä¸ªä¸œä¸œ,å¹¶ä¸”æ˜¯HTTPSåè®®,é‚£ä¹ˆå°±è¦è¿”å›å¼€å§‹SSLæ¡æ‰‹çš„é‚£ä¸ªæ—¶é—´. å¦‚æœä¸æ˜¯HTTPS, é‚£ä¹ˆå°±è¿”å›0. è¡¥å……:Firefox7-10,IE9-IE10 PP2,éƒ½æœ¨æœ‰å®ç°è¿™ä¸ªapi.æ‰€ä»¥å§‹ç»ˆæ˜¯undefined. .requestStartè¿”å›ä»æœåŠ¡å™¨ã€ç¼“å­˜ã€æœ¬åœ°èµ„æºç­‰,å¼€å§‹è¯·æ±‚æ–‡æ¡£çš„æ—¶é—´. å¦‚æœè¯·æ±‚ä¸­é€”,è¿æ¥æ–­å¼€äº†,å¹¶ä¸”ç”¨æˆ·ä»£ç†è¿›è¡Œäº†é‡è¿ï¼Œå¹¶é‡æ–°è¯·æ±‚äº†èµ„æº,é‚£ä¹ˆrequestStartå°±å¿…é¡»ä¸ºè¿™ä¸ªæ–°è¯·æ±‚æ‰€å¯¹åº”çš„æ—¶é—´. performance.timing å¹¶ä¸åŒ…å«ä¸€ä¸ª å•è¡¨è¯·æ±‚ç»“æŸçš„â€requestEndâ€æ¥å£. åŸå› æœ‰ä¸¤ç‚¹: 1. ç”¨æˆ·ä»£ç†æ‰€èƒ½ç¡®å®šçš„è¯·æ±‚çš„ç»“æŸ,å¹¶ä¸èƒ½ä»£è¡¨æ­£ç¡®çš„ç½‘ç»œæ “ä¹¦ä¸­çš„ç»“æŸæ—¶é—´. æ‰€ä»¥è®¾è®¡è¿™ä¸ªå±æ€§å¹¶æ²¡ä»€ä¹ˆç”¨å¤„. 2. ä¸€äº›ç”¨æˆ·ä»£ç†ï¼Œå¦‚æœè¦å°è£…ä¸€ä¸ªä»£è¡¨HTTPå±‚é¢çš„ï¼Œè¯·æ±‚ç»“æŸæ—¶é—´çš„æ¥å£,æˆæœ¬ä¼šéå¸¸é«˜æ˜‚. bugs: 1. Firefox7,ç›´æ¥èµ°æœ¬åœ°ç¼“å­˜æ—¶,.requestStartçš„å€¼å°†ä¸º0. (Firefox8å·²ä¿®å¤æ­¤é—®é¢˜) .responseStartè¿”å›ç”¨æˆ·ä»£ç†ä»æœåŠ¡å™¨ã€ç¼“å­˜ã€æœ¬åœ°èµ„æºä¸­ï¼Œæ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚æ•°æ®çš„æ—¶é—´. .responseEndè¿”å›ç”¨æˆ·ä»£ç†æ¥æ”¶åˆ°æœ€åä¸€ä¸ªå­—ç¬¦çš„æ—¶é—´ï¼Œå’Œå½“å‰è¿æ¥è¢«å…³é—­çš„æ—¶é—´ä¸­ï¼Œæ›´æ—©çš„é‚£ä¸ª. åŒæ ·,æ–‡æ¡£å¯èƒ½æ¥è‡ªæœåŠ¡å™¨ã€ç¼“å­˜ã€æˆ–æœ¬åœ°èµ„æº. è¡¥å……: æ­¤å€¼çš„è¯»å–åº”è¯¥æ˜¯åœ¨æˆ‘ä»¬å¯ä»¥ç¡®ä¿çœŸçš„æ˜¯Responseç»“æŸä»¥å. æ¯”å¦‚window.onload. å› ä¸ºè€ƒè™‘åˆ°chunkedè¾“å‡ºçš„æƒ…å†µ. é‚£ä¹ˆæˆ‘ä»¬è„šæœ¬æ‰§è¡Œï¼Œå¹¶è·å–è¯¥å€¼æ—¶ï¼Œå“åº”è¿˜æ²¡æœ‰ç»“æŸ. è¿™å°±ä¼šå¯¼è‡´è·å–æ—¶é—´ä¸å‡†ç¡®. bugs : 1. IE10 PP2, ä»¥åŠChrome17- ï¼Œèµ°æœ¬åœ°ç¼“å­˜æ—¶.åœ¨æ–‡æ¡£ä¸­é—´çš„è„šæœ¬æ‰§è¡Œæ—¶å»è¯»å–æ­¤å€¼, å°†ä¸º0. IE9æœ¬æ¥æ²¡æœ‰é—®é¢˜,ç»“æœIE10 PP2,åå€’æœ‰äº†é—®é¢˜. 2. Chrome16-,(Chrome17,å·²ä¿®å¤æ­¤é—®é¢˜.)åœ¨åœ°å€æ è¾“å…¥ç›¸åŒåœ°å€,èµ°æœ¬åœ°ç¼“å­˜æ—¶. responseEndçš„æ—¶é—´ï¼Œå±…ç„¶æ—©äºresponseStartçš„æ—¶é—´. ï¼ˆä¸å¾—ä¸æ‰¿è®¤ï¼Œè¿™ç®€ç›´å°±æ˜¯å¥‡è‘©å•Š!ï¼‰ 3. Chrome17-,ä»é¡µé¢a,åˆ°åœ°å€b,å†é‡å®šå‘åˆ°åœ°å€c, æ­¤æ—¶å¦‚æœåœ°å€cæ˜¯èµ°ç¼“å­˜.åˆ™. ResponseEndçš„æ—¶é—´ï¼Œä¼šé­é‡ResponseStartçš„æ—¶é—´.(å¥½å§,æˆ‘ä»¬æŠŠå¸Œæœ›å¯„äºˆChrome18å¥½äº†.) å®ç°å·®å¼‚:(ç”±äºè‰æ¡ˆä¸­ï¼Œå¹¶æœªæåŠ,å½“æ–‡æ¡£è¢«åˆ†æ®µè¾“å‡ºå.åœ¨ä¸­é—´æ–‡æ¡£æ•°æ®ï¼Œæ¥å—è¿‡ç¨‹ä¸­,responseEndåº”å¦‚ä½•å¤„ç†,å¯¼è‡´æµè§ˆå™¨å®ç°å­˜åœ¨å·®å¼‚.) IE9 - IE10 PP2 , Firefox8-Firefox10,åœ¨ä¸èµ°å­˜åœ¨Responseé˜¶æ®µï¼ˆéèµ°cacheçš„æƒ…å†µä¸‹.ï¼‰.ä»¥æ¥æ”¶ç¬¬ä¸€ä¸ªchunkedåŒ…ç»“æŸçš„æ—¶é—´ä½œä¸º.responseEndçš„æ—¶é—´.(è¿™å°†å¯¼è‡´åç»­çš„ä¸€ç³»åˆ—é—®é¢˜.) Chrome17-,Firefox7,åˆ™åœ¨åˆ†æ®µæ•°æ®çš„æ¥å—è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šæ›´æ–°.responseEndçš„æ—¶é—´,å…¶å€¼,å§‹ç»ˆä¸º0.* .domLoadingè¿”å›ç”¨æˆ·ä»£ç†æŠŠå…¶æ–‡æ¡£çš„ â€œcurrent document readinessâ€ è®¾ç½®ä¸º â€œloadingâ€çš„æ—¶å€™. (current document readiness å…¶å®å°±æ˜¯document.readyState APIå¯¹åº”çš„çŠ¶æ€.) å‚è€ƒ:http://dev.w3.org/html5/spec/dom.html#current-document-readiness bugs : 1. IE9. åœ¨åˆ†æ®µè¾“å‡ºæ–‡æ¡£çš„æƒ…å†µä¸‹ï¼Œè¯¥å€¼æ€»æ˜¯è¦æ™šäºæœ€ç»ˆresponseEndçš„å€¼. åŸºäºresponseEndçš„IEå®ç°çš„bug.è¿™ä¹Ÿåˆæƒ…åˆç†. å®ç°å·®å¼‚: iE9 - IE10 PP2 , å½“æ–‡æ¡£æ˜¯chunkedæ–¹å¼è¾“å‡ºçš„æ—¶å€™.æ€»æ˜¯è¦ç­‰æœ€åä¸€ä¸ªchunkedè¢«æµè§ˆå™¨æ¥æ”¶å,domLoadingæ‰ä¼šæœ‰æœ‰æ•ˆå€¼. ä¹Ÿå°±æ˜¯è¯´,IEä¸­ç›®å‰çš„çŠ¶å†µæ˜¯.domLoading.æ— è®ºå¦‚ä½•ï¼Œéƒ½è¦æ™šäºresponseEnd.å…¶ä»–æµè§ˆå™¨åˆ™æ— æ­¤é—®é¢˜. ä½†æ˜¯è¿™ä¸ªé—®é¢˜å¯¼è‡´æˆ‘ä»¬è®¡ç®—IEä¸‹DOM Parseä¸å‡†ç¡®. å³ domInteractive - domLoading ç”šè‡³ä¼šç»å¸¸å¾—åˆ°0. .domInteractiveè¿”å›ç”¨æˆ·ä»£ç†æŠŠå…¶æ–‡æ¡£çš„ â€œcurrent document readinessâ€ è®¾ç½®ä¸º â€œinteractiveâ€çš„æ—¶å€™. ä»æ ‡å‡†æ¥è¯´,domReadyçš„çŠ¶æ€ä¸ºâ€interactiveâ€æ—¶,æ„å‘³ç€,æ–‡æ¡£è§£æç»“æŸäº†. å› ä¸ºæ ‡å‡†ä¸­æè¿°, DOMæ ‘åˆ›å»ºç»“æŸåç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯æŠŠ â€œcurrent document readinessâ€ è®¾ç½®ä¸ºâ€interactiveâ€ å‚è€ƒ:http://dev.w3.org/html5/spec/the-end.html#the-end ä¸­ç¬¬ä¸€æ­¥. bugs : 1. IE9,IE10 PP2 . åœ¨åˆ†æ®µè¾“å‡ºæ–‡æ¡£çš„æƒ…å†µä¸‹ï¼Œè¯¥å€¼å¹¶ä¸æ˜¯å…¨éƒ¨æ–‡æ¡£è§£æå®Œæˆåçš„æ—¶é—´,è€Œæ˜¯ç¬¬ä¸€ä¸ªæ•°æ®å—è¢«è§£æå®Œæˆçš„æ—¶é—´,åŸºäºresponseEndçš„IEå®ç°çš„bug.ç»è¿‡å‘åæ¨å®šè¿™ä¹Ÿåˆæƒ…åˆç†. å®ç°å·®å¼‚:(ç”±äºè‰æ¡ˆä¸­ï¼Œå¹¶æœªæåŠ,æ–‡æ¡£è§£æå¹¶æœªç»“æŸæ—¶,å…¶é»˜è®¤å€¼çš„åº”è¯¥æ˜¯å¤šå°‘.å¯¼è‡´æµè§ˆå™¨å®ç°æœ‰å·®å¼‚.) æŒ‰æˆ‘ä¸ªäººç†è§£ï¼Œå¹¶æœªè§£æç»“æŸï¼Œåº”è¯¥ä¸º0. ä½†æ˜¯IEä¼¼ä¹å¯¹è¿™ä¸ªä¸œè¥¿ç†è§£ä¸å¤ªä¸€æ ·. å…¶ä»–æµè§ˆå™¨ä¼šæ˜¯0. ä½†æ˜¯. IE9-IE10 PP2,åˆ™ä¼šæ¯”è¾ƒæœ‰è¶£.å³ä½¿æ˜¯åˆ†æ®µè¾“å‡º,æˆ‘å–åˆ°çš„å€¼.ä¹Ÿå’Œonloadä»¥åå»åˆ°çš„,domInteractiveçš„å€¼æ˜¯ä¸€è‡´çš„. å¯¼è‡´è¿™ä¸€ç¥å¥‡ç°è±¡çš„åŸå› æ˜¯,æ­£å¼IEç³»çš„bugæ‰€å¯¼. è¯¥æ—¶é—´æ˜¯é”™è¯¯çš„å¼•ç”¨äº†,DOMè§£æå®Œæˆç¬¬ä¸€ä¸ªæ•°æ®å—çš„æ—¶é—´.è€Œä¸æ˜¯æ•´ä¸ªæ–‡æ¡£çš„. ä½†æ˜¯çº ç»“èµ·æ¥å°±è¦æŒ–æ˜æ›´æ·±å±‚æ¬¡çš„åŸå› äº†. å› ä¸ºè‰æ¡ˆåªè¯´è¯¥å€¼ä½“ç°çš„æ˜¯,ç”¨æˆ·ä»£ç†æŠŠâ€current document readinessâ€ è®¾ç½®ä¸º â€œinteractiveâ€çš„æ—¶é—´.å¦‚æœIEç³»å¤„ç†åˆ†æ®µè¾“å‡ºçš„htmlæ–‡æ¡£ï¼Œå‘æ¥éƒ½æ˜¯è¿™æ ·åšçš„ã€‚é‚£ä¹ˆè¯¥å€¼ä¸å…¶ä»–æµè§ˆå™¨çš„å·®å¼‚ã€‚ä¹Ÿæ˜¯å¯ä»¥ç†è§£çš„. .domContentLoadedEventStartè¿”å›æ–‡æ¡£å‘ç”Ÿ DOMContentLoadedäº‹ä»¶çš„æ—¶é—´. å‚è€ƒ:http://dev.w3.org/html5/spec/the-end.html#the-end ä¸­ç¬¬4æ­¥.DOMContentLoadå’Œ DOMInteractive ä¹‹é—´å·®äº†ä¸¤ä¸ªæ­¥éª¤. å…¶ä¸­ä¹‹ä¸€æ˜¯, æ‰€æœ‰open elementså‡ºæ ˆ ï¼Œç„¶åå»çœ‹çœ‹ å¾…è¿è¡Œçš„script listä¸­æ˜¯å¦æœ‰éœ€è¦è¿è¡Œçš„è„šæœ¬,å¦‚æœæœ‰åˆ™æ‰§è¡Œï¼Œä¸€ç›´åˆ°è¿™ä¸ªåˆ—è¡¨ä¸ºç©ºäº†.å†è§¦å‘DOMContentLoad. éœ€è¦ä¸»çš„æ˜¯è¿™ä¸ªå¾…è¿è¡Œè„šæœ¬åˆ—è¡¨.æœ‰äº›å¯èƒ½åœ¨ä¸åŒæµè§ˆå™¨ä¸­ï¼Œè¢«åŠ å…¥è¿›å»çš„è¡Œä¸ºå¯èƒ½ä¸åŒ. æ¯”å¦‚ document.writeå†™å…¥æ–‡æ¡£æµçš„è„šæœ¬ï¼Œä»¥åŠscript deferr çš„è„šæœ¬.. æ‰€ä»¥æˆ‘ä»¬åº”è¯¥çŸ¥é“deferrçš„è„šæœ¬ä¹Ÿæ˜¯è¦ä»–æ¨è¿ŸdomContentLoadedçš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„æ‰€è°“domReady.(è‡³å°‘html5çš„è§„èŒƒæ˜¯å¦‚æ­¤.) .domContentLoadedEventEndæ–‡æ¡£çš„DOMContentLoaded äº‹ä»¶çš„ç»“æŸæ—¶é—´. è¡¥å……:æ‰€è°“äº‹ä»¶ç»“æŸçš„æ—¶é—´ï¼Œæ˜¯æŒ‡ï¼Œå¦‚æœDOMContentLoadedäº‹ä»¶è¢«å¼€å‘è€…æ³¨å†Œäº†å›è°ƒäº‹ä»¶.é‚£ä¹ˆè¿™ä¸ªæ—¶é—´çš„Endæ—¶é—´å‡å»Startçš„æ—¶é—´.å°±ä¼šæ˜¯è¿™ä¸ªå›è°ƒæ‰§è¡Œçš„å¤§æ¦‚äº‹ä»¶. å½“ç„¶å±…äºéƒ¨åˆ†æµè§ˆå™¨å®ç°å¯èƒ½ä¼šæœ‰2-3msçš„è¯¯å·®. ä½†æ˜¯è¿™ä¸ªæ—¶é—´ï¼ŒåŸºæœ¬å¯ä»¥å¿½ç•¥ä¸è®¡. ç±»ä¼¼çš„æƒ…å†µè¿˜æœ‰åé¢çš„.loadEventStart,End. å³ window.onload æ‰€æœ‰å›è°ƒæ‰€æ¶ˆè€—çš„æ—¶é—´. .domCompleteè¿”å›ç”¨æˆ·ä»£ç†æŠŠå…¶æ–‡æ¡£çš„ â€œcurrent document readinessâ€ è®¾ç½®ä¸º â€œcompleteâ€çš„æ—¶å€™. PS:å¦‚æœ current document readiness çš„æŸä¸ªçŠ¶æ€è¢«å¤šæ¬¡è§¦å‘ï¼Œé‚£ä¹ˆå¯¹åº”çš„ domLoading, domInteractive, domContentLoadedEventStart, domContentLoadedEventEnd and domCompleteè¿™äº›å¯¹åº”çš„APIè¿”å›çš„æ—¶é—´,å°±åº”è¯¥æ˜¯è¿™ä¸ªçŠ¶æ€ç¬¬ä¸€æ¬¡è§¦å‘çš„æ—¶é—´. .loadEventStartæ–‡æ¡£è§¦å‘loadäº‹ä»¶çš„æ—¶é—´. å¦‚æœloadäº‹ä»¶æ²¡æœ‰è§¦å‘,é‚£ä¹ˆè¯¥æ¥å£å°±è¿”å›0. ç¼“å­˜ï¼š1ã€æµè§ˆå™¨ç¼“å­˜2ã€æ“ä½œç³»ç»Ÿç¼“å­˜3ã€è·¯ç”±å™¨ç¼“å­˜4ã€è¿è¥å•†ç¼“å­˜ åŸæ–‡åœ°å€ï¼šğŸ‘‰ https://github.com/ChenChenJoke/JokerWebFont/blob/master/Performance/README.md æ„Ÿè°¢ã€‚ å…³äºGitHubï¼šğŸ‘‰https://github.com/microzz","tags":[{"name":"Chrome","slug":"Chrome","permalink":"https://microzz.com/tags/Chrome/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"æ€§èƒ½ä¼˜åŒ–","permalink":"https://microzz.com/tags/æ€§èƒ½ä¼˜åŒ–/"},{"name":"Web","slug":"Web","permalink":"https://microzz.com/tags/Web/"}]},{"title":"Vue.js+Socket.io+Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤","date":"2017-05-10T13:22:03.000Z","path":"2017/05/10/vuechat/","text":"Vue.js+Socket.io+Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤Vue.jså…¨å®¶æ¡¶+Socket.io+Express/Koa2 æ‰“é€ çš„ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤ã€‚å·²ç»å¼€æºå•¦ï¼ä¸ºäº†æ–¹ä¾¿å¤§å®¶å­¦ä¹ ï¼Œæ™ºèƒ½æœºå™¨äººã€IPå®šä½æ¥å£ä¹Ÿå¼€æ”¾äº†ï¼æ¥å£è¯·åœ¨æºç ä¸­æŸ¥çœ‹ğŸ˜„ &nbsp;&nbsp;&nbsp;QQç¾¤é‡Œé¢çš„æ™ºèƒ½æœºå™¨äººå¾ˆç«ï¼Œäºæ˜¯ç”¨Vue.js+Socket.io+Koa2æ‰“é€ äº†ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤ï¼Œå®ç°äº†IPå®šä½ã€åœ¨çº¿ç¾¤èŠï¼ŒåŠ å…¥äº†Emojiè¡¨æƒ…ğŸ˜„ï¼Œä»¥åŠæ¥å…¥äº†æ™ºèƒ½æœºå™¨äººğŸ˜ å‰è¨€è¯è¯´æœ€è¿‘å‰ç«¯æŠ€æœ¯åœˆä¹Ÿæœ‰æ´¾ç³»ä¹‹äº‰äº†ï¼Œæ˜¯å¥½äº‹è¿˜æ˜¯åäº‹ï¼Ÿèåœé’èœå„æœ‰æ‰€çˆ±ï¼Œæœ¬é¡¹ç›®é‡‡ç”¨çš„æ˜¯Vue.jsåšå‰ç«¯é¡µé¢å±•ç¤ºï¼Œå¤§å®¶å®Œå…¨å¯ä»¥æ¢æˆè‡ªå·±åˆ«çš„å–œæ¬¢çš„ï¼ŒReactã€Angularç­‰ç­‰ï¼Œæ¯ä¸ªæ¡†æ¶éƒ½æœ‰å¯å–çš„åœ°æ–¹ï¼Œè¿™é‡Œä¸å¤šè¯´ğŸ˜‚ä¸‹é¢æ‰¯åˆ°æ­£é¢˜ä¸ŠğŸ‘‡ é¢„è§ˆåœ¨çº¿é¢„è§ˆåœ°å€ï¼šğŸ‘‰ https://microzz.com/vue-chat/ Vue.js+Socket.io Vue.js+Socket.io æºä»£ç  ç°åœ¨å·²ç»å¼€æºï¼š ğŸ‘‰https://github.com/microzz/vue-chat æ¬¢è¿starå’Œæå‡ºå®è´µæ„è§ğŸ˜„ æŠ€æœ¯æ ˆ Vue2.0ï¼šå‰ç«¯é¡µé¢å±•ç¤ºã€‚ Socket.ioï¼šå®ç°å®æ—¶é€šä¿¡ Vuexï¼šVuexï¼Œå®ç°ä¸åŒç»„ä»¶é—´çš„çŠ¶æ€å…±äº« vue-routerï¼šé¡µé¢è·¯ç”±åˆ‡æ¢ axiosï¼šä¸€ä¸ªåŸºäº Promise çš„ HTTP åº“ï¼Œå‘åç«¯å‘èµ·è¯·æ±‚ã€‚ Expressã€Koa2ï¼šå› ä¸ºvue-cliç”Ÿæˆçš„é¡¹ç›®æ˜¯åŸºäºexpressçš„ï¼Œæ‰€ä»¥åœ¨å¼€å‘é˜¶æ®µæˆ‘ä½¿ç”¨çš„æ˜¯å®ƒï¼Œä½†æ˜¯çœŸæ­£ä¸Šçº¿ç”Ÿäº§ç¯å¢ƒæˆ‘æ¢æˆäº†Koa2ã€‚ Moment.jsï¼šä¸€ä¸ªæ—¶é—´å¤„ç†çš„åº“ï¼Œæ–¹ä¾¿å¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–æˆéœ€è¦çš„æ ¼å¼ã€‚ ES6ã€ES7ï¼šé‡‡ç”¨ES6è¯­æ³•ï¼Œè¿™æ˜¯ä»¥åçš„è¶‹åŠ¿ã€‚ç®­å¤´å‡½æ•°ã€Promiseç­‰ç­‰è¯­æ³•å¾ˆå¥½ç”¨ã€‚ localStorageï¼šä¿å­˜ç”¨æˆ·ä¿¡æ¯ä»¥åŠèŠå¤©è®°å½•ã€‚ Webpackï¼švue-cliè‡ªå¸¦Webpackï¼Œä½†æ˜¯éœ€è¦è‡ªå·±æ”¹é€ ä¸€ä¸‹ï¼Œæ¯”å¦‚è¦å¯¹éœ€è¦å®‰è£…sassç›¸å…³loaderï¼Œvue-cliå·²ç»é…ç½®å¥½äº†webpackï¼Œä½ åªéœ€è¦å®‰è£…ä¾èµ–å°±å¯ä»¥ï¼Œä½¿ç”¨çš„æ—¶å€™åªéœ€è¦&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;ã€‚ SASS(SCSS)ï¼šç”¨SCSSåšCSSé¢„å¤„ç†è¯­è¨€ï¼Œæœ‰äº›åœ°æ–¹å¾ˆæ–¹ä¾¿ï¼Œä¸ªäººå¾ˆå–œæ¬¢ç”¨ã€‚(è¯¦çœ‹ğŸ‘‰SASSç”¨æ³•æŒ‡å—) flexï¼šflexå¼¹æ€§å¸ƒå±€ï¼Œç®€å•é€‚é…æ‰‹æœºã€PCç«¯ã€‚ CSS3ï¼šCSS3è¿‡æ¸¡åŠ¨ç”»åŠæ ·å¼ã€‚ åˆ†æSocket.ioé€šè¿‡Express/Koaåœ¨æœåŠ¡ç«¯å¯ä»¥è¿™æ ·åš: // Server (app.js) var app = require(&#39;express&#39;)(); var server = require(&#39;http&#39;).Server(app); var io = require(&#39;socket.io&#39;)(server); server.listen(80); app.get(&#39;/&#39;, function (req, res) { res.sendfile(__dirname + &#39;/index.html&#39;); }); io.on(&#39;connection&#39;, function (socket) { socket.emit(&#39;news&#39;, { hello: &#39;world&#39; }); socket.on(&#39;my other event&#39;, function (data) { console.log(data); }); }); å®¢æˆ·ç«¯ä»£ç  // Client (index.html) &lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var socket = io.connect(&#39;http://localhost&#39;); socket.on(&#39;news&#39;, function (data) { console.log(data); socket.emit(&#39;my other event&#39;, { my: &#39;data&#39; }); }); &lt;/script&gt; ä¸ç®¡æ˜¯æœåŠ¡å™¨è¿˜æ˜¯å®¢æˆ·ç«¯éƒ½æœ‰ emit å’Œ on è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå¯ä»¥è¯´ socket.io çš„æ ¸å¿ƒå°±æ˜¯è¿™ä¸¤ä¸ªå‡½æ•°äº†ï¼Œé€šè¿‡ emit å’Œ on å¯ä»¥è½»æ¾åœ°å®ç°æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„åŒå‘é€šä¿¡ã€‚ emit ï¼šç”¨æ¥å‘å°„ä¸€ä¸ªäº‹ä»¶æˆ–è€…è¯´è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºäº‹ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦å‘é€çš„æ•°æ®ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼ˆä¸€èˆ¬çœç•¥ï¼Œå¦‚éœ€å¯¹æ–¹æ¥å—åˆ°ä¿¡æ¯åç«‹å³å¾—åˆ°ç¡®è®¤æ—¶ï¼Œåˆ™éœ€è¦ç”¨åˆ°å›è°ƒå‡½æ•°ï¼‰ã€‚on ï¼šç”¨æ¥ç›‘å¬ä¸€ä¸ª emit å‘å°„çš„äº‹ä»¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦ç›‘å¬çš„äº‹ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªåŒ¿åå‡½æ•°ç”¨æ¥æ¥æ”¶å¯¹æ–¹å‘æ¥çš„æ•°æ®ï¼Œè¯¥åŒ¿åå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¥æ”¶çš„æ•°æ®ï¼Œè‹¥æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ä¸ºè¦è¿”å›çš„å‡½æ•°ã€‚socket.io æä¾›äº†ä¸‰ç§é»˜è®¤çš„äº‹ä»¶ï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½æœ‰ï¼‰ï¼šconnect ã€message ã€disconnect ã€‚å½“ä¸å¯¹æ–¹å»ºç«‹è¿æ¥åè‡ªåŠ¨è§¦å‘ connect äº‹ä»¶ï¼Œå½“æ”¶åˆ°å¯¹æ–¹å‘æ¥çš„æ•°æ®åè§¦å‘ message äº‹ä»¶ï¼ˆé€šå¸¸ä¸º socket.send() è§¦å‘ï¼‰ï¼Œå½“å¯¹æ–¹å…³é—­è¿æ¥åè§¦å‘ disconnect äº‹ä»¶ã€‚ æ­¤å¤–ï¼Œsocket.io è¿˜æ”¯æŒè‡ªå®šä¹‰äº‹ä»¶ï¼Œæ¯•ç«Ÿä»¥ä¸Šä¸‰ç§äº‹ä»¶åº”ç”¨èŒƒå›´æœ‰é™ï¼Œæ­£æ˜¯é€šè¿‡è¿™äº›è‡ªå®šä¹‰çš„äº‹ä»¶æ‰å®ç°äº†ä¸°å¯Œå¤šå½©çš„é€šä¿¡ã€‚ æœ€åï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æœåŠ¡å™¨ç«¯åŒºåˆ†ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š socket.emit() ï¼šå‘å»ºç«‹è¯¥è¿æ¥çš„å®¢æˆ·ç«¯å¹¿æ’­socket.broadcast.emit() ï¼šå‘é™¤å»å»ºç«‹è¯¥è¿æ¥çš„å®¢æˆ·ç«¯çš„æ‰€æœ‰å®¢æˆ·ç«¯å¹¿æ’­io.sockets.emit() ï¼šå‘æ‰€æœ‰å®¢æˆ·ç«¯å¹¿æ’­ï¼Œç­‰åŒäºä¸Šé¢ä¸¤ä¸ªçš„å’Œ Vue.jsåœ¨Vueçš„æ–¹é¢å°±æ¯”è¾ƒå¸¸è§„äº†ï¼ŒVueå…¨å®¶æ¡¶ï¼šVue2.0+Vuex+axios+vue-router,æˆ‘GitHubçš„æœ‰å‡ ä¸ªå¼€æºé¡¹ç›®å¯ä»¥å‚è€ƒğŸ‘‰https://github.com/microzz æ€»ç»“ ç»„ä»¶çŠ¶æ€å¤šäº†ç”¨Vuexç®¡ç†å¾ˆæ–¹ä¾¿ï¼Œå¼•ç”¨ Redux çš„ä½œè€… Dan Abramov çš„è¯è¯´å°±æ˜¯ï¼š Flux æ¶æ„å°±åƒçœ¼é•œï¼šæ‚¨è‡ªä¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å®ƒã€‚ äº‹å…ˆä¸€å®šè¦å…ˆæƒ³å¥½æ•´ä¸ªé¡µé¢ç»„æˆï¼Œæ€æ ·å»åˆ†ç»„ä»¶å¼€å‘ï¼Œè¿™æ ·åœ¨å¼€å‘é˜¶æ®µä¼šäº‹åŠåŠŸå€ã€‚ Moment.jsåœ¨Vueä¸­ç”¨ES6çš„æ–¹å¼å¼•å…¥ä¼šæœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•åœ¨main.jså°è¯•è¿™æ ·import moment from &#39;moment&#39; Vue.prototype.moment = moment;ç»™Vueçš„åŸå‹ä¸Šæ·»åŠ momentï¼Œè¿™æ ·å°±å¯ä»¥åœ¨Vueçš„å®ä¾‹ä¸­éšæ„ä½¿ç”¨å®ƒäº†ã€‚ getæ–¹å¼é€šè¿‡URLä¼ å‚æœ€å¥½ä½¿ç”¨encodeURIå¯¹å‚æ•°è¿›è¡Œç¼–ç  ä¸€å®šè¦å¤„ç†å¥½é‚£äº›å¼‚æ­¥æ“ä½œï¼Œå¦åˆ™ä¼šå¸¦æ¥å„ç§é—®é¢˜ã€‚å¼€å‘é˜¶æ®µä½¿ç”¨çš„æ˜¯Promiseï¼Œä¸Šçº¿æ—¶å€™ä½¿ç”¨äº†ES7çš„Async+Promiseçš„ç»„åˆï¼Œè®©å¼‚æ­¥æ“ä½œæ›´åŠ åˆç†ã€‚ Aboutå…³äºæˆ‘ï¼šğŸ‘‰https://microzz.com/about/ GitHubï¼šğŸ‘‰ https://github.com/microzz E-mail: ğŸ‘‰ zhaohui@microzz.com","tags":[{"name":"Vue.js","slug":"Vue-js","permalink":"https://microzz.com/tags/Vue-js/"},{"name":"Koa2","slug":"Koa2","permalink":"https://microzz.com/tags/Koa2/"},{"name":"Socket.io","slug":"Socket-io","permalink":"https://microzz.com/tags/Socket-io/"},{"name":"Vuex","slug":"Vuex","permalink":"https://microzz.com/tags/Vuex/"},{"name":"Express","slug":"Express","permalink":"https://microzz.com/tags/Express/"}]},{"title":"Gitè¿œç¨‹æ“ä½œè¯¦è§£","date":"2017-05-06T12:41:07.000Z","path":"2017/05/06/git/","text":"Gitè¿œç¨‹æ“ä½œè¯¦è§£ä½œè€…ï¼š é˜®ä¸€å³° Gitæ˜¯ç›®å‰æœ€æµè¡Œçš„ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œå­¦ä¼šGitå‡ ä¹æˆäº†å¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚Gitæœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯è¿œç¨‹æ“ä½œéå¸¸ç®€ä¾¿ã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»5ä¸ªGitå‘½ä»¤ï¼Œå®ƒä»¬çš„æ¦‚å¿µå’Œç”¨æ³•ï¼Œç†è§£äº†è¿™äº›å†…å®¹ï¼Œä½ å°±ä¼šå®Œå…¨æŒæ¡Gitè¿œç¨‹æ“ä½œã€‚git cloneã€git remoteã€git fetchã€git pullã€git push æœ¬æ–‡é’ˆå¯¹åˆçº§ç”¨æˆ·ï¼Œä»æœ€ç®€å•çš„è®²èµ·ï¼Œä½†æ˜¯éœ€è¦è¯»è€…å¯¹Gitçš„åŸºæœ¬ç”¨æ³•æœ‰æ‰€äº†è§£ã€‚åŒæ—¶ï¼Œæœ¬æ–‡è¦†ç›–äº†ä¸Šé¢5ä¸ªå‘½ä»¤çš„å‡ ä¹æ‰€æœ‰çš„å¸¸ç”¨ç”¨æ³•ï¼Œæ‰€ä»¥å¯¹äºç†Ÿç»ƒç”¨æˆ·ä¹Ÿæœ‰å‚è€ƒä»·å€¼ã€‚ Git git cloneè¿œç¨‹æ“ä½œçš„ç¬¬ä¸€æ­¥ï¼Œé€šå¸¸æ˜¯ä»è¿œç¨‹ä¸»æœºå…‹éš†ä¸€ä¸ªç‰ˆæœ¬åº“ï¼Œè¿™æ—¶å°±è¦ç”¨åˆ°git cloneå‘½ä»¤ã€‚ $ git clone &lt;ç‰ˆæœ¬åº“çš„ç½‘å€&gt; æ¯”å¦‚ï¼Œå…‹éš†jQueryçš„ç‰ˆæœ¬åº“ã€‚ $ git clone https://github.com/jquery/jquery.git è¯¥å‘½ä»¤ä¼šåœ¨æœ¬åœ°ä¸»æœºç”Ÿæˆä¸€ä¸ªç›®å½•ï¼Œä¸è¿œç¨‹ä¸»æœºçš„ç‰ˆæœ¬åº“åŒåã€‚å¦‚æœè¦æŒ‡å®šä¸åŒçš„ç›®å½•åï¼Œå¯ä»¥å°†ç›®å½•åä½œä¸ºgit cloneå‘½ä»¤çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚ $ git clone &lt;ç‰ˆæœ¬åº“çš„ç½‘å€&gt; &lt;æœ¬åœ°ç›®å½•å&gt;git cloneæ”¯æŒå¤šç§åè®®ï¼Œé™¤äº†HTTP(s)ä»¥å¤–ï¼Œè¿˜æ”¯æŒSSHã€Gitã€æœ¬åœ°æ–‡ä»¶åè®®ç­‰ï¼Œä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ã€‚ $ git clone http[s]://example.com/path/to/repo.git/ $ git clone ssh://example.com/path/to/repo.git/ $ git clone git://example.com/path/to/repo.git/ $ git clone /opt/git/project.git $ git clone file:///opt/git/project.git $ git clone ftp[s]://example.com/path/to/repo.git/ $ git clone rsync://example.com/path/to/repo.git/ SSHåè®®è¿˜æœ‰å¦ä¸€ç§å†™æ³•ã€‚ $ git clone [user@]example.com:path/to/repo.git/ é€šå¸¸æ¥è¯´ï¼ŒGitåè®®ä¸‹è½½é€Ÿåº¦æœ€å¿«ï¼ŒSSHåè®®ç”¨äºéœ€è¦ç”¨æˆ·è®¤è¯çš„åœºåˆã€‚å„ç§åè®®ä¼˜åŠ£çš„è¯¦ç»†è®¨è®ºè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ git remoteä¸ºäº†ä¾¿äºç®¡ç†ï¼ŒGitè¦æ±‚æ¯ä¸ªè¿œç¨‹ä¸»æœºéƒ½å¿…é¡»æŒ‡å®šä¸€ä¸ªä¸»æœºåã€‚git remoteå‘½ä»¤å°±ç”¨äºç®¡ç†ä¸»æœºåã€‚ä¸å¸¦é€‰é¡¹çš„æ—¶å€™ï¼Œgit remoteå‘½ä»¤åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä¸»æœºã€‚ $ git remote origin ä½¿ç”¨-vé€‰é¡¹ï¼Œå¯ä»¥å‚çœ‹è¿œç¨‹ä¸»æœºçš„ç½‘å€ã€‚ $ git remote -v origin git@github.com:jquery/jquery.git (fetch) origin git@github.com:jquery/jquery.git (push) ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå½“å‰åªæœ‰ä¸€å°è¿œç¨‹ä¸»æœºï¼Œå«åšoriginï¼Œä»¥åŠå®ƒçš„ç½‘å€ã€‚å…‹éš†ç‰ˆæœ¬åº“çš„æ—¶å€™ï¼Œæ‰€ä½¿ç”¨çš„è¿œç¨‹ä¸»æœºè‡ªåŠ¨è¢«Gitå‘½åä¸ºoriginã€‚å¦‚æœæƒ³ç”¨å…¶ä»–çš„ä¸»æœºåï¼Œéœ€è¦ç”¨git cloneå‘½ä»¤çš„-oé€‰é¡¹æŒ‡å®šã€‚ $ git clone -o jQuery https://github.com/jquery/jquery.git $ git remote jQuery ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå…‹éš†çš„æ—¶å€™ï¼ŒæŒ‡å®šè¿œç¨‹ä¸»æœºå«åšjQueryã€‚git remote showå‘½ä»¤åŠ ä¸Šä¸»æœºåï¼Œå¯ä»¥æŸ¥çœ‹è¯¥ä¸»æœºçš„è¯¦ç»†ä¿¡æ¯ã€‚ $ git remote show &lt;ä¸»æœºå&gt; git remote addå‘½ä»¤ç”¨äºæ·»åŠ è¿œç¨‹ä¸»æœºã€‚ $ git remote add &lt;ä¸»æœºå&gt; &lt;ç½‘å€&gt; git remote rmå‘½ä»¤ç”¨äºåˆ é™¤è¿œç¨‹ä¸»æœºã€‚ $ git remote rm &lt;ä¸»æœºå&gt; git remote renameå‘½ä»¤ç”¨äºè¿œç¨‹ä¸»æœºçš„æ”¹åã€‚ $ git remote rename &lt;åŸä¸»æœºå&gt; &lt;æ–°ä¸»æœºå&gt; git fetchä¸€æ—¦è¿œç¨‹ä¸»æœºçš„ç‰ˆæœ¬åº“æœ‰äº†æ›´æ–°ï¼ˆGitæœ¯è¯­å«åšcommitï¼‰ï¼Œéœ€è¦å°†è¿™äº›æ›´æ–°å–å›æœ¬åœ°ï¼Œè¿™æ—¶å°±è¦ç”¨åˆ°git fetchå‘½ä»¤ã€‚ $ git fetch &lt;è¿œç¨‹ä¸»æœºå&gt;ä¸Šé¢å‘½ä»¤å°†æŸä¸ªè¿œç¨‹ä¸»æœºçš„æ›´æ–°ï¼Œå…¨éƒ¨å–å›æœ¬åœ°ã€‚git fetchå‘½ä»¤é€šå¸¸ç”¨æ¥æŸ¥çœ‹å…¶ä»–äººçš„è¿›ç¨‹ï¼Œå› ä¸ºå®ƒå–å›çš„ä»£ç å¯¹ä½ æœ¬åœ°çš„å¼€å‘ä»£ç æ²¡æœ‰å½±å“ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œgit fetchå–å›æ‰€æœ‰åˆ†æ”¯ï¼ˆbranchï¼‰çš„æ›´æ–°ã€‚å¦‚æœåªæƒ³å–å›ç‰¹å®šåˆ†æ”¯çš„æ›´æ–°ï¼Œå¯ä»¥æŒ‡å®šåˆ†æ”¯åã€‚ $ git fetch &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;åˆ†æ”¯å&gt;æ¯”å¦‚ï¼Œå–å›originä¸»æœºçš„masteråˆ†æ”¯ã€‚ $ git fetch origin masteræ‰€å–å›çš„æ›´æ–°ï¼Œåœ¨æœ¬åœ°ä¸»æœºä¸Šè¦ç”¨â€è¿œç¨‹ä¸»æœºå/åˆ†æ”¯åâ€çš„å½¢å¼è¯»å–ã€‚æ¯”å¦‚originä¸»æœºçš„masterï¼Œå°±è¦ç”¨origin/masterè¯»å–ã€‚git branchå‘½ä»¤çš„-ré€‰é¡¹ï¼Œå¯ä»¥ç”¨æ¥æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ï¼Œ-aé€‰é¡¹æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ã€‚ $ git branch -r origin/master $ git branch -a * master remotes/origin/master ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œæœ¬åœ°ä¸»æœºçš„å½“å‰åˆ†æ”¯æ˜¯masterï¼Œè¿œç¨‹åˆ†æ”¯æ˜¯origin/masterã€‚å–å›è¿œç¨‹ä¸»æœºçš„æ›´æ–°ä»¥åï¼Œå¯ä»¥åœ¨å®ƒçš„åŸºç¡€ä¸Šï¼Œä½¿ç”¨git checkoutå‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ã€‚ $ git checkout -b newBrach origin/masterä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œåœ¨origin/masterçš„åŸºç¡€ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ã€‚æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨git mergeå‘½ä»¤æˆ–è€…git rebaseå‘½ä»¤ï¼Œåœ¨æœ¬åœ°åˆ†æ”¯ä¸Šåˆå¹¶è¿œç¨‹åˆ†æ”¯ã€‚ $ git merge origin/master æˆ–è€…$ git rebase origin/masterä¸Šé¢å‘½ä»¤è¡¨ç¤ºåœ¨å½“å‰åˆ†æ”¯ä¸Šï¼Œåˆå¹¶origin/masterã€‚ git pullgit pullå‘½ä»¤çš„ä½œç”¨æ˜¯ï¼Œå–å›è¿œç¨‹ä¸»æœºæŸä¸ªåˆ†æ”¯çš„æ›´æ–°ï¼Œå†ä¸æœ¬åœ°çš„æŒ‡å®šåˆ†æ”¯åˆå¹¶ã€‚å®ƒçš„å®Œæ•´æ ¼å¼ç¨ç¨æœ‰ç‚¹å¤æ‚ã€‚ $ git pull &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt;æ¯”å¦‚ï¼Œå–å›originä¸»æœºçš„nextåˆ†æ”¯ï¼Œä¸æœ¬åœ°çš„masteråˆ†æ”¯åˆå¹¶ï¼Œéœ€è¦å†™æˆä¸‹é¢è¿™æ ·ã€‚ $ git pull origin next:masterå¦‚æœè¿œç¨‹åˆ†æ”¯æ˜¯ä¸å½“å‰åˆ†æ”¯åˆå¹¶ï¼Œåˆ™å†’å·åé¢çš„éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚ $ git pull origin nextä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå–å›origin/nextåˆ†æ”¯ï¼Œå†ä¸å½“å‰åˆ†æ”¯åˆå¹¶ã€‚å®è´¨ä¸Šï¼Œè¿™ç­‰åŒäºå…ˆåšgit fetchï¼Œå†åšgit mergeã€‚ $ git fetch origin$ git merge origin/next åœ¨æŸäº›åœºåˆï¼ŒGitä¼šè‡ªåŠ¨åœ¨æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¹‹é—´ï¼Œå»ºç«‹ä¸€ç§è¿½è¸ªå…³ç³»ï¼ˆtrackingï¼‰ã€‚æ¯”å¦‚ï¼Œåœ¨git cloneçš„æ—¶å€™ï¼Œæ‰€æœ‰æœ¬åœ°åˆ†æ”¯é»˜è®¤ä¸è¿œç¨‹ä¸»æœºçš„åŒååˆ†æ”¯ï¼Œå»ºç«‹è¿½è¸ªå…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬åœ°çš„masteråˆ†æ”¯è‡ªåŠ¨â€è¿½è¸ªâ€origin/masteråˆ†æ”¯ã€‚Gitä¹Ÿå…è®¸æ‰‹åŠ¨å»ºç«‹è¿½è¸ªå…³ç³»ã€‚ git branch --set-upstream master origin/nextä¸Šé¢å‘½ä»¤æŒ‡å®šmasteråˆ†æ”¯è¿½è¸ªorigin/nextåˆ†æ”¯ã€‚å¦‚æœå½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œgit pullå°±å¯ä»¥çœç•¥è¿œç¨‹åˆ†æ”¯åã€‚ $ git pull originä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œæœ¬åœ°çš„å½“å‰åˆ†æ”¯è‡ªåŠ¨ä¸å¯¹åº”çš„originä¸»æœºâ€è¿½è¸ªåˆ†æ”¯â€ï¼ˆremote-tracking branchï¼‰è¿›è¡Œåˆå¹¶ã€‚å¦‚æœå½“å‰åˆ†æ”¯åªæœ‰ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯ï¼Œè¿è¿œç¨‹ä¸»æœºåéƒ½å¯ä»¥çœç•¥ã€‚ $ git pullä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå½“å‰åˆ†æ”¯è‡ªåŠ¨ä¸å”¯ä¸€ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯è¿›è¡Œåˆå¹¶ã€‚å¦‚æœåˆå¹¶éœ€è¦é‡‡ç”¨rebaseæ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨â€“rebaseé€‰é¡¹ã€‚ $ git pull --rebase &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt;å¦‚æœè¿œç¨‹ä¸»æœºåˆ é™¤äº†æŸä¸ªåˆ†æ”¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œgit pull ä¸ä¼šåœ¨æ‹‰å–è¿œç¨‹åˆ†æ”¯çš„æ—¶å€™ï¼Œåˆ é™¤å¯¹åº”çš„æœ¬åœ°åˆ†æ”¯ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢ï¼Œç”±äºå…¶ä»–äººæ“ä½œäº†è¿œç¨‹ä¸»æœºï¼Œå¯¼è‡´git pullä¸çŸ¥ä¸è§‰åˆ é™¤äº†æœ¬åœ°åˆ†æ”¯ã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥æ”¹å˜è¿™ä¸ªè¡Œä¸ºï¼ŒåŠ ä¸Šå‚æ•° -p å°±ä¼šåœ¨æœ¬åœ°åˆ é™¤è¿œç¨‹å·²ç»åˆ é™¤çš„åˆ†æ”¯ã€‚ $ git pull -p ç­‰åŒäºä¸‹é¢çš„å‘½ä»¤$ git fetch --prune origin$ git fetch -p git pushgit pushå‘½ä»¤ç”¨äºå°†æœ¬åœ°åˆ†æ”¯çš„æ›´æ–°ï¼Œæ¨é€åˆ°è¿œç¨‹ä¸»æœºã€‚å®ƒçš„æ ¼å¼ä¸git pullå‘½ä»¤ç›¸ä»¿ã€‚ $ git push &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt;æ³¨æ„ï¼Œåˆ†æ”¯æ¨é€é¡ºåºçš„å†™æ³•æ˜¯&lt;æ¥æºåœ°&gt;:&lt;ç›®çš„åœ°&gt;ï¼Œæ‰€ä»¥git pullæ˜¯&lt;è¿œç¨‹åˆ†æ”¯&gt;:&lt;æœ¬åœ°åˆ†æ”¯&gt;ï¼Œè€Œgit pushæ˜¯&lt;æœ¬åœ°åˆ†æ”¯&gt;:&lt;è¿œç¨‹åˆ†æ”¯&gt;ã€‚å¦‚æœçœç•¥è¿œç¨‹åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºå°†æœ¬åœ°åˆ†æ”¯æ¨é€ä¸ä¹‹å­˜åœ¨â€è¿½è¸ªå…³ç³»â€çš„è¿œç¨‹åˆ†æ”¯ï¼ˆé€šå¸¸ä¸¤è€…åŒåï¼‰ï¼Œå¦‚æœè¯¥è¿œç¨‹åˆ†æ”¯ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚ $ git push origin masterä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°originä¸»æœºçš„masteråˆ†æ”¯ã€‚å¦‚æœåè€…ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚å¦‚æœçœç•¥æœ¬åœ°åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºåˆ é™¤æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ï¼Œå› ä¸ºè¿™ç­‰åŒäºæ¨é€ä¸€ä¸ªç©ºçš„æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹åˆ†æ”¯ã€‚ $ git push origin :masterç­‰åŒäº$ git push origin --delete masterä¸Šé¢å‘½ä»¤è¡¨ç¤ºåˆ é™¤originä¸»æœºçš„masteråˆ†æ”¯ã€‚å¦‚æœå½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¹‹é—´å­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œåˆ™æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯éƒ½å¯ä»¥çœç•¥ã€‚ $ git push originä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†å½“å‰åˆ†æ”¯æ¨é€åˆ°originä¸»æœºçš„å¯¹åº”åˆ†æ”¯ã€‚å¦‚æœå½“å‰åˆ†æ”¯åªæœ‰ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆä¸»æœºåéƒ½å¯ä»¥çœç•¥ã€‚ $ git pushå¦‚æœå½“å‰åˆ†æ”¯ä¸å¤šä¸ªä¸»æœºå­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œåˆ™å¯ä»¥ä½¿ç”¨-ué€‰é¡¹æŒ‡å®šä¸€ä¸ªé»˜è®¤ä¸»æœºï¼Œè¿™æ ·åé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨git pushã€‚ $ git push -u origin masterä¸Šé¢å‘½ä»¤å°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°originä¸»æœºï¼ŒåŒæ—¶æŒ‡å®šoriginä¸ºé»˜è®¤ä¸»æœºï¼Œåé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨git pushäº†ã€‚ä¸å¸¦ä»»ä½•å‚æ•°çš„git pushï¼Œé»˜è®¤åªæ¨é€å½“å‰åˆ†æ”¯ï¼Œè¿™å«åšsimpleæ–¹å¼ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§matchingæ–¹å¼ï¼Œä¼šæ¨é€æ‰€æœ‰æœ‰å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯çš„æœ¬åœ°åˆ†æ”¯ã€‚Git 2.0ç‰ˆæœ¬ä¹‹å‰ï¼Œé»˜è®¤é‡‡ç”¨matchingæ–¹æ³•ï¼Œç°åœ¨æ”¹ä¸ºé»˜è®¤é‡‡ç”¨simpleæ–¹å¼ã€‚å¦‚æœè¦ä¿®æ”¹è¿™ä¸ªè®¾ç½®ï¼Œå¯ä»¥é‡‡ç”¨git configå‘½ä»¤ã€‚ $ git config --global push.default matching æˆ–è€…$ git config --global push.default simpleè¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯ä¸ç®¡æ˜¯å¦å­˜åœ¨å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯ï¼Œå°†æœ¬åœ°çš„æ‰€æœ‰åˆ†æ”¯éƒ½æ¨é€åˆ°è¿œç¨‹ä¸»æœºï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨â€“allé€‰é¡¹ã€‚ $ git push --all originä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†æ‰€æœ‰æœ¬åœ°åˆ†æ”¯éƒ½æ¨é€åˆ°originä¸»æœºã€‚å¦‚æœè¿œç¨‹ä¸»æœºçš„ç‰ˆæœ¬æ¯”æœ¬åœ°ç‰ˆæœ¬æ›´æ–°ï¼Œæ¨é€æ—¶Gitä¼šæŠ¥é”™ï¼Œè¦æ±‚å…ˆåœ¨æœ¬åœ°åšgit pullåˆå¹¶å·®å¼‚ï¼Œç„¶åå†æ¨é€åˆ°è¿œç¨‹ä¸»æœºã€‚è¿™æ—¶ï¼Œå¦‚æœä½ ä¸€å®šè¦æ¨é€ï¼Œå¯ä»¥ä½¿ç”¨â€“forceé€‰é¡¹ã€‚ $ git push --force originä¸Šé¢å‘½ä»¤ä½¿ç”¨â€“forceé€‰é¡¹ï¼Œç»“æœå¯¼è‡´è¿œç¨‹ä¸»æœºä¸Šæ›´æ–°çš„ç‰ˆæœ¬è¢«è¦†ç›–ã€‚é™¤éä½ å¾ˆç¡®å®šè¦è¿™æ ·åšï¼Œå¦åˆ™åº”è¯¥å°½é‡é¿å…ä½¿ç”¨â€“forceé€‰é¡¹ã€‚æœ€åï¼Œgit pushä¸ä¼šæ¨é€æ ‡ç­¾ï¼ˆtagï¼‰ï¼Œé™¤éä½¿ç”¨â€“tagsé€‰é¡¹ã€‚$ git push origin --tags ï¼ˆå®Œï¼‰ AboutGitHubï¼šğŸ‘‰https://github.com/microzzä¸ªäººç½‘ç«™ï¼šğŸ‘‰https://microzz.com/","tags":[{"name":"Git","slug":"Git","permalink":"https://microzz.com/tags/Git/"},{"name":"ç‰ˆæœ¬ç®¡ç†","slug":"ç‰ˆæœ¬ç®¡ç†","permalink":"https://microzz.com/tags/ç‰ˆæœ¬ç®¡ç†/"}]},{"title":"JSä¸­çš„callå’Œapplyåº”ç”¨","date":"2017-05-04T12:38:49.000Z","path":"2017/05/04/callapply/","text":"JavaScriptä¸­çš„callå’Œapplyåº”ç”¨ ECMAScript3ç»™Functionçš„åŸå‹å®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œä»–ä»¬æ˜¯Function.prototype.call å’Œ Function.prototype.apply. åœ¨å®é™…å¼€å‘ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›å‡½æ•°å¼é£æ ¼çš„ä»£ç ç¼–å†™ä¸­ï¼Œcallå’Œapplyæ–¹æ³•å°¤ä¸ºæœ‰ç”¨ã€‚ callå’ŒapplyåŒºåˆ«å…¶å®ä»–ä»¬çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ä¼ é€’çš„å‚æ•°ä¸ä¸€æ ·è€Œå·²ã€‚applyï¼š æ¥å—2ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†å‡½æ•°ä½“å†…thiså¯¹è±¡çš„æŒ‡å‘ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ•°ç»„æˆ–è€…ä¸€ä¸ªç±»æ•°ç»„ã€‚applyä¼ å…¥çš„æ˜¯ä¸€ä¸ªå‚æ•°æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯å°†å¤šä¸ªå‚æ•°ç»„åˆæˆä¸ºä¸€ä¸ªæ•°ç»„ä¼ å…¥ï¼Œè€Œcallåˆ™ä½œä¸ºcallçš„å‚æ•°ä¼ å…¥ï¼ˆä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ï¼‰ã€‚ ä¸¾ä¸ªæ —å­ï¼š const obj1 = { name: &#39;microzz&#39;, getName: function() { return this.name; } }; const obj2 = { name: &#39;Zhaohui&#39; } console.log(obj1.getName()); // &quot;microzz&quot; console.log(obj1.getName.call(obj2)); // &quot;Zhaohui&quot; console.log(obj1.getName.apply(obj2)); // &quot;Zhaohui&quot; callå’Œapplyçš„ç”¨é€”æ”¹å˜thisæŒ‡å‘callå’Œapplyå¯ä»¥æ”¹å˜thisçš„æŒ‡å‘ï¼Œè¿™ç‚¹æˆ‘ä»¬ä»ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä¸¾ä¸€ä¸ªå®é™…å½“ä¸­å¯ä»¥é‡åˆ°çš„æƒ…å†µï¼š æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¼šè§‰å¾— document.getElementByIdè¿™ä¸ªæ–¹æ³•å¤ªé•¿äº†ï¼Œæˆ‘ä»¬ä¼šå°è¯•ç”¨ä¸€ä¸ªçŸ­å‡½æ•°æ¥ä»£æ›¿å®ƒï¼Œå¦‚åŒprototype.jsç­‰ä¸€äº›æ¡†æ¶æ‰€åšè¿‡çš„äº‹æƒ…ï¼Œä¸‹é¢ç”¨ä»£ç è¯´æ˜ï¼š const getId = function(id) { return document.getElementById(id); } getId(&#39;id&#39;); åœ¨Chromeã€Firefoxã€IE10ä¸­æ‰§è¡Œä¼šå‘ç°æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™æ˜¯å› ä¸ºå¾ˆå¤šå¼•æ“çš„ document.getElementById çš„æ–¹æ³•å†…éƒ¨éœ€è¦ç”¨åˆ°thisï¼Œè¿™ä¸ªthisæœ¬æ¥è¢«æœŸæœ›æŒ‡å‘documentï¼Œä½†ç›´æ¥æ™®é€šå‡½æ•°è°ƒç”¨å°±æŒ‡å‘äº†windowã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨applyâ€œä¿®æ­£â€ thisï¼š document.getElementById = (function(func) { return function() { return func.apply(document, arguments); } })(document.getElement); const getId = document.getElementById; Function.prototype.bindåœ¨å¤§éƒ¨åˆ†é«˜çº§æµè§ˆå™¨å·²ç»å®ç°äº†å†…ç½®çš„Function.prototype.bindï¼Œç”¨æ¥æŒ‡å®šå‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘ï¼Œå¦‚æœæ²¡æœ‰åŸç”Ÿçš„Function.prototype.bind,æˆ‘ä»¬ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿä¸€ä¸ªï¼Œä»£ç å¦‚ä¸‹ï¼š Function.prototype.bind = function(context) { var self = this; return function() { return self.apply(context, arguments); } } var obj = { name: &#39;microzz&#39; }; var func = function() { console.log(this.name); // microzz }.bind(obj); func(); è¿™æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šå®ç°å¾—ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼š Function.prototype.bind = function() { var self = this; // éœ€è¦ç»‘å®šçš„thisä¸Šä¸‹æ–‡ var context = [].shift.call(arguments); // å‰©ä½™çš„å‚æ•°è½¬æˆæ•°ç»„ var args = [].slice.call(arguments); return function() { return self.apply(context, [].concat.call(args, [].slice.call(arguments))); } } var obj = { name: &#39;microzz&#39; }; var func = function(a, b, c, d) { console.log(this.name); // microzz console.log([a, b, c, d]); // [1, 2, 3, 4] }.bind(obj, 1, 2); func(3, 4); å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•å€Ÿç”¨æ„é€ å‡½æ•°å€Ÿç”¨æ–¹æ³•çš„ç¬¬ä¸€ç§åœºæ™¯æ˜¯â€œå€Ÿç”¨æ„é€ å‡½æ•°â€ï¼Œå¯ä»¥å®ç°ç±»ä¼¼ç»§æ‰¿çš„æ•ˆæœï¼š var A = function(name) { this.name = name; } var B = function() { A.apply(this, arguments); } B.prototype.getName = function() { return this.name; } var b = new B(&#39;microzz&#39;); console.log(b.getName()); // microzz ç±»æ•°ç»„å‡½æ•°å‚æ•°åˆ—è¡¨argumentsæ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œè™½ç„¶å®ƒæœ‰ä¸‹æ ‡ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯çœŸæ­£çš„æ•°ç»„ã€‚ä¸ºäº†èƒ½ä½¿ç”¨æ•°ç»„çš„ä¸€äº›æ–¹æ³•ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šå€Ÿç”¨Array.prototypeå¯¹è±¡ä¸Šçš„æ–¹æ³•ã€‚æ¯”å¦‚æƒ³å¾€argumentsä¸­æ·»åŠ æ–°å…ƒç´ ï¼Œé€šå¸¸ä¼šå€Ÿç”¨Array.prototype.pushæƒ³æŠŠargumentsè½¬æˆçœŸæ­£æ•°ç»„çš„æ—¶å€™ï¼Œå¯ä»¥å€Ÿç”¨Array.prototype.sliceæˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ES6çš„Array.from AboutGitHubï¼šğŸ‘‰https://github.com/microzzä¸ªäººç½‘ç«™ï¼šğŸ‘‰https://microzz.com/","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"call","slug":"call","permalink":"https://microzz.com/tags/call/"},{"name":"apply","slug":"apply","permalink":"https://microzz.com/tags/apply/"}]},{"title":"ä½ çœŸçš„çŸ¥é“JSå—ï¼Ÿ","date":"2017-04-30T10:08:44.000Z","path":"2017/04/30/knowjs/","text":"ä½ çœŸçš„çŸ¥é“JavaScriptå— &nbsp;&nbsp;&nbsp;&nbsp;JavaScriptæ˜¯ä¸€é—¨å¥‡æ€ªçš„è¯­è¨€ï¼Œè¦çœŸæ­£æŒæ¡å¹¶ä¸å®¹æ˜“ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œæ¥ä¸€ä¸ªå¿«é€Ÿæµ‹è¯•ï¼Œ5é“é¢˜ç›®ï¼Œçœ‹çœ‹ä½ å¯¹JavaScriptæ˜¯å¦çœŸæ­£æŒæ¡ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹å’¯ğŸ˜„ é¢˜ç›®No.1if (!(&quot;a&quot; in window)) { var a = 1; } console.log(a); No.2var a = 1, b = function a(x) { x &amp;&amp; a(--x); }; console.log(a); No.3function a(x) { return x * 2; } var a; console.log(a); No.4function b(x, y, a) { arguments[2] = 10; console.log(a); } b(1, 2, 3); No.5function a() { console.log(this); } a.call(null); è§£æNo.1&nbsp;&nbsp;&nbsp;&nbsp;åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå…¨å±€å˜é‡éƒ½æ˜¯windowçš„ä¸€ä¸ªå±æ€§ï¼Œå³var a = 1 ç­‰ä»·äº window.a = 1ã€‚inæ“ä½œç¬¦ç”¨æ¥åˆ¤æ–­æŸä¸ªå±æ€§å±äºæŸä¸ªå¯¹è±¡ï¼Œå¯ä»¥æ˜¯å¯¹è±¡çš„ç›´æ¥å±æ€§ï¼Œä¹Ÿå¯ä»¥æ˜¯é€šè¿‡prototypeç»§æ‰¿çš„å±æ€§ã€‚&nbsp;&nbsp;&nbsp;&nbsp;å†çœ‹é¢˜ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­ï¼Œå¦‚æœæ²¡æœ‰å…¨å±€å˜é‡ a ï¼Œåˆ™å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡ a (ES5æ²¡æœ‰å—çº§ä½œç”¨åŸŸ)ï¼Œå¹¶ä¸”èµ‹å€¼ä¸º1ã€‚å¾ˆå¤šäººä¼šè®¤ä¸ºæ‰“å°çš„æ˜¯1ã€‚éä¹Ÿï¼Œå¤§å®¶ä¸è¦å¿˜äº†å˜é‡å£°æ˜ä¼šè¢«å‰ç½®ï¼ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿé¢˜ç›®ä¹Ÿå°±ç­‰ä»·äº var a; if (!(&quot;a&quot; in window)) { a = 1; } console.log(a); æ‰€ä»¥å…¶å®å·²ç»å£°æ˜äº†å˜é‡aï¼Œåªä¸è¿‡ifè¯­å¥ä¹‹å‰å€¼æ˜¯undefinedï¼Œæ‰€ä»¥ifè¯­å¥å‹æ ¹ä¸ä¼šæ‰§è¡Œã€‚æœ€åç­”æ¡ˆå°±æ˜¯ undefined No.2è¿™é“é¢˜æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š å˜é‡å£°æ˜ã€å‡½æ•°å£°æ˜ä¼šè¢«å‰ç½®ï¼Œä½†æ˜¯å‡½æ•°è¡¨è¾¾å¼å¹¶ä¸ä¼šï¼Œå‡†ç¡®è¯´ç±»ä¼¼å˜é‡å£°æ˜å‰ç½®ï¼Œä¸¾ä¸ªæ —å­ï¼š console.log(&#39;b&#39;, b); // b undefined var b = function() {} console.log(&#39;b&#39;, b); // b function () {} 2.å…·åçš„å‡½æ•°è¡¨è¾¾å¼çš„åå­—åªèƒ½åœ¨è¯¥å‡½æ•°å†…éƒ¨å–åˆ°ï¼Œä¸¾ä¸ªä¾‹å­(æ’é™¤è€çš„IEğŸ˜‚)ï¼š var foo = function bar () {} console.log(&#39;foo&#39;, foo); // foo function bar(){} console.log(&#39;bar&#39;, bar); // Uncaught ReferenceError: bar is not defined &nbsp;&nbsp;&nbsp;&nbsp;ç»¼åˆè¿™ä¸¤ç‚¹ï¼Œå†çœ‹é¢˜ç›®ï¼Œæœ€åè¾“å‡ºçš„å†…å®¹å°±ä¸º 1 No.3å‡½æ•°å£°æ˜ä¼šè¦†ç›–å˜é‡å£°æ˜ï¼Œä½†ä¸ä¼šè¦†ç›–å˜é‡èµ‹å€¼ï¼Œä¸¾ä¸ªæ —å­ç®€å•ç²—æš´ï¼š function foo(){ return 1; } var foo; console.log(typeof foo); // &quot;function&quot; å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§é«˜äºå˜é‡å£°æ˜çš„ä¼˜å…ˆçº§ï¼Œä½†å¦‚æœè¯¥å˜é‡fooèµ‹å€¼äº†ï¼Œé‚£ç»“æœå°±å®Œå…¨ä¸ä¸€æ ·äº†ï¼š function foo(){ return 1; } var foo = 1; console.log(typeof foo); // &quot;number&quot; å˜é‡fooèµ‹å€¼ä»¥åï¼Œå˜é‡èµ‹å€¼åˆå§‹åŒ–å°±è¦†ç›–äº†å‡½æ•°å£°æ˜ã€‚è¿™ä¸ªéœ€è¦æ³¨æ„å†çœ‹é¢˜ç›® function a(x) { return x * 2; } var a; console.log(a); // function a(x) {...} No.4è¿™é¢˜è€ƒå¯Ÿ arguments å¯¹è±¡çš„ç”¨æ³•(è¯¦çœ‹ğŸ‘‰JavaScriptä¸­çš„argumentså¯¹è±¡)ä¸€èˆ¬æƒ…å†µï¼Œargumentsä¸å‡½æ•°å‚æ•°æ˜¯åŠ¨æ€ç»‘å®šå…³ç³»(ä¸ºä»€ä¹ˆè¯´æ˜¯ä¸€èˆ¬ç¨åä¼šè§£é‡Š)ï¼Œæ‰€ä»¥å¾ˆå¥½ç†è§£ï¼Œæœ€åè¾“å‡ºçš„æ˜¯10 ä½†æ˜¯ä½†æ˜¯ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸è¦å¿˜äº†ä¸€ä¸ªç‰¹æ®Šæƒ…å†µâ€“ä¸¥æ ¼æ¨¡å¼ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ arguments ä¸ç›¸å½“äºå‡½æ•°å‚æ•°çš„ä¸€ä¸ªæ‹·è´ï¼Œå¹¶æ²¡æœ‰åŠ¨æ€ç»‘å®šå…³ç³»ï¼Œä¸¾ä¸ªæ —å­ï¼š &#39;use strict&#39; // ä¸¥æ ¼æ¨¡å¼ï¼ï¼ function b(x, y, a) { arguments[2] = 10; console.log(a); } b(1, 2, 3); // 3 No.5function a() { console.log(this); } a.call(null); å…³äº a.call(null); æ ¹æ®ECMAScript262è§„èŒƒè§„å®šï¼šå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„å¯¹è±¡è°ƒç”¨è€…æ˜¯nullæˆ–è€…undefinedçš„è¯ï¼Œcallæ–¹æ³•å°†æŠŠå…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸Šæ˜¯windowå¯¹è±¡ï¼‰ä½œä¸ºthisçš„å€¼ã€‚æ‰€ä»¥ï¼Œä¸ç®¡ä½ ä»€ä¹ˆæ—¶å€™ä¼ å…¥nullæˆ–è€… undefinedï¼Œå…¶thiséƒ½æ˜¯å…¨å±€å¯¹è±¡windowã€‚æ‰€ä»¥ï¼Œåœ¨æµè§ˆå™¨ä¸Šç­”æ¡ˆæ˜¯è¾“å‡º window å¯¹è±¡ã€‚ ä½†æ˜¯ä½†æ˜¯ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¾æ—§ä¸èƒ½å¿˜è®°ä¸€ä¸ªç‰¹æ®Šæƒ…å†µâ€“ä¸¥æ ¼æ¨¡å¼ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œnull å°±æ˜¯ nullï¼Œundefined å°±æ˜¯ undefined ï¼Œä¸¾ä¸ªæ —å­ï¼š &#39;use strict&#39;; // ä¸¥æ ¼æ¨¡å¼ï¼ï¼ function a() { console.log(this); } a.call(null); // null a.call(undefined); // undefined æé†’ åœ¨æµè§ˆå™¨ä¸­çš„å…¨å±€å¯¹è±¡æ˜¯windowï¼ŒNode.jsä¸­æ˜¯global; ä¸ºäº†ä½¿ä»£ç æ›´åŠ ä¸¥è°¨ä¸å¥å£®ï¼Œå»ºè®®å†™JSéƒ½åŠ ä¸Šä¸¥æ ¼æ¨¡å¼&#39;use strict&#39;; ES6å·²ç»æˆä¸ºå‰ç«¯å¿…å¤‡æŠ€èƒ½ï¼Œå‘¼åå¤§å®¶éƒ½ä½¿ç”¨ES6ï¼Œæ–¹ä¾¿é«˜æ•ˆï¼Œå¯ä»¥ä½¿ç”¨babelæŠŠES6è½¬æˆES5ç”šè‡³ES3ï¼Œå°½é‡ä½¿ç”¨ES6æ¨åŠ¨å‰ç«¯çš„å‘å±•ğŸ‘ AboutGitHub: ğŸ‘‰https://github.com/microzzä¸ªäººç½‘ç«™: ğŸ‘‰https://microzz.com/","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"}]},{"title":"æ·±å…¥ç†è§£ES6ä¸­çš„ç®­å¤´å‡½æ•°","date":"2017-04-29T13:08:13.000Z","path":"2017/04/29/arrowfunc/","text":"JavaScriptæ·±å…¥ç†è§£ES6ä¸­çš„ç®­å¤´å‡½æ•° &nbsp;&nbsp;&nbsp;&nbsp;ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¯­æ³•æ¯”å‡½æ•°è¡¨è¾¾å¼çŸ­ï¼Œå¹¶ä¸”ä¸ç»‘å®šè‡ªå·±çš„ thisï¼Œargumentsï¼Œsuperæˆ– new.targetã€‚æ­¤å¤–ï¼Œç®­å¤´å‡½æ•°æœ€å¥½åœ¨éæ–¹æ³•å‡½æ•°ä¸­ä½¿ç”¨ï¼Œä¸”ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ã€‚ è¯­æ³•åŸºç¡€è¯­æ³•(param1, param2, â€¦, paramN) =&gt; { statements } (param1, param2, â€¦, paramN) =&gt; expression // ç­‰ä»·äº: =&gt; { return expression; } // å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œåœ†æ‹¬å·æ˜¯å¯é€‰çš„: (singleParam) =&gt; { statements } singleParam =&gt; { statements } // æ— å‚æ•°æˆ–è€…å¤šå‚æ•°çš„ç®­å¤´å‡½æ•°éœ€è¦ä½¿ç”¨åœ†æ‹¬å·æˆ–è€…ä¸‹åˆ’çº¿: () =&gt; { statements } _ =&gt; { statements } é«˜çº§è¯­æ³•// åªè¿”å›ä¸€ä¸ªå¯¹è±¡å­—é¢é‡,æ²¡æœ‰å…¶ä»–è¯­å¥æ—¶, åº”å½“ç”¨åœ†æ‹¬å·å°†å…¶åŒ…èµ·æ¥: params =&gt; ({foo: bar}) // æ”¯æŒ Rest parameters å’Œ default parameters: (param1, param2, ...rest) =&gt; { statements } (param1 = defaultValue1, param2, â€¦, paramN = defaultValueN) =&gt; { statements } // æ”¯æŒå‚æ•°åˆ—è¡¨ä¸­çš„è§£æ„èµ‹å€¼ var f = ([a, b] = [1, 2], {x: c} = {x: a + b}) =&gt; a + b + c; f(); // 6 æè¿° &nbsp;&nbsp;&nbsp;&nbsp;ç®­å¤´å‡½æ•°çš„å¼•å…¥æœ‰ä¸¤ä¸ªæ–¹é¢çš„ä½œç”¨ï¼šä¸€æ˜¯æ›´ç®€çŸ­çš„å‡½æ•°ä¹¦å†™ï¼ŒäºŒæ˜¯å¯¹ thisçš„è¯æ³•è§£æã€‚ æ›´çŸ­çš„å‡½æ•°æ›´çŸ­çš„å‡½æ•°åœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œå¾ˆå—æ¬¢è¿ã€‚è¯•æ¯”è¾ƒï¼š var a = [ &quot;Hydrogen&quot;, &quot;Helium&quot;, &quot;Lithium&quot;, &quot;BerylÂ­lium&quot; ]; var a2 = a.map(function(s){ return s.length }); var a3 = a.map( s =&gt; s.length ); ä¸ç»‘å®š this &nbsp;&nbsp;&nbsp;&nbsp;åœ¨ç®­å¤´å‡½æ•°å‡ºç°ä¹‹å‰ï¼Œæ¯ä¸ªæ–°å®šä¹‰çš„å‡½æ•°éƒ½æœ‰å…¶è‡ªå·±çš„ this å€¼ï¼ˆä¾‹å¦‚ï¼Œæ„é€ å‡½æ•°çš„ this æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹çš„å‡½æ•°çš„ this å€¼ä¸º undefinedï¼›å¦‚æœå‡½æ•°æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨çš„ï¼Œåˆ™å…¶ this æŒ‡å‘äº†é‚£ä¸ªè°ƒç”¨å®ƒçš„å¯¹è±¡ï¼‰ã€‚åœ¨é¢å‘å¯¹è±¡é£æ ¼çš„ç¼–ç¨‹ä¸­ï¼Œè¿™ä¼šå¸¦æ¥å¾ˆå¤šå›°æ‰°ã€‚ function Person() { // æ„é€ å‡½æ•° Person() å®šä¹‰çš„ `this` å°±æ˜¯æ–°å®ä¾‹å¯¹è±¡è‡ªå·± this.age = 0; setInterval(function growUp() { // åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒgrowUp() å‡½æ•°å®šä¹‰äº†å…¶å†…éƒ¨çš„ `this`ä¸ºå…¨å±€å¯¹è±¡, ä¸åŒäºæ„é€ å‡½æ•°Person()çš„å®šä¹‰çš„ `this` this.age++; }, 1000); } var p = new Person(); // åœ¨ ECMAScript 3/5 ä¸­ï¼Œè¿™ä¸ªé—®é¢˜é€šè¿‡æŠŠthisçš„å€¼èµ‹ç»™å˜é‡ï¼Œ // ç„¶åå°†è¯¥å˜é‡æ”¾åˆ°é—­åŒ…ä¸­æ¥è§£å†³ã€‚ function Person() { var self = this; // ä¹Ÿæœ‰äººé€‰æ‹©ä½¿ç”¨ `that` è€Œé `self`. // åªè¦ä¿è¯ä¸€è‡´å°±å¥½. self.age = 0; setInterval(function growUp() { // å›è°ƒé‡Œé¢çš„ `self` å˜é‡å°±æŒ‡å‘äº†æœŸæœ›çš„é‚£ä¸ªå¯¹è±¡äº† self.age++; }, 1000); } é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ bind å‡½æ•°ï¼ŒæŠŠæœŸæœ›çš„ this å€¼ä¼ é€’ç»™ growUp() å‡½æ•°ã€‚ ç®­å¤´å‡½æ•°ä¼šæ•è·å…¶æ‰€åœ¨ä¸Šä¸‹æ–‡çš„ this å€¼ï¼Œä½œä¸ºè‡ªå·±çš„ this å€¼ï¼Œå› æ­¤ä¸‹é¢çš„ä»£ç å°†å¦‚æœŸè¿è¡Œã€‚ function Person(){ this.age = 0; setInterval(() =&gt; { this.age++; // thisæ­£ç¡®åœ°æŒ‡å‘äº†personå¯¹è±¡ }, 1000); } var p = new Person(); ä¸ä¸¥æ ¼æ¨¡å¼çš„å…³ç³»è€ƒè™‘åˆ° this æ˜¯è¯æ³•å±‚é¢ä¸Šçš„ï¼Œä¸¥æ ¼æ¨¡å¼ä¸­ä¸ this ç›¸å…³çš„è§„åˆ™éƒ½å°†è¢«å¿½ç•¥ã€‚ var f = () =&gt; {&#39;use strict&#39;; return this}; f() === window; // æˆ–å…¨å±€å¯¹è±¡ ä¸¥æ ¼æ¨¡å¼çš„å…¶ä»–è§„åˆ™ä¾ç„¶ä¸å˜. ä½¿ç”¨ call æˆ– apply è°ƒç”¨ç”±äº this å·²ç»åœ¨è¯æ³•å±‚é¢å®Œæˆäº†ç»‘å®šï¼Œé€šè¿‡ call() æˆ– apply() æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œåªæ˜¯ä¼ å…¥äº†å‚æ•°è€Œå·²ï¼Œå¯¹ this å¹¶æ²¡æœ‰ä»€ä¹ˆå½±å“ï¼š var adder = { base : 1, add : function(a) { var f = v =&gt; v + this.base; return f(a); }, addThruCall: function(a) { var f = v =&gt; v + this.base; var b = { base : 2 }; return f.call(b, a); } }; console.log(adder.add(1)); // è¾“å‡º 2 console.log(adder.addThruCall(1)); // ä»ç„¶è¾“å‡º 2ï¼ˆè€Œä¸æ˜¯3ï¼‰ ä¸ç»‘å®šå‚æ•°ï¼ˆargumentsï¼‰ &nbsp;&nbsp;&nbsp;&nbsp;ç®­å¤´å‡½æ•°ä¸ä¼šåœ¨å…¶å†…éƒ¨æš´éœ²å‡ºå‚æ•°ï¼ˆarguments )ï¼š arguments.length, arguments[0], arguments[1] ç­‰ç­‰ï¼Œéƒ½ä¸ä¼šæŒ‡å‘ç®­å¤´å‡½æ•°çš„ argumentsï¼Œè€Œæ˜¯æŒ‡å‘äº†ç®­å¤´å‡½æ•°æ‰€åœ¨ä½œç”¨åŸŸçš„ä¸€ä¸ªåä¸º arguments çš„å€¼ï¼ˆå¦‚æœæœ‰çš„è¯ï¼Œå¦åˆ™ï¼Œå°±æ˜¯ undefinedã€‚ï¼‰ var arguments = 42; var arr = () =&gt; arguments; arr(); // 42 function foo() { var f = (i) =&gt; arguments[0]+i; // fooå‡½æ•°çš„é—´æ¥å‚æ•°ç»‘å®š return f(2); } foo(1); // 3 // ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ arguments ï¼Œ // ä¸è¿‡åœ¨å¤§å¤šæ•°æƒ…å½¢ä¸‹ï¼Œrestå‚æ•°å¯ä»¥ç»™å‡ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼š function foo() { var f = (...args) =&gt; args[0]; return f(2); } foo(1); // 2 åƒæ–¹æ³•ä¸€æ ·ä½¿ç”¨ç®­å¤´å‡½æ•°å¦‚ä¸Šæ‰€è¿°ï¼Œç®­å¤´å‡½æ•°è¡¨è¾¾å¼å¯¹éæ–¹æ³•å‡½æ•°æ˜¯æœ€åˆé€‚çš„ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬è¯•ç€æŠŠå®ƒä»¬ä½œä¸ºæ–¹æ³•æ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚ &#39;use strict&#39;; var obj = { i: 10, b: () =&gt; console.log(this.i, this), c: function() { console.log( this.i, this) } } obj.b(); // undefined, Window obj.c(); // 10, Object {...} // ç®­å¤´å‡½æ•°æ²¡æœ‰å®šä¹‰thisç»‘å®šã€‚ // å¦ä¸€ä¸ªæ¶‰åŠObject.defineProperty():çš„ç¤ºä¾‹ï¼š &#39;use strict&#39;; var obj = { a: 10 }; Object.defineProperty(obj, &quot;b&quot;, { get: () =&gt; { console.log(this.a, typeof this.a, this); return this.a+10; // represents global object &#39;Window&#39;, // therefore &#39;this.a&#39; returns &#39;undefined&#39; } }); ä½¿ç”¨ new æ“ä½œç¬¦ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œæ„é€ å™¨ï¼Œå’Œ new ä¸€èµ·ç”¨å°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚ var Foo = () =&gt; {}; var foo = new Foo(); // TypeError: Foo is not a constructor ä½¿ç”¨åŸå‹å±æ€§ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹å±æ€§ã€‚ var Foo = () =&gt; {}; console.log(Foo.prototype); // undefined ä½¿ç”¨ yield å…³é”®å­— yield å…³é”®å­—é€šå¸¸ä¸èƒ½åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨ï¼ˆé™¤éæ˜¯åµŒå¥—åœ¨å…è®¸ä½¿ç”¨çš„å‡½æ•°å†…ï¼‰ã€‚å› æ­¤ï¼Œç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œç”Ÿæˆå™¨ã€‚ å‡½æ•°ä¸»ä½“ç®­å¤´å‡½æ•°æ—¢æ”¯æŒç®€å†™ä¹Ÿæ”¯æŒå¸¸è§„ç¼–å†™ã€‚ ç®€å†™æ—¶åªéœ€è¦ä¸€ä¸ªè¡¨è¾¾å¼å’Œä¸€ä¸ªè¿”å›å€¼ã€‚å¸¸è§„ç¼–å†™æ—¶å¿…é¡»æœ‰ä¸€ä¸ªæ˜ç¡®çš„è¿”å›å€¼ã€‚ var func = x =&gt; x * x; // ç®€å†™å‡½æ•° çœç•¥return var func = (x, y) =&gt; { return x + y; }; //å¸¸è§„ç¼–å†™ æ˜ç¡®çš„è¿”å›å€¼ è¿”å›æ–‡å­—è¡¨è¾¾å¼è¯·ç‰¢è®°ï¼Œç”¨ params =&gt; {object:literal} è¿™ç§ç®€å•çš„è¯­æ³•è¿”å›ä¸€ä¸ªæ–‡å­—è¡¨è¾¾å¼æ˜¯è¡Œä¸é€šçš„ï¼š var func = () =&gt; { foo: 1 }; // undefined! var func = () =&gt; { foo: function() {} }; // SyntaxError: function statement requires a nameï¼ˆæœªå®šä¹‰å‡½æ•°è¯­å¥ï¼‰ // è¿™æ˜¯å› ä¸ºèŠ±æ‹¬å·ï¼ˆå³ {} ï¼‰é‡Œé¢çš„ä»£ç è¢«è§£æä¸ºåºåˆ—è¯­å¥äº† //ï¼ˆä¾‹å¦‚ï¼Œ foo è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ ‡ç­¾, è€Œéæ–‡å­—è¡¨è¾¾å¼çš„ç»„æˆéƒ¨åˆ†ï¼‰ã€‚ æ‰€ä»¥ï¼Œè®°å¾—ç”¨åœ†æ‹¬å·æŠŠæ–‡å­—è¡¨è¾¾å¼åŒ…èµ·æ¥ï¼š var func = () =&gt; ({ foo: 1 }); æ¢è¡Œç®­å¤´å‡½æ•°åœ¨å‚æ•°å’Œç®­å¤´ä¹‹é—´ä¸èƒ½æ¢è¡Œå“¦ var func = () =&gt; 1; // SyntaxError: expected expression, got &#39;=&gt;&#39; è§£æé¡ºåºåœ¨ç®­å¤´å‡½æ•°ä¸­çš„ç®­å¤´ä¸æ˜¯æ“ä½œç¬¦(æˆ–è€…è¿ç®—ç¬¦,å°±åƒâ€™+ -â€˜é‚£äº›)ï¼Œ ä½†æ˜¯ç®­å¤´å‡½æ•°æœ‰ç‰¹æ®Šçš„è§£æè§„åˆ™å°±æ˜¯ï¼šç›¸æ¯”æ™®é€šçš„å‡½æ•°ï¼Œå—æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å½±å“ã€‚ let callback; callback = callback || function() {}; // ok callback = callback || () =&gt; {}; // SyntaxError:éæ³•ç®­å¤´å‡½æ•°å±æ€§ callback = callback || (() =&gt; {}); // ok ç¤ºä¾‹// ä¸€ä¸ªç©ºç®­å¤´å‡½æ•°,è¿”å› undefined let empty = () =&gt; {}; (() =&gt; &quot;foobar&quot;)() // è¿”å› &quot;foobar&quot; var simple = a =&gt; a &gt; 15 ? 15 : a; simple(16); // 15 simple(10); // 10 let max = (a, b) =&gt; a &gt; b ? a : b; // ç®€å•çš„æ•°ç»„ç­›é€‰ï¼ˆæ•°ç»„filteræ–¹æ³•ï¼‰ï¼Œè¿ç®—ï¼ˆæ•°ç»„mapæ–¹æ³•ï¼‰, ... var arr = [5, 6, 13, 0, 1, 18, 23]; var sum = arr.reduce((a, b) =&gt; a + b); // 66 var even = arr.filter(v =&gt; v % 2 == 0); // [6, 0, 18] var double = arr.map(v =&gt; v * 2); // [10, 12, 26, 0, 2, 36, 46] // æ›´å¤šç®€æ˜çš„promiseé“¾ promise.then(a =&gt; { // ... }).then(b =&gt; { // ... }); // æ›´æ˜“ç†è§£çš„æ— å‚æ•°ç®­å¤´å‡½æ•° setTimeout( () =&gt; { console.log(&#39;I happen sooner&#39;); setTimeout( () =&gt; { // deeper code console.log(&#39;I happen later&#39;); }, 1); }, 1); AboutGitHub: ğŸ‘‰https://github.com/microzzä¸ªäººç½‘ç«™: ğŸ‘‰https://microzz.com/","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"ç®­å¤´å‡½æ•°","slug":"ç®­å¤´å‡½æ•°","permalink":"https://microzz.com/tags/ç®­å¤´å‡½æ•°/"}]},{"title":"JavaScriptä¸­çš„argumentså¯¹è±¡","date":"2017-04-28T07:55:02.000Z","path":"2017/04/28/arguments/","text":"JavaScriptä¸­çš„argumentså¯¹è±¡arguments æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡, å¯¹åº”äºä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ã€‚ è¯­æ³•arguments æè¿°argumentså¯¹è±¡æ˜¯æ‰€æœ‰å‡½æ•°ä¸­å¯ç”¨çš„å±€éƒ¨å˜é‡ã€‚ä½ å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡åœ¨å‡½æ•°ä¸­å¼•ç”¨å‡½æ•°çš„å‚æ•°ã€‚æ­¤å¯¹è±¡åŒ…å«ä¼ é€’ç»™å‡½æ•°çš„æ¯ä¸ªå‚æ•°çš„æ¡ç›®ï¼Œç¬¬ä¸€ä¸ªæ¡ç›®çš„ç´¢å¼•ä»0å¼€å§‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°ä¼ é€’äº†ä¸‰ä¸ªå‚æ•°ï¼Œä½ å¯ä»¥å‚è€ƒå®ƒä»¬å¦‚ä¸‹ï¼š arguments[0]arguments[1]arguments[2]å‚æ•°ä¹Ÿå¯ä»¥è¢«è®¾ç½®: arguments[1] = &#39;new value&#39;; argumentså¯¹è±¡ä¸æ˜¯ä¸€ä¸ª Array ã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†é™¤äº† é•¿åº¦ä¹‹å¤–æ²¡æœ‰ä»»ä½•æ•°ç»„å±æ€§ã€‚ä¾‹å¦‚ï¼Œå®ƒæ²¡æœ‰ pop æ–¹æ³•ã€‚ä½†æ˜¯å®ƒå¯ä»¥è¢«è½¬æ¢ä¸ºä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ï¼šï¼š let args = Array.prototype.slice.call(arguments); let args = [].slice.call(arguments); ä½ è¿˜å¯ä»¥ä½¿ç”¨ Array.from()æ–¹æ³•æˆ– spread è¿ç®—ç¬¦å°† arguments è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„ï¼š let args = Array.from(arguments); let args = [...arguments]; å¯¹å‚æ•°ä½¿ç”¨sliceä¼šé˜»æ­¢æŸäº›JavaScriptå¼•æ“ä¸­çš„ä¼˜åŒ– (æ¯”å¦‚ V8 å¼•æ“)ã€‚ å¦‚æœä½ å…³å¿ƒå®ƒä»¬ï¼Œå°è¯•é€šè¿‡éå†argumentså¯¹è±¡æ¥æ„é€ ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚ å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ è¢«å¿½è§†çš„/é„™è§†/è½»è§†,/çœ‹ä¸èµ· Arrayæ„é€ å‡½æ•°ä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼š let args = ( arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments) ); å¦‚æœ Array generics å¯ç”¨çš„è¯ï¼Œä¸‹é¢çš„ä»£ç å¯ä»¥ä½œä¸ºæ›¿ä»£: var args = Array.slice(arguments); arguments å¯¹è±¡ä»…åœ¨å‡½æ•°å†…éƒ¨æœ‰æ•ˆï¼Œåœ¨å‡½æ•°å¤–éƒ¨è°ƒç”¨ arguments å¯¹è±¡ä¼šå‡ºç°ä¸€ä¸ªé”™è¯¯ã€‚ argumentsçš„typeofè¿”å›â€™objectâ€˜ã€‚ console.log(typeof arguments); // &#39;object&#39; å¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥ç¡®å®šå„ä¸ªargumentsçš„ç±»å‹ã€‚ console.log(typeof arguments[0]); //è¿™å°†è¿”å›å•ä¸ªå‚æ•°çš„typeofã€‚ å¦‚æœä½ è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªå‡½æ•°çš„å‚æ•°æ•°é‡æ¯”å®ƒæ˜¾å¼å£°æ˜çš„å‚æ•°æ•°é‡æ›´å¤šçš„æ—¶å€™ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ arguments å¯¹è±¡ã€‚è¿™ä¸ªæŠ€æœ¯å¯¹äºå‚æ•°æ•°é‡æ˜¯ä¸€ä¸ªå¯å˜é‡çš„å‡½æ•°æ¥è¯´æ¯”è¾ƒæœ‰ç”¨ã€‚ ä½ å¯ä»¥ç”¨ arguments.length æ¥å¾—åˆ°å‚æ•°çš„æ•°é‡ï¼Œç„¶åå¯ä»¥ç”¨ arguments object æ¥å¯¹æ¯ä¸ªå‚æ•°è¿›è¡Œå¤„ç†ã€‚ (æƒ³è¦å¾—åˆ°å‡½æ•°ç­¾åçš„å‚æ•°æ•°é‡, è¯·ä½¿ç”¨ Function.length å±æ€§ã€‚) å±æ€§arguments.callee // æŒ‡å‘å½“å‰æ‰§è¡Œçš„å‡½æ•°ã€‚ arguments.caller // æŒ‡å‘è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°ã€‚ arguments.length // æŒ‡å‘ä¼ é€’ç»™å½“å‰å‡½æ•°çš„å‚æ•°æ•°é‡ã€‚ ä¾‹å­å®šä¹‰ä¸€ä¸ªè¿æ¥å‡ ä¸ªå­—ç¬¦ä¸²çš„å‡½æ•°è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æ¥è¿æ¥å­—ç¬¦ä¸²ã€‚è¿™ä¸ªå‡½æ•°å”¯ä¸€æ­£å¼å£°æ˜äº†çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å‚æ•°æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä½œä¸ºè¡”æ¥ç‚¹æ¥è¿æ¥å­—ç¬¦ä¸²ã€‚è¯¥å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š function myConcat(separator) { var args = Array.prototype.slice.call(arguments, 1); return args.join(separator); } ä½ å¯ä»¥ä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°åˆ°è¯¥å‡½æ•°ï¼Œç„¶åè¯¥å‡½æ•°ä¼šå°†æ¯ä¸ªå‚æ•°ä½œä¸ºä¸€ä¸ªæ¡ç›®æ¥åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ã€‚ myConcat(&quot;, &quot;, &quot;red&quot;, &quot;orange&quot;, &quot;blue&quot;); // returns &quot;red, orange, blue&quot; myConcat(&quot;; &quot;, &quot;elephant&quot;, &quot;giraffe&quot;, &quot;lion&quot;, &quot;cheetah&quot;); // returns &quot;elephant; giraffe; lion; cheetah&quot; myConcat(&quot;. &quot;, &quot;sage&quot;, &quot;basil&quot;, &quot;oregano&quot;, &quot;pepper&quot;, &quot;parsley&quot;); // returns &quot;sage. basil. oregano. pepper. parsley&quot; å®šä¹‰ä¸€ä¸ªåˆ›å»ºHTMLåˆ—è¡¨çš„æ–¹æ³•è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°é€šè¿‡ä¸€ä¸ªå­—ç¬¦ä¸²æ¥åˆ›å»ºHTMLåˆ—è¡¨ã€‚è¿™ä¸ªå‡½æ•°å”¯ä¸€æ­£å¼å£°æ˜äº†çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚å½“è¯¥å‚æ•°ä¸º â€œuâ€ æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ— åºåˆ—è¡¨ (é¡¹ç›®åˆ—è¡¨)ï¼›å½“è¯¥å‚æ•°ä¸º â€œoâ€ æ—¶ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæœ‰åºåˆ—è¡¨ (ç¼–å·åˆ—è¡¨)ã€‚è¯¥å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š function list(type) { var result = &quot;&lt;&quot; + type + &quot;l&gt;&lt;li&gt;&quot;; var args = Array.prototype.slice.call(arguments, 1); result += args.join(&quot;&lt;/li&gt;&lt;li&gt;&quot;); result += &quot;&lt;/li&gt;&lt;/&quot; + type + &quot;l&gt;&quot;; // end list return result; } ä½ å¯ä»¥ä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°åˆ°è¯¥å‡½æ•°ï¼Œç„¶åè¯¥å‡½æ•°ä¼šå°†æ¯ä¸ªå‚æ•°ä½œä¸ºä¸€ä¸ªæ¡ç›®æ·»åŠ åˆ°ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šç±»å‹çš„åˆ—è¡¨å½“ä¸­ã€‚ var listHTML = list(&quot;u&quot;, &quot;One&quot;, &quot;Two&quot;, &quot;Three&quot;); /* listHTML is: &quot;&lt;ul&gt;&lt;li&gt;One&lt;/li&gt;&lt;li&gt;Two&lt;/li&gt;&lt;li&gt;Three&lt;/li&gt;&lt;/ul&gt;&quot; */ æ³¨æ„ES6ä¸­çš„ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ arguments å¯¹è±¡ï¼Œä¸è¿‡åœ¨å¤§å¤šæ•°æƒ…å½¢ä¸‹ï¼Œrestå‚æ•°å¯ä»¥ç»™å‡ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼š let a; const fn = (...rest) =&gt; Array.prototype.slice.call(rest, 1); a = fn(1, 2); // [2] å…³äºGitHubï¼šğŸ‘‰https://github.com/microzzä¸ªäººç½‘ç«™ï¼šğŸ‘‰https://microzz.com/","tags":[{"name":"JavaScrip","slug":"JavaScrip","permalink":"https://microzz.com/tags/JavaScrip/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"arguments","slug":"arguments","permalink":"https://microzz.com/tags/arguments/"}]},{"title":"Vue+Socket.io+Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤","date":"2017-04-27T02:07:21.000Z","path":"2017/04/27/vue-chat/","text":"Vue.js+Socket.io+Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤ğŸ‘‰æ–‡ç« å·²æ›´æ–°è¯·çœ‹è¿™é‡Œ QQç¾¤é‡Œé¢çš„æ™ºèƒ½æœºå™¨äººå¾ˆç«ï¼Œäºæ˜¯ç”¨Vue.js+Socket.io+Koa2æ‰“é€ äº†ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤ï¼Œå®ç°äº†IPå®šä½ã€åœ¨çº¿ç¾¤èŠï¼ŒåŠ å…¥äº†Emojiè¡¨æƒ…ğŸ˜„ï¼Œä»¥åŠæ¥å…¥äº†æ™ºèƒ½æœºå™¨äººğŸ˜ é¢„è§ˆ Vue.js+Socket.io åœ¨çº¿é¢„è§ˆåœ°å€ï¼šğŸ‘‰ https://microzz.com/vue-chat/ æŠ€æœ¯æ ˆ Vue2.0ï¼šå‰ç«¯é¡µé¢å±•ç¤ºã€‚ Socket.ioï¼šå®ç°å®æ—¶é€šä¿¡ Vuexï¼šVuexï¼Œå®ç°ä¸åŒç»„ä»¶é—´çš„çŠ¶æ€å…±äº« vue-routerï¼šé¡µé¢è·¯ç”±åˆ‡æ¢ axiosï¼šä¸€ä¸ªåŸºäº Promise çš„ HTTP åº“ï¼Œå‘åç«¯å‘èµ·è¯·æ±‚ã€‚ Expressã€Koa2ï¼šå› ä¸ºvue-cliç”Ÿæˆçš„é¡¹ç›®æ˜¯åŸºäºexpressçš„ï¼Œæ‰€ä»¥åœ¨å¼€å‘é˜¶æ®µæˆ‘ä½¿ç”¨çš„æ˜¯å®ƒï¼Œä½†æ˜¯çœŸæ­£ä¸Šçº¿ç”Ÿäº§ç¯å¢ƒæˆ‘æ¢æˆäº†Koa2ã€‚ Moment.jsï¼šä¸€ä¸ªæ—¶é—´å¤„ç†çš„åº“ï¼Œæ–¹ä¾¿å¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–æˆéœ€è¦çš„æ ¼å¼ã€‚ ES6ã€ES7ï¼šé‡‡ç”¨ES6è¯­æ³•ï¼Œè¿™æ˜¯ä»¥åçš„è¶‹åŠ¿ã€‚ç®­å¤´å‡½æ•°ã€Promiseç­‰ç­‰è¯­æ³•å¾ˆå¥½ç”¨ã€‚ localStorageï¼šä¿å­˜ç”¨æˆ·ä¿¡æ¯ä»¥åŠèŠå¤©è®°å½•ã€‚ Webpackï¼švue-cliè‡ªå¸¦Webpackï¼Œä½†æ˜¯éœ€è¦è‡ªå·±æ”¹é€ ä¸€ä¸‹ï¼Œæ¯”å¦‚è¦å¯¹éœ€è¦å®‰è£…sassç›¸å…³loaderï¼Œvue-cliå·²ç»é…ç½®å¥½äº†webpackï¼Œä½ åªéœ€è¦å®‰è£…ä¾èµ–å°±å¯ä»¥ï¼Œä½¿ç”¨çš„æ—¶å€™åªéœ€è¦&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;ã€‚ SASS(SCSS)ï¼šç”¨SCSSåšCSSé¢„å¤„ç†è¯­è¨€ï¼Œæœ‰äº›åœ°æ–¹å¾ˆæ–¹ä¾¿ï¼Œä¸ªäººå¾ˆå–œæ¬¢ç”¨ã€‚(è¯¦çœ‹ğŸ‘‰SASSç”¨æ³•æŒ‡å—) flexï¼šflexå¼¹æ€§å¸ƒå±€ï¼Œç®€å•é€‚é…æ‰‹æœºã€PCç«¯ã€‚ CSS3ï¼šCSS3è¿‡æ¸¡åŠ¨ç”»åŠæ ·å¼ã€‚ åˆ†æSocket.ioé€šè¿‡Express/Koaåœ¨æœåŠ¡ç«¯å¯ä»¥è¿™æ ·åš: // Server (app.js) var app = require(&#39;express&#39;)(); var server = require(&#39;http&#39;).Server(app); var io = require(&#39;socket.io&#39;)(server); server.listen(80); app.get(&#39;/&#39;, function (req, res) { res.sendfile(__dirname + &#39;/index.html&#39;); }); io.on(&#39;connection&#39;, function (socket) { socket.emit(&#39;news&#39;, { hello: &#39;world&#39; }); socket.on(&#39;my other event&#39;, function (data) { console.log(data); }); }); å®¢æˆ·ç«¯ä»£ç  // Client (index.html) &lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt; &lt;script&gt; var socket = io.connect(&#39;http://localhost&#39;); socket.on(&#39;news&#39;, function (data) { console.log(data); socket.emit(&#39;my other event&#39;, { my: &#39;data&#39; }); }); &lt;/script&gt; ä¸ç®¡æ˜¯æœåŠ¡å™¨è¿˜æ˜¯å®¢æˆ·ç«¯éƒ½æœ‰ emit å’Œ on è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå¯ä»¥è¯´ socket.io çš„æ ¸å¿ƒå°±æ˜¯è¿™ä¸¤ä¸ªå‡½æ•°äº†ï¼Œé€šè¿‡ emit å’Œ on å¯ä»¥è½»æ¾åœ°å®ç°æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„åŒå‘é€šä¿¡ã€‚ emit ï¼šç”¨æ¥å‘å°„ä¸€ä¸ªäº‹ä»¶æˆ–è€…è¯´è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºäº‹ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦å‘é€çš„æ•°æ®ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼ˆä¸€èˆ¬çœç•¥ï¼Œå¦‚éœ€å¯¹æ–¹æ¥å—åˆ°ä¿¡æ¯åç«‹å³å¾—åˆ°ç¡®è®¤æ—¶ï¼Œåˆ™éœ€è¦ç”¨åˆ°å›è°ƒå‡½æ•°ï¼‰ã€‚on ï¼šç”¨æ¥ç›‘å¬ä¸€ä¸ª emit å‘å°„çš„äº‹ä»¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦ç›‘å¬çš„äº‹ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªåŒ¿åå‡½æ•°ç”¨æ¥æ¥æ”¶å¯¹æ–¹å‘æ¥çš„æ•°æ®ï¼Œè¯¥åŒ¿åå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¥æ”¶çš„æ•°æ®ï¼Œè‹¥æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ä¸ºè¦è¿”å›çš„å‡½æ•°ã€‚socket.io æä¾›äº†ä¸‰ç§é»˜è®¤çš„äº‹ä»¶ï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½æœ‰ï¼‰ï¼šconnect ã€message ã€disconnect ã€‚å½“ä¸å¯¹æ–¹å»ºç«‹è¿æ¥åè‡ªåŠ¨è§¦å‘ connect äº‹ä»¶ï¼Œå½“æ”¶åˆ°å¯¹æ–¹å‘æ¥çš„æ•°æ®åè§¦å‘ message äº‹ä»¶ï¼ˆé€šå¸¸ä¸º socket.send() è§¦å‘ï¼‰ï¼Œå½“å¯¹æ–¹å…³é—­è¿æ¥åè§¦å‘ disconnect äº‹ä»¶ã€‚ æ­¤å¤–ï¼Œsocket.io è¿˜æ”¯æŒè‡ªå®šä¹‰äº‹ä»¶ï¼Œæ¯•ç«Ÿä»¥ä¸Šä¸‰ç§äº‹ä»¶åº”ç”¨èŒƒå›´æœ‰é™ï¼Œæ­£æ˜¯é€šè¿‡è¿™äº›è‡ªå®šä¹‰çš„äº‹ä»¶æ‰å®ç°äº†ä¸°å¯Œå¤šå½©çš„é€šä¿¡ã€‚ æœ€åï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æœåŠ¡å™¨ç«¯åŒºåˆ†ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š socket.emit() ï¼šå‘å»ºç«‹è¯¥è¿æ¥çš„å®¢æˆ·ç«¯å¹¿æ’­socket.broadcast.emit() ï¼šå‘é™¤å»å»ºç«‹è¯¥è¿æ¥çš„å®¢æˆ·ç«¯çš„æ‰€æœ‰å®¢æˆ·ç«¯å¹¿æ’­io.sockets.emit() ï¼šå‘æ‰€æœ‰å®¢æˆ·ç«¯å¹¿æ’­ï¼Œç­‰åŒäºä¸Šé¢ä¸¤ä¸ªçš„å’Œ Vue.jsåœ¨Vueçš„æ–¹é¢å°±æ¯”è¾ƒå¸¸è§„äº†ï¼ŒVue2.0+Vuex+axios+vue-router,æˆ‘GitHubçš„æœ‰å‡ ä¸ªå¼€æºé¡¹ç›®å¯ä»¥å‚è€ƒğŸ‘‰https://github.com/microzz æ€»ç»“ ç»„ä»¶çŠ¶æ€å¤šäº†ç”¨Vuexç®¡ç†å¾ˆæ–¹ä¾¿ï¼Œå¼•ç”¨ Redux çš„ä½œè€… Dan Abramov çš„è¯è¯´å°±æ˜¯ï¼š Flux æ¶æ„å°±åƒçœ¼é•œï¼šæ‚¨è‡ªä¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å®ƒã€‚ äº‹å…ˆä¸€å®šè¦å…ˆæƒ³å¥½æ•´ä¸ªé¡µé¢ç»„æˆï¼Œæ€æ ·å»åˆ†ç»„ä»¶å¼€å‘ï¼Œè¿™æ ·åœ¨å¼€å‘é˜¶æ®µä¼šäº‹åŠåŠŸå€ã€‚ Moment.jsåœ¨Vueä¸­ç”¨ES6çš„æ–¹å¼å¼•å…¥ä¼šæœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•åœ¨main.jså°è¯•è¿™æ ·import moment from &#39;moment&#39; Vue.prototype.moment = moment;ç»™Vueçš„åŸå‹ä¸Šæ·»åŠ momentï¼Œè¿™æ ·å°±å¯ä»¥åœ¨Vueçš„å®ä¾‹ä¸­éšæ„ä½¿ç”¨å®ƒäº†ã€‚ getæ–¹å¼é€šè¿‡URLä¼ å‚æœ€å¥½ä½¿ç”¨encodeURIå¯¹å‚æ•°è¿›è¡Œç¼–ç  ä¸€å®šè¦å¤„ç†å¥½é‚£äº›å¼‚æ­¥æ“ä½œï¼Œå¦åˆ™ä¼šå¸¦æ¥å„ç§é—®é¢˜ã€‚å¼€å‘é˜¶æ®µä½¿ç”¨çš„æ˜¯Promiseï¼Œä¸Šçº¿æ—¶å€™ä½¿ç”¨äº†ES7çš„Async+Promiseçš„ç»„åˆï¼Œè®©å¼‚æ­¥æ“ä½œæ›´åŠ åˆç†ã€‚ æºä»£ç å·²ç»å¼€æºï¼ŒGitHub ğŸ‘‰ https://github.com/microzz/vue-chat ğŸ“® zhaohui@microzz.com ä¹Ÿå¯ä»¥å…³æ³¨æˆ‘çš„GitHubè·å–æœ€æ–°æƒ…å†µ ğŸ‘‰ https://github.com/microzz Aboutä¸ªäººç½‘ç«™ï¼šğŸ‘‰ microzz.com GitHubï¼šğŸ‘‰ https://github.com/microzz","tags":[{"name":"Vue.js","slug":"Vue-js","permalink":"https://microzz.com/tags/Vue-js/"},{"name":"Koa2","slug":"Koa2","permalink":"https://microzz.com/tags/Koa2/"},{"name":"Socket.io","slug":"Socket-io","permalink":"https://microzz.com/tags/Socket-io/"}]},{"title":"iTerm2 å¿«æ·é”®å¤§å…¨","date":"2017-04-22T02:03:18.000Z","path":"2017/04/22/iterm2/","text":"iTerm2 å¿«æ·é”®å¤§å…¨ æå‡Macå¼€å‘æ•ˆç‡æ ‡ç­¾æ–°å»ºæ ‡ç­¾ï¼šcommand + t å…³é—­æ ‡ç­¾ï¼šcommand + w åˆ‡æ¢æ ‡ç­¾ï¼šcommand + æ•°å­— command + å·¦å³æ–¹å‘é”® åˆ‡æ¢å…¨å±ï¼šcommand + enter æŸ¥æ‰¾ï¼šcommand + f åˆ†å±å‚ç›´åˆ†å±ï¼šcommand + d æ°´å¹³åˆ†å±ï¼šcommand + shift + d åˆ‡æ¢å±å¹•ï¼šcommand + option + æ–¹å‘é”®command + [ æˆ– command + ] æŸ¥çœ‹å†å²å‘½ä»¤ï¼šcommand + ; æŸ¥çœ‹å‰ªè´´æ¿å†å²ï¼šcommand + shift + h å…¶ä»–æ¸…é™¤å½“å‰è¡Œï¼šctrl + u åˆ°è¡Œé¦–ï¼šctrl + a åˆ°è¡Œå°¾ï¼šctrl + e å‰è¿›åé€€ï¼šctrl + f/b (ç›¸å½“äºå·¦å³æ–¹å‘é”®) ä¸Šä¸€æ¡å‘½ä»¤ï¼šctrl + p æœç´¢å‘½ä»¤å†å²ï¼šctrl + r åˆ é™¤å½“å‰å…‰æ ‡çš„å­—ç¬¦ï¼šctrl + d åˆ é™¤å…‰æ ‡ä¹‹å‰çš„å­—ç¬¦ï¼šctrl + h åˆ é™¤å…‰æ ‡ä¹‹å‰çš„å•è¯ï¼šctrl + w åˆ é™¤åˆ°æ–‡æœ¬æœ«å°¾ï¼šctrl + k äº¤æ¢å…‰æ ‡å¤„æ–‡æœ¬ï¼šctrl + t æ¸…å±1ï¼šcommand + r æ¸…å±2ï¼šctrl + l è‡ªå¸¦æœ‰å“ªäº›å¾ˆå®ç”¨çš„åŠŸèƒ½/å¿«æ·é”®âŒ˜ + æ•°å­— åœ¨å„ tab æ ‡ç­¾ç›´æ¥æ¥å›åˆ‡æ¢ é€‰æ‹©å³å¤åˆ¶ + é¼ æ ‡ä¸­é”®ç²˜è´´ï¼Œè¿™ä¸ªå¾ˆå®ç”¨ âŒ˜ + f æ‰€æŸ¥æ‰¾çš„å†…å®¹ä¼šè¢«è‡ªåŠ¨å¤åˆ¶ âŒ˜ + d æ¨ªç€åˆ†å± /âŒ˜ + shift + d ç«–ç€åˆ†å± âŒ˜ + r = clearï¼Œè€Œä¸”åªæ˜¯æ¢åˆ°æ–°ä¸€å±ï¼Œä¸ä¼šæƒ³ clear ä¸€æ ·åˆ›å»ºä¸€ä¸ªç©ºå± ctrl + u æ¸…ç©ºå½“å‰è¡Œï¼Œæ— è®ºå…‰æ ‡åœ¨ä»€ä¹ˆä½ç½® è¾“å…¥å¼€å¤´å‘½ä»¤å æŒ‰ âŒ˜ + ; ä¼šè‡ªåŠ¨åˆ—å‡ºè¾“å…¥è¿‡çš„å‘½ä»¤ âŒ˜ + shift + h ä¼šåˆ—å‡ºå‰ªåˆ‡æ¿å†å² å¯ä»¥åœ¨ Preferences &gt; keys è®¾ç½®å…¨å±€å¿«æ·é”®è°ƒå‡º itermï¼Œè¿™ä¸ªä¹Ÿå¯ä»¥ç”¨è¿‡ Alfred å®ç° å¸¸ç”¨çš„ä¸€äº›å¿«æ·é”®âŒ˜ + 1 / 2 å·¦å³ tab ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œè¿™ä¸ªåœ¨ å‰é¢ å·²ç»ä»‹ç»è¿‡äº† âŒ˜â† / âŒ˜â†’ åˆ°ä¸€è¡Œå‘½ä»¤æœ€å·¦è¾¹/æœ€å³è¾¹ ï¼Œè¿™ä¸ªåŠŸèƒ½åŒ C+a / C+e âŒ¥â† / âŒ¥â†’ æŒ‰å•è¯å‰ç§»/åç§»ï¼Œç›¸å½“ä¸ C+f / C+bï¼Œå…¶å®è¿™ä¸ªåŠŸèƒ½åœ¨Itermä¸­å·²ç»é¢„å®šä¹‰å¥½äº†ï¼ŒâŒ¥f / âŒ¥bï¼Œçœ‹ä¸ªäººä¹ æƒ¯äº† å¥½åƒå°±è¿™å‡ ä¸ª è®¾ç½®æ–¹æ³•å¦‚ä¸‹ å½“ç„¶é™¤äº†è¿™äº›å¯ä»¥è‡ªå®šä¹‰çš„ä¹Ÿä¸èƒ½å¿˜äº† linux ä¸‹é‚£äº›å¥½ç”¨çš„ç»„åˆ C+a / C+e è¿™ä¸ªå‡ ä¹åœ¨å“ªéƒ½å¯ä»¥ä½¿ç”¨ C+p / !! ä¸Šä¸€æ¡å‘½ä»¤ C+k ä»å…‰æ ‡å¤„åˆ è‡³å‘½ä»¤è¡Œå°¾ (æœ¬æ¥ C+u æ˜¯åˆ è‡³å‘½ä»¤è¡Œé¦–ï¼Œä½†itermä¸­æ˜¯åˆ æ‰æ•´è¡Œ) C+w A+d ä»å…‰æ ‡å¤„åˆ è‡³å­—é¦–/å°¾ C+h C+d åˆ æ‰å…‰æ ‡å‰åçš„è‡ªè´Ÿ C+y ç²˜è´´è‡³å…‰æ ‡å C+r æœç´¢å‘½ä»¤å†å²ï¼Œè¿™ä¸ªè¾ƒå¸¸ç”¨ é€‰ä¸­å³å¤åˆ¶iterm2 æœ‰ 2 ç§å¥½ç”¨çš„é€‰ä¸­å³å¤åˆ¶æ¨¡å¼ã€‚ ä¸€ç§æ˜¯ç”¨é¼ æ ‡ï¼Œåœ¨ iterm2 ä¸­ï¼Œé€‰ä¸­æŸä¸ªè·¯å¾„æˆ–è€…æŸä¸ªè¯æ±‡ï¼Œé‚£ä¹ˆï¼Œiterm2 å°±è‡ª åŠ¨å¤åˆ¶äº†ã€‚ å¦ä¸€ç§æ˜¯æ— é¼ æ ‡æ¨¡å¼ï¼Œcommand+f,å¼¹å‡º iterm2 çš„æŸ¥æ‰¾æ¨¡å¼ï¼Œè¾“å…¥è¦æŸ¥æ‰¾å¹¶å¤åˆ¶çš„å†…å®¹çš„å‰å‡ ä¸ªå­—æ¯ï¼Œç¡®è®¤æ‰¾åˆ°çš„æ˜¯è‡ªå·±çš„å†…å®¹ä¹‹åï¼Œè¾“å…¥ tabï¼ŒæŸ¥æ‰¾çª—å£å°†è‡ªåŠ¨å˜åŒ–å†…å®¹ï¼Œå¹¶å°†å…¶å¤åˆ¶ã€‚å¦‚æœè¾“å…¥çš„æ˜¯ shift+tabï¼Œåˆ™è‡ªåŠ¨å°†æŸ¥æ‰¾å†…å®¹çš„å·¦è¾¹é€‰ä¸­å¹¶å¤åˆ¶ã€‚ è‡ªåŠ¨å®Œæˆè¾“å…¥æ‰“å¤´å‡ ä¸ªå­—æ¯ï¼Œç„¶åè¾“å…¥ command+; iterm2 å°†è‡ªåŠ¨åˆ—å‡ºä¹‹å‰è¾“å…¥è¿‡çš„ç±»ä¼¼å‘½ä»¤ã€‚ å‰ªåˆ‡å†å²è¾“å…¥ command+shift+hï¼Œiterm2 å°†è‡ªåŠ¨åˆ—å‡ºå‰ªåˆ‡æ¿çš„å†å²è®°å½•ã€‚å¦‚æœéœ€è¦å°†å‰ªåˆ‡æ¿çš„å†å²è®°å½•ä¿å­˜åˆ°ç£ç›˜ï¼Œåœ¨ Preferences &gt; General &gt; Save copy/paste history to disk ä¸­è®¾ç½®ã€‚ Aboutä¸ªäººç½‘ç«™ï¼šğŸ‘‰ https://microzz.com/ GitHubï¼šğŸ‘‰ https://github.com/microzz","tags":[{"name":"å¼€å‘è€…","slug":"å¼€å‘è€…","permalink":"https://microzz.com/tags/å¼€å‘è€…/"},{"name":"Mac","slug":"Mac","permalink":"https://microzz.com/tags/Mac/"},{"name":"iTerm2","slug":"iTerm2","permalink":"https://microzz.com/tags/iTerm2/"}]},{"title":"åŸç”ŸJSä¸­å¯¹è±¡ç›¸å…³APIåˆé›†","date":"2017-04-20T10:02:48.000Z","path":"2017/04/20/jsobject/","text":"åŸç”ŸJavaScriptä¸­å¯¹è±¡ç›¸å…³APIåˆé›†-å¯¹è±¡ç¯‡ç°åœ¨jQueryå·²ç»æ²¡æœ‰é‚£ä¹ˆæœ‰ä¼˜åŠ¿äº†ï¼ŒåŸç”ŸJSèµ¶ç´§å­¦èµ·æ¥ğŸ˜„é™„ï¼šğŸ‘‰åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†-DOMæ“ä½œç¯‡ğŸ‘‰åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†-CSSæ“ä½œç¯‡ Objectå¯¹è±¡ç”Ÿæˆå®ä¾‹å¯¹è±¡var o = new Object() å±æ€§Object.prototype //è¿”å›åŸå‹å¯¹è±¡ æ–¹æ³•Object.keys(o) //éå†å¯¹è±¡çš„å¯æšä¸¾å±æ€§ Object.getOwnPropertyName(o) //éå†å¯¹è±¡ä¸å¯æšä¸¾çš„å±æ€§ å¯¹è±¡å®ä¾‹çš„æ–¹æ³•valueOf // è¿”å›å½“å‰å¯¹è±¡å¯¹åº”çš„å€¼ã€‚ toString // è¿”å›å½“å‰å¯¹è±¡å¯¹åº”çš„å­—ç¬¦ä¸²å½¢å¼ã€‚ toLocaleString // è¿”å›å½“å‰å¯¹è±¡å¯¹åº”çš„æœ¬åœ°å­—ç¬¦ä¸²å½¢å¼ã€‚ hasOwnProperty // åˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦ä¸ºå½“å‰å¯¹è±¡è‡ªèº«çš„å±æ€§ï¼Œè¿˜æ˜¯ç»§æ‰¿è‡ªåŸå‹å¯¹è±¡çš„å±æ€§ã€‚ isPrototypeOf // åˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦ä¸ºå¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ã€‚ propertyIsEnumerable // åˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦å¯æšä¸¾ã€‚ Arrayå¯¹è±¡ç”Ÿæˆå®ä¾‹å¯¹è±¡var a = new Array() å±æ€§a.length // é•¿åº¦ Array.isArray()Array.isArray(a) // ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•°ç»„ Arrayå®ä¾‹çš„æ–¹æ³•a.valueof() // è¿”å›æ•°ç»„æœ¬èº« a.toString() // è¿”å›æ•°ç»„çš„å­—ç¬¦ä¸²å½¢å¼ a.push(value,vlaue....) // ç”¨äºåœ¨æ•°ç»„çš„æœ«ç«¯æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œ // å¹¶è¿”å›æ·»åŠ æ–°å…ƒç´ åçš„æ•°ç»„é•¿åº¦ã€‚ pop() // ç”¨äºåˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´  join() // ä»¥å‚æ•°ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå°†æ‰€æœ‰æ•°ç»„æˆå‘˜ç»„æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›ã€‚ // å¦‚æœä¸æä¾›å‚æ•°ï¼Œé»˜è®¤ç”¨é€—å·åˆ†éš”ã€‚ concat() // ç”¨äºå¤šä¸ªæ•°ç»„çš„åˆå¹¶ã€‚å®ƒå°†æ–°æ•°ç»„çš„æˆå‘˜ï¼Œ // æ·»åŠ åˆ°åŸæ•°ç»„çš„å°¾éƒ¨ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼ŒåŸæ•°ç»„ä¸å˜ã€‚ shift() // ç”¨äºåˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ ã€‚ unshift(value) // ç”¨äºåœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®æ·»åŠ å…ƒç´ ï¼Œ // å¹¶è¿”å›æ·»åŠ æ–°å…ƒç´ åçš„æ•°ç»„é•¿åº¦ã€‚ reverse() // ç”¨äºé¢ å€’æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåºï¼Œè¿”å›æ”¹å˜åçš„æ•°ç»„ slice(start_index, upto_index) // ç”¨äºæå–åŸæ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼ŒåŸæ•°ç»„ä¸å˜ã€‚ // ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºèµ·å§‹ä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç»ˆæ­¢ä½ç½® // ï¼ˆä½†è¯¥ä½ç½®çš„å…ƒç´ æœ¬èº«ä¸åŒ…æ‹¬åœ¨å†…ï¼‰ã€‚ // å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ä¸€ç›´è¿”å›åˆ°åŸæ•°ç»„çš„æœ€åä¸€ä¸ªæˆå‘˜ã€‚ // è´Ÿæ•°è¡¨ç¤ºå€’æ•°ç¬¬å‡ ä¸ªã€‚ splice(index, count_to_remove, addElement1, addElement2, ...); // ç”¨äºåˆ é™¤åŸæ•°ç»„çš„ä¸€éƒ¨åˆ†æˆå‘˜ï¼Œå¹¶å¯ä»¥åœ¨è¢«åˆ é™¤çš„ä½ç½®æ·»åŠ å…¥æ–°çš„æ•°ç»„æˆå‘˜ï¼Œ // è¿”å›å€¼æ˜¯è¢«åˆ é™¤çš„å…ƒç´ ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åˆ é™¤çš„èµ·å§‹ä½ç½®ï¼Œ // ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¢«åˆ é™¤çš„å…ƒç´ ä¸ªæ•°ã€‚å¦‚æœåé¢è¿˜æœ‰æ›´å¤šçš„å‚æ•°ï¼Œ // åˆ™è¡¨ç¤ºè¿™äº›å°±æ˜¯è¦è¢«æ’å…¥æ•°ç»„çš„æ–°å…ƒç´ ã€‚ sort() // å¯¹æ•°ç»„æˆå‘˜è¿›è¡Œæ’åºï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å­—å…¸é¡ºåºæ’åºã€‚ // æ’åºåï¼ŒåŸæ•°ç»„å°†è¢«æ”¹å˜ã€‚å¦‚æœæƒ³è®©sortæ–¹æ³•æŒ‰ç…§è‡ªå®šä¹‰æ–¹å¼æ’åºï¼Œ // å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºæŒ‰ç…§è‡ªå®šä¹‰æ–¹æ³•è¿›è¡Œæ’åºã€‚ // è¯¥å‡½æ•°æœ¬èº«åˆæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿›è¡Œæ¯”è¾ƒçš„ä¸¤ä¸ªå…ƒç´ ã€‚ // å¦‚æœè¿”å›å€¼å¤§äº0ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå…ƒç´ æ’åœ¨ç¬¬äºŒä¸ªå…ƒç´ åé¢ï¼› // å…¶ä»–æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ æ’åœ¨ç¬¬äºŒä¸ªå…ƒç´ å‰é¢ã€‚ map() // å¯¹æ•°ç»„çš„æ‰€æœ‰æˆå‘˜ä¾æ¬¡è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®å‡½æ•°ç»“æœè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚ map(elem,index,arr) // mapæ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ // è¯¥å‡½æ•°è°ƒç”¨æ—¶ï¼Œmapæ–¹æ³•ä¼šå°†å…¶ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œ // åˆ†åˆ«æ˜¯å½“å‰æˆå‘˜ã€å½“å‰ä½ç½®å’Œæ•°ç»„æœ¬èº«ã€‚ forEach() // éå†æ•°ç»„çš„æ‰€æœ‰æˆå‘˜ï¼Œæ‰§è¡ŒæŸç§æ“ä½œ,å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ // å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å½“å‰ä½ç½®çš„å€¼ã€å½“å‰ä½ç½®çš„ç¼–å·å’Œæ•´ä¸ªæ•°ç»„ã€‚ filter() // å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å‡½æ•°ï¼Œ // è¿”å›ç»“æœä¸ºtrueçš„æˆå‘˜ç»„æˆä¸€ä¸ªæ–°æ•°ç»„è¿”å›ã€‚è¯¥æ–¹æ³•ä¸ä¼šæ”¹å˜åŸæ•°ç»„ã€‚ some() // ç”¨æ¥åˆ¤æ–­æ•°ç»„æˆå‘˜æ˜¯å¦ç¬¦åˆæŸç§æ¡ä»¶ã€‚ // æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ // è¯¥å‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡æ˜¯å½“å‰ä½ç½®çš„æˆå‘˜ã€å½“å‰ä½ç½®çš„åºå·å’Œæ•´ä¸ªæ•°ç»„ã€‚ // åªè¦æœ‰ä¸€ä¸ªæ•°ç»„æˆå‘˜çš„è¿”å›å€¼æ˜¯trueï¼Œåˆ™æ•´ä¸ªsomeæ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯trueï¼Œå¦åˆ™falseã€‚ every() // ç”¨æ¥åˆ¤æ–­æ•°ç»„æˆå‘˜æ˜¯å¦ç¬¦åˆæŸç§æ¡ä»¶ã€‚ // æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ // è¯¥å‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡æ˜¯å½“å‰ä½ç½®çš„æˆå‘˜ã€å½“å‰ä½ç½®çš„åºå·å’Œæ•´ä¸ªæ•°ç»„ã€‚ // æ‰€æœ‰æ•°ç»„æˆå‘˜çš„è¿”å›å€¼éƒ½æ˜¯trueï¼Œæ‰è¿”å›trueï¼Œå¦åˆ™falseã€‚ reduce() // ä¾æ¬¡å¤„ç†æ•°ç»„çš„æ¯ä¸ªæˆå‘˜ï¼Œæœ€ç»ˆç´¯è®¡ä¸ºä¸€ä¸ªå€¼ã€‚ // ä»å·¦åˆ°å³å¤„ç†ï¼ˆä»ç¬¬ä¸€ä¸ªæˆå‘˜åˆ°æœ€åä¸€ä¸ªæˆå‘˜ï¼‰ reduceRight() // ä¾æ¬¡å¤„ç†æ•°ç»„çš„æ¯ä¸ªæˆå‘˜ï¼Œæœ€ç»ˆç´¯è®¡ä¸ºä¸€ä¸ªå€¼ã€‚ // ä»å³åˆ°å·¦ï¼ˆä»æœ€åä¸€ä¸ªæˆå‘˜åˆ°ç¬¬ä¸€ä¸ªæˆå‘˜ï¼‰ indexOf(s) // è¿”å›ç»™å®šå…ƒç´ åœ¨æ•°ç»„ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚ // å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæœç´¢çš„å¼€å§‹ä½ç½® lastIndexOf() // è¿”å›ç»™å®šå…ƒç´ åœ¨æ•°ç»„ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚ Numberå¯¹è±¡ç”Ÿæˆå¯¹è±¡var n = new Number() Numberå¯¹è±¡çš„å±æ€§Number.POSITIVE_INFINITY // æ­£çš„æ— é™ï¼ŒæŒ‡å‘Infinityã€‚ Number.NEGATIVE_INFINITY // è´Ÿçš„æ— é™ï¼ŒæŒ‡å‘-Infinityã€‚ Number.NaN // è¡¨ç¤ºéæ•°å€¼ï¼ŒæŒ‡å‘NaNã€‚ Number.MAX_VALUE // è¡¨ç¤ºæœ€å¤§çš„æ­£æ•°ï¼Œç›¸åº”çš„ï¼Œæœ€å°çš„è´Ÿæ•°ä¸º-Number.MAX_VALUEã€‚ Number.MIN_VALUE // è¡¨ç¤ºæœ€å°çš„æ­£æ•°ï¼ˆå³æœ€æ¥è¿‘0çš„æ­£æ•°ï¼Œåœ¨64ä½æµ®ç‚¹æ•°ä½“ç³»ä¸­ä¸º5e-324ï¼‰ï¼Œ // ç›¸åº”çš„ï¼Œæœ€æ¥è¿‘0çš„è´Ÿæ•°ä¸º-Number.MIN_VALUEã€‚ Number.MAX_SAFE_INTEGER // è¡¨ç¤ºèƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºçš„æœ€å¤§æ•´æ•°ï¼Œå³9007199254740991ã€‚ Number.MIN_SAFE_INTEGER // è¡¨ç¤ºèƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºçš„æœ€å°æ•´æ•°ï¼Œå³-9007199254740991ã€‚ Numberå¯¹è±¡å®ä¾‹çš„æ–¹æ³•toString() // ç”¨æ¥å°†ä¸€ä¸ªæ•°å€¼è½¬ä¸ºå­—ç¬¦ä¸²å½¢å¼.å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¾“å‡ºçš„è¿›åˆ¶ã€‚ // å¦‚æœçœç•¥è¿™ä¸ªå‚æ•°ï¼Œé»˜è®¤å°†æ•°å€¼å…ˆè½¬ä¸ºåè¿›åˆ¶ï¼Œå†è¾“å‡ºå­—ç¬¦ä¸²ï¼› // å¦åˆ™ï¼Œå°±æ ¹æ®å‚æ•°æŒ‡å®šçš„è¿›åˆ¶ï¼Œå°†ä¸€ä¸ªæ•°å­—è½¬åŒ–æˆæŸä¸ªè¿›åˆ¶çš„å­—ç¬¦ä¸²ã€‚ toFixed() // ç”¨äºå°†ä¸€ä¸ªæ•°è½¬ä¸ºæŒ‡å®šä½æ•°çš„å°æ•°ï¼Œè¿”å›è¿™ä¸ªå°æ•°å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚ toExponential() // ç”¨äºå°†ä¸€ä¸ªæ•°è½¬ä¸ºç§‘å­¦è®¡æ•°æ³•å½¢å¼ã€‚ //å¯ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°è¡¨ç¤ºå°æ•°ç‚¹åæœ‰æ•ˆæ•°å­—çš„ä½æ•°ï¼ŒèŒƒå›´ä¸º0åˆ°20ï¼Œ // è¶…å‡ºè¿™ä¸ªèŒƒå›´ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªRangeErrorã€‚ toPrecision() // ç”¨äºå°†ä¸€ä¸ªæ•°è½¬ä¸ºæŒ‡å®šä½æ•°çš„æœ‰æ•ˆæ•°å­—ã€‚ String å¯¹è±¡ç”Ÿæˆå®ä¾‹å¯¹è±¡var s = new String() Stringå¯¹è±¡çš„å±æ€§s.length //è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ æ–¹æ³•s.chatAt(index) // è¿”å›æŒ‡å®šä½ç½®çš„å­—ç¬¦ s.fromCharCode() // è¯¥æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ç³»åˆ—Unicodeç ç‚¹ï¼Œè¿”å›å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚ s.charCodeAt(index) // è¿”å›ç»™å®šä½ç½®å­—ç¬¦çš„Unicodeç ç‚¹ï¼ˆåè¿›åˆ¶è¡¨ç¤ºï¼‰ s.concat(s2) // ç”¨äºè¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸² s.slice(start,end) // ç”¨äºä»åŸå­—ç¬¦ä¸²å–å‡ºå­å­—ç¬¦ä¸²å¹¶è¿”å›ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸²ã€‚ // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ï¼ˆä¸å«è¯¥ä½ç½®ï¼‰ã€‚ // å¦‚æœå‚æ•°æ˜¯è´Ÿå€¼ï¼Œè¡¨ç¤ºä»ç»“å°¾å¼€å§‹å€’æ•°è®¡ç®—çš„ä½ç½®ï¼Œå³è¯¥è´Ÿå€¼åŠ ä¸Šå­—ç¬¦ä¸²é•¿åº¦ã€‚ s.substring(start,end) // ç”¨äºä»åŸå­—ç¬¦ä¸²å–å‡ºå­å­—ç¬¦ä¸²å¹¶è¿”å›ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸². // ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå­å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªä½ç½®è¡¨ç¤ºç»“æŸä½ç½®ã€‚ s.substr(start,length) // ç”¨äºä»åŸå­—ç¬¦ä¸²å–å‡ºå­å­—ç¬¦ä¸²å¹¶è¿”å›ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸²ã€‚ // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ // å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è´Ÿæ•°ï¼Œè¡¨ç¤ºå€’æ•°è®¡ç®—çš„å­—ç¬¦ä½ç½®ã€‚ // å¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯è´Ÿæ•°ï¼Œå°†è¢«è‡ªåŠ¨è½¬ä¸º0ï¼Œå› æ­¤ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚ s.indexOf(s) // è¿”å›ç»™å®šå…ƒç´ åœ¨å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚ // å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæœç´¢çš„å¼€å§‹ä½ç½® s.lastIndexOf() // è¿”å›ç»™å®šå…ƒç´ åœ¨å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚ s.trim() // ç”¨äºå»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼ï¼Œè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸² s.toLowerCase() // ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå°å†™,è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸²ã€‚ s.toUpperCase() // å…¨éƒ¨è½¬ä¸ºå¤§å†™ s.localeCompare(s2) // ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚å®ƒè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œå¦‚æœå°äº0ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å°äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼› // å¦‚æœç­‰äº0ï¼Œè¡¨ç¤ºä¸¤è€…ç›¸ç­‰ï¼›å¦‚æœå¤§äº0ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å¤§äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ã€‚ s.match(regexp) // ç”¨äºç¡®å®šåŸå­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…æŸä¸ªå­å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œ // æˆå‘˜ä¸ºåŒ¹é…çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…ï¼Œåˆ™è¿”å›nullã€‚ s.search() // è¿”å›å€¼ä¸ºåŒ¹é…çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…ï¼Œåˆ™è¿”å›-1ã€‚ s.replace(oldValue,newValue) // ç”¨äºæ›¿æ¢åŒ¹é…çš„å­å­—ç¬¦ä¸²ï¼Œä¸€èˆ¬æƒ…å†µä¸‹åªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é… // ï¼ˆé™¤éä½¿ç”¨å¸¦æœ‰gä¿®é¥°ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚ s.split() // æŒ‰ç…§ç»™å®šè§„åˆ™åˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªç”±åˆ†å‰²å‡ºæ¥çš„å­å­—ç¬¦ä¸²ç»„æˆçš„æ•°ç»„ã€‚ // è¿˜å¯ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå†³å®šäº†è¿”å›æ•°ç»„çš„æˆå‘˜æ•°ã€‚ Mathå¯¹è±¡å±æ€§Math.E // å¸¸æ•°eã€‚ Math.LN2 // 2çš„è‡ªç„¶å¯¹æ•°ã€‚ Math.LN10 // 10çš„è‡ªç„¶å¯¹æ•°ã€‚ Math.LOG2E // ä»¥2ä¸ºåº•çš„eçš„å¯¹æ•°ã€‚ Math.LOG10E // ä»¥10ä¸ºåº•çš„eçš„å¯¹æ•°ã€‚ Math.PI // å¸¸æ•°Piã€‚ Math.SQRT1_2 // 0.5çš„å¹³æ–¹æ ¹ã€‚ Math.SQRT2 // 2çš„å¹³æ–¹æ ¹ã€‚ æ•°å­¦æ–¹æ³•Math.abs() // è¿”å›å‚æ•°çš„ç»å¯¹å€¼ Math.ceil() // å‘ä¸Šå–æ•´ï¼Œæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›å¤§äºè¯¥å‚æ•°çš„æœ€å°æ•´æ•°ã€‚ Math.floor() // å‘ä¸‹å–æ•´ Math.max(n,n1,...) // å¯æ¥å—å¤šä¸ªå‚æ•°ï¼Œè¿”å›æœ€å¤§å€¼ Math.min(n,n1,..) // å¯æ¥å—å¤šä¸ªå‚æ•°ï¼Œè¿”å›æœ€å°å€¼ Math.pow(n,e) // æŒ‡æ•°è¿ç®—, è¿”å›ä»¥ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåº•æ•°ã€ç¬¬äºŒä¸ªå‚æ•°ä¸ºå¹‚çš„æŒ‡æ•°å€¼ã€‚ Math.sqrt() // è¿”å›å‚æ•°å€¼çš„å¹³æ–¹æ ¹ã€‚å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªè´Ÿå€¼ï¼Œåˆ™è¿”å›NaNã€‚ Math.log() // è¿”å›ä»¥eä¸ºåº•çš„è‡ªç„¶å¯¹æ•°å€¼ã€‚ Math.exp() // è¿”å›eçš„æŒ‡æ•°ï¼Œä¹Ÿå°±æ˜¯å¸¸æ•°eçš„å‚æ•°æ¬¡æ–¹ã€‚ Math.round() // å››èˆäº”å…¥ Math.random() //è¿”å›0åˆ°1ä¹‹é—´çš„ä¸€ä¸ªä¼ªéšæœºæ•°ï¼Œå¯èƒ½ç­‰äº0ï¼Œä½†æ˜¯ä¸€å®šå°äº1ã€‚ ä¸‰è§’å‡½æ•°æ–¹æ³•Math.sin() // è¿”å›å‚æ•°çš„æ­£å¼¦ Math.cos() // è¿”å›å‚æ•°çš„ä½™å¼¦ Math.tan() // è¿”å›å‚æ•°çš„æ­£åˆ‡ Math.asin() // è¿”å›å‚æ•°çš„åæ­£å¼¦ï¼ˆå¼§åº¦å€¼ï¼‰ Math.acos() // è¿”å›å‚æ•°çš„åä½™å¼¦ï¼ˆå¼§åº¦å€¼ï¼‰ Math.atan() // è¿”å›å‚æ•°çš„åæ­£åˆ‡ï¼ˆå¼§åº¦å€¼ï¼‰ JSONå¯¹è±¡æ–¹æ³•JSON.stringify() // ç”¨äºå°†ä¸€ä¸ªå€¼è½¬ä¸ºå­—ç¬¦ä¸²ã€‚è¯¥å­—ç¬¦ä¸²åº”è¯¥ç¬¦åˆJSONæ ¼å¼ï¼Œå¹¶ä¸”å¯ä»¥è¢«JSON.parseæ–¹æ³•è¿˜åŸã€‚ //ï¼ˆJSON.stringify(obj, selectedProperties)ï¼‰è¿˜å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œ // ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‡å®šéœ€è¦è½¬æˆå­—ç¬¦ä¸²çš„å±æ€§ã€‚ // è¿˜å¯ä»¥æ¥å—ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºå¢åŠ è¿”å›çš„JSONå­—ç¬¦ä¸²çš„å¯è¯»æ€§ã€‚ // å¦‚æœæ˜¯æ•°å­—ï¼Œè¡¨ç¤ºæ¯ä¸ªå±æ€§å‰é¢æ·»åŠ çš„ç©ºæ ¼ï¼ˆæœ€å¤šä¸è¶…è¿‡10ä¸ªï¼‰ï¼› // å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼ˆä¸è¶…è¿‡10ä¸ªå­—ç¬¦ï¼‰ï¼Œåˆ™è¯¥å­—ç¬¦ä¸²ä¼šæ·»åŠ åœ¨æ¯è¡Œå‰é¢ã€‚ JSON.parse() //ç”¨äºå°†JSONå­—ç¬¦ä¸²è½¬åŒ–æˆå¯¹è±¡ã€‚ consoleå¯¹è±¡æ–¹æ³•console.log(text,text2,...) // ç”¨äºåœ¨consoleçª—å£è¾“å‡ºä¿¡æ¯ã€‚ // å®ƒå¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ï¼Œå°†å®ƒä»¬çš„ç»“æœè¿æ¥èµ·æ¥è¾“å‡ºã€‚ // å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ ¼å¼å­—ç¬¦ä¸²ï¼ˆä½¿ç”¨äº†æ ¼å¼å ä½ç¬¦ï¼‰ï¼Œ // console.logæ–¹æ³•å°†ä¾æ¬¡ç”¨åé¢çš„å‚æ•°æ›¿æ¢å ä½ç¬¦ï¼Œç„¶åå†è¿›è¡Œè¾“å‡ºã€‚ console.info() // åœ¨consoleçª—å£è¾“å‡ºä¿¡æ¯ï¼Œ // åŒæ—¶ï¼Œä¼šåœ¨è¾“å‡ºä¿¡æ¯çš„å‰é¢ï¼ŒåŠ ä¸Šä¸€ä¸ªè“è‰²å›¾æ ‡ã€‚ console.debug() // åœ¨consoleçª—å£è¾“å‡ºä¿¡æ¯ï¼Œ // åŒæ—¶ï¼Œä¼šåœ¨è¾“å‡ºä¿¡æ¯çš„å‰é¢ï¼ŒåŠ ä¸Šä¸€ä¸ªè“è‰²å›¾æ ‡ã€‚ console.warn() // è¾“å‡ºä¿¡æ¯æ—¶ï¼Œåœ¨æœ€å‰é¢åŠ ä¸€ä¸ªé»„è‰²ä¸‰è§’ï¼Œè¡¨ç¤ºè­¦å‘Šï¼› console.error() // è¾“å‡ºä¿¡æ¯æ—¶ï¼Œåœ¨æœ€å‰é¢åŠ ä¸€ä¸ªçº¢è‰²çš„å‰ï¼Œ // è¡¨ç¤ºå‡ºé”™ï¼ŒåŒæ—¶ä¼šæ˜¾ç¤ºé”™è¯¯å‘ç”Ÿçš„å †æ ˆ console.table() // å¯ä»¥å°†å¤åˆç±»å‹çš„æ•°æ®è½¬ä¸ºè¡¨æ ¼æ˜¾ç¤ºã€‚ console.count() // ç”¨äºè®¡æ•°ï¼Œè¾“å‡ºå®ƒè¢«è°ƒç”¨äº†å¤šå°‘æ¬¡ã€‚ console.dir() // ç”¨æ¥å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ£€æŸ¥ï¼ˆinspectï¼‰ï¼Œ // å¹¶ä»¥æ˜“äºé˜…è¯»å’Œæ‰“å°çš„æ ¼å¼æ˜¾ç¤ºã€‚ console.dirxml() // ç”¨äºä»¥ç›®å½•æ ‘çš„å½¢å¼ï¼Œæ˜¾ç¤ºDOMèŠ‚ç‚¹ã€‚ console.assert() // æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ã€‚ // åªæœ‰å½“ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºfalseï¼Œæ‰ä¼šè¾“å‡ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™ä¸ä¼šæœ‰ä»»ä½•ç»“æœã€‚ // è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºè®¡æ—¶ï¼Œå¯ä»¥ç®—å‡ºä¸€ä¸ªæ“ä½œæ‰€èŠ±è´¹çš„å‡†ç¡®æ—¶é—´ã€‚ console.time() console.timeEnd() // timeæ–¹æ³•è¡¨ç¤ºè®¡æ—¶å¼€å§‹ï¼ŒtimeEndæ–¹æ³•è¡¨ç¤ºè®¡æ—¶ç»“æŸã€‚ // å®ƒä»¬çš„å‚æ•°æ˜¯è®¡æ—¶å™¨çš„åç§°ã€‚ // è°ƒç”¨timeEndæ–¹æ³•ä¹‹åï¼Œconsoleçª—å£ä¼šæ˜¾ç¤ºâ€œè®¡æ—¶å™¨åç§°: // æ‰€è€—è´¹çš„æ—¶é—´â€ã€‚ console.profile() // ç”¨æ¥æ–°å»ºä¸€ä¸ªæ€§èƒ½æµ‹è¯•å™¨ï¼ˆprofileï¼‰ï¼Œ // å®ƒçš„å‚æ•°æ˜¯æ€§èƒ½æµ‹è¯•å™¨çš„åå­—ã€‚ console.profileEnd() // ç”¨æ¥ç»“æŸæ­£åœ¨è¿è¡Œçš„æ€§èƒ½æµ‹è¯•å™¨ã€‚ console.group() console.groupend() // ä¸Šé¢è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºå°†æ˜¾ç¤ºçš„ä¿¡æ¯åˆ†ç»„ã€‚ // å®ƒåªåœ¨è¾“å‡ºå¤§é‡ä¿¡æ¯æ—¶æœ‰ç”¨ï¼Œåˆ†åœ¨ä¸€ç»„çš„ä¿¡æ¯ï¼Œå¯ä»¥ç”¨é¼ æ ‡æŠ˜å /å±•å¼€ã€‚ console.groupCollapsed() // ç”¨äºå°†æ˜¾ç¤ºçš„ä¿¡æ¯åˆ†ç»„ï¼Œè¯¥ç»„çš„å†…å®¹ï¼Œ //åœ¨ç¬¬ä¸€æ¬¡æ˜¾ç¤ºæ—¶æ˜¯æ”¶èµ·çš„ï¼ˆcollapsedï¼‰ï¼Œè€Œä¸æ˜¯å±•å¼€çš„ã€‚ console.trace() // æ˜¾ç¤ºå½“å‰æ‰§è¡Œçš„ä»£ç åœ¨å †æ ˆä¸­çš„è°ƒç”¨è·¯å¾„ã€‚ console.clear() // ç”¨äºæ¸…é™¤å½“å‰æ§åˆ¶å°çš„æ‰€æœ‰è¾“å‡ºï¼Œå°†å…‰æ ‡å›ç½®åˆ°ç¬¬ä¸€è¡Œã€‚ AboutGitHubï¼šğŸ‘‰ https://github.com/microzzä¸ªäººç½‘ç«™ï¼šğŸ‘‰ https://microzz.com/","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"Object","slug":"Object","permalink":"https://microzz.com/tags/Object/"}]},{"title":"Vue.jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒº","date":"2017-04-17T09:04:19.000Z","path":"2017/04/17/vue-cnode/","text":"Vue.jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒºVue.jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒºï¼Œå®ç°äº†æµè§ˆã€å‘å¸–ã€æ”¶è—ã€å›å¤ã€ç‚¹èµã€ä¸ªäººä¸­å¿ƒç­‰ç­‰åŠŸèƒ½ã€‚ æºä»£ç æºä»£ç åœ°å€ï¼šğŸ‘‰ https://github.com/microzz/vue-cnode æ¬¢è¿å¤§å®¶starå’ŒforkğŸ˜„ é¢„è§ˆåœ¨çº¿é¢„è§ˆåœ°å€ï¼šğŸ‘‰ https://microzz.com/vue-cnode/ æŠ€æœ¯æ ˆ Vue2.0ï¼šå‰ç«¯é¡µé¢å±•ç¤ºã€‚ Vuexï¼šVuexï¼Œå®ç°ä¸åŒç»„ä»¶é—´çš„çŠ¶æ€å…±äº« vue-routerï¼šé¡µé¢è·¯ç”±åˆ‡æ¢ axiosï¼šä¸€ä¸ªåŸºäº Promise çš„ HTTP åº“ï¼Œå‘åç«¯å‘èµ·è¯·æ±‚ã€‚ Expressã€Koa2ï¼šå› ä¸ºvue-cliç”Ÿæˆçš„é¡¹ç›®æ˜¯åŸºäºexpressçš„ï¼Œæ‰€ä»¥åœ¨å¼€å‘é˜¶æ®µæˆ‘ä½¿ç”¨çš„æ˜¯å®ƒï¼Œä½†æ˜¯çœŸæ­£ä¸Šçº¿ç”Ÿäº§ç¯å¢ƒæˆ‘æ¢æˆäº†Koa2ã€‚ Moment.jsï¼šä¸€ä¸ªæ—¶é—´å¤„ç†çš„åº“ï¼Œæ–¹ä¾¿å¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–æˆéœ€è¦çš„æ ¼å¼ï¼Œå¦‚ä¸»é¢˜ã€å›å¤æ—¶é—´æ˜¾ç¤ºâ€ åˆ†é’Ÿå‰ã€ å°æ—¶å‰ã€*å¤©å‰â€ç­‰ç­‰ã€‚ ES6ã€ES7ï¼šé‡‡ç”¨ES6è¯­æ³•ï¼Œè¿™æ˜¯ä»¥åçš„è¶‹åŠ¿ã€‚ç®­å¤´å‡½æ•°ã€Promiseç­‰ç­‰è¯­æ³•å¾ˆå¥½ç”¨ã€‚ localStorageï¼šä¿å­˜ç”¨æˆ·ä¿¡æ¯ã€‚ Canvasï¼šé¡µé¢é¡¶éƒ¨å°é›ªèŠ±æ•ˆæœã€‚ Webpackï¼švue-cliè‡ªå¸¦Webpackï¼Œä½†æ˜¯éœ€è¦è‡ªå·±æ”¹é€ ä¸€ä¸‹ï¼Œæ¯”å¦‚è¦å¯¹éœ€è¦å®‰è£…sassç›¸å…³loaderï¼Œvue-cliå·²ç»é…ç½®å¥½äº†webpackï¼Œä½ åªéœ€è¦å®‰è£…ä¾èµ–å°±å¯ä»¥ï¼Œä½¿ç”¨çš„æ—¶å€™åªéœ€è¦&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;ã€‚ SASS(SCSS)ï¼šç”¨SCSSåšCSSé¢„å¤„ç†è¯­è¨€ï¼Œæœ‰äº›åœ°æ–¹å¾ˆæ–¹ä¾¿ï¼Œä¸ªäººå¾ˆå–œæ¬¢ç”¨ã€‚(è¯¦çœ‹ğŸ‘‰SASSç”¨æ³•æŒ‡å—) flexï¼šflexå¼¹æ€§å¸ƒå±€ï¼Œç®€å•é€‚é…æ‰‹æœºã€PCç«¯ã€‚ CSS3ï¼šCSS3è¿‡æ¸¡åŠ¨ç”»åŠæ ·å¼ã€‚ æ€»ç»“ ç»„ä»¶çŠ¶æ€å¤šäº†ç”¨Vuexç®¡ç†å¾ˆæ–¹ä¾¿ï¼Œå¼•ç”¨ Redux çš„ä½œè€… Dan Abramov çš„è¯è¯´å°±æ˜¯ï¼š Flux æ¶æ„å°±åƒçœ¼é•œï¼šæ‚¨è‡ªä¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å®ƒã€‚ äº‹å…ˆä¸€å®šè¦å…ˆæƒ³å¥½æ•´ä¸ªé¡µé¢ç»„æˆï¼Œæ€æ ·å»åˆ†ç»„ä»¶å¼€å‘ï¼Œè¿™æ ·åœ¨å¼€å‘é˜¶æ®µä¼šäº‹åŠåŠŸå€ã€‚ Moment.jsåœ¨Vueä¸­ç”¨ES6çš„æ–¹å¼å¼•å…¥ä¼šæœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•åœ¨main.jså°è¯•è¿™æ ·import moment from &#39;moment&#39; Vue.prototype.moment = moment;ç»™Vueçš„åŸå‹ä¸Šæ·»åŠ momentï¼Œè¿™æ ·å°±å¯ä»¥åœ¨Vueçš„å®ä¾‹ä¸­éšæ„ä½¿ç”¨å®ƒäº†ã€‚ é¡¹ç›®ç»“æ„å¦‚ä¸‹å›¾ Vue-CNode æ—¶é—´è½¨è¿¹ 4.13ï¼šåŸºæœ¬åŠŸèƒ½å®Œæˆï¼Œåç»­å®Œæˆç™»å½•åçš„æ“ä½œã€‚ 4.14ï¼šå®Œæˆç™»å½•ä»¥åŠä¾§è¾¹æ ã€‚ 4.15ï¼šå¢åŠ æ”¶è— 4.16ï¼šåŠ å…¥å›å¤ã€å•æ¡å›å¤ã€ç‚¹èµã€‚é¡¹ç›®å®Œæˆã€‚ Aboutæºä»£ç åœ°å€ï¼šğŸ‘‰ GitHub ä¸ªäººç½‘ç«™ï¼šğŸ‘‰ microzz.com GitHubï¼šğŸ‘‰ microzz Build Setup# install dependencies npm install # serve with hot reload at localhost:8080 npm run dev # build for production with minification npm run build # build for production and view the bundle analyzer report npm run build --report","tags":[{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Vue.js","slug":"Vue-js","permalink":"https://microzz.com/tags/Vue-js/"},{"name":"SCSS","slug":"SCSS","permalink":"https://microzz.com/tags/SCSS/"},{"name":"Vuex","slug":"Vuex","permalink":"https://microzz.com/tags/Vuex/"}]},{"title":"åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†","date":"2017-04-14T14:42:43.000Z","path":"2017/04/14/jscss/","text":"åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†-CSSæ“ä½œç¯‡ç±»åæ“ä½œ//ie8ä»¥ä¸‹ Element.className //è·å–å…ƒç´ èŠ‚ç‚¹çš„ç±»å Element.className += &#39; &#39; + newClassName //æ–°å¢ä¸€ä¸ªç±»å //åˆ¤æ–­æ˜¯å¦æœ‰æŸä¸ªç±»å function hasClass(element,className){ return new RegExp(className,&#39;gi&#39;).test(element.className); } //ç§»é™¤class function removeClass(element,className){ element.className = element.className.replace(new RegExp(&#39;(^|\\\\b)&#39; + className.split(&#39; &#39;).join(&#39;|&#39;) + &#39;(\\\\b|$)&#39;, &#39;gi&#39;),&#39;&#39;); } //ie10 element.classList.add(className) //æ–°å¢ element.classList.remove(className) //åˆ é™¤ element.classList.contains(className) //æ˜¯å¦åŒ…å« element.classList.toggle(className) //toggle class styleæ“ä½œelement.setAttribute(&#39;style&#39;,&#39;&#39;) element.style.backgroundColor = &#39;red&#39; element.style.cssText //ç”¨æ¥è¯»å†™æˆ–åˆ é™¤æ•´ä¸ªstyleå±æ€§ element.style.setProperty(propertyName,value) //è®¾ç½®csså±æ€§ element.style.getPropertyValue(property) //è·å–csså±æ€§ element.style.removeProperty(property) //åˆ é™¤csså±æ€§ æ“ä½œéå†…è”æ ·å¼ //ie8 element.currentStyle[attrName] //ie9+ window.getComputedStyle(el,null)[attrName] window.getComputedStyle(el,null).getPropertyValue(attrName) //ä¼ªç±» window.getComputedStyle(el,&#39;:after&#39;)[attrName] é™„å½•ğŸ‘‰ åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›† Aboutä¸ªäººç½‘ç«™ï¼šğŸ‘‰ https://microzz.com/ GitHubï¼šğŸ‘‰ https://github.com/microzz","tags":[{"name":"API","slug":"API","permalink":"https://microzz.com/tags/API/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"CSS","slug":"CSS","permalink":"https://microzz.com/tags/CSS/"}]},{"title":"ä¸Šæ‰‹Weexè¸©åˆ°çš„å‘ é•¿æœŸæ›´æ–°","date":"2017-04-12T00:56:29.000Z","path":"2017/04/12/weex-start/","text":"ä¸Šæ‰‹Weexè¸©åˆ°çš„å‘ é•¿æœŸæ›´æ–°weex-toolkit VS weexpackå®˜æ–¹å‡ºäº†ä¸¤ä¸ªè„šæ‰‹æ¶å·¥å…·ï¼šweex-toolkitã€weexpackã€‚ weex-toolkit æ˜¯å®˜æ–¹æä¾›çš„ä¸€ä¸ªè„šæ‰‹æ¶å‘½ä»¤è¡Œå·¥å…·ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒè¿›è¡Œ Weex é¡¹ç›®çš„åˆ›å»ºï¼Œè°ƒè¯•ä»¥åŠæ‰“åŒ…ç­‰åŠŸèƒ½ã€‚ weexpack æ˜¯åŸºäº Weex å¿«é€Ÿæ­å»ºåº”ç”¨åŸå‹çš„åˆ©å™¨ã€‚å®ƒèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…é€šè¿‡å‘½ä»¤è¡Œåˆ›å»º Weex å·¥ç¨‹ï¼Œæ·»åŠ ç›¸åº”å¹³å°çš„ Weex app æ¨¡ç‰ˆï¼Œå¹¶åŸºäºæ¨¡ç‰ˆä»æœ¬åœ°ï¼ŒGitHub æˆ–è€… Weex åº”ç”¨å¸‚åœºå®‰è£…æ’ä»¶ï¼Œå¿«é€Ÿæ‰“åŒ… Weex åº”ç”¨å¹¶å®‰è£…åˆ°æ‰‹æœºè¿è¡Œï¼Œå¯¹äºå…·æœ‰åˆ†äº«ç²¾ç¥çš„å¼€å‘è€…è€Œè¨€è¿˜èƒ½å¤Ÿåˆ›å»º Weex æ’ä»¶æ¨¡ç‰ˆå¹¶å‘å¸ƒæ’ä»¶åˆ° Weex åº”ç”¨å¸‚åœºã€‚ å®˜ç½‘æ˜¯è¿™æ ·æè¿°å®ƒä»¬çš„ &nbsp;&nbsp;&nbsp;&nbsp;ç°åœ¨ä½¿ç”¨ weex-toolkit åŒæ ·æ”¯æŒå¯¹ weexpack çš„å‘½ä»¤è°ƒç”¨,å¦‚æœä½ å½“å‰çš„é¡¹ç›®ä¸ weexpack ç”Ÿæˆçš„é¡¹ç›®ç›®å½•ä¸€è‡´ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç›´æ¥å®ç°å¯¹äº platform çš„æ“ä½œï¼Œä»è€Œæ„å»ºå…·ä½“çš„ Android/IOS app ã€‚ è¯·æ³¨æ„ï¼Œè¯´çš„æ˜¯å¦‚æœä½ å½“å‰çš„é¡¹ç›®ä¸ weexpack ç”Ÿæˆçš„é¡¹ç›®ç›®å½•ä¸€è‡´ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒä»¬ç”Ÿæˆçš„é¡¹ç›®ç›®å½•å¹¶ä¸ä¸€æ ·ï¼Œæ„å»ºAndroidå’ŒIOSé¡¹ç›®ä¼šå¤±è´¥ã€‚è€Œä¸”å®˜ç½‘æ•™ç¨‹ä¸­æœ‰çš„ä½¿ç”¨weexå‘½ä»¤ï¼Œæœ‰çš„ä½¿ç”¨weexpackå‘½ä»¤ï¼Œå¯¹äºåˆšä¸Šæ‰‹çš„äººæ¥è¯´ä¸å‹å¥½ã€‚çœ‹å®˜æ–¹3.22åœ¨Issuesä¸­å›å¤è¯´ &nbsp;&nbsp;&nbsp;&nbsp;ç¡®å®æˆ‘ä»¬å†…éƒ¨åœ¨äº‰è®ºç›®å½•ä¸€è‡´æ€§ï¼ŒåæœŸæˆ‘ä»¬å¸Œæœ›è®©ä¸¤è€…çš„ç›®å½•ä¿æŒä¸€è‡´æ€§ï¼Œæˆ–è€…é€šè¿‡æ£€æŸ¥çš„å½¢å¼è‡ªåŠ¨è¡¥å…¨ç¼ºæŸçš„ç›®å½•ï¼Œä»è€Œè®©å®ƒä»¬ä¸€è‡´ã€‚ å¸Œæœ›å°½æ—©ç»Ÿä¸€ç›®å½•æˆ–è€…åˆå¹¶è¿™ä¸¤ä¸ªå·¥å…·å§ğŸ˜„ å®‰è£…æºé—®é¢˜å®‰è£…å®Œweex-toolkiå’Œweexpackä¸¤ä¸ªå·¥å…·ä¹‹åï¼Œç”Ÿæˆé¡¹ç›®æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯æ‰“åŒ…åˆ°çœŸæœºè¿è¡Œå°±å‡ºç°äº†é—®é¢˜ï¼Œéå¸¸è«åå…¶å¦™çš„å„ç§é”™è¯¯ã€‚äºæ˜¯ç”¨npmå‘½ä»¤ npm list -g --depth 0 æŸ¥çœ‹è¿™ä¸¤ä¸ªå…¨å±€å®‰è£…çš„åŒ…çš„æƒ…å†µï¼Œå‘ç°å¤§é‡ç›¸å…³ä¾èµ–æŠ¥é”™ã€‚æˆ‘æ˜¯æ·˜å®æºcnpmå…¨å±€å®‰è£…è¿™ä¸¤ä¸ªå·¥å…·çš„ï¼ŒæŒ‰é“ç†éƒ½æ˜¯é˜¿é‡Œçš„ä¸œè¥¿ï¼Œåº”è¯¥ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚çœ‹äº†ä¸€ä¸‹å®˜æ–¹GitHubçš„Issuesï¼Œå‘ç°ä¹Ÿæœ‰ä¸€æ ·çš„æƒ…å†µã€‚äºæ˜¯ç«‹é©¬å¸è½½è¿™ä¸¤ä¸ªå…¨å±€å®‰è£…çš„å·¥å…·ï¼šnpm uninstall weex-toolkit -g npm uninstall weexpack -gï¼Œ ç„¶åå¼€ç¿»å¢™ï¼Œé‡æ–°å®‰è£…è¿™ä¸¤ä¸ªå·¥å…·ï¼Œè™½ç„¶é€Ÿåº¦æ…¢ä¸€ç‚¹ï¼Œä½†æ˜¯å®‰è£…å®Œä¹‹åå†æ¬¡npm list -g --depth 0 è‡³å°‘ä¸ä¼šæŠ¥é”™äº†ã€‚ ç„¶åå†ç”Ÿæˆé¡¹ç›®ï¼ŒçœŸæœºè¿è¡Œï¼Œä¸€åˆ‡å°±æ­£å¸¸äº†ã€‚ã€‚ã€‚","tags":[{"name":"Vue.js","slug":"Vue-js","permalink":"https://microzz.com/tags/Vue-js/"},{"name":"npm","slug":"npm","permalink":"https://microzz.com/tags/npm/"},{"name":"Weex","slug":"Weex","permalink":"https://microzz.com/tags/Weex/"}]},{"title":"Vueåšä¸€ä¸ªGitHubé¡¹ç›®æ’è¡Œæ¦œ","date":"2017-04-10T11:41:53.000Z","path":"2017/04/10/github-ranking/","text":"Vueåšä¸€ä¸ªGitHubé¡¹ç›®æ’è¡Œæ¦œGitHubä¸åŒè¯­è¨€çƒ­é—¨é¡¹ç›®æ’è¡Œï¼ŒVueåšé¡µé¢å±•ç¤ºã€‚ æºä»£ç æºä»£ç åœ°å€ï¼šğŸ”— GitHubæ¬¢è¿å¤§å®¶ starå’ŒforkğŸ˜„ é¢„è§ˆåœ°å€åœ¨çº¿æ•ˆæœé¢„è§ˆåœ°å€ï¼šhttps://microzz.com/github-ranking/ æŠ€æœ¯æ ˆ Vue2.0ï¼šå‰ç«¯é¡µé¢å±•ç¤ºã€‚ axiosï¼šä¸€ä¸ªåŸºäº Promise çš„ HTTP åº“ï¼Œå‘åç«¯å‘èµ·è¯·æ±‚ã€‚ Expressã€Koa2ï¼šå› ä¸ºvue-cliç”Ÿæˆçš„é¡¹ç›®æ˜¯åŸºäºexpressçš„ï¼Œæ‰€ä»¥åœ¨å¼€å‘é˜¶æ®µæˆ‘ä½¿ç”¨çš„æ˜¯å®ƒï¼Œä½†æ˜¯çœŸæ­£ä¸Šçº¿ç”Ÿäº§ç¯å¢ƒæˆ‘æ¢æˆäº†Koa2ã€‚ requestã€request-promiseï¼šæ²¡æœ‰ç”¨Node.jsåŸç”Ÿçš„http/httpsæ¨¡å—æ˜¯å› ä¸ºä¸å–œæ¬¢å›è°ƒå‡½æ•°å¼çš„å¼‚æ­¥ï¼Œå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å¾ˆå·®ã€‚æ‰€ä»¥é€‰æ‹©äº†request+request-promiseï¼Œè®©å¼‚æ­¥æ›´ä¸ºä¼˜é›…ä¸€ç‚¹ã€‚ cheerioï¼šæœåŠ¡å™¨ç‰¹åˆ«å®šåˆ¶çš„ï¼Œå¿«é€Ÿã€çµæ´»ã€å®æ–½çš„jQueryæ ¸å¿ƒå®ç°ï¼ŒæŠ“å–é¡µé¢å†…å®¹å¾ˆæ–¹ä¾¿ã€‚ SASS(SCSS)ï¼šç”¨SCSSåšCSSé¢„å¤„ç†è¯­è¨€ï¼Œæœ‰äº›åœ°æ–¹å¾ˆæ–¹ä¾¿ï¼Œä¸ªäººå¾ˆå–œæ¬¢ç”¨ã€‚(è¯¦çœ‹ğŸ‘‰SASSç”¨æ³•æŒ‡å—) ES6ã€ES7ï¼šé‡‡ç”¨ES6è¯­æ³•ï¼Œè¿™æ˜¯ä»¥åçš„è¶‹åŠ¿ã€‚è‡ªå·±ä¸Šçº¿çš„ç”Ÿäº§ç¯å¢ƒåç«¯å¢åŠ äº†Async/awaitï¼Œä½¿å¼‚æ­¥æ›´åŠ ä¼˜é›…ã€‚ Webpackï¼švue-cliè‡ªå¸¦Webpackï¼Œä½†æ˜¯éœ€è¦è‡ªå·±æ”¹é€ ä¸€ä¸‹ï¼Œæ¯”å¦‚è¦å¯¹ build/dev-server.jsæ‰©å±•expressï¼Œå¢åŠ åç«¯è¯·æ±‚è·¯ç”±(ä¸Šçº¿ç‰ˆæœ¬ç”¨çš„æ˜¯Koa2)ã€‚æ­¤å¤–éœ€è¦å®‰è£…sassç›¸å…³loaderï¼Œvue-cliå·²ç»é…ç½®å¥½äº†webpackï¼Œä½ åªéœ€è¦å®‰è£…ä¾èµ–å°±å¯ä»¥ï¼Œä½¿ç”¨çš„æ—¶å€™åªéœ€è¦&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;ã€‚ flexï¼šflexå¼¹æ€§å¸ƒå±€ã€‚ CSS3ï¼šCSS3è¿‡æ¸¡åŠ¨ç”»åŠæ ·å¼ã€‚ é‡åˆ°çš„é—®é¢˜ å¼‚æ­¥æ“ä½œå¾ˆå®¹æ˜“å‡ºé—®é¢˜ï¼Œå¼‚æ­¥å¤„ç†ä¸€å®šè¦å°å¿ƒï¼è¦ç†Ÿç»ƒæŒæ¡Promiseã€Async/awaitã€Generatorç­‰æ–¹æ³•ã€‚(è¯¦çœ‹ğŸ‘‰å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°ã€Promiseå¯¹è±¡ã€Generator å‡½æ•°) å› ä¸ºè®¿é—®æ¯æ¬¡çˆ¬å–GitHubé€Ÿåº¦æ…¢ï¼Œæ€§èƒ½å·®ï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨ç¼“å­˜ï¼ŒæŠŠçˆ¬å–åˆ°çš„æ•°æ®ä¿å­˜ä¸ºjsonæ–‡ä»¶æˆ–è€…å…¶ä»–ç¼“å­˜æ–¹å¼ï¼Œæˆ‘åœ¨ä¸Šçº¿çš„æ­£å¼ç‰ˆæ˜¯ä¿å­˜ä¸ºjsonæ–‡ä»¶ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±è¦æœ‰ä¸€ä¸ªå®šæ—¶çˆ¬å–çš„å·¥å…·äº†ï¼Œè¿™é‡Œæ¨ènode-scheduleæ¨¡å—ï¼Œå¾ˆæ–¹ä¾¿å°±èƒ½å®ç°å®šæ—¶ä»»åŠ¡ï¼ŒæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å°±èƒ½ç®€å•ä¸Šæ‰‹äº†ã€‚ä¸Šçº¿ç‰ˆæœ¬æˆ‘æ˜¯æ¯éš”å‡ ä¸ªå°æ—¶å°±çˆ¬å–ä¸€æ¬¡ï¼Œç„¶åä¿å­˜æ•°æ®ï¼Œè¿™æ ·å‡è½»äº†æœåŠ¡å™¨å‹åŠ›ï¼Œå‰ç«¯è®¿é—®é€Ÿåº¦ä¹Ÿå¤§å¤§åŠ å¿«ã€‚ GitHubè²Œä¼¼æœ€å¤šåªèƒ½æœ‰10ä¸ªå¹¶å‘ï¼Œæˆ‘å°è¯•9ä¸ªæ˜¯æ­£å¸¸çš„ï¼Œ10ä¸ªå°±ä¼šæŠ¥é”™ï¼Œåˆšå¥½æˆ‘ä¸€æ¬¡æ€§çˆ¬å–çš„è¯­è¨€æ•°ç›®è¶…è¿‡æ•°ç›®ï¼Œä¸€çœ‹æŠ¥é”™ä¿¡æ¯æ˜¯429çŠ¶æ€ç ã€‚æŸ¥ä¿¡æ¯å‘ç°ï¼š &nbsp;&nbsp;&nbsp;&nbsp;429 Too Many Requests (å¤ªå¤šè¯·æ±‚)å½“ä½ éœ€è¦é™åˆ¶å®¢æˆ·ç«¯è¯·æ±‚æŸä¸ªæœåŠ¡çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯é™åˆ¶è¯·æ±‚é€Ÿåº¦æ—¶ï¼Œè¯¥çŠ¶æ€ç å°±ä¼šéå¸¸æœ‰ç”¨ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæœ‰ä¸€äº›ç±»ä¼¼çš„çŠ¶æ€ç ã€‚ä¾‹å¦‚â€œ509 Bandwidth Limit Exceededâ€ã€‚ æ‰€ä»¥ä¸€å®šå¥½å¤„ç†å¥½è¿™äº›å¼‚æ­¥è¯·æ±‚ï¼Œä¸ç„¶å°±çˆ¬å–ä¸åˆ°ä¿¡æ¯ç¼“å­˜äº†ã€‚ Aboutæºä»£ç åœ°å€ï¼šğŸ‘‰ GitHub ä¸ªäººç½‘ç«™ï¼šğŸ”—microzz-ITæŠ€æœ¯åˆ†äº« GitHubï¼šğŸ”—microzz Build Setup# install dependencies npm install # serve with hot reload at localhost:8080 npm run dev # build for production with minification npm run build # build for production and view the bundle analyzer report npm run build --report","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Vue.js","slug":"Vue-js","permalink":"https://microzz.com/tags/Vue-js/"},{"name":"SASS","slug":"SASS","permalink":"https://microzz.com/tags/SASS/"},{"name":"SCSS","slug":"SCSS","permalink":"https://microzz.com/tags/SCSS/"},{"name":"Koa2","slug":"Koa2","permalink":"https://microzz.com/tags/Koa2/"}]},{"title":"Vue.jséŸ³ä¹æ’­æ”¾å™¨å‡çº§ç‰ˆ","date":"2017-04-07T23:08:28.000Z","path":"2017/04/08/vue-music2/","text":"Vue.jséŸ³ä¹æ’­æ”¾å™¨2.0å‡çº§ç‰ˆä¹‹å‰åˆå­¦Vueåšäº†ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨ï¼Œå—åˆ°ä¸å°‘äººçš„å–œæ¬¢ã€‚ç°åœ¨å‡çº§ç‰ˆæ¥äº†ï¼åŠŸèƒ½æ›´å¼ºï¼ŒæŠ€æœ¯æ ˆæ›´å¤šã€‚ æºä»£ç æºä»£ç åœ°å€ï¼šğŸ‘‰ GitHubæ¬¢è¿å¤§å®¶starå’ŒfollowğŸ˜„ é¢„è§ˆåœ¨çº¿é¢„è§ˆåœ¨çº¿é¢„è§ˆåœ°å€ï¼šğŸ‘‰ VueéŸ³ä¹æ’­æ”¾å™¨ é¢„è§ˆå›¾ VueéŸ³ä¹æ’­æ”¾å™¨å‡çº§ç‰ˆ æ›´å¤šé¢„è§ˆå›¾è¯·çœ‹ğŸ‘‰ æ›´å¤š æŠ€æœ¯æ ˆVue2ï¼šé‡‡ç”¨æœ€æ–°Vue2çš„è¯­æ³•ğŸ˜Vuexï¼šå®ç°ä¸åŒç»„ä»¶ä¹‹é—´çš„çŠ¶æ€å…±äº«âœŒï¸vue-routerï¼šå•é¡µåº”ç”¨è·¯ç”±ç®¡ç†å¿…å¤‡ğŸ˜axiosï¼šå‘èµ·httpè¯·æ±‚ğŸ˜‰SASS(SCSS)ï¼šcssé¢„å¤„ç†è¯­è¨€ğŸ’ªExpress(ä¸Šçº¿ç‰ˆæœ¬æ˜¯Koa2)ï¼šå› ä¸ºvue-cliæ˜¯ç”¨çš„ExpressåšæœåŠ¡å™¨ï¼Œæ‰€ä»¥å¼€æºçš„å¼€å‘ç‰ˆæœ¬æ˜¯Expressï¼Œè‡ªå·±ç”Ÿäº§ç¯å¢ƒç”¨çš„æ˜¯Koa2ã€‚ ğŸ˜œWebpackï¼šè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œå¤§éƒ¨åˆ†é…ç½®vue-cliè„šæ‰‹æ¶å·²ç»å¼„å¥½äº†ï¼Œå¾ˆæ–¹ä¾¿ã€‚ğŸ˜ES6ï¼šé‡‡ç”¨ES6è¯­æ³•ï¼Œè¿™æ˜¯è¶‹åŠ¿ã€‚ğŸ‘localStorage(HTML5)ï¼šæœ¬åœ°å­˜å‚¨ï¼Œä¿å­˜ç”¨æˆ·ä¸ªæ€§åŒ–è®¾ç½®ã€‚ğŸ˜ŠCSS3ï¼šCSS3åŠ¨ç”»åŠæ ·å¼ã€‚ğŸ‘ ä½¿ç”¨ Build Setup# install dependencies npm install # serve with hot reload at localhost:8080 npm run dev # build for production with minification npm run build # build for production and view the bundle analyzer report npm run build --report é‡åˆ°çš„é—®é¢˜ vuexä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Œå¦‚ä½•ä½¿ç”¨ï¼Œå°±è¦çœ‹é¡¹ç›®éœ€è¦ã€‚å¼•ç”¨ Redux çš„ä½œè€… Dan Abramov çš„è¯è¯´å°±æ˜¯ï¼š Flux æ¶æ„å°±åƒçœ¼é•œï¼šæ‚¨è‡ªä¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å®ƒã€‚ å„ç»„ä»¶ä¹‹é—´çŠ¶æ€å…±äº«ä¹Ÿæ˜¯éš¾ç‚¹ã€‚ å¼‚æ­¥ç¼–ç¨‹ï¼šJSæ˜¯å•çº¿ç¨‹ï¼Œå¼‚æ­¥ç¼–ç¨‹å°¤ä¸ºé‡è¦ã€‚å½“æˆ‘ä»¬å‘åç«¯è¯·æ±‚æ•°æ®ï¼Œæ˜¯å¼‚æ­¥çš„ï¼Œå¦‚æœæ²¡æœ‰å¤„ç†å¥½ç›¸å…³çš„å¼‚æ­¥æ“ä½œï¼Œæ˜¯ä¼šæœ‰å„ç§é—®é¢˜çš„ã€‚JSå¯ä»¥åˆ©ç”¨setTimeoutã€å›è°ƒã€Generatorã€Promiseã€Asyncã€‚å®šæ—¶è¿™ç§æ–¹å¼å¤ªéº»çƒ¦ï¼Œè¿˜æ˜¯ä¸æ¨èï¼›å›è°ƒå±‚æ¬¡å¤šäº†ï¼Œæœ‰å›è°ƒåœ°ç‹±ï¼Œä»£ç ç»´æŠ¤æ€§å¾ˆå·®ï¼›Generatoréœ€è¦æ‰‹åŠ¨å»æ‰§è¡Œï¼Œå½“ç„¶å¯ä»¥ä½¿ç”¨ç±»ä¼¼coçš„æ¨¡å—ã€‚ç›¸æ¯”ä¹‹ä¸‹Promiseå’ŒAsyncæ˜¯æ¯”è¾ƒç†æƒ³çš„ã€‚(è¯¦çœ‹ğŸ‘‰Promiseå¯¹è±¡ã€å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°) æœ¬é¡¹ç›®ä¸­ä½¿ç”¨äº†QQéŸ³ä¹å’ŒOne(ä¸€ä¸ª)çš„æ¥å£ï¼Œåç«¯APIç¼–å†™ä¹Ÿæ˜¯éš¾ç‚¹ï¼ŒåŒ…å«äº†å„ç§å¼‚æ­¥è¯·æ±‚ã€‚å¯¹è¿”å›æ•°æ®çš„è§£æä¹Ÿæ˜¯éš¾ç‚¹ï¼Œæœ‰çš„æ—¶å€™ä½ è¿˜éœ€è¦å¯¹æ•°æ®è¿›è¡Œè§£ç ã€‚ å„ç»„ä»¶ç»“æ„çš„è®¾è®¡ï¼šä¸€å¼€å§‹å¤§çº²æ²¡è®¾è®¡å¥½ï¼Œåé¢æƒ³ä¿®æ”¹æ¶‰åŠé¢ä¼šå¾ˆå¹¿ã€‚ è¿‡æ¸¡åŠ¨ç”»è®©äº¤äº’æ›´æœ‰è¶£ï¼Œä½†æ˜¯æœ‰çš„è¿˜æ˜¯è€—æ€§èƒ½çš„ï¼Œæœ‰è®¾å¤‡å·®å¼‚ï¼Œæ²¡ç”¨å¥½ä¼šé€ æˆå¡é¡¿ã€‚ ã€å£°æ˜ã€‘ï¼šæœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµï¼Œè¯·ä¸è¦ç”¨åšä»»ä½•å•†ä¸šç”¨é€”ğŸ˜Šæœ‰ä»»ä½•ç–‘é—®è¯·è”ç³»ä½œè€…ğŸ“©zhaohui@microzz.com Aboutæºä»£ç åœ°å€ï¼šğŸ‘‰ GitHubä¸ªäººç½‘ç«™ï¼šğŸ”—microzz-ITæŠ€æœ¯åˆ†äº«GitHubï¼šğŸ”—microzz","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"HTML5","slug":"HTML5","permalink":"https://microzz.com/tags/HTML5/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Vue.js","slug":"Vue-js","permalink":"https://microzz.com/tags/Vue-js/"},{"name":"SASS","slug":"SASS","permalink":"https://microzz.com/tags/SASS/"},{"name":"SCSS","slug":"SCSS","permalink":"https://microzz.com/tags/SCSS/"}]},{"title":"åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†","date":"2017-04-06T12:14:10.000Z","path":"2017/04/06/jsdom/","text":"åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†èŠ‚ç‚¹å±æ€§Node.nodeName //è¿”å›èŠ‚ç‚¹åç§°ï¼Œåªè¯» Node.nodeType //è¿”å›èŠ‚ç‚¹ç±»å‹çš„å¸¸æ•°å€¼ï¼Œåªè¯» Node.nodeValue //è¿”å›Textæˆ–CommentèŠ‚ç‚¹çš„æ–‡æœ¬å€¼ï¼Œåªè¯» Node.textContent //è¿”å›å½“å‰èŠ‚ç‚¹å’Œå®ƒçš„æ‰€æœ‰åä»£èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ï¼Œå¯è¯»å†™ Node.baseURI //è¿”å›å½“å‰ç½‘é¡µçš„ç»å¯¹è·¯å¾„ Node.ownerDocument //è¿”å›å½“å‰èŠ‚ç‚¹æ‰€åœ¨çš„é¡¶å±‚æ–‡æ¡£å¯¹è±¡ï¼Œå³document Node.nextSibling //è¿”å›ç´§è·Ÿåœ¨å½“å‰èŠ‚ç‚¹åé¢çš„ç¬¬ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ Node.previousSibling //è¿”å›å½“å‰èŠ‚ç‚¹å‰é¢çš„ã€è·ç¦»æœ€è¿‘çš„ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ Node.parentNode //è¿”å›å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ Node.parentElement //è¿”å›å½“å‰èŠ‚ç‚¹çš„çˆ¶ElementèŠ‚ç‚¹ Node.childNodes //è¿”å›å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ Node.firstChild //è¿”å›å½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ Node.lastChild //è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ //parentNodeæ¥å£ Node.children //è¿”å›æŒ‡å®šèŠ‚ç‚¹çš„æ‰€æœ‰Elementå­èŠ‚ç‚¹ Node.firstElementChild //è¿”å›å½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªElementå­èŠ‚ç‚¹ Node.lastElementChild //è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªElementå­èŠ‚ç‚¹ Node.childElementCount //è¿”å›å½“å‰èŠ‚ç‚¹æ‰€æœ‰Elementå­èŠ‚ç‚¹çš„æ•°ç›®ã€‚ æ“ä½œNode.appendChild(node) //å‘èŠ‚ç‚¹æ·»åŠ æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ Node.hasChildNodes() //è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹ Node.cloneNode(true); // é»˜è®¤ä¸ºfalse(å…‹éš†èŠ‚ç‚¹), true(å…‹éš†èŠ‚ç‚¹åŠå…¶å±æ€§ï¼Œä»¥åŠåä»£) Node.insertBefore(newNode,oldNode) // åœ¨æŒ‡å®šå­èŠ‚ç‚¹ä¹‹å‰æ’å…¥æ–°çš„å­èŠ‚ç‚¹ Node.removeChild(node) //åˆ é™¤èŠ‚ç‚¹ï¼Œåœ¨è¦åˆ é™¤èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸Šæ“ä½œ Node.replaceChild(newChild,oldChild) //æ›¿æ¢èŠ‚ç‚¹ Node.contains(node) //è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°èŠ‚ç‚¹æ˜¯å¦ä¸ºå½“å‰èŠ‚ç‚¹çš„åä»£èŠ‚ç‚¹ã€‚ Node.compareDocumentPosition(node) //è¿”å›ä¸€ä¸ª7ä¸ªæ¯”ç‰¹ä½çš„äºŒè¿›åˆ¶å€¼ï¼Œè¡¨ç¤ºå‚æ•°èŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹çš„å…³ç³» Node.isEqualNode(noe) //è¿”å›å¸ƒå°”å€¼ï¼Œç”¨äºæ£€æŸ¥ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰ã€‚æ‰€è°“ç›¸ç­‰çš„èŠ‚ç‚¹ï¼ŒæŒ‡çš„æ˜¯ä¸¤ä¸ªèŠ‚ç‚¹çš„ç±»å‹ç›¸åŒã€å±æ€§ç›¸åŒã€å­èŠ‚ç‚¹ç›¸åŒã€‚ Node.normalize() //ç”¨äºæ¸…ç†å½“å‰èŠ‚ç‚¹å†…éƒ¨çš„æ‰€æœ‰TextèŠ‚ç‚¹ã€‚å®ƒä¼šå»é™¤ç©ºçš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†æ¯—é‚»çš„æ–‡æœ¬èŠ‚ç‚¹åˆå¹¶æˆä¸€ä¸ªã€‚ //ChildNodeæ¥å£ Node.remove() //ç”¨äºåˆ é™¤å½“å‰èŠ‚ç‚¹ Node.before() // Node.after() Node.replaceWith() DocumentèŠ‚ç‚¹DocumentèŠ‚ç‚¹çš„å±æ€§document.doctype // document.documentElement //è¿”å›å½“å‰æ–‡æ¡£çš„æ ¹èŠ‚ç‚¹ document.defaultView //è¿”å›documentå¯¹è±¡æ‰€åœ¨çš„windowå¯¹è±¡ document.body //è¿”å›å½“å‰æ–‡æ¡£çš„&lt;body&gt;èŠ‚ç‚¹ document.head //è¿”å›å½“å‰æ–‡æ¡£çš„&lt;head&gt;èŠ‚ç‚¹ document.activeElement //è¿”å›å½“å‰æ–‡æ¡£ä¸­è·å¾—ç„¦ç‚¹çš„é‚£ä¸ªå…ƒç´ ã€‚ //èŠ‚ç‚¹é›†åˆå±æ€§ document.links //è¿”å›å½“å‰æ–‡æ¡£çš„æ‰€æœ‰aå…ƒç´  document.forms //è¿”å›é¡µé¢ä¸­æ‰€æœ‰è¡¨å•å…ƒç´  document.images //è¿”å›é¡µé¢ä¸­æ‰€æœ‰å›¾ç‰‡å…ƒç´  document.embeds //è¿”å›ç½‘é¡µä¸­æ‰€æœ‰åµŒå…¥å¯¹è±¡ document.scripts //è¿”å›å½“å‰æ–‡æ¡£çš„æ‰€æœ‰è„šæœ¬ document.styleSheets //è¿”å›å½“å‰ç½‘é¡µçš„æ‰€æœ‰æ ·å¼è¡¨ //æ–‡æ¡£ä¿¡æ¯å±æ€§ document.documentURI //è¡¨ç¤ºå½“å‰æ–‡æ¡£çš„ç½‘å€ document.URL //è¿”å›å½“å‰æ–‡æ¡£çš„ç½‘å€ document.domain //è¿”å›å½“å‰æ–‡æ¡£çš„åŸŸå document.lastModified //è¿”å›å½“å‰æ–‡æ¡£æœ€åä¿®æ”¹çš„æ—¶é—´æˆ³ document.location //è¿”å›locationå¯¹è±¡ï¼Œæä¾›å½“å‰æ–‡æ¡£çš„URLä¿¡æ¯ document.referrer //è¿”å›å½“å‰æ–‡æ¡£çš„è®¿é—®æ¥æº document.title //è¿”å›å½“å‰æ–‡æ¡£çš„æ ‡é¢˜ document.characterSetå±æ€§è¿”å›æ¸²æŸ“å½“å‰æ–‡æ¡£çš„å­—ç¬¦é›†ï¼Œæ¯”å¦‚UTF-8ã€ISO-8859-1ã€‚ document.readyState //è¿”å›å½“å‰æ–‡æ¡£çš„çŠ¶æ€ document.designMode //æ§åˆ¶å½“å‰æ–‡æ¡£æ˜¯å¦å¯ç¼–è¾‘ï¼Œå¯è¯»å†™ document.compatMode //è¿”å›æµè§ˆå™¨å¤„ç†æ–‡æ¡£çš„æ¨¡å¼ document.cookie //ç”¨æ¥æ“ä½œCookie DocumentèŠ‚ç‚¹çš„æ–¹æ³•è¯»å†™æ–¹æ³•document.open() //ç”¨äºæ–°å»ºå¹¶æ‰“å¼€ä¸€ä¸ªæ–‡æ¡£ document.close() //ä¸å®‰æ¯”openæ–¹æ³•æ‰€æ–°å»ºçš„æ–‡æ¡£ document.write() //ç”¨äºå‘å½“å‰æ–‡æ¡£å†™å…¥å†…å®¹ document.writeIn() //ç”¨äºå‘å½“å‰æ–‡æ¡£å†™å…¥å†…å®¹ï¼Œå°¾éƒ¨æ·»åŠ æ¢è¡Œç¬¦ã€‚ æŸ¥æ‰¾èŠ‚ç‚¹document.querySelector(selectors) //æ¥å—ä¸€ä¸ªCSSé€‰æ‹©å™¨ä½œä¸ºå‚æ•°ï¼Œè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…è¯¥é€‰æ‹©å™¨çš„å…ƒç´ èŠ‚ç‚¹ã€‚ document.querySelectorAll(selectors) //æ¥å—ä¸€ä¸ªCSSé€‰æ‹©å™¨ä½œä¸ºå‚æ•°ï¼Œè¿”å›æ‰€æœ‰åŒ¹é…è¯¥é€‰æ‹©å™¨çš„å…ƒç´ èŠ‚ç‚¹ã€‚ document.getElementsByTagName(tagName) //è¿”å›æ‰€æœ‰æŒ‡å®šHTMLæ ‡ç­¾çš„å…ƒç´  document.getElementsByClassName(className) //è¿”å›åŒ…æ‹¬äº†æ‰€æœ‰classåå­—ç¬¦åˆæŒ‡å®šæ¡ä»¶çš„å…ƒç´  document.getElementsByName(name) //ç”¨äºé€‰æ‹©æ‹¥æœ‰nameå±æ€§çš„HTMLå…ƒç´ ï¼ˆæ¯”å¦‚&lt;form&gt;ã€&lt;radio&gt;ã€&lt;img&gt;ã€&lt;frame&gt;ã€&lt;embed&gt;å’Œ&lt;object&gt;ç­‰ï¼‰ document.getElementById(id) //è¿”å›åŒ¹é…æŒ‡å®šidå±æ€§çš„å…ƒç´ èŠ‚ç‚¹ã€‚ document.elementFromPoint(x,y) //è¿”å›ä½äºé¡µé¢æŒ‡å®šä½ç½®æœ€ä¸Šå±‚çš„Elementå­èŠ‚ç‚¹ã€‚ ç”ŸæˆèŠ‚ç‚¹document.createElement(tagName) //ç”¨æ¥ç”ŸæˆHTMLå…ƒç´ èŠ‚ç‚¹ã€‚ document.createTextNode(text) //ç”¨æ¥ç”Ÿæˆæ–‡æœ¬èŠ‚ç‚¹ document.createAttribute(name) //ç”Ÿæˆä¸€ä¸ªæ–°çš„å±æ€§å¯¹è±¡èŠ‚ç‚¹ï¼Œå¹¶è¿”å›å®ƒã€‚ document.createDocumentFragment() //ç”Ÿæˆä¸€ä¸ªDocumentFragmentå¯¹è±¡ ï¼ˆ4ï¼‰äº‹ä»¶æ–¹æ³• document.createEvent(type) //ç”Ÿæˆä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œè¯¥å¯¹è±¡èƒ½è¢«element.dispatchEvent()æ–¹æ³•ä½¿ç”¨ document.addEventListener(type,listener,capture) //æ³¨å†Œäº‹ä»¶ document.removeEventListener(type,listener,capture) //æ³¨é”€äº‹ä»¶ document.dispatchEvent(event) //è§¦å‘äº‹ä»¶ å…¶ä»–document.hasFocus() //è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰æ–‡æ¡£ä¹‹ä¸­æ˜¯å¦æœ‰å…ƒç´ è¢«æ¿€æ´»æˆ–è·å¾—ç„¦ç‚¹ã€‚ document.adoptNode(externalNode) //å°†æŸä¸ªèŠ‚ç‚¹ï¼Œä»å…¶åŸæ¥æ‰€åœ¨çš„æ–‡æ¡£ç§»é™¤ï¼Œæ’å…¥å½“å‰æ–‡æ¡£ï¼Œå¹¶è¿”å›æ’å…¥åçš„æ–°èŠ‚ç‚¹ã€‚ document.importNode(externalNode, deep) //ä»å¤–éƒ¨æ–‡æ¡£æ‹·è´æŒ‡å®šèŠ‚ç‚¹ï¼Œæ’å…¥å½“å‰æ–‡æ¡£ã€‚ ElementèŠ‚ç‚¹ElementèŠ‚ç‚¹çš„å±æ€§ç‰¹æ€§å±æ€§Element.attributes //è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§èŠ‚ç‚¹ Element.id //è¿”å›æŒ‡å®šå…ƒç´ çš„idå±æ€§ï¼Œå¯è¯»å†™ Element.tagName //è¿”å›æŒ‡å®šå…ƒç´ çš„å¤§å†™æ ‡ç­¾å Element.innerHTML //è¿”å›è¯¥å…ƒç´ åŒ…å«çš„HTMLä»£ç ï¼Œå¯è¯»å†™ Element.outerHTML //è¿”å›æŒ‡å®šå…ƒç´ èŠ‚ç‚¹çš„æ‰€æœ‰HTMLä»£ç ï¼ŒåŒ…æ‹¬å®ƒè‡ªèº«å’ŒåŒ…å«çš„çš„æ‰€æœ‰å­å…ƒç´ ï¼Œå¯è¯»å†™ Element.className //è¿”å›å½“å‰å…ƒç´ çš„classå±æ€§ï¼Œå¯è¯»å†™ Element.classList //è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„æ‰€æœ‰classé›†åˆ Element.dataset //è¿”å›å…ƒç´ èŠ‚ç‚¹ä¸­æ‰€æœ‰çš„data-*å±æ€§ã€‚ å°ºå¯¸å±æ€§Element.clientHeight //è¿”å›å…ƒç´ èŠ‚ç‚¹å¯è§éƒ¨åˆ†çš„é«˜åº¦ Element.clientWidth //è¿”å›å…ƒç´ èŠ‚ç‚¹å¯è§éƒ¨åˆ†çš„å®½åº¦ Element.clientLeft //è¿”å›å…ƒç´ èŠ‚ç‚¹å·¦è¾¹æ¡†çš„å®½åº¦ Element.clientTop //è¿”å›å…ƒç´ èŠ‚ç‚¹é¡¶éƒ¨è¾¹æ¡†çš„å®½åº¦ Element.scrollHeight //è¿”å›å…ƒç´ èŠ‚ç‚¹çš„æ€»é«˜åº¦ Element.scrollWidth //è¿”å›å…ƒç´ èŠ‚ç‚¹çš„æ€»å®½åº¦ Element.scrollLeft //è¿”å›å…ƒç´ èŠ‚ç‚¹çš„æ°´å¹³æ»šåŠ¨æ¡å‘å³æ»šåŠ¨çš„åƒç´ æ•°å€¼,é€šè¿‡è®¾ç½®è¿™ä¸ªå±æ€§å¯ä»¥æ”¹å˜å…ƒç´ çš„æ»šåŠ¨ä½ç½® Element.scrollTop //è¿”å›å…ƒç´ èŠ‚ç‚¹çš„å‚ç›´æ»šåŠ¨å‘ä¸‹æ»šåŠ¨çš„åƒç´ æ•°å€¼ Element.offsetHeight //è¿”å›å…ƒç´ çš„å‚ç›´é«˜åº¦(åŒ…å«border,padding) Element.offsetWidth //è¿”å›å…ƒç´ çš„æ°´å¹³å®½åº¦(åŒ…å«border,padding) Element.offsetLeft //è¿”å›å½“å‰å…ƒç´ å·¦ä¸Šè§’ç›¸å¯¹äºElement.offsetParentèŠ‚ç‚¹çš„å‚ç›´åç§» Element.offsetTop //è¿”å›æ°´å¹³ä½ç§» Element.style //è¿”å›å…ƒç´ èŠ‚ç‚¹çš„è¡Œå†…æ ·å¼ èŠ‚ç‚¹ç›¸å…³å±æ€§Element.children //åŒ…æ‹¬å½“å‰å…ƒç´ èŠ‚ç‚¹çš„æ‰€æœ‰å­å…ƒç´  Element.childElementCount //è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹åŒ…å«çš„å­HTMLå…ƒç´ èŠ‚ç‚¹çš„ä¸ªæ•° Element.firstElementChild //è¿”å›å½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªElementå­èŠ‚ç‚¹ Element.lastElementChild //è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªElementå­èŠ‚ç‚¹ Element.nextElementSibling //è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸHTMLå…ƒç´ èŠ‚ç‚¹ Element.previousElementSibling //è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„å‰ä¸€ä¸ªå…„å¼ŸHTMLèŠ‚ç‚¹ Element.offsetParent //è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„æœ€é è¿‘çš„ã€å¹¶ä¸”CSSçš„positionå±æ€§ä¸ç­‰äºstaticçš„çˆ¶å…ƒç´ ã€‚ ElementèŠ‚ç‚¹çš„æ–¹æ³•ä½ç½®æ–¹æ³•getBoundingClientRect() // getBoundingClientRectè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«top,left,right,bottom,width,height // widthã€height å…ƒç´ è‡ªèº«å®½é«˜ // top å…ƒç´ ä¸Šå¤–è¾¹ç•Œè·çª—å£æœ€ä¸Šé¢çš„è·ç¦» // right å…ƒç´ å³å¤–è¾¹ç•Œè·çª—å£æœ€ä¸Šé¢çš„è·ç¦» // bottom å…ƒç´ ä¸‹å¤–è¾¹ç•Œè·çª—å£æœ€ä¸Šé¢çš„è·ç¦» // left å…ƒç´ å·¦å¤–è¾¹ç•Œè·çª—å£æœ€ä¸Šé¢çš„è·ç¦» // width å…ƒç´ è‡ªèº«å®½(åŒ…å«border,padding) // height å…ƒç´ è‡ªèº«é«˜(åŒ…å«border,padding) getClientRects() //è¿”å›å½“å‰å…ƒç´ åœ¨é¡µé¢ä¸Šå½¢å‚çš„æ‰€æœ‰çŸ©å½¢ã€‚ // å…ƒç´ åœ¨é¡µé¢ä¸Šçš„åç§»é‡ var rect = el.getBoundingClientRect() return { top: rect.top + document.body.scrollTop, left: rect.left + document.body.scrollLeft } å±æ€§æ–¹æ³•Element.getAttribute()ï¼šè¯»å–æŒ‡å®šå±æ€§ Element.setAttribute()ï¼šè®¾ç½®æŒ‡å®šå±æ€§ Element.hasAttribute()ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å…ƒç´ èŠ‚ç‚¹æ˜¯å¦æœ‰æŒ‡å®šçš„å±æ€§ Element.removeAttribute()ï¼šç§»é™¤æŒ‡å®šå±æ€§ æŸ¥æ‰¾æ–¹æ³•Element.querySelector() Element.querySelectorAll() Element.getElementsByTagName() Element.getElementsByClassName() äº‹ä»¶æ–¹æ³•Element.addEventListener()ï¼šæ·»åŠ äº‹ä»¶çš„å›è°ƒå‡½æ•° Element.removeEventListener()ï¼šç§»é™¤äº‹ä»¶ç›‘å¬å‡½æ•° Element.dispatchEvent()ï¼šè§¦å‘äº‹ä»¶ //ie8 Element.attachEvent(oneventName,listener) Element.detachEvent(oneventName,listener) // eventå¯¹è±¡ var event = window.event||event; // äº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹ var target = event.target || event.srcElement; // äº‹ä»¶ä»£ç† ul.addEventListener(&#39;click&#39;, function(event) { if (event.target.tagName.toLowerCase() === &#39;li&#39;) { console.log(event.target.innerHTML) } }); å…¶ä»–Element.scrollIntoView() //æ»šåŠ¨å½“å‰å…ƒç´ ï¼Œè¿›å…¥æµè§ˆå™¨çš„å¯è§åŒºåŸŸ //è§£æHTMLå­—ç¬¦ä¸²ï¼Œç„¶åå°†ç”Ÿæˆçš„èŠ‚ç‚¹æ’å…¥DOMæ ‘çš„æŒ‡å®šä½ç½®ã€‚ Element.insertAdjacentHTML(where, htmlString); Element.insertAdjacentHTML(&#39;beforeBegin&#39;, htmlString); // åœ¨è¯¥å…ƒç´ å‰æ’å…¥ Element.insertAdjacentHTML(&#39;afterBegin&#39;, htmlString); // åœ¨è¯¥å…ƒç´ ç¬¬ä¸€ä¸ªå­å…ƒç´ å‰æ’å…¥ Element.insertAdjacentHTML(&#39;beforeEnd&#39;, htmlString); // åœ¨è¯¥å…ƒç´ æœ€åä¸€ä¸ªå­å…ƒç´ åé¢æ’å…¥ Element.insertAdjacentHTML(&#39;afterEnd&#39;, htmlString); // åœ¨è¯¥å…ƒç´ åæ’å…¥ Element.remove() //ç”¨äºå°†å½“å‰å…ƒç´ èŠ‚ç‚¹ä»DOMä¸­ç§»é™¤ Element.focus() //ç”¨äºå°†å½“å‰é¡µé¢çš„ç„¦ç‚¹ï¼Œè½¬ç§»åˆ°æŒ‡å®šå…ƒç´ ä¸Š ğŸ‘‰GitHub","tags":[{"name":"API","slug":"API","permalink":"https://microzz.com/tags/API/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"DOM","slug":"DOM","permalink":"https://microzz.com/tags/DOM/"}]},{"title":"ä¸ºArrayå¯¹è±¡æ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•","date":"2017-04-01T14:34:16.000Z","path":"2017/04/01/array-uniq/","text":"ä¸º Array å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•è¾“å…¥ä¾‹å­[false, true, undefined, null, NaN, 0, 1, {}, {}, &#39;a&#39;, &#39;a&#39;, NaN].uniq() è¾“å‡ºä¾‹å­[false, true, undefined, null, NaN, 0, 1, {}, {}, &#39;a&#39;] åˆ†æé¢˜ç›®è¦æ±‚ç»™ Array æ·»åŠ æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨åˆ° prototypeã€‚æ•°ç»„å»é‡æœ¬èº«ç®—æ³•ä¸æ˜¯å¾ˆéš¾ï¼Œä½†æ˜¯åœ¨ JavaScript ä¸­å¾ˆå¤šäººä¼šå¿½è§† NaN çš„å­˜åœ¨ï¼Œå› ä¸ºåœ¨ JS ä¸­ NaN !== NaN ã€‚ä½†æ˜¯åœ¨å»é‡ä¸­æˆ‘ä»¬åˆä¸èƒ½ä¿ç•™ä¸¤ä¸ª NaN ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œä¸€ä¸‹åˆ¤æ–­ï¼Œè¿™æ˜¯å¾ˆå¤šäººå®¹æ˜“å¿½è§†çš„ã€‚ES5çš„å®ç°å¦‚ä¸‹ï¼š ä»£ç Array.prototype.uniq = function () { var arr = []; var flag = true; this.forEach(function(item) { // æ’é™¤ NaN (é‡è¦ï¼ï¼ï¼) if (item != item) { flag &amp;&amp; arr.indexOf(item) === -1 ? arr.push(item) : &#39;&#39;; flag = false; } else { arr.indexOf(item) === -1 ? arr.push(item) : &#39;&#39; } }); return arr; } éªŒè¯æˆ‘ä»¬åªéœ€è¦åœ¨æ•°ç»„ä¸Šç›´æ¥è°ƒç”¨ uniq æ–¹æ³•å°±å¯ä»¥äº†ï¼Œå¦‚ï¼š [false, true, undefined, null, NaN, 0, 1, {}, {}, &#39;a&#39;, &#39;a&#39;, NaN].uniq() ç»“æœä¸ºï¼š [false, true, undefined, null, NaN, 0, 1, {}, {}, &#39;a&#39;] è¿›é˜¶ES6çš„å®ç°ES6æ–°å¢äº† Set å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„â€œé›†åˆâ€ï¼Œå®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚æ‰€ä»¥å¯ä»¥æ–¹ä¾¿å»é‡ã€‚Setæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆSetæ•°æ®ç»“æ„ã€‚(è¯¦çœ‹ğŸ‘‰Setå’ŒMapæ•°æ®ç»“æ„) å¦‚æœç”¨ES6ä¸º Array å¯¹è±¡æ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•ï¼Œåˆ™å¯ä»¥å¦‚ä¸‹å®ç°ï¼š Array.prototype.uniq = function() { return Array.from(new Set(this)); } ä»£ç ä¸­ç”¨ Array.from æŠŠ Set ç»“æ„è½¬æ¢æˆæ•°ç»„ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨å…¶ä»–æ–¹æ³•ï¼Œè¿™é‡Œä¸æ·±ç©¶ã€‚è¿™é‡Œå»é‡å…³é”®ä»£ç åªéœ€è¦ä¸€è¡Œï¼Œæ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼ŸğŸ˜„å¦‚æœä½ è¦ä¼˜é›…ä¸€ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ ES6 çš„æ‰©å±•è¿ç®—ç¬¦ã€‚å¦‚ä¸‹ï¼š Array.prototype.uniq = function() { return [...new Set(this)]; }","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"prototype","slug":"prototype","permalink":"https://microzz.com/tags/prototype/"},{"name":"åŸå‹é“¾","slug":"åŸå‹é“¾","permalink":"https://microzz.com/tags/åŸå‹é“¾/"}]},{"title":"ReactJSæ–°é—»App","date":"2017-03-29T11:58:19.000Z","path":"2017/03/29/react-news/","text":"ReactNewsAppä»‹ç»ä¸€ä¸ªç”±React.jsç¼–å†™çš„æ–°é—»WebAppã€‚A news WebApp by React.js.æœ¬åº”ç”¨ä»…ä¾›å­¦ä¹ ï¼Œè¯·ä¸è¦ç”¨äºå•†ä¸šç”¨é€”ï¼Œä¾›å­¦ä¹ äº¤æµğŸ˜å› ä¸ºæŠ€æœ¯æœ‰é™ï¼Œæ‰€ä»¥å¯èƒ½æœ‰å¥½å¤šä¸è¶³ï¼Œæ¬¢è¿æå»ºè®®å“¦ğŸ˜„ ğŸ‘‰ é¡¹ç›®åœ°å€ æŠ€æœ¯æ ˆReact.jsç»„ä»¶åŒ–å¼€å‘é¡¹ç›®é‡‡ç”¨ç»„ä»¶åŒ–çš„æ€æƒ³ï¼ŒæŠŠå¤§çš„åŠŸèƒ½æ¨¡å—åˆ’åˆ†æˆä¸€ä¸ªä¸ªå°çš„æ¨¡å—ï¼Œä¾¿äºå›¢é˜Ÿåˆä½œå’Œç»´æŠ¤ã€‚ react-routerè·¯ç”±ç®¡ç†è·¯ç”±åº“React-Routerï¼Œå®ƒæ˜¯å®˜æ–¹ç»´æŠ¤çš„ï¼Œäº‹å®ä¸Šä¹Ÿæ˜¯å”¯ä¸€å¯é€‰çš„è·¯ç”±åº“ã€‚å®ƒé€šè¿‡ç®¡ç† URLï¼Œå®ç°ç»„ä»¶çš„åˆ‡æ¢å’ŒçŠ¶æ€çš„å˜åŒ–ï¼Œå¼€å‘å¤æ‚çš„åº”ç”¨å‡ ä¹è‚¯å®šä¼šç”¨åˆ°ï¼Œç‰¹åˆ«æ˜¯SPA(å•é¡µåº”ç”¨) antdä½¿é¡µé¢æ›´åŠ ç¾è§‚Ant Design æ˜¯èš‚èšé‡‘æœå¼€å‘å’Œæ­£åœ¨ä½¿ç”¨çš„ä¸€å¥—ä¼ä¸šçº§çš„å‰ç«¯è®¾è®¡è¯­è¨€å’ŒåŸºäº React çš„å‰ç«¯æ¡†æ¶å®ç°ã€‚ ç‰¹æ€§ ä¼ä¸šçº§é‡‘èäº§å“çš„äº¤äº’è¯­è¨€å’Œè§†è§‰ä½“ç³»ã€‚ ä¸°å¯Œå®ç”¨çš„ React UI ç»„ä»¶ã€‚ åŸºäº React çš„ç»„ä»¶åŒ–å¼€å‘æ¨¡å¼ã€‚ èƒŒé  npm ç”Ÿæ€åœˆã€‚ åŸºäº webpack çš„è°ƒè¯•æ„å»ºæ–¹æ¡ˆï¼Œæ”¯æŒ ES6ã€‚ WebpackWebpackä½œä¸ºæ„å»ºå·¥å…· ES6è¯­æ³•å…¨é¢é‡‡ç”¨ES6è¯­æ³• å¼€å§‹æœ¬é¡¹ç›®ä»¥æ…•è¯¾ç½‘è§†é¢‘ä¸ºåŸå‹å¼€å‘ï¼Œå¤§å®¶å¯ä»¥å‘æŒ¥æƒ³è±¡æ”¹è¿›åŠŸèƒ½ğŸ˜„ ä¸‹è½½ä¸‹æ¥ä¹‹åï¼Œå…ˆå®‰è£…ä¾èµ– npm install æˆ–è€… cnpm installï¼Œç„¶åï¼š npm run dev or npm run build é¢„è§ˆPCç«¯ react-news æ‰‹æœºç«¯ react-news ğŸ‘‰ ä¸ªäººæŠ€æœ¯ç½‘ç«™ğŸ‘‰GitHub","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"ReactJS","slug":"ReactJS","permalink":"https://microzz.com/tags/ReactJS/"}]},{"title":"JSä¸­ä¸€ä¸ªè¿ç®—ç¬¦ä¼˜å…ˆçº§é—®é¢˜å¼•å‘çš„æ€è€ƒ","date":"2017-03-25T11:32:46.000Z","path":"2017/03/25/operator/","text":"JavaScriptä¸­ä¸€ä¸ªè¿ç®—ç¬¦ä¼˜å…ˆçº§é—®é¢˜å¼•å‘çš„æ€è€ƒé¢˜ç›® å‡è®¾ val å·²ç»å£°æ˜,å¯å®šä¹‰ä¸ºä»»ä½•å€¼ã€‚åˆ™ä¸‹é¢jsä»£ç æœ‰å¯èƒ½è¾“å‡ºçš„ç»“æœä¸º: console.log(&#39;Value is &#39; + (val != &#39;0&#39;) ? &#39;define&#39; : &#39;undefine&#39;); A. Value is defineB. Value is undefineC. defineD. undefineE. Value is define æˆ–è€… Value is undefineF. define æˆ–è€… undefineG. å…¶å®ƒé€‰é¡¹éƒ½æœ‰å¯èƒ½ å¦‚æœæ˜¯ä½ ï¼Œä½ ä¼šé€‰ä»€ä¹ˆå‘¢ï¼Ÿ å¯ä»¥è¯´ï¼Œå¤§éƒ¨åˆ†äººéƒ½ä¼šåœ¨Aã€Bã€Eä¸­é€‰æ‹©ï¼Œä»¥ä¸ºé‡ç‚¹åœ¨åé¢çš„ä¸‰ç›®è¿ç®—ç¬¦ï¼Œå‰é¢å­—ç¬¦ä¸²åŸæ ·è¾“å‡ºå°±æ˜¯äº†ã€‚ä½†æ˜¯ç­”æ¡ˆæ˜¯ C ã€‚ åˆ†æå› ä¸ºæˆ‘ä»¬å¿½ç•¥äº†è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ã€‚è¦çŸ¥é“ï¼ŒåŠ å· + ä¼˜å…ˆçº§é«˜äºä¸‰ç›®è¿ç®— ? :ï¼Œä½äºæ‹¬å· ()ã€‚ä¸ç®¡ (val != &#39;0&#39;) çš„çœŸå‡ï¼Œ&#39;Value is &#39; + (val != &#39;0&#39;) æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶ä¸”è½¬æ¢æˆå¸ƒå°”å€¼ä¸€å®šæ˜¯ true ï¼ ä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“åˆ†æé‡Œé¢çš„æ¯ä¸€éƒ¨åˆ†ã€‚ å…ˆæ¥çœ‹çœ‹æ‹¬å·é‡Œé¢çš„æƒ…å†µï¼Œé¢˜ç›®å·²ç»è¯´äº†ï¼š å‡è®¾ val å·²ç»å£°æ˜,å¯å®šä¹‰ä¸ºä»»ä½•å€¼ã€‚ æ‰€ä»¥ï¼Œ(val != &#39;0&#39;) çš„å€¼å¯ä»¥æ˜¯ true æˆ–è€… false ï¼Œé‚£ä¹ˆè¿™ä¸ªå°±æ¶‰åŠåˆ°JavaScriptçš„ä¸€äº›éšå¼è½¬æ¢é€»è¾‘ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œ 0 == &#39;0&#39; // true null == undefined // true false == &#39;0&#39; // true å¸¸ç”¨çš„éšå¼è½¬æ¢é€»è¾‘x+&quot;&quot; //ç­‰ä»·äºStringï¼ˆxï¼‰ +x //ç­‰ä»·äºNumberï¼ˆxï¼‰ï¼Œä¹Ÿå¯ä»¥å†™æˆx-0 !!x //ç­‰ä»·äºBoolean(x) é™„å½• - Javascriptç±»å‹è½¬æ¢ å€¼ è½¬æ¢ä¸ºï¼šå­—ç¬¦ä¸² æ•°å­— å¸ƒå°”å€¼ å¯¹è±¡ undefined â€œundefinedâ€ NaN false throws TypeError null â€œnullâ€ 0 false TypeError true â€œtrueâ€ 1 new Boolean(true) false â€œfalseâ€ 0 new Boolean(false) â€œâ€ç©ºå­—ç¬¦ä¸² 0 false new String(â€œâ€) â€œ1.2â€ï¼ˆéç©ºï¼Œæ•°å­—ï¼‰ 1.2 true new String(â€œ1.2â€) â€œoneâ€ï¼ˆéç©ºï¼Œéæ•°å­—ï¼‰ NaN true new String(â€œoneâ€) 0 â€œ0â€ false Number(0) -0 â€œ0â€ false Number(-0) NaN â€œNaNâ€ false new Number(NaN) Infinity â€œInfinityâ€ true new Number(Infinity) -Infinity â€œ-Infinityâ€ true new Number(-Infinity) 1ï¼ˆæ— ç©·å¤§ï¼Œéé›¶ï¼‰ â€œ1â€ true new Number(1) {}ï¼ˆä»»æ„å¯¹è±¡ï¼‰ true []ï¼ˆä»»æ„æ•°ç»„ï¼‰ â€œâ€ 0 true [9]ï¼ˆ1ä¸ªæ•°å­—å¯¹è±¡ï¼‰ â€œ9â€ 9 true [â€˜aâ€™]ï¼ˆå…¶ä»–æ•°ç»„ï¼‰ ä½¿ç”¨joinï¼ˆï¼‰æ–¹æ³• NaN true functionï¼ˆï¼‰ï½›ï½ï¼ˆä»»æ„å‡½æ•°ï¼‰ NaN true å›åˆ°æœ¬é¢˜æ¡ä»¶æ°¸è¿œä¸ºçœŸï¼Œå¹¶ä¸”åªè¾“å‡º &#39;define&#39; Booleanè¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ ä¸‹é¢ç¨‹åºçš„æ˜¾ç¤ºç»“æœæ˜¯ï¼Ÿ var x = new Boolean(false); if (x) { alert(&#39;hi&#39;); } var y = Boolean(0); if (y) { alert(&#39;hello&#39;); } xä¸ºBooleanå¯¹è±¡ï¼Œåœ¨ifè¯­å¥é‡Œçš„åˆ¤æ–­ä¸ºtrueï¼Œè™½ç„¶xçš„å€¼ä¸ºfalseï¼Œä½†æ˜¯ä½œä¸ºå¯¹è±¡ï¼Œifä¼šç›´æ¥åˆ¤æ–­ä¸ºtrueã€‚yä¸ºBooleanå€¼ï¼Œåœ¨ifé‡Œçš„åˆ¤æ–­å°±æ˜¯falseå€¼ã€‚æ‰€ä»¥ä¼šæ˜¾ç¤º &#39;hi&#39;ã€‚","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"Boolean","slug":"Boolean","permalink":"https://microzz.com/tags/Boolean/"}]},{"title":"ã€é¢è¯•é¢˜ã€‘åˆ›å»ºé•¿åº¦ä¸º100çš„æ•°ç»„","date":"2017-03-24T10:57:25.000Z","path":"2017/03/24/create-arr/","text":"ä¸ç”¨å¾ªç¯åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º100çš„æ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ çš„å€¼ç­‰äºå®ƒçš„ä¸‹æ ‡å…ˆæ¥è¯´ä¸€ä¸‹æœ€ç›´æ¥çš„è§£æ³•â€¦ var arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99]; â€¦ æ¥ä¸‹æ¥è½¬å…¥æ­£é¢˜ã€‚ã€‚ã€‚ ä¼ ç»Ÿforå¾ªç¯æ¥è¯´ä¸€ä¸‹ä¼ ç»Ÿçš„forå¾ªç¯ï¼š var arr = new Array(100) for (var i = 0; i &lt; arr.length; i++) { arr[i] = i; } arr; // [0, 1, ..., 99] æƒ³å¿…å¤§å®¶éƒ½æ²¡ä»€ä¹ˆé—®é¢˜ğŸ‘ ä¸ç”¨forå¾ªç¯ä½†æ˜¯å¦‚ä½•ä¸ç”¨forå¾ªç¯å®ç°å‘¢ï¼Ÿ ES5çš„å®ç°Object.keys(Array.from({ length: 100 })); // [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, ..., &quot;98&quot;, &quot;99&quot;] ä»€ä¹ˆï¼ŸArray.fromæ˜¯ES6çš„ï¼Ÿæ²¡äº‹ï¼Œæˆ‘ä»¬å¯ä»¥æ¢æˆES5çš„ğŸ˜„ Object.keys( Array.apply(null,{ length: 100 })); è¿™æ ·ä¼¼ä¹çš„ç¡®å®Œæˆäº†åŠŸèƒ½ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ­¤æ—¶å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ES5çš„mapæ–¹æ³•è¿›è¡Œå¤„ç†ä¸€ä¸‹ï¼š Object.keys(Array.from({ length: 100 })).map(function(item) { return +item; }); è¿™é‡Œç”¨äº†ä¸€ä¸ªå°æŠ€å·§ï¼Œå­—ç¬¦ä¸²å‰é¢åŠ ä¸€ä¸ª â€œ+â€ å°±å¯ä»¥è½¬æˆæ•°å­—ã€‚å¦‚æœä½ ä¸å–œæ¬¢è¿™æ ·ï¼Œå¯ä»¥ä½¿ç”¨parseIntï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœã€‚ ES6çš„å®ç°æ™®é€šå®ç°ES6ä¸­æ•°ç»„å®ä¾‹æœ‰keysã€valuesã€entriesæ–¹æ³•ï¼Œåˆ†åˆ«ç”¨äºéå†æ•°ç»„çš„ç´¢å¼•ã€é”®å€¼ã€é”®å€¼å¯¹ï¼Œå®ƒä»¬éƒ½è¿”å›éå†å™¨å¯¹è±¡ï¼ˆè¯¦ç»†ğŸ‘‰Iteratorå’Œforâ€¦ofå¾ªç¯ï¼‰ å› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨ES6çš„Array.fromè½¬æˆæ•°ç»„ï¼š Array.from(new Array(100).keys()); Array.fromå…¶å®è¿˜æœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿éå†å¤„ç†æ¯ä¸€ä¸ªæ•°æ® Array.from({ length: 100 }, (v, i) =&gt; i); Array.from(Array(100), (v, i) =&gt; i); // [0, 1, 2, ..., 98, 99] ä¼˜é›…è¿›é˜¶ - æ‰©å±•è¿ç®—ç¬¦ES6æ–°å¢ ... æ‰©å±•è¿ç®—ç¬¦ï¼Œæå¤§æ–¹ä¾¿äº†ç›¸å…³æ“ä½œ(è¯¦è§ğŸ‘‰å‡½æ•°çš„æ‰©å±•é‡Œé¢çš„æ‰©å±•è¿ç®—ç¬¦) å› æ­¤æˆ‘ä»¬å¯ä»¥æ›´åŠ ä¼˜é›…åœ°å®ç°ï¼š [...Array(100).keys()] æˆ–è€… [...Array.from({ length: 100 }).keys()] æ€è·¯å°±æ˜¯è¿™æ ·ï¼Œå½“ç„¶æˆ‘ä»¬è¿˜å¯ä»¥æ··åˆæ­é…å‡ºå„ç§è§£æ³•ï¼Œç”šè‡³ES5ã€ES6æ··åˆğŸ˜‚æœ‰å¯èƒ½è¿˜æœ‰å„ç§å¥‡å¦™è§£æ³•ï¼Œæ¯ä¸ªäººå»ç»†ç»†ä¸“ç ”å§ğŸ˜Š","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"Array","slug":"Array","permalink":"https://microzz.com/tags/Array/"},{"name":"ECMAScrpt6","slug":"ECMAScrpt6","permalink":"https://microzz.com/tags/ECMAScrpt6/"}]},{"title":"Reactå’ŒVueå¯¹æ¯”","date":"2017-03-22T15:23:29.000Z","path":"2017/03/22/react-vue/","text":"React.jså’ŒVue.jså¯¹æ¯”ç›¸åŒç‚¹ æ•°æ®é©±åŠ¨è§†å›¾ï¼Œæä¾›å“åº”å¼çš„è§†å›¾ç»„ä»¶ éƒ½æœ‰Virtual DOMï¼Œç»„ä»¶åŒ–å¼€å‘ï¼Œé€šè¿‡propså‚æ•°è¿›è¡Œçˆ¶å­ç»„ä»¶æ•°æ®çš„ä¼ é€’ï¼Œéƒ½å®ç°webComponentsè§„èŒƒ æ•°æ®æµåŠ¨å•å‘éƒ½æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ éƒ½æœ‰æ”¯æŒnativeçš„æ–¹æ¡ˆï¼ŒReactçš„React nativeï¼ŒVueçš„weex ä¸åŒç‚¹ ç¤¾åŒºï¼šReactç¤¾åŒºè¿˜æ˜¯è¦æ¯”vueå¤§å¾ˆå¤šï¼› å¼€å‘æ¨¡å¼ï¼šReactåœ¨viewå±‚ä¾µå…¥æ€§è¿˜æ˜¯è¦æ¯”Vueå¤§å¾ˆå¤šçš„,Reactä¸¥æ ¼ä¸Šåªé’ˆå¯¹MVCçš„viewå±‚ï¼ŒVueåˆ™æ˜¯MVVMæ¨¡å¼çš„ä¸€ç§å®ç°ï¼› æ•°æ®ç»‘å®šï¼šVueæœ‰å®ç°äº†åŒå‘æ•°æ®ç»‘å®šï¼ŒReactæ•°æ®æµåŠ¨æ˜¯å•å‘çš„ æ•°æ®æ¸²æŸ“ï¼šå¯¹äºå¤§è§„æ¨¡æ•°æ®æ¸²æŸ“ï¼ŒReactè¦æ¯”Vueæ›´å¿«ï¼Œæ¸²æŸ“æœºåˆ¶å¯åŠ¨æ—¶å€™è¦åšçš„å·¥ä½œæ¯”è¾ƒå¤šï¼› æ•°æ®æ›´æ–°æ–¹é¢ï¼šVue ç”±äºé‡‡ç”¨ä¾èµ–è¿½è¸ªï¼Œé»˜è®¤å°±æ˜¯ä¼˜åŒ–çŠ¶æ€ï¼šä½ åŠ¨äº†å¤šå°‘æ•°æ®ï¼Œå°±è§¦å‘å¤šå°‘æ›´æ–°ï¼Œä¸å¤šä¹Ÿä¸å°‘ã€‚Reactåœ¨å¤æ‚çš„åº”ç”¨é‡Œæœ‰ä¸¤ä¸ªé€‰æ‹©: (1). æ‰‹åŠ¨æ·»åŠ  shouldComponentUpdate æ¥é¿å…ä¸éœ€è¦çš„ vdom re-renderã€‚(2).Components å°½å¯èƒ½éƒ½ç”¨ pureRenderMixinï¼Œç„¶åé‡‡ç”¨ redux ç»“æ„ + Immutable.jsï¼› å¼€å‘é£æ ¼çš„åå¥½ï¼šReact æ¨èçš„åšæ³•æ˜¯ JSX + inline styleï¼Œä¹Ÿå°±æ˜¯æŠŠ HTML å’Œ CSS å…¨éƒ½å†™è¿› JavaScript äº†ï¼Œå³â€all in jsâ€ï¼›Vueè¿›é˜¶ä¹‹åæ¨èçš„æ˜¯ä½¿ç”¨ webpack + vue-loader çš„å•æ–‡ä»¶ç»„ä»¶æ ¼å¼ï¼Œå³html,css,jså†™åœ¨åŒä¸€ä¸ªæ–‡ä»¶ï¼› ä½¿ç”¨åœºæ™¯ï¼šReacté…åˆReduxæ¶æ„é€‚åˆè¶…å¤§è§„æ¨¡å¤šäººåä½œçš„å¤æ‚é¡¹ç›®;Vueåˆ™é€‚åˆå°å¿«çµçš„é¡¹ç›®ã€‚å¯¹äºéœ€è¦å¯¹ DOM è¿›è¡Œå¾ˆå¤šè‡ªå®šä¹‰æ“ä½œçš„é¡¹ç›®ï¼ŒVue çš„çµæ´»æ€§ä¼˜äº Reactï¼› Vueè¦æ¯”Reactæ›´å¥½ä¸Šæ‰‹ï¼Œå…·ä½“å¯èƒ½ä½“ç°åœ¨å¾ˆå¤šäººä¸ç†Ÿæ‚‰Reactçš„JSXè¯­æ³•å’Œå‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ï¼Œä»¥åŠæƒ³è¦å‘æŒ¥å‡ºReactçš„æœ€å¤§å¨åŠ›éœ€è¦å­¦ä¹ å®ƒä¸€ç³»åˆ—ç”Ÿæ€çš„ç¼˜æ•…ï¼› Vueç€é‡æé«˜å¼€å‘æ•ˆç‡,è®©å‰ç«¯ç¨‹åºå‘˜æ›´å¿«é€Ÿæ–¹ä¾¿çš„å¼€å‘åº”ç”¨ã€‚Reactç€é‡äºå˜é©å¼€å‘æ€æƒ³ï¼Œæå‡å‰ç«¯ç¨‹åºå‘˜ç¼–ç¨‹çš„æ·±åº¦ä¸åˆ›é€ åŠ›,è®©å‰ç«¯å·¥ç¨‹å¸ˆæˆä¸ºçœŸæ­£çš„ç¨‹åºå‘˜è€Œä¸æ˜¯UIçš„æ„å»ºè€… å…³äºGitHub: ğŸ‘‰https://github.com/microzz","tags":[{"name":"Vue.js","slug":"Vue-js","permalink":"https://microzz.com/tags/Vue-js/"},{"name":"ReactJS","slug":"ReactJS","permalink":"https://microzz.com/tags/ReactJS/"}]},{"title":"Vue.js2.0å­¦ä¹ ç¬”è®°","date":"2017-03-20T14:30:39.000Z","path":"2017/03/20/vue-note/","text":"Vue.js2.0å­¦ä¹ ç¬”è®°çˆ¶å­ç»„ä»¶å¦‚ä½•é€šä¿¡1.çˆ¶å­ç»„ä»¶å¦‚ä½•é€šä¿¡ï¼Ÿ äº‹ä»¶ çˆ¶ç»„ä»¶ç›‘å¬ä¸€ä¸ªäº‹ä»¶ï¼Œå­ç»„ä»¶è§¦å‘è¯¥äº‹ä»¶ï¼Œå¹¶ä¸”å¯ä»¥ä¼ é€’è‡ªèº«æ•°æ®ã€‚æ¯”å¦‚ // çˆ¶ç»„ä»¶å¼•å…¥å­ç»„ä»¶ &lt;child v-on:tellFather=&quot;fatherFunc&quot;&gt;&lt;/child&gt; // çˆ¶ç»„ä»¶ data é‡Œé¢æœ‰ info data() { return { info: &#39;&#39; } // çˆ¶ç»„ä»¶ methods æœ‰ fatherFunc æ–¹æ³• methods: { fatherFunc(msg) { this.info = msg } } // å­ç»„ä»¶ é€šè¿‡ childFunc è§¦å‘çˆ¶ç»„ä»¶ç›‘å¬çš„äº‹ä»¶ &lt;button v-on:click=&quot;childFunc&quot;&gt;Button&lt;/button&gt; // å­ç»„ä»¶ data é‡Œé¢æœ‰ msg ä¿¡æ¯è¦ä¼ ç»™çˆ¶ç»„ä»¶ data() { return { msg: &#39;This is the message from child&#39; } }, // å­ç»„ä»¶çš„ childFunc æ–¹æ³• methods: { childFunc() { // å…³é”®ï¼ï¼ï¼ // å­ç»„ä»¶è§¦å‘çˆ¶ç»„ä»¶çš„ tellFather äº‹ä»¶ï¼Œ // å¹¶å¯ä»¥ä¼ é€’è‡ªèº« data é‡Œé¢çš„æ•°æ®ç»™çˆ¶ç»„ä»¶ this.$emit(&#39;tellFather&#39;, this.msg) } } ä½¿ç”¨Vuex ä½¿ç”¨ Vuex è®©ä¸åŒç»„ä»¶é—´å…±äº«çŠ¶æ€(state) this.$parent.message2.å­ç»„ä»¶ä¸­ä½¿ç”¨this.$parent.messageå¯ä»¥è·å–çˆ¶äº²dataé‡Œé¢çš„message this.$refs3.this.$refs.imgå¯ä»¥è·å–refå±æ€§ä¸ºimgçš„DOMå…ƒç´  $event4.æœ‰æ—¶ä¹Ÿéœ€è¦åœ¨å†…è”è¯­å¥å¤„ç†å™¨ä¸­è®¿é—®åŸç”Ÿ DOM äº‹ä»¶ã€‚å¯ä»¥ç”¨ç‰¹æ®Šå˜é‡ $event æŠŠå®ƒä¼ å…¥æ–¹æ³•ï¼š &lt;button v-on:click=&quot;warn(&#39;Form cannot be submitted yet.&#39;, $event)&quot;&gt;Submit&lt;/button&gt; // ... methods: { warn: function (message, event) { // ç°åœ¨æˆ‘ä»¬å¯ä»¥è®¿é—®åŸç”Ÿäº‹ä»¶å¯¹è±¡ if (event) event.preventDefault() alert(message) } } ä¿®é¥°ç¬¦5.åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­è°ƒç”¨ event.preventDefault() æˆ– event.stopPropagation() æ˜¯éå¸¸å¸¸è§çš„éœ€æ±‚ã€‚å°½ç®¡æˆ‘ä»¬å¯ä»¥åœ¨ methods ä¸­è½»æ¾å®ç°è¿™ç‚¹ï¼Œä½†æ›´å¥½çš„æ–¹å¼æ˜¯ï¼šmethods åªæœ‰çº¯ç²¹çš„æ•°æ®é€»è¾‘ï¼Œè€Œä¸æ˜¯å»å¤„ç† DOM äº‹ä»¶ç»†èŠ‚ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ Vue.js ä¸ºv-on æä¾›äº† äº‹ä»¶ä¿®é¥°ç¬¦ã€‚é€šè¿‡ç”±ç‚¹(.)è¡¨ç¤ºçš„æŒ‡ä»¤åç¼€æ¥è°ƒç”¨ä¿®é¥°ç¬¦ã€‚.stop.prevent.capture.self.once &lt;!-- é˜»æ­¢å•å‡»äº‹ä»¶å†’æ³¡ --&gt; &lt;a v-on:click.stop=&quot;doThis&quot;&gt;&lt;/a&gt; &lt;!-- æäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢ --&gt; &lt;form v-on:submit.prevent=&quot;onSubmit&quot;&gt;&lt;/form&gt; &lt;!-- ä¿®é¥°ç¬¦å¯ä»¥ä¸²è” --&gt; &lt;a v-on:click.stop.prevent=&quot;doThat&quot;&gt;&lt;/a&gt; &lt;!-- åªæœ‰ä¿®é¥°ç¬¦ --&gt; &lt;form v-on:submit.prevent&gt;&lt;/form&gt; &lt;!-- æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨æ—¶ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼ --&gt; &lt;div v-on:click.capture=&quot;doThis&quot;&gt;...&lt;/div&gt; &lt;!-- åªå½“äº‹ä»¶åœ¨è¯¥å…ƒç´ æœ¬èº«ï¼ˆè€Œä¸æ˜¯å­å…ƒç´ ï¼‰è§¦å‘æ—¶è§¦å‘å›è°ƒ --&gt; &lt;div v-on:click.self=&quot;doThat&quot;&gt;...&lt;/div&gt; name6.ä¸€å¼€å§‹å¥½å¤šäººä¼šå¿½è§† name çš„å±æ€§ï¼Œä¸ºä»€ä¹ˆè¦ç»™ç»„ä»¶å†™ä¸Š name å‘¢ï¼Ÿ å…è®¸ç»„ä»¶æ¨¡æ¿é€’å½’åœ°è°ƒç”¨è‡ªèº«ã€‚æ³¨æ„ï¼Œç»„ä»¶åœ¨å…¨å±€ç”¨ Vue.component() æ³¨å†Œæ—¶ï¼Œå…¨å±€ ID è‡ªåŠ¨ä½œä¸ºç»„ä»¶çš„ nameã€‚ æŒ‡å®š name é€‰é¡¹çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯ä¾¿äºè°ƒè¯•ã€‚æœ‰åå­—çš„ç»„ä»¶æœ‰æ›´å‹å¥½çš„è­¦å‘Šä¿¡æ¯ã€‚å¦å¤–ï¼Œå½“åœ¨æœ‰ vue-devtools, æœªå‘½åç»„ä»¶å°†æ˜¾ç¤ºæˆ &lt;AnonymousComponent&gt;, è¿™å¾ˆæ²¡æœ‰è¯­ä¹‰ã€‚é€šè¿‡æä¾› name é€‰é¡¹ï¼Œå¯ä»¥è·å¾—æ›´æœ‰è¯­ä¹‰ä¿¡æ¯çš„ç»„ä»¶æ ‘ã€‚ Vuex action7.Vuexä¸­ Mutations å¿…é¡»æ˜¯åŒæ­¥çš„ï¼ŒAction æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ã€‚Action å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚ æœªå®Œå¾…ç»­â€¦","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"Vue.js","slug":"Vue-js","permalink":"https://microzz.com/tags/Vue-js/"},{"name":"Vuex","slug":"Vuex","permalink":"https://microzz.com/tags/Vuex/"}]},{"title":"SASSç”¨æ³•æŒ‡å—","date":"2017-03-18T15:17:32.000Z","path":"2017/03/18/sass/","text":"&nbsp;&nbsp;&nbsp;&nbsp;å­¦è¿‡CSSçš„äººéƒ½çŸ¥é“ï¼Œå®ƒä¸æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚&nbsp;&nbsp;&nbsp;&nbsp;ä½ å¯ä»¥ç”¨å®ƒå¼€å‘ç½‘é¡µæ ·å¼ï¼Œä½†æ˜¯æ²¡æ³•ç”¨å®ƒç¼–ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCSSåŸºæœ¬ä¸Šæ˜¯è®¾è®¡å¸ˆçš„å·¥å…·ï¼Œä¸æ˜¯ç¨‹åºå‘˜çš„å·¥å…·ã€‚åœ¨ç¨‹åºå‘˜çœ¼é‡Œï¼ŒCSSæ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„ä¸œè¥¿ã€‚å®ƒæ²¡æœ‰å˜é‡ï¼Œä¹Ÿæ²¡æœ‰æ¡ä»¶è¯­å¥ï¼Œåªæ˜¯ä¸€è¡Œè¡Œå•çº¯çš„æè¿°ï¼Œå†™èµ·æ¥ç›¸å½“è´¹äº‹ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;å¾ˆè‡ªç„¶åœ°ï¼Œæœ‰äººå°±å¼€å§‹ä¸ºCSSåŠ å…¥ç¼–ç¨‹å…ƒç´ ï¼Œè¿™è¢«å«åšâ€CSSé¢„å¤„ç†å™¨â€ï¼ˆcss preprocessorï¼‰ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œç”¨ä¸€ç§ä¸“é—¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿›è¡Œç½‘é¡µæ ·å¼è®¾è®¡ï¼Œç„¶åå†ç¼–è¯‘æˆæ­£å¸¸çš„CSSæ–‡ä»¶ã€‚&nbsp;&nbsp;&nbsp;&nbsp;å„ç§â€CSSé¢„å¤„ç†å™¨â€ä¹‹ä¸­ï¼Œæˆ‘è‡ªå·±æœ€å–œæ¬¢SASSï¼Œè§‰å¾—å®ƒæœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œæ‰“ç®—ä»¥åéƒ½ç”¨å®ƒæ¥å†™CSSã€‚ä¸‹é¢æ˜¯æˆ‘æ•´ç†çš„ç”¨æ³•æ€»ç»“ï¼Œä¾›è‡ªå·±å¼€å‘æ—¶å‚è€ƒï¼Œç›¸ä¿¡å¯¹å…¶ä»–äººä¹Ÿæœ‰ç”¨ã€‚ SASSç”¨æ³•æŒ‡å—ä½œè€…ï¼šé˜®ä¸€å³° ä¸€ã€ä»€ä¹ˆæ˜¯SASSSASSæ˜¯ä¸€ç§CSSçš„å¼€å‘å·¥å…·ï¼Œæä¾›äº†è®¸å¤šä¾¿åˆ©çš„å†™æ³•ï¼Œå¤§å¤§èŠ‚çœäº†è®¾è®¡è€…çš„æ—¶é—´ï¼Œä½¿å¾—CSSçš„å¼€å‘ï¼Œå˜å¾—ç®€å•å’Œå¯ç»´æŠ¤ã€‚æœ¬æ–‡æ€»ç»“äº†SASSçš„ä¸»è¦ç”¨æ³•ã€‚æˆ‘çš„ç›®æ ‡æ˜¯ï¼Œæœ‰äº†è¿™ç¯‡æ–‡ç« ï¼Œæ—¥å¸¸çš„ä¸€èˆ¬ä½¿ç”¨å°±ä¸éœ€è¦å»çœ‹å®˜æ–¹æ–‡æ¡£äº†ã€‚ äºŒã€å®‰è£…å’Œä½¿ç”¨2.1 å®‰è£…SASSæ˜¯Rubyè¯­è¨€å†™çš„ï¼Œä½†æ˜¯ä¸¤è€…çš„è¯­æ³•æ²¡æœ‰å…³ç³»ã€‚ä¸æ‡‚Rubyï¼Œç…§æ ·ä½¿ç”¨ã€‚åªæ˜¯å¿…é¡»å…ˆå®‰è£…Rubyï¼Œç„¶åå†å®‰è£…SASSã€‚å‡å®šä½ å·²ç»å®‰è£…å¥½äº†Rubyï¼Œæ¥ç€åœ¨å‘½ä»¤è¡Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼š gem install sassç„¶åï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚ 2.2 ä½¿ç”¨SASSæ–‡ä»¶å°±æ˜¯æ™®é€šçš„æ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢å¯ä»¥ç›´æ¥ä½¿ç”¨CSSè¯­æ³•ã€‚æ–‡ä»¶åç¼€åæ˜¯.scssï¼Œæ„æ€ä¸ºSassy CSSã€‚ä¸‹é¢çš„å‘½ä»¤ï¼Œå¯ä»¥åœ¨å±å¹•ä¸Šæ˜¾ç¤º.scssæ–‡ä»¶è½¬åŒ–çš„cssä»£ç ã€‚ï¼ˆå‡è®¾æ–‡ä»¶åä¸ºtestã€‚ï¼‰ sass test.scsså¦‚æœè¦å°†æ˜¾ç¤ºç»“æœä¿å­˜æˆæ–‡ä»¶ï¼Œåé¢å†è·Ÿä¸€ä¸ª.cssæ–‡ä»¶åã€‚ sass test.scss test.cssSASSæä¾›å››ä¸ªç¼–è¯‘é£æ ¼çš„é€‰é¡¹ï¼š nestedï¼šåµŒå¥—ç¼©è¿›çš„cssä»£ç ï¼Œå®ƒæ˜¯é»˜è®¤å€¼ã€‚ expandedï¼šæ²¡æœ‰ç¼©è¿›çš„ã€æ‰©å±•çš„cssä»£ç ã€‚ compactï¼šç®€æ´æ ¼å¼çš„cssä»£ç ã€‚ compressedï¼šå‹ç¼©åçš„cssä»£ç ã€‚ç”Ÿäº§ç¯å¢ƒå½“ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨æœ€åä¸€ä¸ªé€‰é¡¹ã€‚ sass --style compressed test.sass test.cssä½ ä¹Ÿå¯ä»¥è®©SASSç›‘å¬æŸä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œä¸€æ—¦æºæ–‡ä»¶æœ‰å˜åŠ¨ï¼Œå°±è‡ªåŠ¨ç”Ÿæˆç¼–è¯‘åçš„ç‰ˆæœ¬ã€‚ // watch a file sass --watch input.scss:output.css // watch a directory sass --watch app/sass:public/stylesheets SASSçš„å®˜æ–¹ç½‘ç«™ï¼Œæä¾›äº†ä¸€ä¸ªåœ¨çº¿è½¬æ¢å™¨ã€‚ä½ å¯ä»¥åœ¨é‚£é‡Œï¼Œè¯•è¿è¡Œä¸‹é¢çš„å„ç§ä¾‹å­ã€‚ ä¸‰ã€åŸºæœ¬ç”¨æ³•3.1 å˜é‡SASSå…è®¸ä½¿ç”¨å˜é‡ï¼Œæ‰€æœ‰å˜é‡ä»¥$å¼€å¤´ã€‚ $blue : #1875e7; div { color : $blue; } å¦‚æœå˜é‡éœ€è¦é•¶åµŒåœ¨å­—ç¬¦ä¸²ä¹‹ä¸­ï¼Œå°±å¿…é¡»éœ€è¦å†™åœ¨#{}ä¹‹ä¸­ã€‚ $side : left; .rounded { border-#{$side}-radius: 5px; } 3.2 è®¡ç®—åŠŸèƒ½SASSå…è®¸åœ¨ä»£ç ä¸­ä½¿ç”¨ç®—å¼ï¼š body { margin: (14px/2); top: 50px + 100px; right: $var * 10%; } 3.3 åµŒå¥—SASSå…è®¸é€‰æ‹©å™¨åµŒå¥—ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„CSSä»£ç ï¼š div h1 { color : red; } å¯ä»¥å†™æˆï¼š div { hi { color:red; } } å±æ€§ä¹Ÿå¯ä»¥åµŒå¥—ï¼Œæ¯”å¦‚border-colorå±æ€§ï¼Œå¯ä»¥å†™æˆï¼š p { border: { color: red; } } æ³¨æ„ï¼Œborderåé¢å¿…é¡»åŠ ä¸Šå†’å·ã€‚åœ¨åµŒå¥—çš„ä»£ç å—å†…ï¼Œå¯ä»¥ä½¿ç”¨&amp;å¼•ç”¨çˆ¶å…ƒç´ ã€‚æ¯”å¦‚a:hoverä¼ªç±»ï¼Œå¯ä»¥å†™æˆï¼š a { &amp;:hover { color: #ffb3ff; } } 3.4 æ³¨é‡ŠSASSå…±æœ‰ä¸¤ç§æ³¨é‡Šé£æ ¼ã€‚æ ‡å‡†çš„CSSæ³¨é‡Š /* comment */ï¼Œä¼šä¿ç•™åˆ°ç¼–è¯‘åçš„æ–‡ä»¶ã€‚å•è¡Œæ³¨é‡Š // commentï¼Œåªä¿ç•™åœ¨SASSæºæ–‡ä»¶ä¸­ï¼Œç¼–è¯‘åè¢«çœç•¥ã€‚åœ¨/*åé¢åŠ ä¸€ä¸ªæ„Ÿå¹å·ï¼Œè¡¨ç¤ºè¿™æ˜¯â€é‡è¦æ³¨é‡Šâ€ã€‚å³ä½¿æ˜¯å‹ç¼©æ¨¡å¼ç¼–è¯‘ï¼Œä¹Ÿä¼šä¿ç•™è¿™è¡Œæ³¨é‡Šï¼Œé€šå¸¸å¯ä»¥ç”¨äºå£°æ˜ç‰ˆæƒä¿¡æ¯ã€‚ /*! é‡è¦æ³¨é‡Šï¼ */ å››ã€ä»£ç çš„é‡ç”¨4.1 ç»§æ‰¿SASSå…è®¸ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œç»§æ‰¿å¦ä¸€ä¸ªé€‰æ‹©å™¨ã€‚æ¯”å¦‚ï¼Œç°æœ‰class1ï¼š .class1 { border: 1px solid #ddd; } class2è¦ç»§æ‰¿class1ï¼Œå°±è¦ä½¿ç”¨@extendå‘½ä»¤ï¼š .class2 { @extend .class1; font-size:120%; } 4.2 MixinMixinæœ‰ç‚¹åƒCè¯­è¨€çš„å®ï¼ˆmacroï¼‰ï¼Œæ˜¯å¯ä»¥é‡ç”¨çš„ä»£ç å—ã€‚ä½¿ç”¨@mixinå‘½ä»¤ï¼Œå®šä¹‰ä¸€ä¸ªä»£ç å—ã€‚ @mixin left { float: left; margin-left: 10px; } ä½¿ç”¨@includeå‘½ä»¤ï¼Œè°ƒç”¨è¿™ä¸ªmixinã€‚ div { @include left; } mixinçš„å¼ºå¤§ä¹‹å¤„ï¼Œåœ¨äºå¯ä»¥æŒ‡å®šå‚æ•°å’Œç¼ºçœå€¼ã€‚ @mixin left($value: 10px) { float: left; margin-right: $value; } ä½¿ç”¨çš„æ—¶å€™ï¼Œæ ¹æ®éœ€è¦åŠ å…¥å‚æ•°ï¼š div { @include left(20px); } ä¸‹é¢æ˜¯ä¸€ä¸ªmixinçš„å®ä¾‹ï¼Œç”¨æ¥ç”Ÿæˆæµè§ˆå™¨å‰ç¼€ã€‚ @mixin rounded($vert, $horz, $radius: 10px) { border-#{$vert}-#{$horz}-radius: $radius; -moz-border-radius-#{$vert}#{$horz}: $radius; -webkit-border-#{$vert}-#{$horz}-radius: $radius; } ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·è°ƒç”¨ï¼š #navbar li { @include rounded(top, left); } #footer { @include rounded(top, left, 5px); } 4.3 é¢œè‰²å‡½æ•°SASSæä¾›äº†ä¸€äº›å†…ç½®çš„é¢œè‰²å‡½æ•°ï¼Œä»¥ä¾¿ç”Ÿæˆç³»åˆ—é¢œè‰²ã€‚ lighten(#cc3, 10%) // #d6d65c darken(#cc3, 10%) // #a3a329 grayscale(#cc3) // #808080 complement(#cc3) // #33c 4.4 æ’å…¥æ–‡ä»¶@importå‘½ä»¤ï¼Œç”¨æ¥æ’å…¥å¤–éƒ¨æ–‡ä»¶ã€‚ @import &quot;path/filename.scss&quot;;å¦‚æœæ’å…¥çš„æ˜¯.cssæ–‡ä»¶ï¼Œåˆ™ç­‰åŒäºcssçš„importå‘½ä»¤ã€‚ @import &quot;foo.css&quot;; äº”ã€é«˜çº§ç”¨æ³•5.1 æ¡ä»¶è¯­å¥@ifå¯ä»¥ç”¨æ¥åˆ¤æ–­ï¼š p { @if 1 + 1 == 2 { border: 1px solid; } @if 5 &lt; 3 { border: 2px dotted; } } é…å¥—çš„è¿˜æœ‰@elseå‘½ä»¤ï¼š @if lightness($color) &gt; 30% { background-color: #000; } @else { background-color: #fff; } 5.2 å¾ªç¯è¯­å¥SASSæ”¯æŒforå¾ªç¯ï¼š @for $i from 1 to 10 { .border-#{$i} { border: #{$i}px solid blue; } } ä¹Ÿæ”¯æŒwhileå¾ªç¯ï¼š $i: 6; @while $i &gt; 0 { .item-#{$i} { width: 2em * $i; } $i: $i - 2; } eachå‘½ä»¤ï¼Œä½œç”¨ä¸forç±»ä¼¼ï¼š @each $member in a, b, c, d { .#{$member} { background-image: url(&quot;/image/#{$member}.jpg&quot;); } } 5.3 è‡ªå®šä¹‰å‡½æ•°SASSå…è®¸ç”¨æˆ·ç¼–å†™è‡ªå·±çš„å‡½æ•°ã€‚ @function double($n) { @return $n * 2; } #sidebar { width: double(5px); } é¡»çŸ¥æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„æ€»ç»“ï¼ŒåŸæ–‡åœ°å€","tags":[{"name":"SASS","slug":"SASS","permalink":"https://microzz.com/tags/SASS/"},{"name":"SCSS","slug":"SCSS","permalink":"https://microzz.com/tags/SCSS/"},{"name":"CSS","slug":"CSS","permalink":"https://microzz.com/tags/CSS/"}]},{"title":"Vue.jså†™ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨","date":"2017-03-15T13:44:02.000Z","path":"2017/03/15/vue-music/","text":"Vue.jså†™ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨VueéŸ³ä¹æ’­æ”¾å™¨2.0å‡çº§ç‰ˆå·²ç»å‘å¸ƒï¼Œè¯·çœ‹ğŸ‘‰ Vue.jséŸ³ä¹æ’­æ”¾å™¨å‡çº§ç‰ˆ åœ¨çº¿é¢„è§ˆ2.0ç‰ˆæœ¬é¢„è§ˆåœ°å€ï¼šğŸ”—https://microzz.com/vue-music/åœ¨çº¿é¢„è§ˆåœ°å€1: ğŸ”—http://microzz.cn/vue-music/åœ¨çº¿é¢„è§ˆåœ°å€2: ğŸ”—https://microzz.github.io/vue-music-player/ æºä»£ç GitHubåœ°å€: ğŸ”—https://github.com/microzz/vue-music-playeræ¬¢è¿å¤§å®¶followå’Œstarå“¦ğŸ˜„ ä»‹ç»å­¦ä¹ Vue.jsåï¼Œå†³å®šåšä¸ªå°é¡¹ç›®é”»ç‚¼ä¸€ä¸‹ï¼Œäºæ˜¯é€‰æ‹©äº†å…¸å‹çš„éŸ³ä¹æ’­æ”¾å™¨ä¸Šæ‰‹ã€‚å…¶ä¸­é‡åˆ°äº†å¾ˆå¤šå‘ï¼Œä¹Ÿå­¦åˆ°äº†å¾ˆå¤šã€‚ä»£ç å¯èƒ½è¿˜æœ‰ç‘•ç–µï¼Œæ¬¢è¿å¤§å®¶åˆ°æˆ‘çš„GitHubåé¦ˆï¼Œç›¸äº’äº¤æµå­¦ä¹ ã€‚åŒæ—¶ä¹Ÿæ¬¢è¿å¤§å®¶followå’ŒstarğŸ˜„é¢„è§ˆå›¾ï¼š çº¢è‰²çš®è‚¤-microzz.com ç»¿è‰²çš®è‚¤-microzz.com è“è‰²çš®è‚¤-microzz.com é»‘è‰²çš®è‚¤-microzz.com æŠ€æœ¯æ ˆVue.jsVueçš„åŒå‘æ•°æ®ç»‘å®šçœŸçš„å¾ˆçˆ½ï¼Œè®©å¼€å‘è€…æ›´å¤šçš„å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯è€—æ€§èƒ½çš„DOMæ“ä½œã€‚å€Ÿé‰´äº†React.jså’ŒAngular.jsç­‰è‘—åæ¡†æ¶ï¼ŒVueå†™èµ·æ¥ä¹Ÿçš„ç¡®å¾ˆæ–¹ä¾¿ï¼Œå¾ˆå¤šåœ°æ–¹ä¹Ÿæƒ³çš„å¾ˆå‘¨åˆ°ã€‚å› ä¸ºå®é™…åœºæ™¯ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨åˆ°è·¯ç”±ã€vuexç­‰ä¸œè¥¿ã€‚å…¶ä¸­ä¹Ÿé‡åˆ°äº†å‡ ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼š ç”¨å¥½watchä¼šäº‹åŠåŠŸå€ æœ‰äº›æ“ä½œè¦åœ¨å®ä¾‹åŠ è½½å®Œï¼Œæ‰€ä»¥é’©å­å‡½æ•°mountedéœ€è¦æ³¨æ„ å¾ˆå¤šå°æŠ€å·§è¦è¯•è¿‡æ‰çŸ¥é“èµ°äº†å¼¯è·¯ğŸ˜‚ ES6æœ¬ç¤ºä¾‹é‡‡ç”¨çš„æ˜¯ES6çš„è¯­æ³•ï¼Œå› ä¸ºwebpackç¼–è¯‘ï¼Œæ‰€ä»¥ä¹Ÿä¸å¿…å¤ªè¿‡å½“å¿ƒå…¼å®¹æ€§é—®é¢˜ã€‚ES6ä¹Ÿå³ECMAScript 2015ï¼Œå‘å¸ƒä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå¾ˆå¤šåœ°æ–¹å¾ˆæ–¹ä¾¿ï¼Œè¿™æ˜¯å¤§åŠ¿æ‰€è¶‹ï¼Œä»¥åä¼šæ…¢æ…¢åœ°å‘ES6è¿ç§»ã€‚æŒæ¡æ˜¯å¾ˆå¿…è¦çš„ï¼ HTML5localStorageæœ¬demoç”¨localStorageæœ¬åœ°å­˜å‚¨ä¿å­˜ç”¨æˆ·è®¾ç½®ï¼ˆå¦‚ï¼šçš®è‚¤ï¼‰å’Œç”¨æˆ·æ­Œå•åˆ—è¡¨ CSS3å¾ˆå¤šåŠ¨ç”»éƒ½æ˜¯ä¾é CSS3å®Œæˆçš„ï¼Œæ–¹ä¾¿æ€§èƒ½ä¹Ÿä¸é”™ï¼Œç¼ºç‚¹æ˜¯å…¼å®¹æ€§é—®é¢˜ã€‚ æ›´æ–°è®°å½•2017.03.13A music player by Vue.jsã€‚ä¸€ä¸ªç”±Vue.jså†™çš„éŸ³ä¹æ’­æ”¾å™¨ï¼Œä»Šå¤©å®Œæˆäº†æ’­æ”¾å™¨çš„å¤§ä½“åŠŸèƒ½ï¼Œæ•°æ®æ˜¯é€šè¿‡JSONæ¨¡æ‹Ÿ åç»­å®Œå–„ æ­å»ºåå°è°ƒç”¨ç½‘ä¸ŠéŸ³ä¹API å®Œå–„åŠŸèƒ½ 2017.03.14åˆ—è¡¨éƒ¨åˆ†åŠŸèƒ½å®Œå–„ï¼Œéƒ¨åˆ†ä»£ç ä¼˜åŒ–ï¼Œéƒ¨åˆ†å¼‚æ­¥ä»£ç PromiseåŒ– åç»­å®Œå–„ å†—ä½™ä»£ç æ•´åˆä¼˜åŒ– éƒ¨åˆ†ä»£ç å°è£… 2017.03.151.0.0æ­£å¼ç‰ˆå‘å¸ƒ 2017.03.192.0.0ç‰ˆæœ¬ç­¹åˆ’â€¦ 2017.04.032.0.0ç‰ˆæœ¬å¼€å§‹ 2017.04.082.0.0ç‰ˆæœ¬å®Œæˆ VueéŸ³ä¹æ’­æ”¾å™¨2.0å‡çº§ç‰ˆå·²ç»å‘å¸ƒï¼Œè¯·çœ‹ğŸ‘‰ Vue.jséŸ³ä¹æ’­æ”¾å™¨å‡çº§ç‰ˆ Aboutä¸ªäººç½‘ç«™ï¼šğŸ”—https://microzz.com/GitHubï¼šğŸ”—https://github.com/microzz","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"HTML5","slug":"HTML5","permalink":"https://microzz.com/tags/HTML5/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Vue.js","slug":"Vue-js","permalink":"https://microzz.com/tags/Vue-js/"}]},{"title":"ä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶","date":"2017-03-12T09:03:01.000Z","path":"2017/03/12/select-plugin/","text":"ä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶ä»‹ç»ä¸€ä¸ªä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶ï¼Œé»˜è®¤ç”Ÿæˆä¸­å›½åœ°åŒºğŸ‡¨ğŸ‡³çš„ä¸‰çº§è”åŠ¨æ•°æ®ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ•°æ®ã€‚npmåœ°å€ï¼šhttps://www.npmjs.com/package/select-plugin å®‰è£…è¾“å…¥ npm install select-plugin . æœ€å¥½å…ˆåˆå§‹åŒ–ä¸€ä¸‹package.jsonæ–‡ä»¶ï¼Œè¾“å…¥ npm init -yï¼Œç„¶åå†æ‰§è¡Œå®‰è£…npm install select-plugin ä½¿ç”¨é»˜è®¤æ•°æ® å¼•å…¥jsæ–‡ä»¶ã€‚ åœ¨htmlæ–‡ä»¶ä¸­æ’å…¥&lt;script src=&quot;./node_modules/select-plugin/dist/select-plugin-all.js&quot;&gt;&lt;/script&gt;ï¼Œ ç„¶å &lt;script&gt;new Select()&lt;/script&gt; é»˜è®¤å°±å¯ä»¥ç”Ÿæˆä¸­å›½åœ°åŒºçš„ä¸‰çº§è”åŠ¨æ•°æ®å•¦ğŸ˜„ è‡ªå®šä¹‰æ•°æ®å¦‚æœä½ åªä½¿ç”¨è‡ªå®šä¹‰çš„æ•°æ®ï¼Œå»ºè®®åªå¼•å…¥ä¸åŒ…å«åœ°åŒºæ•°æ®çš„jsæ–‡ä»¶ï¼Œå³&lt;script src=&quot;./node_modules/select-plugin/dist/select-plugin.js&quot;&gt;&lt;/script&gt;ï¼Œè¿™æ ·æ–‡ä»¶å¤§å°å¯ä»¥å‡å°‘å¾ˆå¤šï¼Œæ¯•ç«Ÿå¤§ä¸­å›½åœ°åŒºæ•°æ®å¤ªåºå¤§äº†ğŸ˜‡ä½†æ˜¯åŠ¡å¿…ä¼ é€’ä¼ é€’ç›¸å…³å‚æ•°ï¼new Select(&#39;.container&#39;, data, id, text); å‚æ•°ä¾æ¬¡æ˜¯æ’å…¥çˆ¶å®¹å™¨ä½ç½®ï¼ˆé»˜è®¤æ˜¯bodyï¼Œå‚æ•°æ˜¯CSS3é€‰æ‹©å™¨çš„å½¢å¼ï¼Œå¦‚â€™#idâ€™ , â€˜ .classNameâ€™ï¼‰ï¼Œæ•°æ®ï¼Œåœ¨DOMå…ƒç´ çš„idï¼Œæ˜¾ç¤ºçš„æ–‡æœ¬ ç¤ºä¾‹&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt; &lt;title&gt;ä¸‰çº§è”åŠ¨ç”Ÿæˆå™¨æ’ä»¶&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&quot;container&quot;&gt;&lt;/div&gt; &lt;script src=&quot;./node_modules/select-plugin/dist/select-plugin-all.js&quot;&gt;&lt;/script&gt; &lt;script&gt; // ä¸ä¼ ä»»ä½•å‚æ•°,é»˜è®¤ç”Ÿæˆä¸­å›½åœ°åŒºä¸‰çº§è”åŠ¨ new Select(); // è‡ªå®šä¹‰æ•°æ® var data = { One: [&#39;a1&#39;, &#39;a2&#39;, &#39;a3&#39;], Two: [ [&#39;a11&#39;, &#39;a12&#39;, &#39;a13&#39;], [&#39;a21&#39;, &#39;a22&#39;], [&#39;a31&#39;, &#39;a32&#39;] ], Three: [ [[&#39;a111&#39;, &#39;a112&#39;], [&#39;a121&#39;, &#39;a122&#39;], [&#39;a131&#39;, &#39;a132&#39;]], [[&#39;a211&#39;, &#39;a212&#39;], [&#39;a221&#39;, &#39;a222&#39;]], [[&#39;a311&#39;], [&#39;a312&#39;]] ] }; var id = [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;]; var text = [&#39;é€‰é¡¹1&#39;, &#39;é€‰é¡¹2&#39;, &#39;é€‰é¡¹3&#39;]; // å‚æ•°ä¾æ¬¡æ˜¯æ’å…¥çˆ¶å®¹å™¨ä½ç½®ï¼Œæ•°æ®ï¼ŒDOMçš„idï¼Œæ˜¾ç¤ºçš„æ–‡æœ¬ new Select(&#39;.container&#39;, data, id, text); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; æ•ˆæœé¢„è§ˆ select-plugin-microzz.com åœ¨çº¿é¢„è§ˆåœ¨çº¿é¢„è§ˆåœ°å€1åœ¨çº¿é¢„è§ˆåœ°å€2 AboutGitHubï¼š https://github.com/microzz ä¸ªäººç½‘ç«™ï¼šhttps://microzz.com/","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"npm","slug":"npm","permalink":"https://microzz.com/tags/npm/"}]},{"title":"Vue.jsåˆä½“éªŒ-TodoList","date":"2017-03-09T14:51:14.000Z","path":"2017/03/09/vue-begin/","text":"Vue.jsåˆä½“éªŒ &nbsp;&nbsp;&nbsp;ä¹‹å‰å­¦äº†React.jsï¼Œä»Šå¤©ç®€å•ä¸Šæ‰‹äº†Vue.jsï¼Œæ„Ÿå—åˆ°äº†Vue.jsçš„ä¸€äº›ç‹¬ç‰¹é­…åŠ›ã€‚åŒå‘çš„æ•°æ®ç»‘å®šè®©äººå¼€å‘èµ·æ¥å¾ˆâ€œçˆ½â€ï¼Œäºæ˜¯åŠ¨æ‰‹ç®€å•å†™äº†ä¸€ä¸ªTodo Listå°demoï¼ŒVueä¸Šæ‰‹çš„ç¡®æ¯”è¾ƒç®€å•ï¼Œæ–¹ä¾¿ä¸å°‘ã€‚æœŸå¾…åç»­çš„å­¦ä¹ ğŸ˜„ TodoListå°demoåœ¨çº¿é¢„è§ˆåœ¨çº¿é¢„è§ˆåœ°å€1: ğŸ”—http://microzz.cn/todo-vue/åœ¨çº¿é¢„è§ˆåœ°å€2: ğŸ”—https://microzz.github.io/todo-list-vuejs/ æºä»£ç æºä»£ç åœ°å€ï¼šğŸ”—https://github.com/microzz/todo-list-vuejs Vue.jsç®€ä»‹Vue.jsæ˜¯ä¸€å¥—æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚ä¸å…¶ä»–é‡é‡çº§æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue é‡‡ç”¨è‡ªåº•å‘ä¸Šå¢é‡å¼€å‘çš„è®¾è®¡ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œå¹¶ä¸”éå¸¸å®¹æ˜“å­¦ä¹ ï¼Œéå¸¸å®¹æ˜“ä¸å…¶å®ƒåº“æˆ–å·²æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼ŒVue å®Œå…¨æœ‰èƒ½åŠ›é©±åŠ¨é‡‡ç”¨å•æ–‡ä»¶ç»„ä»¶å’Œ Vue ç”Ÿæ€ç³»ç»Ÿæ”¯æŒçš„åº“å¼€å‘çš„å¤æ‚å•é¡µåº”ç”¨ã€‚Vue.js çš„ç›®æ ‡æ˜¯é€šè¿‡å°½å¯èƒ½ç®€å•çš„ API å®ç°å“åº”çš„æ•°æ®ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚ ç‰¹ç‚¹ æ˜“ç”¨å·²ç»ä¼šäº†HTML,CSS,JavaScriptï¼Ÿå³åˆ»é˜…è¯»æŒ‡å—å¼€å§‹æ„å»ºåº”ç”¨ï¼ çµæ´»ç®€å•å°å·§çš„æ ¸å¿ƒï¼Œæ¸è¿›å¼æŠ€æœ¯æ ˆï¼Œè¶³ä»¥åº”ä»˜ä»»ä½•è§„æ¨¡çš„åº”ç”¨ã€‚ æ€§èƒ½17kb min+gzip è¿è¡Œå¤§å°è¶…å¿«è™šæ‹Ÿ DOMæœ€çœå¿ƒçš„ä¼˜åŒ–","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Vue.js","slug":"Vue-js","permalink":"https://microzz.com/tags/Vue-js/"}]},{"title":"JavaScriptå®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•","date":"2017-03-06T13:44:25.000Z","path":"2017/03/06/extend/","text":"JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•ES5ä¸­çš„å®ç°æ¦‚è¿°JavaScript(ES5)ä¸­æ²¡æœ‰åƒJavaé‚£æ ·ç±»çš„æ¦‚å¿µï¼Œå†™æ³•è·Ÿä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆæ¯”å¦‚C++å’ŒJavaï¼‰å·®å¼‚å¾ˆå¤§ï¼Œå¾ˆå®¹æ˜“è®©æ–°å­¦ä¹ è¿™é—¨è¯­è¨€çš„ç¨‹åºå‘˜æ„Ÿåˆ°å›°æƒ‘ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åŸå‹é“¾prototypeæ¥æ¨¡æ‹Ÿç±»ï¼Œå»å®ç°ç»§æ‰¿çš„ç›¸å…³åŠŸèƒ½ã€‚ä¸‹é¢æ¥çœ‹çœ‹ES5ä¸­å®ç°ç»§æ‰¿å¸¸è§çš„ä¸‰ç§æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š ä»£ç /** * JavaScript(ES5)ä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³• */ // å®šä¹‰åŸºç±»Person function Person(name, age) { this.name = name; this.age = age; } // å…±äº«æ•°æ® Person.prototype.LEGS_NUM = 2; // å…±äº«æ–¹æ³• Person.prototype.info = function () { console.log(&#39;My name is &#39; + this.name + &#39; .I\\&#39;m &#39; + this.age + &#39; years old now&#39;); }; Person.prototype.walk = function () { console.log(this.name + &#39; is walking...&#39;); }; // Studentå­ç±» function Student(name, age, className) { // è°ƒç”¨çˆ¶ç±» Person.call(this, name, age); this.className = className; } // 1âƒ£ï¸ æ–¹æ³•ä¸€ï¼šPerson.prototypeç›´æ¥èµ‹å€¼ç»™Student.prototype // Student.prototype = Person.prototype; // 2âƒ£ï¸ æ–¹æ³•äºŒï¼šStudent.prototypeä¸ºPersonçš„å®ä¾‹ // Student.prototype = new Person(); // 3âƒ£ï¸ æ–¹æ³•ä¸‰ï¼šåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¯¹è±¡çš„åŸå‹æŒ‡å‘Person.prototypeï¼Œèµ‹å€¼ç»™Student.prototype Student.prototype = Object.create(Person.prototype); Student.prototype.constructor = Student; // è¦†ç›–çˆ¶ç±»çš„infoæ–¹æ³• Student.prototype.info = function () { console.log(&#39;My name is &#39; + this.name + &#39;,I\\&#39;m &#39; + this.age + &#39; years old now, and from class &#39; + this.className + &#39;.&#39;); }; // Studentç±»çš„å…±äº«æ–¹æ³• Student.prototype.learn = function (subject) { console.log(this.name + &#39; is learning &#39; + subject + &#39;.&#39;); }; // æµ‹è¯•,åˆ›å»ºä¸€ä¸ªStudentçš„å®ä¾‹ var microzz = new Student(&#39;Microzz&#39;, 22, 5); microzz.info(); // My name is Microzz,I&#39;m 22 years old now, and from class 5. console.log(microzz.LEGS_NUM); // 2 microzz.walk(); // Microzz is walking... microzz.learn(&#39;JavaScript&#39;); // Microzz is learning JavaScript. console.log(microzz.__proto__.__proto__ === Person.prototype); // true console.log(microzz.__proto__ === Student.prototype); // true console.log(microzz.__proto__.constructor === Student); // true ä¸‰ç§æ–¹æ³•æ¯”è¾ƒä¸Šé¢ä»£ç ä¸­æœ‰ä¸‰ç§æ–¹æ³•å®ç°ç»§æ‰¿ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥æ¥åˆ†æä¸€ä¸‹è¿™å‡ ç§æ–¹æ³•ã€‚1âƒ£ï¸è¿™ç§æ–¹æ³•ä¸­ï¼ŒPerson.prototypeç›´æ¥èµ‹å€¼ç»™Student.prototypeï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œå¦‚æœå­ç±»prototypeæ·»åŠ æ–°çš„ä¸œè¥¿çš„è¯ä¹Ÿä¼šæ”¹å†™çˆ¶ç±»ã€‚æ‰€ä»¥è¿™ç§æ–¹æ³•ä¸æ¨èã€‚2âƒ£ï¸ç¬¬äºŒç§æ–¹æ³•Student.prototypeä¸ºPersonçš„å®ä¾‹ï¼Œè¿™ä¹Ÿæ˜¯å¯ä»¥å®ç°çš„ã€‚ä½†æ˜¯Personæ„é€ å‡½æ•°æœ‰å‚æ•°åº”è¯¥ä¼ ä»€ä¹ˆå‘¢ï¼Ÿä¼ ä»»ä½•ä¸€ä¸ªéƒ½æ˜¯å¾ˆå¥‡æ€ªçš„ã€‚æ‰€ä»¥ä¹Ÿä¸æ¨èã€‚3âƒ£ï¸ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯æ¯”è¾ƒç†æƒ³çš„ï¼Œåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¯¹è±¡çš„åŸå‹æŒ‡å‘Person.prototypeï¼Œèµ‹å€¼ç»™Student.prototypeã€‚ä½†æ˜¯Object.createä¹Ÿæœ‰ä¸€ç‚¹å°ç‘•ç–µï¼Œå› ä¸ºå®ƒæ˜¯ES5ä¹‹åæ‰æ”¯æŒçš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡æ‹Ÿå®ç°Object.createæ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š if (!Object.create) { Object.prototype.create = function (proto) { function F() {} F.prototype = proto; return new F; } } è¿™æ ·åœ¨ES5ä¸­å°±å®Œç¾å®ç°äº†ç»§æ‰¿ğŸ˜„ ES6ä¸­çš„å®ç°æ¦‚è¿°ES6æä¾›äº†æ›´æ¥è¿‘ä¼ ç»Ÿè¯­è¨€â€ç±»â€çš„å†™æ³•ï¼Œå¼•å…¥äº†Classï¼ˆç±»ï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œä½œä¸ºå¯¹è±¡çš„æ¨¡æ¿ã€‚é€šè¿‡classå…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ç±»ã€‚åŸºæœ¬ä¸Šï¼ŒES6çš„classå¯ä»¥çœ‹ä½œåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒçš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼ŒES5éƒ½å¯ä»¥åšåˆ°ï¼Œæ–°çš„classå†™æ³•åªæ˜¯è®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•è€Œå·²ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨ES6çš„è¯­æ³•å®ç°ç±»çš„ç»§æ‰¿ã€‚ ä»£ç // åŸºç±» Person class Person { // çˆ¶ç±»çš„æ„é€ æ–¹æ³• constructor(name, age) { this.name = name; this.age = age; // å…±äº«å˜é‡ this.LEGS_NUM = 2; } // çˆ¶ç±»çš„infoæ–¹æ³• info() { console.log(`My name is ${this.name}, I\\&#39;m ${this.age} years old now.`); } // çˆ¶ç±»çš„walkæ–¹æ³• walk() { console.log(this.name + &#39; is walking...&#39;); } } // å­ç±» Student class Student extends Person { constructor(name, age, className) { // è°ƒç”¨åŸºç±»çš„æ„é€ æ–¹æ³• super(name, age); this.className = className; } // è¦†ç›–çˆ¶ç±»çš„infoæ–¹æ³• info() { console.log(`My name is ${this.name}, I\\&#39;m ${this.age} years old, and from class ${this.className}.`); } } // å®ä¾‹åŒ–ä¸€ä¸ªStudentçš„å®ä¾‹ let stu = new Student(&#39;Zhaohui&#39;, 22, 5); stu.info(); // My name is Zhaohui, I&#39;m 22 years old, and from class 5. stu.walk(); // Zhaohui is walking... console.log(stu.LEGS_NUM); // 2 console.log(stu instanceof Student); // true console.log(stu instanceof Person); // true è¿™æ ·æˆ‘ä»¬å°±é€šè¿‡ES6ä¸­çš„classå®ç°äº†â€œç±»â€çš„ç»§æ‰¿äº†ğŸ˜„","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"åŸå‹é“¾","slug":"åŸå‹é“¾","permalink":"https://microzz.com/tags/åŸå‹é“¾/"}]},{"title":"JSä¸­çš„é«˜é˜¶å‡½æ•°å’Œåå‡½æ•°","date":"2017-03-05T11:49:42.000Z","path":"2017/03/05/func/","text":"JSä¸­çš„é«˜é˜¶å‡½æ•°å’Œåå‡½æ•°é«˜é˜¶å‡½æ•°ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°é«˜é˜¶å‡½æ•°æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„åŸºç¡€ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°å‘¢? é«˜é˜¶äºŒå­—å¬èµ·æ¥æœ‰ç‚¹é«˜å¤§ä¸Šçš„æ„Ÿè§‰ï¼Œå…¶å®ä¸ç„¶ï¼Œé«˜é˜¶å‡½æ•°ä¸æ™®é€šå‡½æ•°ä¸åŒçš„åœ°æ–¹æ˜¯é«˜é˜¶å‡½æ•°å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…æ˜¯å°†å‡½æ•°ä½œä¸ºè¿”å›å€¼ï¼Œè¯·çœ‹å¦‚ä¸‹ç¤ºä¾‹ã€‚ ç¤ºä¾‹ï¼šfunction test(v){ return function(){ return v; } } ç¤ºä¾‹ä¸­æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„é«˜é˜¶å‡½æ•°ï¼Œå¦‚ä½ æ‰€è§ï¼Œé«˜é˜¶å‡½æ•°testçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ ç°å®ä¸­çš„åº”ç”¨è™½ç„¶æœ‰å¯èƒ½æ˜¯ç¬¬ä¸€æ¬¡çœŸæ­£çš„å»äº†è§£ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°ï¼Œä½†æ˜¯å…¶å®æˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸ä¼šç”¨åˆ°å®ƒï¼Œåªæ˜¯æˆ‘ä»¬æ²¡æœ‰å»ç•™æ„æˆ–è€…è¯´ä¸çŸ¥é“å®ƒçš„ç§°è°“è€Œå·²ã€‚ ç¤ºä¾‹ï¼šæ•°ç»„çš„æ’åº(sort)å‡½æ•° var arr = [23,54,3,12,78]; arr.sort(function(a,b){ return a-b; }); åå‡½æ•°ä»€ä¹ˆæ˜¯åå‡½æ•°å‡è®¾æœ‰ä¸€ä¸ªå‚æ•°æˆ–å˜é‡å·²ç»é¢„ç½®çš„å‡½æ•°Aï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨Aæ¥äº§ç”Ÿä¸€ä¸ªæ–°çš„å‡½æ•°Bï¼Œå‡½æ•°Bå°±æ˜¯æˆ‘ä»¬è¯´çš„åå‡½æ•°ã€‚ä¸‹é¢å¯ä»¥çœ‹ä¸€ä¸ªç¤ºä¾‹ã€‚ ç¤ºä¾‹// åˆ¤æ–­ç±»å‹çš„å°demo var isType = function(type){ return function(obj){ return toString.call(obj)==&#39;[object &#39;+type+&#39;]&#39;; } }; // å®šåˆ¶æ–°çš„å‡½æ•° var isString = isType(&#39;String&#39;); var isArray = isType(&#39;Array&#39;); var isFunction = isType(&#39;Function&#39;); // æµ‹è¯•åå‡½æ•° console.log(isString(&#39;abc&#39;)); // true console.log(isArray([1, 2])); // true console.log(isFunction(&#39;abc&#39;)); // false isTypeå‡½æ•°ä¸­é¢„ç½®äº†åˆ¤æ–­ç±»å‹çš„æ–¹æ³•ï¼ŒåªæŒ‡å®šéƒ¨åˆ†å‚æ•°æ¥äº§ç”Ÿçš„æ–°çš„å®šåˆ¶çš„å‡½æ•°isStringã€isArrayå’ŒisFunctionå°±æ˜¯åå‡½æ•°ã€‚","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"å‡½æ•°","slug":"å‡½æ•°","permalink":"https://microzz.com/tags/å‡½æ•°/"}]},{"title":"åŸºäºHTML5çš„Webé˜…è¯»å™¨","date":"2017-03-04T12:11:26.000Z","path":"2017/03/04/WebReader/","text":"åŸºäºHTML5çš„Webé˜…è¯»å™¨ä»‹ç»è¿™æ˜¯åŸºäºHTML5å¼€å‘çš„ç®€å•çš„è½»é‡çº§ WebAppåœ¨çº¿é˜…è¯»å™¨ï¼Œå¯ä»¥è¿›è¡Œç®€å•çš„ä¸ªæ€§åŒ–è®¾ç½®ï¼Œé€‚é…äº†æ‰‹æœºå’Œç”µè„‘ã€‚è¿è¡Œéœ€è¦ä¸€ä¸ªWebæœåŠ¡å™¨çš„æ”¯æŒã€‚æ¬¢è¿å¤§å®¶åœ¨æˆ‘çš„GitHubä¸ŠStarï¼Œä¹Ÿå¯ä»¥æå‡ºå®è´µæ„è§å“¦ğŸ˜„ åœ¨çº¿é¢„è§ˆ åŸºäºHTML5çš„Webé˜…è¯»å™¨ åœ¨çº¿é¢„è§ˆåœ°å€1ï¼šğŸ”—http://microzz.cn/web-reader/åœ¨çº¿é¢„è§ˆåœ°å€2:ğŸ”—https://microzz.github.io/WebReader/ æºç æºç åœ°å€ï¼šhttps://github.com/microzz/WebReader","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"HTML5","slug":"HTML5","permalink":"https://microzz.com/tags/HTML5/"},{"name":"WebApp","slug":"WebApp","permalink":"https://microzz.com/tags/WebApp/"}]},{"title":"å“åº”å¼ç½‘é¡µè®¾è®¡","date":"2017-03-02T14:55:31.000Z","path":"2017/03/02/responsive/","text":"å“åº”å¼ç½‘é¡µè®¾è®¡ä»€ä¹ˆæ˜¯å“åº”å¼ç½‘ç«™å“åº”å¼å¸ƒå±€æ˜¯Ethan Marcotteåœ¨2010å¹´5æœˆä»½æå‡ºçš„ä¸€ä¸ªæ¦‚å¿µï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä¸€ä¸ªç½‘ç«™èƒ½å¤Ÿå…¼å®¹å¤šä¸ªç»ˆç«¯â€”â€”è€Œä¸æ˜¯ä¸ºæ¯ä¸ªç»ˆç«¯åšä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬ã€‚è¿™ä¸ªæ¦‚å¿µæ˜¯ä¸ºè§£å†³ç§»åŠ¨äº’è”ç½‘æµè§ˆè€Œè¯ç”Ÿçš„ã€‚ ä¼˜ç‚¹å’Œç¼ºç‚¹ä¼˜ç‚¹ä¼˜ç‚¹ï¼šé¢å¯¹ä¸åŒåˆ†è¾¨ç‡è®¾å¤‡çµæ´»æ€§å¼ºèƒ½å¤Ÿå¿«æ·è§£å†³å¤šè®¾å¤‡æ˜¾ç¤ºé€‚åº”é—®é¢˜ ç¼ºç‚¹å…¼å®¹å„ç§è®¾å¤‡å·¥ä½œé‡å¤§ï¼Œæ•ˆç‡ä½ä¸‹ä»£ç ç´¯èµ˜ï¼Œä¼šå‡ºç°éšè—æ— ç”¨çš„å…ƒç´ ï¼ŒåŠ è½½æ—¶é—´åŠ é•¿å…¶å®è¿™æ˜¯ä¸€ç§æŠ˜ä¸­æ€§è´¨çš„è®¾è®¡è§£å†³æ–¹æ¡ˆï¼Œå¤šæ–¹é¢å› ç´ å½±å“è€Œè¾¾ä¸åˆ°æœ€ä½³æ•ˆæœä¸€å®šç¨‹åº¦ä¸Šæ”¹å˜äº†ç½‘ç«™åŸæœ‰çš„å¸ƒå±€ç»“æ„ï¼Œä¼šå‡ºç°ç”¨æˆ·æ··æ·†çš„æƒ…å†µ å“åº”å¼ç½‘é¡µè®¾è®¡å®æˆ˜ç”¨HTML5ä»¥åŠCSS3çš„åª’ä½“æŸ¥è¯¢å®Œæˆäº†ä¸€ä¸ªå“åº”å¼å¸ƒå±€çš„demoï¼Œå¤§å®¶å¯ä»¥ç”¨ä¸åŒçš„å°ºå¯¸çš„è®¾å¤‡ï¼ŒæŸ¥çœ‹ä¸åŒåˆ†è¾¨ç‡ä¸‹çš„è¡¨ç°ã€‚ä¹Ÿå¯ä»¥åœ¨æ§åˆ¶å°æ¨¡æ‹Ÿå„ç§è®¾å¤‡ï¼Œæ¬¢è¿å¤§å®¶æå‡ºæ„è§ã€‚ğŸ˜„ åœ¨çº¿é¢„è§ˆåœ¨çº¿é¢„è§ˆåœ°å€1: ğŸ”—http://microzz.cn/responsive/åœ¨çº¿é¢„è§ˆåœ°å€2: ğŸ”—https://microzz.github.io/ResponsiveWeb/ æºç æºç åœ°å€ï¼šğŸ”—https://github.com/microzz/ResponsiveWeb","tags":[{"name":"HTML5","slug":"HTML5","permalink":"https://microzz.com/tags/HTML5/"},{"name":"CSS3","slug":"CSS3","permalink":"https://microzz.com/tags/CSS3/"},{"name":"Responsive","slug":"Responsive","permalink":"https://microzz.com/tags/Responsive/"},{"name":"å“åº”å¼è®¾è®¡","slug":"å“åº”å¼è®¾è®¡","permalink":"https://microzz.com/tags/å“åº”å¼è®¾è®¡/"}]},{"title":"JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ","date":"2017-03-01T07:42:04.000Z","path":"2017/03/01/flow-info/","text":"JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœé¢„è§ˆ JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ åœ¨çº¿é¢„è§ˆ1åœ¨çº¿é¢„è§ˆåœ°å€1: ğŸ”—http://microzz.cn/flow-info/ åœ¨çº¿é¢„è§ˆ2åœ¨çº¿é¢„è§ˆåœ°å€2: ğŸ”—https://microzz.github.io/flow-info-by-js/ æºä»£ç æºä»£ç åœ°å€ï¼šğŸ”—https://github.com/microzz/flow-info-by-js","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"}]},{"title":"å‰ç«¯å·¥ä½œé¢è¯•é—®é¢˜","date":"2017-02-26T12:02:20.000Z","path":"2017/02/26/interview2/","text":"å‰ç«¯å·¥ä½œé¢è¯•é—®é¢˜æœ¬æ–‡åŒ…å«äº†ä¸€äº›ç”¨äºè€ƒæŸ¥å€™é€‰è€…çš„å‰ç«¯é¢è¯•é—®é¢˜ã€‚ä¸å»ºè®®å¯¹å•ä¸ªå€™é€‰è€…é—®åŠæ¯ä¸ªé—®é¢˜ (é‚£éœ€è¦å¥½å‡ ä¸ªå°æ—¶)ã€‚åªè¦ä»åˆ—è¡¨é‡ŒæŒ‘é€‰ä¸€äº›ï¼Œå°±èƒ½å¸®åŠ©ä½ è€ƒæŸ¥å€™é€‰è€…æ˜¯å¦å…·å¤‡æ‰€éœ€è¦çš„æŠ€èƒ½ã€‚ å¤‡æ³¨ï¼š è¿™äº›é—®é¢˜ä¸­å¾ˆå¤šéƒ½æ˜¯å¼€æ”¾æ€§çš„ï¼Œå¯ä»¥å¼•å‘æœ‰è¶£çš„è®¨è®ºã€‚è¿™æ¯”ç›´æ¥çš„ç­”æ¡ˆæ›´èƒ½ä½“ç°æ­¤äººçš„èƒ½åŠ›ã€‚ å¸¸è§é—®é¢˜ï¼š ä½ åœ¨æ˜¨å¤©/æœ¬å‘¨å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ ç¼–å†™ä»£ç çš„å“ªäº›æ–¹é¢èƒ½å¤Ÿä½¿ä½ å…´å¥‹æˆ–æ„Ÿå…´è¶£ï¼Ÿ ä½ æœ€è¿‘é‡åˆ°è¿‡ä»€ä¹ˆæŠ€æœ¯æŒ‘æˆ˜ï¼Ÿä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ åœ¨åˆ¶ä½œä¸€ä¸ªç½‘é¡µåº”ç”¨æˆ–ç½‘ç«™çš„è¿‡ç¨‹ä¸­ï¼Œä½ æ˜¯å¦‚ä½•è€ƒè™‘å…¶ UIã€å®‰å…¨æ€§ã€é«˜æ€§èƒ½ã€SEOã€å¯ç»´æŠ¤æ€§ä»¥åŠæŠ€æœ¯å› ç´ çš„ï¼Ÿ è¯·è°ˆè°ˆä½ å–œæ¬¢çš„å¼€å‘ç¯å¢ƒã€‚ ä½ æœ€ç†Ÿæ‚‰å“ªä¸€å¥—ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Ÿ ä½ èƒ½æè¿°å½“ä½ åˆ¶ä½œä¸€ä¸ªç½‘é¡µçš„å·¥ä½œæµç¨‹å—ï¼Ÿ å‡è‹¥ä½ æœ‰ 5 ä¸ªä¸åŒçš„æ ·å¼æ–‡ä»¶ (stylesheets), æ•´åˆè¿›ç½‘ç«™çš„æœ€å¥½æ–¹å¼æ˜¯? ä½ èƒ½æè¿°æ¸è¿›å¢å¼º (progressive enhancement) å’Œä¼˜é›…é™çº§ (graceful degradation) ä¹‹é—´çš„ä¸åŒå—? ä½ å¦‚ä½•å¯¹ç½‘ç«™çš„æ–‡ä»¶å’Œèµ„æºè¿›è¡Œä¼˜åŒ–ï¼Ÿ æµè§ˆå™¨åŒä¸€æ—¶é—´å¯ä»¥ä»ä¸€ä¸ªåŸŸåä¸‹è½½å¤šå°‘èµ„æºï¼Ÿ æœ‰ä»€ä¹ˆä¾‹å¤–å—ï¼Ÿ è¯·è¯´å‡ºä¸‰ç§å‡å°‘é¡µé¢åŠ è½½æ—¶é—´çš„æ–¹æ³•ã€‚(åŠ è½½æ—¶é—´æŒ‡æ„ŸçŸ¥çš„æ—¶é—´æˆ–è€…å®é™…åŠ è½½æ—¶é—´) å¦‚æœä½ å‚ä¸åˆ°ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œå‘ç°ä»–ä»¬ä½¿ç”¨ Tab æ¥ç¼©è¿›ä»£ç ï¼Œä½†æ˜¯ä½ å–œæ¬¢ç©ºæ ¼ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ è¯·å†™ä¸€ä¸ªç®€å•çš„å¹»ç¯æ•ˆæœé¡µé¢ã€‚ å¦‚æœä»Šå¹´ä½ æ‰“ç®—ç†Ÿç»ƒæŒæ¡ä¸€é¡¹æ–°æŠ€æœ¯ï¼Œé‚£ä¼šæ˜¯ä»€ä¹ˆï¼Ÿ è¯·è°ˆè°ˆä½ å¯¹ç½‘é¡µæ ‡å‡†å’Œæ ‡å‡†åˆ¶å®šæœºæ„é‡è¦æ€§çš„ç†è§£ã€‚ ä»€ä¹ˆæ˜¯ FOUC (æ— æ ·å¼å†…å®¹é—ªçƒ)ï¼Ÿä½ å¦‚ä½•æ¥é¿å… FOUCï¼Ÿ è¯·è§£é‡Šä»€ä¹ˆæ˜¯ ARIA å’Œå±å¹•é˜…è¯»å™¨ (screenreaders)ï¼Œä»¥åŠå¦‚ä½•ä½¿ç½‘ç«™å®ç°æ— éšœç¢è®¿é—® (accessible)ã€‚ è¯·è§£é‡Š CSS åŠ¨ç”»å’Œ JavaScript åŠ¨ç”»çš„ä¼˜ç¼ºç‚¹ã€‚ ä»€ä¹ˆæ˜¯è·¨åŸŸèµ„æºå…±äº« (CORS)ï¼Ÿå®ƒç”¨äºè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ HTML ç›¸å…³é—®é¢˜ï¼š doctype(æ–‡æ¡£ç±»å‹) çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ æµè§ˆå™¨æ ‡å‡†æ¨¡å¼ (standards mode) ã€å‡ ä¹æ ‡å‡†æ¨¡å¼ï¼ˆalmost standards modeï¼‰å’Œæ€ªå¼‚æ¨¡å¼ (quirks mode) ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ HTML å’Œ XHTML æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å¦‚æœé¡µé¢ä½¿ç”¨ â€˜application/xhtml+xmlâ€™ ä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ å¦‚æœç½‘é¡µå†…å®¹éœ€è¦æ”¯æŒå¤šè¯­è¨€ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ åœ¨è®¾è®¡å’Œå¼€å‘å¤šè¯­è¨€ç½‘ç«™æ—¶ï¼Œæœ‰å“ªäº›é—®é¢˜ä½ å¿…é¡»è¦è€ƒè™‘ï¼Ÿ ä½¿ç”¨ data- å±æ€§çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ å¦‚æœæŠŠ HTML5 çœ‹ä½œåšä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œé‚£å®ƒçš„æ„å»ºæ¨¡å—æœ‰å“ªäº›ï¼Ÿ è¯·æè¿° cookiesã€sessionStorage å’Œ localStorage çš„åŒºåˆ«ã€‚ è¯·è§£é‡Š &lt;script&gt;ã€&lt;script async&gt; å’Œ &lt;script defer&gt; çš„åŒºåˆ«ã€‚ ä¸ºä»€ä¹ˆé€šå¸¸æ¨èå°† CSS &lt;link&gt; æ”¾ç½®åœ¨ &lt;head&gt;&lt;/head&gt; ä¹‹é—´ï¼Œè€Œå°† JS &lt;script&gt; æ”¾ç½®åœ¨ &lt;/body&gt; ä¹‹å‰ï¼Ÿä½ çŸ¥é“æœ‰å“ªäº›ä¾‹å¤–å—ï¼Ÿ ä»€ä¹ˆæ˜¯æ¸è¿›å¼æ¸²æŸ“ (progressive rendering)ï¼Ÿ ä½ ç”¨è¿‡å“ªäº›ä¸åŒçš„ HTML æ¨¡æ¿è¯­è¨€ï¼Ÿ CSS ç›¸å…³é—®é¢˜ï¼š CSS ä¸­ç±» (classes) å’Œ ID çš„åŒºåˆ«ã€‚ è¯·é—® â€œresettingâ€ å’Œ â€œnormalizingâ€ CSS ä¹‹é—´çš„åŒºåˆ«ï¼Ÿä½ ä¼šå¦‚ä½•é€‰æ‹©ï¼Œä¸ºä»€ä¹ˆï¼Ÿ è¯·è§£é‡Šæµ®åŠ¨ (Floats) åŠå…¶å·¥ä½œåŸç†ã€‚ æè¿°z-indexå’Œå åŠ ä¸Šä¸‹æ–‡æ˜¯å¦‚ä½•å½¢æˆçš„ã€‚ è¯·æè¿° BFC(Block Formatting Context) åŠå…¶å¦‚ä½•å·¥ä½œã€‚ åˆ—ä¸¾ä¸åŒçš„æ¸…é™¤æµ®åŠ¨çš„æŠ€å·§ï¼Œå¹¶æŒ‡å‡ºå®ƒä»¬å„è‡ªé€‚ç”¨çš„ä½¿ç”¨åœºæ™¯ã€‚ è¯·è§£é‡Š CSS spritesï¼Œä»¥åŠä½ è¦å¦‚ä½•åœ¨é¡µé¢æˆ–ç½‘ç«™ä¸­å®ç°å®ƒã€‚ ä½ æœ€å–œæ¬¢çš„å›¾ç‰‡æ›¿æ¢æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œä½ å¦‚ä½•é€‰æ‹©ä½¿ç”¨ã€‚ ä½ ä¼šå¦‚ä½•è§£å†³ç‰¹å®šæµè§ˆå™¨çš„æ ·å¼é—®é¢˜ï¼Ÿ å¦‚ä½•ä¸ºæœ‰åŠŸèƒ½é™åˆ¶çš„æµè§ˆå™¨æä¾›ç½‘é¡µï¼Ÿ ä½ ä¼šä½¿ç”¨å“ªäº›æŠ€æœ¯å’Œå¤„ç†æ–¹æ³•ï¼Ÿ æœ‰å“ªäº›çš„éšè—å†…å®¹çš„æ–¹æ³• (å¦‚æœåŒæ—¶è¿˜è¦ä¿è¯å±å¹•é˜…è¯»å™¨å¯ç”¨å‘¢)ï¼Ÿ ä½ ç”¨è¿‡æ …æ ¼ç³»ç»Ÿ (grid system) å—ï¼Ÿå¦‚æœä½¿ç”¨è¿‡ï¼Œä½ æœ€å–œæ¬¢å“ªç§ï¼Ÿ ä½ ç”¨è¿‡åª’ä½“æŸ¥è¯¢ï¼Œæˆ–é’ˆå¯¹ç§»åŠ¨ç«¯çš„å¸ƒå±€/CSS å—ï¼Ÿ ä½ ç†Ÿæ‚‰ SVG æ ·å¼çš„ä¹¦å†™å—ï¼Ÿ å¦‚ä½•ä¼˜åŒ–ç½‘é¡µçš„æ‰“å°æ ·å¼ï¼Ÿ åœ¨ä¹¦å†™é«˜æ•ˆ CSS æ—¶ä¼šæœ‰å“ªäº›é—®é¢˜éœ€è¦è€ƒè™‘ï¼Ÿ ä½¿ç”¨ CSS é¢„å¤„ç†å™¨çš„ä¼˜ç¼ºç‚¹æœ‰å“ªäº›ï¼Ÿ è¯·æè¿°ä½ æ›¾ç»ä½¿ç”¨è¿‡çš„ CSS é¢„å¤„ç†å™¨çš„ä¼˜ç¼ºç‚¹ã€‚ å¦‚æœè®¾è®¡ä¸­ä½¿ç”¨äº†éæ ‡å‡†çš„å­—ä½“ï¼Œä½ è¯¥å¦‚ä½•å»å®ç°ï¼Ÿ è¯·è§£é‡Šæµè§ˆå™¨æ˜¯å¦‚ä½•åˆ¤æ–­å…ƒç´ æ˜¯å¦åŒ¹é…æŸä¸ª CSS é€‰æ‹©å™¨ï¼Ÿ è¯·æè¿°ä¼ªå…ƒç´  (pseudo-elements) åŠå…¶ç”¨é€”ã€‚ è¯·è§£é‡Šä½ å¯¹ç›’æ¨¡å‹çš„ç†è§£ï¼Œä»¥åŠå¦‚ä½•åœ¨ CSS ä¸­å‘Šè¯‰æµè§ˆå™¨ä½¿ç”¨ä¸åŒçš„ç›’æ¨¡å‹æ¥æ¸²æŸ“ä½ çš„å¸ƒå±€ã€‚ è¯·è§£é‡Š * { box-sizing: border-box; } çš„ä½œç”¨, å¹¶ä¸”è¯´æ˜ä½¿ç”¨å®ƒæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ è¯·ç½—åˆ—å‡ºä½ æ‰€çŸ¥é“çš„ display å±æ€§çš„å…¨éƒ¨å€¼ è¯·è§£é‡Š inline å’Œ inline-block çš„åŒºåˆ«ï¼Ÿ è¯·è§£é‡Š relativeã€fixedã€absolute å’Œ static å…ƒç´ çš„åŒºåˆ« CSS ä¸­å­—æ¯ â€˜Câ€™ çš„æ„æ€æ˜¯å å±‚ (Cascading)ã€‚è¯·é—®åœ¨ç¡®å®šæ ·å¼çš„è¿‡ç¨‹ä¸­ä¼˜å…ˆçº§æ˜¯å¦‚ä½•å†³å®šçš„ (è¯·ä¸¾ä¾‹)ï¼Ÿå¦‚ä½•æœ‰æ•ˆä½¿ç”¨æ­¤ç³»ç»Ÿï¼Ÿ ä½ åœ¨å¼€å‘æˆ–ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨è¿‡å“ªäº› CSS æ¡†æ¶ï¼Ÿä½ è§‰å¾—åº”è¯¥å¦‚ä½•æ”¹å–„ä»–ä»¬ï¼Ÿ è¯·é—®ä½ æœ‰å°è¯•è¿‡ CSS Flexbox æˆ–è€… Grid æ ‡å‡†è§„æ ¼å—ï¼Ÿ ä¸ºä»€ä¹ˆå“åº”å¼è®¾è®¡ (responsive design) å’Œè‡ªé€‚åº”è®¾è®¡ (adaptive design) ä¸åŒï¼Ÿ ä½ æœ‰å…¼å®¹ retina å±å¹•çš„ç»å†å—ï¼Ÿå¦‚æœæœ‰ï¼Œåœ¨ä»€ä¹ˆåœ°æ–¹ä½¿ç”¨äº†ä½•ç§æŠ€æœ¯ï¼Ÿ è¯·é—®ä¸ºä½•è¦ä½¿ç”¨ translate() è€Œé absolute positioningï¼Œæˆ–åä¹‹çš„ç†ç”±ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ JS ç›¸å…³é—®é¢˜ï¼š è¯·è§£é‡Šäº‹ä»¶ä»£ç† (event delegation)ã€‚ è¯·è§£é‡Š JavaScript ä¸­ this æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ è¯·è§£é‡ŠåŸå‹ç»§æ‰¿ (prototypal inheritance) çš„åŸç†ã€‚ ä½ æ€ä¹ˆçœ‹ AMD vs. CommonJSï¼Ÿ è¯·è§£é‡Šä¸ºä»€ä¹ˆæ¥ä¸‹æ¥è¿™æ®µä»£ç ä¸æ˜¯ IIFE (ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼)ï¼šfunction foo(){ }();. è¦åšå“ªäº›æ”¹åŠ¨ä½¿å®ƒå˜æˆ IIFE? æè¿°ä»¥ä¸‹å˜é‡çš„åŒºåˆ«ï¼šnullï¼Œundefined æˆ– undeclaredï¼Ÿ è¯¥å¦‚ä½•æ£€æµ‹å®ƒä»¬ï¼Ÿ ä»€ä¹ˆæ˜¯é—­åŒ… (closure)ï¼Œå¦‚ä½•ä½¿ç”¨å®ƒï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ è¯·ä¸¾å‡ºä¸€ä¸ªåŒ¿åå‡½æ•°çš„å…¸å‹ç”¨ä¾‹ï¼Ÿ ä½ æ˜¯å¦‚ä½•ç»„ç»‡è‡ªå·±çš„ä»£ç ï¼Ÿæ˜¯ä½¿ç”¨æ¨¡å—æ¨¡å¼ï¼Œè¿˜æ˜¯ä½¿ç”¨ç»å…¸ç»§æ‰¿çš„æ–¹æ³•ï¼Ÿ è¯·æŒ‡å‡º JavaScript å®¿ä¸»å¯¹è±¡ (host objects) å’ŒåŸç”Ÿå¯¹è±¡ (native objects) çš„åŒºåˆ«ï¼Ÿ è¯·æŒ‡å‡ºä»¥ä¸‹ä»£ç çš„åŒºåˆ«ï¼šfunction Person(){}ã€var person = Person()ã€var person = new Person()ï¼Ÿ .call å’Œ .apply çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ è¯·è§£é‡Š Function.prototype.bindï¼Ÿ åœ¨ä»€ä¹ˆæ—¶å€™ä½ ä¼šä½¿ç”¨ document.write()ï¼Ÿ è¯·æŒ‡å‡ºæµè§ˆå™¨ç‰¹æ€§æ£€æµ‹ï¼Œç‰¹æ€§æ¨æ–­å’Œæµè§ˆå™¨ UA å­—ç¬¦ä¸²å—…æ¢çš„åŒºåˆ«ï¼Ÿ è¯·å°½å¯èƒ½è¯¦å°½çš„è§£é‡Š Ajax çš„å·¥ä½œåŸç†ã€‚ ä½¿ç”¨ Ajax éƒ½æœ‰å“ªäº›ä¼˜åŠ£ï¼Ÿ è¯·è§£é‡Š JSONP çš„å·¥ä½œåŸç†ï¼Œä»¥åŠå®ƒä¸ºä»€ä¹ˆä¸æ˜¯çœŸæ­£çš„ Ajaxã€‚ ä½ ä½¿ç”¨è¿‡ JavaScript æ¨¡æ¿ç³»ç»Ÿå—ï¼Ÿ å¦‚æœ‰ä½¿ç”¨è¿‡ï¼Œè¯·è°ˆè°ˆä½ éƒ½ä½¿ç”¨è¿‡å“ªäº›åº“ï¼Ÿ è¯·è§£é‡Šå˜é‡å£°æ˜æå‡ (hoisting)ã€‚ è¯·æè¿°äº‹ä»¶å†’æ³¡æœºåˆ¶ (event bubbling)ã€‚ â€œattributeâ€ å’Œ â€œpropertyâ€ çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ ä¸ºä»€ä¹ˆæ‰©å±• JavaScript å†…ç½®å¯¹è±¡ä¸æ˜¯å¥½çš„åšæ³•ï¼Ÿ è¯·æŒ‡å‡º document load å’Œ document DOMContentLoaded ä¸¤ä¸ªäº‹ä»¶çš„åŒºåˆ«ã€‚ == å’Œ === æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ è¯·è§£é‡Š JavaScript çš„åŒæºç­–ç•¥ (same-origin policy)ã€‚ å¦‚ä½•å®ç°ä¸‹åˆ—ä»£ç ï¼š[1,2,3,4,5].duplicator(); // [1,2,3,4,5,1,2,3,4,5] ä»€ä¹ˆæ˜¯ä¸‰å…ƒè¡¨è¾¾å¼ (Ternary expression)ï¼Ÿâ€œä¸‰å…ƒ (Ternary)â€ è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿ ä»€ä¹ˆæ˜¯ &quot;use strict&quot;; ? ä½¿ç”¨å®ƒçš„å¥½å¤„å’Œåå¤„åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ è¯·å®ç°ä¸€ä¸ªéå†è‡³ 100 çš„ for loop å¾ªç¯ï¼Œåœ¨èƒ½è¢« 3 æ•´é™¤æ—¶è¾“å‡º â€œfizzâ€ï¼Œåœ¨èƒ½è¢« 5 æ•´é™¤æ—¶è¾“å‡º â€œbuzzâ€ï¼Œåœ¨èƒ½åŒæ—¶è¢« 3 å’Œ 5 æ•´é™¤æ—¶è¾“å‡º â€œfizzbuzzâ€ã€‚ ä¸ºä½•é€šå¸¸ä¼šè®¤ä¸ºä¿ç•™ç½‘ç«™ç°æœ‰çš„å…¨å±€ä½œç”¨åŸŸ (global scope) ä¸å»æ”¹å˜å®ƒï¼Œæ˜¯è¾ƒå¥½çš„é€‰æ‹©ï¼Ÿ ä¸ºä½•ä½ ä¼šä½¿ç”¨ load ä¹‹ç±»çš„äº‹ä»¶ (event)ï¼Ÿæ­¤äº‹ä»¶æœ‰ç¼ºç‚¹å—ï¼Ÿä½ æ˜¯å¦çŸ¥é“å…¶ä»–æ›¿ä»£å“ï¼Œä»¥åŠä¸ºä½•ä½¿ç”¨å®ƒä»¬ï¼Ÿ è¯·è§£é‡Šä»€ä¹ˆæ˜¯å•é¡µåº”ç”¨ (single page app), ä»¥åŠå¦‚ä½•ä½¿å…¶å¯¹æœç´¢å¼•æ“å‹å¥½ (SEO-friendly)ã€‚ What is the extent of your experience with Promises and/or their polyfills? ä½¿ç”¨ Promises è€Œéå›è°ƒ (callbacks) ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ ä½¿ç”¨ä¸€ç§å¯ä»¥ç¼–è¯‘æˆ JavaScript çš„è¯­è¨€æ¥å†™ JavaScript ä»£ç æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ ä½ ä½¿ç”¨å“ªäº›å·¥å…·å’ŒæŠ€æœ¯æ¥è°ƒè¯• JavaScript ä»£ç ï¼Ÿ ä½ ä¼šä½¿ç”¨æ€æ ·çš„è¯­è¨€ç»“æ„æ¥éå†å¯¹è±¡å±æ€§ (object properties) å’Œæ•°ç»„å†…å®¹ï¼Ÿ è¯·è§£é‡Šå¯å˜ (mutable) å’Œä¸å˜ (immutable) å¯¹è±¡çš„åŒºåˆ«ã€‚ è¯·ä¸¾å‡º JavaScript ä¸­ä¸€ä¸ªä¸å˜æ€§å¯¹è±¡ (immutable object) çš„ä¾‹å­ï¼Ÿ ä¸å˜æ€§ (immutability) æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ å¦‚ä½•ç”¨ä½ è‡ªå·±çš„ä»£ç æ¥å®ç°ä¸å˜æ€§ (immutability)ï¼Ÿ è¯·è§£é‡ŠåŒæ­¥ (synchronous) å’Œå¼‚æ­¥ (asynchronous) å‡½æ•°çš„åŒºåˆ«ã€‚ ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ (event loop)ï¼Ÿ è¯·é—®è°ƒç”¨æ ˆ (call stack) å’Œä»»åŠ¡é˜Ÿåˆ— (task queue) çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ è§£é‡Š function foo() {} ä¸ var foo = function() {} ç”¨æ³•çš„åŒºåˆ« æµ‹è¯•ç›¸å…³é—®é¢˜ï¼š å¯¹ä»£ç è¿›è¡Œæµ‹è¯•çš„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ ä½ ä¼šç”¨ä»€ä¹ˆå·¥å…·æµ‹è¯•ä½ çš„ä»£ç åŠŸèƒ½ï¼Ÿ å•å…ƒæµ‹è¯•ä¸åŠŸèƒ½/é›†æˆæµ‹è¯•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ ä»£ç é£æ ¼ linting å·¥å…·çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ æ•ˆèƒ½ç›¸å…³é—®é¢˜ï¼š ä½ ä¼šç”¨ä»€ä¹ˆå·¥å…·æ¥æŸ¥æ‰¾ä»£ç ä¸­çš„æ€§èƒ½é—®é¢˜ï¼Ÿ ä½ ä¼šç”¨ä»€ä¹ˆæ–¹å¼æ¥å¢å¼ºç½‘ç«™çš„é¡µé¢æ»šåŠ¨æ•ˆèƒ½ï¼Ÿ è¯·è§£é‡Š layoutã€painting å’Œ compositing çš„åŒºåˆ«ã€‚ ç½‘ç»œç›¸å…³é—®é¢˜ï¼š ä¸ºä»€ä¹ˆä¼ ç»Ÿä¸Šåˆ©ç”¨å¤šä¸ªåŸŸåæ¥æä¾›ç½‘ç«™èµ„æºä¼šæ›´æœ‰æ•ˆï¼Ÿ è¯·å°½å¯èƒ½å®Œæ•´å¾—æè¿°ä»è¾“å…¥ URL åˆ°æ•´ä¸ªç½‘é¡µåŠ è½½å®Œæ¯•åŠæ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ•´ä¸ªæµç¨‹ã€‚ Long-Pollingã€Websockets å’Œ Server-Sent Event ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ è¯·æè¿°ä»¥ä¸‹ request å’Œ response headersï¼š Diff. between Expires, Date, Age and If-Modified-â€¦ Do Not Track Cache-Control Transfer-Encoding ETag X-Frame-Options ä»€ä¹ˆæ˜¯ HTTP methodï¼Ÿè¯·ç½—åˆ—å‡ºä½ æ‰€çŸ¥é“çš„æ‰€æœ‰ HTTP methodï¼Œå¹¶ç»™å‡ºè§£é‡Šã€‚ ä»£ç ç›¸å…³çš„é—®é¢˜ï¼šé—®é¢˜ï¼šfooçš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ var foo = 10 + &#39;20&#39;; é—®é¢˜ï¼šå¦‚ä½•å®ç°ä»¥ä¸‹å‡½æ•°ï¼Ÿ add(2, 5); // 7 add(2)(5); // 7 é—®é¢˜ï¼šä¸‹é¢çš„è¯­å¥çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ &quot;i&#39;m a lasagna hog&quot;.split(&quot;&quot;).reverse().join(&quot;&quot;); é—®é¢˜ï¼šwindow.fooçš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ ( window.foo || ( window.foo = &quot;bar&quot; ) ); é—®é¢˜ï¼šä¸‹é¢ä¸¤ä¸ª alert çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ var foo = &quot;Hello&quot;; (function() { var bar = &quot; World&quot;; alert(foo + bar); })(); alert(foo + bar); é—®é¢˜ï¼šfoo.lengthçš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ var foo = []; foo.push(1); foo.push(2); é—®é¢˜ï¼šfoo.xçš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ var foo = {n: 1}; var bar = foo; foo.x = foo = {n: 2}; é—®é¢˜ï¼šä¸‹é¢ä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ console.log(&#39;one&#39;); setTimeout(function() { console.log(&#39;two&#39;); }, 0); console.log(&#39;three&#39;); è¶£å‘³é—®é¢˜ï¼š ä½ æœ€è¿‘å†™è¿‡ä»€ä¹ˆçš„å¾ˆé…·çš„é¡¹ç›®å—ï¼Ÿ åœ¨ä½ ä½¿ç”¨çš„å¼€å‘å·¥å…·ä¸­ï¼Œæœ€å–œæ¬¢å“ªäº›æ–¹é¢ï¼Ÿ è°ä½¿ä½ è¸è¶³äº†å‰ç«¯å¼€å‘é¢†åŸŸï¼Ÿ ä½ æœ‰ä»€ä¹ˆä¸šä½™é¡¹ç›®å—ï¼Ÿæ˜¯å“ªç§ç±»å‹çš„ï¼Ÿ ä½ æœ€çˆ±çš„ IE ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ ä½ å¯¹å’–å•¡æœ‰æ²¡æœ‰ä»€ä¹ˆå–œå¥½ï¼Ÿ å£°æ˜æœ¬æ–‡æ”¶é›†è‡ªç½‘ç»œï¼Œä¸ç”¨ä½œä»»ä½•å•†ä¸šç”¨é€”ï¼Œæ„Ÿè°¢è´¡çŒ®è€…ã€‚","tags":[{"name":"Web","slug":"Web","permalink":"https://microzz.com/tags/Web/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://microzz.com/tags/å‰ç«¯/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://microzz.com/tags/é¢è¯•/"},{"name":"æ±‚èŒ","slug":"æ±‚èŒ","permalink":"https://microzz.com/tags/æ±‚èŒ/"}]},{"title":"JSæƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…","date":"2017-02-23T06:55:16.000Z","path":"2017/02/23/lazy-func/","text":"JSæƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…JavaScriptæƒ°æ€§å‡½æ•° &nbsp;&nbsp;&nbsp;æƒ°æ€§å‡½æ•°ï¼Œå³åªåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œåå†è°ƒç”¨å¾—åˆ°çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚è¿™å¯¹äºå‰ç«¯æ€§èƒ½ä¼˜åŒ–æœ‰ä¸€å®šçš„å¸®åŠ©ï¼Œæœ‰åŠ©äºå¼€å‘å¥å£®çš„é¡¹ç›®ã€‚ Ajax &nbsp;&nbsp;&nbsp;AJAXå³â€œAsynchronous Javascript And XMLâ€ï¼ˆå¼‚æ­¥JavaScriptå’ŒXMLï¼‰ï¼Œæ˜¯æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚AJAX = å¼‚æ­¥ JavaScriptå’ŒXMLã€‚é€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢ï¼ŒAJAX å¯ä»¥ä½¿ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚ æƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…/** * æƒ°æ€§å‡½æ•° */ function createXHR() { var xhr = null; if ( typeof XMLHttpRequest !== &#39;undefined&#39;) { xhr = new XMLHttpRequest(); createXHR = function () { return new XMLHttpRequest(); }; } else { try { xhr = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;); createXHR = function () { return new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;); }; } catch (e) { try { xhr = new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;); createXHR = function () { return ActiveXObject(&#39;Microsoft.XMLHTTP&#39;); }; } catch (e) { createXHR = function () { return null; } } } } return xhr; }","tags":[{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"æ€§èƒ½ä¼˜åŒ–","permalink":"https://microzz.com/tags/æ€§èƒ½ä¼˜åŒ–/"},{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"Function","slug":"Function","permalink":"https://microzz.com/tags/Function/"},{"name":"Ajax","slug":"Ajax","permalink":"https://microzz.com/tags/Ajax/"}]},{"title":"åŸç”ŸJSå®ç°è½®æ’­å›¾","date":"2017-02-22T02:05:02.000Z","path":"2017/02/22/carousel/","text":"åŸç”ŸJSå®ç°è½®æ’­å›¾æ•ˆæœå›¾ åŸç”ŸJSå®ç°å®šæ—¶è‡ªåŠ¨åˆ‡æ¢è½®æ’­å›¾ åœ¨çº¿é¢„è§ˆåœ¨çº¿é¢„è§ˆåœ°å€1 ğŸ”—http://microzz.cn/Carousel/ åœ¨çº¿é¢„è§ˆåœ°å€2 ğŸ”—https://microzz.github.io/carousel/ æºä»£ç æºä»£ç åœ°å€ï¼šğŸ”—https://github.com/microzz/carousel","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"Carousel","slug":"Carousel","permalink":"https://microzz.com/tags/Carousel/"}]},{"title":"React.JSå­¦ä¹ æ€ç»´å¯¼å›¾","date":"2017-02-21T13:41:34.000Z","path":"2017/02/21/react-mind-map/","text":"React.JSå­¦ä¹ æ€ç»´å¯¼å›¾ReactJSç®€ä»‹React æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JAVASCRIPT åº“ã€‚Reactä¸»è¦ç”¨äºæ„å»ºUIï¼Œå¾ˆå¤šäººè®¤ä¸º React æ˜¯ MVC ä¸­çš„ Vï¼ˆè§†å›¾ï¼‰ã€‚React èµ·æºäº Facebook çš„å†…éƒ¨é¡¹ç›®ï¼Œç”¨æ¥æ¶è®¾ Instagram çš„ç½‘ç«™ï¼Œå¹¶äº 2013 å¹´ 5 æœˆå¼€æºã€‚React æ‹¥æœ‰è¾ƒé«˜çš„æ€§èƒ½ï¼Œä»£ç é€»è¾‘éå¸¸ç®€å•ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå·²å¼€å§‹å…³æ³¨å’Œä½¿ç”¨å®ƒã€‚ æ€ç»´å¯¼å›¾åœ¨çº¿é¢„è§ˆåœ°å€ mind æºæ–‡ä»¶React.JSå­¦ä¹ æ€ç»´å¯¼å›¾","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"ReactJS","slug":"ReactJS","permalink":"https://microzz.com/tags/ReactJS/"}]},{"title":"jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€","date":"2017-02-20T13:42:02.000Z","path":"2017/02/20/waterfalljq/","text":"jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µç€‘å¸ƒæµï¼Œåˆç§°ç€‘å¸ƒæµå¼å¸ƒå±€ã€‚æ˜¯æ¯”è¾ƒæµè¡Œçš„ä¸€ç§ç½‘ç«™é¡µé¢å¸ƒå±€ï¼Œè§†è§‰è¡¨ç°ä¸ºå‚å·®ä¸é½çš„å¤šæ å¸ƒå±€ï¼Œéšç€é¡µé¢æ»šåŠ¨æ¡å‘ä¸‹æ»šåŠ¨ï¼Œè¿™ç§å¸ƒå±€è¿˜ä¼šä¸æ–­åŠ è½½æ•°æ®å—å¹¶é™„åŠ è‡³å½“å‰å°¾éƒ¨ã€‚æœ€æ—©é‡‡ç”¨æ­¤å¸ƒå±€çš„ç½‘ç«™æ˜¯Pinterestï¼Œé€æ¸åœ¨å›½å†…æµè¡Œå¼€æ¥ã€‚å›½å†…å¤§å¤šæ•°æ¸…æ–°ç«™åŸºæœ¬ä¸ºè¿™ç±»é£æ ¼ã€‚ ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹ ç³ç…æ»¡ç›®ï¼šæ•´ç‰ˆä»¥å›¾ç‰‡ä¸ºä¸»ï¼Œå¤§å°ä¸ä¸€çš„å›¾ç‰‡æŒ‰ç…§ä¸€å®šçš„è§„å¾‹æ’åˆ—ã€‚ å”¯ç¾ï¼šå›¾ç‰‡çš„é£æ ¼ä»¥å”¯ç¾çš„å›¾ç‰‡ä¸ºä¸»ã€‚ æ“ä½œç®€å•ï¼šåœ¨æµè§ˆç½‘ç«™çš„æ—¶å€™åªéœ€è¦è½»è½»æ»‘åŠ¨ä¸€ä¸‹é¼ æ ‡æ»šè½®ï¼Œä¸€åˆ‡çš„ç¾å¦™çš„å›¾ç‰‡ç²¾å½©ä¾¿å¯å‘ˆç°åœ¨ä½ é¢å‰ã€‚ æ•ˆæœé¢„è§ˆ åœ¨çº¿é¢„è§ˆåœ°å€1ï¼š ğŸ”—http://microzz.cn/waterfall-jq/ åœ¨çº¿é¢„è§ˆåœ°å€2ï¼š ğŸ”—https://microzz.github.io/waterfall-jq/ ä»£ç å®ç°æºä»£ç åœ°å€ï¼šğŸ”—https://github.com/microzz/waterfall-jq ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹å¸ƒå±€ä¼˜ç‚¹ æœ‰æ•ˆçš„é™ä½äº†ç•Œé¢å¤æ‚åº¦ï¼ŒèŠ‚çœäº†ç©ºé—´ï¼šæˆ‘ä»¬ä¸å†éœ€è¦è‡ƒè‚¿å¤æ‚çš„é¡µç å¯¼èˆªé“¾æ¥æˆ–æŒ‰é’®äº†ã€‚ å¯¹è§¦å±è®¾å¤‡æ¥è¯´ï¼Œäº¤äº’æ–¹å¼æ›´ç¬¦åˆç›´è§‰ï¼šåœ¨ç§»åŠ¨åº”ç”¨çš„äº¤äº’ç¯å¢ƒå½“ä¸­ï¼Œé€šè¿‡å‘ä¸Šæ»‘åŠ¨è¿›è¡Œæ»šå±çš„æ“ä½œå·²ç»æˆä¸ºæœ€åŸºæœ¬çš„ç”¨æˆ·ä¹ æƒ¯ï¼Œè€Œä¸”æ‰€éœ€è¦çš„æ“ä½œç²¾å‡†ç¨‹åº¦è¿œè¿œä½äºç‚¹å‡»é“¾æ¥æˆ–æŒ‰é’®ã€‚ æ›´é«˜çš„å‚ä¸åº¦ï¼šä»¥ä¸Šä¸¤ç‚¹æ‰€å¸¦æ¥çš„äº¤äº’ä¾¿æ·æ€§å¯ä»¥ä½¿ç”¨æˆ·å°†æ³¨æ„åŠ›æ›´å¤šçš„é›†ä¸­åœ¨å†…å®¹è€Œä¸æ˜¯æ“ä½œä¸Šï¼Œä»è€Œè®©ä»–ä»¬æ›´ä¹äºæ²‰æµ¸åœ¨æ¢ç´¢ä¸æµè§ˆå½“ä¸­ã€‚å¸ƒå±€ç¼ºç‚¹ æœ‰é™çš„ç”¨ä¾‹ï¼šæ— é™æ»šåŠ¨çš„æ–¹å¼åªé€‚ç”¨äºæŸäº›ç‰¹å®šç±»å‹äº§å“å½“ä¸­ä¸€éƒ¨åˆ†ç‰¹å®šç±»å‹çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œåœ¨ç”µå•†ç½‘ç«™å½“ä¸­ï¼Œç”¨æˆ·æ—¶å¸¸éœ€è¦åœ¨å•†å“åˆ—è¡¨ä¸è¯¦æƒ…é¡µé¢ä¹‹é—´åˆ‡æ¢ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¼ ç»Ÿçš„ã€å¸¦æœ‰é¡µç å¯¼èˆªçš„æ–¹å¼å¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´ç¨³å¦¥å’Œå‡†ç¡®çš„å›åˆ°æŸä¸ªç‰¹å®šçš„åˆ—è¡¨é¡µé¢å½“ä¸­ã€‚ é¢å¤–çš„å¤æ‚åº¦ï¼šé‚£äº›ç”¨æ¥æ‰“é€ æ— é™æ»šåŠ¨çš„JSåº“è™½ç„¶éƒ½è‡ªç§°å¾ˆå®¹æ˜“ä½¿ç”¨ï¼Œä½†ä½ æ€»ä¼šéœ€è¦åœ¨è‡ªå·±çš„äº§å“ä¸­è¿›è¡Œä¸åŒç¨‹åº¦çš„å®šåˆ¶åŒ–å¤„ç†ï¼Œä»¥æ»¡è¶³ä½ ä»¬è‡ªå·±çš„éœ€æ±‚;å¦å¤–è¿™äº›JSåº“åœ¨æµè§ˆå™¨å’Œè®¾å¤‡å…¼å®¹æ€§ç­‰æ–¹é¢çš„è¡¨ç°ä¹Ÿå‚å·®ä¸é½ï¼Œä½ å¿…é¡»åšå¥½å……åˆ†çš„æµ‹è¯•ä¸è°ƒæ•´å·¥ä½œã€‚ å†è§äº†ï¼Œé¡µè„šï¼šå¦‚æœä½¿ç”¨äº†æ¯”è¾ƒå…¸å‹çš„æ— é™æ»šåŠ¨åŠ è½½æ¨¡å¼ï¼Œè¿™å°±æ„å‘³ç€ä½ å¯ä»¥å’Œé¡µè„šè¯´æ‹œæ‹œäº†ã€‚æœ€å¥½è€ƒè™‘ä¸€ä¸‹é¡µè„šå¯¹äºä½ çš„ç½‘ç«™ï¼Œç‰¹åˆ«æ˜¯ç”¨æˆ·çš„é‡è¦æ€§;å¦‚æœå…¶ä¸­ç¡®å®æœ‰æ¯”è¾ƒé‡è¦çš„å†…å®¹æˆ–é“¾æ¥ï¼Œé‚£ä¹ˆæœ€å¥½æ¢ä¸€ç§æ›´ä¼ ç»Ÿå’Œç¨³å¦¥çš„æ–¹å¼ã€‚åƒä¸‡ä¸è¦è€å¼„ä½ çš„ç”¨æˆ·ï¼Œå½“ä»–ä»¬ä¸€æ¬¡æ¬¡çš„æµè§ˆåˆ°é¡µé¢åº•éƒ¨ï¼Œçœ‹åˆ°é¡µè„šï¼Œå´å› ä¸ºè‡ªåŠ¨åŠ è½½çš„å†…å®¹çªç„¶å‡ºç°è€Œæ— è®ºå¦‚ä½•éƒ½æ— æ³•ç‚¹å‡»é¡µè„šä¸­çš„é“¾æ¥æ—¶ï¼Œä»–ä»¬ä¼šå˜çš„è¶Šå‘æ„¤æ€’ã€‚ SEOï¼šé›†ä¸­åœ¨ä¸€é¡µå½“ä¸­åŠ¨æ€åŠ è½½æ•°æ®ï¼Œä¸ä¸€é¡µä¸€é¡µçš„è¾“å‡ºç›¸æ¯”ï¼Œç©¶ç«Ÿé‚£ç§æ–¹å¼æ›´åˆ©äºSEOï¼Œè¿™æ˜¯ä½ å¿…é¡»è€ƒè™‘çš„é—®é¢˜ã€‚å¯¹äºæŸäº›ä»¥ç±»å‹ç½‘ç«™æ¥è¯´ï¼Œåœ¨è¿™æ–¹é¢è¿›è¡Œå†’é™©æ˜¯å¾ˆä¸åˆ’ç®—çš„ã€‚ å…³äºé¡µé¢æ•°é‡çš„å°è±¡ï¼šå…¶å®ç«™åœ¨ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸€ç‚¹å¹¶éè´Ÿé¢;ä¸è¿‡ï¼Œå¦‚æœå¯¹äºä½ çš„ç½‘ç«™æ¥è¯´ï¼Œé€šè¿‡æ›´å¤šçš„å†…å®¹é¡µé¢å±•ç¤ºæ›´å¤šçš„ç›¸å…³ä¿¡æ¯(åŒ…æ‹¬å¹¿å‘Š)æ˜¯å¾ˆé‡è¦çš„ç­–ç•¥ï¼Œé‚£ä¹ˆå•é¡µæ— é™æ»šåŠ¨çš„æ–¹å¼å¯¹ä½ å¹¶ä¸é€‚ç”¨ã€‚ ç›¸å…³é“¾æ¥ åŸç”ŸJavaScriptå®ç°ç€‘å¸ƒæµå¸ƒå±€ CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"waterfall","slug":"waterfall","permalink":"https://microzz.com/tags/waterfall/"},{"name":"ç€‘å¸ƒæµ","slug":"ç€‘å¸ƒæµ","permalink":"https://microzz.com/tags/ç€‘å¸ƒæµ/"},{"name":"jQuery","slug":"jQuery","permalink":"https://microzz.com/tags/jQuery/"}]},{"title":"CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€","date":"2017-02-19T11:30:02.000Z","path":"2017/02/19/waterfallcss3/","text":"CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µç€‘å¸ƒæµï¼Œåˆç§°ç€‘å¸ƒæµå¼å¸ƒå±€ã€‚æ˜¯æ¯”è¾ƒæµè¡Œçš„ä¸€ç§ç½‘ç«™é¡µé¢å¸ƒå±€ï¼Œè§†è§‰è¡¨ç°ä¸ºå‚å·®ä¸é½çš„å¤šæ å¸ƒå±€ï¼Œéšç€é¡µé¢æ»šåŠ¨æ¡å‘ä¸‹æ»šåŠ¨ï¼Œè¿™ç§å¸ƒå±€è¿˜ä¼šä¸æ–­åŠ è½½æ•°æ®å—å¹¶é™„åŠ è‡³å½“å‰å°¾éƒ¨ã€‚æœ€æ—©é‡‡ç”¨æ­¤å¸ƒå±€çš„ç½‘ç«™æ˜¯Pinterestï¼Œé€æ¸åœ¨å›½å†…æµè¡Œå¼€æ¥ã€‚å›½å†…å¤§å¤šæ•°æ¸…æ–°ç«™åŸºæœ¬ä¸ºè¿™ç±»é£æ ¼ã€‚ ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹ ç³ç…æ»¡ç›®ï¼šæ•´ç‰ˆä»¥å›¾ç‰‡ä¸ºä¸»ï¼Œå¤§å°ä¸ä¸€çš„å›¾ç‰‡æŒ‰ç…§ä¸€å®šçš„è§„å¾‹æ’åˆ—ã€‚ å”¯ç¾ï¼šå›¾ç‰‡çš„é£æ ¼ä»¥å”¯ç¾çš„å›¾ç‰‡ä¸ºä¸»ã€‚ æ“ä½œç®€å•ï¼šåœ¨æµè§ˆç½‘ç«™çš„æ—¶å€™åªéœ€è¦è½»è½»æ»‘åŠ¨ä¸€ä¸‹é¼ æ ‡æ»šè½®ï¼Œä¸€åˆ‡çš„ç¾å¦™çš„å›¾ç‰‡ç²¾å½©ä¾¿å¯å‘ˆç°åœ¨ä½ é¢å‰ã€‚ æ•ˆæœé¢„è§ˆ åœ¨çº¿é¢„è§ˆåœ°å€1ï¼š ğŸ”—http://microzz.cn/waterfall-css3/ åœ¨çº¿é¢„è§ˆåœ°å€2ï¼š ğŸ”—https://microzz.github.io/waterfall-css3/ ä»£ç å®ç°æºä»£ç åœ°å€ï¼šğŸ”—https://github.com/microzz/waterfall-css3 ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹å¸ƒå±€ä¼˜ç‚¹ æœ‰æ•ˆçš„é™ä½äº†ç•Œé¢å¤æ‚åº¦ï¼ŒèŠ‚çœäº†ç©ºé—´ï¼šæˆ‘ä»¬ä¸å†éœ€è¦è‡ƒè‚¿å¤æ‚çš„é¡µç å¯¼èˆªé“¾æ¥æˆ–æŒ‰é’®äº†ã€‚ å¯¹è§¦å±è®¾å¤‡æ¥è¯´ï¼Œäº¤äº’æ–¹å¼æ›´ç¬¦åˆç›´è§‰ï¼šåœ¨ç§»åŠ¨åº”ç”¨çš„äº¤äº’ç¯å¢ƒå½“ä¸­ï¼Œé€šè¿‡å‘ä¸Šæ»‘åŠ¨è¿›è¡Œæ»šå±çš„æ“ä½œå·²ç»æˆä¸ºæœ€åŸºæœ¬çš„ç”¨æˆ·ä¹ æƒ¯ï¼Œè€Œä¸”æ‰€éœ€è¦çš„æ“ä½œç²¾å‡†ç¨‹åº¦è¿œè¿œä½äºç‚¹å‡»é“¾æ¥æˆ–æŒ‰é’®ã€‚ æ›´é«˜çš„å‚ä¸åº¦ï¼šä»¥ä¸Šä¸¤ç‚¹æ‰€å¸¦æ¥çš„äº¤äº’ä¾¿æ·æ€§å¯ä»¥ä½¿ç”¨æˆ·å°†æ³¨æ„åŠ›æ›´å¤šçš„é›†ä¸­åœ¨å†…å®¹è€Œä¸æ˜¯æ“ä½œä¸Šï¼Œä»è€Œè®©ä»–ä»¬æ›´ä¹äºæ²‰æµ¸åœ¨æ¢ç´¢ä¸æµè§ˆå½“ä¸­ã€‚å¸ƒå±€ç¼ºç‚¹ æœ‰é™çš„ç”¨ä¾‹ï¼šæ— é™æ»šåŠ¨çš„æ–¹å¼åªé€‚ç”¨äºæŸäº›ç‰¹å®šç±»å‹äº§å“å½“ä¸­ä¸€éƒ¨åˆ†ç‰¹å®šç±»å‹çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œåœ¨ç”µå•†ç½‘ç«™å½“ä¸­ï¼Œç”¨æˆ·æ—¶å¸¸éœ€è¦åœ¨å•†å“åˆ—è¡¨ä¸è¯¦æƒ…é¡µé¢ä¹‹é—´åˆ‡æ¢ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¼ ç»Ÿçš„ã€å¸¦æœ‰é¡µç å¯¼èˆªçš„æ–¹å¼å¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´ç¨³å¦¥å’Œå‡†ç¡®çš„å›åˆ°æŸä¸ªç‰¹å®šçš„åˆ—è¡¨é¡µé¢å½“ä¸­ã€‚ é¢å¤–çš„å¤æ‚åº¦ï¼šé‚£äº›ç”¨æ¥æ‰“é€ æ— é™æ»šåŠ¨çš„JSåº“è™½ç„¶éƒ½è‡ªç§°å¾ˆå®¹æ˜“ä½¿ç”¨ï¼Œä½†ä½ æ€»ä¼šéœ€è¦åœ¨è‡ªå·±çš„äº§å“ä¸­è¿›è¡Œä¸åŒç¨‹åº¦çš„å®šåˆ¶åŒ–å¤„ç†ï¼Œä»¥æ»¡è¶³ä½ ä»¬è‡ªå·±çš„éœ€æ±‚;å¦å¤–è¿™äº›JSåº“åœ¨æµè§ˆå™¨å’Œè®¾å¤‡å…¼å®¹æ€§ç­‰æ–¹é¢çš„è¡¨ç°ä¹Ÿå‚å·®ä¸é½ï¼Œä½ å¿…é¡»åšå¥½å……åˆ†çš„æµ‹è¯•ä¸è°ƒæ•´å·¥ä½œã€‚ å†è§äº†ï¼Œé¡µè„šï¼šå¦‚æœä½¿ç”¨äº†æ¯”è¾ƒå…¸å‹çš„æ— é™æ»šåŠ¨åŠ è½½æ¨¡å¼ï¼Œè¿™å°±æ„å‘³ç€ä½ å¯ä»¥å’Œé¡µè„šè¯´æ‹œæ‹œäº†ã€‚æœ€å¥½è€ƒè™‘ä¸€ä¸‹é¡µè„šå¯¹äºä½ çš„ç½‘ç«™ï¼Œç‰¹åˆ«æ˜¯ç”¨æˆ·çš„é‡è¦æ€§;å¦‚æœå…¶ä¸­ç¡®å®æœ‰æ¯”è¾ƒé‡è¦çš„å†…å®¹æˆ–é“¾æ¥ï¼Œé‚£ä¹ˆæœ€å¥½æ¢ä¸€ç§æ›´ä¼ ç»Ÿå’Œç¨³å¦¥çš„æ–¹å¼ã€‚åƒä¸‡ä¸è¦è€å¼„ä½ çš„ç”¨æˆ·ï¼Œå½“ä»–ä»¬ä¸€æ¬¡æ¬¡çš„æµè§ˆåˆ°é¡µé¢åº•éƒ¨ï¼Œçœ‹åˆ°é¡µè„šï¼Œå´å› ä¸ºè‡ªåŠ¨åŠ è½½çš„å†…å®¹çªç„¶å‡ºç°è€Œæ— è®ºå¦‚ä½•éƒ½æ— æ³•ç‚¹å‡»é¡µè„šä¸­çš„é“¾æ¥æ—¶ï¼Œä»–ä»¬ä¼šå˜çš„è¶Šå‘æ„¤æ€’ã€‚ SEOï¼šé›†ä¸­åœ¨ä¸€é¡µå½“ä¸­åŠ¨æ€åŠ è½½æ•°æ®ï¼Œä¸ä¸€é¡µä¸€é¡µçš„è¾“å‡ºç›¸æ¯”ï¼Œç©¶ç«Ÿé‚£ç§æ–¹å¼æ›´åˆ©äºSEOï¼Œè¿™æ˜¯ä½ å¿…é¡»è€ƒè™‘çš„é—®é¢˜ã€‚å¯¹äºæŸäº›ä»¥ç±»å‹ç½‘ç«™æ¥è¯´ï¼Œåœ¨è¿™æ–¹é¢è¿›è¡Œå†’é™©æ˜¯å¾ˆä¸åˆ’ç®—çš„ã€‚ å…³äºé¡µé¢æ•°é‡çš„å°è±¡ï¼šå…¶å®ç«™åœ¨ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸€ç‚¹å¹¶éè´Ÿé¢;ä¸è¿‡ï¼Œå¦‚æœå¯¹äºä½ çš„ç½‘ç«™æ¥è¯´ï¼Œé€šè¿‡æ›´å¤šçš„å†…å®¹é¡µé¢å±•ç¤ºæ›´å¤šçš„ç›¸å…³ä¿¡æ¯(åŒ…æ‹¬å¹¿å‘Š)æ˜¯å¾ˆé‡è¦çš„ç­–ç•¥ï¼Œé‚£ä¹ˆå•é¡µæ— é™æ»šåŠ¨çš„æ–¹å¼å¯¹ä½ å¹¶ä¸é€‚ç”¨ã€‚ ç›¸å…³é“¾æ¥ åŸç”ŸJavaScriptå®ç°ç€‘å¸ƒæµå¸ƒå±€jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"CSS3","slug":"CSS3","permalink":"https://microzz.com/tags/CSS3/"},{"name":"waterfall","slug":"waterfall","permalink":"https://microzz.com/tags/waterfall/"},{"name":"ç€‘å¸ƒæµ","slug":"ç€‘å¸ƒæµ","permalink":"https://microzz.com/tags/ç€‘å¸ƒæµ/"}]},{"title":"åŸç”ŸJavaScriptå®ç°ç€‘å¸ƒæµå¸ƒå±€","date":"2017-02-17T09:35:03.000Z","path":"2017/02/17/waterfalljs/","text":"åŸç”ŸJavaScriptå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µç€‘å¸ƒæµï¼Œåˆç§°ç€‘å¸ƒæµå¼å¸ƒå±€ã€‚æ˜¯æ¯”è¾ƒæµè¡Œçš„ä¸€ç§ç½‘ç«™é¡µé¢å¸ƒå±€ï¼Œè§†è§‰è¡¨ç°ä¸ºå‚å·®ä¸é½çš„å¤šæ å¸ƒå±€ï¼Œéšç€é¡µé¢æ»šåŠ¨æ¡å‘ä¸‹æ»šåŠ¨ï¼Œè¿™ç§å¸ƒå±€è¿˜ä¼šä¸æ–­åŠ è½½æ•°æ®å—å¹¶é™„åŠ è‡³å½“å‰å°¾éƒ¨ã€‚æœ€æ—©é‡‡ç”¨æ­¤å¸ƒå±€çš„ç½‘ç«™æ˜¯Pinterestï¼Œé€æ¸åœ¨å›½å†…æµè¡Œå¼€æ¥ã€‚å›½å†…å¤§å¤šæ•°æ¸…æ–°ç«™åŸºæœ¬ä¸ºè¿™ç±»é£æ ¼ã€‚ ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹ ç³ç…æ»¡ç›®ï¼šæ•´ç‰ˆä»¥å›¾ç‰‡ä¸ºä¸»ï¼Œå¤§å°ä¸ä¸€çš„å›¾ç‰‡æŒ‰ç…§ä¸€å®šçš„è§„å¾‹æ’åˆ—ã€‚ å”¯ç¾ï¼šå›¾ç‰‡çš„é£æ ¼ä»¥å”¯ç¾çš„å›¾ç‰‡ä¸ºä¸»ã€‚ æ“ä½œç®€å•ï¼šåœ¨æµè§ˆç½‘ç«™çš„æ—¶å€™åªéœ€è¦è½»è½»æ»‘åŠ¨ä¸€ä¸‹é¼ æ ‡æ»šè½®ï¼Œä¸€åˆ‡çš„ç¾å¦™çš„å›¾ç‰‡ç²¾å½©ä¾¿å¯å‘ˆç°åœ¨ä½ é¢å‰ã€‚ ä»£ç å®ç°æºä»£ç åœ°å€ï¼šğŸ”—https://github.com/microzz/waterfall-js æ•ˆæœé¢„è§ˆ åœ¨çº¿é¢„è§ˆåœ°å€1ï¼š ğŸ”—http://microzz.cn/waterfall/ åœ¨çº¿é¢„è§ˆåœ°å€2ï¼š ğŸ”—https://microzz.github.io/waterfall-js/ ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹å¸ƒå±€ä¼˜ç‚¹ æœ‰æ•ˆçš„é™ä½äº†ç•Œé¢å¤æ‚åº¦ï¼ŒèŠ‚çœäº†ç©ºé—´ï¼šæˆ‘ä»¬ä¸å†éœ€è¦è‡ƒè‚¿å¤æ‚çš„é¡µç å¯¼èˆªé“¾æ¥æˆ–æŒ‰é’®äº†ã€‚ å¯¹è§¦å±è®¾å¤‡æ¥è¯´ï¼Œäº¤äº’æ–¹å¼æ›´ç¬¦åˆç›´è§‰ï¼šåœ¨ç§»åŠ¨åº”ç”¨çš„äº¤äº’ç¯å¢ƒå½“ä¸­ï¼Œé€šè¿‡å‘ä¸Šæ»‘åŠ¨è¿›è¡Œæ»šå±çš„æ“ä½œå·²ç»æˆä¸ºæœ€åŸºæœ¬çš„ç”¨æˆ·ä¹ æƒ¯ï¼Œè€Œä¸”æ‰€éœ€è¦çš„æ“ä½œç²¾å‡†ç¨‹åº¦è¿œè¿œä½äºç‚¹å‡»é“¾æ¥æˆ–æŒ‰é’®ã€‚ æ›´é«˜çš„å‚ä¸åº¦ï¼šä»¥ä¸Šä¸¤ç‚¹æ‰€å¸¦æ¥çš„äº¤äº’ä¾¿æ·æ€§å¯ä»¥ä½¿ç”¨æˆ·å°†æ³¨æ„åŠ›æ›´å¤šçš„é›†ä¸­åœ¨å†…å®¹è€Œä¸æ˜¯æ“ä½œä¸Šï¼Œä»è€Œè®©ä»–ä»¬æ›´ä¹äºæ²‰æµ¸åœ¨æ¢ç´¢ä¸æµè§ˆå½“ä¸­ã€‚å¸ƒå±€ç¼ºç‚¹ æœ‰é™çš„ç”¨ä¾‹ï¼šæ— é™æ»šåŠ¨çš„æ–¹å¼åªé€‚ç”¨äºæŸäº›ç‰¹å®šç±»å‹äº§å“å½“ä¸­ä¸€éƒ¨åˆ†ç‰¹å®šç±»å‹çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œåœ¨ç”µå•†ç½‘ç«™å½“ä¸­ï¼Œç”¨æˆ·æ—¶å¸¸éœ€è¦åœ¨å•†å“åˆ—è¡¨ä¸è¯¦æƒ…é¡µé¢ä¹‹é—´åˆ‡æ¢ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¼ ç»Ÿçš„ã€å¸¦æœ‰é¡µç å¯¼èˆªçš„æ–¹å¼å¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´ç¨³å¦¥å’Œå‡†ç¡®çš„å›åˆ°æŸä¸ªç‰¹å®šçš„åˆ—è¡¨é¡µé¢å½“ä¸­ã€‚ é¢å¤–çš„å¤æ‚åº¦ï¼šé‚£äº›ç”¨æ¥æ‰“é€ æ— é™æ»šåŠ¨çš„JSåº“è™½ç„¶éƒ½è‡ªç§°å¾ˆå®¹æ˜“ä½¿ç”¨ï¼Œä½†ä½ æ€»ä¼šéœ€è¦åœ¨è‡ªå·±çš„äº§å“ä¸­è¿›è¡Œä¸åŒç¨‹åº¦çš„å®šåˆ¶åŒ–å¤„ç†ï¼Œä»¥æ»¡è¶³ä½ ä»¬è‡ªå·±çš„éœ€æ±‚;å¦å¤–è¿™äº›JSåº“åœ¨æµè§ˆå™¨å’Œè®¾å¤‡å…¼å®¹æ€§ç­‰æ–¹é¢çš„è¡¨ç°ä¹Ÿå‚å·®ä¸é½ï¼Œä½ å¿…é¡»åšå¥½å……åˆ†çš„æµ‹è¯•ä¸è°ƒæ•´å·¥ä½œã€‚ å†è§äº†ï¼Œé¡µè„šï¼šå¦‚æœä½¿ç”¨äº†æ¯”è¾ƒå…¸å‹çš„æ— é™æ»šåŠ¨åŠ è½½æ¨¡å¼ï¼Œè¿™å°±æ„å‘³ç€ä½ å¯ä»¥å’Œé¡µè„šè¯´æ‹œæ‹œäº†ã€‚æœ€å¥½è€ƒè™‘ä¸€ä¸‹é¡µè„šå¯¹äºä½ çš„ç½‘ç«™ï¼Œç‰¹åˆ«æ˜¯ç”¨æˆ·çš„é‡è¦æ€§;å¦‚æœå…¶ä¸­ç¡®å®æœ‰æ¯”è¾ƒé‡è¦çš„å†…å®¹æˆ–é“¾æ¥ï¼Œé‚£ä¹ˆæœ€å¥½æ¢ä¸€ç§æ›´ä¼ ç»Ÿå’Œç¨³å¦¥çš„æ–¹å¼ã€‚åƒä¸‡ä¸è¦è€å¼„ä½ çš„ç”¨æˆ·ï¼Œå½“ä»–ä»¬ä¸€æ¬¡æ¬¡çš„æµè§ˆåˆ°é¡µé¢åº•éƒ¨ï¼Œçœ‹åˆ°é¡µè„šï¼Œå´å› ä¸ºè‡ªåŠ¨åŠ è½½çš„å†…å®¹çªç„¶å‡ºç°è€Œæ— è®ºå¦‚ä½•éƒ½æ— æ³•ç‚¹å‡»é¡µè„šä¸­çš„é“¾æ¥æ—¶ï¼Œä»–ä»¬ä¼šå˜çš„è¶Šå‘æ„¤æ€’ã€‚ SEOï¼šé›†ä¸­åœ¨ä¸€é¡µå½“ä¸­åŠ¨æ€åŠ è½½æ•°æ®ï¼Œä¸ä¸€é¡µä¸€é¡µçš„è¾“å‡ºç›¸æ¯”ï¼Œç©¶ç«Ÿé‚£ç§æ–¹å¼æ›´åˆ©äºSEOï¼Œè¿™æ˜¯ä½ å¿…é¡»è€ƒè™‘çš„é—®é¢˜ã€‚å¯¹äºæŸäº›ä»¥ç±»å‹ç½‘ç«™æ¥è¯´ï¼Œåœ¨è¿™æ–¹é¢è¿›è¡Œå†’é™©æ˜¯å¾ˆä¸åˆ’ç®—çš„ã€‚ å…³äºé¡µé¢æ•°é‡çš„å°è±¡ï¼šå…¶å®ç«™åœ¨ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸€ç‚¹å¹¶éè´Ÿé¢;ä¸è¿‡ï¼Œå¦‚æœå¯¹äºä½ çš„ç½‘ç«™æ¥è¯´ï¼Œé€šè¿‡æ›´å¤šçš„å†…å®¹é¡µé¢å±•ç¤ºæ›´å¤šçš„ç›¸å…³ä¿¡æ¯(åŒ…æ‹¬å¹¿å‘Š)æ˜¯å¾ˆé‡è¦çš„ç­–ç•¥ï¼Œé‚£ä¹ˆå•é¡µæ— é™æ»šåŠ¨çš„æ–¹å¼å¯¹ä½ å¹¶ä¸é€‚ç”¨ã€‚ ç›¸å…³é“¾æ¥ CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"waterfall","slug":"waterfall","permalink":"https://microzz.com/tags/waterfall/"},{"name":"ç€‘å¸ƒæµ","slug":"ç€‘å¸ƒæµ","permalink":"https://microzz.com/tags/ç€‘å¸ƒæµ/"}]},{"title":"Node.jså®ç°ä¸€ä¸ªå°çˆ¬è™«","date":"2017-02-14T08:33:13.000Z","path":"2017/02/14/crawler/","text":"Node.jså®ç°ä¸€ä¸ªå°çˆ¬è™«åˆ†ææˆ‘ä»¬å°†ç”¨æœ€ç®€å•çš„ä»£ç å®ç°ä¸€ä¸ªç®€å•çš„å°çˆ¬è™«ã€‚æœ¬ç¤ºä¾‹é‡‡ç”¨ES6å†™æ³•ã€‚é¦–å…ˆæˆ‘ä»¬è¦å®‰è£…ç¬¬ä¸‰æ–¹cheerioæ¨¡å—ï¼Œåœ¨é¡¹ç›®ç›®å½•ä½¿ç”¨npm install cheerio --save å‘½ä»¤å³å¯ã€‚åœ¨æ–‡ä»¶ä¸­æˆ‘ä»¬éœ€è¦å¼•å…¥å¦‚ä¸‹æ¨¡å—ï¼š æ¨¡å—å ä½œç”¨ cheerio ç±»ä¼¼jQueryï¼Œæ–¹ä¾¿å¯¹DOMå†…å®¹æ“ä½œ https é’ˆå¯¹httpsåè®®ï¼Œhttpæ¨¡å—ç”¨æ³•ç±»ä¼¼ ä»£ç å®ç°// å¼•å…¥æ¨¡å— const https = require(&#39;https&#39;); const cheerio = require(&#39;cheerio&#39;); // çˆ¬å–ç›®æ ‡ç½‘ç«™URL let url = &#39;https://microzz.com&#39;; // ä½¿ç”¨getæ–¹æ³•è®¿é—® https.get(url, res =&gt; { let html = &#39;&#39;; // ç›‘å¬dataäº‹ä»¶è·å–htmlæºç  res.on(&#39;data&#39;, data =&gt; { html += data; }); // ç›‘å¬endäº‹ä»¶ï¼ŒåŒæ—¶æŠŠè·å–åˆ°çš„æ•°æ®ä¼ ç»™filterDataæ–¹æ³•è¿›è¡Œè¿‡æ»¤ res.on(&#39;end&#39;, () =&gt; { let titles = filterData(html); console.log(titles); }); }).on(&#39;error&#39;, e =&gt; { console.log(e.message); }); // ä½¿ç”¨cheerioæ¨¡å—å¯¹å†…å®¹è¿›è¡Œç­›é€‰è¿‡æ»¤ function filterData(html) { let $ = cheerio.load(html); let oTitles = $(&#39;.post-title-link&#39;); let titles = &#39;&#39;; oTitles.each( (index, item) =&gt; { let title = $(item).text(); let end = index == (oTitles.length - 1) ? &#39;&#39; : &#39;\\n&#39;; titles += &#39;ã€&#39; + (index+1) + &#39;ã€‘&#39; + title + end; }); return titles; } è‡³æ­¤ä¸€ä¸ªç®€å•çš„çˆ¬å– https://microzz.com æ–‡ç« å†…å®¹æ ‡é¢˜çš„å°çˆ¬è™«å°±å®Œæˆå•¦ğŸ˜„","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Nodejs","slug":"Nodejs","permalink":"https://microzz.com/tags/Nodejs/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://microzz.com/tags/çˆ¬è™«/"}]},{"title":"npm scripts ä½¿ç”¨æŒ‡å—","date":"2017-02-13T11:51:28.000Z","path":"2017/02/13/npm-scripts/","text":"npm scripts ä½¿ç”¨æŒ‡å— &nbsp;&nbsp;&nbsp;Node å¼€å‘ç¦»ä¸å¼€ npmï¼Œè€Œè„šæœ¬åŠŸèƒ½æ˜¯ npm æœ€å¼ºå¤§ã€æœ€å¸¸ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ npm è„šæœ¬ï¼ˆnpm scriptsï¼‰ã€‚ ä¸€ã€ä»€ä¹ˆæ˜¯ npm è„šæœ¬ï¼Ÿnpm å…è®¸åœ¨package.jsonæ–‡ä»¶é‡Œé¢ï¼Œä½¿ç”¨scriptså­—æ®µå®šä¹‰è„šæœ¬å‘½ä»¤ã€‚ { // ... &quot;scripts&quot;: { &quot;build&quot;: &quot;node build.js&quot; } } ä¸Šé¢ä»£ç æ˜¯package.jsonæ–‡ä»¶çš„ä¸€ä¸ªç‰‡æ®µï¼Œé‡Œé¢çš„scriptså­—æ®µæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å®ƒçš„æ¯ä¸€ä¸ªå±æ€§ï¼Œå¯¹åº”ä¸€æ®µè„šæœ¬ã€‚æ¯”å¦‚ï¼Œbuildå‘½ä»¤å¯¹åº”çš„è„šæœ¬æ˜¯node build.jsã€‚å‘½ä»¤è¡Œä¸‹ä½¿ç”¨npm runå‘½ä»¤ï¼Œå°±å¯ä»¥æ‰§è¡Œè¿™æ®µè„šæœ¬ã€‚ $ npm run build # ç­‰åŒäºæ‰§è¡Œ $ node build.js è¿™äº›å®šä¹‰åœ¨package.jsoné‡Œé¢çš„è„šæœ¬ï¼Œå°±ç§°ä¸º npm è„šæœ¬ã€‚å®ƒçš„ä¼˜ç‚¹å¾ˆå¤šã€‚é¡¹ç›®çš„ç›¸å…³è„šæœ¬ï¼Œå¯ä»¥é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚ä¸åŒé¡¹ç›®çš„è„šæœ¬å‘½ä»¤ï¼Œåªè¦åŠŸèƒ½ç›¸åŒï¼Œå°±å¯ä»¥æœ‰åŒæ ·çš„å¯¹å¤–æ¥å£ã€‚ç”¨æˆ·ä¸éœ€è¦çŸ¥é“æ€ä¹ˆæµ‹è¯•ä½ çš„é¡¹ç›®ï¼Œåªè¦è¿è¡Œnpm run testå³å¯ã€‚å¯ä»¥åˆ©ç”¨ npm æä¾›çš„å¾ˆå¤šè¾…åŠ©åŠŸèƒ½ã€‚æŸ¥çœ‹å½“å‰é¡¹ç›®çš„æ‰€æœ‰ npm è„šæœ¬å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸å¸¦ä»»ä½•å‚æ•°çš„npm runå‘½ä»¤ã€‚ $ npm run äºŒã€åŸç†npm è„šæœ¬çš„åŸç†éå¸¸ç®€å•ã€‚æ¯å½“æ‰§è¡Œnpm runï¼Œå°±ä¼šè‡ªåŠ¨æ–°å»ºä¸€ä¸ª Shellï¼Œåœ¨è¿™ä¸ª Shell é‡Œé¢æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬å‘½ä»¤ã€‚å› æ­¤ï¼Œåªè¦æ˜¯ Shellï¼ˆä¸€èˆ¬æ˜¯ Bashï¼‰å¯ä»¥è¿è¡Œçš„å‘½ä»¤ï¼Œå°±å¯ä»¥å†™åœ¨ npm è„šæœ¬é‡Œé¢ã€‚æ¯”è¾ƒç‰¹åˆ«çš„æ˜¯ï¼Œnpm runæ–°å»ºçš„è¿™ä¸ª Shellï¼Œä¼šå°†å½“å‰ç›®å½•çš„node_modules/.binå­ç›®å½•åŠ å…¥PATHå˜é‡ï¼Œæ‰§è¡Œç»“æŸåï¼Œå†å°†PATHå˜é‡æ¢å¤åŸæ ·ã€‚è¿™æ„å‘³ç€ï¼Œå½“å‰ç›®å½•çš„node_modules/.binå­ç›®å½•é‡Œé¢çš„æ‰€æœ‰è„šæœ¬ï¼Œéƒ½å¯ä»¥ç›´æ¥ç”¨è„šæœ¬åè°ƒç”¨ï¼Œè€Œä¸å¿…åŠ ä¸Šè·¯å¾„ã€‚æ¯”å¦‚ï¼Œå½“å‰é¡¹ç›®çš„ä¾èµ–é‡Œé¢æœ‰ Mochaï¼Œåªè¦ç›´æ¥å†™mocha testå°±å¯ä»¥äº†ã€‚ &quot;test&quot;: &quot;mocha test&quot; è€Œä¸ç”¨å†™æˆä¸‹é¢è¿™æ ·ã€‚ &quot;test&quot;: &quot;./node_modules/.bin/mocha test&quot; ç”±äº npm è„šæœ¬çš„å”¯ä¸€è¦æ±‚å°±æ˜¯å¯ä»¥åœ¨ Shell æ‰§è¡Œï¼Œå› æ­¤å®ƒä¸ä¸€å®šæ˜¯ Node è„šæœ¬ï¼Œä»»ä½•å¯æ‰§è¡Œæ–‡ä»¶éƒ½å¯ä»¥å†™åœ¨é‡Œé¢ã€‚npm è„šæœ¬çš„é€€å‡ºç ï¼Œä¹Ÿéµå®ˆ Shell è„šæœ¬è§„åˆ™ã€‚å¦‚æœé€€å‡ºç ä¸æ˜¯0ï¼Œnpm å°±è®¤ä¸ºè¿™ä¸ªè„šæœ¬æ‰§è¡Œå¤±è´¥ã€‚ ä¸‰ã€é€šé…ç¬¦ç”±äº npm è„šæœ¬å°±æ˜¯ Shell è„šæœ¬ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ Shell é€šé…ç¬¦ã€‚ &quot;lint&quot;: &quot;jshint *.js&quot; &quot;lint&quot;: &quot;jshint **/*.js&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œè¡¨ç¤ºä»»æ„æ–‡ä»¶åï¼Œ*è¡¨ç¤ºä»»æ„ä¸€å±‚å­ç›®å½•ã€‚å¦‚æœè¦å°†é€šé…ç¬¦ä¼ å…¥åŸå§‹å‘½ä»¤ï¼Œé˜²æ­¢è¢« Shell è½¬ä¹‰ï¼Œè¦å°†æ˜Ÿå·è½¬ä¹‰ã€‚ &quot;test&quot;: &quot;tap test/\\*.js&quot; å››ã€ä¼ å‚å‘ npm è„šæœ¬ä¼ å…¥å‚æ•°ï¼Œè¦ä½¿ç”¨â€“æ ‡æ˜ã€‚ &quot;lint&quot;: &quot;jshint **.js&quot; å‘ä¸Šé¢çš„npm run lintå‘½ä»¤ä¼ å…¥å‚æ•°ï¼Œå¿…é¡»å†™æˆä¸‹é¢è¿™æ ·ã€‚ $ npm run lint -- --reporter checkstyle &gt; checkstyle.xml ä¹Ÿå¯ä»¥åœ¨package.jsoné‡Œé¢å†å°è£…ä¸€ä¸ªå‘½ä»¤ã€‚ &quot;lint&quot;: &quot;jshint **.js&quot;, &quot;lint:checkstyle&quot;: &quot;npm run lint -- --reporter checkstyle &gt; checkstyle.xml&quot; äº”ã€æ‰§è¡Œé¡ºåºå¦‚æœ npm è„šæœ¬é‡Œé¢éœ€è¦æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œé‚£ä¹ˆéœ€è¦æ˜ç¡®å®ƒä»¬çš„æ‰§è¡Œé¡ºåºã€‚å¦‚æœæ˜¯å¹¶è¡Œæ‰§è¡Œï¼ˆå³åŒæ—¶çš„å¹³è¡Œæ‰§è¡Œï¼‰ï¼Œå¯ä»¥ä½¿ç”¨&amp;ç¬¦å·ã€‚ $ npm run script1.js &amp; npm run script2.js å¦‚æœæ˜¯ç»§å‘æ‰§è¡Œï¼ˆå³åªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æˆåŠŸï¼Œæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨&amp;&amp;ç¬¦å·ã€‚ $ npm run script1.js &amp;&amp; npm run script2.js è¿™ä¸¤ä¸ªç¬¦å·æ˜¯ Bash çš„åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ node çš„ä»»åŠ¡ç®¡ç†æ¨¡å—ï¼šscript-runnerã€npm-run-allã€redrunã€‚ å…­ã€é»˜è®¤å€¼ä¸€èˆ¬æ¥è¯´ï¼Œnpm è„šæœ¬ç”±ç”¨æˆ·æä¾›ã€‚ä½†æ˜¯ï¼Œnpm å¯¹ä¸¤ä¸ªè„šæœ¬æä¾›äº†é»˜è®¤å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸¤ä¸ªè„šæœ¬ä¸ç”¨å®šä¹‰ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ &quot;start&quot;: &quot;node server.js&quot;ï¼Œ &quot;install&quot;: &quot;node-gyp rebuild&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œnpm run startçš„é»˜è®¤å€¼æ˜¯node server.jsï¼Œå‰ææ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰server.jsè¿™ä¸ªè„šæœ¬ï¼›npm run installçš„é»˜è®¤å€¼æ˜¯node-gyp rebuildï¼Œå‰ææ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰binding.gypæ–‡ä»¶ã€‚ ä¸ƒã€é’©å­npm è„šæœ¬æœ‰preå’Œpostä¸¤ä¸ªé’©å­ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œbuildè„šæœ¬å‘½ä»¤çš„é’©å­å°±æ˜¯prebuildå’Œpostbuildã€‚ &quot;prebuild&quot;: &quot;echo I run before the build script&quot;, &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack&quot;, &quot;postbuild&quot;: &quot;echo I run after the build script&quot; ç”¨æˆ·æ‰§è¡Œnpm run buildçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æŒ‰ç…§ä¸‹é¢çš„é¡ºåºæ‰§è¡Œã€‚ npm run prebuild &amp;&amp; npm run build &amp;&amp; npm run postbuild å› æ­¤ï¼Œå¯ä»¥åœ¨è¿™ä¸¤ä¸ªé’©å­é‡Œé¢ï¼Œå®Œæˆä¸€äº›å‡†å¤‡å·¥ä½œå’Œæ¸…ç†å·¥ä½œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ &quot;clean&quot;: &quot;rimraf ./dist &amp;&amp; mkdir dist&quot;, &quot;prebuild&quot;: &quot;npm run clean&quot;, &quot;build&quot;: &quot;cross-env NODE_ENV=production webpack&quot; npm é»˜è®¤æä¾›ä¸‹é¢è¿™äº›é’©å­ã€‚ prepublishï¼Œpostpublishpreinstallï¼Œpostinstallpreuninstallï¼Œpostuninstallpreversionï¼Œpostversionpretestï¼Œposttestprestopï¼Œpoststopprestartï¼Œpoststartprerestartï¼Œpostrestart è‡ªå®šä¹‰çš„è„šæœ¬å‘½ä»¤ä¹Ÿå¯ä»¥åŠ ä¸Špreå’Œposté’©å­ã€‚æ¯”å¦‚ï¼Œmyscriptè¿™ä¸ªè„šæœ¬å‘½ä»¤ï¼Œä¹Ÿæœ‰premyscriptå’Œpostmyscripté’©å­ã€‚ä¸è¿‡ï¼ŒåŒé‡çš„preå’Œpostæ— æ•ˆï¼Œæ¯”å¦‚prepretestå’Œpostposttestæ˜¯æ— æ•ˆçš„ã€‚npm æä¾›ä¸€ä¸ªnpm_lifecycle_eventå˜é‡ï¼Œè¿”å›å½“å‰æ­£åœ¨è¿è¡Œçš„è„šæœ¬åç§°ï¼Œæ¯”å¦‚pretestã€testã€posttestç­‰ç­‰ã€‚æ‰€ä»¥ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªå˜é‡ï¼Œåœ¨åŒä¸€ä¸ªè„šæœ¬æ–‡ä»¶é‡Œé¢ï¼Œä¸ºä¸åŒçš„npm scriptså‘½ä»¤ç¼–å†™ä»£ç ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚ const TARGET = process.env.npm_lifecycle_event; if (TARGET === &#39;test&#39;) { console.log(`Running the test task!`); } if (TARGET === &#39;pretest&#39;) { console.log(`Running the pretest task!`); } if (TARGET === &#39;posttest&#39;) { console.log(`Running the posttest task!`); } æ³¨æ„ï¼Œprepublishè¿™ä¸ªé’©å­ä¸ä»…ä¼šåœ¨npm publishå‘½ä»¤ä¹‹å‰è¿è¡Œï¼Œè¿˜ä¼šåœ¨npm installï¼ˆä¸å¸¦ä»»ä½•å‚æ•°ï¼‰å‘½ä»¤ä¹‹å‰è¿è¡Œã€‚è¿™ç§è¡Œä¸ºå¾ˆå®¹æ˜“è®©ç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘ï¼Œæ‰€ä»¥ npm 4 å¼•å…¥äº†ä¸€ä¸ªæ–°çš„é’©å­prepareï¼Œè¡Œä¸ºç­‰åŒäºprepublishï¼Œè€Œä» npm 5 å¼€å§‹ï¼Œprepublishå°†åªåœ¨npm publishå‘½ä»¤ä¹‹å‰è¿è¡Œã€‚ å…«ã€ç®€å†™å½¢å¼å››ä¸ªå¸¸ç”¨çš„ npm è„šæœ¬æœ‰ç®€å†™å½¢å¼ã€‚npm startæ˜¯npm run startnpm stopæ˜¯npm run stopçš„ç®€å†™npm testæ˜¯npm run testçš„ç®€å†™npm restartæ˜¯npm run stop &amp;&amp; npm run restart &amp;&amp; npm run startçš„ç®€å†™npm startã€npm stopå’Œnpm testéƒ½æ¯”è¾ƒå¥½ç†è§£ï¼Œè€Œnpm restartæ˜¯ä¸€ä¸ªå¤åˆå‘½ä»¤ï¼Œå®é™…ä¸Šä¼šæ‰§è¡Œä¸‰ä¸ªè„šæœ¬å‘½ä»¤ï¼šstopã€restartã€startã€‚å…·ä½“çš„æ‰§è¡Œé¡ºåºå¦‚ä¸‹ã€‚prerestartprestopstoppoststoprestartprestartstartpoststartpostrestart ä¹ã€å˜é‡npm è„šæœ¬æœ‰ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥ä½¿ç”¨ npm çš„å†…éƒ¨å˜é‡ã€‚é¦–å…ˆï¼Œé€šè¿‡npmpackageå‰ç¼€ï¼Œnpm è„šæœ¬å¯ä»¥æ‹¿åˆ°package.jsoné‡Œé¢çš„å­—æ®µã€‚æ¯”å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªpackage.jsonã€‚ { &quot;name&quot;: &quot;foo&quot;, &quot;version&quot;: &quot;1.2.5&quot;, &quot;scripts&quot;: { &quot;view&quot;: &quot;node view.js&quot; } } é‚£ä¹ˆï¼Œå˜é‡npm_package_nameè¿”å›fooï¼Œå˜é‡npm_package_versionè¿”å›1.2.5ã€‚ // view.js console.log(process.env.npm_package_name); // foo console.log(process.env.npm_package_version); // 1.2.5 ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç¯å¢ƒå˜é‡process.envå¯¹è±¡ï¼Œæ‹¿åˆ°package.jsonçš„å­—æ®µå€¼ã€‚å¦‚æœæ˜¯ Bash è„šæœ¬ï¼Œå¯ä»¥ç”¨\\$npm_package_nameå’Œ$npm_package_versionå–åˆ°è¿™ä¸¤ä¸ªå€¼ã€‚npmpackageå‰ç¼€ä¹Ÿæ”¯æŒåµŒå¥—çš„package.jsonå­—æ®µã€‚ &quot;repository&quot;: { &quot;type&quot;: &quot;git&quot;, &quot;url&quot;: &quot;xxx&quot; }, scripts: { &quot;view&quot;: &quot;echo $npm_package_repository_type&quot; } ä¸Šé¢ä»£ç ä¸­ï¼Œrepositoryå­—æ®µçš„typeå±æ€§ï¼Œå¯ä»¥é€šè¿‡npm_package_repository_typeå–åˆ°ã€‚ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚ &quot;scripts&quot;: { &quot;install&quot;: &quot;foo.js&quot; } ä¸Šé¢ä»£ç ä¸­ï¼Œnpm_package_scripts_installå˜é‡çš„å€¼ç­‰äºfoo.jsã€‚ç„¶åï¼Œnpm è„šæœ¬è¿˜å¯ä»¥é€šè¿‡npmconfigå‰ç¼€ï¼Œæ‹¿åˆ° npm çš„é…ç½®å˜é‡ï¼Œå³npm config get xxxå‘½ä»¤è¿”å›çš„å€¼ã€‚æ¯”å¦‚ï¼Œå½“å‰æ¨¡å—çš„å‘è¡Œæ ‡ç­¾ï¼Œå¯ä»¥é€šè¿‡npm_config_tagå–åˆ°ã€‚ &quot;view&quot;: &quot;echo $npm_config_tag&quot;, æ³¨æ„ï¼Œpackage.jsoné‡Œé¢çš„configå¯¹è±¡ï¼Œå¯ä»¥è¢«ç¯å¢ƒå˜é‡è¦†ç›–ã€‚ { &quot;name&quot; : &quot;foo&quot;, &quot;config&quot; : { &quot;port&quot; : &quot;8080&quot; }, &quot;scripts&quot; : { &quot;start&quot; : &quot;node server.js&quot; } } ä¸Šé¢ä»£ç ä¸­ï¼Œnpm_package_config_portå˜é‡è¿”å›çš„æ˜¯8080ã€‚è¿™ä¸ªå€¼å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•è¦†ç›–ã€‚ $ npm config set foo:port 80 æœ€åï¼Œenvå‘½ä»¤å¯ä»¥åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚ &quot;env&quot;: &quot;env&quot; åã€å¸¸ç”¨è„šæœ¬ç¤ºä¾‹// åˆ é™¤ç›®å½• &quot;clean&quot;: &quot;rimraf dist/*&quot;, // æœ¬åœ°æ­å»ºä¸€ä¸ª HTTP æœåŠ¡ &quot;serve&quot;: &quot;http-server -p 9090 dist/&quot;, // æ‰“å¼€æµè§ˆå™¨ &quot;open:dev&quot;: &quot;opener http://localhost:9090&quot;, // å®æ—¶åˆ·æ–° &quot;livereload&quot;: &quot;live-reload --port 9091 dist/&quot;, // æ„å»º HTML æ–‡ä»¶ &quot;build:html&quot;: &quot;jade index.jade &gt; dist/index.html&quot;, // åªè¦ CSS æ–‡ä»¶æœ‰å˜åŠ¨ï¼Œå°±é‡æ–°æ‰§è¡Œæ„å»º &quot;watch:css&quot;: &quot;watch &#39;npm run build:css&#39; assets/styles/&quot;, // åªè¦ HTML æ–‡ä»¶æœ‰å˜åŠ¨ï¼Œå°±é‡æ–°æ‰§è¡Œæ„å»º &quot;watch:html&quot;: &quot;watch &#39;npm run build:html&#39; assets/html&quot;, // éƒ¨ç½²åˆ° Amazon S3 &quot;deploy:prod&quot;: &quot;s3-cli sync ./dist/ s3://example-com/prod-site/&quot;, // æ„å»º favicon &quot;build:favicon&quot;: &quot;node scripts/favicon.js&quot;,","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"Nodejs","slug":"Nodejs","permalink":"https://microzz.com/tags/Nodejs/"},{"name":"npm","slug":"npm","permalink":"https://microzz.com/tags/npm/"},{"name":"js","slug":"js","permalink":"https://microzz.com/tags/js/"}]},{"title":"Mac ç»ˆç«¯å‘½ä»¤å¤§å…¨ (Shell)","date":"2017-02-12T10:24:35.000Z","path":"2017/02/12/mac-shell/","text":"Mac ç»ˆç«¯å‘½ä»¤å¤§å…¨ç›®å½•æ“ä½œ å‘½ä»¤å åŠŸèƒ½æè¿° ä½¿ç”¨ä¸¾ä¾‹ mkdir åˆ›å»ºä¸€ä¸ªç›®å½• mkdir dirname rmdir åˆ é™¤ä¸€ä¸ªç›®å½• rmdir dirname mvdir ç§»åŠ¨æˆ–é‡å‘½åä¸€ä¸ªç›®å½• mvdir dir1 dir2 cd æ”¹å˜å½“å‰ç›®å½• cd dirname pwd æ˜¾ç¤ºå½“å‰ç›®å½•çš„è·¯å¾„å pwd ls æ˜¾ç¤ºå½“å‰ç›®å½•çš„å†…å®¹ ls -la dircmp æ¯”è¾ƒä¸¤ä¸ªç›®å½•çš„å†…å®¹ dircmp dir1 dir2 æ–‡ä»¶æ“ä½œ å‘½ä»¤å åŠŸèƒ½æè¿° ä½¿ç”¨ä¸¾ä¾‹ cat æ˜¾ç¤ºæˆ–è¿æ¥æ–‡ä»¶ cat filename pg åˆ†é¡µæ ¼å¼åŒ–æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ pg filename more åˆ†å±æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ more filename od æ˜¾ç¤ºéæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ od -c filename cp å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½• cp file1 file2 rm åˆ é™¤æ–‡ä»¶æˆ–ç›®å½• rm filename mv æ”¹å˜æ–‡ä»¶åæˆ–æ‰€åœ¨ç›®å½• mv file1 file2 ln è”æ¥æ–‡ä»¶ ln -s file1 file2 find ä½¿ç”¨åŒ¹é…è¡¨è¾¾å¼æŸ¥æ‰¾æ–‡ä»¶ find . -name â€œ*.câ€ -print file æ˜¾ç¤ºæ–‡ä»¶ç±»å‹ file filename open ä½¿ç”¨é»˜è®¤çš„ç¨‹åºæ‰“å¼€æ–‡ä»¶ open filename é€‰æ‹©æ“ä½œ å‘½ä»¤å åŠŸèƒ½æè¿° ä½¿ç”¨ä¸¾ä¾‹ head æ˜¾ç¤ºæ–‡ä»¶çš„æœ€åˆå‡ è¡Œ head -20 filename tail æ˜¾ç¤ºæ–‡ä»¶çš„æœ€åå‡ è¡Œ tail -15 filename cut æ˜¾ç¤ºæ–‡ä»¶æ¯è¡Œä¸­çš„æŸäº›åŸŸ cut -f1,7 -d: /etc/passwd colrm ä»æ ‡å‡†è¾“å…¥ä¸­åˆ é™¤è‹¥å¹²åˆ— colrm 8 20 file2 paste æ¨ªå‘è¿æ¥æ–‡ä»¶ paste file1 file2 diff æ¯”è¾ƒå¹¶æ˜¾ç¤ºä¸¤ä¸ªæ–‡ä»¶çš„å·®å¼‚ diff file1 file2 sed éäº¤äº’æ–¹å¼æµç¼–è¾‘å™¨ sed â€œs/red/green/gâ€ filename grep åœ¨æ–‡ä»¶ä¸­æŒ‰æ¨¡å¼æŸ¥æ‰¾ grep â€œ^[a-zA-Z]â€ filename awk åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾å¹¶å¤„ç†æ¨¡å¼ awk â€˜{print $1 $1}â€™ filename sort æ’åºæˆ–å½’å¹¶æ–‡ä»¶ sort -d -f -u file1 uniq å»æ‰æ–‡ä»¶ä¸­çš„é‡å¤è¡Œ uniq file1 file2 comm æ˜¾ç¤ºä¸¤æœ‰åºæ–‡ä»¶çš„å…¬å…±å’Œéå…¬å…±è¡Œ comm file1 file2 wc ç»Ÿè®¡æ–‡ä»¶çš„å­—ç¬¦æ•°ã€è¯æ•°å’Œè¡Œæ•° wc filename nl ç»™æ–‡ä»¶åŠ ä¸Šè¡Œå· nl file1 &gt;file2 å®‰å…¨æ“ä½œ å‘½ä»¤å åŠŸèƒ½æè¿° ä½¿ç”¨ä¸¾ä¾‹ passwd ä¿®æ”¹ç”¨æˆ·å¯†ç  passwd chmod æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™ chmod ug+x filename umask å®šä¹‰åˆ›å»ºæ–‡ä»¶çš„æƒé™æ©ç  umask 027 chown æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•çš„å±ä¸» chown newowner filename chgrp æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç»„ chgrp staff filename xlock ç»™ç»ˆç«¯ä¸Šé” xlock -remote ç¼–ç¨‹æ“ä½œ å‘½ä»¤å åŠŸèƒ½æè¿° ä½¿ç”¨ä¸¾ä¾‹ make ç»´æŠ¤å¯æ‰§è¡Œç¨‹åºçš„æœ€æ–°ç‰ˆæœ¬ make touch æ›´æ–°æ–‡ä»¶çš„è®¿é—®å’Œä¿®æ”¹æ—¶é—´ touch -m 05202400 filename dbx å‘½ä»¤è¡Œç•Œé¢è°ƒè¯•å·¥å…· dbx a.out xde å›¾å½¢ç”¨æˆ·ç•Œé¢è°ƒè¯•å·¥å…· xde a.out è¿›ç¨‹æ“ä½œ å‘½ä»¤å åŠŸèƒ½æè¿° ä½¿ç”¨ä¸¾ä¾‹ ps æ˜¾ç¤ºè¿›ç¨‹å½“å‰çŠ¶æ€ ps u kill ç»ˆæ­¢è¿›ç¨‹ kill -9 30142 nice æ”¹å˜å¾…æ‰§è¡Œå‘½ä»¤çš„ä¼˜å…ˆçº§ nice cc -c *.c renice æ”¹å˜å·²è¿è¡Œè¿›ç¨‹çš„ä¼˜å…ˆçº§ renice +20 32768 æ—¶é—´æ“ä½œ å‘½ä»¤å åŠŸèƒ½æè¿° ä½¿ç”¨ä¸¾ä¾‹ date æ˜¾ç¤ºç³»ç»Ÿçš„å½“å‰æ—¥æœŸå’Œæ—¶é—´ date cal æ˜¾ç¤ºæ—¥å† cal 8 1996 time ç»Ÿè®¡ç¨‹åºçš„æ‰§è¡Œæ—¶é—´ time a.out ç½‘ç»œä¸é€šä¿¡æ“ä½œ å‘½ä»¤å åŠŸèƒ½æè¿° ä½¿ç”¨ä¸¾ä¾‹ telnet è¿œç¨‹ç™»å½• telnet hpc.sp.net.edu.cn rlogin è¿œç¨‹ç™»å½• rlogin hostname -l username rsh åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡ŒæŒ‡å®šå‘½ä»¤ rsh f01n03 date ftp åœ¨æœ¬åœ°ä¸»æœºä¸è¿œç¨‹ä¸»æœºä¹‹é—´ä¼ è¾“æ–‡ä»¶ ftp ftp.sp.net.edu.cn rcp åœ¨æœ¬åœ°ä¸»æœºä¸è¿œç¨‹ä¸»æœºä¹‹é—´å¤åˆ¶æ–‡ä»¶ rcp file1 host1:file2 ping ç»™ä¸€ä¸ªç½‘ç»œä¸»æœºå‘é€å›åº”è¯·æ±‚ ping hpc.sp.net.edu.cn mail é˜…è¯»å’Œå‘é€ç”µå­é‚®ä»¶ mail write ç»™å¦ä¸€ç”¨æˆ·å‘é€æŠ¥æ–‡ write username pts/1 mesg å…è®¸æˆ–æ‹’ç»æ¥æ”¶æŠ¥æ–‡ mesg n Korn Shell å‘½ä»¤ å‘½ä»¤å åŠŸèƒ½æè¿° ä½¿ç”¨ä¸¾ä¾‹ history åˆ—å‡ºæœ€è¿‘æ‰§è¡Œè¿‡çš„å‡ æ¡å‘½ä»¤åŠç¼–å· history r é‡å¤æ‰§è¡Œæœ€è¿‘æ‰§è¡Œè¿‡çš„æŸæ¡å‘½ä»¤ r -2 alias ç»™æŸä¸ªå‘½ä»¤å®šä¹‰åˆ«å alias del=rm -i unalias å–æ¶ˆå¯¹æŸä¸ªåˆ«åçš„å®šä¹‰ unalias del å…¶å®ƒå‘½ä»¤ å‘½ä»¤å åŠŸèƒ½æè¿° ä½¿ç”¨ä¸¾ä¾‹ uname æ˜¾ç¤ºæ“ä½œç³»ç»Ÿçš„æœ‰å…³ä¿¡æ¯ uname -a clear æ¸…é™¤å±å¹•æˆ–çª—å£å†…å®¹ clear env æ˜¾ç¤ºå½“å‰æ‰€æœ‰è®¾ç½®è¿‡çš„ç¯å¢ƒå˜é‡ env who åˆ—å‡ºå½“å‰ç™»å½•çš„æ‰€æœ‰ç”¨æˆ· who whoami æ˜¾ç¤ºå½“å‰æ­£è¿›è¡Œæ“ä½œçš„ç”¨æˆ·å whoami tty æ˜¾ç¤ºç»ˆç«¯æˆ–ä¼ªç»ˆç«¯çš„åç§° tty stty æ˜¾ç¤ºæˆ–é‡ç½®æ§åˆ¶é”®å®šä¹‰ stty -a du æŸ¥è¯¢ç£ç›˜ä½¿ç”¨æƒ…å†µ du -k subdir df æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿçš„æ€»ç©ºé—´å’Œå¯ç”¨ç©ºé—´ df /tmp w æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ´»åŠ¨çš„æ€»ä¿¡æ¯ w","tags":[{"name":"å¼€å‘è€…","slug":"å¼€å‘è€…","permalink":"https://microzz.com/tags/å¼€å‘è€…/"},{"name":"Mac","slug":"Mac","permalink":"https://microzz.com/tags/Mac/"},{"name":"Shell","slug":"Shell","permalink":"https://microzz.com/tags/Shell/"},{"name":"Linux","slug":"Linux","permalink":"https://microzz.com/tags/Linux/"},{"name":"Unix","slug":"Unix","permalink":"https://microzz.com/tags/Unix/"}]},{"title":"å‰ç«¯å¼€å‘é¢è¯•é¢˜é›†é”¦","date":"2017-02-10T10:01:15.000Z","path":"2017/02/10/interview/","text":"å‰ç«¯å¼€å‘é¢è¯•é¢˜å‰è¨€å‰ç«¯è¿˜æ˜¯ä¸€ä¸ªå¹´è½»çš„è¡Œä¸šï¼Œæ–°çš„è¡Œä¸šæ ‡å‡†ï¼Œ æ¡†æ¶ï¼Œ åº“éƒ½ä¸æ–­åœ¨æ›´æ–°å’Œæ–°å¢ï¼Œæ­£å¦‚èµ«é—¨åœ¨2015æ·±JSå¤§ä¼šä¸Šçš„ã€Šå‰ç«¯æœåŠ¡åŒ–ä¹‹è·¯ã€‹ä¸»é¢˜æ¼”è®²ä¸­è¯´çš„ä¸€å¥è¯ï¼šâ€œæ¯18è‡³24ä¸ªæœˆï¼Œå‰ç«¯éƒ½ä¼šéš¾ä¸€å€â€ï¼Œè¿™äº›å˜åŒ–ä½¿å‰ç«¯çš„èƒ½åŠ›æ›´åŠ ä¸°å¯Œã€åˆ›é€ çš„åº”ç”¨ä¹Ÿä¼šæ›´åŠ å®Œç¾ã€‚æ‰€ä»¥å…³æ³¨å„ç§å‰ç«¯æŠ€æœ¯ï¼Œè·Ÿä¸Šå¿«é€Ÿå˜åŒ–çš„èŠ‚å¥ï¼Œä¹Ÿæ˜¯èº«ä¸ºä¸€ä¸ªå‰ç«¯ç¨‹åºå‘˜å¿…å¤‡çš„æŠ€èƒ½ä¹‹ä¸€ã€‚ é¢è¯•é¢˜ç›®ï¼š æ ¹æ®ä½ çš„ç­‰çº§å’ŒèŒä½çš„å˜åŒ–ï¼Œå…¥é—¨çº§åˆ°ä¸“å®¶çº§ï¼Œå¹¿åº¦å’Œæ·±åº¦éƒ½ä¼šæœ‰æ‰€å¢åŠ ã€‚ é¢˜ç›®ç±»å‹ï¼š ç†è®ºçŸ¥è¯†ã€ç®—æ³•ã€é¡¹ç›®ç»†èŠ‚ã€æŠ€æœ¯è§†é‡ã€å¼€æ”¾æ€§é¢˜ã€å·¥ä½œæ¡ˆä¾‹ã€‚ ç»†èŠ‚è¿½é—®ï¼š å¯ä»¥ç¡®ä¿é—®åˆ°ä½ å¼€å§‹ä¸æ‡‚æˆ–é¢è¯•å®˜å¼€å§‹ä¸æ‡‚ä¸ºæ­¢ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å»¶å±•é¢˜ç›®çš„åŒºåˆ†åº¦å’Œæ·±åº¦ï¼ŒçŸ¥é“ä½ çš„å®é™…èƒ½åŠ›ã€‚å› ä¸ºè¿™ç§çŸ¥è¯†å…³è”æ˜¯é•¿æ—¶æœŸçš„å­¦ä¹ ï¼Œä¸´æ—¶æŠ±ä½›è„šç»å¯¹æ˜¯è®°ä¸ä½çš„ã€‚ å›ç­”é—®é¢˜å†æ£’ï¼Œé¢è¯•å®˜ï¼ˆå¯èƒ½æ˜¯ä½ é¢è¯•èŒä½çš„ç›´æ¥é¢†å¯¼ï¼‰ï¼Œä¼šè€ƒè™‘æˆ‘è¦ä¸è¦è¿™ä¸ªäººåšæˆ‘çš„åŒäº‹ï¼Ÿæ‰€ä»¥æ€åº¦å¾ˆé‡è¦ã€é™¤äº†èƒ½åšäº‹ï¼Œè¿˜è¦ä¼šåšäººã€‚ï¼ˆæ„Ÿè§‰æ›´åƒæ˜¯ç›¸äº²( â€¢Ì£Ì£Ì£Ì£Ì£Ì¥Ìà¯°â€¢Ì£Ì£Ì£Ì£Ì£Ì¥Ì€ )ï¼‰ èµ„æ·±çš„å‰ç«¯å¼€å‘èƒ½æŠŠabsoluteå’Œrelativeå¼„æ··ï¼Œè¿™æ ·çš„äººä¸è¦ä¹Ÿç½¢ï¼Œå› ä¸ºå›¢é˜Ÿéœ€è¦çš„æ˜¯ï¼šä½ è¿™ä¸ªäººå…·æœ‰å¯ä»¥ä¾é çš„æ‰èƒ½ï¼ˆé è°±ï¼‰ã€‚ å‰ç«¯å¼€å‘çŸ¥è¯†ç‚¹ï¼š HTML&amp;CSSï¼š å¯¹Webæ ‡å‡†çš„ç†è§£ã€æµè§ˆå™¨å†…æ ¸å·®å¼‚ã€å…¼å®¹æ€§ã€hackã€CSSåŸºæœ¬åŠŸï¼šå¸ƒå±€ã€ç›’å­æ¨¡å‹ã€é€‰æ‹©å™¨ä¼˜å…ˆçº§ã€ HTML5ã€CSS3ã€Flexbox JavaScriptï¼š æ•°æ®ç±»å‹ã€è¿ç®—ã€å¯¹è±¡ã€Functionã€ç»§æ‰¿ã€é—­åŒ…ã€ä½œç”¨åŸŸã€åŸå‹é“¾ã€äº‹ä»¶ã€RegExpã€JSONã€Ajaxã€ DOMã€BOMã€å†…å­˜æ³„æ¼ã€è·¨åŸŸã€å¼‚æ­¥è£…è½½ã€æ¨¡æ¿å¼•æ“ã€å‰ç«¯MVCã€è·¯ç”±ã€æ¨¡å—åŒ–ã€Canvasã€ECMAScript 6ã€Nodejs å…¶ä»–ï¼š ç§»åŠ¨ç«¯ã€å“åº”å¼ã€è‡ªåŠ¨åŒ–æ„å»ºã€HTTPã€ç¦»çº¿å­˜å‚¨ã€WEBå®‰å…¨ã€ä¼˜åŒ–ã€é‡æ„ã€å›¢é˜Ÿåä½œã€å¯ç»´æŠ¤ã€æ˜“ç”¨æ€§ã€SEOã€UEDã€æ¶æ„ã€èŒä¸šç”Ÿæ¶¯ã€å¿«é€Ÿå­¦ä¹ èƒ½åŠ› ä½œä¸ºä¸€åå‰ç«¯å·¥ç¨‹å¸ˆï¼Œæ— è®ºå·¥ä½œå¹´å¤´é•¿çŸ­éƒ½åº”è¯¥æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼š 1ã€DOMç»“æ„ â€”â€” ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å¯èƒ½å­˜åœ¨å“ªäº›å…³ç³»ä»¥åŠå¦‚ä½•åœ¨èŠ‚ç‚¹ä¹‹é—´ä»»æ„ç§»åŠ¨ã€‚ 2ã€DOMæ“ä½œ â€”â€” å¦‚ä½•æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ç­‰ã€‚ 3ã€äº‹ä»¶ â€”â€” å¦‚ä½•ä½¿ç”¨äº‹ä»¶ï¼Œä»¥åŠIEå’Œæ ‡å‡†DOMäº‹ä»¶æ¨¡å‹ä¹‹é—´å­˜åœ¨çš„å·®åˆ«ã€‚ 4ã€XMLHttpRequest â€”â€” è¿™æ˜¯ä»€ä¹ˆã€æ€æ ·å®Œæ•´åœ°æ‰§è¡Œä¸€æ¬¡GETè¯·æ±‚ã€æ€æ ·æ£€æµ‹é”™è¯¯ã€‚ 5ã€ä¸¥æ ¼æ¨¡å¼ä¸æ··æ‚æ¨¡å¼ â€”â€” å¦‚ä½•è§¦å‘è¿™ä¸¤ç§æ¨¡å¼ï¼ŒåŒºåˆ†å®ƒä»¬æœ‰ä½•æ„ä¹‰ã€‚ 6ã€ç›’æ¨¡å‹ â€”â€” å¤–è¾¹è·ã€å†…è¾¹è·å’Œè¾¹æ¡†ä¹‹é—´çš„å…³ç³»ï¼ŒåŠIE8ä»¥ä¸‹ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­çš„ç›’æ¨¡å‹ 7ã€å—çº§å…ƒç´ ä¸è¡Œå†…å…ƒç´  â€”â€” æ€ä¹ˆç”¨CSSæ§åˆ¶å®ƒä»¬ã€ä»¥åŠå¦‚ä½•åˆç†çš„ä½¿ç”¨å®ƒä»¬ 8ã€æµ®åŠ¨å…ƒç´  â€”â€” æ€ä¹ˆä½¿ç”¨å®ƒä»¬ã€å®ƒä»¬æœ‰ä»€ä¹ˆé—®é¢˜ä»¥åŠæ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜ã€‚ 9ã€HTMLä¸XHTML â€”â€” äºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½ è§‰å¾—åº”è¯¥ä½¿ç”¨å“ªä¸€ä¸ªå¹¶è¯´å‡ºç†ç”±ã€‚ 10ã€JSON â€”â€” ä½œç”¨ã€ç”¨é€”ã€è®¾è®¡ç»“æ„ã€‚ å¤‡æ³¨ï¼š æ ¹æ®è‡ªå·±éœ€è¦é€‰æ‹©æ€§é˜…è¯»ï¼Œé¢è¯•é¢˜æ˜¯å¯¹ç†è®ºçŸ¥è¯†çš„æ€»ç»“ï¼Œè®©è‡ªå·±å­¦ä¼šåº”è¯¥å¦‚ä½•è¡¨è¾¾ã€‚ èµ„æ–™ç­”æ¡ˆä¸å¤Ÿæ­£ç¡®å’Œå…¨é¢ï¼Œæ¬¢è¿æ¬¢è¿Starå’Œæäº¤issuesã€‚ æ ¼å¼ä¸æ–­ä¿®æ”¹æ›´æ–°ä¸­ã€‚ æ›´æ–°è®°å½•ï¼š 2016å¹´3æœˆ25æ—¥ï¼šæ–°å¢ECMAScript6 ç›¸å…³é—®é¢˜ HTML Doctypeä½œç”¨ï¼Ÿæ ‡å‡†æ¨¡å¼ä¸å…¼å®¹æ¨¡å¼å„æœ‰ä»€ä¹ˆåŒºåˆ«? ï¼ˆ1ï¼‰ã€&lt;!DOCTYPE&gt;å£°æ˜ä½äºä½äºHTMLæ–‡æ¡£ä¸­çš„ç¬¬ä¸€è¡Œï¼Œå¤„äº &lt;html&gt; æ ‡ç­¾ä¹‹å‰ã€‚å‘ŠçŸ¥æµè§ˆå™¨çš„è§£æå™¨ç”¨ä»€ä¹ˆæ–‡æ¡£æ ‡å‡†è§£æè¿™ä¸ªæ–‡æ¡£ã€‚DOCTYPEä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®ä¼šå¯¼è‡´æ–‡æ¡£ä»¥å…¼å®¹æ¨¡å¼å‘ˆç°ã€‚ ï¼ˆ2ï¼‰ã€æ ‡å‡†æ¨¡å¼çš„æ’ç‰ˆ å’ŒJSè¿ä½œæ¨¡å¼éƒ½æ˜¯ä»¥è¯¥æµè§ˆå™¨æ”¯æŒçš„æœ€é«˜æ ‡å‡†è¿è¡Œã€‚åœ¨å…¼å®¹æ¨¡å¼ä¸­ï¼Œé¡µé¢ä»¥å®½æ¾çš„å‘åå…¼å®¹çš„æ–¹å¼æ˜¾ç¤º,æ¨¡æ‹Ÿè€å¼æµè§ˆå™¨çš„è¡Œä¸ºä»¥é˜²æ­¢ç«™ç‚¹æ— æ³•å·¥ä½œã€‚ HTML5 ä¸ºä»€ä¹ˆåªéœ€è¦å†™ &lt;!DOCTYPE HTML&gt;ï¼Ÿ HTML5 ä¸åŸºäº SGMLï¼Œå› æ­¤ä¸éœ€è¦å¯¹DTDè¿›è¡Œå¼•ç”¨ï¼Œä½†æ˜¯éœ€è¦doctypeæ¥è§„èŒƒæµè§ˆå™¨çš„è¡Œä¸ºï¼ˆè®©æµè§ˆå™¨æŒ‰ç…§å®ƒä»¬åº”è¯¥çš„æ–¹å¼æ¥è¿è¡Œï¼‰ï¼› è€ŒHTML4.01åŸºäºSGML,æ‰€ä»¥éœ€è¦å¯¹DTDè¿›è¡Œå¼•ç”¨ï¼Œæ‰èƒ½å‘ŠçŸ¥æµè§ˆå™¨æ–‡æ¡£æ‰€ä½¿ç”¨çš„æ–‡æ¡£ç±»å‹ã€‚ è¡Œå†…å…ƒç´ æœ‰å“ªäº›ï¼Ÿå—çº§å…ƒç´ æœ‰å“ªäº›ï¼Ÿ ç©º(void)å…ƒç´ æœ‰é‚£äº›ï¼Ÿ é¦–å…ˆï¼šCSSè§„èŒƒè§„å®šï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰displayå±æ€§ï¼Œç¡®å®šè¯¥å…ƒç´ çš„ç±»å‹ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰é»˜è®¤çš„displayå€¼ï¼Œå¦‚divçš„displayé»˜è®¤å€¼ä¸ºâ€œblockâ€ï¼Œåˆ™ä¸ºâ€œå—çº§â€å…ƒç´ ï¼›spané»˜è®¤displayå±æ€§å€¼ä¸ºâ€œinlineâ€ï¼Œæ˜¯â€œè¡Œå†…â€å…ƒç´ ã€‚ ï¼ˆ1ï¼‰è¡Œå†…å…ƒç´ æœ‰ï¼ša b span img input select strongï¼ˆå¼ºè°ƒçš„è¯­æ°”ï¼‰ ï¼ˆ2ï¼‰å—çº§å…ƒç´ æœ‰ï¼šdiv ul ol li dl dt dd h1 h2 h3 h4â€¦p ï¼ˆ3ï¼‰å¸¸è§çš„ç©ºå…ƒç´ ï¼š &lt;br&gt; &lt;hr&gt; &lt;img&gt; &lt;input&gt; &lt;link&gt; &lt;meta&gt; é²œä¸ºäººçŸ¥çš„æ˜¯ï¼š &lt;area&gt; &lt;base&gt; &lt;col&gt; &lt;command&gt; &lt;embed&gt; &lt;keygen&gt; &lt;param&gt; &lt;source&gt; &lt;track&gt; &lt;wbr&gt; ä¸åŒæµè§ˆå™¨ï¼ˆç‰ˆæœ¬ï¼‰ã€HTML4ï¼ˆ5ï¼‰ã€CSS2ç­‰å®é™…ç•¥æœ‰å·®å¼‚ å‚è€ƒ: http://stackoverflow.com/questions/6867254/browsers-default-css-for-html-elements é¡µé¢å¯¼å…¥æ ·å¼æ—¶ï¼Œä½¿ç”¨linkå’Œ@importæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ ï¼ˆ1ï¼‰linkå±äºXHTMLæ ‡ç­¾ï¼Œé™¤äº†åŠ è½½CSSå¤–ï¼Œè¿˜èƒ½ç”¨äºå®šä¹‰RSS, å®šä¹‰relè¿æ¥å±æ€§ç­‰ä½œç”¨ï¼›è€Œ@importæ˜¯CSSæä¾›çš„ï¼Œåªèƒ½ç”¨äºåŠ è½½CSS; ï¼ˆ2ï¼‰é¡µé¢è¢«åŠ è½½çš„æ—¶ï¼Œlinkä¼šåŒæ—¶è¢«åŠ è½½ï¼Œè€Œ@importå¼•ç”¨çš„CSSä¼šç­‰åˆ°é¡µé¢è¢«åŠ è½½å®Œå†åŠ è½½; ï¼ˆ3ï¼‰importæ˜¯CSS2.1 æå‡ºçš„ï¼Œåªåœ¨IE5ä»¥ä¸Šæ‰èƒ½è¢«è¯†åˆ«ï¼Œè€Œlinkæ˜¯XHTMLæ ‡ç­¾ï¼Œæ— å…¼å®¹é—®é¢˜; ä»‹ç»ä¸€ä¸‹ä½ å¯¹æµè§ˆå™¨å†…æ ¸çš„ç†è§£ï¼Ÿ ä¸»è¦åˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ¸²æŸ“å¼•æ“(layout engineeræˆ–Rendering Engine)å’ŒJSå¼•æ“ã€‚ æ¸²æŸ“å¼•æ“ï¼šè´Ÿè´£å–å¾—ç½‘é¡µçš„å†…å®¹ï¼ˆHTMLã€XMLã€å›¾åƒç­‰ç­‰ï¼‰ã€æ•´ç†è®¯æ¯ï¼ˆä¾‹å¦‚åŠ å…¥CSSç­‰ï¼‰ï¼Œä»¥åŠè®¡ç®—ç½‘é¡µçš„æ˜¾ç¤ºæ–¹å¼ï¼Œç„¶åä¼šè¾“å‡ºè‡³æ˜¾ç¤ºå™¨æˆ–æ‰“å°æœºã€‚æµè§ˆå™¨çš„å†…æ ¸çš„ä¸åŒå¯¹äºç½‘é¡µçš„è¯­æ³•è§£é‡Šä¼šæœ‰ä¸åŒï¼Œæ‰€ä»¥æ¸²æŸ“çš„æ•ˆæœä¹Ÿä¸ç›¸åŒã€‚æ‰€æœ‰ç½‘é¡µæµè§ˆå™¨ã€ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ä»¥åŠå…¶å®ƒéœ€è¦ç¼–è¾‘ã€æ˜¾ç¤ºç½‘ç»œå†…å®¹çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦å†…æ ¸ã€‚ JSå¼•æ“åˆ™ï¼šè§£æå’Œæ‰§è¡Œjavascriptæ¥å®ç°ç½‘é¡µçš„åŠ¨æ€æ•ˆæœã€‚ æœ€å¼€å§‹æ¸²æŸ“å¼•æ“å’ŒJSå¼•æ“å¹¶æ²¡æœ‰åŒºåˆ†çš„å¾ˆæ˜ç¡®ï¼Œåæ¥JSå¼•æ“è¶Šæ¥è¶Šç‹¬ç«‹ï¼Œå†…æ ¸å°±å€¾å‘äºåªæŒ‡æ¸²æŸ“å¼•æ“ã€‚ å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›ï¼Ÿ Tridentå†…æ ¸ï¼šIE,MaxThon,TT,The World,360,æœç‹—æµè§ˆå™¨ç­‰ã€‚[åˆç§°MSHTML] Geckoå†…æ ¸ï¼šNetscape6åŠä»¥ä¸Šç‰ˆæœ¬ï¼ŒFF,MozillaSuite/SeaMonkeyç­‰ Prestoå†…æ ¸ï¼šOpera7åŠä»¥ä¸Šã€‚ [Operaå†…æ ¸åŸä¸ºï¼šPrestoï¼Œç°ä¸ºï¼šBlink;] Webkitå†…æ ¸ï¼šSafari,Chromeç­‰ã€‚ [ Chromeçš„ï¼šBlinkï¼ˆWebKitçš„åˆ†æ”¯ï¼‰] è¯¦ç»†æ–‡ç« ï¼š[æµè§ˆå™¨å†…æ ¸çš„è§£æå’Œå¯¹æ¯”](http://www.cnblogs.com/fullhouse/archive/2011/12/19/2293455.html) html5æœ‰å“ªäº›æ–°ç‰¹æ€§ã€ç§»é™¤äº†é‚£äº›å…ƒç´ ï¼Ÿå¦‚ä½•å¤„ç†HTML5æ–°æ ‡ç­¾çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Ÿå¦‚ä½•åŒºåˆ† HTML å’ŒHTML5ï¼Ÿ * HTML5 ç°åœ¨å·²ç»ä¸æ˜¯ SGML çš„å­é›†ï¼Œä¸»è¦æ˜¯å…³äºå›¾åƒï¼Œä½ç½®ï¼Œå­˜å‚¨ï¼Œå¤šä»»åŠ¡ç­‰åŠŸèƒ½çš„å¢åŠ ã€‚ ç»˜ç”» canvas; ç”¨äºåª’ä»‹å›æ”¾çš„ video å’Œ audio å…ƒç´ ; æœ¬åœ°ç¦»çº¿å­˜å‚¨ localStorage é•¿æœŸå­˜å‚¨æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±; sessionStorage çš„æ•°æ®åœ¨æµè§ˆå™¨å…³é—­åè‡ªåŠ¨åˆ é™¤; è¯­æ„åŒ–æ›´å¥½çš„å†…å®¹å…ƒç´ ï¼Œæ¯”å¦‚ articleã€footerã€headerã€navã€section; è¡¨å•æ§ä»¶ï¼Œcalendarã€dateã€timeã€emailã€urlã€search; æ–°çš„æŠ€æœ¯webworker, websocket, Geolocation; ç§»é™¤çš„å…ƒç´ ï¼š çº¯è¡¨ç°çš„å…ƒç´ ï¼šbasefontï¼Œbigï¼Œcenterï¼Œfont, sï¼Œstrikeï¼Œttï¼Œu; å¯¹å¯ç”¨æ€§äº§ç”Ÿè´Ÿé¢å½±å“çš„å…ƒç´ ï¼šframeï¼Œframesetï¼Œnoframesï¼› * æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼š IE8/IE7/IE6æ”¯æŒé€šè¿‡document.createElementæ–¹æ³•äº§ç”Ÿçš„æ ‡ç­¾ï¼Œ å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‰¹æ€§è®©è¿™äº›æµè§ˆå™¨æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼Œ æµè§ˆå™¨æ”¯æŒæ–°æ ‡ç­¾åï¼Œè¿˜éœ€è¦æ·»åŠ æ ‡ç­¾é»˜è®¤çš„æ ·å¼ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æˆç†Ÿçš„æ¡†æ¶ã€æ¯”å¦‚html5shim; &lt;!--[if lt IE 9]&gt; &lt;script&gt; src=&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;&lt;/script&gt; &lt;![endif]--&gt; * å¦‚ä½•åŒºåˆ†HTML5ï¼š DOCTYPEå£°æ˜\\æ–°å¢çš„ç»“æ„å…ƒç´ \\åŠŸèƒ½å…ƒç´  ç®€è¿°ä¸€ä¸‹ä½ å¯¹HTMLè¯­ä¹‰åŒ–çš„ç†è§£ï¼Ÿ ç”¨æ­£ç¡®çš„æ ‡ç­¾åšæ­£ç¡®çš„äº‹æƒ…ã€‚ htmlè¯­ä¹‰åŒ–è®©é¡µé¢çš„å†…å®¹ç»“æ„åŒ–ï¼Œç»“æ„æ›´æ¸…æ™°ï¼Œä¾¿äºå¯¹æµè§ˆå™¨ã€æœç´¢å¼•æ“è§£æ; å³ä½¿åœ¨æ²¡æœ‰æ ·å¼CSSæƒ…å†µä¸‹ä¹Ÿä»¥ä¸€ç§æ–‡æ¡£æ ¼å¼æ˜¾ç¤ºï¼Œå¹¶ä¸”æ˜¯å®¹æ˜“é˜…è¯»çš„; æœç´¢å¼•æ“çš„çˆ¬è™«ä¹Ÿä¾èµ–äºHTMLæ ‡è®°æ¥ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ï¼Œåˆ©äºSEO; ä½¿é˜…è¯»æºä»£ç çš„äººå¯¹ç½‘ç«™æ›´å®¹æ˜“å°†ç½‘ç«™åˆ†å—ï¼Œä¾¿äºé˜…è¯»ç»´æŠ¤ç†è§£ã€‚ HTML5çš„ç¦»çº¿å‚¨å­˜æ€ä¹ˆä½¿ç”¨ï¼Œå·¥ä½œåŸç†èƒ½ä¸èƒ½è§£é‡Šä¸€ä¸‹ï¼Ÿ åœ¨ç”¨æˆ·æ²¡æœ‰ä¸å› ç‰¹ç½‘è¿æ¥æ—¶ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ç«™ç‚¹æˆ–åº”ç”¨ï¼Œåœ¨ç”¨æˆ·ä¸å› ç‰¹ç½‘è¿æ¥æ—¶ï¼Œæ›´æ–°ç”¨æˆ·æœºå™¨ä¸Šçš„ç¼“å­˜æ–‡ä»¶ã€‚ åŸç†ï¼šHTML5çš„ç¦»çº¿å­˜å‚¨æ˜¯åŸºäºä¸€ä¸ªæ–°å»ºçš„.appcacheæ–‡ä»¶çš„ç¼“å­˜æœºåˆ¶(ä¸æ˜¯å­˜å‚¨æŠ€æœ¯)ï¼Œé€šè¿‡è¿™ä¸ªæ–‡ä»¶ä¸Šçš„è§£ææ¸…å•ç¦»çº¿å­˜å‚¨èµ„æºï¼Œè¿™äº›èµ„æºå°±ä¼šåƒcookieä¸€æ ·è¢«å­˜å‚¨äº†ä¸‹æ¥ã€‚ä¹‹åå½“ç½‘ç»œåœ¨å¤„äºç¦»çº¿çŠ¶æ€ä¸‹æ—¶ï¼Œæµè§ˆå™¨ä¼šé€šè¿‡è¢«ç¦»çº¿å­˜å‚¨çš„æ•°æ®è¿›è¡Œé¡µé¢å±•ç¤ºã€‚ å¦‚ä½•ä½¿ç”¨ï¼š 1ã€é¡µé¢å¤´éƒ¨åƒä¸‹é¢ä¸€æ ·åŠ å…¥ä¸€ä¸ªmanifestçš„å±æ€§ï¼› 2ã€åœ¨cache.manifestæ–‡ä»¶çš„ç¼–å†™ç¦»çº¿å­˜å‚¨çš„èµ„æºï¼› CACHE MANIFEST #v0.11 CACHE: js/app.js css/style.css NETWORK: resourse/logo.png FALLBACK: / /offline.html 3ã€åœ¨ç¦»çº¿çŠ¶æ€æ—¶ï¼Œæ“ä½œwindow.applicationCacheè¿›è¡Œéœ€æ±‚å®ç°ã€‚ è¯¦ç»†çš„ä½¿ç”¨è¯·å‚è€ƒï¼š [HTML5 ç¦»çº¿ç¼“å­˜-manifestç®€ä»‹](http://yanhaijing.com/html/2014/12/28/html5-manifest/) [æœ‰è¶£çš„HTML5ï¼šç¦»çº¿å­˜å‚¨](http://segmentfault.com/a/1190000000732617) æµè§ˆå™¨æ˜¯æ€ä¹ˆå¯¹HTML5çš„ç¦»çº¿å‚¨å­˜èµ„æºè¿›è¡Œç®¡ç†å’ŒåŠ è½½çš„å‘¢ï¼Ÿ åœ¨çº¿çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å‘ç°htmlå¤´éƒ¨æœ‰manifestå±æ€§ï¼Œå®ƒä¼šè¯·æ±‚manifestæ–‡ä»¶ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è®¿é—®appï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šæ ¹æ®manifestæ–‡ä»¶çš„å†…å®¹ä¸‹è½½ç›¸åº”çš„èµ„æºå¹¶ä¸”è¿›è¡Œç¦»çº¿å­˜å‚¨ã€‚å¦‚æœå·²ç»è®¿é—®è¿‡appå¹¶ä¸”èµ„æºå·²ç»ç¦»çº¿å­˜å‚¨äº†ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šä½¿ç”¨ç¦»çº¿çš„èµ„æºåŠ è½½é¡µé¢ï¼Œç„¶åæµè§ˆå™¨ä¼šå¯¹æ¯”æ–°çš„manifestæ–‡ä»¶ä¸æ—§çš„manifestæ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¸åšä»»ä½•æ“ä½œï¼Œå¦‚æœæ–‡ä»¶æ”¹å˜äº†ï¼Œé‚£ä¹ˆå°±ä¼šé‡æ–°ä¸‹è½½æ–‡ä»¶ä¸­çš„èµ„æºå¹¶è¿›è¡Œç¦»çº¿å­˜å‚¨ã€‚ ç¦»çº¿çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å°±ç›´æ¥ä½¿ç”¨ç¦»çº¿å­˜å‚¨çš„èµ„æºã€‚ è¯¦ç»†è¯·å‚è€ƒï¼šæœ‰è¶£çš„HTML5ï¼šç¦»çº¿å­˜å‚¨ è¯·æè¿°ä¸€ä¸‹ cookiesï¼ŒsessionStorage å’Œ localStorage çš„åŒºåˆ«ï¼Ÿ cookieæ˜¯ç½‘ç«™ä¸ºäº†æ ‡ç¤ºç”¨æˆ·èº«ä»½è€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ï¼ˆClient Sideï¼‰ä¸Šçš„æ•°æ®ï¼ˆé€šå¸¸ç»è¿‡åŠ å¯†ï¼‰ã€‚ cookieæ•°æ®å§‹ç»ˆåœ¨åŒæºçš„httpè¯·æ±‚ä¸­æºå¸¦ï¼ˆå³ä½¿ä¸éœ€è¦ï¼‰ï¼Œè®°ä¼šåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨é—´æ¥å›ä¼ é€’ã€‚ sessionStorageå’ŒlocalStorageä¸ä¼šè‡ªåŠ¨æŠŠæ•°æ®å‘ç»™æœåŠ¡å™¨ï¼Œä»…åœ¨æœ¬åœ°ä¿å­˜ã€‚ å­˜å‚¨å¤§å°ï¼š cookieæ•°æ®å¤§å°ä¸èƒ½è¶…è¿‡4kã€‚ sessionStorageå’ŒlocalStorage è™½ç„¶ä¹Ÿæœ‰å­˜å‚¨å¤§å°çš„é™åˆ¶ï¼Œä½†æ¯”cookieå¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ°5Mæˆ–æ›´å¤§ã€‚ æœ‰æœŸæ—¶é—´ï¼š localStorage å­˜å‚¨æŒä¹…æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±é™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼› sessionStorage æ•°æ®åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­åè‡ªåŠ¨åˆ é™¤ã€‚ cookie è®¾ç½®çš„cookieè¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿çª—å£æˆ–æµè§ˆå™¨å…³é—­ iframeæœ‰é‚£äº›ç¼ºç‚¹ï¼Ÿ *iframeä¼šé˜»å¡ä¸»é¡µé¢çš„Onloadäº‹ä»¶ï¼› *æœç´¢å¼•æ“çš„æ£€ç´¢ç¨‹åºæ— æ³•è§£è¯»è¿™ç§é¡µé¢ï¼Œä¸åˆ©äºSEO; *iframeå’Œä¸»é¡µé¢å…±äº«è¿æ¥æ± ï¼Œè€Œæµè§ˆå™¨å¯¹ç›¸åŒåŸŸçš„è¿æ¥æœ‰é™åˆ¶ï¼Œæ‰€ä»¥ä¼šå½±å“é¡µé¢çš„å¹¶è¡ŒåŠ è½½ã€‚ ä½¿ç”¨iframeä¹‹å‰éœ€è¦è€ƒè™‘è¿™ä¸¤ä¸ªç¼ºç‚¹ã€‚å¦‚æœéœ€è¦ä½¿ç”¨iframeï¼Œæœ€å¥½æ˜¯é€šè¿‡javascript åŠ¨æ€ç»™iframeæ·»åŠ srcå±æ€§å€¼ï¼Œè¿™æ ·å¯ä»¥ç»•å¼€ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ã€‚ Labelçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ labelæ ‡ç­¾æ¥å®šä¹‰è¡¨å•æ§åˆ¶é—´çš„å…³ç³»,å½“ç”¨æˆ·é€‰æ‹©è¯¥æ ‡ç­¾æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°†ç„¦ç‚¹è½¬åˆ°å’Œæ ‡ç­¾ç›¸å…³çš„è¡¨å•æ§ä»¶ä¸Šã€‚ &lt;label for=&quot;Name&quot;&gt;Number:&lt;/label&gt; &lt;input type=â€œtextâ€œname=&quot;Name&quot; id=&quot;Name&quot;/&gt; &lt;label&gt;Date:&lt;input type=&quot;text&quot; name=&quot;B&quot;/&gt;&lt;/label&gt; HTML5çš„formå¦‚ä½•å…³é—­è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ï¼Ÿ ç»™ä¸æƒ³è¦æç¤ºçš„ form æˆ–æŸä¸ª input è®¾ç½®ä¸º autocomplete=offã€‚ å¦‚ä½•å®ç°æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡? (é˜¿é‡Œ) WebSocketã€SharedWorkerï¼› ä¹Ÿå¯ä»¥è°ƒç”¨localstorgeã€cookiesç­‰æœ¬åœ°å­˜å‚¨æ–¹å¼ï¼› localstorgeå¦ä¸€ä¸ªæµè§ˆä¸Šä¸‹æ–‡é‡Œè¢«æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤æ—¶ï¼Œå®ƒéƒ½ä¼šè§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ æˆ‘ä»¬é€šè¿‡ç›‘å¬äº‹ä»¶ï¼Œæ§åˆ¶å®ƒçš„å€¼æ¥è¿›è¡Œé¡µé¢ä¿¡æ¯é€šä¿¡ï¼› æ³¨æ„quirksï¼šSafari åœ¨æ— ç—•æ¨¡å¼ä¸‹è®¾ç½®localstorgeå€¼æ—¶ä¼šæŠ›å‡º QuotaExceededError çš„å¼‚å¸¸ï¼› webSocketå¦‚ä½•å…¼å®¹ä½æµè§ˆå™¨ï¼Ÿ(é˜¿é‡Œ) Adobe Flash Socket ã€ ActiveX HTMLFile (IE) ã€ åŸºäº multipart ç¼–ç å‘é€ XHR ã€ åŸºäºé•¿è½®è¯¢çš„ XHR é¡µé¢å¯è§æ€§ï¼ˆPage Visibility APIï¼‰ å¯ä»¥æœ‰å“ªäº›ç”¨é€”ï¼Ÿ é€šè¿‡ visibilityState çš„å€¼æ£€æµ‹é¡µé¢å½“å‰æ˜¯å¦å¯è§ï¼Œä»¥åŠæ‰“å¼€ç½‘é¡µçš„æ—¶é—´ç­‰; åœ¨é¡µé¢è¢«åˆ‡æ¢åˆ°å…¶ä»–åå°è¿›ç¨‹çš„æ—¶å€™ï¼Œè‡ªåŠ¨æš‚åœéŸ³ä¹æˆ–è§†é¢‘çš„æ’­æ”¾ï¼› å¦‚ä½•åœ¨é¡µé¢ä¸Šå®ç°ä¸€ä¸ªåœ†å½¢çš„å¯ç‚¹å‡»åŒºåŸŸï¼Ÿ 1ã€map+areaæˆ–è€…svg 2ã€border-radius 3ã€çº¯jså®ç° éœ€è¦æ±‚ä¸€ä¸ªç‚¹åœ¨ä¸åœ¨åœ†ä¸Šç®€å•ç®—æ³•ã€è·å–é¼ æ ‡åæ ‡ç­‰ç­‰ å®ç°ä¸ä½¿ç”¨ border ç”»å‡º1pxé«˜çš„çº¿ï¼Œåœ¨ä¸åŒæµè§ˆå™¨çš„æ ‡å‡†æ¨¡å¼ä¸æ€ªå¼‚æ¨¡å¼ä¸‹éƒ½èƒ½ä¿æŒä¸€è‡´çš„æ•ˆæœã€‚ &lt;div style=&quot;height:1px;overflow:hidden;background:red&quot;&gt;&lt;/div&gt; ç½‘é¡µéªŒè¯ç æ˜¯å¹²å˜›çš„ï¼Œæ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆå®‰å…¨é—®é¢˜ã€‚ åŒºåˆ†ç”¨æˆ·æ˜¯è®¡ç®—æœºè¿˜æ˜¯äººçš„å…¬å…±å…¨è‡ªåŠ¨ç¨‹åºã€‚å¯ä»¥é˜²æ­¢æ¶æ„ç ´è§£å¯†ç ã€åˆ·ç¥¨ã€è®ºå›çŒæ°´ï¼› æœ‰æ•ˆé˜²æ­¢é»‘å®¢å¯¹æŸä¸€ä¸ªç‰¹å®šæ³¨å†Œç”¨æˆ·ç”¨ç‰¹å®šç¨‹åºæš´åŠ›ç ´è§£æ–¹å¼è¿›è¡Œä¸æ–­çš„ç™»é™†å°è¯•ã€‚ titleä¸h1çš„åŒºåˆ«ã€bä¸strongçš„åŒºåˆ«ã€iä¸emçš„åŒºåˆ«ï¼Ÿ titleå±æ€§æ²¡æœ‰æ˜ç¡®æ„ä¹‰åªè¡¨ç¤ºæ˜¯ä¸ªæ ‡é¢˜ï¼ŒH1åˆ™è¡¨ç¤ºå±‚æ¬¡æ˜ç¡®çš„æ ‡é¢˜ï¼Œå¯¹é¡µé¢ä¿¡æ¯çš„æŠ“å–ä¹Ÿæœ‰å¾ˆå¤§çš„å½±å“ï¼› strongæ˜¯æ ‡æ˜é‡ç‚¹å†…å®¹ï¼Œæœ‰è¯­æ°”åŠ å¼ºçš„å«ä¹‰ï¼Œä½¿ç”¨é˜…è¯»è®¾å¤‡é˜…è¯»ç½‘ç»œæ—¶ï¼š&lt;strong&gt;ä¼šé‡è¯»ï¼Œè€Œ&lt;B&gt;æ˜¯å±•ç¤ºå¼ºè°ƒå†…å®¹ã€‚ iå†…å®¹å±•ç¤ºä¸ºæ–œä½“ï¼Œemè¡¨ç¤ºå¼ºè°ƒçš„æ–‡æœ¬ï¼› Physical Style Elements -- è‡ªç„¶æ ·å¼æ ‡ç­¾ b, i, u, s, pre Semantic Style Elements -- è¯­ä¹‰æ ·å¼æ ‡ç­¾ strong, em, ins, del, code åº”è¯¥å‡†ç¡®ä½¿ç”¨è¯­ä¹‰æ ·å¼æ ‡ç­¾, ä½†ä¸èƒ½æ»¥ç”¨, å¦‚æœä¸èƒ½ç¡®å®šæ—¶é¦–é€‰ä½¿ç”¨è‡ªç„¶æ ·å¼æ ‡ç­¾ã€‚ CSS ä»‹ç»ä¸€ä¸‹æ ‡å‡†çš„CSSçš„ç›’å­æ¨¡å‹ï¼Ÿä½ç‰ˆæœ¬IEçš„ç›’å­æ¨¡å‹æœ‰ä»€ä¹ˆä¸åŒçš„ï¼Ÿ ï¼ˆ1ï¼‰æœ‰ä¸¤ç§ï¼Œ IE ç›’å­æ¨¡å‹ã€W3C ç›’å­æ¨¡å‹ï¼› ï¼ˆ2ï¼‰ç›’æ¨¡å‹ï¼š å†…å®¹(content)ã€å¡«å……(padding)ã€è¾¹ç•Œ(margin)ã€ è¾¹æ¡†(border)ï¼› ï¼ˆ3ï¼‰åŒº åˆ«ï¼š IEçš„contentéƒ¨åˆ†æŠŠ border å’Œ paddingè®¡ç®—äº†è¿›å»; CSSé€‰æ‹©ç¬¦æœ‰å“ªäº›ï¼Ÿå“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿ * 1.idé€‰æ‹©å™¨ï¼ˆ # myidï¼‰ 2.ç±»é€‰æ‹©å™¨ï¼ˆ.myclassnameï¼‰ 3.æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆdiv, h1, pï¼‰ 4.ç›¸é‚»é€‰æ‹©å™¨ï¼ˆh1 + pï¼‰ 5.å­é€‰æ‹©å™¨ï¼ˆul &gt; liï¼‰ 6.åä»£é€‰æ‹©å™¨ï¼ˆli aï¼‰ 7.é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ * ï¼‰ 8.å±æ€§é€‰æ‹©å™¨ï¼ˆa[rel = &quot;external&quot;]ï¼‰ 9.ä¼ªç±»é€‰æ‹©å™¨ï¼ˆa:hover, li:nth-childï¼‰ * å¯ç»§æ‰¿çš„æ ·å¼ï¼š font-size font-family color, UL LI DL DD DT; * ä¸å¯ç»§æ‰¿çš„æ ·å¼ï¼šborder padding margin width height ; CSSä¼˜å…ˆçº§ç®—æ³•å¦‚ä½•è®¡ç®—ï¼Ÿ * ä¼˜å…ˆçº§å°±è¿‘åŸåˆ™ï¼ŒåŒæƒé‡æƒ…å†µä¸‹æ ·å¼å®šä¹‰æœ€è¿‘è€…ä¸ºå‡†; * è½½å…¥æ ·å¼ä»¥æœ€åè½½å…¥çš„å®šä½ä¸ºå‡†; ä¼˜å…ˆçº§ä¸º: åŒæƒé‡: å†…è”æ ·å¼è¡¨ï¼ˆæ ‡ç­¾å†…éƒ¨ï¼‰&gt; åµŒå…¥æ ·å¼è¡¨ï¼ˆå½“å‰æ–‡ä»¶ä¸­ï¼‰&gt; å¤–éƒ¨æ ·å¼è¡¨ï¼ˆå¤–éƒ¨æ–‡ä»¶ä¸­ï¼‰ã€‚ !important &gt; id &gt; class &gt; tag important æ¯” å†…è”ä¼˜å…ˆçº§é«˜ CSS3æ–°å¢ä¼ªç±»æœ‰é‚£äº›ï¼Ÿ ä¸¾ä¾‹ï¼š p:first-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„é¦–ä¸ª &lt;p&gt; å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚ p:last-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„æœ€å &lt;p&gt; å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚ p:only-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ å”¯ä¸€çš„ &lt;p&gt; å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚ p:only-child é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„å”¯ä¸€å­å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚ p:nth-child(2) é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„ç¬¬äºŒä¸ªå­å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚ :after åœ¨å…ƒç´ ä¹‹å‰æ·»åŠ å†…å®¹,ä¹Ÿå¯ä»¥ç”¨æ¥åšæ¸…é™¤æµ®åŠ¨ã€‚ :before åœ¨å…ƒç´ ä¹‹åæ·»åŠ å†…å®¹ :enabled :disabled æ§åˆ¶è¡¨å•æ§ä»¶çš„ç¦ç”¨çŠ¶æ€ã€‚ :checked å•é€‰æ¡†æˆ–å¤é€‰æ¡†è¢«é€‰ä¸­ã€‚ å¦‚ä½•å±…ä¸­divï¼Ÿ * æ°´å¹³å±…ä¸­ï¼šç»™divè®¾ç½®ä¸€ä¸ªå®½åº¦ï¼Œç„¶åæ·»åŠ margin:0 autoå±æ€§ div{ width:200px; margin:0 auto; } * è®©ç»å¯¹å®šä½çš„divå±…ä¸­ div { position: absolute; width: 300px; height: 300px; margin: auto; top: 0; left: 0; bottom: 0; right: 0; background-color: pink; /* æ–¹ä¾¿çœ‹æ•ˆæœ */ } * æ°´å¹³å‚ç›´å±…ä¸­ä¸€ ç¡®å®šå®¹å™¨çš„å®½é«˜ å®½500 é«˜ 300 çš„å±‚ è®¾ç½®å±‚çš„å¤–è¾¹è· div { position: relative; /* ç›¸å¯¹å®šä½æˆ–ç»å¯¹å®šä½å‡å¯ */ width:500px; height:300px; top: 50%; left: 50%; margin: -150px 0 0 -250px; /* å¤–è¾¹è·ä¸ºè‡ªèº«å®½é«˜çš„ä¸€åŠ */ background-color: pink; /* æ–¹ä¾¿çœ‹æ•ˆæœ */ } * æ°´å¹³å‚ç›´å±…ä¸­äºŒ æœªçŸ¥å®¹å™¨çš„å®½é«˜ï¼Œåˆ©ç”¨ `transform` å±æ€§ div { position: absolute; /* ç›¸å¯¹å®šä½æˆ–ç»å¯¹å®šä½å‡å¯ */ width:500px; height:300px; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: pink; /* æ–¹ä¾¿çœ‹æ•ˆæœ */ } * æ°´å¹³å‚ç›´å±…ä¸­ä¸‰ åˆ©ç”¨ flex å¸ƒå±€ å®é™…ä½¿ç”¨æ—¶åº”è€ƒè™‘å…¼å®¹æ€§ .container { display: flex; align-items: center; /* å‚ç›´å±…ä¸­ */ justify-content: center; /* æ°´å¹³å±…ä¸­ */ } .container div { width: 100px; height: 100px; background-color: pink; /* æ–¹ä¾¿çœ‹æ•ˆæœ */ } displayæœ‰å“ªäº›å€¼ï¼Ÿè¯´æ˜ä»–ä»¬çš„ä½œç”¨ã€‚ block å—ç±»å‹ã€‚é»˜è®¤å®½åº¦ä¸ºçˆ¶å…ƒç´ å®½åº¦ï¼Œå¯è®¾ç½®å®½é«˜ï¼Œæ¢è¡Œæ˜¾ç¤ºã€‚ none ç¼ºçœå€¼ã€‚è±¡è¡Œå†…å…ƒç´ ç±»å‹ä¸€æ ·æ˜¾ç¤ºã€‚ inline è¡Œå†…å…ƒç´ ç±»å‹ã€‚é»˜è®¤å®½åº¦ä¸ºå†…å®¹å®½åº¦ï¼Œä¸å¯è®¾ç½®å®½é«˜ï¼ŒåŒè¡Œæ˜¾ç¤ºã€‚ inline-block é»˜è®¤å®½åº¦ä¸ºå†…å®¹å®½åº¦ï¼Œå¯ä»¥è®¾ç½®å®½é«˜ï¼ŒåŒè¡Œæ˜¾ç¤ºã€‚ list-item è±¡å—ç±»å‹å…ƒç´ ä¸€æ ·æ˜¾ç¤ºï¼Œå¹¶æ·»åŠ æ ·å¼åˆ—è¡¨æ ‡è®°ã€‚ table æ­¤å…ƒç´ ä¼šä½œä¸ºå—çº§è¡¨æ ¼æ¥æ˜¾ç¤ºã€‚ inherit è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ display å±æ€§çš„å€¼ã€‚ positionçš„å€¼relativeå’Œabsoluteå®šä½åŸç‚¹æ˜¯ï¼Ÿ absolute ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºå€¼ä¸ä¸º staticçš„ç¬¬ä¸€ä¸ªçˆ¶å…ƒç´ è¿›è¡Œå®šä½ã€‚ fixed ï¼ˆè€IEä¸æ”¯æŒï¼‰ ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½ã€‚ relative ç”Ÿæˆç›¸å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºå…¶æ­£å¸¸ä½ç½®è¿›è¡Œå®šä½ã€‚ static é»˜è®¤å€¼ã€‚æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­ï¼ˆå¿½ç•¥ top, bottom, left, right z-index å£°æ˜ï¼‰ã€‚ inherit è§„å®šä»çˆ¶å…ƒç´ ç»§æ‰¿ position å±æ€§çš„å€¼ã€‚ CSS3æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ æ–°å¢å„ç§CSSé€‰æ‹©å™¨ ï¼ˆ: not(.input)ï¼šæ‰€æœ‰ class ä¸æ˜¯â€œinputâ€çš„èŠ‚ç‚¹ï¼‰ åœ†è§’ ï¼ˆborder-radius:8pxï¼‰ å¤šåˆ—å¸ƒå±€ ï¼ˆmulti-column layoutï¼‰ é˜´å½±å’Œåå°„ ï¼ˆShadow\\Reflectï¼‰ æ–‡å­—ç‰¹æ•ˆ ï¼ˆtext-shadowã€ï¼‰ æ–‡å­—æ¸²æŸ“ ï¼ˆText-decorationï¼‰ çº¿æ€§æ¸å˜ ï¼ˆgradientï¼‰ æ—‹è½¬ ï¼ˆtransformï¼‰ ç¼©æ”¾,å®šä½,å€¾æ–œ,åŠ¨ç”»,å¤šèƒŒæ™¯ ä¾‹å¦‚:transform:\\scale(0.85,0.90)\\ translate(0px,-30px)\\ skew(-9deg,0deg)\\Animation: è¯·è§£é‡Šä¸€ä¸‹CSS3çš„Flexboxï¼ˆå¼¹æ€§ç›’å¸ƒå±€æ¨¡å‹ï¼‰,ä»¥åŠé€‚ç”¨åœºæ™¯ï¼Ÿ ä¸€ä¸ªç”¨äºé¡µé¢å¸ƒå±€çš„å…¨æ–°CSS3åŠŸèƒ½ï¼ŒFlexboxå¯ä»¥æŠŠåˆ—è¡¨æ”¾åœ¨åŒä¸€ä¸ªæ–¹å‘ï¼ˆä»ä¸Šåˆ°ä¸‹æ’åˆ—ï¼Œä»å·¦åˆ°å³ï¼‰ï¼Œå¹¶è®©åˆ—è¡¨èƒ½å»¶ä¼¸åˆ°å ç”¨å¯ç”¨çš„ç©ºé—´ã€‚ è¾ƒä¸ºå¤æ‚çš„å¸ƒå±€è¿˜å¯ä»¥é€šè¿‡åµŒå¥—ä¸€ä¸ªä¼¸ç¼©å®¹å™¨ï¼ˆflex containerï¼‰æ¥å®ç°ã€‚ é‡‡ç”¨Flexå¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸ºFlexå®¹å™¨ï¼ˆflex containerï¼‰ï¼Œç®€ç§°&quot;å®¹å™¨&quot;ã€‚ å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸ºFlexé¡¹ç›®ï¼ˆflex itemï¼‰ï¼Œç®€ç§°&quot;é¡¹ç›®&quot;ã€‚ å¸¸è§„å¸ƒå±€æ˜¯åŸºäºå—å’Œå†…è”æµæ–¹å‘ï¼Œè€ŒFlexå¸ƒå±€æ˜¯åŸºäºflex-flowæµå¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨æ¥åšå±€ä¸­ï¼Œèƒ½å¯¹ä¸åŒå±å¹•å¤§å°è‡ªé€‚åº”ã€‚ åœ¨å¸ƒå±€ä¸Šæœ‰äº†æ¯”ä»¥å‰æ›´åŠ çµæ´»çš„ç©ºé—´ã€‚ å…·ä½“ï¼šhttp://www.w3cplus.com/css3/flexbox-basics.html ç”¨çº¯CSSåˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ æŠŠä¸Šã€å·¦ã€å³ä¸‰æ¡è¾¹éšè—æ‰ï¼ˆé¢œè‰²è®¾ä¸º transparentï¼‰ #demo { width: 0; height: 0; border-width: 20px; border-style: solid; border-color: transparent transparent red transparent; } ä¸€ä¸ªæ»¡å± å“ å­—å¸ƒå±€ å¦‚ä½•è®¾è®¡? ç®€å•çš„æ–¹å¼ï¼š ä¸Šé¢çš„divå®½100%ï¼Œ ä¸‹é¢çš„ä¸¤ä¸ªdivåˆ†åˆ«å®½50%ï¼Œ ç„¶åç”¨floatæˆ–è€…inlineä½¿å…¶ä¸æ¢è¡Œå³å¯ csså¤šåˆ—ç­‰é«˜å¦‚ä½•å®ç°ï¼Ÿ åˆ©ç”¨padding-bottom|margin-bottomæ­£è´Ÿå€¼ç›¸æŠµï¼› è®¾ç½®çˆ¶å®¹å™¨è®¾ç½®è¶…å‡ºéšè—ï¼ˆoverflow:hiddenï¼‰ï¼Œè¿™æ ·å­çˆ¶å®¹å™¨çš„é«˜åº¦å°±è¿˜æ˜¯å®ƒé‡Œé¢çš„åˆ—æ²¡æœ‰è®¾å®špadding-bottomæ—¶çš„é«˜åº¦ï¼Œ å½“å®ƒé‡Œé¢çš„ä»» ä¸€åˆ—é«˜åº¦å¢åŠ äº†ï¼Œåˆ™çˆ¶å®¹å™¨çš„é«˜åº¦è¢«æ’‘åˆ°é‡Œé¢æœ€é«˜é‚£åˆ—çš„é«˜åº¦ï¼Œ å…¶ä»–æ¯”è¿™åˆ—çŸ®çš„åˆ—ä¼šç”¨å®ƒä»¬çš„padding-bottomè¡¥å¿è¿™éƒ¨åˆ†é«˜åº¦å·®ã€‚ ç»å¸¸é‡åˆ°çš„æµè§ˆå™¨çš„å…¼å®¹æ€§æœ‰å“ªäº›ï¼ŸåŸå› ï¼Œè§£å†³æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œå¸¸ç”¨hackçš„æŠ€å·§ ï¼Ÿ * png24ä½çš„å›¾ç‰‡åœ¨iE6æµè§ˆå™¨ä¸Šå‡ºç°èƒŒæ™¯ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åšæˆPNG8. * æµè§ˆå™¨é»˜è®¤çš„marginå’Œpaddingä¸åŒã€‚è§£å†³æ–¹æ¡ˆæ˜¯åŠ ä¸€ä¸ªå…¨å±€çš„*{margin:0;padding:0;}æ¥ç»Ÿä¸€ã€‚ * IE6åŒè¾¹è·bug:å—å±æ€§æ ‡ç­¾floatåï¼Œåˆæœ‰æ¨ªè¡Œçš„marginæƒ…å†µä¸‹ï¼Œåœ¨ie6æ˜¾ç¤ºmarginæ¯”è®¾ç½®çš„å¤§ã€‚ æµ®åŠ¨ieäº§ç”Ÿçš„åŒå€è·ç¦» #box{ float:left; width:10px; margin:0 0 0 100px;} è¿™ç§æƒ…å†µä¹‹ä¸‹IEä¼šäº§ç”Ÿ20pxçš„è·ç¦»ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨floatçš„æ ‡ç­¾æ ·å¼æ§åˆ¶ä¸­åŠ å…¥ â€”â€”_display:inline;å°†å…¶è½¬åŒ–ä¸ºè¡Œå†…å±æ€§ã€‚(_è¿™ä¸ªç¬¦å·åªæœ‰ie6ä¼šè¯†åˆ«) æ¸è¿›è¯†åˆ«çš„æ–¹å¼ï¼Œä»æ€»ä½“ä¸­é€æ¸æ’é™¤å±€éƒ¨ã€‚ é¦–å…ˆï¼Œå·§å¦™çš„ä½¿ç”¨â€œ\\9â€è¿™ä¸€æ ‡è®°ï¼Œå°†IEæ¸¸è§ˆå™¨ä»æ‰€æœ‰æƒ…å†µä¸­åˆ†ç¦»å‡ºæ¥ã€‚ æ¥ç€ï¼Œå†æ¬¡ä½¿ç”¨â€œ+â€å°†IE8å’ŒIE7ã€IE6åˆ†ç¦»å¼€æ¥ï¼Œè¿™æ ·IE8å·²ç»ç‹¬ç«‹è¯†åˆ«ã€‚ css .bb{ background-color:red;/*æ‰€æœ‰è¯†åˆ«*/ background-color:#00deff\\9; /*IE6ã€7ã€8è¯†åˆ«*/ +background-color:#a200ff;/*IE6ã€7è¯†åˆ«*/ _background-color:#1e0bd1;/*IE6è¯†åˆ«*/ } * IEä¸‹,å¯ä»¥ä½¿ç”¨è·å–å¸¸è§„å±æ€§çš„æ–¹æ³•æ¥è·å–è‡ªå®šä¹‰å±æ€§, ä¹Ÿå¯ä»¥ä½¿ç”¨getAttribute()è·å–è‡ªå®šä¹‰å±æ€§; Firefoxä¸‹,åªèƒ½ä½¿ç”¨getAttribute()è·å–è‡ªå®šä¹‰å±æ€§ã€‚ è§£å†³æ–¹æ³•:ç»Ÿä¸€é€šè¿‡getAttribute()è·å–è‡ªå®šä¹‰å±æ€§ã€‚ * IEä¸‹,evenå¯¹è±¡æœ‰x,yå±æ€§,ä½†æ˜¯æ²¡æœ‰pageX,pageYå±æ€§; Firefoxä¸‹,eventå¯¹è±¡æœ‰pageX,pageYå±æ€§,ä½†æ˜¯æ²¡æœ‰x,yå±æ€§ã€‚ * è§£å†³æ–¹æ³•ï¼šï¼ˆæ¡ä»¶æ³¨é‡Šï¼‰ç¼ºç‚¹æ˜¯åœ¨IEæµè§ˆå™¨ä¸‹å¯èƒ½ä¼šå¢åŠ é¢å¤–çš„HTTPè¯·æ±‚æ•°ã€‚ * Chrome ä¸­æ–‡ç•Œé¢ä¸‹é»˜è®¤ä¼šå°†å°äº 12px çš„æ–‡æœ¬å¼ºåˆ¶æŒ‰ç…§ 12px æ˜¾ç¤º, å¯é€šè¿‡åŠ å…¥ CSS å±æ€§ -webkit-text-size-adjust: none; è§£å†³ã€‚ è¶…é“¾æ¥è®¿é—®è¿‡åhoveræ ·å¼å°±ä¸å‡ºç°äº† è¢«ç‚¹å‡»è®¿é—®è¿‡çš„è¶…é“¾æ¥æ ·å¼ä¸åœ¨å…·æœ‰hoverå’Œactiveäº†è§£å†³æ–¹æ³•æ˜¯æ”¹å˜CSSå±æ€§çš„æ’åˆ—é¡ºåº: L-V-H-A : a:link {} a:visited {} a:hover {} a:active {} liä¸liä¹‹é—´æœ‰çœ‹ä¸è§çš„ç©ºç™½é—´éš”æ˜¯ä»€ä¹ˆåŸå› å¼•èµ·çš„ï¼Ÿæœ‰ä»€ä¹ˆè§£å†³åŠæ³•ï¼Ÿ è¡Œæ¡†çš„æ’åˆ—ä¼šå—åˆ°ä¸­é—´ç©ºç™½ï¼ˆå›è½¦\\ç©ºæ ¼ï¼‰ç­‰çš„å½±å“ï¼Œå› ä¸ºç©ºæ ¼ä¹Ÿå±äºå­—ç¬¦,è¿™äº›ç©ºç™½ä¹Ÿä¼šè¢«åº”ç”¨æ ·å¼ï¼Œå æ®ç©ºé—´ï¼Œæ‰€ä»¥ä¼šæœ‰é—´éš”ï¼ŒæŠŠå­—ç¬¦å¤§å°è®¾ä¸º0ï¼Œå°±æ²¡æœ‰ç©ºæ ¼äº†ã€‚ ä¸ºä»€ä¹ˆè¦åˆå§‹åŒ–CSSæ ·å¼ã€‚ - å› ä¸ºæµè§ˆå™¨çš„å…¼å®¹é—®é¢˜ï¼Œä¸åŒæµè§ˆå™¨å¯¹æœ‰äº›æ ‡ç­¾çš„é»˜è®¤å€¼æ˜¯ä¸åŒçš„ï¼Œå¦‚æœæ²¡å¯¹CSSåˆå§‹åŒ–å¾€å¾€ä¼šå‡ºç°æµè§ˆå™¨ä¹‹é—´çš„é¡µé¢æ˜¾ç¤ºå·®å¼‚ã€‚ - å½“ç„¶ï¼Œåˆå§‹åŒ–æ ·å¼ä¼šå¯¹SEOæœ‰ä¸€å®šçš„å½±å“ï¼Œä½†é±¼å’Œç†ŠæŒä¸å¯å…¼å¾—ï¼Œä½†åŠ›æ±‚å½±å“æœ€å°çš„æƒ…å†µä¸‹åˆå§‹åŒ–ã€‚ æœ€ç®€å•çš„åˆå§‹åŒ–æ–¹æ³•ï¼š * {padding: 0; margin: 0;} ï¼ˆå¼ºçƒˆä¸å»ºè®®ï¼‰ æ·˜å®çš„æ ·å¼åˆå§‹åŒ–ä»£ç ï¼š body, h1, h2, h3, h4, h5, h6, hr, p, blockquote, dl, dt, dd, ul, ol, li, pre, form, fieldset, legend, button, input, textarea, th, td { margin:0; padding:0; } body, button, input, select, textarea { font:12px/1.5tahoma, arial, \\5b8b\\4f53; } h1, h2, h3, h4, h5, h6{ font-size:100%; } address, cite, dfn, em, var { font-style:normal; } code, kbd, pre, samp { font-family:couriernew, courier, monospace; } small{ font-size:12px; } ul, ol { list-style:none; } a { text-decoration:none; } a:hover { text-decoration:underline; } sup { vertical-align:text-top; } sub{ vertical-align:text-bottom; } legend { color:#000; } fieldset, img { border:0; } button, input, select, textarea { font-size:100%; } table { border-collapse:collapse; border-spacing:0; } absoluteçš„containing block(å®¹å™¨å—)è®¡ç®—æ–¹å¼è·Ÿæ­£å¸¸æµæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ æ— è®ºå±äºå“ªç§ï¼Œéƒ½è¦å…ˆæ‰¾åˆ°å…¶ç¥–å…ˆå…ƒç´ ä¸­æœ€è¿‘çš„ position å€¼ä¸ä¸º static çš„å…ƒç´ ï¼Œç„¶åå†åˆ¤æ–­ï¼š 1ã€è‹¥æ­¤å…ƒç´ ä¸º inline å…ƒç´ ï¼Œåˆ™ containing block ä¸ºèƒ½å¤ŸåŒ…å«è¿™ä¸ªå…ƒç´ ç”Ÿæˆçš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ª inline box çš„ padding box (é™¤ margin, border å¤–çš„åŒºåŸŸ) çš„æœ€å°çŸ©å½¢ï¼› 2ã€å¦åˆ™,åˆ™ç”±è¿™ä¸ªç¥–å…ˆå…ƒç´ çš„ padding box æ„æˆã€‚ å¦‚æœéƒ½æ‰¾ä¸åˆ°ï¼Œåˆ™ä¸º initial containing blockã€‚ è¡¥å……ï¼š 1. static(é»˜è®¤çš„)/relativeï¼šç®€å•è¯´å°±æ˜¯å®ƒçš„çˆ¶å…ƒç´ çš„å†…å®¹æ¡†ï¼ˆå³å»æ‰paddingçš„éƒ¨åˆ†ï¼‰ 2. absolute: å‘ä¸Šæ‰¾æœ€è¿‘çš„å®šä½ä¸ºabsolute/relativeçš„å…ƒç´  3. fixed: å®ƒçš„containing blockä¸€å¾‹ä¸ºæ ¹å…ƒç´ (html/body)ï¼Œæ ¹å…ƒç´ ä¹Ÿæ˜¯initial containing block CSSé‡Œçš„visibilityå±æ€§æœ‰ä¸ªcollapseå±æ€§å€¼æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿåœ¨ä¸åŒæµè§ˆå™¨ä¸‹ä»¥åä»€ä¹ˆåŒºåˆ«ï¼Ÿ å¯¹äºæ™®é€šå…ƒç´ visibility:collapse;ä¼šå°†å…ƒç´ å®Œå…¨éšè—,ä¸å æ®é¡µé¢å¸ƒå±€ç©ºé—´,ä¸display:none;è¡¨ç°ç›¸åŒ. å¦‚æœç›®æ ‡å…ƒç´ ä¸ºtable,visibility:collapse;å°†tableéšè—,ä½†æ˜¯ä¼šå æ®é¡µé¢å¸ƒå±€ç©ºé—´. ä»…åœ¨Firefoxä¸‹èµ·ä½œç”¨,IEä¼šæ˜¾ç¤ºå…ƒç´ ,Chromeä¼šå°†å…ƒç´ éšè—,ä½†æ˜¯å æ®ç©ºé—´. positionè·Ÿdisplayã€margin collapseã€overflowã€floatè¿™äº›ç‰¹æ€§ç›¸äº’å åŠ åä¼šæ€ä¹ˆæ ·ï¼Ÿ å¦‚æœå…ƒç´ çš„displayä¸ºnone,é‚£ä¹ˆå…ƒç´ ä¸è¢«æ¸²æŸ“,position,floatä¸èµ·ä½œç”¨,å¦‚æœå…ƒç´ æ‹¥æœ‰position:absolute;æˆ–è€…position:fixed;å±æ€§é‚£ä¹ˆå…ƒç´ å°†ä¸ºç»å¯¹å®šä½,floatä¸èµ·ä½œç”¨.å¦‚æœå…ƒç´ floatå±æ€§ä¸æ˜¯none,å…ƒç´ ä¼šè„±ç¦»æ–‡æ¡£æµ,æ ¹æ®floatå±æ€§å€¼æ¥æ˜¾ç¤º.æœ‰æµ®åŠ¨,ç»å¯¹å®šä½,inline-blockå±æ€§çš„å…ƒç´ ,marginä¸ä¼šå’Œå‚ç›´æ–¹å‘ä¸Šçš„å…¶ä»–å…ƒç´ marginæŠ˜å . å¯¹BFCè§„èŒƒ(å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼šblock formatting context)çš„ç†è§£ï¼Ÿ ï¼ˆW3C CSS 2.1 è§„èŒƒä¸­çš„ä¸€ä¸ªæ¦‚å¿µ,å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹å®¹å™¨ï¼Œå†³å®šäº†å…ƒç´ å¦‚ä½•å¯¹å…¶å†…å®¹è¿›è¡Œå®šä½,ä»¥åŠä¸å…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚ï¼‰ ä¸€ä¸ªé¡µé¢æ˜¯ç”±å¾ˆå¤šä¸ª Box ç»„æˆçš„,å…ƒç´ çš„ç±»å‹å’Œ display å±æ€§,å†³å®šäº†è¿™ä¸ª Box çš„ç±»å‹ã€‚ ä¸åŒç±»å‹çš„ Box,ä¼šå‚ä¸ä¸åŒçš„ Formatting Contextï¼ˆå†³å®šå¦‚ä½•æ¸²æŸ“æ–‡æ¡£çš„å®¹å™¨ï¼‰,å› æ­¤Boxå†…çš„å…ƒç´ ä¼šä»¥ä¸åŒçš„æ–¹å¼æ¸²æŸ“,ä¹Ÿå°±æ˜¯è¯´BFCå†…éƒ¨çš„å…ƒç´ å’Œå¤–éƒ¨çš„å…ƒç´ ä¸ä¼šäº’ç›¸å½±å“ã€‚ csså®šä¹‰çš„æƒé‡ ä»¥ä¸‹æ˜¯æƒé‡çš„è§„åˆ™ï¼šæ ‡ç­¾çš„æƒé‡ä¸º1ï¼Œclassçš„æƒé‡ä¸º10ï¼Œidçš„æƒé‡ä¸º100ï¼Œä»¥ä¸‹ä¾‹å­æ˜¯æ¼”ç¤ºå„ç§å®šä¹‰çš„æƒé‡å€¼ï¼š /*æƒé‡ä¸º1*/ div{ } /*æƒé‡ä¸º10*/ .class1{ } /*æƒé‡ä¸º100*/ #id1{ } /*æƒé‡ä¸º100+1=101*/ #id1 div{ } /*æƒé‡ä¸º10+1=11*/ .class1 div{ } /*æƒé‡ä¸º10+10+1=21*/ .class1 .class2 div{ } å¦‚æœæƒé‡ç›¸åŒï¼Œåˆ™æœ€åå®šä¹‰çš„æ ·å¼ä¼šèµ·ä½œç”¨ï¼Œä½†æ˜¯åº”è¯¥é¿å…è¿™ç§æƒ…å†µå‡ºç° è¯·è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦æ¸…é™¤æµ®åŠ¨ï¼Ÿæ¸…é™¤æµ®åŠ¨çš„æ–¹å¼ æ¸…é™¤æµ®åŠ¨æ˜¯ä¸ºäº†æ¸…é™¤ä½¿ç”¨æµ®åŠ¨å…ƒç´ äº§ç”Ÿçš„å½±å“ã€‚æµ®åŠ¨çš„å…ƒç´ ï¼Œé«˜åº¦ä¼šå¡Œé™·ï¼Œè€Œé«˜åº¦çš„å¡Œé™·ä½¿æˆ‘ä»¬é¡µé¢åé¢çš„å¸ƒå±€ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚ 1ã€çˆ¶çº§divå®šä¹‰heightï¼› 2ã€çˆ¶çº§div ä¹Ÿä¸€èµ·æµ®åŠ¨ï¼› 3ã€å¸¸è§„çš„ä½¿ç”¨ä¸€ä¸ªclassï¼› .clearfix:before, .clearfix:after { content: &quot; &quot;; display: table; } .clearfix:after { clear: both; } .clearfix { *zoom: 1; } 4ã€SASSç¼–è¯‘çš„æ—¶å€™ï¼Œæµ®åŠ¨å…ƒç´ çš„çˆ¶çº§divå®šä¹‰ä¼ªç±»:after &amp;:after,&amp;:before{ content: &quot; &quot;; visibility: hidden; display: block; height: 0; clear: both; } è§£æåŸç†ï¼š 1) display:block ä½¿ç”Ÿæˆçš„å…ƒç´ ä»¥å—çº§å…ƒç´ æ˜¾ç¤º,å æ»¡å‰©ä½™ç©ºé—´; 2) height:0 é¿å…ç”Ÿæˆå†…å®¹ç ´ååŸæœ‰å¸ƒå±€çš„é«˜åº¦ã€‚ 3) visibility:hidden ä½¿ç”Ÿæˆçš„å†…å®¹ä¸å¯è§ï¼Œå¹¶å…è®¸å¯èƒ½è¢«ç”Ÿæˆå†…å®¹ç›–ä½çš„å†…å®¹å¯ä»¥è¿›è¡Œç‚¹å‡»å’Œäº¤äº’; 4ï¼‰é€šè¿‡ content:&quot;.&quot;ç”Ÿæˆå†…å®¹ä½œä¸ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œè‡³äºcontenté‡Œé¢æ˜¯ç‚¹è¿˜æ˜¯å…¶ä»–éƒ½æ˜¯å¯ä»¥çš„ï¼Œä¾‹å¦‚oocssé‡Œé¢å°±æœ‰ç»å…¸çš„ content:&quot;.&quot;,æœ‰äº›ç‰ˆæœ¬å¯èƒ½content é‡Œé¢å†…å®¹ä¸ºç©º,ä¸€ä¸å†°å‡‰æ˜¯ä¸æ¨èè¿™æ ·åšçš„,firefoxç›´åˆ°7.0 content:â€&quot; ä»ç„¶ä¼šäº§ç”Ÿé¢å¤–çš„ç©ºéš™ï¼› 5ï¼‰zoomï¼š1 è§¦å‘IE hasLayoutã€‚ é€šè¿‡åˆ†æå‘ç°ï¼Œé™¤äº†clearï¼šbothç”¨æ¥é—­åˆæµ®åŠ¨çš„ï¼Œå…¶ä»–ä»£ç æ— ééƒ½æ˜¯ä¸ºäº†éšè—æ‰contentç”Ÿæˆçš„å†…å®¹ï¼Œè¿™ä¹Ÿå°±æ˜¯å…¶ä»–ç‰ˆæœ¬çš„é—­åˆæµ®åŠ¨ä¸ºä»€ä¹ˆä¼šæœ‰font-sizeï¼š0ï¼Œline-heightï¼š0ã€‚ ä»€ä¹ˆæ˜¯å¤–è¾¹è·åˆå¹¶ï¼Ÿ å¤–è¾¹è·åˆå¹¶æŒ‡çš„æ˜¯ï¼Œå½“ä¸¤ä¸ªå‚ç›´å¤–è¾¹è·ç›¸é‡æ—¶ï¼Œå®ƒä»¬å°†å½¢æˆä¸€ä¸ªå¤–è¾¹è·ã€‚ åˆå¹¶åçš„å¤–è¾¹è·çš„é«˜åº¦ç­‰äºä¸¤ä¸ªå‘ç”Ÿåˆå¹¶çš„å¤–è¾¹è·çš„é«˜åº¦ä¸­çš„è¾ƒå¤§è€…ã€‚ w3schoolä»‹ç»ç½‘å€ï¼š http://www.w3school.com.cn/css/css_margin_collapsing.asp zoom:1çš„æ¸…é™¤æµ®åŠ¨åŸç†? æ¸…é™¤æµ®åŠ¨ï¼Œè§¦å‘hasLayoutï¼› Zoomå±æ€§æ˜¯IEæµè§ˆå™¨çš„ä¸“æœ‰å±æ€§ï¼Œå®ƒå¯ä»¥è®¾ç½®æˆ–æ£€ç´¢å¯¹è±¡çš„ç¼©æ”¾æ¯”ä¾‹ã€‚è§£å†³ieä¸‹æ¯”è¾ƒå¥‡è‘©çš„bugã€‚ è­¬å¦‚å¤–è¾¹è·ï¼ˆmarginï¼‰çš„é‡å ï¼Œæµ®åŠ¨æ¸…é™¤ï¼Œè§¦å‘ieçš„haslayoutå±æ€§ç­‰ã€‚ æ¥é¾™å»è„‰å¤§æ¦‚å¦‚ä¸‹ï¼š å½“è®¾ç½®äº†zoomçš„å€¼ä¹‹åï¼Œæ‰€è®¾ç½®çš„å…ƒç´ å°±ä¼šå°±ä¼šæ‰©å¤§æˆ–è€…ç¼©å°ï¼Œé«˜åº¦å®½åº¦å°±ä¼šé‡æ–°è®¡ç®—äº†ï¼Œè¿™é‡Œä¸€æ—¦æ”¹å˜zoomå€¼æ—¶å…¶å®ä¹Ÿä¼šå‘ç”Ÿé‡æ–°æ¸²æŸ“ï¼Œè¿ç”¨è¿™ä¸ªåŸç†ï¼Œä¹Ÿå°±è§£å†³äº†ieä¸‹å­å…ƒç´ æµ®åŠ¨æ—¶å€™çˆ¶å…ƒç´ ä¸éšç€è‡ªåŠ¨æ‰©å¤§çš„é—®é¢˜ã€‚ Zoomå±æ˜¯IEæµè§ˆå™¨çš„ä¸“æœ‰å±æ€§ï¼Œç«ç‹å’Œè€ç‰ˆæœ¬çš„webkitæ ¸å¿ƒçš„æµè§ˆå™¨éƒ½ä¸æ”¯æŒè¿™ä¸ªå±æ€§ã€‚ç„¶è€Œï¼Œzoomç°åœ¨å·²ç»è¢«é€æ­¥æ ‡å‡†åŒ–ï¼Œå‡ºç°åœ¨ CSS 3.0 è§„èŒƒè‰æ¡ˆä¸­ã€‚ ç›®å‰éieç”±äºä¸æ”¯æŒè¿™ä¸ªå±æ€§ï¼Œå®ƒä»¬åˆæ˜¯é€šè¿‡ä»€ä¹ˆå±æ€§æ¥å®ç°å…ƒç´ çš„ç¼©æ”¾å‘¢ï¼Ÿ å¯ä»¥é€šè¿‡css3é‡Œé¢çš„åŠ¨ç”»å±æ€§scaleè¿›è¡Œç¼©æ”¾ã€‚ ç§»åŠ¨ç«¯çš„å¸ƒå±€ç”¨è¿‡åª’ä½“æŸ¥è¯¢å—ï¼Ÿ å‡è®¾ä½ ç°åœ¨æ­£ç”¨ä¸€å°æ˜¾ç¤ºè®¾å¤‡æ¥é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼ŒåŒæ—¶ä½ ä¹Ÿæƒ³æŠŠå®ƒæŠ•å½±åˆ°å±å¹•ä¸Šï¼Œæˆ–è€…æ‰“å°å‡ºæ¥ï¼Œ è€Œæ˜¾ç¤ºè®¾å¤‡ã€å±å¹•æŠ•å½±å’Œæ‰“å°ç­‰è¿™äº›åª’ä»‹éƒ½æœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼ŒCSSå°±æ˜¯ä¸ºæ–‡æ¡£æä¾›åœ¨ä¸åŒåª’ä»‹ä¸Šå±•ç¤ºçš„é€‚é…æ–¹æ³• &lt;!-- linkå…ƒç´ ä¸­çš„CSSåª’ä½“æŸ¥è¯¢ --&gt; å½“åª’ä½“æŸ¥è¯¢ä¸ºçœŸæ—¶ï¼Œç›¸å…³çš„æ ·å¼è¡¨æˆ–æ ·å¼è§„åˆ™ä¼šæŒ‰ç…§æ­£å¸¸çš„çº§è”è§„è¢«åº”ç”¨ã€‚ å½“åª’ä½“æŸ¥è¯¢è¿”å›å‡ï¼Œ &lt;link&gt; æ ‡ç­¾ä¸Šå¸¦æœ‰åª’ä½“æŸ¥è¯¢çš„æ ·å¼è¡¨ ä»å°†è¢«ä¸‹è½½ ï¼ˆåªä¸è¿‡ä¸ä¼šè¢«åº”ç”¨ï¼‰ã€‚ &lt;link rel=&quot;stylesheet&quot; media=&quot;(max-width: 800px)&quot; href=&quot;example.css&quot; /&gt; &lt;!-- æ ·å¼è¡¨ä¸­çš„CSSåª’ä½“æŸ¥è¯¢ --&gt; åŒ…å«äº†ä¸€ä¸ªåª’ä½“ç±»å‹å’Œè‡³å°‘ä¸€ä¸ªä½¿ç”¨ å®½åº¦ã€é«˜åº¦å’Œé¢œè‰²ç­‰åª’ä½“å±æ€§æ¥é™åˆ¶æ ·å¼è¡¨èŒƒå›´çš„è¡¨è¾¾å¼ã€‚ CSS3åŠ å…¥çš„åª’ä½“æŸ¥è¯¢ä½¿å¾—æ— éœ€ä¿®æ”¹å†…å®¹ä¾¿å¯ä»¥ä½¿æ ·å¼åº”ç”¨äºæŸäº›ç‰¹å®šçš„è®¾å¤‡èŒƒå›´ã€‚ &lt;style&gt; @media (min-width: 700px) and (orientation: landscape){ .sidebar { display: none; } } &lt;/style&gt; ä½¿ç”¨ CSS é¢„å¤„ç†å™¨å—ï¼Ÿå–œæ¬¢é‚£ä¸ªï¼Ÿ SASS (SASSã€LESSæ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œåªå› ä¸ºå›¢é˜Ÿå‰ç«¯éƒ½æ˜¯ç”¨çš„SASS) CSSä¼˜åŒ–ã€æé«˜æ€§èƒ½çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ å…³é”®é€‰æ‹©å™¨ï¼ˆkey selectorï¼‰ã€‚é€‰æ‹©å™¨çš„æœ€åé¢çš„éƒ¨åˆ†ä¸ºå…³é”®é€‰æ‹©å™¨ï¼ˆå³ç”¨æ¥åŒ¹é…ç›®æ ‡å…ƒç´ çš„éƒ¨åˆ†ï¼‰ï¼› å¦‚æœè§„åˆ™æ‹¥æœ‰ ID é€‰æ‹©å™¨ä½œä¸ºå…¶å…³é”®é€‰æ‹©å™¨ï¼Œåˆ™ä¸è¦ä¸ºè§„åˆ™å¢åŠ æ ‡ç­¾ã€‚è¿‡æ»¤æ‰æ— å…³çš„è§„åˆ™ï¼ˆè¿™æ ·æ ·å¼ç³»ç»Ÿå°±ä¸ä¼šæµªè´¹æ—¶é—´å»åŒ¹é…å®ƒä»¬äº†ï¼‰ï¼› æå–é¡¹ç›®çš„é€šç”¨å…¬æœ‰æ ·å¼ï¼Œå¢å¼ºå¯å¤ç”¨æ€§ï¼ŒæŒ‰æ¨¡å—ç¼–å†™ç»„ä»¶ï¼›å¢å¼ºé¡¹ç›®çš„ååŒå¼€å‘æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§; ä½¿ç”¨é¢„å¤„ç†å·¥å…·æˆ–æ„å»ºå·¥å…·ï¼ˆgulpå¯¹cssè¿›è¡Œè¯­æ³•æ£€æŸ¥ã€è‡ªåŠ¨è¡¥å‰ç¼€ã€æ‰“åŒ…å‹ç¼©ã€è‡ªåŠ¨ä¼˜é›…é™çº§ï¼‰ï¼› æµè§ˆå™¨æ˜¯æ€æ ·è§£æCSSé€‰æ‹©å™¨çš„ï¼Ÿ æ ·å¼ç³»ç»Ÿä»å…³é”®é€‰æ‹©å™¨å¼€å§‹åŒ¹é…ï¼Œç„¶åå·¦ç§»æŸ¥æ‰¾è§„åˆ™é€‰æ‹©å™¨çš„ç¥–å…ˆå…ƒç´ ã€‚ åªè¦é€‰æ‹©å™¨çš„å­æ ‘ä¸€ç›´åœ¨å·¥ä½œï¼Œæ ·å¼ç³»ç»Ÿå°±ä¼šæŒç»­å·¦ç§»ï¼Œç›´åˆ°å’Œè§„åˆ™åŒ¹é…ï¼Œæˆ–è€…æ˜¯å› ä¸ºä¸åŒ¹é…è€Œæ”¾å¼ƒè¯¥è§„åˆ™ã€‚ åœ¨ç½‘é¡µä¸­çš„åº”è¯¥ä½¿ç”¨å¥‡æ•°è¿˜æ˜¯å¶æ•°çš„å­—ä½“ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ marginå’Œpaddingåˆ†åˆ«é€‚åˆä»€ä¹ˆåœºæ™¯ä½¿ç”¨ï¼Ÿ marginæ˜¯ç”¨æ¥éš”å¼€å…ƒç´ ä¸å…ƒç´ çš„é—´è·ï¼›paddingæ˜¯ç”¨æ¥éš”å¼€å…ƒç´ ä¸å†…å®¹çš„é—´éš”ã€‚ marginç”¨äºå¸ƒå±€åˆ†å¼€å…ƒç´ ä½¿å…ƒç´ ä¸å…ƒç´ äº’ä¸ç›¸å¹²ï¼› paddingç”¨äºå…ƒç´ ä¸å†…å®¹ä¹‹é—´çš„é—´éš”ï¼Œè®©å†…å®¹ï¼ˆæ–‡å­—ï¼‰ä¸ï¼ˆåŒ…è£¹ï¼‰å…ƒç´ ä¹‹é—´æœ‰ä¸€æ®µ æŠ½ç¦»æ ·å¼æ¨¡å—æ€ä¹ˆå†™ï¼Œè¯´å‡ºæ€è·¯ï¼Œæœ‰æ— å®è·µç»éªŒï¼Ÿ[é˜¿é‡Œèˆªæ—…çš„é¢è¯•é¢˜] å…ƒç´ ç«–å‘çš„ç™¾åˆ†æ¯”è®¾å®šæ˜¯ç›¸å¯¹äºå®¹å™¨çš„é«˜åº¦å—ï¼Ÿ å…¨å±æ»šåŠ¨çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿç”¨åˆ°äº†CSSçš„é‚£äº›å±æ€§ï¼Ÿ ä»€ä¹ˆæ˜¯å“åº”å¼è®¾è®¡ï¼Ÿå“åº”å¼è®¾è®¡çš„åŸºæœ¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å…¼å®¹ä½ç‰ˆæœ¬çš„IEï¼Ÿ è§†å·®æ»šåŠ¨æ•ˆæœï¼Œå¦‚ä½•ç»™æ¯é¡µåšä¸åŒçš„åŠ¨ç”»ï¼Ÿï¼ˆå›åˆ°é¡¶éƒ¨ï¼Œå‘ä¸‹æ»‘åŠ¨è¦å†æ¬¡å‡ºç°ï¼Œå’Œåªå‡ºç°ä¸€æ¬¡åˆ†åˆ«æ€ä¹ˆåšï¼Ÿï¼‰ ::before å’Œ :afterä¸­åŒå†’å·å’Œå•å†’å· æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿè§£é‡Šä¸€ä¸‹è¿™2ä¸ªä¼ªå…ƒç´ çš„ä½œç”¨ã€‚ å•å†’å·(:)ç”¨äºCSS3ä¼ªç±»ï¼ŒåŒå†’å·(::)ç”¨äºCSS3ä¼ªå…ƒç´ ã€‚ï¼ˆä¼ªå…ƒç´ ç”±åŒå†’å·å’Œä¼ªå…ƒç´ åç§°ç»„æˆï¼‰ åŒå†’å·æ˜¯åœ¨å½“å‰è§„èŒƒä¸­å¼•å…¥çš„ï¼Œç”¨äºåŒºåˆ†ä¼ªç±»å’Œä¼ªå…ƒç´ ã€‚ä¸è¿‡æµè§ˆå™¨éœ€è¦åŒæ—¶æ”¯æŒæ—§çš„å·²ç»å­˜åœ¨çš„ä¼ªå…ƒç´ å†™æ³•ï¼Œ æ¯”å¦‚:first-lineã€:first-letterã€:beforeã€:afterç­‰ï¼Œ è€Œæ–°çš„åœ¨CSS3ä¸­å¼•å…¥çš„ä¼ªå…ƒç´ åˆ™ä¸å…è®¸å†æ”¯æŒæ—§çš„å•å†’å·çš„å†™æ³•ã€‚ æƒ³è®©æ’å…¥çš„å†…å®¹å‡ºç°åœ¨å…¶å®ƒå†…å®¹å‰ï¼Œä½¿ç”¨::beforeï¼Œå¦è€…ï¼Œä½¿ç”¨::afterï¼› åœ¨ä»£ç é¡ºåºä¸Šï¼Œ::afterç”Ÿæˆçš„å†…å®¹ä¹Ÿæ¯”::beforeç”Ÿæˆçš„å†…å®¹é åã€‚ å¦‚æœæŒ‰å †æ ˆè§†è§’ï¼Œ::afterç”Ÿæˆçš„å†…å®¹ä¼šåœ¨::beforeç”Ÿæˆçš„å†…å®¹ä¹‹ä¸Š å¦‚ä½•ä¿®æ”¹chromeè®°ä½å¯†ç åè‡ªåŠ¨å¡«å……è¡¨å•çš„é»„è‰²èƒŒæ™¯ ï¼Ÿ input:-webkit-autofill, textarea:-webkit-autofill, select:-webkit-autofill { background-color: rgb(250, 255, 189); /* #FAFFBD; */ background-image: none; color: rgb(0, 0, 0); } ä½ å¯¹line-heightæ˜¯å¦‚ä½•ç†è§£çš„ï¼Ÿ è®¾ç½®å…ƒç´ æµ®åŠ¨åï¼Œè¯¥å…ƒç´ çš„displayå€¼æ˜¯å¤šå°‘ï¼Ÿ è‡ªåŠ¨å˜æˆäº† display: inline-block æ€ä¹ˆè®©Chromeæ”¯æŒå°äº12px çš„æ–‡å­—ï¼Ÿ 1ã€ç”¨å›¾ç‰‡ï¼šå¦‚æœæ˜¯å†…å®¹å›ºå®šä¸å˜æƒ…å†µä¸‹ï¼Œä½¿ç”¨å°†å°äº12pxæ–‡å­—å†…å®¹åˆ‡å‡ºåšå›¾ç‰‡ï¼Œè¿™æ ·ä¸å½±å“å…¼å®¹ä¹Ÿä¸å½±å“ç¾è§‚ã€‚ 2ã€ä½¿ç”¨12pxåŠ12pxä»¥ä¸Šå­—ä½“å¤§å°ï¼šä¸ºäº†å…¼å®¹å„å¤§ä¸»æµæµè§ˆå™¨ï¼Œå»ºè®®è®¾è®¡ç¾å·¥å›¾æ—¶å€™è®¾ç½®å¤§äºæˆ–ç­‰äº12pxçš„å­—ä½“å¤§å°ï¼Œå¦‚æœæ˜¯æ¥å•çš„è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç»™å®¢æˆ·è®²è§£å°äº12pxæµè§ˆå™¨ä¸å…¼å®¹ç­‰äº‹å®œã€‚ 3ã€ç»§ç»­ä½¿ç”¨å°äº12pxå­—ä½“å¤§å°æ ·å¼è®¾ç½®ï¼šå¦‚æœä¸è€ƒè™‘chromeå¯ä»¥ä¸ç”¨è€ƒè™‘å…¼å®¹ï¼ŒåŒæ—¶åœ¨è®¾ç½®å°äº12pxå¯¹è±¡è®¾ç½®-webkit-text-size-adjust:noneï¼Œåšåˆ°æœ€å¤§å…¼å®¹è€ƒè™‘ã€‚ 4ã€ä½¿ç”¨12pxä»¥ä¸Šå­—ä½“ï¼šä¸ºäº†å…¼å®¹ã€ä¸ºäº†ä»£ç æ›´ç®€å• ä»æ–°è€ƒè™‘æƒé‡ä¸‹å…¼å®¹æ€§ã€‚ è®©é¡µé¢é‡Œçš„å­—ä½“å˜æ¸…æ™°ï¼Œå˜ç»†ç”¨CSSæ€ä¹ˆåšï¼Ÿ -webkit-font-smoothing: antialiased; font-styleå±æ€§å¯ä»¥è®©å®ƒèµ‹å€¼ä¸ºâ€œobliqueâ€ obliqueæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ å€¾æ–œçš„å­—ä½“æ ·å¼ position:fixed;åœ¨androidä¸‹æ— æ•ˆæ€ä¹ˆå¤„ç†ï¼Ÿ fixedçš„å…ƒç´ æ˜¯ç›¸å¯¹æ•´ä¸ªé¡µé¢å›ºå®šä½ç½®çš„ï¼Œä½ åœ¨å±å¹•ä¸Šæ»‘åŠ¨åªæ˜¯åœ¨ç§»åŠ¨è¿™ä¸ªæ‰€è°“çš„viewportï¼Œ åŸæ¥çš„ç½‘é¡µè¿˜å¥½å¥½çš„åœ¨é‚£ï¼Œfixedçš„å†…å®¹ä¹Ÿæ²¡æœ‰å˜è¿‡ä½ç½®ï¼Œ æ‰€ä»¥è¯´å¹¶ä¸æ˜¯iOSä¸æ”¯æŒfixedï¼Œåªæ˜¯fixedçš„å…ƒç´ ä¸æ˜¯ç›¸å¯¹æ‰‹æœºå±å¹•å›ºå®šçš„ã€‚ &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no&quot;/&gt; å¦‚æœéœ€è¦æ‰‹åŠ¨å†™åŠ¨ç”»ï¼Œä½ è®¤ä¸ºæœ€å°æ—¶é—´é—´éš”æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼ˆé˜¿é‡Œï¼‰ å¤šæ•°æ˜¾ç¤ºå™¨é»˜è®¤é¢‘ç‡æ˜¯60Hzï¼Œå³1ç§’åˆ·æ–°60æ¬¡ï¼Œæ‰€ä»¥ç†è®ºä¸Šæœ€å°é—´éš”ä¸º1/60ï¼Š1000ms ï¼ 16.7ms display:inline-block ä»€ä¹ˆæ—¶å€™ä¼šæ˜¾ç¤ºé—´éš™ï¼Ÿ(æºç¨‹) ç§»é™¤ç©ºæ ¼ã€ä½¿ç”¨marginè´Ÿå€¼ã€ä½¿ç”¨font-size:0ã€letter-spacingã€word-spacing overflow: scrollæ—¶ä¸èƒ½å¹³æ»‘æ»šåŠ¨çš„é—®é¢˜æ€ä¹ˆå¤„ç†ï¼Ÿ æœ‰ä¸€ä¸ªé«˜åº¦è‡ªé€‚åº”çš„divï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªdivï¼Œä¸€ä¸ªé«˜åº¦100pxï¼Œå¸Œæœ›å¦ä¸€ä¸ªå¡«æ»¡å‰©ä¸‹çš„é«˜åº¦ã€‚ pngã€jpgã€gif è¿™äº›å›¾ç‰‡æ ¼å¼è§£é‡Šä¸€ä¸‹ï¼Œåˆ†åˆ«ä»€ä¹ˆæ—¶å€™ç”¨ã€‚æœ‰æ²¡æœ‰äº†è§£è¿‡webpï¼Ÿ ä»€ä¹ˆæ˜¯Cookie éš”ç¦»ï¼Ÿï¼ˆæˆ–è€…è¯´ï¼šè¯·æ±‚èµ„æºçš„æ—¶å€™ä¸è¦è®©å®ƒå¸¦cookieæ€ä¹ˆåšï¼‰ å¦‚æœé™æ€æ–‡ä»¶éƒ½æ”¾åœ¨ä¸»åŸŸåä¸‹ï¼Œé‚£é™æ€æ–‡ä»¶è¯·æ±‚çš„æ—¶å€™éƒ½å¸¦æœ‰çš„cookieçš„æ•°æ®æäº¤ç»™serverçš„ï¼Œéå¸¸æµªè´¹æµé‡ï¼Œ æ‰€ä»¥ä¸å¦‚éš”ç¦»å¼€ã€‚ å› ä¸ºcookieæœ‰åŸŸçš„é™åˆ¶ï¼Œå› æ­¤ä¸èƒ½è·¨åŸŸæäº¤è¯·æ±‚ï¼Œæ•…ä½¿ç”¨éä¸»è¦åŸŸåçš„æ—¶å€™ï¼Œè¯·æ±‚å¤´ä¸­å°±ä¸ä¼šå¸¦æœ‰cookieæ•°æ®ï¼Œ è¿™æ ·å¯ä»¥é™ä½è¯·æ±‚å¤´çš„å¤§å°ï¼Œé™ä½è¯·æ±‚æ—¶é—´ï¼Œä»è€Œè¾¾åˆ°é™ä½æ•´ä½“è¯·æ±‚å»¶æ—¶çš„ç›®çš„ã€‚ åŒæ—¶è¿™ç§æ–¹å¼ä¸ä¼šå°†cookieä¼ å…¥Web Serverï¼Œä¹Ÿå‡å°‘äº†Web Serverå¯¹cookieçš„å¤„ç†åˆ†æç¯èŠ‚ï¼Œ æé«˜äº†webserverçš„httpè¯·æ±‚çš„è§£æé€Ÿåº¦ã€‚ styleæ ‡ç­¾å†™åœ¨bodyåä¸bodyå‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ ä»€ä¹ˆæ˜¯CSS é¢„å¤„ç†å™¨ / åå¤„ç†å™¨ï¼Ÿ - é¢„å¤„ç†å™¨ä¾‹å¦‚ï¼šLESSã€Sassã€Stylusï¼Œç”¨æ¥é¢„ç¼–è¯‘Sassæˆ–lessï¼Œå¢å¼ºäº†cssä»£ç çš„å¤ç”¨æ€§ï¼Œ è¿˜æœ‰å±‚çº§ã€mixinã€å˜é‡ã€å¾ªç¯ã€å‡½æ•°ç­‰ï¼Œå…·æœ‰å¾ˆæ–¹ä¾¿çš„UIç»„ä»¶æ¨¡å—åŒ–å¼€å‘èƒ½åŠ›ï¼Œæå¤§çš„æé«˜å·¥ä½œæ•ˆç‡ã€‚ - åå¤„ç†å™¨ä¾‹å¦‚ï¼šPostCSSï¼Œé€šå¸¸è¢«è§†ä¸ºåœ¨å®Œæˆçš„æ ·å¼è¡¨ä¸­æ ¹æ®CSSè§„èŒƒå¤„ç†CSSï¼Œè®©å…¶æ›´æœ‰æ•ˆï¼›ç›®å‰æœ€å¸¸åšçš„ æ˜¯ç»™CSSå±æ€§æ·»åŠ æµè§ˆå™¨ç§æœ‰å‰ç¼€ï¼Œå®ç°è·¨æµè§ˆå™¨å…¼å®¹æ€§çš„é—®é¢˜ã€‚ JavaScript ä»‹ç»jsçš„åŸºæœ¬æ•°æ®ç±»å‹ã€‚ Undefinedã€Nullã€Booleanã€Numberã€Stringã€ ECMAScript 2015 æ–°å¢:Symbol(åˆ›å»ºåç‹¬ä¸€æ— äºŒä¸”ä¸å¯å˜çš„æ•°æ®ç±»å‹ ) ä»‹ç»jsæœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿ Object æ˜¯ JavaScript ä¸­æ‰€æœ‰å¯¹è±¡çš„çˆ¶å¯¹è±¡ æ•°æ®å°è£…ç±»å¯¹è±¡ï¼šObjectã€Arrayã€Booleanã€Number å’Œ String å…¶ä»–å¯¹è±¡ï¼šFunctionã€Argumentsã€Mathã€Dateã€RegExpã€Error å‚è€ƒï¼šhttp://www.ibm.com/developerworks/cn/web/wa-objectsinjs-v1b/index.html è¯´å‡ æ¡å†™JavaScriptçš„åŸºæœ¬è§„èŒƒï¼Ÿ 1.ä¸è¦åœ¨åŒä¸€è¡Œå£°æ˜å¤šä¸ªå˜é‡ã€‚ 2.è¯·ä½¿ç”¨ ===/!==æ¥æ¯”è¾ƒtrue/falseæˆ–è€…æ•°å€¼ 3.ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ›¿ä»£new Arrayè¿™ç§å½¢å¼ 4.ä¸è¦ä½¿ç”¨å…¨å±€å‡½æ•°ã€‚ 5.Switchè¯­å¥å¿…é¡»å¸¦æœ‰defaultåˆ†æ”¯ 6.å‡½æ•°ä¸åº”è¯¥æœ‰æ—¶å€™æœ‰è¿”å›å€¼ï¼Œæœ‰æ—¶å€™æ²¡æœ‰è¿”å›å€¼ã€‚ 7.Forå¾ªç¯å¿…é¡»ä½¿ç”¨å¤§æ‹¬å· 8.Ifè¯­å¥å¿…é¡»ä½¿ç”¨å¤§æ‹¬å· 9.for-inå¾ªç¯ä¸­çš„å˜é‡ åº”è¯¥ä½¿ç”¨varå…³é”®å­—æ˜ç¡®é™å®šä½œç”¨åŸŸï¼Œä»è€Œé¿å…ä½œç”¨åŸŸæ±¡æŸ“ã€‚ JavaScriptåŸå‹ï¼ŒåŸå‹é“¾ ? æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ æ¯ä¸ªå¯¹è±¡éƒ½ä¼šåœ¨å…¶å†…éƒ¨åˆå§‹åŒ–ä¸€ä¸ªå±æ€§ï¼Œå°±æ˜¯prototype(åŸå‹)ï¼Œå½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œ å¦‚æœè¿™ä¸ªå¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆä»–å°±ä¼šå»prototypeé‡Œæ‰¾è¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªprototypeåˆä¼šæœ‰è‡ªå·±çš„prototypeï¼Œ äºæ˜¯å°±è¿™æ ·ä¸€ç›´æ‰¾ä¸‹å»ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„åŸå‹é“¾çš„æ¦‚å¿µã€‚ å…³ç³»ï¼šinstance.constructor.prototype = instance.__proto__ ç‰¹ç‚¹ï¼š JavaScriptå¯¹è±¡æ˜¯é€šè¿‡å¼•ç”¨æ¥ä¼ é€’çš„ï¼Œæˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªæ–°å¯¹è±¡å®ä½“ä¸­å¹¶æ²¡æœ‰ä¸€ä»½å±äºè‡ªå·±çš„åŸå‹å‰¯æœ¬ã€‚å½“æˆ‘ä»¬ä¿®æ”¹åŸå‹æ—¶ï¼Œä¸ä¹‹ç›¸å…³çš„å¯¹è±¡ä¹Ÿä¼šç»§æ‰¿è¿™ä¸€æ”¹å˜ã€‚ å½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå±æ€§çš„æ—¶ï¼ŒJavascriptå¼•æ“ä¼šå…ˆçœ‹å½“å‰å¯¹è±¡ä¸­æ˜¯å¦æœ‰è¿™ä¸ªå±æ€§ï¼Œ å¦‚æœæ²¡æœ‰çš„è¯ï¼Œ å°±ä¼šæŸ¥æ‰¾ä»–çš„Prototypeå¯¹è±¡æ˜¯å¦æœ‰è¿™ä¸ªå±æ€§ï¼Œå¦‚æ­¤é€’æ¨ä¸‹å»ï¼Œä¸€ç›´æ£€ç´¢åˆ° Object å†…å»ºå¯¹è±¡ã€‚ function Func(){} Func.prototype.name = &quot;Sean&quot;; Func.prototype.getInfo = function() { return this.name; } var person = new Func();//ç°åœ¨å¯ä»¥å‚è€ƒvar person = Object.create(oldObject); console.log(person.getInfo());//å®ƒæ‹¥æœ‰äº†Funcçš„å±æ€§å’Œæ–¹æ³• //&quot;Sean&quot; console.log(Func.prototype); // Func { name=&quot;Sean&quot;, getInfo=function()} JavaScriptæœ‰å‡ ç§ç±»å‹çš„å€¼ï¼Ÿï¼Œä½ èƒ½ç”»ä¸€ä¸‹ä»–ä»¬çš„å†…å­˜å›¾å—ï¼Ÿ æ ˆï¼šåŸå§‹æ•°æ®ç±»å‹ï¼ˆUndefinedï¼ŒNullï¼ŒBooleanï¼ŒNumberã€Stringï¼‰ å †ï¼šå¼•ç”¨æ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ã€æ•°ç»„å’Œå‡½æ•°ï¼‰ ä¸¤ç§ç±»å‹çš„åŒºåˆ«æ˜¯ï¼šå­˜å‚¨ä½ç½®ä¸åŒï¼› åŸå§‹æ•°æ®ç±»å‹ç›´æ¥å­˜å‚¨åœ¨æ ˆ(stack)ä¸­çš„ç®€å•æ•°æ®æ®µï¼Œå æ®ç©ºé—´å°ã€å¤§å°å›ºå®šï¼Œå±äºè¢«é¢‘ç¹ä½¿ç”¨æ•°æ®ï¼Œæ‰€ä»¥æ”¾å…¥æ ˆä¸­å­˜å‚¨ï¼› å¼•ç”¨æ•°æ®ç±»å‹å­˜å‚¨åœ¨å †(heap)ä¸­çš„å¯¹è±¡,å æ®ç©ºé—´å¤§ã€å¤§å°ä¸å›ºå®šã€‚å¦‚æœå­˜å‚¨åœ¨æ ˆä¸­ï¼Œå°†ä¼šå½±å“ç¨‹åºè¿è¡Œçš„æ€§èƒ½ï¼›å¼•ç”¨æ•°æ®ç±»å‹åœ¨æ ˆä¸­å­˜å‚¨äº†æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘å †ä¸­è¯¥å®ä½“çš„èµ·å§‹åœ°å€ã€‚å½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šé¦–å…ˆæ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œå–å¾—åœ°å€åä»å †ä¸­è·å¾—å®ä½“ å¦‚ä½•å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­—ï¼Œä¾‹å¦‚â€™12.3bâ€™? * parseFloat(&#39;12.3b&#39;); * æ­£åˆ™è¡¨è¾¾å¼ï¼Œ&#39;12.3b&#39;.match(/(\\d)+(\\.)?(\\d)+/g)[0] * 1, ä½†æ˜¯è¿™ä¸ªä¸å¤ªé è°±ï¼Œæä¾›ä¸€ç§æ€è·¯è€Œå·²ã€‚ å¦‚ä½•å°†æµ®ç‚¹æ•°ç‚¹å·¦è¾¹çš„æ•°æ¯ä¸‰ä½æ·»åŠ ä¸€ä¸ªé€—å·ï¼Œå¦‚12000000.11è½¬åŒ–ä¸ºã€12,000,000.11ã€? function commafy(num){ return num &amp;&amp; num .toString() .replace(/(\\d)(?=(\\d{3})+\\.)/g, function($1, $2){ return $2 + &#39;,&#39;; }); } å¦‚ä½•å®ç°æ•°ç»„çš„éšæœºæ’åºï¼Ÿ æ–¹æ³•ä¸€ï¼š ```javascript var arr = [1,2,3,4,5,6,7,8,9,10]; function randSort1(arr){ for(var i = 0,len = arr.length;i &lt; len; i++ ){ var rand = parseInt(Math.random()*len); var temp = arr[rand]; arr[rand] = arr[i]; arr[i] = temp; } return arr; } console.log(randSort1(arr)); ``` æ–¹æ³•äºŒï¼š ```javascript var arr = [1,2,3,4,5,6,7,8,9,10]; function randSort2(arr){ var mixedArray = []; while(arr.length &gt; 0){ var randomIndex = parseInt(Math.random()*arr.length); mixedArray.push(arr[randomIndex]); arr.splice(randomIndex, 1); } return mixedArray; } console.log(randSort2(arr)); ``` æ–¹æ³•ä¸‰ï¼š ```javascript var arr = [1,2,3,4,5,6,7,8,9,10]; arr.sort(function(){ return Math.random() - 0.5; }) console.log(arr); ``` Javascriptå¦‚ä½•å®ç°ç»§æ‰¿ï¼Ÿ 1ã€æ„é€ ç»§æ‰¿ 2ã€åŸå‹ç»§æ‰¿ 3ã€å®ä¾‹ç»§æ‰¿ 4ã€æ‹·è´ç»§æ‰¿ åŸå‹prototypeæœºåˆ¶æˆ–applyå’Œcallæ–¹æ³•å»å®ç°è¾ƒç®€å•ï¼Œå»ºè®®ä½¿ç”¨æ„é€ å‡½æ•°ä¸åŸå‹æ··åˆæ–¹å¼ã€‚ ```javascript function Parent(){ this.name = &#39;wang&#39;; } function Child(){ this.age = 28; } Child.prototype = new Parent();//ç»§æ‰¿äº†Parentï¼Œé€šè¿‡åŸå‹ var demo = new Child(); alert(demo.age); alert(demo.name);//å¾—åˆ°è¢«ç»§æ‰¿çš„å±æ€§ ``` JavaScriptç»§æ‰¿çš„å‡ ç§å®ç°æ–¹å¼ï¼Ÿ å‚è€ƒï¼šæ„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œéæ„é€ å‡½æ•°çš„ç»§æ‰¿ï¼› javascriptåˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼ï¼Ÿ javascriptåˆ›å»ºå¯¹è±¡ç®€å•çš„è¯´,æ— éå°±æ˜¯ä½¿ç”¨å†…ç½®å¯¹è±¡æˆ–å„ç§è‡ªå®šä¹‰å¯¹è±¡ï¼Œå½“ç„¶è¿˜å¯ä»¥ç”¨JSONï¼›ä½†å†™æ³•æœ‰å¾ˆå¤šç§ï¼Œä¹Ÿèƒ½æ··åˆä½¿ç”¨ã€‚ 1ã€å¯¹è±¡å­—é¢é‡çš„æ–¹å¼ person={firstname:&quot;Mark&quot;,lastname:&quot;Yun&quot;,age:25,eyecolor:&quot;black&quot;}; 2ã€ç”¨functionæ¥æ¨¡æ‹Ÿæ— å‚çš„æ„é€ å‡½æ•° function Person(){} var person=new Person();//å®šä¹‰ä¸€ä¸ªfunctionï¼Œå¦‚æœä½¿ç”¨new&quot;å®ä¾‹åŒ–&quot;,è¯¥functionå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªClass person.name=&quot;Mark&quot;; person.age=&quot;25&quot;; person.work=function(){ alert(person.name+&quot; hello...&quot;); } person.work(); 3ã€ç”¨functionæ¥æ¨¡æ‹Ÿå‚æ„é€ å‡½æ•°æ¥å®ç°ï¼ˆç”¨thiså…³é”®å­—å®šä¹‰æ„é€ çš„ä¸Šä¸‹æ–‡å±æ€§ï¼‰ function Pet(name,age,hobby){ this.name=name;//thisä½œç”¨åŸŸï¼šå½“å‰å¯¹è±¡ this.age=age; this.hobby=hobby; this.eat=function(){ alert(&quot;æˆ‘å«&quot;+this.name+&quot;,æˆ‘å–œæ¬¢&quot;+this.hobby+&quot;,æ˜¯ä¸ªç¨‹åºå‘˜&quot;); } } var maidou =new Pet(&quot;éº¦å…œ&quot;,25,&quot;coding&quot;);//å®ä¾‹åŒ–ã€åˆ›å»ºå¯¹è±¡ maidou.eat();//è°ƒç”¨eatæ–¹æ³• 4ã€ç”¨å·¥å‚æ–¹å¼æ¥åˆ›å»ºï¼ˆå†…ç½®å¯¹è±¡ï¼‰ var wcDog =new Object(); wcDog.name=&quot;æ—ºè´¢&quot;; wcDog.age=3; wcDog.work=function(){ alert(&quot;æˆ‘æ˜¯&quot;+wcDog.name+&quot;,æ±ªæ±ªæ±ª......&quot;); } wcDog.work(); 5ã€ç”¨åŸå‹æ–¹å¼æ¥åˆ›å»º function Dog(){ } Dog.prototype.name=&quot;æ—ºè´¢&quot;; Dog.prototype.eat=function(){ alert(this.name+&quot;æ˜¯ä¸ªåƒè´§&quot;); } var wangcai =new Dog(); wangcai.eat(); 5ã€ç”¨æ··åˆæ–¹å¼æ¥åˆ›å»º function Car(name,price){ this.name=name; this.price=price; } Car.prototype.sell=function(){ alert(&quot;æˆ‘æ˜¯&quot;+this.name+&quot;ï¼Œæˆ‘ç°åœ¨å–&quot;+this.price+&quot;ä¸‡å…ƒ&quot;); } var camry =new Car(&quot;å‡¯ç¾ç‘&quot;,27); camry.sell(); Javascriptä½œç”¨é“¾åŸŸ? å…¨å±€å‡½æ•°æ— æ³•æŸ¥çœ‹å±€éƒ¨å‡½æ•°çš„å†…éƒ¨ç»†èŠ‚ï¼Œä½†å±€éƒ¨å‡½æ•°å¯ä»¥æŸ¥çœ‹å…¶ä¸Šå±‚çš„å‡½æ•°ç»†èŠ‚ï¼Œç›´è‡³å…¨å±€ç»†èŠ‚ã€‚ å½“éœ€è¦ä»å±€éƒ¨å‡½æ•°æŸ¥æ‰¾æŸä¸€å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå¦‚æœå½“å‰ä½œç”¨åŸŸæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šä¸Šæº¯åˆ°ä¸Šå±‚ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œ ç›´è‡³å…¨å±€å‡½æ•°ï¼Œè¿™ç§ç»„ç»‡å½¢å¼å°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚ è°ˆè°ˆThiså¯¹è±¡çš„ç†è§£ã€‚ thisæ€»æ˜¯æŒ‡å‘å‡½æ•°çš„ç›´æ¥è°ƒç”¨è€…ï¼ˆè€Œéé—´æ¥è°ƒç”¨è€…ï¼‰ï¼› å¦‚æœæœ‰newå…³é”®å­—ï¼ŒthisæŒ‡å‘newå‡ºæ¥çš„é‚£ä¸ªå¯¹è±¡ï¼› åœ¨äº‹ä»¶ä¸­ï¼ŒthisæŒ‡å‘è§¦å‘è¿™ä¸ªäº‹ä»¶çš„å¯¹è±¡ï¼Œç‰¹æ®Šçš„æ˜¯ï¼ŒIEä¸­çš„attachEventä¸­çš„thisæ€»æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡Windowï¼› evalæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ å®ƒçš„åŠŸèƒ½æ˜¯æŠŠå¯¹åº”çš„å­—ç¬¦ä¸²è§£ææˆJSä»£ç å¹¶è¿è¡Œï¼› åº”è¯¥é¿å…ä½¿ç”¨evalï¼Œä¸å®‰å…¨ï¼Œéå¸¸è€—æ€§èƒ½ï¼ˆ2æ¬¡ï¼Œä¸€æ¬¡è§£ææˆjsè¯­å¥ï¼Œä¸€æ¬¡æ‰§è¡Œï¼‰ã€‚ ç”±JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJSONå¯¹è±¡çš„æ—¶å€™å¯ä»¥ç”¨evalï¼Œvar obj =eval(&#39;(&#39;+ str +&#39;)&#39;); ä»€ä¹ˆæ˜¯windowå¯¹è±¡? ä»€ä¹ˆæ˜¯documentå¯¹è±¡? windowå¯¹è±¡æ˜¯æŒ‡æµè§ˆå™¨æ‰“å¼€çš„çª—å£ã€‚ documentå¯¹è±¡æ˜¯Documentdå¯¹è±¡ï¼ˆHTML æ–‡æ¡£å¯¹è±¡ï¼‰çš„ä¸€ä¸ªåªè¯»å¼•ç”¨ï¼Œwindowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚ nullï¼Œundefined çš„åŒºåˆ«ï¼Ÿ null è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡æ˜¯â€œæ²¡æœ‰å€¼â€çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å€¼ä¸ºâ€œç©ºâ€ï¼› undefined è¡¨ç¤ºä¸€ä¸ªå˜é‡å£°æ˜äº†æ²¡æœ‰åˆå§‹åŒ–(èµ‹å€¼)ï¼› undefinedä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONï¼Œè€Œnullæ˜¯ï¼› undefinedçš„ç±»å‹(typeof)æ˜¯undefinedï¼› nullçš„ç±»å‹(typeof)æ˜¯objectï¼› Javascriptå°†æœªèµ‹å€¼çš„å˜é‡é»˜è®¤å€¼è®¾ä¸ºundefinedï¼› Javascriptä»æ¥ä¸ä¼šå°†å˜é‡è®¾ä¸ºnullã€‚å®ƒæ˜¯ç”¨æ¥è®©ç¨‹åºå‘˜è¡¨æ˜æŸä¸ªç”¨varå£°æ˜çš„å˜é‡æ—¶æ²¡æœ‰å€¼çš„ã€‚ typeof undefined //&quot;undefined&quot; undefined :æ˜¯ä¸€ä¸ªè¡¨ç¤º&quot;æ— &quot;çš„åŸå§‹å€¼æˆ–è€…è¯´è¡¨ç¤º&quot;ç¼ºå°‘å€¼&quot;ï¼Œå°±æ˜¯æ­¤å¤„åº”è¯¥æœ‰ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å®šä¹‰ã€‚å½“å°è¯•è¯»å–æ—¶ä¼šè¿”å› undefinedï¼› ä¾‹å¦‚å˜é‡è¢«å£°æ˜äº†ï¼Œä½†æ²¡æœ‰èµ‹å€¼æ—¶ï¼Œå°±ç­‰äºundefined typeof null //&quot;object&quot; null : æ˜¯ä¸€ä¸ªå¯¹è±¡(ç©ºå¯¹è±¡, æ²¡æœ‰ä»»ä½•å±æ€§å’Œæ–¹æ³•)ï¼› ä¾‹å¦‚ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°çš„å‚æ•°ä¸æ˜¯å¯¹è±¡ï¼› æ³¨æ„ï¼š åœ¨éªŒè¯nullæ—¶ï¼Œä¸€å®šè¦ä½¿ç”¨ === ï¼Œå› ä¸º == æ— æ³•åˆ†åˆ« null å’Œ undefined null == undefined // true null === undefined // false å†æ¥ä¸€ä¸ªä¾‹å­ï¼š null Qï¼šæœ‰å¼ ä¸‰è¿™ä¸ªäººä¹ˆï¼Ÿ Aï¼šæœ‰ï¼ Qï¼šå¼ ä¸‰æœ‰æˆ¿å­ä¹ˆï¼Ÿ Aï¼šæ²¡æœ‰ï¼ undefined Qï¼šæœ‰å¼ ä¸‰è¿™ä¸ªäººä¹ˆï¼Ÿ Aï¼šæœ‰ï¼ Q: å¼ ä¸‰æœ‰å¤šå°‘å²ï¼Ÿ A: ä¸çŸ¥é“ï¼ˆæ²¡æœ‰è¢«å‘Šè¯‰ï¼‰ å‚è€ƒé˜…è¯»ï¼š[undefinedä¸nullçš„åŒºåˆ«](http://www.ruanyifeng.com/blog/2014/03/undefined-vs-null.html) å†™ä¸€ä¸ªé€šç”¨çš„äº‹ä»¶ä¾¦å¬å™¨å‡½æ•°ã€‚ // event(äº‹ä»¶)å·¥å…·é›†ï¼Œæ¥æºï¼šgithub.com/markyun markyun.Event = { // é¡µé¢åŠ è½½å®Œæˆå readyEvent : function(fn) { if (fn==null) { fn=document; } var oldonload = window.onload; if (typeof window.onload != &#39;function&#39;) { window.onload = fn; } else { window.onload = function() { oldonload(); fn(); }; } }, // è§†èƒ½åŠ›åˆ†åˆ«ä½¿ç”¨dom0||dom2||IEæ–¹å¼ æ¥ç»‘å®šäº‹ä»¶ // å‚æ•°ï¼š æ“ä½œçš„å…ƒç´ ,äº‹ä»¶åç§° ,äº‹ä»¶å¤„ç†ç¨‹åº addEvent : function(element, type, handler) { if (element.addEventListener) { //äº‹ä»¶ç±»å‹ã€éœ€è¦æ‰§è¡Œçš„å‡½æ•°ã€æ˜¯å¦æ•æ‰ element.addEventListener(type, handler, false); } else if (element.attachEvent) { element.attachEvent(&#39;on&#39; + type, function() { handler.call(element); }); } else { element[&#39;on&#39; + type] = handler; } }, // ç§»é™¤äº‹ä»¶ removeEvent : function(element, type, handler) { if (element.removeEventListener) { element.removeEventListener(type, handler, false); } else if (element.datachEvent) { element.detachEvent(&#39;on&#39; + type, handler); } else { element[&#39;on&#39; + type] = null; } }, // é˜»æ­¢äº‹ä»¶ (ä¸»è¦æ˜¯äº‹ä»¶å†’æ³¡ï¼Œå› ä¸ºIEä¸æ”¯æŒäº‹ä»¶æ•è·) stopPropagation : function(ev) { if (ev.stopPropagation) { ev.stopPropagation(); } else { ev.cancelBubble = true; } }, // å–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸º preventDefault : function(event) { if (event.preventDefault) { event.preventDefault(); } else { event.returnValue = false; } }, // è·å–äº‹ä»¶ç›®æ ‡ getTarget : function(event) { return event.target || event.srcElement; }, // è·å–eventå¯¹è±¡çš„å¼•ç”¨ï¼Œå–åˆ°äº‹ä»¶çš„æ‰€æœ‰ä¿¡æ¯ï¼Œç¡®ä¿éšæ—¶èƒ½ä½¿ç”¨eventï¼› getEvent : function(e) { var ev = e || window.event; if (!ev) { var c = this.getEvent.caller; while (c) { ev = c.arguments[0]; if (ev &amp;&amp; Event == ev.constructor) { break; } c = c.caller; } } return ev; } }; [â€œ1â€, â€œ2â€, â€œ3â€].map(parseInt) ç­”æ¡ˆæ˜¯å¤šå°‘ï¼Ÿ parseInt() å‡½æ•°èƒ½è§£æä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œéœ€è¦ä¸¤ä¸ªå‚æ•° (val, radix)ï¼Œ å…¶ä¸­ radix è¡¨ç¤ºè¦è§£æçš„æ•°å­—çš„åŸºæ•°ã€‚ã€è¯¥å€¼ä»‹äº 2 ~ 36 ä¹‹é—´ï¼Œå¹¶ä¸”å­—ç¬¦ä¸²ä¸­çš„æ•°å­—ä¸èƒ½å¤§äºradixæ‰èƒ½æ­£ç¡®è¿”å›æ•°å­—ç»“æœå€¼ã€‘; ä½†æ­¤å¤„ map ä¼ äº† 3 ä¸ª (element, index, array),æˆ‘ä»¬é‡å†™parseIntå‡½æ•°æµ‹è¯•ä¸€ä¸‹æ˜¯å¦ç¬¦åˆä¸Šé¢çš„è§„åˆ™ã€‚ function parseInt(str, radix) { return str+&#39;-&#39;+radix; }; var a=[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;]; a.map(parseInt); // [&quot;1-0&quot;, &quot;2-1&quot;, &quot;3-2&quot;] ä¸èƒ½å¤§äºradix å› ä¸ºäºŒè¿›åˆ¶é‡Œé¢ï¼Œæ²¡æœ‰æ•°å­—3,å¯¼è‡´å‡ºç°è¶…èŒƒå›´çš„radixèµ‹å€¼å’Œä¸åˆæ³•çš„è¿›åˆ¶è§£æï¼Œæ‰ä¼šè¿”å›NaN æ‰€ä»¥[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;].map(parseInt) ç­”æ¡ˆä¹Ÿå°±æ˜¯ï¼š[1, NaN, NaN] è¯¦ç»†è§£æï¼šhttp://blog.csdn.net/justjavac/article/details/19473199 äº‹ä»¶æ˜¯ï¼ŸIEä¸ç«ç‹çš„äº‹ä»¶æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å¦‚ä½•é˜»æ­¢å†’æ³¡ï¼Ÿ 1. æˆ‘ä»¬åœ¨ç½‘é¡µä¸­çš„æŸä¸ªæ“ä½œï¼ˆæœ‰çš„æ“ä½œå¯¹åº”å¤šä¸ªäº‹ä»¶ï¼‰ã€‚ä¾‹å¦‚ï¼šå½“æˆ‘ä»¬ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å°±ä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶ã€‚æ˜¯å¯ä»¥è¢« JavaScript ä¾¦æµ‹åˆ°çš„è¡Œä¸ºã€‚ 2. äº‹ä»¶å¤„ç†æœºåˆ¶ï¼šIEæ˜¯äº‹ä»¶å†’æ³¡ã€FirefoxåŒæ—¶æ”¯æŒä¸¤ç§äº‹ä»¶æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯ï¼šæ•è·å‹äº‹ä»¶å’Œå†’æ³¡å‹äº‹ä»¶ï¼› 3. ev.stopPropagation();ï¼ˆæ—§ieçš„æ–¹æ³• ev.cancelBubble = true;ï¼‰ ä»€ä¹ˆæ˜¯é—­åŒ…ï¼ˆclosureï¼‰ï¼Œä¸ºä»€ä¹ˆè¦ç”¨å®ƒï¼Ÿ é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ï¼Œåˆ›å»ºé—­åŒ…çš„æœ€å¸¸è§çš„æ–¹å¼å°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡å¦ä¸€ä¸ªå‡½æ•°è®¿é—®è¿™ä¸ªå‡½æ•°çš„å±€éƒ¨å˜é‡,åˆ©ç”¨é—­åŒ…å¯ä»¥çªç ´ä½œç”¨é“¾åŸŸï¼Œå°†å‡½æ•°å†…éƒ¨çš„å˜é‡å’Œæ–¹æ³•ä¼ é€’åˆ°å¤–éƒ¨ã€‚ é—­åŒ…çš„ç‰¹æ€§ï¼š 1.å‡½æ•°å†…å†åµŒå¥—å‡½æ•° 2.å†…éƒ¨å‡½æ•°å¯ä»¥å¼•ç”¨å¤–å±‚çš„å‚æ•°å’Œå˜é‡ 3.å‚æ•°å’Œå˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ //lièŠ‚ç‚¹çš„onclickäº‹ä»¶éƒ½èƒ½æ­£ç¡®çš„å¼¹å‡ºå½“å‰è¢«ç‚¹å‡»çš„liç´¢å¼• &lt;ul id=&quot;testUL&quot;&gt; &lt;li&gt; index = 0&lt;/li&gt; &lt;li&gt; index = 1&lt;/li&gt; &lt;li&gt; index = 2&lt;/li&gt; &lt;li&gt; index = 3&lt;/li&gt; &lt;/ul&gt; &lt;script type=&quot;text/javascript&quot;&gt; var nodes = document.getElementsByTagName(&quot;li&quot;); for(i = 0;i&lt;nodes.length;i+= 1){ nodes[i].onclick = (function(i){ return function() { console.log(i); } //ä¸ç”¨é—­åŒ…çš„è¯ï¼Œå€¼æ¯æ¬¡éƒ½æ˜¯4 })(i); } &lt;/script&gt; æ‰§è¡Œsay667()å,say667()é—­åŒ…å†…éƒ¨å˜é‡ä¼šå­˜åœ¨,è€Œé—­åŒ…å†…éƒ¨å‡½æ•°çš„å†…éƒ¨å˜é‡ä¸ä¼šå­˜åœ¨ ä½¿å¾—Javascriptçš„åƒåœ¾å›æ”¶æœºåˆ¶GCä¸ä¼šæ”¶å›say667()æ‰€å ç”¨çš„èµ„æº å› ä¸ºsay667()çš„å†…éƒ¨å‡½æ•°çš„æ‰§è¡Œéœ€è¦ä¾èµ–say667()ä¸­çš„å˜é‡ è¿™æ˜¯å¯¹é—­åŒ…ä½œç”¨çš„éå¸¸ç›´ç™½çš„æè¿° function say667() { // Local variable that ends up within closure var num = 666; var sayAlert = function() { alert(num); } num++; return sayAlert; } var sayAlert = say667(); sayAlert()//æ‰§è¡Œç»“æœåº”è¯¥å¼¹å‡ºçš„667 javascript ä»£ç ä¸­çš„â€use strictâ€;æ˜¯ä»€ä¹ˆæ„æ€ ? ä½¿ç”¨å®ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ use strictæ˜¯ä¸€ç§ECMAscript 5 æ·»åŠ çš„ï¼ˆä¸¥æ ¼ï¼‰è¿è¡Œæ¨¡å¼,è¿™ç§æ¨¡å¼ä½¿å¾— Javascript åœ¨æ›´ä¸¥æ ¼çš„æ¡ä»¶ä¸‹è¿è¡Œ, ä½¿JSç¼–ç æ›´åŠ è§„èŒƒåŒ–çš„æ¨¡å¼,æ¶ˆé™¤Javascriptè¯­æ³•çš„ä¸€äº›ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘ä¸€äº›æ€ªå¼‚è¡Œä¸ºã€‚ é»˜è®¤æ”¯æŒçš„ç³Ÿç³•ç‰¹æ€§éƒ½ä¼šè¢«ç¦ç”¨ï¼Œæ¯”å¦‚ä¸èƒ½ç”¨withï¼Œä¹Ÿä¸èƒ½åœ¨æ„å¤–çš„æƒ…å†µä¸‹ç»™å…¨å±€å˜é‡èµ‹å€¼; å…¨å±€å˜é‡çš„æ˜¾ç¤ºå£°æ˜,å‡½æ•°å¿…é¡»å£°æ˜åœ¨é¡¶å±‚ï¼Œä¸å…è®¸åœ¨éå‡½æ•°ä»£ç å—å†…å£°æ˜å‡½æ•°,arguments.calleeä¹Ÿä¸å…è®¸ä½¿ç”¨ï¼› æ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸€äº›ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨,é™åˆ¶å‡½æ•°ä¸­çš„argumentsä¿®æ”¹ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹çš„evalå‡½æ•°çš„è¡Œä¸ºå’Œéä¸¥æ ¼æ¨¡å¼çš„ä¹Ÿä¸ç›¸åŒ; æé«˜ç¼–è¯‘å™¨æ•ˆç‡ï¼Œå¢åŠ è¿è¡Œé€Ÿåº¦ï¼› ä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„Javascriptæ ‡å‡†åŒ–åšé“ºå«ã€‚ å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸä¸ªç±»ï¼Ÿ ä½¿ç”¨instanceof ï¼ˆå¾…å®Œå–„ï¼‰ if(a instanceof Person){ alert(&#39;yes&#39;); } newæ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆå‘¢? 1ã€åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¹¶ä¸” this å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ï¼ŒåŒæ—¶è¿˜ç»§æ‰¿äº†è¯¥å‡½æ•°çš„åŸå‹ã€‚ 2ã€å±æ€§å’Œæ–¹æ³•è¢«åŠ å…¥åˆ° this å¼•ç”¨çš„å¯¹è±¡ä¸­ã€‚ 3ã€æ–°åˆ›å»ºçš„å¯¹è±¡ç”± this æ‰€å¼•ç”¨ï¼Œå¹¶ä¸”æœ€åéšå¼çš„è¿”å› this ã€‚ var obj = {}; obj.__proto__ = Base.prototype; Base.call(obj); ç”¨åŸç”ŸJavaScriptçš„å®ç°è¿‡ä»€ä¹ˆåŠŸèƒ½å—ï¼Ÿ Javascriptä¸­ï¼Œæœ‰ä¸€ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œæ—¶å¯¹è±¡æŸ¥æ‰¾æ—¶ï¼Œæ°¸è¿œä¸ä¼šå»æŸ¥æ‰¾åŸå‹ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ï¼Ÿ hasOwnProperty javaScriptä¸­hasOwnPropertyå‡½æ•°æ–¹æ³•æ˜¯è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡å‡ºä¸€ä¸ªå¯¹è±¡æ˜¯å¦å…·æœ‰æŒ‡å®šåç§°çš„å±æ€§ã€‚æ­¤æ–¹æ³•æ— æ³•æ£€æŸ¥è¯¥å¯¹è±¡çš„åŸå‹é“¾ä¸­æ˜¯å¦å…·æœ‰è¯¥å±æ€§ï¼›è¯¥å±æ€§å¿…é¡»æ˜¯å¯¹è±¡æœ¬èº«çš„ä¸€ä¸ªæˆå‘˜ã€‚ ä½¿ç”¨æ–¹æ³•ï¼š object.hasOwnProperty(proName) å…¶ä¸­å‚æ•°objectæ˜¯å¿…é€‰é¡¹ã€‚ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ã€‚ proNameæ˜¯å¿…é€‰é¡¹ã€‚ä¸€ä¸ªå±æ€§åç§°çš„å­—ç¬¦ä¸²å€¼ã€‚ å¦‚æœ object å…·æœ‰æŒ‡å®šåç§°çš„å±æ€§ï¼Œé‚£ä¹ˆJavaScriptä¸­hasOwnPropertyå‡½æ•°æ–¹æ³•è¿”å› trueï¼Œåä¹‹åˆ™è¿”å› falseã€‚ JSON çš„äº†è§£ï¼Ÿ JSON(JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚ å®ƒæ˜¯åŸºäºJavaScriptçš„ä¸€ä¸ªå­é›†ã€‚æ•°æ®æ ¼å¼ç®€å•, æ˜“äºè¯»å†™, å ç”¨å¸¦å®½å° å¦‚ï¼š{&quot;age&quot;:&quot;12&quot;, &quot;name&quot;:&quot;back&quot;} JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJSONå¯¹è±¡: var obj =eval(&#39;(&#39;+ str +&#39;)&#39;); var obj = str.parseJSON(); var obj = JSON.parse(str); JSONå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼š var last=obj.toJSONString(); var last=JSON.stringify(obj); [].forEach.call($$(&quot;*&quot;),function(a){a.style.outline=&quot;1px solid #&quot;+(~~(Math.random()*(1&lt;&lt;24))).toString(16)}) èƒ½è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç çš„æ„æ€å—ï¼Ÿ jså»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ deferå’Œasyncã€åŠ¨æ€åˆ›å»ºDOMæ–¹å¼ï¼ˆç”¨å¾—æœ€å¤šï¼‰ã€æŒ‰éœ€å¼‚æ­¥è½½å…¥js Ajax æ˜¯ä»€ä¹ˆ? å¦‚ä½•åˆ›å»ºä¸€ä¸ªAjaxï¼Ÿ ajaxçš„å…¨ç§°ï¼šAsynchronous Javascript And XMLã€‚ å¼‚æ­¥ä¼ è¾“+js+xmlã€‚ æ‰€è°“å¼‚æ­¥ï¼Œåœ¨è¿™é‡Œç®€å•åœ°è§£é‡Šå°±æ˜¯ï¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¿…ç­‰å¾…ç»“æœï¼Œè€Œæ˜¯å¯ä»¥åŒæ—¶åšå…¶ä»–çš„äº‹æƒ…ï¼Œç­‰åˆ°æœ‰äº†ç»“æœå®ƒè‡ªå·±ä¼šæ ¹æ®è®¾å®šè¿›è¡Œåç»­æ“ä½œï¼Œä¸æ­¤åŒæ—¶ï¼Œé¡µé¢æ˜¯ä¸ä¼šå‘ç”Ÿæ•´é¡µåˆ·æ–°çš„ï¼Œæé«˜äº†ç”¨æˆ·ä½“éªŒã€‚ (1)åˆ›å»ºXMLHttpRequestå¯¹è±¡,ä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªå¼‚æ­¥è°ƒç”¨å¯¹è±¡ (2)åˆ›å»ºä¸€ä¸ªæ–°çš„HTTPè¯·æ±‚,å¹¶æŒ‡å®šè¯¥HTTPè¯·æ±‚çš„æ–¹æ³•ã€URLåŠéªŒè¯ä¿¡æ¯ (3)è®¾ç½®å“åº”HTTPè¯·æ±‚çŠ¶æ€å˜åŒ–çš„å‡½æ•° (4)å‘é€HTTPè¯·æ±‚ (5)è·å–å¼‚æ­¥è°ƒç”¨è¿”å›çš„æ•°æ® (6)ä½¿ç”¨JavaScriptå’ŒDOMå®ç°å±€éƒ¨åˆ·æ–° Ajax è§£å†³æµè§ˆå™¨ç¼“å­˜é—®é¢˜ï¼Ÿ 1ã€åœ¨ajaxå‘é€è¯·æ±‚å‰åŠ ä¸Š anyAjaxObj.setRequestHeader(&quot;If-Modified-Since&quot;,&quot;0&quot;)ã€‚ 2ã€åœ¨ajaxå‘é€è¯·æ±‚å‰åŠ ä¸Š anyAjaxObj.setRequestHeader(&quot;Cache-Control&quot;,&quot;no-cache&quot;)ã€‚ 3ã€åœ¨URLåé¢åŠ ä¸Šä¸€ä¸ªéšæœºæ•°ï¼š &quot;fresh=&quot; + Math.random();ã€‚ 4ã€åœ¨URLåé¢åŠ ä¸Šæ—¶é—´æ“ï¼š&quot;nowtime=&quot; + new Date().getTime();ã€‚ 5ã€å¦‚æœæ˜¯ä½¿ç”¨jQueryï¼Œç›´æ¥è¿™æ ·å°±å¯ä»¥äº† $.ajaxSetup({cache:false})ã€‚è¿™æ ·é¡µé¢çš„æ‰€æœ‰ajaxéƒ½ä¼šæ‰§è¡Œè¿™æ¡è¯­å¥å°±æ˜¯ä¸éœ€è¦ä¿å­˜ç¼“å­˜è®°å½•ã€‚ åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«? åŒæ­¥çš„æ¦‚å¿µåº”è¯¥æ˜¯æ¥è‡ªäºOSä¸­å…³äºåŒæ­¥çš„æ¦‚å¿µ:ä¸åŒè¿›ç¨‹ä¸ºååŒå®ŒæˆæŸé¡¹å·¥ä½œè€Œåœ¨å…ˆåæ¬¡åºä¸Šè°ƒæ•´(é€šè¿‡é˜»å¡,å”¤é†’ç­‰æ–¹å¼).åŒæ­¥å¼ºè°ƒçš„æ˜¯é¡ºåºæ€§.è°å…ˆè°å.å¼‚æ­¥åˆ™ä¸å­˜åœ¨è¿™ç§é¡ºåºæ€§. åŒæ­¥ï¼šæµè§ˆå™¨è®¿é—®æœåŠ¡å™¨è¯·æ±‚ï¼Œç”¨æˆ·çœ‹å¾—åˆ°é¡µé¢åˆ·æ–°ï¼Œé‡æ–°å‘è¯·æ±‚,ç­‰è¯·æ±‚å®Œï¼Œé¡µé¢åˆ·æ–°ï¼Œæ–°å†…å®¹å‡ºç°ï¼Œç”¨æˆ·çœ‹åˆ°æ–°å†…å®¹,è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚ å¼‚æ­¥ï¼šæµè§ˆå™¨è®¿é—®æœåŠ¡å™¨è¯·æ±‚ï¼Œç”¨æˆ·æ­£å¸¸æ“ä½œï¼Œæµè§ˆå™¨åç«¯è¿›è¡Œè¯·æ±‚ã€‚ç­‰è¯·æ±‚å®Œï¼Œé¡µé¢ä¸åˆ·æ–°ï¼Œæ–°å†…å®¹ä¹Ÿä¼šå‡ºç°ï¼Œç”¨æˆ·çœ‹åˆ°æ–°å†…å®¹ã€‚ ï¼ˆå¾…å®Œå–„ï¼‰ å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜? jsonpã€ iframeã€window.nameã€window.postMessageã€æœåŠ¡å™¨ä¸Šè®¾ç½®ä»£ç†é¡µé¢ é¡µé¢ç¼–ç å’Œè¢«è¯·æ±‚çš„èµ„æºç¼–ç å¦‚æœä¸ä¸€è‡´å¦‚ä½•å¤„ç†ï¼Ÿ æ¨¡å—åŒ–å¼€å‘æ€ä¹ˆåšï¼Ÿ ç«‹å³æ‰§è¡Œå‡½æ•°,ä¸æš´éœ²ç§æœ‰æˆå‘˜ var module1 = (function(){ var _count = 0; var m1 = function(){ //... }; var m2 = function(){ //... }; return { m1 : m1, m2 : m2 }; })(); ï¼ˆå¾…å®Œå–„ï¼‰ AMDï¼ˆModules/Asynchronous-Definitionï¼‰ã€CMDï¼ˆCommon Module Definitionï¼‰è§„èŒƒåŒºåˆ«ï¼Ÿ AMD è§„èŒƒåœ¨è¿™é‡Œï¼šhttps://github.com/amdjs/amdjs-api/wiki/AMD CMD è§„èŒƒåœ¨è¿™é‡Œï¼šhttps://github.com/seajs/seajs/issues/242 Asynchronous Module Definitionï¼Œå¼‚æ­¥æ¨¡å—å®šä¹‰ï¼Œæ‰€æœ‰çš„æ¨¡å—å°†è¢«å¼‚æ­¥åŠ è½½ï¼Œæ¨¡å—åŠ è½½ä¸å½±å“åé¢è¯­å¥è¿è¡Œã€‚æ‰€æœ‰ä¾èµ–æŸäº›æ¨¡å—çš„è¯­å¥å‡æ”¾ç½®åœ¨å›è°ƒå‡½æ•°ä¸­ã€‚ åŒºåˆ«ï¼š 1. å¯¹äºä¾èµ–çš„æ¨¡å—ï¼ŒAMD æ˜¯æå‰æ‰§è¡Œï¼ŒCMD æ˜¯å»¶è¿Ÿæ‰§è¡Œã€‚ä¸è¿‡ RequireJS ä» 2.0 å¼€å§‹ï¼Œä¹Ÿæ”¹æˆå¯ä»¥å»¶è¿Ÿæ‰§è¡Œï¼ˆæ ¹æ®å†™æ³•ä¸åŒï¼Œå¤„ç†æ–¹å¼ä¸åŒï¼‰ã€‚CMD æ¨å´‡ as lazy as possible. 2. CMD æ¨å´‡ä¾èµ–å°±è¿‘ï¼ŒAMD æ¨å´‡ä¾èµ–å‰ç½®ã€‚çœ‹ä»£ç ï¼š // CMD define(function(require, exports, module) { var a = require(&#39;./a&#39;) a.doSomething() // æ­¤å¤„ç•¥å» 100 è¡Œ var b = require(&#39;./b&#39;) // ä¾èµ–å¯ä»¥å°±è¿‘ä¹¦å†™ b.doSomething() // ... }) // AMD é»˜è®¤æ¨è define([&#39;./a&#39;, &#39;./b&#39;], function(a, b) { // ä¾èµ–å¿…é¡»ä¸€å¼€å§‹å°±å†™å¥½ a.doSomething() // æ­¤å¤„ç•¥å» 100 è¡Œ b.doSomething() // ... }) requireJSçš„æ ¸å¿ƒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¦‚ä½•åŠ¨æ€åŠ è½½çš„ï¼Ÿå¦‚ä½•é¿å…å¤šæ¬¡åŠ è½½çš„ï¼Ÿå¦‚ä½•ç¼“å­˜çš„ï¼Ÿï¼‰ å‚è€ƒï¼šhttp://annn.me/how-to-realize-cmd-loader/ JSæ¨¡å—åŠ è½½å™¨çš„è½®å­æ€ä¹ˆé€ ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•å®ç°ä¸€ä¸ªæ¨¡å—åŠ è½½å™¨ï¼Ÿ è°ˆä¸€è°ˆä½ å¯¹ECMAScript6çš„äº†è§£ï¼Ÿ ECMAScript6 æ€ä¹ˆå†™classä¹ˆï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°classè¿™ç§ä¸œè¥¿? å¼‚æ­¥åŠ è½½JSçš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ (1) deferï¼Œåªæ”¯æŒIE (2) asyncï¼š (3) åˆ›å»ºscriptï¼Œæ’å…¥åˆ°DOMä¸­ï¼ŒåŠ è½½å®Œæ¯•åcallBack documen.writeå’Œ innerHTMLçš„åŒºåˆ« document.writeåªèƒ½é‡ç»˜æ•´ä¸ªé¡µé¢ innerHTMLå¯ä»¥é‡ç»˜é¡µé¢çš„ä¸€éƒ¨åˆ† DOMæ“ä½œâ€”â€”æ€æ ·æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹? ï¼ˆ1ï¼‰åˆ›å»ºæ–°èŠ‚ç‚¹ createDocumentFragment() //åˆ›å»ºä¸€ä¸ªDOMç‰‡æ®µ createElement() //åˆ›å»ºä¸€ä¸ªå…·ä½“çš„å…ƒç´  createTextNode() //åˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ ï¼ˆ2ï¼‰æ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ã€æ’å…¥ appendChild() removeChild() replaceChild() insertBefore() //åœ¨å·²æœ‰çš„å­èŠ‚ç‚¹å‰æ’å…¥ä¸€ä¸ªæ–°çš„å­èŠ‚ç‚¹ ï¼ˆ3ï¼‰æŸ¥æ‰¾ getElementsByTagName() //é€šè¿‡æ ‡ç­¾åç§° getElementsByName() //é€šè¿‡å…ƒç´ çš„Nameå±æ€§çš„å€¼(IEå®¹é”™èƒ½åŠ›è¾ƒå¼ºï¼Œä¼šå¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…æ‹¬idç­‰äºnameå€¼çš„) getElementById() //é€šè¿‡å…ƒç´ Idï¼Œå”¯ä¸€æ€§ .call() å’Œ .apply() çš„åŒºåˆ«ï¼Ÿ ä¾‹å­ä¸­ç”¨ add æ¥æ›¿æ¢ subï¼Œadd.call(sub,3,1) == add(3,1) ï¼Œæ‰€ä»¥è¿è¡Œç»“æœä¸ºï¼šalert(4); æ³¨æ„ï¼šjs ä¸­çš„å‡½æ•°å…¶å®æ˜¯å¯¹è±¡ï¼Œå‡½æ•°åæ˜¯å¯¹ Function å¯¹è±¡çš„å¼•ç”¨ã€‚ function add(a,b) { alert(a+b); } function sub(a,b) { alert(a-b); } add.call(sub,3,1); æ•°ç»„å’Œå¯¹è±¡æœ‰å“ªäº›åŸç”Ÿæ–¹æ³•ï¼Œåˆ—ä¸¾ä¸€ä¸‹ï¼Ÿ JS æ€ä¹ˆå®ç°ä¸€ä¸ªç±»ã€‚æ€ä¹ˆå®ä¾‹åŒ–è¿™ä¸ªç±» JavaScriptä¸­çš„ä½œç”¨åŸŸä¸å˜é‡å£°æ˜æå‡ï¼Ÿ å¦‚ä½•ç¼–å†™é«˜æ€§èƒ½çš„Javascriptï¼Ÿ é‚£äº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ JQueryçš„æºç çœ‹è¿‡å—ï¼Ÿèƒ½ä¸èƒ½ç®€å•æ¦‚å†µä¸€ä¸‹å®ƒçš„å®ç°åŸç†ï¼Ÿ jQuery.fnçš„initæ–¹æ³•è¿”å›çš„thisæŒ‡çš„æ˜¯ä»€ä¹ˆå¯¹è±¡ï¼Ÿä¸ºä»€ä¹ˆè¦è¿”å›thisï¼Ÿ jqueryä¸­å¦‚ä½•å°†æ•°ç»„è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸²ï¼Œç„¶åå†è½¬åŒ–å›æ¥ï¼Ÿ jQuery çš„å±æ€§æ‹·è´(extend)çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å®ç°æ·±æ‹·è´ï¼Ÿ jquery.extend ä¸ jquery.fn.extendçš„åŒºåˆ«ï¼Ÿ * jquery.extend ä¸ºjqueryç±»æ·»åŠ ç±»æ–¹æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºæ·»åŠ é™æ€æ–¹æ³• * jquery.fn.extend: æºç ä¸­jquery.fn = jquery.prototypeï¼Œæ‰€ä»¥å¯¹jquery.fnçš„æ‰©å±•ï¼Œå°±æ˜¯ä¸ºjqueryç±»æ·»åŠ æˆå‘˜å‡½æ•° ä½¿ç”¨ï¼š jquery.extendæ‰©å±•ï¼Œéœ€è¦é€šè¿‡jqueryç±»æ¥è°ƒç”¨ï¼Œè€Œjquery.fn.extendæ‰©å±•ï¼Œæ‰€æœ‰jqueryå®ä¾‹éƒ½å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚ jQuery çš„é˜Ÿåˆ—æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿé˜Ÿåˆ—å¯ä»¥ç”¨åœ¨å“ªäº›åœ°æ–¹ï¼Ÿ è°ˆä¸€ä¸‹Jqueryä¸­çš„bind(),live(),delegate(),on()çš„åŒºåˆ«ï¼Ÿ JQueryä¸€ä¸ªå¯¹è±¡å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªäº‹ä»¶ï¼Œè¿™æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ æ˜¯å¦çŸ¥é“è‡ªå®šä¹‰äº‹ä»¶ã€‚jQueryé‡Œçš„fireå‡½æ•°æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ jQuery æ˜¯é€šè¿‡å“ªä¸ªæ–¹æ³•å’Œ Sizzle é€‰æ‹©å™¨ç»“åˆçš„ï¼Ÿï¼ˆjQuery.fn.find()è¿›å…¥Sizzleï¼‰ é’ˆå¯¹ jQueryæ€§èƒ½çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ Jqueryä¸jQuery UI æœ‰å•¥åŒºåˆ«ï¼Ÿ *jQueryæ˜¯ä¸€ä¸ªjsåº“ï¼Œä¸»è¦æä¾›çš„åŠŸèƒ½æ˜¯é€‰æ‹©å™¨ï¼Œå±æ€§ä¿®æ”¹å’Œäº‹ä»¶ç»‘å®šç­‰ç­‰ã€‚ *jQuery UIåˆ™æ˜¯åœ¨jQueryçš„åŸºç¡€ä¸Šï¼Œåˆ©ç”¨jQueryçš„æ‰©å±•æ€§ï¼Œè®¾è®¡çš„æ’ä»¶ã€‚ æä¾›äº†ä¸€äº›å¸¸ç”¨çš„ç•Œé¢å…ƒç´ ï¼Œè¯¸å¦‚å¯¹è¯æ¡†ã€æ‹–åŠ¨è¡Œä¸ºã€æ”¹å˜å¤§å°è¡Œä¸ºç­‰ç­‰ JQueryçš„æºç çœ‹è¿‡å—ï¼Ÿèƒ½ä¸èƒ½ç®€å•è¯´ä¸€ä¸‹å®ƒçš„å®ç°åŸç†ï¼Ÿ jquery ä¸­å¦‚ä½•å°†æ•°ç»„è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸²ï¼Œç„¶åå†è½¬åŒ–å›æ¥ï¼Ÿ jQueryä¸­æ²¡æœ‰æä¾›è¿™ä¸ªåŠŸèƒ½ï¼Œæ‰€ä»¥ä½ éœ€è¦å…ˆç¼–å†™ä¸¤ä¸ªjQueryçš„æ‰©å±•ï¼š $.fn.stringifyArray = function(array) { return JSON.stringify(array) } $.fn.parseArray = function(array) { return JSON.parse(array) } ç„¶åè°ƒç”¨ï¼š $(&quot;&quot;).stringifyArray(array) jQueryå’ŒZeptoçš„åŒºåˆ«ï¼Ÿå„è‡ªçš„ä½¿ç”¨åœºæ™¯ï¼Ÿ é’ˆå¯¹ jQuery çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ *åŸºäºClassçš„é€‰æ‹©æ€§çš„æ€§èƒ½ç›¸å¯¹äºIdé€‰æ‹©å™¨å¼€é”€å¾ˆå¤§ï¼Œå› ä¸ºéœ€éå†æ‰€æœ‰DOMå…ƒç´ ã€‚ *é¢‘ç¹æ“ä½œçš„DOMï¼Œå…ˆç¼“å­˜èµ·æ¥å†æ“ä½œã€‚ç”¨Jqueryçš„é“¾å¼è°ƒç”¨æ›´å¥½ã€‚ æ¯”å¦‚ï¼švar str=$(&quot;a&quot;).attr(&quot;href&quot;); *for (var i = size; i &lt; arr.length; i++) {} for å¾ªç¯æ¯ä¸€æ¬¡å¾ªç¯éƒ½æŸ¥æ‰¾äº†æ•°ç»„ (arr) çš„.length å±æ€§ï¼Œåœ¨å¼€å§‹å¾ªç¯çš„æ—¶å€™è®¾ç½®ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨è¿™ä¸ªæ•°å­—ï¼Œå¯ä»¥è®©å¾ªç¯è·‘å¾—æ›´å¿«ï¼š for (var i = size, length = arr.length; i &lt; length; i++) {} Zeptoçš„ç‚¹é€é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ jQueryUIå¦‚ä½•è‡ªå®šä¹‰ç»„ä»¶? éœ€æ±‚ï¼šå®ç°ä¸€ä¸ªé¡µé¢æ“ä½œä¸ä¼šæ•´é¡µåˆ·æ–°çš„ç½‘ç«™ï¼Œå¹¶ä¸”èƒ½åœ¨æµè§ˆå™¨å‰è¿›ã€åé€€æ—¶æ­£ç¡®å“åº”ã€‚ç»™å‡ºä½ çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼Ÿ å¦‚ä½•åˆ¤æ–­å½“å‰è„šæœ¬è¿è¡Œåœ¨æµè§ˆå™¨è¿˜æ˜¯nodeç¯å¢ƒä¸­ï¼Ÿï¼ˆé˜¿é‡Œï¼‰ this === window ? &#39;browser&#39; : &#39;node&#39;; é€šè¿‡åˆ¤æ–­Globalå¯¹è±¡æ˜¯å¦ä¸ºwindowï¼Œå¦‚æœä¸ä¸ºwindowï¼Œå½“å‰è„šæœ¬æ²¡æœ‰è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ ç§»åŠ¨ç«¯æœ€å°è§¦æ§åŒºåŸŸæ˜¯å¤šå¤§ï¼Ÿ jQuery çš„ slideUpåŠ¨ç”» ï¼Œå¦‚æœç›®æ ‡å…ƒç´ æ˜¯è¢«å¤–éƒ¨äº‹ä»¶é©±åŠ¨, å½“é¼ æ ‡å¿«é€Ÿåœ°è¿ç»­è§¦å‘å¤–éƒ¨å…ƒç´ äº‹ä»¶, åŠ¨ç”»ä¼šæ»åçš„åå¤æ‰§è¡Œï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢? jquery stop(): å¦‚ï¼š$(&quot;#div&quot;).stop().animate({width:&quot;100px&quot;},100); æŠŠ Script æ ‡ç­¾ æ”¾åœ¨é¡µé¢çš„æœ€åº•éƒ¨çš„bodyå°é—­ä¹‹å‰ å’Œå°é—­ä¹‹åæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæµè§ˆå™¨ä¼šå¦‚ä½•è§£æå®ƒä»¬ï¼Ÿ ç§»åŠ¨ç«¯çš„ç‚¹å‡»äº‹ä»¶çš„æœ‰å»¶è¿Ÿï¼Œæ—¶é—´æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ï¼Ÿ æ€ä¹ˆè§£å†³è¿™ä¸ªå»¶æ—¶ï¼Ÿï¼ˆclick æœ‰ 300ms å»¶è¿Ÿ,ä¸ºäº†å®ç°safariçš„åŒå‡»äº‹ä»¶çš„è®¾è®¡ï¼Œæµè§ˆå™¨è¦çŸ¥é“ä½ æ˜¯ä¸æ˜¯è¦åŒå‡»æ“ä½œã€‚ï¼‰ çŸ¥é“å„ç§JSæ¡†æ¶(Angular, Backbone, Ember, React, Meteor, Knockoutâ€¦)ä¹ˆ? èƒ½è®²å‡ºä»–ä»¬å„è‡ªçš„ä¼˜ç‚¹å’Œç¼ºç‚¹ä¹ˆ? Underscore å¯¹å“ªäº› JS åŸç”Ÿå¯¹è±¡è¿›è¡Œäº†æ‰©å±•ä»¥åŠæä¾›äº†å“ªäº›å¥½ç”¨çš„å‡½æ•°æ–¹æ³•ï¼Ÿ è§£é‡ŠJavaScriptä¸­çš„ä½œç”¨åŸŸä¸å˜é‡å£°æ˜æå‡ï¼Ÿ é‚£äº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ å†…å­˜æ³„æ¼æŒ‡ä»»ä½•å¯¹è±¡åœ¨æ‚¨ä¸å†æ‹¥æœ‰æˆ–éœ€è¦å®ƒä¹‹åä»ç„¶å­˜åœ¨ã€‚ åƒåœ¾å›æ”¶å™¨å®šæœŸæ‰«æå¯¹è±¡ï¼Œå¹¶è®¡ç®—å¼•ç”¨äº†æ¯ä¸ªå¯¹è±¡çš„å…¶ä»–å¯¹è±¡çš„æ•°é‡ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æ•°é‡ä¸º 0ï¼ˆæ²¡æœ‰å…¶ä»–å¯¹è±¡å¼•ç”¨è¿‡è¯¥å¯¹è±¡ï¼‰ï¼Œæˆ–å¯¹è¯¥å¯¹è±¡çš„æƒŸä¸€å¼•ç”¨æ˜¯å¾ªç¯çš„ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„å†…å­˜å³å¯å›æ”¶ã€‚ setTimeout çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½¿ç”¨å­—ç¬¦ä¸²è€Œéå‡½æ•°çš„è¯ï¼Œä¼šå¼•å‘å†…å­˜æ³„æ¼ã€‚ é—­åŒ…ã€æ§åˆ¶å°æ—¥å¿—ã€å¾ªç¯ï¼ˆåœ¨ä¸¤ä¸ªå¯¹è±¡å½¼æ­¤å¼•ç”¨ä¸”å½¼æ­¤ä¿ç•™æ—¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªå¾ªç¯ï¼‰ JQueryä¸€ä¸ªå¯¹è±¡å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªäº‹ä»¶ï¼Œè¿™æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ * å¤šä¸ªäº‹ä»¶åŒä¸€ä¸ªå‡½æ•°ï¼š $(&quot;div&quot;).on(&quot;click mouseover&quot;, function(){}); * å¤šä¸ªäº‹ä»¶ä¸åŒå‡½æ•° $(&quot;div&quot;).on({ click: function(){}, mouseover: function(){} }); Node.jsçš„é€‚ç”¨åœºæ™¯ï¼Ÿ (å¦‚æœä¼šç”¨node)çŸ¥é“route, middleware, cluster, nodemon, pm2, server-side renderingä¹ˆ? è§£é‡Šä¸€ä¸‹ Backbone çš„ MVC å®ç°æ–¹å¼ï¼Ÿ ä»€ä¹ˆæ˜¯â€œå‰ç«¯è·¯ç”±â€?ä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨â€œå‰ç«¯è·¯ç”±â€? â€œå‰ç«¯è·¯ç”±â€æœ‰å“ªäº›ä¼˜ç‚¹å’Œç¼ºç‚¹? çŸ¥é“ä»€ä¹ˆæ˜¯webkitä¹ˆ? çŸ¥é“æ€ä¹ˆç”¨æµè§ˆå™¨çš„å„ç§å·¥å…·æ¥è°ƒè¯•å’Œdebugä»£ç ä¹ˆ? Chrome,Safariæµè§ˆå™¨å†…æ ¸ã€‚ å¦‚ä½•æµ‹è¯•å‰ç«¯ä»£ç ä¹ˆ? çŸ¥é“BDD, TDD, Unit Testä¹ˆ? çŸ¥é“æ€ä¹ˆæµ‹è¯•ä½ çš„å‰ç«¯å·¥ç¨‹ä¹ˆ(mocha, sinon, jasmin, qUnit..)? å‰ç«¯templating(Mustache, underscore, handlebars)æ˜¯å¹²å˜›çš„, æ€ä¹ˆç”¨? ç®€è¿°ä¸€ä¸‹ Handlebars çš„åŸºæœ¬ç”¨æ³•ï¼Ÿ ç®€è¿°ä¸€ä¸‹ Handlerbars çš„å¯¹æ¨¡æ¿çš„åŸºæœ¬å¤„ç†æµç¨‹ï¼Œ å¦‚ä½•ç¼–è¯‘çš„ï¼Ÿå¦‚ä½•ç¼“å­˜çš„ï¼Ÿ ç”¨jså®ç°åƒä½åˆ†éš”ç¬¦?(æ¥æºï¼šå‰ç«¯å†œæ°‘å·¥ï¼Œæç¤ºï¼šæ­£åˆ™+replace) å‚è€ƒï¼šhttp://www.tuicool.com/articles/ArQZfui function commafy(num) { return num &amp;&amp; num .toString() .replace(/(\\d)(?=(\\d{3})+\\.)/g, function($0, $1) { return $1 + &quot;,&quot;; }); } console.log(commafy(1234567.90)); //1,234,567.90 æ£€æµ‹æµè§ˆå™¨ç‰ˆæœ¬ç‰ˆæœ¬æœ‰å“ªäº›æ–¹å¼ï¼Ÿ åŠŸèƒ½æ£€æµ‹ã€userAgentç‰¹å¾æ£€æµ‹ æ¯”å¦‚ï¼šnavigator.userAgent //&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.101 Safari/537.36&quot; What is a Polyfill? polyfill æ˜¯â€œåœ¨æ—§ç‰ˆæµè§ˆå™¨ä¸Šå¤åˆ¶æ ‡å‡† API çš„ JavaScript è¡¥å……â€,å¯ä»¥åŠ¨æ€åœ°åŠ è½½ JavaScript ä»£ç æˆ–åº“ï¼Œåœ¨ä¸æ”¯æŒè¿™äº›æ ‡å‡† API çš„æµè§ˆå™¨ä¸­æ¨¡æ‹Ÿå®ƒä»¬ã€‚ ä¾‹å¦‚ï¼Œgeolocationï¼ˆåœ°ç†ä½ç½®ï¼‰polyfill å¯ä»¥åœ¨ navigator å¯¹è±¡ä¸Šæ·»åŠ å…¨å±€çš„ geolocation å¯¹è±¡ï¼Œè¿˜èƒ½æ·»åŠ  getCurrentPosition å‡½æ•°ä»¥åŠâ€œåæ ‡â€å›è°ƒå¯¹è±¡ï¼Œ æ‰€æœ‰è¿™äº›éƒ½æ˜¯ W3C åœ°ç†ä½ç½® API å®šä¹‰çš„å¯¹è±¡å’Œå‡½æ•°ã€‚å› ä¸º polyfill æ¨¡æ‹Ÿæ ‡å‡† APIï¼Œæ‰€ä»¥èƒ½å¤Ÿä»¥ä¸€ç§é¢å‘æ‰€æœ‰æµè§ˆå™¨æœªæ¥çš„æ–¹å¼é’ˆå¯¹è¿™äº› API è¿›è¡Œå¼€å‘ï¼Œ ä¸€æ—¦å¯¹è¿™äº› API çš„æ”¯æŒå˜æˆç»å¯¹å¤§å¤šæ•°ï¼Œåˆ™å¯ä»¥æ–¹ä¾¿åœ°å»æ‰ polyfillï¼Œæ— éœ€åšä»»ä½•é¢å¤–å·¥ä½œã€‚ åšçš„é¡¹ç›®ä¸­ï¼Œæœ‰æ²¡æœ‰ç”¨è¿‡æˆ–è‡ªå·±å®ç°ä¸€äº› polyfill æ–¹æ¡ˆï¼ˆå…¼å®¹æ€§å¤„ç†æ–¹æ¡ˆï¼‰ï¼Ÿ æ¯”å¦‚ï¼š html5shivã€Geolocationã€Placeholder æˆ‘ä»¬ç»™ä¸€ä¸ªdomåŒæ—¶ç»‘å®šä¸¤ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œä¸€ä¸ªç”¨æ•è·ï¼Œä¸€ä¸ªç”¨å†’æ³¡ã€‚ä¼šæ‰§è¡Œå‡ æ¬¡äº‹ä»¶ï¼Œä¼šå…ˆæ‰§è¡Œå†’æ³¡è¿˜æ˜¯æ•è·ï¼Ÿ ä½¿ç”¨JSå®ç°è·å–æ–‡ä»¶æ‰©å±•åï¼Ÿ function getFileExtension(filename) { return filename.slice((filename.lastIndexOf(&quot;.&quot;) - 1 &gt;&gt;&gt; 0) + 2); } String.lastIndexOf() æ–¹æ³•è¿”å›æŒ‡å®šå€¼ï¼ˆæœ¬ä¾‹ä¸­çš„&#39;.&#39;ï¼‰åœ¨è°ƒç”¨è¯¥æ–¹æ³•çš„å­—ç¬¦ä¸²ä¸­æœ€åå‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æ‰¾åˆ°åˆ™è¿”å› -1ã€‚ å¯¹äº&#39;filename&#39;å’Œ&#39;.hiddenfile&#39;ï¼ŒlastIndexOfçš„è¿”å›å€¼åˆ†åˆ«ä¸º0å’Œ-1æ— ç¬¦å·å³ç§»æ“ä½œç¬¦(Â»&gt;) å°†-1è½¬æ¢ä¸º4294967295ï¼Œå°†-2è½¬æ¢ä¸º4294967294ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥ä¿è¯è¾¹ç¼˜æƒ…å†µæ—¶æ–‡ä»¶åä¸å˜ã€‚ String.prototype.slice() ä»ä¸Šé¢è®¡ç®—çš„ç´¢å¼•å¤„æå–æ–‡ä»¶çš„æ‰©å±•åã€‚å¦‚æœç´¢å¼•æ¯”æ–‡ä»¶åçš„é•¿åº¦å¤§ï¼Œç»“æœä¸º&quot;&quot;ã€‚ ECMAScript6 ç›¸å…³ Object.is() ä¸åŸæ¥çš„æ¯”è¾ƒæ“ä½œç¬¦â€œ ===â€ã€â€œ ==â€çš„åŒºåˆ«ï¼Ÿ ä¸¤ç­‰å·åˆ¤ç­‰ï¼Œä¼šåœ¨æ¯”è¾ƒæ—¶è¿›è¡Œç±»å‹è½¬æ¢ï¼› ä¸‰ç­‰å·åˆ¤ç­‰(åˆ¤æ–­ä¸¥æ ¼)ï¼Œæ¯”è¾ƒæ—¶ä¸è¿›è¡Œéšå¼ç±»å‹è½¬æ¢,ï¼ˆç±»å‹ä¸åŒåˆ™ä¼šè¿”å›falseï¼‰ï¼› Object.is åœ¨ä¸‰ç­‰å·åˆ¤ç­‰çš„åŸºç¡€ä¸Šç‰¹åˆ«å¤„ç†äº† NaN ã€-0 å’Œ +0 ï¼Œä¿è¯ -0 å’Œ +0 ä¸å†ç›¸åŒï¼Œ ä½† Object.is(NaN, NaN) ä¼šè¿”å› true. Object.is åº”è¢«è®¤ä¸ºæœ‰å…¶ç‰¹æ®Šçš„ç”¨é€”ï¼Œè€Œä¸èƒ½ç”¨å®ƒè®¤ä¸ºå®ƒæ¯”å…¶å®ƒçš„ç›¸ç­‰å¯¹æ¯”æ›´å®½æ¾æˆ–ä¸¥æ ¼ã€‚ å‰ç«¯æ¡†æ¶ç›¸å…³ react-router è·¯ç”±ç³»ç»Ÿçš„å®ç°åŸç†ï¼Ÿ Reactä¸­å¦‚ä½•è§£å†³ç¬¬ä¸‰æ–¹ç±»åº“çš„é—®é¢˜? å…¶ä»–é—®é¢˜ åŸæ¥å…¬å¸å·¥ä½œæµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Œå¦‚ä½•ä¸å…¶ä»–äººåä½œçš„ï¼Ÿå¦‚ä½•å¤¸éƒ¨é—¨åˆä½œçš„ï¼Ÿ ä½ é‡åˆ°è¿‡æ¯”è¾ƒéš¾çš„æŠ€æœ¯é—®é¢˜æ˜¯ï¼Ÿä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ è®¾è®¡æ¨¡å¼ çŸ¥é“ä»€ä¹ˆæ˜¯singleton, factory, strategy, decratorä¹ˆ? å¸¸ä½¿ç”¨çš„åº“æœ‰å“ªäº›ï¼Ÿå¸¸ç”¨çš„å‰ç«¯å¼€å‘å·¥å…·ï¼Ÿå¼€å‘è¿‡ä»€ä¹ˆåº”ç”¨æˆ–ç»„ä»¶ï¼Ÿ é¡µé¢é‡æ„æ€ä¹ˆæ“ä½œï¼Ÿ ç½‘ç«™é‡æ„ï¼šåœ¨ä¸æ”¹å˜å¤–éƒ¨è¡Œä¸ºçš„å‰æä¸‹ï¼Œç®€åŒ–ç»“æ„ã€æ·»åŠ å¯è¯»æ€§ï¼Œè€Œåœ¨ç½‘ç«™å‰ç«¯ä¿æŒä¸€è‡´çš„è¡Œä¸ºã€‚ ä¹Ÿå°±æ˜¯è¯´æ˜¯åœ¨ä¸æ”¹å˜UIçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘ç«™è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨æ‰©å±•çš„åŒæ—¶ä¿æŒä¸€è‡´çš„UIã€‚ å¯¹äºä¼ ç»Ÿçš„ç½‘ç«™æ¥è¯´é‡æ„é€šå¸¸æ˜¯ï¼š è¡¨æ ¼(table)å¸ƒå±€æ”¹ä¸ºDIV+CSS ä½¿ç½‘ç«™å‰ç«¯å…¼å®¹äºç°ä»£æµè§ˆå™¨(é’ˆå¯¹äºä¸åˆè§„èŒƒçš„CSSã€å¦‚å¯¹IE6æœ‰æ•ˆçš„) å¯¹äºç§»åŠ¨å¹³å°çš„ä¼˜åŒ– é’ˆå¯¹äºSEOè¿›è¡Œä¼˜åŒ– æ·±å±‚æ¬¡çš„ç½‘ç«™é‡æ„åº”è¯¥è€ƒè™‘çš„æ–¹é¢ å‡å°‘ä»£ç é—´çš„è€¦åˆ è®©ä»£ç ä¿æŒå¼¹æ€§ ä¸¥æ ¼æŒ‰è§„èŒƒç¼–å†™ä»£ç  è®¾è®¡å¯æ‰©å±•çš„API ä»£æ›¿æ—§æœ‰çš„æ¡†æ¶ã€è¯­è¨€(å¦‚VB) å¢å¼ºç”¨æˆ·ä½“éªŒ é€šå¸¸æ¥è¯´å¯¹äºé€Ÿåº¦çš„ä¼˜åŒ–ä¹ŸåŒ…å«åœ¨é‡æ„ä¸­ å‹ç¼©JSã€CSSã€imageç­‰å‰ç«¯èµ„æº(é€šå¸¸æ˜¯ç”±æœåŠ¡å™¨æ¥è§£å†³) ç¨‹åºçš„æ€§èƒ½ä¼˜åŒ–(å¦‚æ•°æ®è¯»å†™) é‡‡ç”¨CDNæ¥åŠ é€Ÿèµ„æºåŠ è½½ å¯¹äºJS DOMçš„ä¼˜åŒ– HTTPæœåŠ¡å™¨çš„æ–‡ä»¶ç¼“å­˜ åˆ—ä¸¾IEä¸å…¶ä»–æµè§ˆå™¨ä¸ä¸€æ ·çš„ç‰¹æ€§ï¼Ÿ 1ã€äº‹ä»¶ä¸åŒä¹‹å¤„ï¼š è§¦å‘äº‹ä»¶çš„å…ƒç´ è¢«è®¤ä¸ºæ˜¯ç›®æ ‡ï¼ˆtargetï¼‰ã€‚è€Œåœ¨ IE ä¸­ï¼Œç›®æ ‡åŒ…å«åœ¨ event å¯¹è±¡çš„ srcElement å±æ€§ï¼› è·å–å­—ç¬¦ä»£ç ã€å¦‚æœæŒ‰é”®ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ï¼ˆshiftã€ctrlã€alté™¤å¤–ï¼‰ï¼ŒIE çš„ keyCode ä¼šè¿”å›å­—ç¬¦ä»£ç ï¼ˆUnicodeï¼‰ï¼ŒDOM ä¸­æŒ‰é”®çš„ä»£ç å’Œå­—ç¬¦æ˜¯åˆ†ç¦»çš„ï¼Œè¦è·å–å­—ç¬¦ä»£ç ï¼Œéœ€è¦ä½¿ç”¨ charCode å±æ€§ï¼› é˜»æ­¢æŸä¸ªäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼ŒIE ä¸­é˜»æ­¢æŸä¸ªäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œå¿…é¡»å°† returnValue å±æ€§è®¾ç½®ä¸º falseï¼ŒMozilla ä¸­ï¼Œéœ€è¦è°ƒç”¨ preventDefault() æ–¹æ³•ï¼› åœæ­¢äº‹ä»¶å†’æ³¡ï¼ŒIE ä¸­é˜»æ­¢äº‹ä»¶è¿›ä¸€æ­¥å†’æ³¡ï¼Œéœ€è¦è®¾ç½® cancelBubble ä¸º trueï¼ŒMozzilla ä¸­ï¼Œéœ€è¦è°ƒç”¨ stopPropagation()ï¼› 99%çš„ç½‘ç«™éƒ½éœ€è¦è¢«é‡æ„æ˜¯é‚£æœ¬ä¹¦ä¸Šå†™çš„ï¼Ÿ ç½‘ç«™é‡æ„ï¼šåº”ç”¨webæ ‡å‡†è¿›è¡Œè®¾è®¡ï¼ˆç¬¬2ç‰ˆï¼‰ ä»€ä¹ˆå«ä¼˜é›…é™çº§å’Œæ¸è¿›å¢å¼ºï¼Ÿ ä¼˜é›…é™çº§ï¼šWebç«™ç‚¹åœ¨æ‰€æœ‰æ–°å¼æµè§ˆå™¨ä¸­éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œå¦‚æœç”¨æˆ·ä½¿ç”¨çš„æ˜¯è€å¼æµè§ˆå™¨ï¼Œåˆ™ä»£ç ä¼šé’ˆå¯¹æ—§ç‰ˆæœ¬çš„IEè¿›è¡Œé™çº§å¤„ç†äº†,ä½¿ä¹‹åœ¨æ—§å¼æµè§ˆå™¨ä¸Šä»¥æŸç§å½¢å¼é™çº§ä½“éªŒå´ä¸è‡³äºå®Œå…¨ä¸èƒ½ç”¨ã€‚ å¦‚ï¼šborder-shadow æ¸è¿›å¢å¼ºï¼šä»è¢«æ‰€æœ‰æµè§ˆå™¨æ”¯æŒçš„åŸºæœ¬åŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥åœ°æ·»åŠ é‚£äº›åªæœ‰æ–°ç‰ˆæœ¬æµè§ˆå™¨æ‰æ”¯æŒçš„åŠŸèƒ½,å‘é¡µé¢å¢åŠ ä¸å½±å“åŸºç¡€æµè§ˆå™¨çš„é¢å¤–æ ·å¼å’ŒåŠŸèƒ½çš„ã€‚å½“æµè§ˆå™¨æ”¯æŒæ—¶ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨åœ°å‘ˆç°å‡ºæ¥å¹¶å‘æŒ¥ä½œç”¨ã€‚ å¦‚ï¼šé»˜è®¤ä½¿ç”¨flashä¸Šä¼ ï¼Œä½†å¦‚æœæµè§ˆå™¨æ”¯æŒ HTML5 çš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ™ä½¿ç”¨HTML5å®ç°æ›´å¥½çš„ä½“éªŒï¼› æ˜¯å¦äº†è§£å…¬é’¥åŠ å¯†å’Œç§é’¥åŠ å¯†ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æŒ‡ç§é’¥ç”¨äºå¯¹æ•°æ®è¿›è¡Œç­¾åï¼Œå…¬é’¥ç”¨äºå¯¹ç­¾åè¿›è¡ŒéªŒè¯; HTTPç½‘ç«™åœ¨æµè§ˆå™¨ç«¯ç”¨å…¬é’¥åŠ å¯†æ•æ„Ÿæ•°æ®ï¼Œç„¶ååœ¨æœåŠ¡å™¨ç«¯å†ç”¨ç§é’¥è§£å¯†ã€‚ WEBåº”ç”¨ä»æœåŠ¡å™¨ä¸»åŠ¨æ¨é€Dataåˆ°å®¢æˆ·ç«¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ html5æä¾›çš„Websocket ä¸å¯è§çš„iframe WebSocketé€šè¿‡Flash XHRé•¿æ—¶é—´è¿æ¥ XHR Multipart Streaming &lt;script&gt;æ ‡ç­¾çš„é•¿æ—¶é—´è¿æ¥(å¯è·¨åŸŸ) å¯¹Nodeçš„ä¼˜ç‚¹å’Œç¼ºç‚¹æå‡ºäº†è‡ªå·±çš„çœ‹æ³•ï¼Ÿ *ï¼ˆä¼˜ç‚¹ï¼‰å› ä¸ºNodeæ˜¯åŸºäºäº‹ä»¶é©±åŠ¨å’Œæ— é˜»å¡çš„ï¼Œæ‰€ä»¥éå¸¸é€‚åˆå¤„ç†å¹¶å‘è¯·æ±‚ï¼Œ å› æ­¤æ„å»ºåœ¨Nodeä¸Šçš„ä»£ç†æœåŠ¡å™¨ç›¸æ¯”å…¶ä»–æŠ€æœ¯å®ç°ï¼ˆå¦‚Rubyï¼‰çš„æœåŠ¡å™¨è¡¨ç°è¦å¥½å¾—å¤šã€‚ æ­¤å¤–ï¼Œä¸Nodeä»£ç†æœåŠ¡å™¨äº¤äº’çš„å®¢æˆ·ç«¯ä»£ç æ˜¯ç”±javascriptè¯­è¨€ç¼–å†™çš„ï¼Œ å› æ­¤å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½ç”¨åŒä¸€ç§è¯­è¨€ç¼–å†™ï¼Œè¿™æ˜¯éå¸¸ç¾å¦™çš„äº‹æƒ…ã€‚ *ï¼ˆç¼ºç‚¹ï¼‰Nodeæ˜¯ä¸€ä¸ªç›¸å¯¹æ–°çš„å¼€æºé¡¹ç›®ï¼Œæ‰€ä»¥ä¸å¤ªç¨³å®šï¼Œå®ƒæ€»æ˜¯ä¸€ç›´åœ¨å˜ï¼Œ è€Œä¸”ç¼ºå°‘è¶³å¤Ÿå¤šçš„ç¬¬ä¸‰æ–¹åº“æ”¯æŒã€‚çœ‹èµ·æ¥ï¼Œå°±åƒæ˜¯Ruby/Railså½“å¹´çš„æ ·å­ã€‚ ä½ æœ‰ç”¨è¿‡å“ªäº›å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ–¹æ³•ï¼Ÿ ï¼ˆ1ï¼‰ å‡å°‘httpè¯·æ±‚æ¬¡æ•°ï¼šCSS Sprites, JSã€CSSæºç å‹ç¼©ã€å›¾ç‰‡å¤§å°æ§åˆ¶åˆé€‚ï¼›ç½‘é¡µGzipï¼ŒCDNæ‰˜ç®¡ï¼Œdataç¼“å­˜ ï¼Œå›¾ç‰‡æœåŠ¡å™¨ã€‚ ï¼ˆ2ï¼‰ å‰ç«¯æ¨¡æ¿ JS+æ•°æ®ï¼Œå‡å°‘ç”±äºHTMLæ ‡ç­¾å¯¼è‡´çš„å¸¦å®½æµªè´¹ï¼Œå‰ç«¯ç”¨å˜é‡ä¿å­˜AJAXè¯·æ±‚ç»“æœï¼Œæ¯æ¬¡æ“ä½œæœ¬åœ°å˜é‡ï¼Œä¸ç”¨è¯·æ±‚ï¼Œå‡å°‘è¯·æ±‚æ¬¡æ•° ï¼ˆ3ï¼‰ ç”¨innerHTMLä»£æ›¿DOMæ“ä½œï¼Œå‡å°‘DOMæ“ä½œæ¬¡æ•°ï¼Œä¼˜åŒ–javascriptæ€§èƒ½ã€‚ ï¼ˆ4ï¼‰ å½“éœ€è¦è®¾ç½®çš„æ ·å¼å¾ˆå¤šæ—¶è®¾ç½®classNameè€Œä¸æ˜¯ç›´æ¥æ“ä½œstyleã€‚ ï¼ˆ5ï¼‰ å°‘ç”¨å…¨å±€å˜é‡ã€ç¼“å­˜DOMèŠ‚ç‚¹æŸ¥æ‰¾çš„ç»“æœã€‚å‡å°‘IOè¯»å–æ“ä½œã€‚ ï¼ˆ6ï¼‰ é¿å…ä½¿ç”¨CSS Expressionï¼ˆcssè¡¨è¾¾å¼)åˆç§°Dynamic properties(åŠ¨æ€å±æ€§)ã€‚ ï¼ˆ7ï¼‰ å›¾ç‰‡é¢„åŠ è½½ï¼Œå°†æ ·å¼è¡¨æ”¾åœ¨é¡¶éƒ¨ï¼Œå°†è„šæœ¬æ”¾åœ¨åº•éƒ¨ åŠ ä¸Šæ—¶é—´æˆ³ã€‚ ï¼ˆ8ï¼‰ é¿å…åœ¨é¡µé¢çš„ä¸»ä½“å¸ƒå±€ä¸­ä½¿ç”¨tableï¼Œtableè¦ç­‰å…¶ä¸­çš„å†…å®¹å®Œå…¨ä¸‹è½½ä¹‹åæ‰ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œæ˜¾ç¤ºæ¯”div+csså¸ƒå±€æ…¢ã€‚ å¯¹æ™®é€šçš„ç½‘ç«™æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ€è·¯ï¼Œå°±æ˜¯å°½é‡å‘å‰ç«¯ä¼˜åŒ–ã€å‡å°‘æ•°æ®åº“æ“ä½œã€å‡å°‘ç£ç›˜IOã€‚å‘å‰ç«¯ä¼˜åŒ–æŒ‡çš„æ˜¯ï¼Œåœ¨ä¸å½±å“åŠŸèƒ½å’Œä½“éªŒçš„æƒ…å†µä¸‹ï¼Œèƒ½åœ¨æµè§ˆå™¨æ‰§è¡Œçš„ä¸è¦åœ¨æœåŠ¡ç«¯æ‰§è¡Œï¼Œèƒ½åœ¨ç¼“å­˜æœåŠ¡å™¨ä¸Šç›´æ¥è¿”å›çš„ä¸è¦åˆ°åº”ç”¨æœåŠ¡å™¨ï¼Œç¨‹åºèƒ½ç›´æ¥å–å¾—çš„ç»“æœä¸è¦åˆ°å¤–éƒ¨å–å¾—ï¼Œæœ¬æœºå†…èƒ½å–å¾—çš„æ•°æ®ä¸è¦åˆ°è¿œç¨‹å–ï¼Œå†…å­˜èƒ½å–åˆ°çš„ä¸è¦åˆ°ç£ç›˜å–ï¼Œç¼“å­˜ä¸­æœ‰çš„ä¸è¦å»æ•°æ®åº“æŸ¥è¯¢ã€‚å‡å°‘æ•°æ®åº“æ“ä½œæŒ‡å‡å°‘æ›´æ–°æ¬¡æ•°ã€ç¼“å­˜ç»“æœå‡å°‘æŸ¥è¯¢æ¬¡æ•°ã€å°†æ•°æ®åº“æ‰§è¡Œçš„æ“ä½œå°½å¯èƒ½çš„è®©ä½ çš„ç¨‹åºå®Œæˆï¼ˆä¾‹å¦‚joinæŸ¥è¯¢ï¼‰ï¼Œå‡å°‘ç£ç›˜IOæŒ‡å°½é‡ä¸ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿä½œä¸ºç¼“å­˜ã€å‡å°‘è¯»å†™æ–‡ä»¶æ¬¡æ•°ç­‰ã€‚ç¨‹åºä¼˜åŒ–æ°¸è¿œè¦ä¼˜åŒ–æ…¢çš„éƒ¨åˆ†ï¼Œæ¢è¯­è¨€æ˜¯æ— æ³•â€œä¼˜åŒ–â€çš„ã€‚ httpçŠ¶æ€ç æœ‰é‚£äº›ï¼Ÿåˆ†åˆ«ä»£è¡¨æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ ç®€å•ç‰ˆ [ 100 Continue ç»§ç»­ï¼Œä¸€èˆ¬åœ¨å‘é€postè¯·æ±‚æ—¶ï¼Œå·²å‘é€äº†http headerä¹‹åæœåŠ¡ç«¯å°†è¿”å›æ­¤ä¿¡æ¯ï¼Œè¡¨ç¤ºç¡®è®¤ï¼Œä¹‹åå‘é€å…·ä½“å‚æ•°ä¿¡æ¯ 200 OK æ­£å¸¸è¿”å›ä¿¡æ¯ 201 Created è¯·æ±‚æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æº 202 Accepted æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç† 301 Moved Permanently è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚ 302 Found ä¸´æ—¶æ€§é‡å®šå‘ã€‚ 303 See Other ä¸´æ—¶æ€§é‡å®šå‘ï¼Œä¸”æ€»æ˜¯ä½¿ç”¨ GET è¯·æ±‚æ–°çš„ URIã€‚ 304 Not Modified è‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚ 400 Bad Request æœåŠ¡å™¨æ— æ³•ç†è§£è¯·æ±‚çš„æ ¼å¼ï¼Œå®¢æˆ·ç«¯ä¸åº”å½“å°è¯•å†æ¬¡ä½¿ç”¨ç›¸åŒçš„å†…å®¹å‘èµ·è¯·æ±‚ã€‚ 401 Unauthorized è¯·æ±‚æœªæˆæƒã€‚ 403 Forbidden ç¦æ­¢è®¿é—®ã€‚ 404 Not Found æ‰¾ä¸åˆ°å¦‚ä½•ä¸ URI ç›¸åŒ¹é…çš„èµ„æºã€‚ 500 Internal Server Error æœ€å¸¸è§çš„æœåŠ¡å™¨ç«¯é”™è¯¯ã€‚ 503 Service Unavailable æœåŠ¡å™¨ç«¯æš‚æ—¶æ— æ³•å¤„ç†è¯·æ±‚ï¼ˆå¯èƒ½æ˜¯è¿‡è½½æˆ–ç»´æŠ¤ï¼‰ã€‚ ] å®Œæ•´ç‰ˆ 1**(ä¿¡æ¯ç±»)ï¼šè¡¨ç¤ºæ¥æ”¶åˆ°è¯·æ±‚å¹¶ä¸”ç»§ç»­å¤„ç† 100â€”â€”å®¢æˆ·å¿…é¡»ç»§ç»­å‘å‡ºè¯·æ±‚ 101â€”â€”å®¢æˆ·è¦æ±‚æœåŠ¡å™¨æ ¹æ®è¯·æ±‚è½¬æ¢HTTPåè®®ç‰ˆæœ¬ 2**(å“åº”æˆåŠŸ)ï¼šè¡¨ç¤ºåŠ¨ä½œè¢«æˆåŠŸæ¥æ”¶ã€ç†è§£å’Œæ¥å— 200â€”â€”è¡¨æ˜è¯¥è¯·æ±‚è¢«æˆåŠŸåœ°å®Œæˆï¼Œæ‰€è¯·æ±‚çš„èµ„æºå‘é€å›å®¢æˆ·ç«¯ 201â€”â€”æç¤ºçŸ¥é“æ–°æ–‡ä»¶çš„URL 202â€”â€”æ¥å—å’Œå¤„ç†ã€ä½†å¤„ç†æœªå®Œæˆ 203â€”â€”è¿”å›ä¿¡æ¯ä¸ç¡®å®šæˆ–ä¸å®Œæ•´ 204â€”â€”è¯·æ±‚æ”¶åˆ°ï¼Œä½†è¿”å›ä¿¡æ¯ä¸ºç©º 205â€”â€”æœåŠ¡å™¨å®Œæˆäº†è¯·æ±‚ï¼Œç”¨æˆ·ä»£ç†å¿…é¡»å¤ä½å½“å‰å·²ç»æµè§ˆè¿‡çš„æ–‡ä»¶ 206â€”â€”æœåŠ¡å™¨å·²ç»å®Œæˆäº†éƒ¨åˆ†ç”¨æˆ·çš„GETè¯·æ±‚ 3**(é‡å®šå‘ç±»)ï¼šä¸ºäº†å®ŒæˆæŒ‡å®šçš„åŠ¨ä½œï¼Œå¿…é¡»æ¥å—è¿›ä¸€æ­¥å¤„ç† 300â€”â€”è¯·æ±‚çš„èµ„æºå¯åœ¨å¤šå¤„å¾—åˆ° 301â€”â€”æœ¬ç½‘é¡µè¢«æ°¸ä¹…æ€§è½¬ç§»åˆ°å¦ä¸€ä¸ªURL 302â€”â€”è¯·æ±‚çš„ç½‘é¡µè¢«è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„åœ°å€ï¼Œä½†å®¢æˆ·è®¿é—®ä»ç»§ç»­é€šè¿‡åŸå§‹URLåœ°å€ï¼Œé‡å®šå‘ï¼Œæ–°çš„URLä¼šåœ¨responseä¸­çš„Locationä¸­è¿”å›ï¼Œæµè§ˆå™¨å°†ä¼šä½¿ç”¨æ–°çš„URLå‘å‡ºæ–°çš„Requestã€‚ 303â€”â€”å»ºè®®å®¢æˆ·è®¿é—®å…¶ä»–URLæˆ–è®¿é—®æ–¹å¼ 304â€”â€”è‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤å“åº”æ—¶ï¼Œä¸ä¼šè¿”å›ç½‘é¡µå†…å®¹ï¼Œä»£è¡¨ä¸Šæ¬¡çš„æ–‡æ¡£å·²ç»è¢«ç¼“å­˜äº†ï¼Œè¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨ 305â€”â€”è¯·æ±‚çš„èµ„æºå¿…é¡»ä»æœåŠ¡å™¨æŒ‡å®šçš„åœ°å€å¾—åˆ° 306â€”â€”å‰ä¸€ç‰ˆæœ¬HTTPä¸­ä½¿ç”¨çš„ä»£ç ï¼Œç°è¡Œç‰ˆæœ¬ä¸­ä¸å†ä½¿ç”¨ 307â€”â€”ç”³æ˜è¯·æ±‚çš„èµ„æºä¸´æ—¶æ€§åˆ é™¤ 4**(å®¢æˆ·ç«¯é”™è¯¯ç±»)ï¼šè¯·æ±‚åŒ…å«é”™è¯¯è¯­æ³•æˆ–ä¸èƒ½æ­£ç¡®æ‰§è¡Œ 400â€”â€”å®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£ 401â€”â€”è¯·æ±‚æœªç»æˆæƒï¼Œè¿™ä¸ªçŠ¶æ€ä»£ç å¿…é¡»å’ŒWWW-AuthenticateæŠ¥å¤´åŸŸä¸€èµ·ä½¿ç”¨ HTTP 401.1 - æœªæˆæƒï¼šç™»å½•å¤±è´¥ HTTP 401.2 - æœªæˆæƒï¼šæœåŠ¡å™¨é…ç½®é—®é¢˜å¯¼è‡´ç™»å½•å¤±è´¥ HTTP 401.3 - ACL ç¦æ­¢è®¿é—®èµ„æº HTTP 401.4 - æœªæˆæƒï¼šæˆæƒè¢«ç­›é€‰å™¨æ‹’ç» HTTP 401.5 - æœªæˆæƒï¼šISAPI æˆ– CGI æˆæƒå¤±è´¥ 402â€”â€”ä¿ç•™æœ‰æ•ˆChargeToå¤´å“åº” 403â€”â€”ç¦æ­¢è®¿é—®ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡ HTTP 403.1 ç¦æ­¢è®¿é—®ï¼šç¦æ­¢å¯æ‰§è¡Œè®¿é—® HTTP 403.2 - ç¦æ­¢è®¿é—®ï¼šç¦æ­¢è¯»è®¿é—® HTTP 403.3 - ç¦æ­¢è®¿é—®ï¼šç¦æ­¢å†™è®¿é—® HTTP 403.4 - ç¦æ­¢è®¿é—®ï¼šè¦æ±‚ SSL HTTP 403.5 - ç¦æ­¢è®¿é—®ï¼šè¦æ±‚ SSL 128 HTTP 403.6 - ç¦æ­¢è®¿é—®ï¼šIP åœ°å€è¢«æ‹’ç» HTTP 403.7 - ç¦æ­¢è®¿é—®ï¼šè¦æ±‚å®¢æˆ·è¯ä¹¦ HTTP 403.8 - ç¦æ­¢è®¿é—®ï¼šç¦æ­¢ç«™ç‚¹è®¿é—® HTTP 403.9 - ç¦æ­¢è®¿é—®ï¼šè¿æ¥çš„ç”¨æˆ·è¿‡å¤š HTTP 403.10 - ç¦æ­¢è®¿é—®ï¼šé…ç½®æ— æ•ˆ HTTP 403.11 - ç¦æ­¢è®¿é—®ï¼šå¯†ç æ›´æ”¹ HTTP 403.12 - ç¦æ­¢è®¿é—®ï¼šæ˜ å°„å™¨æ‹’ç»è®¿é—® HTTP 403.13 - ç¦æ­¢è®¿é—®ï¼šå®¢æˆ·è¯ä¹¦å·²è¢«åŠé”€ HTTP 403.15 - ç¦æ­¢è®¿é—®ï¼šå®¢æˆ·è®¿é—®è®¸å¯è¿‡å¤š HTTP 403.16 - ç¦æ­¢è®¿é—®ï¼šå®¢æˆ·è¯ä¹¦ä¸å¯ä¿¡æˆ–è€…æ— æ•ˆ HTTP 403.17 - ç¦æ­¢è®¿é—®ï¼šå®¢æˆ·è¯ä¹¦å·²ç»åˆ°æœŸæˆ–è€…å°šæœªç”Ÿæ•ˆ 404â€”â€”ä¸€ä¸ª404é”™è¯¯è¡¨æ˜å¯è¿æ¥æœåŠ¡å™¨ï¼Œä½†æœåŠ¡å™¨æ— æ³•å–å¾—æ‰€è¯·æ±‚çš„ç½‘é¡µï¼Œè¯·æ±‚èµ„æºä¸å­˜åœ¨ã€‚egï¼šè¾“å…¥äº†é”™è¯¯çš„URL 405â€”â€”ç”¨æˆ·åœ¨Request-Lineå­—æ®µå®šä¹‰çš„æ–¹æ³•ä¸å…è®¸ 406â€”â€”æ ¹æ®ç”¨æˆ·å‘é€çš„Acceptæ‹–ï¼Œè¯·æ±‚èµ„æºä¸å¯è®¿é—® 407â€”â€”ç±»ä¼¼401ï¼Œç”¨æˆ·å¿…é¡»é¦–å…ˆåœ¨ä»£ç†æœåŠ¡å™¨ä¸Šå¾—åˆ°æˆæƒ 408â€”â€”å®¢æˆ·ç«¯æ²¡æœ‰åœ¨ç”¨æˆ·æŒ‡å®šçš„é¥¿æ—¶é—´å†…å®Œæˆè¯·æ±‚ 409â€”â€”å¯¹å½“å‰èµ„æºçŠ¶æ€ï¼Œè¯·æ±‚ä¸èƒ½å®Œæˆ 410â€”â€”æœåŠ¡å™¨ä¸Šä¸å†æœ‰æ­¤èµ„æºä¸”æ— è¿›ä¸€æ­¥çš„å‚è€ƒåœ°å€ 411â€”â€”æœåŠ¡å™¨æ‹’ç»ç”¨æˆ·å®šä¹‰çš„Content-Lengthå±æ€§è¯·æ±‚ 412â€”â€”ä¸€ä¸ªæˆ–å¤šä¸ªè¯·æ±‚å¤´å­—æ®µåœ¨å½“å‰è¯·æ±‚ä¸­é”™è¯¯ 413â€”â€”è¯·æ±‚çš„èµ„æºå¤§äºæœåŠ¡å™¨å…è®¸çš„å¤§å° 414â€”â€”è¯·æ±‚çš„èµ„æºURLé•¿äºæœåŠ¡å™¨å…è®¸çš„é•¿åº¦ 415â€”â€”è¯·æ±‚èµ„æºä¸æ”¯æŒè¯·æ±‚é¡¹ç›®æ ¼å¼ 416â€”â€”è¯·æ±‚ä¸­åŒ…å«Rangeè¯·æ±‚å¤´å­—æ®µï¼Œåœ¨å½“å‰è¯·æ±‚èµ„æºèŒƒå›´å†…æ²¡æœ‰rangeæŒ‡ç¤ºå€¼ï¼Œè¯·æ±‚ä¹Ÿä¸åŒ…å«If-Rangeè¯·æ±‚å¤´å­—æ®µ 417â€”â€”æœåŠ¡å™¨ä¸æ»¡è¶³è¯·æ±‚Expectå¤´å­—æ®µæŒ‡å®šçš„æœŸæœ›å€¼ï¼Œå¦‚æœæ˜¯ä»£ç†æœåŠ¡å™¨ï¼Œå¯èƒ½æ˜¯ä¸‹ä¸€çº§æœåŠ¡å™¨ä¸èƒ½æ»¡è¶³è¯·æ±‚é•¿ã€‚ 5**(æœåŠ¡ç«¯é”™è¯¯ç±»)ï¼šæœåŠ¡å™¨ä¸èƒ½æ­£ç¡®æ‰§è¡Œä¸€ä¸ªæ­£ç¡®çš„è¯·æ±‚ HTTP 500 - æœåŠ¡å™¨é‡åˆ°é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ HTTP 500.100 - å†…éƒ¨æœåŠ¡å™¨é”™è¯¯ - ASP é”™è¯¯ HTTP 500-11 æœåŠ¡å™¨å…³é—­ HTTP 500-12 åº”ç”¨ç¨‹åºé‡æ–°å¯åŠ¨ HTTP 500-13 - æœåŠ¡å™¨å¤ªå¿™ HTTP 500-14 - åº”ç”¨ç¨‹åºæ— æ•ˆ HTTP 500-15 - ä¸å…è®¸è¯·æ±‚ global.asa Error 501 - æœªå®ç° HTTP 502 - ç½‘å…³é”™è¯¯ HTTP 503ï¼šç”±äºè¶…è½½æˆ–åœæœºç»´æŠ¤ï¼ŒæœåŠ¡å™¨ç›®å‰æ— æ³•ä½¿ç”¨ï¼Œä¸€æ®µæ—¶é—´åå¯èƒ½æ¢å¤æ­£å¸¸ ä¸€ä¸ªé¡µé¢ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½æ˜¾ç¤ºå®Œæˆï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆæµç¨‹è¯´çš„è¶Šè¯¦ç»†è¶Šå¥½ï¼‰ æ³¨ï¼šè¿™é¢˜èƒœåœ¨åŒºåˆ†åº¦é«˜ï¼ŒçŸ¥è¯†ç‚¹è¦†ç›–å¹¿ï¼Œå†ä¸æ‡‚çš„äººï¼Œä¹Ÿèƒ½ç­”å‡ºå‡ å¥ï¼Œ è€Œé«˜æ‰‹å¯ä»¥æ ¹æ®è‡ªå·±æ“…é•¿çš„é¢†åŸŸè‡ªç”±å‘æŒ¥ï¼Œä»URLè§„èŒƒã€HTTPåè®®ã€DNSã€CDNã€æ•°æ®åº“æŸ¥è¯¢ã€ åˆ°æµè§ˆå™¨æµå¼è§£æã€CSSè§„åˆ™æ„å»ºã€layoutã€paintã€onload/domreadyã€JSæ‰§è¡Œã€JS APIç»‘å®šç­‰ç­‰ï¼› è¯¦ç»†ç‰ˆï¼š 1ã€æµè§ˆå™¨ä¼šå¼€å¯ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå¯¹ URL åˆ†æåˆ¤æ–­å¦‚æœæ˜¯ http åè®®å°±æŒ‰ç…§ Web æ–¹å¼æ¥å¤„ç†; 2ã€è°ƒç”¨æµè§ˆå™¨å†…æ ¸ä¸­çš„å¯¹åº”æ–¹æ³•ï¼Œæ¯”å¦‚ WebView ä¸­çš„ loadUrl æ–¹æ³•; 3ã€é€šè¿‡DNSè§£æè·å–ç½‘å€çš„IPåœ°å€ï¼Œè®¾ç½® UA ç­‰ä¿¡æ¯å‘å‡ºç¬¬äºŒä¸ªGETè¯·æ±‚; 4ã€è¿›è¡ŒHTTPåè®®ä¼šè¯ï¼Œå®¢æˆ·ç«¯å‘é€æŠ¥å¤´(è¯·æ±‚æŠ¥å¤´); 5ã€è¿›å…¥åˆ°webæœåŠ¡å™¨ä¸Šçš„ Web Serverï¼Œå¦‚ Apacheã€Tomcatã€Node.JS ç­‰æœåŠ¡å™¨; 6ã€è¿›å…¥éƒ¨ç½²å¥½çš„åç«¯åº”ç”¨ï¼Œå¦‚ PHPã€Javaã€JavaScriptã€Python ç­‰ï¼Œæ‰¾åˆ°å¯¹åº”çš„è¯·æ±‚å¤„ç†; 7ã€å¤„ç†ç»“æŸå›é¦ˆæŠ¥å¤´ï¼Œæ­¤å¤„å¦‚æœæµè§ˆå™¨è®¿é—®è¿‡ï¼Œç¼“å­˜ä¸Šæœ‰å¯¹åº”èµ„æºï¼Œä¼šä¸æœåŠ¡å™¨æœ€åä¿®æ”¹æ—¶é—´å¯¹æ¯”ï¼Œä¸€è‡´åˆ™è¿”å›304; 8ã€æµè§ˆå™¨å¼€å§‹ä¸‹è½½htmlæ–‡æ¡£(å“åº”æŠ¥å¤´ï¼ŒçŠ¶æ€ç 200)ï¼ŒåŒæ—¶ä½¿ç”¨ç¼“å­˜; 9ã€æ–‡æ¡£æ ‘å»ºç«‹ï¼Œæ ¹æ®æ ‡è®°è¯·æ±‚æ‰€éœ€æŒ‡å®šMIMEç±»å‹çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚cssã€jsï¼‰,åŒæ—¶è®¾ç½®äº†cookie; 10ã€é¡µé¢å¼€å§‹æ¸²æŸ“DOMï¼ŒJSæ ¹æ®DOM APIæ“ä½œDOM,æ‰§è¡Œäº‹ä»¶ç»‘å®šç­‰ï¼Œé¡µé¢æ˜¾ç¤ºå®Œæˆã€‚ ç®€æ´ç‰ˆï¼š æµè§ˆå™¨æ ¹æ®è¯·æ±‚çš„URLäº¤ç»™DNSåŸŸåè§£æï¼Œæ‰¾åˆ°çœŸå®IPï¼Œå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼› æœåŠ¡å™¨äº¤ç»™åå°å¤„ç†å®Œæˆåè¿”å›æ•°æ®ï¼Œæµè§ˆå™¨æ¥æ”¶æ–‡ä»¶ï¼ˆHTMLã€JSã€CSSã€å›¾è±¡ç­‰ï¼‰ï¼› æµè§ˆå™¨å¯¹åŠ è½½åˆ°çš„èµ„æºï¼ˆHTMLã€JSã€CSSç­‰ï¼‰è¿›è¡Œè¯­æ³•è§£æï¼Œå»ºç«‹ç›¸åº”çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼ˆå¦‚HTMLçš„DOMï¼‰ï¼› è½½å…¥è§£æåˆ°çš„èµ„æºæ–‡ä»¶ï¼Œæ¸²æŸ“é¡µé¢ï¼Œå®Œæˆã€‚ éƒ¨åˆ†åœ°åŒºç”¨æˆ·ååº”ç½‘ç«™å¾ˆå¡ï¼Œè¯·é—®æœ‰å“ªäº›å¯èƒ½æ€§çš„åŸå› ï¼Œä»¥åŠè§£å†³æ–¹æ³•ï¼Ÿ ä»æ‰“å¼€appåˆ°åˆ·æ–°å‡ºå†…å®¹ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå¦‚æœæ„Ÿè§‰æ…¢ï¼Œæ€ä¹ˆå®šä½é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³? é™¤äº†å‰ç«¯ä»¥å¤–è¿˜äº†è§£ä»€ä¹ˆå…¶å®ƒæŠ€æœ¯ä¹ˆï¼Ÿä½ æœ€æœ€å‰å®³çš„æŠ€èƒ½æ˜¯ä»€ä¹ˆï¼Ÿ ä½ ç”¨çš„å¾—å¿ƒåº”æ‰‹ç”¨çš„ç†Ÿç»ƒåœ°ç¼–è¾‘å™¨&amp;å¼€å‘ç¯å¢ƒæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ Sublime Text 3 + ç›¸å…³æ’ä»¶ç¼–å†™å‰ç«¯ä»£ç  Google chrome ã€Mozilla Firefoxæµè§ˆå™¨ +firebug å…¼å®¹æµ‹è¯•å’Œé¢„è§ˆé¡µé¢UIã€åŠ¨ç”»æ•ˆæœå’Œäº¤äº’åŠŸèƒ½ Node.js+Gulp git ç”¨äºç‰ˆæœ¬æ§åˆ¶å’ŒCode Review å¯¹å‰ç«¯å·¥ç¨‹å¸ˆè¿™ä¸ªèŒä½æ˜¯æ€ä¹ˆæ ·ç†è§£çš„ï¼Ÿå®ƒçš„å‰æ™¯ä¼šæ€ä¹ˆæ ·ï¼Ÿ å‰ç«¯æ˜¯æœ€è´´è¿‘ç”¨æˆ·çš„ç¨‹åºå‘˜ï¼Œæ¯”åç«¯ã€æ•°æ®åº“ã€äº§å“ç»ç†ã€è¿è¥ã€å®‰å…¨éƒ½è¿‘ã€‚ 1ã€å®ç°ç•Œé¢äº¤äº’ 2ã€æå‡ç”¨æˆ·ä½“éªŒ 3ã€æœ‰äº†Node.jsï¼Œå‰ç«¯å¯ä»¥å®ç°æœåŠ¡ç«¯çš„ä¸€äº›äº‹æƒ… å‰ç«¯æ˜¯æœ€è´´è¿‘ç”¨æˆ·çš„ç¨‹åºå‘˜ï¼Œå‰ç«¯çš„èƒ½åŠ›å°±æ˜¯èƒ½è®©äº§å“ä» 90åˆ†è¿›åŒ–åˆ° 100 åˆ†ï¼Œç”šè‡³æ›´å¥½ï¼Œ å‚ä¸é¡¹ç›®ï¼Œå¿«é€Ÿé«˜è´¨é‡å®Œæˆå®ç°æ•ˆæœå›¾ï¼Œç²¾ç¡®åˆ°1pxï¼› ä¸å›¢é˜Ÿæˆå‘˜ï¼ŒUIè®¾è®¡ï¼Œäº§å“ç»ç†çš„æ²Ÿé€šï¼› åšå¥½çš„é¡µé¢ç»“æ„ï¼Œé¡µé¢é‡æ„å’Œç”¨æˆ·ä½“éªŒï¼› å¤„ç†hackï¼Œå…¼å®¹ã€å†™å‡ºä¼˜ç¾çš„ä»£ç æ ¼å¼ï¼› é’ˆå¯¹æœåŠ¡å™¨çš„ä¼˜åŒ–ã€æ‹¥æŠ±æœ€æ–°å‰ç«¯æŠ€æœ¯ã€‚ ä½ æ€ä¹ˆçœ‹å¾…Web App ã€hybrid Appã€Native Appï¼Ÿ ä½ ç§»åŠ¨ç«¯å‰ç«¯å¼€å‘çš„ç†è§£ï¼Ÿï¼ˆå’Œ Web å‰ç«¯å¼€å‘çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿï¼‰ ä½ å¯¹åŠ ç­çš„çœ‹æ³•ï¼Ÿ åŠ ç­å°±åƒå€Ÿé’±ï¼ŒåŸåˆ™åº”å½“æ˜¯------æ•‘æ€¥ä¸æ•‘ç©· å¹³æ—¶å¦‚ä½•ç®¡ç†ä½ çš„é¡¹ç›®ï¼Ÿ å…ˆæœŸå›¢é˜Ÿå¿…é¡»ç¡®å®šå¥½å…¨å±€æ ·å¼ï¼ˆglobe.cssï¼‰ï¼Œç¼–ç æ¨¡å¼(utf-8) ç­‰ï¼› ç¼–å†™ä¹ æƒ¯å¿…é¡»ä¸€è‡´ï¼ˆä¾‹å¦‚éƒ½æ˜¯é‡‡ç”¨ç»§æ‰¿å¼çš„å†™æ³•ï¼Œå•æ ·å¼éƒ½å†™æˆä¸€è¡Œï¼‰ï¼› æ ‡æ³¨æ ·å¼ç¼–å†™äººï¼Œå„æ¨¡å—éƒ½åŠæ—¶æ ‡æ³¨ï¼ˆæ ‡æ³¨å…³é”®æ ·å¼è°ƒç”¨çš„åœ°æ–¹ï¼‰ï¼› é¡µé¢è¿›è¡Œæ ‡æ³¨ï¼ˆä¾‹å¦‚ é¡µé¢ æ¨¡å— å¼€å§‹å’Œç»“æŸï¼‰ï¼› CSSè·ŸHTML åˆ†æ–‡ä»¶å¤¹å¹¶è¡Œå­˜æ”¾ï¼Œå‘½åéƒ½å¾—ç»Ÿä¸€ï¼ˆä¾‹å¦‚style.cssï¼‰ï¼› JS åˆ†æ–‡ä»¶å¤¹å­˜æ”¾ å‘½åä»¥è¯¥JSåŠŸèƒ½ä¸ºå‡†çš„è‹±æ–‡ç¿»è¯‘ã€‚ å›¾ç‰‡é‡‡ç”¨æ•´åˆçš„ images.png png8 æ ¼å¼æ–‡ä»¶ä½¿ç”¨ å°½é‡æ•´åˆåœ¨ä¸€èµ·ä½¿ç”¨æ–¹ä¾¿å°†æ¥çš„ç®¡ç† å¦‚ä½•è®¾è®¡çªå‘å¤§è§„æ¨¡å¹¶å‘æ¶æ„ï¼Ÿ å½“å›¢é˜Ÿäººæ‰‹ä¸è¶³ï¼ŒæŠŠåŠŸèƒ½ä»£ç å†™å®Œå·²ç»éœ€è¦åŠ ç­çš„æƒ…å†µä¸‹ï¼Œä½ ä¼šåšå‰ç«¯ä»£ç çš„æµ‹è¯•å—ï¼Ÿ è¯´è¯´æœ€è¿‘æœ€æµè¡Œçš„ä¸€äº›ä¸œè¥¿å§ï¼Ÿå¸¸å»å“ªäº›ç½‘ç«™ï¼Ÿ ES6\\WebAssembly\\Node\\MVVM\\Web Components\\React\\React Native\\Webpack ç»„ä»¶åŒ– çŸ¥é“ä»€ä¹ˆæ˜¯SEOå¹¶ä¸”æ€ä¹ˆä¼˜åŒ–ä¹ˆ? çŸ¥é“å„ç§meta dataçš„å«ä¹‰ä¹ˆ? ç§»åŠ¨ç«¯ï¼ˆAndroid IOSï¼‰æ€ä¹ˆåšå¥½ç”¨æˆ·ä½“éªŒ? æ¸…æ™°çš„è§†è§‰çºµçº¿ã€ ä¿¡æ¯çš„åˆ†ç»„ã€æè‡´çš„å‡æ³•ã€ åˆ©ç”¨é€‰æ‹©ä»£æ›¿è¾“å…¥ã€ æ ‡ç­¾åŠæ–‡å­—çš„æ’å¸ƒæ–¹å¼ã€ ä¾é æ˜æ–‡ç¡®è®¤å¯†ç ã€ åˆç†çš„é”®ç›˜åˆ©ç”¨ã€ ç®€å•æè¿°ä¸€ä¸‹ä½ åšè¿‡çš„ç§»åŠ¨APPé¡¹ç›®ç ”å‘æµç¨‹ï¼Ÿ ä½ åœ¨ç°åœ¨çš„å›¢é˜Ÿå¤„äºä»€ä¹ˆæ ·çš„è§’è‰²ï¼Œèµ·åˆ°äº†ä»€ä¹ˆæ˜æ˜¾çš„ä½œç”¨ï¼Ÿ ä½ è®¤ä¸ºæ€æ ·æ‰æ˜¯å…¨ç«¯å·¥ç¨‹å¸ˆï¼ˆFull Stack developerï¼‰ï¼Ÿ ä»‹ç»ä¸€ä¸ªä½ æœ€å¾—æ„çš„ä½œå“å§ï¼Ÿ ä½ æœ‰è‡ªå·±çš„æŠ€æœ¯åšå®¢å—ï¼Œç”¨äº†å“ªäº›æŠ€æœ¯ï¼Ÿ å¯¹å‰ç«¯å®‰å…¨æœ‰ä»€ä¹ˆçœ‹æ³•ï¼Ÿ æ˜¯å¦äº†è§£Webæ³¨å…¥æ”»å‡»ï¼Œè¯´ä¸‹åŸç†ï¼Œæœ€å¸¸è§çš„ä¸¤ç§æ”»å‡»ï¼ˆXSS å’Œ CSRFï¼‰äº†è§£åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿ é¡¹ç›®ä¸­é‡åˆ°å›½å“ªäº›å°è±¡æ·±åˆ»çš„æŠ€æœ¯éš¾é¢˜ï¼Œå…·ä½“æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿã€‚ æœ€è¿‘åœ¨å­¦ä»€ä¹ˆä¸œè¥¿ï¼Ÿ ä½ çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ å¦‚ä½•ç®¡ç†å‰ç«¯å›¢é˜Ÿ? æœ€è¿‘åœ¨å­¦ä»€ä¹ˆï¼Ÿèƒ½è°ˆè°ˆä½ æœªæ¥3ï¼Œ5å¹´ç»™è‡ªå·±çš„è§„åˆ’å—ï¼Ÿ å‰ç«¯å­¦ä¹ ç½‘ç«™æ¨è1. æå®¢æ ‡ç­¾ï¼š http://www.gbtags.com/ 2. ç å†œå‘¨åˆŠï¼š http://weekly.manong.io/issues/ 3. å‰ç«¯å‘¨åˆŠï¼š http://www.feweekly.com/issues 4. æ…•è¯¾ç½‘ï¼š http://www.imooc.com/ 5. div.ioï¼š http://div.io 6. Hacker Newsï¼š https://news.ycombinator.com/news 7. InfoQï¼š http://www.infoq.com/ 8. w3cplusï¼š http://www.w3cplus.com/ 9. Stack Overflowï¼š http://stackoverflow.com/ 10.w3schoolï¼š http://www.w3school.com.cn/ 11.mozillaï¼š https://developer.mozilla.org/zh-CN/docs/Web/JavaScript æ–‡æ¡£æ¨è jQuery åŸºæœ¬åŸç† JavaScript ç§˜å¯†èŠ±å›­ CSSå‚è€ƒæ‰‹å†Œ JavaScript æ ‡å‡†å‚è€ƒæ•™ç¨‹ ECMAScript 6å…¥é—¨ å¤‡æ³¨ï¼š æ ¹æ®è‡ªå·±éœ€è¦é€‰æ‹©æ€§é˜…è¯»ï¼Œé¢è¯•é¢˜æ˜¯å¯¹ç†è®ºçŸ¥è¯†çš„æ€»ç»“ï¼Œè®©è‡ªå·±å­¦ä¼šåº”è¯¥å¦‚ä½•è¡¨è¾¾ã€‚ èµ„æ–™ç­”æ¡ˆä¸å¤Ÿæ­£ç¡®å’Œå…¨é¢ï¼Œæ¬¢è¿æ¬¢è¿Starå’Œæäº¤issuesã€‚ æ ¼å¼ä¸æ–­ä¿®æ”¹æ›´æ–°ä¸­ã€‚ åœ¨ github é¡¹ç›®çš„å³ä¸Šè§’ï¼Œæœ‰ä¸‰ä¸ªæŒ‰é’®,åˆ†åˆ«æ˜¯ watchã€starã€forkï¼Œæ–°æ¥çš„åŒå­¦æ³¨æ„ä¸è¦ç”¨é”™äº†ï¼Œæ— ä¼‘æ­¢çš„é‚®ä»¶æé†’ä¼šç»™ä½ é€ æˆä¸å¿…è¦çš„ä¿¡æ¯å¹²æ‰°ã€‚ å½“ä½ é€‰æ‹©Watchingï¼Œè¡¨ç¤ºä½ ä»¥åä¼šå…³æ³¨è¿™ä¸ªé¡¹ç›®çš„å…¨éƒ¨åŠ¨æ€ï¼Œä»¥ååªè¦è¿™ä¸ªé¡¹ç›®å‘ç”Ÿå˜åŠ¨ï¼Œè¢«åˆ«äººæäº¤äº†pull requestã€è¢«å‘èµ·äº†issueç­‰æƒ…å†µä½ éƒ½ä¼šæ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚ starç›¸å½“äºæ˜¯ç‚¹èµæˆ–æ”¶è—ï¼Œæ–¹ä¾¿ä»¥åæŸ¥æ‰¾ã€‚ forkè¡¨ç¤ºä½ æƒ³è¦è¡¥å……å®Œå–„è¿™ä¸ªé¡¹ç›®çš„å†…å®¹ã€‚","tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://microzz.com/tags/å‰ç«¯/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://microzz.com/tags/é¢è¯•/"},{"name":"æ±‚èŒ","slug":"æ±‚èŒ","permalink":"https://microzz.com/tags/æ±‚èŒ/"}]},{"title":"å‰ç«¯é¢è¯•é¢˜(éƒ¨åˆ†)","date":"2017-02-08T14:52:44.000Z","path":"2017/02/08/web-interview/","text":"åŸå‹ï¼š æˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½å¯ä»¥æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯åŸå‹ã€‚ å½“æˆ‘ä»¬åœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œé€‰æ‹©æ€§çš„å°†ä¸€äº›å±æ€§å’Œæ–¹æ³•é€šè¿‡prototypeå±æ€§ï¼ŒæŒ‚è½½åœ¨åŸå‹å¯¹è±¡ä¸Šã€‚è€Œæ¯ä¸€ä¸ªnewå‡ºæ¥çš„å®ä¾‹ï¼Œéƒ½æœ‰ä¸€ä¸ªprotoå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§ï¼Œè®©å®ä¾‹å¯¹è±¡ä¹Ÿèƒ½å¤Ÿè®¿é—®åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•ã€‚å› æ­¤ï¼Œå½“æ‰€æœ‰çš„å®ä¾‹éƒ½èƒ½å¤Ÿé€šè¿‡protoè®¿é—®åˆ°åŸå‹å¯¹è±¡æ—¶ï¼ŒåŸå‹å¯¹è±¡çš„æ–¹æ³•ä¸å±æ€§å°±å˜æˆäº†å…±æœ‰æ–¹æ³•ä¸å±æ€§ã€‚ // å£°æ˜æ„é€ å‡½æ•° function Person(name, age) { this.name = name; this.age = age; } // é€šè¿‡prototyeå±æ€§ï¼Œå°†æ–¹æ³•æŒ‚è½½åˆ°åŸå‹å¯¹è±¡ä¸Š Person.prototype.getName = function() { return this.name; } var p1 = new Person(&#39;tim&#39;, 10); var p2 = new Person(&#39;jak&#39;, 22); console.log(p1.getName === p2.getName); // true é€šè¿‡å›¾ç¤ºæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæ„é€ å‡½æ•°çš„prototypeä¸æ‰€æœ‰å®ä¾‹å¯¹è±¡çš„protoéƒ½æŒ‡å‘åŸå‹å¯¹è±¡ã€‚è€ŒåŸå‹å¯¹è±¡çš„constructoræŒ‡å‘æ„é€ å‡½æ•°ã€‚ åŸå‹é“¾ï¼š æˆ‘ä»¬çŸ¥é“æ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰ä¸€ä¸ªå«åštoStringçš„æ–¹æ³•ã€‚é‚£ä¹ˆè¿™ä¸ªæ–¹æ³•åˆ°åº•æ˜¯åœ¨å“ªé‡Œçš„å‘¢ï¼Ÿ å…ˆéšæ„å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼š function foo() {} å…¶ä¸­fooæ˜¯Functionå¯¹è±¡çš„å®ä¾‹ã€‚è€ŒFunctionçš„åŸå‹å¯¹è±¡åŒæ—¶åˆæ˜¯Objectçš„å®ä¾‹ã€‚è¿™æ ·å°±æ„æˆäº†ä¸€æ¡åŸå‹é“¾ã€‚åŸå‹é“¾çš„è®¿é—®ï¼Œå…¶å®è·Ÿä½œç”¨åŸŸé“¾æœ‰å¾ˆå¤§çš„ç›¸ä¼¼ä¹‹å¤„ï¼Œä»–ä»¬éƒ½æ˜¯ä¸€æ¬¡å•å‘çš„æŸ¥æ‰¾è¿‡ç¨‹ã€‚å› æ­¤å®ä¾‹å¯¹è±¡èƒ½å¤Ÿé€šè¿‡åŸå‹é“¾ï¼Œè®¿é—®åˆ°å¤„äºåŸå‹é“¾ä¸Šå¯¹è±¡çš„æ‰€æœ‰å±æ€§ä¸æ–¹æ³•ã€‚è¿™ä¹Ÿæ˜¯fooæœ€ç»ˆèƒ½å¤Ÿè®¿é—®åˆ°å¤„äºObjectåŸå‹å¯¹è±¡ä¸Šçš„toStringæ–¹æ³•çš„åŸå› ã€‚ é—­åŒ…ï¼š é—­åŒ… æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ï¼Œåˆ›å»ºé—­åŒ…çš„æœ€å¸¸è§çš„æ–¹å¼å°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡å¦ä¸€ä¸ªå‡½æ•°è®¿é—®è¿™ä¸ªå‡½æ•°çš„å±€éƒ¨å˜é‡å¦ä¸€ç§ç†è§£ï¼šå½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸæ—¶ï¼Œå°±äº§ç”Ÿäº†é—­åŒ…ï¼Œè¿™ä¸ªå‡½æ•°æŒæœ‰å¯¹è¯¥è¯æ³•ä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œè¿™ä¸ªå¼•ç”¨å°±å«åšé—­åŒ… é—­åŒ…æœ¬è´¨è¿˜æ˜¯å‡½æ•°ï¼Œåªä¸è¿‡è¿™ä¸ªå‡½æ•°ç»‘å®šäº†ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆå‡½æ•°å†…éƒ¨å¼•ç”¨çš„æ‰€æœ‰å˜é‡ï¼‰ JavaScriptçš„ä½œç”¨åŸŸå°±æ˜¯è¯æ³•ä½œç”¨åŸŸè€Œä¸æ˜¯åŠ¨æ€ä½œç”¨åŸŸ,è¯æ³•ä½œç”¨åŸŸæœ€é‡è¦çš„ç‰¹å¾æ˜¯å®ƒçš„å®šä¹‰è¿‡ç¨‹å‘ç”Ÿåœ¨ä»£ç çš„ä¹¦å†™é˜¶æ®µåŠ¨æ€ä½œç”¨åŸŸçš„ä½œç”¨åŸŸé“¾æ˜¯åŸºäºè°ƒç”¨æ ˆçš„ è¯æ³•ä½œç”¨åŸŸçš„ä½œç”¨åŸŸé“¾æ˜¯åŸºäºä»£ç ä¸­çš„ä½œç”¨åŸŸåµŒå¥— é—­åŒ…çš„ç¼ºç‚¹å°±æ˜¯å¸¸é©»å†…å­˜ï¼Œä¼šå¢å¤§å†…å­˜ä½¿ç”¨é‡ï¼Œä½¿ç”¨ä¸å½“å¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„éœ²ã€‚ é—­åŒ…å¯ä»¥ç”¨æ¥ç®¡ç†ç§æœ‰å˜é‡å’Œç§æœ‰æ–¹æ³•ï¼Œå°†å¯¹å˜é‡ï¼ˆçŠ¶æ€ï¼‰çš„å˜åŒ–å°è£…åœ¨å®‰å…¨çš„ç¯å¢ƒä¸­ï¼Œä½¿å¾—è¿™äº›å˜é‡ä¸èƒ½è¢«å¤–éƒ¨éšæ„ä¿®æ”¹ï¼ŒåŒæ—¶åˆå¯ä»¥é€šè¿‡æŒ‡å®šçš„å‡½æ•°æ¥å£æ¥æ“ä½œã€‚ é—­åŒ…æœ‰ä¸‰ä¸ªç‰¹æ€§ï¼š1.å‡½æ•°åµŒå¥—å‡½æ•°2.å‡½æ•°å†…éƒ¨å¯ä»¥å¼•ç”¨å¤–éƒ¨çš„å‚æ•°å’Œå˜é‡3.å‚æ•°å’Œå˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ ç»å…¸æ —å­ï¼šåœ¨ä¸€ä¸ª ul li åˆ—è¡¨ï¼Œæˆ‘æƒ³ç‚¹å‡»æŸä¸ª li ç„¶åè¿”å›å¯¹åº”çš„ç´¢å¼•ã€‚é€šå¸¸çš„åšæ³•æ˜¯ å†™ä¸€ä¸ª for å¾ªç¯ ç„¶åç»™æ¯ä¸ª li ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ã€‚ &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;é—­åŒ…&lt;/title&gt; &lt;script&gt; window.onload = function(){ var aLi = document.getElementsByTagName(&#39;li&#39;); for (var i=0;i&lt;aLi.length;i++){ aLi[i].onclick = function(){ //å½“ç‚¹å‡»æ—¶forå¾ªç¯å·²ç»ç»“æŸ alert(i); }; } } &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;ul&gt; &lt;li&gt;0&lt;/li&gt; &lt;li&gt;1&lt;/li&gt; &lt;li&gt;2&lt;/li&gt; &lt;li&gt;3&lt;/li&gt; &lt;/ul&gt; &lt;/body&gt; &lt;/html&gt; æˆ‘çš„ç†è§£æ˜¯è¿™æ ·çš„ï¼šå½“æˆ‘ä»¬ç»™æ¯ä¸ª li ç»‘å®šç‚¹å‡»äº‹ä»¶çš„æ—¶å€™ï¼Œå› ä¸ºæ˜¯äº‹ä»¶ç›‘å¬ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯äº‹ä»¶é©±åŠ¨æ¨¡å¼ï¼Œå¤„ç†äº‹ä»¶ç›‘å¬çš„é€»è¾‘æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»ä¸€ä¸ª li çš„æ—¶å€™ï¼Œfor å¾ªç¯å·²ç»ç»“æŸï¼Œæ­¤æ—¶çš„ä¸‹æ ‡ç´¢å¼•ä¸º li çš„ lengthå¤§å°ï¼Œæ‰€ä»¥ç‚¹å‡»ä»»ä½•ä¸€ä¸ª li æŸ¥æ‰¾ç´¢å¼•çš„æ—¶å€™éƒ½æ˜¯æŸ¥æ‰¾åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œéƒ½æ˜¯è¿”å› length å¤§å°ã€‚ è§£å†³åŠæ³•ï¼šç»™æ¯ä¸ª li ç»‘å®šç‚¹å‡»äº‹ä»¶çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªå—çº§ä½œç”¨åŸŸï¼Œè¿™æ ·ï¼Œå½“å¤„ç†äº‹ä»¶ç›‘å¬çš„é€»è¾‘çš„æ—¶å€™å‘ä¸ŠæŸ¥æ‰¾å°±ä¸ä¼šæŸ¥æ‰¾åˆ°å…¨å±€ä½œç”¨åŸŸã€‚ 1ã€å®šä¹‰ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•° var aLi = document.getElementsByTagName(&#39;li&#39;); for (var i=0;i&lt;aLi.length;i++){ (function(i){ aLi[i].onclick = function(){ alert(i); }; })(i); } 2ã€ç”¨es6ä¸­çš„letæ›¿æ¢var var aLi = document.getElementsByTagName(&#39;li&#39;); for (let i=0;i&lt;aLi.length;i++){ aLi[i].onclick = function(){ alert(i); }; } å¯¹è±¡ï¼š JSä¸­çš„å¯¹è±¡ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç»„æ•°æ®å’ŒåŠŸèƒ½çš„é›†åˆï¼Œå¸¦æœ‰å„ç§å±æ€§å’Œæ–¹æ³•çš„ä¸€ç§æ•°æ®ç±»å‹ã€‚ JSä¸­å¯¹è±¡åˆ†ä¸ºä¸¤ç§ï¼š1ã€JSçš„å†…å»ºå¯¹è±¡ï¼Œå¦‚ï¼šStringï¼ŒDateï¼ŒArrayç­‰ç­‰(Functionã€Mathã€Number) 2ã€æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„å¯¹è±¡ï¼š 1ï¼‰å¯¹è±¡å­—é¢é‡ 2ï¼‰æ„é€ å‡½æ•° è°ƒç”¨æ„é€ å‡½æ•° new 4ä¸ªæ­¥éª¤ï¼š1ã€åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡2ã€å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆå› æ­¤thiså°±æŒ‡å‘äº†è¿™ä¸ªæ–°å¯¹è±¡ï¼‰3ã€æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰4ã€è¿”å›æ–°å¯¹è±¡ ç»§æ‰¿ jsä¸­çš„ç»§æ‰¿ä¸»è¦ä¾é åŸå‹é“¾æ¥å®ç°çš„ï¼Œé€šè¿‡åŸå‹é“¾çš„æ–¹å¼å®ç°äº†çˆ¶ç±»å­ç±»ä¹‹é—´å…±äº«å±æ€§çš„ç»§æ‰¿ä»¥åŠèº«ä»½ç¡®è®¤æœºåˆ¶ã€‚ æ„é€ å‡½æ•°æ–¹å¼å®ç°ç»§æ‰¿åœ¨å­ç±»çš„æ„é€ å‡½æ•°å†…éƒ¨é€šè¿‡ çˆ¶ç±»å.call æˆ– apply æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°(applyçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°æ•°ç»„ï¼Œcallçš„å‚æ•°è¦å…¨éƒ¨åˆ—ä¸¾å‡ºæ¥ï¼Œbindä¸ä¼šç«‹å³è°ƒç”¨ï¼Œå…¶ä»–ä¸¤ä¸ªä¼šç«‹å³è°ƒç”¨)æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œå› æ­¤å‡½æ•°æ— æ³•å¤ç”¨ã€‚ ç»„åˆç»§æ‰¿ä½¿ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œé€šè¿‡æ„é€ å‡½æ•°å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿Sub.prototype = new Sup()å­ç±»åŸå‹è¦†ç›–æ‰äº†çˆ¶ç±»åŸå‹çš„æŸäº›å±æ€§ï¼ˆçˆ¶ç±»åŸå‹ä¸­çš„ä¾ç„¶è¿˜åœ¨ï¼‰ å¯„ç”Ÿç»„åˆç»§æ‰¿es5ä¸­ä¸»æµçš„ç»§æ‰¿æ–¹å¼Sub.prototype=Object.create(Sup.prototype)Sub.prototype.constructor=SubObject.create(obj)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šå¯¹ä¼ å…¥çš„objå¯¹è±¡è¿›è¡Œæµ…æ‹·è´ã€‚å’Œä¸Šé¢ç»„åˆç»§æ‰¿çš„ä¸»è¦åŒºåˆ«å°±æ˜¯ï¼šå°†çˆ¶ç±»çš„åŸå‹å¤åˆ¶ç»™äº†å­ç±»åŸå‹ã€‚æ„é€ å‡½æ•°ä¸­ç»§æ‰¿çˆ¶ç±»å±æ€§ï¼æ–¹æ³•ï¼Œå¹¶åˆå§‹åŒ–çˆ¶ç±»ã€‚å­ç±»åŸå‹å’Œçˆ¶ç±»åŸå‹å»ºç«‹è”ç³»ã€‚ es6çš„ç»§æ‰¿æ–¹å¼es6å¼•å…¥äº†classã€extendsã€superã€static(éƒ¨åˆ†ä¸ºES2016æ ‡å‡†) class A { } class B extends A { } B.__proto__ === A // true B.prototype.__proto__ === A.prototype // true ç®—æ³•ï¼šæ•°ç»„å»é‡ï¼šå»ºä¸€ä¸ªç©ºå¯¹è±¡å’Œç©ºæ•°ç»„ï¼Œå¾ªç¯éå†éœ€è¦å»é‡çš„æ•°ç»„ï¼Œåˆ¤æ–­å¯¹è±¡æœ‰æ²¡æœ‰æ­¤å±æ€§ï¼Œæ²¡æœ‰çš„è¯å°±ç»™å¯¹è±¡æ·»åŠ æ­¤å±æ€§ï¼Œå¹¶å‘ç©ºæ•°ç»„ä¸­pushè¿™ä¸ªå€¼ã€‚//es5 function unique(arr){ var obj = {} var result = [] for(var i in arr){ if(!obj[arr[i]]){ obj[arr[i]] = true; result.push(arr[i]); } } return result; } //es6 [...new Set(arr)] å†’æ³¡æ’åºï¼šç›¸é‚»ä¸¤ä¸ªå¯¹æ¯”ï¼Œæœ€åæŠŠæœ€å¤§çš„æ’åˆ°äº†æœ€åï¼Œé‡å¤æ­¤è¿‡ç¨‹ã€‚function bubbleSort(arr) { var len = arr.length; for (var i = 0; i &lt; len; i++) { for (var j = 0; j &lt; len - 1 - i; j++) { if (arr[j] &gt; arr[j+1]) { //ç›¸é‚»å…ƒç´ ä¸¤ä¸¤å¯¹æ¯” var temp = arr[j+1]; //å…ƒç´ äº¤æ¢ arr[j+1] = arr[j]; arr[j] = temp; } } } return arr; } é€‰æ‹©æ’åºï¼šå¯»æ‰¾æœ€å°çš„æ•°ï¼Œä¿å­˜ç´¢å¼•ï¼Œç„¶åä¸ç¬¬ä¸€å±‚å¾ªç¯å…¶ä¸‹æ ‡å¯¹äºçš„å€¼è¿›è¡Œäº¤æ¢function selectionSort(arr) { var len = arr.length; var minIndex, temp; for (var i = 0; i &lt; len - 1; i++) { minIndex = i; for (var j = i + 1; j &lt; len; j++) { if (arr[j] &lt; arr[minIndex]) { //å¯»æ‰¾æœ€å°çš„æ•° minIndex = j; //å°†æœ€å°æ•°çš„ç´¢å¼•ä¿å­˜ } } temp = arr[i]; arr[i] = arr[minIndex]; arr[minIndex] = temp; } return arr; } å¿«é€Ÿæ’åºï¼šé€‰å–ä¸€ä¸ªè®°å½•ä½œä¸ºä¸­é—´è½´ï¼Œç„¶åå°†æ¯”â€˜è¿™ä¸ªè®°å½•å€¼â€™å°çš„ç§»åˆ°â€˜è®°å½•å€¼â€™ä¹‹å‰ï¼Œå¤§çš„ç§»åˆ°ä¹‹åï¼Œç„¶åé€’å½’function quickSort(arr) { if(arr.length == 0) { return []; // è¿”å›ç©ºæ•°ç»„ } var cIndex = Math.floor(arr.length / 2); var c = arr.splice(cIndex, 1); var l = []; var r = []; for (var i = 0; i &lt; arr.length; i++) { if(arr[i] &lt; c) { l.push(arr[i]); } else { r.push(arr[i]); } } return quickSort(l).concat(c, quickSort(r)); } æ€§èƒ½ä¼˜åŒ– ç½‘é¡µå†…å®¹ å‡å°‘ httpè¯·æ±‚æ¬¡æ•° å‡å°‘ DNSæŸ¥è¯¢æ¬¡æ•° é¿å…é¡µé¢è·³è½¬ ç¼“å­˜ Ajax å»¶è¿ŸåŠ è½½ æå‰åŠ è½½ å‡å°‘ DOMå…ƒç´ æ•°é‡ é¿å… 404 æœåŠ¡å™¨ ä½¿ç”¨CDN(å†…å®¹åˆ†å‘ç½‘ç»œ) æ·»åŠ Expiresæˆ–Cache-ControlæŠ¥æ–‡å¤´ Gzipå‹ç¼©ä¼ è¾“æ–‡ä»¶ CSS å°†æ ·å¼è¡¨ç½®é¡¶ ç”¨ä»£æ›¿@import JavaScript æŠŠè„šæœ¬ç½®äºé¡µé¢åº•éƒ¨ ä½¿ç”¨å¤–éƒ¨JavaScriptå’ŒCSS ç²¾ç®€JavaScriptå’ŒCSS å»é™¤é‡å¤è„šæœ¬ å‡å°‘DOMè®¿é—® å›¾ç‰‡ ä¼˜åŒ–å›¾åƒ ä¼˜åŒ–CSS Spirite ä¸è¦åœ¨HTMLä¸­ç¼©æ”¾å›¾ç‰‡ favicon.icoè¦å°è€Œä¸”å¯ç¼“å­˜ é—®é¢è¯•å®˜ ç›®å‰å…³æ³¨å“ªäº›æœ€æ–°çš„Webå‰ç«¯æŠ€æœ¯ï¼ˆæœªæ¥çš„å‘å±•æ–¹å‘ï¼‰ï¼Ÿ å›¢é˜Ÿå¦‚ä½•å·¥ä½œçš„ï¼ˆå®ç°ä¸€ä¸ªäº§å“çš„æµç¨‹ï¼‰ï¼Ÿ å…¬å¸çš„è–ªèµ„ç»“æ„æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿï¼ˆæ‘¸æ¸…è‡ªå·±å…·ä½“åœ¨ä»€ä¹ˆå±‚æ¬¡ï¼‰ å…¬å¸çš„æ™‹å‡æœºåˆ¶å…·ä½“æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿï¼ˆçœ‹å‡ºä½ çš„ä¸Šè¿›å¿ƒçš„ç¨³å®šæ€§ï¼‰ Event Loopã€æ¶ˆæ¯é˜Ÿåˆ—ã€äº‹ä»¶è½®è¯¢å¼‚æ­¥å‡½æ•°åœ¨æ‰§è¡Œç»“æŸåï¼Œä¼šåœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ªäº‹ä»¶ï¼ˆå›è°ƒå‡½æ•°ï¼‰(éµå¾ªå…ˆè¿›å…ˆå‡ºåŸåˆ™)ï¼Œä¸»çº¿ç¨‹ä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•åï¼ˆå³ä¸€æ¬¡å¾ªç¯ç»“æŸï¼‰ï¼Œä¸‹ä¸€æ¬¡å¾ªç¯å¼€å§‹å°±åœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­â€œè¯»å–â€äº‹ä»¶ï¼Œç„¶åè°ƒç”¨å®ƒæ‰€å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯ä¸æ–­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªçš„è¿™ç§è¿è¡Œæœºåˆ¶åˆç§°ä¸ºEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ ä¸»çº¿ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œäº§ç”Ÿå †ï¼ˆheapï¼‰å’Œæ ˆï¼ˆstackï¼‰ï¼Œæ ˆä¸­çš„ä»£ç ï¼ˆåŒæ­¥ä»»åŠ¡ï¼‰è°ƒç”¨å„ç§å¤–éƒ¨APIï¼Œå®ƒä»¬åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¸­åŠ å…¥å„ç§äº‹ä»¶ï¼ˆclickï¼Œloadï¼Œdoneï¼‰ã€‚åªè¦æ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œä¸»çº¿ç¨‹å°±ä¼šå»è¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œä¾æ¬¡æ‰§è¡Œé‚£äº›äº‹ä»¶æ‰€å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚ æ‰§è¡Œæ ˆä¸­çš„ä»£ç ï¼ˆåŒæ­¥ä»»åŠ¡ï¼‰ï¼Œæ€»æ˜¯åœ¨è¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰ä¹‹å‰æ‰§è¡Œã€‚ tokenã€session tokenå°±æ˜¯ä»¤ç‰Œ,æ¯”å¦‚ä½ æˆæƒ(ç™»å½•)ä¸€ä¸ªç¨‹åºæ—¶,ä»–å°±æ˜¯ä¸ªä¾æ®,åˆ¤æ–­ä½ æ˜¯å¦å·²ç»æˆæƒè¯¥è½¯ä»¶;cookieå°±æ˜¯å†™åœ¨å®¢æˆ·ç«¯çš„ä¸€ä¸ªtxtæ–‡ä»¶,é‡Œé¢åŒ…æ‹¬ä½ ç™»å½•ä¿¡æ¯ä¹‹ç±»çš„ åŸºäºTokençš„èº«ä»½éªŒè¯çš„è¿‡ç¨‹å¦‚ä¸‹: 1.ç”¨æˆ·é€šè¿‡ç”¨æˆ·åå’Œå¯†ç å‘é€è¯·æ±‚ã€‚ 2.æœåŠ¡ç«¯éªŒè¯ã€‚ 3.æœåŠ¡ç«¯è¿”å›ä¸€ä¸ªç­¾åçš„token ç»™å®¢æˆ·ç«¯ã€‚ 4.å®¢æˆ·ç«¯å‚¨å­˜token,å¹¶ä¸”æ¯æ¬¡ç”¨äºå‘é€è¯·æ±‚ã€‚ 5.æœåŠ¡ç«¯éªŒè¯tokenå¹¶è¿”å›æ•°æ®ã€‚ æ¯ä¸€æ¬¡è¯·æ±‚éƒ½éœ€è¦tokenã€‚ sessionæ˜¯æŒ‡ä¸€ç±»ç”¨æ¥åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ä¿æŒçŠ¶æ€çš„è§£å†³æ–¹æ¡ˆ,ä¹Ÿå¯ä»¥ç”¨æ¥ä¿å­˜å°‘é‡æ•°æ®ï¼Œä½†ä¼šéšç€ä¼šè¯ç»“æŸè€Œé”€æ¯ã€‚ ç¼“å­˜ Expiresã€Cache-Controlã€Last-Modifiedã€ ETag æµè§ˆå™¨ç¼“å­˜ï¼ˆBrowser Cachingï¼‰æ˜¯æµè§ˆå™¨ç«¯ä¿å­˜æ•°æ®ç”¨äºå¿«é€Ÿè¯»å–æˆ–é¿å…é‡å¤èµ„æºè¯·æ±‚çš„ä¼˜åŒ–æœºåˆ¶ï¼Œæœ‰æ•ˆçš„ç¼“å­˜ä½¿ç”¨å¯ä»¥é¿å…é‡å¤çš„ç½‘ç»œè¯·æ±‚å’Œæµè§ˆå™¨å¿«é€Ÿåœ°è¯»å–æœ¬åœ°æ•°æ®ï¼Œ httpç¼“å­˜ httpç¼“å­˜æ˜¯åŸºäºHTTPåè®®çš„æµè§ˆå™¨æ–‡ä»¶çº§ç¼“å­˜æœºåˆ¶ã€‚å³é’ˆå¯¹æ–‡ä»¶çš„é‡å¤è¯·æ±‚æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å¯ä»¥æ ¹æ®åè®®å¤´åˆ¤æ–­ä»æœåŠ¡å™¨ç«¯è¯·æ±‚æ–‡ä»¶è¿˜æ˜¯ä»æœ¬åœ°è¯»å–æ–‡ä»¶åˆ¤æ–­expiresï¼Œå¦‚æœæœªè¿‡æœŸï¼Œç›´æ¥è¯»å–httpç¼“å­˜æ–‡ä»¶ indexDB æ˜¯ä¸€ä¸ªåœ¨å®¢æˆ·ç«¯å­˜å‚¨å¯è§‚æ•°é‡çš„ç»“æ„åŒ–æ•°æ®,å¹¶ä¸”ä¸ºè¿™äº›æ•°æ®æ·»åŠ ç´¢å¼•è¿›è¡Œé«˜æ€§èƒ½æ£€ç´¢ã€‚ cookie æŒ‡ä¸€èˆ¬ç½‘ç«™ä¸ºäº†è¾¨åˆ«ç”¨æˆ·èº«ä»½ã€å‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ä¸Šçš„æ•°æ®ï¼ˆé€šå¸¸ç»è¿‡åŠ å¯†ï¼‰ã€‚cookieä¸€èˆ¬é€šè¿‡httpè¯·æ±‚ä¸­åœ¨å¤´éƒ¨ä¸€èµ·å‘é€åˆ°æœåŠ¡å™¨ç«¯ã€‚ä¸€æ¡cookieè®°å½•ä¸»è¦ç”±é”®ã€å€¼ã€åŸŸã€è¿‡æœŸæ—¶é—´ã€å¤§å°ç»„æˆï¼Œä¸€èˆ¬ç”¨æˆ·ä¿å­˜ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯ã€‚ localstorage localStorageæ˜¯h5çš„ä¸€ç§æ–°çš„æœ¬åœ°ç¼“å­˜æ–¹æ¡ˆ,åŠ å¿«ä¸‹æ¬¡é¡µé¢æ‰“å¼€æ—¶çš„æ¸²æŸ“é€Ÿåº¦,é™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼Œå¦åˆ™æ•°æ®æ˜¯æ°¸è¿œä¸ä¼šè¿‡æœŸçš„ã€‚ sessionstorage ä¹Ÿæ˜¯h5çš„ä¸€ç§æœ¬åœ°ç¼“å­˜æ–¹æ¡ˆï¼Œæ•°æ®çš„å­˜å‚¨ä»…ç‰¹å®šäºæŸä¸ªä¼šè¯ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®åªä¿æŒåˆ°æµè§ˆå™¨å…³é—­ï¼Œå½“æµè§ˆå™¨å…³é—­åé‡æ–°æ‰“å¼€è¿™ä¸ªé¡µé¢æ—¶ï¼Œ ä¹‹å‰çš„å­˜å‚¨å·²ç»è¢«æ¸…é™¤ã€‚","tags":[{"name":"Web","slug":"Web","permalink":"https://microzz.com/tags/Web/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"https://microzz.com/tags/é¢è¯•é¢˜/"}]},{"title":"ES6ç¼–ç¨‹é£æ ¼","date":"2017-02-06T10:00:23.000Z","path":"2017/02/06/es6-style/","text":"ç¼–ç¨‹é£æ ¼æœ¬ç« æ¢è®¨å¦‚ä½•å°†ES6çš„æ–°è¯­æ³•ï¼Œè¿ç”¨åˆ°ç¼–ç å®è·µä¹‹ä¸­ï¼Œä¸ä¼ ç»Ÿçš„JavaScriptè¯­æ³•ç»“åˆåœ¨ä¸€èµ·ï¼Œå†™å‡ºåˆç†çš„ã€æ˜“äºé˜…è¯»å’Œç»´æŠ¤çš„ä»£ç ã€‚ å¤šå®¶å…¬å¸å’Œç»„ç»‡å·²ç»å…¬å¼€äº†å®ƒä»¬çš„é£æ ¼è§„èŒƒï¼Œå…·ä½“å¯å‚é˜…jscs.infoï¼Œä¸‹é¢çš„å†…å®¹ä¸»è¦å‚è€ƒäº†Airbnbçš„JavaScripté£æ ¼è§„èŒƒã€‚ å—çº§ä½œç”¨åŸŸï¼ˆ1ï¼‰let å–ä»£ var ES6æå‡ºäº†ä¸¤ä¸ªæ–°çš„å£°æ˜å˜é‡çš„å‘½ä»¤ï¼šletå’Œconstã€‚å…¶ä¸­ï¼Œletå®Œå…¨å¯ä»¥å–ä»£varï¼Œå› ä¸ºä¸¤è€…è¯­ä¹‰ç›¸åŒï¼Œè€Œä¸”letæ²¡æœ‰å‰¯ä½œç”¨ã€‚ &#39;use strict&#39;; if (true) { let x = &#39;hello&#39;; } for (let i = 0; i &lt; 10; i++) { console.log(i); } ä¸Šé¢ä»£ç å¦‚æœç”¨varæ›¿ä»£letï¼Œå®é™…ä¸Šå°±å£°æ˜äº†ä¸¤ä¸ªå…¨å±€å˜é‡ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æœ¬æ„ã€‚å˜é‡åº”è¯¥åªåœ¨å…¶å£°æ˜çš„ä»£ç å—å†…æœ‰æ•ˆï¼Œvarå‘½ä»¤åšä¸åˆ°è¿™ä¸€ç‚¹ã€‚ varå‘½ä»¤å­˜åœ¨å˜é‡æå‡æ•ˆç”¨ï¼Œletå‘½ä»¤æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚ &#39;use strict&#39;; if(true) { console.log(x); // ReferenceError let x = &#39;hello&#39;; } ä¸Šé¢ä»£ç å¦‚æœä½¿ç”¨varæ›¿ä»£letï¼Œconsole.logé‚£ä¸€è¡Œå°±ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯ä¼šè¾“å‡ºundefinedï¼Œå› ä¸ºå˜é‡å£°æ˜æå‡åˆ°ä»£ç å—çš„å¤´éƒ¨ã€‚è¿™è¿åäº†å˜é‡å…ˆå£°æ˜åä½¿ç”¨çš„åŸåˆ™ã€‚ æ‰€ä»¥ï¼Œå»ºè®®ä¸å†ä½¿ç”¨varå‘½ä»¤ï¼Œè€Œæ˜¯ä½¿ç”¨letå‘½ä»¤å–ä»£ã€‚ ï¼ˆ2ï¼‰å…¨å±€å¸¸é‡å’Œçº¿ç¨‹å®‰å…¨ åœ¨letå’Œconstä¹‹é—´ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨constï¼Œå°¤å…¶æ˜¯åœ¨å…¨å±€ç¯å¢ƒï¼Œä¸åº”è¯¥è®¾ç½®å˜é‡ï¼Œåªåº”è®¾ç½®å¸¸é‡ã€‚ constä¼˜äºletæœ‰å‡ ä¸ªåŸå› ã€‚ä¸€ä¸ªæ˜¯constå¯ä»¥æé†’é˜…è¯»ç¨‹åºçš„äººï¼Œè¿™ä¸ªå˜é‡ä¸åº”è¯¥æ”¹å˜ï¼›å¦ä¸€ä¸ªæ˜¯constæ¯”è¾ƒç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œè¿ç®—ä¸æ”¹å˜å€¼ï¼Œåªæ˜¯æ–°å»ºå€¼ï¼Œè€Œä¸”è¿™æ ·ä¹Ÿæœ‰åˆ©äºå°†æ¥çš„åˆ†å¸ƒå¼è¿ç®—ï¼›æœ€åä¸€ä¸ªåŸå› æ˜¯ JavaScript ç¼–è¯‘å™¨ä¼šå¯¹constè¿›è¡Œä¼˜åŒ–ï¼Œæ‰€ä»¥å¤šä½¿ç”¨constï¼Œæœ‰åˆ©äºæä¾›ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼Œä¹Ÿå°±æ˜¯è¯´letå’Œconstçš„æœ¬è´¨åŒºåˆ«ï¼Œå…¶å®æ˜¯ç¼–è¯‘å™¨å†…éƒ¨çš„å¤„ç†ä¸åŒã€‚ // bad var a = 1, b = 2, c = 3; // good const a = 1; const b = 2; const c = 3; // best const [a, b, c] = [1, 2, 3]; constå£°æ˜å¸¸é‡è¿˜æœ‰ä¸¤ä¸ªå¥½å¤„ï¼Œä¸€æ˜¯é˜…è¯»ä»£ç çš„äººç«‹åˆ»ä¼šæ„è¯†åˆ°ä¸åº”è¯¥ä¿®æ”¹è¿™ä¸ªå€¼ï¼ŒäºŒæ˜¯é˜²æ­¢äº†æ— æ„é—´ä¿®æ”¹å˜é‡å€¼æ‰€å¯¼è‡´çš„é”™è¯¯ã€‚ æ‰€æœ‰çš„å‡½æ•°éƒ½åº”è¯¥è®¾ç½®ä¸ºå¸¸é‡ã€‚ é•¿è¿œæ¥çœ‹ï¼ŒJavaScriptå¯èƒ½ä¼šæœ‰å¤šçº¿ç¨‹çš„å®ç°ï¼ˆæ¯”å¦‚Intelçš„River Trailé‚£ä¸€ç±»çš„é¡¹ç›®ï¼‰ï¼Œè¿™æ—¶letè¡¨ç¤ºçš„å˜é‡ï¼Œåªåº”å‡ºç°åœ¨å•çº¿ç¨‹è¿è¡Œçš„ä»£ç ä¸­ï¼Œä¸èƒ½æ˜¯å¤šçº¿ç¨‹å…±äº«çš„ï¼Œè¿™æ ·æœ‰åˆ©äºä¿è¯çº¿ç¨‹å®‰å…¨ã€‚ å­—ç¬¦ä¸²é™æ€å­—ç¬¦ä¸²ä¸€å¾‹ä½¿ç”¨å•å¼•å·æˆ–åå¼•å·ï¼Œä¸ä½¿ç”¨åŒå¼•å·ã€‚åŠ¨æ€å­—ç¬¦ä¸²ä½¿ç”¨åå¼•å·ã€‚ // bad const a = &quot;foobar&quot;; const b = &#39;foo&#39; + a + &#39;bar&#39;; // acceptable const c = `foobar`; // good const a = &#39;foobar&#39;; const b = `foo${a}bar`; const c = &#39;foobar&#39;; è§£æ„èµ‹å€¼ä½¿ç”¨æ•°ç»„æˆå‘˜å¯¹å˜é‡èµ‹å€¼æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨è§£æ„èµ‹å€¼ã€‚ const arr = [1, 2, 3, 4]; // bad const first = arr[0]; const second = arr[1]; // good const [first, second] = arr; å‡½æ•°çš„å‚æ•°å¦‚æœæ˜¯å¯¹è±¡çš„æˆå‘˜ï¼Œä¼˜å…ˆä½¿ç”¨è§£æ„èµ‹å€¼ã€‚ // bad function getFullName(user) { const firstName = user.firstName; const lastName = user.lastName; } // good function getFullName(obj) { const { firstName, lastName } = obj; } // best function getFullName({ firstName, lastName }) { } å¦‚æœå‡½æ•°è¿”å›å¤šä¸ªå€¼ï¼Œä¼˜å…ˆä½¿ç”¨å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œè€Œä¸æ˜¯æ•°ç»„çš„è§£æ„èµ‹å€¼ã€‚è¿™æ ·ä¾¿äºä»¥åæ·»åŠ è¿”å›å€¼ï¼Œä»¥åŠæ›´æ”¹è¿”å›å€¼çš„é¡ºåºã€‚ // bad function processInput(input) { return [left, right, top, bottom]; } // good function processInput(input) { return { left, right, top, bottom }; } const { left, right } = processInput(input); å¯¹è±¡å•è¡Œå®šä¹‰çš„å¯¹è±¡ï¼Œæœ€åä¸€ä¸ªæˆå‘˜ä¸ä»¥é€—å·ç»“å°¾ã€‚å¤šè¡Œå®šä¹‰çš„å¯¹è±¡ï¼Œæœ€åä¸€ä¸ªæˆå‘˜ä»¥é€—å·ç»“å°¾ã€‚ // bad const a = { k1: v1, k2: v2, }; const b = { k1: v1, k2: v2 }; // good const a = { k1: v1, k2: v2 }; const b = { k1: v1, k2: v2, }; å¯¹è±¡å°½é‡é™æ€åŒ–ï¼Œä¸€æ—¦å®šä¹‰ï¼Œå°±ä¸å¾—éšæ„æ·»åŠ æ–°çš„å±æ€§ã€‚å¦‚æœæ·»åŠ å±æ€§ä¸å¯é¿å…ï¼Œè¦ä½¿ç”¨Object.assignæ–¹æ³•ã€‚ // bad const a = {}; a.x = 3; // if reshape unavoidable const a = {}; Object.assign(a, { x: 3 }); // good const a = { x: null }; a.x = 3; å¦‚æœå¯¹è±¡çš„å±æ€§åæ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥åœ¨åˆ›é€ å¯¹è±¡çš„æ—¶å€™ï¼Œä½¿ç”¨å±æ€§è¡¨è¾¾å¼å®šä¹‰ã€‚ // bad const obj = { id: 5, name: &#39;San Francisco&#39;, }; obj[getKey(&#39;enabled&#39;)] = true; // good const obj = { id: 5, name: &#39;San Francisco&#39;, [getKey(&#39;enabled&#39;)]: true, }; ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡objçš„æœ€åä¸€ä¸ªå±æ€§åï¼Œéœ€è¦è®¡ç®—å¾—åˆ°ã€‚è¿™æ—¶æœ€å¥½é‡‡ç”¨å±æ€§è¡¨è¾¾å¼ï¼Œåœ¨æ–°å»ºobjçš„æ—¶å€™ï¼Œå°†è¯¥å±æ€§ä¸å…¶ä»–å±æ€§å®šä¹‰åœ¨ä¸€èµ·ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ‰€æœ‰å±æ€§å°±åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰äº†ã€‚ å¦å¤–ï¼Œå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œå°½é‡é‡‡ç”¨ç®€æ´è¡¨è¾¾æ³•ï¼Œè¿™æ ·æ˜“äºæè¿°å’Œä¹¦å†™ã€‚ var ref = &#39;some value&#39;; // bad const atom = { ref: ref, value: 1, addValue: function (value) { return atom.value + value; }, }; // good const atom = { ref, value: 1, addValue(value) { return atom.value + value; }, }; æ•°ç»„ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰æ‹·è´æ•°ç»„ã€‚ // bad const len = items.length; const itemsCopy = []; let i; for (i = 0; i &lt; len; i++) { itemsCopy[i] = items[i]; } // good const itemsCopy = [...items]; ä½¿ç”¨Array.fromæ–¹æ³•ï¼Œå°†ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡è½¬ä¸ºæ•°ç»„ã€‚ const foo = document.querySelectorAll(&#39;.foo&#39;); const nodes = Array.from(foo); å‡½æ•°ç«‹å³æ‰§è¡Œå‡½æ•°å¯ä»¥å†™æˆç®­å¤´å‡½æ•°çš„å½¢å¼ã€‚ (() =&gt; { console.log(&#39;Welcome to the Internet.&#39;); })(); é‚£äº›éœ€è¦ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼çš„åœºåˆï¼Œå°½é‡ç”¨ç®­å¤´å‡½æ•°ä»£æ›¿ã€‚å› ä¸ºè¿™æ ·æ›´ç®€æ´ï¼Œè€Œä¸”ç»‘å®šäº†thisã€‚ // bad [1, 2, 3].map(function (x) { return x * x; }); // good [1, 2, 3].map((x) =&gt; { return x * x; }); // best [1, 2, 3].map(x =&gt; x * x); ç®­å¤´å‡½æ•°å–ä»£Function.prototype.bindï¼Œä¸åº”å†ç”¨self/_this/thatç»‘å®š thisã€‚ // bad const self = this; const boundMethod = function(...params) { return method.apply(self, params); } // acceptable const boundMethod = method.bind(this); // best const boundMethod = (...params) =&gt; method.apply(this, params); ç®€å•çš„ã€å•è¡Œçš„ã€ä¸ä¼šå¤ç”¨çš„å‡½æ•°ï¼Œå»ºè®®é‡‡ç”¨ç®­å¤´å‡½æ•°ã€‚å¦‚æœå‡½æ•°ä½“è¾ƒä¸ºå¤æ‚ï¼Œè¡Œæ•°è¾ƒå¤šï¼Œè¿˜æ˜¯åº”è¯¥é‡‡ç”¨ä¼ ç»Ÿçš„å‡½æ•°å†™æ³•ã€‚ æ‰€æœ‰é…ç½®é¡¹éƒ½åº”è¯¥é›†ä¸­åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œæ”¾åœ¨æœ€åä¸€ä¸ªå‚æ•°ï¼Œå¸ƒå°”å€¼ä¸å¯ä»¥ç›´æ¥ä½œä¸ºå‚æ•°ã€‚ // bad function divide(a, b, option = false ) { } // good function divide(a, b, { option = false } = {}) { } ä¸è¦åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨argumentså˜é‡ï¼Œä½¿ç”¨restè¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰ä»£æ›¿ã€‚å› ä¸ºrestè¿ç®—ç¬¦æ˜¾å¼è¡¨æ˜ä½ æƒ³è¦è·å–å‚æ•°ï¼Œè€Œä¸”argumentsæ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œè€Œrestè¿ç®—ç¬¦å¯ä»¥æä¾›ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ã€‚ // bad function concatenateAll() { const args = Array.prototype.slice.call(arguments); return args.join(&#39;&#39;); } // good function concatenateAll(...args) { return args.join(&#39;&#39;); } ä½¿ç”¨é»˜è®¤å€¼è¯­æ³•è®¾ç½®å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ã€‚ // bad function handleThings(opts) { opts = opts || {}; } // good function handleThings(opts = {}) { // ... } Mapç»“æ„æ³¨æ„åŒºåˆ†Objectå’ŒMapï¼Œåªæœ‰æ¨¡æ‹Ÿç°å®ä¸–ç•Œçš„å®ä½“å¯¹è±¡æ—¶ï¼Œæ‰ä½¿ç”¨Objectã€‚å¦‚æœåªæ˜¯éœ€è¦key: valueçš„æ•°æ®ç»“æ„ï¼Œä½¿ç”¨Mapç»“æ„ã€‚å› ä¸ºMapæœ‰å†…å»ºçš„éå†æœºåˆ¶ã€‚ let map = new Map(arr); for (let key of map.keys()) { console.log(key); } for (let value of map.values()) { console.log(value); } for (let item of map.entries()) { console.log(item[0], item[1]); } Classæ€»æ˜¯ç”¨Classï¼Œå–ä»£éœ€è¦prototypeçš„æ“ä½œã€‚å› ä¸ºClassçš„å†™æ³•æ›´ç®€æ´ï¼Œæ›´æ˜“äºç†è§£ã€‚ // bad function Queue(contents = []) { this._queue = [...contents]; } Queue.prototype.pop = function() { const value = this._queue[0]; this._queue.splice(0, 1); return value; } // good class Queue { constructor(contents = []) { this._queue = [...contents]; } pop() { const value = this._queue[0]; this._queue.splice(0, 1); return value; } } ä½¿ç”¨extendså®ç°ç»§æ‰¿ï¼Œå› ä¸ºè¿™æ ·æ›´ç®€å•ï¼Œä¸ä¼šæœ‰ç ´åinstanceofè¿ç®—çš„å±é™©ã€‚ // bad const inherits = require(&#39;inherits&#39;); function PeekableQueue(contents) { Queue.apply(this, contents); } inherits(PeekableQueue, Queue); PeekableQueue.prototype.peek = function() { return this._queue[0]; } // good class PeekableQueue extends Queue { peek() { return this._queue[0]; } } æ¨¡å—é¦–å…ˆï¼ŒModuleè¯­æ³•æ˜¯JavaScriptæ¨¡å—çš„æ ‡å‡†å†™æ³•ï¼ŒåšæŒä½¿ç”¨è¿™ç§å†™æ³•ã€‚ä½¿ç”¨importå–ä»£requireã€‚ // bad const moduleA = require(&#39;moduleA&#39;); const func1 = moduleA.func1; const func2 = moduleA.func2; // good import { func1, func2 } from &#39;moduleA&#39;; ä½¿ç”¨exportå–ä»£module.exportsã€‚ // commonJSçš„å†™æ³• var React = require(&#39;react&#39;); var Breadcrumbs = React.createClass({ render() { return &lt;nav /&gt;; } }); module.exports = Breadcrumbs; // ES6çš„å†™æ³• import React from &#39;react&#39;; const Breadcrumbs = React.createClass({ render() { return &lt;nav /&gt;; } }); export default Breadcrumbs å¦‚æœæ¨¡å—åªæœ‰ä¸€ä¸ªè¾“å‡ºå€¼ï¼Œå°±ä½¿ç”¨export defaultï¼Œå¦‚æœæ¨¡å—æœ‰å¤šä¸ªè¾“å‡ºå€¼ï¼Œå°±ä¸ä½¿ç”¨export defaultï¼Œä¸è¦export defaultä¸æ™®é€šçš„exportåŒæ—¶ä½¿ç”¨ã€‚ ä¸è¦åœ¨æ¨¡å—è¾“å…¥ä¸­ä½¿ç”¨é€šé…ç¬¦ã€‚å› ä¸ºè¿™æ ·å¯ä»¥ç¡®ä¿ä½ çš„æ¨¡å—ä¹‹ä¸­ï¼Œæœ‰ä¸€ä¸ªé»˜è®¤è¾“å‡ºï¼ˆexport defaultï¼‰ã€‚ // bad import * as myObject &#39;./importModule&#39;; // good import myObject from &#39;./importModule&#39;; å¦‚æœæ¨¡å—é»˜è®¤è¾“å‡ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°åçš„é¦–å­—æ¯åº”è¯¥å°å†™ã€‚ function makeStyleGuide() { } export default makeStyleGuide; å¦‚æœæ¨¡å—é»˜è®¤è¾“å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡åçš„é¦–å­—æ¯åº”è¯¥å¤§å†™ã€‚ const StyleGuide = { es6: { } }; export default StyleGuide; ESLintçš„ä½¿ç”¨ESLintæ˜¯ä¸€ä¸ªè¯­æ³•è§„åˆ™å’Œä»£ç é£æ ¼çš„æ£€æŸ¥å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥ä¿è¯å†™å‡ºè¯­æ³•æ­£ç¡®ã€é£æ ¼ç»Ÿä¸€çš„ä»£ç ã€‚ é¦–å…ˆï¼Œå®‰è£…ESLintã€‚ $ npm i -g eslint ç„¶åï¼Œå®‰è£…Airbnbè¯­æ³•è§„åˆ™ã€‚ $ npm i -g eslint-config-airbnb æœ€åï¼Œåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª.eslintrcæ–‡ä»¶ï¼Œé…ç½®ESLintã€‚ { &quot;extends&quot;: &quot;eslint-config-airbnb&quot; } ç°åœ¨å°±å¯ä»¥æ£€æŸ¥ï¼Œå½“å‰é¡¹ç›®çš„ä»£ç æ˜¯å¦ç¬¦åˆé¢„è®¾çš„è§„åˆ™ã€‚ index.jsæ–‡ä»¶çš„ä»£ç å¦‚ä¸‹ã€‚ var unusued = &#39;I have no purpose!&#39;; function greet() { var message = &#39;Hello, World!&#39;; alert(message); } greet(); ä½¿ç”¨ESLintæ£€æŸ¥è¿™ä¸ªæ–‡ä»¶ã€‚ $ eslint index.js index.js 1:5 error unusued is defined but never used no-unused-vars 4:5 error Expected indentation of 2 characters but found 4 indent 5:5 error Expected indentation of 2 characters but found 4 indent âœ– 3 problems (3 errors, 0 warnings) ä¸Šé¢ä»£ç è¯´æ˜ï¼ŒåŸæ–‡ä»¶æœ‰ä¸‰ä¸ªé”™è¯¯ï¼Œä¸€ä¸ªæ˜¯å®šä¹‰äº†å˜é‡ï¼Œå´æ²¡æœ‰ä½¿ç”¨ï¼Œå¦å¤–ä¸¤ä¸ªæ˜¯è¡Œé¦–ç¼©è¿›ä¸º4ä¸ªç©ºæ ¼ï¼Œè€Œä¸æ˜¯è§„å®šçš„2ä¸ªç©ºæ ¼ã€‚ æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"è§„èŒƒ","slug":"è§„èŒƒ","permalink":"https://microzz.com/tags/è§„èŒƒ/"}]},{"title":"ã€å¼€å‘åˆ©å™¨ã€‘ä¸­å›½å›½å†…å¯ç”¨APIåˆé›†","date":"2017-02-03T07:00:19.000Z","path":"2017/02/03/API/","text":"ä¸­å›½å›½å†…å¯ç”¨APIåˆé›†ç›®å½• ç¬”è®° å‡ºè¡Œ è¯å…¸ ç”µå•† åœ°å›¾ ç”µå½± å³æ—¶é€šè®¯ å¼€å‘è€…ç½‘ç«™ å¿«é€’æŸ¥è¯¢ æ—…æ¸¸ ç¤¾äº¤ è§†é¢‘ å¤©æ°” å›¢é˜Ÿåä½œ å›¾ç‰‡ä¸å›¾åƒå¤„ç† å¤–å– æ¶ˆæ¯æ¨é€ éŸ³ä¹ äº‘ è¯­éŸ³è¯†åˆ« ç»¼åˆ ç¬”è®° OneNote - OneNoteæ”¯æŒè·å–ï¼Œå¤åˆ¶ï¼Œåˆ›å»ºï¼Œæ›´æ–°ï¼Œå¯¼å…¥ä¸å¯¼å‡ºç¬”è®°ï¼Œæ”¯æŒä¸ºç¬”è®°æ·»åŠ å¤šåª’ä½“å†…å®¹ï¼Œç®¡ç†æƒé™ç­‰ã€‚æä¾›SDKå’ŒDemoã€‚ ä¸ºçŸ¥ç¬”è®° - ä¸ºçŸ¥ç¬”è®°Windowså®¢æˆ·ç«¯å¼€æ”¾äº†å¤§é‡çš„APIï¼Œå…¶ä¸­ç»å¤§éƒ¨åˆ†ï¼Œéƒ½é€šè¿‡COMæä¾›ï¼Œå¯ä»¥åœ¨javascript, C#, C++, Delphiç­‰è¯­è¨€ä¸­ä½¿ç”¨ã€‚æ¥å£é€šè¿‡IDL(Interface description language)è¯­è¨€æè¿°ã€‚ å°è±¡ç¬”è®° - å°è±¡ç¬”è®°æä¾›äº†ActionScript 3, Android, C++, Windows, iOS, Java, JavaScript, OS X, Perl, PHP, Python, Rubyç­‰å¹³å°çš„SDKå’Œå®Œæ•´çš„APIå‚è€ƒæ–‡æ¡£ï¼Œå¯é€šè¿‡APIè¿›è¡Œè®¤è¯ï¼Œç¬”è®°ï¼Œç¬”è®°æœ¬ï¼Œé™„ä»¶ï¼Œæœç´¢ï¼ŒåŒæ­¥ç­‰æ“ä½œï¼ŒåŒæ—¶æä¾›ä¼ä¸šç‰ˆå’Œæœ¬åœ°APIã€‚ æœ‰é“äº‘ç¬”è®° - æœ‰é“äº‘ç¬”è®°æä¾›äº†Android SDKï¼ŒåŒæ—¶Open APIå…è®¸è¿›è¡Œæˆæƒï¼Œç”¨æˆ·ï¼Œç¬”è®°æœ¬ï¼Œç¬”è®°ï¼Œåˆ†äº«ï¼Œé™„ä»¶ç­‰æ–¹é¢çš„æ“ä½œã€‚ å‡ºè¡Œ æ»´æ»´ - æ»´æ»´æä¾›äº†iOSå’ŒAndroid SDK, å¯å®ç°æ‹‰èµ·æ»´æ»´å«è½¦ç­‰æ–¹é¢çš„æ“ä½œã€‚ ç¥å·ä¸“è½¦ - ç¥å·ä¸“è½¦æä¾›äº†APIæ¨¡å¼å’ŒH5æ¨¡å¼ä¸¤ç§æ¥å…¥æ¨¡å¼ï¼Œå…è®¸è¿›è¡ŒåŸºç¡€ä¿¡æ¯ï¼Œè®¢å•ï¼Œæ”¯ä»˜ï¼Œå……å€¼ï¼Œç”¨æˆ·ï¼Œå‘ç¥¨ï¼Œä»£é‡‘åˆ¸ï¼Œä¼ä¸šç­‰æ–¹é¢çš„æ“ä½œã€‚ Uber - Uberæä¾›äº†Androidå’ŒiOSçš„SDK,å…è®¸è¿›è¡Œä¹˜å®¢ï¼Œè¡Œç¨‹ä½“éªŒï¼Œå¸æœºï¼Œæ´¾é€æ¬¡æ•°ç­‰å››å¤§æ–¹é¢çš„æ“ä½œã€‚ è¯å…¸ ç™¾åº¦ç¿»è¯‘ - ç™¾åº¦ç¿»è¯‘æ”¯æŒå¤šç§è¯­è¨€äº’ç›¸ç¿»è¯‘ï¼ŒåŒ…å«PHP, JS, Python, C, Javaç‰ˆDemoã€‚ å¿…åº”è¯å…¸ - å¾®è½¯ç¿»è¯‘APIæ”¯æŒæ–‡å­—å’Œè¯­éŸ³ä¸¤ç§ç±»å‹ï¼Œæ”¯æŒå¤šç§è¯­è¨€äº’ç›¸ç¿»è¯‘ï¼Œæä¾›C#ç‰ˆæœ¬Demoã€‚ é‡‘å±±è¯éœ¸ - é‡‘å±±è¯éœ¸å…è®¸è¿›è¡Œç®€å•çš„ç¿»è¯‘æ“ä½œã€‚ æ‰‡è´ - æ‰‡è´æä¾›äº†å®Œæ•´çš„APIï¼Œå…è®¸è¿›è¡Œç”¨æˆ·ï¼ŒæŸ¥è¯¢ï¼Œæ·»åŠ å­¦ä¹ è®°å½•ï¼Œå¿˜è®°å•è¯ï¼Œä¾‹å¥ï¼Œç¬”è®°ç­‰æ–¹é¢çš„æ“ä½œã€‚ æœ‰é“è¯å…¸ - æœ‰é“è¯å…¸å…è®¸è¿›è¡Œç®€å•çš„ç¿»è¯‘æ“ä½œã€‚ ç”µå•† å½“å½“ - å½“å½“å…è®¸å•†å®¶ç”¨æˆ·å’Œç½‘ç«™æ¥å…¥æˆæƒï¼Œå¯è¿›è¡Œå•†å“ï¼Œè®¢å•ï¼Œå›¾ç‰‡ï¼Œé—®ç­”ï¼Œåº—é“ºå’Œä¿ƒé”€ç­‰æ–¹é¢çš„æ“ä½œã€‚ äº¬ä¸œ - äº¬ä¸œæä¾›äº†Java, PHP, .netçš„SDKï¼Œæˆæƒåå¯è¿›è¡Œå¤šç§æ“ä½œã€‚ è‹å®å¼€æ”¾æœåŠ¡ - è‹å®æä¾›äº†Java, PHP, .Net, Pythonç‰ˆæœ¬çš„SDKï¼Œæˆæƒåå¯è¿›è¡Œå¤šç§æ“ä½œã€‚ æ·˜å®å¼€æ”¾å¹³å° - æ·˜å®æä¾›äº†Java, .Net, PHP, Pythonç‰ˆæœ¬çš„SDKï¼Œæˆæƒåæä¾›å¤šç§æ“ä½œã€‚ äºšé©¬é€Š - äºšé©¬é€Šæä¾›å¤šç§è¯­è¨€ç‰ˆæœ¬çš„SDKï¼Œæˆæƒåå…è®¸å¤šç§æ“ä½œã€‚ åœ°å›¾ ç™¾åº¦åœ°å›¾ - ç™¾åº¦åœ°å›¾æä¾›äº†Android, iOSç‰ˆæœ¬çš„SDKå’ŒJavaScript APIï¼Œå¯è¿›è¡Œå®šä½ã€åœ°å›¾ã€æ•°æ®ã€å‡ºè¡Œã€é¹°çœ¼è½¨è¿¹å’Œåˆ†ææœåŠ¡ã€‚ é«˜å¾·åœ°å›¾ - é«˜å¾·åœ°å›¾æä¾›äº†JavaScriptå’ŒwebæœåŠ¡APIï¼ŒAndroidå’ŒiOS SDKï¼Œæ”¯æŒåœ°å›¾ï¼Œå®šä½ï¼Œæœç´¢ï¼Œè·¯çº¿è§„åˆ’ï¼Œå¯¼èˆªå’Œå®¤å†…åœ°å›¾ç­‰ã€‚ è…¾è®¯åœ°å›¾ - è…¾è®¯åœ°å›¾æä¾›äº†JavaScript APIï¼ŒAndroidå’ŒiOS SDKï¼Œæ”¯æŒå®šä½ï¼Œåœ°å›¾ï¼Œåœ°ç‚¹æœç´¢ï¼Œè·¯çº¿å’Œå¯¼èˆªç­‰ã€‚ å¤©åœ°å›¾ - å¤©åœ°å›¾æä¾›äº†H5 APIå’ŒJavaScript APIç­‰web APIï¼ŒåŒæ—¶æä¾›äº†Androidå’ŒiOS SDKï¼Œæ”¯æŒåŸºç¡€åœ°å›¾æœåŠ¡ï¼Œå›¾å±‚ç®¡ç†ï¼Œåœ°å›¾è¦†ç›–ç‰©ï¼Œåœ°å›¾å·¥å…·ï¼Œåœ°åæœç´¢å’Œå‡ºè¡Œè§„åˆ’æœåŠ¡ã€‚ å›¾å§åœ°å›¾ - å›¾å§æä¾›äº†JavaScriptå’ŒFlash APIï¼ŒAndroidå’ŒiOS SDKï¼Œæ”¯æŒå®šä½ï¼Œåœ°å€è§£æï¼Œä½ç½®æ ‡æ³¨ï¼Œä½ç½®æˆªå›¾ï¼Œè·¯çº¿è§„åˆ’ï¼Œå‘¨è¾¹æŸ¥è¯¢ï¼Œå…´è¶£ç‚¹æœç´¢å’Œåœ¨çº¿å¯¼èˆªã€‚ ç”µå½± è±†ç“£ç”µå½± - è±†ç“£ç”µå½±æ”¯æŒç”µå½±æ¡ç›®ï¼Œå½±äººæ¡ç›®ï¼Œæœç´¢å’Œæ¦œå•ç­‰ã€‚ çŒ«çœ¼ç”µå½±(éå®˜æ–¹) - æ”¯æŒæŸ¥è¯¢é¦–é¡µç”µå½±åˆ—è¡¨ï¼Œç”µå½±è¯¦æƒ…(å«è¯„è®º)ï¼Œæœ¬åœ°å½±é™¢å’Œå½±é™¢è¯¦æƒ…ï¼Œé€‰åº§ã€‚ #éå®˜æ–¹ Vç”µå½±(éå®˜æ–¹) - æ”¯æŒè·å–Vç”µå½±ç½‘ç«™çš„æ•°æ®ã€‚ #éå®˜æ–¹ Timeæ—¶å…‰(éå®˜æ–¹) - æ”¯æŒè·å–æ—¶å…‰ç½‘ç½‘ç«™æ•°æ®ã€‚ #éå®˜æ–¹ å³æ—¶é€šè®¯ ç¯ä¿¡ - æ”¯æŒAndroid, iOS, WebIM, Linux, RESTé›†æˆï¼Œæ”¯æŒå¤šç§æ¶ˆæ¯ç±»å‹ã€‚ èäº‘ - æ”¯æŒAndroid, iOS, Web, æ¸¸æˆé›†æˆï¼Œæ”¯æŒå¤šç§æ¶ˆæ¯ç±»å‹ã€‚ ç½‘æ˜“äº‘ä¿¡ - æ”¯æŒIMå®æ—¶é€šè®¯ï¼Œå®æ—¶éŸ³è§†é¢‘ï¼Œæ•™å­¦ç™½ç­ï¼Œä¸“çº¿ç”µè¯ï¼ŒçŸ­ä¿¡ï¼ŒèŠå¤©å®¤ï¼Œæä¾›iOS, Android, Windowså’ŒWeb SDKã€‚ è…¾è®¯äº‘é€šä¿¡IM - æä¾›iOS, Android, Windowså’ŒWeb SDKï¼Œæ”¯æŒå¤šç§æ¶ˆæ¯ç±»å‹ã€‚ å¼€å‘è€…ç½‘ç«™ Coding - æˆæƒåå¯è®¿é—®coding.netç½‘ç«™çš„å†…å®¹ã€‚ å¹²è´§é›†ä¸­è¥ - æä¾›å¦¹å­å›¾å’ŒAndroid, iOS, å‰ç«¯ï¼Œæ‹“å±•èµ„æºç­‰å†…å®¹ã€‚ diycode - æˆæƒåå¯è®¿é—®diycodeç½‘ç«™çš„å†…å®¹ã€‚ å¼€æºä¸­å›½ - æˆæƒåå¯è®¿é—®å¼€æºä¸­å›½ç½‘ç«™çš„å†…å®¹ã€‚ Laravel China - æˆæƒåå¯è®¿é—® Laravel China ç½‘ç«™çš„å†…å®¹ã€‚ Ruby China - æˆæƒåå¯è®¿é—®Ruby Chinaç½‘ç«™çš„å†…å®¹ã€‚ V2EX - å¯è®¿é—®V2EXç½‘ç«™çš„å†…å®¹ã€‚ å¿«é€’æŸ¥è¯¢ çˆ±å¿«é€’ - çˆ±å¿«é€’æ”¯æŒå›½å†…90å¤šå®¶å¿«é€’ç‰©æµè®¢å•æŸ¥è¯¢æœåŠ¡ï¼Œå…è´¹ç‰ˆæœ‰ä½¿ç”¨æ¬¡æ•°é™åˆ¶ï¼Œå¯ç”¨äºç”µå­å•†åŸå•å·è·Ÿè¸ª,æ‰‹æœºåº”ç”¨,å¾®ä¿¡å¿«é€’æ¥å£ç­‰æœåŠ¡ã€‚ å¿«é€’100 - å¿«é€’100æ”¯æŒ300å®¶å›½å†…å›½é™…å¿«é€’ï¼Œå…è´¹ç‰ˆæœ‰ä½¿ç”¨æ¬¡æ•°é™åˆ¶ã€‚ å¿«é€’é¸Ÿ - å¿«é€’é¸Ÿæ”¯æŒå›½å†…å¤–400å¤šå®¶å¿«é€’å…¬å¸ï¼Œå…è´¹ç‰ˆæœ‰ä½¿ç”¨æ¬¡æ•°é™åˆ¶ï¼ŒåŒ…å«.Net, PHP, Javaç‰ˆDemoã€‚ å¿«é€’ç½‘ - å¿«é€’ç½‘æ”¯æŒä¸Šç™¾å®¶å¿«é€’æŸ¥è¯¢æœåŠ¡ï¼Œå…è´¹ç‰ˆæœ‰ä½¿ç”¨æ¬¡æ•°é™åˆ¶ã€‚ æ—…æ¸¸ å»å“ªå„¿ - æ”¯æŒè·å–å»å“ªå„¿ç½‘çš„å†…å®¹ã€‚ é€”ç‰› - æ”¯æŒé€”ç‰›ç½‘çš„å†…å®¹ï¼Œä»…å¼€æ”¾ç»™ä¾›åº”å•†ç³»ç»Ÿã€‚ æºç¨‹ - æ”¯æŒæºç¨‹ç½‘çš„å†…å®¹ã€‚ è‰ºé¾™ - æ”¯æŒè·å–äº§å“æ•°æ®ï¼Œå®Œæˆç”¨æˆ·çš„é¢„è®¢ï¼Œè¿›è¡Œè®¢å•æŸ¥è¯¢ã€æ›´æ”¹æˆ–å–æ¶ˆã€‚æä¾›åœ¨çº¿å·¥å…·ï¼Œä»¥åŠH5, Java, C#, PHP, Rubyç‰ˆæœ¬çš„Demoã€‚ 12306(éå®˜æ–¹) - æ”¯æŒè·å–12306ç«è½¦ç¥¨ç¥¨æ•°ã€ç¥¨ä»·æŸ¥è¯¢ã€‚ #éå®˜æ–¹ ç¤¾äº¤ é’‰é’‰ - æ”¯æŒå…ç™»ï¼Œä¼ä¸šé€šè®¯å½•ï¼ŒæœåŠ¡çª—ï¼Œé’‰ç›˜ï¼Œåœ°å›¾ï¼Œä¼šè¯ï¼ŒDINGï¼Œç”µè¯ï¼ŒéŸ³é¢‘ï¼Œæ‰«ç ï¼Œæ”¯ä»˜ï¼Œåˆ†äº«ç­‰æœåŠ¡ï¼Œæä¾›SDKå’ŒDemoï¼ŒPCç‰ˆUIè§„èŒƒï¼Œè°ƒè¯•å·¥å…·å’Œé’‰é’‰UIç»„ä»¶åº“ã€‚ è±†ç“£ - æ”¯æŒå›¾ä¹¦ï¼Œç”µå½±ï¼ŒéŸ³ä¹ï¼ŒåŒåŸï¼Œå¹¿æ’­ï¼Œç”¨æˆ·ï¼Œæ—¥è®°ï¼Œç›¸å†Œï¼Œçº¿ä¸Šæ´»åŠ¨ï¼Œè®ºå›ï¼Œå›å¤å’Œæˆ‘å»ç­‰åŠŸèƒ½ï¼Œæä¾›è±†ç“£ç»„ä»¶ï¼Œè±†ç“£æ ‡ç¤ºå’ŒDemoã€‚ å¼€å¿ƒç½‘ - æ”¯æŒç”¨æˆ·ä¿¡æ¯ï¼Œç™»å½•æˆæƒï¼Œå¥½å‹ï¼Œä¼ æ’­åº”ç”¨ï¼Œæ”¯ä»˜ï¼Œåˆ†äº«å†…å®¹ï¼Œæ¶ˆæ¯ï¼Œäº¤äº’ï¼Œå¼€å¿ƒç½‘åº”ç”¨ç­‰å†…å®¹ï¼Œæä¾›SDKï¼Œå¼€æºæ’ä»¶å’Œæ ‡ç¤ºç´ æã€‚ QQäº’è” - æ”¯æŒç”¨æˆ·èµ„æ–™ï¼ŒQQä¼šå‘˜ä¿¡æ¯ï¼Œç©ºé—´ç›¸å†Œï¼Œè…¾è®¯å¾®åšèµ„æ–™ï¼Œåˆ†äº«åˆ°è…¾è®¯å¾®åšï¼Œå¾®åšå¥½å‹ä¿¡æ¯ï¼Œè´¢ä»˜é€šä¿¡æ¯ç­‰å†…å®¹ï¼Œæä¾›SDK, Demo, ä»¥åŠè®¾è®¡èµ„æºã€‚ å¾®åš - æ”¯æŒç²‰ä¸æœåŠ¡ï¼Œå¾®åšï¼Œè¯„è®ºï¼Œç”¨æˆ·ï¼Œå…³ç³»ï¼Œè´¦å·ï¼Œæ”¶è—ï¼Œæœç´¢ï¼Œæé†’ï¼ŒçŸ­é“¾ï¼Œå…¬å…±æœåŠ¡ï¼Œä½ç½®æœåŠ¡ï¼Œåœ°ç†ä¿¡æ¯ï¼Œåœ°å›¾å¼•æ“ï¼Œæ”¯ä»˜ä»¥åŠOAuth2.0æˆæƒç­‰å†…å®¹ï¼Œæä¾›å¾®åšæ ‡ç¤ºåŠSDKã€‚ å¾®ä¿¡ - æ”¯æŒç§»åŠ¨åº”ç”¨ï¼Œç½‘ç«™åº”ç”¨ï¼Œå…¬ä¼—è´¦å·ï¼Œå…¬ä¼—å·ç¬¬ä¸‰æ–¹å¹³å°ç­‰å†…å®¹ï¼Œæä¾›SDK, Demo, ä»¥åŠè®¾è®¡èµ„æºã€‚ è§†é¢‘ çˆ±å¥‡è‰º - æ”¯æŒå¼¹å¹•ï¼Œå…¨è‰²å½©æ’­æ”¾å™¨ï¼Œé«˜æ¸…ç æµï¼Œè§†é¢‘æ‰˜ç®¡ï¼Œæ’­æ”¾çˆ±å¥‡è‰ºè§†é¢‘ï¼Œåº”ç”¨åˆ†å‘ï¼ŒIOCPç­‰å†…å®¹ã€‚ Bilibili(éå®˜æ–¹) - æ”¯æŒç™»å½•ï¼Œæˆ‘çš„ä¿¡æ¯ï¼Œç•ªå‰§ä¸“é¢˜ï¼Œè§†é¢‘/ä¸“é¢˜æ”¶è—ã€å…³æ³¨ï¼Œç•ªå‰§ï¼Œå¼¹å¹•ç­‰ã€‚ #éå®˜æ–¹ ä¹è§† - æ”¯æŒæ ‡å‡†ç›´æ’­ï¼Œæ ‡å‡†ç‚¹æ’­ï¼Œè§†é¢‘å‘è¡Œå¹³å°ï¼Œç§»åŠ¨ç›´æ’­ç­‰å†…å®¹ï¼Œæä¾›SDKä¸‹è½½ã€‚ æœç‹è§†é¢‘ - æ”¯æŒä¸€äºŒçº§å†…å®¹è·å–ï¼Œå†…å®¹åˆ†ç±»è·å–ï¼Œè§†é¢‘è¯¦æƒ…ä¿¡æ¯ï¼Œä¸“è¾‘è¯¦æƒ…ä¿¡æ¯ï¼Œåˆ†çº§åˆ—è¡¨è·å–ï¼Œå…³é”®è¯æœç´¢ç­‰å†…å®¹ã€‚ åœŸè±† - æ”¯æŒè§†é¢‘æ¨¡å—ï¼Œè±†å•æ¨¡å—ï¼Œå½±è§†åº“æ¨¡å—ï¼Œç”¨æˆ·æ¨¡å—ï¼Œè½¬å¸–æ¨¡å—ï¼Œå­—æ®µå®šä¹‰æ¨¡å—ç­‰å†…å®¹ã€‚ ä¼˜é…· - æ”¯æŒå†…å®¹è¾“å‡ºï¼Œè§†é¢‘æœç´¢ï¼Œæ™ºèƒ½æ¨èï¼Œç”¨æˆ·ç™»å½•ï¼Œç”¨æˆ·äº’åŠ¨ï¼Œç”¨æˆ·ä¿¡æ¯ï¼Œè§†é¢‘ä¸Šä¼ è‡³ä¼˜é…·ï¼Œè§†é¢‘äº’åŠ¨ç­‰å†…å®¹ï¼Œæä¾›SDKã€‚ å¤©æ°” å½©äº‘å¤©æ°” - æ”¯æŒå…¨çƒå¤©æ°”æ•°æ®ï¼Œä¸¤ç§ç©ºæ°”è´¨é‡æ•°æ®ï¼Œå¤©æ°”é¢„æŠ¥ï¼Œå®å†µå¤©æ°”ï¼Œç‹¬å®¶é™æ°´é¢„æŠ¥ï¼Œç‹¬å®¶ç©ºæ°”è´¨é‡é¢„æŠ¥ï¼Œå…­ç§å¤©æ°”æ•°æ®ï¼Œå››ç§ç”Ÿæ´»æŒ‡æ•°æ•°æ®ç­‰å†…å®¹ï¼Œéƒ¨åˆ†åŠŸèƒ½æ”¶è´¹ã€‚ å’Œé£å¤©æ°” - æ”¯æŒ7-10å¤©é¢„æŠ¥ï¼Œå®å†µå¤©æ°”ï¼Œæ¯å°æ—¶é¢„æŠ¥ï¼Œç”Ÿæ´»æŒ‡æ•°ï¼Œç¾å®³é¢„è­¦ï¼Œæ™¯ç‚¹å¤©æ°”ï¼Œå†å²å¤©æ°”ï¼ŒåŸå¸‚æŸ¥è¯¢ç­‰å†…å®¹ï¼Œä»…å›½å†…æ•°æ®å…è´¹ã€‚ å¿ƒçŸ¥å¤©æ°” - æ”¯æŒå¤©æ°”å®å†µï¼Œé€æ—¥é¢„æŠ¥å’Œå†å²ï¼Œ24å°æ—¶é€å°æ—¶é¢„æŠ¥ï¼Œè¿‡å»24å°æ—¶å¤©æ°”å†å²è®°å½•ï¼Œæ°”è±¡ç¾å®³é¢„è­¦ï¼Œç©ºæ°”è´¨é‡å®å†µä¸åŸå¸‚æ’è¡Œï¼Œé€æ—¥å’Œé€å°æ—¶ç©ºæ°”è´¨é‡é¢„æŠ¥ï¼Œè¿‡å»24å°æ—¶ç©ºæ°”è´¨é‡å†å²è®°å½•ï¼Œç”Ÿæ´»æŒ‡æ•°ï¼Œå†œå†ã€èŠ‚æ°”ã€ç”Ÿè‚–ï¼ŒæœºåŠ¨è½¦å°¾å·é™è¡Œï¼Œæ—¥å‡ºæ—¥è½ï¼Œæœˆåˆæœˆè½å’Œæœˆåƒï¼ŒåŸå¸‚æœç´¢ç­‰å†…å®¹ï¼Œä»…å›½å†…æ•°æ®å…è´¹ã€‚ å›¢é˜Ÿåä½œ Teambition - æ”¯æŒè¯¦ç»†çš„æ–‡æ¡£è¯´æ˜ï¼Œéƒ¨åˆ†å¹³å°æä¾›demoã€‚ å›¾ç‰‡ä¸å›¾åƒå¤„ç† Bingæ¯æ—¥å£çº¸(éå®˜æ–¹) - æ”¯æŒå›¾ç‰‡URLå’Œå›¾ç‰‡æè¿°ï¼Œå¯è·å–ä¸åŒåœ°åŒºçš„æ•°æ®ã€‚ #éå®˜æ–¹ Camera360 - æ”¯æŒå…¨å¸§ç‡ç›´æ’­ç¾ç™½æ»¤é•œï¼Œæä¾›SDKå’ŒDemoã€‚ å—¨å›¾ - æ”¯æŒå›¾ç‰‡æ ‡æ³¨ï¼Œä»…æä¾›iOSç‰ˆæœ¬SDKã€‚ åç‰‡å…¨èƒ½ç‹ - æ”¯æŒç²¾å‡†è¯†åˆ«å‡ åç§è¯­è¨€çš„åç‰‡ï¼Œè‡ªåŠ¨åˆ‡è¾¹å¹¶ç¾åŒ–åç‰‡å›¾åƒï¼Œè‡ªåŠ¨è¿”å›è¯†åˆ«ç»“æœï¼Œæä¾›å¤šç§ç‰ˆæœ¬SDKï¼Œæ”¶è´¹ã€‚ ä¼ä¸šè¯ä»¶è¯†åˆ« - æ”¯æŒèº«ä»½è¯ï¼Œé©¾é©¶è¯ï¼ŒæŠ¤ç…§ç­‰ï¼Œæ”¶è´¹ã€‚ æ‰«æå…¨èƒ½ç‹ - æ”¯æŒå›¾åƒæ™ºèƒ½å‰ªè£ï¼Œäº”ç§å›¾åƒå¢å¼ºæ¨¡å¼ï¼Œæ‰‹åŠ¨è°ƒèŠ‚å›¾åƒç»†èŠ‚ï¼Œè‡ªåŠ¨è¿”å›æ‰«æç»“æœç­‰ï¼Œæä¾›iOSä¸Androidç‰ˆæœ¬SDKï¼Œæ”¶è´¹ã€‚ æˆ‘çŸ¥å›¾ - æ”¯æŒç›¸ä¼¼å›¾åƒæœç´¢ï¼Œå›¾åƒè¯†åˆ«åŒ¹é…ï¼Œå›¾åƒè¯†åˆ«å…³é”®è¯æ¨èï¼Œé‡å¤å›¾ç‰‡æ¢æµ‹ç­‰å†…å®¹ã€‚ é“¶è¡Œå¡|ä¿¡ç”¨å¡è¯†åˆ« - æä¾›SDKå’ŒAPIï¼Œæ”¶è´¹ã€‚ å¤–å– ç™¾åº¦å¤–å– - æ”¯æŒå•†æˆ·ï¼Œèœå“ï¼Œå•†å“ï¼Œè®¢å•å’ŒåŸºç¡€æ•°æ®ç­‰å†…å®¹ï¼Œæä¾›SDKå’ŒDemoã€‚ å¤§ä¼—ç‚¹è¯„ - æ”¯æŒå•†æˆ·ï¼Œå›¢è´­ï¼Œåœ¨çº¿é¢„å®šï¼Œå•†å“ç‚¹è¯„ï¼Œæ•°æ®ç»Ÿè®¡ï¼Œå…ƒæ•°æ®ç­‰å†…å®¹ã€‚ é¥¿äº†ä¹ˆ - æ”¯æŒæŸ¥è¯¢ï¼Œé¢„å®šï¼Œè®¢å•ï¼Œå…¶ä»–è®¢å•ï¼Œæ•°æ®æ¨é€ï¼Œæ”¯ä»˜ï¼Œè¯„ä»·ï¼Œæ´»åŠ¨ï¼Œè´¦æˆ·åŒæ­¥ï¼Œæ•°æ®è½åœ°åŒæ­¥ç­‰å†…å®¹ã€‚ ç¾å›¢å¤–å– - æ”¯æŒé—¨åº—ï¼Œé…é€èŒƒå›´ï¼Œèœå“ï¼Œè¯å“ï¼Œè®¢å•ï¼Œè®¢å•æ¨é€ç­‰å†…å®¹ã€‚ æ¶ˆæ¯æ¨é€ ç™¾åº¦äº‘æ¨é€ - æ”¯æŒiOS, Androidå’ŒæœåŠ¡å™¨ç«¯ï¼Œæ”¯æŒæ¨é€ï¼Œç»Ÿè®¡ï¼Œç»„ç®¡ç†ç­‰Rest APIæ¥å£ã€‚æœåŠ¡å™¨ç«¯æ”¯æŒJava, Python, PHP, REST APIã€‚æä¾›æ‰€æ”¯æŒå„è¯­è¨€ç‰ˆæœ¬çš„SDKã€‚ åä¸ºæ¨é€ - æ”¯æŒAndroidï¼Œæä¾›SDKã€‚ æå…‰ - æ”¯æŒAndroid, iOS, WindowsPhone, æœåŠ¡å™¨ç«¯REST API, æä¾›Java, Python, PHP, Ruby, C#, Node.jsç­‰ç‰ˆæœ¬çš„SDKã€‚ LeanCloud - æ”¯æŒAndroid, iOS, WindowsPhoneå’ŒWebç½‘é¡µæ¨é€ï¼Œä½¿ç”¨äº‘å¼•æ“å’ŒJavaScriptåˆ›å»ºæ¨é€ï¼Œä½¿ç”¨REST APIæ¨é€æ¶ˆæ¯ã€‚æä¾›Objectvie-C(å¼€æ”¾æºç ), JavaScript(å¼€æ”¾æºç ), Android, Unity, .Net, WindowsPhone, Java(å¼€æ”¾æºç ), Python(å¼€æ”¾æºç ), PHP(å¼€æ”¾æºç ), C++(å¼€æ”¾æºç ), Swift(å¼€æ”¾æºç )ç‰ˆæœ¬SDKã€‚åŒæ—¶æä¾›Demoã€‚ è…¾è®¯ä¿¡é¸½ - æ”¯æŒiOSå’ŒAndroidå¹³å°ï¼ŒæœåŠ¡å™¨ç«¯é‡‡ç”¨Rest API, åŒæ—¶æœåŠ¡å™¨ç«¯æ”¯æŒJava, PHP, Pythonç­‰è¯­è¨€å¹¶æä¾›SDKã€‚ å°ç±³ - æ”¯æŒAndroidå’ŒiOSå¹³å°ï¼ŒæœåŠ¡å™¨ç«¯æ”¯æŒJava, Pythonå¹¶æä¾›SDKã€‚ å‹ç›Ÿ - æ”¯æŒAndroidå’ŒiOSå¹³å°ï¼ŒæœåŠ¡å™¨ç«¯æ”¯æŒPHP, Java, Pythonå¹¶æä¾›SDKã€‚ éŸ³ä¹ ç™¾åº¦éŸ³ä¹(éå®˜æ–¹) - æ”¯æŒé¢‘é“æ­Œæ›²åˆ—è¡¨ï¼Œä¸“è¾‘çš„æ­Œæ›²åˆ—è¡¨ï¼Œæ­Œæ›²çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ­Œæ‰‹ä¸“è¾‘ä¿¡æ¯ï¼Œæœç´¢ï¼Œæ­Œæ‰‹çš„æ‰€æœ‰æ­Œæ›²ï¼Œæ’è¡Œæ¦œï¼Œæ‰€æœ‰ä¸“è¾‘ï¼Œæ‰€æœ‰æ­Œæ‰‹ï¼Œæ­Œæ‰‹çš„ä¸“è¾‘åˆ—è¡¨ï¼Œæ­Œæ‰‹ä¿¡æ¯ï¼Œæ­Œè¯æœç´¢ï¼Œæ­Œæ›²æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ã€‚ #éå®˜æ–¹ è±†ç“£éŸ³ä¹ - æ”¯æŒéŸ³ä¹ä¿¡æ¯ï¼Œè¯„è®ºä¿¡æ¯ï¼Œæ ‡ç­¾ä¿¡æ¯ï¼Œæœç´¢éŸ³ä¹ï¼ŒæŸä¸ªéŸ³ä¹ä¸­æ ‡è®°æœ€å¤šçš„æ ‡ç­¾ï¼Œå‘è¡¨ã€ä¿®æ”¹ã€åˆ é™¤è¯„è®ºï¼Œç”¨æˆ·å¯¹éŸ³ä¹çš„æ‰€æœ‰æ ‡ç­¾ç­‰å†…å®¹ã€‚ è€ƒæ‹‰FM - æ”¯æŒè·å–æŒ‡å®šåˆ†ç±»ä¸‹åˆ—è¡¨å’Œå†…å®¹ï¼Œæœç´¢æŒ‡å®šå…³é”®å­—å†…å®¹ï¼Œä¸“è¾‘/ç”µå°/ç›´æ’­è¯¦æƒ…ï¼ŒæŒ‡å®šä¸“è¾‘ä¸‹åˆ—è¡¨ï¼ŒæŒ‡å®šç”µå°æ’­å•ï¼Œåˆ†ç±»ä¸‹ä¸“è¾‘TOP50ï¼ŒæŒ‡å®šæœŸ(ç¢ç‰‡)æ‰€åœ¨ä¸“è¾‘æœ€æ–°åˆ†é¡µåŠŸèƒ½ï¼Œåˆ†ç±»ä¸‹å…¨éƒ¨ç›´æ’­è®¡åˆ’ï¼Œç‰ˆæœ¬å‡çº§æ¥å£ï¼Œæ’è¡Œæ¦œï¼Œç²¾é€‰ï¼Œä¼ ç»Ÿç”µå°åˆ—è¡¨/è¯¦æƒ…/åœ°åŒºç­‰ã€‚ é…·ç‹—éŸ³ä¹(éå®˜æ–¹) - æ”¯æŒæœç´¢ï¼Œå„ç§æ’è¡Œæ¦œï¼Œæ­Œæ‰‹ä¸“è¾‘ä¿¡æ¯ï¼Œä¸‹è½½å’Œè·å–æ’­æ”¾åœ°å€ã€‚ #éå®˜æ–¹ ä¼é¹…FM - æ”¯æŒè·å–ç”µå°åˆ†ç±»åˆ—è¡¨ï¼Œç”µå°åˆ†ç±»ä¸‹çš„ä¸“è¾‘ä¿¡æ¯åˆ—è¡¨ï¼Œä¸“è¾‘ä¸‹èŠ‚ç›®ä¿¡æ¯åˆ—è¡¨ï¼Œç”µå°èŠ‚ç›®æ’­æ”¾é“¾æ¥ï¼Œæœç´¢å…³é”®å­—ç›¸å…³ä¸»æ’­/ä¸“è¾‘/èŠ‚ç›®ï¼Œä¸»æ’­åä¸‹ä¸“è¾‘ï¼Œç‰¹å®šæ—¶é—´æ®µå†…æ–°å¢ä¸»æ’­/æ›´æ–°çš„ä¸“è¾‘/æ–°å¢çš„ä¸“è¾‘ç­‰ã€‚ QQéŸ³ä¹(éå®˜æ–¹) - æ”¯æŒæ­Œæ›²æ¦œå•ï¼Œæ­Œæ›²/æ­Œè¯åœ°å€ï¼Œæ­Œæ›²å›¾ç‰‡ã€‚ #éå®˜æ–¹ èœ»èœ“FM - æ”¯æŒOAuth2.0æˆæƒï¼ŒéŸ³é¢‘æ•°æ®ä¸­å¿ƒï¼Œåˆ†ç±»ï¼Œç‚¹æ’­ï¼Œç›´æ’­ï¼Œä¸´æ—¶ç›´æ’­ï¼Œæ’è¡Œæ¦œï¼Œæœç´¢ï¼Œå†…å®¹æ›´æ–°çŠ¶æ€ï¼Œä¸»æ’­ï¼Œæ­¤åˆ»ï¼Œä¸“é¢˜ï¼Œæ´»åŠ¨ç­‰å†…å®¹ã€‚ ç½‘æ˜“äº‘éŸ³ä¹(éå®˜æ–¹) - æ”¯æŒè·å–ç”¨æˆ·æ­Œå•ï¼Œæ­Œå•è¯¦æƒ…ï¼Œæ­Œæ›²URLã€‚ #éå®˜æ–¹ å–œé©¬æ‹‰é›…FM - æ”¯æŒAndroidå’ŒiOSå¹³å°ï¼Œå¹¶æä¾›ç›¸åº”çš„SDKå’ŒDemoï¼Œå…·ä½“æ”¯æŒå†…å®¹è¯·ä¸‹è½½ç›¸å…³æ–‡ä»¶æŸ¥çœ‹ã€‚ äº‘ é˜¿é‡Œäº‘ - æ”¯æŒå¼¹æ€§è®¡ç®—ï¼Œæ•°æ®åº“ï¼Œå­˜å‚¨ä¸CDNï¼Œç½‘ç»œï¼Œåº”ç”¨æœåŠ¡ï¼ŒåŸŸåä¸ç½‘ç«™ç­‰ç±»åˆ«çš„å†…å®¹ï¼Œå¹¶æä¾›äº†ç›¸å…³SDKã€‚ ç™¾åº¦äº‘ - æ”¯æŒè®¡ç®—å’Œç½‘ç»œï¼Œå­˜å‚¨å’ŒCDNï¼Œæ•°æ®åº“ï¼Œå®‰å…¨å’Œç®¡ç†ï¼Œæ•°æ®åˆ†æï¼Œæ™ºèƒ½å¤šåª’ä½“æœåŠ¡ï¼Œç‰©è”ç½‘æœåŠ¡ï¼Œäººå·¥æ™ºèƒ½ï¼Œåº”ç”¨æœåŠ¡ï¼Œç½‘ç«™æœåŠ¡ï¼Œæ•°å­—è¥é”€æœåŠ¡ç­‰å†…å®¹ï¼Œå¹¶æä¾›ç›¸å…³çš„SDKã€‚ Bmob - æ”¯æŒäº‘æ•°æ®åº“ï¼Œå®¹å™¨æœåŠ¡ï¼Œæ¶ˆæ¯æ¨é€ï¼Œæ–‡ä»¶å­˜å‚¨ï¼ŒçŸ­ä¿¡éªŒè¯ç ï¼ŒåŠæ—¶é€šè®¯ï¼Œäº‘ç«¯é€»è¾‘ï¼Œå®šæ—¶ä»»åŠ¡ï¼Œåœ°ç†ä½ç½®ç­‰ã€‚ LeanCloud - æ”¯æŒäº‘å­˜å‚¨ï¼Œæ•°æ®åˆ†æï¼Œç”¨æˆ·å…³ç³»ï¼Œå®æ—¶é€šè®¯ï¼Œæ¶ˆæ¯æ¨é€ï¼Œç§»åŠ¨ç»Ÿè®¡ç­‰ã€‚ ä¸ƒç‰›äº‘ - æ”¯æŒå¯¹è±¡å­˜å‚¨ï¼ŒèåˆCDNï¼Œç›´æ’­äº‘ï¼Œæ•°æ®å¤„ç†ç­‰ã€‚ è…¾è®¯äº‘ - æ”¯æŒè®¡ç®—ï¼Œç½‘ç»œï¼Œå­˜å‚¨ä¸CDNï¼Œæ•°æ®åº“ï¼Œå®‰å…¨æœåŠ¡ï¼Œç›‘æ§ä¸ç®¡ç†ï¼ŒåŸŸåæœåŠ¡ï¼Œè§†é¢‘æœåŠ¡ï¼Œå¤§æ•°æ®ä¸AIç­‰å†…å®¹ï¼Œæä¾›ç›¸å…³SDKã€‚ åˆæ‹äº‘ - æ”¯æŒ CDNã€äº‘å­˜å‚¨ã€ç›´æ’­äº‘ã€ç‚¹æ’­äº‘ã€SSLè¯ä¹¦æœåŠ¡ã€äº‘å¤„ç†ã€æµé‡è¥é”€ç­‰ã€‚ é‡ç‹— - æ”¯æŒå®æ—¶æ•°æ®åŒæ­¥ï¼Œå®æ—¶è§†é¢‘é€šè¯ï¼ŒåŠæ—¶é€šè®¯ï¼ŒçŸ­ä¿¡ï¼Œèº«ä»½è®¤è¯ç­‰ã€‚ è¯­éŸ³è¯†åˆ« ç™¾åº¦è¯­éŸ³ - æ”¯æŒå…¨å¹³å°REST API, ç¦»çº¿åœ¨çº¿èåˆæ¨¡å¼ï¼Œæ·±åº¦è¯­ä¹‰è§£æï¼Œåœºæ™¯è¯†åˆ«å®šåˆ¶ï¼Œè‡ªå®šä¹‰ä¸Šä¼ è¯­æ–™ã€è®­ç»ƒæ¨¡å‹ï¼ŒåŸºç¡€æœåŠ¡æ°¸ä¹…å…è´¹ã€‚æä¾›ç›¸åº”SDKå’ŒDemoåº”ç”¨ã€‚ æœç‹—è¯­éŸ³äº‘å¼€æ”¾å¹³å° - æ”¯æŒåœ¨çº¿/ç¦»çº¿è¯­éŸ³è¯†åˆ«ï¼Œåœ¨çº¿å¬æ­Œè¯†æ›²ï¼Œç¦»çº¿è¯­éŸ³åˆæˆç­‰å†…å®¹ã€‚æä¾›ç›¸åº”å¹³å°SDKã€‚ è®¯é£å¼€æ”¾å¹³å° - æ”¯æŒè¯­éŸ³å¬å†™/è½¬å†™ï¼Œåœ¨çº¿/ç¦»çº¿å‘½ä»¤è¯è¯†åˆ«ï¼Œè¯­éŸ³å”¤é†’ç­‰å†…å®¹ï¼Œå¹³å°æ”¯æŒå¹¿æ³›ï¼Œæä¾›ç›¸åº”SDKã€‚ æ‚å¿— è±†ç“£ä¸€åˆ»(éå®˜æ–¹) - æ”¯æŒè·å–æŒ‡å®šæ—¥æœŸæ–‡ç« åˆ—è¡¨ï¼Œæ ç›®æ€»è§ˆï¼Œæ¨èä½œè€…ï¼Œä½œè€…ä¿¡æ¯ï¼Œä½œè€…æ›´å¤šæ–‡ç« ä¿¡æ¯ï¼Œæ ç›®æ–‡ç« åˆ—è¡¨åŠç¿»é¡µï¼Œæ–‡ç« è¯„è®ºåŠçƒ­é—¨è¯„è®ºåˆ—è¡¨ã€‚ #éå®˜æ–¹ Oneä¸€ä¸ª(éå®˜æ–¹) - æ”¯æŒè·å–é¦–é¡µå›¾ç‰‡ï¼Œæ–‡ç« ï¼ŒéŸ³ä¹åŠç”µå½±ã€‚ #éå®˜æ–¹ çŸ¥ä¹æ—¥æŠ¥(éå®˜æ–¹) - æ”¯æŒè·å–ç•Œé¢å¯åŠ¨å›¾åƒï¼Œè½¯ä»¶ç‰ˆæœ¬æŸ¥è¯¢ï¼Œæœ€æ–°æ¶ˆæ¯ï¼Œæ¶ˆæ¯å†…å®¹è·å–ä¸ç¦»çº¿ä¸‹è½½ï¼Œè¿‡å¾€æ¶ˆæ¯ï¼Œæ–°é—»é¢å¤–æ¶ˆæ¯ï¼Œæ–°é—»å¯¹åº”é•¿/çŸ­è¯„è®ºæŸ¥çœ‹ï¼Œä¸»é¢˜æ—¥æŠ¥åˆ—è¡¨ï¼Œä¸»é¢˜æ—¥æŠ¥å†…å®¹ï¼Œçƒ­é—¨æ¶ˆæ¯ï¼Œæ ç›®æ€»è§ˆï¼Œæ ç›®å…·ä½“æ¶ˆæ¯ï¼Œæ–°é—»çš„æ¨èè€…ï¼ŒæŸä¸ªä¸“æ ä¹‹å‰çš„æ–°é—»ï¼ŒEditorçš„ä¸»é¡µç­‰ã€‚ #éå®˜æ–¹ çŸ¥ä¹ä¸“æ (éå®˜æ–¹) - æ”¯æŒè·å–æŒ‡å®šä¸“æ çš„ä¿¡æ¯ï¼ŒæŒ‡å®šä¸“æ çš„æ–‡ç« åˆ—è¡¨ï¼ŒæŒ‡å®šçš„æ–‡ç« å†…å®¹ï¼Œè¯„è®ºåˆ—è¡¨ï¼Œç‚¹èµä¿¡æ¯ã€‚ #éå®˜æ–¹ ç»¼åˆ é˜¿å‡¡è¾¾æ•°æ® - æ”¯æŒé‡‘èè‚¡ç¥¨ï¼Œå……å€¼è®¤è¯ï¼Œä¾¿æ°‘ç±»ï¼Œæ–°é—»æ–‡ç« ï¼ŒåŒ»è¯äº¤é€šï¼Œç§‘æ•™æ–‡è‰ºï¼Œåˆ›æ„æ•°æ®ï¼ŒåŠæ—¶é€šè®¯ç­‰å†…å®¹ã€‚ é˜¿é‡Œå¤§äº - æ”¯æŒéªŒè¯ç ï¼ŒçŸ­ä¿¡é€šçŸ¥ï¼Œè¯­éŸ³é€šçŸ¥ï¼Œæµé‡é’±åŒ…å……å€¼ï¼Œç§å¯†ä¸“çº¿ï¼Œç¾¤å‘åŠ©æ‰‹ç­‰å†…å®¹ã€‚ APiX - æ”¯æŒåŸºç¡€å¾ä¿¡æ•°æ®ï¼Œä¿¡ç”¨åˆ†ææœåŠ¡ï¼Œæ”¯ä»˜ç¼´è´¹æ¥å£ç­‰æ•°æ®ï¼Œéƒ¨åˆ†å…è´¹ã€‚ ç™¾åº¦API STORE - æ”¯æŒå¤šç§ç±»å‹æ•°æ®ï¼Œéƒ¨åˆ†å…è´¹ï¼Œæä¾›SDKã€‚ HaoService - æ”¯æŒå¤šç§ç±»å‹æ•°æ®ã€‚ èšåˆæ•°æ® - æ”¯æŒå¤šç§ç±»å‹æ•°æ®ï¼Œéƒ¨åˆ†å…è´¹ã€‚ é€šè”æ•°æ® - æä¾›é‡‘èç±»æ•°æ®ï¼Œæ”¯æŒå…è´¹è¯•ç”¨ã€‚","tags":[{"name":"API","slug":"API","permalink":"https://microzz.com/tags/API/"},{"name":"å¼€å‘è€…","slug":"å¼€å‘è€…","permalink":"https://microzz.com/tags/å¼€å‘è€…/"}]},{"title":"å‰ç«¯é¢è¯•é¢˜","date":"2017-02-01T07:26:06.000Z","path":"2017/02/01/fe-interview/","text":"å‰ç«¯é¢è¯•é¢˜ä¸€äº›å¼€æ”¾æ€§é¢˜ç›®1.è‡ªæˆ‘ä»‹ç»ï¼šé™¤äº†åŸºæœ¬ä¸ªäººä¿¡æ¯ä»¥å¤–ï¼Œé¢è¯•å®˜æ›´æƒ³å¬çš„æ˜¯ä½ ä¸ä¼—ä¸åŒçš„åœ°æ–¹å’Œä½ çš„ä¼˜åŠ¿ã€‚ 2.é¡¹ç›®ä»‹ç» 3.å¦‚ä½•çœ‹å¾…å‰ç«¯å¼€å‘ï¼Ÿ 4.å¹³æ—¶æ˜¯å¦‚ä½•å­¦ä¹ å‰ç«¯å¼€å‘çš„ï¼Ÿ 5.æœªæ¥ä¸‰åˆ°äº”å¹´çš„è§„åˆ’æ˜¯æ€æ ·çš„ï¼Ÿ positionçš„å€¼ï¼Œ relativeå’Œabsoluteåˆ†åˆ«æ˜¯ç›¸å¯¹äºè°è¿›è¡Œå®šä½çš„ï¼Ÿ absolute :ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œ ç›¸å¯¹äºæœ€è¿‘ä¸€çº§çš„ å®šä½ä¸æ˜¯ static çš„çˆ¶å…ƒç´ æ¥è¿›è¡Œå®šä½ã€‚ fixed ï¼ˆè€IEä¸æ”¯æŒï¼‰ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œé€šå¸¸ç›¸å¯¹äºæµè§ˆå™¨çª—å£æˆ– frame è¿›è¡Œå®šä½ã€‚ relative ç”Ÿæˆç›¸å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºå…¶åœ¨æ™®é€šæµä¸­çš„ä½ç½®è¿›è¡Œå®šä½ã€‚ static é»˜è®¤å€¼ã€‚æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­ sticky ç”Ÿæˆç²˜æ€§å®šä½çš„å…ƒç´ ï¼Œå®¹å™¨çš„ä½ç½®æ ¹æ®æ­£å¸¸æ–‡æ¡£æµè®¡ç®—å¾—å‡º å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜ JSONPï¼š åŸç†æ˜¯ï¼šåŠ¨æ€æ’å…¥scriptæ ‡ç­¾ï¼Œé€šè¿‡scriptæ ‡ç­¾å¼•å…¥ä¸€ä¸ªjsæ–‡ä»¶ï¼Œè¿™ä¸ªjsæ–‡ä»¶è½½å…¥æˆåŠŸåä¼šæ‰§è¡Œæˆ‘ä»¬åœ¨urlå‚æ•°ä¸­æŒ‡å®šçš„å‡½æ•°ï¼Œå¹¶ä¸”ä¼šæŠŠæˆ‘ä»¬éœ€è¦çš„jsonæ•°æ®ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚ ç”±äºåŒæºç­–ç•¥çš„é™åˆ¶ï¼ŒXmlHttpRequeståªå…è®¸è¯·æ±‚å½“å‰æºï¼ˆåŸŸåã€åè®®ã€ç«¯å£ï¼‰çš„èµ„æºï¼Œä¸ºäº†å®ç°è·¨åŸŸè¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡scriptæ ‡ç­¾å®ç°è·¨åŸŸè¯·æ±‚ï¼Œç„¶ååœ¨æœåŠ¡ç«¯è¾“å‡ºJSONæ•°æ®å¹¶æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œä»è€Œè§£å†³äº†è·¨åŸŸçš„æ•°æ®è¯·æ±‚ã€‚ ä¼˜ç‚¹æ˜¯å…¼å®¹æ€§å¥½ï¼Œç®€å•æ˜“ç”¨ï¼Œæ”¯æŒæµè§ˆå™¨ä¸æœåŠ¡å™¨åŒå‘é€šä¿¡ã€‚ç¼ºç‚¹æ˜¯åªæ”¯æŒGETè¯·æ±‚ã€‚ JSONPï¼šjson+paddingï¼ˆå†…å¡«å……ï¼‰ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æŠŠJSONå¡«å……åˆ°ä¸€ä¸ªç›’å­é‡Œ &lt;script&gt; function createJs(sUrl){ var oScript = document.createElement(&#39;script&#39;); oScript.type = &#39;text/javascript&#39;; oScript.src = sUrl; document.getElementsByTagName(&#39;head&#39;)[0].appendChild(oScript); } createJs(&#39;jsonp.js&#39;); box({ &#39;name&#39;: &#39;test&#39; }); function box(json){ alert(json.name); } &lt;/script&gt; CORS æœåŠ¡å™¨ç«¯å¯¹äºCORSçš„æ”¯æŒï¼Œä¸»è¦å°±æ˜¯é€šè¿‡è®¾ç½®Access-Control-Allow-Originæ¥è¿›è¡Œçš„ã€‚å¦‚æœæµè§ˆå™¨æ£€æµ‹åˆ°ç›¸åº”çš„è®¾ç½®ï¼Œå°±å¯ä»¥å…è®¸Ajaxè¿›è¡Œè·¨åŸŸçš„è®¿é—®ã€‚ é€šè¿‡ä¿®æ”¹document.domainæ¥è·¨å­åŸŸ å°†å­åŸŸå’Œä¸»åŸŸçš„document.domainè®¾ä¸ºåŒä¸€ä¸ªä¸»åŸŸ.å‰ææ¡ä»¶ï¼šè¿™ä¸¤ä¸ªåŸŸåå¿…é¡»å±äºåŒä¸€ä¸ªåŸºç¡€åŸŸå!è€Œä¸”æ‰€ç”¨çš„åè®®ï¼Œç«¯å£éƒ½è¦ä¸€è‡´ï¼Œå¦åˆ™æ— æ³•åˆ©ç”¨document.domainè¿›è¡Œè·¨åŸŸ ä¸»åŸŸç›¸åŒçš„ä½¿ç”¨document.domain ä½¿ç”¨window.nameæ¥è¿›è¡Œè·¨åŸŸ windowå¯¹è±¡æœ‰ä¸ªnameå±æ€§ï¼Œè¯¥å±æ€§æœ‰ä¸ªç‰¹å¾ï¼šå³åœ¨ä¸€ä¸ªçª—å£(window)çš„ç”Ÿå‘½å‘¨æœŸå†…,çª—å£è½½å…¥çš„æ‰€æœ‰çš„é¡µé¢éƒ½æ˜¯å…±äº«ä¸€ä¸ªwindow.nameçš„ï¼Œæ¯ä¸ªé¡µé¢å¯¹window.nameéƒ½æœ‰è¯»å†™çš„æƒé™ï¼Œwindow.nameæ˜¯æŒä¹…å­˜åœ¨ä¸€ä¸ªçª—å£è½½å…¥è¿‡çš„æ‰€æœ‰é¡µé¢ä¸­çš„ ä½¿ç”¨HTML5ä¸­æ–°å¼•è¿›çš„window.postMessageæ–¹æ³•æ¥è·¨åŸŸä¼ é€æ•°æ® è¿˜æœ‰flashã€åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®ä»£ç†é¡µé¢ç­‰è·¨åŸŸæ–¹å¼ã€‚ä¸ªäººè®¤ä¸ºwindow.nameçš„æ–¹æ³•æ—¢ä¸å¤æ‚ï¼Œä¹Ÿèƒ½å…¼å®¹åˆ°å‡ ä¹æ‰€æœ‰æµè§ˆå™¨ï¼Œè¿™çœŸæ˜¯æå¥½çš„ä¸€ç§è·¨åŸŸæ–¹æ³•ã€‚ XMLå’ŒJSONçš„åŒºåˆ«(1).æ•°æ®ä½“ç§¯æ–¹é¢ã€‚ JSONç›¸å¯¹äºXMLæ¥è®²ï¼Œæ•°æ®çš„ä½“ç§¯å°ï¼Œä¼ é€’çš„é€Ÿåº¦æ›´å¿«äº›ã€‚ (2).æ•°æ®äº¤äº’æ–¹é¢ã€‚ JSONä¸JavaScriptçš„äº¤äº’æ›´åŠ æ–¹ä¾¿ï¼Œæ›´å®¹æ˜“è§£æå¤„ç†ï¼Œæ›´å¥½çš„æ•°æ®äº¤äº’ã€‚ (3).æ•°æ®æè¿°æ–¹é¢ã€‚ JSONå¯¹æ•°æ®çš„æè¿°æ€§æ¯”XMLè¾ƒå·®ã€‚ (4).ä¼ è¾“é€Ÿåº¦æ–¹é¢ã€‚ JSONçš„é€Ÿåº¦è¦è¿œè¿œå¿«äºXMLã€‚ è°ˆè°ˆä½ å¯¹webpackçš„çœ‹æ³•WebPack æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œä½ å¯ä»¥ä½¿ç”¨WebPackç®¡ç†ä½ çš„æ¨¡å—ä¾èµ–ï¼Œå¹¶ç¼–ç»è¾“å‡ºæ¨¡å—ä»¬æ‰€éœ€çš„é™æ€æ–‡ä»¶ã€‚å®ƒèƒ½å¤Ÿå¾ˆå¥½åœ°ç®¡ç†ã€æ‰“åŒ…Webå¼€å‘ä¸­æ‰€ç”¨åˆ°çš„HTMLã€Javascriptã€CSSä»¥åŠå„ç§é™æ€æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€å­—ä½“ç­‰ï¼‰ï¼Œè®©å¼€å‘è¿‡ç¨‹æ›´åŠ é«˜æ•ˆã€‚å¯¹äºä¸åŒç±»å‹çš„èµ„æºï¼Œwebpackæœ‰å¯¹åº”çš„æ¨¡å—åŠ è½½å™¨ã€‚webpackæ¨¡å—æ‰“åŒ…å™¨ä¼šåˆ†ææ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œæœ€å ç”Ÿæˆäº†ä¼˜åŒ–ä¸”åˆå¹¶åçš„é™æ€èµ„æºã€‚ webpackçš„ä¸¤å¤§ç‰¹è‰²ï¼š 1.code splittingï¼ˆå¯ä»¥è‡ªåŠ¨å®Œæˆï¼‰ 2.loader å¯ä»¥å¤„ç†å„ç§ç±»å‹çš„é™æ€æ–‡ä»¶ï¼Œå¹¶ä¸”æ”¯æŒä¸²è”æ“ä½œ webpack æ˜¯ä»¥commonJSçš„å½¢å¼æ¥ä¹¦å†™è„šæœ¬æ»´ï¼Œä½†å¯¹ AMD/CMD çš„æ”¯æŒä¹Ÿå¾ˆå…¨é¢ï¼Œæ–¹ä¾¿æ—§é¡¹ç›®è¿›è¡Œä»£ç è¿ç§»ã€‚ webpackå…·æœ‰requireJså’Œbrowserifyçš„åŠŸèƒ½ï¼Œä½†ä»æœ‰å¾ˆå¤šè‡ªå·±çš„æ–°ç‰¹æ€§ï¼š 1. å¯¹ CommonJS ã€ AMD ã€ES6çš„è¯­æ³•åšäº†å…¼å®¹ 2. å¯¹jsã€cssã€å›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶éƒ½æ”¯æŒæ‰“åŒ… 3. ä¸²è”å¼æ¨¡å—åŠ è½½å™¨ä»¥åŠæ’ä»¶æœºåˆ¶ï¼Œè®©å…¶å…·æœ‰æ›´å¥½çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ï¼Œä¾‹å¦‚æä¾›å¯¹CoffeeScriptã€ES6çš„æ”¯æŒ 4. æœ‰ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶webpack.config.js 5. å¯ä»¥å°†ä»£ç åˆ‡å‰²æˆä¸åŒçš„chunkï¼Œå®ç°æŒ‰éœ€åŠ è½½ï¼Œé™ä½äº†åˆå§‹åŒ–æ—¶é—´ 6. æ”¯æŒ SourceUrls å’Œ SourceMapsï¼Œæ˜“äºè°ƒè¯• 7. å…·æœ‰å¼ºå¤§çš„Pluginæ¥å£ï¼Œå¤§å¤šæ˜¯å†…éƒ¨æ’ä»¶ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒçµæ´» 8.webpack ä½¿ç”¨å¼‚æ­¥ IO å¹¶å…·æœ‰å¤šçº§ç¼“å­˜ã€‚è¿™ä½¿å¾— webpack å¾ˆå¿«ä¸”åœ¨å¢é‡ç¼–è¯‘ä¸Šæ›´åŠ å¿« è¯´è¯´TCPä¼ è¾“çš„ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹ç­–ç•¥ ä¸ºäº†å‡†ç¡®æ— è¯¯åœ°æŠŠæ•°æ®é€è¾¾ç›®æ ‡å¤„ï¼ŒTCPåè®®é‡‡ç”¨äº†ä¸‰æ¬¡æ¡æ‰‹ç­–ç•¥ã€‚ç”¨TCPåè®®æŠŠæ•°æ®åŒ…é€å‡ºå»åï¼ŒTCPä¸ä¼šå¯¹ä¼ é€ åçš„æƒ…å†µç½®ä¹‹ä¸ç†ï¼Œå®ƒä¸€å®šä¼šå‘å¯¹æ–¹ç¡®è®¤æ˜¯å¦æˆåŠŸé€è¾¾ã€‚æ¡æ‰‹è¿‡ç¨‹ä¸­ä½¿ç”¨äº†TCPçš„æ ‡å¿—ï¼šSYNå’ŒACKã€‚ å‘é€ç«¯é¦–å…ˆå‘é€ä¸€ä¸ªå¸¦SYNæ ‡å¿—çš„æ•°æ®åŒ…ç»™å¯¹æ–¹ã€‚æ¥æ”¶ç«¯æ”¶åˆ°åï¼Œå›ä¼ ä¸€ä¸ªå¸¦æœ‰SYN/ACKæ ‡å¿—çš„æ•°æ®åŒ…ä»¥ç¤ºä¼ è¾¾ç¡®è®¤ä¿¡æ¯ã€‚æœ€åï¼Œå‘é€ç«¯å†å›ä¼ ä¸€ä¸ªå¸¦ACKæ ‡å¿—çš„æ•°æ®åŒ…ï¼Œä»£è¡¨â€œæ¡æ‰‹â€ç»“æŸã€‚è‹¥åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­æŸä¸ªé˜¶æ®µè«åä¸­æ–­ï¼ŒTCPåè®®ä¼šå†æ¬¡ä»¥ç›¸åŒçš„é¡ºåºå‘é€ç›¸åŒçš„æ•°æ®åŒ…ã€‚ æ–­å¼€ä¸€ä¸ªTCPè¿æ¥åˆ™éœ€è¦â€œå››æ¬¡æ¡æ‰‹â€ï¼š ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šä¸»åŠ¨å…³é—­æ–¹å‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­ä¸»åŠ¨æ–¹åˆ°è¢«åŠ¨å…³é—­æ–¹çš„æ•°æ®ä¼ é€ï¼Œä¹Ÿå°±æ˜¯ä¸»åŠ¨å…³é—­æ–¹å‘Šè¯‰è¢«åŠ¨å…³é—­æ–¹ï¼šæˆ‘å·²ç»ä¸ ä¼šå†ç»™ä½ å‘æ•°æ®äº†(å½“ç„¶ï¼Œåœ¨finåŒ…ä¹‹å‰å‘é€å‡ºå»çš„æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°å¯¹åº”çš„ackç¡®è®¤æŠ¥æ–‡ï¼Œä¸»åŠ¨å…³é—­æ–¹ä¾ç„¶ä¼šé‡å‘è¿™äº›æ•°æ®)ï¼Œä½†æ˜¯ï¼Œæ­¤æ—¶ä¸»åŠ¨å…³é—­æ–¹è¿˜å¯ ä»¥æ¥å—æ•°æ®ã€‚ ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šè¢«åŠ¨å…³é—­æ–¹æ”¶åˆ°FINåŒ…åï¼Œå‘é€ä¸€ä¸ªACKç»™å¯¹æ–¹ï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼ˆä¸SYNç›¸åŒï¼Œä¸€ä¸ªFINå ç”¨ä¸€ä¸ªåºå·ï¼‰ã€‚ ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šè¢«åŠ¨å…³é—­æ–¹å‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­è¢«åŠ¨å…³é—­æ–¹åˆ°ä¸»åŠ¨å…³é—­æ–¹çš„æ•°æ®ä¼ é€ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰ä¸»åŠ¨å…³é—­æ–¹ï¼Œæˆ‘çš„æ•°æ®ä¹Ÿå‘é€å®Œäº†ï¼Œä¸ä¼šå†ç»™ä½ å‘æ•°æ®äº†ã€‚ ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šä¸»åŠ¨å…³é—­æ–¹æ”¶åˆ°FINåï¼Œå‘é€ä¸€ä¸ªACKç»™è¢«åŠ¨å…³é—­æ–¹ï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼Œè‡³æ­¤ï¼Œå®Œæˆå››æ¬¡æŒ¥æ‰‹ã€‚ TCPå’ŒUDPçš„åŒºåˆ«TCPï¼ˆTransmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰æ˜¯åŸºäºè¿æ¥çš„åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ­£å¼æ”¶å‘æ•°æ®å‰ï¼Œå¿…é¡»å’Œå¯¹æ–¹å»ºç«‹å¯é çš„è¿æ¥ã€‚ä¸€ä¸ªTCPè¿æ¥å¿…é¡»è¦ç»è¿‡ä¸‰æ¬¡â€œå¯¹è¯â€æ‰èƒ½å»ºç«‹èµ·æ¥ UDPï¼ˆUser Data Protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰æ˜¯ä¸TCPç›¸å¯¹åº”çš„åè®®ã€‚å®ƒæ˜¯é¢å‘éè¿æ¥çš„åè®®ï¼Œå®ƒä¸ä¸å¯¹æ–¹å»ºç«‹è¿æ¥ï¼Œè€Œæ˜¯ç›´æ¥å°±æŠŠæ•°æ®åŒ…å‘é€è¿‡å»ï¼ UDPé€‚ç”¨äºä¸€æ¬¡åªä¼ é€å°‘é‡æ•°æ®ã€å¯¹å¯é æ€§è¦æ±‚ä¸é«˜çš„åº”ç”¨ç¯å¢ƒã€‚ è¯´è¯´ä½ å¯¹ä½œç”¨åŸŸé“¾çš„ç†è§£ä½œç”¨åŸŸé“¾çš„ä½œç”¨æ˜¯ä¿è¯æ‰§è¡Œç¯å¢ƒé‡Œæœ‰æƒè®¿é—®çš„å˜é‡å’Œå‡½æ•°æ˜¯æœ‰åºçš„ï¼Œä½œç”¨åŸŸé“¾çš„å˜é‡åªèƒ½å‘ä¸Šè®¿é—®ï¼Œå˜é‡è®¿é—®åˆ°windowå¯¹è±¡å³è¢«ç»ˆæ­¢ï¼Œä½œç”¨åŸŸé“¾å‘ä¸‹è®¿é—®å˜é‡æ˜¯ä¸è¢«å…è®¸çš„ã€‚ åˆ›å»ºajaxè¿‡ç¨‹(1)åˆ›å»ºXMLHttpRequestå¯¹è±¡,ä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªå¼‚æ­¥è°ƒç”¨å¯¹è±¡. (2)åˆ›å»ºä¸€ä¸ªæ–°çš„HTTPè¯·æ±‚,å¹¶æŒ‡å®šè¯¥HTTPè¯·æ±‚çš„æ–¹æ³•ã€URLåŠéªŒè¯ä¿¡æ¯. (3)è®¾ç½®å“åº”HTTPè¯·æ±‚çŠ¶æ€å˜åŒ–çš„å‡½æ•°. (4)å‘é€HTTPè¯·æ±‚. (5)è·å–å¼‚æ­¥è°ƒç”¨è¿”å›çš„æ•°æ®. (6)ä½¿ç”¨JavaScriptå’ŒDOMå®ç°å±€éƒ¨åˆ·æ–°. æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§æ¸è¿›å¢å¼º ï¼šé’ˆå¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨è¿›è¡Œæ„å»ºé¡µé¢ï¼Œä¿è¯æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œç„¶åå†é’ˆå¯¹é«˜çº§æµè§ˆå™¨è¿›è¡Œæ•ˆæœã€äº¤äº’ç­‰æ”¹è¿›å’Œè¿½åŠ åŠŸèƒ½è¾¾åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ ä¼˜é›…é™çº§ ï¼šä¸€å¼€å§‹å°±æ„å»ºå®Œæ•´çš„åŠŸèƒ½ï¼Œç„¶åå†é’ˆå¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨è¿›è¡Œå…¼å®¹ã€‚ å¸¸è§webå®‰å…¨åŠé˜²æŠ¤åŸç† sqlæ³¨å…¥åŸç† å°±æ˜¯é€šè¿‡æŠŠSQLå‘½ä»¤æ’å…¥åˆ°Webè¡¨å•é€’äº¤æˆ–è¾“å…¥åŸŸåæˆ–é¡µé¢è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆè¾¾åˆ°æ¬ºéª—æœåŠ¡å™¨æ‰§è¡Œæ¶æ„çš„SQLå‘½ä»¤ã€‚ æ€»çš„æ¥è¯´æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š 1.æ°¸è¿œä¸è¦ä¿¡ä»»ç”¨æˆ·çš„è¾“å…¥ï¼Œè¦å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œæ ¡éªŒï¼Œå¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼ï¼Œæˆ–é™åˆ¶é•¿åº¦ï¼Œå¯¹å•å¼•å·å’ŒåŒ&quot;-&quot;è¿›è¡Œè½¬æ¢ç­‰ã€‚ 2.æ°¸è¿œä¸è¦ä½¿ç”¨åŠ¨æ€æ‹¼è£…SQLï¼Œå¯ä»¥ä½¿ç”¨å‚æ•°åŒ–çš„SQLæˆ–è€…ç›´æ¥ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹è¿›è¡Œæ•°æ®æŸ¥è¯¢å­˜å–ã€‚ 3.æ°¸è¿œä¸è¦ä½¿ç”¨ç®¡ç†å‘˜æƒé™çš„æ•°æ®åº“è¿æ¥ï¼Œä¸ºæ¯ä¸ªåº”ç”¨ä½¿ç”¨å•ç‹¬çš„æƒé™æœ‰é™çš„æ•°æ®åº“è¿æ¥ã€‚ 4.ä¸è¦æŠŠæœºå¯†ä¿¡æ¯æ˜æ–‡å­˜æ”¾ï¼Œè¯·åŠ å¯†æˆ–è€…hashæ‰å¯†ç å’Œæ•æ„Ÿçš„ä¿¡æ¯ã€‚ XSSåŸç†åŠé˜²èŒƒ Xss(cross-site scripting)æ”»å‡»æŒ‡çš„æ˜¯æ”»å‡»è€…å¾€Webé¡µé¢é‡Œæ’å…¥æ¶æ„ htmlæ ‡ç­¾æˆ–è€…javascriptä»£ç ã€‚æ¯”å¦‚ï¼šæ”»å‡»è€…åœ¨è®ºå›ä¸­æ”¾ä¸€ä¸ª çœ‹ä¼¼å®‰å…¨çš„é“¾æ¥ï¼Œéª—å–ç”¨æˆ·ç‚¹å‡»åï¼Œçªƒå–cookieä¸­çš„ç”¨æˆ·ç§å¯†ä¿¡æ¯ï¼›æˆ–è€…æ”»å‡»è€…åœ¨è®ºå›ä¸­åŠ ä¸€ä¸ªæ¶æ„è¡¨å•ï¼Œ å½“ç”¨æˆ·æäº¤è¡¨å•çš„æ—¶å€™ï¼Œå´æŠŠä¿¡æ¯ä¼ é€åˆ°æ”»å‡»è€…çš„æœåŠ¡å™¨ä¸­ï¼Œè€Œä¸æ˜¯ç”¨æˆ·åŸæœ¬ä»¥ä¸ºçš„ä¿¡ä»»ç«™ç‚¹ã€‚ XSSé˜²èŒƒæ–¹æ³• é¦–å…ˆä»£ç é‡Œå¯¹ç”¨æˆ·è¾“å…¥çš„åœ°æ–¹å’Œå˜é‡éƒ½éœ€è¦ä»”ç»†æ£€æŸ¥é•¿åº¦å’Œå¯¹â€&lt;â€,â€&gt;â€,â€;â€,â€â€™â€ç­‰å­—ç¬¦åšè¿‡æ»¤ï¼›å…¶æ¬¡ä»»ä½•å†…å®¹å†™åˆ°é¡µé¢ä¹‹å‰éƒ½å¿…é¡»åŠ ä»¥encodeï¼Œé¿å…ä¸å°å¿ƒæŠŠhtml tag å¼„å‡ºæ¥ã€‚è¿™ä¸€ä¸ªå±‚é¢åšå¥½ï¼Œè‡³å°‘å¯ä»¥å µä½è¶…è¿‡ä¸€åŠçš„XSS æ”»å‡»ã€‚ é¦–å…ˆï¼Œé¿å…ç›´æ¥åœ¨cookie ä¸­æ³„éœ²ç”¨æˆ·éšç§ï¼Œä¾‹å¦‚emailã€å¯†ç ç­‰ç­‰ã€‚ å…¶æ¬¡ï¼Œé€šè¿‡ä½¿cookie å’Œç³»ç»Ÿip ç»‘å®šæ¥é™ä½cookie æ³„éœ²åçš„å±é™©ã€‚è¿™æ ·æ”»å‡»è€…å¾—åˆ°çš„cookie æ²¡æœ‰å®é™…ä»·å€¼ï¼Œä¸å¯èƒ½æ‹¿æ¥é‡æ”¾ã€‚ å¦‚æœç½‘ç«™ä¸éœ€è¦å†æµè§ˆå™¨ç«¯å¯¹cookie è¿›è¡Œæ“ä½œï¼Œå¯ä»¥åœ¨Set-Cookie æœ«å°¾åŠ ä¸ŠHttpOnly æ¥é˜²æ­¢javascript ä»£ç ç›´æ¥è·å–cookie ã€‚ å°½é‡é‡‡ç”¨POST è€ŒéGET æäº¤è¡¨å• XSSä¸CSRFæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ XSSæ˜¯è·å–ä¿¡æ¯ï¼Œä¸éœ€è¦æå‰çŸ¥é“å…¶ä»–ç”¨æˆ·é¡µé¢çš„ä»£ç å’Œæ•°æ®åŒ…ã€‚CSRFæ˜¯ä»£æ›¿ç”¨æˆ·å®ŒæˆæŒ‡å®šçš„åŠ¨ä½œï¼Œéœ€è¦çŸ¥é“å…¶ä»–ç”¨æˆ·é¡µé¢çš„ä»£ç å’Œæ•°æ®åŒ…ã€‚ è¦å®Œæˆä¸€æ¬¡CSRFæ”»å‡»ï¼Œå—å®³è€…å¿…é¡»ä¾æ¬¡å®Œæˆä¸¤ä¸ªæ­¥éª¤ï¼š ç™»å½•å—ä¿¡ä»»ç½‘ç«™Aï¼Œå¹¶åœ¨æœ¬åœ°ç”ŸæˆCookieã€‚ åœ¨ä¸ç™»å‡ºAçš„æƒ…å†µä¸‹ï¼Œè®¿é—®å±é™©ç½‘ç«™Bã€‚ CSRFçš„é˜²å¾¡ æœåŠ¡ç«¯çš„CSRFæ–¹å¼æ–¹æ³•å¾ˆå¤šæ ·ï¼Œä½†æ€»çš„æ€æƒ³éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå°±æ˜¯åœ¨å®¢æˆ·ç«¯é¡µé¢å¢åŠ ä¼ªéšæœºæ•°ã€‚ é€šè¿‡éªŒè¯ç çš„æ–¹æ³• Web Worker å’ŒwebSocket workerä¸»çº¿ç¨‹: 1.é€šè¿‡ worker = new Worker( url ) åŠ è½½ä¸€ä¸ªJSæ–‡ä»¶æ¥åˆ›å»ºä¸€ä¸ªworkerï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªworkerå®ä¾‹ã€‚ 2.é€šè¿‡worker.postMessage( data ) æ–¹æ³•æ¥å‘workerå‘é€æ•°æ®ã€‚ 3.ç»‘å®šworker.onmessageæ–¹æ³•æ¥æ¥æ”¶workerå‘é€è¿‡æ¥çš„æ•°æ®ã€‚ 4.å¯ä»¥ä½¿ç”¨ worker.terminate() æ¥ç»ˆæ­¢ä¸€ä¸ªworkerçš„æ‰§è¡Œã€‚ WebSocketæ˜¯Webåº”ç”¨ç¨‹åºçš„ä¼ è¾“åè®®ï¼Œå®ƒæä¾›äº†åŒå‘çš„ï¼ŒæŒ‰åºåˆ°è¾¾çš„æ•°æ®æµã€‚ä»–æ˜¯ä¸€ä¸ªHTML5åè®®ï¼ŒWebSocketçš„è¿æ¥æ˜¯æŒä¹…çš„ï¼Œä»–é€šè¿‡åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¿æŒåŒå·¥è¿æ¥ï¼ŒæœåŠ¡å™¨çš„æ›´æ–°å¯ä»¥è¢«åŠæ—¶æ¨é€ç»™å®¢æˆ·ç«¯ï¼Œè€Œä¸éœ€è¦å®¢æˆ·ç«¯ä»¥ä¸€å®šæ—¶é—´é—´éš”å»è½®è¯¢ã€‚ HTTPå’ŒHTTPSHTTPåè®®é€šå¸¸æ‰¿è½½äºTCPåè®®ä¹‹ä¸Šï¼Œåœ¨HTTPå’ŒTCPä¹‹é—´æ·»åŠ ä¸€ä¸ªå®‰å…¨åè®®å±‚ï¼ˆSSLæˆ–TSLï¼‰ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±æˆäº†æˆ‘ä»¬å¸¸è¯´çš„HTTPSã€‚ é»˜è®¤HTTPçš„ç«¯å£å·ä¸º80ï¼ŒHTTPSçš„ç«¯å£å·ä¸º443ã€‚ ä¸ºä»€ä¹ˆHTTPSå®‰å…¨å› ä¸ºç½‘ç»œè¯·æ±‚éœ€è¦ä¸­é—´æœ‰å¾ˆå¤šçš„æœåŠ¡å™¨è·¯ç”±å™¨çš„è½¬å‘ã€‚ä¸­é—´çš„èŠ‚ç‚¹éƒ½å¯èƒ½ç¯¡æ”¹ä¿¡æ¯ï¼Œè€Œå¦‚æœä½¿ç”¨HTTPSï¼Œå¯†é’¥åœ¨ä½ å’Œç»ˆç‚¹ç«™æ‰æœ‰ã€‚httpsä¹‹æ‰€ä»¥æ¯”httpå®‰å…¨ï¼Œæ˜¯å› ä¸ºä»–åˆ©ç”¨ssl/tlsåè®®ä¼ è¾“ã€‚å®ƒåŒ…å«è¯ä¹¦ï¼Œå¸è½½ï¼Œæµé‡è½¬å‘ï¼Œè´Ÿè½½å‡è¡¡ï¼Œé¡µé¢é€‚é…ï¼Œæµè§ˆå™¨é€‚é…ï¼Œreferä¼ é€’ç­‰ã€‚ä¿éšœäº†ä¼ è¾“è¿‡ç¨‹çš„å®‰å…¨æ€§ å¯¹å‰ç«¯æ¨¡å—åŒ–çš„è®¤è¯† AMD æ˜¯ RequireJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºã€‚ CMD æ˜¯ SeaJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºã€‚ AMD æ˜¯æå‰æ‰§è¡Œï¼ŒCMD æ˜¯å»¶è¿Ÿæ‰§è¡Œã€‚ AMDæ¨èçš„é£æ ¼é€šè¿‡è¿”å›ä¸€ä¸ªå¯¹è±¡åšä¸ºæ¨¡å—å¯¹è±¡ï¼ŒCommonJSçš„é£æ ¼é€šè¿‡å¯¹module.exportsæˆ–exportsçš„å±æ€§èµ‹å€¼æ¥è¾¾åˆ°æš´éœ²æ¨¡å—å¯¹è±¡çš„ç›®çš„ã€‚ CMDæ¨¡å—æ–¹å¼ define(function(require, exports, module) { // æ¨¡å—ä»£ç  }); Javascriptåƒåœ¾å›æ”¶æ–¹æ³• æ ‡è®°æ¸…é™¤ï¼ˆmark and sweepï¼‰ è¿™æ˜¯JavaScriptæœ€å¸¸è§çš„åƒåœ¾å›æ”¶æ–¹å¼ï¼Œå½“å˜é‡è¿›å…¥æ‰§è¡Œç¯å¢ƒçš„æ—¶å€™ï¼Œæ¯”å¦‚å‡½æ•°ä¸­å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œåƒåœ¾å›æ”¶å™¨å°†å…¶æ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€ï¼Œå½“å˜é‡ç¦»å¼€ç¯å¢ƒçš„æ—¶å€™ï¼ˆå‡½æ•°æ‰§è¡Œç»“æŸï¼‰å°†å…¶æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€ã€‚ åƒåœ¾å›æ”¶å™¨ä¼šåœ¨è¿è¡Œçš„æ—¶å€™ç»™å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡åŠ ä¸Šæ ‡è®°ï¼Œç„¶åå»æ‰ç¯å¢ƒä¸­çš„å˜é‡ä»¥åŠè¢«ç¯å¢ƒä¸­å˜é‡æ‰€å¼•ç”¨çš„å˜é‡ï¼ˆé—­åŒ…ï¼‰ï¼Œåœ¨è¿™äº›å®Œæˆä¹‹åä»å­˜åœ¨æ ‡è®°çš„å°±æ˜¯è¦åˆ é™¤çš„å˜é‡äº† å¼•ç”¨è®¡æ•°(reference counting) åœ¨ä½ç‰ˆæœ¬IEä¸­ç»å¸¸ä¼šå‡ºç°å†…å­˜æ³„éœ²ï¼Œå¾ˆå¤šæ—¶å€™å°±æ˜¯å› ä¸ºå…¶é‡‡ç”¨å¼•ç”¨è®¡æ•°æ–¹å¼è¿›è¡Œåƒåœ¾å›æ”¶ã€‚å¼•ç”¨è®¡æ•°çš„ç­–ç•¥æ˜¯è·Ÿè¸ªè®°å½•æ¯ä¸ªå€¼è¢«ä½¿ç”¨çš„æ¬¡æ•°ï¼Œå½“å£°æ˜äº†ä¸€ä¸ª å˜é‡å¹¶å°†ä¸€ä¸ªå¼•ç”¨ç±»å‹èµ‹å€¼ç»™è¯¥å˜é‡çš„æ—¶å€™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å°±åŠ 1ï¼Œå¦‚æœè¯¥å˜é‡çš„å€¼å˜æˆäº†å¦å¤–ä¸€ä¸ªï¼Œåˆ™è¿™ä¸ªå€¼å¾—å¼•ç”¨æ¬¡æ•°å‡1ï¼Œå½“è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å˜ä¸º0çš„æ—¶ å€™ï¼Œè¯´æ˜æ²¡æœ‰å˜é‡åœ¨ä½¿ç”¨ï¼Œè¿™ä¸ªå€¼æ²¡æ³•è¢«è®¿é—®äº†ï¼Œå› æ­¤å¯ä»¥å°†å…¶å ç”¨çš„ç©ºé—´å›æ”¶ï¼Œè¿™æ ·åƒåœ¾å›æ”¶å™¨ä¼šåœ¨è¿è¡Œçš„æ—¶å€™æ¸…ç†æ‰å¼•ç”¨æ¬¡æ•°ä¸º0çš„å€¼å ç”¨çš„ç©ºé—´ã€‚ åœ¨IEä¸­è™½ç„¶JavaScriptå¯¹è±¡é€šè¿‡æ ‡è®°æ¸…é™¤çš„æ–¹å¼è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä½†BOMä¸DOMå¯¹è±¡å´æ˜¯é€šè¿‡å¼•ç”¨è®¡æ•°å›æ”¶åƒåœ¾çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦æ¶‰åŠBOMåŠDOMå°±ä¼šå‡ºç°å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚ ä½ è§‰å¾—å‰ç«¯å·¥ç¨‹çš„ä»·å€¼ä½“ç°åœ¨å“ªä¸ºç®€åŒ–ç”¨æˆ·ä½¿ç”¨æä¾›æŠ€æœ¯æ”¯æŒï¼ˆäº¤äº’éƒ¨åˆ†ï¼‰ ä¸ºå¤šä¸ªæµè§ˆå™¨å…¼å®¹æ€§æä¾›æ”¯æŒ ä¸ºæé«˜ç”¨æˆ·æµè§ˆé€Ÿåº¦ï¼ˆæµè§ˆå™¨æ€§èƒ½ï¼‰æä¾›æ”¯æŒ ä¸ºè·¨å¹³å°æˆ–è€…å…¶ä»–åŸºäºwebkitæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“çš„åº”ç”¨æä¾›æ”¯æŒ ä¸ºå±•ç¤ºæ•°æ®æä¾›æ”¯æŒï¼ˆæ•°æ®æ¥å£ï¼‰ è°ˆè°ˆæ€§èƒ½ä¼˜åŒ–é—®é¢˜ä»£ç å±‚é¢ï¼šé¿å…ä½¿ç”¨cssè¡¨è¾¾å¼ï¼Œé¿å…ä½¿ç”¨é«˜çº§é€‰æ‹©å™¨ï¼Œé€šé…é€‰æ‹©å™¨ã€‚ ç¼“å­˜åˆ©ç”¨ï¼šç¼“å­˜Ajaxï¼Œä½¿ç”¨CDNï¼Œä½¿ç”¨å¤–éƒ¨jså’Œcssæ–‡ä»¶ä»¥ä¾¿ç¼“å­˜ï¼Œæ·»åŠ Expireså¤´ï¼ŒæœåŠ¡ç«¯é…ç½®Etagï¼Œå‡å°‘DNSæŸ¥æ‰¾ç­‰ è¯·æ±‚æ•°é‡ï¼šåˆå¹¶æ ·å¼å’Œè„šæœ¬ï¼Œä½¿ç”¨csså›¾ç‰‡ç²¾çµï¼Œåˆå§‹é¦–å±ä¹‹å¤–çš„å›¾ç‰‡èµ„æºæŒ‰éœ€åŠ è½½ï¼Œé™æ€èµ„æºå»¶è¿ŸåŠ è½½ã€‚ è¯·æ±‚å¸¦å®½ï¼šå‹ç¼©æ–‡ä»¶ï¼Œå¼€å¯GZIPï¼Œ ä»£ç å±‚é¢çš„ä¼˜åŒ– ç”¨hash-tableæ¥ä¼˜åŒ–æŸ¥æ‰¾ å°‘ç”¨å…¨å±€å˜é‡ ç”¨innerHTMLä»£æ›¿DOMæ“ä½œï¼Œå‡å°‘DOMæ“ä½œæ¬¡æ•°ï¼Œä¼˜åŒ–javascriptæ€§èƒ½ ç”¨setTimeoutæ¥é¿å…é¡µé¢å¤±å»å“åº” ç¼“å­˜DOMèŠ‚ç‚¹æŸ¥æ‰¾çš„ç»“æœ é¿å…ä½¿ç”¨CSS Expression é¿å…å…¨å±€æŸ¥è¯¢ é¿å…ä½¿ç”¨with(withä¼šåˆ›å»ºè‡ªå·±çš„ä½œç”¨åŸŸï¼Œä¼šå¢åŠ ä½œç”¨åŸŸé“¾é•¿åº¦) å¤šä¸ªå˜é‡å£°æ˜åˆå¹¶ é¿å…å›¾ç‰‡å’ŒiFrameç­‰çš„ç©ºSrcã€‚ç©ºSrcä¼šé‡æ–°åŠ è½½å½“å‰é¡µé¢ï¼Œå½±å“é€Ÿåº¦å’Œæ•ˆç‡ å°½é‡é¿å…å†™åœ¨HTMLæ ‡ç­¾ä¸­å†™Styleå±æ€§ ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ– å°½é‡ä½¿ç”¨css3åŠ¨ç”»ï¼Œå¼€å¯ç¡¬ä»¶åŠ é€Ÿã€‚ é€‚å½“ä½¿ç”¨touchäº‹ä»¶ä»£æ›¿clickäº‹ä»¶ã€‚ é¿å…ä½¿ç”¨css3æ¸å˜é˜´å½±æ•ˆæœã€‚ å¯ä»¥ç”¨transform: translateZ(0)æ¥å¼€å¯ç¡¬ä»¶åŠ é€Ÿã€‚ ä¸æ»¥ç”¨Floatã€‚Floatåœ¨æ¸²æŸ“æ—¶è®¡ç®—é‡æ¯”è¾ƒå¤§ï¼Œå°½é‡å‡å°‘ä½¿ç”¨ ä¸æ»¥ç”¨Webå­—ä½“ã€‚Webå­—ä½“éœ€è¦ä¸‹è½½ï¼Œè§£æï¼Œé‡ç»˜å½“å‰é¡µé¢ï¼Œå°½é‡å‡å°‘ä½¿ç”¨ã€‚ åˆç†ä½¿ç”¨requestAnimationFrameåŠ¨ç”»ä»£æ›¿setTimeout CSSä¸­çš„å±æ€§ï¼ˆCSS3 transitionsã€CSS3 3D transformsã€Opacityã€Canvasã€WebGLã€Videoï¼‰ä¼šè§¦å‘GPUæ¸²æŸ“ï¼Œè¯·åˆç†ä½¿ç”¨ã€‚è¿‡æ¸¡ä½¿ç”¨ä¼šå¼•å‘æ‰‹æœºè¿‡è€—ç”µå¢åŠ  PCç«¯çš„åœ¨ç§»åŠ¨ç«¯åŒæ ·é€‚ç”¨ ç›¸å…³é˜…è¯»ï¼šå¦‚ä½•åšåˆ°ä¸€ç§’æ¸²æŸ“ä¸€ä¸ªç§»åŠ¨é¡µé¢ ä»€ä¹ˆæ˜¯Etagå½“å‘é€ä¸€ä¸ªæœåŠ¡å™¨è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨é¦–å…ˆä¼šè¿›è¡Œç¼“å­˜è¿‡æœŸåˆ¤æ–­ã€‚æµè§ˆå™¨æ ¹æ®ç¼“å­˜è¿‡æœŸæ—¶é—´åˆ¤æ–­ç¼“å­˜æ–‡ä»¶æ˜¯å¦è¿‡æœŸã€‚ æƒ…æ™¯ä¸€ï¼šè‹¥æ²¡æœ‰è¿‡æœŸï¼Œåˆ™ä¸å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„ç»“æœï¼Œæ­¤æ—¶æˆ‘ä»¬åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­å¯ä»¥çœ‹åˆ° 200 OK(from cache) ï¼Œæ­¤æ—¶çš„æƒ…å†µå°±æ˜¯å®Œå…¨ä½¿ç”¨ç¼“å­˜ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨æ²¡æœ‰ä»»ä½•äº¤äº’çš„ã€‚ æƒ…æ™¯äºŒï¼šè‹¥å·²è¿‡æœŸï¼Œåˆ™å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œæ­¤æ—¶è¯·æ±‚ä¸­ä¼šå¸¦ä¸Šâ‘ ä¸­è®¾ç½®çš„æ–‡ä»¶ä¿®æ”¹æ—¶é—´ï¼Œå’ŒEtag ç„¶åï¼Œè¿›è¡Œèµ„æºæ›´æ–°åˆ¤æ–­ã€‚æœåŠ¡å™¨æ ¹æ®æµè§ˆå™¨ä¼ è¿‡æ¥çš„æ–‡ä»¶ä¿®æ”¹æ—¶é—´ï¼Œåˆ¤æ–­è‡ªæµè§ˆå™¨ä¸Šä¸€æ¬¡è¯·æ±‚ä¹‹åï¼Œæ–‡ä»¶æ˜¯ä¸æ˜¯æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼›æ ¹æ®Etagï¼Œåˆ¤æ–­æ–‡ä»¶å†…å®¹è‡ªä¸Šä¸€æ¬¡è¯·æ±‚ä¹‹åï¼Œæœ‰æ²¡æœ‰å‘ç”Ÿå˜åŒ– æƒ…å½¢ä¸€ï¼šè‹¥ä¸¤ç§åˆ¤æ–­çš„ç»“è®ºéƒ½æ˜¯æ–‡ä»¶æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œåˆ™æœåŠ¡å™¨å°±ä¸ç»™æµè§ˆå™¨å‘index.htmlçš„å†…å®¹äº†ï¼Œç›´æ¥å‘Šè¯‰å®ƒï¼Œæ–‡ä»¶æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œä½ ç”¨ä½ é‚£è¾¹çš„ç¼“å­˜å§â€”â€” 304 Not Modifiedï¼Œæ­¤æ—¶æµè§ˆå™¨å°±ä¼šä»æœ¬åœ°ç¼“å­˜ä¸­è·å–index.htmlçš„å†…å®¹ã€‚æ­¤æ—¶çš„æƒ…å†µå«åè®®ç¼“å­˜ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´æœ‰ä¸€æ¬¡è¯·æ±‚äº¤äº’ã€‚ æƒ…å½¢äºŒï¼šè‹¥ä¿®æ”¹æ—¶é—´å’Œæ–‡ä»¶å†…å®¹åˆ¤æ–­æœ‰ä»»æ„ä¸€ä¸ªæ²¡æœ‰é€šè¿‡ï¼Œåˆ™æœåŠ¡å™¨ä¼šå—ç†æ­¤æ¬¡è¯·æ±‚ï¼Œä¹‹åçš„æ“ä½œåŒâ‘  â‘  åªæœ‰getè¯·æ±‚ä¼šè¢«ç¼“å­˜ï¼Œpostè¯·æ±‚ä¸ä¼š Expireså’ŒCache-ControlExpiresè¦æ±‚å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ—¶é’Ÿä¸¥æ ¼åŒæ­¥ã€‚HTTP1.1å¼•å…¥Cache-Controlæ¥å…‹æœExpireså¤´çš„é™åˆ¶ã€‚å¦‚æœmax-ageå’ŒExpiresåŒæ—¶å‡ºç°ï¼Œåˆ™max-ageæœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ Cache-Control: no-cache, private, max-age=0 ETag: abcde Expires: Thu, 15 Apr 201420180515 20:00:00 GMT Pragma: private Last-Modified: $now // RFC1123 format ETagåº”ç”¨:Etagç”±æœåŠ¡å™¨ç«¯ç”Ÿæˆï¼Œå®¢æˆ·ç«¯é€šè¿‡If-Matchæˆ–è€…è¯´If-None-Matchè¿™ä¸ªæ¡ä»¶åˆ¤æ–­è¯·æ±‚æ¥éªŒè¯èµ„æºæ˜¯å¦ä¿®æ”¹ã€‚å¸¸è§çš„æ˜¯ä½¿ç”¨If-None-Matchã€‚è¯·æ±‚ä¸€ä¸ªæ–‡ä»¶çš„æµç¨‹å¯èƒ½å¦‚ä¸‹ï¼š ====ç¬¬ä¸€æ¬¡è¯·æ±‚=== 1.å®¢æˆ·ç«¯å‘èµ· HTTP GET è¯·æ±‚ä¸€ä¸ªæ–‡ä»¶ï¼› 2.æœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼Œè¿”å›æ–‡ä»¶å†…å®¹å’Œä¸€å †Headerï¼Œå½“ç„¶åŒ…æ‹¬Etag(ä¾‹å¦‚&quot;2e681a-6-5d044840&quot;)(å‡è®¾æœåŠ¡å™¨æ”¯æŒEtagç”Ÿæˆå’Œå·²ç»å¼€å¯äº†Etag).çŠ¶æ€ç 200 ====ç¬¬äºŒæ¬¡è¯·æ±‚=== å®¢æˆ·ç«¯å‘èµ· HTTP GET è¯·æ±‚ä¸€ä¸ªæ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯åŒæ—¶å‘é€ä¸€ä¸ªIf-None-Matchå¤´ï¼Œè¿™ä¸ªå¤´çš„å†…å®¹å°±æ˜¯ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶æœåŠ¡å™¨è¿”å›çš„Etagï¼š2e681a-6-5d0448402.æœåŠ¡å™¨åˆ¤æ–­å‘é€è¿‡æ¥çš„Etagå’Œè®¡ç®—å‡ºæ¥çš„EtagåŒ¹é…ï¼Œå› æ­¤If-None-Matchä¸ºFalseï¼Œä¸è¿”å›200ï¼Œè¿”å›304ï¼Œå®¢æˆ·ç«¯ç»§ç»­ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼›æµç¨‹å¾ˆç®€å•ï¼Œé—®é¢˜æ˜¯ï¼Œå¦‚æœæœåŠ¡å™¨åˆè®¾ç½®äº†Cache-Control:max-ageå’ŒExpireså‘¢ï¼Œæ€ä¹ˆåŠ ç­”æ¡ˆæ˜¯åŒæ—¶ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å®Œå…¨åŒ¹é…If-Modified-Sinceå’ŒIf-None-Matchå³æ£€æŸ¥å®Œä¿®æ”¹æ—¶é—´å’ŒEtagä¹‹åï¼Œ æœåŠ¡å™¨æ‰èƒ½è¿”å›304.(ä¸è¦é™·å…¥åˆ°åº•ä½¿ç”¨è°çš„é—®é¢˜æ€ªåœˆ) ä¸ºä»€ä¹ˆä½¿ç”¨Etagè¯·æ±‚å¤´? Etag ä¸»è¦ä¸ºäº†è§£å†³ Last-Modified æ— æ³•è§£å†³çš„ä¸€äº›é—®é¢˜ã€‚ æ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ«æ ˆçš„æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½æ˜¯åœ¨ä¸€ç«¯è¿›è¡Œçš„ï¼Œè€Œé˜Ÿåˆ—çš„æ“ä½œå´æ˜¯åœ¨ä¸¤ç«¯è¿›è¡Œçš„ã€‚ é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºï¼Œæ ˆå…ˆè¿›åå‡ºã€‚ æ ˆåªå…è®¸åœ¨è¡¨å°¾ä¸€ç«¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤ï¼Œè€Œé˜Ÿåˆ—åªå…è®¸åœ¨è¡¨å°¾ä¸€ç«¯è¿›è¡Œæ’å…¥ï¼Œåœ¨è¡¨å¤´ä¸€ç«¯è¿›è¡Œåˆ é™¤ æ ˆå’Œå †çš„åŒºåˆ«æ ˆåŒºï¼ˆstackï¼‰â€” ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾ ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚ å †åŒºï¼ˆheapï¼‰ â€” ä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œ è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶ã€‚ å †ï¼ˆæ•°æ®ç»“æ„ï¼‰ï¼šå †å¯ä»¥è¢«çœ‹æˆæ˜¯ä¸€æ£µæ ‘ï¼Œå¦‚ï¼šå †æ’åºï¼› æ ˆï¼ˆæ•°æ®ç»“æ„ï¼‰ï¼šä¸€ç§å…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„ã€‚ å¿«é€Ÿ æ’åºçš„æ€æƒ³å¹¶å®ç°ä¸€ä¸ªå¿«æ’â€œå¿«é€Ÿæ’åºâ€çš„æ€æƒ³å¾ˆç®€å•ï¼Œæ•´ä¸ªæ’åºè¿‡ç¨‹åªéœ€è¦ä¸‰æ­¥ï¼š ï¼ˆ1ï¼‰åœ¨æ•°æ®é›†ä¹‹ä¸­ï¼Œæ‰¾ä¸€ä¸ªåŸºå‡†ç‚¹ ï¼ˆ2ï¼‰å»ºç«‹ä¸¤ä¸ªæ•°ç»„ï¼Œåˆ†åˆ«å­˜å‚¨å·¦è¾¹å’Œå³è¾¹çš„æ•°ç»„ ï¼ˆ3ï¼‰åˆ©ç”¨é€’å½’è¿›è¡Œä¸‹æ¬¡æ¯”è¾ƒ &lt;script type=&quot;text/javascript&quot;&gt; function quickSort(arr){ if(arr.length&lt;=1){ return arr;//å¦‚æœæ•°ç»„åªæœ‰ä¸€ä¸ªæ•°ï¼Œå°±ç›´æ¥è¿”å›ï¼› } var num = Math.floor(arr.length/2);//æ‰¾åˆ°ä¸­é—´æ•°çš„ç´¢å¼•å€¼ï¼Œå¦‚æœæ˜¯æµ®ç‚¹æ•°ï¼Œåˆ™å‘ä¸‹å–æ•´ var numValue = arr.splice(num,1);//æ‰¾åˆ°ä¸­é—´æ•°çš„å€¼ var left = []; var right = []; for(var i=0;i&lt;arr.length;i++){ if(arr[i]&lt;numValue){ left.push(arr[i]);//åŸºå‡†ç‚¹çš„å·¦è¾¹çš„æ•°ä¼ åˆ°å·¦è¾¹æ•°ç»„ } else{ right.push(arr[i]);//åŸºå‡†ç‚¹çš„å³è¾¹çš„æ•°ä¼ åˆ°å³è¾¹æ•°ç»„ } } return quickSort(left).concat([numValue],quickSort(right));//é€’å½’ä¸æ–­é‡å¤æ¯”è¾ƒ } alert(quickSort([32,45,37,16,2,87]));//å¼¹å‡ºâ€œ2,16,32,37,45,87â€ &lt;/script&gt; ä½ è§‰å¾—jQueryæˆ–zeptoæºç æœ‰å“ªäº›å†™çš„å¥½çš„åœ°æ–¹(ç­”æ¡ˆä»…ä¾›å‚è€ƒ) jqueryæºç å°è£…åœ¨ä¸€ä¸ªåŒ¿åå‡½æ•°çš„è‡ªæ‰§è¡Œç¯å¢ƒä¸­ï¼Œæœ‰åŠ©äºé˜²æ­¢å˜é‡çš„å…¨å±€æ±¡æŸ“ï¼Œç„¶åé€šè¿‡ä¼ å…¥windowå¯¹è±¡å‚æ•°ï¼Œå¯ä»¥ä½¿windowå¯¹è±¡ä½œä¸ºå±€éƒ¨å˜é‡ä½¿ç”¨ï¼Œå¥½å¤„æ˜¯å½“jqueryä¸­è®¿é—®windowå¯¹è±¡çš„æ—¶å€™ï¼Œå°±ä¸ç”¨å°†ä½œç”¨åŸŸé“¾é€€å›åˆ°é¡¶å±‚ä½œç”¨åŸŸäº†ï¼Œä»è€Œå¯ä»¥æ›´å¿«çš„è®¿é—®windowå¯¹è±¡ã€‚åŒæ ·ï¼Œä¼ å…¥undefinedå‚æ•°ï¼Œå¯ä»¥ç¼©çŸ­æŸ¥æ‰¾undefinedæ—¶çš„ä½œç”¨åŸŸé“¾ã€‚ (function( window, undefined ) { //ç”¨ä¸€ä¸ªå‡½æ•°åŸŸåŒ…èµ·æ¥ï¼Œå°±æ˜¯æ‰€è°“çš„æ²™ç®± //åœ¨è¿™é‡Œè¾¹varå®šä¹‰çš„å˜é‡ï¼Œå±äºè¿™ä¸ªå‡½æ•°åŸŸå†…çš„å±€éƒ¨å˜é‡ï¼Œé¿å…æ±¡æŸ“å…¨å±€ //æŠŠå½“å‰æ²™ç®±éœ€è¦çš„å¤–éƒ¨å˜é‡é€šè¿‡å‡½æ•°å‚æ•°å¼•å…¥è¿›æ¥ //åªè¦ä¿è¯å‚æ•°å¯¹å†…æä¾›çš„æ¥å£çš„ä¸€è‡´æ€§ï¼Œä½ è¿˜å¯ä»¥éšæ„æ›¿æ¢ä¼ è¿›æ¥çš„è¿™ä¸ªå‚æ•° window.jQuery = window.$ = jQuery; })( window ); jqueryå°†ä¸€äº›åŸå‹å±æ€§å’Œæ–¹æ³•å°è£…åœ¨äº†jquery.prototypeä¸­ï¼Œä¸ºäº†ç¼©çŸ­åç§°ï¼Œåˆèµ‹å€¼ç»™äº†jquery.fnï¼Œè¿™æ˜¯å¾ˆå½¢è±¡çš„å†™æ³•ã€‚ æœ‰ä¸€äº›æ•°ç»„æˆ–å¯¹è±¡çš„æ–¹æ³•ç»å¸¸èƒ½ä½¿ç”¨åˆ°ï¼ŒjQueryå°†å…¶ä¿å­˜ä¸ºå±€éƒ¨å˜é‡ä»¥æé«˜è®¿é—®é€Ÿåº¦ã€‚ jqueryå®ç°çš„é“¾å¼è°ƒç”¨å¯ä»¥èŠ‚çº¦ä»£ç ï¼Œæ‰€è¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥æé«˜ä»£ç æ•ˆç‡ã€‚ ES6çš„äº†è§£æ–°å¢æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆä¸ºJavaScriptæä¾›äº†ç®€å•çš„å­—ç¬¦ä¸²æ’å€¼åŠŸèƒ½ï¼‰ã€ç®­å¤´å‡½æ•°ï¼ˆæ“ä½œç¬¦å·¦è¾¹ä¸ºè¾“å…¥çš„å‚æ•°ï¼Œè€Œå³è¾¹åˆ™æ˜¯è¿›è¡Œçš„æ“ä½œä»¥åŠè¿”å›çš„å€¼Inputs=&gt;outputsã€‚ï¼‰ã€for-ofï¼ˆç”¨æ¥éå†æ•°æ®â€”ä¾‹å¦‚æ•°ç»„ä¸­çš„å€¼ã€‚ï¼‰argumentså¯¹è±¡å¯è¢«ä¸å®šå‚æ•°å’Œé»˜è®¤å‚æ•°å®Œç¾ä»£æ›¿ã€‚ES6å°†promiseå¯¹è±¡çº³å…¥è§„èŒƒï¼Œæä¾›äº†åŸç”Ÿçš„Promiseå¯¹è±¡ã€‚å¢åŠ äº†letå’Œconstå‘½ä»¤ï¼Œç”¨æ¥å£°æ˜å˜é‡ã€‚å¢åŠ äº†å—çº§ä½œç”¨åŸŸã€‚letå‘½ä»¤å®é™…ä¸Šå°±å¢åŠ äº†å—çº§ä½œç”¨åŸŸã€‚ES6è§„å®šï¼Œvarå‘½ä»¤å’Œfunctionå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œå±äºå…¨å±€å¯¹è±¡çš„å±æ€§ï¼›letå‘½ä»¤ã€constå‘½ä»¤ã€classå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºå…¨å±€å¯¹è±¡çš„å±æ€§ã€‚ã€‚è¿˜æœ‰å°±æ˜¯å¼•å…¥moduleæ¨¡å—çš„æ¦‚å¿µ jsç»§æ‰¿æ–¹å¼åŠå…¶ä¼˜ç¼ºç‚¹ åŸå‹é“¾ç»§æ‰¿çš„ç¼ºç‚¹ ä¸€æ˜¯å­—é¢é‡é‡å†™åŸå‹ä¼šä¸­æ–­å…³ç³»ï¼Œä½¿ç”¨å¼•ç”¨ç±»å‹çš„åŸå‹ï¼Œå¹¶ä¸”å­ç±»å‹è¿˜æ— æ³•ç»™è¶…ç±»å‹ä¼ é€’å‚æ•°ã€‚ å€Ÿç”¨æ„é€ å‡½æ•°ï¼ˆç±»å¼ç»§æ‰¿ï¼‰ å€Ÿç”¨æ„é€ å‡½æ•°è™½ç„¶è§£å†³äº†åˆšæ‰ä¸¤ç§é—®é¢˜ï¼Œä½†æ²¡æœ‰åŸå‹ï¼Œåˆ™å¤ç”¨æ— ä»è°ˆèµ·ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åŸå‹é“¾+å€Ÿç”¨æ„é€ å‡½æ•°çš„æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ç§°ä¸ºç»„åˆç»§æ‰¿ ç»„åˆå¼ç»§æ‰¿ ç»„åˆå¼ç»§æ‰¿æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§ç»§æ‰¿æ–¹æ³•ï¼Œå…¶èƒŒåçš„æ€è·¯æ˜¯ ä½¿ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œè€Œé€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿ã€‚è¿™æ ·ï¼Œæ—¢é€šè¿‡åœ¨åŸå‹ä¸Šå®šä¹‰æ–¹æ³•å®ç°äº†å‡½æ•°å¤ç”¨ï¼Œåˆä¿è¯æ¯ä¸ªå®ä¾‹éƒ½æœ‰å®ƒè‡ªå·±çš„å±æ€§ã€‚ å…·ä½“è¯·çœ‹ï¼šJavaScriptç»§æ‰¿æ–¹å¼è¯¦è§£ å…³äºHttp 2.0 ä½ çŸ¥é“å¤šå°‘HTTP/2å¼•å…¥äº†â€œæœåŠ¡ç«¯æ¨ï¼ˆserver pushï¼‰â€çš„æ¦‚å¿µï¼Œå®ƒå…è®¸æœåŠ¡ç«¯åœ¨å®¢æˆ·ç«¯éœ€è¦æ•°æ®ä¹‹å‰å°±ä¸»åŠ¨åœ°å°†æ•°æ®å‘é€åˆ°å®¢æˆ·ç«¯ç¼“å­˜ä¸­ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ HTTP/2æä¾›æ›´å¤šçš„åŠ å¯†æ”¯æŒ HTTP/2ä½¿ç”¨å¤šè·¯æŠ€æœ¯ï¼Œå…è®¸å¤šä¸ªæ¶ˆæ¯åœ¨ä¸€ä¸ªè¿æ¥ä¸ŠåŒæ—¶äº¤å·®ã€‚ å®ƒå¢åŠ äº†å¤´å‹ç¼©ï¼ˆheader compressionï¼‰ï¼Œå› æ­¤å³ä½¿éå¸¸å°çš„è¯·æ±‚ï¼Œå…¶è¯·æ±‚å’Œå“åº”çš„headeréƒ½åªä¼šå ç”¨å¾ˆå°æ¯”ä¾‹çš„å¸¦å®½ã€‚ deferå’Œasync deferå¹¶è¡ŒåŠ è½½jsæ–‡ä»¶ï¼Œä¼šæŒ‰ç…§é¡µé¢ä¸Šscriptæ ‡ç­¾çš„é¡ºåºæ‰§è¡Œasyncå¹¶è¡ŒåŠ è½½jsæ–‡ä»¶ï¼Œä¸‹è½½å®Œæˆç«‹å³æ‰§è¡Œï¼Œä¸ä¼šæŒ‰ç…§é¡µé¢ä¸Šscriptæ ‡ç­¾çš„é¡ºåºæ‰§è¡Œ è°ˆè°ˆæµ®åŠ¨å’Œæ¸…é™¤æµ®åŠ¨æµ®åŠ¨çš„æ¡†å¯ä»¥å‘å·¦æˆ–å‘å³ç§»åŠ¨ï¼Œç›´åˆ°ä»–çš„å¤–è¾¹ç¼˜ç¢°åˆ°åŒ…å«æ¡†æˆ–å¦ä¸€ä¸ªæµ®åŠ¨æ¡†çš„è¾¹æ¡†ä¸ºæ­¢ã€‚ç”±äºæµ®åŠ¨æ¡†ä¸åœ¨æ–‡æ¡£çš„æ™®é€šæµä¸­ï¼Œæ‰€ä»¥æ–‡æ¡£çš„æ™®é€šæµçš„å—æ¡†è¡¨ç°å¾—å°±åƒæµ®åŠ¨æ¡†ä¸å­˜åœ¨ä¸€æ ·ã€‚æµ®åŠ¨çš„å—æ¡†ä¼šæ¼‚æµ®åœ¨æ–‡æ¡£æ™®é€šæµçš„å—æ¡†ä¸Šã€‚ å¦‚ä½•è¯„ä»·AngularJSå’ŒBackboneJSbackboneå…·æœ‰ä¾èµ–æ€§ï¼Œä¾èµ–underscore.jsã€‚Backbone + Underscore + jQuery(or Zepto) å°±æ¯”ä¸€ä¸ªAngularJS å¤šå‡ºäº†2 æ¬¡HTTPè¯·æ±‚. Backboneçš„Modelæ²¡æœ‰ä¸UIè§†å›¾æ•°æ®ç»‘å®šï¼Œè€Œæ˜¯éœ€è¦åœ¨Viewä¸­è‡ªè¡Œæ“ä½œDOMæ¥æ›´æ–°æˆ–è¯»å–UIæ•°æ®ã€‚AngularJSä¸æ­¤ç›¸åï¼ŒModelç›´æ¥ä¸UIè§†å›¾ç»‘å®šï¼ŒModelä¸UIè§†å›¾çš„å…³ç³»ï¼Œé€šè¿‡directiveå°è£…ï¼ŒAngularJSå†…ç½®çš„é€šç”¨directiveï¼Œå°±èƒ½å®ç°å¤§éƒ¨åˆ†æ“ä½œäº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸºæœ¬ä¸å¿…å…³å¿ƒModelä¸UIè§†å›¾çš„å…³ç³»ï¼Œç›´æ¥æ“ä½œModelå°±è¡Œäº†ï¼ŒUIè§†å›¾è‡ªåŠ¨æ›´æ–°ã€‚ AngularJSçš„directiveï¼Œä½ è¾“å…¥ç‰¹å®šæ•°æ®ï¼Œä»–å°±èƒ½è¾“å‡ºç›¸åº”UIè§†å›¾ã€‚æ˜¯ä¸€ä¸ªæ¯”è¾ƒå®Œå–„çš„å‰ç«¯MVWæ¡†æ¶ï¼ŒåŒ…å«æ¨¡æ¿ï¼Œæ•°æ®åŒå‘ç»‘å®šï¼Œè·¯ç”±ï¼Œæ¨¡å—åŒ–ï¼ŒæœåŠ¡ï¼Œä¾èµ–æ³¨å…¥ç­‰æ‰€æœ‰åŠŸèƒ½ï¼Œæ¨¡æ¿åŠŸèƒ½å¼ºå¤§ä¸°å¯Œï¼Œå¹¶ä¸”æ˜¯å£°æ˜å¼çš„ï¼Œè‡ªå¸¦äº†ä¸°å¯Œçš„ Angular æŒ‡ä»¤ã€‚ ç”¨è¿‡å“ªäº›è®¾è®¡æ¨¡å¼ å·¥å‚æ¨¡å¼ï¼š ä¸»è¦å¥½å¤„å°±æ˜¯å¯ä»¥æ¶ˆé™¤å¯¹è±¡é—´çš„è€¦åˆï¼Œé€šè¿‡ä½¿ç”¨å·¥ç¨‹æ–¹æ³•è€Œä¸æ˜¯newå…³é”®å­—ã€‚å°†æ‰€æœ‰å®ä¾‹åŒ–çš„ä»£ç é›†ä¸­åœ¨ä¸€ä¸ªä½ç½®é˜²æ­¢ä»£ç é‡å¤ã€‚ å·¥å‚æ¨¡å¼è§£å†³äº†é‡å¤å®ä¾‹åŒ–çš„é—®é¢˜ ï¼Œä½†è¿˜æœ‰ä¸€ä¸ªé—®é¢˜,é‚£å°±æ˜¯è¯†åˆ«é—®é¢˜ï¼Œå› ä¸ºæ ¹æœ¬æ— æ³• ææ¸…æ¥šä»–ä»¬åˆ°åº•æ˜¯å“ªä¸ªå¯¹è±¡çš„å®ä¾‹ã€‚ function createObject(name,age,profession){//é›†ä¸­å®ä¾‹åŒ–çš„å‡½æ•°var obj = new Object(); obj.name = name; obj.age = age; obj.profession = profession; obj.move = function () { return this.name + &#39; at &#39; + this.age + &#39; engaged in &#39; + this.profession; }; return obj; } var test1 = createObject(&#39;trigkit4&#39;,22,&#39;programmer&#39;);//ç¬¬ä¸€ä¸ªå®ä¾‹var test2 = createObject(&#39;mike&#39;,25,&#39;engineer&#39;);//ç¬¬äºŒä¸ªå®ä¾‹ æ„é€ å‡½æ•°æ¨¡å¼ ä½¿ç”¨æ„é€ å‡½æ•°çš„æ–¹æ³• ï¼Œå³è§£å†³äº†é‡å¤å®ä¾‹åŒ–çš„é—®é¢˜ ï¼Œåˆè§£å†³äº†å¯¹è±¡è¯†åˆ«çš„é—®é¢˜ï¼Œè¯¥æ¨¡å¼ä¸å·¥å‚æ¨¡å¼çš„ä¸åŒä¹‹å¤„åœ¨äºï¼š 1.æ„é€ å‡½æ•°æ–¹æ³•æ²¡æœ‰æ˜¾ç¤ºçš„åˆ›å»ºå¯¹è±¡ (new Object()); 2.ç›´æ¥å°†å±æ€§å’Œæ–¹æ³•èµ‹å€¼ç»™ this å¯¹è±¡; 3.æ²¡æœ‰ renturn è¯­å¥ã€‚ è¯´è¯´ä½ å¯¹é—­åŒ…çš„ç†è§£ä½¿ç”¨é—­åŒ…ä¸»è¦æ˜¯ä¸ºäº†è®¾è®¡ç§æœ‰çš„æ–¹æ³•å’Œå˜é‡ã€‚é—­åŒ…çš„ä¼˜ç‚¹æ˜¯å¯ä»¥é¿å…å…¨å±€å˜é‡çš„æ±¡æŸ“ï¼Œç¼ºç‚¹æ˜¯é—­åŒ…ä¼šå¸¸é©»å†…å­˜ï¼Œä¼šå¢å¤§å†…å­˜ä½¿ç”¨é‡ï¼Œä½¿ç”¨ä¸å½“å¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„éœ²ã€‚åœ¨jsä¸­ï¼Œå‡½æ•°å³é—­åŒ…ï¼Œåªæœ‰å‡½æ•°æ‰ä¼šäº§ç”Ÿä½œç”¨åŸŸçš„æ¦‚å¿µ é—­åŒ…æœ‰ä¸‰ä¸ªç‰¹æ€§ï¼š 1.å‡½æ•°åµŒå¥—å‡½æ•° 2.å‡½æ•°å†…éƒ¨å¯ä»¥å¼•ç”¨å¤–éƒ¨çš„å‚æ•°å’Œå˜é‡ 3.å‚æ•°å’Œå˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ å…·ä½“è¯·çœ‹ï¼šè¯¦è§£jsé—­åŒ… è¯·ä½ è°ˆè°ˆCookieçš„å¼Šç«¯cookieè™½ç„¶åœ¨æŒä¹…ä¿å­˜å®¢æˆ·ç«¯æ•°æ®æä¾›äº†æ–¹ä¾¿ï¼Œåˆ†æ‹…äº†æœåŠ¡å™¨å­˜å‚¨çš„è´Ÿæ‹…ï¼Œä½†è¿˜æ˜¯æœ‰å¾ˆå¤šå±€é™æ€§çš„ã€‚ ç¬¬ä¸€ï¼šæ¯ä¸ªç‰¹å®šçš„åŸŸåä¸‹æœ€å¤šç”Ÿæˆ20ä¸ªcookie 1.IE6æˆ–æ›´ä½ç‰ˆæœ¬æœ€å¤š20ä¸ªcookie 2.IE7å’Œä¹‹åçš„ç‰ˆæœ¬æœ€åå¯ä»¥æœ‰50ä¸ªcookieã€‚ 3.Firefoxæœ€å¤š50ä¸ªcookie 4.chromeå’ŒSafariæ²¡æœ‰åšç¡¬æ€§é™åˆ¶ IEå’ŒOpera ä¼šæ¸…ç†è¿‘æœŸæœ€å°‘ä½¿ç”¨çš„cookieï¼ŒFirefoxä¼šéšæœºæ¸…ç†cookieã€‚ cookieçš„æœ€å¤§å¤§çº¦ä¸º4096å­—èŠ‚ï¼Œä¸ºäº†å…¼å®¹æ€§ï¼Œä¸€èˆ¬ä¸èƒ½è¶…è¿‡4095å­—èŠ‚ã€‚ IE æä¾›äº†ä¸€ç§å­˜å‚¨å¯ä»¥æŒä¹…åŒ–ç”¨æˆ·æ•°æ®ï¼Œå«åšuserdataï¼Œä»IE5.0å°±å¼€å§‹æ”¯æŒã€‚æ¯ä¸ªæ•°æ®æœ€å¤š128Kï¼Œæ¯ä¸ªåŸŸåä¸‹æœ€å¤š1Mã€‚è¿™ä¸ªæŒä¹…åŒ–æ•°æ®æ”¾åœ¨ç¼“å­˜ä¸­ï¼Œå¦‚æœç¼“å­˜æ²¡æœ‰æ¸…ç†ï¼Œé‚£ä¹ˆä¼šä¸€ç›´å­˜åœ¨ã€‚ ä¼˜ç‚¹ï¼šæé«˜çš„æ‰©å±•æ€§å’Œå¯ç”¨æ€§ 1.é€šè¿‡è‰¯å¥½çš„ç¼–ç¨‹ï¼Œæ§åˆ¶ä¿å­˜åœ¨cookieä¸­çš„sessionå¯¹è±¡çš„å¤§å°ã€‚ 2.é€šè¿‡åŠ å¯†å’Œå®‰å…¨ä¼ è¾“æŠ€æœ¯ï¼ˆSSLï¼‰ï¼Œå‡å°‘cookieè¢«ç ´è§£çš„å¯èƒ½æ€§ã€‚ 3.åªåœ¨cookieä¸­å­˜æ”¾ä¸æ•æ„Ÿæ•°æ®ï¼Œå³ä½¿è¢«ç›—ä¹Ÿä¸ä¼šæœ‰é‡å¤§æŸå¤±ã€‚ 4.æ§åˆ¶cookieçš„ç”Ÿå‘½æœŸï¼Œä½¿ä¹‹ä¸ä¼šæ°¸è¿œæœ‰æ•ˆã€‚å·ç›—è€…å¾ˆå¯èƒ½æ‹¿åˆ°ä¸€ä¸ªè¿‡æœŸçš„cookieã€‚ ç¼ºç‚¹ï¼š 1.`Cookie`æ•°é‡å’Œé•¿åº¦çš„é™åˆ¶ã€‚æ¯ä¸ªdomainæœ€å¤šåªèƒ½æœ‰20æ¡cookieï¼Œæ¯ä¸ªcookieé•¿åº¦ä¸èƒ½è¶…è¿‡4KBï¼Œå¦åˆ™ä¼šè¢«æˆªæ‰. 2.å®‰å…¨æ€§é—®é¢˜ã€‚å¦‚æœcookieè¢«äººæ‹¦æˆªäº†ï¼Œé‚£äººå°±å¯ä»¥å–å¾—æ‰€æœ‰çš„sessionä¿¡æ¯ã€‚å³ä½¿åŠ å¯†ä¹Ÿä¸äº‹æ— è¡¥ï¼Œå› ä¸ºæ‹¦æˆªè€…å¹¶ä¸éœ€è¦çŸ¥é“cookieçš„æ„ä¹‰ï¼Œä»–åªè¦åŸæ ·è½¬å‘cookieå°±å¯ä»¥è¾¾åˆ°ç›®çš„äº†ã€‚ 3.æœ‰äº›çŠ¶æ€ä¸å¯èƒ½ä¿å­˜åœ¨å®¢æˆ·ç«¯ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†é˜²æ­¢é‡å¤æäº¤è¡¨å•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜ä¸€ä¸ªè®¡æ•°å™¨ã€‚å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªè®¡æ•°å™¨ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆå®ƒèµ·ä¸åˆ°ä»»ä½•ä½œç”¨ã€‚ æµè§ˆå™¨æœ¬åœ°å­˜å‚¨åœ¨è¾ƒé«˜ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­ï¼Œjsæä¾›äº†sessionStorageå’ŒglobalStorageã€‚åœ¨HTML5ä¸­æä¾›äº†localStorageæ¥å–ä»£globalStorageã€‚ html5ä¸­çš„Web StorageåŒ…æ‹¬äº†ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼šsessionStorageå’ŒlocalStorageã€‚ sessionStorageç”¨äºæœ¬åœ°å­˜å‚¨ä¸€ä¸ªä¼šè¯ï¼ˆsessionï¼‰ä¸­çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®åªæœ‰åœ¨åŒä¸€ä¸ªä¼šè¯ä¸­çš„é¡µé¢æ‰èƒ½è®¿é—®å¹¶ä¸”å½“ä¼šè¯ç»“æŸåæ•°æ®ä¹Ÿéšä¹‹é”€æ¯ã€‚å› æ­¤sessionStorageä¸æ˜¯ä¸€ç§æŒä¹…åŒ–çš„æœ¬åœ°å­˜å‚¨ï¼Œä»…ä»…æ˜¯ä¼šè¯çº§åˆ«çš„å­˜å‚¨ã€‚ è€ŒlocalStorageç”¨äºæŒä¹…åŒ–çš„æœ¬åœ°å­˜å‚¨ï¼Œé™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼Œå¦åˆ™æ•°æ®æ˜¯æ°¸è¿œä¸ä¼šè¿‡æœŸçš„ã€‚ web storageå’Œcookieçš„åŒºåˆ«Web Storageçš„æ¦‚å¿µå’Œcookieç›¸ä¼¼ï¼ŒåŒºåˆ«æ˜¯å®ƒæ˜¯ä¸ºäº†æ›´å¤§å®¹é‡å­˜å‚¨è®¾è®¡çš„ã€‚Cookieçš„å¤§å°æ˜¯å—é™çš„ï¼Œå¹¶ä¸”æ¯æ¬¡ä½ è¯·æ±‚ä¸€ä¸ªæ–°çš„é¡µé¢çš„æ—¶å€™Cookieéƒ½ä¼šè¢«å‘é€è¿‡å»ï¼Œè¿™æ ·æ— å½¢ä¸­æµªè´¹äº†å¸¦å®½ï¼Œå¦å¤–cookieè¿˜éœ€è¦æŒ‡å®šä½œç”¨åŸŸï¼Œä¸å¯ä»¥è·¨åŸŸè°ƒç”¨ã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒWeb Storageæ‹¥æœ‰setItem,getItem,removeItem,clearç­‰æ–¹æ³•ï¼Œä¸åƒcookieéœ€è¦å‰ç«¯å¼€å‘è€…è‡ªå·±å°è£…setCookieï¼ŒgetCookieã€‚ ä½†æ˜¯cookieä¹Ÿæ˜¯ä¸å¯ä»¥æˆ–ç¼ºçš„ï¼šcookieçš„ä½œç”¨æ˜¯ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’ï¼Œä½œä¸ºHTTPè§„èŒƒçš„ä¸€éƒ¨åˆ†è€Œå­˜åœ¨ ï¼Œè€ŒWeb Storageä»…ä»…æ˜¯ä¸ºäº†åœ¨æœ¬åœ°â€œå­˜å‚¨â€æ•°æ®è€Œç”Ÿ æµè§ˆå™¨çš„æ”¯æŒé™¤äº†IEï¼—åŠä»¥ä¸‹ä¸æ”¯æŒå¤–ï¼Œå…¶ä»–æ ‡å‡†æµè§ˆå™¨éƒ½å®Œå…¨æ”¯æŒ(ieåŠFFéœ€åœ¨webæœåŠ¡å™¨é‡Œè¿è¡Œ)ï¼Œå€¼å¾—ä¸€æçš„æ˜¯IEæ€»æ˜¯åŠå¥½äº‹ï¼Œä¾‹å¦‚IE7ã€IE6ä¸­çš„userDataå…¶å®å°±æ˜¯javascriptæœ¬åœ°å­˜å‚¨çš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡ç®€å•çš„ä»£ç å°è£…å¯ä»¥ç»Ÿä¸€åˆ°æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒweb storageã€‚ localStorageå’ŒsessionStorageéƒ½å…·æœ‰ç›¸åŒçš„æ“ä½œæ–¹æ³•ï¼Œä¾‹å¦‚setItemã€getItemå’ŒremoveItemç­‰ cookie å’Œsession çš„åŒºåˆ«ï¼š 1ã€cookieæ•°æ®å­˜æ”¾åœ¨å®¢æˆ·çš„æµè§ˆå™¨ä¸Šï¼Œsessionæ•°æ®æ”¾åœ¨æœåŠ¡å™¨ä¸Šã€‚ 2ã€cookieä¸æ˜¯å¾ˆå®‰å…¨ï¼Œåˆ«äººå¯ä»¥åˆ†æå­˜æ”¾åœ¨æœ¬åœ°çš„COOKIEå¹¶è¿›è¡ŒCOOKIEæ¬ºéª— è€ƒè™‘åˆ°å®‰å…¨åº”å½“ä½¿ç”¨sessionã€‚ 3ã€sessionä¼šåœ¨ä¸€å®šæ—¶é—´å†…ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚å½“è®¿é—®å¢å¤šï¼Œä¼šæ¯”è¾ƒå ç”¨ä½ æœåŠ¡å™¨çš„æ€§èƒ½ è€ƒè™‘åˆ°å‡è½»æœåŠ¡å™¨æ€§èƒ½æ–¹é¢ï¼Œåº”å½“ä½¿ç”¨COOKIEã€‚ 4ã€å•ä¸ªcookieä¿å­˜çš„æ•°æ®ä¸èƒ½è¶…è¿‡4Kï¼Œå¾ˆå¤šæµè§ˆå™¨éƒ½é™åˆ¶ä¸€ä¸ªç«™ç‚¹æœ€å¤šä¿å­˜20ä¸ªcookieã€‚ 5ã€æ‰€ä»¥ä¸ªäººå»ºè®®ï¼š å°†ç™»é™†ä¿¡æ¯ç­‰é‡è¦ä¿¡æ¯å­˜æ”¾ä¸ºSESSION å…¶ä»–ä¿¡æ¯å¦‚æœéœ€è¦ä¿ç•™ï¼Œå¯ä»¥æ”¾åœ¨COOKIEä¸­ display:noneå’Œvisibility:hiddençš„åŒºåˆ«ï¼Ÿ display:none éšè—å¯¹åº”çš„å…ƒç´ ï¼Œåœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä¸å†ç»™å®ƒåˆ†é…ç©ºé—´ï¼Œå®ƒå„è¾¹çš„å…ƒç´ ä¼šåˆæ‹¢ï¼Œå°±å½“ä»–ä»æ¥ä¸å­˜åœ¨ã€‚ visibility:hidden éšè—å¯¹åº”çš„å…ƒç´ ï¼Œä½†æ˜¯åœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä»ä¿ç•™åŸæ¥çš„ç©ºé—´ã€‚ CSSä¸­link å’Œ@importçš„åŒºåˆ«æ˜¯ï¼Ÿ (1) linkå±äºHTMLæ ‡ç­¾ï¼Œè€Œ@importæ˜¯CSSæä¾›çš„; (2) é¡µé¢è¢«åŠ è½½çš„æ—¶ï¼Œlinkä¼šåŒæ—¶è¢«åŠ è½½ï¼Œè€Œ@importè¢«å¼•ç”¨çš„CSSä¼šç­‰åˆ°å¼•ç”¨å®ƒçš„CSSæ–‡ä»¶è¢«åŠ è½½å®Œå†åŠ è½½; (3) importåªåœ¨IE5ä»¥ä¸Šæ‰èƒ½è¯†åˆ«ï¼Œè€Œlinkæ˜¯HTMLæ ‡ç­¾ï¼Œæ— å…¼å®¹é—®é¢˜; (4) linkæ–¹å¼çš„æ ·å¼çš„æƒé‡ é«˜äº@importçš„æƒé‡. position:absoluteå’Œfloatå±æ€§çš„å¼‚åŒ å…±åŒç‚¹ï¼šå¯¹å†…è”å…ƒç´ è®¾ç½®floatå’Œabsoluteå±æ€§ï¼Œå¯ä»¥è®©å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®å…¶å®½é«˜ã€‚ ä¸åŒç‚¹ï¼šfloatä»ä¼šå æ®ä½ç½®ï¼Œabsoluteä¼šè¦†ç›–æ–‡æ¡£æµä¸­çš„å…¶ä»–å…ƒç´ ã€‚ ä»‹ç»ä¸€ä¸‹box-sizingå±æ€§ï¼Ÿ box-sizingå±æ€§ä¸»è¦ç”¨æ¥æ§åˆ¶å…ƒç´ çš„ç›’æ¨¡å‹çš„è§£ææ¨¡å¼ã€‚é»˜è®¤å€¼æ˜¯content-boxã€‚ content-boxï¼šè®©å…ƒç´ ç»´æŒW3Cçš„æ ‡å‡†ç›’æ¨¡å‹ã€‚å…ƒç´ çš„å®½åº¦/é«˜åº¦ç”±border + padding + contentçš„å®½åº¦/é«˜åº¦å†³å®šï¼Œè®¾ç½®width/heightå±æ€§æŒ‡çš„æ˜¯contentéƒ¨åˆ†çš„å®½/é«˜ border-boxï¼šè®©å…ƒç´ ç»´æŒIEä¼ ç»Ÿç›’æ¨¡å‹ï¼ˆIE6ä»¥ä¸‹ç‰ˆæœ¬å’ŒIE6~7çš„æ€ªå¼‚æ¨¡å¼ï¼‰ã€‚è®¾ç½®width/heightå±æ€§æŒ‡çš„æ˜¯border + padding + content æ ‡å‡†æµè§ˆå™¨ä¸‹ï¼ŒæŒ‰ç…§W3Cè§„èŒƒå¯¹ç›’æ¨¡å‹è§£æï¼Œä¸€æ—¦ä¿®æ”¹äº†å…ƒç´ çš„è¾¹æ¡†æˆ–å†…è·ï¼Œå°±ä¼šå½±å“å…ƒç´ çš„ç›’å­å°ºå¯¸ï¼Œå°±ä¸å¾—ä¸é‡æ–°è®¡ç®—å…ƒç´ çš„ç›’å­å°ºå¯¸ï¼Œä»è€Œå½±å“æ•´ä¸ªé¡µé¢çš„å¸ƒå±€ã€‚ CSS é€‰æ‹©ç¬¦æœ‰å“ªäº›ï¼Ÿå“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿä¼˜å…ˆçº§ç®—æ³•å¦‚ä½•è®¡ç®—ï¼Ÿ CSS3æ–°å¢ä¼ªç±»æœ‰é‚£äº›ï¼Ÿ 1.idé€‰æ‹©å™¨ï¼ˆ # myidï¼‰ 2.ç±»é€‰æ‹©å™¨ï¼ˆ.myclassnameï¼‰ 3.æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆdiv, h1, pï¼‰ 4.ç›¸é‚»é€‰æ‹©å™¨ï¼ˆh1 + pï¼‰ 5.å­é€‰æ‹©å™¨ï¼ˆul &gt; liï¼‰ 6.åä»£é€‰æ‹©å™¨ï¼ˆli aï¼‰ 7.é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ * ï¼‰ 8.å±æ€§é€‰æ‹©å™¨ï¼ˆa[rel = &quot;external&quot;]ï¼‰ 9.ä¼ªç±»é€‰æ‹©å™¨ï¼ˆa: hover, li:nth-childï¼‰ ä¼˜å…ˆçº§ä¸º: !important &gt; id &gt; class &gt; tag important æ¯” å†…è”ä¼˜å…ˆçº§é«˜,ä½†å†…è”æ¯” id è¦é«˜ CSS3æ–°å¢ä¼ªç±»ä¸¾ä¾‹ï¼š p:first-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„é¦–ä¸ª &lt;p&gt; å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚ p:last-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„æœ€å &lt;p&gt; å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚ p:only-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ å”¯ä¸€çš„ &lt;p&gt; å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚ p:only-child é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„å”¯ä¸€å­å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚ p:nth-child(2) é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„ç¬¬äºŒä¸ªå­å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚ :enabled :disabled æ§åˆ¶è¡¨å•æ§ä»¶çš„ç¦ç”¨çŠ¶æ€ã€‚ :checked å•é€‰æ¡†æˆ–å¤é€‰æ¡†è¢«é€‰ä¸­ã€‚ CSS3æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ CSS3å®ç°åœ†è§’ï¼ˆborder-radiusï¼‰ï¼Œé˜´å½±ï¼ˆbox-shadowï¼‰ï¼Œ å¯¹æ–‡å­—åŠ ç‰¹æ•ˆï¼ˆtext-shadowã€ï¼‰ï¼Œçº¿æ€§æ¸å˜ï¼ˆgradientï¼‰ï¼Œæ—‹è½¬ï¼ˆtransformï¼‰ transform:rotate(9deg) scale(0.85,0.90) translate(0px,-30px) skew(-9deg,0deg);//æ—‹è½¬,ç¼©æ”¾,å®šä½,å€¾æ–œ å¢åŠ äº†æ›´å¤šçš„CSSé€‰æ‹©å™¨ å¤šèƒŒæ™¯ rgba åœ¨CSS3ä¸­å”¯ä¸€å¼•å…¥çš„ä¼ªå…ƒç´ æ˜¯::selection. åª’ä½“æŸ¥è¯¢ï¼Œå¤šæ å¸ƒå±€ border-image CSS3ä¸­æ–°å¢äº†ä¸€ç§ç›’æ¨¡å‹è®¡ç®—æ–¹å¼ï¼šbox-sizingã€‚ç›’æ¨¡å‹é»˜è®¤çš„å€¼æ˜¯content-box, æ–°å¢çš„å€¼æ˜¯padding-boxå’Œborder-boxï¼Œå‡ ç§ç›’æ¨¡å‹è®¡ç®—å…ƒç´ å®½é«˜çš„åŒºåˆ«å¦‚ä¸‹ï¼š content-boxï¼ˆé»˜è®¤ï¼‰å¸ƒå±€æ‰€å å®½åº¦Widthï¼š Width = width + padding-left + padding-right + border-left + border-right å¸ƒå±€æ‰€å é«˜åº¦Height: Height = height + padding-top + padding-bottom + border-top + border-bottom padding-boxå¸ƒå±€æ‰€å å®½åº¦Widthï¼š Width = width(åŒ…å«padding-left + padding-right) + border-top + border-bottom å¸ƒå±€æ‰€å é«˜åº¦Height: Height = height(åŒ…å«padding-top + padding-bottom) + border-top + border-bottom border-boxå¸ƒå±€æ‰€å å®½åº¦Widthï¼š Width = width(åŒ…å«padding-left + padding-right + border-left + border-right) å¸ƒå±€æ‰€å é«˜åº¦Height: Height = height(åŒ…å«padding-top + padding-bottom + border-top + border-bottom) å¯¹BFCè§„èŒƒçš„ç†è§£ï¼Ÿ BFCï¼Œå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œä¸€ä¸ªåˆ›å»ºäº†æ–°çš„BFCçš„ç›’å­æ˜¯ç‹¬ç«‹å¸ƒå±€çš„ï¼Œç›’å­é‡Œé¢çš„å­å…ƒç´ çš„æ ·å¼ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ã€‚åœ¨åŒä¸€ä¸ªBFCä¸­çš„ä¸¤ä¸ªæ¯—é‚»çš„å—çº§ç›’åœ¨å‚ç›´æ–¹å‘ï¼ˆå’Œå¸ƒå±€æ–¹å‘æœ‰å…³ç³»ï¼‰çš„marginä¼šå‘ç”ŸæŠ˜å ã€‚ ï¼ˆW3C CSS 2.1 è§„èŒƒä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå®ƒå†³å®šäº†å…ƒç´ å¦‚ä½•å¯¹å…¶å†…å®¹è¿›è¡Œå¸ƒå±€ï¼Œä»¥åŠä¸å…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚ è¯´è¯´ä½ å¯¹è¯­ä¹‰åŒ–çš„ç†è§£1ï¼Œå»æ‰æˆ–è€…ä¸¢å¤±æ ·å¼çš„æ—¶å€™èƒ½å¤Ÿè®©é¡µé¢å‘ˆç°å‡ºæ¸…æ™°çš„ç»“æ„ 2ï¼Œæœ‰åˆ©äºSEOï¼šå’Œæœç´¢å¼•æ“å»ºç«‹è‰¯å¥½æ²Ÿé€šï¼Œæœ‰åŠ©äºçˆ¬è™«æŠ“å–æ›´å¤šçš„æœ‰æ•ˆä¿¡æ¯ï¼šçˆ¬è™«ä¾èµ–äºæ ‡ç­¾æ¥ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ï¼› 3ï¼Œæ–¹ä¾¿å…¶ä»–è®¾å¤‡è§£æï¼ˆå¦‚å±å¹•é˜…è¯»å™¨ã€ç›²äººé˜…è¯»å™¨ã€ç§»åŠ¨è®¾å¤‡ï¼‰ä»¥æ„ä¹‰çš„æ–¹å¼æ¥æ¸²æŸ“ç½‘é¡µï¼› 4ï¼Œä¾¿äºå›¢é˜Ÿå¼€å‘å’Œç»´æŠ¤ï¼Œè¯­ä¹‰åŒ–æ›´å…·å¯è¯»æ€§ï¼Œæ˜¯ä¸‹ä¸€æ­¥å§ç½‘é¡µçš„é‡è¦åŠ¨å‘ï¼Œéµå¾ªW3Cæ ‡å‡†çš„å›¢é˜Ÿéƒ½éµå¾ªè¿™ä¸ªæ ‡å‡†ï¼Œå¯ä»¥å‡å°‘å·®å¼‚åŒ–ã€‚ Doctypeä½œç”¨? ä¸¥æ ¼æ¨¡å¼ä¸æ··æ‚æ¨¡å¼å¦‚ä½•åŒºåˆ†ï¼Ÿå®ƒä»¬æœ‰ä½•æ„ä¹‰?1ï¼‰ã€&lt;!DOCTYPE&gt; å£°æ˜ä½äºæ–‡æ¡£ä¸­çš„æœ€å‰é¢ï¼Œå¤„äº &lt;html&gt; æ ‡ç­¾ä¹‹å‰ã€‚å‘ŠçŸ¥æµè§ˆå™¨ä»¥ä½•ç§æ¨¡å¼æ¥æ¸²æŸ“æ–‡æ¡£ã€‚ 2ï¼‰ã€ä¸¥æ ¼æ¨¡å¼çš„æ’ç‰ˆå’Œ JS è¿ä½œæ¨¡å¼æ˜¯ ä»¥è¯¥æµè§ˆå™¨æ”¯æŒçš„æœ€é«˜æ ‡å‡†è¿è¡Œã€‚ 3ï¼‰ã€åœ¨æ··æ‚æ¨¡å¼ä¸­ï¼Œé¡µé¢ä»¥å®½æ¾çš„å‘åå…¼å®¹çš„æ–¹å¼æ˜¾ç¤ºã€‚æ¨¡æ‹Ÿè€å¼æµè§ˆå™¨çš„è¡Œä¸ºä»¥é˜²æ­¢ç«™ç‚¹æ— æ³•å·¥ä½œã€‚ 4ï¼‰ã€DOCTYPEä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®ä¼šå¯¼è‡´æ–‡æ¡£ä»¥æ··æ‚æ¨¡å¼å‘ˆç°ã€‚ ä½ çŸ¥é“å¤šå°‘ç§Doctypeæ–‡æ¡£ç±»å‹ï¼Ÿ è¯¥æ ‡ç­¾å¯å£°æ˜ä¸‰ç§ DTD ç±»å‹ï¼Œåˆ†åˆ«è¡¨ç¤ºä¸¥æ ¼ç‰ˆæœ¬ã€è¿‡æ¸¡ç‰ˆæœ¬ä»¥åŠåŸºäºæ¡†æ¶çš„ HTML æ–‡æ¡£ã€‚ HTML 4.01 è§„å®šäº†ä¸‰ç§æ–‡æ¡£ç±»å‹ï¼šStrictã€Transitional ä»¥åŠ Framesetã€‚ XHTML 1.0 è§„å®šäº†ä¸‰ç§ XML æ–‡æ¡£ç±»å‹ï¼šStrictã€Transitional ä»¥åŠ Framesetã€‚ Standards ï¼ˆæ ‡å‡†ï¼‰æ¨¡å¼ï¼ˆä¹Ÿå°±æ˜¯ä¸¥æ ¼å‘ˆç°æ¨¡å¼ï¼‰ç”¨äºå‘ˆç°éµå¾ªæœ€æ–°æ ‡å‡†çš„ç½‘é¡µï¼Œè€Œ Quirks ï¼ˆåŒ…å®¹ï¼‰æ¨¡å¼ï¼ˆä¹Ÿå°±æ˜¯æ¾æ•£å‘ˆç°æ¨¡å¼æˆ–è€…å…¼å®¹æ¨¡å¼ï¼‰ç”¨äºå‘ˆç°ä¸ºä¼ ç»Ÿæµè§ˆå™¨è€Œè®¾è®¡çš„ç½‘é¡µã€‚ HTMLä¸XHTMLâ€”â€”äºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«åŒºåˆ«ï¼š 1.æ‰€æœ‰çš„æ ‡è®°éƒ½å¿…é¡»è¦æœ‰ä¸€ä¸ªç›¸åº”çš„ç»“æŸæ ‡è®° 2.æ‰€æœ‰æ ‡ç­¾çš„å…ƒç´ å’Œå±æ€§çš„åå­—éƒ½å¿…é¡»ä½¿ç”¨å°å†™ 3.æ‰€æœ‰çš„XMLæ ‡è®°éƒ½å¿…é¡»åˆç†åµŒå¥— 4.æ‰€æœ‰çš„å±æ€§å¿…é¡»ç”¨å¼•å·&quot;&quot;æ‹¬èµ·æ¥ 5.æŠŠæ‰€æœ‰&lt;å’Œ&amp;ç‰¹æ®Šç¬¦å·ç”¨ç¼–ç è¡¨ç¤º 6.ç»™æ‰€æœ‰å±æ€§èµ‹ä¸€ä¸ªå€¼ 7.ä¸è¦åœ¨æ³¨é‡Šå†…å®¹ä¸­ä½¿â€œ--â€ 8.å›¾ç‰‡å¿…é¡»æœ‰è¯´æ˜æ–‡å­— å¸¸è§å…¼å®¹æ€§é—®é¢˜png24ä½çš„å›¾ç‰‡åœ¨iE6æµè§ˆå™¨ä¸Šå‡ºç°èƒŒæ™¯ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åšæˆPNG8.ä¹Ÿå¯ä»¥å¼•ç”¨ä¸€æ®µè„šæœ¬å¤„ç†. æµè§ˆå™¨é»˜è®¤çš„marginå’Œpaddingä¸åŒã€‚è§£å†³æ–¹æ¡ˆæ˜¯åŠ ä¸€ä¸ªå…¨å±€çš„*{margin:0;padding:0;}æ¥ç»Ÿä¸€ã€‚ IE6åŒè¾¹è·bug:å—å±æ€§æ ‡ç­¾floatåï¼Œåˆæœ‰æ¨ªè¡Œçš„marginæƒ…å†µä¸‹ï¼Œåœ¨ie6æ˜¾ç¤ºmarginæ¯”è®¾ç½®çš„å¤§ã€‚ æµ®åŠ¨ieäº§ç”Ÿçš„åŒå€è·ç¦»ï¼ˆIE6åŒè¾¹è·é—®é¢˜ï¼šåœ¨IE6ä¸‹ï¼Œå¦‚æœå¯¹å…ƒç´ è®¾ç½®äº†æµ®åŠ¨ï¼ŒåŒæ—¶åˆè®¾ç½®äº†margin-leftæˆ–margin-rightï¼Œmarginå€¼ä¼šåŠ å€ã€‚ï¼‰ #box{ float:left; width:10px; margin:0 0 0 100px;} è¿™ç§æƒ…å†µä¹‹ä¸‹IEä¼šäº§ç”Ÿ20pxçš„è·ç¦»ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨floatçš„æ ‡ç­¾æ ·å¼æ§åˆ¶ä¸­åŠ å…¥ _display:inline;å°†å…¶è½¬åŒ–ä¸ºè¡Œå†…å±æ€§ã€‚(_è¿™ä¸ªç¬¦å·åªæœ‰ie6ä¼šè¯†åˆ«) æ¸è¿›è¯†åˆ«çš„æ–¹å¼ï¼Œä»æ€»ä½“ä¸­é€æ¸æ’é™¤å±€éƒ¨ã€‚ é¦–å…ˆï¼Œå·§å¦™çš„ä½¿ç”¨â€œ\\9â€è¿™ä¸€æ ‡è®°ï¼Œå°†IEæ¸¸è§ˆå™¨ä»æ‰€æœ‰æƒ…å†µä¸­åˆ†ç¦»å‡ºæ¥ã€‚ æ¥ç€ï¼Œå†æ¬¡ä½¿ç”¨â€œ+â€å°†IE8å’ŒIE7ã€IE6åˆ†ç¦»å¼€æ¥ï¼Œè¿™æ ·IE8å·²ç»ç‹¬ç«‹è¯†åˆ«ã€‚ css .bb{ background-color:#f1ee18;/*æ‰€æœ‰è¯†åˆ«*/ .background-color:#00deff\\9; /*IE6ã€7ã€8è¯†åˆ«*/ +background-color:#a200ff;/*IE6ã€7è¯†åˆ«*/ _background-color:#1e0bd1;/*IE6è¯†åˆ«*/ } æ€ªå¼‚æ¨¡å¼é—®é¢˜ï¼šæ¼å†™DTDå£°æ˜ï¼ŒFirefoxä»ç„¶ä¼šæŒ‰ç…§æ ‡å‡†æ¨¡å¼æ¥è§£æç½‘é¡µï¼Œä½†åœ¨IEä¸­ä¼šè§¦å‘ æ€ªå¼‚æ¨¡å¼ã€‚ä¸ºé¿å…æ€ªå¼‚æ¨¡å¼ç»™æˆ‘ä»¬å¸¦æ¥ä¸å¿…è¦çš„éº»çƒ¦ï¼Œæœ€å¥½å…»æˆä¹¦å†™DTDå£°æ˜çš„å¥½ä¹ æƒ¯ã€‚ç°åœ¨ å¯ä»¥ä½¿ç”¨[html5](http://www.w3.org/TR/html5/single-page.html)æ¨èçš„å†™æ³•ï¼š`&lt;doctype html&gt;` ä¸Šä¸‹marginé‡åˆé—®é¢˜ ieå’Œfféƒ½å­˜åœ¨ï¼Œç›¸é‚»çš„ä¸¤ä¸ªdivçš„margin-leftå’Œmargin-rightä¸ä¼šé‡åˆï¼Œä½†æ˜¯margin-topå’Œmargin-bottomå´ä¼šå‘ç”Ÿé‡åˆã€‚ è§£å†³æ–¹æ³•ï¼Œå…»æˆè‰¯å¥½çš„ä»£ç ç¼–å†™ä¹ æƒ¯ï¼ŒåŒæ—¶é‡‡ç”¨margin-topæˆ–è€…åŒæ—¶é‡‡ç”¨margin-bottomã€‚ è§£é‡Šä¸‹æµ®åŠ¨å’Œå®ƒçš„å·¥ä½œåŸç†ï¼Ÿæ¸…é™¤æµ®åŠ¨çš„æŠ€å·§æµ®åŠ¨å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œä¸å æ®ç©ºé—´ã€‚æµ®åŠ¨å…ƒç´ ç¢°åˆ°åŒ…å«å®ƒçš„è¾¹æ¡†æˆ–è€…æµ®åŠ¨å…ƒç´ çš„è¾¹æ¡†åœç•™ã€‚ 1.ä½¿ç”¨ç©ºæ ‡ç­¾æ¸…é™¤æµ®åŠ¨ã€‚ è¿™ç§æ–¹æ³•æ˜¯åœ¨æ‰€æœ‰æµ®åŠ¨æ ‡ç­¾åé¢æ·»åŠ ä¸€ä¸ªç©ºæ ‡ç­¾ å®šä¹‰css clear:both. å¼Šç«¯å°±æ˜¯å¢åŠ äº†æ— æ„ä¹‰æ ‡ç­¾ã€‚ 2.ä½¿ç”¨overflowã€‚ ç»™åŒ…å«æµ®åŠ¨å…ƒç´ çš„çˆ¶æ ‡ç­¾æ·»åŠ csså±æ€§ overflow:auto; zoom:1; zoom:1ç”¨äºå…¼å®¹IE6ã€‚ 3.ä½¿ç”¨afterä¼ªå¯¹è±¡æ¸…é™¤æµ®åŠ¨ã€‚ è¯¥æ–¹æ³•åªé€‚ç”¨äºéIEæµè§ˆå™¨ã€‚å…·ä½“å†™æ³•å¯å‚ç…§ä»¥ä¸‹ç¤ºä¾‹ã€‚ä½¿ç”¨ä¸­éœ€æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ã€‚ä¸€ã€è¯¥æ–¹æ³•ä¸­å¿…é¡»ä¸ºéœ€è¦æ¸…é™¤æµ®åŠ¨å…ƒç´ çš„ä¼ªå¯¹è±¡ä¸­è®¾ç½® height:0ï¼Œå¦åˆ™è¯¥å…ƒç´ ä¼šæ¯”å®é™…é«˜å‡ºè‹¥å¹²åƒç´ ï¼› æµ®åŠ¨å…ƒç´ å¼•èµ·çš„é—®é¢˜å’Œè§£å†³åŠæ³•ï¼Ÿæµ®åŠ¨å…ƒç´ å¼•èµ·çš„é—®é¢˜ï¼š ï¼ˆ1ï¼‰çˆ¶å…ƒç´ çš„é«˜åº¦æ— æ³•è¢«æ’‘å¼€ï¼Œå½±å“ä¸çˆ¶å…ƒç´ åŒçº§çš„å…ƒç´  ï¼ˆ2ï¼‰ä¸æµ®åŠ¨å…ƒç´ åŒçº§çš„éæµ®åŠ¨å…ƒç´ ï¼ˆå†…è”å…ƒç´ ï¼‰ä¼šè·Ÿéšå…¶å ï¼ˆ3ï¼‰è‹¥éç¬¬ä¸€ä¸ªå…ƒç´ æµ®åŠ¨ï¼Œåˆ™è¯¥å…ƒç´ ä¹‹å‰çš„å…ƒç´ ä¹Ÿéœ€è¦æµ®åŠ¨ï¼Œå¦åˆ™ä¼šå½±å“é¡µé¢æ˜¾ç¤ºçš„ç»“æ„ è§£å†³æ–¹æ³•ï¼š ä½¿ç”¨CSSä¸­çš„clear:both;å±æ€§æ¥æ¸…é™¤å…ƒç´ çš„æµ®åŠ¨å¯è§£å†³2ã€3é—®é¢˜ï¼Œå¯¹äºé—®é¢˜1ï¼Œæ·»åŠ å¦‚ä¸‹æ ·å¼ï¼Œç»™çˆ¶å…ƒç´ æ·»åŠ clearfixæ ·å¼ï¼š .clearfix:after{content: &quot;.&quot;;display: block;height: 0;clear: both;visibility: hidden;} .clearfix{display: inline-block;} /* for IE/Mac */ æ¸…é™¤æµ®åŠ¨çš„å‡ ç§æ–¹æ³•ï¼š 1ï¼Œé¢å¤–æ ‡ç­¾æ³•ï¼Œ&lt;div style=&quot;clear:both;&quot;&gt;&lt;/div&gt;ï¼ˆç¼ºç‚¹ï¼šä¸è¿‡è¿™ä¸ªåŠæ³•ä¼šå¢åŠ é¢å¤–çš„æ ‡ç­¾ä½¿HTMLç»“æ„çœ‹èµ·æ¥ä¸å¤Ÿç®€æ´ã€‚ï¼‰ 2ï¼Œä½¿ç”¨afterä¼ªç±» #parent:after{ content:&quot;.&quot;; height:0; visibility:hidden; display:block; clear:both; } 3,æµ®åŠ¨å¤–éƒ¨å…ƒç´  4,è®¾ç½®overflowä¸ºhiddenæˆ–è€…auto DOMæ“ä½œâ€”â€”æ€æ ·æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ã€‚ 1ï¼‰åˆ›å»ºæ–°èŠ‚ç‚¹ createDocumentFragment() //åˆ›å»ºä¸€ä¸ªDOMç‰‡æ®µ createElement() //åˆ›å»ºä¸€ä¸ªå…·ä½“çš„å…ƒç´  createTextNode() //åˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ 2ï¼‰æ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ã€æ’å…¥ appendChild() removeChild() replaceChild() insertBefore() //å¹¶æ²¡æœ‰insertAfter() 3ï¼‰æŸ¥æ‰¾ getElementsByTagName() //é€šè¿‡æ ‡ç­¾åç§° getElementsByName() //é€šè¿‡å…ƒç´ çš„Nameå±æ€§çš„å€¼(IEå®¹é”™èƒ½åŠ›è¾ƒå¼ºï¼Œ ä¼šå¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…æ‹¬idç­‰äºnameå€¼çš„) getElementById() //é€šè¿‡å…ƒç´ Idï¼Œå”¯ä¸€æ€§ html5æœ‰å“ªäº›æ–°ç‰¹æ€§ã€ç§»é™¤äº†é‚£äº›å…ƒç´ ï¼Ÿå¦‚ä½•å¤„ç†HTML5æ–°æ ‡ç­¾çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Ÿå¦‚ä½•åŒºåˆ† HTML å’Œ HTML5ï¼Ÿ HTML5 ç°åœ¨å·²ç»ä¸æ˜¯ SGML çš„å­é›†ï¼Œä¸»è¦æ˜¯å…³äºå›¾åƒï¼Œä½ç½®ï¼Œå­˜å‚¨ï¼Œå¤šä»»åŠ¡ç­‰åŠŸèƒ½çš„å¢åŠ ã€‚ æ‹–æ‹½é‡Šæ”¾(Drag and drop) API è¯­ä¹‰åŒ–æ›´å¥½çš„å†…å®¹æ ‡ç­¾ï¼ˆheader,nav,footer,aside,article,sectionï¼‰ éŸ³é¢‘ã€è§†é¢‘API(audio,video) ç”»å¸ƒ(Canvas) API åœ°ç†(Geolocation) API æœ¬åœ°ç¦»çº¿å­˜å‚¨ localStorage é•¿æœŸå­˜å‚¨æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±ï¼› sessionStorage çš„æ•°æ®åœ¨æµè§ˆå™¨å…³é—­åè‡ªåŠ¨åˆ é™¤ è¡¨å•æ§ä»¶ï¼Œcalendarã€dateã€timeã€emailã€urlã€search æ–°çš„æŠ€æœ¯webworker, websocket, Geolocation ç§»é™¤çš„å…ƒç´  çº¯è¡¨ç°çš„å…ƒç´ ï¼šbasefontï¼Œbigï¼Œcenterï¼Œfont, sï¼Œstrikeï¼Œttï¼Œuï¼› å¯¹å¯ç”¨æ€§äº§ç”Ÿè´Ÿé¢å½±å“çš„å…ƒç´ ï¼šframeï¼Œframesetï¼Œnoframesï¼› æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼š IE8/IE7/IE6æ”¯æŒé€šè¿‡document.createElementæ–¹æ³•äº§ç”Ÿçš„æ ‡ç­¾ï¼Œ å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‰¹æ€§è®©è¿™äº›æµè§ˆå™¨æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼Œ å½“ç„¶æœ€å¥½çš„æ–¹å¼æ˜¯ç›´æ¥ä½¿ç”¨æˆç†Ÿçš„æ¡†æ¶ã€ä½¿ç”¨æœ€å¤šçš„æ˜¯html5shimæ¡†æ¶ &lt;!--[if lt IE 9]&gt; &lt;script&gt; src=&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;&lt;/script&gt; &lt;![endif]--&gt; å¦‚ä½•åŒºåˆ†ï¼š DOCTYPEå£°æ˜\\æ–°å¢çš„ç»“æ„å…ƒç´ \\åŠŸèƒ½å…ƒç´  å¦‚ä½•å®ç°æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡? è°ƒç”¨localstorgeã€cookiesç­‰æœ¬åœ°å­˜å‚¨æ–¹å¼ ä»€ä¹ˆæ˜¯ FOUCï¼ˆæ— æ ·å¼å†…å®¹é—ªçƒï¼‰ï¼Ÿä½ å¦‚ä½•æ¥é¿å… FOUCï¼Ÿ FOUC - Flash Of Unstyled Content æ–‡æ¡£æ ·å¼é—ªçƒ &lt;style type=&quot;text/css&quot; media=&quot;all&quot;&gt;@import &quot;../fouc.css&quot;;&lt;/style&gt; è€Œå¼•ç”¨CSSæ–‡ä»¶çš„@importå°±æ˜¯é€ æˆè¿™ä¸ªé—®é¢˜çš„ç½ªé­ç¥¸é¦–ã€‚IEä¼šå…ˆåŠ è½½æ•´ä¸ªHTMLæ–‡æ¡£çš„DOMï¼Œç„¶åå†å»å¯¼å…¥å¤–éƒ¨çš„CSSæ–‡ä»¶ï¼Œå› æ­¤ï¼Œåœ¨é¡µé¢DOMåŠ è½½å®Œæˆåˆ°CSSå¯¼å…¥å®Œæˆä¸­é—´ä¼šæœ‰ä¸€æ®µæ—¶é—´é¡µé¢ä¸Šçš„å†…å®¹æ˜¯æ²¡æœ‰æ ·å¼çš„ï¼Œè¿™æ®µæ—¶é—´çš„é•¿çŸ­è·Ÿç½‘é€Ÿï¼Œç”µè„‘é€Ÿåº¦éƒ½æœ‰å…³ç³»ã€‚ è§£å†³æ–¹æ³•ç®€å•çš„å‡ºå¥‡ï¼Œåªè¦åœ¨&lt;head&gt;ä¹‹é—´åŠ å…¥ä¸€ä¸ª&lt;link&gt;æˆ–è€…&lt;script&gt;å…ƒç´ å°±å¯ä»¥äº†ã€‚ nullå’Œundefinedçš„åŒºåˆ«nullæ˜¯ä¸€ä¸ªè¡¨ç¤ºâ€æ— â€çš„å¯¹è±¡ï¼Œè½¬ä¸ºæ•°å€¼æ—¶ä¸º0ï¼›undefinedæ˜¯ä¸€ä¸ªè¡¨ç¤ºâ€æ— â€çš„åŸå§‹å€¼ï¼Œè½¬ä¸ºæ•°å€¼æ—¶ä¸ºNaNã€‚ å½“å£°æ˜çš„å˜é‡è¿˜æœªè¢«åˆå§‹åŒ–æ—¶ï¼Œå˜é‡çš„é»˜è®¤å€¼ä¸ºundefinedã€‚ nullç”¨æ¥è¡¨ç¤ºå°šæœªå­˜åœ¨çš„å¯¹è±¡ï¼Œå¸¸ç”¨æ¥è¡¨ç¤ºå‡½æ•°ä¼å›¾è¿”å›ä¸€ä¸ªä¸å­˜åœ¨çš„å¯¹è±¡ã€‚ undefinedè¡¨ç¤ºâ€ç¼ºå°‘å€¼â€ï¼Œå°±æ˜¯æ­¤å¤„åº”è¯¥æœ‰ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å®šä¹‰ã€‚å…¸å‹ç”¨æ³•æ˜¯ï¼š ï¼ˆ1ï¼‰å˜é‡è¢«å£°æ˜äº†ï¼Œä½†æ²¡æœ‰èµ‹å€¼æ—¶ï¼Œå°±ç­‰äºundefinedã€‚ ï¼ˆ2) è°ƒç”¨å‡½æ•°æ—¶ï¼Œåº”è¯¥æä¾›çš„å‚æ•°æ²¡æœ‰æä¾›ï¼Œè¯¥å‚æ•°ç­‰äºundefinedã€‚ ï¼ˆ3ï¼‰å¯¹è±¡æ²¡æœ‰èµ‹å€¼çš„å±æ€§ï¼Œè¯¥å±æ€§çš„å€¼ä¸ºundefinedã€‚ ï¼ˆ4ï¼‰å‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œé»˜è®¤è¿”å›undefinedã€‚ nullè¡¨ç¤ºâ€æ²¡æœ‰å¯¹è±¡â€ï¼Œå³è¯¥å¤„ä¸åº”è¯¥æœ‰å€¼ã€‚å…¸å‹ç”¨æ³•æ˜¯ï¼š ï¼ˆ1ï¼‰ ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°çš„å‚æ•°ä¸æ˜¯å¯¹è±¡ã€‚ ï¼ˆ2ï¼‰ ä½œä¸ºå¯¹è±¡åŸå‹é“¾çš„ç»ˆç‚¹ã€‚ newæ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆå‘¢ 1ã€åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¹¶ä¸” this å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ï¼ŒåŒæ—¶è¿˜ç»§æ‰¿äº†è¯¥å‡½æ•°çš„åŸå‹ã€‚ 2ã€å±æ€§å’Œæ–¹æ³•è¢«åŠ å…¥åˆ° this å¼•ç”¨çš„å¯¹è±¡ä¸­ã€‚ 3ã€æ–°åˆ›å»ºçš„å¯¹è±¡ç”± this æ‰€å¼•ç”¨ï¼Œå¹¶ä¸”æœ€åéšå¼çš„è¿”å› this ã€‚ var obj = {}; obj.__proto__ = Base.prototype; Base.call(obj); jså»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿdeferå’Œasyncã€åŠ¨æ€åˆ›å»ºDOMæ–¹å¼ï¼ˆåˆ›å»ºscriptï¼Œæ’å…¥åˆ°DOMä¸­ï¼ŒåŠ è½½å®Œæ¯•åcallBackï¼‰ã€æŒ‰éœ€å¼‚æ­¥è½½å…¥js call() å’Œ apply()çš„åŒºåˆ«å’Œä½œç”¨ï¼Ÿä½œç”¨ï¼šåŠ¨æ€æ”¹å˜æŸä¸ªç±»çš„æŸä¸ªæ–¹æ³•çš„è¿è¡Œç¯å¢ƒï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡ï¼‰ã€‚ åŒºåˆ«å‚è§ï¼š[JavaScriptå­¦ä¹ æ€»ç»“ï¼ˆå››ï¼‰functionå‡½æ•°éƒ¨åˆ†][3] å“ªäº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿå†…å­˜æ³„æ¼æŒ‡ä»»ä½•å¯¹è±¡åœ¨æ‚¨ä¸å†æ‹¥æœ‰æˆ–éœ€è¦å®ƒä¹‹åä»ç„¶å­˜åœ¨ã€‚ åƒåœ¾å›æ”¶å™¨å®šæœŸæ‰«æå¯¹è±¡ï¼Œå¹¶è®¡ç®—å¼•ç”¨äº†æ¯ä¸ªå¯¹è±¡çš„å…¶ä»–å¯¹è±¡çš„æ•°é‡ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æ•°é‡ä¸º 0ï¼ˆæ²¡æœ‰å…¶ä»–å¯¹è±¡å¼•ç”¨è¿‡è¯¥å¯¹è±¡ï¼‰ï¼Œæˆ–å¯¹è¯¥å¯¹è±¡çš„æƒŸä¸€å¼•ç”¨æ˜¯å¾ªç¯çš„ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„å†…å­˜å³å¯å›æ”¶ã€‚ setTimeout çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½¿ç”¨å­—ç¬¦ä¸²è€Œéå‡½æ•°çš„è¯ï¼Œä¼šå¼•å‘å†…å­˜æ³„æ¼ã€‚ é—­åŒ…ã€æ§åˆ¶å°æ—¥å¿—ã€å¾ªç¯ï¼ˆåœ¨ä¸¤ä¸ªå¯¹è±¡å½¼æ­¤å¼•ç”¨ä¸”å½¼æ­¤ä¿ç•™æ—¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªå¾ªç¯ï¼‰ è¯¦è§ï¼š[è¯¦è§£jså˜é‡ã€ä½œç”¨åŸŸåŠå†…å­˜][4] åˆ—ä¸¾IE ä¸å…¶ä»–æµè§ˆå™¨ä¸ä¸€æ ·çš„ç‰¹æ€§ï¼Ÿ IEæ”¯æŒcurrentStyleï¼ŒFIrefoxä½¿ç”¨getComputStyle IE ä½¿ç”¨innerTextï¼ŒFirefoxä½¿ç”¨textContent æ»¤é•œæ–¹é¢ï¼šIE:filter:alpha(opacity= num)ï¼›Firefoxï¼š-moz-opacity:num äº‹ä»¶æ–¹é¢ï¼šIEï¼šattachEventï¼šç«ç‹æ˜¯addEventListener é¼ æ ‡ä½ç½®ï¼šIEæ˜¯event.clientXï¼›ç«ç‹æ˜¯event.pageX IEä½¿ç”¨event.srcElementï¼›Firefoxä½¿ç”¨event.target IEä¸­æ¶ˆé™¤listçš„åŸç‚¹ä»…éœ€margin:0å³å¯è¾¾åˆ°æœ€ç»ˆæ•ˆæœï¼›FIrefoxéœ€è¦è®¾ç½®margin:0;padding:0ä»¥åŠlist-style:none CSSåœ†è§’ï¼šie7ä»¥ä¸‹ä¸æ”¯æŒåœ†è§’ WEBåº”ç”¨ä»æœåŠ¡å™¨ä¸»åŠ¨æ¨é€Dataåˆ°å®¢æˆ·ç«¯æœ‰é‚£äº›æ–¹å¼ï¼ŸJavascriptæ•°æ®æ¨é€ Commetï¼šåŸºäºHTTPé•¿è¿æ¥çš„æœåŠ¡å™¨æ¨é€æŠ€æœ¯ åŸºäºWebSocketçš„æ¨é€æ–¹æ¡ˆ SSEï¼ˆServer-Send Eventï¼‰ï¼šæœåŠ¡å™¨æ¨é€æ•°æ®æ–°æ–¹å¼ å¯¹å‰ç«¯ç•Œé¢å·¥ç¨‹å¸ˆè¿™ä¸ªèŒä½æ˜¯æ€ä¹ˆæ ·ç†è§£çš„ï¼Ÿå®ƒçš„å‰æ™¯ä¼šæ€ä¹ˆæ ·ï¼Ÿå‰ç«¯æ˜¯æœ€è´´è¿‘ç”¨æˆ·çš„ç¨‹åºå‘˜ï¼Œæ¯”åç«¯ã€æ•°æ®åº“ã€äº§å“ç»ç†ã€è¿è¥ã€å®‰å…¨éƒ½è¿‘ã€‚ 1ã€å®ç°ç•Œé¢äº¤äº’ 2ã€æå‡ç”¨æˆ·ä½“éªŒ 3ã€æœ‰äº†Node.jsï¼Œå‰ç«¯å¯ä»¥å®ç°æœåŠ¡ç«¯çš„ä¸€äº›äº‹æƒ… å‰ç«¯æ˜¯æœ€è´´è¿‘ç”¨æˆ·çš„ç¨‹åºå‘˜ï¼Œå‰ç«¯çš„èƒ½åŠ›å°±æ˜¯èƒ½è®©äº§å“ä» 90åˆ†è¿›åŒ–åˆ° 100 åˆ†ï¼Œç”šè‡³æ›´å¥½ï¼Œ å‚ä¸é¡¹ç›®ï¼Œå¿«é€Ÿé«˜è´¨é‡å®Œæˆå®ç°æ•ˆæœå›¾ï¼Œç²¾ç¡®åˆ°1pxï¼› ä¸å›¢é˜Ÿæˆå‘˜ï¼ŒUIè®¾è®¡ï¼Œäº§å“ç»ç†çš„æ²Ÿé€šï¼› åšå¥½çš„é¡µé¢ç»“æ„ï¼Œé¡µé¢é‡æ„å’Œç”¨æˆ·ä½“éªŒï¼› å¤„ç†hackï¼Œå…¼å®¹ã€å†™å‡ºä¼˜ç¾çš„ä»£ç æ ¼å¼ï¼› é’ˆå¯¹æœåŠ¡å™¨çš„ä¼˜åŒ–ã€æ‹¥æŠ±æœ€æ–°å‰ç«¯æŠ€æœ¯ã€‚ ä¸€ä¸ªé¡µé¢ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½æ˜¾ç¤ºå®Œæˆï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ åˆ†ä¸º4ä¸ªæ­¥éª¤ï¼š ï¼ˆ1ï¼‰ï¼Œå½“å‘é€ä¸€ä¸ªURLè¯·æ±‚æ—¶ï¼Œä¸ç®¡è¿™ä¸ªURLæ˜¯Webé¡µé¢çš„URLè¿˜æ˜¯Webé¡µé¢ä¸Šæ¯ä¸ªèµ„æºçš„URLï¼Œæµè§ˆå™¨éƒ½ä¼šå¼€å¯ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼ŒåŒæ—¶åœ¨è¿œç¨‹DNSæœåŠ¡å™¨ä¸Šå¯åŠ¨ä¸€ä¸ªDNSæŸ¥è¯¢ã€‚è¿™èƒ½ä½¿æµè§ˆå™¨è·å¾—è¯·æ±‚å¯¹åº”çš„IPåœ°å€ã€‚ ï¼ˆ2ï¼‰ï¼Œ æµè§ˆå™¨ä¸è¿œç¨‹`Web`æœåŠ¡å™¨é€šè¿‡`TCP`ä¸‰æ¬¡æ¡æ‰‹åå•†æ¥å»ºç«‹ä¸€ä¸ª`TCP/IP`è¿æ¥ã€‚è¯¥æ¡æ‰‹åŒ…æ‹¬ä¸€ä¸ªåŒæ­¥æŠ¥æ–‡ï¼Œä¸€ä¸ªåŒæ­¥-åº”ç­”æŠ¥æ–‡å’Œä¸€ä¸ªåº”ç­”æŠ¥æ–‡ï¼Œè¿™ä¸‰ä¸ªæŠ¥æ–‡åœ¨ æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’ã€‚è¯¥æ¡æ‰‹é¦–å…ˆç”±å®¢æˆ·ç«¯å°è¯•å»ºç«‹èµ·é€šä¿¡ï¼Œè€ŒåæœåŠ¡å™¨åº”ç­”å¹¶æ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæœ€åç”±å®¢æˆ·ç«¯å‘å‡ºè¯¥è¯·æ±‚å·²ç»è¢«æ¥å—çš„æŠ¥æ–‡ã€‚ ï¼ˆ3ï¼‰ï¼Œä¸€æ—¦`TCP/IP`è¿æ¥å»ºç«‹ï¼Œæµè§ˆå™¨ä¼šé€šè¿‡è¯¥è¿æ¥å‘è¿œç¨‹æœåŠ¡å™¨å‘é€`HTTP`çš„`GET`è¯·æ±‚ã€‚è¿œç¨‹æœåŠ¡å™¨æ‰¾åˆ°èµ„æºå¹¶ä½¿ç”¨HTTPå“åº”è¿”å›è¯¥èµ„æºï¼Œå€¼ä¸º200çš„HTTPå“åº”çŠ¶æ€è¡¨ç¤ºä¸€ä¸ªæ­£ç¡®çš„å“åº”ã€‚ ï¼ˆ4ï¼‰ï¼Œæ­¤æ—¶ï¼Œ`Web`æœåŠ¡å™¨æä¾›èµ„æºæœåŠ¡ï¼Œå®¢æˆ·ç«¯å¼€å§‹ä¸‹è½½èµ„æºã€‚ è¯·æ±‚è¿”å›åï¼Œä¾¿è¿›å…¥äº†æˆ‘ä»¬å…³æ³¨çš„å‰ç«¯æ¨¡å— ç®€å•æ¥è¯´ï¼Œæµè§ˆå™¨ä¼šè§£æ`HTML`ç”Ÿæˆ`DOM Tree`ï¼Œå…¶æ¬¡ä¼šæ ¹æ®CSSç”ŸæˆCSS Rule Treeï¼Œè€Œ`javascript`åˆå¯ä»¥æ ¹æ®`DOM API`æ“ä½œ`DOM` è¯¦æƒ…ï¼š[ä»è¾“å…¥ URL åˆ°æµè§ˆå™¨æ¥æ”¶çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ][8] javascriptå¯¹è±¡çš„å‡ ç§åˆ›å»ºæ–¹å¼1ï¼Œå·¥å‚æ¨¡å¼ 2ï¼Œæ„é€ å‡½æ•°æ¨¡å¼ 3ï¼ŒåŸå‹æ¨¡å¼ 4ï¼Œæ··åˆæ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼ 5ï¼ŒåŠ¨æ€åŸå‹æ¨¡å¼ 6ï¼Œå¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼ 7ï¼Œç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼ javascriptç»§æ‰¿çš„6ç§æ–¹æ³•1ï¼ŒåŸå‹é“¾ç»§æ‰¿ 2ï¼Œå€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿ 3ï¼Œç»„åˆç»§æ‰¿(åŸå‹+å€Ÿç”¨æ„é€ ) 4ï¼ŒåŸå‹å¼ç»§æ‰¿ 5ï¼Œå¯„ç”Ÿå¼ç»§æ‰¿ 6ï¼Œå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ è¯¦æƒ…ï¼š[JavaScriptç»§æ‰¿æ–¹å¼è¯¦è§£][9] åˆ›å»ºajaxçš„è¿‡ç¨‹ (1)åˆ›å»º`XMLHttpRequest`å¯¹è±¡,ä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªå¼‚æ­¥è°ƒç”¨å¯¹è±¡. (2)åˆ›å»ºä¸€ä¸ªæ–°çš„`HTTP`è¯·æ±‚,å¹¶æŒ‡å®šè¯¥`HTTP`è¯·æ±‚çš„æ–¹æ³•ã€`URL`åŠéªŒè¯ä¿¡æ¯. (3)è®¾ç½®å“åº”`HTTP`è¯·æ±‚çŠ¶æ€å˜åŒ–çš„å‡½æ•°. (4)å‘é€`HTTP`è¯·æ±‚. (5)è·å–å¼‚æ­¥è°ƒç”¨è¿”å›çš„æ•°æ®. (6)ä½¿ç”¨JavaScriptå’ŒDOMå®ç°å±€éƒ¨åˆ·æ–°. var xmlHttp = new XMLHttpRequest(); xmlHttp.open(&#39;GET&#39;,&#39;demo.php&#39;,&#39;true&#39;); xmlHttp.send() xmlHttp.onreadystatechange = function(){ if(xmlHttp.readyState === 4 &amp; xmlHttp.status === 200){ } } è¯¦æƒ…ï¼š[JavaScriptå­¦ä¹ æ€»ç»“ï¼ˆä¸ƒï¼‰Ajaxå’ŒHttpçŠ¶æ€å­—][10] å¼‚æ­¥åŠ è½½å’Œå»¶è¿ŸåŠ è½½1.å¼‚æ­¥åŠ è½½çš„æ–¹æ¡ˆï¼š åŠ¨æ€æ’å…¥scriptæ ‡ç­¾ 2.é€šè¿‡ajaxå»è·å–jsä»£ç ï¼Œç„¶åé€šè¿‡evalæ‰§è¡Œ 3.scriptæ ‡ç­¾ä¸Šæ·»åŠ deferæˆ–è€…asyncå±æ€§ 4.åˆ›å»ºå¹¶æ’å…¥iframeï¼Œè®©å®ƒå¼‚æ­¥æ‰§è¡Œjs 5.å»¶è¿ŸåŠ è½½ï¼šæœ‰äº› js ä»£ç å¹¶ä¸æ˜¯é¡µé¢åˆå§‹åŒ–çš„æ—¶å€™å°±ç«‹åˆ»éœ€è¦çš„ï¼Œè€Œç¨åçš„æŸäº›æƒ…å†µæ‰éœ€è¦çš„ã€‚ ieå„ç‰ˆæœ¬å’Œchromeå¯ä»¥å¹¶è¡Œä¸‹è½½å¤šå°‘ä¸ªèµ„æºIE6 ä¸¤ä¸ªå¹¶å‘ï¼ŒiE7å‡çº§ä¹‹åçš„6ä¸ªå¹¶å‘ï¼Œä¹‹åç‰ˆæœ¬ä¹Ÿæ˜¯6ä¸ª Firefoxï¼Œchromeä¹Ÿæ˜¯6ä¸ª Flashã€Ajaxå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œåœ¨ä½¿ç”¨ä¸­å¦‚ä½•å–èˆï¼Ÿ Flashé€‚åˆå¤„ç†å¤šåª’ä½“ã€çŸ¢é‡å›¾å½¢ã€è®¿é—®æœºå™¨ï¼›å¯¹CSSã€å¤„ç†æ–‡æœ¬ä¸Šä¸è¶³ï¼Œä¸å®¹æ˜“è¢«æœç´¢ã€‚ -Ajaxå¯¹CSSã€æ–‡æœ¬æ”¯æŒå¾ˆå¥½ï¼Œæ”¯æŒæœç´¢ï¼›å¤šåª’ä½“ã€çŸ¢é‡å›¾å½¢ã€æœºå™¨è®¿é—®ä¸è¶³ã€‚ å…±åŒç‚¹ï¼šä¸æœåŠ¡å™¨çš„æ— åˆ·æ–°ä¼ é€’æ¶ˆæ¯ã€ç”¨æˆ·ç¦»çº¿å’Œåœ¨çº¿çŠ¶æ€ã€æ“ä½œDOM è¯·è§£é‡Šä¸€ä¸‹ JavaScript çš„åŒæºç­–ç•¥ã€‚æ¦‚å¿µ:åŒæºç­–ç•¥æ˜¯å®¢æˆ·ç«¯è„šæœ¬ï¼ˆå°¤å…¶æ˜¯Javascriptï¼‰çš„é‡è¦çš„å®‰å…¨åº¦é‡æ ‡å‡†ã€‚å®ƒæœ€æ—©å‡ºè‡ªNetscape Navigator2.0ï¼Œå…¶ç›®çš„æ˜¯é˜²æ­¢æŸä¸ªæ–‡æ¡£æˆ–è„šæœ¬ä»å¤šä¸ªä¸åŒæºè£…è½½ã€‚ è¿™é‡Œçš„åŒæºç­–ç•¥æŒ‡çš„æ˜¯ï¼šåè®®ï¼ŒåŸŸåï¼Œç«¯å£ç›¸åŒï¼ŒåŒæºç­–ç•¥æ˜¯ä¸€ç§å®‰å…¨åè®®ã€‚ æŒ‡ä¸€æ®µè„šæœ¬åªèƒ½è¯»å–æ¥è‡ªåŒä¸€æ¥æºçš„çª—å£å’Œæ–‡æ¡£çš„å±æ€§ã€‚ ä¸ºä»€ä¹ˆè¦æœ‰åŒæºé™åˆ¶ æˆ‘ä»¬ä¸¾ä¾‹è¯´æ˜ï¼šæ¯”å¦‚ä¸€ä¸ªé»‘å®¢ç¨‹åºï¼Œä»–åˆ©ç”¨IframeæŠŠçœŸæ­£çš„é“¶è¡Œç™»å½•é¡µé¢åµŒåˆ°ä»–çš„é¡µé¢ä¸Šï¼Œå½“ä½ ä½¿ç”¨çœŸå®çš„ç”¨æˆ·åï¼Œå¯†ç ç™»å½•æ—¶ï¼Œä»–çš„é¡µé¢å°±å¯ä»¥é€šè¿‡Javascriptè¯»å–åˆ°ä½ çš„è¡¨å•ä¸­inputä¸­çš„å†…å®¹ï¼Œè¿™æ ·ç”¨æˆ·åï¼Œå¯†ç å°±è½»æ¾åˆ°æ‰‹äº†ã€‚ ç¼ºç‚¹ï¼š ç°åœ¨ç½‘ç«™çš„JS éƒ½ä¼šè¿›è¡Œå‹ç¼©ï¼Œä¸€äº›æ–‡ä»¶ç”¨äº†ä¸¥æ ¼æ¨¡å¼ï¼Œè€Œå¦ä¸€äº›æ²¡æœ‰ã€‚è¿™æ—¶è¿™äº›æœ¬æ¥æ˜¯ä¸¥æ ¼æ¨¡å¼çš„æ–‡ä»¶ï¼Œè¢« merge åï¼Œè¿™ä¸ªä¸²å°±åˆ°äº†æ–‡ä»¶çš„ä¸­é—´ï¼Œä¸ä»…æ²¡æœ‰æŒ‡ç¤ºä¸¥æ ¼æ¨¡å¼ï¼Œåè€Œåœ¨å‹ç¼©åæµªè´¹äº†å­—èŠ‚ã€‚ GETå’ŒPOSTçš„åŒºåˆ«ï¼Œä½•æ—¶ä½¿ç”¨POSTï¼Ÿ GETï¼šä¸€èˆ¬ç”¨äºä¿¡æ¯è·å–ï¼Œä½¿ç”¨URLä¼ é€’å‚æ•°ï¼Œå¯¹æ‰€å‘é€ä¿¡æ¯çš„æ•°é‡ä¹Ÿæœ‰é™åˆ¶ï¼Œä¸€èˆ¬åœ¨2000ä¸ªå­—ç¬¦ POSTï¼šä¸€èˆ¬ç”¨äºä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œå¯¹æ‰€å‘é€çš„ä¿¡æ¯æ²¡æœ‰é™åˆ¶ã€‚ GETæ–¹å¼éœ€è¦ä½¿ç”¨Request.QueryStringæ¥å–å¾—å˜é‡çš„å€¼ï¼Œè€ŒPOSTæ–¹å¼é€šè¿‡Request.Formæ¥è·å–å˜é‡çš„å€¼ï¼Œ ä¹Ÿå°±æ˜¯è¯´Getæ˜¯é€šè¿‡åœ°å€æ æ¥ä¼ å€¼ï¼Œè€ŒPostæ˜¯é€šè¿‡æäº¤è¡¨å•æ¥ä¼ å€¼ã€‚ ç„¶è€Œï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸­ï¼Œè¯·ä½¿ç”¨ POST è¯·æ±‚ï¼š æ— æ³•ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ï¼ˆæ›´æ–°æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶æˆ–æ•°æ®åº“ï¼‰ å‘æœåŠ¡å™¨å‘é€å¤§é‡æ•°æ®ï¼ˆPOST æ²¡æœ‰æ•°æ®é‡é™åˆ¶ï¼‰ å‘é€åŒ…å«æœªçŸ¥å­—ç¬¦çš„ç”¨æˆ·è¾“å…¥æ—¶ï¼ŒPOST æ¯” GET æ›´ç¨³å®šä¹Ÿæ›´å¯é  äº‹ä»¶ã€IEä¸ç«ç‹çš„äº‹ä»¶æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å¦‚ä½•é˜»æ­¢å†’æ³¡ï¼Ÿ 1. æˆ‘ä»¬åœ¨ç½‘é¡µä¸­çš„æŸä¸ªæ“ä½œï¼ˆæœ‰çš„æ“ä½œå¯¹åº”å¤šä¸ªäº‹ä»¶ï¼‰ã€‚ä¾‹å¦‚ï¼šå½“æˆ‘ä»¬ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å°±ä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶ã€‚æ˜¯å¯ä»¥è¢« JavaScript ä¾¦æµ‹åˆ°çš„è¡Œä¸ºã€‚ 2. äº‹ä»¶å¤„ç†æœºåˆ¶ï¼šIEæ˜¯äº‹ä»¶å†’æ³¡ã€firefoxåŒæ—¶æ”¯æŒä¸¤ç§äº‹ä»¶æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯ï¼šæ•è·å‹äº‹ä»¶å’Œå†’æ³¡å‹äº‹ä»¶ã€‚ï¼› 3. `ev.stopPropagation()`;æ³¨æ„æ—§ieçš„æ–¹æ³• `ev.cancelBubble = true`; ajaxçš„ç¼ºç‚¹å’Œåœ¨IEä¸‹çš„é—®é¢˜ï¼Ÿè¯¦æƒ…è¯·è§ï¼š[JavaScriptå­¦ä¹ æ€»ç»“ï¼ˆä¸ƒï¼‰Ajaxå’ŒHttpçŠ¶æ€å­—][14] ajaxçš„ç¼ºç‚¹ 1ã€ajaxä¸æ”¯æŒæµè§ˆå™¨backæŒ‰é’®ã€‚ 2ã€å®‰å…¨é—®é¢˜ AJAXæš´éœ²äº†ä¸æœåŠ¡å™¨äº¤äº’çš„ç»†èŠ‚ã€‚ 3ã€å¯¹æœç´¢å¼•æ“çš„æ”¯æŒæ¯”è¾ƒå¼±ã€‚ 4ã€ç ´åäº†ç¨‹åºçš„å¼‚å¸¸æœºåˆ¶ã€‚ 5ã€ä¸å®¹æ˜“è°ƒè¯•ã€‚ IEç¼“å­˜é—®é¢˜ åœ¨IEæµè§ˆå™¨ä¸‹ï¼Œå¦‚æœè¯·æ±‚çš„æ–¹æ³•æ˜¯GETï¼Œå¹¶ä¸”è¯·æ±‚çš„URLä¸å˜ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚çš„ç»“æœå°±ä¼šè¢«ç¼“å­˜ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å¯ä»¥é€šè¿‡å®æ—¶æ”¹å˜è¯·æ±‚çš„URLï¼Œåªè¦URLæ”¹å˜ï¼Œå°±ä¸ä¼šè¢«ç¼“å­˜ï¼Œå¯ä»¥é€šè¿‡åœ¨URLæœ«å°¾æ·»åŠ ä¸Šéšæœºçš„æ—¶é—´æˆ³å‚æ•°(&#39;t&#39;= + new Date().getTime()) æˆ–è€…ï¼š open(&#39;GET&#39;,&#39;demo.php?rand=+Math.random()&#39;,true);// Ajaxè¯·æ±‚çš„é¡µé¢å†å²è®°å½•çŠ¶æ€é—®é¢˜ å¯ä»¥é€šè¿‡é”šç‚¹æ¥è®°å½•çŠ¶æ€ï¼Œlocation.hashã€‚è®©æµè§ˆå™¨è®°å½•Ajaxè¯·æ±‚æ—¶é¡µé¢çŠ¶æ€çš„å˜åŒ–ã€‚ è¿˜å¯ä»¥é€šè¿‡HTML5çš„history.pushStateï¼Œæ¥å®ç°æµè§ˆå™¨åœ°å€æ çš„æ— åˆ·æ–°æ”¹å˜ è°ˆè°ˆä½ å¯¹é‡æ„çš„ç†è§£ç½‘ç«™é‡æ„ï¼šåœ¨ä¸æ”¹å˜å¤–éƒ¨è¡Œä¸ºçš„å‰æä¸‹ï¼Œç®€åŒ–ç»“æ„ã€æ·»åŠ å¯è¯»æ€§ï¼Œè€Œåœ¨ç½‘ç«™å‰ç«¯ä¿æŒä¸€è‡´çš„è¡Œä¸ºã€‚ä¹Ÿå°±æ˜¯è¯´æ˜¯åœ¨ä¸æ”¹å˜UIçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘ç«™è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨æ‰©å±•çš„åŒæ—¶ä¿æŒä¸€è‡´çš„UIã€‚ å¯¹äºä¼ ç»Ÿçš„ç½‘ç«™æ¥è¯´é‡æ„é€šå¸¸æ˜¯ï¼š è¡¨æ ¼(table)å¸ƒå±€æ”¹ä¸ºDIV+CSS ä½¿ç½‘ç«™å‰ç«¯å…¼å®¹äºç°ä»£æµè§ˆå™¨(é’ˆå¯¹äºä¸åˆè§„èŒƒçš„CSSã€å¦‚å¯¹IE6æœ‰æ•ˆçš„) å¯¹äºç§»åŠ¨å¹³å°çš„ä¼˜åŒ– é’ˆå¯¹äºSEOè¿›è¡Œä¼˜åŒ– æ·±å±‚æ¬¡çš„ç½‘ç«™é‡æ„åº”è¯¥è€ƒè™‘çš„æ–¹é¢ å‡å°‘ä»£ç é—´çš„è€¦åˆ è®©ä»£ç ä¿æŒå¼¹æ€§ ä¸¥æ ¼æŒ‰è§„èŒƒç¼–å†™ä»£ç  è®¾è®¡å¯æ‰©å±•çš„API ä»£æ›¿æ—§æœ‰çš„æ¡†æ¶ã€è¯­è¨€(å¦‚VB) å¢å¼ºç”¨æˆ·ä½“éªŒ é€šå¸¸æ¥è¯´å¯¹äºé€Ÿåº¦çš„ä¼˜åŒ–ä¹ŸåŒ…å«åœ¨é‡æ„ä¸­ å‹ç¼©JSã€CSSã€imageç­‰å‰ç«¯èµ„æº(é€šå¸¸æ˜¯ç”±æœåŠ¡å™¨æ¥è§£å†³) ç¨‹åºçš„æ€§èƒ½ä¼˜åŒ–(å¦‚æ•°æ®è¯»å†™) é‡‡ç”¨CDNæ¥åŠ é€Ÿèµ„æºåŠ è½½ å¯¹äºJS DOMçš„ä¼˜åŒ– HTTPæœåŠ¡å™¨çš„æ–‡ä»¶ç¼“å­˜ HTTPçŠ¶æ€ç  100 Continue ç»§ç»­ï¼Œä¸€èˆ¬åœ¨å‘é€postè¯·æ±‚æ—¶ï¼Œå·²å‘é€äº†http headerä¹‹åæœåŠ¡ç«¯å°†è¿”å›æ­¤ä¿¡æ¯ï¼Œè¡¨ç¤ºç¡®è®¤ï¼Œä¹‹åå‘é€å…·ä½“å‚æ•°ä¿¡æ¯ 200 OK æ­£å¸¸è¿”å›ä¿¡æ¯ 201 Created è¯·æ±‚æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æº 202 Accepted æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç† 301 Moved Permanently è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚ 302 Found ä¸´æ—¶æ€§é‡å®šå‘ã€‚ 303 See Other ä¸´æ—¶æ€§é‡å®šå‘ï¼Œä¸”æ€»æ˜¯ä½¿ç”¨ GET è¯·æ±‚æ–°çš„ URIã€‚ 304 Not Modified è‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚ 400 Bad Request æœåŠ¡å™¨æ— æ³•ç†è§£è¯·æ±‚çš„æ ¼å¼ï¼Œå®¢æˆ·ç«¯ä¸åº”å½“å°è¯•å†æ¬¡ä½¿ç”¨ç›¸åŒçš„å†…å®¹å‘èµ·è¯·æ±‚ã€‚ 401 Unauthorized è¯·æ±‚æœªæˆæƒã€‚ 403 Forbidden ç¦æ­¢è®¿é—®ã€‚ 404 Not Found æ‰¾ä¸åˆ°å¦‚ä½•ä¸ URI ç›¸åŒ¹é…çš„èµ„æºã€‚ 500 Internal Server Error æœ€å¸¸è§çš„æœåŠ¡å™¨ç«¯é”™è¯¯ã€‚ 503 Service Unavailable æœåŠ¡å™¨ç«¯æš‚æ—¶æ— æ³•å¤„ç†è¯·æ±‚ï¼ˆå¯èƒ½æ˜¯è¿‡è½½æˆ–ç»´æŠ¤ï¼‰ã€‚ è¯´è¯´ä½ å¯¹Promiseçš„ç†è§£ä¾ç…§ Promise/A+ çš„å®šä¹‰ï¼ŒPromise æœ‰å››ç§çŠ¶æ€ï¼š pending: åˆå§‹çŠ¶æ€, é fulfilled æˆ– rejected. fulfilled: æˆåŠŸçš„æ“ä½œ. rejected: å¤±è´¥çš„æ“ä½œ. settled: Promiseå·²è¢«fulfilledæˆ–rejectedï¼Œä¸”ä¸æ˜¯pending å¦å¤–ï¼Œ fulfilled ä¸ rejected ä¸€èµ·åˆç§° settledã€‚ Promise å¯¹è±¡ç”¨æ¥è¿›è¡Œå»¶è¿Ÿ(deferred) å’Œå¼‚æ­¥(asynchronous ) è®¡ç®—ã€‚ Promise çš„æ„é€ å‡½æ•° æ„é€ ä¸€ä¸ª Promiseï¼Œæœ€åŸºæœ¬çš„ç”¨æ³•å¦‚ä¸‹ï¼š var promise = new Promise(function(resolve, reject) { if (...) { // succeed resolve(result); } else { // fails reject(Error(errMessage)); } }); Promise å®ä¾‹æ‹¥æœ‰ then æ–¹æ³•ï¼ˆå…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡ï¼Œé€šå¸¸è¢«ç§°ä¸º thenableï¼‰ã€‚å®ƒçš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š promise.then(onFulfilled, onRejected) æ¥æ”¶ä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä¸€ä¸ªåœ¨ fulfilled çš„æ—¶å€™è¢«è°ƒç”¨ï¼Œä¸€ä¸ªåœ¨ rejected çš„æ—¶å€™è¢«è°ƒç”¨ï¼Œæ¥æ”¶å‚æ•°å°±æ˜¯ futureï¼ŒonFulfilled å¯¹åº” resolve, onRejected å¯¹åº” rejectã€‚ è¯´è¯´ä½ å¯¹å‰ç«¯æ¶æ„å¸ˆçš„ç†è§£è´Ÿè´£å‰ç«¯å›¢é˜Ÿçš„ç®¡ç†åŠä¸å…¶ä»–å›¢é˜Ÿçš„åè°ƒå·¥ä½œï¼Œæå‡å›¢é˜Ÿæˆå‘˜èƒ½åŠ›å’Œæ•´ä½“æ•ˆç‡ï¼›å¸¦é¢†å›¢é˜Ÿå®Œæˆç ”å‘å·¥å…·åŠå¹³å°å‰ç«¯éƒ¨åˆ†çš„è®¾è®¡ã€ç ”å‘å’Œç»´æŠ¤ï¼›å¸¦é¢†å›¢é˜Ÿè¿›è¡Œå‰ç«¯é¢†åŸŸå‰æ²¿æŠ€æœ¯ç ”ç©¶åŠæ–°æŠ€æœ¯è°ƒç ”ï¼Œä¿è¯å›¢é˜Ÿçš„æŠ€æœ¯é¢†å…ˆè´Ÿè´£å‰ç«¯å¼€å‘è§„èŒƒåˆ¶å®šã€åŠŸèƒ½æ¨¡å—åŒ–è®¾è®¡ã€å…¬å…±ç»„ä»¶æ­å»ºç­‰å·¥ä½œï¼Œå¹¶ç»„ç»‡åŸ¹è®­ã€‚ å®ç°ä¸€ä¸ªå‡½æ•°cloneï¼Œå¯ä»¥å¯¹JavaScriptä¸­çš„5ç§ä¸»è¦çš„æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬Numberã€Stringã€Objectã€Arrayã€Booleanï¼‰è¿›è¡Œå€¼å¤åˆ¶ Object.prototype.clone = function(){ var o = this.constructor === Array ? [] : {}; for(var e in this){ o[e] = typeof this[e] === &quot;object&quot; ? this[e].clone() : this[e]; } return o; } è¯´è¯´ä¸¥æ ¼æ¨¡å¼çš„é™åˆ¶ä¸¥æ ¼æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹é™åˆ¶ï¼š å˜é‡å¿…é¡»å£°æ˜åå†ä½¿ç”¨ å‡½æ•°çš„å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§ï¼Œå¦åˆ™æŠ¥é”™ ä¸èƒ½ä½¿ç”¨withè¯­å¥ ä¸èƒ½å¯¹åªè¯»å±æ€§èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™ ä¸èƒ½ä½¿ç”¨å‰ç¼€0è¡¨ç¤ºå…«è¿›åˆ¶æ•°ï¼Œå¦åˆ™æŠ¥é”™ ä¸èƒ½åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™ ä¸èƒ½åˆ é™¤å˜é‡delete propï¼Œä¼šæŠ¥é”™ï¼Œåªèƒ½åˆ é™¤å±æ€§delete global[prop] evalä¸ä¼šåœ¨å®ƒçš„å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡ evalå’Œargumentsä¸èƒ½è¢«é‡æ–°èµ‹å€¼ argumentsä¸ä¼šè‡ªåŠ¨åæ˜ å‡½æ•°å‚æ•°çš„å˜åŒ– ä¸èƒ½ä½¿ç”¨arguments.callee ä¸èƒ½ä½¿ç”¨arguments.caller ç¦æ­¢thisæŒ‡å‘å…¨å±€å¯¹è±¡ ä¸èƒ½ä½¿ç”¨fn.callerå’Œfn.argumentsè·å–å‡½æ•°è°ƒç”¨çš„å †æ ˆ å¢åŠ äº†ä¿ç•™å­—ï¼ˆæ¯”å¦‚protectedã€staticå’Œinterfaceï¼‰ è®¾ç«‹â€ä¸¥æ ¼æ¨¡å¼â€çš„ç›®çš„ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š æ¶ˆé™¤Javascriptè¯­æ³•çš„ä¸€äº›ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘ä¸€äº›æ€ªå¼‚è¡Œä¸º; æ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸€äº›ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨ï¼› æé«˜ç¼–è¯‘å™¨æ•ˆç‡ï¼Œå¢åŠ è¿è¡Œé€Ÿåº¦ï¼› ä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„Javascriptåšå¥½é“ºå«ã€‚ æ³¨ï¼šç»è¿‡æµ‹è¯•IE6,7,8,9å‡ä¸æ”¯æŒä¸¥æ ¼æ¨¡å¼ã€‚ å¦‚ä½•åˆ é™¤ä¸€ä¸ªcookie 1.å°†æ—¶é—´è®¾ä¸ºå½“å‰æ—¶é—´å¾€å‰ä¸€ç‚¹ã€‚ var date = new Date(); date.setDate(date.getDate() - 1);//çœŸæ­£çš„åˆ é™¤ setDate()æ–¹æ³•ç”¨äºè®¾ç½®ä¸€ä¸ªæœˆçš„æŸä¸€å¤©ã€‚ 2.expiresçš„è®¾ç½® document.cookie = &#39;user=&#39;+ encodeURIComponent(&#39;name&#39;) + &#39;;expires = &#39; + new Date(0) ï¼Œå’Œï¼Œæ ‡ç­¾&lt;strong&gt; æ ‡ç­¾å’Œ &lt;em&gt; æ ‡ç­¾ä¸€æ ·ï¼Œç”¨äºå¼ºè°ƒæ–‡æœ¬ï¼Œä½†å®ƒå¼ºè°ƒçš„ç¨‹åº¦æ›´å¼ºä¸€äº›ã€‚ em æ˜¯ æ–œä½“å¼ºè°ƒæ ‡ç­¾ï¼Œæ›´å¼ºçƒˆå¼ºè°ƒï¼Œè¡¨ç¤ºå†…å®¹çš„å¼ºè°ƒç‚¹ã€‚ç›¸å½“äºhtmlå…ƒç´ ä¸­çš„ &lt;i&gt;...&lt;/i&gt;; &lt; b &gt; &lt; i &gt;æ˜¯è§†è§‰è¦ç´ ï¼Œåˆ†åˆ«è¡¨ç¤ºæ— æ„ä¹‰çš„åŠ ç²—ï¼Œæ— æ„ä¹‰çš„æ–œä½“ã€‚ em å’Œ strong æ˜¯è¡¨è¾¾è¦ç´ (phrase elements)ã€‚ å¯¹AMDå’ŒCommonjsçš„ç†è§£CommonJSæ˜¯æœåŠ¡å™¨ç«¯æ¨¡å—çš„è§„èŒƒï¼ŒNode.jsé‡‡ç”¨äº†è¿™ä¸ªè§„èŒƒã€‚CommonJSè§„èŒƒåŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åŠ è½½å®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚AMDè§„èŒƒåˆ™æ˜¯éåŒæ­¥åŠ è½½æ¨¡å—ï¼Œå…è®¸æŒ‡å®šå›è°ƒå‡½æ•°ã€‚ AMDæ¨èçš„é£æ ¼é€šè¿‡è¿”å›ä¸€ä¸ªå¯¹è±¡åšä¸ºæ¨¡å—å¯¹è±¡ï¼ŒCommonJSçš„é£æ ¼é€šè¿‡å¯¹module.exportsæˆ–exportsçš„å±æ€§èµ‹å€¼æ¥è¾¾åˆ°æš´éœ²æ¨¡å—å¯¹è±¡çš„ç›®çš„ã€‚ è¯¦æƒ…ï¼šä¹Ÿè°ˆwebpackåŠå…¶å¼€å‘æ¨¡å¼ document.write()çš„ç”¨æ³•document.write()æ–¹æ³•å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªæ–¹é¢ï¼šé¡µé¢è½½å…¥è¿‡ç¨‹ä¸­ç”¨å®æ—¶è„šæœ¬åˆ›å»ºé¡µé¢å†…å®¹ï¼Œä»¥åŠç”¨å»¶æ—¶è„šæœ¬åˆ›å»ºæœ¬çª—å£æˆ–æ–°çª—å£çš„å†…å®¹ã€‚ document.writeåªèƒ½é‡ç»˜æ•´ä¸ªé¡µé¢ã€‚innerHTMLå¯ä»¥é‡ç»˜é¡µé¢çš„ä¸€éƒ¨åˆ† ç¼–å†™ä¸€ä¸ªæ–¹æ³• æ±‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦å‡è®¾ï¼šä¸€ä¸ªè‹±æ–‡å­—ç¬¦å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªä¸­æ–‡å­—ç¬¦å ç”¨ä¸¤ä¸ªå­—èŠ‚ function GetBytes(str){ var len = str.length; var bytes = len; for(var i=0; i&lt;len; i++){ if (str.charCodeAt(i) &gt; 255) bytes++; } return bytes; } alert(GetBytes(&quot;ä½ å¥½,as&quot;)); git fetchå’Œgit pullçš„åŒºåˆ«git pullï¼šç›¸å½“äºæ˜¯ä»è¿œç¨‹è·å–æœ€æ–°ç‰ˆæœ¬å¹¶mergeåˆ°æœ¬åœ° git fetchï¼šç›¸å½“äºæ˜¯ä»è¿œç¨‹è·å–æœ€æ–°ç‰ˆæœ¬åˆ°æœ¬åœ°ï¼Œä¸ä¼šè‡ªåŠ¨merge è¯´è¯´ä½ å¯¹MVCå’ŒMVVMçš„ç†è§£ MVC View ä¼ é€æŒ‡ä»¤åˆ° Controller Controller å®Œæˆä¸šåŠ¡é€»è¾‘åï¼Œè¦æ±‚ Model æ”¹å˜çŠ¶æ€ Model å°†æ–°çš„æ•°æ®å‘é€åˆ° Viewï¼Œç”¨æˆ·å¾—åˆ°åé¦ˆ æ‰€æœ‰é€šä¿¡éƒ½æ˜¯å•å‘çš„ã€‚ Angularå®ƒé‡‡ç”¨åŒå‘ç»‘å®šï¼ˆdata-bindingï¼‰ï¼šViewçš„å˜åŠ¨ï¼Œè‡ªåŠ¨åæ˜ åœ¨ ViewModelï¼Œåä¹‹äº¦ç„¶ã€‚ ç»„æˆéƒ¨åˆ†Modelã€Viewã€ViewModel Viewï¼šUIç•Œé¢ ViewModelï¼šå®ƒæ˜¯Viewçš„æŠ½è±¡ï¼Œè´Ÿè´£Viewä¸Modelä¹‹é—´ä¿¡æ¯è½¬æ¢ï¼Œå°†Viewçš„Commandä¼ é€åˆ°Modelï¼› Modelï¼šæ•°æ®è®¿é—®å±‚ è¯·è§£é‡Šä»€ä¹ˆæ˜¯äº‹ä»¶ä»£ç†äº‹ä»¶ä»£ç†ï¼ˆEvent Delegationï¼‰ï¼Œåˆç§°ä¹‹ä¸ºäº‹ä»¶å§”æ‰˜ã€‚æ˜¯ JavaScript ä¸­å¸¸ç”¨ç»‘å®šäº‹ä»¶çš„å¸¸ç”¨æŠ€å·§ã€‚é¡¾åæ€ä¹‰ï¼Œâ€œäº‹ä»¶ä»£ç†â€å³æ˜¯æŠŠåŸæœ¬éœ€è¦ç»‘å®šçš„äº‹ä»¶å§”æ‰˜ç»™çˆ¶å…ƒç´ ï¼Œè®©çˆ¶å…ƒç´ æ‹…å½“äº‹ä»¶ç›‘å¬çš„èŒåŠ¡ã€‚äº‹ä»¶ä»£ç†çš„åŸç†æ˜¯DOMå…ƒç´ çš„äº‹ä»¶å†’æ³¡ã€‚ä½¿ç”¨äº‹ä»¶ä»£ç†çš„å¥½å¤„æ˜¯å¯ä»¥æé«˜æ€§èƒ½ã€‚ attributeå’Œpropertyçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿattributeæ˜¯domå…ƒç´ åœ¨æ–‡æ¡£ä¸­ä½œä¸ºhtmlæ ‡ç­¾æ‹¥æœ‰çš„å±æ€§ï¼› propertyå°±æ˜¯domå…ƒç´ åœ¨jsä¸­ä½œä¸ºå¯¹è±¡æ‹¥æœ‰çš„å±æ€§ã€‚ æ‰€ä»¥ï¼š å¯¹äºhtmlçš„æ ‡å‡†å±æ€§æ¥è¯´ï¼Œattributeå’Œpropertyæ˜¯åŒæ­¥çš„ï¼Œæ˜¯ä¼šè‡ªåŠ¨æ›´æ–°çš„ï¼Œ ä½†æ˜¯å¯¹äºè‡ªå®šä¹‰çš„å±æ€§æ¥è¯´ï¼Œä»–ä»¬æ˜¯ä¸åŒæ­¥çš„ï¼Œ è¯´è¯´ç½‘ç»œåˆ†å±‚é‡Œä¸ƒå±‚æ¨¡å‹æ˜¯å“ªä¸ƒå±‚ åº”ç”¨å±‚ï¼šåº”ç”¨å±‚ã€è¡¨ç¤ºå±‚ã€ä¼šè¯å±‚ï¼ˆä»ä¸Šå¾€ä¸‹ï¼‰ï¼ˆHTTPã€FTPã€SMTPã€DNSï¼‰ ä¼ è¾“å±‚ï¼ˆTCPå’ŒUDPï¼‰ ç½‘ç»œå±‚ï¼ˆIPï¼‰ ç‰©ç†å’Œæ•°æ®é“¾è·¯å±‚ï¼ˆä»¥å¤ªç½‘ï¼‰ æ¯ä¸€å±‚çš„ä½œç”¨å¦‚ä¸‹ï¼š ç‰©ç†å±‚ï¼šé€šè¿‡åª’ä»‹ä¼ è¾“æ¯”ç‰¹,ç¡®å®šæœºæ¢°åŠç”µæ°”è§„èŒƒï¼ˆæ¯”ç‰¹Bitï¼‰ æ•°æ®é“¾è·¯å±‚ï¼šå°†æ¯”ç‰¹ç»„è£…æˆå¸§å’Œç‚¹åˆ°ç‚¹çš„ä¼ é€’ï¼ˆå¸§Frameï¼‰ ç½‘ç»œå±‚ï¼šè´Ÿè´£æ•°æ®åŒ…ä»æºåˆ°å®¿çš„ä¼ é€’å’Œç½‘é™…äº’è¿ï¼ˆåŒ…PackeTï¼‰ ä¼ è¾“å±‚ï¼šæä¾›ç«¯åˆ°ç«¯çš„å¯é æŠ¥æ–‡ä¼ é€’å’Œé”™è¯¯æ¢å¤ï¼ˆæ®µSegmentï¼‰ ä¼šè¯å±‚ï¼šå»ºç«‹ã€ç®¡ç†å’Œç»ˆæ­¢ä¼šè¯ï¼ˆä¼šè¯åè®®æ•°æ®å•å…ƒSPDUï¼‰ è¡¨ç¤ºå±‚ï¼šå¯¹æ•°æ®è¿›è¡Œç¿»è¯‘ã€åŠ å¯†å’Œå‹ç¼©ï¼ˆè¡¨ç¤ºåè®®æ•°æ®å•å…ƒPPDUï¼‰ åº”ç”¨å±‚ï¼šå…è®¸è®¿é—®OSIç¯å¢ƒçš„æ‰‹æ®µï¼ˆåº”ç”¨åè®®æ•°æ®å•å…ƒAPDUï¼‰ å„ç§åè®® ICMPåè®®ï¼š å› ç‰¹ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ã€‚å®ƒæ˜¯TCP/IPåè®®æ—çš„ä¸€ä¸ªå­åè®®ï¼Œç”¨äºåœ¨IPä¸»æœºã€è·¯ç”±å™¨ä¹‹é—´ä¼ é€’æ§åˆ¶æ¶ˆæ¯ã€‚TFTPåè®®ï¼š æ˜¯TCP/IPåè®®æ—ä¸­çš„ä¸€ä¸ªç”¨æ¥åœ¨å®¢æˆ·æœºä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œç®€å•æ–‡ä»¶ä¼ è¾“çš„åè®®ï¼Œæä¾›ä¸å¤æ‚ã€å¼€é”€ä¸å¤§çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ã€‚HTTPåè®®ï¼š è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯ä¸€ä¸ªå±äºåº”ç”¨å±‚çš„é¢å‘å¯¹è±¡çš„åè®®ï¼Œç”±äºå…¶ç®€æ·ã€å¿«é€Ÿçš„æ–¹å¼ï¼Œé€‚ç”¨äºåˆ†å¸ƒå¼è¶…åª’ä½“ä¿¡æ¯ç³»ç»Ÿã€‚DHCPåè®®ï¼š åŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œæ˜¯ä¸€ç§è®©ç³»ç»Ÿå¾—ä»¥è¿æ¥åˆ°ç½‘ç»œä¸Šï¼Œå¹¶è·å–æ‰€éœ€è¦çš„é…ç½®å‚æ•°æ‰‹æ®µã€‚ è¯´è¯´mongoDBå’ŒMySQLçš„åŒºåˆ«MySQLæ˜¯ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ï¼ŒMongoDBåˆ™æ˜¯éå…³ç³»å‹æ•°æ®åº“ mongodbä»¥BSONç»“æ„ï¼ˆäºŒè¿›åˆ¶ï¼‰è¿›è¡Œå­˜å‚¨ï¼Œå¯¹æµ·é‡æ•°æ®å­˜å‚¨æœ‰ç€å¾ˆæ˜æ˜¾çš„ä¼˜åŠ¿ã€‚ å¯¹æ¯”ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“,NoSQLæœ‰ç€éå¸¸æ˜¾è‘—çš„æ€§èƒ½å’Œæ‰©å±•æ€§ä¼˜åŠ¿ï¼Œä¸å…³ç³»å‹æ•°æ®åº“ç›¸æ¯”ï¼ŒMongoDBçš„ä¼˜ç‚¹æœ‰ï¼šâ‘ å¼±ä¸€è‡´æ€§ï¼ˆæœ€ç»ˆä¸€è‡´ï¼‰ï¼Œæ›´èƒ½ä¿è¯ç”¨æˆ·çš„è®¿é—®é€Ÿåº¦ï¼šâ‘¡æ–‡æ¡£ç»“æ„çš„å­˜å‚¨æ–¹å¼ï¼Œèƒ½å¤Ÿæ›´ä¾¿æ·çš„è·å–æ•°æ®ã€‚ 304ç¼“å­˜çš„åŸç†æœåŠ¡å™¨é¦–å…ˆäº§ç”ŸETagï¼ŒæœåŠ¡å™¨å¯åœ¨ç¨åä½¿ç”¨å®ƒæ¥åˆ¤æ–­é¡µé¢æ˜¯å¦å·²ç»è¢«ä¿®æ”¹ã€‚æœ¬è´¨ä¸Šï¼Œå®¢æˆ·ç«¯é€šè¿‡å°†è¯¥è®°å·ä¼ å›æœåŠ¡å™¨è¦æ±‚æœåŠ¡å™¨éªŒè¯å…¶ï¼ˆå®¢æˆ·ç«¯ï¼‰ç¼“å­˜ã€‚ 304æ˜¯HTTPçŠ¶æ€ç ï¼ŒæœåŠ¡å™¨ç”¨æ¥æ ‡è¯†è¿™ä¸ªæ–‡ä»¶æ²¡ä¿®æ”¹ï¼Œä¸è¿”å›å†…å®¹ï¼Œæµè§ˆå™¨åœ¨æ¥æ”¶åˆ°ä¸ªçŠ¶æ€ç åï¼Œä¼šä½¿ç”¨æµè§ˆå™¨å·²ç¼“å­˜çš„æ–‡ä»¶ å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªé¡µé¢ï¼ˆAï¼‰ã€‚ æœåŠ¡å™¨è¿”å›é¡µé¢Aï¼Œå¹¶åœ¨ç»™AåŠ ä¸Šä¸€ä¸ªETagã€‚ å®¢æˆ·ç«¯å±•ç°è¯¥é¡µé¢ï¼Œå¹¶å°†é¡µé¢è¿åŒETagä¸€èµ·ç¼“å­˜ã€‚ å®¢æˆ·å†æ¬¡è¯·æ±‚é¡µé¢Aï¼Œå¹¶å°†ä¸Šæ¬¡è¯·æ±‚æ—¶æœåŠ¡å™¨è¿”å›çš„ETagä¸€èµ·ä¼ é€’ç»™æœåŠ¡å™¨ã€‚ æœåŠ¡å™¨æ£€æŸ¥è¯¥ETagï¼Œå¹¶åˆ¤æ–­å‡ºè¯¥é¡µé¢è‡ªä¸Šæ¬¡å®¢æˆ·ç«¯è¯·æ±‚ä¹‹åè¿˜æœªè¢«ä¿®æ”¹ï¼Œç›´æ¥è¿”å›å“åº”304ï¼ˆæœªä¿®æ”¹â€”â€”Not Modifiedï¼‰å’Œä¸€ä¸ªç©ºçš„å“åº”ä½“ã€‚ ä»€ä¹ˆæ ·çš„å‰ç«¯ä»£ç æ˜¯å¥½é«˜å¤ç”¨ä½è€¦åˆï¼Œè¿™æ ·æ–‡ä»¶å°ï¼Œå¥½ç»´æŠ¤ï¼Œè€Œä¸”å¥½æ‰©å±•ã€‚ æœ¬æ–‡æ—¨åœ¨åŠ æ·±å¯¹å‰ç«¯çŸ¥è¯†ç‚¹çš„ç†è§£ï¼Œèµ„æ–™æ¥æºäºç½‘ç»œ,æ„Ÿè°¢æ¯ä¸€ä¸ªè´¡çŒ®è€…ã€‚ æ›´å¤šğŸ‘‰å‰ç«¯å¼€å‘é¢è¯•é¢˜é›†é”¦ğŸ‘‰GitHubï¼šhttps://github.com/microzz","tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"https://microzz.com/tags/å‰ç«¯/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://microzz.com/tags/é¢è¯•/"},{"name":"æ±‚èŒ","slug":"æ±‚èŒ","permalink":"https://microzz.com/tags/æ±‚èŒ/"}]},{"title":"JavaScriptä¸­æ‰‹åŠ¨æ¨¡æ‹Ÿåˆ›å»ºIteratorsè¿­ä»£å™¨(éå†å™¨)","date":"2017-01-29T12:58:35.000Z","path":"2017/01/29/iterators-test/","text":"&nbsp;&nbsp;&nbsp;Generatorå‡½æ•°æ˜¯ES6æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œå…·ä½“è¯·çœ‹Generatorå‡½æ•°æ•™ç¨‹ã€‚Generatorå‡½æ•°æœ‰å¤šç§ç†è§£è§’åº¦ã€‚ä»è¯­æ³•ä¸Šï¼Œé¦–å…ˆå¯ä»¥æŠŠå®ƒç†è§£æˆï¼ŒGeneratorå‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ã€‚&nbsp;&nbsp;&nbsp;æ‰§è¡ŒGeneratorå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒGeneratorå‡½æ•°é™¤äº†çŠ¶æ€æœºï¼Œè¿˜æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°ã€‚è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œå¯ä»¥ä¾æ¬¡éå†Generatorå‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€ã€‚ JavaScriptä¸­å¦‚ä½•æ‰‹åŠ¨æ¨¡æ‹Ÿåˆ›å»ºIteratorsè¿­ä»£å™¨(éå†å™¨)é€šè¿‡ä»£ç å®ç°ï¼Œå…·ä½“å¦‚ä¸‹/** * JavaScriptä¸­æ‰‹åŠ¨æ¨¡æ‹Ÿåˆ›å»ºIteratorsè¿­ä»£å™¨ */ function Iterators(args) { let i = 0; return { next() { let done = (i &gt;= args.length - 1); let value = args[i++]; return { value: value, done: done } } } } //è¿›è¡Œæµ‹è¯•éªŒè¯ç»“æœ let test = Iterators([&#39;microzz&#39;, &#39;æ¶µæœˆå¤©&#39;, &#39;ITæŠ€æœ¯åˆ†äº«&#39;]); console.log(test.next()); // { value: &#39;microzz&#39;, done: false } console.log(test.next()); // { value: &#39;æ¶µæœˆå¤©&#39;, done: false } console.log(test.next()); // { value: &#39;ITæŠ€æœ¯åˆ†äº«&#39;, done: true } console.log(test.next()); // { value: undefined, done: true }","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Iterators","slug":"Iterators","permalink":"https://microzz.com/tags/Iterators/"}]},{"title":"JavaScriptè‡ªå®šä¹‰æ–¹æ³•å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´","date":"2017-01-26T11:11:02.000Z","path":"2017/01/26/deep-copy/","text":"JavaScriptè‡ªå®šä¹‰æ–¹æ³•å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´ES6ä¸­çš„Object.assignæ–¹æ³•&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ES6ä¸­æ–°å¢Object.assignæ–¹æ³•ç”¨äºå¯¹è±¡çš„åˆå¹¶ï¼Œå°†æºå¯¹è±¡ï¼ˆsourceï¼‰çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆtargetï¼‰ã€‚ â—ï¸æ³¨æ„ç‚¹: &nbsp;&nbsp;&nbsp;&nbsp;Object.assignæ–¹æ³•å®è¡Œçš„æ˜¯æµ…æ‹·è´ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæºå¯¹è±¡æŸä¸ªå±æ€§çš„å€¼æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆç›®æ ‡å¯¹è±¡æ‹·è´å¾—åˆ°çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚ å®ç°æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è‡ªå·±åŠ¨æ‰‹æ¥æ‰‹å·¥å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´æ–¹æ³•ï¼Œå…·ä½“å®ç°æœ‰å¦‚ä¸‹ä¸¤ç§æ–¹æ³•ï¼š æ–¹æ³•1âƒ£ï¸/** * è‡ªå®šä¹‰æ–¹æ³•å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´ */ function deepCopy(obj) { let copy = {}; // å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ç›´æ¥èµ‹å€¼ï¼Œ // å¦‚æœæ˜¯æ•°ç»„åˆ™æ‹·è´ï¼Œ // å…¶ä»–å¯¹è±¡åˆ™é€’å½’è°ƒç”¨deepCopyæ–¹æ³• Object.keys(obj).forEach(key =&gt; { if (obj[key] instanceof Array) { copy[key] = Array.from(obj[key]); } else if (typeof obj[key] === &#39;object&#39;) { copy[key] = deepCopy(obj[key]); } else { copy[key] = obj[key]; } }) return copy; } æ–¹æ³•2âƒ£ï¸function deepCopy(obj) { return JSON.parse(JSON.stringify(obj)); } éªŒè¯&nbsp;&nbsp;ä»¥ä¸Šé€šè¿‡ä¸¤ç§æ–¹æ³•å®ç°äº†å¯¹è±¡çš„æ·±æ‹·è´ï¼Œä¸‹é¢é€šè¿‡æ•°æ®è¿›è¡Œç®€å•éªŒè¯: //è‡ªå®šä¹‰ä¸€ä¸ªå¤æ‚æ•°æ®å¯¹è±¡ let data = { name: &#39;Zhao&#39;, age: 22, url: &#39;https://microzz.com&#39;, scores:{ math: 66, java: 88, test: [1, 2, 3] }, skills: [&#39;Node.js&#39;, &#39;ReactJS&#39;, &#39;ES6&#39;], say() { console.log(`My name is ${this.name}`) } } //è¿›è¡Œæ·±æ‹·è´ï¼ŒæŠŠæ•°æ®ä¿å­˜åœ¨copyData let copyData = deepCopy(data); //å¯¹copyDataè¿›è¡Œä¿®æ”¹ï¼Œçœ‹æ˜¯å¦å¯¹åŸæ•°æ®æœ‰å½±å“ copyData.name = &#39;Hui&#39;; copyData.scores.math = 99; copyData.scores.test[1] = 100; copyData.skills[2] = &#39;ES5&#39;; copyData.say = function () { console.log(`Copy: My name is ${this.name}`); } //æ‰“å°è¾“å‡ºæŸ¥çœ‹ç»“æœè¿›è¡ŒéªŒè¯ console.log(data); /* { name: &#39;Zhao&#39;, age: 22, url: &#39;http://microzz.com&#39;, scores: { math: 66, java: 88, test: [ 1, 2, 3 ] }, skills: [ &#39;Node.js&#39;, &#39;ReactJS&#39;, &#39;ES6&#39; ], say: [Function: say] } */ console.log(copyData); /* { name: &#39;Hui&#39;, age: 22, url: &#39;http://microzz.com&#39;, scores: { math: 99, java: 88, test: [ 1, 100, 3 ] }, skills: [ &#39;Node.js&#39;, &#39;ReactJS&#39;, &#39;ES5&#39; ], say: [Function] } */ data.say(); // My name is Zhao copyData.say(); // Copy: My name is Hui &nbsp;&nbsp;&nbsp;&nbsp;ä¸¤ç§æ–¹æ³•çš„ç»“æœå‡ä¸€è‡´ï¼Œå®ç°äº†å¯¹è±¡çš„æ·±æ‹·è´ï¼Œä½†æ˜¯ç¬¬äºŒç§æ–¹æ³•é€šè¿‡åŸç”Ÿçš„JSON.parseå’ŒJSON.stringifyæ–¹æ³•æ›´ä¸ºç®€å•æ˜“æ‡‚ã€‚","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"æ·±æ‹·è´","slug":"æ·±æ‹·è´","permalink":"https://microzz.com/tags/æ·±æ‹·è´/"}]},{"title":"ES6ä¸­åµŒå¥—çš„å¯¹è±¡å¦‚ä½•è§£æ„(Destructuring)","date":"2017-01-24T11:17:51.000Z","path":"2017/01/24/destructuringTest/","text":"ES6ä¸­åµŒå¥—çš„å¯¹è±¡å¦‚ä½•è§£æ„ å¯¹äºæ™®é€šå¯¹è±¡çš„è§£æ„å¤§å®¶åº”è¯¥æ²¡ä»€ä¹ˆé—®é¢˜(è¯¦ç»†å­¦ä¹ ES6çš„è§£æ„çŸ¥è¯†è¯·çœ‹è¿™é‡ŒğŸ‘‰ å˜é‡çš„è§£æ„èµ‹å€¼(Destructuring) )ï¼Œä½†æ˜¯é‡åˆ°å¤æ‚å¯¹è±¡ç»“æ„çš„åº”è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿå¯ä»¥çœ‹ä¸‹é¢çš„ç¤ºä¾‹ã€‚ //å£°æ˜ä¸€ä¸ªå¯¹è±¡ä¿å­˜ä¿¡æ¯ let jsonData = { name: &#39;Zhao&#39;, age: 22, score: { Chinese: 77, math: 99 } } //å¯¹åµŒå¥—ç»“æ„çš„å¯¹è±¡è¿›è¡Œè§£æ„1 let {name, age, score:{Chinese, math}} = jsonData; console.log(`name is ${name}`); //name is Zhao console.log(`age is ${age}`); //age is 22 console.log(`Chinese score is ${Chinese}`); //Chinese score is 77 console.log(`math score is ${math}`); //math score is 99 //å¦å¤–ä¸€ä¸ªä¾‹å­ğŸ˜„ let obj = { p: [ &#39;Hello&#39;, { y: &#39;World&#39; } ] }; //å¯¹åµŒå¥—ç»“æ„çš„å¯¹è±¡è¿›è¡Œè§£æ„2 let { p: [x, { y }] } = obj; console.log(`x is ${x}`); // x is Hello console.log(`y is ${y}`); // y is World","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Destructuring","slug":"Destructuring","permalink":"https://microzz.com/tags/Destructuring/"}]},{"title":"JavaScripté€šè¿‡åŸå‹è®¾è®¡ä¸€ä¸ªäº‹ä»¶å¯¹è±¡","date":"2017-01-21T14:13:02.000Z","path":"2017/01/21/listener-event/","text":"JavaScripté€šè¿‡åŸå‹è®¾è®¡ä¸€ä¸ªäº‹ä»¶å¯¹è±¡å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š æ·»åŠ ç›‘å¬è€… ç§»é™¤ç›‘å¬è€… æ¸…ç©ºç›‘å¬è€… å‘èµ·äº‹ä»¶ä¿¡å· è®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä¸€ä¸ªå®ä¾‹æˆå‘˜listenersï¼Œç”¨äºè®°å½•æ‰€æœ‰çš„ç›‘å¬è€…ä¸ºå¯¹è±¡çš„åŸå‹å¢åŠ ï¼Œæ–°å¢ã€åˆ é™¤ã€æ¸…ç©ºå’Œæ‰§è¡Œå››ä¸ªæˆå‘˜å…·ä½“ä»£ç å¯ä»¥å‚è§ä¸‹é¢ç¤ºä¾‹ ä»£ç å®ç°function myEvent(){ this.listeners = []; //ç›‘å¬è€…åˆ—è¡¨ } //æ·»åŠ ä¸€ä¸ªç›‘å¬è€… myEvent.prototype.addListener = function(fn){ this.listeners.push(fn); }; //é™¤ç§»ä¸€ä¸ªç›‘å¬è€… myEvent.prototype.removeListener = function(fn){ var index = this.listeners.indexOf(fn); this.listeners.splice(index,1); }; //æ¸…é™¤æ‰€æœ‰ç›‘å¬è€… myEvent.prototype.clearListeners = function(){ this.listeners = []; }; //å‘å‡ºæ‰§è¡Œä¿¡å·ï¼Œå¹¶å‘Šä¹‹æ‰€æœ‰ç›‘å¬è€… myEvent.prototype.raise = function(e){ var l = this.listeners.length; for(var i = 0; i &lt; l; i++){ this.listeners[i](e); //æ‰§è¡Œæ‰€æœ‰ç›‘å¬æ–¹æ³• } }; var me = new myEvent(); //äº‹ä»¶fun1 function fun1(e) { console.log(&#39;fun1: &#39; + e); } //äº‹ä»¶fun2 function fun2(e) { console.log(&#39;fun2: &#39; + e); } //è°ƒç”¨ç›¸å…³æ–¹æ³•è¿›è¡Œæµ‹è¯• me.addListener(fun1); me.addListener(fun2); me.removeListener(fun1) //me.clearListeners(); me.raise(&quot;a&quot;);","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"äº‹ä»¶","slug":"äº‹ä»¶","permalink":"https://microzz.com/tags/äº‹ä»¶/"},{"name":"event","slug":"event","permalink":"https://microzz.com/tags/event/"},{"name":"åŸå‹","slug":"åŸå‹","permalink":"https://microzz.com/tags/åŸå‹/"}]},{"title":"ES6 Module","date":"2017-01-18T09:01:23.000Z","path":"2017/01/18/module/","text":"Moduleå†å²ä¸Šï¼ŒJavaScript ä¸€ç›´æ²¡æœ‰æ¨¡å—ï¼ˆmoduleï¼‰ä½“ç³»ï¼Œæ— æ³•å°†ä¸€ä¸ªå¤§ç¨‹åºæ‹†åˆ†æˆäº’ç›¸ä¾èµ–çš„å°æ–‡ä»¶ï¼Œå†ç”¨ç®€å•çš„æ–¹æ³•æ‹¼è£…èµ·æ¥ã€‚å…¶ä»–è¯­è¨€éƒ½æœ‰è¿™é¡¹åŠŸèƒ½ï¼Œæ¯”å¦‚ Ruby çš„requireã€Python çš„importï¼Œç”šè‡³å°±è¿ CSS éƒ½æœ‰@importï¼Œä½†æ˜¯ JavaScript ä»»ä½•è¿™æ–¹é¢çš„æ”¯æŒéƒ½æ²¡æœ‰ï¼Œè¿™å¯¹å¼€å‘å¤§å‹çš„ã€å¤æ‚çš„é¡¹ç›®å½¢æˆäº†å·¨å¤§éšœç¢ã€‚ åœ¨ ES6 ä¹‹å‰ï¼Œç¤¾åŒºåˆ¶å®šäº†ä¸€äº›æ¨¡å—åŠ è½½æ–¹æ¡ˆï¼Œæœ€ä¸»è¦çš„æœ‰ CommonJS å’Œ AMD ä¸¤ç§ã€‚å‰è€…ç”¨äºæœåŠ¡å™¨ï¼Œåè€…ç”¨äºæµè§ˆå™¨ã€‚ES6 åœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ä¸Šï¼Œå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œè€Œä¸”å®ç°å¾—ç›¸å½“ç®€å•ï¼Œå®Œå…¨å¯ä»¥å–ä»£ç°æœ‰çš„ CommonJS å’Œ AMD è§„èŒƒï¼Œæˆä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šç”¨çš„æ¨¡å—è§£å†³æ–¹æ¡ˆã€‚ ES6 æ¨¡å—çš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯å°½é‡çš„é™æ€åŒ–ï¼Œä½¿å¾—ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡ã€‚CommonJS å’Œ AMD æ¨¡å—ï¼Œéƒ½åªèƒ½åœ¨è¿è¡Œæ—¶ç¡®å®šè¿™äº›ä¸œè¥¿ã€‚æ¯”å¦‚ï¼ŒCommonJS æ¨¡å—å°±æ˜¯å¯¹è±¡ï¼Œè¾“å…¥æ—¶å¿…é¡»æŸ¥æ‰¾å¯¹è±¡å±æ€§ã€‚ // CommonJSæ¨¡å— let { stat, exists, readFile } = require(&#39;fs&#39;); // ç­‰åŒäº let _fs = require(&#39;fs&#39;); let stat = _fs.stat, exists = _fs.exists, readfile = _fs.readfile; ä¸Šé¢ä»£ç çš„å®è´¨æ˜¯æ•´ä½“åŠ è½½fsæ¨¡å—ï¼ˆå³åŠ è½½fsçš„æ‰€æœ‰æ–¹æ³•ï¼‰ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼ˆ_fsï¼‰ï¼Œç„¶åå†ä»è¿™ä¸ªå¯¹è±¡ä¸Šé¢è¯»å–3ä¸ªæ–¹æ³•ã€‚è¿™ç§åŠ è½½ç§°ä¸ºâ€œè¿è¡Œæ—¶åŠ è½½â€ï¼Œå› ä¸ºåªæœ‰è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œå¯¼è‡´å®Œå…¨æ²¡åŠæ³•åœ¨ç¼–è¯‘æ—¶åšâ€œé™æ€ä¼˜åŒ–â€ã€‚ ES6 æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡exportå‘½ä»¤æ˜¾å¼æŒ‡å®šè¾“å‡ºçš„ä»£ç ï¼Œå†é€šè¿‡importå‘½ä»¤è¾“å…¥ã€‚ // ES6æ¨¡å— import { stat, exists, readFile } from &#39;fs&#39;; ä¸Šé¢ä»£ç çš„å®è´¨æ˜¯ä»fsæ¨¡å—åŠ è½½3ä¸ªæ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•ä¸åŠ è½½ã€‚è¿™ç§åŠ è½½ç§°ä¸ºâ€œç¼–è¯‘æ—¶åŠ è½½â€æˆ–è€…é™æ€åŠ è½½ï¼Œå³ ES6 å¯ä»¥åœ¨ç¼–è¯‘æ—¶å°±å®Œæˆæ¨¡å—åŠ è½½ï¼Œæ•ˆç‡è¦æ¯” CommonJS æ¨¡å—çš„åŠ è½½æ–¹å¼é«˜ã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†æ²¡æ³•å¼•ç”¨ ES6 æ¨¡å—æœ¬èº«ï¼Œå› ä¸ºå®ƒä¸æ˜¯å¯¹è±¡ã€‚ ç”±äº ES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶åŠ è½½ï¼Œä½¿å¾—é™æ€åˆ†ææˆä¸ºå¯èƒ½ã€‚æœ‰äº†å®ƒï¼Œå°±èƒ½è¿›ä¸€æ­¥æ‹“å®½ JavaScript çš„è¯­æ³•ï¼Œæ¯”å¦‚å¼•å…¥å®ï¼ˆmacroï¼‰å’Œç±»å‹æ£€éªŒï¼ˆtype systemï¼‰è¿™äº›åªèƒ½é é™æ€åˆ†æå®ç°çš„åŠŸèƒ½ã€‚ é™¤äº†é™æ€åŠ è½½å¸¦æ¥çš„å„ç§å¥½å¤„ï¼ŒES6 æ¨¡å—è¿˜æœ‰ä»¥ä¸‹å¥½å¤„ã€‚ ä¸å†éœ€è¦UMDæ¨¡å—æ ¼å¼äº†ï¼Œå°†æ¥æœåŠ¡å™¨å’Œæµè§ˆå™¨éƒ½ä¼šæ”¯æŒ ES6 æ¨¡å—æ ¼å¼ã€‚ç›®å‰ï¼Œé€šè¿‡å„ç§å·¥å…·åº“ï¼Œå…¶å®å·²ç»åšåˆ°äº†è¿™ä¸€ç‚¹ã€‚ å°†æ¥æµè§ˆå™¨çš„æ–° API å°±èƒ½ç”¨æ¨¡å—æ ¼å¼æä¾›ï¼Œä¸å†å¿…é¡»åšæˆå…¨å±€å˜é‡æˆ–è€…navigatorå¯¹è±¡çš„å±æ€§ã€‚ ä¸å†éœ€è¦å¯¹è±¡ä½œä¸ºå‘½åç©ºé—´ï¼ˆæ¯”å¦‚Mathå¯¹è±¡ï¼‰ï¼Œæœªæ¥è¿™äº›åŠŸèƒ½å¯ä»¥é€šè¿‡æ¨¡å—æä¾›ã€‚ ä¸¥æ ¼æ¨¡å¼ES6 çš„æ¨¡å—è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰åœ¨æ¨¡å—å¤´éƒ¨åŠ ä¸Š&quot;use strict&quot;;ã€‚ ä¸¥æ ¼æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹é™åˆ¶ã€‚ å˜é‡å¿…é¡»å£°æ˜åå†ä½¿ç”¨ å‡½æ•°çš„å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§ï¼Œå¦åˆ™æŠ¥é”™ ä¸èƒ½ä½¿ç”¨withè¯­å¥ ä¸èƒ½å¯¹åªè¯»å±æ€§èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™ ä¸èƒ½ä½¿ç”¨å‰ç¼€0è¡¨ç¤ºå…«è¿›åˆ¶æ•°ï¼Œå¦åˆ™æŠ¥é”™ ä¸èƒ½åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™ ä¸èƒ½åˆ é™¤å˜é‡delete propï¼Œä¼šæŠ¥é”™ï¼Œåªèƒ½åˆ é™¤å±æ€§delete global[prop] evalä¸ä¼šåœ¨å®ƒçš„å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡ evalå’Œargumentsä¸èƒ½è¢«é‡æ–°èµ‹å€¼ argumentsä¸ä¼šè‡ªåŠ¨åæ˜ å‡½æ•°å‚æ•°çš„å˜åŒ– ä¸èƒ½ä½¿ç”¨arguments.callee ä¸èƒ½ä½¿ç”¨arguments.caller ç¦æ­¢thisæŒ‡å‘å…¨å±€å¯¹è±¡ ä¸èƒ½ä½¿ç”¨fn.callerå’Œfn.argumentsè·å–å‡½æ•°è°ƒç”¨çš„å †æ ˆ å¢åŠ äº†ä¿ç•™å­—ï¼ˆæ¯”å¦‚protectedã€staticå’Œinterfaceï¼‰ ä¸Šé¢è¿™äº›é™åˆ¶ï¼Œæ¨¡å—éƒ½å¿…é¡»éµå®ˆã€‚ç”±äºä¸¥æ ¼æ¨¡å¼æ˜¯ ES5 å¼•å…¥çš„ï¼Œä¸å±äº ES6ï¼Œæ‰€ä»¥è¯·å‚é˜…ç›¸å…³ ES5 ä¹¦ç±ï¼Œæœ¬ä¹¦ä¸å†è¯¦ç»†ä»‹ç»äº†ã€‚ export å‘½ä»¤æ¨¡å—åŠŸèƒ½ä¸»è¦ç”±ä¸¤ä¸ªå‘½ä»¤æ„æˆï¼šexportå’Œimportã€‚exportå‘½ä»¤ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œimportå‘½ä»¤ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½ã€‚ ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶å†…éƒ¨çš„æ‰€æœ‰å˜é‡ï¼Œå¤–éƒ¨æ— æ³•è·å–ã€‚å¦‚æœä½ å¸Œæœ›å¤–éƒ¨èƒ½å¤Ÿè¯»å–æ¨¡å—å†…éƒ¨çš„æŸä¸ªå˜é‡ï¼Œå°±å¿…é¡»ä½¿ç”¨exportå…³é”®å­—è¾“å‡ºè¯¥å˜é‡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª JS æ–‡ä»¶ï¼Œé‡Œé¢ä½¿ç”¨exportå‘½ä»¤è¾“å‡ºå˜é‡ã€‚ // profile.js export var firstName = &#39;Michael&#39;; export var lastName = &#39;Jackson&#39;; export var year = 1958; ä¸Šé¢ä»£ç æ˜¯profile.jsæ–‡ä»¶ï¼Œä¿å­˜äº†ç”¨æˆ·ä¿¡æ¯ã€‚ES6å°†å…¶è§†ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œé‡Œé¢ç”¨exportå‘½ä»¤å¯¹å¤–éƒ¨è¾“å‡ºäº†ä¸‰ä¸ªå˜é‡ã€‚ exportçš„å†™æ³•ï¼Œé™¤äº†åƒä¸Šé¢è¿™æ ·ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§ã€‚ // profile.js var firstName = &#39;Michael&#39;; var lastName = &#39;Jackson&#39;; var year = 1958; export {firstName, lastName, year}; ä¸Šé¢ä»£ç åœ¨exportå‘½ä»¤åé¢ï¼Œä½¿ç”¨å¤§æ‹¬å·æŒ‡å®šæ‰€è¦è¾“å‡ºçš„ä¸€ç»„å˜é‡ã€‚å®ƒä¸å‰ä¸€ç§å†™æ³•ï¼ˆç›´æ¥æ”¾ç½®åœ¨varè¯­å¥å‰ï¼‰æ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯åº”è¯¥ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨è¿™ç§å†™æ³•ã€‚å› ä¸ºè¿™æ ·å°±å¯ä»¥åœ¨è„šæœ¬å°¾éƒ¨ï¼Œä¸€çœ¼çœ‹æ¸…æ¥šè¾“å‡ºäº†å“ªäº›å˜é‡ã€‚ exportå‘½ä»¤é™¤äº†è¾“å‡ºå˜é‡ï¼Œè¿˜å¯ä»¥è¾“å‡ºå‡½æ•°æˆ–ç±»ï¼ˆclassï¼‰ã€‚ export function multiply(x, y) { return x * y; }; ä¸Šé¢ä»£ç å¯¹å¤–è¾“å‡ºä¸€ä¸ªå‡½æ•°multiplyã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œexportè¾“å‡ºçš„å˜é‡å°±æ˜¯æœ¬æ¥çš„åå­—ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨aså…³é”®å­—é‡å‘½åã€‚ function v1() { ... } function v2() { ... } export { v1 as streamV1, v2 as streamV2, v2 as streamLatestVersion }; ä¸Šé¢ä»£ç ä½¿ç”¨aså…³é”®å­—ï¼Œé‡å‘½åäº†å‡½æ•°v1å’Œv2çš„å¯¹å¤–æ¥å£ã€‚é‡å‘½ååï¼Œv2å¯ä»¥ç”¨ä¸åŒçš„åå­—è¾“å‡ºä¸¤æ¬¡ã€‚ éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œexportå‘½ä»¤è§„å®šçš„æ˜¯å¯¹å¤–çš„æ¥å£ï¼Œå¿…é¡»ä¸æ¨¡å—å†…éƒ¨çš„å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚ // æŠ¥é”™ export 1; // æŠ¥é”™ var m = 1; export m; ä¸Šé¢ä¸¤ç§å†™æ³•éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ²¡æœ‰æä¾›å¯¹å¤–çš„æ¥å£ã€‚ç¬¬ä¸€ç§å†™æ³•ç›´æ¥è¾“å‡º1ï¼Œç¬¬äºŒç§å†™æ³•é€šè¿‡å˜é‡mï¼Œè¿˜æ˜¯ç›´æ¥è¾“å‡º1ã€‚1åªæ˜¯ä¸€ä¸ªå€¼ï¼Œä¸æ˜¯æ¥å£ã€‚æ­£ç¡®çš„å†™æ³•æ˜¯ä¸‹é¢è¿™æ ·ã€‚ // å†™æ³•ä¸€ export var m = 1; // å†™æ³•äºŒ var m = 1; export {m}; // å†™æ³•ä¸‰ var n = 1; export {n as m}; ä¸Šé¢ä¸‰ç§å†™æ³•éƒ½æ˜¯æ­£ç¡®çš„ï¼Œè§„å®šäº†å¯¹å¤–çš„æ¥å£mã€‚å…¶ä»–è„šæœ¬å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥å£ï¼Œå–åˆ°å€¼1ã€‚å®ƒä»¬çš„å®è´¨æ˜¯ï¼Œåœ¨æ¥å£åä¸æ¨¡å—å†…éƒ¨å˜é‡ä¹‹é—´ï¼Œå»ºç«‹äº†ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚ åŒæ ·çš„ï¼Œfunctionå’Œclassçš„è¾“å‡ºï¼Œä¹Ÿå¿…é¡»éµå®ˆè¿™æ ·çš„å†™æ³•ã€‚ // æŠ¥é”™ function f() {} export f; // æ­£ç¡® export function f() {}; // æ­£ç¡® function f() {} export {f}; å¦å¤–ï¼Œexportè¯­å¥è¾“å‡ºçš„æ¥å£ï¼Œä¸å…¶å¯¹åº”çš„å€¼æ˜¯åŠ¨æ€ç»‘å®šå…³ç³»ï¼Œå³é€šè¿‡è¯¥æ¥å£ï¼Œå¯ä»¥å–åˆ°æ¨¡å—å†…éƒ¨å®æ—¶çš„å€¼ã€‚ export var foo = &#39;bar&#39;; setTimeout(() =&gt; foo = &#39;baz&#39;, 500); ä¸Šé¢ä»£ç è¾“å‡ºå˜é‡fooï¼Œå€¼ä¸ºbarï¼Œ500æ¯«ç§’ä¹‹åå˜æˆbazã€‚ è¿™ä¸€ç‚¹ä¸CommonJSè§„èŒƒå®Œå…¨ä¸åŒã€‚CommonJSæ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„ç¼“å­˜ï¼Œä¸å­˜åœ¨åŠ¨æ€æ›´æ–°ï¼Œè¯¦è§ä¸‹æ–‡ã€ŠES6æ¨¡å—åŠ è½½çš„å®è´¨ã€‹ä¸€èŠ‚ã€‚ æœ€åï¼Œexportå‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äºæ¨¡å—é¡¶å±‚å°±å¯ä»¥ã€‚å¦‚æœå¤„äºå—çº§ä½œç”¨åŸŸå†…ï¼Œå°±ä¼šæŠ¥é”™ï¼Œä¸‹ä¸€èŠ‚çš„importå‘½ä»¤ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™æ˜¯å› ä¸ºå¤„äºæ¡ä»¶ä»£ç å—ä¹‹ä¸­ï¼Œå°±æ²¡æ³•åšé™æ€ä¼˜åŒ–äº†ï¼Œè¿èƒŒäº†ES6æ¨¡å—çš„è®¾è®¡åˆè¡·ã€‚ function foo() { export default &#39;bar&#39; // SyntaxError } foo() ä¸Šé¢ä»£ç ä¸­ï¼Œexportè¯­å¥æ”¾åœ¨å‡½æ•°ä¹‹ä¸­ï¼Œç»“æœæŠ¥é”™ã€‚ import å‘½ä»¤ä½¿ç”¨exportå‘½ä»¤å®šä¹‰äº†æ¨¡å—çš„å¯¹å¤–æ¥å£ä»¥åï¼Œå…¶ä»– JS æ–‡ä»¶å°±å¯ä»¥é€šè¿‡importå‘½ä»¤åŠ è½½è¿™ä¸ªæ¨¡å—ã€‚ // main.js import {firstName, lastName, year} from &#39;./profile&#39;; function setName(element) { element.textContent = firstName + &#39; &#39; + lastName; } ä¸Šé¢ä»£ç çš„importå‘½ä»¤ï¼Œç”¨äºåŠ è½½profile.jsæ–‡ä»¶ï¼Œå¹¶ä»ä¸­è¾“å…¥å˜é‡ã€‚importå‘½ä»¤æ¥å—ä¸€å¯¹å¤§æ‹¬å·ï¼Œé‡Œé¢æŒ‡å®šè¦ä»å…¶ä»–æ¨¡å—å¯¼å…¥çš„å˜é‡åã€‚å¤§æ‹¬å·é‡Œé¢çš„å˜é‡åï¼Œå¿…é¡»ä¸è¢«å¯¼å…¥æ¨¡å—ï¼ˆprofile.jsï¼‰å¯¹å¤–æ¥å£çš„åç§°ç›¸åŒã€‚ å¦‚æœæƒ³ä¸ºè¾“å…¥çš„å˜é‡é‡æ–°å–ä¸€ä¸ªåå­—ï¼Œimportå‘½ä»¤è¦ä½¿ç”¨aså…³é”®å­—ï¼Œå°†è¾“å…¥çš„å˜é‡é‡å‘½åã€‚ import { lastName as surname } from &#39;./profile&#39;; importåé¢çš„fromæŒ‡å®šæ¨¡å—æ–‡ä»¶çš„ä½ç½®ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œ.jsè·¯å¾„å¯ä»¥çœç•¥ã€‚å¦‚æœåªæ˜¯æ¨¡å—åï¼Œä¸å¸¦æœ‰è·¯å¾„ï¼Œé‚£ä¹ˆå¿…é¡»æœ‰é…ç½®æ–‡ä»¶ï¼Œå‘Šè¯‰ JavaScript å¼•æ“è¯¥æ¨¡å—çš„ä½ç½®ã€‚ import {myMethod} from &#39;util&#39;; ä¸Šé¢ä»£ç ä¸­ï¼Œutilæ˜¯æ¨¡å—æ–‡ä»¶åï¼Œç”±äºä¸å¸¦æœ‰è·¯å¾„ï¼Œå¿…é¡»é€šè¿‡é…ç½®ï¼Œå‘Šè¯‰å¼•æ“æ€ä¹ˆå–åˆ°è¿™ä¸ªæ¨¡å—ã€‚ æ³¨æ„ï¼Œimportå‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œã€‚ foo(); import { foo } from &#39;my_module&#39;; ä¸Šé¢çš„ä»£ç ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºimportçš„æ‰§è¡Œæ—©äºfooçš„è°ƒç”¨ã€‚è¿™ç§è¡Œä¸ºçš„æœ¬è´¨æ˜¯ï¼Œimportå‘½ä»¤æ˜¯ç¼–è¯‘é˜¶æ®µæ‰§è¡Œçš„ï¼Œåœ¨ä»£ç è¿è¡Œä¹‹å‰ã€‚ ç”±äºimportæ˜¯é™æ€æ‰§è¡Œï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨è¡¨è¾¾å¼å’Œå˜é‡ï¼Œè¿™äº›åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°ç»“æœçš„è¯­æ³•ç»“æ„ã€‚ // æŠ¥é”™ import { &#39;f&#39; + &#39;oo&#39; } from &#39;my_module&#39;; // æŠ¥é”™ let module = &#39;my_module&#39;; import { foo } from module; // æŠ¥é”™ if (x === 1) { import { foo } from &#39;module1&#39;; } else { import { foo } from &#39;module2&#39;; } ä¸Šé¢ä¸‰ç§å†™æ³•éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒä»¬ç”¨åˆ°äº†è¡¨è¾¾å¼ã€å˜é‡å’Œifç»“æ„ã€‚åœ¨é™æ€åˆ†æé˜¶æ®µï¼Œè¿™äº›è¯­æ³•éƒ½æ˜¯æ²¡æ³•å¾—åˆ°å€¼çš„ã€‚ æœ€åï¼Œimportè¯­å¥ä¼šæ‰§è¡Œæ‰€åŠ è½½çš„æ¨¡å—ï¼Œå› æ­¤å¯ä»¥æœ‰ä¸‹é¢çš„å†™æ³•ã€‚ import &#39;lodash&#39;; ä¸Šé¢ä»£ç ä»…ä»…æ‰§è¡Œlodashæ¨¡å—ï¼Œä½†æ˜¯ä¸è¾“å…¥ä»»ä½•å€¼ã€‚ å¦‚æœå¤šæ¬¡é‡å¤æ‰§è¡ŒåŒä¸€å¥importè¯­å¥ï¼Œé‚£ä¹ˆåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä¸ä¼šæ‰§è¡Œå¤šæ¬¡ã€‚ import &#39;lodash&#39;; import &#39;lodash&#39;; ä¸Šé¢ä»£ç åŠ è½½äº†ä¸¤æ¬¡lodashï¼Œä½†æ˜¯åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚ import { foo } from &#39;my_module&#39;; import { bar } from &#39;my_module&#39;; // ç­‰åŒäº import { foo, bar } from &#39;my_module&#39;; ä¸Šé¢ä»£ç ä¸­ï¼Œè™½ç„¶fooå’Œbaråœ¨ä¸¤ä¸ªè¯­å¥ä¸­åŠ è½½ï¼Œä½†æ˜¯å®ƒä»¬å¯¹åº”çš„æ˜¯åŒä¸€ä¸ªmy_moduleå®ä¾‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œimportè¯­å¥æ˜¯ Singleton æ¨¡å¼ã€‚ æ¨¡å—çš„æ•´ä½“åŠ è½½é™¤äº†æŒ‡å®šåŠ è½½æŸä¸ªè¾“å‡ºå€¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ•´ä½“åŠ è½½ï¼Œå³ç”¨æ˜Ÿå·ï¼ˆ*ï¼‰æŒ‡å®šä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰è¾“å‡ºå€¼éƒ½åŠ è½½åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šé¢ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªcircle.jsæ–‡ä»¶ï¼Œå®ƒè¾“å‡ºä¸¤ä¸ªæ–¹æ³•areaå’Œcircumferenceã€‚ // circle.js export function area(radius) { return Math.PI * radius * radius; } export function circumference(radius) { return 2 * Math.PI * radius; } ç°åœ¨ï¼ŒåŠ è½½è¿™ä¸ªæ¨¡å—ã€‚ // main.js import { area, circumference } from &#39;./circle&#39;; console.log(&#39;åœ†é¢ç§¯ï¼š&#39; + area(4)); console.log(&#39;åœ†å‘¨é•¿ï¼š&#39; + circumference(14)); ä¸Šé¢å†™æ³•æ˜¯é€ä¸€æŒ‡å®šè¦åŠ è½½çš„æ–¹æ³•ï¼Œæ•´ä½“åŠ è½½çš„å†™æ³•å¦‚ä¸‹ã€‚ import * as circle from &#39;./circle&#39;; console.log(&#39;åœ†é¢ç§¯ï¼š&#39; + circle.area(4)); console.log(&#39;åœ†å‘¨é•¿ï¼š&#39; + circle.circumference(14)); export default å‘½ä»¤ä»å‰é¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨importå‘½ä»¤çš„æ—¶å€™ï¼Œç”¨æˆ·éœ€è¦çŸ¥é“æ‰€è¦åŠ è½½çš„å˜é‡åæˆ–å‡½æ•°åï¼Œå¦åˆ™æ— æ³•åŠ è½½ã€‚ä½†æ˜¯ï¼Œç”¨æˆ·è‚¯å®šå¸Œæœ›å¿«é€Ÿä¸Šæ‰‹ï¼Œæœªå¿…æ„¿æ„é˜…è¯»æ–‡æ¡£ï¼Œå»äº†è§£æ¨¡å—æœ‰å“ªäº›å±æ€§å’Œæ–¹æ³•ã€‚ ä¸ºäº†ç»™ç”¨æˆ·æä¾›æ–¹ä¾¿ï¼Œè®©ä»–ä»¬ä¸ç”¨é˜…è¯»æ–‡æ¡£å°±èƒ½åŠ è½½æ¨¡å—ï¼Œå°±è¦ç”¨åˆ°export defaultå‘½ä»¤ï¼Œä¸ºæ¨¡å—æŒ‡å®šé»˜è®¤è¾“å‡ºã€‚ // export-default.js export default function () { console.log(&#39;foo&#39;); } ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªæ¨¡å—æ–‡ä»¶export-default.jsï¼Œå®ƒçš„é»˜è®¤è¾“å‡ºæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ å…¶ä»–æ¨¡å—åŠ è½½è¯¥æ¨¡å—æ—¶ï¼Œimportå‘½ä»¤å¯ä»¥ä¸ºè¯¥åŒ¿åå‡½æ•°æŒ‡å®šä»»æ„åå­—ã€‚ // import-default.js import customName from &#39;./export-default&#39;; customName(); // &#39;foo&#39; ä¸Šé¢ä»£ç çš„importå‘½ä»¤ï¼Œå¯ä»¥ç”¨ä»»æ„åç§°æŒ‡å‘export-default.jsè¾“å‡ºçš„æ–¹æ³•ï¼Œè¿™æ—¶å°±ä¸éœ€è¦çŸ¥é“åŸæ¨¡å—è¾“å‡ºçš„å‡½æ•°åã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™æ—¶importå‘½ä»¤åé¢ï¼Œä¸ä½¿ç”¨å¤§æ‹¬å·ã€‚ export defaultå‘½ä»¤ç”¨åœ¨éåŒ¿åå‡½æ•°å‰ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ // export-default.js export default function foo() { console.log(&#39;foo&#39;); } // æˆ–è€…å†™æˆ function foo() { console.log(&#39;foo&#39;); } export default foo; ä¸Šé¢ä»£ç ä¸­ï¼Œfooå‡½æ•°çš„å‡½æ•°åfooï¼Œåœ¨æ¨¡å—å¤–éƒ¨æ˜¯æ— æ•ˆçš„ã€‚åŠ è½½çš„æ—¶å€™ï¼Œè§†åŒåŒ¿åå‡½æ•°åŠ è½½ã€‚ ä¸‹é¢æ¯”è¾ƒä¸€ä¸‹é»˜è®¤è¾“å‡ºå’Œæ­£å¸¸è¾“å‡ºã€‚ // ç¬¬ä¸€ç»„ export default function crc32() { // è¾“å‡º // ... } import crc32 from &#39;crc32&#39;; // è¾“å…¥ // ç¬¬äºŒç»„ export function crc32() { // è¾“å‡º // ... }; import {crc32} from &#39;crc32&#39;; // è¾“å…¥ ä¸Šé¢ä»£ç çš„ä¸¤ç»„å†™æ³•ï¼Œç¬¬ä¸€ç»„æ˜¯ä½¿ç”¨export defaultæ—¶ï¼Œå¯¹åº”çš„importè¯­å¥ä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ï¼›ç¬¬äºŒç»„æ˜¯ä¸ä½¿ç”¨export defaultæ—¶ï¼Œå¯¹åº”çš„importè¯­å¥éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ã€‚ export defaultå‘½ä»¤ç”¨äºæŒ‡å®šæ¨¡å—çš„é»˜è®¤è¾“å‡ºã€‚æ˜¾ç„¶ï¼Œä¸€ä¸ªæ¨¡å—åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤è¾“å‡ºï¼Œå› æ­¤export defaultå‘½ä»¤åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œimportå‘½ä»¤åé¢æ‰ä¸ç”¨åŠ å¤§æ‹¬å·ï¼Œå› ä¸ºåªå¯èƒ½å¯¹åº”ä¸€ä¸ªæ–¹æ³•ã€‚ æœ¬è´¨ä¸Šï¼Œexport defaultå°±æ˜¯è¾“å‡ºä¸€ä¸ªå«åšdefaultçš„å˜é‡æˆ–æ–¹æ³•ï¼Œç„¶åç³»ç»Ÿå…è®¸ä½ ä¸ºå®ƒå–ä»»æ„åå­—ã€‚æ‰€ä»¥ï¼Œä¸‹é¢çš„å†™æ³•æ˜¯æœ‰æ•ˆçš„ã€‚ // modules.js function add(x, y) { return x * y; } export {add as default}; // ç­‰åŒäº // export default add; // app.js import { default as xxx } from &#39;modules&#39;; // ç­‰åŒäº // import xxx from &#39;modules&#39;; æ­£æ˜¯å› ä¸ºexport defaultå‘½ä»¤å…¶å®åªæ˜¯è¾“å‡ºä¸€ä¸ªå«åšdefaultçš„å˜é‡ï¼Œæ‰€ä»¥å®ƒåé¢ä¸èƒ½è·Ÿå˜é‡å£°æ˜è¯­å¥ã€‚ // æ­£ç¡® export var a = 1; // æ­£ç¡® var a = 1; export default a; // é”™è¯¯ export default var a = 1; ä¸Šé¢ä»£ç ä¸­ï¼Œexport default açš„å«ä¹‰æ˜¯å°†å˜é‡açš„å€¼èµ‹ç»™å˜é‡defaultã€‚æ‰€ä»¥ï¼Œæœ€åä¸€ç§å†™æ³•ä¼šæŠ¥é”™ã€‚ æœ‰äº†export defaultå‘½ä»¤ï¼Œè¾“å…¥æ¨¡å—æ—¶å°±éå¸¸ç›´è§‚äº†ï¼Œä»¥è¾“å…¥ lodash æ¨¡å—ä¸ºä¾‹ã€‚ import _ from &#39;lodash&#39;; å¦‚æœæƒ³åœ¨ä¸€æ¡importè¯­å¥ä¸­ï¼ŒåŒæ—¶è¾“å…¥é»˜è®¤æ–¹æ³•å’Œå…¶ä»–å˜é‡ï¼Œå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ã€‚ import _, { each } from &#39;lodash&#39;; å¯¹åº”ä¸Šé¢ä»£ç çš„exportè¯­å¥å¦‚ä¸‹ã€‚ export default function (obj) { // Â·Â·Â· } export function each(obj, iterator, context) { // Â·Â·Â· } export { each as forEach }; ä¸Šé¢ä»£ç çš„æœ€åä¸€è¡Œçš„æ„æ€æ˜¯ï¼Œæš´éœ²å‡ºforEachæ¥å£ï¼Œé»˜è®¤æŒ‡å‘eachæ¥å£ï¼Œå³forEachå’ŒeachæŒ‡å‘åŒä¸€ä¸ªæ–¹æ³•ã€‚ å¦‚æœè¦è¾“å‡ºé»˜è®¤çš„å€¼ï¼Œåªéœ€å°†å€¼è·Ÿåœ¨export defaultä¹‹åå³å¯ã€‚ export default 42; export defaultä¹Ÿå¯ä»¥ç”¨æ¥è¾“å‡ºç±»ã€‚ // MyClass.js export default class { ... } // main.js import MyClass from &#39;MyClass&#39;; let o = new MyClass(); export ä¸ import çš„å¤åˆå†™æ³•å¦‚æœåœ¨ä¸€ä¸ªæ¨¡å—ä¹‹ä¸­ï¼Œå…ˆè¾“å…¥åè¾“å‡ºåŒä¸€ä¸ªæ¨¡å—ï¼Œimportè¯­å¥å¯ä»¥ä¸exportè¯­å¥å†™åœ¨ä¸€èµ·ã€‚ export { foo, bar } from &#39;my_module&#39;; // ç­‰åŒäº import { foo, bar } from &#39;my_module&#39;; export { foo, bar }; ä¸Šé¢ä»£ç ä¸­ï¼Œexportå’Œimportè¯­å¥å¯ä»¥ç»“åˆåœ¨ä¸€èµ·ï¼Œå†™æˆä¸€è¡Œã€‚ æ¨¡å—çš„æ¥å£æ”¹åå’Œæ•´ä½“è¾“å‡ºï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨è¿™ç§å†™æ³•ã€‚ // æ¥å£æ”¹å export { foo as myFoo } from &#39;my_module&#39;; // æ•´ä½“è¾“å‡º export * from &#39;my_module&#39;; é»˜è®¤æ¥å£çš„å†™æ³•å¦‚ä¸‹ã€‚ export { default } from &#39;foo&#39;; å…·åæ¥å£æ”¹ä¸ºé»˜è®¤æ¥å£çš„å†™æ³•å¦‚ä¸‹ã€‚ export { es6 as default } from &#39;./someModule&#39;; // ç­‰åŒäº import { es6 } from &#39;./someModule&#39;; export default es6; åŒæ ·åœ°ï¼Œé»˜è®¤æ¥å£ä¹Ÿå¯ä»¥æ”¹åä¸ºå…·åæ¥å£ã€‚ export { default as es6 } from &#39;./someModule&#39;; å¦å¤–ï¼ŒES7æœ‰ä¸€ä¸ªææ¡ˆï¼Œç®€åŒ–å…ˆè¾“å…¥åè¾“å‡ºçš„å†™æ³•ï¼Œæ‹¿æ‰è¾“å‡ºæ—¶çš„å¤§æ‹¬å·ã€‚ // ç°è¡Œçš„å†™æ³• export {v} from &#39;mod&#39;; // ææ¡ˆçš„å†™æ³• export v from &#39;mod&#39;; æ¨¡å—çš„ç»§æ‰¿æ¨¡å—ä¹‹é—´ä¹Ÿå¯ä»¥ç»§æ‰¿ã€‚ å‡è®¾æœ‰ä¸€ä¸ªcircleplusæ¨¡å—ï¼Œç»§æ‰¿äº†circleæ¨¡å—ã€‚ // circleplus.js export * from &#39;circle&#39;; export var e = 2.71828182846; export default function(x) { return Math.exp(x); } ä¸Šé¢ä»£ç ä¸­çš„export *ï¼Œè¡¨ç¤ºå†è¾“å‡ºcircleæ¨¡å—çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚æ³¨æ„ï¼Œexport *å‘½ä»¤ä¼šå¿½ç•¥circleæ¨¡å—çš„defaultæ–¹æ³•ã€‚ç„¶åï¼Œä¸Šé¢ä»£ç åˆè¾“å‡ºäº†è‡ªå®šä¹‰çš„eå˜é‡å’Œé»˜è®¤æ–¹æ³•ã€‚ è¿™æ—¶ï¼Œä¹Ÿå¯ä»¥å°†circleçš„å±æ€§æˆ–æ–¹æ³•ï¼Œæ”¹ååå†è¾“å‡ºã€‚ // circleplus.js export { area as circleArea } from &#39;circle&#39;; ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œåªè¾“å‡ºcircleæ¨¡å—çš„areaæ–¹æ³•ï¼Œä¸”å°†å…¶æ”¹åä¸ºcircleAreaã€‚ åŠ è½½ä¸Šé¢æ¨¡å—çš„å†™æ³•å¦‚ä¸‹ã€‚ // main.js import * as math from &#39;circleplus&#39;; import exp from &#39;circleplus&#39;; console.log(exp(math.e)); ä¸Šé¢ä»£ç ä¸­çš„import expè¡¨ç¤ºï¼Œå°†circleplusæ¨¡å—çš„é»˜è®¤æ–¹æ³•åŠ è½½ä¸ºexpæ–¹æ³•ã€‚ ES6æ¨¡å—åŠ è½½çš„å®è´¨ES6æ¨¡å—åŠ è½½çš„æœºåˆ¶ï¼Œä¸CommonJSæ¨¡å—å®Œå…¨ä¸åŒã€‚CommonJSæ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼Œè€ŒES6æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚ CommonJSæ¨¡å—è¾“å‡ºçš„æ˜¯è¢«è¾“å‡ºå€¼çš„æ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚è¯·çœ‹ä¸‹é¢è¿™ä¸ªæ¨¡å—æ–‡ä»¶lib.jsçš„ä¾‹å­ã€‚ // lib.js var counter = 3; function incCounter() { counter++; } module.exports = { counter: counter, incCounter: incCounter, }; ä¸Šé¢ä»£ç è¾“å‡ºå†…éƒ¨å˜é‡counterå’Œæ”¹å†™è¿™ä¸ªå˜é‡çš„å†…éƒ¨æ–¹æ³•incCounterã€‚ç„¶åï¼Œåœ¨main.jsé‡Œé¢åŠ è½½è¿™ä¸ªæ¨¡å—ã€‚ // main.js var mod = require(&#39;./lib&#39;); console.log(mod.counter); // 3 mod.incCounter(); console.log(mod.counter); // 3 ä¸Šé¢ä»£ç è¯´æ˜ï¼Œlib.jsæ¨¡å—åŠ è½½ä»¥åï¼Œå®ƒçš„å†…éƒ¨å˜åŒ–å°±å½±å“ä¸åˆ°è¾“å‡ºçš„mod.counteräº†ã€‚è¿™æ˜¯å› ä¸ºmod.counteræ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ï¼Œä¼šè¢«ç¼“å­˜ã€‚é™¤éå†™æˆä¸€ä¸ªå‡½æ•°ï¼Œæ‰èƒ½å¾—åˆ°å†…éƒ¨å˜åŠ¨åçš„å€¼ã€‚ // lib.js var counter = 3; function incCounter() { counter++; } module.exports = { get counter() { return counter }, incCounter: incCounter, }; ä¸Šé¢ä»£ç ä¸­ï¼Œè¾“å‡ºçš„counterå±æ€§å®é™…ä¸Šæ˜¯ä¸€ä¸ªå–å€¼å™¨å‡½æ•°ã€‚ç°åœ¨å†æ‰§è¡Œmain.jsï¼Œå°±å¯ä»¥æ­£ç¡®è¯»å–å†…éƒ¨å˜é‡counterçš„å˜åŠ¨äº†ã€‚ $ node main.js 3 4 ES6æ¨¡å—çš„è¿è¡Œæœºåˆ¶ä¸CommonJSä¸ä¸€æ ·ï¼Œå®ƒé‡åˆ°æ¨¡å—åŠ è½½å‘½ä»¤importæ—¶ï¼Œä¸ä¼šå»æ‰§è¡Œæ¨¡å—ï¼Œè€Œæ˜¯åªç”Ÿæˆä¸€ä¸ªåŠ¨æ€çš„åªè¯»å¼•ç”¨ã€‚ç­‰åˆ°çœŸçš„éœ€è¦ç”¨åˆ°æ—¶ï¼Œå†åˆ°æ¨¡å—é‡Œé¢å»å–å€¼ï¼Œæ¢å¥è¯è¯´ï¼ŒES6çš„è¾“å…¥æœ‰ç‚¹åƒUnixç³»ç»Ÿçš„â€œç¬¦å·è¿æ¥â€ï¼ŒåŸå§‹å€¼å˜äº†ï¼Œimportè¾“å…¥çš„å€¼ä¹Ÿä¼šè·Ÿç€å˜ã€‚å› æ­¤ï¼ŒES6æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šç¼“å­˜å€¼ï¼Œæ¨¡å—é‡Œé¢çš„å˜é‡ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—ã€‚ è¿˜æ˜¯ä¸¾ä¸Šé¢çš„ä¾‹å­ã€‚ // lib.js export let counter = 3; export function incCounter() { counter++; } // main.js import { counter, incCounter } from &#39;./lib&#39;; console.log(counter); // 3 incCounter(); console.log(counter); // 4 ä¸Šé¢ä»£ç è¯´æ˜ï¼ŒES6æ¨¡å—è¾“å…¥çš„å˜é‡counteræ˜¯æ´»çš„ï¼Œå®Œå…¨ååº”å…¶æ‰€åœ¨æ¨¡å—lib.jså†…éƒ¨çš„å˜åŒ–ã€‚ å†ä¸¾ä¸€ä¸ªå‡ºç°åœ¨exportä¸€èŠ‚ä¸­çš„ä¾‹å­ã€‚ // m1.js export var foo = &#39;bar&#39;; setTimeout(() =&gt; foo = &#39;baz&#39;, 500); // m2.js import {foo} from &#39;./m1.js&#39;; console.log(foo); setTimeout(() =&gt; console.log(foo), 500); ä¸Šé¢ä»£ç ä¸­ï¼Œm1.jsçš„å˜é‡fooï¼Œåœ¨åˆšåŠ è½½æ—¶ç­‰äºbarï¼Œè¿‡äº†500æ¯«ç§’ï¼Œåˆå˜ä¸ºç­‰äºbazã€‚ è®©æˆ‘ä»¬çœ‹çœ‹ï¼Œm2.jsèƒ½å¦æ­£ç¡®è¯»å–è¿™ä¸ªå˜åŒ–ã€‚ $ babel-node m2.js bar baz ä¸Šé¢ä»£ç è¡¨æ˜ï¼ŒES6æ¨¡å—ä¸ä¼šç¼“å­˜è¿è¡Œç»“æœï¼Œè€Œæ˜¯åŠ¨æ€åœ°å»è¢«åŠ è½½çš„æ¨¡å—å–å€¼ï¼Œå¹¶ä¸”å˜é‡æ€»æ˜¯ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—ã€‚ ç”±äºES6è¾“å…¥çš„æ¨¡å—å˜é‡ï¼Œåªæ˜¯ä¸€ä¸ªâ€œç¬¦å·è¿æ¥â€ï¼Œæ‰€ä»¥è¿™ä¸ªå˜é‡æ˜¯åªè¯»çš„ï¼Œå¯¹å®ƒè¿›è¡Œé‡æ–°èµ‹å€¼ä¼šæŠ¥é”™ã€‚ // lib.js export let obj = {}; // main.js import { obj } from &#39;./lib&#39;; obj.prop = 123; // OK obj = {}; // TypeError ä¸Šé¢ä»£ç ä¸­ï¼Œmain.jsä»lib.jsè¾“å…¥å˜é‡objï¼Œå¯ä»¥å¯¹objæ·»åŠ å±æ€§ï¼Œä½†æ˜¯é‡æ–°èµ‹å€¼å°±ä¼šæŠ¥é”™ã€‚å› ä¸ºå˜é‡objæŒ‡å‘çš„åœ°å€æ˜¯åªè¯»çš„ï¼Œä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œè¿™å°±å¥½æ¯”main.jsåˆ›é€ äº†ä¸€ä¸ªåä¸ºobjçš„constå˜é‡ã€‚ æœ€åï¼Œexporté€šè¿‡æ¥å£ï¼Œè¾“å‡ºçš„æ˜¯åŒä¸€ä¸ªå€¼ã€‚ä¸åŒçš„è„šæœ¬åŠ è½½è¿™ä¸ªæ¥å£ï¼Œå¾—åˆ°çš„éƒ½æ˜¯åŒæ ·çš„å®ä¾‹ã€‚ // mod.js function C() { this.sum = 0; this.add = function () { this.sum += 1; }; this.show = function () { console.log(this.sum); }; } export let c = new C(); ä¸Šé¢çš„è„šæœ¬mod.jsï¼Œè¾“å‡ºçš„æ˜¯ä¸€ä¸ªCçš„å®ä¾‹ã€‚ä¸åŒçš„è„šæœ¬åŠ è½½è¿™ä¸ªæ¨¡å—ï¼Œå¾—åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚ // x.js import {c} from &#39;./mod&#39;; c.add(); // y.js import {c} from &#39;./mod&#39;; c.show(); // main.js import &#39;./x&#39;; import &#39;./y&#39;; ç°åœ¨æ‰§è¡Œmain.jsï¼Œè¾“å‡ºçš„æ˜¯1ã€‚ $ babel-node main.js 1 è¿™å°±è¯æ˜äº†x.jså’Œy.jsåŠ è½½çš„éƒ½æ˜¯Cçš„åŒä¸€ä¸ªå®ä¾‹ã€‚ æµè§ˆå™¨çš„æ¨¡å—åŠ è½½æµè§ˆå™¨ä½¿ç”¨ ES6 æ¨¡å—çš„è¯­æ³•å¦‚ä¸‹ã€‚ &lt;script type=&quot;module&quot; src=&quot;foo.js&quot;&gt;&lt;/script&gt; ä¸Šé¢ä»£ç åœ¨ç½‘é¡µä¸­æ’å…¥ä¸€ä¸ªæ¨¡å—foo.jsï¼Œç”±äºtypeå±æ€§è®¾ä¸ºmoduleï¼Œæ‰€ä»¥æµè§ˆå™¨çŸ¥é“è¿™æ˜¯ä¸€ä¸ª ES6 æ¨¡å—ã€‚ æµè§ˆå™¨å¯¹äºå¸¦æœ‰type=&quot;module&quot;çš„&lt;script&gt;ï¼Œéƒ½æ˜¯å¼‚æ­¥åŠ è½½å¤–éƒ¨è„šæœ¬ï¼Œä¸ä¼šé€ æˆå µå¡æµè§ˆå™¨ã€‚ å¯¹äºå¤–éƒ¨çš„æ¨¡å—è„šæœ¬ï¼ˆä¸Šä¾‹æ˜¯foo.jsï¼‰ï¼Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ã€‚ è¯¥è„šæœ¬è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å—ã€‚ è¯¥è„šæœ¬å†…éƒ¨çš„é¡¶å±‚å˜é‡ï¼Œéƒ½åªåœ¨è¯¥è„šæœ¬å†…éƒ¨æœ‰æ•ˆï¼Œå¤–éƒ¨ä¸å¯è§ã€‚ è¯¥è„šæœ¬å†…éƒ¨çš„é¡¶å±‚çš„thiså…³é”®å­—ï¼Œè¿”å›undefinedï¼Œè€Œä¸æ˜¯æŒ‡å‘windowã€‚ å¾ªç¯åŠ è½½â€œå¾ªç¯åŠ è½½â€ï¼ˆcircular dependencyï¼‰æŒ‡çš„æ˜¯ï¼Œaè„šæœ¬çš„æ‰§è¡Œä¾èµ–bè„šæœ¬ï¼Œè€Œbè„šæœ¬çš„æ‰§è¡Œåˆä¾èµ–aè„šæœ¬ã€‚ // a.js var b = require(&#39;b&#39;); // b.js var a = require(&#39;a&#39;); é€šå¸¸ï¼Œâ€œå¾ªç¯åŠ è½½â€è¡¨ç¤ºå­˜åœ¨å¼ºè€¦åˆï¼Œå¦‚æœå¤„ç†ä¸å¥½ï¼Œè¿˜å¯èƒ½å¯¼è‡´é€’å½’åŠ è½½ï¼Œä½¿å¾—ç¨‹åºæ— æ³•æ‰§è¡Œï¼Œå› æ­¤åº”è¯¥é¿å…å‡ºç°ã€‚ ä½†æ˜¯å®é™…ä¸Šï¼Œè¿™æ˜¯å¾ˆéš¾é¿å…çš„ï¼Œå°¤å…¶æ˜¯ä¾èµ–å…³ç³»å¤æ‚çš„å¤§é¡¹ç›®ï¼Œå¾ˆå®¹æ˜“å‡ºç°aä¾èµ–bï¼Œbä¾èµ–cï¼Œcåˆä¾èµ–aè¿™æ ·çš„æƒ…å†µã€‚è¿™æ„å‘³ç€ï¼Œæ¨¡å—åŠ è½½æœºåˆ¶å¿…é¡»è€ƒè™‘â€œå¾ªç¯åŠ è½½â€çš„æƒ…å†µã€‚ å¯¹äºJavaScriptè¯­è¨€æ¥è¯´ï¼Œç›®å‰æœ€å¸¸è§çš„ä¸¤ç§æ¨¡å—æ ¼å¼CommonJSå’ŒES6ï¼Œå¤„ç†â€œå¾ªç¯åŠ è½½â€çš„æ–¹æ³•æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿”å›çš„ç»“æœä¹Ÿä¸ä¸€æ ·ã€‚ CommonJSæ¨¡å—çš„åŠ è½½åŸç†ä»‹ç»ES6å¦‚ä½•å¤„ç†â€å¾ªç¯åŠ è½½â€ä¹‹å‰ï¼Œå…ˆä»‹ç»ç›®å‰æœ€æµè¡Œçš„CommonJSæ¨¡å—æ ¼å¼çš„åŠ è½½åŸç†ã€‚ CommonJSçš„ä¸€ä¸ªæ¨¡å—ï¼Œå°±æ˜¯ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ã€‚requireå‘½ä»¤ç¬¬ä¸€æ¬¡åŠ è½½è¯¥è„šæœ¬ï¼Œå°±ä¼šæ‰§è¡Œæ•´ä¸ªè„šæœ¬ï¼Œç„¶ååœ¨å†…å­˜ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ã€‚ { id: &#39;...&#39;, exports: { ... }, loaded: true, ... } ä¸Šé¢ä»£ç å°±æ˜¯Nodeå†…éƒ¨åŠ è½½æ¨¡å—åç”Ÿæˆçš„ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„idå±æ€§æ˜¯æ¨¡å—åï¼Œexportså±æ€§æ˜¯æ¨¡å—è¾“å‡ºçš„å„ä¸ªæ¥å£ï¼Œloadedå±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—çš„è„šæœ¬æ˜¯å¦æ‰§è¡Œå®Œæ¯•ã€‚å…¶ä»–è¿˜æœ‰å¾ˆå¤šå±æ€§ï¼Œè¿™é‡Œéƒ½çœç•¥äº†ã€‚ ä»¥åéœ€è¦ç”¨åˆ°è¿™ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œå°±ä¼šåˆ°exportså±æ€§ä¸Šé¢å–å€¼ã€‚å³ä½¿å†æ¬¡æ‰§è¡Œrequireå‘½ä»¤ï¼Œä¹Ÿä¸ä¼šå†æ¬¡æ‰§è¡Œè¯¥æ¨¡å—ï¼Œè€Œæ˜¯åˆ°ç¼“å­˜ä¹‹ä¸­å–å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCommonJSæ¨¡å—æ— è®ºåŠ è½½å¤šå°‘æ¬¡ï¼Œéƒ½åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œä»¥åå†åŠ è½½ï¼Œå°±è¿”å›ç¬¬ä¸€æ¬¡è¿è¡Œçš„ç»“æœï¼Œé™¤éæ‰‹åŠ¨æ¸…é™¤ç³»ç»Ÿç¼“å­˜ã€‚ CommonJSæ¨¡å—çš„å¾ªç¯åŠ è½½CommonJSæ¨¡å—çš„é‡è¦ç‰¹æ€§æ˜¯åŠ è½½æ—¶æ‰§è¡Œï¼Œå³è„šæœ¬ä»£ç åœ¨requireçš„æ—¶å€™ï¼Œå°±ä¼šå…¨éƒ¨æ‰§è¡Œã€‚ä¸€æ—¦å‡ºç°æŸä¸ªæ¨¡å—è¢«â€å¾ªç¯åŠ è½½â€ï¼Œå°±åªè¾“å‡ºå·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œè¿˜æœªæ‰§è¡Œçš„éƒ¨åˆ†ä¸ä¼šè¾“å‡ºã€‚ è®©æˆ‘ä»¬æ¥çœ‹ï¼ŒNodeå®˜æ–¹æ–‡æ¡£é‡Œé¢çš„ä¾‹å­ã€‚è„šæœ¬æ–‡ä»¶a.jsä»£ç å¦‚ä¸‹ã€‚ exports.done = false; var b = require(&#39;./b.js&#39;); console.log(&#39;åœ¨ a.js ä¹‹ä¸­ï¼Œb.done = %j&#39;, b.done); exports.done = true; console.log(&#39;a.js æ‰§è¡Œå®Œæ¯•&#39;); ä¸Šé¢ä»£ç ä¹‹ä¸­ï¼Œa.jsè„šæœ¬å…ˆè¾“å‡ºä¸€ä¸ªdoneå˜é‡ï¼Œç„¶ååŠ è½½å¦ä¸€ä¸ªè„šæœ¬æ–‡ä»¶b.jsã€‚æ³¨æ„ï¼Œæ­¤æ—¶a.jsä»£ç å°±åœåœ¨è¿™é‡Œï¼Œç­‰å¾…b.jsæ‰§è¡Œå®Œæ¯•ï¼Œå†å¾€ä¸‹æ‰§è¡Œã€‚ å†çœ‹b.jsçš„ä»£ç ã€‚ exports.done = false; var a = require(&#39;./a.js&#39;); console.log(&#39;åœ¨ b.js ä¹‹ä¸­ï¼Œa.done = %j&#39;, a.done); exports.done = true; console.log(&#39;b.js æ‰§è¡Œå®Œæ¯•&#39;); ä¸Šé¢ä»£ç ä¹‹ä¸­ï¼Œb.jsæ‰§è¡Œåˆ°ç¬¬äºŒè¡Œï¼Œå°±ä¼šå»åŠ è½½a.jsï¼Œè¿™æ—¶ï¼Œå°±å‘ç”Ÿäº†â€œå¾ªç¯åŠ è½½â€ã€‚ç³»ç»Ÿä¼šå»a.jsæ¨¡å—å¯¹åº”å¯¹è±¡çš„exportså±æ€§å–å€¼ï¼Œå¯æ˜¯å› ä¸ºa.jsè¿˜æ²¡æœ‰æ‰§è¡Œå®Œï¼Œä»exportså±æ€§åªèƒ½å–å›å·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æœ€åçš„å€¼ã€‚ a.jså·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œåªæœ‰ä¸€è¡Œã€‚ exports.done = false; å› æ­¤ï¼Œå¯¹äºb.jsæ¥è¯´ï¼Œå®ƒä»a.jsåªè¾“å…¥ä¸€ä¸ªå˜é‡doneï¼Œå€¼ä¸ºfalseã€‚ ç„¶åï¼Œb.jsæ¥ç€å¾€ä¸‹æ‰§è¡Œï¼Œç­‰åˆ°å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œå†æŠŠæ‰§è¡Œæƒäº¤è¿˜ç»™a.jsã€‚äºæ˜¯ï¼Œa.jsæ¥ç€å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°æ‰§è¡Œå®Œæ¯•ã€‚æˆ‘ä»¬å†™ä¸€ä¸ªè„šæœ¬main.jsï¼ŒéªŒè¯è¿™ä¸ªè¿‡ç¨‹ã€‚ var a = require(&#39;./a.js&#39;); var b = require(&#39;./b.js&#39;); console.log(&#39;åœ¨ main.js ä¹‹ä¸­, a.done=%j, b.done=%j&#39;, a.done, b.done); æ‰§è¡Œmain.jsï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ã€‚ $ node main.js åœ¨ b.js ä¹‹ä¸­ï¼Œa.done = false b.js æ‰§è¡Œå®Œæ¯• åœ¨ a.js ä¹‹ä¸­ï¼Œb.done = true a.js æ‰§è¡Œå®Œæ¯• åœ¨ main.js ä¹‹ä¸­, a.done=true, b.done=true ä¸Šé¢çš„ä»£ç è¯æ˜äº†ä¸¤ä»¶äº‹ã€‚ä¸€æ˜¯ï¼Œåœ¨b.jsä¹‹ä¸­ï¼Œa.jsæ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œåªæ‰§è¡Œäº†ç¬¬ä¸€è¡Œã€‚äºŒæ˜¯ï¼Œmain.jsæ‰§è¡Œåˆ°ç¬¬äºŒè¡Œæ—¶ï¼Œä¸ä¼šå†æ¬¡æ‰§è¡Œb.jsï¼Œè€Œæ˜¯è¾“å‡ºç¼“å­˜çš„b.jsçš„æ‰§è¡Œç»“æœï¼Œå³å®ƒçš„ç¬¬å››è¡Œã€‚ exports.done = true; æ€»ä¹‹ï¼ŒCommonJSè¾“å…¥çš„æ˜¯è¢«è¾“å‡ºå€¼çš„æ‹·è´ï¼Œä¸æ˜¯å¼•ç”¨ã€‚ å¦å¤–ï¼Œç”±äºCommonJSæ¨¡å—é‡åˆ°å¾ªç¯åŠ è½½æ—¶ï¼Œè¿”å›çš„æ˜¯å½“å‰å·²ç»æ‰§è¡Œçš„éƒ¨åˆ†çš„å€¼ï¼Œè€Œä¸æ˜¯ä»£ç å…¨éƒ¨æ‰§è¡Œåçš„å€¼ï¼Œä¸¤è€…å¯èƒ½ä¼šæœ‰å·®å¼‚ã€‚æ‰€ä»¥ï¼Œè¾“å…¥å˜é‡çš„æ—¶å€™ï¼Œå¿…é¡»éå¸¸å°å¿ƒã€‚ var a = require(&#39;a&#39;); // å®‰å…¨çš„å†™æ³• var foo = require(&#39;a&#39;).foo; // å±é™©çš„å†™æ³• exports.good = function (arg) { return a.foo(&#39;good&#39;, arg); // ä½¿ç”¨çš„æ˜¯ a.foo çš„æœ€æ–°å€¼ }; exports.bad = function (arg) { return foo(&#39;bad&#39;, arg); // ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªéƒ¨åˆ†åŠ è½½æ—¶çš„å€¼ }; ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå‘ç”Ÿå¾ªç¯åŠ è½½ï¼Œrequire(&#39;a&#39;).fooçš„å€¼å¾ˆå¯èƒ½åé¢ä¼šè¢«æ”¹å†™ï¼Œæ”¹ç”¨require(&#39;a&#39;)ä¼šæ›´ä¿é™©ä¸€ç‚¹ã€‚ ES6æ¨¡å—çš„å¾ªç¯åŠ è½½ES6å¤„ç†â€œå¾ªç¯åŠ è½½â€ä¸CommonJSæœ‰æœ¬è´¨çš„ä¸åŒã€‚ES6æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå¦‚æœä½¿ç”¨importä»ä¸€ä¸ªæ¨¡å—åŠ è½½å˜é‡ï¼ˆå³import foo from &#39;foo&#39;ï¼‰ï¼Œé‚£äº›å˜é‡ä¸ä¼šè¢«ç¼“å­˜ï¼Œè€Œæ˜¯æˆä¸ºä¸€ä¸ªæŒ‡å‘è¢«åŠ è½½æ¨¡å—çš„å¼•ç”¨ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±ä¿è¯ï¼ŒçœŸæ­£å–å€¼çš„æ—¶å€™èƒ½å¤Ÿå–åˆ°å€¼ã€‚ è¯·çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚ // a.jså¦‚ä¸‹ import {bar} from &#39;./b.js&#39;; console.log(&#39;a.js&#39;); console.log(bar); export let foo = &#39;foo&#39;; // b.js import {foo} from &#39;./a.js&#39;; console.log(&#39;b.js&#39;); console.log(foo); export let bar = &#39;bar&#39;; ä¸Šé¢ä»£ç ä¸­ï¼Œa.jsåŠ è½½b.jsï¼Œb.jsåˆåŠ è½½a.jsï¼Œæ„æˆå¾ªç¯åŠ è½½ã€‚æ‰§è¡Œa.jsï¼Œç»“æœå¦‚ä¸‹ã€‚ $ babel-node a.js b.js undefined a.js bar ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºa.jsçš„ç¬¬ä¸€è¡Œæ˜¯åŠ è½½b.jsï¼Œæ‰€ä»¥å…ˆæ‰§è¡Œçš„æ˜¯b.jsã€‚è€Œb.jsçš„ç¬¬ä¸€è¡Œåˆæ˜¯åŠ è½½a.jsï¼Œè¿™æ—¶ç”±äºa.jså·²ç»å¼€å§‹æ‰§è¡Œäº†ï¼Œæ‰€ä»¥ä¸ä¼šé‡å¤æ‰§è¡Œï¼Œè€Œæ˜¯ç»§ç»­å¾€ä¸‹æ‰§è¡Œb.jsï¼Œæ‰€ä»¥ç¬¬ä¸€è¡Œè¾“å‡ºçš„æ˜¯b.jsã€‚ æ¥ç€ï¼Œb.jsè¦æ‰“å°å˜é‡fooï¼Œè¿™æ—¶a.jsè¿˜æ²¡æ‰§è¡Œå®Œï¼Œå–ä¸åˆ°fooçš„å€¼ï¼Œå¯¼è‡´æ‰“å°å‡ºæ¥æ˜¯undefinedã€‚b.jsæ‰§è¡Œå®Œï¼Œå¼€å§‹æ‰§è¡Œa.jsï¼Œè¿™æ—¶å°±ä¸€åˆ‡æ­£å¸¸äº†ã€‚ å†çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚çš„ä¾‹å­ï¼ˆæ‘˜è‡ª Dr. Axel Rauschmayer çš„ã€ŠExploring ES6ã€‹ï¼‰ã€‚ // a.js import {bar} from &#39;./b.js&#39;; export function foo() { console.log(&#39;foo&#39;); bar(); console.log(&#39;æ‰§è¡Œå®Œæ¯•&#39;); } foo(); // b.js import {foo} from &#39;./a.js&#39;; export function bar() { console.log(&#39;bar&#39;); if (Math.random() &gt; 0.5) { foo(); } } æŒ‰ç…§CommonJSè§„èŒƒï¼Œä¸Šé¢çš„ä»£ç æ˜¯æ²¡æ³•æ‰§è¡Œçš„ã€‚aå…ˆåŠ è½½bï¼Œç„¶åbåˆåŠ è½½aï¼Œè¿™æ—¶aè¿˜æ²¡æœ‰ä»»ä½•æ‰§è¡Œç»“æœï¼Œæ‰€ä»¥è¾“å‡ºç»“æœä¸ºnullï¼Œå³å¯¹äºb.jsæ¥è¯´ï¼Œå˜é‡fooçš„å€¼ç­‰äºnullï¼Œåé¢çš„foo()å°±ä¼šæŠ¥é”™ã€‚ ä½†æ˜¯ï¼ŒES6å¯ä»¥æ‰§è¡Œä¸Šé¢çš„ä»£ç ã€‚ $ babel-node a.js foo bar æ‰§è¡Œå®Œæ¯• // æ‰§è¡Œç»“æœä¹Ÿæœ‰å¯èƒ½æ˜¯ foo bar foo bar æ‰§è¡Œå®Œæ¯• æ‰§è¡Œå®Œæ¯• ä¸Šé¢ä»£ç ä¸­ï¼Œa.jsä¹‹æ‰€ä»¥èƒ½å¤Ÿæ‰§è¡Œï¼ŒåŸå› å°±åœ¨äºES6åŠ è½½çš„å˜é‡ï¼Œéƒ½æ˜¯åŠ¨æ€å¼•ç”¨å…¶æ‰€åœ¨çš„æ¨¡å—ã€‚åªè¦å¼•ç”¨å­˜åœ¨ï¼Œä»£ç å°±èƒ½æ‰§è¡Œã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬è¯¦ç»†åˆ†æè¿™æ®µä»£ç çš„è¿è¡Œè¿‡ç¨‹ã€‚ // a.js // è¿™ä¸€è¡Œå»ºç«‹ä¸€ä¸ªå¼•ç”¨ï¼Œ // ä»`b.js`å¼•ç”¨`bar` import {bar} from &#39;./b.js&#39;; export function foo() { // æ‰§è¡Œæ—¶ç¬¬ä¸€è¡Œè¾“å‡º foo console.log(&#39;foo&#39;); // åˆ° b.js æ‰§è¡Œ bar bar(); console.log(&#39;æ‰§è¡Œå®Œæ¯•&#39;); } foo(); // b.js // å»ºç«‹`a.js`çš„`foo`å¼•ç”¨ import {foo} from &#39;./a.js&#39;; export function bar() { // æ‰§è¡Œæ—¶ï¼Œç¬¬äºŒè¡Œè¾“å‡º bar console.log(&#39;bar&#39;); // é€’å½’æ‰§è¡Œ fooï¼Œä¸€æ—¦éšæœºæ•° // å°äºç­‰äº0.5ï¼Œå°±åœæ­¢æ‰§è¡Œ if (Math.random() &gt; 0.5) { foo(); } } æˆ‘ä»¬å†æ¥çœ‹ES6æ¨¡å—åŠ è½½å™¨SystemJSç»™å‡ºçš„ä¸€ä¸ªä¾‹å­ã€‚ // even.js import { odd } from &#39;./odd&#39; export var counter = 0; export function even(n) { counter++; return n == 0 || odd(n - 1); } // odd.js import { even } from &#39;./even&#39;; export function odd(n) { return n != 0 &amp;&amp; even(n - 1); } ä¸Šé¢ä»£ç ä¸­ï¼Œeven.jsé‡Œé¢çš„å‡½æ•°evenæœ‰ä¸€ä¸ªå‚æ•°nï¼Œåªè¦ä¸ç­‰äº0ï¼Œå°±ä¼šå‡å»1ï¼Œä¼ å…¥åŠ è½½çš„odd()ã€‚odd.jsä¹Ÿä¼šåšç±»ä¼¼æ“ä½œã€‚ è¿è¡Œä¸Šé¢è¿™æ®µä»£ç ï¼Œç»“æœå¦‚ä¸‹ã€‚ $ babel-node &gt; import * as m from &#39;./even.js&#39;; &gt; m.even(10); true &gt; m.counter 6 &gt; m.even(20) true &gt; m.counter 17 ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°nä»10å˜ä¸º0çš„è¿‡ç¨‹ä¸­ï¼Œeven()ä¸€å…±ä¼šæ‰§è¡Œ6æ¬¡ï¼Œæ‰€ä»¥å˜é‡counterç­‰äº6ã€‚ç¬¬äºŒæ¬¡è°ƒç”¨even()æ—¶ï¼Œå‚æ•°nä»20å˜ä¸º0ï¼Œeven()ä¸€å…±ä¼šæ‰§è¡Œ11æ¬¡ï¼ŒåŠ ä¸Šå‰é¢çš„6æ¬¡ï¼Œæ‰€ä»¥å˜é‡counterç­‰äº17ã€‚ è¿™ä¸ªä¾‹å­è¦æ˜¯æ”¹å†™æˆCommonJSï¼Œå°±æ ¹æœ¬æ— æ³•æ‰§è¡Œï¼Œä¼šæŠ¥é”™ã€‚ // even.js var odd = require(&#39;./odd&#39;); var counter = 0; exports.counter = counter; exports.even = function(n) { counter++; return n == 0 || odd(n - 1); } // odd.js var even = require(&#39;./even&#39;).even; module.exports = function(n) { return n != 0 &amp;&amp; even(n - 1); } ä¸Šé¢ä»£ç ä¸­ï¼Œeven.jsåŠ è½½odd.jsï¼Œè€Œodd.jsåˆå»åŠ è½½even.jsï¼Œå½¢æˆâ€œå¾ªç¯åŠ è½½â€ã€‚è¿™æ—¶ï¼Œæ‰§è¡Œå¼•æ“å°±ä¼šè¾“å‡ºeven.jså·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼ˆä¸å­˜åœ¨ä»»ä½•ç»“æœï¼‰ï¼Œæ‰€ä»¥åœ¨odd.jsä¹‹ä¸­ï¼Œå˜é‡evenç­‰äºnullï¼Œç­‰åˆ°åé¢è°ƒç”¨even(n-1)å°±ä¼šæŠ¥é”™ã€‚ $ node &gt; var m = require(&#39;./even&#39;); &gt; m.even(10) TypeError: even is not a function è·¨æ¨¡å—å¸¸é‡æœ¬ä¹¦ä»‹ç»constå‘½ä»¤çš„æ—¶å€™è¯´è¿‡ï¼Œconstå£°æ˜çš„å¸¸é‡åªåœ¨å½“å‰ä»£ç å—æœ‰æ•ˆã€‚å¦‚æœæƒ³è®¾ç½®è·¨æ¨¡å—çš„å¸¸é‡ï¼ˆå³è·¨å¤šä¸ªæ–‡ä»¶ï¼‰ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„å†™æ³•ã€‚ // constants.js æ¨¡å— export const A = 1; export const B = 3; export const C = 4; // test1.js æ¨¡å— import * as constants from &#39;./constants&#39;; console.log(constants.A); // 1 console.log(constants.B); // 3 // test2.js æ¨¡å— import {A, B} from &#39;./constants&#39;; console.log(A); // 1 console.log(B); // 3 å¦‚æœè¦ä½¿ç”¨çš„å¸¸é‡éå¸¸å¤šï¼Œå¯ä»¥å»ºä¸€ä¸ªä¸“é—¨çš„constantsç›®å½•ï¼Œå°†å„ç§å¸¸é‡å†™åœ¨ä¸åŒçš„æ–‡ä»¶é‡Œé¢ï¼Œä¿å­˜åœ¨è¯¥ç›®å½•ä¸‹ã€‚ // constants/db.js export const db = { url: &#39;http://my.couchdbserver.local:5984&#39;, admin_username: &#39;admin&#39;, admin_password: &#39;admin password&#39; }; // constants/user.js export const users = [&#39;root&#39;, &#39;admin&#39;, &#39;staff&#39;, &#39;ceo&#39;, &#39;chief&#39;, &#39;moderator&#39;]; ç„¶åï¼Œå°†è¿™äº›æ–‡ä»¶è¾“å‡ºçš„å¸¸é‡ï¼Œåˆå¹¶åœ¨index.jsé‡Œé¢ã€‚ // constants/index.js export {db} from &#39;./db&#39;; export {users} from &#39;./users&#39;; ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥åŠ è½½index.jså°±å¯ä»¥äº†ã€‚ // script.js import {db, users} from &#39;./constants&#39;; import()ä¸Šé¢è¯´è¿‡äº†ï¼Œimportè¯­å¥ä¼šè¢«JavaScriptå¼•æ“é™æ€åˆ†æï¼Œå…ˆäºæ¨¡å—å†…çš„å…¶ä»–æ¨¡å—æ‰§è¡Œï¼ˆå«åšâ€è¿æ¥â€œæ›´åˆé€‚ï¼‰ã€‚æ‰€ä»¥ï¼Œä¸‹é¢çš„ä»£ç ä¼šæŠ¥é”™ã€‚ // æŠ¥é”™ if (x === 2) { import MyModual from &#39;./myModual&#39;; } ä¸Šé¢ä»£ç ä¸­ï¼Œå¼•æ“å¤„ç†importè¯­å¥æ˜¯åœ¨æ‰§è¡Œä¹‹å‰ï¼Œæ‰€ä»¥importè¯­å¥æ”¾åœ¨ifä»£ç å—ä¹‹ä¸­æ¯«æ— æ„ä¹‰ï¼Œå› æ­¤ä¼šæŠ¥å¥æ³•é”™è¯¯ï¼Œè€Œä¸æ˜¯æ‰§è¡Œæ—¶é”™è¯¯ã€‚ è¿™æ ·çš„è®¾è®¡ï¼Œå›ºç„¶æœ‰åˆ©äºç¼–è¯‘å™¨æé«˜æ•ˆç‡ï¼Œä½†ä¹Ÿå¯¼è‡´æ— æ³•åœ¨è¿è¡Œæ—¶åŠ è½½æ¨¡å—ã€‚ä»é•¿è¿œæ¥çœ‹ï¼Œimportè¯­å¥ä¼šå–ä»£ Node çš„requireæ–¹æ³•ï¼Œä½†æ˜¯requireæ˜¯è¿è¡Œæ—¶åŠ è½½æ¨¡å—ï¼Œimportè¯­å¥æ˜¾ç„¶æ— æ³•å–ä»£è¿™ç§åŠ¨æ€åŠ è½½åŠŸèƒ½ã€‚ const path = &#39;./&#39; + fileName; const myModual = require(path); ä¸Šé¢çš„è¯­å¥å°±æ˜¯åŠ¨æ€åŠ è½½ï¼Œrequireåˆ°åº•åŠ è½½å“ªä¸€ä¸ªæ¨¡å—ï¼Œåªæœ‰è¿è¡Œæ—¶æ‰çŸ¥é“ã€‚importè¯­å¥åšä¸åˆ°è¿™ä¸€ç‚¹ã€‚ å› æ­¤ï¼Œæœ‰ä¸€ä¸ªææ¡ˆï¼Œå»ºè®®å¼•å…¥import()å‡½æ•°ï¼Œå®ŒæˆåŠ¨æ€åŠ è½½ã€‚ import(specifier) ä¸Šé¢ä»£ç ä¸­ï¼Œimportå‡½æ•°çš„å‚æ•°specifierï¼ŒæŒ‡å®šæ‰€è¦åŠ è½½çš„æ¨¡å—çš„ä½ç½®ã€‚importè¯­å¥èƒ½å¤Ÿæ¥å—ä»€ä¹ˆå‚æ•°ï¼Œimport()å‡½æ•°å°±èƒ½æ¥å—ä»€ä¹ˆå‚æ•°ï¼Œä¸¤è€…åŒºåˆ«ä¸»è¦æ˜¯åè€…ä¸ºåŠ¨æ€åŠ è½½ã€‚ import()è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ const main = document.querySelector(&#39;main&#39;); import(`./section-modules/${someVariable}.js`) .then(module =&gt; { module.loadPageInto(main); }) .catch(err =&gt; { main.textContent = err.message; }); import()å‡½æ•°å¯ä»¥ç”¨åœ¨ä»»ä½•åœ°æ–¹ï¼Œä¸ä»…ä»…æ˜¯æ¨¡å—ï¼Œéæ¨¡å—çš„è„šæœ¬ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚å®ƒæ˜¯è¿è¡Œæ—¶æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»€ä¹ˆæ—¶å€™è¿è¡Œåˆ°è¿™ä¸€å¥ï¼Œä¹Ÿä¼šåŠ è½½æŒ‡å®šçš„æ¨¡å—ã€‚å¦å¤–ï¼Œimport()å‡½æ•°ä¸æ‰€åŠ è½½çš„æ¨¡å—æ²¡æœ‰é™æ€è¿æ¥å…³ç³»ï¼Œè¿™ç‚¹ä¹Ÿæ˜¯ä¸importè¯­å¥ä¸ç›¸åŒã€‚ import()ç±»ä¼¼äº Node çš„requireæ–¹æ³•ï¼ŒåŒºåˆ«ä¸»è¦æ˜¯å‰è€…æ˜¯å¼‚æ­¥åŠ è½½ï¼Œåè€…æ˜¯åŒæ­¥åŠ è½½ã€‚ ES6æ¨¡å—çš„è½¬ç æµè§ˆå™¨ç›®å‰è¿˜ä¸æ”¯æŒES6æ¨¡å—ï¼Œä¸ºäº†ç°åœ¨å°±èƒ½ä½¿ç”¨ï¼Œå¯ä»¥å°†è½¬ä¸ºES5çš„å†™æ³•ã€‚é™¤äº†Babelå¯ä»¥ç”¨æ¥è½¬ç ä¹‹å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è½¬ç ã€‚ ES6 module transpilerES6 module transpileræ˜¯ square å…¬å¸å¼€æºçš„ä¸€ä¸ªè½¬ç å™¨ï¼Œå¯ä»¥å°† ES6 æ¨¡å—è½¬ä¸º CommonJS æ¨¡å—æˆ– AMD æ¨¡å—çš„å†™æ³•ï¼Œä»è€Œåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚ é¦–å…ˆï¼Œå®‰è£…è¿™ä¸ªè½¬ç›å™¨ã€‚ $ npm install -g es6-module-transpiler ç„¶åï¼Œä½¿ç”¨compile-modules convertå‘½ä»¤ï¼Œå°† ES6 æ¨¡å—æ–‡ä»¶è½¬ç ã€‚ $ compile-modules convert file1.js file2.js -oå‚æ•°å¯ä»¥æŒ‡å®šè½¬ç åçš„æ–‡ä»¶åã€‚ $ compile-modules convert -o out.js file1.js SystemJSå¦ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ SystemJSã€‚å®ƒæ˜¯ä¸€ä¸ªå«ç‰‡åº“ï¼ˆpolyfillï¼‰ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨å†…åŠ è½½ ES6 æ¨¡å—ã€AMD æ¨¡å—å’Œ CommonJS æ¨¡å—ï¼Œå°†å…¶è½¬ä¸º ES5 æ ¼å¼ã€‚å®ƒåœ¨åå°è°ƒç”¨çš„æ˜¯ Google çš„ Traceur è½¬ç å™¨ã€‚ ä½¿ç”¨æ—¶ï¼Œå…ˆåœ¨ç½‘é¡µå†…è½½å…¥system.jsæ–‡ä»¶ã€‚ &lt;script src=&quot;system.js&quot;&gt;&lt;/script&gt; ç„¶åï¼Œä½¿ç”¨System.importæ–¹æ³•åŠ è½½æ¨¡å—æ–‡ä»¶ã€‚ &lt;script&gt; System.import(&#39;./app.js&#39;); &lt;/script&gt; ä¸Šé¢ä»£ç ä¸­çš„./appï¼ŒæŒ‡çš„æ˜¯å½“å‰ç›®å½•ä¸‹çš„app.jsæ–‡ä»¶ã€‚å®ƒå¯ä»¥æ˜¯ES6æ¨¡å—æ–‡ä»¶ï¼ŒSystem.importä¼šè‡ªåŠ¨å°†å…¶è½¬ç ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSystem.importä½¿ç”¨å¼‚æ­¥åŠ è½½ï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¯ä»¥é’ˆå¯¹è¿™ä¸ªå¯¹è±¡ç¼–ç¨‹ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ¨¡å—æ–‡ä»¶ã€‚ // app/es6-file.js: export class q { constructor() { this.es6 = &#39;hello&#39;; } } ç„¶åï¼Œåœ¨ç½‘é¡µå†…åŠ è½½è¿™ä¸ªæ¨¡å—æ–‡ä»¶ã€‚ &lt;script&gt; System.import(&#39;app/es6-file&#39;).then(function(m) { console.log(new m.q().es6); // hello }); &lt;/script&gt; ä¸Šé¢ä»£ç ä¸­ï¼ŒSystem.importæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ç”¨thenæ–¹æ³•æŒ‡å®šå›è°ƒå‡½æ•°ã€‚","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Module","slug":"Module","permalink":"https://microzz.com/tags/Module/"}]},{"title":"ES6ä¸­Decoratorä¿®é¥°å™¨","date":"2017-01-17T08:00:53.000Z","path":"2017/01/17/decorator/","text":"ä¿®é¥°å™¨ç±»çš„ä¿®é¥°ä¿®é¥°å™¨ï¼ˆDecoratorï¼‰æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥ä¿®æ”¹ç±»çš„è¡Œä¸ºã€‚è¿™æ˜¯ES7çš„ä¸€ä¸ªææ¡ˆï¼Œç›®å‰Babelè½¬ç å™¨å·²ç»æ”¯æŒã€‚ ä¿®é¥°å™¨å¯¹ç±»çš„è¡Œä¸ºçš„æ”¹å˜ï¼Œæ˜¯ä»£ç ç¼–è¯‘æ—¶å‘ç”Ÿçš„ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚è¿™æ„å‘³ç€ï¼Œä¿®é¥°å™¨èƒ½åœ¨ç¼–è¯‘é˜¶æ®µè¿è¡Œä»£ç ã€‚ function testable(target) { target.isTestable = true; } @testable class MyTestableClass {} console.log(MyTestableClass.isTestable) // true ä¸Šé¢ä»£ç ä¸­ï¼Œ@testableå°±æ˜¯ä¸€ä¸ªä¿®é¥°å™¨ã€‚å®ƒä¿®æ”¹äº†MyTestableClassè¿™ä¸ªç±»çš„è¡Œä¸ºï¼Œä¸ºå®ƒåŠ ä¸Šäº†é™æ€å±æ€§isTestableã€‚ åŸºæœ¬ä¸Šï¼Œä¿®é¥°å™¨çš„è¡Œä¸ºå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚ @decorator class A {} // ç­‰åŒäº class A {} A = decorator(A) || A; ä¹Ÿå°±æ˜¯è¯´ï¼Œä¿®é¥°å™¨æœ¬è´¨å°±æ˜¯ç¼–è¯‘æ—¶æ‰§è¡Œçš„å‡½æ•°ã€‚ ä¿®é¥°å™¨å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æ‰€è¦ä¿®é¥°çš„ç›®æ ‡ç±»ã€‚ function testable(target) { // ... } ä¸Šé¢ä»£ç ä¸­ï¼Œtestableå‡½æ•°çš„å‚æ•°targetï¼Œå°±æ˜¯ä¼šè¢«ä¿®é¥°çš„ç±»ã€‚ å¦‚æœè§‰å¾—ä¸€ä¸ªå‚æ•°ä¸å¤Ÿç”¨ï¼Œå¯ä»¥åœ¨ä¿®é¥°å™¨å¤–é¢å†å°è£…ä¸€å±‚å‡½æ•°ã€‚ function testable(isTestable) { return function(target) { target.isTestable = isTestable; } } @testable(true) class MyTestableClass {} MyTestableClass.isTestable // true @testable(false) class MyClass {} MyClass.isTestable // false ä¸Šé¢ä»£ç ä¸­ï¼Œä¿®é¥°å™¨testableå¯ä»¥æ¥å—å‚æ•°ï¼Œè¿™å°±ç­‰äºå¯ä»¥ä¿®æ”¹ä¿®é¥°å™¨çš„è¡Œä¸ºã€‚ å‰é¢çš„ä¾‹å­æ˜¯ä¸ºç±»æ·»åŠ ä¸€ä¸ªé™æ€å±æ€§ï¼Œå¦‚æœæƒ³æ·»åŠ å®ä¾‹å±æ€§ï¼Œå¯ä»¥é€šè¿‡ç›®æ ‡ç±»çš„prototypeå¯¹è±¡æ“ä½œã€‚ function testable(target) { target.prototype.isTestable = true; } @testable class MyTestableClass {} let obj = new MyTestableClass(); obj.isTestable // true ä¸Šé¢ä»£ç ä¸­ï¼Œä¿®é¥°å™¨å‡½æ•°testableæ˜¯åœ¨ç›®æ ‡ç±»çš„prototypeå¯¹è±¡ä¸Šæ·»åŠ å±æ€§ï¼Œå› æ­¤å°±å¯ä»¥åœ¨å®ä¾‹ä¸Šè°ƒç”¨ã€‚ ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚ // mixins.js export function mixins(...list) { return function (target) { Object.assign(target.prototype, ...list) } } // main.js import { mixins } from &#39;./mixins&#39; const Foo = { foo() { console.log(&#39;foo&#39;) } }; @mixins(Foo) class MyClass {} let obj = new MyClass(); obj.foo() // &#39;foo&#39; ä¸Šé¢ä»£ç é€šè¿‡ä¿®é¥°å™¨mixinsï¼ŒæŠŠFooç±»çš„æ–¹æ³•æ·»åŠ åˆ°äº†MyClassçš„å®ä¾‹ä¸Šé¢ã€‚å¯ä»¥ç”¨Object.assign()æ¨¡æ‹Ÿè¿™ä¸ªåŠŸèƒ½ã€‚ const Foo = { foo() { console.log(&#39;foo&#39;) } }; class MyClass {} Object.assign(MyClass.prototype, Foo); let obj = new MyClass(); obj.foo() // &#39;foo&#39; æ–¹æ³•çš„ä¿®é¥°ä¿®é¥°å™¨ä¸ä»…å¯ä»¥ä¿®é¥°ç±»ï¼Œè¿˜å¯ä»¥ä¿®é¥°ç±»çš„å±æ€§ã€‚ class Person { @readonly name() { return `${this.first} ${this.last}` } } ä¸Šé¢ä»£ç ä¸­ï¼Œä¿®é¥°å™¨readonlyç”¨æ¥ä¿®é¥°â€œç±»â€çš„nameæ–¹æ³•ã€‚ æ­¤æ—¶ï¼Œä¿®é¥°å™¨å‡½æ•°ä¸€å…±å¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰€è¦ä¿®é¥°çš„ç›®æ ‡å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ‰€è¦ä¿®é¥°çš„å±æ€§åï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¯¥å±æ€§çš„æè¿°å¯¹è±¡ã€‚ function readonly(target, name, descriptor){ // descriptorå¯¹è±¡åŸæ¥çš„å€¼å¦‚ä¸‹ // { // value: specifiedFunction, // enumerable: false, // configurable: true, // writable: true // }; descriptor.writable = false; return descriptor; } readonly(Person.prototype, &#39;name&#39;, descriptor); // ç±»ä¼¼äº Object.defineProperty(Person.prototype, &#39;name&#39;, descriptor); ä¸Šé¢ä»£ç è¯´æ˜ï¼Œä¿®é¥°å™¨ï¼ˆreadonlyï¼‰ä¼šä¿®æ”¹å±æ€§çš„æè¿°å¯¹è±¡ï¼ˆdescriptorï¼‰ï¼Œç„¶åè¢«ä¿®æ”¹çš„æè¿°å¯¹è±¡å†ç”¨æ¥å®šä¹‰å±æ€§ã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œä¿®æ”¹å±æ€§æè¿°å¯¹è±¡çš„enumerableå±æ€§ï¼Œä½¿å¾—è¯¥å±æ€§ä¸å¯éå†ã€‚ class Person { @nonenumerable get kidCount() { return this.children.length; } } function nonenumerable(target, name, descriptor) { descriptor.enumerable = false; return descriptor; } ä¸‹é¢çš„@logä¿®é¥°å™¨ï¼Œå¯ä»¥èµ·åˆ°è¾“å‡ºæ—¥å¿—çš„ä½œç”¨ã€‚ class Math { @log add(a, b) { return a + b; } } function log(target, name, descriptor) { var oldValue = descriptor.value; descriptor.value = function() { console.log(`Calling &quot;${name}&quot; with`, arguments); return oldValue.apply(null, arguments); }; return descriptor; } const math = new Math(); // passed parameters should get logged now math.add(2, 4); ä¸Šé¢ä»£ç ä¸­ï¼Œ@logä¿®é¥°å™¨çš„ä½œç”¨å°±æ˜¯åœ¨æ‰§è¡ŒåŸå§‹çš„æ“ä½œä¹‹å‰ï¼Œæ‰§è¡Œä¸€æ¬¡console.logï¼Œä»è€Œè¾¾åˆ°è¾“å‡ºæ—¥å¿—çš„ç›®çš„ã€‚ ä¿®é¥°å™¨æœ‰æ³¨é‡Šçš„ä½œç”¨ã€‚ @testable class Person { @readonly @nonenumerable name() { return `${this.first} ${this.last}` } } ä»ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸€çœ¼å°±èƒ½çœ‹å‡ºï¼ŒPersonç±»æ˜¯å¯æµ‹è¯•çš„ï¼Œè€Œnameæ–¹æ³•æ˜¯åªè¯»å’Œä¸å¯æšä¸¾çš„ã€‚ å¦‚æœåŒä¸€ä¸ªæ–¹æ³•æœ‰å¤šä¸ªä¿®é¥°å™¨ï¼Œä¼šåƒå‰¥æ´‹è‘±ä¸€æ ·ï¼Œå…ˆä»å¤–åˆ°å†…è¿›å…¥ï¼Œç„¶åç”±å†…å‘å¤–æ‰§è¡Œã€‚ function dec(id){ console.log(&#39;evaluated&#39;, id); return (target, property, descriptor) =&gt; console.log(&#39;executed&#39;, id); } class Example { @dec(1) @dec(2) method(){} } // evaluated 1 // evaluated 2 // executed 2 // executed 1 ä¸Šé¢ä»£ç ä¸­ï¼Œå¤–å±‚ä¿®é¥°å™¨@dec(1)å…ˆè¿›å…¥ï¼Œä½†æ˜¯å†…å±‚ä¿®é¥°å™¨@dec(2)å…ˆæ‰§è¡Œã€‚ é™¤äº†æ³¨é‡Šï¼Œä¿®é¥°å™¨è¿˜èƒ½ç”¨æ¥ç±»å‹æ£€æŸ¥ã€‚æ‰€ä»¥ï¼Œå¯¹äºç±»æ¥è¯´ï¼Œè¿™é¡¹åŠŸèƒ½ç›¸å½“æœ‰ç”¨ã€‚ä»é•¿æœŸæ¥çœ‹ï¼Œå®ƒå°†æ˜¯JavaScriptä»£ç é™æ€åˆ†æçš„é‡è¦å·¥å…·ã€‚ ä¸ºä»€ä¹ˆä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ï¼Ÿä¿®é¥°å™¨åªèƒ½ç”¨äºç±»å’Œç±»çš„æ–¹æ³•ï¼Œä¸èƒ½ç”¨äºå‡½æ•°ï¼Œå› ä¸ºå­˜åœ¨å‡½æ•°æå‡ã€‚ var counter = 0; var add = function () { counter++; }; @add function foo() { } ä¸Šé¢çš„ä»£ç ï¼Œæ„å›¾æ˜¯æ‰§è¡Œåcounterç­‰äº1ï¼Œä½†æ˜¯å®é™…ä¸Šç»“æœæ˜¯counterç­‰äº0ã€‚å› ä¸ºå‡½æ•°æå‡ï¼Œä½¿å¾—å®é™…æ‰§è¡Œçš„ä»£ç æ˜¯ä¸‹é¢è¿™æ ·ã€‚ @add function foo() { } var counter; var add; counter = 0; add = function () { counter++; }; ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ var readOnly = require(&quot;some-decorator&quot;); @readOnly function foo() { } ä¸Šé¢ä»£ç ä¹Ÿæœ‰é—®é¢˜ï¼Œå› ä¸ºå®é™…æ‰§è¡Œæ˜¯ä¸‹é¢è¿™æ ·ã€‚ var readOnly; @readOnly function foo() { } readOnly = require(&quot;some-decorator&quot;); æ€»ä¹‹ï¼Œç”±äºå­˜åœ¨å‡½æ•°æå‡ï¼Œä½¿å¾—ä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ã€‚ç±»æ˜¯ä¸ä¼šæå‡çš„ï¼Œæ‰€ä»¥å°±æ²¡æœ‰è¿™æ–¹é¢çš„é—®é¢˜ã€‚ core-decorators.jscore-decorators.jsæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæä¾›äº†å‡ ä¸ªå¸¸è§çš„ä¿®é¥°å™¨ï¼Œé€šè¿‡å®ƒå¯ä»¥æ›´å¥½åœ°ç†è§£ä¿®é¥°å™¨ã€‚ ï¼ˆ1ï¼‰@autobind autobindä¿®é¥°å™¨ä½¿å¾—æ–¹æ³•ä¸­çš„thiså¯¹è±¡ï¼Œç»‘å®šåŸå§‹å¯¹è±¡ã€‚ import { autobind } from &#39;core-decorators&#39;; class Person { @autobind getPerson() { return this; } } let person = new Person(); let getPerson = person.getPerson; getPerson() === person; // true ï¼ˆ2ï¼‰@readonly readonlyä¿®é¥°å™¨ä½¿å¾—å±æ€§æˆ–æ–¹æ³•ä¸å¯å†™ã€‚ import { readonly } from &#39;core-decorators&#39;; class Meal { @readonly entree = &#39;steak&#39;; } var dinner = new Meal(); dinner.entree = &#39;salmon&#39;; // Cannot assign to read only property &#39;entree&#39; of [object Object] ï¼ˆ3ï¼‰@override overrideä¿®é¥°å™¨æ£€æŸ¥å­ç±»çš„æ–¹æ³•ï¼Œæ˜¯å¦æ­£ç¡®è¦†ç›–äº†çˆ¶ç±»çš„åŒåæ–¹æ³•ï¼Œå¦‚æœä¸æ­£ç¡®ä¼šæŠ¥é”™ã€‚ import { override } from &#39;core-decorators&#39;; class Parent { speak(first, second) {} } class Child extends Parent { @override speak() {} // SyntaxError: Child#speak() does not properly override Parent#speak(first, second) } // or class Child extends Parent { @override speaks() {} // SyntaxError: No descriptor matching Child#speaks() was found on the prototype chain. // // Did you mean &quot;speak&quot;? } ï¼ˆ4ï¼‰@deprecate (åˆ«å@deprecated) deprecateæˆ–deprecatedä¿®é¥°å™¨åœ¨æ§åˆ¶å°æ˜¾ç¤ºä¸€æ¡è­¦å‘Šï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•å°†åºŸé™¤ã€‚ import { deprecate } from &#39;core-decorators&#39;; class Person { @deprecate facepalm() {} @deprecate(&#39;We stopped facepalming&#39;) facepalmHard() {} @deprecate(&#39;We stopped facepalming&#39;, { url: &#39;http://knowyourmeme.com/memes/facepalm&#39; }) facepalmHarder() {} } let person = new Person(); person.facepalm(); // DEPRECATION Person#facepalm: This function will be removed in future versions. person.facepalmHard(); // DEPRECATION Person#facepalmHard: We stopped facepalming person.facepalmHarder(); // DEPRECATION Person#facepalmHarder: We stopped facepalming // // See http://knowyourmeme.com/memes/facepalm for more details. // ï¼ˆ5ï¼‰@suppressWarnings suppressWarningsä¿®é¥°å™¨æŠ‘åˆ¶decoratedä¿®é¥°å™¨å¯¼è‡´çš„console.warn()è°ƒç”¨ã€‚ä½†æ˜¯ï¼Œå¼‚æ­¥ä»£ç å‘å‡ºçš„è°ƒç”¨é™¤å¤–ã€‚ import { suppressWarnings } from &#39;core-decorators&#39;; class Person { @deprecated facepalm() {} @suppressWarnings facepalmWithoutWarning() { this.facepalm(); } } let person = new Person(); person.facepalmWithoutWarning(); // no warning is logged ä½¿ç”¨ä¿®é¥°å™¨å®ç°è‡ªåŠ¨å‘å¸ƒäº‹ä»¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¿®é¥°å™¨ï¼Œä½¿å¾—å¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œè‡ªåŠ¨å‘å‡ºä¸€ä¸ªäº‹ä»¶ã€‚ import postal from &quot;postal/lib/postal.lodash&quot;; export default function publish(topic, channel) { return function(target, name, descriptor) { const fn = descriptor.value; descriptor.value = function() { let value = fn.apply(this, arguments); postal.channel(channel || target.channel || &quot;/&quot;).publish(topic, value); }; }; } ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸ºpublishçš„ä¿®é¥°å™¨ï¼Œå®ƒé€šè¿‡æ”¹å†™descriptor.valueï¼Œä½¿å¾—åŸæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨å‘å‡ºä¸€ä¸ªäº‹ä»¶ã€‚å®ƒä½¿ç”¨çš„äº‹ä»¶â€œå‘å¸ƒ/è®¢é˜…â€åº“æ˜¯Postal.jsã€‚ å®ƒçš„ç”¨æ³•å¦‚ä¸‹ã€‚ import publish from &quot;path/to/decorators/publish&quot;; class FooComponent { @publish(&quot;foo.some.message&quot;, &quot;component&quot;) someMethod() { return { my: &quot;data&quot; }; } @publish(&quot;foo.some.other&quot;) anotherMethod() { // ... } } ä»¥åï¼Œåªè¦è°ƒç”¨someMethodæˆ–è€…anotherMethodï¼Œå°±ä¼šè‡ªåŠ¨å‘å‡ºä¸€ä¸ªäº‹ä»¶ã€‚ let foo = new FooComponent(); foo.someMethod() // åœ¨&quot;component&quot;é¢‘é“å‘å¸ƒ&quot;foo.some.message&quot;äº‹ä»¶ï¼Œé™„å¸¦çš„æ•°æ®æ˜¯{ my: &quot;data&quot; } foo.anotherMethod() // åœ¨&quot;/&quot;é¢‘é“å‘å¸ƒ&quot;foo.some.other&quot;äº‹ä»¶ï¼Œä¸é™„å¸¦æ•°æ® Mixinåœ¨ä¿®é¥°å™¨çš„åŸºç¡€ä¸Šï¼Œå¯ä»¥å®ç°Mixinæ¨¡å¼ã€‚æ‰€è°“Mixinæ¨¡å¼ï¼Œå°±æ˜¯å¯¹è±¡ç»§æ‰¿çš„ä¸€ç§æ›¿ä»£æ–¹æ¡ˆï¼Œä¸­æ–‡è¯‘ä¸ºâ€œæ··å…¥â€ï¼ˆmix inï¼‰ï¼Œæ„ä¸ºåœ¨ä¸€ä¸ªå¯¹è±¡ä¹‹ä¸­æ··å…¥å¦å¤–ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚ è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚ const Foo = { foo() { console.log(&#39;foo&#39;) } }; class MyClass {} Object.assign(MyClass.prototype, Foo); let obj = new MyClass(); obj.foo() // &#39;foo&#39; ä¸Šé¢ä»£ç ä¹‹ä¸­ï¼Œå¯¹è±¡Fooæœ‰ä¸€ä¸ªfooæ–¹æ³•ï¼Œé€šè¿‡Object.assignæ–¹æ³•ï¼Œå¯ä»¥å°†fooæ–¹æ³•â€œæ··å…¥â€MyClassç±»ï¼Œå¯¼è‡´MyClassçš„å®ä¾‹objå¯¹è±¡éƒ½å…·æœ‰fooæ–¹æ³•ã€‚è¿™å°±æ˜¯â€œæ··å…¥â€æ¨¡å¼çš„ä¸€ä¸ªç®€å•å®ç°ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬éƒ¨ç½²ä¸€ä¸ªé€šç”¨è„šæœ¬mixins.jsï¼Œå°†mixinå†™æˆä¸€ä¸ªä¿®é¥°å™¨ã€‚ export function mixins(...list) { return function (target) { Object.assign(target.prototype, ...list); }; } ç„¶åï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸Šé¢è¿™ä¸ªä¿®é¥°å™¨ï¼Œä¸ºç±»â€œæ··å…¥â€å„ç§æ–¹æ³•ã€‚ import { mixins } from &#39;./mixins&#39;; const Foo = { foo() { console.log(&#39;foo&#39;) } }; @mixins(Foo) class MyClass {} let obj = new MyClass(); obj.foo() // &quot;foo&quot; é€šè¿‡mixinsè¿™ä¸ªä¿®é¥°å™¨ï¼Œå®ç°äº†åœ¨MyClassç±»ä¸Šé¢â€œæ··å…¥â€Fooå¯¹è±¡çš„fooæ–¹æ³•ã€‚ ä¸è¿‡ï¼Œä¸Šé¢çš„æ–¹æ³•ä¼šæ”¹å†™MyClassç±»çš„prototypeå¯¹è±¡ï¼Œå¦‚æœä¸å–œæ¬¢è¿™ä¸€ç‚¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç±»çš„ç»§æ‰¿å®ç°mixinã€‚ class MyClass extends MyBaseClass { /* ... */ } ä¸Šé¢ä»£ç ä¸­ï¼ŒMyClassç»§æ‰¿äº†MyBaseClassã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨MyClassé‡Œé¢â€œæ··å…¥â€ä¸€ä¸ªfooæ–¹æ³•ï¼Œä¸€ä¸ªåŠæ³•æ˜¯åœ¨MyClasså’ŒMyBaseClassä¹‹é—´æ’å…¥ä¸€ä¸ªæ··å…¥ç±»ï¼Œè¿™ä¸ªç±»å…·æœ‰fooæ–¹æ³•ï¼Œå¹¶ä¸”ç»§æ‰¿äº†MyBaseClassçš„æ‰€æœ‰æ–¹æ³•ï¼Œç„¶åMyClasså†ç»§æ‰¿è¿™ä¸ªç±»ã€‚ let MyMixin = (superclass) =&gt; class extends superclass { foo() { console.log(&#39;foo from MyMixin&#39;); } }; ä¸Šé¢ä»£ç ä¸­ï¼ŒMyMixinæ˜¯ä¸€ä¸ªæ··å…¥ç±»ç”Ÿæˆå™¨ï¼Œæ¥å—superclassä½œä¸ºå‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªç»§æ‰¿superclassçš„å­ç±»ï¼Œè¯¥å­ç±»åŒ…å«ä¸€ä¸ªfooæ–¹æ³•ã€‚ æ¥ç€ï¼Œç›®æ ‡ç±»å†å»ç»§æ‰¿è¿™ä¸ªæ··å…¥ç±»ï¼Œå°±è¾¾åˆ°äº†â€œæ··å…¥â€fooæ–¹æ³•çš„ç›®çš„ã€‚ class MyClass extends MyMixin(MyBaseClass) { /* ... */ } let c = new MyClass(); c.foo(); // &quot;foo from MyMixin&quot; å¦‚æœéœ€è¦â€œæ··å…¥â€å¤šä¸ªæ–¹æ³•ï¼Œå°±ç”Ÿæˆå¤šä¸ªæ··å…¥ç±»ã€‚ class MyClass extends Mixin1(Mixin2(MyBaseClass)) { /* ... */ } è¿™ç§å†™æ³•çš„ä¸€ä¸ªå¥½å¤„ï¼Œæ˜¯å¯ä»¥è°ƒç”¨superï¼Œå› æ­¤å¯ä»¥é¿å…åœ¨â€œæ··å…¥â€è¿‡ç¨‹ä¸­è¦†ç›–çˆ¶ç±»çš„åŒåæ–¹æ³•ã€‚ let Mixin1 = (superclass) =&gt; class extends superclass { foo() { console.log(&#39;foo from Mixin1&#39;); if (super.foo) super.foo(); } }; let Mixin2 = (superclass) =&gt; class extends superclass { foo() { console.log(&#39;foo from Mixin2&#39;); if (super.foo) super.foo(); } }; class S { foo() { console.log(&#39;foo from S&#39;); } } class C extends Mixin1(Mixin2(S)) { foo() { console.log(&#39;foo from C&#39;); super.foo(); } } ä¸Šé¢ä»£ç ä¸­ï¼Œæ¯ä¸€æ¬¡æ··å…¥å‘ç”Ÿæ—¶ï¼Œéƒ½è°ƒç”¨äº†çˆ¶ç±»çš„super.fooæ–¹æ³•ï¼Œå¯¼è‡´çˆ¶ç±»çš„åŒåæ–¹æ³•æ²¡æœ‰è¢«è¦†ç›–ï¼Œè¡Œä¸ºè¢«ä¿ç•™äº†ä¸‹æ¥ã€‚ new C().foo() // foo from C // foo from Mixin1 // foo from Mixin2 // foo from S TraitTraitä¹Ÿæ˜¯ä¸€ç§ä¿®é¥°å™¨ï¼Œæ•ˆæœä¸Mixinç±»ä¼¼ï¼Œä½†æ˜¯æä¾›æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚é˜²æ­¢åŒåæ–¹æ³•çš„å†²çªã€æ’é™¤æ··å…¥æŸäº›æ–¹æ³•ã€ä¸ºæ··å…¥çš„æ–¹æ³•èµ·åˆ«åç­‰ç­‰ã€‚ ä¸‹é¢é‡‡ç”¨traits-decoratorè¿™ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—ä½œä¸ºä¾‹å­ã€‚è¿™ä¸ªæ¨¡å—æä¾›çš„traitsä¿®é¥°å™¨ï¼Œä¸ä»…å¯ä»¥æ¥å—å¯¹è±¡ï¼Œè¿˜å¯ä»¥æ¥å—ES6ç±»ä½œä¸ºå‚æ•°ã€‚ import { traits } from &#39;traits-decorator&#39;; class TFoo { foo() { console.log(&#39;foo&#39;) } } const TBar = { bar() { console.log(&#39;bar&#39;) } }; @traits(TFoo, TBar) class MyClass { } let obj = new MyClass(); obj.foo() // foo obj.bar() // bar ä¸Šé¢ä»£ç ä¸­ï¼Œé€šè¿‡traitsä¿®é¥°å™¨ï¼Œåœ¨MyClassç±»ä¸Šé¢â€œæ··å…¥â€äº†TFooç±»çš„fooæ–¹æ³•å’ŒTBarå¯¹è±¡çš„baræ–¹æ³•ã€‚ Traitä¸å…è®¸â€œæ··å…¥â€åŒåæ–¹æ³•ã€‚ import { traits } from &#39;traits-decorator&#39;; class TFoo { foo() { console.log(&#39;foo&#39;) } } const TBar = { bar() { console.log(&#39;bar&#39;) }, foo() { console.log(&#39;foo&#39;) } }; @traits(TFoo, TBar) class MyClass { } // æŠ¥é”™ // throw new Error(&#39;Method named: &#39; + methodName + &#39; is defined twice.&#39;); // ^ // Error: Method named: foo is defined twice. ä¸Šé¢ä»£ç ä¸­ï¼ŒTFooå’ŒTBaréƒ½æœ‰fooæ–¹æ³•ï¼Œç»“æœtraitsä¿®é¥°å™¨æŠ¥é”™ã€‚ ä¸€ç§è§£å†³æ–¹æ³•æ˜¯æ’é™¤TBarçš„fooæ–¹æ³•ã€‚ import { traits, excludes } from &#39;traits-decorator&#39;; class TFoo { foo() { console.log(&#39;foo&#39;) } } const TBar = { bar() { console.log(&#39;bar&#39;) }, foo() { console.log(&#39;foo&#39;) } }; @traits(TFoo, TBar::excludes(&#39;foo&#39;)) class MyClass { } let obj = new MyClass(); obj.foo() // foo obj.bar() // bar ä¸Šé¢ä»£ç ä½¿ç”¨ç»‘å®šè¿ç®—ç¬¦ï¼ˆ::ï¼‰åœ¨TBarä¸Šæ’é™¤fooæ–¹æ³•ï¼Œæ··å…¥æ—¶å°±ä¸ä¼šæŠ¥é”™äº†ã€‚ å¦ä¸€ç§æ–¹æ³•æ˜¯ä¸ºTBarçš„fooæ–¹æ³•èµ·ä¸€ä¸ªåˆ«åã€‚ import { traits, alias } from &#39;traits-decorator&#39;; class TFoo { foo() { console.log(&#39;foo&#39;) } } const TBar = { bar() { console.log(&#39;bar&#39;) }, foo() { console.log(&#39;foo&#39;) } }; @traits(TFoo, TBar::alias({foo: &#39;aliasFoo&#39;})) class MyClass { } let obj = new MyClass(); obj.foo() // foo obj.aliasFoo() // foo obj.bar() // bar ä¸Šé¢ä»£ç ä¸ºTBarçš„fooæ–¹æ³•èµ·äº†åˆ«åaliasFooï¼Œäºæ˜¯MyClassä¹Ÿå¯ä»¥æ··å…¥TBarçš„fooæ–¹æ³•äº†ã€‚ aliaså’Œexcludesæ–¹æ³•ï¼Œå¯ä»¥ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚ @traits(TExample::excludes(&#39;foo&#39;,&#39;bar&#39;)::alias({baz:&#39;exampleBaz&#39;})) class MyClass {} ä¸Šé¢ä»£ç æ’é™¤äº†TExampleçš„fooæ–¹æ³•å’Œbaræ–¹æ³•ï¼Œä¸ºbazæ–¹æ³•èµ·äº†åˆ«åexampleBazã€‚ asæ–¹æ³•åˆ™ä¸ºä¸Šé¢çš„ä»£ç æä¾›äº†å¦ä¸€ç§å†™æ³•ã€‚ @traits(TExample::as({excludes:[&#39;foo&#39;, &#39;bar&#39;], alias: {baz: &#39;exampleBaz&#39;}})) class MyClass {} Babelè½¬ç å™¨çš„æ”¯æŒç›®å‰ï¼ŒBabelè½¬ç å™¨å·²ç»æ”¯æŒDecoratorã€‚ é¦–å…ˆï¼Œå®‰è£…babel-coreå’Œbabel-plugin-transform-decoratorsã€‚ç”±äºåè€…åŒ…æ‹¬åœ¨babel-preset-stage-0ä¹‹ä¸­ï¼Œæ‰€ä»¥æ”¹ä¸ºå®‰è£…babel-preset-stage-0äº¦å¯ã€‚ $ npm install babel-core babel-plugin-transform-decorators ç„¶åï¼Œè®¾ç½®é…ç½®æ–‡ä»¶.babelrcã€‚ { &quot;plugins&quot;: [&quot;transform-decorators&quot;] } è¿™æ—¶ï¼ŒBabelå°±å¯ä»¥å¯¹Decoratorè½¬ç äº†ã€‚ è„šæœ¬ä¸­æ‰“å¼€çš„å‘½ä»¤å¦‚ä¸‹ã€‚ babel.transform(&quot;code&quot;, {plugins: [&quot;transform-decorators&quot;]}) Babelçš„å®˜æ–¹ç½‘ç«™æä¾›ä¸€ä¸ªåœ¨çº¿è½¬ç å™¨ï¼Œåªè¦å‹¾é€‰Experimentalï¼Œå°±èƒ½æ”¯æŒDecoratorçš„åœ¨çº¿è½¬ç ã€‚ æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Decorator","slug":"Decorator","permalink":"https://microzz.com/tags/Decorator/"}]},{"title":"ES6ä¸­çš„Class","date":"2017-01-16T08:40:45.000Z","path":"2017/01/16/class/","text":"ClassClassåŸºæœ¬è¯­æ³•æ¦‚è¿°JavaScriptè¯­è¨€çš„ä¼ ç»Ÿæ–¹æ³•æ˜¯é€šè¿‡æ„é€ å‡½æ•°ï¼Œå®šä¹‰å¹¶ç”Ÿæˆæ–°å¯¹è±¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ function Point(x, y) { this.x = x; this.y = y; } Point.prototype.toString = function () { return &#39;(&#39; + this.x + &#39;, &#39; + this.y + &#39;)&#39;; }; var p = new Point(1, 2); ä¸Šé¢è¿™ç§å†™æ³•è·Ÿä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆæ¯”å¦‚C++å’ŒJavaï¼‰å·®å¼‚å¾ˆå¤§ï¼Œå¾ˆå®¹æ˜“è®©æ–°å­¦ä¹ è¿™é—¨è¯­è¨€çš„ç¨‹åºå‘˜æ„Ÿåˆ°å›°æƒ‘ã€‚ ES6æä¾›äº†æ›´æ¥è¿‘ä¼ ç»Ÿè¯­è¨€çš„å†™æ³•ï¼Œå¼•å…¥äº†Classï¼ˆç±»ï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œä½œä¸ºå¯¹è±¡çš„æ¨¡æ¿ã€‚é€šè¿‡classå…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ç±»ã€‚åŸºæœ¬ä¸Šï¼ŒES6çš„classå¯ä»¥çœ‹ä½œåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒçš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼ŒES5éƒ½å¯ä»¥åšåˆ°ï¼Œæ–°çš„classå†™æ³•åªæ˜¯è®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•è€Œå·²ã€‚ä¸Šé¢çš„ä»£ç ç”¨ES6çš„â€œç±»â€æ”¹å†™ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚ //å®šä¹‰ç±» class Point { constructor(x, y) { this.x = x; this.y = y; } toString() { return &#39;(&#39; + this.x + &#39;, &#39; + this.y + &#39;)&#39;; } } ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªâ€œç±»â€ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰ä¸€ä¸ªconstructoræ–¹æ³•ï¼Œè¿™å°±æ˜¯æ„é€ æ–¹æ³•ï¼Œè€Œthiså…³é”®å­—åˆ™ä»£è¡¨å®ä¾‹å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒES5çš„æ„é€ å‡½æ•°Pointï¼Œå¯¹åº”ES6çš„Pointç±»çš„æ„é€ æ–¹æ³•ã€‚ Pointç±»é™¤äº†æ„é€ æ–¹æ³•ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ªtoStringæ–¹æ³•ã€‚æ³¨æ„ï¼Œå®šä¹‰â€œç±»â€çš„æ–¹æ³•çš„æ—¶å€™ï¼Œå‰é¢ä¸éœ€è¦åŠ ä¸Šfunctionè¿™ä¸ªå…³é”®å­—ï¼Œç›´æ¥æŠŠå‡½æ•°å®šä¹‰æ”¾è¿›å»äº†å°±å¯ä»¥äº†ã€‚å¦å¤–ï¼Œæ–¹æ³•ä¹‹é—´ä¸éœ€è¦é€—å·åˆ†éš”ï¼ŒåŠ äº†ä¼šæŠ¥é”™ã€‚ ES6çš„ç±»ï¼Œå®Œå…¨å¯ä»¥çœ‹ä½œæ„é€ å‡½æ•°çš„å¦ä¸€ç§å†™æ³•ã€‚ class Point { // ... } typeof Point // &quot;function&quot; Point === Point.prototype.constructor // true ä¸Šé¢ä»£ç è¡¨æ˜ï¼Œç±»çš„æ•°æ®ç±»å‹å°±æ˜¯å‡½æ•°ï¼Œç±»æœ¬èº«å°±æŒ‡å‘æ„é€ å‡½æ•°ã€‚ ä½¿ç”¨çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ç›´æ¥å¯¹ç±»ä½¿ç”¨newå‘½ä»¤ï¼Œè·Ÿæ„é€ å‡½æ•°çš„ç”¨æ³•å®Œå…¨ä¸€è‡´ã€‚ class Bar { doStuff() { console.log(&#39;stuff&#39;); } } var b = new Bar(); b.doStuff() // &quot;stuff&quot; æ„é€ å‡½æ•°çš„prototypeå±æ€§ï¼Œåœ¨ES6çš„â€œç±»â€ä¸Šé¢ç»§ç»­å­˜åœ¨ã€‚äº‹å®ä¸Šï¼Œç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨ç±»çš„prototypeå±æ€§ä¸Šé¢ã€‚ class Point { constructor(){ // ... } toString(){ // ... } toValue(){ // ... } } // ç­‰åŒäº Point.prototype = { toString(){}, toValue(){} }; åœ¨ç±»çš„å®ä¾‹ä¸Šé¢è°ƒç”¨æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯è°ƒç”¨åŸå‹ä¸Šçš„æ–¹æ³•ã€‚ class B {} let b = new B(); b.constructor === B.prototype.constructor // true ä¸Šé¢ä»£ç ä¸­ï¼Œbæ˜¯Bç±»çš„å®ä¾‹ï¼Œå®ƒçš„constructoræ–¹æ³•å°±æ˜¯Bç±»åŸå‹çš„constructoræ–¹æ³•ã€‚ ç”±äºç±»çš„æ–¹æ³•éƒ½å®šä¹‰åœ¨prototypeå¯¹è±¡ä¸Šé¢ï¼Œæ‰€ä»¥ç±»çš„æ–°æ–¹æ³•å¯ä»¥æ·»åŠ åœ¨prototypeå¯¹è±¡ä¸Šé¢ã€‚Object.assignæ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¸€æ¬¡å‘ç±»æ·»åŠ å¤šä¸ªæ–¹æ³•ã€‚ class Point { constructor(){ // ... } } Object.assign(Point.prototype, { toString(){}, toValue(){} }); prototypeå¯¹è±¡çš„constructorå±æ€§ï¼Œç›´æ¥æŒ‡å‘â€œç±»â€çš„æœ¬èº«ï¼Œè¿™ä¸ES5çš„è¡Œä¸ºæ˜¯ä¸€è‡´çš„ã€‚ Point.prototype.constructor === Point // true å¦å¤–ï¼Œç±»çš„å†…éƒ¨æ‰€æœ‰å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½æ˜¯ä¸å¯æšä¸¾çš„ï¼ˆnon-enumerableï¼‰ã€‚ class Point { constructor(x, y) { // ... } toString() { // ... } } Object.keys(Point.prototype) // [] Object.getOwnPropertyNames(Point.prototype) // [&quot;constructor&quot;,&quot;toString&quot;] ä¸Šé¢ä»£ç ä¸­ï¼ŒtoStringæ–¹æ³•æ˜¯Pointç±»å†…éƒ¨å®šä¹‰çš„æ–¹æ³•ï¼Œå®ƒæ˜¯ä¸å¯æšä¸¾çš„ã€‚è¿™ä¸€ç‚¹ä¸ES5çš„è¡Œä¸ºä¸ä¸€è‡´ã€‚ var Point = function (x, y) { // ... }; Point.prototype.toString = function() { // ... }; Object.keys(Point.prototype) // [&quot;toString&quot;] Object.getOwnPropertyNames(Point.prototype) // [&quot;constructor&quot;,&quot;toString&quot;] ä¸Šé¢ä»£ç é‡‡ç”¨ES5çš„å†™æ³•ï¼ŒtoStringæ–¹æ³•å°±æ˜¯å¯æšä¸¾çš„ã€‚ ç±»çš„å±æ€§åï¼Œå¯ä»¥é‡‡ç”¨è¡¨è¾¾å¼ã€‚ let methodName = &quot;getArea&quot;; class Square{ constructor(length) { // ... } [methodName]() { // ... } } ä¸Šé¢ä»£ç ä¸­ï¼ŒSquareç±»çš„æ–¹æ³•ågetAreaï¼Œæ˜¯ä»è¡¨è¾¾å¼å¾—åˆ°çš„ã€‚ constructoræ–¹æ³•constructoræ–¹æ³•æ˜¯ç±»çš„é»˜è®¤æ–¹æ³•ï¼Œé€šè¿‡newå‘½ä»¤ç”Ÿæˆå¯¹è±¡å®ä¾‹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•ã€‚ä¸€ä¸ªç±»å¿…é¡»æœ‰constructoræ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä¸€ä¸ªç©ºçš„constructoræ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ã€‚ constructor() {} constructoræ–¹æ³•é»˜è®¤è¿”å›å®ä¾‹å¯¹è±¡ï¼ˆå³thisï¼‰ï¼Œå®Œå…¨å¯ä»¥æŒ‡å®šè¿”å›å¦å¤–ä¸€ä¸ªå¯¹è±¡ã€‚ class Foo { constructor() { return Object.create(null); } } new Foo() instanceof Foo // false ä¸Šé¢ä»£ç ä¸­ï¼Œconstructorå‡½æ•°è¿”å›ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼Œç»“æœå¯¼è‡´å®ä¾‹å¯¹è±¡ä¸æ˜¯Fooç±»çš„å®ä¾‹ã€‚ ç±»çš„æ„é€ å‡½æ•°ï¼Œä¸ä½¿ç”¨newæ˜¯æ²¡æ³•è°ƒç”¨çš„ï¼Œä¼šæŠ¥é”™ã€‚è¿™æ˜¯å®ƒè·Ÿæ™®é€šæ„é€ å‡½æ•°çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«ï¼Œåè€…ä¸ç”¨newä¹Ÿå¯ä»¥æ‰§è¡Œã€‚ class Foo { constructor() { return Object.create(null); } } Foo() // TypeError: Class constructor Foo cannot be invoked without &#39;new&#39; ç±»çš„å®ä¾‹å¯¹è±¡ç”Ÿæˆç±»çš„å®ä¾‹å¯¹è±¡çš„å†™æ³•ï¼Œä¸ES5å®Œå…¨ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä½¿ç”¨newå‘½ä»¤ã€‚å¦‚æœå¿˜è®°åŠ ä¸Šnewï¼Œåƒå‡½æ•°é‚£æ ·è°ƒç”¨Classï¼Œå°†ä¼šæŠ¥é”™ã€‚ // æŠ¥é”™ var point = Point(2, 3); // æ­£ç¡® var point = new Point(2, 3); ä¸ES5ä¸€æ ·ï¼Œå®ä¾‹çš„å±æ€§é™¤éæ˜¾å¼å®šä¹‰åœ¨å…¶æœ¬èº«ï¼ˆå³å®šä¹‰åœ¨thiså¯¹è±¡ä¸Šï¼‰ï¼Œå¦åˆ™éƒ½æ˜¯å®šä¹‰åœ¨åŸå‹ä¸Šï¼ˆå³å®šä¹‰åœ¨classä¸Šï¼‰ã€‚ //å®šä¹‰ç±» class Point { constructor(x, y) { this.x = x; this.y = y; } toString() { return &#39;(&#39; + this.x + &#39;, &#39; + this.y + &#39;)&#39;; } } var point = new Point(2, 3); point.toString() // (2, 3) point.hasOwnProperty(&#39;x&#39;) // true point.hasOwnProperty(&#39;y&#39;) // true point.hasOwnProperty(&#39;toString&#39;) // false point.__proto__.hasOwnProperty(&#39;toString&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œxå’Œyéƒ½æ˜¯å®ä¾‹å¯¹è±¡pointè‡ªèº«çš„å±æ€§ï¼ˆå› ä¸ºå®šä¹‰åœ¨thiså˜é‡ä¸Šï¼‰ï¼Œæ‰€ä»¥hasOwnPropertyæ–¹æ³•è¿”å›trueï¼Œè€ŒtoStringæ˜¯åŸå‹å¯¹è±¡çš„å±æ€§ï¼ˆå› ä¸ºå®šä¹‰åœ¨Pointç±»ä¸Šï¼‰ï¼Œæ‰€ä»¥hasOwnPropertyæ–¹æ³•è¿”å›falseã€‚è¿™äº›éƒ½ä¸ES5çš„è¡Œä¸ºä¿æŒä¸€è‡´ã€‚ ä¸ES5ä¸€æ ·ï¼Œç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä¸ªåŸå‹å¯¹è±¡ã€‚ var p1 = new Point(2,3); var p2 = new Point(3,2); p1.__proto__ === p2.__proto__ //true ä¸Šé¢ä»£ç ä¸­ï¼Œp1å’Œp2éƒ½æ˜¯Pointçš„å®ä¾‹ï¼Œå®ƒä»¬çš„åŸå‹éƒ½æ˜¯Point.prototypeï¼Œæ‰€ä»¥__proto__å±æ€§æ˜¯ç›¸ç­‰çš„ã€‚ è¿™ä¹Ÿæ„å‘³ç€ï¼Œå¯ä»¥é€šè¿‡å®ä¾‹çš„__proto__å±æ€§ä¸ºClassæ·»åŠ æ–¹æ³•ã€‚ var p1 = new Point(2,3); var p2 = new Point(3,2); p1.__proto__.printName = function () { return &#39;Oops&#39; }; p1.printName() // &quot;Oops&quot; p2.printName() // &quot;Oops&quot; var p3 = new Point(4,2); p3.printName() // &quot;Oops&quot; ä¸Šé¢ä»£ç åœ¨p1çš„åŸå‹ä¸Šæ·»åŠ äº†ä¸€ä¸ªprintNameæ–¹æ³•ï¼Œç”±äºp1çš„åŸå‹å°±æ˜¯p2çš„åŸå‹ï¼Œå› æ­¤p2ä¹Ÿå¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚è€Œä¸”ï¼Œæ­¤åæ–°å»ºçš„å®ä¾‹p3ä¹Ÿå¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚è¿™æ„å‘³ç€ï¼Œä½¿ç”¨å®ä¾‹çš„__proto__å±æ€§æ”¹å†™åŸå‹ï¼Œå¿…é¡»ç›¸å½“è°¨æ…ï¼Œä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºè¿™ä¼šæ”¹å˜Classçš„åŸå§‹å®šä¹‰ï¼Œå½±å“åˆ°æ‰€æœ‰å®ä¾‹ã€‚ ä¸å­˜åœ¨å˜é‡æå‡Classä¸å­˜åœ¨å˜é‡æå‡ï¼ˆhoistï¼‰ï¼Œè¿™ä¸€ç‚¹ä¸ES5å®Œå…¨ä¸åŒã€‚ new Foo(); // ReferenceError class Foo {} ä¸Šé¢ä»£ç ä¸­ï¼ŒFooç±»ä½¿ç”¨åœ¨å‰ï¼Œå®šä¹‰åœ¨åï¼Œè¿™æ ·ä¼šæŠ¥é”™ï¼Œå› ä¸ºES6ä¸ä¼šæŠŠç±»çš„å£°æ˜æå‡åˆ°ä»£ç å¤´éƒ¨ã€‚è¿™ç§è§„å®šçš„åŸå› ä¸ä¸‹æ–‡è¦æåˆ°çš„ç»§æ‰¿æœ‰å…³ï¼Œå¿…é¡»ä¿è¯å­ç±»åœ¨çˆ¶ç±»ä¹‹åå®šä¹‰ã€‚ { let Foo = class {}; class Bar extends Foo { } } ä¸Šé¢çš„ä»£ç ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºBarç»§æ‰¿Fooçš„æ—¶å€™ï¼ŒFooå·²ç»æœ‰å®šä¹‰äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœå­˜åœ¨classçš„æå‡ï¼Œä¸Šé¢ä»£ç å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºclassä¼šè¢«æå‡åˆ°ä»£ç å¤´éƒ¨ï¼Œè€Œletå‘½ä»¤æ˜¯ä¸æå‡çš„ï¼Œæ‰€ä»¥å¯¼è‡´Barç»§æ‰¿Fooçš„æ—¶å€™ï¼ŒFooè¿˜æ²¡æœ‰å®šä¹‰ã€‚ Classè¡¨è¾¾å¼ä¸å‡½æ•°ä¸€æ ·ï¼Œç±»ä¹Ÿå¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼çš„å½¢å¼å®šä¹‰ã€‚ const MyClass = class Me { getClassName() { return Me.name; } }; ä¸Šé¢ä»£ç ä½¿ç”¨è¡¨è¾¾å¼å®šä¹‰äº†ä¸€ä¸ªç±»ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªç±»çš„åå­—æ˜¯MyClassè€Œä¸æ˜¯Meï¼ŒMeåªåœ¨Classçš„å†…éƒ¨ä»£ç å¯ç”¨ï¼ŒæŒ‡ä»£å½“å‰ç±»ã€‚ let inst = new MyClass(); inst.getClassName() // Me Me.name // ReferenceError: Me is not defined ä¸Šé¢ä»£ç è¡¨ç¤ºï¼ŒMeåªåœ¨Classå†…éƒ¨æœ‰å®šä¹‰ã€‚ å¦‚æœç±»çš„å†…éƒ¨æ²¡ç”¨åˆ°çš„è¯ï¼Œå¯ä»¥çœç•¥Meï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼ã€‚ const MyClass = class { /* ... */ }; é‡‡ç”¨Classè¡¨è¾¾å¼ï¼Œå¯ä»¥å†™å‡ºç«‹å³æ‰§è¡Œçš„Classã€‚ let person = new class { constructor(name) { this.name = name; } sayName() { console.log(this.name); } }(&#39;å¼ ä¸‰&#39;); person.sayName(); // &quot;å¼ ä¸‰&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œpersonæ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œçš„ç±»çš„å®ä¾‹ã€‚ ç§æœ‰æ–¹æ³•ç§æœ‰æ–¹æ³•æ˜¯å¸¸è§éœ€æ±‚ï¼Œä½†ES6ä¸æä¾›ï¼Œåªèƒ½é€šè¿‡å˜é€šæ–¹æ³•æ¨¡æ‹Ÿå®ç°ã€‚ ä¸€ç§åšæ³•æ˜¯åœ¨å‘½åä¸ŠåŠ ä»¥åŒºåˆ«ã€‚ class Widget { // å…¬æœ‰æ–¹æ³• foo (baz) { this._bar(baz); } // ç§æœ‰æ–¹æ³• _bar(baz) { return this.snaf = baz; } // ... } ä¸Šé¢ä»£ç ä¸­ï¼Œ_baræ–¹æ³•å‰é¢çš„ä¸‹åˆ’çº¿ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåªé™äºå†…éƒ¨ä½¿ç”¨çš„ç§æœ‰æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œè¿™ç§å‘½åæ˜¯ä¸ä¿é™©çš„ï¼Œåœ¨ç±»çš„å¤–éƒ¨ï¼Œè¿˜æ˜¯å¯ä»¥è°ƒç”¨åˆ°è¿™ä¸ªæ–¹æ³•ã€‚ å¦ä¸€ç§æ–¹æ³•å°±æ˜¯ç´¢æ€§å°†ç§æœ‰æ–¹æ³•ç§»å‡ºæ¨¡å—ï¼Œå› ä¸ºæ¨¡å—å†…éƒ¨çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯å¯¹å¤–å¯è§çš„ã€‚ class Widget { foo (baz) { bar.call(this, baz); } // ... } function bar(baz) { return this.snaf = baz; } ä¸Šé¢ä»£ç ä¸­ï¼Œfooæ˜¯å…¬æœ‰æ–¹æ³•ï¼Œå†…éƒ¨è°ƒç”¨äº†bar.call(this, baz)ã€‚è¿™ä½¿å¾—barå®é™…ä¸Šæˆä¸ºäº†å½“å‰æ¨¡å—çš„ç§æœ‰æ–¹æ³•ã€‚ è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯åˆ©ç”¨Symbolå€¼çš„å”¯ä¸€æ€§ï¼Œå°†ç§æœ‰æ–¹æ³•çš„åå­—å‘½åä¸ºä¸€ä¸ªSymbolå€¼ã€‚ const bar = Symbol(&#39;bar&#39;); const snaf = Symbol(&#39;snaf&#39;); export default class myClass{ // å…¬æœ‰æ–¹æ³• foo(baz) { this[bar](baz); } // ç§æœ‰æ–¹æ³• [bar](baz) { return this[snaf] = baz; } // ... }; ä¸Šé¢ä»£ç ä¸­ï¼Œbarå’Œsnaféƒ½æ˜¯Symbolå€¼ï¼Œå¯¼è‡´ç¬¬ä¸‰æ–¹æ— æ³•è·å–åˆ°å®ƒä»¬ï¼Œå› æ­¤è¾¾åˆ°äº†ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§çš„æ•ˆæœã€‚ thisçš„æŒ‡å‘ç±»çš„æ–¹æ³•å†…éƒ¨å¦‚æœå«æœ‰thisï¼Œå®ƒé»˜è®¤æŒ‡å‘ç±»çš„å®ä¾‹ã€‚ä½†æ˜¯ï¼Œå¿…é¡»éå¸¸å°å¿ƒï¼Œä¸€æ—¦å•ç‹¬ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå¾ˆå¯èƒ½æŠ¥é”™ã€‚ class Logger { printName(name = &#39;there&#39;) { this.print(`Hello ${name}`); } print(text) { console.log(text); } } const logger = new Logger(); const { printName } = logger; printName(); // TypeError: Cannot read property &#39;print&#39; of undefined ä¸Šé¢ä»£ç ä¸­ï¼ŒprintNameæ–¹æ³•ä¸­çš„thisï¼Œé»˜è®¤æŒ‡å‘Loggerç±»çš„å®ä¾‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœå°†è¿™ä¸ªæ–¹æ³•æå–å‡ºæ¥å•ç‹¬ä½¿ç”¨ï¼Œthisä¼šæŒ‡å‘è¯¥æ–¹æ³•è¿è¡Œæ—¶æ‰€åœ¨çš„ç¯å¢ƒï¼Œå› ä¸ºæ‰¾ä¸åˆ°printæ–¹æ³•è€Œå¯¼è‡´æŠ¥é”™ã€‚ ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­ç»‘å®šthisï¼Œè¿™æ ·å°±ä¸ä¼šæ‰¾ä¸åˆ°printæ–¹æ³•äº†ã€‚ class Logger { constructor() { this.printName = this.printName.bind(this); } // ... } å¦ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚ class Logger { constructor() { this.printName = (name = &#39;there&#39;) =&gt; { this.print(`Hello ${name}`); }; } // ... } è¿˜æœ‰ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨Proxyï¼Œè·å–æ–¹æ³•çš„æ—¶å€™ï¼Œè‡ªåŠ¨ç»‘å®šthisã€‚ function selfish (target) { const cache = new WeakMap(); const handler = { get (target, key) { const value = Reflect.get(target, key); if (typeof value !== &#39;function&#39;) { return value; } if (!cache.has(value)) { cache.set(value, value.bind(target)); } return cache.get(value); } }; const proxy = new Proxy(target, handler); return proxy; } const logger = selfish(new Logger()); ä¸¥æ ¼æ¨¡å¼ç±»å’Œæ¨¡å—çš„å†…éƒ¨ï¼Œé»˜è®¤å°±æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨use strictæŒ‡å®šè¿è¡Œæ¨¡å¼ã€‚åªè¦ä½ çš„ä»£ç å†™åœ¨ç±»æˆ–æ¨¡å—ä¹‹ä¸­ï¼Œå°±åªæœ‰ä¸¥æ ¼æ¨¡å¼å¯ç”¨ã€‚ è€ƒè™‘åˆ°æœªæ¥æ‰€æœ‰çš„ä»£ç ï¼Œå…¶å®éƒ½æ˜¯è¿è¡Œåœ¨æ¨¡å—ä¹‹ä¸­ï¼Œæ‰€ä»¥ES6å®é™…ä¸ŠæŠŠæ•´ä¸ªè¯­è¨€å‡çº§åˆ°äº†ä¸¥æ ¼æ¨¡å¼ã€‚ nameå±æ€§ç”±äºæœ¬è´¨ä¸Šï¼ŒES6çš„ç±»åªæ˜¯ES5çš„æ„é€ å‡½æ•°çš„ä¸€å±‚åŒ…è£…ï¼Œæ‰€ä»¥å‡½æ•°çš„è®¸å¤šç‰¹æ€§éƒ½è¢«Classç»§æ‰¿ï¼ŒåŒ…æ‹¬nameå±æ€§ã€‚ class Point {} Point.name // &quot;Point&quot; nameå±æ€§æ€»æ˜¯è¿”å›ç´§è·Ÿåœ¨classå…³é”®å­—åé¢çš„ç±»åã€‚ Classçš„ç»§æ‰¿åŸºæœ¬ç”¨æ³•Classä¹‹é—´å¯ä»¥é€šè¿‡extendså…³é”®å­—å®ç°ç»§æ‰¿ï¼Œè¿™æ¯”ES5çš„é€šè¿‡ä¿®æ”¹åŸå‹é“¾å®ç°ç»§æ‰¿ï¼Œè¦æ¸…æ™°å’Œæ–¹ä¾¿å¾ˆå¤šã€‚ class ColorPoint extends Point {} ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªColorPointç±»ï¼Œè¯¥ç±»é€šè¿‡extendså…³é”®å­—ï¼Œç»§æ‰¿äº†Pointç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ä½†æ˜¯ç”±äºæ²¡æœ‰éƒ¨ç½²ä»»ä½•ä»£ç ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªç±»å®Œå…¨ä¸€æ ·ï¼Œç­‰äºå¤åˆ¶äº†ä¸€ä¸ªPointç±»ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬åœ¨ColorPointå†…éƒ¨åŠ ä¸Šä»£ç ã€‚ class ColorPoint extends Point { constructor(x, y, color) { super(x, y); // è°ƒç”¨çˆ¶ç±»çš„constructor(x, y) this.color = color; } toString() { return this.color + &#39; &#39; + super.toString(); // è°ƒç”¨çˆ¶ç±»çš„toString() } } ä¸Šé¢ä»£ç ä¸­ï¼Œconstructoræ–¹æ³•å’ŒtoStringæ–¹æ³•ä¹‹ä¸­ï¼Œéƒ½å‡ºç°äº†superå…³é”®å­—ï¼Œå®ƒåœ¨è¿™é‡Œè¡¨ç¤ºçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç”¨æ¥æ–°å»ºçˆ¶ç±»çš„thiså¯¹è±¡ã€‚ å­ç±»å¿…é¡»åœ¨constructoræ–¹æ³•ä¸­è°ƒç”¨superæ–¹æ³•ï¼Œå¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»æ²¡æœ‰è‡ªå·±çš„thiså¯¹è±¡ï¼Œè€Œæ˜¯ç»§æ‰¿çˆ¶ç±»çš„thiså¯¹è±¡ï¼Œç„¶åå¯¹å…¶è¿›è¡ŒåŠ å·¥ã€‚å¦‚æœä¸è°ƒç”¨superæ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ°thiså¯¹è±¡ã€‚ class Point { /* ... */ } class ColorPoint extends Point { constructor() { } } let cp = new ColorPoint(); // ReferenceError ä¸Šé¢ä»£ç ä¸­ï¼ŒColorPointç»§æ‰¿äº†çˆ¶ç±»Pointï¼Œä½†æ˜¯å®ƒçš„æ„é€ å‡½æ•°æ²¡æœ‰è°ƒç”¨superæ–¹æ³•ï¼Œå¯¼è‡´æ–°å»ºå®ä¾‹æ—¶æŠ¥é”™ã€‚ ES5çš„ç»§æ‰¿ï¼Œå®è´¨æ˜¯å…ˆåˆ›é€ å­ç±»çš„å®ä¾‹å¯¹è±¡thisï¼Œç„¶åå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ°thisä¸Šé¢ï¼ˆParent.apply(this)ï¼‰ã€‚ES6çš„ç»§æ‰¿æœºåˆ¶å®Œå…¨ä¸åŒï¼Œå®è´¨æ˜¯å…ˆåˆ›é€ çˆ¶ç±»çš„å®ä¾‹å¯¹è±¡thisï¼ˆæ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨superæ–¹æ³•ï¼‰ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®æ”¹thisã€‚ å¦‚æœå­ç±»æ²¡æœ‰å®šä¹‰constructoræ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ï¼Œä»£ç å¦‚ä¸‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡æœ‰æ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä»»ä½•ä¸€ä¸ªå­ç±»éƒ½æœ‰constructoræ–¹æ³•ã€‚ constructor(...args) { super(...args); } å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œåœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œåªæœ‰è°ƒç”¨superä¹‹åï¼Œæ‰å¯ä»¥ä½¿ç”¨thiså…³é”®å­—ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»å®ä¾‹çš„æ„å»ºï¼Œæ˜¯åŸºäºå¯¹çˆ¶ç±»å®ä¾‹åŠ å·¥ï¼Œåªæœ‰superæ–¹æ³•æ‰èƒ½è¿”å›çˆ¶ç±»å®ä¾‹ã€‚ class Point { constructor(x, y) { this.x = x; this.y = y; } } class ColorPoint extends Point { constructor(x, y, color) { this.color = color; // ReferenceError super(x, y); this.color = color; // æ­£ç¡® } } ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»çš„constructoræ–¹æ³•æ²¡æœ‰è°ƒç”¨superä¹‹å‰ï¼Œå°±ä½¿ç”¨thiså…³é”®å­—ï¼Œç»“æœæŠ¥é”™ï¼Œè€Œæ”¾åœ¨superæ–¹æ³•ä¹‹åå°±æ˜¯æ­£ç¡®çš„ã€‚ ä¸‹é¢æ˜¯ç”Ÿæˆå­ç±»å®ä¾‹çš„ä»£ç ã€‚ let cp = new ColorPoint(25, 8, &#39;green&#39;); cp instanceof ColorPoint // true cp instanceof Point // true ä¸Šé¢ä»£ç ä¸­ï¼Œå®ä¾‹å¯¹è±¡cpåŒæ—¶æ˜¯ColorPointå’ŒPointä¸¤ä¸ªç±»çš„å®ä¾‹ï¼Œè¿™ä¸ES5çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚ ç±»çš„prototypeå±æ€§å’Œ__proto__å±æ€§å¤§å¤šæ•°æµè§ˆå™¨çš„ES5å®ç°ä¹‹ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰__proto__å±æ€§ï¼ŒæŒ‡å‘å¯¹åº”çš„æ„é€ å‡½æ•°çš„prototypeå±æ€§ã€‚Classä½œä¸ºæ„é€ å‡½æ•°çš„è¯­æ³•ç³–ï¼ŒåŒæ—¶æœ‰prototypeå±æ€§å’Œ__proto__å±æ€§ï¼Œå› æ­¤åŒæ—¶å­˜åœ¨ä¸¤æ¡ç»§æ‰¿é“¾ã€‚ ï¼ˆ1ï¼‰å­ç±»çš„__proto__å±æ€§ï¼Œè¡¨ç¤ºæ„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»ã€‚ ï¼ˆ2ï¼‰å­ç±»prototypeå±æ€§çš„__proto__å±æ€§ï¼Œè¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»çš„prototypeå±æ€§ã€‚ class A { } class B extends A { } B.__proto__ === A // true B.prototype.__proto__ === A.prototype // true ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»Bçš„__proto__å±æ€§æŒ‡å‘çˆ¶ç±»Aï¼Œå­ç±»Bçš„prototypeå±æ€§çš„__proto__å±æ€§æŒ‡å‘çˆ¶ç±»Açš„prototypeå±æ€§ã€‚ è¿™æ ·çš„ç»“æœæ˜¯å› ä¸ºï¼Œç±»çš„ç»§æ‰¿æ˜¯æŒ‰ç…§ä¸‹é¢çš„æ¨¡å¼å®ç°çš„ã€‚ class A { } class B { } // Bçš„å®ä¾‹ç»§æ‰¿Açš„å®ä¾‹ Object.setPrototypeOf(B.prototype, A.prototype); const b = new B(); // Bçš„å®ä¾‹ç»§æ‰¿Açš„é™æ€å±æ€§ Object.setPrototypeOf(B, A); const b = new B(); ã€Šå¯¹è±¡çš„æ‰©å±•ã€‹ä¸€ç« ç»™å‡ºè¿‡Object.setPrototypeOfæ–¹æ³•çš„å®ç°ã€‚ Object.setPrototypeOf = function (obj, proto) { obj.__proto__ = proto; return obj; } å› æ­¤ï¼Œå°±å¾—åˆ°äº†ä¸Šé¢çš„ç»“æœã€‚ Object.setPrototypeOf(B.prototype, A.prototype); // ç­‰åŒäº B.prototype.__proto__ = A.prototype; Object.setPrototypeOf(B, A); // ç­‰åŒäº B.__proto__ = A; è¿™ä¸¤æ¡ç»§æ‰¿é“¾ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼šä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå­ç±»ï¼ˆBï¼‰çš„åŸå‹ï¼ˆ__proto__å±æ€§ï¼‰æ˜¯çˆ¶ç±»ï¼ˆAï¼‰ï¼›ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå­ç±»ï¼ˆBï¼‰çš„åŸå‹ï¼ˆprototypeå±æ€§ï¼‰æ˜¯çˆ¶ç±»çš„å®ä¾‹ã€‚ Object.create(A.prototype); // ç­‰åŒäº B.prototype.__proto__ = A.prototype; Extends çš„ç»§æ‰¿ç›®æ ‡extendså…³é”®å­—åé¢å¯ä»¥è·Ÿå¤šç§ç±»å‹çš„å€¼ã€‚ class B extends A { } ä¸Šé¢ä»£ç çš„Aï¼Œåªè¦æ˜¯ä¸€ä¸ªæœ‰prototypeå±æ€§çš„å‡½æ•°ï¼Œå°±èƒ½è¢«Bç»§æ‰¿ã€‚ç”±äºå‡½æ•°éƒ½æœ‰prototypeå±æ€§ï¼ˆé™¤äº†Function.prototypeå‡½æ•°ï¼‰ï¼Œå› æ­¤Aå¯ä»¥æ˜¯ä»»æ„å‡½æ•°ã€‚ ä¸‹é¢ï¼Œè®¨è®ºä¸‰ç§ç‰¹æ®Šæƒ…å†µã€‚ ç¬¬ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå­ç±»ç»§æ‰¿Objectç±»ã€‚ class A extends Object { } A.__proto__ === Object // true A.prototype.__proto__ === Object.prototype // true è¿™ç§æƒ…å†µä¸‹ï¼ŒAå…¶å®å°±æ˜¯æ„é€ å‡½æ•°Objectçš„å¤åˆ¶ï¼ŒAçš„å®ä¾‹å°±æ˜¯Objectçš„å®ä¾‹ã€‚ ç¬¬äºŒç§ç‰¹æ®Šæƒ…å†µï¼Œä¸å­˜åœ¨ä»»ä½•ç»§æ‰¿ã€‚ class A { } A.__proto__ === Function.prototype // true A.prototype.__proto__ === Object.prototype // true è¿™ç§æƒ…å†µä¸‹ï¼ŒAä½œä¸ºä¸€ä¸ªåŸºç±»ï¼ˆå³ä¸å­˜åœ¨ä»»ä½•ç»§æ‰¿ï¼‰ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œæ‰€ä»¥ç›´æ¥ç»§æ‰¿Funciton.prototypeã€‚ä½†æ˜¯ï¼ŒAè°ƒç”¨åè¿”å›ä¸€ä¸ªç©ºå¯¹è±¡ï¼ˆå³Objectå®ä¾‹ï¼‰ï¼Œæ‰€ä»¥A.prototype.__proto__æŒ‡å‘æ„é€ å‡½æ•°ï¼ˆObjectï¼‰çš„prototypeå±æ€§ã€‚ ç¬¬ä¸‰ç§ç‰¹æ®Šæƒ…å†µï¼Œå­ç±»ç»§æ‰¿nullã€‚ class A extends null { } A.__proto__ === Function.prototype // true A.prototype.__proto__ === undefined // true è¿™ç§æƒ…å†µä¸ç¬¬äºŒç§æƒ…å†µéå¸¸åƒã€‚Aä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œæ‰€ä»¥ç›´æ¥ç»§æ‰¿Funciton.prototypeã€‚ä½†æ˜¯ï¼ŒAè°ƒç”¨åè¿”å›çš„å¯¹è±¡ä¸ç»§æ‰¿ä»»ä½•æ–¹æ³•ï¼Œæ‰€ä»¥å®ƒçš„__proto__æŒ‡å‘Function.prototypeï¼Œå³å®è´¨ä¸Šæ‰§è¡Œäº†ä¸‹é¢çš„ä»£ç ã€‚ class C extends null { constructor() { return Object.create(null); } } Object.getPrototypeOf()Object.getPrototypeOfæ–¹æ³•å¯ä»¥ç”¨æ¥ä»å­ç±»ä¸Šè·å–çˆ¶ç±»ã€‚ Object.getPrototypeOf(ColorPoint) === Point // true å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­ï¼Œä¸€ä¸ªç±»æ˜¯å¦ç»§æ‰¿äº†å¦ä¸€ä¸ªç±»ã€‚ super å…³é”®å­—superè¿™ä¸ªå…³é”®å­—ï¼Œæ—¢å¯ä»¥å½“ä½œå‡½æ•°ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“ä½œå¯¹è±¡ä½¿ç”¨ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå®ƒçš„ç”¨æ³•å®Œå…¨ä¸åŒã€‚ ç¬¬ä¸€ç§æƒ…å†µï¼Œsuperä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼Œä»£è¡¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚ES6 è¦æ±‚ï¼Œå­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»æ‰§è¡Œä¸€æ¬¡superå‡½æ•°ã€‚ class A {} class B extends A { constructor() { super(); } } ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»Bçš„æ„é€ å‡½æ•°ä¹‹ä¸­çš„super()ï¼Œä»£è¡¨è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚è¿™æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ JavaScript å¼•æ“ä¼šæŠ¥é”™ã€‚ æ³¨æ„ï¼Œsuperè™½ç„¶ä»£è¡¨äº†çˆ¶ç±»Açš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯å­ç±»Bçš„å®ä¾‹ï¼Œå³superå†…éƒ¨çš„thisæŒ‡çš„æ˜¯Bï¼Œå› æ­¤super()åœ¨è¿™é‡Œç›¸å½“äºA.prototype.constructor.call(this)ã€‚ class A { constructor() { console.log(new.target.name); } } class B extends A { constructor() { super(); } } new A() // A new B() // B ä¸Šé¢ä»£ç ä¸­ï¼Œnew.targetæŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨super()æ‰§è¡Œæ—¶ï¼Œå®ƒæŒ‡å‘çš„æ˜¯å­ç±»Bçš„æ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯çˆ¶ç±»Açš„æ„é€ å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œsuper()å†…éƒ¨çš„thisæŒ‡å‘çš„æ˜¯Bã€‚ ä½œä¸ºå‡½æ•°æ—¶ï¼Œsuper()åªèƒ½ç”¨åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¹‹ä¸­ï¼Œç”¨åœ¨å…¶ä»–åœ°æ–¹å°±ä¼šæŠ¥é”™ã€‚ class A {} class B extends A { m() { super(); // æŠ¥é”™ } } ä¸Šé¢ä»£ç ä¸­ï¼Œsuper()ç”¨åœ¨Bç±»çš„mæ–¹æ³•ä¹‹ä¸­ï¼Œå°±ä¼šé€ æˆå¥æ³•é”™è¯¯ã€‚ ç¬¬äºŒç§æƒ…å†µï¼Œsuperä½œä¸ºå¯¹è±¡æ—¶ï¼ŒæŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ã€‚ class A { p() { return 2; } } class B extends A { constructor() { super(); console.log(super.p()); // 2 } } let b = new B(); ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»Bå½“ä¸­çš„super.p()ï¼Œå°±æ˜¯å°†superå½“ä½œä¸€ä¸ªå¯¹è±¡ä½¿ç”¨ã€‚è¿™æ—¶ï¼ŒsuperæŒ‡å‘A.prototypeï¼Œæ‰€ä»¥super.p()å°±ç›¸å½“äºA.prototype.p()ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œç”±äºsuperæŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼Œæ‰€ä»¥å®šä¹‰åœ¨çˆ¶ç±»å®ä¾‹ä¸Šçš„æ–¹æ³•æˆ–å±æ€§ï¼Œæ˜¯æ— æ³•é€šè¿‡superè°ƒç”¨çš„ã€‚ class A { constructor() { this.p = 2; } } class B extends A { get m() { return super.p; } } let b = new B(); b.m // undefined ä¸Šé¢ä»£ç ä¸­ï¼Œpæ˜¯çˆ¶ç±»Aå®ä¾‹çš„å±æ€§ï¼Œsuper.på°±å¼•ç”¨ä¸åˆ°å®ƒã€‚ å¦‚æœå±æ€§å®šä¹‰åœ¨çˆ¶ç±»çš„åŸå‹å¯¹è±¡ä¸Šï¼Œsuperå°±å¯ä»¥å–åˆ°ã€‚ class A {} A.prototype.x = 2; class B extends A { constructor() { super(); console.log(super.x) // 2 } } let b = new B(); ä¸Šé¢ä»£ç ä¸­ï¼Œå±æ€§xæ˜¯å®šä¹‰åœ¨A.prototypeä¸Šé¢çš„ï¼Œæ‰€ä»¥super.xå¯ä»¥å–åˆ°å®ƒçš„å€¼ã€‚ ES6 è§„å®šï¼Œé€šè¿‡superè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œsuperä¼šç»‘å®šå­ç±»çš„thisã€‚ class A { constructor() { this.x = 1; } print() { console.log(this.x); } } class B extends A { constructor() { super(); this.x = 2; } m() { super.print(); } } let b = new B(); b.m() // 2 ä¸Šé¢ä»£ç ä¸­ï¼Œsuper.print()è™½ç„¶è°ƒç”¨çš„æ˜¯A.prototype.print()ï¼Œä½†æ˜¯A.prototype.print()ä¼šç»‘å®šå­ç±»Bçš„thisï¼Œå¯¼è‡´è¾“å‡ºçš„æ˜¯2ï¼Œè€Œä¸æ˜¯1ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯super.print.call(this)ã€‚ ç”±äºç»‘å®šå­ç±»çš„thisï¼Œæ‰€ä»¥å¦‚æœé€šè¿‡superå¯¹æŸä¸ªå±æ€§èµ‹å€¼ï¼Œè¿™æ—¶superå°±æ˜¯thisï¼Œèµ‹å€¼çš„å±æ€§ä¼šå˜æˆå­ç±»å®ä¾‹çš„å±æ€§ã€‚ class A { constructor() { this.x = 1; } } class B extends A { constructor() { super(); this.x = 2; super.x = 3; console.log(super.x); // undefined console.log(this.x); // 3 } } let b = new B(); ä¸Šé¢ä»£ç ä¸­ï¼Œsuper.xèµ‹å€¼ä¸º3ï¼Œè¿™æ—¶ç­‰åŒäºå¯¹this.xèµ‹å€¼ä¸º3ã€‚è€Œå½“è¯»å–super.xçš„æ—¶å€™ï¼Œè¯»çš„æ˜¯A.prototype.xï¼Œæ‰€ä»¥è¿”å›undefinedã€‚ æ³¨æ„ï¼Œä½¿ç”¨superçš„æ—¶å€™ï¼Œå¿…é¡»æ˜¾å¼æŒ‡å®šæ˜¯ä½œä¸ºå‡½æ•°ã€è¿˜æ˜¯ä½œä¸ºå¯¹è±¡ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ class A {} class B extends A { constructor() { super(); console.log(super); // æŠ¥é”™ } } ä¸Šé¢ä»£ç ä¸­ï¼Œconsole.log(super)å½“ä¸­çš„superï¼Œæ— æ³•çœ‹å‡ºæ˜¯ä½œä¸ºå‡½æ•°ä½¿ç”¨ï¼Œè¿˜æ˜¯ä½œä¸ºå¯¹è±¡ä½¿ç”¨ï¼Œæ‰€ä»¥ JavaScript å¼•æ“è§£æä»£ç çš„æ—¶å€™å°±ä¼šæŠ¥é”™ã€‚è¿™æ—¶ï¼Œå¦‚æœèƒ½æ¸…æ™°åœ°è¡¨æ˜superçš„æ•°æ®ç±»å‹ï¼Œå°±ä¸ä¼šæŠ¥é”™ã€‚ class A {} class B extends A { constructor() { super(); console.log(super.valueOf() instanceof B); // true } } let b = new B(); ä¸Šé¢ä»£ç ä¸­ï¼Œsuper.valueOf()è¡¨æ˜superæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤å°±ä¸ä¼šæŠ¥é”™ã€‚åŒæ—¶ï¼Œç”±äºsuperç»‘å®šBçš„thisï¼Œæ‰€ä»¥super.valueOf()è¿”å›çš„æ˜¯ä¸€ä¸ªBçš„å®ä¾‹ã€‚ æœ€åï¼Œç”±äºå¯¹è±¡æ€»æ˜¯ç»§æ‰¿å…¶ä»–å¯¹è±¡çš„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ä»»æ„ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œä½¿ç”¨superå…³é”®å­—ã€‚ var obj = { toString() { return &quot;MyObject: &quot; + super.toString(); } }; obj.toString(); // MyObject: [object Object] å®ä¾‹çš„__proto__å±æ€§å­ç±»å®ä¾‹çš„__proto__å±æ€§çš„__proto__å±æ€§ï¼ŒæŒ‡å‘çˆ¶ç±»å®ä¾‹çš„__proto__å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­ç±»çš„åŸå‹çš„åŸå‹ï¼Œæ˜¯çˆ¶ç±»çš„åŸå‹ã€‚ var p1 = new Point(2, 3); var p2 = new ColorPoint(2, 3, &#39;red&#39;); p2.__proto__ === p1.__proto__ // false p2.__proto__.__proto__ === p1.__proto__ // true ä¸Šé¢ä»£ç ä¸­ï¼ŒColorPointç»§æ‰¿äº†Pointï¼Œå¯¼è‡´å‰è€…åŸå‹çš„åŸå‹æ˜¯åè€…çš„åŸå‹ã€‚ å› æ­¤ï¼Œé€šè¿‡å­ç±»å®ä¾‹çš„__proto__.__proto__å±æ€§ï¼Œå¯ä»¥ä¿®æ”¹çˆ¶ç±»å®ä¾‹çš„è¡Œä¸ºã€‚ p2.__proto__.__proto__.printName = function () { console.log(&#39;Ha&#39;); }; p1.printName() // &quot;Ha&quot; ä¸Šé¢ä»£ç åœ¨ColorPointçš„å®ä¾‹p2ä¸Šå‘Pointç±»æ·»åŠ æ–¹æ³•ï¼Œç»“æœå½±å“åˆ°äº†Pointçš„å®ä¾‹p1ã€‚ åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•°æ˜¯æŒ‡è¯­è¨€å†…ç½®çš„æ„é€ å‡½æ•°ï¼Œé€šå¸¸ç”¨æ¥ç”Ÿæˆæ•°æ®ç»“æ„ã€‚ECMAScriptçš„åŸç”Ÿæ„é€ å‡½æ•°å¤§è‡´æœ‰ä¸‹é¢è¿™äº›ã€‚ Boolean() Number() String() Array() Date() Function() RegExp() Error() Object() ä»¥å‰ï¼Œè¿™äº›åŸç”Ÿæ„é€ å‡½æ•°æ˜¯æ— æ³•ç»§æ‰¿çš„ï¼Œæ¯”å¦‚ï¼Œä¸èƒ½è‡ªå·±å®šä¹‰ä¸€ä¸ªArrayçš„å­ç±»ã€‚ function MyArray() { Array.apply(this, arguments); } MyArray.prototype = Object.create(Array.prototype, { constructor: { value: MyArray, writable: true, configurable: true, enumerable: true } }); ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªç»§æ‰¿Arrayçš„MyArrayç±»ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªç±»çš„è¡Œä¸ºä¸Arrayå®Œå…¨ä¸ä¸€è‡´ã€‚ var colors = new MyArray(); colors[0] = &quot;red&quot;; colors.length // 0 colors.length = 0; colors[0] // &quot;red&quot; ä¹‹æ‰€ä»¥ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæ˜¯å› ä¸ºå­ç±»æ— æ³•è·å¾—åŸç”Ÿæ„é€ å‡½æ•°çš„å†…éƒ¨å±æ€§ï¼Œé€šè¿‡Array.apply()æˆ–è€…åˆ†é…ç»™åŸå‹å¯¹è±¡éƒ½ä¸è¡Œã€‚åŸç”Ÿæ„é€ å‡½æ•°ä¼šå¿½ç•¥applyæ–¹æ³•ä¼ å…¥çš„thisï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸç”Ÿæ„é€ å‡½æ•°çš„thisæ— æ³•ç»‘å®šï¼Œå¯¼è‡´æ‹¿ä¸åˆ°å†…éƒ¨å±æ€§ã€‚ ES5æ˜¯å…ˆæ–°å»ºå­ç±»çš„å®ä¾‹å¯¹è±¡thisï¼Œå†å°†çˆ¶ç±»çš„å±æ€§æ·»åŠ åˆ°å­ç±»ä¸Šï¼Œç”±äºçˆ¶ç±»çš„å†…éƒ¨å±æ€§æ— æ³•è·å–ï¼Œå¯¼è‡´æ— æ³•ç»§æ‰¿åŸç”Ÿçš„æ„é€ å‡½æ•°ã€‚æ¯”å¦‚ï¼ŒArrayæ„é€ å‡½æ•°æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§[[DefineOwnProperty]]ï¼Œç”¨æ¥å®šä¹‰æ–°å±æ€§æ—¶ï¼Œæ›´æ–°lengthå±æ€§ï¼Œè¿™ä¸ªå†…éƒ¨å±æ€§æ— æ³•åœ¨å­ç±»è·å–ï¼Œå¯¼è‡´å­ç±»çš„lengthå±æ€§è¡Œä¸ºä¸æ­£å¸¸ã€‚ ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è®©ä¸€ä¸ªæ™®é€šå¯¹è±¡ç»§æ‰¿Errorå¯¹è±¡ã€‚ var e = {}; Object.getOwnPropertyNames(Error.call(e)) // [ &#39;stack&#39; ] Object.getOwnPropertyNames(e) // [] ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬æƒ³é€šè¿‡Error.call(e)è¿™ç§å†™æ³•ï¼Œè®©æ™®é€šå¯¹è±¡eå…·æœ‰Errorå¯¹è±¡çš„å®ä¾‹å±æ€§ã€‚ä½†æ˜¯ï¼ŒError.call()å®Œå…¨å¿½ç•¥ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œeæœ¬èº«æ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚è¿™è¯æ˜äº†Error.call(e)è¿™ç§å†™æ³•ï¼Œæ— æ³•ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•°ã€‚ ES6å…è®¸ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•°å®šä¹‰å­ç±»ï¼Œå› ä¸ºES6æ˜¯å…ˆæ–°å»ºçˆ¶ç±»çš„å®ä¾‹å¯¹è±¡thisï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®é¥°thisï¼Œä½¿å¾—çˆ¶ç±»çš„æ‰€æœ‰è¡Œä¸ºéƒ½å¯ä»¥ç»§æ‰¿ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç»§æ‰¿Arrayçš„ä¾‹å­ã€‚ class MyArray extends Array { constructor(...args) { super(...args); } } var arr = new MyArray(); arr[0] = 12; arr.length // 1 arr.length = 0; arr[0] // undefined ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªMyArrayç±»ï¼Œç»§æ‰¿äº†Arrayæ„é€ å‡½æ•°ï¼Œå› æ­¤å°±å¯ä»¥ä»MyArrayç”Ÿæˆæ•°ç»„çš„å®ä¾‹ã€‚è¿™æ„å‘³ç€ï¼ŒES6å¯ä»¥è‡ªå®šä¹‰åŸç”Ÿæ•°æ®ç»“æ„ï¼ˆæ¯”å¦‚Arrayã€Stringç­‰ï¼‰çš„å­ç±»ï¼Œè¿™æ˜¯ES5æ— æ³•åšåˆ°çš„ã€‚ ä¸Šé¢è¿™ä¸ªä¾‹å­ä¹Ÿè¯´æ˜ï¼Œextendså…³é”®å­—ä¸ä»…å¯ä»¥ç”¨æ¥ç»§æ‰¿ç±»ï¼Œè¿˜å¯ä»¥ç”¨æ¥ç»§æ‰¿åŸç”Ÿçš„æ„é€ å‡½æ•°ã€‚å› æ­¤å¯ä»¥åœ¨åŸç”Ÿæ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šï¼Œå®šä¹‰è‡ªå·±çš„æ•°æ®ç»“æ„ã€‚ä¸‹é¢å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªå¸¦ç‰ˆæœ¬åŠŸèƒ½çš„æ•°ç»„ã€‚ class VersionedArray extends Array { constructor() { super(); this.history = [[]]; } commit() { this.history.push(this.slice()); } revert() { this.splice(0, this.length, ...this.history[this.history.length - 1]); } } var x = new VersionedArray(); x.push(1); x.push(2); x // [1, 2] x.history // [[]] x.commit(); x.history // [[], [1, 2]] x.push(3); x // [1, 2, 3] x.revert(); x // [1, 2] ä¸Šé¢ä»£ç ä¸­ï¼ŒVersionedArrayç»“æ„ä¼šé€šè¿‡commitæ–¹æ³•ï¼Œå°†è‡ªå·±çš„å½“å‰çŠ¶æ€å­˜å…¥historyå±æ€§ï¼Œç„¶åé€šè¿‡revertæ–¹æ³•ï¼Œå¯ä»¥æ’¤é”€å½“å‰ç‰ˆæœ¬ï¼Œå›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒVersionedArrayä¾ç„¶æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€æœ‰åŸç”Ÿçš„æ•°ç»„æ–¹æ³•éƒ½å¯ä»¥åœ¨å®ƒä¸Šé¢è°ƒç”¨ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰Errorå­ç±»çš„ä¾‹å­ã€‚ class ExtendableError extends Error { constructor(message) { super(); this.message = message; this.stack = (new Error()).stack; this.name = this.constructor.name; } } class MyError extends ExtendableError { constructor(m) { super(m); } } var myerror = new MyError(&#39;ll&#39;); myerror.message // &quot;ll&quot; myerror instanceof Error // true myerror.name // &quot;MyError&quot; myerror.stack // Error // at MyError.ExtendableError // ... æ³¨æ„ï¼Œç»§æ‰¿Objectçš„å­ç±»ï¼Œæœ‰ä¸€ä¸ªè¡Œä¸ºå·®å¼‚ã€‚ class NewObj extends Object{ constructor(){ super(...arguments); } } var o = new NewObj({attr: true}); console.log(o.attr === true); // false ä¸Šé¢ä»£ç ä¸­ï¼ŒNewObjç»§æ‰¿äº†Objectï¼Œä½†æ˜¯æ— æ³•é€šè¿‡superæ–¹æ³•å‘çˆ¶ç±»Objectä¼ å‚ã€‚è¿™æ˜¯å› ä¸ºES6æ”¹å˜äº†Objectæ„é€ å‡½æ•°çš„è¡Œä¸ºï¼Œä¸€æ—¦å‘ç°Objectæ–¹æ³•ä¸æ˜¯é€šè¿‡new Object()è¿™ç§å½¢å¼è°ƒç”¨ï¼ŒES6è§„å®šObjectæ„é€ å‡½æ•°ä¼šå¿½ç•¥å‚æ•°ã€‚ Classçš„å–å€¼å‡½æ•°ï¼ˆgetterï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆsetterï¼‰ä¸ES5ä¸€æ ·ï¼Œåœ¨Classå†…éƒ¨å¯ä»¥ä½¿ç”¨getå’Œsetå…³é”®å­—ï¼Œå¯¹æŸä¸ªå±æ€§è®¾ç½®å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°ï¼Œæ‹¦æˆªè¯¥å±æ€§çš„å­˜å–è¡Œä¸ºã€‚ class MyClass { constructor() { // ... } get prop() { return &#39;getter&#39;; } set prop(value) { console.log(&#39;setter: &#39;+value); } } let inst = new MyClass(); inst.prop = 123; // setter: 123 inst.prop // &#39;getter&#39; ä¸Šé¢ä»£ç ä¸­ï¼Œpropå±æ€§æœ‰å¯¹åº”çš„å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°ï¼Œå› æ­¤èµ‹å€¼å’Œè¯»å–è¡Œä¸ºéƒ½è¢«è‡ªå®šä¹‰äº†ã€‚ å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°æ˜¯è®¾ç½®åœ¨å±æ€§çš„descriptorå¯¹è±¡ä¸Šçš„ã€‚ class CustomHTMLElement { constructor(element) { this.element = element; } get html() { return this.element.innerHTML; } set html(value) { this.element.innerHTML = value; } } var descriptor = Object.getOwnPropertyDescriptor( CustomHTMLElement.prototype, &quot;html&quot;); &quot;get&quot; in descriptor // true &quot;set&quot; in descriptor // true ä¸Šé¢ä»£ç ä¸­ï¼Œå­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°æ˜¯å®šä¹‰åœ¨htmlå±æ€§çš„æè¿°å¯¹è±¡ä¸Šé¢ï¼Œè¿™ä¸ES5å®Œå…¨ä¸€è‡´ã€‚ Classçš„Generatoræ–¹æ³•å¦‚æœæŸä¸ªæ–¹æ³•ä¹‹å‰åŠ ä¸Šæ˜Ÿå·ï¼ˆ*ï¼‰ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ã€‚ class Foo { constructor(...args) { this.args = args; } * [Symbol.iterator]() { for (let arg of this.args) { yield arg; } } } for (let x of new Foo(&#39;hello&#39;, &#39;world&#39;)) { console.log(x); } // hello // world ä¸Šé¢ä»£ç ä¸­ï¼ŒFooç±»çš„Symbol.iteratoræ–¹æ³•å‰æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ã€‚Symbol.iteratoræ–¹æ³•è¿”å›ä¸€ä¸ªFooç±»çš„é»˜è®¤éå†å™¨ï¼Œforâ€¦ofå¾ªç¯ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªéå†å™¨ã€‚ Classçš„é™æ€æ–¹æ³•ç±»ç›¸å½“äºå®ä¾‹çš„åŸå‹ï¼Œæ‰€æœ‰åœ¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½ä¼šè¢«å®ä¾‹ç»§æ‰¿ã€‚å¦‚æœåœ¨ä¸€ä¸ªæ–¹æ³•å‰ï¼ŒåŠ ä¸Šstaticå…³é”®å­—ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•ä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ç±»æ¥è°ƒç”¨ï¼Œè¿™å°±ç§°ä¸ºâ€œé™æ€æ–¹æ³•â€ã€‚ class Foo { static classMethod() { return &#39;hello&#39;; } } Foo.classMethod() // &#39;hello&#39; var foo = new Foo(); foo.classMethod() // TypeError: foo.classMethod is not a function ä¸Šé¢ä»£ç ä¸­ï¼ŒFooç±»çš„classMethodæ–¹æ³•å‰æœ‰staticå…³é”®å­—ï¼Œè¡¨æ˜è¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥åœ¨Fooç±»ä¸Šè°ƒç”¨ï¼ˆFoo.classMethod()ï¼‰ï¼Œè€Œä¸æ˜¯åœ¨Fooç±»çš„å®ä¾‹ä¸Šè°ƒç”¨ã€‚å¦‚æœåœ¨å®ä¾‹ä¸Šè°ƒç”¨é™æ€æ–¹æ³•ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¡¨ç¤ºä¸å­˜åœ¨è¯¥æ–¹æ³•ã€‚ çˆ¶ç±»çš„é™æ€æ–¹æ³•ï¼Œå¯ä»¥è¢«å­ç±»ç»§æ‰¿ã€‚ class Foo { static classMethod() { return &#39;hello&#39;; } } class Bar extends Foo { } Bar.classMethod(); // &#39;hello&#39; ä¸Šé¢ä»£ç ä¸­ï¼Œçˆ¶ç±»Fooæœ‰ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå­ç±»Barå¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ é™æ€æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥ä»superå¯¹è±¡ä¸Šè°ƒç”¨çš„ã€‚ class Foo { static classMethod() { return &#39;hello&#39;; } } class Bar extends Foo { static classMethod() { return super.classMethod() + &#39;, too&#39;; } } Bar.classMethod(); Classçš„é™æ€å±æ€§å’Œå®ä¾‹å±æ€§é™æ€å±æ€§æŒ‡çš„æ˜¯Classæœ¬èº«çš„å±æ€§ï¼Œå³Class.propnameï¼Œè€Œä¸æ˜¯å®šä¹‰åœ¨å®ä¾‹å¯¹è±¡ï¼ˆthisï¼‰ä¸Šçš„å±æ€§ã€‚ class Foo { } Foo.prop = 1; Foo.prop // 1 ä¸Šé¢çš„å†™æ³•ä¸ºFooç±»å®šä¹‰äº†ä¸€ä¸ªé™æ€å±æ€§propã€‚ ç›®å‰ï¼Œåªæœ‰è¿™ç§å†™æ³•å¯è¡Œï¼Œå› ä¸ºES6æ˜ç¡®è§„å®šï¼ŒClasså†…éƒ¨åªæœ‰é™æ€æ–¹æ³•ï¼Œæ²¡æœ‰é™æ€å±æ€§ã€‚ // ä»¥ä¸‹ä¸¤ç§å†™æ³•éƒ½æ— æ•ˆ class Foo { // å†™æ³•ä¸€ prop: 2 // å†™æ³•äºŒ static prop: 2 } Foo.prop // undefined ES7æœ‰ä¸€ä¸ªé™æ€å±æ€§çš„ææ¡ˆï¼Œç›®å‰Babelè½¬ç å™¨æ”¯æŒã€‚ è¿™ä¸ªææ¡ˆå¯¹å®ä¾‹å±æ€§å’Œé™æ€å±æ€§ï¼Œéƒ½è§„å®šäº†æ–°çš„å†™æ³•ã€‚ ï¼ˆ1ï¼‰ç±»çš„å®ä¾‹å±æ€§ ç±»çš„å®ä¾‹å±æ€§å¯ä»¥ç”¨ç­‰å¼ï¼Œå†™å…¥ç±»çš„å®šä¹‰ä¹‹ä¸­ã€‚ class MyClass { myProp = 42; constructor() { console.log(this.myProp); // 42 } } ä¸Šé¢ä»£ç ä¸­ï¼ŒmyPropå°±æ˜¯MyClassçš„å®ä¾‹å±æ€§ã€‚åœ¨MyClassçš„å®ä¾‹ä¸Šï¼Œå¯ä»¥è¯»å–è¿™ä¸ªå±æ€§ã€‚ ä»¥å‰ï¼Œæˆ‘ä»¬å®šä¹‰å®ä¾‹å±æ€§ï¼Œåªèƒ½å†™åœ¨ç±»çš„constructoræ–¹æ³•é‡Œé¢ã€‚ class ReactCounter extends React.Component { constructor(props) { super(props); this.state = { count: 0 }; } } ä¸Šé¢ä»£ç ä¸­ï¼Œæ„é€ æ–¹æ³•constructoré‡Œé¢ï¼Œå®šä¹‰äº†this.stateå±æ€§ã€‚ æœ‰äº†æ–°çš„å†™æ³•ä»¥åï¼Œå¯ä»¥ä¸åœ¨constructoræ–¹æ³•é‡Œé¢å®šä¹‰ã€‚ class ReactCounter extends React.Component { state = { count: 0 }; } è¿™ç§å†™æ³•æ¯”ä»¥å‰æ›´æ¸…æ™°ã€‚ ä¸ºäº†å¯è¯»æ€§çš„ç›®çš„ï¼Œå¯¹äºé‚£äº›åœ¨constructoré‡Œé¢å·²ç»å®šä¹‰çš„å®ä¾‹å±æ€§ï¼Œæ–°å†™æ³•å…è®¸ç›´æ¥åˆ—å‡ºã€‚ class ReactCounter extends React.Component { constructor(props) { super(props); this.state = { count: 0 }; } state; } ï¼ˆ2ï¼‰ç±»çš„é™æ€å±æ€§ ç±»çš„é™æ€å±æ€§åªè¦åœ¨ä¸Šé¢çš„å®ä¾‹å±æ€§å†™æ³•å‰é¢ï¼ŒåŠ ä¸Šstaticå…³é”®å­—å°±å¯ä»¥äº†ã€‚ class MyClass { static myStaticProp = 42; constructor() { console.log(MyClass.myProp); // 42 } } åŒæ ·çš„ï¼Œè¿™ä¸ªæ–°å†™æ³•å¤§å¤§æ–¹ä¾¿äº†é™æ€å±æ€§çš„è¡¨è¾¾ã€‚ // è€å†™æ³• class Foo { } Foo.prop = 1; // æ–°å†™æ³• class Foo { static prop = 1; } ä¸Šé¢ä»£ç ä¸­ï¼Œè€å†™æ³•çš„é™æ€å±æ€§å®šä¹‰åœ¨ç±»çš„å¤–éƒ¨ã€‚æ•´ä¸ªç±»ç”Ÿæˆä»¥åï¼Œå†ç”Ÿæˆé™æ€å±æ€§ã€‚è¿™æ ·è®©äººå¾ˆå®¹æ˜“å¿½ç•¥è¿™ä¸ªé™æ€å±æ€§ï¼Œä¹Ÿä¸ç¬¦åˆç›¸å…³ä»£ç åº”è¯¥æ”¾åœ¨ä¸€èµ·çš„ä»£ç ç»„ç»‡åŸåˆ™ã€‚å¦å¤–ï¼Œæ–°å†™æ³•æ˜¯æ˜¾å¼å£°æ˜ï¼ˆdeclarativeï¼‰ï¼Œè€Œä¸æ˜¯èµ‹å€¼å¤„ç†ï¼Œè¯­ä¹‰æ›´å¥½ã€‚ new.targetå±æ€§newæ˜¯ä»æ„é€ å‡½æ•°ç”Ÿæˆå®ä¾‹çš„å‘½ä»¤ã€‚ES6ä¸ºnewå‘½ä»¤å¼•å…¥äº†ä¸€ä¸ªnew.targetå±æ€§ï¼Œï¼ˆåœ¨æ„é€ å‡½æ•°ä¸­ï¼‰è¿”å›newå‘½ä»¤ä½œç”¨äºçš„é‚£ä¸ªæ„é€ å‡½æ•°ã€‚å¦‚æœæ„é€ å‡½æ•°ä¸æ˜¯é€šè¿‡newå‘½ä»¤è°ƒç”¨çš„ï¼Œnew.targetä¼šè¿”å›undefinedï¼Œå› æ­¤è¿™ä¸ªå±æ€§å¯ä»¥ç”¨æ¥ç¡®å®šæ„é€ å‡½æ•°æ˜¯æ€ä¹ˆè°ƒç”¨çš„ã€‚ function Person(name) { if (new.target !== undefined) { this.name = name; } else { throw new Error(&#39;å¿…é¡»ä½¿ç”¨newç”Ÿæˆå®ä¾‹&#39;); } } // å¦ä¸€ç§å†™æ³• function Person(name) { if (new.target === Person) { this.name = name; } else { throw new Error(&#39;å¿…é¡»ä½¿ç”¨newç”Ÿæˆå®ä¾‹&#39;); } } var person = new Person(&#39;å¼ ä¸‰&#39;); // æ­£ç¡® var notAPerson = Person.call(person, &#39;å¼ ä¸‰&#39;); // æŠ¥é”™ ä¸Šé¢ä»£ç ç¡®ä¿æ„é€ å‡½æ•°åªèƒ½é€šè¿‡newå‘½ä»¤è°ƒç”¨ã€‚ Classå†…éƒ¨è°ƒç”¨new.targetï¼Œè¿”å›å½“å‰Classã€‚ class Rectangle { constructor(length, width) { console.log(new.target === Rectangle); this.length = length; this.width = width; } } var obj = new Rectangle(3, 4); // è¾“å‡º true éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œnew.targetä¼šè¿”å›å­ç±»ã€‚ class Rectangle { constructor(length, width) { console.log(new.target === Rectangle); // ... } } class Square extends Rectangle { constructor(length) { super(length, length); } } var obj = new Square(3); // è¾“å‡º false ä¸Šé¢ä»£ç ä¸­ï¼Œnew.targetä¼šè¿”å›å­ç±»ã€‚ åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹ï¼Œå¯ä»¥å†™å‡ºä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ã€å¿…é¡»ç»§æ‰¿åæ‰èƒ½ä½¿ç”¨çš„ç±»ã€‚ class Shape { constructor() { if (new.target === Shape) { throw new Error(&#39;æœ¬ç±»ä¸èƒ½å®ä¾‹åŒ–&#39;); } } } class Rectangle extends Shape { constructor(length, width) { super(); // ... } } var x = new Shape(); // æŠ¥é”™ var y = new Rectangle(3, 4); // æ­£ç¡® ä¸Šé¢ä»£ç ä¸­ï¼ŒShapeç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½ç”¨äºç»§æ‰¿ã€‚ æ³¨æ„ï¼Œåœ¨å‡½æ•°å¤–éƒ¨ï¼Œä½¿ç”¨new.targetä¼šæŠ¥é”™ã€‚ Mixinæ¨¡å¼çš„å®ç°Mixinæ¨¡å¼æŒ‡çš„æ˜¯ï¼Œå°†å¤šä¸ªç±»çš„æ¥å£â€œæ··å…¥â€ï¼ˆmix inï¼‰å¦ä¸€ä¸ªç±»ã€‚å®ƒåœ¨ES6çš„å®ç°å¦‚ä¸‹ã€‚ function mix(...mixins) { class Mix {} for (let mixin of mixins) { copyProperties(Mix, mixin); copyProperties(Mix.prototype, mixin.prototype); } return Mix; } function copyProperties(target, source) { for (let key of Reflect.ownKeys(source)) { if ( key !== &quot;constructor&quot; &amp;&amp; key !== &quot;prototype&quot; &amp;&amp; key !== &quot;name&quot; ) { let desc = Object.getOwnPropertyDescriptor(source, key); Object.defineProperty(target, key, desc); } } } ä¸Šé¢ä»£ç çš„mixå‡½æ•°ï¼Œå¯ä»¥å°†å¤šä¸ªå¯¹è±¡åˆæˆä¸ºä¸€ä¸ªç±»ã€‚ä½¿ç”¨çš„æ—¶å€™ï¼Œåªè¦ç»§æ‰¿è¿™ä¸ªç±»å³å¯ã€‚ class DistributedEdit extends mix(Loggable, Serializable) { // ... } æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Class","slug":"Class","permalink":"https://microzz.com/tags/Class/"}]},{"title":"å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°","date":"2017-01-15T06:58:52.000Z","path":"2017/01/15/async/","text":"å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°å¼‚æ­¥ç¼–ç¨‹å¯¹ JavaScript è¯­è¨€å¤ªé‡è¦ã€‚Javascript è¯­è¨€çš„æ‰§è¡Œç¯å¢ƒæ˜¯â€œå•çº¿ç¨‹â€çš„ï¼Œå¦‚æœæ²¡æœ‰å¼‚æ­¥ç¼–ç¨‹ï¼Œæ ¹æœ¬æ²¡æ³•ç”¨ï¼Œéå¡æ­»ä¸å¯ã€‚æœ¬ç« ä¸»è¦ä»‹ç»å¦‚ä½• Generator å‡½æ•°å®Œæˆå¼‚æ­¥æ“ä½œã€‚ ES6è¯ç”Ÿä»¥å‰ï¼Œå¼‚æ­¥ç¼–ç¨‹çš„æ–¹æ³•ï¼Œå¤§æ¦‚æœ‰ä¸‹é¢å››ç§ã€‚ å›è°ƒå‡½æ•° äº‹ä»¶ç›‘å¬ å‘å¸ƒ/è®¢é˜… Promise å¯¹è±¡ Generator å‡½æ•°å°† JavaScript å¼‚æ­¥ç¼–ç¨‹å¸¦å…¥äº†ä¸€ä¸ªå…¨æ–°çš„é˜¶æ®µã€‚ åŸºæœ¬æ¦‚å¿µå¼‚æ­¥æ‰€è°“â€å¼‚æ­¥â€ï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªä»»åŠ¡ä¸æ˜¯è¿ç»­å®Œæˆçš„ï¼Œå¯ä»¥ç†è§£æˆè¯¥ä»»åŠ¡è¢«äººä¸ºåˆ†æˆä¸¤æ®µï¼Œå…ˆæ‰§è¡Œç¬¬ä¸€æ®µï¼Œç„¶åè½¬è€Œæ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œç­‰åšå¥½äº†å‡†å¤‡ï¼Œå†å›è¿‡å¤´æ‰§è¡Œç¬¬äºŒæ®µã€‚ æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªä»»åŠ¡æ˜¯è¯»å–æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œä»»åŠ¡çš„ç¬¬ä¸€æ®µæ˜¯å‘æ“ä½œç³»ç»Ÿå‘å‡ºè¯·æ±‚ï¼Œè¦æ±‚è¯»å–æ–‡ä»¶ã€‚ç„¶åï¼Œç¨‹åºæ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œç­‰åˆ°æ“ä½œç³»ç»Ÿè¿”å›æ–‡ä»¶ï¼Œå†æ¥ç€æ‰§è¡Œä»»åŠ¡çš„ç¬¬äºŒæ®µï¼ˆå¤„ç†æ–‡ä»¶ï¼‰ã€‚è¿™ç§ä¸è¿ç»­çš„æ‰§è¡Œï¼Œå°±å«åšå¼‚æ­¥ã€‚ ç›¸åº”åœ°ï¼Œè¿ç»­çš„æ‰§è¡Œå°±å«åšåŒæ­¥ã€‚ç”±äºæ˜¯è¿ç»­æ‰§è¡Œï¼Œä¸èƒ½æ’å…¥å…¶ä»–ä»»åŠ¡ï¼Œæ‰€ä»¥æ“ä½œç³»ç»Ÿä»ç¡¬ç›˜è¯»å–æ–‡ä»¶çš„è¿™æ®µæ—¶é—´ï¼Œç¨‹åºåªèƒ½å¹²ç­‰ç€ã€‚ å›è°ƒå‡½æ•°JavaScript è¯­è¨€å¯¹å¼‚æ­¥ç¼–ç¨‹çš„å®ç°ï¼Œå°±æ˜¯å›è°ƒå‡½æ•°ã€‚æ‰€è°“å›è°ƒå‡½æ•°ï¼Œå°±æ˜¯æŠŠä»»åŠ¡çš„ç¬¬äºŒæ®µå•ç‹¬å†™åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œç­‰åˆ°é‡æ–°æ‰§è¡Œè¿™ä¸ªä»»åŠ¡çš„æ—¶å€™ï¼Œå°±ç›´æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚å›è°ƒå‡½æ•°çš„è‹±è¯­åå­—callbackï¼Œç›´è¯‘è¿‡æ¥å°±æ˜¯â€é‡æ–°è°ƒç”¨â€ã€‚ è¯»å–æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œæ˜¯è¿™æ ·å†™çš„ã€‚ fs.readFile(&#39;/etc/passwd&#39;, &#39;utf-8&#39;, function (err, data) { if (err) throw err; console.log(data); }); ä¸Šé¢ä»£ç ä¸­ï¼ŒreadFileå‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå°±æ˜¯å›è°ƒå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä»»åŠ¡çš„ç¬¬äºŒæ®µã€‚ç­‰åˆ°æ“ä½œç³»ç»Ÿè¿”å›äº†/etc/passwdè¿™ä¸ªæ–‡ä»¶ä»¥åï¼Œå›è°ƒå‡½æ•°æ‰ä¼šæ‰§è¡Œã€‚ ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜æ˜¯ï¼Œä¸ºä»€ä¹ˆ Node çº¦å®šï¼Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¿…é¡»æ˜¯é”™è¯¯å¯¹è±¡errï¼ˆå¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œè¯¥å‚æ•°å°±æ˜¯nullï¼‰ï¼Ÿ åŸå› æ˜¯æ‰§è¡Œåˆ†æˆä¸¤æ®µï¼Œç¬¬ä¸€æ®µæ‰§è¡Œå®Œä»¥åï¼Œä»»åŠ¡æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒå°±å·²ç»ç»“æŸäº†ã€‚åœ¨è¿™ä»¥åæŠ›å‡ºçš„é”™è¯¯ï¼ŒåŸæ¥çš„ä¸Šä¸‹æ–‡ç¯å¢ƒå·²ç»æ— æ³•æ•æ‰ï¼Œåªèƒ½å½“ä½œå‚æ•°ï¼Œä¼ å…¥ç¬¬äºŒæ®µã€‚ Promiseå›è°ƒå‡½æ•°æœ¬èº«å¹¶æ²¡æœ‰é—®é¢˜ï¼Œå®ƒçš„é—®é¢˜å‡ºç°åœ¨å¤šä¸ªå›è°ƒå‡½æ•°åµŒå¥—ã€‚å‡å®šè¯»å–Aæ–‡ä»¶ä¹‹åï¼Œå†è¯»å–Bæ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ã€‚ fs.readFile(fileA, &#39;utf-8&#39;, function (err, data) { fs.readFile(fileB, &#39;utf-8&#39;, function (err, data) { // ... }); }); ä¸éš¾æƒ³è±¡ï¼Œå¦‚æœä¾æ¬¡è¯»å–ä¸¤ä¸ªä»¥ä¸Šçš„æ–‡ä»¶ï¼Œå°±ä¼šå‡ºç°å¤šé‡åµŒå¥—ã€‚ä»£ç ä¸æ˜¯çºµå‘å‘å±•ï¼Œè€Œæ˜¯æ¨ªå‘å‘å±•ï¼Œå¾ˆå¿«å°±ä¼šä¹±æˆä¸€å›¢ï¼Œæ— æ³•ç®¡ç†ã€‚å› ä¸ºå¤šä¸ªå¼‚æ­¥æ“ä½œå½¢æˆäº†å¼ºè€¦åˆï¼Œåªè¦æœ‰ä¸€ä¸ªæ“ä½œéœ€è¦ä¿®æ”¹ï¼Œå®ƒçš„ä¸Šå±‚å›è°ƒå‡½æ•°å’Œä¸‹å±‚å›è°ƒå‡½æ•°ï¼Œå¯èƒ½éƒ½è¦è·Ÿç€ä¿®æ”¹ã€‚è¿™ç§æƒ…å†µå°±ç§°ä¸ºâ€å›è°ƒå‡½æ•°åœ°ç‹±â€ï¼ˆcallback hellï¼‰ã€‚ Promise å¯¹è±¡å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œæå‡ºçš„ã€‚å®ƒä¸æ˜¯æ–°çš„è¯­æ³•åŠŸèƒ½ï¼Œè€Œæ˜¯ä¸€ç§æ–°çš„å†™æ³•ï¼Œå…è®¸å°†å›è°ƒå‡½æ•°çš„åµŒå¥—ï¼Œæ”¹æˆé“¾å¼è°ƒç”¨ã€‚é‡‡ç”¨ Promiseï¼Œè¿ç»­è¯»å–å¤šä¸ªæ–‡ä»¶ï¼Œå†™æ³•å¦‚ä¸‹ã€‚ var readFile = require(&#39;fs-readfile-promise&#39;); readFile(fileA) .then(function (data) { console.log(data.toString()); }) .then(function () { return readFile(fileB); }) .then(function (data) { console.log(data.toString()); }) .catch(function (err) { console.log(err); }); ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†fs-readfile-promiseæ¨¡å—ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯è¿”å›ä¸€ä¸ª Promise ç‰ˆæœ¬çš„readFileå‡½æ•°ã€‚Promise æä¾›thenæ–¹æ³•åŠ è½½å›è°ƒå‡½æ•°ï¼Œcatchæ–¹æ³•æ•æ‰æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºçš„é”™è¯¯ã€‚ å¯ä»¥çœ‹åˆ°ï¼ŒPromise çš„å†™æ³•åªæ˜¯å›è°ƒå‡½æ•°çš„æ”¹è¿›ï¼Œä½¿ç”¨thenæ–¹æ³•ä»¥åï¼Œå¼‚æ­¥ä»»åŠ¡çš„ä¸¤æ®µæ‰§è¡Œçœ‹å¾—æ›´æ¸…æ¥šäº†ï¼Œé™¤æ­¤ä»¥å¤–ï¼Œå¹¶æ— æ–°æ„ã€‚ Promise çš„æœ€å¤§é—®é¢˜æ˜¯ä»£ç å†—ä½™ï¼ŒåŸæ¥çš„ä»»åŠ¡è¢« Promise åŒ…è£…äº†ä¸€ä¸‹ï¼Œä¸ç®¡ä»€ä¹ˆæ“ä½œï¼Œä¸€çœ¼çœ‹å»éƒ½æ˜¯ä¸€å †thenï¼ŒåŸæ¥çš„è¯­ä¹‰å˜å¾—å¾ˆä¸æ¸…æ¥šã€‚ é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„å†™æ³•å‘¢ï¼Ÿ Generatorå‡½æ•°åç¨‹ä¼ ç»Ÿçš„ç¼–ç¨‹è¯­è¨€ï¼Œæ—©æœ‰å¼‚æ­¥ç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆï¼ˆå…¶å®æ˜¯å¤šä»»åŠ¡çš„è§£å†³æ–¹æ¡ˆï¼‰ã€‚å…¶ä¸­æœ‰ä¸€ç§å«åšâ€åç¨‹â€ï¼ˆcoroutineï¼‰ï¼Œæ„æ€æ˜¯å¤šä¸ªçº¿ç¨‹äº’ç›¸åä½œï¼Œå®Œæˆå¼‚æ­¥ä»»åŠ¡ã€‚ åç¨‹æœ‰ç‚¹åƒå‡½æ•°ï¼Œåˆæœ‰ç‚¹åƒçº¿ç¨‹ã€‚å®ƒçš„è¿è¡Œæµç¨‹å¤§è‡´å¦‚ä¸‹ã€‚ ç¬¬ä¸€æ­¥ï¼Œåç¨‹Aå¼€å§‹æ‰§è¡Œã€‚ ç¬¬äºŒæ­¥ï¼Œåç¨‹Aæ‰§è¡Œåˆ°ä¸€åŠï¼Œè¿›å…¥æš‚åœï¼Œæ‰§è¡Œæƒè½¬ç§»åˆ°åç¨‹Bã€‚ ç¬¬ä¸‰æ­¥ï¼Œï¼ˆä¸€æ®µæ—¶é—´åï¼‰åç¨‹Bäº¤è¿˜æ‰§è¡Œæƒã€‚ ç¬¬å››æ­¥ï¼Œåç¨‹Aæ¢å¤æ‰§è¡Œã€‚ ä¸Šé¢æµç¨‹çš„åç¨‹Aï¼Œå°±æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼Œå› ä¸ºå®ƒåˆ†æˆä¸¤æ®µï¼ˆæˆ–å¤šæ®µï¼‰æ‰§è¡Œã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œè¯»å–æ–‡ä»¶çš„åç¨‹å†™æ³•å¦‚ä¸‹ã€‚ function *asyncJob() { // ...å…¶ä»–ä»£ç  var f = yield readFile(fileA); // ...å…¶ä»–ä»£ç  } ä¸Šé¢ä»£ç çš„å‡½æ•°asyncJobæ˜¯ä¸€ä¸ªåç¨‹ï¼Œå®ƒçš„å¥¥å¦™å°±åœ¨å…¶ä¸­çš„yieldå‘½ä»¤ã€‚å®ƒè¡¨ç¤ºæ‰§è¡Œåˆ°æ­¤å¤„ï¼Œæ‰§è¡Œæƒå°†äº¤ç»™å…¶ä»–åç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œyieldå‘½ä»¤æ˜¯å¼‚æ­¥ä¸¤ä¸ªé˜¶æ®µçš„åˆ†ç•Œçº¿ã€‚ åç¨‹é‡åˆ°yieldå‘½ä»¤å°±æš‚åœï¼Œç­‰åˆ°æ‰§è¡Œæƒè¿”å›ï¼Œå†ä»æš‚åœçš„åœ°æ–¹ç»§ç»­å¾€åæ‰§è¡Œã€‚å®ƒçš„æœ€å¤§ä¼˜ç‚¹ï¼Œå°±æ˜¯ä»£ç çš„å†™æ³•éå¸¸åƒåŒæ­¥æ“ä½œï¼Œå¦‚æœå»é™¤yieldå‘½ä»¤ï¼Œç®€ç›´ä¸€æ¨¡ä¸€æ ·ã€‚ Generator å‡½æ•°çš„æ¦‚å¿µGenerator å‡½æ•°æ˜¯åç¨‹åœ¨ ES6 çš„å®ç°ï¼Œæœ€å¤§ç‰¹ç‚¹å°±æ˜¯å¯ä»¥äº¤å‡ºå‡½æ•°çš„æ‰§è¡Œæƒï¼ˆå³æš‚åœæ‰§è¡Œï¼‰ã€‚ æ•´ä¸ª Generator å‡½æ•°å°±æ˜¯ä¸€ä¸ªå°è£…çš„å¼‚æ­¥ä»»åŠ¡ï¼Œæˆ–è€…è¯´æ˜¯å¼‚æ­¥ä»»åŠ¡çš„å®¹å™¨ã€‚å¼‚æ­¥æ“ä½œéœ€è¦æš‚åœçš„åœ°æ–¹ï¼Œéƒ½ç”¨yieldè¯­å¥æ³¨æ˜ã€‚Generator å‡½æ•°çš„æ‰§è¡Œæ–¹æ³•å¦‚ä¸‹ã€‚ function* gen(x) { var y = yield x + 2; return y; } var g = gen(1); g.next() // { value: 3, done: false } g.next() // { value: undefined, done: true } ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨ Generator å‡½æ•°ï¼Œä¼šè¿”å›ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆï¼ˆå³éå†å™¨ï¼‰gã€‚è¿™æ˜¯ Generator å‡½æ•°ä¸åŒäºæ™®é€šå‡½æ•°çš„å¦ä¸€ä¸ªåœ°æ–¹ï¼Œå³æ‰§è¡Œå®ƒä¸ä¼šè¿”å›ç»“æœï¼Œè¿”å›çš„æ˜¯æŒ‡é’ˆå¯¹è±¡ã€‚è°ƒç”¨æŒ‡é’ˆgçš„nextæ–¹æ³•ï¼Œä¼šç§»åŠ¨å†…éƒ¨æŒ‡é’ˆï¼ˆå³æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„ç¬¬ä¸€æ®µï¼‰ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªé‡åˆ°çš„yieldè¯­å¥ï¼Œä¸Šä¾‹æ˜¯æ‰§è¡Œåˆ°x + 2ä¸ºæ­¢ã€‚ æ¢è¨€ä¹‹ï¼Œnextæ–¹æ³•çš„ä½œç”¨æ˜¯åˆ†é˜¶æ®µæ‰§è¡ŒGeneratorå‡½æ•°ã€‚æ¯æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰é˜¶æ®µçš„ä¿¡æ¯ï¼ˆvalueå±æ€§å’Œdoneå±æ€§ï¼‰ã€‚valueå±æ€§æ˜¯yieldè¯­å¥åé¢è¡¨è¾¾å¼çš„å€¼ï¼Œè¡¨ç¤ºå½“å‰é˜¶æ®µçš„å€¼ï¼›doneå±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤º Generator å‡½æ•°æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼Œå³æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚ Generator å‡½æ•°çš„æ•°æ®äº¤æ¢å’Œé”™è¯¯å¤„ç†Generatorå‡½æ•°å¯ä»¥æš‚åœæ‰§è¡Œå’Œæ¢å¤æ‰§è¡Œï¼Œè¿™æ˜¯å®ƒèƒ½å°è£…å¼‚æ­¥ä»»åŠ¡çš„æ ¹æœ¬åŸå› ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜æœ‰ä¸¤ä¸ªç‰¹æ€§ï¼Œä½¿å®ƒå¯ä»¥ä½œä¸ºå¼‚æ­¥ç¼–ç¨‹çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼šå‡½æ•°ä½“å†…å¤–çš„æ•°æ®äº¤æ¢å’Œé”™è¯¯å¤„ç†æœºåˆ¶ã€‚ nextæ–¹æ³•è¿”å›å€¼çš„valueå±æ€§ï¼Œæ˜¯Generatorå‡½æ•°å‘å¤–è¾“å‡ºæ•°æ®ï¼›nextæ–¹æ³•è¿˜å¯ä»¥æ¥å—å‚æ•°ï¼Œè¿™æ˜¯å‘Generatorå‡½æ•°ä½“å†…è¾“å…¥æ•°æ®ã€‚ function* gen(x){ var y = yield x + 2; return y; } var g = gen(1); g.next() // { value: 3, done: false } g.next(2) // { value: 2, done: true } ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªnextæ–¹æ³•çš„valueå±æ€§ï¼Œè¿”å›è¡¨è¾¾å¼x + 2çš„å€¼ï¼ˆ3ï¼‰ã€‚ç¬¬äºŒä¸ªnextæ–¹æ³•å¸¦æœ‰å‚æ•°2ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥ä¼ å…¥ Generator å‡½æ•°ï¼Œä½œä¸ºä¸Šä¸ªé˜¶æ®µå¼‚æ­¥ä»»åŠ¡çš„è¿”å›ç»“æœï¼Œè¢«å‡½æ•°ä½“å†…çš„å˜é‡yæ¥æ”¶ã€‚å› æ­¤ï¼Œè¿™ä¸€æ­¥çš„ value å±æ€§ï¼Œè¿”å›çš„å°±æ˜¯2ï¼ˆå˜é‡yçš„å€¼ï¼‰ã€‚ Generator å‡½æ•°å†…éƒ¨è¿˜å¯ä»¥éƒ¨ç½²é”™è¯¯å¤„ç†ä»£ç ï¼Œæ•è·å‡½æ•°ä½“å¤–æŠ›å‡ºçš„é”™è¯¯ã€‚ function* gen(x){ try { var y = yield x + 2; } catch (e){ console.log(e); } return y; } var g = gen(1); g.next(); g.throw(&#39;å‡ºé”™äº†&#39;); // å‡ºé”™äº† ä¸Šé¢ä»£ç çš„æœ€åä¸€è¡Œï¼ŒGeneratorå‡½æ•°ä½“å¤–ï¼Œä½¿ç”¨æŒ‡é’ˆå¯¹è±¡çš„throwæ–¹æ³•æŠ›å‡ºçš„é”™è¯¯ï¼Œå¯ä»¥è¢«å‡½æ•°ä½“å†…çš„try â€¦catchä»£ç å—æ•è·ã€‚è¿™æ„å‘³ç€ï¼Œå‡ºé”™çš„ä»£ç ä¸å¤„ç†é”™è¯¯çš„ä»£ç ï¼Œå®ç°äº†æ—¶é—´å’Œç©ºé—´ä¸Šçš„åˆ†ç¦»ï¼Œè¿™å¯¹äºå¼‚æ­¥ç¼–ç¨‹æ— ç–‘æ˜¯å¾ˆé‡è¦çš„ã€‚ å¼‚æ­¥ä»»åŠ¡çš„å°è£…ä¸‹é¢çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ Generator å‡½æ•°ï¼Œæ‰§è¡Œä¸€ä¸ªçœŸå®çš„å¼‚æ­¥ä»»åŠ¡ã€‚ var fetch = require(&#39;node-fetch&#39;); function* gen(){ var url = &#39;https://api.github.com/users/github&#39;; var result = yield fetch(url); console.log(result.bio); } ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°å°è£…äº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œè¯¥æ“ä½œå…ˆè¯»å–ä¸€ä¸ªè¿œç¨‹æ¥å£ï¼Œç„¶åä»JSONæ ¼å¼çš„æ•°æ®è§£æä¿¡æ¯ã€‚å°±åƒå‰é¢è¯´è¿‡çš„ï¼Œè¿™æ®µä»£ç éå¸¸åƒåŒæ­¥æ“ä½œï¼Œé™¤äº†åŠ ä¸Šäº†yieldå‘½ä»¤ã€‚ æ‰§è¡Œè¿™æ®µä»£ç çš„æ–¹æ³•å¦‚ä¸‹ã€‚ var g = gen(); var result = g.next(); result.value.then(function(data){ return data.json(); }).then(function(data){ g.next(data); }); ä¸Šé¢ä»£ç ä¸­ï¼Œé¦–å…ˆæ‰§è¡ŒGeneratorå‡½æ•°ï¼Œè·å–éå†å™¨å¯¹è±¡ï¼Œç„¶åä½¿ç”¨next æ–¹æ³•ï¼ˆç¬¬äºŒè¡Œï¼‰ï¼Œæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„ç¬¬ä¸€é˜¶æ®µã€‚ç”±äºFetchæ¨¡å—è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå› æ­¤è¦ç”¨thenæ–¹æ³•è°ƒç”¨ä¸‹ä¸€ä¸ªnext æ–¹æ³•ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶ Generator å‡½æ•°å°†å¼‚æ­¥æ“ä½œè¡¨ç¤ºå¾—å¾ˆç®€æ´ï¼Œä½†æ˜¯æµç¨‹ç®¡ç†å´ä¸æ–¹ä¾¿ï¼ˆå³ä½•æ—¶æ‰§è¡Œç¬¬ä¸€é˜¶æ®µã€ä½•æ—¶æ‰§è¡Œç¬¬äºŒé˜¶æ®µï¼‰ã€‚ Thunkå‡½æ•°å‚æ•°çš„æ±‚å€¼ç­–ç•¥Thunkå‡½æ•°æ—©åœ¨ä¸Šä¸ªä¸–çºª60å¹´ä»£å°±è¯ç”Ÿäº†ã€‚ é‚£æ—¶ï¼Œç¼–ç¨‹è¯­è¨€åˆšåˆšèµ·æ­¥ï¼Œè®¡ç®—æœºå­¦å®¶è¿˜åœ¨ç ”ç©¶ï¼Œç¼–è¯‘å™¨æ€ä¹ˆå†™æ¯”è¾ƒå¥½ã€‚ä¸€ä¸ªäº‰è®ºçš„ç„¦ç‚¹æ˜¯â€æ±‚å€¼ç­–ç•¥â€ï¼Œå³å‡½æ•°çš„å‚æ•°åˆ°åº•åº”è¯¥ä½•æ—¶æ±‚å€¼ã€‚ var x = 1; function f(m){ return m * 2; } f(x + 5) ä¸Šé¢ä»£ç å…ˆå®šä¹‰å‡½æ•°fï¼Œç„¶åå‘å®ƒä¼ å…¥è¡¨è¾¾å¼x + 5ã€‚è¯·é—®ï¼Œè¿™ä¸ªè¡¨è¾¾å¼åº”è¯¥ä½•æ—¶æ±‚å€¼ï¼Ÿ ä¸€ç§æ„è§æ˜¯â€ä¼ å€¼è°ƒç”¨â€ï¼ˆcall by valueï¼‰ï¼Œå³åœ¨è¿›å…¥å‡½æ•°ä½“ä¹‹å‰ï¼Œå°±è®¡ç®—x + 5çš„å€¼ï¼ˆç­‰äº6ï¼‰ï¼Œå†å°†è¿™ä¸ªå€¼ä¼ å…¥å‡½æ•°f ã€‚Cè¯­è¨€å°±é‡‡ç”¨è¿™ç§ç­–ç•¥ã€‚ f(x + 5) // ä¼ å€¼è°ƒç”¨æ—¶ï¼Œç­‰åŒäº f(6) å¦ä¸€ç§æ„è§æ˜¯â€ä¼ åè°ƒç”¨â€ï¼ˆcall by nameï¼‰ï¼Œå³ç›´æ¥å°†è¡¨è¾¾å¼x + 5ä¼ å…¥å‡½æ•°ä½“ï¼Œåªåœ¨ç”¨åˆ°å®ƒçš„æ—¶å€™æ±‚å€¼ã€‚Haskellè¯­è¨€é‡‡ç”¨è¿™ç§ç­–ç•¥ã€‚ f(x + 5) // ä¼ åè°ƒç”¨æ—¶ï¼Œç­‰åŒäº (x + 5) * 2 ä¼ å€¼è°ƒç”¨å’Œä¼ åè°ƒç”¨ï¼Œå“ªä¸€ç§æ¯”è¾ƒå¥½ï¼Ÿå›ç­”æ˜¯å„æœ‰åˆ©å¼Šã€‚ä¼ å€¼è°ƒç”¨æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å¯¹å‚æ•°æ±‚å€¼çš„æ—¶å€™ï¼Œå®é™…ä¸Šè¿˜æ²¡ç”¨åˆ°è¿™ä¸ªå‚æ•°ï¼Œæœ‰å¯èƒ½é€ æˆæ€§èƒ½æŸå¤±ã€‚ function f(a, b){ return b; } f(3 * x * x - 2 * x - 1, x); ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¤æ‚çš„è¡¨è¾¾å¼ï¼Œä½†æ˜¯å‡½æ•°ä½“å†…æ ¹æœ¬æ²¡ç”¨åˆ°ã€‚å¯¹è¿™ä¸ªå‚æ•°æ±‚å€¼ï¼Œå®é™…ä¸Šæ˜¯ä¸å¿…è¦çš„ã€‚å› æ­¤ï¼Œæœ‰ä¸€äº›è®¡ç®—æœºå­¦å®¶å€¾å‘äºâ€ä¼ åè°ƒç”¨â€ï¼Œå³åªåœ¨æ‰§è¡Œæ—¶æ±‚å€¼ã€‚ Thunkå‡½æ•°çš„å«ä¹‰ç¼–è¯‘å™¨çš„â€ä¼ åè°ƒç”¨â€å®ç°ï¼Œå¾€å¾€æ˜¯å°†å‚æ•°æ”¾åˆ°ä¸€ä¸ªä¸´æ—¶å‡½æ•°ä¹‹ä¸­ï¼Œå†å°†è¿™ä¸ªä¸´æ—¶å‡½æ•°ä¼ å…¥å‡½æ•°ä½“ã€‚è¿™ä¸ªä¸´æ—¶å‡½æ•°å°±å«åšThunkå‡½æ•°ã€‚ function f(m){ return m * 2; } f(x + 5); // ç­‰åŒäº var thunk = function () { return x + 5; }; function f(thunk){ return thunk() * 2; } ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fçš„å‚æ•°x + 5è¢«ä¸€ä¸ªå‡½æ•°æ›¿æ¢äº†ã€‚å‡¡æ˜¯ç”¨åˆ°åŸå‚æ•°çš„åœ°æ–¹ï¼Œå¯¹Thunkå‡½æ•°æ±‚å€¼å³å¯ã€‚ è¿™å°±æ˜¯Thunkå‡½æ•°çš„å®šä¹‰ï¼Œå®ƒæ˜¯â€ä¼ åè°ƒç”¨â€çš„ä¸€ç§å®ç°ç­–ç•¥ï¼Œç”¨æ¥æ›¿æ¢æŸä¸ªè¡¨è¾¾å¼ã€‚ JavaScriptè¯­è¨€çš„Thunkå‡½æ•°JavaScriptè¯­è¨€æ˜¯ä¼ å€¼è°ƒç”¨ï¼Œå®ƒçš„Thunkå‡½æ•°å«ä¹‰æœ‰æ‰€ä¸åŒã€‚åœ¨JavaScriptè¯­è¨€ä¸­ï¼ŒThunkå‡½æ•°æ›¿æ¢çš„ä¸æ˜¯è¡¨è¾¾å¼ï¼Œè€Œæ˜¯å¤šå‚æ•°å‡½æ•°ï¼Œå°†å…¶æ›¿æ¢æˆå•å‚æ•°çš„ç‰ˆæœ¬ï¼Œä¸”åªæ¥å—å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ // æ­£å¸¸ç‰ˆæœ¬çš„readFileï¼ˆå¤šå‚æ•°ç‰ˆæœ¬ï¼‰ fs.readFile(fileName, callback); // Thunkç‰ˆæœ¬çš„readFileï¼ˆå•å‚æ•°ç‰ˆæœ¬ï¼‰ var Thunk = function (fileName){ return function (callback){ return fs.readFile(fileName, callback); }; }; var readFileThunk = Thunk(fileName); readFileThunk(callback); ä¸Šé¢ä»£ç ä¸­ï¼Œfsæ¨¡å—çš„readFileæ–¹æ³•æ˜¯ä¸€ä¸ªå¤šå‚æ•°å‡½æ•°ï¼Œä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä¸ºæ–‡ä»¶åå’Œå›è°ƒå‡½æ•°ã€‚ç»è¿‡è½¬æ¢å™¨å¤„ç†ï¼Œå®ƒå˜æˆäº†ä¸€ä¸ªå•å‚æ•°å‡½æ•°ï¼Œåªæ¥å—å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªå•å‚æ•°ç‰ˆæœ¬ï¼Œå°±å«åšThunkå‡½æ•°ã€‚ ä»»ä½•å‡½æ•°ï¼Œåªè¦å‚æ•°æœ‰å›è°ƒå‡½æ•°ï¼Œå°±èƒ½å†™æˆThunkå‡½æ•°çš„å½¢å¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„Thunkå‡½æ•°è½¬æ¢å™¨ã€‚ // ES5ç‰ˆæœ¬ var Thunk = function(fn){ return function (){ var args = Array.prototype.slice.call(arguments); return function (callback){ args.push(callback); return fn.apply(this, args); } }; }; // ES6ç‰ˆæœ¬ var Thunk = function(fn) { return function (...args) { return function (callback) { return fn.call(this, ...args, callback); } }; }; ä½¿ç”¨ä¸Šé¢çš„è½¬æ¢å™¨ï¼Œç”Ÿæˆfs.readFileçš„Thunkå‡½æ•°ã€‚ var readFileThunk = Thunk(fs.readFile); readFileThunk(fileA)(callback); ä¸‹é¢æ˜¯å¦ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ã€‚ function f(a, cb) { cb(a); } let ft = Thunk(f); let log = console.log.bind(console); ft(1)(log) // 1 Thunkifyæ¨¡å—ç”Ÿäº§ç¯å¢ƒçš„è½¬æ¢å™¨ï¼Œå»ºè®®ä½¿ç”¨Thunkifyæ¨¡å—ã€‚ é¦–å…ˆæ˜¯å®‰è£…ã€‚ $ npm install thunkify ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ã€‚ var thunkify = require(&#39;thunkify&#39;); var fs = require(&#39;fs&#39;); var read = thunkify(fs.readFile); read(&#39;package.json&#39;)(function(err, str){ // ... }); Thunkifyçš„æºç ä¸ä¸Šä¸€èŠ‚é‚£ä¸ªç®€å•çš„è½¬æ¢å™¨éå¸¸åƒã€‚ function thunkify(fn){ return function(){ var args = new Array(arguments.length); var ctx = this; for(var i = 0; i &lt; args.length; ++i) { args[i] = arguments[i]; } return function(done){ var called; args.push(function(){ if (called) return; called = true; done.apply(null, arguments); }); try { fn.apply(ctx, args); } catch (err) { done(err); } } } }; å®ƒçš„æºç ä¸»è¦å¤šäº†ä¸€ä¸ªæ£€æŸ¥æœºåˆ¶ï¼Œå˜é‡calledç¡®ä¿å›è°ƒå‡½æ•°åªè¿è¡Œä¸€æ¬¡ã€‚è¿™æ ·çš„è®¾è®¡ä¸ä¸‹æ–‡çš„Generatorå‡½æ•°ç›¸å…³ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚ function f(a, b, callback){ var sum = a + b; callback(sum); callback(sum); } var ft = thunkify(f); var print = console.log.bind(console); ft(1, 2)(print); // 3 ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºthunkifyåªå…è®¸å›è°ƒå‡½æ•°æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥åªè¾“å‡ºä¸€è¡Œç»“æœã€‚ Generator å‡½æ•°çš„æµç¨‹ç®¡ç†ä½ å¯èƒ½ä¼šé—®ï¼Œ Thunkå‡½æ•°æœ‰ä»€ä¹ˆç”¨ï¼Ÿå›ç­”æ˜¯ä»¥å‰ç¡®å®æ²¡ä»€ä¹ˆç”¨ï¼Œä½†æ˜¯ES6æœ‰äº†Generatorå‡½æ•°ï¼ŒThunkå‡½æ•°ç°åœ¨å¯ä»¥ç”¨äºGeneratorå‡½æ•°çš„è‡ªåŠ¨æµç¨‹ç®¡ç†ã€‚ Generatorå‡½æ•°å¯ä»¥è‡ªåŠ¨æ‰§è¡Œã€‚ function* gen() { // ... } var g = gen(); var res = g.next(); while(!res.done){ console.log(res.value); res = g.next(); } ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°genä¼šè‡ªåŠ¨æ‰§è¡Œå®Œæ‰€æœ‰æ­¥éª¤ã€‚ ä½†æ˜¯ï¼Œè¿™ä¸é€‚åˆå¼‚æ­¥æ“ä½œã€‚å¦‚æœå¿…é¡»ä¿è¯å‰ä¸€æ­¥æ‰§è¡Œå®Œï¼Œæ‰èƒ½æ‰§è¡Œåä¸€æ­¥ï¼Œä¸Šé¢çš„è‡ªåŠ¨æ‰§è¡Œå°±ä¸å¯è¡Œã€‚è¿™æ—¶ï¼ŒThunkå‡½æ•°å°±èƒ½æ´¾ä¸Šç”¨å¤„ã€‚ä»¥è¯»å–æ–‡ä»¶ä¸ºä¾‹ã€‚ä¸‹é¢çš„Generatorå‡½æ•°å°è£…äº†ä¸¤ä¸ªå¼‚æ­¥æ“ä½œã€‚ var fs = require(&#39;fs&#39;); var thunkify = require(&#39;thunkify&#39;); var readFile = thunkify(fs.readFile); var gen = function* (){ var r1 = yield readFile(&#39;/etc/fstab&#39;); console.log(r1.toString()); var r2 = yield readFile(&#39;/etc/shells&#39;); console.log(r2.toString()); }; ä¸Šé¢ä»£ç ä¸­ï¼Œyieldå‘½ä»¤ç”¨äºå°†ç¨‹åºçš„æ‰§è¡Œæƒç§»å‡ºGeneratorå‡½æ•°ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ç§æ–¹æ³•ï¼Œå°†æ‰§è¡Œæƒå†äº¤è¿˜ç»™Generatorå‡½æ•°ã€‚ è¿™ç§æ–¹æ³•å°±æ˜¯Thunkå‡½æ•°ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨å›è°ƒå‡½æ•°é‡Œï¼Œå°†æ‰§è¡Œæƒäº¤è¿˜ç»™Generatorå‡½æ•°ã€‚ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬å…ˆçœ‹å¦‚ä½•æ‰‹åŠ¨æ‰§è¡Œä¸Šé¢è¿™ä¸ªGeneratorå‡½æ•°ã€‚ var g = gen(); var r1 = g.next(); r1.value(function(err, data){ if (err) throw err; var r2 = g.next(data); r2.value(function(err, data){ if (err) throw err; g.next(data); }); }); ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡gæ˜¯Generatorå‡½æ•°çš„å†…éƒ¨æŒ‡é’ˆï¼Œè¡¨ç¤ºç›®å‰æ‰§è¡Œåˆ°å“ªä¸€æ­¥ã€‚nextæ–¹æ³•è´Ÿè´£å°†æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€æ­¥ï¼Œå¹¶è¿”å›è¯¥æ­¥çš„ä¿¡æ¯ï¼ˆvalueå±æ€§å’Œdoneå±æ€§ï¼‰ã€‚ ä»”ç»†æŸ¥çœ‹ä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥å‘ç°Generatorå‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå…¶å®æ˜¯å°†åŒä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåå¤ä¼ å…¥nextæ–¹æ³•çš„valueå±æ€§ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥ç”¨é€’å½’æ¥è‡ªåŠ¨å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚ Thunkå‡½æ•°çš„è‡ªåŠ¨æµç¨‹ç®¡ç†Thunkå‡½æ•°çœŸæ­£çš„å¨åŠ›ï¼Œåœ¨äºå¯ä»¥è‡ªåŠ¨æ‰§è¡ŒGeneratorå‡½æ•°ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªåŸºäºThunkå‡½æ•°çš„Generatoræ‰§è¡Œå™¨ã€‚ function run(fn) { var gen = fn(); function next(err, data) { var result = gen.next(data); if (result.done) return; result.value(next); } next(); } function* g() { // ... } run(g); ä¸Šé¢ä»£ç çš„runå‡½æ•°ï¼Œå°±æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚å†…éƒ¨çš„nextå‡½æ•°å°±æ˜¯Thunkçš„å›è°ƒå‡½æ•°ã€‚nextå‡½æ•°å…ˆå°†æŒ‡é’ˆç§»åˆ°Generatorå‡½æ•°çš„ä¸‹ä¸€æ­¥ï¼ˆgen.nextæ–¹æ³•ï¼‰ï¼Œç„¶ååˆ¤æ–­Generatorå‡½æ•°æ˜¯å¦ç»“æŸï¼ˆresult.doneå±æ€§ï¼‰ï¼Œå¦‚æœæ²¡ç»“æŸï¼Œå°±å°†nextå‡½æ•°å†ä¼ å…¥Thunkå‡½æ•°ï¼ˆresult.valueå±æ€§ï¼‰ï¼Œå¦åˆ™å°±ç›´æ¥é€€å‡ºã€‚ æœ‰äº†è¿™ä¸ªæ‰§è¡Œå™¨ï¼Œæ‰§è¡ŒGeneratorå‡½æ•°æ–¹ä¾¿å¤šäº†ã€‚ä¸ç®¡å†…éƒ¨æœ‰å¤šå°‘ä¸ªå¼‚æ­¥æ“ä½œï¼Œç›´æ¥æŠŠGeneratorå‡½æ•°ä¼ å…¥runå‡½æ•°å³å¯ã€‚å½“ç„¶ï¼Œå‰ææ˜¯æ¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œéƒ½è¦æ˜¯Thunkå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè·Ÿåœ¨yieldå‘½ä»¤åé¢çš„å¿…é¡»æ˜¯Thunkå‡½æ•°ã€‚ var g = function* (){ var f1 = yield readFile(&#39;fileA&#39;); var f2 = yield readFile(&#39;fileB&#39;); // ... var fn = yield readFile(&#39;fileN&#39;); }; run(g); ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°gå°è£…äº†nä¸ªå¼‚æ­¥çš„è¯»å–æ–‡ä»¶æ“ä½œï¼Œåªè¦æ‰§è¡Œrunå‡½æ•°ï¼Œè¿™äº›æ“ä½œå°±ä¼šè‡ªåŠ¨å®Œæˆã€‚è¿™æ ·ä¸€æ¥ï¼Œå¼‚æ­¥æ“ä½œä¸ä»…å¯ä»¥å†™å¾—åƒåŒæ­¥æ“ä½œï¼Œè€Œä¸”ä¸€è¡Œä»£ç å°±å¯ä»¥æ‰§è¡Œã€‚ Thunkå‡½æ•°å¹¶ä¸æ˜¯Generatorå‡½æ•°è‡ªåŠ¨æ‰§è¡Œçš„å”¯ä¸€æ–¹æ¡ˆã€‚å› ä¸ºè‡ªåŠ¨æ‰§è¡Œçš„å…³é”®æ˜¯ï¼Œå¿…é¡»æœ‰ä¸€ç§æœºåˆ¶ï¼Œè‡ªåŠ¨æ§åˆ¶Generatorå‡½æ•°çš„æµç¨‹ï¼Œæ¥æ”¶å’Œäº¤è¿˜ç¨‹åºçš„æ‰§è¡Œæƒã€‚å›è°ƒå‡½æ•°å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼ŒPromise å¯¹è±¡ä¹Ÿå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ coæ¨¡å—åŸºæœ¬ç”¨æ³•coæ¨¡å—æ˜¯è‘—åç¨‹åºå‘˜TJ Holowaychukäº2013å¹´6æœˆå‘å¸ƒçš„ä¸€ä¸ªå°å·¥å…·ï¼Œç”¨äºGeneratorå‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œã€‚ æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªGeneratorå‡½æ•°ï¼Œç”¨äºä¾æ¬¡è¯»å–ä¸¤ä¸ªæ–‡ä»¶ã€‚ var gen = function* (){ var f1 = yield readFile(&#39;/etc/fstab&#39;); var f2 = yield readFile(&#39;/etc/shells&#39;); console.log(f1.toString()); console.log(f2.toString()); }; coæ¨¡å—å¯ä»¥è®©ä½ ä¸ç”¨ç¼–å†™Generatorå‡½æ•°çš„æ‰§è¡Œå™¨ã€‚ var co = require(&#39;co&#39;); co(gen); ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°åªè¦ä¼ å…¥coå‡½æ•°ï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚ coå‡½æ•°è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå› æ­¤å¯ä»¥ç”¨thenæ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚ co(gen).then(function (){ console.log(&#39;Generator å‡½æ•°æ‰§è¡Œå®Œæˆ&#39;); }); ä¸Šé¢ä»£ç ä¸­ï¼Œç­‰åˆ°Generatorå‡½æ•°æ‰§è¡Œç»“æŸï¼Œå°±ä¼šè¾“å‡ºä¸€è¡Œæç¤ºã€‚ coæ¨¡å—çš„åŸç†ä¸ºä»€ä¹ˆ co å¯ä»¥è‡ªåŠ¨æ‰§è¡Œ Generator å‡½æ•°ï¼Ÿ å‰é¢è¯´è¿‡ï¼ŒGenerator å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„å®¹å™¨ã€‚å®ƒçš„è‡ªåŠ¨æ‰§è¡Œéœ€è¦ä¸€ç§æœºåˆ¶ï¼Œå½“å¼‚æ­¥æ“ä½œæœ‰äº†ç»“æœï¼Œèƒ½å¤Ÿè‡ªåŠ¨äº¤å›æ‰§è¡Œæƒã€‚ ä¸¤ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ ï¼ˆ1ï¼‰å›è°ƒå‡½æ•°ã€‚å°†å¼‚æ­¥æ“ä½œåŒ…è£…æˆ Thunk å‡½æ•°ï¼Œåœ¨å›è°ƒå‡½æ•°é‡Œé¢äº¤å›æ‰§è¡Œæƒã€‚ ï¼ˆ2ï¼‰Promise å¯¹è±¡ã€‚å°†å¼‚æ­¥æ“ä½œåŒ…è£…æˆ Promise å¯¹è±¡ï¼Œç”¨thenæ–¹æ³•äº¤å›æ‰§è¡Œæƒã€‚ co æ¨¡å—å…¶å®å°±æ˜¯å°†ä¸¤ç§è‡ªåŠ¨æ‰§è¡Œå™¨ï¼ˆThunk å‡½æ•°å’Œ Promise å¯¹è±¡ï¼‰ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ¨¡å—ã€‚ä½¿ç”¨ co çš„å‰ææ¡ä»¶æ˜¯ï¼ŒGenerator å‡½æ•°çš„yieldå‘½ä»¤åé¢ï¼Œåªèƒ½æ˜¯ Thunk å‡½æ•°æˆ– Promise å¯¹è±¡ã€‚ ä¸Šä¸€èŠ‚å·²ç»ä»‹ç»äº†åŸºäº Thunk å‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚ä¸‹é¢æ¥çœ‹ï¼ŒåŸºäº Promise å¯¹è±¡çš„è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚è¿™æ˜¯ç†è§£ co æ¨¡å—å¿…é¡»çš„ã€‚ åŸºäº Promise å¯¹è±¡çš„è‡ªåŠ¨æ‰§è¡Œè¿˜æ˜¯æ²¿ç”¨ä¸Šé¢çš„ä¾‹å­ã€‚é¦–å…ˆï¼ŒæŠŠfsæ¨¡å—çš„readFileæ–¹æ³•åŒ…è£…æˆä¸€ä¸ª Promise å¯¹è±¡ã€‚ var fs = require(&#39;fs&#39;); var readFile = function (fileName){ return new Promise(function (resolve, reject){ fs.readFile(fileName, function(error, data){ if (error) return reject(error); resolve(data); }); }); }; var gen = function* (){ var f1 = yield readFile(&#39;/etc/fstab&#39;); var f2 = yield readFile(&#39;/etc/shells&#39;); console.log(f1.toString()); console.log(f2.toString()); }; ç„¶åï¼Œæ‰‹åŠ¨æ‰§è¡Œä¸Šé¢çš„ Generator å‡½æ•°ã€‚ var g = gen(); g.next().value.then(function(data){ g.next(data).value.then(function(data){ g.next(data); }); }); æ‰‹åŠ¨æ‰§è¡Œå…¶å®å°±æ˜¯ç”¨thenæ–¹æ³•ï¼Œå±‚å±‚æ·»åŠ å›è°ƒå‡½æ•°ã€‚ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œå°±å¯ä»¥å†™å‡ºä¸€ä¸ªè‡ªåŠ¨æ‰§è¡Œå™¨ã€‚ function run(gen){ var g = gen(); function next(data){ var result = g.next(data); if (result.done) return result.value; result.value.then(function(data){ next(data); }); } next(); } run(gen); ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦ Generator å‡½æ•°è¿˜æ²¡æ‰§è¡Œåˆ°æœ€åä¸€æ­¥ï¼Œnextå‡½æ•°å°±è°ƒç”¨è‡ªèº«ï¼Œä»¥æ­¤å®ç°è‡ªåŠ¨æ‰§è¡Œã€‚ co æ¨¡å—çš„æºç co å°±æ˜¯ä¸Šé¢é‚£ä¸ªè‡ªåŠ¨æ‰§è¡Œå™¨çš„æ‰©å±•ï¼Œå®ƒçš„æºç åªæœ‰å‡ åè¡Œï¼Œéå¸¸ç®€å•ã€‚ é¦–å…ˆï¼Œco å‡½æ•°æ¥å— Generator å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚ function co(gen) { var ctx = this; return new Promise(function(resolve, reject) { }); } åœ¨è¿”å›çš„ Promise å¯¹è±¡é‡Œé¢ï¼Œco å…ˆæ£€æŸ¥å‚æ•°genæ˜¯å¦ä¸º Generator å‡½æ•°ã€‚å¦‚æœæ˜¯ï¼Œå°±æ‰§è¡Œè¯¥å‡½æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆå¯¹è±¡ï¼›å¦‚æœä¸æ˜¯å°±è¿”å›ï¼Œå¹¶å°† Promise å¯¹è±¡çš„çŠ¶æ€æ”¹ä¸ºresolvedã€‚ function co(gen) { var ctx = this; return new Promise(function(resolve, reject) { if (typeof gen === &#39;function&#39;) gen = gen.call(ctx); if (!gen || typeof gen.next !== &#39;function&#39;) return resolve(gen); }); } æ¥ç€ï¼Œco å°† Generator å‡½æ•°çš„å†…éƒ¨æŒ‡é’ˆå¯¹è±¡çš„nextæ–¹æ³•ï¼ŒåŒ…è£…æˆonFulfilledå‡½æ•°ã€‚è¿™ä¸»è¦æ˜¯ä¸ºäº†èƒ½å¤Ÿæ•æ‰æŠ›å‡ºçš„é”™è¯¯ã€‚ function co(gen) { var ctx = this; return new Promise(function(resolve, reject) { if (typeof gen === &#39;function&#39;) gen = gen.call(ctx); if (!gen || typeof gen.next !== &#39;function&#39;) return resolve(gen); onFulfilled(); function onFulfilled(res) { var ret; try { ret = gen.next(res); } catch (e) { return reject(e); } next(ret); } }); } æœ€åï¼Œå°±æ˜¯å…³é”®çš„nextå‡½æ•°ï¼Œå®ƒä¼šåå¤è°ƒç”¨è‡ªèº«ã€‚ function next(ret) { if (ret.done) return resolve(ret.value); var value = toPromise.call(ctx, ret.value); if (value &amp;&amp; isPromise(value)) return value.then(onFulfilled, onRejected); return onRejected( new TypeError( &#39;You may only yield a function, promise, generator, array, or object, &#39; + &#39;but the following object was passed: &quot;&#39; + String(ret.value) + &#39;&quot;&#39; ) ); } ä¸Šé¢ä»£ç ä¸­ï¼Œnextå‡½æ•°çš„å†…éƒ¨ä»£ç ï¼Œä¸€å…±åªæœ‰å››è¡Œå‘½ä»¤ã€‚ ç¬¬ä¸€è¡Œï¼Œæ£€æŸ¥å½“å‰æ˜¯å¦ä¸º Generator å‡½æ•°çš„æœ€åä¸€æ­¥ï¼Œå¦‚æœæ˜¯å°±è¿”å›ã€‚ ç¬¬äºŒè¡Œï¼Œç¡®ä¿æ¯ä¸€æ­¥çš„è¿”å›å€¼ï¼Œæ˜¯ Promise å¯¹è±¡ã€‚ ç¬¬ä¸‰è¡Œï¼Œä½¿ç”¨thenæ–¹æ³•ï¼Œä¸ºè¿”å›å€¼åŠ ä¸Šå›è°ƒå‡½æ•°ï¼Œç„¶åé€šè¿‡onFulfilledå‡½æ•°å†æ¬¡è°ƒç”¨nextå‡½æ•°ã€‚ ç¬¬å››è¡Œï¼Œåœ¨å‚æ•°ä¸ç¬¦åˆè¦æ±‚çš„æƒ…å†µä¸‹ï¼ˆå‚æ•°é Thunk å‡½æ•°å’Œ Promise å¯¹è±¡ï¼‰ï¼Œå°† Promise å¯¹è±¡çš„çŠ¶æ€æ”¹ä¸ºrejectedï¼Œä»è€Œç»ˆæ­¢æ‰§è¡Œã€‚ å¤„ç†å¹¶å‘çš„å¼‚æ­¥æ“ä½œco æ”¯æŒå¹¶å‘çš„å¼‚æ­¥æ“ä½œï¼Œå³å…è®¸æŸäº›æ“ä½œåŒæ—¶è¿›è¡Œï¼Œç­‰åˆ°å®ƒä»¬å…¨éƒ¨å®Œæˆï¼Œæ‰è¿›è¡Œä¸‹ä¸€æ­¥ã€‚ è¿™æ—¶ï¼Œè¦æŠŠå¹¶å‘çš„æ“ä½œéƒ½æ”¾åœ¨æ•°ç»„æˆ–å¯¹è±¡é‡Œé¢ï¼Œè·Ÿåœ¨yieldè¯­å¥åé¢ã€‚ // æ•°ç»„çš„å†™æ³• co(function* () { var res = yield [ Promise.resolve(1), Promise.resolve(2) ]; console.log(res); }).catch(onerror); // å¯¹è±¡çš„å†™æ³• co(function* () { var res = yield { 1: Promise.resolve(1), 2: Promise.resolve(2), }; console.log(res); }).catch(onerror); ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ co(function* () { var values = [n1, n2, n3]; yield values.map(somethingAsync); }); function* somethingAsync(x) { // do something async return y } ä¸Šé¢çš„ä»£ç å…è®¸å¹¶å‘ä¸‰ä¸ªsomethingAsyncå¼‚æ­¥æ“ä½œï¼Œç­‰åˆ°å®ƒä»¬å…¨éƒ¨å®Œæˆï¼Œæ‰ä¼šè¿›è¡Œä¸‹ä¸€æ­¥ã€‚ITæŠ€æœ¯åˆ†äº«å°½åœ¨ğŸ”— æ¶µæœˆå¤©-microzz.comhttps://microzz.com asyncå‡½æ•°å«ä¹‰ES2017 æ ‡å‡†æä¾›äº†asyncå‡½æ•°ï¼Œä½¿å¾—å¼‚æ­¥æ“ä½œå˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚ asyncå‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿä¸€å¥è¯ï¼Œasyncå‡½æ•°å°±æ˜¯ Generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚å‰æ–‡æœ‰ä¸€ä¸ª Generator å‡½æ•°ï¼Œä¾æ¬¡è¯»å–ä¸¤ä¸ªæ–‡ä»¶ã€‚ var fs = require(&#39;fs&#39;); var readFile = function (fileName) { return new Promise(function (resolve, reject) { fs.readFile(fileName, function(error, data) { if (error) reject(error); resolve(data); }); }); }; var gen = function* (){ var f1 = yield readFile(&#39;/etc/fstab&#39;); var f2 = yield readFile(&#39;/etc/shells&#39;); console.log(f1.toString()); console.log(f2.toString()); }; å†™æˆasyncå‡½æ•°ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚ var asyncReadFile = async function (){ var f1 = await readFile(&#39;/etc/fstab&#39;); var f2 = await readFile(&#39;/etc/shells&#39;); console.log(f1.toString()); console.log(f2.toString()); }; ä¸€æ¯”è¾ƒå°±ä¼šå‘ç°ï¼Œasyncå‡½æ•°å°±æ˜¯å°† Generator å‡½æ•°çš„æ˜Ÿå·ï¼ˆ*ï¼‰æ›¿æ¢æˆasyncï¼Œå°†yieldæ›¿æ¢æˆawaitï¼Œä»…æ­¤è€Œå·²ã€‚ asyncå‡½æ•°å¯¹ Generator å‡½æ•°çš„æ”¹è¿›ï¼Œä½“ç°åœ¨ä»¥ä¸‹å››ç‚¹ã€‚ ï¼ˆ1ï¼‰å†…ç½®æ‰§è¡Œå™¨ã€‚Generator å‡½æ•°çš„æ‰§è¡Œå¿…é¡»é æ‰§è¡Œå™¨ï¼Œæ‰€ä»¥æ‰æœ‰äº†coæ¨¡å—ï¼Œè€Œasyncå‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œasyncå‡½æ•°çš„æ‰§è¡Œï¼Œä¸æ™®é€šå‡½æ•°ä¸€æ¨¡ä¸€æ ·ï¼Œåªè¦ä¸€è¡Œã€‚ var result = asyncReadFile(); ä¸Šé¢çš„ä»£ç è°ƒç”¨äº†asyncReadFileå‡½æ•°ï¼Œç„¶åå®ƒå°±ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œè¾“å‡ºæœ€åç»“æœã€‚è¿™å®Œå…¨ä¸åƒ Generator å‡½æ•°ï¼Œéœ€è¦è°ƒç”¨nextæ–¹æ³•ï¼Œæˆ–è€…ç”¨coæ¨¡å—ï¼Œæ‰èƒ½å¾—åˆ°çœŸæ­£æ‰§è¡Œï¼Œå¾—åˆ°æœ€åç»“æœã€‚ ï¼ˆ2ï¼‰æ›´å¥½çš„è¯­ä¹‰ã€‚asyncå’Œawaitï¼Œæ¯”èµ·æ˜Ÿå·å’Œyieldï¼Œè¯­ä¹‰æ›´æ¸…æ¥šäº†ã€‚asyncè¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œawaitè¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚ ï¼ˆ3ï¼‰æ›´å¹¿çš„é€‚ç”¨æ€§ã€‚ coæ¨¡å—çº¦å®šï¼Œyieldå‘½ä»¤åé¢åªèƒ½æ˜¯ Thunk å‡½æ•°æˆ– Promise å¯¹è±¡ï¼Œè€Œasyncå‡½æ•°çš„awaitå‘½ä»¤åé¢ï¼Œå¯ä»¥æ˜¯Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œä½†è¿™æ—¶ç­‰åŒäºåŒæ­¥æ“ä½œï¼‰ã€‚ ï¼ˆ4ï¼‰è¿”å›å€¼æ˜¯ Promiseã€‚asyncå‡½æ•°çš„è¿”å›å€¼æ˜¯ Promise å¯¹è±¡ï¼Œè¿™æ¯” Generator å‡½æ•°çš„è¿”å›å€¼æ˜¯ Iterator å¯¹è±¡æ–¹ä¾¿å¤šäº†ã€‚ä½ å¯ä»¥ç”¨thenæ–¹æ³•æŒ‡å®šä¸‹ä¸€æ­¥çš„æ“ä½œã€‚ è¿›ä¸€æ­¥è¯´ï¼Œasyncå‡½æ•°å®Œå…¨å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œawaitå‘½ä»¤å°±æ˜¯å†…éƒ¨thenå‘½ä»¤çš„è¯­æ³•ç³–ã€‚ è¯­æ³•asyncå‡½æ•°çš„è¯­æ³•è§„åˆ™æ€»ä½“ä¸Šæ¯”è¾ƒç®€å•ï¼Œéš¾ç‚¹æ˜¯é”™è¯¯å¤„ç†æœºåˆ¶ã€‚ ï¼ˆ1ï¼‰asyncå‡½æ•°è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚ asyncå‡½æ•°å†…éƒ¨returnè¯­å¥è¿”å›çš„å€¼ï¼Œä¼šæˆä¸ºthenæ–¹æ³•å›è°ƒå‡½æ•°çš„å‚æ•°ã€‚ async function f() { return &#39;hello world&#39;; } f().then(v =&gt; console.log(v)) // &quot;hello world&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°få†…éƒ¨returnå‘½ä»¤è¿”å›çš„å€¼ï¼Œä¼šè¢«thenæ–¹æ³•å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚ asyncå‡½æ•°å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œä¼šå¯¼è‡´è¿”å›çš„ Promise å¯¹è±¡å˜ä¸ºrejectçŠ¶æ€ã€‚æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡ä¼šè¢«catchæ–¹æ³•å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚ async function f() { throw new Error(&#39;å‡ºé”™äº†&#39;); } f().then( v =&gt; console.log(v), e =&gt; console.log(e) ) // Error: å‡ºé”™äº† ï¼ˆ2ï¼‰asyncå‡½æ•°è¿”å›çš„ Promise å¯¹è±¡ï¼Œå¿…é¡»ç­‰åˆ°å†…éƒ¨æ‰€æœ‰awaitå‘½ä»¤çš„ Promise å¯¹è±¡æ‰§è¡Œå®Œï¼Œæ‰ä¼šå‘ç”ŸçŠ¶æ€æ”¹å˜ï¼Œé™¤éé‡åˆ°returnè¯­å¥æˆ–è€…æŠ›å‡ºé”™è¯¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰asyncå‡½æ•°å†…éƒ¨çš„å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œï¼Œæ‰ä¼šæ‰§è¡Œthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ async function getTitle(url) { let response = await fetch(url); let html = await response.text(); return html.match(/&lt;title&gt;([\\s\\S]+)&lt;\\/title&gt;/i)[1]; } getTitle(&#39;https://tc39.github.io/ecma262/&#39;).then(console.log) // &quot;ECMAScript 2017 Language Specification&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°getTitleå†…éƒ¨æœ‰ä¸‰ä¸ªæ“ä½œï¼šæŠ“å–ç½‘é¡µã€å–å‡ºæ–‡æœ¬ã€åŒ¹é…é¡µé¢æ ‡é¢˜ã€‚åªæœ‰è¿™ä¸‰ä¸ªæ“ä½œå…¨éƒ¨å®Œæˆï¼Œæ‰ä¼šæ‰§è¡Œthenæ–¹æ³•é‡Œé¢çš„console.logã€‚ ï¼ˆ3ï¼‰æ­£å¸¸æƒ…å†µä¸‹ï¼Œawaitå‘½ä»¤åé¢æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ã€‚å¦‚æœä¸æ˜¯ï¼Œä¼šè¢«è½¬æˆä¸€ä¸ªç«‹å³resolveçš„ Promise å¯¹è±¡ã€‚ async function f() { return await 123; } f().then(v =&gt; console.log(v)) // 123 ä¸Šé¢ä»£ç ä¸­ï¼Œawaitå‘½ä»¤çš„å‚æ•°æ˜¯æ•°å€¼123ï¼Œå®ƒè¢«è½¬æˆPromiseå¯¹è±¡ï¼Œå¹¶ç«‹å³resolveã€‚ awaitå‘½ä»¤åé¢çš„Promiseå¯¹è±¡å¦‚æœå˜ä¸ºrejectçŠ¶æ€ï¼Œåˆ™rejectçš„å‚æ•°ä¼šè¢«catchæ–¹æ³•çš„å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚ async function f() { await Promise.reject(&#39;å‡ºé”™äº†&#39;); } f() .then(v =&gt; console.log(v)) .catch(e =&gt; console.log(e)) // å‡ºé”™äº† æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œawaitè¯­å¥å‰é¢æ²¡æœ‰returnï¼Œä½†æ˜¯rejectæ–¹æ³•çš„å‚æ•°ä¾ç„¶ä¼ å…¥äº†catchæ–¹æ³•çš„å›è°ƒå‡½æ•°ã€‚è¿™é‡Œå¦‚æœåœ¨awaitå‰é¢åŠ ä¸Šreturnï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ åªè¦ä¸€ä¸ªawaitè¯­å¥åé¢çš„Promiseå˜ä¸ºrejectï¼Œé‚£ä¹ˆæ•´ä¸ªasyncå‡½æ•°éƒ½ä¼šä¸­æ–­æ‰§è¡Œã€‚ async function f() { await Promise.reject(&#39;å‡ºé”™äº†&#39;); await Promise.resolve(&#39;hello world&#39;); // ä¸ä¼šæ‰§è¡Œ } ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒä¸ªawaitè¯­å¥æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªawaitè¯­å¥çŠ¶æ€å˜æˆäº†rejectã€‚ ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†ç¬¬ä¸€ä¸ªawaitæ”¾åœ¨try...catchç»“æ„é‡Œé¢ï¼Œè¿™æ ·ç¬¬äºŒä¸ªawaitå°±ä¼šæ‰§è¡Œã€‚ async function f() { try { await Promise.reject(&#39;å‡ºé”™äº†&#39;); } catch(e) { } return await Promise.resolve(&#39;hello world&#39;); } f() .then(v =&gt; console.log(v)) // hello world å¦ä¸€ç§æ–¹æ³•æ˜¯awaitåé¢çš„Promiseå¯¹è±¡å†è·Ÿä¸€ä¸ªcatchæ–¹æ³•ï¼Œå¤„ç†å‰é¢å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚ async function f() { await Promise.reject(&#39;å‡ºé”™äº†&#39;) .catch(e =&gt; console.log(e)); return await Promise.resolve(&#39;hello world&#39;); } f() .then(v =&gt; console.log(v)) // å‡ºé”™äº† // hello world å¦‚æœæœ‰å¤šä¸ªawaitå‘½ä»¤ï¼Œå¯ä»¥ç»Ÿä¸€æ”¾åœ¨try...catchç»“æ„ä¸­ã€‚ async function main() { try { var val1 = await firstStep(); var val2 = await secondStep(val1); var val3 = await thirdStep(val1, val2); console.log(&#39;Final: &#39;, val3); } catch (err) { console.error(err); } } ï¼ˆ4ï¼‰å¦‚æœawaitåé¢çš„å¼‚æ­¥æ“ä½œå‡ºé”™ï¼Œé‚£ä¹ˆç­‰åŒäºasyncå‡½æ•°è¿”å›çš„Promiseå¯¹è±¡è¢«rejectã€‚ async function f() { await new Promise(function (resolve, reject) { throw new Error(&#39;å‡ºé”™äº†&#39;); }); } f() .then(v =&gt; console.log(v)) .catch(e =&gt; console.log(e)) // Errorï¼šå‡ºé”™äº† ä¸Šé¢ä»£ç ä¸­ï¼Œasyncå‡½æ•°fæ‰§è¡Œåï¼Œawaitåé¢çš„Promiseå¯¹è±¡ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œå¯¼è‡´catchæ–¹æ³•çš„å›è°ƒå‡½æ•°è¢«è°ƒç”¨ï¼Œå®ƒçš„å‚æ•°å°±æ˜¯æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡ã€‚å…·ä½“çš„æ‰§è¡Œæœºåˆ¶ï¼Œå¯ä»¥å‚è€ƒåæ–‡çš„â€œasyncå‡½æ•°çš„å®ç°â€ã€‚ é˜²æ­¢å‡ºé”™çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯å°†å…¶æ”¾åœ¨try...catchä»£ç å—ä¹‹ä¸­ã€‚ async function f() { try { await new Promise(function (resolve, reject) { throw new Error(&#39;å‡ºé”™äº†&#39;); }); } catch(e) { } return await(&#39;hello world&#39;); } asyncå‡½æ•°çš„å®ç°async å‡½æ•°çš„å®ç°ï¼Œå°±æ˜¯å°† Generator å‡½æ•°å’Œè‡ªåŠ¨æ‰§è¡Œå™¨ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œã€‚ async function fn(args){ // ... } // ç­‰åŒäº function fn(args){ return spawn(function*() { // ... }); } æ‰€æœ‰çš„asyncå‡½æ•°éƒ½å¯ä»¥å†™æˆä¸Šé¢çš„ç¬¬äºŒç§å½¢å¼ï¼Œå…¶ä¸­çš„ spawn å‡½æ•°å°±æ˜¯è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚ ä¸‹é¢ç»™å‡ºspawnå‡½æ•°çš„å®ç°ï¼ŒåŸºæœ¬å°±æ˜¯å‰æ–‡è‡ªåŠ¨æ‰§è¡Œå™¨çš„ç¿»ç‰ˆã€‚ function spawn(genF) { return new Promise(function(resolve, reject) { var gen = genF(); function step(nextF) { try { var next = nextF(); } catch(e) { return reject(e); } if(next.done) { return resolve(next.value); } Promise.resolve(next.value).then(function(v) { step(function() { return gen.next(v); }); }, function(e) { step(function() { return gen.throw(e); }); }); } step(function() { return gen.next(undefined); }); }); } async å‡½æ•°çš„ç”¨æ³•asyncå‡½æ•°è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨thenæ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ°awaitå°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°è§¦å‘çš„å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ¥ç€æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ async function getStockPriceByName(name) { var symbol = await getStockSymbol(name); var stockPrice = await getStockPrice(symbol); return stockPrice; } getStockPriceByName(&#39;goog&#39;).then(function (result) { console.log(result); }); ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªè·å–è‚¡ç¥¨æŠ¥ä»·çš„å‡½æ•°ï¼Œå‡½æ•°å‰é¢çš„asyncå…³é”®å­—ï¼Œè¡¨æ˜è¯¥å‡½æ•°å†…éƒ¨æœ‰å¼‚æ­¥æ“ä½œã€‚è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œä¼šç«‹å³è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚ ä¸‹é¢çš„ä¾‹å­ï¼ŒæŒ‡å®šå¤šå°‘æ¯«ç§’åè¾“å‡ºä¸€ä¸ªå€¼ã€‚ function timeout(ms) { return new Promise((resolve) =&gt; { setTimeout(resolve, ms); }); } async function asyncPrint(value, ms) { await timeout(ms); console.log(value) } asyncPrint(&#39;hello world&#39;, 50); ä¸Šé¢ä»£ç æŒ‡å®š50æ¯«ç§’ä»¥åï¼Œè¾“å‡ºhello worldã€‚ Asyncå‡½æ•°æœ‰å¤šç§ä½¿ç”¨å½¢å¼ã€‚ // å‡½æ•°å£°æ˜ async function foo() {} // å‡½æ•°è¡¨è¾¾å¼ const foo = async function () {}; // å¯¹è±¡çš„æ–¹æ³• let obj = { async foo() {} }; obj.foo().then(...) // Class çš„æ–¹æ³• class Storage { constructor() { this.cachePromise = caches.open(&#39;avatars&#39;); } async getAvatar(name) { const cache = await this.cachePromise; return cache.match(`/avatars/${name}.jpg`); } } const storage = new Storage(); storage.getAvatar(&#39;jake&#39;).then(â€¦); // ç®­å¤´å‡½æ•° const foo = async () =&gt; {}; æ³¨æ„ç‚¹ç¬¬ä¸€ç‚¹ï¼Œawaitå‘½ä»¤åé¢çš„Promiseå¯¹è±¡ï¼Œè¿è¡Œç»“æœå¯èƒ½æ˜¯rejectedï¼Œæ‰€ä»¥æœ€å¥½æŠŠawaitå‘½ä»¤æ”¾åœ¨try...catchä»£ç å—ä¸­ã€‚ async function myFunction() { try { await somethingThatReturnsAPromise(); } catch (err) { console.log(err); } } // å¦ä¸€ç§å†™æ³• async function myFunction() { await somethingThatReturnsAPromise() .catch(function (err) { console.log(err); }; } ç¬¬äºŒç‚¹ï¼Œå¤šä¸ªawaitå‘½ä»¤åé¢çš„å¼‚æ­¥æ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨ç»§å‘å…³ç³»ï¼Œæœ€å¥½è®©å®ƒä»¬åŒæ—¶è§¦å‘ã€‚ let foo = await getFoo(); let bar = await getBar(); ä¸Šé¢ä»£ç ä¸­ï¼ŒgetFooå’ŒgetBaræ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å¼‚æ­¥æ“ä½œï¼ˆå³äº’ä¸ä¾èµ–ï¼‰ï¼Œè¢«å†™æˆç»§å‘å…³ç³»ã€‚è¿™æ ·æ¯”è¾ƒè€—æ—¶ï¼Œå› ä¸ºåªæœ‰getFooå®Œæˆä»¥åï¼Œæ‰ä¼šæ‰§è¡ŒgetBarï¼Œå®Œå…¨å¯ä»¥è®©å®ƒä»¬åŒæ—¶è§¦å‘ã€‚ // å†™æ³•ä¸€ let [foo, bar] = await Promise.all([getFoo(), getBar()]); // å†™æ³•äºŒ let fooPromise = getFoo(); let barPromise = getBar(); let foo = await fooPromise; let bar = await barPromise; ä¸Šé¢ä¸¤ç§å†™æ³•ï¼ŒgetFooå’ŒgetBaréƒ½æ˜¯åŒæ—¶è§¦å‘ï¼Œè¿™æ ·å°±ä¼šç¼©çŸ­ç¨‹åºçš„æ‰§è¡Œæ—¶é—´ã€‚ ç¬¬ä¸‰ç‚¹ï¼Œawaitå‘½ä»¤åªèƒ½ç”¨åœ¨asyncå‡½æ•°ä¹‹ä¸­ï¼Œå¦‚æœç”¨åœ¨æ™®é€šå‡½æ•°ï¼Œå°±ä¼šæŠ¥é”™ã€‚ async function dbFuc(db) { let docs = [{}, {}, {}]; // æŠ¥é”™ docs.forEach(function (doc) { await db.post(doc); }); } ä¸Šé¢ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸ºawaitç”¨åœ¨æ™®é€šå‡½æ•°ä¹‹ä¸­äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœå°†forEachæ–¹æ³•çš„å‚æ•°æ”¹æˆasyncå‡½æ•°ï¼Œä¹Ÿæœ‰é—®é¢˜ã€‚ async function dbFuc(db) { let docs = [{}, {}, {}]; // å¯èƒ½å¾—åˆ°é”™è¯¯ç»“æœ docs.forEach(async function (doc) { await db.post(doc); }); } ä¸Šé¢ä»£ç å¯èƒ½ä¸ä¼šæ­£å¸¸å·¥ä½œï¼ŒåŸå› æ˜¯è¿™æ—¶ä¸‰ä¸ªdb.postæ“ä½œå°†æ˜¯å¹¶å‘æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åŒæ—¶æ‰§è¡Œï¼Œè€Œä¸æ˜¯ç»§å‘æ‰§è¡Œã€‚æ­£ç¡®çš„å†™æ³•æ˜¯é‡‡ç”¨forå¾ªç¯ã€‚ async function dbFuc(db) { let docs = [{}, {}, {}]; for (let doc of docs) { await db.post(doc); } } å¦‚æœç¡®å®å¸Œæœ›å¤šä¸ªè¯·æ±‚å¹¶å‘æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨Promise.allæ–¹æ³•ã€‚ async function dbFuc(db) { let docs = [{}, {}, {}]; let promises = docs.map((doc) =&gt; db.post(doc)); let results = await Promise.all(promises); console.log(results); } // æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„å†™æ³• async function dbFuc(db) { let docs = [{}, {}, {}]; let promises = docs.map((doc) =&gt; db.post(doc)); let results = []; for (let promise of promises) { results.push(await promise); } console.log(results); } ES6å°†awaitå¢åŠ ä¸ºä¿ç•™å­—ã€‚ä½¿ç”¨è¿™ä¸ªè¯ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œåœ¨ES5æ˜¯åˆæ³•çš„ï¼Œåœ¨ES6å°†æŠ›å‡ºSyntaxErrorã€‚ ä¸Promiseã€Generatorçš„æ¯”è¾ƒæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œæ¥çœ‹Asyncå‡½æ•°ä¸Promiseã€Generatorå‡½æ•°çš„åŒºåˆ«ã€‚ å‡å®šæŸä¸ªDOMå…ƒç´ ä¸Šé¢ï¼Œéƒ¨ç½²äº†ä¸€ç³»åˆ—çš„åŠ¨ç”»ï¼Œå‰ä¸€ä¸ªåŠ¨ç”»ç»“æŸï¼Œæ‰èƒ½å¼€å§‹åä¸€ä¸ªã€‚å¦‚æœå½“ä¸­æœ‰ä¸€ä¸ªåŠ¨ç”»å‡ºé”™ï¼Œå°±ä¸å†å¾€ä¸‹æ‰§è¡Œï¼Œè¿”å›ä¸Šä¸€ä¸ªæˆåŠŸæ‰§è¡Œçš„åŠ¨ç”»çš„è¿”å›å€¼ã€‚ é¦–å…ˆæ˜¯Promiseçš„å†™æ³•ã€‚ function chainAnimationsPromise(elem, animations) { // å˜é‡retç”¨æ¥ä¿å­˜ä¸Šä¸€ä¸ªåŠ¨ç”»çš„è¿”å›å€¼ var ret = null; // æ–°å»ºä¸€ä¸ªç©ºçš„Promise var p = Promise.resolve(); // ä½¿ç”¨thenæ–¹æ³•ï¼Œæ·»åŠ æ‰€æœ‰åŠ¨ç”» for(var anim of animations) { p = p.then(function(val) { ret = val; return anim(elem); }); } // è¿”å›ä¸€ä¸ªéƒ¨ç½²äº†é”™è¯¯æ•æ‰æœºåˆ¶çš„Promise return p.catch(function(e) { /* å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ */ }).then(function() { return ret; }); } è™½ç„¶Promiseçš„å†™æ³•æ¯”å›è°ƒå‡½æ•°çš„å†™æ³•å¤§å¤§æ”¹è¿›ï¼Œä½†æ˜¯ä¸€çœ¼çœ‹ä¸Šå»ï¼Œä»£ç å®Œå…¨éƒ½æ˜¯Promiseçš„APIï¼ˆthenã€catchç­‰ç­‰ï¼‰ï¼Œæ“ä½œæœ¬èº«çš„è¯­ä¹‰åè€Œä¸å®¹æ˜“çœ‹å‡ºæ¥ã€‚ æ¥ç€æ˜¯Generatorå‡½æ•°çš„å†™æ³•ã€‚ function chainAnimationsGenerator(elem, animations) { return spawn(function*() { var ret = null; try { for(var anim of animations) { ret = yield anim(elem); } } catch(e) { /* å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ */ } return ret; }); } ä¸Šé¢ä»£ç ä½¿ç”¨Generatorå‡½æ•°éå†äº†æ¯ä¸ªåŠ¨ç”»ï¼Œè¯­ä¹‰æ¯”Promiseå†™æ³•æ›´æ¸…æ™°ï¼Œç”¨æˆ·å®šä¹‰çš„æ“ä½œå…¨éƒ¨éƒ½å‡ºç°åœ¨spawnå‡½æ•°çš„å†…éƒ¨ã€‚è¿™ä¸ªå†™æ³•çš„é—®é¢˜åœ¨äºï¼Œå¿…é¡»æœ‰ä¸€ä¸ªä»»åŠ¡è¿è¡Œå™¨ï¼Œè‡ªåŠ¨æ‰§è¡ŒGeneratorå‡½æ•°ï¼Œä¸Šé¢ä»£ç çš„spawnå‡½æ•°å°±æ˜¯è‡ªåŠ¨æ‰§è¡Œå™¨ï¼Œå®ƒè¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè€Œä¸”å¿…é¡»ä¿è¯yieldè¯­å¥åé¢çš„è¡¨è¾¾å¼ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªPromiseã€‚ æœ€åæ˜¯Asyncå‡½æ•°çš„å†™æ³•ã€‚ async function chainAnimationsAsync(elem, animations) { var ret = null; try { for(var anim of animations) { ret = await anim(elem); } } catch(e) { /* å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ */ } return ret; } å¯ä»¥çœ‹åˆ°Asyncå‡½æ•°çš„å®ç°æœ€ç®€æ´ï¼Œæœ€ç¬¦åˆè¯­ä¹‰ï¼Œå‡ ä¹æ²¡æœ‰è¯­ä¹‰ä¸ç›¸å…³çš„ä»£ç ã€‚å®ƒå°†Generatorå†™æ³•ä¸­çš„è‡ªåŠ¨æ‰§è¡Œå™¨ï¼Œæ”¹åœ¨è¯­è¨€å±‚é¢æä¾›ï¼Œä¸æš´éœ²ç»™ç”¨æˆ·ï¼Œå› æ­¤ä»£ç é‡æœ€å°‘ã€‚å¦‚æœä½¿ç”¨Generatorå†™æ³•ï¼Œè‡ªåŠ¨æ‰§è¡Œå™¨éœ€è¦ç”¨æˆ·è‡ªå·±æä¾›ã€‚ å®ä¾‹ï¼šæŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œå®é™…å¼€å‘ä¸­ï¼Œç»å¸¸é‡åˆ°ä¸€ç»„å¼‚æ­¥æ“ä½œï¼Œéœ€è¦æŒ‰ç…§é¡ºåºå®Œæˆã€‚æ¯”å¦‚ï¼Œä¾æ¬¡è¿œç¨‹è¯»å–ä¸€ç»„URLï¼Œç„¶åæŒ‰ç…§è¯»å–çš„é¡ºåºè¾“å‡ºç»“æœã€‚ Promise çš„å†™æ³•å¦‚ä¸‹ã€‚ function logInOrder(urls) { // è¿œç¨‹è¯»å–æ‰€æœ‰URL const textPromises = urls.map(url =&gt; { return fetch(url).then(response =&gt; response.text()); }); // æŒ‰æ¬¡åºè¾“å‡º textPromises.reduce((chain, textPromise) =&gt; { return chain.then(() =&gt; textPromise) .then(text =&gt; console.log(text)); }, Promise.resolve()); } ä¸Šé¢ä»£ç ä½¿ç”¨fetchæ–¹æ³•ï¼ŒåŒæ—¶è¿œç¨‹è¯»å–ä¸€ç»„URLã€‚æ¯ä¸ªfetchæ“ä½œéƒ½è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œæ”¾å…¥textPromisesæ•°ç»„ã€‚ç„¶åï¼Œreduceæ–¹æ³•ä¾æ¬¡å¤„ç†æ¯ä¸ªPromiseå¯¹è±¡ï¼Œç„¶åä½¿ç”¨thenï¼Œå°†æ‰€æœ‰Promiseå¯¹è±¡è¿èµ·æ¥ï¼Œå› æ­¤å°±å¯ä»¥ä¾æ¬¡è¾“å‡ºç»“æœã€‚ è¿™ç§å†™æ³•ä¸å¤ªç›´è§‚ï¼Œå¯è¯»æ€§æ¯”è¾ƒå·®ã€‚ä¸‹é¢æ˜¯asyncå‡½æ•°å®ç°ã€‚ async function logInOrder(urls) { for (const url of urls) { const response = await fetch(url); console.log(await response.text()); } } ä¸Šé¢ä»£ç ç¡®å®å¤§å¤§ç®€åŒ–ï¼Œé—®é¢˜æ˜¯æ‰€æœ‰è¿œç¨‹æ“ä½œéƒ½æ˜¯ç»§å‘ã€‚åªæœ‰å‰ä¸€ä¸ªURLè¿”å›ç»“æœï¼Œæ‰ä¼šå»è¯»å–ä¸‹ä¸€ä¸ªURLï¼Œè¿™æ ·åšæ•ˆç‡å¾ˆå·®ï¼Œéå¸¸æµªè´¹æ—¶é—´ã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯å¹¶å‘å‘å‡ºè¿œç¨‹è¯·æ±‚ã€‚ async function logInOrder(urls) { // å¹¶å‘è¯»å–è¿œç¨‹URL const textPromises = urls.map(async url =&gt; { const response = await fetch(url); return response.text(); }); // æŒ‰æ¬¡åºè¾“å‡º for (const textPromise of textPromises) { console.log(await textPromise); } } ä¸Šé¢ä»£ç ä¸­ï¼Œè™½ç„¶mapæ–¹æ³•çš„å‚æ•°æ˜¯asyncå‡½æ•°ï¼Œä½†å®ƒæ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œå› ä¸ºåªæœ‰asyncå‡½æ•°å†…éƒ¨æ˜¯ç»§å‘æ‰§è¡Œï¼Œå¤–éƒ¨ä¸å—å½±å“ã€‚åé¢çš„for..ofå¾ªç¯å†…éƒ¨ä½¿ç”¨äº†awaitï¼Œå› æ­¤å®ç°äº†æŒ‰é¡ºåºè¾“å‡ºã€‚ å¼‚æ­¥éå†å™¨ã€Šéå†å™¨ã€‹ä¸€ç« è¯´è¿‡ï¼ŒIterator æ¥å£æ˜¯ä¸€ç§æ•°æ®éå†çš„åè®®ï¼Œåªè¦è°ƒç”¨éå†å™¨å¯¹è±¡çš„nextæ–¹æ³•ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰éå†æŒ‡é’ˆæ‰€åœ¨çš„é‚£ä¸ªä½ç½®çš„ä¿¡æ¯ã€‚nextæ–¹æ³•è¿”å›çš„å¯¹è±¡çš„ç»“æ„æ˜¯{value, done}ï¼Œå…¶ä¸­valueè¡¨ç¤ºå½“å‰çš„æ•°æ®çš„å€¼ï¼Œdoneæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéå†æ˜¯å¦ç»“æŸã€‚ è¿™é‡Œéšå«ç€ä¸€ä¸ªè§„å®šï¼Œnextæ–¹æ³•å¿…é¡»æ˜¯åŒæ­¥çš„ï¼Œåªè¦è°ƒç”¨å°±å¿…é¡»ç«‹åˆ»è¿”å›å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦æ‰§è¡Œnextæ–¹æ³•ï¼Œå°±å¿…é¡»åŒæ­¥åœ°å¾—åˆ°valueå’Œdoneè¿™ä¸¤ä¸ªå±æ€§ã€‚å¦‚æœéå†æŒ‡é’ˆæ­£å¥½æŒ‡å‘åŒæ­¥æ“ä½œï¼Œå½“ç„¶æ²¡æœ‰é—®é¢˜ï¼Œä½†å¯¹äºå¼‚æ­¥æ“ä½œï¼Œå°±ä¸å¤ªåˆé€‚äº†ã€‚ç›®å‰çš„è§£å†³æ–¹æ³•æ˜¯ï¼ŒGenerator å‡½æ•°é‡Œé¢çš„å¼‚æ­¥æ“ä½œï¼Œè¿”å›ä¸€ä¸ª Thunk å‡½æ•°æˆ–è€… Promise å¯¹è±¡ï¼Œå³valueå±æ€§æ˜¯ä¸€ä¸ª Thunk å‡½æ•°æˆ–è€… Promise å¯¹è±¡ï¼Œç­‰å¾…ä»¥åè¿”å›çœŸæ­£çš„å€¼ï¼Œè€Œdoneå±æ€§åˆ™è¿˜æ˜¯åŒæ­¥äº§ç”Ÿçš„ã€‚ ç›®å‰ï¼Œæœ‰ä¸€ä¸ªææ¡ˆï¼Œä¸ºå¼‚æ­¥æ“ä½œæä¾›åŸç”Ÿçš„éå†å™¨æ¥å£ï¼Œå³valueå’Œdoneè¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯å¼‚æ­¥äº§ç”Ÿï¼Œè¿™ç§°ä¸ºâ€å¼‚æ­¥éå†å™¨â€œï¼ˆAsync Iteratorï¼‰ã€‚ å¼‚æ­¥éå†çš„æ¥å£å¼‚æ­¥éå†å™¨çš„æœ€å¤§çš„è¯­æ³•ç‰¹ç‚¹ï¼Œå°±æ˜¯è°ƒç”¨éå†å™¨çš„nextæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ã€‚ asyncIterator .next() .then( ({ value, done }) =&gt; /* ... */ ); ä¸Šé¢ä»£ç ä¸­ï¼ŒasyncIteratoræ˜¯ä¸€ä¸ªå¼‚æ­¥éå†å™¨ï¼Œè°ƒç”¨nextæ–¹æ³•ä»¥åï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨thenæ–¹æ³•æŒ‡å®šï¼Œè¿™ä¸ª Promise å¯¹è±¡çš„çŠ¶æ€å˜ä¸ºresolveä»¥åçš„å›è°ƒå‡½æ•°ã€‚å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œåˆ™æ˜¯ä¸€ä¸ªå…·æœ‰valueå’Œdoneä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ï¼Œè¿™ä¸ªè·ŸåŒæ­¥éå†å™¨æ˜¯ä¸€æ ·çš„ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªå¯¹è±¡çš„åŒæ­¥éå†å™¨çš„æ¥å£ï¼Œéƒ¨ç½²åœ¨Symbol.iteratorå±æ€§ä¸Šé¢ã€‚åŒæ ·åœ°ï¼Œå¯¹è±¡çš„å¼‚æ­¥éå†å™¨æ¥å£ï¼Œéƒ¨ç½²åœ¨Symbol.asyncIteratorå±æ€§ä¸Šé¢ã€‚ä¸ç®¡æ˜¯ä»€ä¹ˆæ ·çš„å¯¹è±¡ï¼Œåªè¦å®ƒçš„Symbol.asyncIteratorå±æ€§æœ‰å€¼ï¼Œå°±è¡¨ç¤ºåº”è¯¥å¯¹å®ƒè¿›è¡Œå¼‚æ­¥éå†ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå¼‚æ­¥éå†å™¨çš„ä¾‹å­ã€‚ const asyncIterable = createAsyncIterable([&#39;a&#39;, &#39;b&#39;]); const asyncIterator = asyncIterable[Symbol.asyncIterator](); asyncIterator .next() .then(iterResult1 =&gt; { console.log(iterResult1); // { value: &#39;a&#39;, done: false } return asyncIterator.next(); }) .then(iterResult2 =&gt; { console.log(iterResult2); // { value: &#39;b&#39;, done: false } return asyncIterator.next(); }) .then(iterResult3 =&gt; { console.log(iterResult3); // { value: undefined, done: true } }); ä¸Šé¢ä»£ç ä¸­ï¼Œå¼‚æ­¥éå†å™¨å…¶å®è¿”å›äº†ä¸¤æ¬¡å€¼ã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼›ç­‰åˆ° Promise å¯¹è±¡resolveäº†ï¼Œå†è¿”å›ä¸€ä¸ªè¡¨ç¤ºå½“å‰æ•°æ®æˆå‘˜ä¿¡æ¯çš„å¯¹è±¡ã€‚è¿™å°±æ˜¯è¯´ï¼Œå¼‚æ­¥éå†å™¨ä¸åŒæ­¥éå†å™¨æœ€ç»ˆè¡Œä¸ºæ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯ä¼šå…ˆè¿”å› Promise å¯¹è±¡ï¼Œä½œä¸ºä¸­ä»‹ã€‚ ç”±äºå¼‚æ­¥éå†å™¨çš„nextæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ã€‚å› æ­¤ï¼Œå¯ä»¥æŠŠå®ƒæ”¾åœ¨awaitå‘½ä»¤åé¢ã€‚ async function f() { const asyncIterable = createAsyncIterable([&#39;a&#39;, &#39;b&#39;]); const asyncIterator = asyncIterable[Symbol.asyncIterator](); console.log(await asyncIterator.next()); // { value: &#39;a&#39;, done: false } console.log(await asyncIterator.next()); // { value: &#39;b&#39;, done: false } console.log(await asyncIterator.next()); // { value: undefined, done: true } } ä¸Šé¢ä»£ç ä¸­ï¼Œnextæ–¹æ³•ç”¨awaitå¤„ç†ä»¥åï¼Œå°±ä¸å¿…ä½¿ç”¨thenæ–¹æ³•äº†ã€‚æ•´ä¸ªæµç¨‹å·²ç»å¾ˆæ¥è¿‘åŒæ­¥å¤„ç†äº†ã€‚ æ³¨æ„ï¼Œå¼‚æ­¥éå†å™¨çš„nextæ–¹æ³•æ˜¯å¯ä»¥è¿ç»­è°ƒç”¨çš„ï¼Œä¸å¿…ç­‰åˆ°ä¸Šä¸€æ­¥äº§ç”Ÿçš„Promiseå¯¹è±¡resolveä»¥åå†è°ƒç”¨ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œnextæ–¹æ³•ä¼šç´¯ç§¯èµ·æ¥ï¼Œè‡ªåŠ¨æŒ‰ç…§æ¯ä¸€æ­¥çš„é¡ºåºè¿è¡Œä¸‹å»ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ŒæŠŠæ‰€æœ‰çš„nextæ–¹æ³•æ”¾åœ¨Promise.allæ–¹æ³•é‡Œé¢ã€‚ const asyncGenObj = createAsyncIterable([&#39;a&#39;, &#39;b&#39;]); const [{value: v1}, {value: v2}] = await Promise.all([ asyncGenObj.next(), asyncGenObj.next() ]); console.log(v1, v2); // a b å¦ä¸€ç§ç”¨æ³•æ˜¯ä¸€æ¬¡æ€§è°ƒç”¨æ‰€æœ‰çš„nextæ–¹æ³•ï¼Œç„¶åawaitæœ€åä¸€æ­¥æ“ä½œã€‚ const writer = openFile(&#39;someFile.txt&#39;); writer.next(&#39;hello&#39;); writer.next(&#39;world&#39;); await writer.return(); for awaitâ€¦ofå‰é¢ä»‹ç»è¿‡ï¼Œfor...ofå¾ªç¯ç”¨äºéå†åŒæ­¥çš„ Iterator æ¥å£ã€‚æ–°å¼•å…¥çš„for await...ofå¾ªç¯ï¼Œåˆ™æ˜¯ç”¨äºéå†å¼‚æ­¥çš„ Iterator æ¥å£ã€‚ async function f() { for await (const x of createAsyncIterable([&#39;a&#39;, &#39;b&#39;])) { console.log(x); } } // a // b ä¸Šé¢ä»£ç ä¸­ï¼ŒcreateAsyncIterable()è¿”å›ä¸€ä¸ªå¼‚æ­¥éå†å™¨ï¼Œfor...ofå¾ªç¯è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªéå†å™¨çš„nextæ–¹æ³•ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªPromiseå¯¹è±¡ã€‚awaitç”¨æ¥å¤„ç†è¿™ä¸ªPromiseå¯¹è±¡ï¼Œä¸€æ—¦resolveï¼Œå°±æŠŠå¾—åˆ°çš„å€¼ï¼ˆxï¼‰ä¼ å…¥for...ofçš„å¾ªç¯ä½“ã€‚ for await...ofå¾ªç¯çš„ä¸€ä¸ªç”¨é€”ï¼Œæ˜¯éƒ¨ç½²äº† asyncIterable æ“ä½œçš„å¼‚æ­¥æ¥å£ï¼Œå¯ä»¥ç›´æ¥æ”¾å…¥è¿™ä¸ªå¾ªç¯ã€‚ let body = &#39;&#39;; for await(const data of req) body += data; const parsed = JSON.parse(body); console.log(&#39;got&#39;, parsed); ä¸Šé¢ä»£ç ä¸­ï¼Œreqæ˜¯ä¸€ä¸ª asyncIterable å¯¹è±¡ï¼Œç”¨æ¥å¼‚æ­¥è¯»å–æ•°æ®ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨for await...ofå¾ªç¯ä»¥åï¼Œä»£ç ä¼šéå¸¸ç®€æ´ã€‚ å¦‚æœnextæ–¹æ³•è¿”å›çš„Promiseå¯¹è±¡è¢«rejectï¼Œé‚£ä¹ˆå°±è¦ç”¨try...catchæ•æ‰ã€‚ async function () { try { for await (const x of createRejectingIterable()) { console.log(x); } } catch (e) { console.error(e); } } æ³¨æ„ï¼Œfor await...ofå¾ªç¯ä¹Ÿå¯ä»¥ç”¨äºåŒæ­¥éå†å™¨ã€‚ (async function () { for await (const x of [&#39;a&#39;, &#39;b&#39;]) { console.log(x); } })(); // a // b å¼‚æ­¥Generatorå‡½æ•°å°±åƒ Generator å‡½æ•°è¿”å›ä¸€ä¸ªåŒæ­¥éå†å™¨å¯¹è±¡ä¸€æ ·ï¼Œå¼‚æ­¥ Generator å‡½æ•°çš„ä½œç”¨ï¼Œæ˜¯è¿”å›ä¸€ä¸ªå¼‚æ­¥éå†å™¨å¯¹è±¡ã€‚ åœ¨è¯­æ³•ä¸Šï¼Œå¼‚æ­¥ Generator å‡½æ•°å°±æ˜¯asyncå‡½æ•°ä¸ Generator å‡½æ•°çš„ç»“åˆã€‚ async function* readLines(path) { let file = await fileOpen(path); try { while (!file.EOF) { yield await file.readLine(); } } finally { await file.close(); } } ä¸Šé¢ä»£ç ä¸­ï¼Œå¼‚æ­¥æ“ä½œå‰é¢ä½¿ç”¨awaitå…³é”®å­—æ ‡æ˜ï¼Œå³awaitåé¢çš„æ“ä½œï¼Œåº”è¯¥è¿”å›Promiseå¯¹è±¡ã€‚å‡¡æ˜¯ä½¿ç”¨yieldå…³é”®å­—çš„åœ°æ–¹ï¼Œå°±æ˜¯nextæ–¹æ³•çš„åœä¸‹æ¥çš„åœ°æ–¹ï¼Œå®ƒåé¢çš„è¡¨è¾¾å¼çš„å€¼ï¼ˆå³await file.readLine()çš„å€¼ï¼‰ï¼Œä¼šä½œä¸ºnext()è¿”å›å¯¹è±¡çš„valueå±æ€§ï¼Œè¿™ä¸€ç‚¹æ˜¯äºåŒæ­¥Generatorå‡½æ•°ä¸€è‡´çš„ã€‚ å¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼Œä½¿ç”¨ä¸Šé¢ä»£ç å®šä¹‰çš„å¼‚æ­¥Generatorå‡½æ•°ã€‚ for await (const line of readLines(filePath)) { console.log(line); } å¼‚æ­¥Generatorå‡½æ•°å¯ä»¥ä¸for await...ofå¾ªç¯ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚ async function* prefixLines(asyncIterable) { for await (const line of asyncIterable) { yield &#39;&gt; &#39; + line; } } yieldå‘½ä»¤ä¾ç„¶æ˜¯ç«‹åˆ»è¿”å›çš„ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ã€‚ async function* asyncGenerator() { console.log(&#39;Start&#39;); const result = await doSomethingAsync(); // (A) yield &#39;Result: &#39;+ result; // (B) console.log(&#39;Done&#39;); } ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨nextæ–¹æ³•ä»¥åï¼Œä¼šåœ¨Bå¤„æš‚åœæ‰§è¡Œï¼Œyieldå‘½ä»¤ç«‹åˆ»è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚è¿™ä¸ªPromiseå¯¹è±¡ä¸åŒäºAå¤„awaitå‘½ä»¤åé¢çš„é‚£ä¸ªPromiseå¯¹è±¡ã€‚ä¸»è¦æœ‰ä¸¤ç‚¹ä¸åŒï¼Œä¸€æ˜¯Aå¤„çš„Promiseå¯¹è±¡resolveä»¥åäº§ç”Ÿçš„å€¼ï¼Œä¼šæ”¾å…¥resultå˜é‡ï¼›äºŒæ˜¯Bå¤„çš„Promiseå¯¹è±¡resolveä»¥åäº§ç”Ÿçš„å€¼ï¼Œæ˜¯è¡¨è¾¾å¼&#39;Resultï¼š &#39; + resultçš„å€¼ï¼›äºŒæ˜¯Aå¤„çš„Promiseå¯¹è±¡ä¸€å®šå…ˆäºBå¤„çš„Promiseå¯¹è±¡resolveã€‚ å¦‚æœå¼‚æ­¥Generatorå‡½æ•°æŠ›å‡ºé”™è¯¯ï¼Œä¼šè¢«Promiseå¯¹è±¡rejectï¼Œç„¶åæŠ›å‡ºçš„é”™è¯¯è¢«catchæ–¹æ³•æ•è·ã€‚ async function* asyncGenerator() { throw new Error(&#39;Problem!&#39;); } asyncGenerator() .next() .catch(err =&gt; console.log(err)); // Error: Problem! æ³¨æ„ï¼Œæ™®é€šçš„asyncå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè€Œå¼‚æ­¥Generatorå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå¼‚æ­¥Iteratorå¯¹è±¡ã€‚åŸºæœ¬ä¸Šï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼Œasyncå‡½æ•°å’Œå¼‚æ­¥Generatorå‡½æ•°ï¼Œæ˜¯å°è£…å¼‚æ­¥æ“ä½œçš„ä¸¤ç§æ–¹æ³•ï¼Œéƒ½ç”¨æ¥è¾¾åˆ°åŒä¸€ç§ç›®çš„ã€‚åŒºåˆ«åœ¨äºï¼Œå‰è€…è‡ªå¸¦æ‰§è¡Œå™¨ï¼Œåè€…é€šè¿‡for await...ofæ‰§è¡Œï¼Œæˆ–è€…è‡ªå·±ç¼–å†™æ‰§è¡Œå™¨ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥Generatorå‡½æ•°çš„æ‰§è¡Œå™¨ã€‚ async function takeAsync(asyncIterable, count=Infinity) { const result = []; const iterator = asyncIterable[Symbol.asyncIterator](); while (result.length &lt; count) { const {value,done} = await iterator.next(); if (done) break; result.push(value); } return result; } ä¸Šé¢ä»£ç ä¸­ï¼Œå¼‚æ­¥Generatorå‡½æ•°äº§ç”Ÿçš„å¼‚æ­¥éå†å™¨ï¼Œä¼šé€šè¿‡whileå¾ªç¯è‡ªåŠ¨æ‰§è¡Œï¼Œæ¯å½“await iterator.next()å®Œæˆï¼Œå°±ä¼šè¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ã€‚ ä¸‹é¢æ˜¯è¿™ä¸ªè‡ªåŠ¨æ‰§è¡Œå™¨çš„ä¸€ä¸ªä½¿ç”¨å®ä¾‹ã€‚ async function f() { async function* gen() { yield &#39;a&#39;; yield &#39;b&#39;; yield &#39;c&#39;; } return await takeAsync(gen()); } f().then(function (result) { console.log(result); // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;] }) å¼‚æ­¥Generatorå‡½æ•°å‡ºç°ä»¥åï¼ŒJavaScriptå°±æœ‰äº†å››ç§å‡½æ•°å½¢å¼ï¼šæ™®é€šå‡½æ•°ã€asyncå‡½æ•°ã€Generatorå‡½æ•°å’Œå¼‚æ­¥Generatorå‡½æ•°ã€‚è¯·æ³¨æ„åŒºåˆ†æ¯ç§å‡½æ•°çš„ä¸åŒä¹‹å¤„ã€‚ æœ€åï¼ŒåŒæ­¥çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¼‚æ­¥Generatorå‡½æ•°ã€‚ async function* createAsyncIterable(syncIterable) { for (const elem of syncIterable) { yield elem; } } ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºæ²¡æœ‰å¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æœ‰ä½¿ç”¨awaitå…³é”®å­—ã€‚ yield* è¯­å¥yield*è¯­å¥ä¹Ÿå¯ä»¥è·Ÿä¸€ä¸ªå¼‚æ­¥éå†å™¨ã€‚ async function* gen1() { yield &#39;a&#39;; yield &#39;b&#39;; return 2; } async function* gen2() { const result = yield* gen1(); } ä¸Šé¢ä»£ç ä¸­ï¼Œgen2å‡½æ•°é‡Œé¢çš„resultå˜é‡ï¼Œæœ€åçš„å€¼æ˜¯2ã€‚ ä¸åŒæ­¥Generatorå‡½æ•°ä¸€æ ·ï¼Œfor await...ofå¾ªç¯ä¼šå±•å¼€yield*ã€‚ (async function () { for await (const x of gen2()) { console.log(x); } })(); // a // b æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Async","slug":"Async","permalink":"https://microzz.com/tags/Async/"}]},{"title":"Promiseå¯¹è±¡","date":"2017-01-14T06:11:38.000Z","path":"2017/01/14/promise/","text":"Promiseå¯¹è±¡Promiseçš„å«ä¹‰Promiseæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆâ€”â€”å›è°ƒå‡½æ•°å’Œäº‹ä»¶â€”â€”æ›´åˆç†å’Œæ›´å¼ºå¤§ã€‚å®ƒç”±ç¤¾åŒºæœ€æ—©æå‡ºå’Œå®ç°ï¼ŒES6å°†å…¶å†™è¿›äº†è¯­è¨€æ ‡å‡†ï¼Œç»Ÿä¸€äº†ç”¨æ³•ï¼ŒåŸç”Ÿæä¾›äº†Promiseå¯¹è±¡ã€‚ æ‰€è°“Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromiseæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promiseæä¾›ç»Ÿä¸€çš„APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚ Promiseå¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ã€‚ ï¼ˆ1ï¼‰å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚Promiseå¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼šPendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€Resolvedï¼ˆå·²å®Œæˆï¼Œåˆç§°Fulfilledï¼‰å’ŒRejectedï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™ä¹Ÿæ˜¯Promiseè¿™ä¸ªåå­—çš„ç”±æ¥ï¼Œå®ƒçš„è‹±è¯­æ„æ€å°±æ˜¯â€œæ‰¿è¯ºâ€ï¼Œè¡¨ç¤ºå…¶ä»–æ‰‹æ®µæ— æ³•æ”¹å˜ã€‚ ï¼ˆ2ï¼‰ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚Promiseå¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»Pendingå˜ä¸ºResolvedå’Œä»Pendingå˜ä¸ºRejectedã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœã€‚å°±ç®—æ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹Promiseå¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœã€‚è¿™ä¸äº‹ä»¶ï¼ˆEventï¼‰å®Œå…¨ä¸åŒï¼Œäº‹ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼Œå¦‚æœä½ é”™è¿‡äº†å®ƒï¼Œå†å»ç›‘å¬ï¼Œæ˜¯å¾—ä¸åˆ°ç»“æœçš„ã€‚ æœ‰äº†Promiseå¯¹è±¡ï¼Œå°±å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥ï¼Œé¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•°ã€‚æ­¤å¤–ï¼ŒPromiseå¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“ã€‚ Promiseä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œæ— æ³•å–æ¶ˆPromiseï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆã€‚å…¶æ¬¡ï¼Œå¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼ŒPromiseå†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨ã€‚ç¬¬ä¸‰ï¼Œå½“å¤„äºPendingçŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆï¼‰ã€‚ å¦‚æœæŸäº›äº‹ä»¶ä¸æ–­åœ°åå¤å‘ç”Ÿï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨streamæ¨¡å¼æ˜¯æ¯”éƒ¨ç½²Promiseæ›´å¥½çš„é€‰æ‹©ã€‚ åŸºæœ¬ç”¨æ³•ES6è§„å®šï¼ŒPromiseå¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆPromiseå®ä¾‹ã€‚ ä¸‹é¢ä»£ç åˆ›é€ äº†ä¸€ä¸ªPromiseå®ä¾‹ã€‚ var promise = new Promise(function(resolve, reject) { // ... some code if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){ resolve(value); } else { reject(error); } }); Promiseæ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯resolveå’Œrejectã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”±JavaScriptå¼•æ“æä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²ã€‚ resolveå‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œæˆåŠŸâ€ï¼ˆå³ä»Pendingå˜ä¸ºResolvedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼›rejectå‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œå¤±è´¥â€ï¼ˆå³ä»Pendingå˜ä¸ºRejectedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚ Promiseå®ä¾‹ç”Ÿæˆä»¥åï¼Œå¯ä»¥ç”¨thenæ–¹æ³•åˆ†åˆ«æŒ‡å®šResolvedçŠ¶æ€å’ŒRejectçŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚ promise.then(function(value) { // success }, function(error) { // failure }); thenæ–¹æ³•å¯ä»¥æ¥å—ä¸¤ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯Promiseå¯¹è±¡çš„çŠ¶æ€å˜ä¸ºResolvedæ—¶è°ƒç”¨ï¼Œç¬¬äºŒä¸ªå›è°ƒå‡½æ•°æ˜¯Promiseå¯¹è±¡çš„çŠ¶æ€å˜ä¸ºRejectæ—¶è°ƒç”¨ã€‚å…¶ä¸­ï¼Œç¬¬äºŒä¸ªå‡½æ•°æ˜¯å¯é€‰çš„ï¼Œä¸ä¸€å®šè¦æä¾›ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ¥å—Promiseå¯¹è±¡ä¼ å‡ºçš„å€¼ä½œä¸ºå‚æ•°ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡çš„ç®€å•ä¾‹å­ã€‚ function timeout(ms) { return new Promise((resolve, reject) =&gt; { setTimeout(resolve, ms, &#39;done&#39;); }); } timeout(100).then((value) =&gt; { console.log(value); }); ä¸Šé¢ä»£ç ä¸­ï¼Œtimeoutæ–¹æ³•è¿”å›ä¸€ä¸ªPromiseå®ä¾‹ï¼Œè¡¨ç¤ºä¸€æ®µæ—¶é—´ä»¥åæ‰ä¼šå‘ç”Ÿçš„ç»“æœã€‚è¿‡äº†æŒ‡å®šçš„æ—¶é—´ï¼ˆmså‚æ•°ï¼‰ä»¥åï¼ŒPromiseå®ä¾‹çš„çŠ¶æ€å˜ä¸ºResolvedï¼Œå°±ä¼šè§¦å‘thenæ–¹æ³•ç»‘å®šçš„å›è°ƒå‡½æ•°ã€‚ Promiseæ–°å»ºåå°±ä¼šç«‹å³æ‰§è¡Œã€‚ let promise = new Promise(function(resolve, reject) { console.log(&#39;Promise&#39;); resolve(); }); promise.then(function() { console.log(&#39;Resolved.&#39;); }); console.log(&#39;Hi!&#39;); // Promise // Hi! // Resolved ä¸Šé¢ä»£ç ä¸­ï¼ŒPromiseæ–°å»ºåç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥é¦–å…ˆè¾“å‡ºçš„æ˜¯â€œPromiseâ€ã€‚ç„¶åï¼Œthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°†åœ¨å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥â€œResolvedâ€æœ€åè¾“å‡ºã€‚ ä¸‹é¢æ˜¯å¼‚æ­¥åŠ è½½å›¾ç‰‡çš„ä¾‹å­ã€‚ function loadImageAsync(url) { return new Promise(function(resolve, reject) { var image = new Image(); image.onload = function() { resolve(image); }; image.onerror = function() { reject(new Error(&#39;Could not load image at &#39; + url)); }; image.src = url; }); } ä¸Šé¢ä»£ç ä¸­ï¼Œä½¿ç”¨PromiseåŒ…è£…äº†ä¸€ä¸ªå›¾ç‰‡åŠ è½½çš„å¼‚æ­¥æ“ä½œã€‚å¦‚æœåŠ è½½æˆåŠŸï¼Œå°±è°ƒç”¨resolveæ–¹æ³•ï¼Œå¦åˆ™å°±è°ƒç”¨rejectæ–¹æ³•ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨Promiseå¯¹è±¡å®ç°çš„Ajaxæ“ä½œçš„ä¾‹å­ã€‚ var getJSON = function(url) { var promise = new Promise(function(resolve, reject){ var client = new XMLHttpRequest(); client.open(&quot;GET&quot;, url); client.onreadystatechange = handler; client.responseType = &quot;json&quot;; client.setRequestHeader(&quot;Accept&quot;, &quot;application/json&quot;); client.send(); function handler() { if (this.readyState !== 4) { return; } if (this.status === 200) { resolve(this.response); } else { reject(new Error(this.statusText)); } }; }); return promise; }; getJSON(&quot;/posts.json&quot;).then(function(json) { console.log(&#39;Contents: &#39; + json); }, function(error) { console.error(&#39;å‡ºé”™äº†&#39;, error); }); ä¸Šé¢ä»£ç ä¸­ï¼ŒgetJSONæ˜¯å¯¹XMLHttpRequestå¯¹è±¡çš„å°è£…ï¼Œç”¨äºå‘å‡ºä¸€ä¸ªé’ˆå¯¹JSONæ•°æ®çš„HTTPè¯·æ±‚ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨getJSONå†…éƒ¨ï¼Œresolveå‡½æ•°å’Œrejectå‡½æ•°è°ƒç”¨æ—¶ï¼Œéƒ½å¸¦æœ‰å‚æ•°ã€‚ å¦‚æœè°ƒç”¨resolveå‡½æ•°å’Œrejectå‡½æ•°æ—¶å¸¦æœ‰å‚æ•°ï¼Œé‚£ä¹ˆå®ƒä»¬çš„å‚æ•°ä¼šè¢«ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚rejectå‡½æ•°çš„å‚æ•°é€šå¸¸æ˜¯Errorå¯¹è±¡çš„å®ä¾‹ï¼Œè¡¨ç¤ºæŠ›å‡ºçš„é”™è¯¯ï¼›resolveå‡½æ•°çš„å‚æ•°é™¤äº†æ­£å¸¸çš„å€¼ä»¥å¤–ï¼Œè¿˜å¯èƒ½æ˜¯å¦ä¸€ä¸ªPromiseå®ä¾‹ï¼Œè¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„ç»“æœæœ‰å¯èƒ½æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å¦ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚åƒä¸‹é¢è¿™æ ·ã€‚ var p1 = new Promise(function (resolve, reject) { // ... }); var p2 = new Promise(function (resolve, reject) { // ... resolve(p1); }) ä¸Šé¢ä»£ç ä¸­ï¼Œp1å’Œp2éƒ½æ˜¯Promiseçš„å®ä¾‹ï¼Œä½†æ˜¯p2çš„resolveæ–¹æ³•å°†p1ä½œä¸ºå‚æ•°ï¼Œå³ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœæ˜¯è¿”å›å¦ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚ æ³¨æ„ï¼Œè¿™æ—¶p1çš„çŠ¶æ€å°±ä¼šä¼ é€’ç»™p2ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œp1çš„çŠ¶æ€å†³å®šäº†p2çš„çŠ¶æ€ã€‚å¦‚æœp1çš„çŠ¶æ€æ˜¯Pendingï¼Œé‚£ä¹ˆp2çš„å›è°ƒå‡½æ•°å°±ä¼šç­‰å¾…p1çš„çŠ¶æ€æ”¹å˜ï¼›å¦‚æœp1çš„çŠ¶æ€å·²ç»æ˜¯Resolvedæˆ–è€…Rejectedï¼Œé‚£ä¹ˆp2çš„å›è°ƒå‡½æ•°å°†ä¼šç«‹åˆ»æ‰§è¡Œã€‚ var p1 = new Promise(function (resolve, reject) { setTimeout(() =&gt; reject(new Error(&#39;fail&#39;)), 3000) }) var p2 = new Promise(function (resolve, reject) { setTimeout(() =&gt; resolve(p1), 1000) }) p2 .then(result =&gt; console.log(result)) .catch(error =&gt; console.log(error)) // Error: fail ä¸Šé¢ä»£ç ä¸­ï¼Œp1æ˜¯ä¸€ä¸ªPromiseï¼Œ3ç§’ä¹‹åå˜ä¸ºrejectedã€‚p2çš„çŠ¶æ€åœ¨1ç§’ä¹‹åæ”¹å˜ï¼Œresolveæ–¹æ³•è¿”å›çš„æ˜¯p1ã€‚æ­¤æ—¶ï¼Œç”±äºp2è¿”å›çš„æ˜¯å¦ä¸€ä¸ªPromiseï¼Œæ‰€ä»¥åé¢çš„thenè¯­å¥éƒ½å˜æˆé’ˆå¯¹åè€…ï¼ˆp1ï¼‰ã€‚åˆè¿‡äº†2ç§’ï¼Œp1å˜ä¸ºrejectedï¼Œå¯¼è‡´è§¦å‘catchæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚ Promise.prototype.then()Promiseå®ä¾‹å…·æœ‰thenæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œthenæ–¹æ³•æ˜¯å®šä¹‰åœ¨åŸå‹å¯¹è±¡Promise.prototypeä¸Šçš„ã€‚å®ƒçš„ä½œç”¨æ˜¯ä¸ºPromiseå®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ã€‚å‰é¢è¯´è¿‡ï¼Œthenæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ResolvedçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰æ˜¯RejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚ thenæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯åŸæ¥é‚£ä¸ªPromiseå®ä¾‹ï¼‰ã€‚å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³thenæ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ªthenæ–¹æ³•ã€‚ getJSON(&quot;/posts.json&quot;).then(function(json) { return json.post; }).then(function(post) { // ... }); ä¸Šé¢çš„ä»£ç ä½¿ç”¨thenæ–¹æ³•ï¼Œä¾æ¬¡æŒ‡å®šäº†ä¸¤ä¸ªå›è°ƒå‡½æ•°ã€‚ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°å®Œæˆä»¥åï¼Œä¼šå°†è¿”å›ç»“æœä½œä¸ºå‚æ•°ï¼Œä¼ å…¥ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°ã€‚ é‡‡ç”¨é“¾å¼çš„thenï¼Œå¯ä»¥æŒ‡å®šä¸€ç»„æŒ‰ç…§æ¬¡åºè°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚è¿™æ—¶ï¼Œå‰ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæœ‰å¯èƒ½è¿”å›çš„è¿˜æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼ˆå³æœ‰å¼‚æ­¥æ“ä½œï¼‰ï¼Œè¿™æ—¶åä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå°±ä¼šç­‰å¾…è¯¥Promiseå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šè¢«è°ƒç”¨ã€‚ getJSON(&quot;/post/1.json&quot;).then(function(post) { return getJSON(post.commentURL); }).then(function funcA(comments) { console.log(&quot;Resolved: &quot;, comments); }, function funcB(err){ console.log(&quot;Rejected: &quot;, err); }); ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œè¿”å›çš„æ˜¯å¦ä¸€ä¸ªPromiseå¯¹è±¡ã€‚è¿™æ—¶ï¼Œç¬¬äºŒä¸ªthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°±ä¼šç­‰å¾…è¿™ä¸ªæ–°çš„Promiseå¯¹è±¡çŠ¶æ€å‘ç”Ÿå˜åŒ–ã€‚å¦‚æœå˜ä¸ºResolvedï¼Œå°±è°ƒç”¨funcAï¼Œå¦‚æœçŠ¶æ€å˜ä¸ºRejectedï¼Œå°±è°ƒç”¨funcBã€‚ å¦‚æœé‡‡ç”¨ç®­å¤´å‡½æ•°ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥å†™å¾—æ›´ç®€æ´ã€‚ getJSON(&quot;/post/1.json&quot;).then( post =&gt; getJSON(post.commentURL) ).then( comments =&gt; console.log(&quot;Resolved: &quot;, comments), err =&gt; console.log(&quot;Rejected: &quot;, err) ); Promise.prototype.catch()Promise.prototype.catchæ–¹æ³•æ˜¯.then(null, rejection)çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚ getJSON(&quot;/posts.json&quot;).then(function(posts) { // ... }).catch(function(error) { // å¤„ç† getJSON å’Œ å‰ä¸€ä¸ªå›è°ƒå‡½æ•°è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯ console.log(&#39;å‘ç”Ÿé”™è¯¯ï¼&#39;, error); }); ä¸Šé¢ä»£ç ä¸­ï¼ŒgetJSONæ–¹æ³•è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå¦‚æœè¯¥å¯¹è±¡çŠ¶æ€å˜ä¸ºResolvedï¼Œåˆ™ä¼šè°ƒç”¨thenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼›å¦‚æœå¼‚æ­¥æ“ä½œæŠ›å‡ºé”™è¯¯ï¼ŒçŠ¶æ€å°±ä¼šå˜ä¸ºRejectedï¼Œå°±ä¼šè°ƒç”¨catchæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¤„ç†è¿™ä¸ªé”™è¯¯ã€‚å¦å¤–ï¼Œthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœè¿è¡Œä¸­æŠ›å‡ºé”™è¯¯ï¼Œä¹Ÿä¼šè¢«catchæ–¹æ³•æ•è·ã€‚ p.then((val) =&gt; console.log(&quot;fulfilled:&quot;, val)) .catch((err) =&gt; console.log(&quot;rejected:&quot;, err)); // ç­‰åŒäº p.then((val) =&gt; console.log(&quot;fulfilled:&quot;, val)) .then(null, (err) =&gt; console.log(&quot;rejected:&quot;, err)); ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ var promise = new Promise(function(resolve, reject) { throw new Error(&#39;test&#39;); }); promise.catch(function(error) { console.log(error); }); // Error: test ä¸Šé¢ä»£ç ä¸­ï¼ŒpromiseæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå°±è¢«catchæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°æ•è·ã€‚æ³¨æ„ï¼Œä¸Šé¢çš„å†™æ³•ä¸ä¸‹é¢ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ã€‚ // å†™æ³•ä¸€ var promise = new Promise(function(resolve, reject) { try { throw new Error(&#39;test&#39;); } catch(e) { reject(e); } }); promise.catch(function(error) { console.log(error); }); // å†™æ³•äºŒ var promise = new Promise(function(resolve, reject) { reject(new Error(&#39;test&#39;)); }); promise.catch(function(error) { console.log(error); }); æ¯”è¾ƒä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œå¯ä»¥å‘ç°rejectæ–¹æ³•çš„ä½œç”¨ï¼Œç­‰åŒäºæŠ›å‡ºé”™è¯¯ã€‚ å¦‚æœPromiseçŠ¶æ€å·²ç»å˜æˆResolvedï¼Œå†æŠ›å‡ºé”™è¯¯æ˜¯æ— æ•ˆçš„ã€‚ var promise = new Promise(function(resolve, reject) { resolve(&#39;ok&#39;); throw new Error(&#39;test&#39;); }); promise .then(function(value) { console.log(value) }) .catch(function(error) { console.log(error) }); // ok ä¸Šé¢ä»£ç ä¸­ï¼ŒPromiseåœ¨resolveè¯­å¥åé¢ï¼Œå†æŠ›å‡ºé”™è¯¯ï¼Œä¸ä¼šè¢«æ•è·ï¼Œç­‰äºæ²¡æœ‰æŠ›å‡ºã€‚ Promiseå¯¹è±¡çš„é”™è¯¯å…·æœ‰â€œå†’æ³¡â€æ€§è´¨ï¼Œä¼šä¸€ç›´å‘åä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·ä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ªcatchè¯­å¥æ•è·ã€‚ getJSON(&quot;/post/1.json&quot;).then(function(post) { return getJSON(post.commentURL); }).then(function(comments) { // some code }).catch(function(error) { // å¤„ç†å‰é¢ä¸‰ä¸ªPromiseäº§ç”Ÿçš„é”™è¯¯ }); ä¸Šé¢ä»£ç ä¸­ï¼Œä¸€å…±æœ‰ä¸‰ä¸ªPromiseå¯¹è±¡ï¼šä¸€ä¸ªç”±getJSONäº§ç”Ÿï¼Œä¸¤ä¸ªç”±thenäº§ç”Ÿã€‚å®ƒä»¬ä¹‹ä¸­ä»»ä½•ä¸€ä¸ªæŠ›å‡ºçš„é”™è¯¯ï¼Œéƒ½ä¼šè¢«æœ€åä¸€ä¸ªcatchæ•è·ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œä¸è¦åœ¨thenæ–¹æ³•é‡Œé¢å®šä¹‰RejectçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼ˆå³thençš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œæ€»æ˜¯ä½¿ç”¨catchæ–¹æ³•ã€‚ // bad promise .then(function(data) { // success }, function(err) { // error }); // good promise .then(function(data) { //cb // success }) .catch(function(err) { // error }); ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒç§å†™æ³•è¦å¥½äºç¬¬ä¸€ç§å†™æ³•ï¼Œç†ç”±æ˜¯ç¬¬äºŒç§å†™æ³•å¯ä»¥æ•è·å‰é¢thenæ–¹æ³•æ‰§è¡Œä¸­çš„é”™è¯¯ï¼Œä¹Ÿæ›´æ¥è¿‘åŒæ­¥çš„å†™æ³•ï¼ˆtry/catchï¼‰ã€‚å› æ­¤ï¼Œå»ºè®®æ€»æ˜¯ä½¿ç”¨catchæ–¹æ³•ï¼Œè€Œä¸ä½¿ç”¨thenæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚ è·Ÿä¼ ç»Ÿçš„try/catchä»£ç å—ä¸åŒçš„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨catchæ–¹æ³•æŒ‡å®šé”™è¯¯å¤„ç†çš„å›è°ƒå‡½æ•°ï¼ŒPromiseå¯¹è±¡æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç ï¼Œå³ä¸ä¼šæœ‰ä»»ä½•ååº”ã€‚ var someAsyncThing = function() { return new Promise(function(resolve, reject) { // ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºxæ²¡æœ‰å£°æ˜ resolve(x + 2); }); }; someAsyncThing().then(function() { console.log(&#39;everything is great&#39;); }); ä¸Šé¢ä»£ç ä¸­ï¼ŒsomeAsyncThingå‡½æ•°äº§ç”Ÿçš„Promiseå¯¹è±¡ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ç”±äºæ²¡æœ‰æŒ‡å®šcatchæ–¹æ³•ï¼Œè¿™ä¸ªé”™è¯¯ä¸ä¼šè¢«æ•è·ï¼Œä¹Ÿä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç ï¼Œå¯¼è‡´è¿è¡Œåæ²¡æœ‰ä»»ä½•è¾“å‡ºã€‚æ³¨æ„ï¼ŒChromeæµè§ˆå™¨ä¸éµå®ˆè¿™æ¡è§„å®šï¼Œå®ƒä¼šæŠ›å‡ºé”™è¯¯â€œReferenceError: x is not definedâ€ã€‚ var promise = new Promise(function(resolve, reject) { resolve(&#39;ok&#39;); setTimeout(function() { throw new Error(&#39;test&#39;) }, 0) }); promise.then(function(value) { console.log(value) }); // ok // Uncaught Error: test ä¸Šé¢ä»£ç ä¸­ï¼ŒPromise æŒ‡å®šåœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€å†æŠ›å‡ºé”™è¯¯ï¼Œç»“æœç”±äºæ²¡æœ‰æŒ‡å®šä½¿ç”¨try...catchè¯­å¥ï¼Œå°±å†’æ³¡åˆ°æœ€å¤–å±‚ï¼Œæˆäº†æœªæ•è·çš„é”™è¯¯ã€‚å› ä¸ºæ­¤æ—¶ï¼ŒPromiseçš„å‡½æ•°ä½“å·²ç»è¿è¡Œç»“æŸäº†ï¼Œæ‰€ä»¥è¿™ä¸ªé”™è¯¯æ˜¯åœ¨Promiseå‡½æ•°ä½“å¤–æŠ›å‡ºçš„ã€‚ Node æœ‰ä¸€ä¸ªunhandledRejectionäº‹ä»¶ï¼Œä¸“é—¨ç›‘å¬æœªæ•è·çš„rejecté”™è¯¯ã€‚ process.on(&#39;unhandledRejection&#39;, function (err, p) { console.error(err.stack) }); ä¸Šé¢ä»£ç ä¸­ï¼ŒunhandledRejectionäº‹ä»¶çš„ç›‘å¬å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯é”™è¯¯å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯æŠ¥é”™çš„Promiseå®ä¾‹ï¼Œå®ƒå¯ä»¥ç”¨æ¥äº†è§£å‘ç”Ÿé”™è¯¯çš„ç¯å¢ƒä¿¡æ¯ã€‚ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œcatchæ–¹æ³•è¿”å›çš„è¿˜æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå› æ­¤åé¢è¿˜å¯ä»¥æ¥ç€è°ƒç”¨thenæ–¹æ³•ã€‚ var someAsyncThing = function() { return new Promise(function(resolve, reject) { // ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºxæ²¡æœ‰å£°æ˜ resolve(x + 2); }); }; someAsyncThing() .catch(function(error) { console.log(&#39;oh no&#39;, error); }) .then(function() { console.log(&#39;carry on&#39;); }); // oh no [ReferenceError: x is not defined] // carry on ä¸Šé¢ä»£ç è¿è¡Œå®Œcatchæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œä¼šæ¥ç€è¿è¡Œåé¢é‚£ä¸ªthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚å¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œåˆ™ä¼šè·³è¿‡catchæ–¹æ³•ã€‚ Promise.resolve() .catch(function(error) { console.log(&#39;oh no&#39;, error); }) .then(function() { console.log(&#39;carry on&#39;); }); // carry on ä¸Šé¢çš„ä»£ç å› ä¸ºæ²¡æœ‰æŠ¥é”™ï¼Œè·³è¿‡äº†catchæ–¹æ³•ï¼Œç›´æ¥æ‰§è¡Œåé¢çš„thenæ–¹æ³•ã€‚æ­¤æ—¶ï¼Œè¦æ˜¯thenæ–¹æ³•é‡Œé¢æŠ¥é”™ï¼Œå°±ä¸å‰é¢çš„catchæ— å…³äº†ã€‚ catchæ–¹æ³•ä¹‹ä¸­ï¼Œè¿˜èƒ½å†æŠ›å‡ºé”™è¯¯ã€‚ var someAsyncThing = function() { return new Promise(function(resolve, reject) { // ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºxæ²¡æœ‰å£°æ˜ resolve(x + 2); }); }; someAsyncThing().then(function() { return someOtherAsyncThing(); }).catch(function(error) { console.log(&#39;oh no&#39;, error); // ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºyæ²¡æœ‰å£°æ˜ y + 2; }).then(function() { console.log(&#39;carry on&#39;); }); // oh no [ReferenceError: x is not defined] ä¸Šé¢ä»£ç ä¸­ï¼Œcatchæ–¹æ³•æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºåé¢æ²¡æœ‰åˆ«çš„catchæ–¹æ³•äº†ï¼Œå¯¼è‡´è¿™ä¸ªé”™è¯¯ä¸ä¼šè¢«æ•è·ï¼Œä¹Ÿä¸ä¼šä¼ é€’åˆ°å¤–å±‚ã€‚å¦‚æœæ”¹å†™ä¸€ä¸‹ï¼Œç»“æœå°±ä¸ä¸€æ ·äº†ã€‚ someAsyncThing().then(function() { return someOtherAsyncThing(); }).catch(function(error) { console.log(&#39;oh no&#39;, error); // ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºyæ²¡æœ‰å£°æ˜ y + 2; }).catch(function(error) { console.log(&#39;carry on&#39;, error); }); // oh no [ReferenceError: x is not defined] // carry on [ReferenceError: y is not defined] ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒä¸ªcatchæ–¹æ³•ç”¨æ¥æ•è·ï¼Œå‰ä¸€ä¸ªcatchæ–¹æ³•æŠ›å‡ºçš„é”™è¯¯ã€‚ Promise.all()Promise.allæ–¹æ³•ç”¨äºå°†å¤šä¸ªPromiseå®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚ var p = Promise.all([p1, p2, p3]); ä¸Šé¢ä»£ç ä¸­ï¼ŒPromise.allæ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œp1ã€p2ã€p3éƒ½æ˜¯Promiseå¯¹è±¡çš„å®ä¾‹ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±ä¼šå…ˆè°ƒç”¨ä¸‹é¢è®²åˆ°çš„Promise.resolveæ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸ºPromiseå®ä¾‹ï¼Œå†è¿›ä¸€æ­¥å¤„ç†ã€‚ï¼ˆPromise.allæ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸æ˜¯æ•°ç»„ï¼Œä½†å¿…é¡»å…·æœ‰Iteratoræ¥å£ï¼Œä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯Promiseå®ä¾‹ã€‚ï¼‰ pçš„çŠ¶æ€ç”±p1ã€p2ã€p3å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µã€‚ ï¼ˆ1ï¼‰åªæœ‰p1ã€p2ã€p3çš„çŠ¶æ€éƒ½å˜æˆfulfilledï¼Œpçš„çŠ¶æ€æ‰ä¼šå˜æˆfulfilledï¼Œæ­¤æ—¶p1ã€p2ã€p3çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚ ï¼ˆ2ï¼‰åªè¦p1ã€p2ã€p3ä¹‹ä¸­æœ‰ä¸€ä¸ªè¢«rejectedï¼Œpçš„çŠ¶æ€å°±å˜æˆrejectedï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªè¢«rejectçš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼šä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ã€‚ // ç”Ÿæˆä¸€ä¸ªPromiseå¯¹è±¡çš„æ•°ç»„ var promises = [2, 3, 5, 7, 11, 13].map(function (id) { return getJSON(&quot;/post/&quot; + id + &quot;.json&quot;); }); Promise.all(promises).then(function (posts) { // ... }).catch(function(reason){ // ... }); ä¸Šé¢ä»£ç ä¸­ï¼Œpromisesæ˜¯åŒ…å«6ä¸ªPromiseå®ä¾‹çš„æ•°ç»„ï¼Œåªæœ‰è¿™6ä¸ªå®ä¾‹çš„çŠ¶æ€éƒ½å˜æˆfulfilledï¼Œæˆ–è€…å…¶ä¸­æœ‰ä¸€ä¸ªå˜ä¸ºrejectedï¼Œæ‰ä¼šè°ƒç”¨Promise.allæ–¹æ³•åé¢çš„å›è°ƒå‡½æ•°ã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ const databasePromise = connectDatabase(); const booksPromise = databaseProimse .then(findAllBooks); const userPromise = databasePromise .then(getCurrentUser); Promise.all([ booksPromise, userPromise ]) .then(([books, user]) =&gt; pickTopRecommentations(books, user)); ä¸Šé¢ä»£ç ä¸­ï¼ŒbooksPromiseå’ŒuserPromiseæ˜¯ä¸¤ä¸ªå¼‚æ­¥æ“ä½œï¼Œåªæœ‰ç­‰åˆ°å®ƒä»¬çš„ç»“æœéƒ½è¿”å›äº†ï¼Œæ‰ä¼šè§¦å‘pickTopRecommentationsè¿™ä¸ªå›è°ƒå‡½æ•°ã€‚ Promise.race()Promise.raceæ–¹æ³•åŒæ ·æ˜¯å°†å¤šä¸ªPromiseå®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚ var p = Promise.race([p1, p2, p3]); ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦p1ã€p2ã€p3ä¹‹ä¸­æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œpçš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚é‚£ä¸ªç‡å…ˆæ”¹å˜çš„ Promise å®ä¾‹çš„è¿”å›å€¼ï¼Œå°±ä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°ã€‚ Promise.raceæ–¹æ³•çš„å‚æ•°ä¸Promise.allæ–¹æ³•ä¸€æ ·ï¼Œå¦‚æœä¸æ˜¯ Promise å®ä¾‹ï¼Œå°±ä¼šå…ˆè°ƒç”¨ä¸‹é¢è®²åˆ°çš„Promise.resolveæ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸º Promise å®ä¾‹ï¼Œå†è¿›ä¸€æ­¥å¤„ç†ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœæŒ‡å®šæ—¶é—´å†…æ²¡æœ‰è·å¾—ç»“æœï¼Œå°±å°†Promiseçš„çŠ¶æ€å˜ä¸ºrejectï¼Œå¦åˆ™å˜ä¸ºresolveã€‚ var p = Promise.race([ fetch(&#39;/resource-that-may-take-a-while&#39;), new Promise(function (resolve, reject) { setTimeout(() =&gt; reject(new Error(&#39;request timeout&#39;)), 5000) }) ]) p.then(response =&gt; console.log(response)) p.catch(error =&gt; console.log(error)) ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœ5ç§’ä¹‹å†…fetchæ–¹æ³•æ— æ³•è¿”å›ç»“æœï¼Œå˜é‡pçš„çŠ¶æ€å°±ä¼šå˜ä¸ºrejectedï¼Œä»è€Œè§¦å‘catchæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚ Promise.resolve()æœ‰æ—¶éœ€è¦å°†ç°æœ‰å¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼ŒPromise.resolveæ–¹æ³•å°±èµ·åˆ°è¿™ä¸ªä½œç”¨ã€‚ var jsPromise = Promise.resolve($.ajax(&#39;/whatever.json&#39;)); ä¸Šé¢ä»£ç å°†jQueryç”Ÿæˆçš„deferredå¯¹è±¡ï¼Œè½¬ä¸ºä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ã€‚ Promise.resolveç­‰ä»·äºä¸‹é¢çš„å†™æ³•ã€‚ Promise.resolve(&#39;foo&#39;) // ç­‰ä»·äº new Promise(resolve =&gt; resolve(&#39;foo&#39;)) Promise.resolveæ–¹æ³•çš„å‚æ•°åˆ†æˆå››ç§æƒ…å†µã€‚ ï¼ˆ1ï¼‰å‚æ•°æ˜¯ä¸€ä¸ªPromiseå®ä¾‹ å¦‚æœå‚æ•°æ˜¯Promiseå®ä¾‹ï¼Œé‚£ä¹ˆPromise.resolveå°†ä¸åšä»»ä½•ä¿®æ”¹ã€åŸå°ä¸åŠ¨åœ°è¿”å›è¿™ä¸ªå®ä¾‹ã€‚ ï¼ˆ2ï¼‰å‚æ•°æ˜¯ä¸€ä¸ªthenableå¯¹è±¡ thenableå¯¹è±¡æŒ‡çš„æ˜¯å…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªå¯¹è±¡ã€‚ let thenable = { then: function(resolve, reject) { resolve(42); } }; Promise.resolveæ–¹æ³•ä¼šå°†è¿™ä¸ªå¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œç„¶åå°±ç«‹å³æ‰§è¡Œthenableå¯¹è±¡çš„thenæ–¹æ³•ã€‚ let thenable = { then: function(resolve, reject) { resolve(42); } }; let p1 = Promise.resolve(thenable); p1.then(function(value) { console.log(value); // 42 }); ä¸Šé¢ä»£ç ä¸­ï¼Œthenableå¯¹è±¡çš„thenæ–¹æ³•æ‰§è¡Œåï¼Œå¯¹è±¡p1çš„çŠ¶æ€å°±å˜ä¸ºresolvedï¼Œä»è€Œç«‹å³æ‰§è¡Œæœ€åé‚£ä¸ªthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œè¾“å‡º42ã€‚ ï¼ˆ3ï¼‰å‚æ•°ä¸æ˜¯å…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼Œæˆ–æ ¹æœ¬å°±ä¸æ˜¯å¯¹è±¡ å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼Œåˆ™Promise.resolveæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼ŒçŠ¶æ€ä¸ºResolvedã€‚ var p = Promise.resolve(&#39;Hello&#39;); p.then(function (s){ console.log(s) }); // Hello ä¸Šé¢ä»£ç ç”Ÿæˆä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡çš„å®ä¾‹pã€‚ç”±äºå­—ç¬¦ä¸²Helloä¸å±äºå¼‚æ­¥æ“ä½œï¼ˆåˆ¤æ–­æ–¹æ³•æ˜¯å®ƒä¸æ˜¯å…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼‰ï¼Œè¿”å›Promiseå®ä¾‹çš„çŠ¶æ€ä»ä¸€ç”Ÿæˆå°±æ˜¯Resolvedï¼Œæ‰€ä»¥å›è°ƒå‡½æ•°ä¼šç«‹å³æ‰§è¡Œã€‚Promise.resolveæ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŒæ—¶ä¼ ç»™å›è°ƒå‡½æ•°ã€‚ ï¼ˆ4ï¼‰ä¸å¸¦æœ‰ä»»ä½•å‚æ•° Promise.resolveæ–¹æ³•å…è®¸è°ƒç”¨æ—¶ä¸å¸¦å‚æ•°ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªResolvedçŠ¶æ€çš„Promiseå¯¹è±¡ã€‚ æ‰€ä»¥ï¼Œå¦‚æœå¸Œæœ›å¾—åˆ°ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œæ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•å°±æ˜¯ç›´æ¥è°ƒç”¨Promise.resolveæ–¹æ³•ã€‚ var p = Promise.resolve(); p.then(function () { // ... }); ä¸Šé¢ä»£ç çš„å˜é‡på°±æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç«‹å³resolveçš„Promiseå¯¹è±¡ï¼Œæ˜¯åœ¨æœ¬è½®â€œäº‹ä»¶å¾ªç¯â€ï¼ˆevent loopï¼‰çš„ç»“æŸæ—¶ï¼Œè€Œä¸æ˜¯åœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€çš„å¼€å§‹æ—¶ã€‚ setTimeout(function () { console.log(&#39;three&#39;); }, 0); Promise.resolve().then(function () { console.log(&#39;two&#39;); }); console.log(&#39;one&#39;); // one // two // three ä¸Šé¢ä»£ç ä¸­ï¼ŒsetTimeout(fn, 0)åœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€å¼€å§‹æ—¶æ‰§è¡Œï¼ŒPromise.resolve()åœ¨æœ¬è½®â€œäº‹ä»¶å¾ªç¯â€ç»“æŸæ—¶æ‰§è¡Œï¼Œconsole.log(â€™oneâ€˜)åˆ™æ˜¯ç«‹å³æ‰§è¡Œï¼Œå› æ­¤æœ€å…ˆè¾“å‡ºã€‚ Promise.reject()Promise.reject(reason)æ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„çŠ¶æ€ä¸ºrejectedã€‚ var p = Promise.reject(&#39;å‡ºé”™äº†&#39;); // ç­‰åŒäº var p = new Promise((resolve, reject) =&gt; reject(&#39;å‡ºé”™äº†&#39;)) p.then(null, function (s) { console.log(s) }); // å‡ºé”™äº† ä¸Šé¢ä»£ç ç”Ÿæˆä¸€ä¸ªPromiseå¯¹è±¡çš„å®ä¾‹pï¼ŒçŠ¶æ€ä¸ºrejectedï¼Œå›è°ƒå‡½æ•°ä¼šç«‹å³æ‰§è¡Œã€‚ æ³¨æ„ï¼ŒPromise.reject()æ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŸå°ä¸åŠ¨åœ°ä½œä¸ºrejectçš„ç†ç”±ï¼Œå˜æˆåç»­æ–¹æ³•çš„å‚æ•°ã€‚è¿™ä¸€ç‚¹ä¸Promise.resolveæ–¹æ³•ä¸ä¸€è‡´ã€‚ const thenable = { then(resolve, reject) { reject(&#39;å‡ºé”™äº†&#39;); } }; Promise.reject(thenable) .catch(e =&gt; { console.log(e === thenable) }) // true ä¸Šé¢ä»£ç ä¸­ï¼ŒPromise.rejectæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªthenableå¯¹è±¡ï¼Œæ‰§è¡Œä»¥åï¼Œåé¢catchæ–¹æ³•çš„å‚æ•°ä¸æ˜¯rejectæŠ›å‡ºçš„â€œå‡ºé”™äº†â€è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯thenableå¯¹è±¡ã€‚ ä¸¤ä¸ªæœ‰ç”¨çš„é™„åŠ æ–¹æ³•ES6çš„Promise APIæä¾›çš„æ–¹æ³•ä¸æ˜¯å¾ˆå¤šï¼Œæœ‰äº›æœ‰ç”¨çš„æ–¹æ³•å¯ä»¥è‡ªå·±éƒ¨ç½²ã€‚ä¸‹é¢ä»‹ç»å¦‚ä½•éƒ¨ç½²ä¸¤ä¸ªä¸åœ¨ES6ä¹‹ä¸­ã€ä½†å¾ˆæœ‰ç”¨çš„æ–¹æ³•ã€‚ done()Promiseå¯¹è±¡çš„å›è°ƒé“¾ï¼Œä¸ç®¡ä»¥thenæ–¹æ³•æˆ–catchæ–¹æ³•ç»“å°¾ï¼Œè¦æ˜¯æœ€åä¸€ä¸ªæ–¹æ³•æŠ›å‡ºé”™è¯¯ï¼Œéƒ½æœ‰å¯èƒ½æ— æ³•æ•æ‰åˆ°ï¼ˆå› ä¸ºPromiseå†…éƒ¨çš„é”™è¯¯ä¸ä¼šå†’æ³¡åˆ°å…¨å±€ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›ä¸€ä¸ªdoneæ–¹æ³•ï¼Œæ€»æ˜¯å¤„äºå›è°ƒé“¾çš„å°¾ç«¯ï¼Œä¿è¯æŠ›å‡ºä»»ä½•å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚ asyncFunc() .then(f1) .catch(r1) .then(f2) .done(); å®ƒçš„å®ç°ä»£ç ç›¸å½“ç®€å•ã€‚ Promise.prototype.done = function (onFulfilled, onRejected) { this.then(onFulfilled, onRejected) .catch(function (reason) { // æŠ›å‡ºä¸€ä¸ªå…¨å±€é”™è¯¯ setTimeout(() =&gt; { throw reason }, 0); }); }; ä»ä¸Šé¢ä»£ç å¯è§ï¼Œdoneæ–¹æ³•çš„ä½¿ç”¨ï¼Œå¯ä»¥åƒthenæ–¹æ³•é‚£æ ·ç”¨ï¼Œæä¾›Fulfilledå’ŒRejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä¸æä¾›ä»»ä½•å‚æ•°ã€‚ä½†ä¸ç®¡æ€æ ·ï¼Œdoneéƒ½ä¼šæ•æ‰åˆ°ä»»ä½•å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼Œå¹¶å‘å…¨å±€æŠ›å‡ºã€‚ finally()finallyæ–¹æ³•ç”¨äºæŒ‡å®šä¸ç®¡Promiseå¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚å®ƒä¸doneæ–¹æ³•çš„æœ€å¤§åŒºåˆ«ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ™®é€šçš„å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¸ç®¡æ€æ ·éƒ½å¿…é¡»æ‰§è¡Œã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ŒæœåŠ¡å™¨ä½¿ç”¨Promiseå¤„ç†è¯·æ±‚ï¼Œç„¶åä½¿ç”¨finallyæ–¹æ³•å…³æ‰æœåŠ¡å™¨ã€‚ server.listen(0) .then(function () { // run test }) .finally(server.stop); å®ƒçš„å®ç°ä¹Ÿå¾ˆç®€å•ã€‚ Promise.prototype.finally = function (callback) { let P = this.constructor; return this.then( value =&gt; P.resolve(callback()).then(() =&gt; value), reason =&gt; P.resolve(callback()).then(() =&gt; { throw reason }) ); }; ä¸Šé¢ä»£ç ä¸­ï¼Œä¸ç®¡å‰é¢çš„Promiseæ˜¯fulfilledè¿˜æ˜¯rejectedï¼Œéƒ½ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°callbackã€‚ æ›´å¤šITæŠ€æœ¯åˆ†äº«å°½åœ¨ ğŸ”—æ¶µæœˆå¤©-microzz.com åº”ç”¨åŠ è½½å›¾ç‰‡æˆ‘ä»¬å¯ä»¥å°†å›¾ç‰‡çš„åŠ è½½å†™æˆä¸€ä¸ªPromiseï¼Œä¸€æ—¦åŠ è½½å®Œæˆï¼ŒPromiseçš„çŠ¶æ€å°±å‘ç”Ÿå˜åŒ–ã€‚ const preloadImage = function (path) { return new Promise(function (resolve, reject) { var image = new Image(); image.onload = resolve; image.onerror = reject; image.src = path; }); }; Generatorå‡½æ•°ä¸Promiseçš„ç»“åˆä½¿ç”¨Generatorå‡½æ•°ç®¡ç†æµç¨‹ï¼Œé‡åˆ°å¼‚æ­¥æ“ä½œçš„æ—¶å€™ï¼Œé€šå¸¸è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚ function getFoo () { return new Promise(function (resolve, reject){ resolve(&#39;foo&#39;); }); } var g = function* () { try { var foo = yield getFoo(); console.log(foo); } catch (e) { console.log(e); } }; function run (generator) { var it = generator(); function go(result) { if (result.done) return result.value; return result.value.then(function (value) { return go(it.next(value)); }, function (error) { return go(it.throw(error)); }); } go(it.next()); } run(g); ä¸Šé¢ä»£ç çš„Generatorå‡½æ•°gä¹‹ä¸­ï¼Œæœ‰ä¸€ä¸ªå¼‚æ­¥æ“ä½œgetFooï¼Œå®ƒè¿”å›çš„å°±æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ã€‚å‡½æ•°runç”¨æ¥å¤„ç†è¿™ä¸ªPromiseå¯¹è±¡ï¼Œå¹¶è°ƒç”¨ä¸‹ä¸€ä¸ªnextæ–¹æ³•ã€‚ Promise.try()å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸é‡åˆ°ä¸€ç§æƒ…å†µï¼šä¸çŸ¥é“æˆ–è€…ä¸æƒ³åŒºåˆ†ï¼Œå‡½æ•°fæ˜¯åŒæ­¥å‡½æ•°è¿˜æ˜¯å¼‚æ­¥æ“ä½œï¼Œä½†æ˜¯æƒ³ç”¨ Promise æ¥å¤„ç†å®ƒã€‚å› ä¸ºè¿™æ ·å°±å¯ä»¥ä¸ç®¡fæ˜¯å¦åŒ…å«å¼‚æ­¥æ“ä½œï¼Œéƒ½ç”¨thenæ–¹æ³•æŒ‡å®šä¸‹ä¸€æ­¥æµç¨‹ï¼Œç”¨catchæ–¹æ³•å¤„ç†fæŠ›å‡ºçš„é”™è¯¯ã€‚ä¸€èˆ¬å°±ä¼šé‡‡ç”¨ä¸‹é¢çš„å†™æ³•ã€‚ Promise.resolve().then(f) ä¸Šé¢çš„å†™æ³•æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å¦‚æœfæ˜¯åŒæ­¥å‡½æ•°ï¼Œé‚£ä¹ˆå®ƒä¼šåœ¨æœ¬è½®äº‹ä»¶å¾ªç¯çš„æœ«å°¾æ‰§è¡Œã€‚ const f = () =&gt; console.log(&#39;now&#39;); Promise.resolve().then(f); console.log(&#39;next&#39;); // next // now ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fæ˜¯åŒæ­¥çš„ï¼Œä½†æ˜¯ç”¨ Promise åŒ…è£…äº†ä»¥åï¼Œå°±å˜æˆå¼‚æ­¥æ‰§è¡Œäº†ã€‚ é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•ï¼Œè®©åŒæ­¥å‡½æ•°åŒæ­¥æ‰§è¡Œï¼Œå¼‚æ­¥å‡½æ•°å¼‚æ­¥æ‰§è¡Œï¼Œå¹¶ä¸”è®©å®ƒä»¬å…·æœ‰ç»Ÿä¸€çš„ API å‘¢ï¼Ÿå›ç­”æ˜¯å¯ä»¥çš„ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸¤ç§å†™æ³•ã€‚ç¬¬ä¸€ç§å†™æ³•æ˜¯ç”¨asyncå‡½æ•°æ¥å†™ã€‚ const f = () =&gt; console.log(&#39;now&#39;); (async () =&gt; f())(); console.log(&#39;next&#39;); // now // next ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒè¡Œæ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œçš„åŒ¿åå‡½æ•°ï¼Œä¼šç«‹å³æ‰§è¡Œé‡Œé¢çš„asyncå‡½æ•°ï¼Œå› æ­¤å¦‚æœfæ˜¯åŒæ­¥çš„ï¼Œå°±ä¼šå¾—åˆ°åŒæ­¥çš„ç»“æœï¼›å¦‚æœfæ˜¯å¼‚æ­¥çš„ï¼Œå°±å¯ä»¥ç”¨thenæŒ‡å®šä¸‹ä¸€æ­¥ï¼Œå°±åƒä¸‹é¢çš„å†™æ³•ã€‚ (async () =&gt; f())() .then(...) éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œasync () =&gt; f()ä¼šåƒæ‰f()æŠ›å‡ºçš„é”™è¯¯ã€‚æ‰€ä»¥ï¼Œå¦‚æœæƒ³æ•è·é”™è¯¯ï¼Œè¦ä½¿ç”¨promise.catchæ–¹æ³•ã€‚ (async () =&gt; f())() .then(...) .catch(...) ç¬¬äºŒç§å†™æ³•æ˜¯ä½¿ç”¨new Promise()ã€‚ const f = () =&gt; console.log(&#39;now&#39;); ( () =&gt; new Promise( resolve =&gt; resolve(f()) ) )(); console.log(&#39;next&#39;); // now // next ä¸Šé¢ä»£ç ä¹Ÿæ˜¯ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„åŒ¿åå‡½æ•°ï¼Œæ‰§è¡Œnew Promise()ã€‚è¿™ç§æƒ…å†µä¸‹ï¼ŒåŒæ­¥å‡½æ•°ä¹Ÿæ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚ é‰´äºè¿™æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œæ‰€ä»¥ç°åœ¨æœ‰ä¸€ä¸ªææ¡ˆï¼Œæä¾›Promise.tryæ–¹æ³•æ›¿ä»£ä¸Šé¢çš„å†™æ³•ã€‚ const f = () =&gt; console.log(&#39;now&#39;); Promise.try(f); console.log(&#39;next&#39;); // now // next äº‹å®ä¸Šï¼ŒPromise.tryå­˜åœ¨å·²ä¹…ï¼ŒPromise åº“Bluebirdã€Qå’Œwhenï¼Œæ—©å°±æä¾›äº†è¿™ä¸ªæ–¹æ³•ã€‚ ç”±äºPromise.tryä¸ºæ‰€æœ‰æ“ä½œæä¾›äº†ç»Ÿä¸€çš„å¤„ç†æœºåˆ¶ï¼Œæ‰€ä»¥å¦‚æœæƒ³ç”¨thenæ–¹æ³•ç®¡ç†æµç¨‹ï¼Œæœ€å¥½éƒ½ç”¨Promise.tryåŒ…è£…ä¸€ä¸‹ã€‚è¿™æ ·æœ‰è®¸å¤šå¥½å¤„ï¼Œå…¶ä¸­ä¸€ç‚¹å°±æ˜¯å¯ä»¥æ›´å¥½åœ°ç®¡ç†å¼‚å¸¸ã€‚ function getUsername(userId) { return database.users.get({id: userId}) .then(function(user) { return user.name; }); } ä¸Šé¢ä»£ç ä¸­ï¼Œdatabase.users.get()è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¦‚æœæŠ›å‡ºå¼‚æ­¥é”™è¯¯ï¼Œå¯ä»¥ç”¨catchæ–¹æ³•æ•è·ï¼Œå°±åƒä¸‹é¢è¿™æ ·å†™ã€‚ database.users.get({id: userId}) .then(...) .catch(...) ä½†æ˜¯database.users.get()å¯èƒ½è¿˜ä¼šæŠ›å‡ºåŒæ­¥é”™è¯¯ï¼ˆæ¯”å¦‚æ•°æ®åº“è¿æ¥é”™è¯¯ï¼Œå…·ä½“è¦çœ‹å®ç°æ–¹æ³•ï¼‰ï¼Œè¿™æ—¶ä½ å°±ä¸å¾—ä¸ç”¨try...catchå»æ•è·ã€‚ try { database.users.get({id: userId}) .then(...) .catch(...) } catch (e) { // ... } ä¸Šé¢è¿™æ ·çš„å†™æ³•å°±å¾ˆç¬¨æ‹™äº†ï¼Œè¿™æ—¶å°±å¯ä»¥ç»Ÿä¸€ç”¨promise.catch()æ•è·æ‰€æœ‰åŒæ­¥å’Œå¼‚æ­¥çš„é”™è¯¯ã€‚ Promise.try(database.users.get({id: userId})) .then(...) .catch(...) äº‹å®ä¸Šï¼ŒPromise.tryå°±æ˜¯æ¨¡æ‹Ÿtryä»£ç å—ï¼Œå°±åƒpromise.catchæ¨¡æ‹Ÿçš„æ˜¯catchä»£ç å—ã€‚","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Promise","slug":"Promise","permalink":"https://microzz.com/tags/Promise/"}]},{"title":"Generator å‡½æ•°","date":"2017-01-13T06:51:58.000Z","path":"2017/01/13/generator/","text":"Generator å‡½æ•°ç®€ä»‹åŸºæœ¬æ¦‚å¿µGeneratorå‡½æ•°æ˜¯ES6æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œè¯­æ³•è¡Œä¸ºä¸ä¼ ç»Ÿå‡½æ•°å®Œå…¨ä¸åŒã€‚æœ¬ç« è¯¦ç»†ä»‹ç»Generatorå‡½æ•°çš„è¯­æ³•å’ŒAPIï¼Œå®ƒçš„å¼‚æ­¥ç¼–ç¨‹åº”ç”¨è¯·çœ‹ã€Šå¼‚æ­¥æ“ä½œã€‹ä¸€ç« ã€‚ Generatorå‡½æ•°æœ‰å¤šç§ç†è§£è§’åº¦ã€‚ä»è¯­æ³•ä¸Šï¼Œé¦–å…ˆå¯ä»¥æŠŠå®ƒç†è§£æˆï¼ŒGeneratorå‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ã€‚ æ‰§è¡ŒGeneratorå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒGeneratorå‡½æ•°é™¤äº†çŠ¶æ€æœºï¼Œè¿˜æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°ã€‚è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œå¯ä»¥ä¾æ¬¡éå†Generatorå‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€ã€‚ å½¢å¼ä¸Šï¼ŒGeneratorå‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªç‰¹å¾ã€‚ä¸€æ˜¯ï¼Œfunctionå…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼›äºŒæ˜¯ï¼Œå‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨yieldè¯­å¥ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ï¼ˆyieldè¯­å¥åœ¨è‹±è¯­é‡Œçš„æ„æ€å°±æ˜¯â€œäº§å‡ºâ€ï¼‰ã€‚ function* helloWorldGenerator() { yield &#39;hello&#39;; yield &#39;world&#39;; return &#39;ending&#39;; } var hw = helloWorldGenerator(); ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªGeneratorå‡½æ•°helloWorldGeneratorï¼Œå®ƒå†…éƒ¨æœ‰ä¸¤ä¸ªyieldè¯­å¥â€œhelloâ€å’Œâ€œworldâ€ï¼Œå³è¯¥å‡½æ•°æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼šhelloï¼Œworldå’Œreturnè¯­å¥ï¼ˆç»“æŸæ‰§è¡Œï¼‰ã€‚ ç„¶åï¼ŒGeneratorå‡½æ•°çš„è°ƒç”¨æ–¹æ³•ä¸æ™®é€šå‡½æ•°ä¸€æ ·ï¼Œä¹Ÿæ˜¯åœ¨å‡½æ•°ååé¢åŠ ä¸Šä¸€å¯¹åœ†æ‹¬å·ã€‚ä¸åŒçš„æ˜¯ï¼Œè°ƒç”¨Generatorå‡½æ•°åï¼Œè¯¥å‡½æ•°å¹¶ä¸æ‰§è¡Œï¼Œè¿”å›çš„ä¹Ÿä¸æ˜¯å‡½æ•°è¿è¡Œç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸€ç« ä»‹ç»çš„éå†å™¨å¯¹è±¡ï¼ˆIterator Objectï¼‰ã€‚ ä¸‹ä¸€æ­¥ï¼Œå¿…é¡»è°ƒç”¨éå†å™¨å¯¹è±¡çš„nextæ–¹æ³•ï¼Œä½¿å¾—æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œå†…éƒ¨æŒ‡é’ˆå°±ä»å‡½æ•°å¤´éƒ¨æˆ–ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ªyieldè¯­å¥ï¼ˆæˆ–returnè¯­å¥ï¼‰ä¸ºæ­¢ã€‚æ¢è¨€ä¹‹ï¼ŒGeneratorå‡½æ•°æ˜¯åˆ†æ®µæ‰§è¡Œçš„ï¼Œyieldè¯­å¥æ˜¯æš‚åœæ‰§è¡Œçš„æ ‡è®°ï¼Œè€Œnextæ–¹æ³•å¯ä»¥æ¢å¤æ‰§è¡Œã€‚ hw.next() // { value: &#39;hello&#39;, done: false } hw.next() // { value: &#39;world&#39;, done: false } hw.next() // { value: &#39;ending&#39;, done: true } hw.next() // { value: undefined, done: true } ä¸Šé¢ä»£ç ä¸€å…±è°ƒç”¨äº†å››æ¬¡nextæ–¹æ³•ã€‚ ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼ŒGeneratorå‡½æ•°å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ªyieldè¯­å¥ä¸ºæ­¢ã€‚nextæ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„valueå±æ€§å°±æ˜¯å½“å‰yieldè¯­å¥çš„å€¼helloï¼Œdoneå±æ€§çš„å€¼falseï¼Œè¡¨ç¤ºéå†è¿˜æ²¡æœ‰ç»“æŸã€‚ ç¬¬äºŒæ¬¡è°ƒç”¨ï¼ŒGeneratorå‡½æ•°ä»ä¸Šæ¬¡yieldè¯­å¥åœä¸‹çš„åœ°æ–¹ï¼Œä¸€ç›´æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªyieldè¯­å¥ã€‚nextæ–¹æ³•è¿”å›çš„å¯¹è±¡çš„valueå±æ€§å°±æ˜¯å½“å‰yieldè¯­å¥çš„å€¼worldï¼Œdoneå±æ€§çš„å€¼falseï¼Œè¡¨ç¤ºéå†è¿˜æ²¡æœ‰ç»“æŸã€‚ ç¬¬ä¸‰æ¬¡è°ƒç”¨ï¼ŒGeneratorå‡½æ•°ä»ä¸Šæ¬¡yieldè¯­å¥åœä¸‹çš„åœ°æ–¹ï¼Œä¸€ç›´æ‰§è¡Œåˆ°returnè¯­å¥ï¼ˆå¦‚æœæ²¡æœ‰returnè¯­å¥ï¼Œå°±æ‰§è¡Œåˆ°å‡½æ•°ç»“æŸï¼‰ã€‚nextæ–¹æ³•è¿”å›çš„å¯¹è±¡çš„valueå±æ€§ï¼Œå°±æ˜¯ç´§è·Ÿåœ¨returnè¯­å¥åé¢çš„è¡¨è¾¾å¼çš„å€¼ï¼ˆå¦‚æœæ²¡æœ‰returnè¯­å¥ï¼Œåˆ™valueå±æ€§çš„å€¼ä¸ºundefinedï¼‰ï¼Œdoneå±æ€§çš„å€¼trueï¼Œè¡¨ç¤ºéå†å·²ç»ç»“æŸã€‚ ç¬¬å››æ¬¡è°ƒç”¨ï¼Œæ­¤æ—¶Generatorå‡½æ•°å·²ç»è¿è¡Œå®Œæ¯•ï¼Œnextæ–¹æ³•è¿”å›å¯¹è±¡çš„valueå±æ€§ä¸ºundefinedï¼Œdoneå±æ€§ä¸ºtrueã€‚ä»¥åå†è°ƒç”¨nextæ–¹æ³•ï¼Œè¿”å›çš„éƒ½æ˜¯è¿™ä¸ªå€¼ã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œè°ƒç”¨Generatorå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä»£è¡¨Generatorå‡½æ•°çš„å†…éƒ¨æŒ‡é’ˆã€‚ä»¥åï¼Œæ¯æ¬¡è°ƒç”¨éå†å™¨å¯¹è±¡çš„nextæ–¹æ³•ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæœ‰ç€valueå’Œdoneä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚valueå±æ€§è¡¨ç¤ºå½“å‰çš„å†…éƒ¨çŠ¶æ€çš„å€¼ï¼Œæ˜¯yieldè¯­å¥åé¢é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼›doneå±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦éå†ç»“æŸã€‚ ES6æ²¡æœ‰è§„å®šï¼Œfunctionå…³é”®å­—ä¸å‡½æ•°åä¹‹é—´çš„æ˜Ÿå·ï¼Œå†™åœ¨å“ªä¸ªä½ç½®ã€‚è¿™å¯¼è‡´ä¸‹é¢çš„å†™æ³•éƒ½èƒ½é€šè¿‡ã€‚ function * foo(x, y) { Â·Â·Â· } function *foo(x, y) { Â·Â·Â· } function* foo(x, y) { Â·Â·Â· } function*foo(x, y) { Â·Â·Â· } ç”±äºGeneratorå‡½æ•°ä»ç„¶æ˜¯æ™®é€šå‡½æ•°ï¼Œæ‰€ä»¥ä¸€èˆ¬çš„å†™æ³•æ˜¯ä¸Šé¢çš„ç¬¬ä¸‰ç§ï¼Œå³æ˜Ÿå·ç´§è·Ÿåœ¨functionå…³é”®å­—åé¢ã€‚æœ¬ä¹¦ä¹Ÿé‡‡ç”¨è¿™ç§å†™æ³•ã€‚ yieldè¯­å¥ç”±äºGeneratorå‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œåªæœ‰è°ƒç”¨nextæ–¹æ³•æ‰ä¼šéå†ä¸‹ä¸€ä¸ªå†…éƒ¨çŠ¶æ€ï¼Œæ‰€ä»¥å…¶å®æä¾›äº†ä¸€ç§å¯ä»¥æš‚åœæ‰§è¡Œçš„å‡½æ•°ã€‚yieldè¯­å¥å°±æ˜¯æš‚åœæ ‡å¿—ã€‚ éå†å™¨å¯¹è±¡çš„nextæ–¹æ³•çš„è¿è¡Œé€»è¾‘å¦‚ä¸‹ã€‚ ï¼ˆ1ï¼‰é‡åˆ°yieldè¯­å¥ï¼Œå°±æš‚åœæ‰§è¡Œåé¢çš„æ“ä½œï¼Œå¹¶å°†ç´§è·Ÿåœ¨yieldåé¢çš„é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›çš„å¯¹è±¡çš„valueå±æ€§å€¼ã€‚ ï¼ˆ2ï¼‰ä¸‹ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶ï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ªyieldè¯­å¥ã€‚ ï¼ˆ3ï¼‰å¦‚æœæ²¡æœ‰å†é‡åˆ°æ–°çš„yieldè¯­å¥ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ°å‡½æ•°ç»“æŸï¼Œç›´åˆ°returnè¯­å¥ä¸ºæ­¢ï¼Œå¹¶å°†returnè¯­å¥åé¢çš„è¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›çš„å¯¹è±¡çš„valueå±æ€§å€¼ã€‚ ï¼ˆ4ï¼‰å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰returnè¯­å¥ï¼Œåˆ™è¿”å›çš„å¯¹è±¡çš„valueå±æ€§å€¼ä¸ºundefinedã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œyieldè¯­å¥åé¢çš„è¡¨è¾¾å¼ï¼Œåªæœ‰å½“è°ƒç”¨nextæ–¹æ³•ã€å†…éƒ¨æŒ‡é’ˆæŒ‡å‘è¯¥è¯­å¥æ—¶æ‰ä¼šæ‰§è¡Œï¼Œå› æ­¤ç­‰äºä¸ºJavaScriptæä¾›äº†æ‰‹åŠ¨çš„â€œæƒ°æ€§æ±‚å€¼â€ï¼ˆLazy Evaluationï¼‰çš„è¯­æ³•åŠŸèƒ½ã€‚ function* gen() { yield 123 + 456; } ä¸Šé¢ä»£ç ä¸­ï¼Œyieldåé¢çš„è¡¨è¾¾å¼123 + 456ï¼Œä¸ä¼šç«‹å³æ±‚å€¼ï¼Œåªä¼šåœ¨nextæ–¹æ³•å°†æŒ‡é’ˆç§»åˆ°è¿™ä¸€å¥æ—¶ï¼Œæ‰ä¼šæ±‚å€¼ã€‚ yieldè¯­å¥ä¸returnè¯­å¥æ—¢æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä¹Ÿæœ‰åŒºåˆ«ã€‚ç›¸ä¼¼ä¹‹å¤„åœ¨äºï¼Œéƒ½èƒ½è¿”å›ç´§è·Ÿåœ¨è¯­å¥åé¢çš„é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚åŒºåˆ«åœ¨äºæ¯æ¬¡é‡åˆ°yieldï¼Œå‡½æ•°æš‚åœæ‰§è¡Œï¼Œä¸‹ä¸€æ¬¡å†ä»è¯¥ä½ç½®ç»§ç»­å‘åæ‰§è¡Œï¼Œè€Œreturnè¯­å¥ä¸å…·å¤‡ä½ç½®è®°å¿†çš„åŠŸèƒ½ã€‚ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œåªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼ˆæˆ–è€…è¯´ä¸€ä¸ªï¼‰returnè¯­å¥ï¼Œä½†æ˜¯å¯ä»¥æ‰§è¡Œå¤šæ¬¡ï¼ˆæˆ–è€…è¯´å¤šä¸ªï¼‰yieldè¯­å¥ã€‚æ­£å¸¸å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œå› ä¸ºåªèƒ½æ‰§è¡Œä¸€æ¬¡returnï¼›Generatorå‡½æ•°å¯ä»¥è¿”å›ä¸€ç³»åˆ—çš„å€¼ï¼Œå› ä¸ºå¯ä»¥æœ‰ä»»æ„å¤šä¸ªyieldã€‚ä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œä¹Ÿå¯ä»¥è¯´Generatorç”Ÿæˆäº†ä¸€ç³»åˆ—çš„å€¼ï¼Œè¿™ä¹Ÿå°±æ˜¯å®ƒçš„åç§°çš„æ¥å†ï¼ˆåœ¨è‹±è¯­ä¸­ï¼Œgeneratorè¿™ä¸ªè¯æ˜¯â€œç”Ÿæˆå™¨â€çš„æ„æ€ï¼‰ã€‚ Generatorå‡½æ•°å¯ä»¥ä¸ç”¨yieldè¯­å¥ï¼Œè¿™æ—¶å°±å˜æˆäº†ä¸€ä¸ªå•çº¯çš„æš‚ç¼“æ‰§è¡Œå‡½æ•°ã€‚ function* f() { console.log(&#39;æ‰§è¡Œäº†ï¼&#39;) } var generator = f(); setTimeout(function () { generator.next() }, 2000); ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°få¦‚æœæ˜¯æ™®é€šå‡½æ•°ï¼Œåœ¨ä¸ºå˜é‡generatorèµ‹å€¼æ—¶å°±ä¼šæ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå‡½æ•°fæ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼Œå°±å˜æˆåªæœ‰è°ƒç”¨nextæ–¹æ³•æ—¶ï¼Œå‡½æ•°fæ‰ä¼šæ‰§è¡Œã€‚ å¦å¤–éœ€è¦æ³¨æ„ï¼Œyieldè¯­å¥ä¸èƒ½ç”¨åœ¨æ™®é€šå‡½æ•°ä¸­ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ (function (){ yield 1; })() // SyntaxError: Unexpected number ä¸Šé¢ä»£ç åœ¨ä¸€ä¸ªæ™®é€šå‡½æ•°ä¸­ä½¿ç”¨yieldè¯­å¥ï¼Œç»“æœäº§ç”Ÿä¸€ä¸ªå¥æ³•é”™è¯¯ã€‚ ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚ var arr = [1, [[2, 3], 4], [5, 6]]; var flat = function* (a) { a.forEach(function (item) { if (typeof item !== &#39;number&#39;) { yield* flat(item); } else { yield item; } } }; for (var f of flat(arr)){ console.log(f); } ä¸Šé¢ä»£ç ä¹Ÿä¼šäº§ç”Ÿå¥æ³•é”™è¯¯ï¼Œå› ä¸ºforEachæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä½†æ˜¯åœ¨é‡Œé¢ä½¿ç”¨äº†yieldè¯­å¥ï¼ˆè¿™ä¸ªå‡½æ•°é‡Œé¢è¿˜ä½¿ç”¨äº†yield*è¯­å¥ï¼Œè¿™é‡Œå¯ä»¥ä¸ç”¨ç†ä¼šï¼Œè¯¦ç»†è¯´æ˜è§åæ–‡ï¼‰ã€‚ä¸€ç§ä¿®æ”¹æ–¹æ³•æ˜¯æ”¹ç”¨forå¾ªç¯ã€‚ var arr = [1, [[2, 3], 4], [5, 6]]; var flat = function* (a) { var length = a.length; for (var i = 0; i &lt; length; i++) { var item = a[i]; if (typeof item !== &#39;number&#39;) { yield* flat(item); } else { yield item; } } }; for (var f of flat(arr)) { console.log(f); } // 1, 2, 3, 4, 5, 6 å¦å¤–ï¼Œyieldè¯­å¥å¦‚æœç”¨åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¹‹ä¸­ï¼Œå¿…é¡»æ”¾åœ¨åœ†æ‹¬å·é‡Œé¢ã€‚ console.log(&#39;Hello&#39; + yield); // SyntaxError console.log(&#39;Hello&#39; + yield 123); // SyntaxError console.log(&#39;Hello&#39; + (yield)); // OK console.log(&#39;Hello&#39; + (yield 123)); // OK yieldè¯­å¥ç”¨ä½œå‡½æ•°å‚æ•°æˆ–èµ‹å€¼è¡¨è¾¾å¼çš„å³è¾¹ï¼Œå¯ä»¥ä¸åŠ æ‹¬å·ã€‚ foo(yield &#39;a&#39;, yield &#39;b&#39;); // OK let input = yield; // OK ä¸Iteratoræ¥å£çš„å…³ç³»ä¸Šä¸€ç« è¯´è¿‡ï¼Œä»»æ„ä¸€ä¸ªå¯¹è±¡çš„Symbol.iteratoræ–¹æ³•ï¼Œç­‰äºè¯¥å¯¹è±¡çš„éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œè°ƒç”¨è¯¥å‡½æ•°ä¼šè¿”å›è¯¥å¯¹è±¡çš„ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚ ç”±äºGeneratorå‡½æ•°å°±æ˜¯éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œå› æ­¤å¯ä»¥æŠŠGeneratorèµ‹å€¼ç»™å¯¹è±¡çš„Symbol.iteratorå±æ€§ï¼Œä»è€Œä½¿å¾—è¯¥å¯¹è±¡å…·æœ‰Iteratoræ¥å£ã€‚ var myIterable = {}; myIterable[Symbol.iterator] = function* () { yield 1; yield 2; yield 3; }; [...myIterable] // [1, 2, 3] ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°èµ‹å€¼ç»™Symbol.iteratorå±æ€§ï¼Œä»è€Œä½¿å¾—myIterableå¯¹è±¡å…·æœ‰äº†Iteratoræ¥å£ï¼Œå¯ä»¥è¢«...è¿ç®—ç¬¦éå†äº†ã€‚ Generatorå‡½æ•°æ‰§è¡Œåï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚è¯¥å¯¹è±¡æœ¬èº«ä¹Ÿå…·æœ‰Symbol.iteratorå±æ€§ï¼Œæ‰§è¡Œåè¿”å›è‡ªèº«ã€‚ function* gen(){ // some code } var g = gen(); g[Symbol.iterator]() === g // true ä¸Šé¢ä»£ç ä¸­ï¼Œgenæ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼Œè°ƒç”¨å®ƒä¼šç”Ÿæˆä¸€ä¸ªéå†å™¨å¯¹è±¡gã€‚å®ƒçš„Symbol.iteratorå±æ€§ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°ï¼Œæ‰§è¡Œåè¿”å›å®ƒè‡ªå·±ã€‚ nextæ–¹æ³•çš„å‚æ•°yieldå¥æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è€…è¯´æ€»æ˜¯è¿”å›undefinedã€‚nextæ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°±ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ªyieldè¯­å¥çš„è¿”å›å€¼ã€‚ function* f() { for(var i = 0; true; i++) { var reset = yield i; if(reset) { i = -1; } } } var g = f(); g.next() // { value: 0, done: false } g.next() // { value: 1, done: false } g.next(true) // { value: 0, done: false } ä¸Šé¢ä»£ç å…ˆå®šä¹‰äº†ä¸€ä¸ªå¯ä»¥æ— é™è¿è¡Œçš„ Generator å‡½æ•°fï¼Œå¦‚æœnextæ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œæ¯æ¬¡è¿è¡Œåˆ°yieldè¯­å¥ï¼Œå˜é‡resetçš„å€¼æ€»æ˜¯undefinedã€‚å½“nextæ–¹æ³•å¸¦ä¸€ä¸ªå‚æ•°trueæ—¶ï¼Œå˜é‡resetå°±è¢«é‡ç½®ä¸ºè¿™ä¸ªå‚æ•°ï¼ˆå³trueï¼‰ï¼Œå› æ­¤iä¼šç­‰äº-1ï¼Œä¸‹ä¸€è½®å¾ªç¯å°±ä¼šä»-1å¼€å§‹é€’å¢ã€‚ è¿™ä¸ªåŠŸèƒ½æœ‰å¾ˆé‡è¦çš„è¯­æ³•æ„ä¹‰ã€‚Generator å‡½æ•°ä»æš‚åœçŠ¶æ€åˆ°æ¢å¤è¿è¡Œï¼Œå®ƒçš„ä¸Šä¸‹æ–‡çŠ¶æ€ï¼ˆcontextï¼‰æ˜¯ä¸å˜çš„ã€‚é€šè¿‡nextæ–¹æ³•çš„å‚æ•°ï¼Œå°±æœ‰åŠæ³•åœ¨ Generator å‡½æ•°å¼€å§‹è¿è¡Œä¹‹åï¼Œç»§ç»­å‘å‡½æ•°ä½“å†…éƒ¨æ³¨å…¥å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥åœ¨ Generator å‡½æ•°è¿è¡Œçš„ä¸åŒé˜¶æ®µï¼Œä»å¤–éƒ¨å‘å†…éƒ¨æ³¨å…¥ä¸åŒçš„å€¼ï¼Œä»è€Œè°ƒæ•´å‡½æ•°è¡Œä¸ºã€‚ å†çœ‹ä¸€ä¸ªä¾‹å­ã€‚ function* foo(x) { var y = 2 * (yield (x + 1)); var z = yield (y / 3); return (x + y + z); } var a = foo(5); a.next() // Object{value:6, done:false} a.next() // Object{value:NaN, done:false} a.next() // Object{value:NaN, done:true} var b = foo(5); b.next() // { value:6, done:false } b.next(12) // { value:8, done:false } b.next(13) // { value:42, done:true } ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒæ¬¡è¿è¡Œnextæ–¹æ³•çš„æ—¶å€™ä¸å¸¦å‚æ•°ï¼Œå¯¼è‡´yçš„å€¼ç­‰äº2 * undefinedï¼ˆå³NaNï¼‰ï¼Œé™¤ä»¥3ä»¥åè¿˜æ˜¯NaNï¼Œå› æ­¤è¿”å›å¯¹è±¡çš„valueå±æ€§ä¹Ÿç­‰äºNaNã€‚ç¬¬ä¸‰æ¬¡è¿è¡ŒNextæ–¹æ³•çš„æ—¶å€™ä¸å¸¦å‚æ•°ï¼Œæ‰€ä»¥zç­‰äºundefinedï¼Œè¿”å›å¯¹è±¡çš„valueå±æ€§ç­‰äº5 + NaN + undefinedï¼Œå³NaNã€‚ å¦‚æœå‘nextæ–¹æ³•æä¾›å‚æ•°ï¼Œè¿”å›ç»“æœå°±å®Œå…¨ä¸ä¸€æ ·äº†ã€‚ä¸Šé¢ä»£ç ç¬¬ä¸€æ¬¡è°ƒç”¨bçš„nextæ–¹æ³•æ—¶ï¼Œè¿”å›x+1çš„å€¼6ï¼›ç¬¬äºŒæ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œå°†ä¸Šä¸€æ¬¡yieldè¯­å¥çš„å€¼è®¾ä¸º12ï¼Œå› æ­¤yç­‰äº24ï¼Œè¿”å›y / 3çš„å€¼8ï¼›ç¬¬ä¸‰æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œå°†ä¸Šä¸€æ¬¡yieldè¯­å¥çš„å€¼è®¾ä¸º13ï¼Œå› æ­¤zç­‰äº13ï¼Œè¿™æ—¶xç­‰äº5ï¼Œyç­‰äº24ï¼Œæ‰€ä»¥returnè¯­å¥çš„å€¼ç­‰äº42ã€‚ æ³¨æ„ï¼Œç”±äºnextæ–¹æ³•çš„å‚æ•°è¡¨ç¤ºä¸Šä¸€ä¸ªyieldè¯­å¥çš„è¿”å›å€¼ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡ä½¿ç”¨nextæ–¹æ³•æ—¶ï¼Œä¸èƒ½å¸¦æœ‰å‚æ•°ã€‚V8å¼•æ“ç›´æ¥å¿½ç•¥ç¬¬ä¸€æ¬¡ä½¿ç”¨nextæ–¹æ³•æ—¶çš„å‚æ•°ï¼Œåªæœ‰ä»ç¬¬äºŒæ¬¡ä½¿ç”¨nextæ–¹æ³•å¼€å§‹ï¼Œå‚æ•°æ‰æ˜¯æœ‰æ•ˆçš„ã€‚ä»è¯­ä¹‰ä¸Šè®²ï¼Œç¬¬ä¸€ä¸ªnextæ–¹æ³•ç”¨æ¥å¯åŠ¨éå†å™¨å¯¹è±¡ï¼Œæ‰€ä»¥ä¸ç”¨å¸¦æœ‰å‚æ•°ã€‚ å¦‚æœæƒ³è¦ç¬¬ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶ï¼Œå°±èƒ½å¤Ÿè¾“å…¥å€¼ï¼Œå¯ä»¥åœ¨Generatorå‡½æ•°å¤–é¢å†åŒ…ä¸€å±‚ã€‚ function wrapper(generatorFunction) { return function (...args) { let generatorObject = generatorFunction(...args); generatorObject.next(); return generatorObject; }; } const wrapped = wrapper(function* () { console.log(`First input: ${yield}`); return &#39;DONE&#39;; }); wrapped().next(&#39;hello!&#39;) // First input: hello! ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°å¦‚æœä¸ç”¨wrapperå…ˆåŒ…ä¸€å±‚ï¼Œæ˜¯æ— æ³•ç¬¬ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œå°±è¾“å…¥å‚æ•°çš„ã€‚ å†çœ‹ä¸€ä¸ªé€šè¿‡nextæ–¹æ³•çš„å‚æ•°ï¼Œå‘Generatorå‡½æ•°å†…éƒ¨è¾“å…¥å€¼çš„ä¾‹å­ã€‚ function* dataConsumer() { console.log(&#39;Started&#39;); console.log(`1. ${yield}`); console.log(`2. ${yield}`); return &#39;result&#39;; } let genObj = dataConsumer(); genObj.next(); // Started genObj.next(&#39;a&#39;) // 1. a genObj.next(&#39;b&#39;) // 2. b ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªå¾ˆç›´è§‚çš„ä¾‹å­ï¼Œæ¯æ¬¡é€šè¿‡nextæ–¹æ³•å‘Generatorå‡½æ•°è¾“å…¥å€¼ï¼Œç„¶åæ‰“å°å‡ºæ¥ã€‚ forâ€¦ofå¾ªç¯for...ofå¾ªç¯å¯ä»¥è‡ªåŠ¨éå†Generatorå‡½æ•°æ—¶ç”Ÿæˆçš„Iteratorå¯¹è±¡ï¼Œä¸”æ­¤æ—¶ä¸å†éœ€è¦è°ƒç”¨nextæ–¹æ³•ã€‚ function *foo() { yield 1; yield 2; yield 3; yield 4; yield 5; return 6; } for (let v of foo()) { console.log(v); } // 1 2 3 4 5 ä¸Šé¢ä»£ç ä½¿ç”¨for...ofå¾ªç¯ï¼Œä¾æ¬¡æ˜¾ç¤º5ä¸ªyieldè¯­å¥çš„å€¼ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä¸€æ—¦nextæ–¹æ³•çš„è¿”å›å¯¹è±¡çš„doneå±æ€§ä¸ºtrueï¼Œfor...ofå¾ªç¯å°±ä¼šä¸­æ­¢ï¼Œä¸”ä¸åŒ…å«è¯¥è¿”å›å¯¹è±¡ï¼Œæ‰€ä»¥ä¸Šé¢ä»£ç çš„returnè¯­å¥è¿”å›çš„6ï¼Œä¸åŒ…æ‹¬åœ¨for...ofå¾ªç¯ä¹‹ä¸­ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ©ç”¨Generatorå‡½æ•°å’Œfor...ofå¾ªç¯ï¼Œå®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä¾‹å­ã€‚ function* fibonacci() { let [prev, curr] = [0, 1]; for (;;) { [prev, curr] = [curr, prev + curr]; yield curr; } } for (let n of fibonacci()) { if (n &gt; 1000) break; console.log(n); } ä»ä¸Šé¢ä»£ç å¯è§ï¼Œä½¿ç”¨for...ofè¯­å¥æ—¶ä¸éœ€è¦ä½¿ç”¨nextæ–¹æ³•ã€‚ åˆ©ç”¨for...ofå¾ªç¯ï¼Œå¯ä»¥å†™å‡ºéå†ä»»æ„å¯¹è±¡ï¼ˆobjectï¼‰çš„æ–¹æ³•ã€‚åŸç”Ÿçš„JavaScriptå¯¹è±¡æ²¡æœ‰éå†æ¥å£ï¼Œæ— æ³•ä½¿ç”¨for...ofå¾ªç¯ï¼Œé€šè¿‡Generatorå‡½æ•°ä¸ºå®ƒåŠ ä¸Šè¿™ä¸ªæ¥å£ï¼Œå°±å¯ä»¥ç”¨äº†ã€‚ function* objectEntries(obj) { let propKeys = Reflect.ownKeys(obj); for (let propKey of propKeys) { yield [propKey, obj[propKey]]; } } let jane = { first: &#39;Jane&#39;, last: &#39;Doe&#39; }; for (let [key, value] of objectEntries(jane)) { console.log(`${key}: ${value}`); } // first: Jane // last: Doe ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡janeåŸç”Ÿä¸å…·å¤‡Iteratoræ¥å£ï¼Œæ— æ³•ç”¨for...oféå†ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡Generatorå‡½æ•°objectEntriesä¸ºå®ƒåŠ ä¸Šéå†å™¨æ¥å£ï¼Œå°±å¯ä»¥ç”¨for...oféå†äº†ã€‚åŠ ä¸Šéå†å™¨æ¥å£çš„å¦ä¸€ç§å†™æ³•æ˜¯ï¼Œå°†Generatorå‡½æ•°åŠ åˆ°å¯¹è±¡çš„Symbol.iteratorå±æ€§ä¸Šé¢ã€‚ function* objectEntries() { let propKeys = Object.keys(this); for (let propKey of propKeys) { yield [propKey, this[propKey]]; } } let jane = { first: &#39;Jane&#39;, last: &#39;Doe&#39; }; jane[Symbol.iterator] = objectEntries; for (let [key, value] of jane) { console.log(`${key}: ${value}`); } // first: Jane // last: Doe é™¤äº†for...ofå¾ªç¯ä»¥å¤–ï¼Œæ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰ã€è§£æ„èµ‹å€¼å’ŒArray.fromæ–¹æ³•å†…éƒ¨è°ƒç”¨çš„ï¼Œéƒ½æ˜¯éå†å™¨æ¥å£ã€‚è¿™æ„å‘³ç€ï¼Œå®ƒä»¬éƒ½å¯ä»¥å°†Generatorå‡½æ•°è¿”å›çš„Iteratorå¯¹è±¡ï¼Œä½œä¸ºå‚æ•°ã€‚ function* numbers () { yield 1 yield 2 return 3 yield 4 } // æ‰©å±•è¿ç®—ç¬¦ [...numbers()] // [1, 2] // Array.from æ–¹æ³• Array.from(numbers()) // [1, 2] // è§£æ„èµ‹å€¼ let [x, y] = numbers(); x // 1 y // 2 // for...of å¾ªç¯ for (let n of numbers()) { console.log(n) } // 1 // 2 Generator.prototype.throw()Generatorå‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œéƒ½æœ‰ä¸€ä¸ªthrowæ–¹æ³•ï¼Œå¯ä»¥åœ¨å‡½æ•°ä½“å¤–æŠ›å‡ºé”™è¯¯ï¼Œç„¶ååœ¨Generatorå‡½æ•°ä½“å†…æ•è·ã€‚ var g = function* () { try { yield; } catch (e) { console.log(&#39;å†…éƒ¨æ•è·&#39;, e); } }; var i = g(); i.next(); try { i.throw(&#39;a&#39;); i.throw(&#39;b&#39;); } catch (e) { console.log(&#39;å¤–éƒ¨æ•è·&#39;, e); } // å†…éƒ¨æ•è· a // å¤–éƒ¨æ•è· b ä¸Šé¢ä»£ç ä¸­ï¼Œéå†å™¨å¯¹è±¡iè¿ç»­æŠ›å‡ºä¸¤ä¸ªé”™è¯¯ã€‚ç¬¬ä¸€ä¸ªé”™è¯¯è¢«Generatorå‡½æ•°ä½“å†…çš„catchè¯­å¥æ•è·ã€‚iç¬¬äºŒæ¬¡æŠ›å‡ºé”™è¯¯ï¼Œç”±äºGeneratorå‡½æ•°å†…éƒ¨çš„catchè¯­å¥å·²ç»æ‰§è¡Œè¿‡äº†ï¼Œä¸ä¼šå†æ•æ‰åˆ°è¿™ä¸ªé”™è¯¯äº†ï¼Œæ‰€ä»¥è¿™ä¸ªé”™è¯¯å°±è¢«æŠ›å‡ºäº†Generatorå‡½æ•°ä½“ï¼Œè¢«å‡½æ•°ä½“å¤–çš„catchè¯­å¥æ•è·ã€‚ throwæ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ä¼šè¢«catchè¯­å¥æ¥æ”¶ï¼Œå»ºè®®æŠ›å‡ºErrorå¯¹è±¡çš„å®ä¾‹ã€‚ var g = function* () { try { yield; } catch (e) { console.log(e); } }; var i = g(); i.next(); i.throw(new Error(&#39;å‡ºé”™äº†ï¼&#39;)); // Error: å‡ºé”™äº†ï¼(â€¦) æ³¨æ„ï¼Œä¸è¦æ··æ·†éå†å™¨å¯¹è±¡çš„throwæ–¹æ³•å’Œå…¨å±€çš„throwå‘½ä»¤ã€‚ä¸Šé¢ä»£ç çš„é”™è¯¯ï¼Œæ˜¯ç”¨éå†å™¨å¯¹è±¡çš„throwæ–¹æ³•æŠ›å‡ºçš„ï¼Œè€Œä¸æ˜¯ç”¨throwå‘½ä»¤æŠ›å‡ºçš„ã€‚åè€…åªèƒ½è¢«å‡½æ•°ä½“å¤–çš„catchè¯­å¥æ•è·ã€‚ var g = function* () { while (true) { try { yield; } catch (e) { if (e != &#39;a&#39;) throw e; console.log(&#39;å†…éƒ¨æ•è·&#39;, e); } } }; var i = g(); i.next(); try { throw new Error(&#39;a&#39;); throw new Error(&#39;b&#39;); } catch (e) { console.log(&#39;å¤–éƒ¨æ•è·&#39;, e); } // å¤–éƒ¨æ•è· [Error: a] ä¸Šé¢ä»£ç ä¹‹æ‰€ä»¥åªæ•è·äº†aï¼Œæ˜¯å› ä¸ºå‡½æ•°ä½“å¤–çš„catchè¯­å¥å—ï¼Œæ•è·äº†æŠ›å‡ºçš„aé”™è¯¯ä»¥åï¼Œå°±ä¸ä¼šå†ç»§ç»­tryä»£ç å—é‡Œé¢å‰©ä½™çš„è¯­å¥äº†ã€‚ å¦‚æœGeneratorå‡½æ•°å†…éƒ¨æ²¡æœ‰éƒ¨ç½²try...catchä»£ç å—ï¼Œé‚£ä¹ˆthrowæ–¹æ³•æŠ›å‡ºçš„é”™è¯¯ï¼Œå°†è¢«å¤–éƒ¨try...catchä»£ç å—æ•è·ã€‚ var g = function* () { while (true) { yield; console.log(&#39;å†…éƒ¨æ•è·&#39;, e); } }; var i = g(); i.next(); try { i.throw(&#39;a&#39;); i.throw(&#39;b&#39;); } catch (e) { console.log(&#39;å¤–éƒ¨æ•è·&#39;, e); } // å¤–éƒ¨æ•è· a ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°gå†…éƒ¨æ²¡æœ‰éƒ¨ç½²try...catchä»£ç å—ï¼Œæ‰€ä»¥æŠ›å‡ºçš„é”™è¯¯ç›´æ¥è¢«å¤–éƒ¨catchä»£ç å—æ•è·ã€‚ å¦‚æœGeneratorå‡½æ•°å†…éƒ¨å’Œå¤–éƒ¨ï¼Œéƒ½æ²¡æœ‰éƒ¨ç½²try...catchä»£ç å—ï¼Œé‚£ä¹ˆç¨‹åºå°†æŠ¥é”™ï¼Œç›´æ¥ä¸­æ–­æ‰§è¡Œã€‚ var gen = function* gen(){ yield console.log(&#39;hello&#39;); yield console.log(&#39;world&#39;); } var g = gen(); g.next(); g.throw(); // hello // Uncaught undefined ä¸Šé¢ä»£ç ä¸­ï¼Œg.throwæŠ›å‡ºé”™è¯¯ä»¥åï¼Œæ²¡æœ‰ä»»ä½•try...catchä»£ç å—å¯ä»¥æ•è·è¿™ä¸ªé”™è¯¯ï¼Œå¯¼è‡´ç¨‹åºæŠ¥é”™ï¼Œä¸­æ–­æ‰§è¡Œã€‚ throwæ–¹æ³•è¢«æ•è·ä»¥åï¼Œä¼šé™„å¸¦æ‰§è¡Œä¸‹ä¸€æ¡yieldè¯­å¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼šé™„å¸¦æ‰§è¡Œä¸€æ¬¡nextæ–¹æ³•ã€‚ var gen = function* gen(){ try { yield console.log(&#39;a&#39;); } catch (e) { // ... } yield console.log(&#39;b&#39;); yield console.log(&#39;c&#39;); } var g = gen(); g.next() // a g.throw() // b g.next() // c ä¸Šé¢ä»£ç ä¸­ï¼Œg.throwæ–¹æ³•è¢«æ•è·ä»¥åï¼Œè‡ªåŠ¨æ‰§è¡Œäº†ä¸€æ¬¡nextæ–¹æ³•ï¼Œæ‰€ä»¥ä¼šæ‰“å°bã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œåªè¦Generatorå‡½æ•°å†…éƒ¨éƒ¨ç½²äº†try...catchä»£ç å—ï¼Œé‚£ä¹ˆéå†å™¨çš„throwæ–¹æ³•æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸å½±å“ä¸‹ä¸€æ¬¡éå†ã€‚ å¦å¤–ï¼Œthrowå‘½ä»¤ä¸g.throwæ–¹æ³•æ˜¯æ— å…³çš„ï¼Œä¸¤è€…äº’ä¸å½±å“ã€‚ var gen = function* gen(){ yield console.log(&#39;hello&#39;); yield console.log(&#39;world&#39;); } var g = gen(); g.next(); try { throw new Error(); } catch (e) { g.next(); } // hello // world ä¸Šé¢ä»£ç ä¸­ï¼Œthrowå‘½ä»¤æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šå½±å“åˆ°éå†å™¨çš„çŠ¶æ€ï¼Œæ‰€ä»¥ä¸¤æ¬¡æ‰§è¡Œnextæ–¹æ³•ï¼Œéƒ½è¿›è¡Œäº†æ­£ç¡®çš„æ“ä½œã€‚ è¿™ç§å‡½æ•°ä½“å†…æ•è·é”™è¯¯çš„æœºåˆ¶ï¼Œå¤§å¤§æ–¹ä¾¿äº†å¯¹é”™è¯¯çš„å¤„ç†ã€‚å¤šä¸ªyieldè¯­å¥ï¼Œå¯ä»¥åªç”¨ä¸€ä¸ªtry...catchä»£ç å—æ¥æ•è·é”™è¯¯ã€‚å¦‚æœä½¿ç”¨å›è°ƒå‡½æ•°çš„å†™æ³•ï¼Œæƒ³è¦æ•è·å¤šä¸ªé”™è¯¯ï¼Œå°±ä¸å¾—ä¸ä¸ºæ¯ä¸ªå‡½æ•°å†…éƒ¨å†™ä¸€ä¸ªé”™è¯¯å¤„ç†è¯­å¥ï¼Œç°åœ¨åªåœ¨Generatorå‡½æ•°å†…éƒ¨å†™ä¸€æ¬¡catchè¯­å¥å°±å¯ä»¥äº†ã€‚ Generatorå‡½æ•°ä½“å¤–æŠ›å‡ºçš„é”™è¯¯ï¼Œå¯ä»¥åœ¨å‡½æ•°ä½“å†…æ•è·ï¼›åè¿‡æ¥ï¼ŒGeneratorå‡½æ•°ä½“å†…æŠ›å‡ºçš„é”™è¯¯ï¼Œä¹Ÿå¯ä»¥è¢«å‡½æ•°ä½“å¤–çš„catchæ•è·ã€‚ function *foo() { var x = yield 3; var y = x.toUpperCase(); yield y; } var it = foo(); it.next(); // { value:3, done:false } try { it.next(42); } catch (err) { console.log(err); } ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒä¸ªnextæ–¹æ³•å‘å‡½æ•°ä½“å†…ä¼ å…¥ä¸€ä¸ªå‚æ•°42ï¼Œæ•°å€¼æ˜¯æ²¡æœ‰toUpperCaseæ–¹æ³•çš„ï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºä¸€ä¸ªTypeErroré”™è¯¯ï¼Œè¢«å‡½æ•°ä½“å¤–çš„catchæ•è·ã€‚ ä¸€æ—¦Generatoræ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºé”™è¯¯ï¼Œä¸”æ²¡æœ‰è¢«å†…éƒ¨æ•è·ï¼Œå°±ä¸ä¼šå†æ‰§è¡Œä¸‹å»äº†ã€‚å¦‚æœæ­¤åè¿˜è°ƒç”¨nextæ–¹æ³•ï¼Œå°†è¿”å›ä¸€ä¸ªvalueå±æ€§ç­‰äºundefinedã€doneå±æ€§ç­‰äºtrueçš„å¯¹è±¡ï¼Œå³JavaScriptå¼•æ“è®¤ä¸ºè¿™ä¸ªGeneratorå·²ç»è¿è¡Œç»“æŸäº†ã€‚ function* g() { yield 1; console.log(&#39;throwing an exception&#39;); throw new Error(&#39;generator broke!&#39;); yield 2; yield 3; } function log(generator) { var v; console.log(&#39;starting generator&#39;); try { v = generator.next(); console.log(&#39;ç¬¬ä¸€æ¬¡è¿è¡Œnextæ–¹æ³•&#39;, v); } catch (err) { console.log(&#39;æ•æ‰é”™è¯¯&#39;, v); } try { v = generator.next(); console.log(&#39;ç¬¬äºŒæ¬¡è¿è¡Œnextæ–¹æ³•&#39;, v); } catch (err) { console.log(&#39;æ•æ‰é”™è¯¯&#39;, v); } try { v = generator.next(); console.log(&#39;ç¬¬ä¸‰æ¬¡è¿è¡Œnextæ–¹æ³•&#39;, v); } catch (err) { console.log(&#39;æ•æ‰é”™è¯¯&#39;, v); } console.log(&#39;caller done&#39;); } log(g()); // starting generator // ç¬¬ä¸€æ¬¡è¿è¡Œnextæ–¹æ³• { value: 1, done: false } // throwing an exception // æ•æ‰é”™è¯¯ { value: 1, done: false } // ç¬¬ä¸‰æ¬¡è¿è¡Œnextæ–¹æ³• { value: undefined, done: true } // caller done ä¸Šé¢ä»£ç ä¸€å…±ä¸‰æ¬¡è¿è¡Œnextæ–¹æ³•ï¼Œç¬¬äºŒæ¬¡è¿è¡Œçš„æ—¶å€™ä¼šæŠ›å‡ºé”™è¯¯ï¼Œç„¶åç¬¬ä¸‰æ¬¡è¿è¡Œçš„æ—¶å€™ï¼ŒGeneratorå‡½æ•°å°±å·²ç»ç»“æŸäº†ï¼Œä¸å†æ‰§è¡Œä¸‹å»äº†ã€‚ Generator.prototype.return()Generatorå‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œè¿˜æœ‰ä¸€ä¸ªreturnæ–¹æ³•ï¼Œå¯ä»¥è¿”å›ç»™å®šçš„å€¼ï¼Œå¹¶ä¸”ç»ˆç»“éå†Generatorå‡½æ•°ã€‚ function* gen() { yield 1; yield 2; yield 3; } var g = gen(); g.next() // { value: 1, done: false } g.return(&#39;foo&#39;) // { value: &quot;foo&quot;, done: true } g.next() // { value: undefined, done: true } ä¸Šé¢ä»£ç ä¸­ï¼Œéå†å™¨å¯¹è±¡gè°ƒç”¨returnæ–¹æ³•åï¼Œè¿”å›å€¼çš„valueå±æ€§å°±æ˜¯returnæ–¹æ³•çš„å‚æ•°fooã€‚å¹¶ä¸”ï¼ŒGeneratorå‡½æ•°çš„éå†å°±ç»ˆæ­¢äº†ï¼Œè¿”å›å€¼çš„doneå±æ€§ä¸ºtrueï¼Œä»¥åå†è°ƒç”¨nextæ–¹æ³•ï¼Œdoneå±æ€§æ€»æ˜¯è¿”å›trueã€‚ å¦‚æœreturnæ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¸æä¾›å‚æ•°ï¼Œåˆ™è¿”å›å€¼çš„valueå±æ€§ä¸ºundefinedã€‚ function* gen() { yield 1; yield 2; yield 3; } var g = gen(); g.next() // { value: 1, done: false } g.return() // { value: undefined, done: true } å¦‚æœGeneratorå‡½æ•°å†…éƒ¨æœ‰try...finallyä»£ç å—ï¼Œé‚£ä¹ˆreturnæ–¹æ³•ä¼šæ¨è¿Ÿåˆ°finallyä»£ç å—æ‰§è¡Œå®Œå†æ‰§è¡Œã€‚ function* numbers () { yield 1; try { yield 2; yield 3; } finally { yield 4; yield 5; } yield 6; } var g = numbers() g.next() // { done: false, value: 1 } g.next() // { done: false, value: 2 } g.return(7) // { done: false, value: 4 } g.next() // { done: false, value: 5 } g.next() // { done: true, value: 7 } ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨returnæ–¹æ³•åï¼Œå°±å¼€å§‹æ‰§è¡Œfinallyä»£ç å—ï¼Œç„¶åç­‰åˆ°finallyä»£ç å—æ‰§è¡Œå®Œï¼Œå†æ‰§è¡Œreturnæ–¹æ³•ã€‚ yield* è¯­å¥å¦‚æœåœ¨ Generator å‡½æ•°å†…éƒ¨ï¼Œè°ƒç”¨å¦ä¸€ä¸ª Generator å‡½æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯æ²¡æœ‰æ•ˆæœçš„ã€‚ function* foo() { yield &#39;a&#39;; yield &#39;b&#39;; } function* bar() { yield &#39;x&#39;; foo(); yield &#39;y&#39;; } for (let v of bar()){ console.log(v); } // &quot;x&quot; // &quot;y&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œfooå’Œbaréƒ½æ˜¯ Generator å‡½æ•°ï¼Œåœ¨baré‡Œé¢è°ƒç”¨fooï¼Œæ˜¯ä¸ä¼šæœ‰æ•ˆæœçš„ã€‚ è¿™ä¸ªå°±éœ€è¦ç”¨åˆ°yield*è¯­å¥ï¼Œç”¨æ¥åœ¨ä¸€ä¸ª Generator å‡½æ•°é‡Œé¢æ‰§è¡Œå¦ä¸€ä¸ª Generator å‡½æ•°ã€‚ function* bar() { yield &#39;x&#39;; yield* foo(); yield &#39;y&#39;; } // ç­‰åŒäº function* bar() { yield &#39;x&#39;; yield &#39;a&#39;; yield &#39;b&#39;; yield &#39;y&#39;; } // ç­‰åŒäº function* bar() { yield &#39;x&#39;; for (let v of foo()) { yield v; } yield &#39;y&#39;; } for (let v of bar()){ console.log(v); } // &quot;x&quot; // &quot;a&quot; // &quot;b&quot; // &quot;y&quot; å†æ¥çœ‹ä¸€ä¸ªå¯¹æ¯”çš„ä¾‹å­ã€‚ function* inner() { yield &#39;hello!&#39;; } function* outer1() { yield &#39;open&#39;; yield inner(); yield &#39;close&#39;; } var gen = outer1() gen.next().value // &quot;open&quot; gen.next().value // è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ gen.next().value // &quot;close&quot; function* outer2() { yield &#39;open&#39; yield* inner() yield &#39;close&#39; } var gen = outer2() gen.next().value // &quot;open&quot; gen.next().value // &quot;hello!&quot; gen.next().value // &quot;close&quot; ä¸Šé¢ä¾‹å­ä¸­ï¼Œouter2ä½¿ç”¨äº†yield*ï¼Œouter1æ²¡ä½¿ç”¨ã€‚ç»“æœå°±æ˜¯ï¼Œouter1è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œouter2è¿”å›è¯¥éå†å™¨å¯¹è±¡çš„å†…éƒ¨å€¼ã€‚ ä»è¯­æ³•è§’åº¦çœ‹ï¼Œå¦‚æœyieldå‘½ä»¤åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œéœ€è¦åœ¨yieldå‘½ä»¤åé¢åŠ ä¸Šæ˜Ÿå·ï¼Œè¡¨æ˜å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚è¿™è¢«ç§°ä¸ºyield*è¯­å¥ã€‚ let delegatedIterator = (function* () { yield &#39;Hello!&#39;; yield &#39;Bye!&#39;; }()); let delegatingIterator = (function* () { yield &#39;Greetings!&#39;; yield* delegatedIterator; yield &#39;Ok, bye.&#39;; }()); for(let value of delegatingIterator) { console.log(value); } // &quot;Greetings! // &quot;Hello!&quot; // &quot;Bye!&quot; // &quot;Ok, bye.&quot; ä¸Šé¢ä»£ç ä¸­ï¼ŒdelegatingIteratoræ˜¯ä»£ç†è€…ï¼ŒdelegatedIteratoræ˜¯è¢«ä»£ç†è€…ã€‚ç”±äºyield* delegatedIteratorè¯­å¥å¾—åˆ°çš„å€¼ï¼Œæ˜¯ä¸€ä¸ªéå†å™¨ï¼Œæ‰€ä»¥è¦ç”¨æ˜Ÿå·è¡¨ç¤ºã€‚è¿è¡Œç»“æœå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªéå†å™¨ï¼Œéå†äº†å¤šä¸ªGeneratorå‡½æ•°ï¼Œæœ‰é€’å½’çš„æ•ˆæœã€‚ yield*åé¢çš„Generatorå‡½æ•°ï¼ˆæ²¡æœ‰returnè¯­å¥æ—¶ï¼‰ï¼Œç­‰åŒäºåœ¨Generatorå‡½æ•°å†…éƒ¨ï¼Œéƒ¨ç½²ä¸€ä¸ªfor...ofå¾ªç¯ã€‚ function* concat(iter1, iter2) { yield* iter1; yield* iter2; } // ç­‰åŒäº function* concat(iter1, iter2) { for (var value of iter1) { yield value; } for (var value of iter2) { yield value; } } ä¸Šé¢ä»£ç è¯´æ˜ï¼Œyield*åé¢çš„Generatorå‡½æ•°ï¼ˆæ²¡æœ‰returnè¯­å¥æ—¶ï¼‰ï¼Œä¸è¿‡æ˜¯for...ofçš„ä¸€ç§ç®€å†™å½¢å¼ï¼Œå®Œå…¨å¯ä»¥ç”¨åè€…æ›¿ä»£å‰è€…ã€‚åä¹‹ï¼Œåˆ™éœ€è¦ç”¨var value = yield* iteratorçš„å½¢å¼è·å–returnè¯­å¥çš„å€¼ã€‚ å¦‚æœyield*åé¢è·Ÿç€ä¸€ä¸ªæ•°ç»„ï¼Œç”±äºæ•°ç»„åŸç”Ÿæ”¯æŒéå†å™¨ï¼Œå› æ­¤å°±ä¼šéå†æ•°ç»„æˆå‘˜ã€‚ function* gen(){ yield* [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]; } gen().next() // { value:&quot;a&quot;, done:false } ä¸Šé¢ä»£ç ä¸­ï¼Œyieldå‘½ä»¤åé¢å¦‚æœä¸åŠ æ˜Ÿå·ï¼Œè¿”å›çš„æ˜¯æ•´ä¸ªæ•°ç»„ï¼ŒåŠ äº†æ˜Ÿå·å°±è¡¨ç¤ºè¿”å›çš„æ˜¯æ•°ç»„çš„éå†å™¨å¯¹è±¡ã€‚ å®é™…ä¸Šï¼Œä»»ä½•æ•°æ®ç»“æ„åªè¦æœ‰Iteratoræ¥å£ï¼Œå°±å¯ä»¥è¢«yield*éå†ã€‚ let read = (function* () { yield &#39;hello&#39;; yield* &#39;hello&#39;; })(); read.next().value // &quot;hello&quot; read.next().value // &quot;h&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œyieldè¯­å¥è¿”å›æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œyield*è¯­å¥è¿”å›å•ä¸ªå­—ç¬¦ã€‚å› ä¸ºå­—ç¬¦ä¸²å…·æœ‰Iteratoræ¥å£ï¼Œæ‰€ä»¥è¢«yield*éå†ã€‚ å¦‚æœè¢«ä»£ç†çš„Generatorå‡½æ•°æœ‰returnè¯­å¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥å‘ä»£ç†å®ƒçš„Generatorå‡½æ•°è¿”å›æ•°æ®ã€‚ function *foo() { yield 2; yield 3; return &quot;foo&quot;; } function *bar() { yield 1; var v = yield *foo(); console.log( &quot;v: &quot; + v ); yield 4; } var it = bar(); it.next() // {value: 1, done: false} it.next() // {value: 2, done: false} it.next() // {value: 3, done: false} it.next(); // &quot;v: foo&quot; // {value: 4, done: false} it.next() // {value: undefined, done: true} ä¸Šé¢ä»£ç åœ¨ç¬¬å››æ¬¡è°ƒç”¨nextæ–¹æ³•çš„æ—¶å€™ï¼Œå±å¹•ä¸Šä¼šæœ‰è¾“å‡ºï¼Œè¿™æ˜¯å› ä¸ºå‡½æ•°fooçš„returnè¯­å¥ï¼Œå‘å‡½æ•°baræä¾›äº†è¿”å›å€¼ã€‚ å†çœ‹ä¸€ä¸ªä¾‹å­ã€‚ function* genFuncWithReturn() { yield &#39;a&#39;; yield &#39;b&#39;; return &#39;The result&#39;; } function* logReturned(genObj) { let result = yield* genObj; console.log(result); } [...logReturned(genFuncWithReturn())] // The result // å€¼ä¸º [ &#39;a&#39;, &#39;b&#39; ] ä¸Šé¢ä»£ç ä¸­ï¼Œå­˜åœ¨ä¸¤æ¬¡éå†ã€‚ç¬¬ä¸€æ¬¡æ˜¯æ‰©å±•è¿ç®—ç¬¦éå†å‡½æ•°logReturnedè¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œç¬¬äºŒæ¬¡æ˜¯yield*è¯­å¥éå†å‡½æ•°genFuncWithReturnè¿”å›çš„éå†å™¨å¯¹è±¡ã€‚è¿™ä¸¤æ¬¡éå†çš„æ•ˆæœæ˜¯å åŠ çš„ï¼Œæœ€ç»ˆè¡¨ç°ä¸ºæ‰©å±•è¿ç®—ç¬¦éå†å‡½æ•°genFuncWithReturnè¿”å›çš„éå†å™¨å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œæœ€åçš„æ•°æ®è¡¨è¾¾å¼å¾—åˆ°çš„å€¼ç­‰äº[ &#39;a&#39;, &#39;b&#39; ]ã€‚ä½†æ˜¯ï¼Œå‡½æ•°genFuncWithReturnçš„returnè¯­å¥çš„è¿”å›å€¼The resultï¼Œä¼šè¿”å›ç»™å‡½æ•°logReturnedå†…éƒ¨çš„resultå˜é‡ï¼Œå› æ­¤ä¼šæœ‰ç»ˆç«¯è¾“å‡ºã€‚ yield*å‘½ä»¤å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å–å‡ºåµŒå¥—æ•°ç»„çš„æ‰€æœ‰æˆå‘˜ã€‚ function* iterTree(tree) { if (Array.isArray(tree)) { for(let i=0; i &lt; tree.length; i++) { yield* iterTree(tree[i]); } } else { yield tree; } } const tree = [ &#39;a&#39;, [&#39;b&#39;, &#39;c&#39;], [&#39;d&#39;, &#39;e&#39;] ]; for(let x of iterTree(tree)) { console.log(x); } // a // b // c // d // e ä¸‹é¢æ˜¯ä¸€ä¸ªç¨å¾®å¤æ‚çš„ä¾‹å­ï¼Œä½¿ç”¨yield*è¯­å¥éå†å®Œå…¨äºŒå‰æ ‘ã€‚ // ä¸‹é¢æ˜¯äºŒå‰æ ‘çš„æ„é€ å‡½æ•°ï¼Œ // ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯å·¦æ ‘ã€å½“å‰èŠ‚ç‚¹å’Œå³æ ‘ function Tree(left, label, right) { this.left = left; this.label = label; this.right = right; } // ä¸‹é¢æ˜¯ä¸­åºï¼ˆinorderï¼‰éå†å‡½æ•°ã€‚ // ç”±äºè¿”å›çš„æ˜¯ä¸€ä¸ªéå†å™¨ï¼Œæ‰€ä»¥è¦ç”¨generatorå‡½æ•°ã€‚ // å‡½æ•°ä½“å†…é‡‡ç”¨é€’å½’ç®—æ³•ï¼Œæ‰€ä»¥å·¦æ ‘å’Œå³æ ‘è¦ç”¨yield*éå† function* inorder(t) { if (t) { yield* inorder(t.left); yield t.label; yield* inorder(t.right); } } // ä¸‹é¢ç”ŸæˆäºŒå‰æ ‘ function make(array) { // åˆ¤æ–­æ˜¯å¦ä¸ºå¶èŠ‚ç‚¹ if (array.length == 1) return new Tree(null, array[0], null); return new Tree(make(array[0]), array[1], make(array[2])); } let tree = make([[[&#39;a&#39;], &#39;b&#39;, [&#39;c&#39;]], &#39;d&#39;, [[&#39;e&#39;], &#39;f&#39;, [&#39;g&#39;]]]); // éå†äºŒå‰æ ‘ var result = []; for (let node of inorder(tree)) { result.push(node); } result // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;] ä½œä¸ºå¯¹è±¡å±æ€§çš„Generatorå‡½æ•°å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ˜¯Generatorå‡½æ•°ï¼Œå¯ä»¥ç®€å†™æˆä¸‹é¢çš„å½¢å¼ã€‚ let obj = { * myGeneratorMethod() { Â·Â·Â· } }; ä¸Šé¢ä»£ç ä¸­ï¼ŒmyGeneratorMethodå±æ€§å‰é¢æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼Œè¡¨ç¤ºè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ã€‚ å®ƒçš„å®Œæ•´å½¢å¼å¦‚ä¸‹ï¼Œä¸ä¸Šé¢çš„å†™æ³•æ˜¯ç­‰ä»·çš„ã€‚ let obj = { myGeneratorMethod: function* () { // Â·Â·Â· } }; Generatorå‡½æ•°çš„thisGeneratorå‡½æ•°æ€»æ˜¯è¿”å›ä¸€ä¸ªéå†å™¨ï¼ŒES6è§„å®šè¿™ä¸ªéå†å™¨æ˜¯Generatorå‡½æ•°çš„å®ä¾‹ï¼Œä¹Ÿç»§æ‰¿äº†Generatorå‡½æ•°çš„prototypeå¯¹è±¡ä¸Šçš„æ–¹æ³•ã€‚ function* g() {} g.prototype.hello = function () { return &#39;hi!&#39;; }; let obj = g(); obj instanceof g // true obj.hello() // &#39;hi!&#39; ä¸Šé¢ä»£ç è¡¨æ˜ï¼ŒGeneratorå‡½æ•°gè¿”å›çš„éå†å™¨objï¼Œæ˜¯gçš„å®ä¾‹ï¼Œè€Œä¸”ç»§æ‰¿äº†g.prototypeã€‚ä½†æ˜¯ï¼Œå¦‚æœæŠŠgå½“ä½œæ™®é€šçš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸ºgè¿”å›çš„æ€»æ˜¯éå†å™¨å¯¹è±¡ï¼Œè€Œä¸æ˜¯thiså¯¹è±¡ã€‚ function* g() { this.a = 11; } let obj = g(); obj.a // undefined ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°gåœ¨thiså¯¹è±¡ä¸Šé¢æ·»åŠ äº†ä¸€ä¸ªå±æ€§aï¼Œä½†æ˜¯objå¯¹è±¡æ‹¿ä¸åˆ°è¿™ä¸ªå±æ€§ã€‚ Generatorå‡½æ•°ä¹Ÿä¸èƒ½è·Ÿnewå‘½ä»¤ä¸€èµ·ç”¨ï¼Œä¼šæŠ¥é”™ã€‚ function* F() { yield this.x = 2; yield this.y = 3; } new F() // TypeError: F is not a constructor ä¸Šé¢ä»£ç ä¸­ï¼Œnewå‘½ä»¤è·Ÿæ„é€ å‡½æ•°Fä¸€èµ·ä½¿ç”¨ï¼Œç»“æœæŠ¥é”™ï¼Œå› ä¸ºFä¸æ˜¯æ„é€ å‡½æ•°ã€‚ é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰åŠæ³•è®©Generatorå‡½æ•°è¿”å›ä¸€ä¸ªæ­£å¸¸çš„å¯¹è±¡å®ä¾‹ï¼Œæ—¢å¯ä»¥ç”¨nextæ–¹æ³•ï¼Œåˆå¯ä»¥è·å¾—æ­£å¸¸çš„thisï¼Ÿ ä¸‹é¢æ˜¯ä¸€ä¸ªå˜é€šæ–¹æ³•ã€‚é¦–å…ˆï¼Œç”Ÿæˆä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä½¿ç”¨callæ–¹æ³•ç»‘å®šGeneratorå‡½æ•°å†…éƒ¨çš„thisã€‚è¿™æ ·ï¼Œæ„é€ å‡½æ•°è°ƒç”¨ä»¥åï¼Œè¿™ä¸ªç©ºå¯¹è±¡å°±æ˜¯Generatorå‡½æ•°çš„å®ä¾‹å¯¹è±¡äº†ã€‚ function* F() { this.a = 1; yield this.b = 2; yield this.c = 3; } var obj = {}; var f = F.call(obj); f.next(); // Object {value: 2, done: false} f.next(); // Object {value: 3, done: false} f.next(); // Object {value: undefined, done: true} obj.a // 1 obj.b // 2 obj.c // 3 ä¸Šé¢ä»£ç ä¸­ï¼Œé¦–å…ˆæ˜¯Få†…éƒ¨çš„thiså¯¹è±¡ç»‘å®šobjå¯¹è±¡ï¼Œç„¶åè°ƒç”¨å®ƒï¼Œè¿”å›ä¸€ä¸ªIteratorå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡æ‰§è¡Œä¸‰æ¬¡nextæ–¹æ³•ï¼ˆå› ä¸ºFå†…éƒ¨æœ‰ä¸¤ä¸ªyieldè¯­å¥ï¼‰ï¼Œå®ŒæˆFå†…éƒ¨æ‰€æœ‰ä»£ç çš„è¿è¡Œã€‚è¿™æ—¶ï¼Œæ‰€æœ‰å†…éƒ¨å±æ€§éƒ½ç»‘å®šåœ¨objå¯¹è±¡ä¸Šäº†ï¼Œå› æ­¤objå¯¹è±¡ä¹Ÿå°±æˆäº†Fçš„å®ä¾‹ã€‚ ä¸Šé¢ä»£ç ä¸­ï¼Œæ‰§è¡Œçš„æ˜¯éå†å™¨å¯¹è±¡fï¼Œä½†æ˜¯ç”Ÿæˆçš„å¯¹è±¡å®ä¾‹æ˜¯objï¼Œæœ‰æ²¡æœ‰åŠæ³•å°†è¿™ä¸¤ä¸ªå¯¹è±¡ç»Ÿä¸€å‘¢ï¼Ÿ ä¸€ä¸ªåŠæ³•å°±æ˜¯å°†objæ¢æˆF.prototypeã€‚ function* F() { this.a = 1; yield this.b = 2; yield this.c = 3; } var f = F.call(F.prototype); f.next(); // Object {value: 2, done: false} f.next(); // Object {value: 3, done: false} f.next(); // Object {value: undefined, done: true} f.a // 1 f.b // 2 f.c // 3 å†å°†Fæ”¹æˆæ„é€ å‡½æ•°ï¼Œå°±å¯ä»¥å¯¹å®ƒæ‰§è¡Œnewå‘½ä»¤äº†ã€‚ function* gen() { this.a = 1; yield this.b = 2; yield this.c = 3; } function F() { return gen.call(gen.prototype); } var f = new F(); f.next(); // Object {value: 2, done: false} f.next(); // Object {value: 3, done: false} f.next(); // Object {value: undefined, done: true} f.a // 1 f.b // 2 f.c // 3 å«ä¹‰Generatorä¸çŠ¶æ€æœºGeneratoræ˜¯å®ç°çŠ¶æ€æœºçš„æœ€ä½³ç»“æ„ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„clockå‡½æ•°å°±æ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚ var ticking = true; var clock = function() { if (ticking) console.log(&#39;Tick!&#39;); else console.log(&#39;Tock!&#39;); ticking = !ticking; } ä¸Šé¢ä»£ç çš„clockå‡½æ•°ä¸€å…±æœ‰ä¸¤ç§çŠ¶æ€ï¼ˆTickå’ŒTockï¼‰ï¼Œæ¯è¿è¡Œä¸€æ¬¡ï¼Œå°±æ”¹å˜ä¸€æ¬¡çŠ¶æ€ã€‚è¿™ä¸ªå‡½æ•°å¦‚æœç”¨Generatorå®ç°ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚ var clock = function*() { while (true) { console.log(&#39;Tick!&#39;); yield; console.log(&#39;Tock!&#39;); yield; } }; ä¸Šé¢çš„Generatorå®ç°ä¸ES5å®ç°å¯¹æ¯”ï¼Œå¯ä»¥çœ‹åˆ°å°‘äº†ç”¨æ¥ä¿å­˜çŠ¶æ€çš„å¤–éƒ¨å˜é‡tickingï¼Œè¿™æ ·å°±æ›´ç®€æ´ï¼Œæ›´å®‰å…¨ï¼ˆçŠ¶æ€ä¸ä¼šè¢«éæ³•ç¯¡æ”¹ï¼‰ã€æ›´ç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ï¼Œåœ¨å†™æ³•ä¸Šä¹Ÿæ›´ä¼˜é›…ã€‚Generatorä¹‹æ‰€ä»¥å¯ä»¥ä¸ç”¨å¤–éƒ¨å˜é‡ä¿å­˜çŠ¶æ€ï¼Œæ˜¯å› ä¸ºå®ƒæœ¬èº«å°±åŒ…å«äº†ä¸€ä¸ªçŠ¶æ€ä¿¡æ¯ï¼Œå³ç›®å‰æ˜¯å¦å¤„äºæš‚åœæ€ã€‚ Generatorä¸åç¨‹åç¨‹ï¼ˆcoroutineï¼‰æ˜¯ä¸€ç§ç¨‹åºè¿è¡Œçš„æ–¹å¼ï¼Œå¯ä»¥ç†è§£æˆâ€œåä½œçš„çº¿ç¨‹â€æˆ–â€œåä½œçš„å‡½æ•°â€ã€‚åç¨‹æ—¢å¯ä»¥ç”¨å•çº¿ç¨‹å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨å¤šçº¿ç¨‹å®ç°ã€‚å‰è€…æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­ä¾‹ç¨‹ï¼Œåè€…æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿ç¨‹ã€‚ ï¼ˆ1ï¼‰åç¨‹ä¸å­ä¾‹ç¨‹çš„å·®å¼‚ ä¼ ç»Ÿçš„â€œå­ä¾‹ç¨‹â€ï¼ˆsubroutineï¼‰é‡‡ç”¨å †æ ˆå¼â€œåè¿›å…ˆå‡ºâ€çš„æ‰§è¡Œæ–¹å¼ï¼Œåªæœ‰å½“è°ƒç”¨çš„å­å‡½æ•°å®Œå…¨æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ä¼šç»“æŸæ‰§è¡Œçˆ¶å‡½æ•°ã€‚åç¨‹ä¸å…¶ä¸åŒï¼Œå¤šä¸ªçº¿ç¨‹ï¼ˆå•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œå³å¤šä¸ªå‡½æ•°ï¼‰å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰å¤„äºæ­£åœ¨è¿è¡Œçš„çŠ¶æ€ï¼Œå…¶ä»–çº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰éƒ½å¤„äºæš‚åœæ€ï¼ˆsuspendedï¼‰ï¼Œçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ä¹‹é—´å¯ä»¥äº¤æ¢æ‰§è¡Œæƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰æ‰§è¡Œåˆ°ä¸€åŠï¼Œå¯ä»¥æš‚åœæ‰§è¡Œï¼Œå°†æ‰§è¡Œæƒäº¤ç»™å¦ä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ï¼Œç­‰åˆ°ç¨åæ”¶å›æ‰§è¡Œæƒçš„æ—¶å€™ï¼Œå†æ¢å¤æ‰§è¡Œã€‚è¿™ç§å¯ä»¥å¹¶è¡Œæ‰§è¡Œã€äº¤æ¢æ‰§è¡Œæƒçš„çº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ï¼Œå°±ç§°ä¸ºåç¨‹ã€‚ ä»å®ç°ä¸Šçœ‹ï¼Œåœ¨å†…å­˜ä¸­ï¼Œå­ä¾‹ç¨‹åªä½¿ç”¨ä¸€ä¸ªæ ˆï¼ˆstackï¼‰ï¼Œè€Œåç¨‹æ˜¯åŒæ—¶å­˜åœ¨å¤šä¸ªæ ˆï¼Œä½†åªæœ‰ä¸€ä¸ªæ ˆæ˜¯åœ¨è¿è¡ŒçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåç¨‹æ˜¯ä»¥å¤šå ç”¨å†…å­˜ä¸ºä»£ä»·ï¼Œå®ç°å¤šä»»åŠ¡çš„å¹¶è¡Œã€‚ ï¼ˆ2ï¼‰åç¨‹ä¸æ™®é€šçº¿ç¨‹çš„å·®å¼‚ ä¸éš¾çœ‹å‡ºï¼Œåç¨‹é€‚åˆç”¨äºå¤šä»»åŠ¡è¿è¡Œçš„ç¯å¢ƒã€‚åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œå®ƒä¸æ™®é€šçš„çº¿ç¨‹å¾ˆç›¸ä¼¼ï¼Œéƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€å¯ä»¥åˆ†äº«å…¨å±€å˜é‡ã€‚å®ƒä»¬çš„ä¸åŒä¹‹å¤„åœ¨äºï¼ŒåŒä¸€æ—¶é—´å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œä½†æ˜¯è¿è¡Œçš„åç¨‹åªèƒ½æœ‰ä¸€ä¸ªï¼Œå…¶ä»–åç¨‹éƒ½å¤„äºæš‚åœçŠ¶æ€ã€‚æ­¤å¤–ï¼Œæ™®é€šçš„çº¿ç¨‹æ˜¯æŠ¢å…ˆå¼çš„ï¼Œåˆ°åº•å“ªä¸ªçº¿ç¨‹ä¼˜å…ˆå¾—åˆ°èµ„æºï¼Œå¿…é¡»ç”±è¿è¡Œç¯å¢ƒå†³å®šï¼Œä½†æ˜¯åç¨‹æ˜¯åˆä½œå¼çš„ï¼Œæ‰§è¡Œæƒç”±åç¨‹è‡ªå·±åˆ†é…ã€‚ ç”±äºECMAScriptæ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œåªèƒ½ä¿æŒä¸€ä¸ªè°ƒç”¨æ ˆã€‚å¼•å…¥åç¨‹ä»¥åï¼Œæ¯ä¸ªä»»åŠ¡å¯ä»¥ä¿æŒè‡ªå·±çš„è°ƒç”¨æ ˆã€‚è¿™æ ·åšçš„æœ€å¤§å¥½å¤„ï¼Œå°±æ˜¯æŠ›å‡ºé”™è¯¯çš„æ—¶å€™ï¼Œå¯ä»¥æ‰¾åˆ°åŸå§‹çš„è°ƒç”¨æ ˆã€‚ä¸è‡³äºåƒå¼‚æ­¥æ“ä½œçš„å›è°ƒå‡½æ•°é‚£æ ·ï¼Œä¸€æ—¦å‡ºé”™ï¼ŒåŸå§‹çš„è°ƒç”¨æ ˆæ—©å°±ç»“æŸã€‚ Generatorå‡½æ•°æ˜¯ECMAScript 6å¯¹åç¨‹çš„å®ç°ï¼Œä½†å±äºä¸å®Œå…¨å®ç°ã€‚Generatorå‡½æ•°è¢«ç§°ä¸ºâ€œåŠåç¨‹â€ï¼ˆsemi-coroutineï¼‰ï¼Œæ„æ€æ˜¯åªæœ‰Generatorå‡½æ•°çš„è°ƒç”¨è€…ï¼Œæ‰èƒ½å°†ç¨‹åºçš„æ‰§è¡Œæƒè¿˜ç»™Generatorå‡½æ•°ã€‚å¦‚æœæ˜¯å®Œå…¨æ‰§è¡Œçš„åç¨‹ï¼Œä»»ä½•å‡½æ•°éƒ½å¯ä»¥è®©æš‚åœçš„åç¨‹ç»§ç»­æ‰§è¡Œã€‚ å¦‚æœå°†Generatorå‡½æ•°å½“ä½œåç¨‹ï¼Œå®Œå…¨å¯ä»¥å°†å¤šä¸ªéœ€è¦äº’ç›¸åä½œçš„ä»»åŠ¡å†™æˆGeneratorå‡½æ•°ï¼Œå®ƒä»¬ä¹‹é—´ä½¿ç”¨yieldè¯­å¥äº¤æ¢æ§åˆ¶æƒã€‚ åº”ç”¨Generatorå¯ä»¥æš‚åœå‡½æ•°æ‰§è¡Œï¼Œè¿”å›ä»»æ„è¡¨è¾¾å¼çš„å€¼ã€‚è¿™ç§ç‰¹ç‚¹ä½¿å¾—Generatoræœ‰å¤šç§åº”ç”¨åœºæ™¯ã€‚ ï¼ˆ1ï¼‰å¼‚æ­¥æ“ä½œçš„åŒæ­¥åŒ–è¡¨è¾¾Generatorå‡½æ•°çš„æš‚åœæ‰§è¡Œçš„æ•ˆæœï¼Œæ„å‘³ç€å¯ä»¥æŠŠå¼‚æ­¥æ“ä½œå†™åœ¨yieldè¯­å¥é‡Œé¢ï¼Œç­‰åˆ°è°ƒç”¨nextæ–¹æ³•æ—¶å†å¾€åæ‰§è¡Œã€‚è¿™å®é™…ä¸Šç­‰åŒäºä¸éœ€è¦å†™å›è°ƒå‡½æ•°äº†ï¼Œå› ä¸ºå¼‚æ­¥æ“ä½œçš„åç»­æ“ä½œå¯ä»¥æ”¾åœ¨yieldè¯­å¥ä¸‹é¢ï¼Œåæ­£è¦ç­‰åˆ°è°ƒç”¨nextæ–¹æ³•æ—¶å†æ‰§è¡Œã€‚æ‰€ä»¥ï¼ŒGeneratorå‡½æ•°çš„ä¸€ä¸ªé‡è¦å®é™…æ„ä¹‰å°±æ˜¯ç”¨æ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œæ”¹å†™å›è°ƒå‡½æ•°ã€‚ function* loadUI() { showLoadingScreen(); yield loadUIDataAsynchronously(); hideLoadingScreen(); } var loader = loadUI(); // åŠ è½½UI loader.next() // å¸è½½UI loader.next() ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨loadUIå‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°ä¸ä¼šæ‰§è¡Œï¼Œä»…è¿”å›ä¸€ä¸ªéå†å™¨ã€‚ä¸‹ä¸€æ¬¡å¯¹è¯¥éå†å™¨è°ƒç”¨nextæ–¹æ³•ï¼Œåˆ™ä¼šæ˜¾ç¤ºLoadingç•Œé¢ï¼Œå¹¶ä¸”å¼‚æ­¥åŠ è½½æ•°æ®ã€‚ç­‰åˆ°æ•°æ®åŠ è½½å®Œæˆï¼Œå†ä¸€æ¬¡ä½¿ç”¨nextæ–¹æ³•ï¼Œåˆ™ä¼šéšè—Loadingç•Œé¢ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§å†™æ³•çš„å¥½å¤„æ˜¯æ‰€æœ‰Loadingç•Œé¢çš„é€»è¾‘ï¼Œéƒ½è¢«å°è£…åœ¨ä¸€ä¸ªå‡½æ•°ï¼ŒæŒ‰éƒ¨å°±ç­éå¸¸æ¸…æ™°ã€‚ Ajaxæ˜¯å…¸å‹çš„å¼‚æ­¥æ“ä½œï¼Œé€šè¿‡Generatorå‡½æ•°éƒ¨ç½²Ajaxæ“ä½œï¼Œå¯ä»¥ç”¨åŒæ­¥çš„æ–¹å¼è¡¨è¾¾ã€‚ function* main() { var result = yield request(&quot;http://some.url&quot;); var resp = JSON.parse(result); console.log(resp.value); } function request(url) { makeAjaxCall(url, function(response){ it.next(response); }); } var it = main(); it.next(); ä¸Šé¢ä»£ç çš„mainå‡½æ•°ï¼Œå°±æ˜¯é€šè¿‡Ajaxæ“ä½œè·å–æ•°æ®ã€‚å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†å¤šäº†ä¸€ä¸ªyieldï¼Œå®ƒå‡ ä¹ä¸åŒæ­¥æ“ä½œçš„å†™æ³•å®Œå…¨ä¸€æ ·ã€‚æ³¨æ„ï¼ŒmakeAjaxCallå‡½æ•°ä¸­çš„nextæ–¹æ³•ï¼Œå¿…é¡»åŠ ä¸Šresponseå‚æ•°ï¼Œå› ä¸ºyieldè¯­å¥æ„æˆçš„è¡¨è¾¾å¼ï¼Œæœ¬èº«æ˜¯æ²¡æœ‰å€¼çš„ï¼Œæ€»æ˜¯ç­‰äºundefinedã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œé€šè¿‡Generatorå‡½æ•°é€è¡Œè¯»å–æ–‡æœ¬æ–‡ä»¶ã€‚ function* numbers() { let file = new FileReader(&quot;numbers.txt&quot;); try { while(!file.eof) { yield parseInt(file.readLine(), 10); } } finally { file.close(); } } ä¸Šé¢ä»£ç æ‰“å¼€æ–‡æœ¬æ–‡ä»¶ï¼Œä½¿ç”¨yieldè¯­å¥å¯ä»¥æ‰‹åŠ¨é€è¡Œè¯»å–æ–‡ä»¶ã€‚ ï¼ˆ2ï¼‰æ§åˆ¶æµç®¡ç†å¦‚æœæœ‰ä¸€ä¸ªå¤šæ­¥æ“ä½œéå¸¸è€—æ—¶ï¼Œé‡‡ç”¨å›è°ƒå‡½æ•°ï¼Œå¯èƒ½ä¼šå†™æˆä¸‹é¢è¿™æ ·ã€‚ step1(function (value1) { step2(value1, function(value2) { step3(value2, function(value3) { step4(value3, function(value4) { // Do something with value4 }); }); }); }); é‡‡ç”¨Promiseæ”¹å†™ä¸Šé¢çš„ä»£ç ã€‚ Promise.resolve(step1) .then(step2) .then(step3) .then(step4) .then(function (value4) { // Do something with value4 }, function (error) { // Handle any error from step1 through step4 }) .done(); ä¸Šé¢ä»£ç å·²ç»æŠŠå›è°ƒå‡½æ•°ï¼Œæ”¹æˆäº†ç›´çº¿æ‰§è¡Œçš„å½¢å¼ï¼Œä½†æ˜¯åŠ å…¥äº†å¤§é‡Promiseçš„è¯­æ³•ã€‚Generatorå‡½æ•°å¯ä»¥è¿›ä¸€æ­¥æ”¹å–„ä»£ç è¿è¡Œæµç¨‹ã€‚ function* longRunningTask(value1) { try { var value2 = yield step1(value1); var value3 = yield step2(value2); var value4 = yield step3(value3); var value5 = yield step4(value4); // Do something with value4 } catch (e) { // Handle any error from step1 through step4 } } ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‡½æ•°ï¼ŒæŒ‰æ¬¡åºè‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰æ­¥éª¤ã€‚ scheduler(longRunningTask(initialValue)); function scheduler(task) { var taskObj = task.next(task.value); // å¦‚æœGeneratorå‡½æ•°æœªç»“æŸï¼Œå°±ç»§ç»­è°ƒç”¨ if (!taskObj.done) { task.value = taskObj.value scheduler(task); } } æ³¨æ„ï¼Œä¸Šé¢è¿™ç§åšæ³•ï¼Œåªé€‚åˆåŒæ­¥æ“ä½œï¼Œå³æ‰€æœ‰çš„taskéƒ½å¿…é¡»æ˜¯åŒæ­¥çš„ï¼Œä¸èƒ½æœ‰å¼‚æ­¥æ“ä½œã€‚å› ä¸ºè¿™é‡Œçš„ä»£ç ä¸€å¾—åˆ°è¿”å›å€¼ï¼Œå°±ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œæ²¡æœ‰åˆ¤æ–­å¼‚æ­¥æ“ä½œä½•æ—¶å®Œæˆã€‚å¦‚æœè¦æ§åˆ¶å¼‚æ­¥çš„æ“ä½œæµç¨‹ï¼Œè¯¦è§åé¢çš„ã€Šå¼‚æ­¥æ“ä½œã€‹ä¸€ç« ã€‚ ä¸‹é¢ï¼Œåˆ©ç”¨for...ofå¾ªç¯ä¼šè‡ªåŠ¨ä¾æ¬¡æ‰§è¡Œyieldå‘½ä»¤çš„ç‰¹æ€§ï¼Œæä¾›ä¸€ç§æ›´ä¸€èˆ¬çš„æ§åˆ¶æµç®¡ç†çš„æ–¹æ³•ã€‚ let steps = [step1Func, step2Func, step3Func]; function *iterateSteps(steps){ for (var i=0; i&lt; steps.length; i++){ var step = steps[i]; yield step(); } } ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„stepså°è£…äº†ä¸€ä¸ªä»»åŠ¡çš„å¤šä¸ªæ­¥éª¤ï¼ŒGeneratorå‡½æ•°iterateStepsåˆ™æ˜¯ä¾æ¬¡ä¸ºè¿™äº›æ­¥éª¤åŠ ä¸Šyieldå‘½ä»¤ã€‚ å°†ä»»åŠ¡åˆ†è§£æˆæ­¥éª¤ä¹‹åï¼Œè¿˜å¯ä»¥å°†é¡¹ç›®åˆ†è§£æˆå¤šä¸ªä¾æ¬¡æ‰§è¡Œçš„ä»»åŠ¡ã€‚ let jobs = [job1, job2, job3]; function *iterateJobs(jobs){ for (var i=0; i&lt; jobs.length; i++){ var job = jobs[i]; yield *iterateSteps(job.steps); } } ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„jobså°è£…äº†ä¸€ä¸ªé¡¹ç›®çš„å¤šä¸ªä»»åŠ¡ï¼ŒGeneratorå‡½æ•°iterateJobsåˆ™æ˜¯ä¾æ¬¡ä¸ºè¿™äº›ä»»åŠ¡åŠ ä¸Šyield *å‘½ä»¤ã€‚ æœ€åï¼Œå°±å¯ä»¥ç”¨for...ofå¾ªç¯ä¸€æ¬¡æ€§ä¾æ¬¡æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡çš„æ‰€æœ‰æ­¥éª¤ã€‚ for (var step of iterateJobs(jobs)){ console.log(step.id); } å†æ¬¡æé†’ï¼Œä¸Šé¢çš„åšæ³•åªèƒ½ç”¨äºæ‰€æœ‰æ­¥éª¤éƒ½æ˜¯åŒæ­¥æ“ä½œçš„æƒ…å†µï¼Œä¸èƒ½æœ‰å¼‚æ­¥æ“ä½œçš„æ­¥éª¤ã€‚å¦‚æœæƒ³è¦ä¾æ¬¡æ‰§è¡Œå¼‚æ­¥çš„æ­¥éª¤ï¼Œå¿…é¡»ä½¿ç”¨åé¢çš„ã€Šå¼‚æ­¥æ“ä½œã€‹ä¸€ç« ä»‹ç»çš„æ–¹æ³•ã€‚ for...ofçš„æœ¬è´¨æ˜¯ä¸€ä¸ªwhileå¾ªç¯ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å®è´¨ä¸Šæ‰§è¡Œçš„æ˜¯ä¸‹é¢çš„é€»è¾‘ã€‚ var it = iterateJobs(jobs); var res = it.next(); while (!res.done){ var result = res.value; // ... res = it.next(); } ï¼ˆ3ï¼‰éƒ¨ç½²Iteratoræ¥å£åˆ©ç”¨Generatorå‡½æ•°ï¼Œå¯ä»¥åœ¨ä»»æ„å¯¹è±¡ä¸Šéƒ¨ç½²Iteratoræ¥å£ã€‚ function* iterEntries(obj) { let keys = Object.keys(obj); for (let i=0; i &lt; keys.length; i++) { let key = keys[i]; yield [key, obj[key]]; } } let myObj = { foo: 3, bar: 7 }; for (let [key, value] of iterEntries(myObj)) { console.log(key, value); } // foo 3 // bar 7 ä¸Šè¿°ä»£ç ä¸­ï¼ŒmyObjæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œé€šè¿‡iterEntrieså‡½æ•°ï¼Œå°±æœ‰äº†Iteratoræ¥å£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥åœ¨ä»»æ„å¯¹è±¡ä¸Šéƒ¨ç½²nextæ–¹æ³•ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹æ•°ç»„éƒ¨ç½²Iteratoræ¥å£çš„ä¾‹å­ï¼Œå°½ç®¡æ•°ç»„åŸç”Ÿå…·æœ‰è¿™ä¸ªæ¥å£ã€‚ function* makeSimpleGenerator(array){ var nextIndex = 0; while(nextIndex &lt; array.length){ yield array[nextIndex++]; } } var gen = makeSimpleGenerator([&#39;yo&#39;, &#39;ya&#39;]); gen.next().value // &#39;yo&#39; gen.next().value // &#39;ya&#39; gen.next().done // true ï¼ˆ4ï¼‰ä½œä¸ºæ•°æ®ç»“æ„Generatorå¯ä»¥çœ‹ä½œæ˜¯æ•°æ®ç»“æ„ï¼Œæ›´ç¡®åˆ‡åœ°è¯´ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ•°ç»„ç»“æ„ï¼Œå› ä¸ºGeneratorå‡½æ•°å¯ä»¥è¿”å›ä¸€ç³»åˆ—çš„å€¼ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥å¯¹ä»»æ„è¡¨è¾¾å¼ï¼Œæä¾›ç±»ä¼¼æ•°ç»„çš„æ¥å£ã€‚ function *doStuff() { yield fs.readFile.bind(null, &#39;hello.txt&#39;); yield fs.readFile.bind(null, &#39;world.txt&#39;); yield fs.readFile.bind(null, &#39;and-such.txt&#39;); } ä¸Šé¢ä»£ç å°±æ˜¯ä¾æ¬¡è¿”å›ä¸‰ä¸ªå‡½æ•°ï¼Œä½†æ˜¯ç”±äºä½¿ç”¨äº†Generatorå‡½æ•°ï¼Œå¯¼è‡´å¯ä»¥åƒå¤„ç†æ•°ç»„é‚£æ ·ï¼Œå¤„ç†è¿™ä¸‰ä¸ªè¿”å›çš„å‡½æ•°ã€‚ for (task of doStuff()) { // taskæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥åƒå›è°ƒå‡½æ•°é‚£æ ·ä½¿ç”¨å®ƒ } å®é™…ä¸Šï¼Œå¦‚æœç”¨ES5è¡¨è¾¾ï¼Œå®Œå…¨å¯ä»¥ç”¨æ•°ç»„æ¨¡æ‹ŸGeneratorçš„è¿™ç§ç”¨æ³•ã€‚ function doStuff() { return [ fs.readFile.bind(null, &#39;hello.txt&#39;), fs.readFile.bind(null, &#39;world.txt&#39;), fs.readFile.bind(null, &#39;and-such.txt&#39;) ]; } ä¸Šé¢çš„å‡½æ•°ï¼Œå¯ä»¥ç”¨ä¸€æ¨¡ä¸€æ ·çš„forâ€¦ofå¾ªç¯å¤„ç†ï¼ä¸¤ç›¸ä¸€æ¯”è¾ƒï¼Œå°±ä¸éš¾çœ‹å‡ºGeneratorä½¿å¾—æ•°æ®æˆ–è€…æ“ä½œï¼Œå…·å¤‡äº†ç±»ä¼¼æ•°ç»„çš„æ¥å£ã€‚ æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Generator","slug":"Generator","permalink":"https://microzz.com/tags/Generator/"}]},{"title":"Iteratorå’Œfor...ofå¾ªç¯","date":"2017-01-12T07:45:19.000Z","path":"2017/01/12/iterator/","text":"Iteratorå’Œforâ€¦ofå¾ªç¯Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µJavaScriptåŸæœ‰çš„è¡¨ç¤ºâ€œé›†åˆâ€çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦æ˜¯æ•°ç»„ï¼ˆArrayï¼‰å’Œå¯¹è±¡ï¼ˆObjectï¼‰ï¼ŒES6åˆæ·»åŠ äº†Mapå’ŒSetã€‚è¿™æ ·å°±æœ‰äº†å››ç§æ•°æ®é›†åˆï¼Œç”¨æˆ·è¿˜å¯ä»¥ç»„åˆä½¿ç”¨å®ƒä»¬ï¼Œå®šä¹‰è‡ªå·±çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚æ•°ç»„çš„æˆå‘˜æ˜¯Mapï¼ŒMapçš„æˆå‘˜æ˜¯å¯¹è±¡ã€‚è¿™æ ·å°±éœ€è¦ä¸€ç§ç»Ÿä¸€çš„æ¥å£æœºåˆ¶ï¼Œæ¥å¤„ç†æ‰€æœ‰ä¸åŒçš„æ•°æ®ç»“æ„ã€‚ éå†å™¨ï¼ˆIteratorï¼‰å°±æ˜¯è¿™æ ·ä¸€ç§æœºåˆ¶ã€‚å®ƒæ˜¯ä¸€ç§æ¥å£ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½²Iteratoræ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œï¼ˆå³ä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æ„çš„æ‰€æœ‰æˆå‘˜ï¼‰ã€‚ Iteratorçš„ä½œç”¨æœ‰ä¸‰ä¸ªï¼šä¸€æ˜¯ä¸ºå„ç§æ•°æ®ç»“æ„ï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€çš„ã€ç®€ä¾¿çš„è®¿é—®æ¥å£ï¼›äºŒæ˜¯ä½¿å¾—æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ—ï¼›ä¸‰æ˜¯ES6åˆ›é€ äº†ä¸€ç§æ–°çš„éå†å‘½ä»¤for...ofå¾ªç¯ï¼ŒIteratoræ¥å£ä¸»è¦ä¾›for...ofæ¶ˆè´¹ã€‚ Iteratorçš„éå†è¿‡ç¨‹æ˜¯è¿™æ ·çš„ã€‚ ï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œéå†å™¨å¯¹è±¡æœ¬è´¨ä¸Šï¼Œå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚ ï¼ˆ2ï¼‰ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„nextæ–¹æ³•ï¼Œå¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ã€‚ ï¼ˆ3ï¼‰ç¬¬äºŒæ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„nextæ–¹æ³•ï¼ŒæŒ‡é’ˆå°±æŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬äºŒä¸ªæˆå‘˜ã€‚ ï¼ˆ4ï¼‰ä¸æ–­è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„nextæ–¹æ³•ï¼Œç›´åˆ°å®ƒæŒ‡å‘æ•°æ®ç»“æ„çš„ç»“æŸä½ç½®ã€‚ æ¯ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œéƒ½ä¼šè¿”å›æ•°æ®ç»“æ„çš„å½“å‰æˆå‘˜çš„ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªåŒ…å«valueå’Œdoneä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚å…¶ä¸­ï¼Œvalueå±æ€§æ˜¯å½“å‰æˆå‘˜çš„å€¼ï¼Œdoneå±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéå†æ˜¯å¦ç»“æŸã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿnextæ–¹æ³•è¿”å›å€¼çš„ä¾‹å­ã€‚ var it = makeIterator([&#39;a&#39;, &#39;b&#39;]); it.next() // { value: &quot;a&quot;, done: false } it.next() // { value: &quot;b&quot;, done: false } it.next() // { value: undefined, done: true } function makeIterator(array) { var nextIndex = 0; return { next: function() { return nextIndex &lt; array.length ? {value: array[nextIndex++], done: false} : {value: undefined, done: true}; } }; } ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªmakeIteratorå‡½æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªéå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œä½œç”¨å°±æ˜¯è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚å¯¹æ•°ç»„[&#39;a&#39;, &#39;b&#39;]æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå°±ä¼šè¿”å›è¯¥æ•°ç»„çš„éå†å™¨å¯¹è±¡ï¼ˆå³æŒ‡é’ˆå¯¹è±¡ï¼‰itã€‚ æŒ‡é’ˆå¯¹è±¡çš„nextæ–¹æ³•ï¼Œç”¨æ¥ç§»åŠ¨æŒ‡é’ˆã€‚å¼€å§‹æ—¶ï¼ŒæŒ‡é’ˆæŒ‡å‘æ•°ç»„çš„å¼€å§‹ä½ç½®ã€‚ç„¶åï¼Œæ¯æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼ŒæŒ‡é’ˆå°±ä¼šæŒ‡å‘æ•°ç»„çš„ä¸‹ä¸€ä¸ªæˆå‘˜ã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼ŒæŒ‡å‘aï¼›ç¬¬äºŒæ¬¡è°ƒç”¨ï¼ŒæŒ‡å‘bã€‚ nextæ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰æ•°æ®æˆå‘˜çš„ä¿¡æ¯ã€‚è¿™ä¸ªå¯¹è±¡å…·æœ‰valueå’Œdoneä¸¤ä¸ªå±æ€§ï¼Œvalueå±æ€§è¿”å›å½“å‰ä½ç½®çš„æˆå‘˜ï¼Œdoneå±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéå†æ˜¯å¦ç»“æŸï¼Œå³æ˜¯å¦è¿˜æœ‰å¿…è¦å†ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•ã€‚ æ€»ä¹‹ï¼Œè°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„nextæ–¹æ³•ï¼Œå°±å¯ä»¥éå†äº‹å…ˆç»™å®šçš„æ•°æ®ç»“æ„ã€‚ å¯¹äºéå†å™¨å¯¹è±¡æ¥è¯´ï¼Œdone: falseå’Œvalue: undefinedå±æ€§éƒ½æ˜¯å¯ä»¥çœç•¥çš„ï¼Œå› æ­¤ä¸Šé¢çš„makeIteratorå‡½æ•°å¯ä»¥ç®€å†™æˆä¸‹é¢çš„å½¢å¼ã€‚ function makeIterator(array) { var nextIndex = 0; return { next: function() { return nextIndex &lt; array.length ? {value: array[nextIndex++]} : {done: true}; } }; } ç”±äºIteratoråªæ˜¯æŠŠæ¥å£è§„æ ¼åŠ åˆ°æ•°æ®ç»“æ„ä¹‹ä¸Šï¼Œæ‰€ä»¥ï¼Œéå†å™¨ä¸å®ƒæ‰€éå†çš„é‚£ä¸ªæ•°æ®ç»“æ„ï¼Œå®é™…ä¸Šæ˜¯åˆ†å¼€çš„ï¼Œå®Œå…¨å¯ä»¥å†™å‡ºæ²¡æœ‰å¯¹åº”æ•°æ®ç»“æ„çš„éå†å™¨å¯¹è±¡ï¼Œæˆ–è€…è¯´ç”¨éå†å™¨å¯¹è±¡æ¨¡æ‹Ÿå‡ºæ•°æ®ç»“æ„ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ— é™è¿è¡Œçš„éå†å™¨å¯¹è±¡çš„ä¾‹å­ã€‚ var it = idMaker(); it.next().value // &#39;0&#39; it.next().value // &#39;1&#39; it.next().value // &#39;2&#39; // ... function idMaker() { var index = 0; return { next: function() { return {value: index++, done: false}; } }; } ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œéå†å™¨ç”Ÿæˆå‡½æ•°idMakerï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼ˆå³æŒ‡é’ˆå¯¹è±¡ï¼‰ã€‚ä½†æ˜¯å¹¶æ²¡æœ‰å¯¹åº”çš„æ•°æ®ç»“æ„ï¼Œæˆ–è€…è¯´ï¼Œéå†å™¨å¯¹è±¡è‡ªå·±æè¿°äº†ä¸€ä¸ªæ•°æ®ç»“æ„å‡ºæ¥ã€‚ åœ¨ES6ä¸­ï¼Œæœ‰äº›æ•°æ®ç»“æ„åŸç”Ÿå…·å¤‡Iteratoræ¥å£ï¼ˆæ¯”å¦‚æ•°ç»„ï¼‰ï¼Œå³ä¸ç”¨ä»»ä½•å¤„ç†ï¼Œå°±å¯ä»¥è¢«for...ofå¾ªç¯éå†ï¼Œæœ‰äº›å°±ä¸è¡Œï¼ˆæ¯”å¦‚å¯¹è±¡ï¼‰ã€‚åŸå› åœ¨äºï¼Œè¿™äº›æ•°æ®ç»“æ„åŸç”Ÿéƒ¨ç½²äº†Symbol.iteratorå±æ€§ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œå¦å¤–ä¸€äº›æ•°æ®ç»“æ„æ²¡æœ‰ã€‚å‡¡æ˜¯éƒ¨ç½²äº†Symbol.iteratorå±æ€§çš„æ•°æ®ç»“æ„ï¼Œå°±ç§°ä¸ºéƒ¨ç½²äº†éå†å™¨æ¥å£ã€‚è°ƒç”¨è¿™ä¸ªæ¥å£ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚ å¦‚æœä½¿ç”¨TypeScriptçš„å†™æ³•ï¼Œéå†å™¨æ¥å£ï¼ˆIterableï¼‰ã€æŒ‡é’ˆå¯¹è±¡ï¼ˆIteratorï¼‰å’Œnextæ–¹æ³•è¿”å›å€¼çš„è§„æ ¼å¯ä»¥æè¿°å¦‚ä¸‹ã€‚ interface Iterable { [Symbol.iterator]() : Iterator, } interface Iterator { next(value?: any) : IterationResult, } interface IterationResult { value: any, done: boolean, } æ•°æ®ç»“æ„çš„é»˜è®¤Iteratoræ¥å£Iteratoræ¥å£çš„ç›®çš„ï¼Œå°±æ˜¯ä¸ºæ‰€æœ‰æ•°æ®ç»“æ„ï¼Œæä¾›äº†ä¸€ç§ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ï¼Œå³for...ofå¾ªç¯ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ã€‚å½“ä½¿ç”¨for...ofå¾ªç¯éå†æŸç§æ•°æ®ç»“æ„æ—¶ï¼Œè¯¥å¾ªç¯ä¼šè‡ªåŠ¨å»å¯»æ‰¾Iteratoræ¥å£ã€‚ ä¸€ç§æ•°æ®ç»“æ„åªè¦éƒ¨ç½²äº†Iteratoræ¥å£ï¼Œæˆ‘ä»¬å°±ç§°è¿™ç§æ•°æ®ç»“æ„æ˜¯â€å¯éå†çš„â€œï¼ˆiterableï¼‰ã€‚ ES6è§„å®šï¼Œé»˜è®¤çš„Iteratoræ¥å£éƒ¨ç½²åœ¨æ•°æ®ç»“æ„çš„Symbol.iteratorå±æ€§ï¼Œæˆ–è€…è¯´ï¼Œä¸€ä¸ªæ•°æ®ç»“æ„åªè¦å…·æœ‰Symbol.iteratorå±æ€§ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯â€œå¯éå†çš„â€ï¼ˆiterableï¼‰ã€‚Symbol.iteratorå±æ€§æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±æ˜¯å½“å‰æ•°æ®ç»“æ„é»˜è®¤çš„éå†å™¨ç”Ÿæˆå‡½æ•°ã€‚æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªéå†å™¨ã€‚è‡³äºå±æ€§åSymbol.iteratorï¼Œå®ƒæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿”å›Symbolå¯¹è±¡çš„iteratorå±æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªé¢„å®šä¹‰å¥½çš„ã€ç±»å‹ä¸ºSymbolçš„ç‰¹æ®Šå€¼ï¼Œæ‰€ä»¥è¦æ”¾åœ¨æ–¹æ‹¬å·å†…ã€‚ï¼ˆå‚è§Symbolä¸€ç« ï¼‰ã€‚ const obj = { [Symbol.iterator] : function () { return { next: function () { return { value: 1, done: true }; } }; } }; ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡objæ˜¯å¯éå†çš„ï¼ˆiterableï¼‰ï¼Œå› ä¸ºå…·æœ‰Symbol.iteratorå±æ€§ã€‚æ‰§è¡Œè¿™ä¸ªå±æ€§ï¼Œä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„æ ¹æœ¬ç‰¹å¾å°±æ˜¯å…·æœ‰nextæ–¹æ³•ã€‚æ¯æ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªä»£è¡¨å½“å‰æˆå‘˜çš„ä¿¡æ¯å¯¹è±¡ï¼Œå…·æœ‰valueå’Œdoneä¸¤ä¸ªå±æ€§ã€‚ åœ¨ES6ä¸­ï¼Œæœ‰ä¸‰ç±»æ•°æ®ç»“æ„åŸç”Ÿå…·å¤‡Iteratoræ¥å£ï¼šæ•°ç»„ã€æŸäº›ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€Setå’ŒMapç»“æ„ã€‚ let arr = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]; let iter = arr[Symbol.iterator](); iter.next() // { value: &#39;a&#39;, done: false } iter.next() // { value: &#39;b&#39;, done: false } iter.next() // { value: &#39;c&#39;, done: false } iter.next() // { value: undefined, done: true } ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡arræ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŸç”Ÿå°±å…·æœ‰éå†å™¨æ¥å£ï¼Œéƒ¨ç½²åœ¨arrçš„Symbol.iteratorå±æ€§ä¸Šé¢ã€‚æ‰€ä»¥ï¼Œè°ƒç”¨è¿™ä¸ªå±æ€§ï¼Œå°±å¾—åˆ°éå†å™¨å¯¹è±¡ã€‚ ä¸Šé¢æåˆ°ï¼ŒåŸç”Ÿå°±éƒ¨ç½²Iteratoræ¥å£çš„æ•°æ®ç»“æ„æœ‰ä¸‰ç±»ï¼Œå¯¹äºè¿™ä¸‰ç±»æ•°æ®ç»“æ„ï¼Œä¸ç”¨è‡ªå·±å†™éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œfor...ofå¾ªç¯ä¼šè‡ªåŠ¨éå†å®ƒä»¬ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå…¶ä»–æ•°æ®ç»“æ„ï¼ˆä¸»è¦æ˜¯å¯¹è±¡ï¼‰çš„Iteratoræ¥å£ï¼Œéƒ½éœ€è¦è‡ªå·±åœ¨Symbol.iteratorå±æ€§ä¸Šé¢éƒ¨ç½²ï¼Œè¿™æ ·æ‰ä¼šè¢«for...ofå¾ªç¯éå†ã€‚ å¯¹è±¡ï¼ˆObjectï¼‰ä¹‹æ‰€ä»¥æ²¡æœ‰é»˜è®¤éƒ¨ç½²Iteratoræ¥å£ï¼Œæ˜¯å› ä¸ºå¯¹è±¡çš„å“ªä¸ªå±æ€§å…ˆéå†ï¼Œå“ªä¸ªå±æ€§åéå†æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨æŒ‡å®šã€‚æœ¬è´¨ä¸Šï¼Œéå†å™¨æ˜¯ä¸€ç§çº¿æ€§å¤„ç†ï¼Œå¯¹äºä»»ä½•éçº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œéƒ¨ç½²éå†å™¨æ¥å£ï¼Œå°±ç­‰äºéƒ¨ç½²ä¸€ç§çº¿æ€§è½¬æ¢ã€‚ä¸è¿‡ï¼Œä¸¥æ ¼åœ°è¯´ï¼Œå¯¹è±¡éƒ¨ç½²éå†å™¨æ¥å£å¹¶ä¸æ˜¯å¾ˆå¿…è¦ï¼Œå› ä¸ºè¿™æ—¶å¯¹è±¡å®é™…ä¸Šè¢«å½“ä½œMapç»“æ„ä½¿ç”¨ï¼ŒES5æ²¡æœ‰Mapç»“æ„ï¼Œè€ŒES6åŸç”Ÿæä¾›äº†ã€‚ ä¸€ä¸ªå¯¹è±¡å¦‚æœè¦æœ‰å¯è¢«for...ofå¾ªç¯è°ƒç”¨çš„Iteratoræ¥å£ï¼Œå°±å¿…é¡»åœ¨Symbol.iteratorçš„å±æ€§ä¸Šéƒ¨ç½²éå†å™¨ç”Ÿæˆæ–¹æ³•ï¼ˆåŸå‹é“¾ä¸Šçš„å¯¹è±¡å…·æœ‰è¯¥æ–¹æ³•ä¹Ÿå¯ï¼‰ã€‚ class RangeIterator { constructor(start, stop) { this.value = start; this.stop = stop; } [Symbol.iterator]() { return this; } next() { var value = this.value; if (value &lt; this.stop) { this.value++; return {done: false, value: value}; } else { return {done: true, value: undefined}; } } } function range(start, stop) { return new RangeIterator(start, stop); } for (var value of range(0, 3)) { console.log(value); } ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªç±»éƒ¨ç½²Iteratoræ¥å£çš„å†™æ³•ã€‚Symbol.iteratorå±æ€§å¯¹åº”ä¸€ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œåè¿”å›å½“å‰å¯¹è±¡çš„éå†å™¨å¯¹è±¡ã€‚ ä¸‹é¢æ˜¯é€šè¿‡éå†å™¨å®ç°æŒ‡é’ˆç»“æ„çš„ä¾‹å­ã€‚ function Obj(value) { this.value = value; this.next = null; } Obj.prototype[Symbol.iterator] = function() { var iterator = { next: next }; var current = this; function next() { if (current) { var value = current.value; current = current.next; return { done: false, value: value }; } else { return { done: true }; } } return iterator; } var one = new Obj(1); var two = new Obj(2); var three = new Obj(3); one.next = two; two.next = three; for (var i of one){ console.log(i); } // 1 // 2 // 3 ä¸Šé¢ä»£ç é¦–å…ˆåœ¨æ„é€ å‡½æ•°çš„åŸå‹é“¾ä¸Šéƒ¨ç½²Symbol.iteratoræ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ä¼šè¿”å›éå†å™¨å¯¹è±¡iteratorï¼Œè°ƒç”¨è¯¥å¯¹è±¡çš„nextæ–¹æ³•ï¼Œåœ¨è¿”å›ä¸€ä¸ªå€¼çš„åŒæ—¶ï¼Œè‡ªåŠ¨å°†å†…éƒ¨æŒ‡é’ˆç§»åˆ°ä¸‹ä¸€ä¸ªå®ä¾‹ã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¸ºå¯¹è±¡æ·»åŠ Iteratoræ¥å£çš„ä¾‹å­ã€‚ let obj = { data: [ &#39;hello&#39;, &#39;world&#39; ], [Symbol.iterator]() { const self = this; let index = 0; return { next() { if (index &lt; self.data.length) { return { value: self.data[index++], done: false }; } else { return { value: undefined, done: true }; } } }; } }; å¯¹äºç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆå­˜åœ¨æ•°å€¼é”®åå’Œlengthå±æ€§ï¼‰ï¼Œéƒ¨ç½²Iteratoræ¥å£ï¼Œæœ‰ä¸€ä¸ªç®€ä¾¿æ–¹æ³•ï¼Œå°±æ˜¯Symbol.iteratoræ–¹æ³•ç›´æ¥å¼•ç”¨æ•°ç»„çš„Iteratoræ¥å£ã€‚ NodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator]; // æˆ–è€… NodeList.prototype[Symbol.iterator] = [][Symbol.iterator]; [...document.querySelectorAll(&#39;div&#39;)] // å¯ä»¥æ‰§è¡Œäº† ä¸‹é¢æ˜¯ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡è°ƒç”¨æ•°ç»„çš„Symbol.iteratoræ–¹æ³•çš„ä¾‹å­ã€‚ let iterable = { 0: &#39;a&#39;, 1: &#39;b&#39;, 2: &#39;c&#39;, length: 3, [Symbol.iterator]: Array.prototype[Symbol.iterator] }; for (let item of iterable) { console.log(item); // &#39;a&#39;, &#39;b&#39;, &#39;c&#39; } æ³¨æ„ï¼Œæ™®é€šå¯¹è±¡éƒ¨ç½²æ•°ç»„çš„Symbol.iteratoræ–¹æ³•ï¼Œå¹¶æ— æ•ˆæœã€‚ let iterable = { a: &#39;a&#39;, b: &#39;b&#39;, c: &#39;c&#39;, length: 3, [Symbol.iterator]: Array.prototype[Symbol.iterator] }; for (let item of iterable) { console.log(item); // undefined, undefined, undefined } å¦‚æœSymbol.iteratoræ–¹æ³•å¯¹åº”çš„ä¸æ˜¯éå†å™¨ç”Ÿæˆå‡½æ•°ï¼ˆå³ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼‰ï¼Œè§£é‡Šå¼•æ“å°†ä¼šæŠ¥é”™ã€‚ var obj = {}; obj[Symbol.iterator] = () =&gt; 1; [...obj] // TypeError: [] is not a function ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡objçš„Symbol.iteratoræ–¹æ³•å¯¹åº”çš„ä¸æ˜¯éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œå› æ­¤æŠ¥é”™ã€‚ æœ‰äº†éå†å™¨æ¥å£ï¼Œæ•°æ®ç»“æ„å°±å¯ä»¥ç”¨for...ofå¾ªç¯éå†ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨whileå¾ªç¯éå†ã€‚ var $iterator = ITERABLE[Symbol.iterator](); var $result = $iterator.next(); while (!$result.done) { var x = $result.value; // ... $result = $iterator.next(); } ä¸Šé¢ä»£ç ä¸­ï¼ŒITERABLEä»£è¡¨æŸç§å¯éå†çš„æ•°æ®ç»“æ„ï¼Œ$iteratoræ˜¯å®ƒçš„éå†å™¨å¯¹è±¡ã€‚éå†å™¨å¯¹è±¡æ¯æ¬¡ç§»åŠ¨æŒ‡é’ˆï¼ˆnextæ–¹æ³•ï¼‰ï¼Œéƒ½æ£€æŸ¥ä¸€ä¸‹è¿”å›å€¼çš„doneå±æ€§ï¼Œå¦‚æœéå†è¿˜æ²¡ç»“æŸï¼Œå°±ç§»åŠ¨éå†å™¨å¯¹è±¡çš„æŒ‡é’ˆåˆ°ä¸‹ä¸€æ­¥ï¼ˆnextæ–¹æ³•ï¼‰ï¼Œä¸æ–­å¾ªç¯ã€‚ è°ƒç”¨Iteratoræ¥å£çš„åœºåˆæœ‰ä¸€äº›åœºåˆä¼šé»˜è®¤è°ƒç”¨Iteratoræ¥å£ï¼ˆå³Symbol.iteratoræ–¹æ³•ï¼‰ï¼Œé™¤äº†ä¸‹æ–‡ä¼šä»‹ç»çš„for...ofå¾ªç¯ï¼Œè¿˜æœ‰å‡ ä¸ªåˆ«çš„åœºåˆã€‚ ï¼ˆ1ï¼‰è§£æ„èµ‹å€¼ å¯¹æ•°ç»„å’ŒSetç»“æ„è¿›è¡Œè§£æ„èµ‹å€¼æ—¶ï¼Œä¼šé»˜è®¤è°ƒç”¨Symbol.iteratoræ–¹æ³•ã€‚ let set = new Set().add(&#39;a&#39;).add(&#39;b&#39;).add(&#39;c&#39;); let [x,y] = set; // x=&#39;a&#39;; y=&#39;b&#39; let [first, ...rest] = set; // first=&#39;a&#39;; rest=[&#39;b&#39;,&#39;c&#39;]; ï¼ˆ2ï¼‰æ‰©å±•è¿ç®—ç¬¦ æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰ä¹Ÿä¼šè°ƒç”¨é»˜è®¤çš„iteratoræ¥å£ã€‚ // ä¾‹ä¸€ var str = &#39;hello&#39;; [...str] // [&#39;h&#39;,&#39;e&#39;,&#39;l&#39;,&#39;l&#39;,&#39;o&#39;] // ä¾‹äºŒ let arr = [&#39;b&#39;, &#39;c&#39;]; [&#39;a&#39;, ...arr, &#39;d&#39;] // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;] ä¸Šé¢ä»£ç çš„æ‰©å±•è¿ç®—ç¬¦å†…éƒ¨å°±è°ƒç”¨Iteratoræ¥å£ã€‚ å®é™…ä¸Šï¼Œè¿™æä¾›äº†ä¸€ç§ç®€ä¾¿æœºåˆ¶ï¼Œå¯ä»¥å°†ä»»ä½•éƒ¨ç½²äº†Iteratoræ¥å£çš„æ•°æ®ç»“æ„ï¼Œè½¬ä¸ºæ•°ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æŸä¸ªæ•°æ®ç»“æ„éƒ¨ç½²äº†Iteratoræ¥å£ï¼Œå°±å¯ä»¥å¯¹å®ƒä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œå°†å…¶è½¬ä¸ºæ•°ç»„ã€‚ let arr = [...iterable]; ï¼ˆ3ï¼‰yield* yield*åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå¯éå†çš„ç»“æ„ï¼Œå®ƒä¼šè°ƒç”¨è¯¥ç»“æ„çš„éå†å™¨æ¥å£ã€‚ let generator = function* () { yield 1; yield* [2,3,4]; yield 5; }; var iterator = generator(); iterator.next() // { value: 1, done: false } iterator.next() // { value: 2, done: false } iterator.next() // { value: 3, done: false } iterator.next() // { value: 4, done: false } iterator.next() // { value: 5, done: false } iterator.next() // { value: undefined, done: true } ï¼ˆ4ï¼‰å…¶ä»–åœºåˆ ç”±äºæ•°ç»„çš„éå†ä¼šè°ƒç”¨éå†å™¨æ¥å£ï¼Œæ‰€ä»¥ä»»ä½•æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°çš„åœºåˆï¼Œå…¶å®éƒ½è°ƒç”¨äº†éå†å™¨æ¥å£ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ã€‚ forâ€¦of Array.from() Map(), Set(), WeakMap(), WeakSet()ï¼ˆæ¯”å¦‚new Map([[&#39;a&#39;,1],[&#39;b&#39;,2]])ï¼‰ Promise.all() Promise.race() å­—ç¬¦ä¸²çš„Iteratoræ¥å£å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œä¹ŸåŸç”Ÿå…·æœ‰Iteratoræ¥å£ã€‚ var someString = &quot;hi&quot;; typeof someString[Symbol.iterator] // &quot;function&quot; var iterator = someString[Symbol.iterator](); iterator.next() // { value: &quot;h&quot;, done: false } iterator.next() // { value: &quot;i&quot;, done: false } iterator.next() // { value: undefined, done: true } ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨Symbol.iteratoræ–¹æ³•è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªéå†å™¨ä¸Šå¯ä»¥è°ƒç”¨nextæ–¹æ³•ï¼Œå®ç°å¯¹äºå­—ç¬¦ä¸²çš„éå†ã€‚ å¯ä»¥è¦†ç›–åŸç”Ÿçš„Symbol.iteratoræ–¹æ³•ï¼Œè¾¾åˆ°ä¿®æ”¹éå†å™¨è¡Œä¸ºçš„ç›®çš„ã€‚ var str = new String(&quot;hi&quot;); [...str] // [&quot;h&quot;, &quot;i&quot;] str[Symbol.iterator] = function() { return { next: function() { if (this._first) { this._first = false; return { value: &quot;bye&quot;, done: false }; } else { return { done: true }; } }, _first: true }; }; [...str] // [&quot;bye&quot;] str // &quot;hi&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²strçš„Symbol.iteratoræ–¹æ³•è¢«ä¿®æ”¹äº†ï¼Œæ‰€ä»¥æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰è¿”å›çš„å€¼å˜æˆäº†byeï¼Œè€Œå­—ç¬¦ä¸²æœ¬èº«è¿˜æ˜¯hiã€‚ Iteratoræ¥å£ä¸Generatorå‡½æ•°Symbol.iteratoræ–¹æ³•çš„æœ€ç®€å•å®ç°ï¼Œè¿˜æ˜¯ä½¿ç”¨ä¸‹ä¸€ç« è¦ä»‹ç»çš„Generatorå‡½æ•°ã€‚ var myIterable = {}; myIterable[Symbol.iterator] = function* () { yield 1; yield 2; yield 3; }; [...myIterable] // [1, 2, 3] // æˆ–è€…é‡‡ç”¨ä¸‹é¢çš„ç®€æ´å†™æ³• let obj = { * [Symbol.iterator]() { yield &#39;hello&#39;; yield &#39;world&#39;; } }; for (let x of obj) { console.log(x); } // hello // world ä¸Šé¢ä»£ç ä¸­ï¼ŒSymbol.iteratoræ–¹æ³•å‡ ä¹ä¸ç”¨éƒ¨ç½²ä»»ä½•ä»£ç ï¼Œåªè¦ç”¨yieldå‘½ä»¤ç»™å‡ºæ¯ä¸€æ­¥çš„è¿”å›å€¼å³å¯ã€‚ éå†å™¨å¯¹è±¡çš„return()ï¼Œthrow()éå†å™¨å¯¹è±¡é™¤äº†å…·æœ‰nextæ–¹æ³•ï¼Œè¿˜å¯ä»¥å…·æœ‰returnæ–¹æ³•å’Œthrowæ–¹æ³•ã€‚å¦‚æœä½ è‡ªå·±å†™éå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°ï¼Œé‚£ä¹ˆnextæ–¹æ³•æ˜¯å¿…é¡»éƒ¨ç½²çš„ï¼Œreturnæ–¹æ³•å’Œthrowæ–¹æ³•æ˜¯å¦éƒ¨ç½²æ˜¯å¯é€‰çš„ã€‚ returnæ–¹æ³•çš„ä½¿ç”¨åœºåˆæ˜¯ï¼Œå¦‚æœfor...ofå¾ªç¯æå‰é€€å‡ºï¼ˆé€šå¸¸æ˜¯å› ä¸ºå‡ºé”™ï¼Œæˆ–è€…æœ‰breakè¯­å¥æˆ–continueè¯­å¥ï¼‰ï¼Œå°±ä¼šè°ƒç”¨returnæ–¹æ³•ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡åœ¨å®Œæˆéå†å‰ï¼Œéœ€è¦æ¸…ç†æˆ–é‡Šæ”¾èµ„æºï¼Œå°±å¯ä»¥éƒ¨ç½²returnæ–¹æ³•ã€‚ function readLinesSync(file) { return { next() { if (file.isAtEndOfFile()) { file.close(); return { done: true }; } }, return() { file.close(); return { done: true }; }, }; } ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°readLinesSyncæ¥å—ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå…¶ä¸­é™¤äº†nextæ–¹æ³•ï¼Œè¿˜éƒ¨ç½²äº†returnæ–¹æ³•ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬è®©æ–‡ä»¶çš„éå†æå‰è¿”å›ï¼Œè¿™æ ·å°±ä¼šè§¦å‘æ‰§è¡Œreturnæ–¹æ³•ã€‚ for (let line of readLinesSync(fileName)) { console.log(line); break; } æ³¨æ„ï¼Œreturnæ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ˜¯Generatorè§„æ ¼å†³å®šçš„ã€‚ throwæ–¹æ³•ä¸»è¦æ˜¯é…åˆGeneratorå‡½æ•°ä½¿ç”¨ï¼Œä¸€èˆ¬çš„éå†å™¨å¯¹è±¡ç”¨ä¸åˆ°è¿™ä¸ªæ–¹æ³•ã€‚è¯·å‚é˜…ã€ŠGeneratorå‡½æ•°ã€‹ä¸€ç« ã€‚ forâ€¦ofå¾ªç¯ES6 å€Ÿé‰´ C++ã€Javaã€C# å’Œ Python è¯­è¨€ï¼Œå¼•å…¥äº†for...ofå¾ªç¯ï¼Œä½œä¸ºéå†æ‰€æœ‰æ•°æ®ç»“æ„çš„ç»Ÿä¸€çš„æ–¹æ³•ã€‚ ä¸€ä¸ªæ•°æ®ç»“æ„åªè¦éƒ¨ç½²äº†Symbol.iteratorå±æ€§ï¼Œå°±è¢«è§†ä¸ºå…·æœ‰iteratoræ¥å£ï¼Œå°±å¯ä»¥ç”¨for...ofå¾ªç¯éå†å®ƒçš„æˆå‘˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œfor...ofå¾ªç¯å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„Symbol.iteratoræ–¹æ³•ã€‚ for...ofå¾ªç¯å¯ä»¥ä½¿ç”¨çš„èŒƒå›´åŒ…æ‹¬æ•°ç»„ã€Set å’Œ Map ç»“æ„ã€æŸäº›ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆæ¯”å¦‚argumentså¯¹è±¡ã€DOM NodeList å¯¹è±¡ï¼‰ã€åæ–‡çš„ Generator å¯¹è±¡ï¼Œä»¥åŠå­—ç¬¦ä¸²ã€‚ æ•°ç»„æ•°ç»„åŸç”Ÿå…·å¤‡iteratoræ¥å£ï¼ˆå³é»˜è®¤éƒ¨ç½²äº†Symbol.iteratorå±æ€§ï¼‰ï¼Œfor...ofå¾ªç¯æœ¬è´¨ä¸Šå°±æ˜¯è°ƒç”¨è¿™ä¸ªæ¥å£äº§ç”Ÿçš„éå†å™¨ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç è¯æ˜ã€‚ const arr = [&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;]; for(let v of arr) { console.log(v); // red green blue } const obj = {}; obj[Symbol.iterator] = arr[Symbol.iterator].bind(arr); for(let v of obj) { console.log(v); // red green blue } ä¸Šé¢ä»£ç ä¸­ï¼Œç©ºå¯¹è±¡objéƒ¨ç½²äº†æ•°ç»„arrçš„Symbol.iteratorå±æ€§ï¼Œç»“æœobjçš„for...ofå¾ªç¯ï¼Œäº§ç”Ÿäº†ä¸arrå®Œå…¨ä¸€æ ·çš„ç»“æœã€‚ for...ofå¾ªç¯å¯ä»¥ä»£æ›¿æ•°ç»„å®ä¾‹çš„forEachæ–¹æ³•ã€‚ const arr = [&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;]; arr.forEach(function (element, index) { console.log(element); // red green blue console.log(index); // 0 1 2 }); JavaScriptåŸæœ‰çš„for...inå¾ªç¯ï¼Œåªèƒ½è·å¾—å¯¹è±¡çš„é”®åï¼Œä¸èƒ½ç›´æ¥è·å–é”®å€¼ã€‚ES6æä¾›for...ofå¾ªç¯ï¼Œå…è®¸éå†è·å¾—é”®å€¼ã€‚ var arr = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]; for (let a in arr) { console.log(a); // 0 1 2 3 } for (let a of arr) { console.log(a); // a b c d } ä¸Šé¢ä»£ç è¡¨æ˜ï¼Œfor...inå¾ªç¯è¯»å–é”®åï¼Œfor...ofå¾ªç¯è¯»å–é”®å€¼ã€‚å¦‚æœè¦é€šè¿‡for...ofå¾ªç¯ï¼Œè·å–æ•°ç»„çš„ç´¢å¼•ï¼Œå¯ä»¥å€ŸåŠ©æ•°ç»„å®ä¾‹çš„entriesæ–¹æ³•å’Œkeysæ–¹æ³•ï¼Œå‚è§ã€Šæ•°ç»„çš„æ‰©å±•ã€‹ç« èŠ‚ã€‚ for...ofå¾ªç¯è°ƒç”¨éå†å™¨æ¥å£ï¼Œæ•°ç»„çš„éå†å™¨æ¥å£åªè¿”å›å…·æœ‰æ•°å­—ç´¢å¼•çš„å±æ€§ã€‚è¿™ä¸€ç‚¹è·Ÿfor...inå¾ªç¯ä¹Ÿä¸ä¸€æ ·ã€‚ let arr = [3, 5, 7]; arr.foo = &#39;hello&#39;; for (let i in arr) { console.log(i); // &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;foo&quot; } for (let i of arr) { console.log(i); // &quot;3&quot;, &quot;5&quot;, &quot;7&quot; } ä¸Šé¢ä»£ç ä¸­ï¼Œfor...ofå¾ªç¯ä¸ä¼šè¿”å›æ•°ç»„arrçš„fooå±æ€§ã€‚ Setå’ŒMapç»“æ„Setå’ŒMapç»“æ„ä¹ŸåŸç”Ÿå…·æœ‰Iteratoræ¥å£ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨for...ofå¾ªç¯ã€‚ var engines = new Set([&quot;Gecko&quot;, &quot;Trident&quot;, &quot;Webkit&quot;, &quot;Webkit&quot;]); for (var e of engines) { console.log(e); } // Gecko // Trident // Webkit var es6 = new Map(); es6.set(&quot;edition&quot;, 6); es6.set(&quot;committee&quot;, &quot;TC39&quot;); es6.set(&quot;standard&quot;, &quot;ECMA-262&quot;); for (var [name, value] of es6) { console.log(name + &quot;: &quot; + value); } // edition: 6 // committee: TC39 // standard: ECMA-262 ä¸Šé¢ä»£ç æ¼”ç¤ºäº†å¦‚ä½•éå†Setç»“æ„å’ŒMapç»“æ„ã€‚å€¼å¾—æ³¨æ„çš„åœ°æ–¹æœ‰ä¸¤ä¸ªï¼Œé¦–å…ˆï¼Œéå†çš„é¡ºåºæ˜¯æŒ‰ç…§å„ä¸ªæˆå‘˜è¢«æ·»åŠ è¿›æ•°æ®ç»“æ„çš„é¡ºåºã€‚å…¶æ¬¡ï¼ŒSetç»“æ„éå†æ—¶ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå€¼ï¼Œè€ŒMapç»“æ„éå†æ—¶ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„ä¸¤ä¸ªæˆå‘˜åˆ†åˆ«ä¸ºå½“å‰Mapæˆå‘˜çš„é”®åå’Œé”®å€¼ã€‚ let map = new Map().set(&#39;a&#39;, 1).set(&#39;b&#39;, 2); for (let pair of map) { console.log(pair); } // [&#39;a&#39;, 1] // [&#39;b&#39;, 2] for (let [key, value] of map) { console.log(key + &#39; : &#39; + value); } // a : 1 // b : 2 è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„æœ‰äº›æ•°æ®ç»“æ„æ˜¯åœ¨ç°æœ‰æ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šï¼Œè®¡ç®—ç”Ÿæˆçš„ã€‚æ¯”å¦‚ï¼ŒES6çš„æ•°ç»„ã€Setã€Mapéƒ½éƒ¨ç½²äº†ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨åéƒ½è¿”å›éå†å™¨å¯¹è±¡ã€‚ entries() è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†[é”®å, é”®å€¼]ç»„æˆçš„æ•°ç»„ã€‚å¯¹äºæ•°ç»„ï¼Œé”®åå°±æ˜¯ç´¢å¼•å€¼ï¼›å¯¹äºSetï¼Œé”®åä¸é”®å€¼ç›¸åŒã€‚Mapç»“æ„çš„iteratoræ¥å£ï¼Œé»˜è®¤å°±æ˜¯è°ƒç”¨entriesæ–¹æ³•ã€‚ keys() è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†æ‰€æœ‰çš„é”®åã€‚ values() è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†æ‰€æœ‰çš„é”®å€¼ã€‚ è¿™ä¸‰ä¸ªæ–¹æ³•è°ƒç”¨åç”Ÿæˆçš„éå†å™¨å¯¹è±¡ï¼Œæ‰€éå†çš„éƒ½æ˜¯è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„ã€‚ let arr = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]; for (let pair of arr.entries()) { console.log(pair); } // [0, &#39;a&#39;] // [1, &#39;b&#39;] // [2, &#39;c&#39;] ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡åŒ…æ‹¬å¥½å‡ ç±»ã€‚ä¸‹é¢æ˜¯for...ofå¾ªç¯ç”¨äºå­—ç¬¦ä¸²ã€DOM NodeListå¯¹è±¡ã€argumentså¯¹è±¡çš„ä¾‹å­ã€‚ // å­—ç¬¦ä¸² let str = &quot;hello&quot;; for (let s of str) { console.log(s); // h e l l o } // DOM NodeListå¯¹è±¡ let paras = document.querySelectorAll(&quot;p&quot;); for (let p of paras) { p.classList.add(&quot;test&quot;); } // argumentså¯¹è±¡ function printArgs() { for (let x of arguments) { console.log(x); } } printArgs(&#39;a&#39;, &#39;b&#39;); // &#39;a&#39; // &#39;b&#39; å¯¹äºå­—ç¬¦ä¸²æ¥è¯´ï¼Œfor...ofå¾ªç¯è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯ä¼šæ­£ç¡®è¯†åˆ«32ä½UTF-16å­—ç¬¦ã€‚ for (let x of &#39;a\\uD83D\\uDC0A&#39;) { console.log(x); } // &#39;a&#39; // &#39;\\uD83D\\uDC0A&#39; å¹¶ä¸æ˜¯æ‰€æœ‰ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡éƒ½å…·æœ‰iteratoræ¥å£ï¼Œä¸€ä¸ªç®€ä¾¿çš„è§£å†³æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨Array.fromæ–¹æ³•å°†å…¶è½¬ä¸ºæ•°ç»„ã€‚ let arrayLike = { length: 2, 0: &#39;a&#39;, 1: &#39;b&#39; }; // æŠ¥é”™ for (let x of arrayLike) { console.log(x); } // æ­£ç¡® for (let x of Array.from(arrayLike)) { console.log(x); } å¯¹è±¡å¯¹äºæ™®é€šçš„å¯¹è±¡ï¼Œfor...ofç»“æ„ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œä¼šæŠ¥é”™ï¼Œå¿…é¡»éƒ¨ç½²äº†iteratoræ¥å£åæ‰èƒ½ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œè¿™æ ·æƒ…å†µä¸‹ï¼Œfor...inå¾ªç¯ä¾ç„¶å¯ä»¥ç”¨æ¥éå†é”®åã€‚ var es6 = { edition: 6, committee: &quot;TC39&quot;, standard: &quot;ECMA-262&quot; }; for (let e in es6) { console.log(e); } // edition // committee // standard for (let e of es6) { console.log(e); } // TypeError: es6 is not iterable ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¯¹äºæ™®é€šçš„å¯¹è±¡ï¼Œfor...inå¾ªç¯å¯ä»¥éå†é”®åï¼Œfor...ofå¾ªç¯ä¼šæŠ¥é”™ã€‚ ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ï¼Œä½¿ç”¨Object.keysæ–¹æ³•å°†å¯¹è±¡çš„é”®åç”Ÿæˆä¸€ä¸ªæ•°ç»„ï¼Œç„¶åéå†è¿™ä¸ªæ•°ç»„ã€‚ for (var key of Object.keys(someObject)) { console.log(key + &quot;: &quot; + someObject[key]); } åœ¨å¯¹è±¡ä¸Šéƒ¨ç½²iteratoræ¥å£çš„ä»£ç ï¼Œå‚è§æœ¬ç« å‰é¢éƒ¨åˆ†ã€‚ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹æ³•æ˜¯å°†æ•°ç»„çš„Symbol.iteratorå±æ€§ï¼Œç›´æ¥èµ‹å€¼ç»™å…¶ä»–å¯¹è±¡çš„Symbol.iteratorå±æ€§ã€‚æ¯”å¦‚ï¼Œæƒ³è¦è®©for...ofç¯éå†jQueryå¯¹è±¡ï¼Œåªè¦åŠ ä¸Šä¸‹é¢è¿™ä¸€è¡Œå°±å¯ä»¥äº†ã€‚ jQuery.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator]; å¦ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨Generatorå‡½æ•°å°†å¯¹è±¡é‡æ–°åŒ…è£…ä¸€ä¸‹ã€‚ function* entries(obj) { for (let key of Object.keys(obj)) { yield [key, obj[key]]; } } for (let [key, value] of entries(obj)) { console.log(key, &quot;-&gt;&quot;, value); } // a -&gt; 1 // b -&gt; 2 // c -&gt; 3 ä¸å…¶ä»–éå†è¯­æ³•çš„æ¯”è¾ƒä»¥æ•°ç»„ä¸ºä¾‹ï¼ŒJavaScriptæä¾›å¤šç§éå†è¯­æ³•ã€‚æœ€åŸå§‹çš„å†™æ³•å°±æ˜¯forå¾ªç¯ã€‚ for (var index = 0; index &lt; myArray.length; index++) { console.log(myArray[index]); } è¿™ç§å†™æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œå› æ­¤æ•°ç»„æä¾›å†…ç½®çš„forEachæ–¹æ³•ã€‚ myArray.forEach(function (value) { console.log(value); }); è¿™ç§å†™æ³•çš„é—®é¢˜åœ¨äºï¼Œæ— æ³•ä¸­é€”è·³å‡ºforEachå¾ªç¯ï¼Œbreakå‘½ä»¤æˆ–returnå‘½ä»¤éƒ½ä¸èƒ½å¥æ•ˆã€‚ for...inå¾ªç¯å¯ä»¥éå†æ•°ç»„çš„é”®åã€‚ for (var index in myArray) { console.log(myArray[index]); } forâ€¦inå¾ªç¯æœ‰å‡ ä¸ªç¼ºç‚¹ã€‚ æ•°ç»„çš„é”®åæ˜¯æ•°å­—ï¼Œä½†æ˜¯forâ€¦inå¾ªç¯æ˜¯ä»¥å­—ç¬¦ä¸²ä½œä¸ºé”®åâ€œ0â€ã€â€œ1â€ã€â€œ2â€ç­‰ç­‰ã€‚ forâ€¦inå¾ªç¯ä¸ä»…éå†æ•°å­—é”®åï¼Œè¿˜ä¼šéå†æ‰‹åŠ¨æ·»åŠ çš„å…¶ä»–é”®ï¼Œç”šè‡³åŒ…æ‹¬åŸå‹é“¾ä¸Šçš„é”®ã€‚ æŸäº›æƒ…å†µä¸‹ï¼Œforâ€¦inå¾ªç¯ä¼šä»¥ä»»æ„é¡ºåºéå†é”®åã€‚ æ€»ä¹‹ï¼Œfor...inå¾ªç¯ä¸»è¦æ˜¯ä¸ºéå†å¯¹è±¡è€Œè®¾è®¡çš„ï¼Œä¸é€‚ç”¨äºéå†æ•°ç»„ã€‚ for...ofå¾ªç¯ç›¸æ¯”ä¸Šé¢å‡ ç§åšæ³•ï¼Œæœ‰ä¸€äº›æ˜¾è‘—çš„ä¼˜ç‚¹ã€‚ for (let value of myArray) { console.log(value); } æœ‰ç€åŒforâ€¦inä¸€æ ·çš„ç®€æ´è¯­æ³•ï¼Œä½†æ˜¯æ²¡æœ‰forâ€¦iné‚£äº›ç¼ºç‚¹ã€‚ ä¸åŒç”¨äºforEachæ–¹æ³•ï¼Œå®ƒå¯ä»¥ä¸breakã€continueå’Œreturné…åˆä½¿ç”¨ã€‚ æä¾›äº†éå†æ‰€æœ‰æ•°æ®ç»“æ„çš„ç»Ÿä¸€æ“ä½œæ¥å£ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨breakè¯­å¥ï¼Œè·³å‡ºfor...ofå¾ªç¯çš„ä¾‹å­ã€‚ for (var n of fibonacci) { if (n &gt; 1000) break; console.log(n); } ä¸Šé¢çš„ä¾‹å­ï¼Œä¼šè¾“å‡ºæ–æ³¢çº³å¥‘æ•°åˆ—å°äºç­‰äº1000çš„é¡¹ã€‚å¦‚æœå½“å‰é¡¹å¤§äº1000ï¼Œå°±ä¼šä½¿ç”¨breakè¯­å¥è·³å‡ºfor...ofå¾ªç¯ã€‚ æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Iterator","slug":"Iterator","permalink":"https://microzz.com/tags/Iterator/"},{"name":"for","slug":"for","permalink":"https://microzz.com/tags/for/"}]},{"title":"Reflect","date":"2017-01-11T00:25:19.000Z","path":"2017/01/11/reflect/","text":"Reflectæ¦‚è¿°Reflectå¯¹è±¡ä¸Proxyå¯¹è±¡ä¸€æ ·ï¼Œä¹Ÿæ˜¯ ES6 ä¸ºäº†æ“ä½œå¯¹è±¡è€Œæä¾›çš„æ–° APIã€‚Reflectå¯¹è±¡çš„è®¾è®¡ç›®çš„æœ‰è¿™æ ·å‡ ä¸ªã€‚ ï¼ˆ1ï¼‰ å°†Objectå¯¹è±¡çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚Object.definePropertyï¼‰ï¼Œæ”¾åˆ°Reflectå¯¹è±¡ä¸Šã€‚ç°é˜¶æ®µï¼ŒæŸäº›æ–¹æ³•åŒæ—¶åœ¨Objectå’ŒReflectå¯¹è±¡ä¸Šéƒ¨ç½²ï¼Œæœªæ¥çš„æ–°æ–¹æ³•å°†åªéƒ¨ç½²åœ¨Reflectå¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»Reflectå¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ã€‚ ï¼ˆ2ï¼‰ ä¿®æ”¹æŸäº›Objectæ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚æ¯”å¦‚ï¼ŒObject.defineProperty(obj, name, desc)åœ¨æ— æ³•å®šä¹‰å±æ€§æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè€ŒReflect.defineProperty(obj, name, desc)åˆ™ä¼šè¿”å›falseã€‚ // è€å†™æ³• try { Object.defineProperty(target, property, attributes); // success } catch (e) { // failure } // æ–°å†™æ³• if (Reflect.defineProperty(target, property, attributes)) { // success } else { // failure } ï¼ˆ3ï¼‰ è®©Objectæ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æŸäº›Objectæ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚name in objå’Œdelete obj[name]ï¼Œè€ŒReflect.has(obj, name)å’ŒReflect.deleteProperty(obj, name)è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸ºã€‚ // è€å†™æ³• &#39;assign&#39; in Object // true // æ–°å†™æ³• Reflect.has(Object, &#39;assign&#39;) // true ï¼ˆ4ï¼‰Reflectå¯¹è±¡çš„æ–¹æ³•ä¸Proxyå¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œåªè¦æ˜¯Proxyå¯¹è±¡çš„æ–¹æ³•ï¼Œå°±èƒ½åœ¨Reflectå¯¹è±¡ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚è¿™å°±è®©Proxyå¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„Reflectæ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸ºï¼Œä½œä¸ºä¿®æ”¹è¡Œä¸ºçš„åŸºç¡€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡Proxyæ€ä¹ˆä¿®æ”¹é»˜è®¤è¡Œä¸ºï¼Œä½ æ€»å¯ä»¥åœ¨Reflectä¸Šè·å–é»˜è®¤è¡Œä¸ºã€‚ Proxy(target, { set: function(target, name, value, receiver) { var success = Reflect.set(target,name, value, receiver); if (success) { log(&#39;property &#39; + name + &#39; on &#39; + target + &#39; set to &#39; + value); } return success; } }); ä¸Šé¢ä»£ç ä¸­ï¼ŒProxyæ–¹æ³•æ‹¦æˆªtargetå¯¹è±¡çš„å±æ€§èµ‹å€¼è¡Œä¸ºã€‚å®ƒé‡‡ç”¨Reflect.setæ–¹æ³•å°†å€¼èµ‹å€¼ç»™å¯¹è±¡çš„å±æ€§ï¼Œç¡®ä¿å®ŒæˆåŸæœ‰çš„è¡Œä¸ºï¼Œç„¶åå†éƒ¨ç½²é¢å¤–çš„åŠŸèƒ½ã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ var loggedObj = new Proxy(obj, { get(target, name) { console.log(&#39;get&#39;, target, name); return Reflect.get(target, name); }, deleteProperty(target, name) { console.log(&#39;delete&#39; + name); return Reflect.deleteProperty(target, name); }, has(target, name) { console.log(&#39;has&#39; + name); return Reflect.has(target, name); } }); ä¸Šé¢ä»£ç ä¸­ï¼Œæ¯ä¸€ä¸ªProxyå¯¹è±¡çš„æ‹¦æˆªæ“ä½œï¼ˆgetã€deleteã€hasï¼‰ï¼Œå†…éƒ¨éƒ½è°ƒç”¨å¯¹åº”çš„Reflectæ–¹æ³•ï¼Œä¿è¯åŸç”Ÿè¡Œä¸ºèƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œã€‚æ·»åŠ çš„å·¥ä½œï¼Œå°±æ˜¯å°†æ¯ä¸€ä¸ªæ“ä½œè¾“å‡ºä¸€è¡Œæ—¥å¿—ã€‚ æœ‰äº†Reflectå¯¹è±¡ä»¥åï¼Œå¾ˆå¤šæ“ä½œä¼šæ›´æ˜“è¯»ã€‚ // è€å†™æ³• Function.prototype.apply.call(Math.floor, undefined, [1.75]) // 1 // æ–°å†™æ³• Reflect.apply(Math.floor, undefined, [1.75]) // 1 é™æ€æ–¹æ³•Reflectå¯¹è±¡ä¸€å…±æœ‰13ä¸ªé™æ€æ–¹æ³•ã€‚ Reflect.apply(target,thisArg,args) Reflect.construct(target,args) Reflect.get(target,name,receiver) Reflect.set(target,name,value,receiver) Reflect.defineProperty(target,name,desc) Reflect.deleteProperty(target,name) Reflect.has(target,name) Reflect.ownKeys(target) Reflect.isExtensible(target) Reflect.preventExtensions(target) Reflect.getOwnPropertyDescriptor(target, name) Reflect.getPrototypeOf(target) Reflect.setPrototypeOf(target, prototype) ä¸Šé¢è¿™äº›æ–¹æ³•çš„ä½œç”¨ï¼Œå¤§éƒ¨åˆ†ä¸Objectå¯¹è±¡çš„åŒåæ–¹æ³•çš„ä½œç”¨éƒ½æ˜¯ç›¸åŒçš„ï¼Œè€Œä¸”å®ƒä¸Proxyå¯¹è±¡çš„æ–¹æ³•æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ä¸‹é¢æ˜¯å¯¹å®ƒä»¬çš„è§£é‡Šã€‚ Reflect.get(target, name, receiver)Reflect.getæ–¹æ³•æŸ¥æ‰¾å¹¶è¿”å›targetå¯¹è±¡çš„nameå±æ€§ï¼Œå¦‚æœæ²¡æœ‰è¯¥å±æ€§ï¼Œåˆ™è¿”å›undefinedã€‚ var myObject = { foo: 1, bar: 2, get baz() { return this.foo + this.bar; }, } Reflect.get(myObject, &#39;foo&#39;) // 1 Reflect.get(myObject, &#39;bar&#39;) // 2 Reflect.get(myObject, &#39;baz&#39;) // 3 å¦‚æœnameå±æ€§éƒ¨ç½²äº†è¯»å–å‡½æ•°ï¼ˆgetterï¼‰ï¼Œåˆ™è¯»å–å‡½æ•°çš„thisç»‘å®šreceiverã€‚ var myObject = { foo: 1, bar: 2, get baz() { return this.foo + this.bar; }, }; var myReceiverObject = { foo: 4, bar: 4, }; Reflect.get(myObject, &#39;baz&#39;, myReceiverObject) // 8 å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼ŒReflect.getæ–¹æ³•ä¼šæŠ¥é”™ã€‚ Reflect.get(1, &#39;foo&#39;) // æŠ¥é”™ Reflect.get(false, &#39;foo&#39;) // æŠ¥é”™ Reflect.set(target, name, value, receiver)Reflect.setæ–¹æ³•è®¾ç½®targetå¯¹è±¡çš„nameå±æ€§ç­‰äºvalueã€‚ var myObject = { foo: 1, set bar(value) { return this.foo = value; }, } myObject.foo // 1 Reflect.set(myObject, &#39;foo&#39;, 2); myObject.foo // 2 Reflect.set(myObject, &#39;bar&#39;, 3) myObject.foo // 3 å¦‚æœnameå±æ€§è®¾ç½®äº†èµ‹å€¼å‡½æ•°ï¼Œåˆ™èµ‹å€¼å‡½æ•°çš„thisç»‘å®šreceiverã€‚ var myObject = { foo: 4, set bar(value) { return this.foo = value; }, }; var myReceiverObject = { foo: 0, }; Reflect.set(myObject, &#39;bar&#39;, 1, myReceiverObject); myObject.foo // 4 myReceiverObject.foo // 1 å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼ŒReflect.setä¼šæŠ¥é”™ã€‚ Reflect.set(1, &#39;foo&#39;, {}) // æŠ¥é”™ Reflect.set(false, &#39;foo&#39;, {}) // æŠ¥é”™ Reflect.has(obj, name)Reflect.hasæ–¹æ³•å¯¹åº”name in objé‡Œé¢çš„inè¿ç®—ç¬¦ã€‚ var myObject = { foo: 1, }; // æ—§å†™æ³• &#39;foo&#39; in myObject // true // æ–°å†™æ³• Reflect.has(myObject, &#39;foo&#39;) // true å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼ŒReflect.haså’Œinè¿ç®—ç¬¦éƒ½ä¼šæŠ¥é”™ã€‚ Reflect.deleteProperty(obj, name)Reflect.deletePropertyæ–¹æ³•ç­‰åŒäºdelete obj[name]ï¼Œç”¨äºåˆ é™¤å¯¹è±¡çš„å±æ€§ã€‚ const myObj = { foo: &#39;bar&#39; }; // æ—§å†™æ³• delete myObj.foo; // æ–°å†™æ³• Reflect.deleteProperty(myObj, &#39;foo&#39;); è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å¦‚æœåˆ é™¤æˆåŠŸï¼Œæˆ–è€…è¢«åˆ é™¤çš„å±æ€§ä¸å­˜åœ¨ï¼Œè¿”å›trueï¼›åˆ é™¤å¤±è´¥ï¼Œè¢«åˆ é™¤çš„å±æ€§ä¾ç„¶å­˜åœ¨ï¼Œè¿”å›falseã€‚ Reflect.construct(target, args)Reflect.constructæ–¹æ³•ç­‰åŒäºnew target(...args)ï¼Œè¿™æä¾›äº†ä¸€ç§ä¸ä½¿ç”¨newï¼Œæ¥è°ƒç”¨æ„é€ å‡½æ•°çš„æ–¹æ³•ã€‚ function Greeting(name) { this.name = name; } // new çš„å†™æ³• const instance = new Greeting(&#39;å¼ ä¸‰&#39;); // Reflect.construct çš„å†™æ³• const instance = Reflect.construct(Greeting, &#39;å¼ ä¸‰&#39;); Reflect.getPrototypeOf(obj)Reflect.getPrototypeOfæ–¹æ³•ç”¨äºè¯»å–å¯¹è±¡çš„__proto__å±æ€§ï¼Œå¯¹åº”Object.getPrototypeOf(obj)ã€‚ const myObj = new FancyThing(); // æ—§å†™æ³• Object.getPrototypeOf(myObj) === FancyThing.prototype; // æ–°å†™æ³• Reflect.getPrototypeOf(myObj) === FancyThing.prototype; Reflect.getPrototypeOfå’ŒObject.getPrototypeOfçš„ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼ˆåŒ…æ‹¬nullå’Œundefinedï¼‰ï¼ŒObject.getPrototypeOfä¼šå°†è¿™ä¸ªå‚æ•°è½¬ä¸ºå¯¹è±¡ï¼Œç„¶åå†è¿è¡Œï¼Œè€ŒReflect.getPrototypeOfä¼šæŠ¥é”™ã€‚ Object.getPrototypeOf(1) // undefined Reflect.getPrototypeOf(1) // æŠ¥é”™ Reflect.setPrototypeOf(obj, newProto)Reflect.setPrototypeOfæ–¹æ³•ç”¨äºè®¾ç½®å¯¹è±¡çš„__proto__å±æ€§ï¼Œå¯¹åº”Object.setPrototypeOf(obj, newProto)ã€‚ const myObj = new FancyThing(); // æ—§å†™æ³• Object.setPrototypeOf(myObj, OtherThing.prototype); // æ–°å†™æ³• Reflect.setPrototypeOf(myObj, OtherThing.prototype); å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼ŒReflect.setPrototypeOfå’ŒObject.setPrototypeOféƒ½ä¼šæŠ¥é”™ã€‚ Object.setPrototypeOf(1) // æŠ¥é”™ Reflect.setPrototypeOf(1) // æŠ¥é”™ Reflect.apply(func, thisArg, args)Reflect.applyæ–¹æ³•ç­‰åŒäºFunction.prototype.apply.call(func, thisArg, args)ï¼Œç”¨äºç»‘å®šthiså¯¹è±¡åæ‰§è¡Œç»™å®šå‡½æ•°ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœè¦ç»‘å®šä¸€ä¸ªå‡½æ•°çš„thiså¯¹è±¡ï¼Œå¯ä»¥è¿™æ ·å†™fn.apply(obj, args)ï¼Œä½†æ˜¯å¦‚æœå‡½æ•°å®šä¹‰äº†è‡ªå·±çš„applyæ–¹æ³•ï¼Œå°±åªèƒ½å†™æˆFunction.prototype.apply.call(fn, obj, args)ï¼Œé‡‡ç”¨Reflectå¯¹è±¡å¯ä»¥ç®€åŒ–è¿™ç§æ“ä½œã€‚ const ages = [11, 33, 12, 54, 18, 96]; // æ—§å†™æ³• const youngest = Math.min.apply(Math, ages); const oldest = Math.max.apply(Math, ages); const type = Object.prototype.toString.call(youngest); // æ–°å†™æ³• const youngest = Reflect.apply(Math.min, Math, ages); const oldest = Reflect.apply(Math.max, Math, ages); const type = Reflect.apply(Object.prototype.toString, youngest); Reflect.defineProperty(target, propertyKey, attributes)Reflect.definePropertyæ–¹æ³•åŸºæœ¬ç­‰åŒäºObject.definePropertyï¼Œç”¨æ¥ä¸ºå¯¹è±¡å®šä¹‰å±æ€§ã€‚æœªæ¥ï¼Œåè€…ä¼šè¢«é€æ¸åºŸé™¤ï¼Œè¯·ä»ç°åœ¨å¼€å§‹å°±ä½¿ç”¨Reflect.definePropertyä»£æ›¿å®ƒã€‚ function MyDate() { /*â€¦*/ } // æ—§å†™æ³• Object.defineProperty(MyDate, &#39;now&#39;, { value: () =&gt; new Date.now() }); // æ–°å†™æ³• Reflect.defineProperty(MyDate, &#39;now&#39;, { value: () =&gt; new Date.now() }); å¦‚æœReflect.definePropertyçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œå°±ä¼šæŠ›å‡ºé”™è¯¯ï¼Œæ¯”å¦‚Reflect.defineProperty(1, &#39;foo&#39;)ã€‚ Reflect.getOwnPropertyDescriptor(target, propertyKey)Reflect.getOwnPropertyDescriptoråŸºæœ¬ç­‰åŒäºObject.getOwnPropertyDescriptorï¼Œç”¨äºå¾—åˆ°æŒ‡å®šå±æ€§çš„æè¿°å¯¹è±¡ï¼Œå°†æ¥ä¼šæ›¿ä»£æ‰åè€…ã€‚ var myObject = {}; Object.defineProperty(myObject, &#39;hidden&#39;, { value: true, enumerable: false, }); // æ—§å†™æ³• var theDescriptor = Object.getOwnPropertyDescriptor(myObject, &#39;hidden&#39;); // æ–°å†™æ³• var theDescriptor = Reflect.getOwnPropertyDescriptor(myObject, &#39;hidden&#39;); Reflect.getOwnPropertyDescriptorå’ŒObject.getOwnPropertyDescriptorçš„ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼ŒObject.getOwnPropertyDescriptor(1, &#39;foo&#39;)ä¸æŠ¥é”™ï¼Œè¿”å›undefinedï¼Œè€ŒReflect.getOwnPropertyDescriptor(1, &#39;foo&#39;)ä¼šæŠ›å‡ºé”™è¯¯ï¼Œè¡¨ç¤ºå‚æ•°éæ³•ã€‚ Reflect.isExtensible (target)Reflect.isExtensibleæ–¹æ³•å¯¹åº”Object.isExtensibleï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å¯¹è±¡æ˜¯å¦å¯æ‰©å±•ã€‚ const myObject = {}; // æ—§å†™æ³• Object.isExtensible(myObject) // true // æ–°å†™æ³• Reflect.isExtensible(myObject) // true å¦‚æœå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼ŒObject.isExtensibleä¼šè¿”å›falseï¼Œå› ä¸ºéå¯¹è±¡æœ¬æ¥å°±æ˜¯ä¸å¯æ‰©å±•çš„ï¼Œè€ŒReflect.isExtensibleä¼šæŠ¥é”™ã€‚ Object.isExtensible(1) // false Reflect.isExtensible(1) // æŠ¥é”™ Reflect.preventExtensions(target)Reflect.preventExtensionså¯¹åº”Object.preventExtensionsæ–¹æ³•ï¼Œç”¨äºè®©ä¸€ä¸ªå¯¹è±¡å˜ä¸ºä¸å¯æ‰©å±•ã€‚å®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ“ä½œæˆåŠŸã€‚ var myObject = {}; // æ—§å†™æ³• Object.isExtensible(myObject) // true // æ–°å†™æ³• Reflect.preventExtensions(myObject) // true å¦‚æœå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼ŒObject.isExtensibleåœ¨ ES5 ç¯å¢ƒæŠ¥é”™ï¼Œåœ¨ ES6 ç¯å¢ƒè¿”å›è¿™ä¸ªå‚æ•°ï¼Œè€ŒReflect.preventExtensionsä¼šæŠ¥é”™ã€‚ // ES5 Object.preventExtensions(1) // æŠ¥é”™ // ES6 Object.preventExtensions(1) // 1 // æ–°å†™æ³• Reflect.preventExtensions(1) // æŠ¥é”™ Reflect.ownKeys (target)Reflect.ownKeysæ–¹æ³•ç”¨äºè¿”å›å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼ŒåŸºæœ¬ç­‰åŒäºObject.getOwnPropertyNamesä¸Object.getOwnPropertySymbolsä¹‹å’Œã€‚ var myObject = { foo: 1, bar: 2, [Symbol.for(&#39;baz&#39;)]: 3, [Symbol.for(&#39;bing&#39;)]: 4, }; // æ—§å†™æ³• Object.getOwnPropertyNames(myObject) // [&#39;foo&#39;, &#39;bar&#39;] Object.getOwnPropertySymbols(myObject) //[Symbol.for(&#39;baz&#39;), Symbol.for(&#39;bing&#39;)] // æ–°å†™æ³• Reflect.ownKeys(myObject) // [&#39;foo&#39;, &#39;bar&#39;, Symbol.for(&#39;baz&#39;), Symbol.for(&#39;bing&#39;)] å®ä¾‹ï¼šä½¿ç”¨ Proxy å®ç°è§‚å¯Ÿè€…æ¨¡å¼è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver modeï¼‰æŒ‡çš„æ˜¯å‡½æ•°è‡ªåŠ¨è§‚å¯Ÿæ•°æ®å¯¹è±¡ï¼Œä¸€æ—¦å¯¹è±¡æœ‰å˜åŒ–ï¼Œå‡½æ•°å°±ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚ const person = observable({ name: &#39;å¼ ä¸‰&#39;, age: 20 }); function print() { console.log(`${person.name}, ${person.age}`) } observe(print); person.name = &#39;æå››&#39;; // è¾“å‡º // æå››, 20 ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°æ®å¯¹è±¡personæ˜¯è§‚å¯Ÿç›®æ ‡ï¼Œå‡½æ•°printæ˜¯è§‚å¯Ÿè€…ã€‚ä¸€æ—¦æ•°æ®å¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œprintå°±ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚ ä¸‹é¢ï¼Œä½¿ç”¨ Proxy å†™ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼çš„æœ€ç®€å•å®ç°ï¼Œå³å®ç°observableå’Œobserveè¿™ä¸¤ä¸ªå‡½æ•°ã€‚æ€è·¯æ˜¯observableå‡½æ•°è¿”å›ä¸€ä¸ªåŸå§‹å¯¹è±¡çš„ Proxy ä»£ç†ï¼Œæ‹¦æˆªèµ‹å€¼æ“ä½œï¼Œè§¦å‘å……å½“è§‚å¯Ÿè€…çš„å„ä¸ªå‡½æ•°ã€‚ const queuedObservers = new Set(); const observe = fn =&gt; queuedObservers.add(fn); const observable = obj =&gt; new Proxy(obj, {set}); function set(target, key, value, receiver) { const result = Reflect.set(target, key, value, receiver); queuedObservers.forEach(observer =&gt; observer()); return result; } ä¸Šé¢ä»£ç ä¸­ï¼Œå…ˆå®šä¹‰äº†ä¸€ä¸ªSeté›†åˆï¼Œæ‰€æœ‰è§‚å¯Ÿè€…å‡½æ•°éƒ½æ”¾è¿›è¿™ä¸ªé›†åˆã€‚ç„¶åï¼Œobservableå‡½æ•°è¿”å›åŸå§‹å¯¹è±¡çš„ä»£ç†ï¼Œæ‹¦æˆªèµ‹å€¼æ“ä½œã€‚æ‹¦æˆªå‡½æ•°setä¹‹ä¸­ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰è§‚å¯Ÿè€…ã€‚","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Reflect","slug":"Reflect","permalink":"https://microzz.com/tags/Reflect/"}]},{"title":"Proxy","date":"2017-01-09T02:40:19.000Z","path":"2017/01/09/proxy/","text":"Proxyæ¦‚è¿°Proxy ç”¨äºä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œç­‰åŒäºåœ¨è¯­è¨€å±‚é¢åšå‡ºä¿®æ”¹ï¼Œæ‰€ä»¥å±äºä¸€ç§â€œå…ƒç¼–ç¨‹â€ï¼ˆmeta programmingï¼‰ï¼Œå³å¯¹ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç¨‹ã€‚ Proxy å¯ä»¥ç†è§£æˆï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚Proxy è¿™ä¸ªè¯çš„åŸæ„æ˜¯ä»£ç†ï¼Œç”¨åœ¨è¿™é‡Œè¡¨ç¤ºç”±å®ƒæ¥â€œä»£ç†â€æŸäº›æ“ä½œï¼Œå¯ä»¥è¯‘ä¸ºâ€œä»£ç†å™¨â€ã€‚ var obj = new Proxy({}, { get: function (target, key, receiver) { console.log(`getting ${key}!`); return Reflect.get(target, key, receiver); }, set: function (target, key, value, receiver) { console.log(`setting ${key}!`); return Reflect.set(target, key, value, receiver); } }); ä¸Šé¢ä»£ç å¯¹ä¸€ä¸ªç©ºå¯¹è±¡æ¶è®¾äº†ä¸€å±‚æ‹¦æˆªï¼Œé‡å®šä¹‰äº†å±æ€§çš„è¯»å–ï¼ˆgetï¼‰å’Œè®¾ç½®ï¼ˆsetï¼‰è¡Œä¸ºã€‚è¿™é‡Œæš‚æ—¶å…ˆä¸è§£é‡Šå…·ä½“çš„è¯­æ³•ï¼Œåªçœ‹è¿è¡Œç»“æœã€‚å¯¹è®¾ç½®äº†æ‹¦æˆªè¡Œä¸ºçš„å¯¹è±¡objï¼Œå»è¯»å†™å®ƒçš„å±æ€§ï¼Œå°±ä¼šå¾—åˆ°ä¸‹é¢çš„ç»“æœã€‚ obj.count = 1 // setting count! ++obj.count // getting count! // setting count! // 2 ä¸Šé¢ä»£ç è¯´æ˜ï¼ŒProxy å®é™…ä¸Šé‡è½½ï¼ˆoverloadï¼‰äº†ç‚¹è¿ç®—ç¬¦ï¼Œå³ç”¨è‡ªå·±çš„å®šä¹‰è¦†ç›–äº†è¯­è¨€çš„åŸå§‹å®šä¹‰ã€‚ ES6 åŸç”Ÿæä¾› Proxy æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Proxy å®ä¾‹ã€‚ var proxy = new Proxy(target, handler); Proxy å¯¹è±¡çš„æ‰€æœ‰ç”¨æ³•ï¼Œéƒ½æ˜¯ä¸Šé¢è¿™ç§å½¢å¼ï¼Œä¸åŒçš„åªæ˜¯handlerå‚æ•°çš„å†™æ³•ã€‚å…¶ä¸­ï¼Œnew Proxy()è¡¨ç¤ºç”Ÿæˆä¸€ä¸ªProxyå®ä¾‹ï¼Œtargetå‚æ•°è¡¨ç¤ºæ‰€è¦æ‹¦æˆªçš„ç›®æ ‡å¯¹è±¡ï¼Œhandlerå‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥å®šåˆ¶æ‹¦æˆªè¡Œä¸ºã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªæ‹¦æˆªè¯»å–å±æ€§è¡Œä¸ºçš„ä¾‹å­ã€‚ var proxy = new Proxy({}, { get: function(target, property) { return 35; } }); proxy.time // 35 proxy.name // 35 proxy.title // 35 ä¸Šé¢ä»£ç ä¸­ï¼Œä½œä¸ºæ„é€ å‡½æ•°ï¼ŒProxyæ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰€è¦ä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼ˆä¸Šä¾‹æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼‰ï¼Œå³å¦‚æœæ²¡æœ‰Proxyçš„ä»‹å…¥ï¼Œæ“ä½œåŸæ¥è¦è®¿é—®çš„å°±æ˜¯è¿™ä¸ªå¯¹è±¡ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œå¯¹äºæ¯ä¸€ä¸ªè¢«ä»£ç†çš„æ“ä½œï¼Œéœ€è¦æä¾›ä¸€ä¸ªå¯¹åº”çš„å¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†æ‹¦æˆªå¯¹åº”çš„æ“ä½œã€‚æ¯”å¦‚ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œé…ç½®å¯¹è±¡æœ‰ä¸€ä¸ªgetæ–¹æ³•ï¼Œç”¨æ¥æ‹¦æˆªå¯¹ç›®æ ‡å¯¹è±¡å±æ€§çš„è®¿é—®è¯·æ±‚ã€‚getæ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ç›®æ ‡å¯¹è±¡å’Œæ‰€è¦è®¿é—®çš„å±æ€§ã€‚å¯ä»¥çœ‹åˆ°ï¼Œç”±äºæ‹¦æˆªå‡½æ•°æ€»æ˜¯è¿”å›35ï¼Œæ‰€ä»¥è®¿é—®ä»»ä½•å±æ€§éƒ½å¾—åˆ°35ã€‚ æ³¨æ„ï¼Œè¦ä½¿å¾—Proxyèµ·ä½œç”¨ï¼Œå¿…é¡»é’ˆå¯¹Proxyå®ä¾‹ï¼ˆä¸Šä¾‹æ˜¯proxyå¯¹è±¡ï¼‰è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç›®æ ‡å¯¹è±¡ï¼ˆä¸Šä¾‹æ˜¯ç©ºå¯¹è±¡ï¼‰è¿›è¡Œæ“ä½œã€‚ å¦‚æœhandleræ²¡æœ‰è®¾ç½®ä»»ä½•æ‹¦æˆªï¼Œé‚£å°±ç­‰åŒäºç›´æ¥é€šå‘åŸå¯¹è±¡ã€‚ var target = {}; var handler = {}; var proxy = new Proxy(target, handler); proxy.a = &#39;b&#39;; target.a // &quot;b&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œhandleræ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œæ²¡æœ‰ä»»ä½•æ‹¦æˆªæ•ˆæœï¼Œè®¿é—®handlerå°±ç­‰åŒäºè®¿é—®targetã€‚ ä¸€ä¸ªæŠ€å·§æ˜¯å°† Proxy å¯¹è±¡ï¼Œè®¾ç½®åˆ°object.proxyå±æ€§ï¼Œä»è€Œå¯ä»¥åœ¨objectå¯¹è±¡ä¸Šè°ƒç”¨ã€‚ var object = { proxy: new Proxy(target, handler) }; Proxy å®ä¾‹ä¹Ÿå¯ä»¥ä½œä¸ºå…¶ä»–å¯¹è±¡çš„åŸå‹å¯¹è±¡ã€‚ var proxy = new Proxy({}, { get: function(target, property) { return 35; } }); let obj = Object.create(proxy); obj.time // 35 ä¸Šé¢ä»£ç ä¸­ï¼Œproxyå¯¹è±¡æ˜¯objå¯¹è±¡çš„åŸå‹ï¼Œobjå¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰timeå±æ€§ï¼Œæ‰€ä»¥æ ¹æ®åŸå‹é“¾ï¼Œä¼šåœ¨proxyå¯¹è±¡ä¸Šè¯»å–è¯¥å±æ€§ï¼Œå¯¼è‡´è¢«æ‹¦æˆªã€‚ åŒä¸€ä¸ªæ‹¦æˆªå™¨å‡½æ•°ï¼Œå¯ä»¥è®¾ç½®æ‹¦æˆªå¤šä¸ªæ“ä½œã€‚ var handler = { get: function(target, name) { if (name === &#39;prototype&#39;) { return Object.prototype; } return &#39;Hello, &#39; + name; }, apply: function(target, thisBinding, args) { return args[0]; }, construct: function(target, args) { return {value: args[1]}; } }; var fproxy = new Proxy(function(x, y) { return x + y; }, handler); fproxy(1, 2) // 1 new fproxy(1,2) // {value: 2} fproxy.prototype === Object.prototype // true fproxy.foo // &quot;Hello, foo&quot; ä¸‹é¢æ˜¯ Proxy æ”¯æŒçš„æ‹¦æˆªæ“ä½œä¸€è§ˆã€‚ å¯¹äºå¯ä»¥è®¾ç½®ã€ä½†æ²¡æœ‰è®¾ç½®æ‹¦æˆªçš„æ“ä½œï¼Œåˆ™ç›´æ¥è½åœ¨ç›®æ ‡å¯¹è±¡ä¸Šï¼ŒæŒ‰ç…§åŸå…ˆçš„æ–¹å¼äº§ç”Ÿç»“æœã€‚ ï¼ˆ1ï¼‰get(target, propKey, receiver) æ‹¦æˆªå¯¹è±¡å±æ€§çš„è¯»å–ï¼Œæ¯”å¦‚proxy.fooå’Œproxy[&#39;foo&#39;]ã€‚ æœ€åä¸€ä¸ªå‚æ•°receiveræ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯é€‰ï¼Œå‚è§ä¸‹é¢Reflect.getçš„éƒ¨åˆ†ã€‚ ï¼ˆ2ï¼‰set(target, propKey, value, receiver) æ‹¦æˆªå¯¹è±¡å±æ€§çš„è®¾ç½®ï¼Œæ¯”å¦‚proxy.foo = væˆ–proxy[&#39;foo&#39;] = vï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ ï¼ˆ3ï¼‰has(target, propKey) æ‹¦æˆªpropKey in proxyçš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ ï¼ˆ4ï¼‰deleteProperty(target, propKey) æ‹¦æˆªdelete proxy[propKey]çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ ï¼ˆ5ï¼‰ownKeys(target) æ‹¦æˆªObject.getOwnPropertyNames(proxy)ã€Object.getOwnPropertySymbols(proxy)ã€Object.keys(proxy)ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ç›®æ ‡å¯¹è±¡æ‰€æœ‰è‡ªèº«çš„å±æ€§çš„å±æ€§åï¼Œè€ŒObject.keys()çš„è¿”å›ç»“æœä»…åŒ…æ‹¬ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚ ï¼ˆ6ï¼‰getOwnPropertyDescriptor(target, propKey) æ‹¦æˆªObject.getOwnPropertyDescriptor(proxy, propKey)ï¼Œè¿”å›å±æ€§çš„æè¿°å¯¹è±¡ã€‚ ï¼ˆ7ï¼‰defineProperty(target, propKey, propDesc) æ‹¦æˆªObject.defineProperty(proxy, propKey, propDescï¼‰ã€Object.defineProperties(proxy, propDescs)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ ï¼ˆ8ï¼‰preventExtensions(target) æ‹¦æˆªObject.preventExtensions(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ ï¼ˆ9ï¼‰getPrototypeOf(target) æ‹¦æˆªObject.getPrototypeOf(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚ ï¼ˆ10ï¼‰isExtensible(target) æ‹¦æˆªObject.isExtensible(proxy)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ ï¼ˆ11ï¼‰setPrototypeOf(target, proto) æ‹¦æˆªObject.setPrototypeOf(proxy, proto)ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ å¦‚æœç›®æ ‡å¯¹è±¡æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸¤ç§é¢å¤–æ“ä½œå¯ä»¥æ‹¦æˆªã€‚ ï¼ˆ12ï¼‰apply(target, object, args) æ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºå‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚proxy(...args)ã€proxy.call(object, ...args)ã€proxy.apply(...)ã€‚ ï¼ˆ13ï¼‰construct(target, args) æ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚new proxy(...args)ã€‚ Proxy å®ä¾‹çš„æ–¹æ³•ä¸‹é¢æ˜¯ä¸Šé¢è¿™äº›æ‹¦æˆªæ–¹æ³•çš„è¯¦ç»†ä»‹ç»ã€‚ get()getæ–¹æ³•ç”¨äºæ‹¦æˆªæŸä¸ªå±æ€§çš„è¯»å–æ“ä½œã€‚ä¸Šæ–‡å·²ç»æœ‰ä¸€ä¸ªä¾‹å­ï¼Œä¸‹é¢æ˜¯å¦ä¸€ä¸ªæ‹¦æˆªè¯»å–æ“ä½œçš„ä¾‹å­ã€‚ var person = { name: &quot;å¼ ä¸‰&quot; }; var proxy = new Proxy(person, { get: function(target, property) { if (property in target) { return target[property]; } else { throw new ReferenceError(&quot;Property \\&quot;&quot; + property + &quot;\\&quot; does not exist.&quot;); } } }); proxy.name // &quot;å¼ ä¸‰&quot; proxy.age // æŠ›å‡ºä¸€ä¸ªé”™è¯¯ ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœè®¿é—®ç›®æ ‡å¯¹è±¡ä¸å­˜åœ¨çš„å±æ€§ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªæ‹¦æˆªå‡½æ•°ï¼Œè®¿é—®ä¸å­˜åœ¨çš„å±æ€§ï¼Œåªä¼šè¿”å›undefinedã€‚ getæ–¹æ³•å¯ä»¥ç»§æ‰¿ã€‚ let proto = new Proxy({}, { get(target, propertyKey, receiver) { console.log(&#39;GET &#39;+propertyKey); return target[propertyKey]; } }); let obj = Object.create(proto); obj.xxx // &quot;GET xxx&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œæ‹¦æˆªæ“ä½œå®šä¹‰åœ¨Prototypeå¯¹è±¡ä¸Šé¢ï¼Œæ‰€ä»¥å¦‚æœè¯»å–objå¯¹è±¡ç»§æ‰¿çš„å±æ€§æ—¶ï¼Œæ‹¦æˆªä¼šç”Ÿæ•ˆã€‚ ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨getæ‹¦æˆªï¼Œå®ç°æ•°ç»„è¯»å–è´Ÿæ•°çš„ç´¢å¼•ã€‚ function createArray(...elements) { let handler = { get(target, propKey, receiver) { let index = Number(propKey); if (index &lt; 0) { propKey = String(target.length + index); } return Reflect.get(target, propKey, receiver); } }; let target = []; target.push(...elements); return new Proxy(target, handler); } let arr = createArray(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;); arr[-1] // c ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„çš„ä½ç½®å‚æ•°æ˜¯-1ï¼Œå°±ä¼šè¾“å‡ºæ•°ç»„çš„å€’æ•°æœ€åä¸€ä¸ªæˆå‘˜ã€‚ åˆ©ç”¨ Proxyï¼Œå¯ä»¥å°†è¯»å–å±æ€§çš„æ“ä½œï¼ˆgetï¼‰ï¼Œè½¬å˜ä¸ºæ‰§è¡ŒæŸä¸ªå‡½æ•°ï¼Œä»è€Œå®ç°å±æ€§çš„é“¾å¼æ“ä½œã€‚ var pipe = (function () { return function (value) { var funcStack = []; var oproxy = new Proxy({} , { get : function (pipeObject, fnName) { if (fnName === &#39;get&#39;) { return funcStack.reduce(function (val, fn) { return fn(val); },value); } funcStack.push(window[fnName]); return oproxy; } }); return oproxy; } }()); var double = n =&gt; n * 2; var pow = n =&gt; n * n; var reverseInt = n =&gt; n.toString().split(&quot;&quot;).reverse().join(&quot;&quot;) | 0; pipe(3).double.pow.reverseInt.get; // 63 ä¸Šé¢ä»£ç è®¾ç½® Proxy ä»¥åï¼Œè¾¾åˆ°äº†å°†å‡½æ•°åé“¾å¼ä½¿ç”¨çš„æ•ˆæœã€‚ ä¸‹é¢çš„ä¾‹å­åˆ™æ˜¯åˆ©ç”¨getæ‹¦æˆªï¼Œå®ç°ä¸€ä¸ªç”Ÿæˆå„ç§DOMèŠ‚ç‚¹çš„é€šç”¨å‡½æ•°domã€‚ const dom = new Proxy({}, { get(target, property) { return function(attrs = {}, ...children) { const el = document.createElement(property); for (let prop of Object.keys(attrs)) { el.setAttribute(prop, attrs[prop]); } for (let child of children) { if (typeof child === &#39;string&#39;) { child = document.createTextNode(child); } el.appendChild(child); } return el; } } }); const el = dom.div({}, &#39;Hello, my name is &#39;, dom.a({href: &#39;//example.com&#39;}, &#39;Mark&#39;), &#39;. I like:&#39;, dom.ul({}, dom.li({}, &#39;The web&#39;), dom.li({}, &#39;Food&#39;), dom.li({}, &#39;â€¦actually that\\&#39;s it&#39;) ) ); document.body.appendChild(el); å¦‚æœä¸€ä¸ªå±æ€§ä¸å¯é…ç½®ï¼ˆconfigurableï¼‰å’Œä¸å¯å†™ï¼ˆwritableï¼‰ï¼Œåˆ™è¯¥å±æ€§ä¸èƒ½è¢«ä»£ç†ï¼Œé€šè¿‡ Proxy å¯¹è±¡è®¿é—®è¯¥å±æ€§ä¼šæŠ¥é”™ã€‚ const target = Object.defineProperties({}, { foo: { value: 123, writable: false, configurable: false }, }); const handler = { get(target, propKey) { return &#39;abc&#39;; } }; const proxy = new Proxy(target, handler); proxy.foo // TypeError: Invariant check failed set()setæ–¹æ³•ç”¨æ¥æ‹¦æˆªæŸä¸ªå±æ€§çš„èµ‹å€¼æ“ä½œã€‚ å‡å®šPersonå¯¹è±¡æœ‰ä¸€ä¸ªageå±æ€§ï¼Œè¯¥å±æ€§åº”è¯¥æ˜¯ä¸€ä¸ªä¸å¤§äº200çš„æ•´æ•°ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨Proxyä¿è¯ageçš„å±æ€§å€¼ç¬¦åˆè¦æ±‚ã€‚ let validator = { set: function(obj, prop, value) { if (prop === &#39;age&#39;) { if (!Number.isInteger(value)) { throw new TypeError(&#39;The age is not an integer&#39;); } if (value &gt; 200) { throw new RangeError(&#39;The age seems invalid&#39;); } } // å¯¹äºageä»¥å¤–çš„å±æ€§ï¼Œç›´æ¥ä¿å­˜ obj[prop] = value; } }; let person = new Proxy({}, validator); person.age = 100; person.age // 100 person.age = &#39;young&#39; // æŠ¥é”™ person.age = 300 // æŠ¥é”™ ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºè®¾ç½®äº†å­˜å€¼å‡½æ•°setï¼Œä»»ä½•ä¸ç¬¦åˆè¦æ±‚çš„ageå±æ€§èµ‹å€¼ï¼Œéƒ½ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¿™æ˜¯æ•°æ®éªŒè¯çš„ä¸€ç§å®ç°æ–¹æ³•ã€‚åˆ©ç”¨setæ–¹æ³•ï¼Œè¿˜å¯ä»¥æ•°æ®ç»‘å®šï¼Œå³æ¯å½“å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨æ›´æ–° DOMã€‚ æœ‰æ—¶ï¼Œæˆ‘ä»¬ä¼šåœ¨å¯¹è±¡ä¸Šé¢è®¾ç½®å†…éƒ¨å±æ€§ï¼Œå±æ€§åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä½¿ç”¨ä¸‹åˆ’çº¿å¼€å¤´ï¼Œè¡¨ç¤ºè¿™äº›å±æ€§ä¸åº”è¯¥è¢«å¤–éƒ¨ä½¿ç”¨ã€‚ç»“åˆgetå’Œsetæ–¹æ³•ï¼Œå°±å¯ä»¥åšåˆ°é˜²æ­¢è¿™äº›å†…éƒ¨å±æ€§è¢«å¤–éƒ¨è¯»å†™ã€‚ var handler = { get (target, key) { invariant(key, &#39;get&#39;); return target[key]; }, set (target, key, value) { invariant(key, &#39;set&#39;); target[key] = value; return true; } }; function invariant (key, action) { if (key[0] === &#39;_&#39;) { throw new Error(`Invalid attempt to ${action} private &quot;${key}&quot; property`); } } var target = {}; var proxy = new Proxy(target, handler); proxy._prop // Error: Invalid attempt to get private &quot;_prop&quot; property proxy._prop = &#39;c&#39; // Error: Invalid attempt to set private &quot;_prop&quot; property ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦è¯»å†™çš„å±æ€§åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ä¸‹åˆ’çº¿ï¼Œä¸€å¾‹æŠ›é”™ï¼Œä»è€Œè¾¾åˆ°ç¦æ­¢è¯»å†™å†…éƒ¨å±æ€§çš„ç›®çš„ã€‚ æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡è‡ªèº«çš„æŸä¸ªå±æ€§ï¼Œä¸å¯å†™ä¹Ÿä¸å¯é…ç½®ï¼Œé‚£ä¹ˆsetä¸å¾—æ”¹å˜è¿™ä¸ªå±æ€§çš„å€¼ï¼Œåªèƒ½è¿”å›åŒæ ·çš„å€¼ï¼Œå¦åˆ™æŠ¥é”™ã€‚ apply()applyæ–¹æ³•æ‹¦æˆªå‡½æ•°çš„è°ƒç”¨ã€callå’Œapplyæ“ä½œã€‚ applyæ–¹æ³•å¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ç›®æ ‡å¯¹è±¡ã€ç›®æ ‡å¯¹è±¡çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆthisï¼‰å’Œç›®æ ‡å¯¹è±¡çš„å‚æ•°æ•°ç»„ã€‚ var handler = { apply (target, ctx, args) { return Reflect.apply(...arguments); } }; ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ var target = function () { return &#39;I am the target&#39;; }; var handler = { apply: function () { return &#39;I am the proxy&#39;; } }; var p = new Proxy(target, handler); p() // &quot;I am the proxy&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡pæ˜¯ Proxy çš„å®ä¾‹ï¼Œå½“å®ƒä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼ˆp()ï¼‰ï¼Œå°±ä¼šè¢«applyæ–¹æ³•æ‹¦æˆªï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚ var twice = { apply (target, ctx, args) { return Reflect.apply(...arguments) * 2; } }; function sum (left, right) { return left + right; }; var proxy = new Proxy(sum, twice); proxy(1, 2) // 6 proxy.call(null, 5, 6) // 22 proxy.apply(null, [7, 8]) // 30 ä¸Šé¢ä»£ç ä¸­ï¼Œæ¯å½“æ‰§è¡Œproxyå‡½æ•°ï¼ˆç›´æ¥è°ƒç”¨æˆ–callå’Œapplyè°ƒç”¨ï¼‰ï¼Œå°±ä¼šè¢«applyæ–¹æ³•æ‹¦æˆªã€‚ å¦å¤–ï¼Œç›´æ¥è°ƒç”¨Reflect.applyæ–¹æ³•ï¼Œä¹Ÿä¼šè¢«æ‹¦æˆªã€‚ Reflect.apply(proxy, null, [9, 10]) // 38 has()hasæ–¹æ³•ç”¨æ¥æ‹¦æˆªHasPropertyæ“ä½œï¼Œå³åˆ¤æ–­å¯¹è±¡æ˜¯å¦å…·æœ‰æŸä¸ªå±æ€§æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šç”Ÿæ•ˆã€‚å…¸å‹çš„æ“ä½œå°±æ˜¯inè¿ç®—ç¬¦ã€‚ ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨hasæ–¹æ³•éšè—æŸäº›å±æ€§ï¼Œä¸è¢«inè¿ç®—ç¬¦å‘ç°ã€‚ var handler = { has (target, key) { if (key[0] === &#39;_&#39;) { return false; } return key in target; } }; var target = { _prop: &#39;foo&#39;, prop: &#39;foo&#39; }; var proxy = new Proxy(target, handler); &#39;_prop&#39; in proxy // false ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœåŸå¯¹è±¡çš„å±æ€§åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ä¸‹åˆ’çº¿ï¼Œproxy.haså°±ä¼šè¿”å›falseï¼Œä»è€Œä¸ä¼šè¢«inè¿ç®—ç¬¦å‘ç°ã€‚ å¦‚æœåŸå¯¹è±¡ä¸å¯é…ç½®æˆ–è€…ç¦æ­¢æ‰©å±•ï¼Œè¿™æ—¶hasæ‹¦æˆªä¼šæŠ¥é”™ã€‚ var obj = { a: 10 }; Object.preventExtensions(obj); var p = new Proxy(obj, { has: function(target, prop) { return false; } }); &#39;a&#39; in p // TypeError is thrown ä¸Šé¢ä»£ç ä¸­ï¼Œobjå¯¹è±¡ç¦æ­¢æ‰©å±•ï¼Œç»“æœä½¿ç”¨hasæ‹¦æˆªå°±ä¼šæŠ¥é”™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæŸä¸ªå±æ€§ä¸å¯é…ç½®ï¼ˆæˆ–è€…ç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•ï¼‰ï¼Œåˆ™hasæ–¹æ³•å°±ä¸å¾—â€œéšè—â€ï¼ˆå³è¿”å›falseï¼‰ç›®æ ‡å¯¹è±¡çš„è¯¥å±æ€§ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œhasæ–¹æ³•æ‹¦æˆªçš„æ˜¯HasPropertyæ“ä½œï¼Œè€Œä¸æ˜¯HasOwnPropertyæ“ä½œï¼Œå³hasæ–¹æ³•ä¸åˆ¤æ–­ä¸€ä¸ªå±æ€§æ˜¯å¯¹è±¡è‡ªèº«çš„å±æ€§ï¼Œè¿˜æ˜¯ç»§æ‰¿çš„å±æ€§ã€‚ å¦å¤–ï¼Œè™½ç„¶for...inå¾ªç¯ä¹Ÿç”¨åˆ°äº†inè¿ç®—ç¬¦ï¼Œä½†æ˜¯hasæ‹¦æˆªå¯¹for...inå¾ªç¯ä¸ç”Ÿæ•ˆã€‚ let stu1 = {name: &#39;å¼ ä¸‰&#39;, score: 59}; let stu2 = {name: &#39;æå››&#39;, score: 99}; let handler = { has(target, prop) { if (prop === &#39;score&#39; &amp;&amp; target[prop] &lt; 60) { console.log(`${target.name} ä¸åŠæ ¼`); return false; } return prop in target; } } let oproxy1 = new Proxy(stu1, handler); let oproxy2 = new Proxy(stu2, handler); &#39;score&#39; in oproxy1 // å¼ ä¸‰ ä¸åŠæ ¼ // false &#39;score&#39; in oproxy2 // true for (let a in oproxy1) { console.log(oproxy1[a]); } // å¼ ä¸‰ // 59 for (let b in oproxy2) { console.log(oproxy2[b]); } // æå›› // 99 ä¸Šé¢ä»£ç ä¸­ï¼Œhasæ‹¦æˆªåªå¯¹inå¾ªç¯ç”Ÿæ•ˆï¼Œå¯¹for...inå¾ªç¯ä¸ç”Ÿæ•ˆï¼Œå¯¼è‡´ä¸ç¬¦åˆè¦æ±‚çš„å±æ€§æ²¡æœ‰è¢«æ’é™¤åœ¨for...inå¾ªç¯ä¹‹å¤–ã€‚ construct()constructæ–¹æ³•ç”¨äºæ‹¦æˆªnewå‘½ä»¤ï¼Œä¸‹é¢æ˜¯æ‹¦æˆªå¯¹è±¡çš„å†™æ³•ã€‚ var handler = { construct (target, args, newTarget) { return new target(...args); } }; constructæ–¹æ³•å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ target: ç›®æ ‡å¯¹è±¡ argsï¼šæ„å»ºå‡½æ•°çš„å‚æ•°å¯¹è±¡ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ var p = new Proxy(function () {}, { construct: function(target, args) { console.log(&#39;called: &#39; + args.join(&#39;, &#39;)); return { value: args[0] * 10 }; } }); (new p(1)).value // &quot;called: 1&quot; // 10 constructæ–¹æ³•è¿”å›çš„å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ var p = new Proxy(function() {}, { construct: function(target, argumentsList) { return 1; } }); new p() // æŠ¥é”™ deleteProperty()deletePropertyæ–¹æ³•ç”¨äºæ‹¦æˆªdeleteæ“ä½œï¼Œå¦‚æœè¿™ä¸ªæ–¹æ³•æŠ›å‡ºé”™è¯¯æˆ–è€…è¿”å›falseï¼Œå½“å‰å±æ€§å°±æ— æ³•è¢«deleteå‘½ä»¤åˆ é™¤ã€‚ var handler = { deleteProperty (target, key) { invariant(key, &#39;delete&#39;); return true; } }; function invariant (key, action) { if (key[0] === &#39;_&#39;) { throw new Error(`Invalid attempt to ${action} private &quot;${key}&quot; property`); } } var target = { _prop: &#39;foo&#39; }; var proxy = new Proxy(target, handler); delete proxy._prop // Error: Invalid attempt to delete private &quot;_prop&quot; property ä¸Šé¢ä»£ç ä¸­ï¼ŒdeletePropertyæ–¹æ³•æ‹¦æˆªäº†deleteæ“ä½œç¬¦ï¼Œåˆ é™¤ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºä¸‹åˆ’çº¿çš„å±æ€§ä¼šæŠ¥é”™ã€‚ æ³¨æ„ï¼Œç›®æ ‡å¯¹è±¡è‡ªèº«çš„ä¸å¯é…ç½®ï¼ˆconfigurableï¼‰çš„å±æ€§ï¼Œä¸èƒ½è¢«deletePropertyæ–¹æ³•åˆ é™¤ï¼Œå¦åˆ™æŠ¥é”™ã€‚ defineProperty()definePropertyæ–¹æ³•æ‹¦æˆªäº†Object.definePropertyæ“ä½œã€‚ var handler = { defineProperty (target, key, descriptor) { return false; } }; var target = {}; var proxy = new Proxy(target, handler); proxy.foo = &#39;bar&#39; // TypeError: proxy defineProperty handler returned false for property &#39;&quot;foo&quot;&#39; ä¸Šé¢ä»£ç ä¸­ï¼ŒdefinePropertyæ–¹æ³•è¿”å›falseï¼Œå¯¼è‡´æ·»åŠ æ–°å±æ€§ä¼šæŠ›å‡ºé”™è¯¯ã€‚ æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•ï¼ˆextensibleï¼‰ï¼Œåˆ™definePropertyä¸èƒ½å¢åŠ ç›®æ ‡å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å±æ€§ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚å¦å¤–ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡çš„æŸä¸ªå±æ€§ä¸å¯å†™ï¼ˆwritableï¼‰æˆ–ä¸å¯é…ç½®ï¼ˆconfigurableï¼‰ï¼Œåˆ™definePropertyæ–¹æ³•ä¸å¾—æ”¹å˜è¿™ä¸¤ä¸ªè®¾ç½®ã€‚ getOwnPropertyDescriptor()getOwnPropertyDescriptoræ–¹æ³•æ‹¦æˆªObject.getOwnPropertyDescriptorï¼Œè¿”å›ä¸€ä¸ªå±æ€§æè¿°å¯¹è±¡æˆ–è€…undefinedã€‚ var handler = { getOwnPropertyDescriptor (target, key) { if (key[0] === &#39;_&#39;) { return; } return Object.getOwnPropertyDescriptor(target, key); } }; var target = { _foo: &#39;bar&#39;, baz: &#39;tar&#39; }; var proxy = new Proxy(target, handler); Object.getOwnPropertyDescriptor(proxy, &#39;wat&#39;) // undefined Object.getOwnPropertyDescriptor(proxy, &#39;_foo&#39;) // undefined Object.getOwnPropertyDescriptor(proxy, &#39;baz&#39;) // { value: &#39;tar&#39;, writable: true, enumerable: true, configurable: true } ä¸Šé¢ä»£ç ä¸­ï¼Œhandler.getOwnPropertyDescriptoræ–¹æ³•å¯¹äºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºä¸‹åˆ’çº¿çš„å±æ€§åä¼šè¿”å›undefinedã€‚ getPrototypeOf()getPrototypeOfæ–¹æ³•ä¸»è¦ç”¨æ¥æ‹¦æˆªObject.getPrototypeOf()è¿ç®—ç¬¦ï¼Œä»¥åŠå…¶ä»–ä¸€äº›æ“ä½œã€‚ Object.prototype.__proto__ Object.prototype.isPrototypeOf() Object.getPrototypeOf() Reflect.getPrototypeOf() instanceofè¿ç®—ç¬¦ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ var proto = {}; var p = new Proxy({}, { getPrototypeOf(target) { return proto; } }); Object.getPrototypeOf(p) === proto // true ä¸Šé¢ä»£ç ä¸­ï¼ŒgetPrototypeOfæ–¹æ³•æ‹¦æˆªObject.getPrototypeOf()ï¼Œè¿”å›protoå¯¹è±¡ã€‚ æ³¨æ„ï¼ŒgetPrototypeOfæ–¹æ³•çš„è¿”å›å€¼å¿…é¡»æ˜¯å¯¹è±¡æˆ–è€…nullï¼Œå¦åˆ™æŠ¥é”™ã€‚å¦å¤–ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•ï¼ˆextensibleï¼‰ï¼Œ getPrototypeOfæ–¹æ³•å¿…é¡»è¿”å›ç›®æ ‡å¯¹è±¡çš„åŸå‹å¯¹è±¡ã€‚ isExtensible()isExtensibleæ–¹æ³•æ‹¦æˆªObject.isExtensibleæ“ä½œã€‚ var p = new Proxy({}, { isExtensible: function(target) { console.log(&quot;called&quot;); return true; } }); Object.isExtensible(p) // &quot;called&quot; // true ä¸Šé¢ä»£ç è®¾ç½®äº†isExtensibleæ–¹æ³•ï¼Œåœ¨è°ƒç”¨Object.isExtensibleæ—¶ä¼šè¾“å‡ºcalledã€‚ æ³¨æ„ï¼Œè¯¥æ–¹æ³•åªèƒ½è¿”å›å¸ƒå°”å€¼ï¼Œå¦åˆ™è¿”å›å€¼ä¼šè¢«è‡ªåŠ¨è½¬ä¸ºå¸ƒå°”å€¼ã€‚ è¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªå¼ºé™åˆ¶ï¼Œå®ƒçš„è¿”å›å€¼å¿…é¡»ä¸ç›®æ ‡å¯¹è±¡çš„isExtensibleå±æ€§ä¿æŒä¸€è‡´ï¼Œå¦åˆ™å°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚ Object.isExtensible(proxy) === Object.isExtensible(target) ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ var p = new Proxy({}, { isExtensible: function(target) { return false; } }); Object.isExtensible(p) // æŠ¥é”™ ownKeys()ownKeysæ–¹æ³•ç”¨æ¥æ‹¦æˆªä»¥ä¸‹æ“ä½œã€‚ Object.getOwnPropertyNames() Object.getOwnPropertySymbols() Object.keys() ä¸‹é¢æ˜¯æ‹¦æˆªObject.keys()çš„ä¾‹å­ã€‚ let target = { a: 1, b: 2, c: 3 }; let handler = { ownKeys(target) { return [&#39;a&#39;]; } }; let proxy = new Proxy(target, handler); Object.keys(proxy) // [ &#39;a&#39; ] ä¸Šé¢ä»£ç æ‹¦æˆªäº†å¯¹äºtargetå¯¹è±¡çš„Object.keys()æ“ä½œï¼Œåªè¿”å›aã€bã€cä¸‰ä¸ªå±æ€§ä¹‹ä¸­çš„aå±æ€§ã€‚ ä¸‹é¢çš„ä¾‹å­æ˜¯æ‹¦æˆªç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºä¸‹åˆ’çº¿çš„å±æ€§åã€‚ let target = { _bar: &#39;foo&#39;, _prop: &#39;bar&#39;, prop: &#39;baz&#39; }; let handler = { ownKeys (target) { return Reflect.ownKeys(target).filter(key =&gt; key[0] !== &#39;_&#39;); } }; let proxy = new Proxy(target, handler); for (let key of Object.keys(proxy)) { console.log(target[key]); } // &quot;baz&quot; æ³¨æ„ï¼Œä½¿ç”¨Object.keysæ–¹æ³•æ—¶ï¼Œæœ‰ä¸‰ç±»å±æ€§ä¼šè¢«ownKeysæ–¹æ³•è‡ªåŠ¨è¿‡æ»¤ï¼Œä¸ä¼šè¿”å›ã€‚ ç›®æ ‡å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å±æ€§ å±æ€§åä¸º Symbol å€¼ ä¸å¯éå†ï¼ˆenumerableï¼‰çš„å±æ€§ let target = { a: 1, b: 2, c: 3, [Symbol.for(&#39;secret&#39;)]: &#39;4&#39;, }; Object.defineProperty(target, &#39;key&#39;, { enumerable: false, configurable: true, writable: true, value: &#39;static&#39; }); let handler = { ownKeys(target) { return [&#39;a&#39;, &#39;d&#39;, Symbol.for(&#39;secret&#39;), &#39;key&#39;]; } }; let proxy = new Proxy(target, handler); Object.keys(proxy) // [&#39;a&#39;] ä¸Šé¢ä»£ç ä¸­ï¼ŒownKeysæ–¹æ³•ä¹‹ä¸­ï¼Œæ˜¾å¼è¿”å›ä¸å­˜åœ¨çš„å±æ€§ï¼ˆdï¼‰ã€Symbol å€¼ï¼ˆSymbol.for(&#39;secret&#39;)ï¼‰ã€ä¸å¯éå†çš„å±æ€§ï¼ˆkeyï¼‰ï¼Œç»“æœéƒ½è¢«è‡ªåŠ¨è¿‡æ»¤æ‰ã€‚ ownKeysæ–¹æ³•è¿˜å¯ä»¥æ‹¦æˆªObject.getOwnPropertyNames()ã€‚ var p = new Proxy({}, { ownKeys: function(target) { return [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]; } }); Object.getOwnPropertyNames(p) // [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39; ] ownKeysæ–¹æ³•è¿”å›çš„æ•°ç»„æˆå‘˜ï¼Œåªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ– Symbol å€¼ã€‚å¦‚æœæœ‰å…¶ä»–ç±»å‹çš„å€¼ï¼Œæˆ–è€…è¿”å›çš„æ ¹æœ¬ä¸æ˜¯æ•°ç»„ï¼Œå°±ä¼šæŠ¥é”™ã€‚ var obj = {}; var p = new Proxy(obj, { ownKeys: function(target) { return [123, true, undefined, null, {}, []]; } }); Object.getOwnPropertyNames(p) // Uncaught TypeError: 123 is not a valid property name ä¸Šé¢ä»£ç ä¸­ï¼ŒownKeysæ–¹æ³•è™½ç„¶è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯æ¯ä¸€ä¸ªæ•°ç»„æˆå‘˜éƒ½ä¸æ˜¯å­—ç¬¦ä¸²æˆ– Symbol å€¼ï¼Œå› æ­¤å°±æŠ¥é”™äº†ã€‚ å¦‚æœç›®æ ‡å¯¹è±¡è‡ªèº«åŒ…å«ä¸å¯é…ç½®çš„å±æ€§ï¼Œåˆ™è¯¥å±æ€§å¿…é¡»è¢«ownKeysæ–¹æ³•è¿”å›ï¼Œå¦åˆ™æŠ¥é”™ã€‚ var obj = {}; Object.defineProperty(obj, &#39;a&#39;, { configurable: false, enumerable: true, value: 10 } ); var p = new Proxy(obj, { ownKeys: function(target) { return [&#39;b&#39;]; } }); Object.getOwnPropertyNames(p) // Uncaught TypeError: &#39;ownKeys&#39; on proxy: trap result did not include &#39;a&#39; ä¸Šé¢ä»£ç ä¸­ï¼Œobjå¯¹è±¡çš„aå±æ€§æ˜¯ä¸å¯é…ç½®çš„ï¼Œè¿™æ—¶ownKeysæ–¹æ³•è¿”å›çš„æ•°ç»„ä¹‹ä¸­ï¼Œå¿…é¡»åŒ…å«aï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ å¦å¤–ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡æ˜¯ä¸å¯æ‰©å±•çš„ï¼ˆnon-extensitionï¼‰ï¼Œè¿™æ—¶ownKeysæ–¹æ³•è¿”å›çš„æ•°ç»„ä¹‹ä¸­ï¼Œå¿…é¡»åŒ…å«åŸå¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œä¸”ä¸èƒ½åŒ…å«å¤šä½™çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™ã€‚ var obj = { a: 1 }; Object.preventExtensions(obj); var p = new Proxy(obj, { ownKeys: function(target) { return [&#39;a&#39;, &#39;b&#39;]; } }); Object.getOwnPropertyNames(p) // Uncaught TypeError: &#39;ownKeys&#39; on proxy: trap returned extra keys but proxy target is non-extensible ä¸Šé¢ä»£ç ä¸­ï¼ŒObjå¯¹è±¡æ˜¯ä¸å¯æ‰©å±•çš„ï¼Œè¿™æ—¶ownKeysæ–¹æ³•è¿”å›çš„æ•°ç»„ä¹‹ä¸­ï¼ŒåŒ…å«äº†objå¯¹è±¡çš„å¤šä½™å±æ€§bï¼Œæ‰€ä»¥å¯¼è‡´äº†æŠ¥é”™ã€‚ preventExtensions()preventExtensionsæ–¹æ³•æ‹¦æˆªObject.preventExtensions()ã€‚è¯¥æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦åˆ™ä¼šè¢«è‡ªåŠ¨è½¬ä¸ºå¸ƒå°”å€¼ã€‚ è¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªé™åˆ¶ï¼Œåªæœ‰ç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•æ—¶ï¼ˆå³Object.isExtensible(proxy)ä¸ºfalseï¼‰ï¼Œproxy.preventExtensionsæ‰èƒ½è¿”å›trueï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ var p = new Proxy({}, { preventExtensions: function(target) { return true; } }); Object.preventExtensions(p) // æŠ¥é”™ ä¸Šé¢ä»£ç ä¸­ï¼Œproxy.preventExtensionsæ–¹æ³•è¿”å›trueï¼Œä½†è¿™æ—¶Object.isExtensible(proxy)ä¼šè¿”å›trueï¼Œå› æ­¤æŠ¥é”™ã€‚ ä¸ºäº†é˜²æ­¢å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œé€šå¸¸è¦åœ¨proxy.preventExtensionsæ–¹æ³•é‡Œé¢ï¼Œè°ƒç”¨ä¸€æ¬¡Object.preventExtensionsã€‚ var p = new Proxy({}, { preventExtensions: function(target) { console.log(&#39;called&#39;); Object.preventExtensions(target); return true; } }); Object.preventExtensions(p) // &quot;called&quot; // true setPrototypeOf()setPrototypeOfæ–¹æ³•ä¸»è¦ç”¨æ¥æ‹¦æˆªObject.setPrototypeOfæ–¹æ³•ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ var handler = { setPrototypeOf (target, proto) { throw new Error(&#39;Changing the prototype is forbidden&#39;); } }; var proto = {}; var target = function () {}; var proxy = new Proxy(target, handler); proxy.setPrototypeOf(proxy, proto); // Error: Changing the prototype is forbidden ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦ä¿®æ”¹targetçš„åŸå‹å¯¹è±¡ï¼Œå°±ä¼šæŠ¥é”™ã€‚ æ³¨æ„ï¼Œè¯¥æ–¹æ³•åªèƒ½è¿”å›å¸ƒå°”å€¼ï¼Œå¦åˆ™ä¼šè¢«è‡ªåŠ¨è½¬ä¸ºå¸ƒå°”å€¼ã€‚å¦å¤–ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•ï¼ˆextensibleï¼‰ï¼ŒsetPrototypeOfæ–¹æ³•ä¸å¾—æ”¹å˜ç›®æ ‡å¯¹è±¡çš„åŸå‹ã€‚ Proxy.revocable()Proxy.revocableæ–¹æ³•è¿”å›ä¸€ä¸ªå¯å–æ¶ˆçš„ Proxy å®ä¾‹ã€‚ let target = {}; let handler = {}; let {proxy, revoke} = Proxy.revocable(target, handler); proxy.foo = 123; proxy.foo // 123 revoke(); proxy.foo // TypeError: Revoked Proxy.revocableæ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„proxyå±æ€§æ˜¯Proxyå®ä¾‹ï¼Œrevokeå±æ€§æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥å–æ¶ˆProxyå®ä¾‹ã€‚ä¸Šé¢ä»£ç ä¸­ï¼Œå½“æ‰§è¡Œrevokeå‡½æ•°ä¹‹åï¼Œå†è®¿é—®Proxyå®ä¾‹ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ Proxy.revocableçš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯æ˜¯ï¼Œç›®æ ‡å¯¹è±¡ä¸å…è®¸ç›´æ¥è®¿é—®ï¼Œå¿…é¡»é€šè¿‡ä»£ç†è®¿é—®ï¼Œä¸€æ—¦è®¿é—®ç»“æŸï¼Œå°±æ”¶å›ä»£ç†æƒï¼Œä¸å…è®¸å†æ¬¡è®¿é—®ã€‚ this é—®é¢˜è™½ç„¶ Proxy å¯ä»¥ä»£ç†é’ˆå¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ï¼Œä½†å®ƒä¸æ˜¯ç›®æ ‡å¯¹è±¡çš„é€æ˜ä»£ç†ï¼Œå³ä¸åšä»»ä½•æ‹¦æˆªçš„æƒ…å†µä¸‹ï¼Œä¹Ÿæ— æ³•ä¿è¯ä¸ç›®æ ‡å¯¹è±¡çš„è¡Œä¸ºä¸€è‡´ã€‚ä¸»è¦åŸå› å°±æ˜¯åœ¨ Proxy ä»£ç†çš„æƒ…å†µä¸‹ï¼Œç›®æ ‡å¯¹è±¡å†…éƒ¨çš„thiså…³é”®å­—ä¼šæŒ‡å‘ Proxy ä»£ç†ã€‚ const target = { m: function () { console.log(this === proxy); } }; const handler = {}; const proxy = new Proxy(target, handler); target.m() // false proxy.m() // true ä¸Šé¢ä»£ç ä¸­ï¼Œä¸€æ—¦proxyä»£ç†target.mï¼Œåè€…å†…éƒ¨çš„thiså°±æ˜¯æŒ‡å‘proxyï¼Œè€Œä¸æ˜¯targetã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œç”±äºthisæŒ‡å‘çš„å˜åŒ–ï¼Œå¯¼è‡´ Proxy æ— æ³•ä»£ç†ç›®æ ‡å¯¹è±¡ã€‚ const _name = new WeakMap(); class Person { constructor(name) { _name.set(this, name); } get name() { return _name.get(this); } } const jane = new Person(&#39;Jane&#39;); jane.name // &#39;Jane&#39; const proxy = new Proxy(jane, {}); proxy.name // undefined ä¸Šé¢ä»£ç ä¸­ï¼Œç›®æ ‡å¯¹è±¡janeçš„nameå±æ€§ï¼Œå®é™…ä¿å­˜åœ¨å¤–éƒ¨WeakMapå¯¹è±¡_nameä¸Šé¢ï¼Œé€šè¿‡thisé”®åŒºåˆ†ã€‚ç”±äºé€šè¿‡proxy.nameè®¿é—®æ—¶ï¼ŒthisæŒ‡å‘proxyï¼Œå¯¼è‡´æ— æ³•å–åˆ°å€¼ï¼Œæ‰€ä»¥è¿”å›undefinedã€‚ æ­¤å¤–ï¼Œæœ‰äº›åŸç”Ÿå¯¹è±¡çš„å†…éƒ¨å±æ€§ï¼Œåªæœ‰é€šè¿‡æ­£ç¡®çš„thisæ‰èƒ½æ‹¿åˆ°ï¼Œæ‰€ä»¥ Proxy ä¹Ÿæ— æ³•ä»£ç†è¿™äº›åŸç”Ÿå¯¹è±¡çš„å±æ€§ã€‚ const target = new Date(); const handler = {}; const proxy = new Proxy(target, handler); proxy.getDate(); // TypeError: this is not a Date object. ä¸Šé¢ä»£ç ä¸­ï¼ŒgetDateæ–¹æ³•åªèƒ½åœ¨Dateå¯¹è±¡å®ä¾‹ä¸Šé¢æ‹¿åˆ°ï¼Œå¦‚æœthisä¸æ˜¯Dateå¯¹è±¡å®ä¾‹å°±ä¼šæŠ¥é”™ã€‚è¿™æ—¶ï¼Œthisç»‘å®šåŸå§‹å¯¹è±¡ï¼Œå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ const target = new Date(&#39;2015-01-01&#39;); const handler = { get(target, prop) { if (prop === &#39;getDate&#39;) { return target.getDate.bind(target); } return Reflect.get(target, prop); } }; const proxy = new Proxy(target, handler); proxy.getDate() // 1 å®ä¾‹ï¼šWeb æœåŠ¡çš„å®¢æˆ·ç«¯Proxy å¯¹è±¡å¯ä»¥æ‹¦æˆªç›®æ ‡å¯¹è±¡çš„ä»»æ„å±æ€§ï¼Œè¿™ä½¿å¾—å®ƒå¾ˆåˆé€‚ç”¨æ¥å†™ Web æœåŠ¡çš„å®¢æˆ·ç«¯ã€‚ const service = createWebService(&#39;http://example.com/data&#39;); service.employees().then(json =&gt; { const employees = JSON.parse(json); // Â·Â·Â· }); ä¸Šé¢ä»£ç æ–°å»ºäº†ä¸€ä¸ª Web æœåŠ¡çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£è¿”å›å„ç§æ•°æ®ã€‚Proxy å¯ä»¥æ‹¦æˆªè¿™ä¸ªå¯¹è±¡çš„ä»»æ„å±æ€§ï¼Œæ‰€ä»¥ä¸ç”¨ä¸ºæ¯ä¸€ç§æ•°æ®å†™ä¸€ä¸ªé€‚é…æ–¹æ³•ï¼Œåªè¦å†™ä¸€ä¸ª Proxy æ‹¦æˆªå°±å¯ä»¥äº†ã€‚ function createWebService(baseUrl) { return new Proxy({}, { get(target, propKey, receiver) { return () =&gt; httpGet(baseUrl+&#39;/&#39; + propKey); } }); } åŒç†ï¼ŒProxy ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°æ•°æ®åº“çš„ ORM å±‚ã€‚","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Proxy","slug":"Proxy","permalink":"https://microzz.com/tags/Proxy/"}]},{"title":"Setå’ŒMapæ•°æ®ç»“æ„","date":"2017-01-05T03:40:19.000Z","path":"2017/01/05/set-map/","text":"Setå’ŒMapæ•°æ®ç»“æ„SetåŸºæœ¬ç”¨æ³•ES6æä¾›äº†æ–°çš„æ•°æ®ç»“æ„Setã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚ Setæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆSetæ•°æ®ç»“æ„ã€‚ var s = new Set(); [2, 3, 5, 4, 5, 2, 2].map(x =&gt; s.add(x)); for (let i of s) { console.log(i); } // 2 3 5 4 ä¸Šé¢ä»£ç é€šè¿‡addæ–¹æ³•å‘Setç»“æ„åŠ å…¥æˆå‘˜ï¼Œç»“æœè¡¨æ˜Setç»“æ„ä¸ä¼šæ·»åŠ é‡å¤çš„å€¼ã€‚ Setå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼‰ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–ã€‚ // ä¾‹ä¸€ var set = new Set([1, 2, 3, 4, 4]); [...set] // [1, 2, 3, 4] // ä¾‹äºŒ var items = new Set([1, 2, 3, 4, 5, 5, 5, 5]); items.size // 5 // ä¾‹ä¸‰ function divs () { return [...document.querySelectorAll(&#39;div&#39;)]; } var set = new Set(divs()); set.size // 56 // ç±»ä¼¼äº divs().forEach(div =&gt; set.add(div)); set.size // 56 ä¸Šé¢ä»£ç ä¸­ï¼Œä¾‹ä¸€å’Œä¾‹äºŒéƒ½æ˜¯Setå‡½æ•°æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œä¾‹ä¸‰æ˜¯æ¥å—ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚ ä¸Šé¢ä»£ç ä¸­ï¼Œä¹Ÿå±•ç¤ºäº†ä¸€ç§å»é™¤æ•°ç»„é‡å¤æˆå‘˜çš„æ–¹æ³•ã€‚ // å»é™¤æ•°ç»„çš„é‡å¤æˆå‘˜ [...new Set(array)] å‘SetåŠ å…¥å€¼çš„æ—¶å€™ï¼Œä¸ä¼šå‘ç”Ÿç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥5å’Œ&quot;5&quot;æ˜¯ä¸¤ä¸ªä¸åŒçš„å€¼ã€‚Setå†…éƒ¨åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ä¸åŒï¼Œä½¿ç”¨çš„ç®—æ³•å«åšâ€œSame-value equalityâ€ï¼Œå®ƒç±»ä¼¼äºç²¾ç¡®ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ===ï¼‰ï¼Œä¸»è¦çš„åŒºåˆ«æ˜¯NaNç­‰äºè‡ªèº«ï¼Œè€Œç²¾ç¡®ç›¸ç­‰è¿ç®—ç¬¦è®¤ä¸ºNaNä¸ç­‰äºè‡ªèº«ã€‚ let set = new Set(); let a = NaN; let b = NaN; set.add(a); set.add(b); set // Set {NaN} ä¸Šé¢ä»£ç å‘Setå®ä¾‹æ·»åŠ äº†ä¸¤ä¸ªNaNï¼Œä½†æ˜¯åªèƒ½åŠ å…¥ä¸€ä¸ªã€‚è¿™è¡¨æ˜ï¼Œåœ¨Setå†…éƒ¨ï¼Œä¸¤ä¸ªNaNæ˜¯ç›¸ç­‰ã€‚ å¦å¤–ï¼Œä¸¤ä¸ªå¯¹è±¡æ€»æ˜¯ä¸ç›¸ç­‰çš„ã€‚ let set = new Set(); set.add({}); set.size // 1 set.add({}); set.size // 2 ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œç”±äºä¸¤ä¸ªç©ºå¯¹è±¡ä¸ç›¸ç­‰ï¼Œæ‰€ä»¥å®ƒä»¬è¢«è§†ä¸ºä¸¤ä¸ªå€¼ã€‚ Setå®ä¾‹çš„å±æ€§å’Œæ–¹æ³•Setç»“æ„çš„å®ä¾‹æœ‰ä»¥ä¸‹å±æ€§ã€‚ Set.prototype.constructorï¼šæ„é€ å‡½æ•°ï¼Œé»˜è®¤å°±æ˜¯Setå‡½æ•°ã€‚ Set.prototype.sizeï¼šè¿”å›Setå®ä¾‹çš„æˆå‘˜æ€»æ•°ã€‚ Setå®ä¾‹çš„æ–¹æ³•åˆ†ä¸ºä¸¤å¤§ç±»ï¼šæ“ä½œæ–¹æ³•ï¼ˆç”¨äºæ“ä½œæ•°æ®ï¼‰å’Œéå†æ–¹æ³•ï¼ˆç”¨äºéå†æˆå‘˜ï¼‰ã€‚ä¸‹é¢å…ˆä»‹ç»å››ä¸ªæ“ä½œæ–¹æ³•ã€‚ add(value)ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å›Setç»“æ„æœ¬èº«ã€‚ delete(value)ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸã€‚ has(value)ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸ºSetçš„æˆå‘˜ã€‚ clear()ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚ ä¸Šé¢è¿™äº›å±æ€§å’Œæ–¹æ³•çš„å®ä¾‹å¦‚ä¸‹ã€‚ s.add(1).add(2).add(2); // æ³¨æ„2è¢«åŠ å…¥äº†ä¸¤æ¬¡ s.size // 2 s.has(1) // true s.has(2) // true s.has(3) // false s.delete(2); s.has(2) // false ä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹æ¯”ï¼Œçœ‹çœ‹åœ¨åˆ¤æ–­æ˜¯å¦åŒ…æ‹¬ä¸€ä¸ªé”®ä¸Šé¢ï¼ŒObjectç»“æ„å’ŒSetç»“æ„çš„å†™æ³•ä¸åŒã€‚ // å¯¹è±¡çš„å†™æ³• var properties = { &#39;width&#39;: 1, &#39;height&#39;: 1 }; if (properties[someName]) { // do something } // Setçš„å†™æ³• var properties = new Set(); properties.add(&#39;width&#39;); properties.add(&#39;height&#39;); if (properties.has(someName)) { // do something } Array.fromæ–¹æ³•å¯ä»¥å°†Setç»“æ„è½¬ä¸ºæ•°ç»„ã€‚ var items = new Set([1, 2, 3, 4, 5]); var array = Array.from(items); è¿™å°±æä¾›äº†å»é™¤æ•°ç»„é‡å¤æˆå‘˜çš„å¦ä¸€ç§æ–¹æ³•ã€‚ function dedupe(array) { return Array.from(new Set(array)); } dedupe([1, 1, 2, 3]) // [1, 2, 3] éå†æ“ä½œSetç»“æ„çš„å®ä¾‹æœ‰å››ä¸ªéå†æ–¹æ³•ï¼Œå¯ä»¥ç”¨äºéå†æˆå‘˜ã€‚ keys()ï¼šè¿”å›é”®åçš„éå†å™¨ values()ï¼šè¿”å›é”®å€¼çš„éå†å™¨ entries()ï¼šè¿”å›é”®å€¼å¯¹çš„éå†å™¨ forEach()ï¼šä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜ éœ€è¦ç‰¹åˆ«æŒ‡å‡ºçš„æ˜¯ï¼ŒSetçš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºã€‚è¿™ä¸ªç‰¹æ€§æœ‰æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ä½¿ç”¨Setä¿å­˜ä¸€ä¸ªå›è°ƒå‡½æ•°åˆ—è¡¨ï¼Œè°ƒç”¨æ—¶å°±èƒ½ä¿è¯æŒ‰ç…§æ·»åŠ é¡ºåºè°ƒç”¨ã€‚ ï¼ˆ1ï¼‰keys()ï¼Œvalues()ï¼Œentries() keysæ–¹æ³•ã€valuesæ–¹æ³•ã€entriesæ–¹æ³•è¿”å›çš„éƒ½æ˜¯éå†å™¨å¯¹è±¡ï¼ˆè¯¦è§ã€ŠIterator å¯¹è±¡ã€‹ä¸€ç« ï¼‰ã€‚ç”±äº Set ç»“æ„æ²¡æœ‰é”®åï¼Œåªæœ‰é”®å€¼ï¼ˆæˆ–è€…è¯´é”®åå’Œé”®å€¼æ˜¯åŒä¸€ä¸ªå€¼ï¼‰ï¼Œæ‰€ä»¥keysæ–¹æ³•å’Œvaluesæ–¹æ³•çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚ let set = new Set([&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;]); for (let item of set.keys()) { console.log(item); } // red // green // blue for (let item of set.values()) { console.log(item); } // red // green // blue for (let item of set.entries()) { console.log(item); } // [&quot;red&quot;, &quot;red&quot;] // [&quot;green&quot;, &quot;green&quot;] // [&quot;blue&quot;, &quot;blue&quot;] ä¸Šé¢ä»£ç ä¸­ï¼Œentriesæ–¹æ³•è¿”å›çš„éå†å™¨ï¼ŒåŒæ—¶åŒ…æ‹¬é”®åå’Œé”®å€¼ï¼Œæ‰€ä»¥æ¯æ¬¡è¾“å‡ºä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ä¸¤ä¸ªæˆå‘˜å®Œå…¨ç›¸ç­‰ã€‚ Setç»“æ„çš„å®ä¾‹é»˜è®¤å¯éå†ï¼Œå®ƒçš„é»˜è®¤éå†å™¨ç”Ÿæˆå‡½æ•°å°±æ˜¯å®ƒçš„valuesæ–¹æ³•ã€‚ Set.prototype[Symbol.iterator] === Set.prototype.values // true è¿™æ„å‘³ç€ï¼Œå¯ä»¥çœç•¥valuesæ–¹æ³•ï¼Œç›´æ¥ç”¨for...ofå¾ªç¯éå†Setã€‚ let set = new Set([&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;]); for (let x of set) { console.log(x); } // red // green // blue ï¼ˆ2ï¼‰forEach() Setç»“æ„çš„å®ä¾‹çš„forEachæ–¹æ³•ï¼Œç”¨äºå¯¹æ¯ä¸ªæˆå‘˜æ‰§è¡ŒæŸç§æ“ä½œï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚ let set = new Set([1, 2, 3]); set.forEach((value, key) =&gt; console.log(value * 2) ) // 2 // 4 // 6 ä¸Šé¢ä»£ç è¯´æ˜ï¼ŒforEachæ–¹æ³•çš„å‚æ•°å°±æ˜¯ä¸€ä¸ªå¤„ç†å‡½æ•°ã€‚è¯¥å‡½æ•°çš„å‚æ•°ä¾æ¬¡ä¸ºé”®å€¼ã€é”®åã€é›†åˆæœ¬èº«ï¼ˆä¸Šä¾‹çœç•¥äº†è¯¥å‚æ•°ï¼‰ã€‚å¦å¤–ï¼ŒforEachæ–¹æ³•è¿˜å¯ä»¥æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºç»‘å®šçš„thiså¯¹è±¡ã€‚ ï¼ˆ3ï¼‰éå†çš„åº”ç”¨ æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰å†…éƒ¨ä½¿ç”¨for...ofå¾ªç¯ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç”¨äºSetç»“æ„ã€‚ let set = new Set([&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;]); let arr = [...set]; // [&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;] æ‰©å±•è¿ç®—ç¬¦å’ŒSetç»“æ„ç›¸ç»“åˆï¼Œå°±å¯ä»¥å»é™¤æ•°ç»„çš„é‡å¤æˆå‘˜ã€‚ let arr = [3, 5, 2, 2, 5, 5]; let unique = [...new Set(arr)]; // [3, 5, 2] è€Œä¸”ï¼Œæ•°ç»„çš„mapå’Œfilteræ–¹æ³•ä¹Ÿå¯ä»¥ç”¨äºSetäº†ã€‚ let set = new Set([1, 2, 3]); set = new Set([...set].map(x =&gt; x * 2)); // è¿”å›Setç»“æ„ï¼š{2, 4, 6} let set = new Set([1, 2, 3, 4, 5]); set = new Set([...set].filter(x =&gt; (x % 2) == 0)); // è¿”å›Setç»“æ„ï¼š{2, 4} å› æ­¤ä½¿ç”¨Setå¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°å¹¶é›†ï¼ˆUnionï¼‰ã€äº¤é›†ï¼ˆIntersectï¼‰å’Œå·®é›†ï¼ˆDifferenceï¼‰ã€‚ let a = new Set([1, 2, 3]); let b = new Set([4, 3, 2]); // å¹¶é›† let union = new Set([...a, ...b]); // Set {1, 2, 3, 4} // äº¤é›† let intersect = new Set([...a].filter(x =&gt; b.has(x))); // set {2, 3} // å·®é›† let difference = new Set([...a].filter(x =&gt; !b.has(x))); // Set {1} å¦‚æœæƒ³åœ¨éå†æ“ä½œä¸­ï¼ŒåŒæ­¥æ”¹å˜åŸæ¥çš„Setç»“æ„ï¼Œç›®å‰æ²¡æœ‰ç›´æ¥çš„æ–¹æ³•ï¼Œä½†æœ‰ä¸¤ç§å˜é€šæ–¹æ³•ã€‚ä¸€ç§æ˜¯åˆ©ç”¨åŸSetç»“æ„æ˜ å°„å‡ºä¸€ä¸ªæ–°çš„ç»“æ„ï¼Œç„¶åèµ‹å€¼ç»™åŸæ¥çš„Setç»“æ„ï¼›å¦ä¸€ç§æ˜¯åˆ©ç”¨Array.fromæ–¹æ³•ã€‚ // æ–¹æ³•ä¸€ let set = new Set([1, 2, 3]); set = new Set([...set].map(val =&gt; val * 2)); // setçš„å€¼æ˜¯2, 4, 6 // æ–¹æ³•äºŒ let set = new Set([1, 2, 3]); set = new Set(Array.from(set, val =&gt; val * 2)); // setçš„å€¼æ˜¯2, 4, 6 ä¸Šé¢ä»£ç æä¾›äº†ä¸¤ç§æ–¹æ³•ï¼Œç›´æ¥åœ¨éå†æ“ä½œä¸­æ”¹å˜åŸæ¥çš„Setç»“æ„ã€‚ WeakSetWeakSetç»“æ„ä¸Setç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸é‡å¤çš„å€¼çš„é›†åˆã€‚ä½†æ˜¯ï¼Œå®ƒä¸Setæœ‰ä¸¤ä¸ªåŒºåˆ«ã€‚ é¦–å…ˆï¼ŒWeakSetçš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ï¼Œè€Œä¸èƒ½æ˜¯å…¶ä»–ç±»å‹çš„å€¼ã€‚ å…¶æ¬¡ï¼ŒWeakSetä¸­çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘WeakSetå¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå…¶ä»–å¯¹è±¡éƒ½ä¸å†å¼•ç”¨è¯¥å¯¹è±¡ï¼Œé‚£ä¹ˆåƒåœ¾å›æ”¶æœºåˆ¶ä¼šè‡ªåŠ¨å›æ”¶è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ï¼Œä¸è€ƒè™‘è¯¥å¯¹è±¡è¿˜å­˜åœ¨äºWeakSetä¹‹ä¸­ã€‚è¿™ä¸ªç‰¹ç‚¹æ„å‘³ç€ï¼Œæ— æ³•å¼•ç”¨WeakSetçš„æˆå‘˜ï¼Œå› æ­¤WeakSetæ˜¯ä¸å¯éå†çš„ã€‚ var ws = new WeakSet(); ws.add(1) // TypeError: Invalid value used in weak set ws.add(Symbol()) // TypeError: invalid value used in weak set ä¸Šé¢ä»£ç è¯•å›¾å‘WeakSetæ·»åŠ ä¸€ä¸ªæ•°å€¼å’ŒSymbolå€¼ï¼Œç»“æœæŠ¥é”™ï¼Œå› ä¸ºWeakSetåªèƒ½æ”¾ç½®å¯¹è±¡ã€‚ WeakSetæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨newå‘½ä»¤ï¼Œåˆ›å»ºWeakSetæ•°æ®ç»“æ„ã€‚ var ws = new WeakSet(); ä½œä¸ºæ„é€ å‡½æ•°ï¼ŒWeakSetå¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„æˆ–ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚ï¼ˆå®é™…ä¸Šï¼Œä»»ä½•å…·æœ‰iterableæ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½œä¸ºWeakSetçš„å‚æ•°ã€‚ï¼‰è¯¥æ•°ç»„çš„æ‰€æœ‰æˆå‘˜ï¼Œéƒ½ä¼šè‡ªåŠ¨æˆä¸ºWeakSetå®ä¾‹å¯¹è±¡çš„æˆå‘˜ã€‚ var a = [[1,2], [3,4]]; var ws = new WeakSet(a); ä¸Šé¢ä»£ç ä¸­ï¼Œaæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒæœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œä¹Ÿéƒ½æ˜¯æ•°ç»„ã€‚å°†aä½œä¸ºWeakSetæ„é€ å‡½æ•°çš„å‚æ•°ï¼Œaçš„æˆå‘˜ä¼šè‡ªåŠ¨æˆä¸ºWeakSetçš„æˆå‘˜ã€‚ æ³¨æ„ï¼Œæ˜¯aæ•°ç»„çš„æˆå‘˜æˆä¸ºWeakSetçš„æˆå‘˜ï¼Œè€Œä¸æ˜¯aæ•°ç»„æœ¬èº«ã€‚è¿™æ„å‘³ç€ï¼Œæ•°ç»„çš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ã€‚ var b = [3, 4]; var ws = new WeakSet(b); // Uncaught TypeError: Invalid value used in weak set(â€¦) ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„bçš„æˆå‘˜ä¸æ˜¯å¯¹è±¡ï¼ŒåŠ å…¥WeaKSetå°±ä¼šæŠ¥é”™ã€‚ WeakSetç»“æ„æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ã€‚ WeakSet.prototype.add(value)ï¼šå‘WeakSetå®ä¾‹æ·»åŠ ä¸€ä¸ªæ–°æˆå‘˜ã€‚ WeakSet.prototype.delete(value)ï¼šæ¸…é™¤WeakSetå®ä¾‹çš„æŒ‡å®šæˆå‘˜ã€‚ WeakSet.prototype.has(value)ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªå€¼æ˜¯å¦åœ¨WeakSetå®ä¾‹ä¹‹ä¸­ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ var ws = new WeakSet(); var obj = {}; var foo = {}; ws.add(window); ws.add(obj); ws.has(window); // true ws.has(foo); // false ws.delete(window); ws.has(window); // false WeakSetæ²¡æœ‰sizeå±æ€§ï¼Œæ²¡æœ‰åŠæ³•éå†å®ƒçš„æˆå‘˜ã€‚ ws.size // undefined ws.forEach // undefined ws.forEach(function(item){ console.log(&#39;WeakSet has &#39; + item)}) // TypeError: undefined is not a function ä¸Šé¢ä»£ç è¯•å›¾è·å–sizeå’ŒforEachå±æ€§ï¼Œç»“æœéƒ½ä¸èƒ½æˆåŠŸã€‚ WeakSetä¸èƒ½éå†ï¼Œæ˜¯å› ä¸ºæˆå‘˜éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œéšæ—¶å¯èƒ½æ¶ˆå¤±ï¼Œéå†æœºåˆ¶æ— æ³•ä¿è¯æˆå‘˜çš„å­˜åœ¨ï¼Œå¾ˆå¯èƒ½åˆšåˆšéå†ç»“æŸï¼Œæˆå‘˜å°±å–ä¸åˆ°äº†ã€‚WeakSetçš„ä¸€ä¸ªç”¨å¤„ï¼Œæ˜¯å‚¨å­˜DOMèŠ‚ç‚¹ï¼Œè€Œä¸ç”¨æ‹…å¿ƒè¿™äº›èŠ‚ç‚¹ä»æ–‡æ¡£ç§»é™¤æ—¶ï¼Œä¼šå¼•å‘å†…å­˜æ³„æ¼ã€‚ ä¸‹é¢æ˜¯WeakSetçš„å¦ä¸€ä¸ªä¾‹å­ã€‚ const foos = new WeakSet() class Foo { constructor() { foos.add(this) } method () { if (!foos.has(this)) { throw new TypeError(&#39;Foo.prototype.method åªèƒ½åœ¨Fooçš„å®ä¾‹ä¸Šè°ƒç”¨ï¼&#39;); } } } ä¸Šé¢ä»£ç ä¿è¯äº†Fooçš„å®ä¾‹æ–¹æ³•ï¼Œåªèƒ½åœ¨Fooçš„å®ä¾‹ä¸Šè°ƒç”¨ã€‚è¿™é‡Œä½¿ç”¨WeakSetçš„å¥½å¤„æ˜¯ï¼Œfooså¯¹å®ä¾‹çš„å¼•ç”¨ï¼Œä¸ä¼šè¢«è®¡å…¥å†…å­˜å›æ”¶æœºåˆ¶ï¼Œæ‰€ä»¥åˆ é™¤å®ä¾‹çš„æ—¶å€™ï¼Œä¸ç”¨è€ƒè™‘foosï¼Œä¹Ÿä¸ä¼šå‡ºç°å†…å­˜æ³„æ¼ã€‚ MapMapç»“æ„çš„ç›®çš„å’ŒåŸºæœ¬ç”¨æ³•JavaScriptçš„å¯¹è±¡ï¼ˆObjectï¼‰ï¼Œæœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼ˆHashç»“æ„ï¼‰ï¼Œä½†æ˜¯ä¼ ç»Ÿä¸Šåªèƒ½ç”¨å­—ç¬¦ä¸²å½“ä½œé”®ã€‚è¿™ç»™å®ƒçš„ä½¿ç”¨å¸¦æ¥äº†å¾ˆå¤§çš„é™åˆ¶ã€‚ var data = {}; var element = document.getElementById(&#39;myDiv&#39;); data[element] = &#39;metadata&#39;; data[&#39;[object HTMLDivElement]&#39;] // &quot;metadata&quot; ä¸Šé¢ä»£ç åŸæ„æ˜¯å°†ä¸€ä¸ªDOMèŠ‚ç‚¹ä½œä¸ºå¯¹è±¡dataçš„é”®ï¼Œä½†æ˜¯ç”±äºå¯¹è±¡åªæ¥å—å­—ç¬¦ä¸²ä½œä¸ºé”®åï¼Œæ‰€ä»¥elementè¢«è‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ä¸²[object HTMLDivElement]ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒES6æä¾›äº†Mapæ•°æ®ç»“æ„ã€‚å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒObjectç»“æ„æä¾›äº†â€œå­—ç¬¦ä¸²â€”å€¼â€çš„å¯¹åº”ï¼ŒMapç»“æ„æä¾›äº†â€œå€¼â€”å€¼â€çš„å¯¹åº”ï¼Œæ˜¯ä¸€ç§æ›´å®Œå–„çš„Hashç»“æ„å®ç°ã€‚å¦‚æœä½ éœ€è¦â€œé”®å€¼å¯¹â€çš„æ•°æ®ç»“æ„ï¼ŒMapæ¯”Objectæ›´åˆé€‚ã€‚ var m = new Map(); var o = {p: &#39;Hello World&#39;}; m.set(o, &#39;content&#39;) m.get(o) // &quot;content&quot; m.has(o) // true m.delete(o) // true m.has(o) // false ä¸Šé¢ä»£ç ä½¿ç”¨setæ–¹æ³•ï¼Œå°†å¯¹è±¡oå½“ä½œmçš„ä¸€ä¸ªé”®ï¼Œç„¶ååˆä½¿ç”¨getæ–¹æ³•è¯»å–è¿™ä¸ªé”®ï¼Œæ¥ç€ä½¿ç”¨deleteæ–¹æ³•åˆ é™¤äº†è¿™ä¸ªé”®ã€‚ ä½œä¸ºæ„é€ å‡½æ•°ï¼ŒMapä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ã€‚è¯¥æ•°ç»„çš„æˆå‘˜æ˜¯ä¸€ä¸ªä¸ªè¡¨ç¤ºé”®å€¼å¯¹çš„æ•°ç»„ã€‚ var map = new Map([ [&#39;name&#39;, &#39;å¼ ä¸‰&#39;], [&#39;title&#39;, &#39;Author&#39;] ]); map.size // 2 map.has(&#39;name&#39;) // true map.get(&#39;name&#39;) // &quot;å¼ ä¸‰&quot; map.has(&#39;title&#39;) // true map.get(&#39;title&#39;) // &quot;Author&quot; ä¸Šé¢ä»£ç åœ¨æ–°å»ºMapå®ä¾‹æ—¶ï¼Œå°±æŒ‡å®šäº†ä¸¤ä¸ªé”®nameå’Œtitleã€‚ Mapæ„é€ å‡½æ•°æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯ä¸‹é¢çš„ç®—æ³•ã€‚ var items = [ [&#39;name&#39;, &#39;å¼ ä¸‰&#39;], [&#39;title&#39;, &#39;Author&#39;] ]; var map = new Map(); items.forEach(([key, value]) =&gt; map.set(key, value)); ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå­—ç¬¦ä¸²trueå’Œå¸ƒå°”å€¼trueæ˜¯ä¸¤ä¸ªä¸åŒçš„é”®ã€‚ var m = new Map([ [true, &#39;foo&#39;], [&#39;true&#39;, &#39;bar&#39;] ]); m.get(true) // &#39;foo&#39; m.get(&#39;true&#39;) // &#39;bar&#39; å¦‚æœå¯¹åŒä¸€ä¸ªé”®å¤šæ¬¡èµ‹å€¼ï¼Œåé¢çš„å€¼å°†è¦†ç›–å‰é¢çš„å€¼ã€‚ let map = new Map(); map .set(1, &#39;aaa&#39;) .set(1, &#39;bbb&#39;); map.get(1) // &quot;bbb&quot; ä¸Šé¢ä»£ç å¯¹é”®1è¿ç»­èµ‹å€¼ä¸¤æ¬¡ï¼Œåä¸€æ¬¡çš„å€¼è¦†ç›–å‰ä¸€æ¬¡çš„å€¼ã€‚ å¦‚æœè¯»å–ä¸€ä¸ªæœªçŸ¥çš„é”®ï¼Œåˆ™è¿”å›undefinedã€‚ new Map().get(&#39;asfddfsasadf&#39;) // undefined æ³¨æ„ï¼Œåªæœ‰å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼ŒMapç»“æ„æ‰å°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚è¿™ä¸€ç‚¹è¦éå¸¸å°å¿ƒã€‚ var map = new Map(); map.set([&#39;a&#39;], 555); map.get([&#39;a&#39;]) // undefined ä¸Šé¢ä»£ç çš„setå’Œgetæ–¹æ³•ï¼Œè¡¨é¢æ˜¯é’ˆå¯¹åŒä¸€ä¸ªé”®ï¼Œä½†å®é™…ä¸Šè¿™æ˜¯ä¸¤ä¸ªå€¼ï¼Œå†…å­˜åœ°å€æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤getæ–¹æ³•æ— æ³•è¯»å–è¯¥é”®ï¼Œè¿”å›undefinedã€‚ åŒç†ï¼ŒåŒæ ·çš„å€¼çš„ä¸¤ä¸ªå®ä¾‹ï¼Œåœ¨Mapç»“æ„ä¸­è¢«è§†ä¸ºä¸¤ä¸ªé”®ã€‚ var map = new Map(); var k1 = [&#39;a&#39;]; var k2 = [&#39;a&#39;]; map .set(k1, 111) .set(k2, 222); map.get(k1) // 111 map.get(k2) // 222 ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡k1å’Œk2çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒä»¬åœ¨Mapç»“æ„ä¸­è¢«è§†ä¸ºä¸¤ä¸ªé”®ã€‚ ç”±ä¸Šå¯çŸ¥ï¼ŒMapçš„é”®å®é™…ä¸Šæ˜¯è·Ÿå†…å­˜åœ°å€ç»‘å®šçš„ï¼Œåªè¦å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œå°±è§†ä¸ºä¸¤ä¸ªé”®ã€‚è¿™å°±è§£å†³äº†åŒåå±æ€§ç¢°æ’ï¼ˆclashï¼‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ‰©å±•åˆ«äººçš„åº“çš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®åï¼Œå°±ä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„å±æ€§ä¸åŸä½œè€…çš„å±æ€§åŒåã€‚ å¦‚æœMapçš„é”®æ˜¯ä¸€ä¸ªç®€å•ç±»å‹çš„å€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œåˆ™åªè¦ä¸¤ä¸ªå€¼ä¸¥æ ¼ç›¸ç­‰ï¼ŒMapå°†å…¶è§†ä¸ºä¸€ä¸ªé”®ï¼ŒåŒ…æ‹¬0å’Œ-0ã€‚å¦å¤–ï¼Œè™½ç„¶NaNä¸ä¸¥æ ¼ç›¸ç­‰äºè‡ªèº«ï¼Œä½†Mapå°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚ let map = new Map(); map.set(NaN, 123); map.get(NaN) // 123 map.set(-0, 123); map.get(+0) // 123 å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•Mapç»“æ„çš„å®ä¾‹æœ‰ä»¥ä¸‹å±æ€§å’Œæ“ä½œæ–¹æ³•ã€‚ ï¼ˆ1ï¼‰sizeå±æ€§ sizeå±æ€§è¿”å›Mapç»“æ„çš„æˆå‘˜æ€»æ•°ã€‚ let map = new Map(); map.set(&#39;foo&#39;, true); map.set(&#39;bar&#39;, false); map.size // 2 ï¼ˆ2ï¼‰set(key, value) setæ–¹æ³•è®¾ç½®keyæ‰€å¯¹åº”çš„é”®å€¼ï¼Œç„¶åè¿”å›æ•´ä¸ªMapç»“æ„ã€‚å¦‚æœkeyå·²ç»æœ‰å€¼ï¼Œåˆ™é”®å€¼ä¼šè¢«æ›´æ–°ï¼Œå¦åˆ™å°±æ–°ç”Ÿæˆè¯¥é”®ã€‚ var m = new Map(); m.set(&quot;edition&quot;, 6) // é”®æ˜¯å­—ç¬¦ä¸² m.set(262, &quot;standard&quot;) // é”®æ˜¯æ•°å€¼ m.set(undefined, &quot;nah&quot;) // é”®æ˜¯undefined setæ–¹æ³•è¿”å›çš„æ˜¯Mapæœ¬èº«ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ã€‚ let map = new Map() .set(1, &#39;a&#39;) .set(2, &#39;b&#39;) .set(3, &#39;c&#39;); ï¼ˆ3ï¼‰get(key) getæ–¹æ³•è¯»å–keyå¯¹åº”çš„é”®å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°keyï¼Œè¿”å›undefinedã€‚ var m = new Map(); var hello = function() {console.log(&quot;hello&quot;);} m.set(hello, &quot;Hello ES6!&quot;) // é”®æ˜¯å‡½æ•° m.get(hello) // Hello ES6! ï¼ˆ4ï¼‰has(key) hasæ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªé”®æ˜¯å¦åœ¨Mapæ•°æ®ç»“æ„ä¸­ã€‚ var m = new Map(); m.set(&quot;edition&quot;, 6); m.set(262, &quot;standard&quot;); m.set(undefined, &quot;nah&quot;); m.has(&quot;edition&quot;) // true m.has(&quot;years&quot;) // false m.has(262) // true m.has(undefined) // true ï¼ˆ5ï¼‰delete(key) deleteæ–¹æ³•åˆ é™¤æŸä¸ªé”®ï¼Œè¿”å›trueã€‚å¦‚æœåˆ é™¤å¤±è´¥ï¼Œè¿”å›falseã€‚ var m = new Map(); m.set(undefined, &quot;nah&quot;); m.has(undefined) // true m.delete(undefined) m.has(undefined) // false ï¼ˆ6ï¼‰clear() clearæ–¹æ³•æ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚ let map = new Map(); map.set(&#39;foo&#39;, true); map.set(&#39;bar&#39;, false); map.size // 2 map.clear() map.size // 0 éå†æ–¹æ³•MapåŸç”Ÿæä¾›ä¸‰ä¸ªéå†å™¨ç”Ÿæˆå‡½æ•°å’Œä¸€ä¸ªéå†æ–¹æ³•ã€‚ keys()ï¼šè¿”å›é”®åçš„éå†å™¨ã€‚ values()ï¼šè¿”å›é”®å€¼çš„éå†å™¨ã€‚ entries()ï¼šè¿”å›æ‰€æœ‰æˆå‘˜çš„éå†å™¨ã€‚ forEach()ï¼šéå†Mapçš„æ‰€æœ‰æˆå‘˜ã€‚ éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒMapçš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºã€‚ ä¸‹é¢æ˜¯ä½¿ç”¨å®ä¾‹ã€‚ let map = new Map([ [&#39;F&#39;, &#39;no&#39;], [&#39;T&#39;, &#39;yes&#39;], ]); for (let key of map.keys()) { console.log(key); } // &quot;F&quot; // &quot;T&quot; for (let value of map.values()) { console.log(value); } // &quot;no&quot; // &quot;yes&quot; for (let item of map.entries()) { console.log(item[0], item[1]); } // &quot;F&quot; &quot;no&quot; // &quot;T&quot; &quot;yes&quot; // æˆ–è€… for (let [key, value] of map.entries()) { console.log(key, value); } // ç­‰åŒäºä½¿ç”¨map.entries() for (let [key, value] of map) { console.log(key, value); } ä¸Šé¢ä»£ç æœ€åçš„é‚£ä¸ªä¾‹å­ï¼Œè¡¨ç¤ºMapç»“æ„çš„é»˜è®¤éå†å™¨æ¥å£ï¼ˆSymbol.iteratorå±æ€§ï¼‰ï¼Œå°±æ˜¯entriesæ–¹æ³•ã€‚ map[Symbol.iterator] === map.entries // true Mapç»“æ„è½¬ä¸ºæ•°ç»„ç»“æ„ï¼Œæ¯”è¾ƒå¿«é€Ÿçš„æ–¹æ³•æ˜¯ç»“åˆä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰ã€‚ let map = new Map([ [1, &#39;one&#39;], [2, &#39;two&#39;], [3, &#39;three&#39;], ]); [...map.keys()] // [1, 2, 3] [...map.values()] // [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;] [...map.entries()] // [[1,&#39;one&#39;], [2, &#39;two&#39;], [3, &#39;three&#39;]] [...map] // [[1,&#39;one&#39;], [2, &#39;two&#39;], [3, &#39;three&#39;]] ç»“åˆæ•°ç»„çš„mapæ–¹æ³•ã€filteræ–¹æ³•ï¼Œå¯ä»¥å®ç°Mapçš„éå†å’Œè¿‡æ»¤ï¼ˆMapæœ¬èº«æ²¡æœ‰mapå’Œfilteræ–¹æ³•ï¼‰ã€‚ let map0 = new Map() .set(1, &#39;a&#39;) .set(2, &#39;b&#39;) .set(3, &#39;c&#39;); let map1 = new Map( [...map0].filter(([k, v]) =&gt; k &lt; 3) ); // äº§ç”ŸMapç»“æ„ {1 =&gt; &#39;a&#39;, 2 =&gt; &#39;b&#39;} let map2 = new Map( [...map0].map(([k, v]) =&gt; [k * 2, &#39;_&#39; + v]) ); // äº§ç”ŸMapç»“æ„ {2 =&gt; &#39;_a&#39;, 4 =&gt; &#39;_b&#39;, 6 =&gt; &#39;_c&#39;} æ­¤å¤–ï¼ŒMapè¿˜æœ‰ä¸€ä¸ªforEachæ–¹æ³•ï¼Œä¸æ•°ç»„çš„forEachæ–¹æ³•ç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥å®ç°éå†ã€‚ map.forEach(function(value, key, map) { console.log(&quot;Key: %s, Value: %s&quot;, key, value); }); forEachæ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šthisã€‚ var reporter = { report: function(key, value) { console.log(&quot;Key: %s, Value: %s&quot;, key, value); } }; map.forEach(function(value, key, map) { this.report(key, value); }, reporter); ä¸Šé¢ä»£ç ä¸­ï¼ŒforEachæ–¹æ³•çš„å›è°ƒå‡½æ•°çš„thisï¼Œå°±æŒ‡å‘reporterã€‚ ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢ï¼ˆ1ï¼‰Mapè½¬ä¸ºæ•°ç»„ å‰é¢å·²ç»æè¿‡ï¼ŒMapè½¬ä¸ºæ•°ç»„æœ€æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰ã€‚ let myMap = new Map().set(true, 7).set({foo: 3}, [&#39;abc&#39;]); [...myMap] // [ [ true, 7 ], [ { foo: 3 }, [ &#39;abc&#39; ] ] ] ï¼ˆ2ï¼‰æ•°ç»„è½¬ä¸ºMap å°†æ•°ç»„è½¬å…¥Mapæ„é€ å‡½æ•°ï¼Œå°±å¯ä»¥è½¬ä¸ºMapã€‚ new Map([[true, 7], [{foo: 3}, [&#39;abc&#39;]]]) // Map {true =&gt; 7, Object {foo: 3} =&gt; [&#39;abc&#39;]} ï¼ˆ3ï¼‰Mapè½¬ä¸ºå¯¹è±¡ å¦‚æœæ‰€æœ‰Mapçš„é”®éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå¯ä»¥è½¬ä¸ºå¯¹è±¡ã€‚ function strMapToObj(strMap) { let obj = Object.create(null); for (let [k,v] of strMap) { obj[k] = v; } return obj; } let myMap = new Map().set(&#39;yes&#39;, true).set(&#39;no&#39;, false); strMapToObj(myMap) // { yes: true, no: false } ï¼ˆ4ï¼‰å¯¹è±¡è½¬ä¸ºMap function objToStrMap(obj) { let strMap = new Map(); for (let k of Object.keys(obj)) { strMap.set(k, obj[k]); } return strMap; } objToStrMap({yes: true, no: false}) // [ [ &#39;yes&#39;, true ], [ &#39;no&#39;, false ] ] ï¼ˆ5ï¼‰Mapè½¬ä¸ºJSON Mapè½¬ä¸ºJSONè¦åŒºåˆ†ä¸¤ç§æƒ…å†µã€‚ä¸€ç§æƒ…å†µæ˜¯ï¼ŒMapçš„é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©è½¬ä¸ºå¯¹è±¡JSONã€‚ function strMapToJson(strMap) { return JSON.stringify(strMapToObj(strMap)); } let myMap = new Map().set(&#39;yes&#39;, true).set(&#39;no&#39;, false); strMapToJson(myMap) // &#39;{&quot;yes&quot;:true,&quot;no&quot;:false}&#39; å¦ä¸€ç§æƒ…å†µæ˜¯ï¼ŒMapçš„é”®åæœ‰éå­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©è½¬ä¸ºæ•°ç»„JSONã€‚ function mapToArrayJson(map) { return JSON.stringify([...map]); } let myMap = new Map().set(true, 7).set({foo: 3}, [&#39;abc&#39;]); mapToArrayJson(myMap) // &#39;[[true,7],[{&quot;foo&quot;:3},[&quot;abc&quot;]]]&#39; ï¼ˆ6ï¼‰JSONè½¬ä¸ºMap JSONè½¬ä¸ºMapï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œæ‰€æœ‰é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚ function jsonToStrMap(jsonStr) { return objToStrMap(JSON.parse(jsonStr)); } jsonToStrMap(&#39;{&quot;yes&quot;:true,&quot;no&quot;:false}&#39;) // Map {&#39;yes&#39; =&gt; true, &#39;no&#39; =&gt; false} ä½†æ˜¯ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œæ•´ä¸ªJSONå°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¸”æ¯ä¸ªæ•°ç»„æˆå‘˜æœ¬èº«ï¼Œåˆæ˜¯ä¸€ä¸ªæœ‰ä¸¤ä¸ªæˆå‘˜çš„æ•°ç»„ã€‚è¿™æ—¶ï¼Œå®ƒå¯ä»¥ä¸€ä¸€å¯¹åº”åœ°è½¬ä¸ºMapã€‚è¿™å¾€å¾€æ˜¯æ•°ç»„è½¬ä¸ºJSONçš„é€†æ“ä½œã€‚ function jsonToMap(jsonStr) { return new Map(JSON.parse(jsonStr)); } jsonToMap(&#39;[[true,7],[{&quot;foo&quot;:3},[&quot;abc&quot;]]]&#39;) // Map {true =&gt; 7, Object {foo: 3} =&gt; [&#39;abc&#39;]} WeakMapWeakMapç»“æ„ä¸Mapç»“æ„åŸºæœ¬ç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯å®ƒåªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆnullé™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®åï¼Œè€Œä¸”é”®åæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ã€‚ var map = new WeakMap() map.set(1, 2) // TypeError: 1 is not an object! map.set(Symbol(), 2) // TypeError: Invalid value used as weak map key ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå°†1å’ŒSymbolä½œä¸ºWeakMapçš„é”®åï¼Œéƒ½ä¼šæŠ¥é”™ã€‚ WeakMapçš„è®¾è®¡ç›®çš„åœ¨äºï¼Œé”®åæ˜¯å¯¹è±¡çš„å¼±å¼•ç”¨ï¼ˆåƒåœ¾å›æ”¶æœºåˆ¶ä¸å°†è¯¥å¼•ç”¨è€ƒè™‘åœ¨å†…ï¼‰ï¼Œæ‰€ä»¥å…¶æ‰€å¯¹åº”çš„å¯¹è±¡å¯èƒ½ä¼šè¢«è‡ªåŠ¨å›æ”¶ã€‚å½“å¯¹è±¡è¢«å›æ”¶åï¼ŒWeakMapè‡ªåŠ¨ç§»é™¤å¯¹åº”çš„é”®å€¼å¯¹ã€‚å…¸å‹åº”ç”¨æ˜¯ï¼Œä¸€ä¸ªå¯¹åº”DOMå…ƒç´ çš„WeakMapç»“æ„ï¼Œå½“æŸä¸ªDOMå…ƒç´ è¢«æ¸…é™¤ï¼Œå…¶æ‰€å¯¹åº”çš„WeakMapè®°å½•å°±ä¼šè‡ªåŠ¨è¢«ç§»é™¤ã€‚åŸºæœ¬ä¸Šï¼ŒWeakMapçš„ä¸“ç”¨åœºåˆå°±æ˜¯ï¼Œå®ƒçš„é”®æ‰€å¯¹åº”çš„å¯¹è±¡ï¼Œå¯èƒ½ä¼šåœ¨å°†æ¥æ¶ˆå¤±ã€‚WeakMapç»“æ„æœ‰åŠ©äºé˜²æ­¢å†…å­˜æ³„æ¼ã€‚ ä¸‹é¢æ˜¯WeakMapç»“æ„çš„ä¸€ä¸ªä¾‹å­ï¼Œå¯ä»¥çœ‹åˆ°ç”¨æ³•ä¸Šä¸Mapå‡ ä¹ä¸€æ ·ã€‚ var wm = new WeakMap(); var element = document.querySelector(&quot;.element&quot;); wm.set(element, &quot;Original&quot;); wm.get(element) // &quot;Original&quot; element.parentNode.removeChild(element); element = null; wm.get(element) // undefined ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡wmæ˜¯ä¸€ä¸ªWeakMapå®ä¾‹ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªDOMèŠ‚ç‚¹elementä½œä¸ºé”®åï¼Œç„¶åé”€æ¯è¿™ä¸ªèŠ‚ç‚¹ï¼Œelementå¯¹åº”çš„é”®å°±è‡ªåŠ¨æ¶ˆå¤±äº†ï¼Œå†å¼•ç”¨è¿™ä¸ªé”®åå°±è¿”å›undefinedã€‚ WeakMapä¸Mapåœ¨APIä¸Šçš„åŒºåˆ«ä¸»è¦æ˜¯ä¸¤ä¸ªï¼Œä¸€æ˜¯æ²¡æœ‰éå†æ“ä½œï¼ˆå³æ²¡æœ‰key()ã€values()å’Œentries()æ–¹æ³•ï¼‰ï¼Œä¹Ÿæ²¡æœ‰sizeå±æ€§ï¼›äºŒæ˜¯æ— æ³•æ¸…ç©ºï¼Œå³ä¸æ”¯æŒclearæ–¹æ³•ã€‚è¿™ä¸WeakMapçš„é”®ä¸è¢«è®¡å…¥å¼•ç”¨ã€è¢«åƒåœ¾å›æ”¶æœºåˆ¶å¿½ç•¥æœ‰å…³ã€‚å› æ­¤ï¼ŒWeakMapåªæœ‰å››ä¸ªæ–¹æ³•å¯ç”¨ï¼šget()ã€set()ã€has()ã€delete()ã€‚ var wm = new WeakMap(); wm.size // undefined wm.forEach // undefined å‰æ–‡è¯´è¿‡ï¼ŒWeakMapåº”ç”¨çš„å…¸å‹åœºåˆå°±æ˜¯DOMèŠ‚ç‚¹ä½œä¸ºé”®åã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ let myElement = document.getElementById(&#39;logo&#39;); let myWeakmap = new WeakMap(); myWeakmap.set(myElement, {timesClicked: 0}); myElement.addEventListener(&#39;click&#39;, function() { let logoData = myWeakmap.get(myElement); logoData.timesClicked++; }, false); ä¸Šé¢ä»£ç ä¸­ï¼ŒmyElementæ˜¯ä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œæ¯å½“å‘ç”Ÿclickäº‹ä»¶ï¼Œå°±æ›´æ–°ä¸€ä¸‹çŠ¶æ€ã€‚æˆ‘ä»¬å°†è¿™ä¸ªçŠ¶æ€ä½œä¸ºé”®å€¼æ”¾åœ¨ WeakMap é‡Œï¼Œå¯¹åº”çš„é”®åå°±æ˜¯myElementã€‚ä¸€æ—¦è¿™ä¸ª DOM èŠ‚ç‚¹åˆ é™¤ï¼Œè¯¥çŠ¶æ€å°±ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œä¸å­˜åœ¨å†…å­˜æ³„æ¼é£é™©ã€‚ WeakMap çš„å¦ä¸€ä¸ªç”¨å¤„æ˜¯éƒ¨ç½²ç§æœ‰å±æ€§ã€‚ let _counter = new WeakMap(); let _action = new WeakMap(); class Countdown { constructor(counter, action) { _counter.set(this, counter); _action.set(this, action); } dec() { let counter = _counter.get(this); if (counter &lt; 1) return; counter--; _counter.set(this, counter); if (counter === 0) { _action.get(this)(); } } } let c = new Countdown(2, () =&gt; console.log(&#39;DONE&#39;)); c.dec() c.dec() // DONE ä¸Šé¢ä»£ç ä¸­ï¼ŒCountdownç±»çš„ä¸¤ä¸ªå†…éƒ¨å±æ€§_counterå’Œ_actionï¼Œæ˜¯å®ä¾‹çš„å¼±å¼•ç”¨ï¼Œæ‰€ä»¥å¦‚æœåˆ é™¤å®ä¾‹ï¼Œå®ƒä»¬ä¹Ÿå°±éšä¹‹æ¶ˆå¤±ï¼Œä¸ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Set","slug":"Set","permalink":"https://microzz.com/tags/Set/"},{"name":"Map","slug":"Map","permalink":"https://microzz.com/tags/Map/"}]},{"title":"Symbol","date":"2017-01-01T05:43:19.000Z","path":"2017/01/01/symbol/","text":"Symbolæ¦‚è¿°ES5çš„å¯¹è±¡å±æ€§åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™å®¹æ˜“é€ æˆå±æ€§åçš„å†²çªã€‚æ¯”å¦‚ï¼Œä½ ä½¿ç”¨äº†ä¸€ä¸ªä»–äººæä¾›çš„å¯¹è±¡ï¼Œä½†åˆæƒ³ä¸ºè¿™ä¸ªå¯¹è±¡æ·»åŠ æ–°çš„æ–¹æ³•ï¼ˆmixinæ¨¡å¼ï¼‰ï¼Œæ–°æ–¹æ³•çš„åå­—å°±æœ‰å¯èƒ½ä¸ç°æœ‰æ–¹æ³•äº§ç”Ÿå†²çªã€‚å¦‚æœæœ‰ä¸€ç§æœºåˆ¶ï¼Œä¿è¯æ¯ä¸ªå±æ€§çš„åå­—éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„å°±å¥½äº†ï¼Œè¿™æ ·å°±ä»æ ¹æœ¬ä¸Šé˜²æ­¢å±æ€§åçš„å†²çªã€‚è¿™å°±æ˜¯ES6å¼•å…¥Symbolçš„åŸå› ã€‚ ES6å¼•å…¥äº†ä¸€ç§æ–°çš„åŸå§‹æ•°æ®ç±»å‹Symbolï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼ã€‚å®ƒæ˜¯JavaScriptè¯­è¨€çš„ç¬¬ä¸ƒç§æ•°æ®ç±»å‹ï¼Œå‰å…­ç§æ˜¯ï¼šUndefinedã€Nullã€å¸ƒå°”å€¼ï¼ˆBooleanï¼‰ã€å­—ç¬¦ä¸²ï¼ˆStringï¼‰ã€æ•°å€¼ï¼ˆNumberï¼‰ã€å¯¹è±¡ï¼ˆObjectï¼‰ã€‚ Symbolå€¼é€šè¿‡Symbolå‡½æ•°ç”Ÿæˆã€‚è¿™å°±æ˜¯è¯´ï¼Œå¯¹è±¡çš„å±æ€§åç°åœ¨å¯ä»¥æœ‰ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯åŸæ¥å°±æœ‰çš„å­—ç¬¦ä¸²ï¼Œå¦ä¸€ç§å°±æ˜¯æ–°å¢çš„Symbolç±»å‹ã€‚å‡¡æ˜¯å±æ€§åå±äºSymbolç±»å‹ï¼Œå°±éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå¯ä»¥ä¿è¯ä¸ä¼šä¸å…¶ä»–å±æ€§åäº§ç”Ÿå†²çªã€‚ let s = Symbol(); typeof s // &quot;symbol&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡så°±æ˜¯ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å€¼ã€‚typeofè¿ç®—ç¬¦çš„ç»“æœï¼Œè¡¨æ˜å˜é‡sæ˜¯Symbolæ•°æ®ç±»å‹ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ä¹‹ç±»çš„å…¶ä»–ç±»å‹ã€‚ æ³¨æ„ï¼ŒSymbolå‡½æ•°å‰ä¸èƒ½ä½¿ç”¨newå‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºç”Ÿæˆçš„Symbolæ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ï¼Œä¸æ˜¯å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”±äºSymbolå€¼ä¸æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½æ·»åŠ å±æ€§ã€‚åŸºæœ¬ä¸Šï¼Œå®ƒæ˜¯ä¸€ç§ç±»ä¼¼äºå­—ç¬¦ä¸²çš„æ•°æ®ç±»å‹ã€‚ Symbolå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºå¯¹Symbolå®ä¾‹çš„æè¿°ï¼Œä¸»è¦æ˜¯ä¸ºäº†åœ¨æ§åˆ¶å°æ˜¾ç¤ºï¼Œæˆ–è€…è½¬ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œæ¯”è¾ƒå®¹æ˜“åŒºåˆ†ã€‚ var s1 = Symbol(&#39;foo&#39;); var s2 = Symbol(&#39;bar&#39;); s1 // Symbol(foo) s2 // Symbol(bar) s1.toString() // &quot;Symbol(foo)&quot; s2.toString() // &quot;Symbol(bar)&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œs1å’Œs2æ˜¯ä¸¤ä¸ªSymbolå€¼ã€‚å¦‚æœä¸åŠ å‚æ•°ï¼Œå®ƒä»¬åœ¨æ§åˆ¶å°çš„è¾“å‡ºéƒ½æ˜¯Symbol()ï¼Œä¸åˆ©äºåŒºåˆ†ã€‚æœ‰äº†å‚æ•°ä»¥åï¼Œå°±ç­‰äºä¸ºå®ƒä»¬åŠ ä¸Šäº†æè¿°ï¼Œè¾“å‡ºçš„æ—¶å€™å°±èƒ½å¤Ÿåˆ†æ¸…ï¼Œåˆ°åº•æ˜¯å“ªä¸€ä¸ªå€¼ã€‚ å¦‚æœ Symbol çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„toStringæ–¹æ³•ï¼Œå°†å…¶è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæ‰ç”Ÿæˆä¸€ä¸ª Symbol å€¼ã€‚ const obj = { toString() { return &#39;abc&#39;; } }; const sym = Symbol(obj); sym // Symbol(abc) æ³¨æ„ï¼ŒSymbolå‡½æ•°çš„å‚æ•°åªæ˜¯è¡¨ç¤ºå¯¹å½“å‰ Symbol å€¼çš„æè¿°ï¼Œå› æ­¤ç›¸åŒå‚æ•°çš„Symbolå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸ç›¸ç­‰çš„ã€‚ // æ²¡æœ‰å‚æ•°çš„æƒ…å†µ var s1 = Symbol(); var s2 = Symbol(); s1 === s2 // false // æœ‰å‚æ•°çš„æƒ…å†µ var s1 = Symbol(&#39;foo&#39;); var s2 = Symbol(&#39;foo&#39;); s1 === s2 // false ä¸Šé¢ä»£ç ä¸­ï¼Œs1å’Œs2éƒ½æ˜¯Symbolå‡½æ•°çš„è¿”å›å€¼ï¼Œè€Œä¸”å‚æ•°ç›¸åŒï¼Œä½†æ˜¯å®ƒä»¬æ˜¯ä¸ç›¸ç­‰çš„ã€‚ Symbolå€¼ä¸èƒ½ä¸å…¶ä»–ç±»å‹çš„å€¼è¿›è¡Œè¿ç®—ï¼Œä¼šæŠ¥é”™ã€‚ var sym = Symbol(&#39;My symbol&#39;); &quot;your symbol is &quot; + sym // TypeError: can&#39;t convert symbol to string `your symbol is ${sym}` // TypeError: can&#39;t convert symbol to string ä½†æ˜¯ï¼ŒSymbolå€¼å¯ä»¥æ˜¾å¼è½¬ä¸ºå­—ç¬¦ä¸²ã€‚ var sym = Symbol(&#39;My symbol&#39;); String(sym) // &#39;Symbol(My symbol)&#39; sym.toString() // &#39;Symbol(My symbol)&#39; å¦å¤–ï¼ŒSymbolå€¼ä¹Ÿå¯ä»¥è½¬ä¸ºå¸ƒå°”å€¼ï¼Œä½†æ˜¯ä¸èƒ½è½¬ä¸ºæ•°å€¼ã€‚ var sym = Symbol(); Boolean(sym) // true !sym // false if (sym) { // ... } Number(sym) // TypeError sym + 2 // TypeError ä½œä¸ºå±æ€§åçš„Symbolç”±äºæ¯ä¸€ä¸ªSymbolå€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ï¼Œè¿™æ„å‘³ç€Symbolå€¼å¯ä»¥ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œç”¨äºå¯¹è±¡çš„å±æ€§åï¼Œå°±èƒ½ä¿è¯ä¸ä¼šå‡ºç°åŒåçš„å±æ€§ã€‚è¿™å¯¹äºä¸€ä¸ªå¯¹è±¡ç”±å¤šä¸ªæ¨¡å—æ„æˆçš„æƒ…å†µéå¸¸æœ‰ç”¨ï¼Œèƒ½é˜²æ­¢æŸä¸€ä¸ªé”®è¢«ä¸å°å¿ƒæ”¹å†™æˆ–è¦†ç›–ã€‚ var mySymbol = Symbol(); // ç¬¬ä¸€ç§å†™æ³• var a = {}; a[mySymbol] = &#39;Hello!&#39;; // ç¬¬äºŒç§å†™æ³• var a = { [mySymbol]: &#39;Hello!&#39; }; // ç¬¬ä¸‰ç§å†™æ³• var a = {}; Object.defineProperty(a, mySymbol, { value: &#39;Hello!&#39; }); // ä»¥ä¸Šå†™æ³•éƒ½å¾—åˆ°åŒæ ·ç»“æœ a[mySymbol] // &quot;Hello!&quot; ä¸Šé¢ä»£ç é€šè¿‡æ–¹æ‹¬å·ç»“æ„å’ŒObject.definePropertyï¼Œå°†å¯¹è±¡çš„å±æ€§åæŒ‡å®šä¸ºä¸€ä¸ªSymbolå€¼ã€‚ æ³¨æ„ï¼ŒSymbolå€¼ä½œä¸ºå¯¹è±¡å±æ€§åæ—¶ï¼Œä¸èƒ½ç”¨ç‚¹è¿ç®—ç¬¦ã€‚ var mySymbol = Symbol(); var a = {}; a.mySymbol = &#39;Hello!&#39;; a[mySymbol] // undefined a[&#39;mySymbol&#39;] // &quot;Hello!&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œå› ä¸ºç‚¹è¿ç®—ç¬¦åé¢æ€»æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¸ä¼šè¯»å–mySymbolä½œä¸ºæ ‡è¯†åæ‰€æŒ‡ä»£çš„é‚£ä¸ªå€¼ï¼Œå¯¼è‡´açš„å±æ€§åå®é™…ä¸Šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªSymbolå€¼ã€‚ åŒç†ï¼Œåœ¨å¯¹è±¡çš„å†…éƒ¨ï¼Œä½¿ç”¨Symbolå€¼å®šä¹‰å±æ€§æ—¶ï¼ŒSymbolå€¼å¿…é¡»æ”¾åœ¨æ–¹æ‹¬å·ä¹‹ä¸­ã€‚ let s = Symbol(); let obj = { [s]: function (arg) { ... } }; obj[s](123); ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœsä¸æ”¾åœ¨æ–¹æ‹¬å·ä¸­ï¼Œè¯¥å±æ€§çš„é”®åå°±æ˜¯å­—ç¬¦ä¸²sï¼Œè€Œä¸æ˜¯sæ‰€ä»£è¡¨çš„é‚£ä¸ªSymbolå€¼ã€‚ é‡‡ç”¨å¢å¼ºçš„å¯¹è±¡å†™æ³•ï¼Œä¸Šé¢ä»£ç çš„objå¯¹è±¡å¯ä»¥å†™å¾—æ›´ç®€æ´ä¸€äº›ã€‚ let obj = { [s](arg) { ... } }; Symbolç±»å‹è¿˜å¯ä»¥ç”¨äºå®šä¹‰ä¸€ç»„å¸¸é‡ï¼Œä¿è¯è¿™ç»„å¸¸é‡çš„å€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ã€‚ log.levels = { DEBUG: Symbol(&#39;debug&#39;), INFO: Symbol(&#39;info&#39;), WARN: Symbol(&#39;warn&#39;) }; log(log.levels.DEBUG, &#39;debug message&#39;); log(log.levels.INFO, &#39;info message&#39;); ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚ const COLOR_RED = Symbol(); const COLOR_GREEN = Symbol(); function getComplement(color) { switch (color) { case COLOR_RED: return COLOR_GREEN; case COLOR_GREEN: return COLOR_RED; default: throw new Error(&#39;Undefined color&#39;); } } å¸¸é‡ä½¿ç”¨Symbolå€¼æœ€å¤§çš„å¥½å¤„ï¼Œå°±æ˜¯å…¶ä»–ä»»ä½•å€¼éƒ½ä¸å¯èƒ½æœ‰ç›¸åŒçš„å€¼äº†ï¼Œå› æ­¤å¯ä»¥ä¿è¯ä¸Šé¢çš„switchè¯­å¥ä¼šæŒ‰è®¾è®¡çš„æ–¹å¼å·¥ä½œã€‚ è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼ŒSymbolå€¼ä½œä¸ºå±æ€§åæ—¶ï¼Œè¯¥å±æ€§è¿˜æ˜¯å…¬å¼€å±æ€§ï¼Œä¸æ˜¯ç§æœ‰å±æ€§ã€‚ å®ä¾‹ï¼šæ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²é­”æœ¯å­—ç¬¦ä¸²æŒ‡çš„æ˜¯ï¼Œåœ¨ä»£ç ä¹‹ä¸­å¤šæ¬¡å‡ºç°ã€ä¸ä»£ç å½¢æˆå¼ºè€¦åˆçš„æŸä¸€ä¸ªå…·ä½“çš„å­—ç¬¦ä¸²æˆ–è€…æ•°å€¼ã€‚é£æ ¼è‰¯å¥½çš„ä»£ç ï¼Œåº”è¯¥å°½é‡æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²ï¼Œè¯¥ç”±å«ä¹‰æ¸…æ™°çš„å˜é‡ä»£æ›¿ã€‚ function getArea(shape, options) { var area = 0; switch (shape) { case &#39;Triangle&#39;: // é­”æœ¯å­—ç¬¦ä¸² area = .5 * options.width * options.height; break; /* ... more code ... */ } return area; } getArea(&#39;Triangle&#39;, { width: 100, height: 100 }); // é­”æœ¯å­—ç¬¦ä¸² ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²â€œTriangleâ€å°±æ˜¯ä¸€ä¸ªé­”æœ¯å­—ç¬¦ä¸²ã€‚å®ƒå¤šæ¬¡å‡ºç°ï¼Œä¸ä»£ç å½¢æˆâ€œå¼ºè€¦åˆâ€ï¼Œä¸åˆ©äºå°†æ¥çš„ä¿®æ”¹å’Œç»´æŠ¤ã€‚ å¸¸ç”¨çš„æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œå°±æ˜¯æŠŠå®ƒå†™æˆä¸€ä¸ªå˜é‡ã€‚ var shapeType = { triangle: &#39;Triangle&#39; }; function getArea(shape, options) { var area = 0; switch (shape) { case shapeType.triangle: area = .5 * options.width * options.height; break; } return area; } getArea(shapeType.triangle, { width: 100, height: 100 }); ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬æŠŠâ€œTriangleâ€å†™æˆshapeTypeå¯¹è±¡çš„triangleå±æ€§ï¼Œè¿™æ ·å°±æ¶ˆé™¤äº†å¼ºè€¦åˆã€‚ å¦‚æœä»”ç»†åˆ†æï¼Œå¯ä»¥å‘ç°shapeType.triangleç­‰äºå“ªä¸ªå€¼å¹¶ä¸é‡è¦ï¼Œåªè¦ç¡®ä¿ä¸ä¼šè·Ÿå…¶ä»–shapeTypeå±æ€§çš„å€¼å†²çªå³å¯ã€‚å› æ­¤ï¼Œè¿™é‡Œå°±å¾ˆé€‚åˆæ”¹ç”¨Symbolå€¼ã€‚ const shapeType = { triangle: Symbol() }; ä¸Šé¢ä»£ç ä¸­ï¼Œé™¤äº†å°†shapeType.triangleçš„å€¼è®¾ä¸ºä¸€ä¸ªSymbolï¼Œå…¶ä»–åœ°æ–¹éƒ½ä¸ç”¨ä¿®æ”¹ã€‚ å±æ€§åçš„éå†Symbol ä½œä¸ºå±æ€§åï¼Œè¯¥å±æ€§ä¸ä¼šå‡ºç°åœ¨for...inã€for...ofå¾ªç¯ä¸­ï¼Œä¹Ÿä¸ä¼šè¢«Object.keys()ã€Object.getOwnPropertyNames()ã€JSON.stringify()è¿”å›ã€‚ä½†æ˜¯ï¼Œå®ƒä¹Ÿä¸æ˜¯ç§æœ‰å±æ€§ï¼Œæœ‰ä¸€ä¸ªObject.getOwnPropertySymbolsæ–¹æ³•ï¼Œå¯ä»¥è·å–æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰ Symbol å±æ€§åã€‚ Object.getOwnPropertySymbolsæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å½“å‰å¯¹è±¡çš„æ‰€æœ‰ç”¨ä½œå±æ€§åçš„ Symbol å€¼ã€‚ var obj = {}; var a = Symbol(&#39;a&#39;); var b = Symbol(&#39;b&#39;); obj[a] = &#39;Hello&#39;; obj[b] = &#39;World&#39;; var objectSymbols = Object.getOwnPropertySymbols(obj); objectSymbols // [Symbol(a), Symbol(b)] ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼ŒObject.getOwnPropertySymbolsæ–¹æ³•ä¸for...inå¾ªç¯ã€Object.getOwnPropertyNamesæ–¹æ³•è¿›è¡Œå¯¹æ¯”çš„ä¾‹å­ã€‚ var obj = {}; var foo = Symbol(&quot;foo&quot;); Object.defineProperty(obj, foo, { value: &quot;foobar&quot;, }); for (var i in obj) { console.log(i); // æ— è¾“å‡º } Object.getOwnPropertyNames(obj) // [] Object.getOwnPropertySymbols(obj) // [Symbol(foo)] ä¸Šé¢ä»£ç ä¸­ï¼Œä½¿ç”¨Object.getOwnPropertyNamesæ–¹æ³•å¾—ä¸åˆ°Symbolå±æ€§åï¼Œéœ€è¦ä½¿ç”¨Object.getOwnPropertySymbolsæ–¹æ³•ã€‚ å¦ä¸€ä¸ªæ–°çš„APIï¼ŒReflect.ownKeysæ–¹æ³•å¯ä»¥è¿”å›æ‰€æœ‰ç±»å‹çš„é”®åï¼ŒåŒ…æ‹¬å¸¸è§„é”®åå’Œ Symbol é”®åã€‚ let obj = { [Symbol(&#39;my_key&#39;)]: 1, enum: 2, nonEnum: 3 }; Reflect.ownKeys(obj) // [&quot;enum&quot;, &quot;nonEnum&quot;, Symbol(my_key)] ç”±äºä»¥ Symbol å€¼ä½œä¸ºåç§°çš„å±æ€§ï¼Œä¸ä¼šè¢«å¸¸è§„æ–¹æ³•éå†å¾—åˆ°ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œä¸ºå¯¹è±¡å®šä¹‰ä¸€äº›éç§æœ‰çš„ã€ä½†åˆå¸Œæœ›åªç”¨äºå†…éƒ¨çš„æ–¹æ³•ã€‚ var size = Symbol(&#39;size&#39;); class Collection { constructor() { this[size] = 0; } add(item) { this[this[size]] = item; this[size]++; } static sizeOf(instance) { return instance[size]; } } var x = new Collection(); Collection.sizeOf(x) // 0 x.add(&#39;foo&#39;); Collection.sizeOf(x) // 1 Object.keys(x) // [&#39;0&#39;] Object.getOwnPropertyNames(x) // [&#39;0&#39;] Object.getOwnPropertySymbols(x) // [Symbol(size)] ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡xçš„sizeå±æ€§æ˜¯ä¸€ä¸ª Symbol å€¼ï¼Œæ‰€ä»¥Object.keys(x)ã€Object.getOwnPropertyNames(x)éƒ½æ— æ³•è·å–å®ƒã€‚è¿™å°±é€ æˆäº†ä¸€ç§éç§æœ‰çš„å†…éƒ¨æ–¹æ³•çš„æ•ˆæœã€‚ Symbol.for()ï¼ŒSymbol.keyFor()æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›é‡æ–°ä½¿ç”¨åŒä¸€ä¸ªSymbolå€¼ï¼ŒSymbol.foræ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç„¶åæœç´¢æœ‰æ²¡æœ‰ä»¥è¯¥å‚æ•°ä½œä¸ºåç§°çš„Symbolå€¼ã€‚å¦‚æœæœ‰ï¼Œå°±è¿”å›è¿™ä¸ªSymbolå€¼ï¼Œå¦åˆ™å°±æ–°å»ºå¹¶è¿”å›ä¸€ä¸ªä»¥è¯¥å­—ç¬¦ä¸²ä¸ºåç§°çš„Symbolå€¼ã€‚ var s1 = Symbol.for(&#39;foo&#39;); var s2 = Symbol.for(&#39;foo&#39;); s1 === s2 // true ä¸Šé¢ä»£ç ä¸­ï¼Œs1å’Œs2éƒ½æ˜¯ Symbol å€¼ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æ˜¯åŒæ ·å‚æ•°çš„Symbol.foræ–¹æ³•ç”Ÿæˆçš„ï¼Œæ‰€ä»¥å®é™…ä¸Šæ˜¯åŒä¸€ä¸ªå€¼ã€‚ Symbol.for()ä¸Symbol()è¿™ä¸¤ç§å†™æ³•ï¼Œéƒ½ä¼šç”Ÿæˆæ–°çš„Symbolã€‚å®ƒä»¬çš„åŒºåˆ«æ˜¯ï¼Œå‰è€…ä¼šè¢«ç™»è®°åœ¨å…¨å±€ç¯å¢ƒä¸­ä¾›æœç´¢ï¼Œåè€…ä¸ä¼šã€‚Symbol.for()ä¸ä¼šæ¯æ¬¡è°ƒç”¨å°±è¿”å›ä¸€ä¸ªæ–°çš„ Symbol ç±»å‹çš„å€¼ï¼Œè€Œæ˜¯ä¼šå…ˆæ£€æŸ¥ç»™å®šçš„keyæ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨æ‰ä¼šæ–°å»ºä¸€ä¸ªå€¼ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ è°ƒç”¨Symbol.for(&quot;cat&quot;)30æ¬¡ï¼Œæ¯æ¬¡éƒ½ä¼šè¿”å›åŒä¸€ä¸ª Symbol å€¼ï¼Œä½†æ˜¯è°ƒç”¨Symbol(&quot;cat&quot;)30æ¬¡ï¼Œä¼šè¿”å›30ä¸ªä¸åŒçš„Symbolå€¼ã€‚ Symbol.for(&quot;bar&quot;) === Symbol.for(&quot;bar&quot;) // true Symbol(&quot;bar&quot;) === Symbol(&quot;bar&quot;) // false ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºSymbol()å†™æ³•æ²¡æœ‰ç™»è®°æœºåˆ¶ï¼Œæ‰€ä»¥æ¯æ¬¡è°ƒç”¨éƒ½ä¼šè¿”å›ä¸€ä¸ªä¸åŒçš„å€¼ã€‚ Symbol.keyForæ–¹æ³•è¿”å›ä¸€ä¸ªå·²ç™»è®°çš„ Symbol ç±»å‹å€¼çš„keyã€‚ var s1 = Symbol.for(&quot;foo&quot;); Symbol.keyFor(s1) // &quot;foo&quot; var s2 = Symbol(&quot;foo&quot;); Symbol.keyFor(s2) // undefined ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡s2å±äºæœªç™»è®°çš„Symbolå€¼ï¼Œæ‰€ä»¥è¿”å›undefinedã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSymbol.forä¸ºSymbolå€¼ç™»è®°çš„åå­—ï¼Œæ˜¯å…¨å±€ç¯å¢ƒçš„ï¼Œå¯ä»¥åœ¨ä¸åŒçš„ iframe æˆ– service worker ä¸­å–åˆ°åŒä¸€ä¸ªå€¼ã€‚ iframe = document.createElement(&#39;iframe&#39;); iframe.src = String(window.location); document.body.appendChild(iframe); iframe.contentWindow.Symbol.for(&#39;foo&#39;) === Symbol.for(&#39;foo&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œiframe çª—å£ç”Ÿæˆçš„ Symbol å€¼ï¼Œå¯ä»¥åœ¨ä¸»é¡µé¢å¾—åˆ°ã€‚ å®ä¾‹ï¼šæ¨¡å—çš„ Singleton æ¨¡å¼Singletonæ¨¡å¼æŒ‡çš„æ˜¯è°ƒç”¨ä¸€ä¸ªç±»ï¼Œä»»ä½•æ—¶å€™è¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚ å¯¹äºNodeæ¥è¯´ï¼Œæ¨¡å—æ–‡ä»¶å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªç±»ã€‚æ€ä¹ˆä¿è¯æ¯æ¬¡æ‰§è¡Œè¿™ä¸ªæ¨¡å—æ–‡ä»¶ï¼Œè¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹å‘¢ï¼Ÿ å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œå¯ä»¥æŠŠå®ä¾‹æ”¾åˆ°é¡¶å±‚å¯¹è±¡globalã€‚ // mod.js function A() { this.foo = &#39;hello&#39;; } if (!global._foo) { global._foo = new A(); } module.exports = global._foo; ç„¶åï¼ŒåŠ è½½ä¸Šé¢çš„mod.jsã€‚ var a = require(&#39;./mod.js&#39;); console.log(a.foo); ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡aä»»ä½•æ—¶å€™åŠ è½½çš„éƒ½æ˜¯Açš„åŒä¸€ä¸ªå®ä¾‹ã€‚ ä½†æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå…¨å±€å˜é‡global._fooæ˜¯å¯å†™çš„ï¼Œä»»ä½•æ–‡ä»¶éƒ½å¯ä»¥ä¿®æ”¹ã€‚ var a = require(&#39;./mod.js&#39;); global._foo = 123; ä¸Šé¢çš„ä»£ç ï¼Œä¼šä½¿å¾—åˆ«çš„è„šæœ¬åŠ è½½mod.jséƒ½å¤±çœŸã€‚ ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µå‡ºç°ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Symbolã€‚ // mod.js const FOO_KEY = Symbol.for(&#39;foo&#39;); function A() { this.foo = &#39;hello&#39;; } if (!global[FOO_KEY]) { global[FOO_KEY] = new A(); } module.exports = global[FOO_KEY]; ä¸Šé¢ä»£ç ä¸­ï¼Œå¯ä»¥ä¿è¯global[FOO_KEY]ä¸ä¼šè¢«æ— æ„é—´è¦†ç›–ï¼Œä½†è¿˜æ˜¯å¯ä»¥è¢«æ”¹å†™ã€‚ var a = require(&#39;./mod.js&#39;); global[Symbol.for(&#39;foo&#39;)] = 123; å¦‚æœé”®åä½¿ç”¨Symbolæ–¹æ³•ç”Ÿæˆï¼Œé‚£ä¹ˆå¤–éƒ¨å°†æ— æ³•å¼•ç”¨è¿™ä¸ªå€¼ï¼Œå½“ç„¶ä¹Ÿå°±æ— æ³•æ”¹å†™ã€‚ // mod.js const FOO_KEY = Symbol(&#39;foo&#39;); // åé¢ä»£ç ç›¸åŒ â€¦â€¦ ä¸Šé¢ä»£ç å°†å¯¼è‡´å…¶ä»–è„šæœ¬éƒ½æ— æ³•å¼•ç”¨FOO_KEYã€‚ä½†è¿™æ ·ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœå¤šæ¬¡æ‰§è¡Œè¿™ä¸ªè„šæœ¬ï¼Œæ¯æ¬¡å¾—åˆ°çš„FOO_KEYéƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚è™½ç„¶Nodeä¼šå°†è„šæœ¬çš„æ‰§è¡Œç»“æœç¼“å­˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸ä¼šå¤šæ¬¡æ‰§è¡ŒåŒä¸€ä¸ªè„šæœ¬ï¼Œä½†æ˜¯ç”¨æˆ·å¯ä»¥æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜ï¼Œæ‰€ä»¥ä¹Ÿä¸æ˜¯å®Œå…¨å¯é ã€‚ å†…ç½®çš„Symbolå€¼é™¤äº†å®šä¹‰è‡ªå·±ä½¿ç”¨çš„Symbolå€¼ä»¥å¤–ï¼ŒES6è¿˜æä¾›äº†11ä¸ªå†…ç½®çš„Symbolå€¼ï¼ŒæŒ‡å‘è¯­è¨€å†…éƒ¨ä½¿ç”¨çš„æ–¹æ³•ã€‚ Symbol.hasInstanceå¯¹è±¡çš„Symbol.hasInstanceå±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå†…éƒ¨æ–¹æ³•ã€‚å½“å…¶ä»–å¯¹è±¡ä½¿ç”¨instanceofè¿ç®—ç¬¦ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºè¯¥å¯¹è±¡çš„å®ä¾‹æ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚æ¯”å¦‚ï¼Œfoo instanceof Fooåœ¨è¯­è¨€å†…éƒ¨ï¼Œå®é™…è°ƒç”¨çš„æ˜¯Foo[Symbol.hasInstance](foo)ã€‚ class MyClass { [Symbol.hasInstance](foo) { return foo instanceof Array; } } [1, 2, 3] instanceof new MyClass() // true ä¸Šé¢ä»£ç ä¸­ï¼ŒMyClassæ˜¯ä¸€ä¸ªç±»ï¼Œnew MyClass()ä¼šè¿”å›ä¸€ä¸ªå®ä¾‹ã€‚è¯¥å®ä¾‹çš„Symbol.hasInstanceæ–¹æ³•ï¼Œä¼šåœ¨è¿›è¡Œinstanceofè¿ç®—æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œåˆ¤æ–­å·¦ä¾§çš„è¿ç®—å­æ˜¯å¦ä¸ºArrayçš„å®ä¾‹ã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ class Even { static [Symbol.hasInstance](obj) { return Number(obj) % 2 === 0; } } 1 instanceof Even // false 2 instanceof Even // true 12345 instanceof Even // false Symbol.isConcatSpreadableå¯¹è±¡çš„Symbol.isConcatSpreadableå±æ€§ç­‰äºä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡ä½¿ç”¨Array.prototype.concat()æ—¶ï¼Œæ˜¯å¦å¯ä»¥å±•å¼€ã€‚ let arr1 = [&#39;c&#39;, &#39;d&#39;]; [&#39;a&#39;, &#39;b&#39;].concat(arr1, &#39;e&#39;) // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;] arr1[Symbol.isConcatSpreadable] // undefined let arr2 = [&#39;c&#39;, &#39;d&#39;]; arr2[Symbol.isConcatSpreadable] = false; [&#39;a&#39;, &#39;b&#39;].concat(arr2, &#39;e&#39;) // [&#39;a&#39;, &#39;b&#39;, [&#39;c&#39;,&#39;d&#39;], &#39;e&#39;] ä¸Šé¢ä»£ç è¯´æ˜ï¼Œæ•°ç»„çš„é»˜è®¤è¡Œä¸ºæ˜¯å¯ä»¥å±•å¼€ã€‚Symbol.isConcatSpreadableå±æ€§ç­‰äºtrueæˆ–undefinedï¼Œéƒ½æœ‰è¿™ä¸ªæ•ˆæœã€‚ ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ä¹Ÿå¯ä»¥å±•å¼€ï¼Œä½†å®ƒçš„Symbol.isConcatSpreadableå±æ€§é»˜è®¤ä¸ºfalseï¼Œå¿…é¡»æ‰‹åŠ¨æ‰“å¼€ã€‚ let obj = {length: 2, 0: &#39;c&#39;, 1: &#39;d&#39;}; [&#39;a&#39;, &#39;b&#39;].concat(obj, &#39;e&#39;) // [&#39;a&#39;, &#39;b&#39;, obj, &#39;e&#39;] obj[Symbol.isConcatSpreadable] = true; [&#39;a&#39;, &#39;b&#39;].concat(obj, &#39;e&#39;) // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;] å¯¹äºä¸€ä¸ªç±»æ¥è¯´ï¼ŒSymbol.isConcatSpreadableå±æ€§å¿…é¡»å†™æˆå®ä¾‹çš„å±æ€§ã€‚ class A1 extends Array { constructor(args) { super(args); this[Symbol.isConcatSpreadable] = true; } } class A2 extends Array { constructor(args) { super(args); this[Symbol.isConcatSpreadable] = false; } } let a1 = new A1(); a1[0] = 3; a1[1] = 4; let a2 = new A2(); a2[0] = 5; a2[1] = 6; [1, 2].concat(a1).concat(a2) // [1, 2, 3, 4, [5, 6]] ä¸Šé¢ä»£ç ä¸­ï¼Œç±»A1æ˜¯å¯å±•å¼€çš„ï¼Œç±»A2æ˜¯ä¸å¯å±•å¼€çš„ï¼Œæ‰€ä»¥ä½¿ç”¨concatæ—¶æœ‰ä¸ä¸€æ ·çš„ç»“æœã€‚ Symbol.specieså¯¹è±¡çš„Symbol.specieså±æ€§ï¼ŒæŒ‡å‘å½“å‰å¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚åˆ›é€ å®ä¾‹æ—¶ï¼Œé»˜è®¤ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå³ä½¿ç”¨è¿™ä¸ªå±æ€§è¿”å›çš„å‡½æ•°å½“ä½œæ„é€ å‡½æ•°ï¼Œæ¥åˆ›é€ æ–°çš„å®ä¾‹å¯¹è±¡ã€‚ class MyArray extends Array { // è¦†ç›–çˆ¶ç±» Array çš„æ„é€ å‡½æ•° static get [Symbol.species]() { return Array; } } ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»MyArrayç»§æ‰¿äº†çˆ¶ç±»Arrayã€‚åˆ›å»ºMyArrayçš„å®ä¾‹å¯¹è±¡æ—¶ï¼Œæœ¬æ¥ä¼šè°ƒç”¨å®ƒè‡ªå·±çš„æ„é€ å‡½æ•°ï¼ˆæœ¬ä¾‹ä¸­è¢«çœç•¥äº†ï¼‰ï¼Œä½†æ˜¯ç”±äºå®šä¹‰äº†Symbol.specieså±æ€§ï¼Œæ‰€ä»¥ä¼šä½¿ç”¨è¿™ä¸ªå±æ€§è¿”å›çš„çš„å‡½æ•°ï¼Œåˆ›å»ºMyArrayçš„å®ä¾‹ã€‚ è¿™ä¸ªä¾‹å­ä¹Ÿè¯´æ˜ï¼Œå®šä¹‰Symbol.specieså±æ€§è¦é‡‡ç”¨getè¯»å–å™¨ã€‚é»˜è®¤çš„Symbol.specieså±æ€§ç­‰åŒäºä¸‹é¢çš„å†™æ³•ã€‚ static get [Symbol.species]() { return this; } ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ class MyArray extends Array { static get [Symbol.species]() { return Array; } } var a = new MyArray(1,2,3); var mapped = a.map(x =&gt; x * x); mapped instanceof MyArray // false mapped instanceof Array // true ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºæ„é€ å‡½æ•°è¢«æ›¿æ¢æˆäº†Arrayã€‚æ‰€ä»¥ï¼Œmappedå¯¹è±¡ä¸æ˜¯MyArrayçš„å®ä¾‹ï¼Œè€Œæ˜¯Arrayçš„å®ä¾‹ã€‚ Symbol.matchå¯¹è±¡çš„Symbol.matchå±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå‡½æ•°ã€‚å½“æ‰§è¡Œstr.match(myObject)æ—¶ï¼Œå¦‚æœè¯¥å±æ€§å­˜åœ¨ï¼Œä¼šè°ƒç”¨å®ƒï¼Œè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚ String.prototype.match(regexp) // ç­‰åŒäº regexp[Symbol.match](this) class MyMatcher { [Symbol.match](string) { return &#39;hello world&#39;.indexOf(string); } } &#39;e&#39;.match(new MyMatcher()) // 1 Symbol.replaceå¯¹è±¡çš„Symbol.replaceå±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªæ–¹æ³•ï¼Œå½“è¯¥å¯¹è±¡è¢«String.prototype.replaceæ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚ String.prototype.replace(searchValue, replaceValue) // ç­‰åŒäº searchValue[Symbol.replace](this, replaceValue) ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ const x = {}; x[Symbol.replace] = (...s) =&gt; console.log(s); &#39;Hello&#39;.replace(x, &#39;World&#39;) // [&quot;Hello&quot;, &quot;World&quot;] Symbol.replaceæ–¹æ³•ä¼šæ”¶åˆ°ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯replaceæ–¹æ³•æ­£åœ¨ä½œç”¨çš„å¯¹è±¡ï¼Œä¸Šé¢ä¾‹å­æ˜¯Helloï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ›¿æ¢åçš„å€¼ï¼Œä¸Šé¢ä¾‹å­æ˜¯Worldã€‚ Symbol.searchå¯¹è±¡çš„Symbol.searchå±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªæ–¹æ³•ï¼Œå½“è¯¥å¯¹è±¡è¢«String.prototype.searchæ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚ String.prototype.search(regexp) // ç­‰åŒäº regexp[Symbol.search](this) class MySearch { constructor(value) { this.value = value; } [Symbol.search](string) { return string.indexOf(this.value); } } &#39;foobar&#39;.search(new MySearch(&#39;foo&#39;)) // 0 Symbol.splitå¯¹è±¡çš„Symbol.splitå±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªæ–¹æ³•ï¼Œå½“è¯¥å¯¹è±¡è¢«String.prototype.splitæ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚ String.prototype.split(separator, limit) // ç­‰åŒäº separator[Symbol.split](this, limit) ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ class MySplitter { constructor(value) { this.value = value; } [Symbol.split](string) { var index = string.indexOf(this.value); if (index === -1) { return string; } return [ string.substr(0, index), string.substr(index + this.value.length) ]; } } &#39;foobar&#39;.split(new MySplitter(&#39;foo&#39;)) // [&#39;&#39;, &#39;bar&#39;] &#39;foobar&#39;.split(new MySplitter(&#39;bar&#39;)) // [&#39;foo&#39;, &#39;&#39;] &#39;foobar&#39;.split(new MySplitter(&#39;baz&#39;)) // &#39;foobar&#39; ä¸Šé¢æ–¹æ³•ä½¿ç”¨Symbol.splitæ–¹æ³•ï¼Œé‡æ–°å®šä¹‰äº†å­—ç¬¦ä¸²å¯¹è±¡çš„splitæ–¹æ³•çš„è¡Œä¸ºï¼Œ Symbol.iteratorå¯¹è±¡çš„Symbol.iteratorå±æ€§ï¼ŒæŒ‡å‘è¯¥å¯¹è±¡çš„é»˜è®¤éå†å™¨æ–¹æ³•ã€‚ var myIterable = {}; myIterable[Symbol.iterator] = function* () { yield 1; yield 2; yield 3; }; [...myIterable] // [1, 2, 3] å¯¹è±¡è¿›è¡Œfor...ofå¾ªç¯æ—¶ï¼Œä¼šè°ƒç”¨Symbol.iteratoræ–¹æ³•ï¼Œè¿”å›è¯¥å¯¹è±¡çš„é»˜è®¤éå†å™¨ï¼Œè¯¦ç»†ä»‹ç»å‚è§ã€ŠIteratorå’Œforâ€¦ofå¾ªç¯ã€‹ä¸€ç« ã€‚ class Collection { *[Symbol.iterator]() { let i = 0; while(this[i] !== undefined) { yield this[i]; ++i; } } } let myCollection = new Collection(); myCollection[0] = 1; myCollection[1] = 2; for(let value of myCollection) { console.log(value); } // 1 // 2 Symbol.toPrimitiveå¯¹è±¡çš„Symbol.toPrimitiveå±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªæ–¹æ³•ã€‚è¯¥å¯¹è±¡è¢«è½¬ä¸ºåŸå§‹ç±»å‹çš„å€¼æ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿”å›è¯¥å¯¹è±¡å¯¹åº”çš„åŸå§‹ç±»å‹å€¼ã€‚ Symbol.toPrimitiveè¢«è°ƒç”¨æ—¶ï¼Œä¼šæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œè¡¨ç¤ºå½“å‰è¿ç®—çš„æ¨¡å¼ï¼Œä¸€å…±æœ‰ä¸‰ç§æ¨¡å¼ã€‚ Numberï¼šè¯¥åœºåˆéœ€è¦è½¬æˆæ•°å€¼ Stringï¼šè¯¥åœºåˆéœ€è¦è½¬æˆå­—ç¬¦ä¸² Defaultï¼šè¯¥åœºåˆå¯ä»¥è½¬æˆæ•°å€¼ï¼Œä¹Ÿå¯ä»¥è½¬æˆå­—ç¬¦ä¸² let obj = { [Symbol.toPrimitive](hint) { switch (hint) { case &#39;number&#39;: return 123; case &#39;string&#39;: return &#39;str&#39;; case &#39;default&#39;: return &#39;default&#39;; default: throw new Error(); } } }; 2 * obj // 246 3 + obj // &#39;3default&#39; obj == &#39;default&#39; // true String(obj) // &#39;str&#39; Symbol.toStringTagå¯¹è±¡çš„Symbol.toStringTagå±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªæ–¹æ³•ã€‚åœ¨è¯¥å¯¹è±¡ä¸Šé¢è°ƒç”¨Object.prototype.toStringæ–¹æ³•æ—¶ï¼Œå¦‚æœè¿™ä¸ªå±æ€§å­˜åœ¨ï¼Œå®ƒçš„è¿”å›å€¼ä¼šå‡ºç°åœ¨toStringæ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²ä¹‹ä¸­ï¼Œè¡¨ç¤ºå¯¹è±¡çš„ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥ç”¨æ¥å®šåˆ¶[object Object]æˆ–[object Array]ä¸­objectåé¢çš„é‚£ä¸ªå­—ç¬¦ä¸²ã€‚ // ä¾‹ä¸€ ({[Symbol.toStringTag]: &#39;Foo&#39;}.toString()) // &quot;[object Foo]&quot; // ä¾‹äºŒ class Collection { get [Symbol.toStringTag]() { return &#39;xxx&#39;; } } var x = new Collection(); Object.prototype.toString.call(x) // &quot;[object xxx]&quot; ES6æ–°å¢å†…ç½®å¯¹è±¡çš„Symbol.toStringTagå±æ€§å€¼å¦‚ä¸‹ã€‚ JSON[Symbol.toStringTag]ï¼šâ€™JSONâ€™ Math[Symbol.toStringTag]ï¼šâ€™Mathâ€™ Moduleå¯¹è±¡M[Symbol.toStringTag]ï¼šâ€™Moduleâ€™ ArrayBuffer.prototype[Symbol.toStringTag]ï¼šâ€™ArrayBufferâ€™ DataView.prototype[Symbol.toStringTag]ï¼šâ€™DataViewâ€™ Map.prototype[Symbol.toStringTag]ï¼šâ€™Mapâ€™ Promise.prototype[Symbol.toStringTag]ï¼šâ€™Promiseâ€™ Set.prototype[Symbol.toStringTag]ï¼šâ€™Setâ€™ %TypedArray%.prototype[Symbol.toStringTag]ï¼šâ€™Uint8Arrayâ€™ç­‰ WeakMap.prototype[Symbol.toStringTag]ï¼šâ€™WeakMapâ€™ WeakSet.prototype[Symbol.toStringTag]ï¼šâ€™WeakSetâ€™ %MapIteratorPrototype%[Symbol.toStringTag]ï¼šâ€™Map Iteratorâ€™ %SetIteratorPrototype%[Symbol.toStringTag]ï¼šâ€™Set Iteratorâ€™ %StringIteratorPrototype%[Symbol.toStringTag]ï¼šâ€™String Iteratorâ€™ Symbol.prototype[Symbol.toStringTag]ï¼šâ€™Symbolâ€™ Generator.prototype[Symbol.toStringTag]ï¼šâ€™Generatorâ€™ GeneratorFunction.prototype[Symbol.toStringTag]ï¼šâ€™GeneratorFunctionâ€™ Symbol.unscopableså¯¹è±¡çš„Symbol.unscopableså±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å¯¹è±¡æŒ‡å®šäº†ä½¿ç”¨withå…³é”®å­—æ—¶ï¼Œå“ªäº›å±æ€§ä¼šè¢«withç¯å¢ƒæ’é™¤ã€‚ Array.prototype[Symbol.unscopables] // { // copyWithin: true, // entries: true, // fill: true, // find: true, // findIndex: true, // keys: true // } Object.keys(Array.prototype[Symbol.unscopables]) // [&#39;copyWithin&#39;, &#39;entries&#39;, &#39;fill&#39;, &#39;find&#39;, &#39;findIndex&#39;, &#39;keys&#39;] ä¸Šé¢ä»£ç è¯´æ˜ï¼Œæ•°ç»„æœ‰6ä¸ªå±æ€§ï¼Œä¼šè¢«withå‘½ä»¤æ’é™¤ã€‚ // æ²¡æœ‰unscopablesæ—¶ class MyClass { foo() { return 1; } } var foo = function () { return 2; }; with (MyClass.prototype) { foo(); // 1 } // æœ‰unscopablesæ—¶ class MyClass { foo() { return 1; } get [Symbol.unscopables]() { return { foo: true }; } } var foo = function () { return 2; }; with (MyClass.prototype) { foo(); // 2 }","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Symbol","slug":"Symbol","permalink":"https://microzz.com/tags/Symbol/"}]},{"title":"å¯¹è±¡çš„æ‰©å±•(Object)","date":"2016-12-25T04:45:19.000Z","path":"2016/12/25/object/","text":"å¯¹è±¡çš„æ‰©å±•å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•ES6å…è®¸ç›´æ¥å†™å…¥å˜é‡å’Œå‡½æ•°ï¼Œä½œä¸ºå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚è¿™æ ·çš„ä¹¦å†™æ›´åŠ ç®€æ´ã€‚ var foo = &#39;bar&#39;; var baz = {foo}; baz // {foo: &quot;bar&quot;} // ç­‰åŒäº var baz = {foo: foo}; ä¸Šé¢ä»£ç è¡¨æ˜ï¼ŒES6 å…è®¸åœ¨å¯¹è±¡ä¹‹ä¸­ï¼Œç›´æ¥å†™å˜é‡ã€‚è¿™æ—¶ï¼Œå±æ€§åä¸ºå˜é‡å, å±æ€§å€¼ä¸ºå˜é‡çš„å€¼ã€‚ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ function f(x, y) { return {x, y}; } // ç­‰åŒäº function f(x, y) { return {x: x, y: y}; } f(1, 2) // Object {x: 1, y: 2} é™¤äº†å±æ€§ç®€å†™ï¼Œæ–¹æ³•ä¹Ÿå¯ä»¥ç®€å†™ã€‚ var o = { method() { return &quot;Hello!&quot;; } }; // ç­‰åŒäº var o = { method: function() { return &quot;Hello!&quot;; } }; ä¸‹é¢æ˜¯ä¸€ä¸ªå®é™…çš„ä¾‹å­ã€‚ var birth = &#39;2000/01/01&#39;; var Person = { name: &#39;å¼ ä¸‰&#39;, //ç­‰åŒäºbirth: birth birth, // ç­‰åŒäºhello: function ()... hello() { console.log(&#39;æˆ‘çš„åå­—æ˜¯&#39;, this.name); } }; è¿™ç§å†™æ³•ç”¨äºå‡½æ•°çš„è¿”å›å€¼ï¼Œå°†ä¼šéå¸¸æ–¹ä¾¿ã€‚ function getPoint() { var x = 1; var y = 10; return {x, y}; } getPoint() // {x:1, y:10} CommonJSæ¨¡å—è¾“å‡ºå˜é‡ï¼Œå°±éå¸¸åˆé€‚ä½¿ç”¨ç®€æ´å†™æ³•ã€‚ var ms = {}; function getItem (key) { return key in ms ? ms[key] : null; } function setItem (key, value) { ms[key] = value; } function clear () { ms = {}; } module.exports = { getItem, setItem, clear }; // ç­‰åŒäº module.exports = { getItem: getItem, setItem: setItem, clear: clear }; å±æ€§çš„èµ‹å€¼å™¨ï¼ˆsetterï¼‰å’Œå–å€¼å™¨ï¼ˆgetterï¼‰ï¼Œäº‹å®ä¸Šä¹Ÿæ˜¯é‡‡ç”¨è¿™ç§å†™æ³•ã€‚ var cart = { _wheels: 4, get wheels () { return this._wheels; }, set wheels (value) { if (value &lt; this._wheels) { throw new Error(&#39;æ•°å€¼å¤ªå°äº†ï¼&#39;); } this._wheels = value; } } æ³¨æ„ï¼Œç®€æ´å†™æ³•çš„å±æ€§åæ€»æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™ä¼šå¯¼è‡´ä¸€äº›çœ‹ä¸Šå»æ¯”è¾ƒå¥‡æ€ªçš„ç»“æœã€‚ var obj = { class () {} }; // ç­‰åŒäº var obj = { &#39;class&#39;: function() {} }; ä¸Šé¢ä»£ç ä¸­ï¼Œclassæ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¸ä¼šå› ä¸ºå®ƒå±äºå…³é”®å­—ï¼Œè€Œå¯¼è‡´è¯­æ³•è§£ææŠ¥é”™ã€‚ å¦‚æœæŸä¸ªæ–¹æ³•çš„å€¼æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼Œå‰é¢éœ€è¦åŠ ä¸Šæ˜Ÿå·ã€‚ var obj = { * m(){ yield &#39;hello world&#39;; } }; å±æ€§åè¡¨è¾¾å¼JavaScriptè¯­è¨€å®šä¹‰å¯¹è±¡çš„å±æ€§ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ã€‚ // æ–¹æ³•ä¸€ obj.foo = true; // æ–¹æ³•äºŒ obj[&#39;a&#39; + &#39;bc&#39;] = 123; ä¸Šé¢ä»£ç çš„æ–¹æ³•ä¸€æ˜¯ç›´æ¥ç”¨æ ‡è¯†ç¬¦ä½œä¸ºå±æ€§åï¼Œæ–¹æ³•äºŒæ˜¯ç”¨è¡¨è¾¾å¼ä½œä¸ºå±æ€§åï¼Œè¿™æ—¶è¦å°†è¡¨è¾¾å¼æ”¾åœ¨æ–¹æ‹¬å·ä¹‹å†…ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨å­—é¢é‡æ–¹å¼å®šä¹‰å¯¹è±¡ï¼ˆä½¿ç”¨å¤§æ‹¬å·ï¼‰ï¼Œåœ¨ ES5 ä¸­åªèƒ½ä½¿ç”¨æ–¹æ³•ä¸€ï¼ˆæ ‡è¯†ç¬¦ï¼‰å®šä¹‰å±æ€§ã€‚ var obj = { foo: true, abc: 123 }; ES6 å…è®¸å­—é¢é‡å®šä¹‰å¯¹è±¡æ—¶ï¼Œç”¨æ–¹æ³•äºŒï¼ˆè¡¨è¾¾å¼ï¼‰ä½œä¸ºå¯¹è±¡çš„å±æ€§åï¼Œå³æŠŠè¡¨è¾¾å¼æ”¾åœ¨æ–¹æ‹¬å·å†…ã€‚ let propKey = &#39;foo&#39;; let obj = { [propKey]: true, [&#39;a&#39; + &#39;bc&#39;]: 123 }; ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ var lastWord = &#39;last word&#39;; var a = { &#39;first word&#39;: &#39;hello&#39;, [lastWord]: &#39;world&#39; }; a[&#39;first word&#39;] // &quot;hello&quot; a[lastWord] // &quot;world&quot; a[&#39;last word&#39;] // &quot;world&quot; è¡¨è¾¾å¼è¿˜å¯ä»¥ç”¨äºå®šä¹‰æ–¹æ³•åã€‚ let obj = { [&#39;h&#39; + &#39;ello&#39;]() { return &#39;hi&#39;; } }; obj.hello() // hi æ³¨æ„ï¼Œå±æ€§åè¡¨è¾¾å¼ä¸ç®€æ´è¡¨ç¤ºæ³•ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œä¼šæŠ¥é”™ã€‚ // æŠ¥é”™ var foo = &#39;bar&#39;; var bar = &#39;abc&#39;; var baz = { [foo] }; // æ­£ç¡® var foo = &#39;bar&#39;; var baz = { [foo]: &#39;abc&#39;}; æ³¨æ„ï¼Œå±æ€§åè¡¨è¾¾å¼å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šè‡ªåŠ¨å°†å¯¹è±¡è½¬ä¸ºå­—ç¬¦ä¸²[object Object]ï¼Œè¿™ä¸€ç‚¹è¦ç‰¹åˆ«å°å¿ƒã€‚ const keyA = {a: 1}; const keyB = {b: 2}; const myObject = { [keyA]: &#39;valueA&#39;, [keyB]: &#39;valueB&#39; }; myObject // Object {[object Object]: &quot;valueB&quot;} ä¸Šé¢ä»£ç ä¸­ï¼Œ[keyA]å’Œ[keyB]å¾—åˆ°çš„éƒ½æ˜¯[object Object]ï¼Œæ‰€ä»¥[keyB]ä¼šæŠŠ[keyA]è¦†ç›–æ‰ï¼Œè€ŒmyObjectæœ€ååªæœ‰ä¸€ä¸ª[object Object]å±æ€§ã€‚ æ–¹æ³•çš„ name å±æ€§å‡½æ•°çš„nameå±æ€§ï¼Œè¿”å›å‡½æ•°åã€‚å¯¹è±¡æ–¹æ³•ä¹Ÿæ˜¯å‡½æ•°ï¼Œå› æ­¤ä¹Ÿæœ‰nameå±æ€§ã€‚ const person = { sayName() { console.log(&#39;hello!&#39;); }, }; person.sayName.name // &quot;sayName&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œæ–¹æ³•çš„nameå±æ€§è¿”å›å‡½æ•°åï¼ˆå³æ–¹æ³•åï¼‰ã€‚ å¦‚æœå¯¹è±¡çš„æ–¹æ³•ä½¿ç”¨äº†å–å€¼å‡½æ•°ï¼ˆgetterï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆsetterï¼‰ï¼Œåˆ™nameå±æ€§ä¸æ˜¯åœ¨è¯¥æ–¹æ³•ä¸Šé¢ï¼Œè€Œæ˜¯è¯¥æ–¹æ³•çš„å±æ€§çš„æè¿°å¯¹è±¡çš„getå’Œsetå±æ€§ä¸Šé¢ï¼Œè¿”å›å€¼æ˜¯æ–¹æ³•åå‰åŠ ä¸Šgetå’Œsetã€‚ const obj = { get foo() {}, set foo(x) {} }; obj.foo.name // TypeError: Cannot read property &#39;name&#39; of undefined const descriptor = Object.getOwnPropertyDescriptor(obj, &#39;foo&#39;); descriptor.get.name // &quot;get foo&quot; descriptor.set.name // &quot;set foo&quot; æœ‰ä¸¤ç§ç‰¹æ®Šæƒ…å†µï¼šbindæ–¹æ³•åˆ›é€ çš„å‡½æ•°ï¼Œnameå±æ€§è¿”å›boundåŠ ä¸ŠåŸå‡½æ•°çš„åå­—ï¼›Functionæ„é€ å‡½æ•°åˆ›é€ çš„å‡½æ•°ï¼Œnameå±æ€§è¿”å›anonymousã€‚ (new Function()).name // &quot;anonymous&quot; var doSomething = function() { // ... }; doSomething.bind().name // &quot;bound doSomething&quot; å¦‚æœå¯¹è±¡çš„æ–¹æ³•æ˜¯ä¸€ä¸ª Symbol å€¼ï¼Œé‚£ä¹ˆnameå±æ€§è¿”å›çš„æ˜¯è¿™ä¸ª Symbol å€¼çš„æè¿°ã€‚ const key1 = Symbol(&#39;description&#39;); const key2 = Symbol(); let obj = { [key1]() {}, [key2]() {}, }; obj[key1].name // &quot;[description]&quot; obj[key2].name // &quot;&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œkey1å¯¹åº”çš„ Symbol å€¼æœ‰æè¿°ï¼Œkey2æ²¡æœ‰ã€‚ Object.is()ES5æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œåªæœ‰ä¸¤ä¸ªè¿ç®—ç¬¦ï¼šç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ==ï¼‰å’Œä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ===ï¼‰ã€‚å®ƒä»¬éƒ½æœ‰ç¼ºç‚¹ï¼Œå‰è€…ä¼šè‡ªåŠ¨è½¬æ¢æ•°æ®ç±»å‹ï¼Œåè€…çš„NaNä¸ç­‰äºè‡ªèº«ï¼Œä»¥åŠ+0ç­‰äº-0ã€‚JavaScriptç¼ºä¹ä¸€ç§è¿ç®—ï¼Œåœ¨æ‰€æœ‰ç¯å¢ƒä¸­ï¼Œåªè¦ä¸¤ä¸ªå€¼æ˜¯ä¸€æ ·çš„ï¼Œå®ƒä»¬å°±åº”è¯¥ç›¸ç­‰ã€‚ ES6æå‡ºâ€œSame-value equalityâ€ï¼ˆåŒå€¼ç›¸ç­‰ï¼‰ç®—æ³•ï¼Œç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚Object.iså°±æ˜¯éƒ¨ç½²è¿™ä¸ªç®—æ³•çš„æ–°æ–¹æ³•ã€‚å®ƒç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ï¼Œä¸ä¸¥æ ¼æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆ===ï¼‰çš„è¡Œä¸ºåŸºæœ¬ä¸€è‡´ã€‚ Object.is(&#39;foo&#39;, &#39;foo&#39;) // true Object.is({}, {}) // false ä¸åŒä¹‹å¤„åªæœ‰ä¸¤ä¸ªï¼šä¸€æ˜¯+0ä¸ç­‰äº-0ï¼ŒäºŒæ˜¯NaNç­‰äºè‡ªèº«ã€‚ +0 === -0 //true NaN === NaN // false Object.is(+0, -0) // false Object.is(NaN, NaN) // true ES5å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œéƒ¨ç½²Object.isã€‚ Object.defineProperty(Object, &#39;is&#39;, { value: function(x, y) { if (x === y) { // é’ˆå¯¹+0 ä¸ç­‰äº -0çš„æƒ…å†µ return x !== 0 || 1 / x === 1 / y; } // é’ˆå¯¹NaNçš„æƒ…å†µ return x !== x &amp;&amp; y !== y; }, configurable: true, enumerable: false, writable: true }); Object.assign()åŸºæœ¬ç”¨æ³•Object.assignæ–¹æ³•ç”¨äºå¯¹è±¡çš„åˆå¹¶ï¼Œå°†æºå¯¹è±¡ï¼ˆsourceï¼‰çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆtargetï¼‰ã€‚ var target = { a: 1 }; var source1 = { b: 2 }; var source2 = { c: 3 }; Object.assign(target, source1, source2); target // {a:1, b:2, c:3} Object.assignæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„å‚æ•°éƒ½æ˜¯æºå¯¹è±¡ã€‚ æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸æºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œæˆ–å¤šä¸ªæºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œåˆ™åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§ã€‚ var target = { a: 1, b: 1 }; var source1 = { b: 2, c: 2 }; var source2 = { c: 3 }; Object.assign(target, source1, source2); target // {a:1, b:2, c:3} å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼ŒObject.assignä¼šç›´æ¥è¿”å›è¯¥å‚æ•°ã€‚ var obj = {a: 1}; Object.assign(obj) === obj // true å¦‚æœè¯¥å‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™ä¼šå…ˆè½¬æˆå¯¹è±¡ï¼Œç„¶åè¿”å›ã€‚ typeof Object.assign(2) // &quot;object&quot; ç”±äºundefinedå’Œnullæ— æ³•è½¬æˆå¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœå®ƒä»¬ä½œä¸ºå‚æ•°ï¼Œå°±ä¼šæŠ¥é”™ã€‚ Object.assign(undefined) // æŠ¥é”™ Object.assign(null) // æŠ¥é”™ å¦‚æœéå¯¹è±¡å‚æ•°å‡ºç°åœ¨æºå¯¹è±¡çš„ä½ç½®ï¼ˆå³éé¦–å‚æ•°ï¼‰ï¼Œé‚£ä¹ˆå¤„ç†è§„åˆ™æœ‰æ‰€ä¸åŒã€‚é¦–å…ˆï¼Œè¿™äº›å‚æ•°éƒ½ä¼šè½¬æˆå¯¹è±¡ï¼Œå¦‚æœæ— æ³•è½¬æˆå¯¹è±¡ï¼Œå°±ä¼šè·³è¿‡ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœundefinedå’Œnullä¸åœ¨é¦–å‚æ•°ï¼Œå°±ä¸ä¼šæŠ¥é”™ã€‚ let obj = {a: 1}; Object.assign(obj, undefined) === obj // true Object.assign(obj, null) === obj // true å…¶ä»–ç±»å‹çš„å€¼ï¼ˆå³æ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼‰ä¸åœ¨é¦–å‚æ•°ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ä½†æ˜¯ï¼Œé™¤äº†å­—ç¬¦ä¸²ä¼šä»¥æ•°ç»„å½¢å¼ï¼Œæ‹·è´å…¥ç›®æ ‡å¯¹è±¡ï¼Œå…¶ä»–å€¼éƒ½ä¸ä¼šäº§ç”Ÿæ•ˆæœã€‚ var v1 = &#39;abc&#39;; var v2 = true; var v3 = 10; var obj = Object.assign({}, v1, v2, v3); console.log(obj); // { &quot;0&quot;: &quot;a&quot;, &quot;1&quot;: &quot;b&quot;, &quot;2&quot;: &quot;c&quot; } ä¸Šé¢ä»£ç ä¸­ï¼Œv1ã€v2ã€v3åˆ†åˆ«æ˜¯å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼å’Œæ•°å€¼ï¼Œç»“æœåªæœ‰å­—ç¬¦ä¸²åˆå…¥ç›®æ ‡å¯¹è±¡ï¼ˆä»¥å­—ç¬¦æ•°ç»„çš„å½¢å¼ï¼‰ï¼Œæ•°å€¼å’Œå¸ƒå°”å€¼éƒ½ä¼šè¢«å¿½ç•¥ã€‚è¿™æ˜¯å› ä¸ºåªæœ‰å­—ç¬¦ä¸²çš„åŒ…è£…å¯¹è±¡ï¼Œä¼šäº§ç”Ÿå¯æšä¸¾å±æ€§ã€‚ Object(true) // {[[PrimitiveValue]]: true} Object(10) // {[[PrimitiveValue]]: 10} Object(&#39;abc&#39;) // {0: &quot;a&quot;, 1: &quot;b&quot;, 2: &quot;c&quot;, length: 3, [[PrimitiveValue]]: &quot;abc&quot;} ä¸Šé¢ä»£ç ä¸­ï¼Œå¸ƒå°”å€¼ã€æ•°å€¼ã€å­—ç¬¦ä¸²åˆ†åˆ«è½¬æˆå¯¹åº”çš„åŒ…è£…å¯¹è±¡ï¼Œå¯ä»¥çœ‹åˆ°å®ƒä»¬çš„åŸå§‹å€¼éƒ½åœ¨åŒ…è£…å¯¹è±¡çš„å†…éƒ¨å±æ€§[[PrimitiveValue]]ä¸Šé¢ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸ä¼šè¢«Object.assignæ‹·è´çš„ã€‚åªæœ‰å­—ç¬¦ä¸²çš„åŒ…è£…å¯¹è±¡ï¼Œä¼šäº§ç”Ÿå¯æšä¸¾çš„å®ä¹‰å±æ€§ï¼Œé‚£äº›å±æ€§åˆ™ä¼šè¢«æ‹·è´ã€‚ Object.assignæ‹·è´çš„å±æ€§æ˜¯æœ‰é™åˆ¶çš„ï¼Œåªæ‹·è´æºå¯¹è±¡çš„è‡ªèº«å±æ€§ï¼ˆä¸æ‹·è´ç»§æ‰¿å±æ€§ï¼‰ï¼Œä¹Ÿä¸æ‹·è´ä¸å¯æšä¸¾çš„å±æ€§ï¼ˆenumerable: falseï¼‰ã€‚ Object.assign({b: &#39;c&#39;}, Object.defineProperty({}, &#39;invisible&#39;, { enumerable: false, value: &#39;hello&#39; }) ) // { b: &#39;c&#39; } ä¸Šé¢ä»£ç ä¸­ï¼ŒObject.assignè¦æ‹·è´çš„å¯¹è±¡åªæœ‰ä¸€ä¸ªä¸å¯æšä¸¾å±æ€§invisibleï¼Œè¿™ä¸ªå±æ€§å¹¶æ²¡æœ‰è¢«æ‹·è´è¿›å»ã€‚ å±æ€§åä¸ºSymbolå€¼çš„å±æ€§ï¼Œä¹Ÿä¼šè¢«Object.assignæ‹·è´ã€‚ Object.assign({ a: &#39;b&#39; }, { [Symbol(&#39;c&#39;)]: &#39;d&#39; }) // { a: &#39;b&#39;, Symbol(c): &#39;d&#39; } æ³¨æ„ç‚¹Object.assignæ–¹æ³•å®è¡Œçš„æ˜¯æµ…æ‹·è´ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæºå¯¹è±¡æŸä¸ªå±æ€§çš„å€¼æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆç›®æ ‡å¯¹è±¡æ‹·è´å¾—åˆ°çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚ var obj1 = {a: {b: 1}}; var obj2 = Object.assign({}, obj1); obj1.a.b = 2; obj2.a.b // 2 ä¸Šé¢ä»£ç ä¸­ï¼Œæºå¯¹è±¡obj1çš„aå±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒObject.assignæ‹·è´å¾—åˆ°çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚è¿™ä¸ªå¯¹è±¡çš„ä»»ä½•å˜åŒ–ï¼Œéƒ½ä¼šåæ˜ åˆ°ç›®æ ‡å¯¹è±¡ä¸Šé¢ã€‚ å¯¹äºè¿™ç§åµŒå¥—çš„å¯¹è±¡ï¼Œä¸€æ—¦é‡åˆ°åŒåå±æ€§ï¼ŒObject.assignçš„å¤„ç†æ–¹æ³•æ˜¯æ›¿æ¢ï¼Œè€Œä¸æ˜¯æ·»åŠ ã€‚ var target = { a: { b: &#39;c&#39;, d: &#39;e&#39; } } var source = { a: { b: &#39;hello&#39; } } Object.assign(target, source) // { a: { b: &#39;hello&#39; } } ä¸Šé¢ä»£ç ä¸­ï¼Œtargetå¯¹è±¡çš„aå±æ€§è¢«sourceå¯¹è±¡çš„aå±æ€§æ•´ä¸ªæ›¿æ¢æ‰äº†ï¼Œè€Œä¸ä¼šå¾—åˆ°{ a: { b: &#39;hello&#39;, d: &#39;e&#39; } }çš„ç»“æœã€‚è¿™é€šå¸¸ä¸æ˜¯å¼€å‘è€…æƒ³è¦çš„ï¼Œéœ€è¦ç‰¹åˆ«å°å¿ƒã€‚ æœ‰ä¸€äº›å‡½æ•°åº“æä¾›Object.assignçš„å®šåˆ¶ç‰ˆæœ¬ï¼ˆæ¯”å¦‚Lodashçš„_.defaultsDeepæ–¹æ³•ï¼‰ï¼Œå¯ä»¥è§£å†³æµ…æ‹·è´çš„é—®é¢˜ï¼Œå¾—åˆ°æ·±æ‹·è´çš„åˆå¹¶ã€‚ æ³¨æ„ï¼ŒObject.assignå¯ä»¥ç”¨æ¥å¤„ç†æ•°ç»„ï¼Œä½†æ˜¯ä¼šæŠŠæ•°ç»„è§†ä¸ºå¯¹è±¡ã€‚ Object.assign([1, 2, 3], [4, 5]) // [4, 5, 3] ä¸Šé¢ä»£ç ä¸­ï¼ŒObject.assignæŠŠæ•°ç»„è§†ä¸ºå±æ€§åä¸º0ã€1ã€2çš„å¯¹è±¡ï¼Œå› æ­¤æºæ•°ç»„çš„0å·å±æ€§4è¦†ç›–äº†ç›®æ ‡æ•°ç»„çš„0å·å±æ€§1ã€‚ å¸¸è§ç”¨é€”Object.assignæ–¹æ³•æœ‰å¾ˆå¤šç”¨å¤„ã€‚ ï¼ˆ1ï¼‰ä¸ºå¯¹è±¡æ·»åŠ å±æ€§ class Point { constructor(x, y) { Object.assign(this, {x, y}); } } ä¸Šé¢æ–¹æ³•é€šè¿‡Object.assignæ–¹æ³•ï¼Œå°†xå±æ€§å’Œyå±æ€§æ·»åŠ åˆ°Pointç±»çš„å¯¹è±¡å®ä¾‹ã€‚ ï¼ˆ2ï¼‰ä¸ºå¯¹è±¡æ·»åŠ æ–¹æ³• Object.assign(SomeClass.prototype, { someMethod(arg1, arg2) { Â·Â·Â· }, anotherMethod() { Â·Â·Â· } }); // ç­‰åŒäºä¸‹é¢çš„å†™æ³• SomeClass.prototype.someMethod = function (arg1, arg2) { Â·Â·Â· }; SomeClass.prototype.anotherMethod = function () { Â·Â·Â· }; ä¸Šé¢ä»£ç ä½¿ç”¨äº†å¯¹è±¡å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•ï¼Œç›´æ¥å°†ä¸¤ä¸ªå‡½æ•°æ”¾åœ¨å¤§æ‹¬å·ä¸­ï¼Œå†ä½¿ç”¨assignæ–¹æ³•æ·»åŠ åˆ°SomeClass.prototypeä¹‹ä¸­ã€‚ ï¼ˆ3ï¼‰å…‹éš†å¯¹è±¡ function clone(origin) { return Object.assign({}, origin); } ä¸Šé¢ä»£ç å°†åŸå§‹å¯¹è±¡æ‹·è´åˆ°ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå°±å¾—åˆ°äº†åŸå§‹å¯¹è±¡çš„å…‹éš†ã€‚ ä¸è¿‡ï¼Œé‡‡ç”¨è¿™ç§æ–¹æ³•å…‹éš†ï¼Œåªèƒ½å…‹éš†åŸå§‹å¯¹è±¡è‡ªèº«çš„å€¼ï¼Œä¸èƒ½å…‹éš†å®ƒç»§æ‰¿çš„å€¼ã€‚å¦‚æœæƒ³è¦ä¿æŒç»§æ‰¿é“¾ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„ä»£ç ã€‚ function clone(origin) { let originProto = Object.getPrototypeOf(origin); return Object.assign(Object.create(originProto), origin); } ï¼ˆ4ï¼‰åˆå¹¶å¤šä¸ªå¯¹è±¡ å°†å¤šä¸ªå¯¹è±¡åˆå¹¶åˆ°æŸä¸ªå¯¹è±¡ã€‚ const merge = (target, ...sources) =&gt; Object.assign(target, ...sources); å¦‚æœå¸Œæœ›åˆå¹¶åè¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¯ä»¥æ”¹å†™ä¸Šé¢å‡½æ•°ï¼Œå¯¹ä¸€ä¸ªç©ºå¯¹è±¡åˆå¹¶ã€‚ const merge = (...sources) =&gt; Object.assign({}, ...sources); ï¼ˆ5ï¼‰ä¸ºå±æ€§æŒ‡å®šé»˜è®¤å€¼ const DEFAULTS = { logLevel: 0, outputFormat: &#39;html&#39; }; function processContent(options) { options = Object.assign({}, DEFAULTS, options); } ä¸Šé¢ä»£ç ä¸­ï¼ŒDEFAULTSå¯¹è±¡æ˜¯é»˜è®¤å€¼ï¼Œoptionså¯¹è±¡æ˜¯ç”¨æˆ·æä¾›çš„å‚æ•°ã€‚Object.assignæ–¹æ³•å°†DEFAULTSå’Œoptionsåˆå¹¶æˆä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¦‚æœä¸¤è€…æœ‰åŒåå±æ€§ï¼Œåˆ™optionçš„å±æ€§å€¼ä¼šè¦†ç›–DEFAULTSçš„å±æ€§å€¼ã€‚ æ³¨æ„ï¼Œç”±äºå­˜åœ¨æ·±æ‹·è´çš„é—®é¢˜ï¼ŒDEFAULTSå¯¹è±¡å’Œoptionså¯¹è±¡çš„æ‰€æœ‰å±æ€§çš„å€¼ï¼Œéƒ½åªèƒ½æ˜¯ç®€å•ç±»å‹ï¼Œè€Œä¸èƒ½æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚å¦åˆ™ï¼Œå°†å¯¼è‡´DEFAULTSå¯¹è±¡çš„è¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚ å±æ€§çš„å¯æšä¸¾æ€§å¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªæè¿°å¯¹è±¡ï¼ˆDescriptorï¼‰ï¼Œç”¨æ¥æ§åˆ¶è¯¥å±æ€§çš„è¡Œä¸ºã€‚Object.getOwnPropertyDescriptoræ–¹æ³•å¯ä»¥è·å–è¯¥å±æ€§çš„æè¿°å¯¹è±¡ã€‚ let obj = { foo: 123 }; Object.getOwnPropertyDescriptor(obj, &#39;foo&#39;) // { // value: 123, // writable: true, // enumerable: true, // configurable: true // } æè¿°å¯¹è±¡çš„enumerableå±æ€§ï¼Œç§°ä¸ºâ€å¯æšä¸¾æ€§â€œï¼Œå¦‚æœè¯¥å±æ€§ä¸ºfalseï¼Œå°±è¡¨ç¤ºæŸäº›æ“ä½œä¼šå¿½ç•¥å½“å‰å±æ€§ã€‚ ES5æœ‰ä¸‰ä¸ªæ“ä½œä¼šå¿½ç•¥enumerableä¸ºfalseçš„å±æ€§ã€‚ for...inå¾ªç¯ï¼šåªéå†å¯¹è±¡è‡ªèº«çš„å’Œç»§æ‰¿çš„å¯æšä¸¾çš„å±æ€§ Object.keys()ï¼šè¿”å›å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å¯æšä¸¾çš„å±æ€§çš„é”®å JSON.stringify()ï¼šåªä¸²è¡ŒåŒ–å¯¹è±¡è‡ªèº«çš„å¯æšä¸¾çš„å±æ€§ ES6æ–°å¢äº†ä¸€ä¸ªæ“ä½œObject.assign()ï¼Œä¼šå¿½ç•¥enumerableä¸ºfalseçš„å±æ€§ï¼Œåªæ‹·è´å¯¹è±¡è‡ªèº«çš„å¯æšä¸¾çš„å±æ€§ã€‚ è¿™å››ä¸ªæ“ä½œä¹‹ä¸­ï¼Œåªæœ‰for...inä¼šè¿”å›ç»§æ‰¿çš„å±æ€§ã€‚å®é™…ä¸Šï¼Œå¼•å…¥enumerableçš„æœ€åˆç›®çš„ï¼Œå°±æ˜¯è®©æŸäº›å±æ€§å¯ä»¥è§„é¿æ‰for...inæ“ä½œã€‚æ¯”å¦‚ï¼Œå¯¹è±¡åŸå‹çš„toStringæ–¹æ³•ï¼Œä»¥åŠæ•°ç»„çš„lengthå±æ€§ï¼Œå°±é€šè¿‡è¿™ç§æ‰‹æ®µï¼Œä¸ä¼šè¢«for...inéå†åˆ°ã€‚ Object.getOwnPropertyDescriptor(Object.prototype, &#39;toString&#39;).enumerable // false Object.getOwnPropertyDescriptor([], &#39;length&#39;).enumerable // false ä¸Šé¢ä»£ç ä¸­ï¼ŒtoStringå’Œlengthå±æ€§çš„enumerableéƒ½æ˜¯falseï¼Œå› æ­¤for...inä¸ä¼šéå†åˆ°è¿™ä¸¤ä¸ªç»§æ‰¿è‡ªåŸå‹çš„å±æ€§ã€‚ å¦å¤–ï¼ŒES6è§„å®šï¼Œæ‰€æœ‰Classçš„åŸå‹çš„æ–¹æ³•éƒ½æ˜¯ä¸å¯æšä¸¾çš„ã€‚ Object.getOwnPropertyDescriptor(class {foo() {}}.prototype, &#39;foo&#39;).enumerable // false æ€»çš„æ¥è¯´ï¼Œæ“ä½œä¸­å¼•å…¥ç»§æ‰¿çš„å±æ€§ä¼šè®©é—®é¢˜å¤æ‚åŒ–ï¼Œå¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬åªå…³å¿ƒå¯¹è±¡è‡ªèº«çš„å±æ€§ã€‚æ‰€ä»¥ï¼Œå°½é‡ä¸è¦ç”¨for...inå¾ªç¯ï¼Œè€Œç”¨Object.keys()ä»£æ›¿ã€‚ å±æ€§çš„éå†ES6ä¸€å…±æœ‰5ç§æ–¹æ³•å¯ä»¥éå†å¯¹è±¡çš„å±æ€§ã€‚ ï¼ˆ1ï¼‰forâ€¦in for...inå¾ªç¯éå†å¯¹è±¡è‡ªèº«çš„å’Œç»§æ‰¿çš„å¯æšä¸¾å±æ€§ï¼ˆä¸å«Symbolå±æ€§ï¼‰ã€‚ ï¼ˆ2ï¼‰Object.keys(obj) Object.keysè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…æ‹¬å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼ˆä¸å«Symbolå±æ€§ï¼‰ã€‚ ï¼ˆ3ï¼‰Object.getOwnPropertyNames(obj) Object.getOwnPropertyNamesè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ï¼ˆä¸å«Symbolå±æ€§ï¼Œä½†æ˜¯åŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ï¼‰ã€‚ ï¼ˆ4ï¼‰Object.getOwnPropertySymbols(obj) Object.getOwnPropertySymbolsè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰Symbolå±æ€§ã€‚ ï¼ˆ5ï¼‰Reflect.ownKeys(obj) Reflect.ownKeysè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ï¼Œä¸ç®¡æ˜¯å±æ€§åæ˜¯Symbolæˆ–å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸ç®¡æ˜¯å¦å¯æšä¸¾ã€‚ ä»¥ä¸Šçš„5ç§æ–¹æ³•éå†å¯¹è±¡çš„å±æ€§ï¼Œéƒ½éµå®ˆåŒæ ·çš„å±æ€§éå†çš„æ¬¡åºè§„åˆ™ã€‚ é¦–å…ˆéå†æ‰€æœ‰å±æ€§åä¸ºæ•°å€¼çš„å±æ€§ï¼ŒæŒ‰ç…§æ•°å­—æ’åºã€‚ å…¶æ¬¡éå†æ‰€æœ‰å±æ€§åä¸ºå­—ç¬¦ä¸²çš„å±æ€§ï¼ŒæŒ‰ç…§ç”Ÿæˆæ—¶é—´æ’åºã€‚ æœ€åéå†æ‰€æœ‰å±æ€§åä¸ºSymbolå€¼çš„å±æ€§ï¼ŒæŒ‰ç…§ç”Ÿæˆæ—¶é—´æ’åºã€‚ Reflect.ownKeys({ [Symbol()]:0, b:0, 10:0, 2:0, a:0 }) // [&#39;2&#39;, &#39;10&#39;, &#39;b&#39;, &#39;a&#39;, Symbol()] ä¸Šé¢ä»£ç ä¸­ï¼ŒReflect.ownKeysæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†å‚æ•°å¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚è¿™ä¸ªæ•°ç»„çš„å±æ€§æ¬¡åºæ˜¯è¿™æ ·çš„ï¼Œé¦–å…ˆæ˜¯æ•°å€¼å±æ€§2å’Œ10ï¼Œå…¶æ¬¡æ˜¯å­—ç¬¦ä¸²å±æ€§bå’Œaï¼Œæœ€åæ˜¯Symbolå±æ€§ã€‚ __proto__å±æ€§ï¼ŒObject.setPrototypeOf()ï¼ŒObject.getPrototypeOf()ï¼ˆ1ï¼‰__proto__å±æ€§ __proto__å±æ€§ï¼ˆå‰åå„ä¸¤ä¸ªä¸‹åˆ’çº¿ï¼‰ï¼Œç”¨æ¥è¯»å–æˆ–è®¾ç½®å½“å‰å¯¹è±¡çš„prototypeå¯¹è±¡ã€‚ç›®å‰ï¼Œæ‰€æœ‰æµè§ˆå™¨ï¼ˆåŒ…æ‹¬IE11ï¼‰éƒ½éƒ¨ç½²äº†è¿™ä¸ªå±æ€§ã€‚ // es6çš„å†™æ³• var obj = { method: function() { ... } }; obj.__proto__ = someOtherObj; // es5çš„å†™æ³• var obj = Object.create(someOtherObj); obj.method = function() { ... }; è¯¥å±æ€§æ²¡æœ‰å†™å…¥ES6çš„æ­£æ–‡ï¼Œè€Œæ˜¯å†™å…¥äº†é™„å½•ï¼ŒåŸå› æ˜¯__proto__å‰åçš„åŒä¸‹åˆ’çº¿ï¼Œè¯´æ˜å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå†…éƒ¨å±æ€§ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ­£å¼çš„å¯¹å¤–çš„APIï¼Œåªæ˜¯ç”±äºæµè§ˆå™¨å¹¿æ³›æ”¯æŒï¼Œæ‰è¢«åŠ å…¥äº†ES6ã€‚æ ‡å‡†æ˜ç¡®è§„å®šï¼Œåªæœ‰æµè§ˆå™¨å¿…é¡»éƒ¨ç½²è¿™ä¸ªå±æ€§ï¼Œå…¶ä»–è¿è¡Œç¯å¢ƒä¸ä¸€å®šéœ€è¦éƒ¨ç½²ï¼Œè€Œä¸”æ–°çš„ä»£ç æœ€å¥½è®¤ä¸ºè¿™ä¸ªå±æ€§æ˜¯ä¸å­˜åœ¨çš„ã€‚å› æ­¤ï¼Œæ— è®ºä»è¯­ä¹‰çš„è§’åº¦ï¼Œè¿˜æ˜¯ä»å…¼å®¹æ€§çš„è§’åº¦ï¼Œéƒ½ä¸è¦ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸‹é¢çš„Object.setPrototypeOf()ï¼ˆå†™æ“ä½œï¼‰ã€Object.getPrototypeOf()ï¼ˆè¯»æ“ä½œï¼‰ã€Object.create()ï¼ˆç”Ÿæˆæ“ä½œï¼‰ä»£æ›¿ã€‚ åœ¨å®ç°ä¸Šï¼Œ__proto__è°ƒç”¨çš„æ˜¯Object.prototype.__proto__ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ã€‚ Object.defineProperty(Object.prototype, &#39;__proto__&#39;, { get() { let _thisObj = Object(this); return Object.getPrototypeOf(_thisObj); }, set(proto) { if (this === undefined || this === null) { throw new TypeError(); } if (!isObject(this)) { return undefined; } if (!isObject(proto)) { return undefined; } let status = Reflect.setPrototypeOf(this, proto); if (!status) { throw new TypeError(); } }, }); function isObject(value) { return Object(value) === value; } å¦‚æœä¸€ä¸ªå¯¹è±¡æœ¬èº«éƒ¨ç½²äº†__proto__å±æ€§ï¼Œåˆ™è¯¥å±æ€§çš„å€¼å°±æ˜¯å¯¹è±¡çš„åŸå‹ã€‚ Object.getPrototypeOf({ __proto__: null }) // null ï¼ˆ2ï¼‰Object.setPrototypeOf() Object.setPrototypeOfæ–¹æ³•çš„ä½œç”¨ä¸__proto__ç›¸åŒï¼Œç”¨æ¥è®¾ç½®ä¸€ä¸ªå¯¹è±¡çš„prototypeå¯¹è±¡ã€‚å®ƒæ˜¯ES6æ­£å¼æ¨èçš„è®¾ç½®åŸå‹å¯¹è±¡çš„æ–¹æ³•ã€‚ // æ ¼å¼ Object.setPrototypeOf(object, prototype) // ç”¨æ³• var o = Object.setPrototypeOf({}, null); è¯¥æ–¹æ³•ç­‰åŒäºä¸‹é¢çš„å‡½æ•°ã€‚ function (obj, proto) { obj.__proto__ = proto; return obj; } ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ let proto = {}; let obj = { x: 10 }; Object.setPrototypeOf(obj, proto); proto.y = 20; proto.z = 40; obj.x // 10 obj.y // 20 obj.z // 40 ä¸Šé¢ä»£ç å°†protoå¯¹è±¡è®¾ä¸ºobjå¯¹è±¡çš„åŸå‹ï¼Œæ‰€ä»¥ä»objå¯¹è±¡å¯ä»¥è¯»å–protoå¯¹è±¡çš„å±æ€§ã€‚ ï¼ˆ3ï¼‰Object.getPrototypeOf() è¯¥æ–¹æ³•ä¸setPrototypeOfæ–¹æ³•é…å¥—ï¼Œç”¨äºè¯»å–ä¸€ä¸ªå¯¹è±¡çš„prototypeå¯¹è±¡ã€‚ Object.getPrototypeOf(obj); ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ function Rectangle() { } var rec = new Rectangle(); Object.getPrototypeOf(rec) === Rectangle.prototype // true Object.setPrototypeOf(rec, Object.prototype); Object.getPrototypeOf(rec) === Rectangle.prototype // false Object.keys()ï¼ŒObject.values()ï¼ŒObject.entries()Object.keys()ES5 å¼•å…¥äº†Object.keysæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®åã€‚ var obj = { foo: &#39;bar&#39;, baz: 42 }; Object.keys(obj) // [&quot;foo&quot;, &quot;baz&quot;] ES2017 å¼•å…¥äº†è·ŸObject.keysé…å¥—çš„Object.valueså’ŒObject.entriesï¼Œä½œä¸ºéå†ä¸€ä¸ªå¯¹è±¡çš„è¡¥å……æ‰‹æ®µã€‚ let {keys, values, entries} = Object; let obj = { a: 1, b: 2, c: 3 }; for (let key of keys(obj)) { console.log(key); // &#39;a&#39;, &#39;b&#39;, &#39;c&#39; } for (let value of values(obj)) { console.log(value); // 1, 2, 3 } for (let [key, value] of entries(obj)) { console.log([key, value]); // [&#39;a&#39;, 1], [&#39;b&#39;, 2], [&#39;c&#39;, 3] } Object.values()Object.valuesæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®å€¼ã€‚ var obj = { foo: &#39;bar&#39;, baz: 42 }; Object.values(obj) // [&quot;bar&quot;, 42] è¿”å›æ•°ç»„çš„æˆå‘˜é¡ºåºï¼Œä¸æœ¬ç« çš„ã€Šå±æ€§çš„éå†ã€‹éƒ¨åˆ†ä»‹ç»çš„æ’åˆ—è§„åˆ™ä¸€è‡´ã€‚ var obj = { 100: &#39;a&#39;, 2: &#39;b&#39;, 7: &#39;c&#39; }; Object.values(obj) // [&quot;b&quot;, &quot;c&quot;, &quot;a&quot;] ä¸Šé¢ä»£ç ä¸­ï¼Œå±æ€§åä¸ºæ•°å€¼çš„å±æ€§ï¼Œæ˜¯æŒ‰ç…§æ•°å€¼å¤§å°ï¼Œä»å°åˆ°å¤§éå†çš„ï¼Œå› æ­¤è¿”å›çš„é¡ºåºæ˜¯bã€cã€aã€‚ Object.valuesåªè¿”å›å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚ var obj = Object.create({}, {p: {value: 42}}); Object.values(obj) // [] ä¸Šé¢ä»£ç ä¸­ï¼ŒObject.createæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ·»åŠ çš„å¯¹è±¡å±æ€§ï¼ˆå±æ€§pï¼‰ï¼Œå¦‚æœä¸æ˜¾å¼å£°æ˜ï¼Œé»˜è®¤æ˜¯ä¸å¯éå†çš„ï¼Œå› ä¸ºpæ˜¯ç»§æ‰¿çš„å±æ€§ï¼Œè€Œä¸æ˜¯å¯¹è±¡è‡ªèº«çš„å±æ€§ã€‚Object.valuesä¸ä¼šè¿”å›è¿™ä¸ªå±æ€§ã€‚ Object.valuesä¼šè¿‡æ»¤å±æ€§åä¸º Symbol å€¼çš„å±æ€§ã€‚ Object.values({ [Symbol()]: 123, foo: &#39;abc&#39; }); // [&#39;abc&#39;] å¦‚æœObject.valuesæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¼šè¿”å›å„ä¸ªå­—ç¬¦ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ã€‚ Object.values(&#39;foo&#39;) // [&#39;f&#39;, &#39;o&#39;, &#39;o&#39;] ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²ä¼šå…ˆè½¬æˆä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ï¼Œå°±æ˜¯è¯¥å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚å› æ­¤ï¼ŒObject.valuesè¿”å›æ¯ä¸ªå±æ€§çš„é”®å€¼ï¼Œå°±æ˜¯å„ä¸ªå­—ç¬¦ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ã€‚ å¦‚æœå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼ŒObject.valuesä¼šå…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡ã€‚ç”±äºæ•°å€¼å’Œå¸ƒå°”å€¼çš„åŒ…è£…å¯¹è±¡ï¼Œéƒ½ä¸ä¼šä¸ºå®ä¾‹æ·»åŠ éç»§æ‰¿çš„å±æ€§ã€‚æ‰€ä»¥ï¼ŒObject.valuesä¼šè¿”å›ç©ºæ•°ç»„ã€‚ Object.values(42) // [] Object.values(true) // [] Object.entriesObject.entriesæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®å€¼å¯¹æ•°ç»„ã€‚ var obj = { foo: &#39;bar&#39;, baz: 42 }; Object.entries(obj) // [ [&quot;foo&quot;, &quot;bar&quot;], [&quot;baz&quot;, 42] ] é™¤äº†è¿”å›å€¼ä¸ä¸€æ ·ï¼Œè¯¥æ–¹æ³•çš„è¡Œä¸ºä¸Object.valuesåŸºæœ¬ä¸€è‡´ã€‚ å¦‚æœåŸå¯¹è±¡çš„å±æ€§åæ˜¯ä¸€ä¸ªSymbolå€¼ï¼Œè¯¥å±æ€§ä¼šè¢«çœç•¥ã€‚ Object.entries({ [Symbol()]: 123, foo: &#39;abc&#39; }); // [ [ &#39;foo&#39;, &#39;abc&#39; ] ] ä¸Šé¢ä»£ç ä¸­ï¼ŒåŸå¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§ï¼ŒObject.entriesåªè¾“å‡ºå±æ€§åéSymbolå€¼çš„å±æ€§ã€‚å°†æ¥å¯èƒ½ä¼šæœ‰Reflect.ownEntries()æ–¹æ³•ï¼Œè¿”å›å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ã€‚ Object.entriesçš„åŸºæœ¬ç”¨é€”æ˜¯éå†å¯¹è±¡çš„å±æ€§ã€‚ let obj = { one: 1, two: 2 }; for (let [k, v] of Object.entries(obj)) { console.log(`${JSON.stringify(k)}: ${JSON.stringify(v)}`); } // &quot;one&quot;: 1 // &quot;two&quot;: 2 Object.entriesæ–¹æ³•çš„ä¸€ä¸ªç”¨å¤„æ˜¯ï¼Œå°†å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„Mapç»“æ„ã€‚ var obj = { foo: &#39;bar&#39;, baz: 42 }; var map = new Map(Object.entries(obj)); map // Map { foo: &quot;bar&quot;, baz: 42 } è‡ªå·±å®ç°Object.entriesæ–¹æ³•ï¼Œéå¸¸ç®€å•ã€‚ // Generatorå‡½æ•°çš„ç‰ˆæœ¬ function* entries(obj) { for (let key of Object.keys(obj)) { yield [key, obj[key]]; } } // éGeneratorå‡½æ•°çš„ç‰ˆæœ¬ function entries(obj) { let arr = []; for (let key of Object.keys(obj)) { arr.push([key, obj[key]]); } return arr; } å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦ç›®å‰ï¼ŒES7æœ‰ä¸€ä¸ªææ¡ˆï¼Œå°†Restè¿ç®—ç¬¦ï¼ˆè§£æ„èµ‹å€¼ï¼‰/æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰å¼•å…¥å¯¹è±¡ã€‚Babelè½¬ç å™¨å·²ç»æ”¯æŒè¿™é¡¹åŠŸèƒ½ã€‚ ï¼ˆ1ï¼‰è§£æ„èµ‹å€¼ å¯¹è±¡çš„è§£æ„èµ‹å€¼ç”¨äºä»ä¸€ä¸ªå¯¹è±¡å–å€¼ï¼Œç›¸å½“äºå°†æ‰€æœ‰å¯éå†çš„ã€ä½†å°šæœªè¢«è¯»å–çš„å±æ€§ï¼Œåˆ†é…åˆ°æŒ‡å®šçš„å¯¹è±¡ä¸Šé¢ã€‚æ‰€æœ‰çš„é”®å’Œå®ƒä»¬çš„å€¼ï¼Œéƒ½ä¼šæ‹·è´åˆ°æ–°å¯¹è±¡ä¸Šé¢ã€‚ let { x, y, ...z } = { x: 1, y: 2, a: 3, b: 4 }; x // 1 y // 2 z // { a: 3, b: 4 } ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡zæ˜¯è§£æ„èµ‹å€¼æ‰€åœ¨çš„å¯¹è±¡ã€‚å®ƒè·å–ç­‰å·å³è¾¹çš„æ‰€æœ‰å°šæœªè¯»å–çš„é”®ï¼ˆaå’Œbï¼‰ï¼Œå°†å®ƒä»¬è¿åŒå€¼ä¸€èµ·æ‹·è´è¿‡æ¥ã€‚ ç”±äºè§£æ„èµ‹å€¼è¦æ±‚ç­‰å·å³è¾¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœç­‰å·å³è¾¹æ˜¯undefinedæˆ–nullï¼Œå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒä»¬æ— æ³•è½¬ä¸ºå¯¹è±¡ã€‚ let { x, y, ...z } = null; // è¿è¡Œæ—¶é”™è¯¯ let { x, y, ...z } = undefined; // è¿è¡Œæ—¶é”™è¯¯ è§£æ„èµ‹å€¼å¿…é¡»æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ let { ...x, y, z } = obj; // å¥æ³•é”™è¯¯ let { x, ...y, ...z } = obj; // å¥æ³•é”™è¯¯ ä¸Šé¢ä»£ç ä¸­ï¼Œè§£æ„èµ‹å€¼ä¸æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚ æ³¨æ„ï¼Œè§£æ„èµ‹å€¼çš„æ‹·è´æ˜¯æµ…æ‹·è´ï¼Œå³å¦‚æœä¸€ä¸ªé”®çš„å€¼æ˜¯å¤åˆç±»å‹çš„å€¼ï¼ˆæ•°ç»„ã€å¯¹è±¡ã€å‡½æ•°ï¼‰ã€é‚£ä¹ˆè§£æ„èµ‹å€¼æ‹·è´çš„æ˜¯è¿™ä¸ªå€¼çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯è¿™ä¸ªå€¼çš„å‰¯æœ¬ã€‚ let obj = { a: { b: 1 } }; let { ...x } = obj; obj.a.b = 2; x.a.b // 2 ä¸Šé¢ä»£ç ä¸­ï¼Œxæ˜¯è§£æ„èµ‹å€¼æ‰€åœ¨çš„å¯¹è±¡ï¼Œæ‹·è´äº†å¯¹è±¡objçš„aå±æ€§ã€‚aå±æ€§å¼•ç”¨äº†ä¸€ä¸ªå¯¹è±¡ï¼Œä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„å€¼ï¼Œä¼šå½±å“åˆ°è§£æ„èµ‹å€¼å¯¹å®ƒçš„å¼•ç”¨ã€‚ å¦å¤–ï¼Œè§£æ„èµ‹å€¼ä¸ä¼šæ‹·è´ç»§æ‰¿è‡ªåŸå‹å¯¹è±¡çš„å±æ€§ã€‚ let o1 = { a: 1 }; let o2 = { b: 2 }; o2.__proto__ = o1; let o3 = { ...o2 }; o3 // { b: 2 } ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡o3æ˜¯o2çš„æ‹·è´ï¼Œä½†æ˜¯åªå¤åˆ¶äº†o2è‡ªèº«çš„å±æ€§ï¼Œæ²¡æœ‰å¤åˆ¶å®ƒçš„åŸå‹å¯¹è±¡o1çš„å±æ€§ã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ var o = Object.create({ x: 1, y: 2 }); o.z = 3; let { x, ...{ y, z } } = o; x // 1 y // undefined z // 3 ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡xæ˜¯å•çº¯çš„è§£æ„èµ‹å€¼ï¼Œæ‰€ä»¥å¯ä»¥è¯»å–ç»§æ‰¿çš„å±æ€§ï¼›è§£æ„èµ‹å€¼äº§ç”Ÿçš„å˜é‡yå’Œzï¼Œåªèƒ½è¯»å–å¯¹è±¡è‡ªèº«çš„å±æ€§ï¼Œæ‰€ä»¥åªæœ‰å˜é‡zå¯ä»¥èµ‹å€¼æˆåŠŸã€‚ è§£æ„èµ‹å€¼çš„ä¸€ä¸ªç”¨å¤„ï¼Œæ˜¯æ‰©å±•æŸä¸ªå‡½æ•°çš„å‚æ•°ï¼Œå¼•å…¥å…¶ä»–æ“ä½œã€‚ function baseFunction({ a, b }) { // ... } function wrapperFunction({ x, y, ...restConfig }) { // ä½¿ç”¨xå’Œyå‚æ•°è¿›è¡Œæ“ä½œ // å…¶ä½™å‚æ•°ä¼ ç»™åŸå§‹å‡½æ•° return baseFunction(restConfig); } ä¸Šé¢ä»£ç ä¸­ï¼ŒåŸå§‹å‡½æ•°baseFunctionæ¥å—aå’Œbä½œä¸ºå‚æ•°ï¼Œå‡½æ•°wrapperFunctionåœ¨baseFunctionçš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ‰©å±•ï¼Œèƒ½å¤Ÿæ¥å—å¤šä½™çš„å‚æ•°ï¼Œå¹¶ä¸”ä¿ç•™åŸå§‹å‡½æ•°çš„è¡Œä¸ºã€‚ ï¼ˆ2ï¼‰æ‰©å±•è¿ç®—ç¬¦ æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰ç”¨äºå–å‡ºå‚æ•°å¯¹è±¡çš„æ‰€æœ‰å¯éå†å±æ€§ï¼Œæ‹·è´åˆ°å½“å‰å¯¹è±¡ä¹‹ä¸­ã€‚ let z = { a: 3, b: 4 }; let n = { ...z }; n // { a: 3, b: 4 } è¿™ç­‰åŒäºä½¿ç”¨Object.assignæ–¹æ³•ã€‚ let aClone = { ...a }; // ç­‰åŒäº let aClone = Object.assign({}, a); æ‰©å±•è¿ç®—ç¬¦å¯ä»¥ç”¨äºåˆå¹¶ä¸¤ä¸ªå¯¹è±¡ã€‚ let ab = { ...a, ...b }; // ç­‰åŒäº let ab = Object.assign({}, a, b); å¦‚æœç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§ï¼Œæ”¾åœ¨æ‰©å±•è¿ç®—ç¬¦åé¢ï¼Œåˆ™æ‰©å±•è¿ç®—ç¬¦å†…éƒ¨çš„åŒåå±æ€§ä¼šè¢«è¦†ç›–æ‰ã€‚ let aWithOverrides = { ...a, x: 1, y: 2 }; // ç­‰åŒäº let aWithOverrides = { ...a, ...{ x: 1, y: 2 } }; // ç­‰åŒäº let x = 1, y = 2, aWithOverrides = { ...a, x, y }; // ç­‰åŒäº let aWithOverrides = Object.assign({}, a, { x: 1, y: 2 }); ä¸Šé¢ä»£ç ä¸­ï¼Œaå¯¹è±¡çš„xå±æ€§å’Œyå±æ€§ï¼Œæ‹·è´åˆ°æ–°å¯¹è±¡åä¼šè¢«è¦†ç›–æ‰ã€‚ è¿™ç”¨æ¥ä¿®æ”¹ç°æœ‰å¯¹è±¡éƒ¨åˆ†çš„éƒ¨åˆ†å±æ€§å°±å¾ˆæ–¹ä¾¿äº†ã€‚ let newVersion = { ...previousVersion, name: &#39;New Name&#39; // Override the name property }; ä¸Šé¢ä»£ç ä¸­ï¼ŒnewVersionå¯¹è±¡è‡ªå®šä¹‰äº†nameå±æ€§ï¼Œå…¶ä»–å±æ€§å…¨éƒ¨å¤åˆ¶è‡ªpreviousVersionå¯¹è±¡ã€‚ å¦‚æœæŠŠè‡ªå®šä¹‰å±æ€§æ”¾åœ¨æ‰©å±•è¿ç®—ç¬¦å‰é¢ï¼Œå°±å˜æˆäº†è®¾ç½®æ–°å¯¹è±¡çš„é»˜è®¤å±æ€§å€¼ã€‚ let aWithDefaults = { x: 1, y: 2, ...a }; // ç­‰åŒäº let aWithDefaults = Object.assign({}, { x: 1, y: 2 }, a); // ç­‰åŒäº let aWithDefaults = Object.assign({ x: 1, y: 2 }, a); æ‰©å±•è¿ç®—ç¬¦çš„å‚æ•°å¯¹è±¡ä¹‹ä¸­ï¼Œå¦‚æœæœ‰å–å€¼å‡½æ•°getï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¼šæ‰§è¡Œçš„ã€‚ // å¹¶ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸ºxå±æ€§åªæ˜¯è¢«å®šä¹‰ï¼Œä½†æ²¡æ‰§è¡Œ let aWithXGetter = { ...a, get x() { throws new Error(&#39;not thrown yet&#39;); } }; // ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸ºxå±æ€§è¢«æ‰§è¡Œäº† let runtimeError = { ...a, ...{ get x() { throws new Error(&#39;thrown now&#39;); } } }; å¦‚æœæ‰©å±•è¿ç®—ç¬¦çš„å‚æ•°æ˜¯nullæˆ–undefinedï¼Œè¿™ä¸ªä¸¤ä¸ªå€¼ä¼šè¢«å¿½ç•¥ï¼Œä¸ä¼šæŠ¥é”™ã€‚ let emptyObject = { ...null, ...undefined }; // ä¸æŠ¥é”™ Object.getOwnPropertyDescriptors()ES5æœ‰ä¸€ä¸ªObject.getOwnPropertyDescriptoræ–¹æ³•ï¼Œè¿”å›æŸä¸ªå¯¹è±¡å±æ€§çš„æè¿°å¯¹è±¡ï¼ˆdescriptorï¼‰ã€‚ var obj = { p: &#39;a&#39; }; Object.getOwnPropertyDescriptor(obj, &#39;p&#39;) // Object { value: &quot;a&quot;, // writable: true, // enumerable: true, // configurable: true // } ES7æœ‰ä¸€ä¸ªææ¡ˆï¼Œæå‡ºäº†Object.getOwnPropertyDescriptorsæ–¹æ³•ï¼Œè¿”å›æŒ‡å®šå¯¹è±¡æ‰€æœ‰è‡ªèº«å±æ€§ï¼ˆéç»§æ‰¿å±æ€§ï¼‰çš„æè¿°å¯¹è±¡ã€‚ const obj = { foo: 123, get bar() { return &#39;abc&#39; } }; Object.getOwnPropertyDescriptors(obj) // { foo: // { value: 123, // writable: true, // enumerable: true, // configurable: true }, // bar: // { get: [Function: bar], // set: undefined, // enumerable: true, // configurable: true } } Object.getOwnPropertyDescriptorsæ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰åŸå¯¹è±¡çš„å±æ€§åéƒ½æ˜¯è¯¥å¯¹è±¡çš„å±æ€§åï¼Œå¯¹åº”çš„å±æ€§å€¼å°±æ˜¯è¯¥å±æ€§çš„æè¿°å¯¹è±¡ã€‚ è¯¥æ–¹æ³•çš„å®ç°éå¸¸å®¹æ˜“ã€‚ function getOwnPropertyDescriptors(obj) { const result = {}; for (let key of Reflect.ownKeys(obj)) { result[key] = Object.getOwnPropertyDescriptor(obj, key); } return result; } è¯¥æ–¹æ³•çš„æå‡ºç›®çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³Object.assign()æ— æ³•æ­£ç¡®æ‹·è´getå±æ€§å’Œsetå±æ€§çš„é—®é¢˜ã€‚ const source = { set foo(value) { console.log(value); } }; const target1 = {}; Object.assign(target1, source); Object.getOwnPropertyDescriptor(target1, &#39;foo&#39;) // { value: undefined, // writable: true, // enumerable: true, // configurable: true } ä¸Šé¢ä»£ç ä¸­ï¼Œsourceå¯¹è±¡çš„fooå±æ€§çš„å€¼æ˜¯ä¸€ä¸ªèµ‹å€¼å‡½æ•°ï¼ŒObject.assignæ–¹æ³•å°†è¿™ä¸ªå±æ€§æ‹·è´ç»™target1å¯¹è±¡ï¼Œç»“æœè¯¥å±æ€§çš„å€¼å˜æˆäº†undefinedã€‚è¿™æ˜¯å› ä¸ºObject.assignæ–¹æ³•æ€»æ˜¯æ‹·è´ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œè€Œä¸ä¼šæ‹·è´å®ƒèƒŒåçš„èµ‹å€¼æ–¹æ³•æˆ–å–å€¼æ–¹æ³•ã€‚ è¿™æ—¶ï¼ŒObject.getOwnPropertyDescriptorsæ–¹æ³•é…åˆObject.definePropertiesæ–¹æ³•ï¼Œå°±å¯ä»¥å®ç°æ­£ç¡®æ‹·è´ã€‚ const source = { set foo(value) { console.log(value); } }; const target2 = {}; Object.defineProperties(target2, Object.getOwnPropertyDescriptors(source)); Object.getOwnPropertyDescriptor(target2, &#39;foo&#39;) // { get: undefined, // set: [Function: foo], // enumerable: true, // configurable: true } ä¸Šé¢ä»£ç ä¸­ï¼Œå°†ä¸¤ä¸ªå¯¹è±¡åˆå¹¶çš„é€»è¾‘æç‚¼å‡ºæ¥ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚ const shallowMerge = (target, source) =&gt; Object.defineProperties( target, Object.getOwnPropertyDescriptors(source) ); Object.getOwnPropertyDescriptorsæ–¹æ³•çš„å¦ä¸€ä¸ªç”¨å¤„ï¼Œæ˜¯é…åˆObject.createæ–¹æ³•ï¼Œå°†å¯¹è±¡å±æ€§å…‹éš†åˆ°ä¸€ä¸ªæ–°å¯¹è±¡ã€‚è¿™å±äºæµ…æ‹·è´ã€‚ const clone = Object.create(Object.getPrototypeOf(obj), Object.getOwnPropertyDescriptors(obj)); // æˆ–è€… const shallowClone = (obj) =&gt; Object.create( Object.getPrototypeOf(obj), Object.getOwnPropertyDescriptors(obj) ); ä¸Šé¢ä»£ç ä¼šå…‹éš†å¯¹è±¡objã€‚ å¦å¤–ï¼ŒObject.getOwnPropertyDescriptorsæ–¹æ³•å¯ä»¥å®ç°ï¼Œä¸€ä¸ªå¯¹è±¡ç»§æ‰¿å¦ä¸€ä¸ªå¯¹è±¡ã€‚ä»¥å‰ï¼Œç»§æ‰¿å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå¸¸å¸¸å†™æˆä¸‹é¢è¿™æ ·ã€‚ const obj = { __proto__: prot, foo: 123, }; ES6è§„å®š__proto__åªæœ‰æµè§ˆå™¨è¦éƒ¨ç½²ï¼Œå…¶ä»–ç¯å¢ƒä¸ç”¨éƒ¨ç½²ã€‚å¦‚æœå»é™¤__proto__ï¼Œä¸Šé¢ä»£ç å°±è¦æ”¹æˆä¸‹é¢è¿™æ ·ã€‚ const obj = Object.create(prot); obj.foo = 123; // æˆ–è€… const obj = Object.assign( Object.create(prot), { foo: 123, } ); æœ‰äº†Object.getOwnPropertyDescriptorsï¼Œæˆ‘ä»¬å°±æœ‰äº†å¦ä¸€ç§å†™æ³•ã€‚ const obj = Object.create( prot, Object.getOwnPropertyDescriptors({ foo: 123, }) ); Object.getOwnPropertyDescriptorsä¹Ÿå¯ä»¥ç”¨æ¥å®ç°Mixinï¼ˆæ··å…¥ï¼‰æ¨¡å¼ã€‚ let mix = (object) =&gt; ({ with: (...mixins) =&gt; mixins.reduce( (c, mixin) =&gt; Object.create( c, Object.getOwnPropertyDescriptors(mixin) ), object) }); // multiple mixins example let a = {a: &#39;a&#39;}; let b = {b: &#39;b&#39;}; let c = {c: &#39;c&#39;}; let d = mix(c).with(a, b); ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡aå’Œbè¢«æ··å…¥äº†å¯¹è±¡cã€‚ å‡ºäºå®Œæ•´æ€§çš„è€ƒè™‘ï¼ŒObject.getOwnPropertyDescriptorsè¿›å…¥æ ‡å‡†ä»¥åï¼Œè¿˜ä¼šæœ‰Reflect.getOwnPropertyDescriptorsæ–¹æ³•ã€‚ å…³äºå†…å®¹æ¥è‡ªé˜®ä¸€å³°è€å¸ˆçš„ã€ŠES6æ ‡å‡†å…¥é—¨ã€‹ï¼Œæ„Ÿè°¢","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Object","slug":"Object","permalink":"https://microzz.com/tags/Object/"}]},{"title":"å‡½æ•°çš„æ‰©å±•(Function)","date":"2016-12-10T07:45:19.000Z","path":"2016/12/10/function/","text":"å‡½æ•°çš„æ‰©å±•å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼åŸºæœ¬ç”¨æ³•åœ¨ES6ä¹‹å‰ï¼Œä¸èƒ½ç›´æ¥ä¸ºå‡½æ•°çš„å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œåªèƒ½é‡‡ç”¨å˜é€šçš„æ–¹æ³•ã€‚ function log(x, y) { y = y || &#39;World&#39;; console.log(x, y); } log(&#39;Hello&#39;) // Hello World log(&#39;Hello&#39;, &#39;China&#39;) // Hello China log(&#39;Hello&#39;, &#39;&#39;) // Hello World ä¸Šé¢ä»£ç æ£€æŸ¥å‡½æ•°logçš„å‚æ•°yæœ‰æ²¡æœ‰èµ‹å€¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æŒ‡å®šé»˜è®¤å€¼ä¸ºWorldã€‚è¿™ç§å†™æ³•çš„ç¼ºç‚¹åœ¨äºï¼Œå¦‚æœå‚æ•°yèµ‹å€¼äº†ï¼Œä½†æ˜¯å¯¹åº”çš„å¸ƒå°”å€¼ä¸ºfalseï¼Œåˆ™è¯¥èµ‹å€¼ä¸èµ·ä½œç”¨ã€‚å°±åƒä¸Šé¢ä»£ç çš„æœ€åä¸€è¡Œï¼Œå‚æ•°yç­‰äºç©ºå­—ç¬¦ï¼Œç»“æœè¢«æ”¹ä¸ºé»˜è®¤å€¼ã€‚ ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œé€šå¸¸éœ€è¦å…ˆåˆ¤æ–­ä¸€ä¸‹å‚æ•°yæ˜¯å¦è¢«èµ‹å€¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå†ç­‰äºé»˜è®¤å€¼ã€‚ if (typeof y === &#39;undefined&#39;) { y = &#39;World&#39;; } ES6å…è®¸ä¸ºå‡½æ•°çš„å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œå³ç›´æ¥å†™åœ¨å‚æ•°å®šä¹‰çš„åé¢ã€‚ function log(x, y = &#39;World&#39;) { console.log(x, y); } log(&#39;Hello&#39;) // Hello World log(&#39;Hello&#39;, &#39;China&#39;) // Hello China log(&#39;Hello&#39;, &#39;&#39;) // Hello å¯ä»¥çœ‹åˆ°ï¼ŒES6çš„å†™æ³•æ¯”ES5ç®€æ´è®¸å¤šï¼Œè€Œä¸”éå¸¸è‡ªç„¶ã€‚ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ function Point(x = 0, y = 0) { this.x = x; this.y = y; } var p = new Point(); p // { x: 0, y: 0 } é™¤äº†ç®€æ´ï¼ŒES6çš„å†™æ³•è¿˜æœ‰ä¸¤ä¸ªå¥½å¤„ï¼šé¦–å…ˆï¼Œé˜…è¯»ä»£ç çš„äººï¼Œå¯ä»¥ç«‹åˆ»æ„è¯†åˆ°å“ªäº›å‚æ•°æ˜¯å¯ä»¥çœç•¥çš„ï¼Œä¸ç”¨æŸ¥çœ‹å‡½æ•°ä½“æˆ–æ–‡æ¡£ï¼›å…¶æ¬¡ï¼Œæœ‰åˆ©äºå°†æ¥çš„ä»£ç ä¼˜åŒ–ï¼Œå³ä½¿æœªæ¥çš„ç‰ˆæœ¬åœ¨å¯¹å¤–æ¥å£ä¸­ï¼Œå½»åº•æ‹¿æ‰è¿™ä¸ªå‚æ•°ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ä»¥å‰çš„ä»£ç æ— æ³•è¿è¡Œã€‚ å‚æ•°å˜é‡æ˜¯é»˜è®¤å£°æ˜çš„ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨letæˆ–constå†æ¬¡å£°æ˜ã€‚ function foo(x = 5) { let x = 1; // error const x = 2; // error } ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°å˜é‡xæ˜¯é»˜è®¤å£°æ˜çš„ï¼Œåœ¨å‡½æ•°ä½“ä¸­ï¼Œä¸èƒ½ç”¨letæˆ–constå†æ¬¡å£°æ˜ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨å‚æ•°é»˜è®¤å€¼å¯ä»¥ä¸è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ï¼Œç»“åˆèµ·æ¥ä½¿ç”¨ã€‚ function foo({x, y = 5}) { console.log(x, y); } foo({}) // undefined, 5 foo({x: 1}) // 1, 5 foo({x: 1, y: 2}) // 1, 2 foo() // TypeError: Cannot read property &#39;x&#39; of undefined ä¸Šé¢ä»£ç ä½¿ç”¨äº†å¯¹è±¡çš„è§£æ„èµ‹å€¼é»˜è®¤å€¼ï¼Œè€Œæ²¡æœ‰ä½¿ç”¨å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ã€‚åªæœ‰å½“å‡½æ•°fooçš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå˜é‡xå’Œyæ‰ä¼šé€šè¿‡è§£æ„èµ‹å€¼è€Œç”Ÿæˆã€‚å¦‚æœå‡½æ•°fooè°ƒç”¨æ—¶å‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œå˜é‡xå’Œyå°±ä¸ä¼šç”Ÿæˆï¼Œä»è€ŒæŠ¥é”™ã€‚å¦‚æœå‚æ•°å¯¹è±¡æ²¡æœ‰yå±æ€§ï¼Œyçš„é»˜è®¤å€¼5æ‰ä¼šç”Ÿæ•ˆã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªå¯¹è±¡çš„è§£æ„èµ‹å€¼é»˜è®¤å€¼çš„ä¾‹å­ã€‚ function fetch(url, { body = &#39;&#39;, method = &#39;GET&#39;, headers = {} }) { console.log(method); } fetch(&#39;http://example.com&#39;, {}) // &quot;GET&quot; fetch(&#39;http://example.com&#39;) // æŠ¥é”™ ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå‡½æ•°fetchçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°±å¯ä»¥ä¸ºå®ƒçš„ä¸‰ä¸ªå±æ€§è®¾ç½®é»˜è®¤å€¼ã€‚ ä¸Šé¢çš„å†™æ³•ä¸èƒ½çœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚æœç»“åˆå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ï¼Œå°±å¯ä»¥çœç•¥ç¬¬äºŒä¸ªå‚æ•°ã€‚è¿™æ—¶ï¼Œå°±å‡ºç°äº†åŒé‡é»˜è®¤å€¼ã€‚ function fetch(url, { method = &#39;GET&#39; } = {}) { console.log(method); } fetch(&#39;http://example.com&#39;) // &quot;GET&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fetchæ²¡æœ‰ç¬¬äºŒä¸ªå‚æ•°æ—¶ï¼Œå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼å°±ä¼šç”Ÿæ•ˆï¼Œç„¶åæ‰æ˜¯è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ç”Ÿæ•ˆï¼Œå˜é‡methodæ‰ä¼šå–åˆ°é»˜è®¤å€¼GETã€‚ å†è¯·é—®ä¸‹é¢ä¸¤ç§å†™æ³•æœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿ // å†™æ³•ä¸€ function m1({x = 0, y = 0} = {}) { return [x, y]; } // å†™æ³•äºŒ function m2({x, y} = { x: 0, y: 0 }) { return [x, y]; } ä¸Šé¢ä¸¤ç§å†™æ³•éƒ½å¯¹å‡½æ•°çš„å‚æ•°è®¾å®šäº†é»˜è®¤å€¼ï¼ŒåŒºåˆ«æ˜¯å†™æ³•ä¸€å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼æ˜¯ç©ºå¯¹è±¡ï¼Œä½†æ˜¯è®¾ç½®äº†å¯¹è±¡è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ï¼›å†™æ³•äºŒå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªæœ‰å…·ä½“å±æ€§çš„å¯¹è±¡ï¼Œä½†æ˜¯æ²¡æœ‰è®¾ç½®å¯¹è±¡è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ã€‚ // å‡½æ•°æ²¡æœ‰å‚æ•°çš„æƒ…å†µ m1() // [0, 0] m2() // [0, 0] // xå’Œyéƒ½æœ‰å€¼çš„æƒ…å†µ m1({x: 3, y: 8}) // [3, 8] m2({x: 3, y: 8}) // [3, 8] // xæœ‰å€¼ï¼Œyæ— å€¼çš„æƒ…å†µ m1({x: 3}) // [3, 0] m2({x: 3}) // [3, undefined] // xå’Œyéƒ½æ— å€¼çš„æƒ…å†µ m1({}) // [0, 0]; m2({}) // [undefined, undefined] m1({z: 3}) // [0, 0] m2({z: 3}) // [undefined, undefined] å‚æ•°é»˜è®¤å€¼çš„ä½ç½®é€šå¸¸æƒ…å†µä¸‹ï¼Œå®šä¹‰äº†é»˜è®¤å€¼çš„å‚æ•°ï¼Œåº”è¯¥æ˜¯å‡½æ•°çš„å°¾å‚æ•°ã€‚å› ä¸ºè¿™æ ·æ¯”è¾ƒå®¹æ˜“çœ‹å‡ºæ¥ï¼Œåˆ°åº•çœç•¥äº†å“ªäº›å‚æ•°ã€‚å¦‚æœéå°¾éƒ¨çš„å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œå®é™…ä¸Šè¿™ä¸ªå‚æ•°æ˜¯æ²¡æ³•çœç•¥çš„ã€‚ // ä¾‹ä¸€ function f(x = 1, y) { return [x, y]; } f() // [1, undefined] f(2) // [2, undefined]) f(, 1) // æŠ¥é”™ f(undefined, 1) // [1, 1] // ä¾‹äºŒ function f(x, y = 5, z) { return [x, y, z]; } f() // [undefined, 5, undefined] f(1) // [1, 5, undefined] f(1, ,2) // æŠ¥é”™ f(1, undefined, 2) // [1, 5, 2] ä¸Šé¢ä»£ç ä¸­ï¼Œæœ‰é»˜è®¤å€¼çš„å‚æ•°éƒ½ä¸æ˜¯å°¾å‚æ•°ã€‚è¿™æ—¶ï¼Œæ— æ³•åªçœç•¥è¯¥å‚æ•°ï¼Œè€Œä¸çœç•¥å®ƒåé¢çš„å‚æ•°ï¼Œé™¤éæ˜¾å¼è¾“å…¥undefinedã€‚ å¦‚æœä¼ å…¥undefinedï¼Œå°†è§¦å‘è¯¥å‚æ•°ç­‰äºé»˜è®¤å€¼ï¼Œnullåˆ™æ²¡æœ‰è¿™ä¸ªæ•ˆæœã€‚ function foo(x = 5, y = 6) { console.log(x, y); } foo(undefined, null) // 5 null ä¸Šé¢ä»£ç ä¸­ï¼Œxå‚æ•°å¯¹åº”undefinedï¼Œç»“æœè§¦å‘äº†é»˜è®¤å€¼ï¼Œyå‚æ•°ç­‰äºnullï¼Œå°±æ²¡æœ‰è§¦å‘é»˜è®¤å€¼ã€‚ å‡½æ•°çš„lengthå±æ€§æŒ‡å®šäº†é»˜è®¤å€¼ä»¥åï¼Œå‡½æ•°çš„lengthå±æ€§ï¼Œå°†è¿”å›æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼çš„å‚æ•°ä¸ªæ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŒ‡å®šäº†é»˜è®¤å€¼åï¼Œlengthå±æ€§å°†å¤±çœŸã€‚ (function (a) {}).length // 1 (function (a = 5) {}).length // 0 (function (a, b, c = 5) {}).length // 2 ä¸Šé¢ä»£ç ä¸­ï¼Œlengthå±æ€§çš„è¿”å›å€¼ï¼Œç­‰äºå‡½æ•°çš„å‚æ•°ä¸ªæ•°å‡å»æŒ‡å®šäº†é»˜è®¤å€¼çš„å‚æ•°ä¸ªæ•°ã€‚æ¯”å¦‚ï¼Œä¸Šé¢æœ€åä¸€ä¸ªå‡½æ•°ï¼Œå®šä¹‰äº†3ä¸ªå‚æ•°ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå‚æ•°cæŒ‡å®šäº†é»˜è®¤å€¼ï¼Œå› æ­¤lengthå±æ€§ç­‰äº3å‡å»1ï¼Œæœ€åå¾—åˆ°2ã€‚ è¿™æ˜¯å› ä¸ºlengthå±æ€§çš„å«ä¹‰æ˜¯ï¼Œè¯¥å‡½æ•°é¢„æœŸä¼ å…¥çš„å‚æ•°ä¸ªæ•°ã€‚æŸä¸ªå‚æ•°æŒ‡å®šé»˜è®¤å€¼ä»¥åï¼Œé¢„æœŸä¼ å…¥çš„å‚æ•°ä¸ªæ•°å°±ä¸åŒ…æ‹¬è¿™ä¸ªå‚æ•°äº†ã€‚åŒç†ï¼Œrestå‚æ•°ä¹Ÿä¸ä¼šè®¡å…¥lengthå±æ€§ã€‚ (function(...args) {}).length // 0 å¦‚æœè®¾ç½®äº†é»˜è®¤å€¼çš„å‚æ•°ä¸æ˜¯å°¾å‚æ•°ï¼Œé‚£ä¹ˆlengthå±æ€§ä¹Ÿä¸å†è®¡å…¥åé¢çš„å‚æ•°äº†ã€‚ (function (a = 0, b, c) {}).length // 0 (function (a, b = 1, c) {}).length // 1 ä½œç”¨åŸŸä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œå¦‚æœå‚æ•°é»˜è®¤å€¼æ˜¯ä¸€ä¸ªå˜é‡ï¼Œåˆ™è¯¥å˜é‡æ‰€å¤„çš„ä½œç”¨åŸŸï¼Œä¸å…¶ä»–å˜é‡çš„ä½œç”¨åŸŸè§„åˆ™æ˜¯ä¸€æ ·çš„ï¼Œå³å…ˆæ˜¯å½“å‰å‡½æ•°çš„ä½œç”¨åŸŸï¼Œç„¶åæ‰æ˜¯å…¨å±€ä½œç”¨åŸŸã€‚ var x = 1; function f(x, y = x) { console.log(y); } f(2) // 2 ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°yçš„é»˜è®¤å€¼ç­‰äºxã€‚è°ƒç”¨æ—¶ï¼Œç”±äºå‡½æ•°ä½œç”¨åŸŸå†…éƒ¨çš„å˜é‡xå·²ç»ç”Ÿæˆï¼Œæ‰€ä»¥yç­‰äºå‚æ•°xï¼Œè€Œä¸æ˜¯å…¨å±€å˜é‡xã€‚ å¦‚æœè°ƒç”¨æ—¶ï¼Œå‡½æ•°ä½œç”¨åŸŸå†…éƒ¨çš„å˜é‡xæ²¡æœ‰ç”Ÿæˆï¼Œç»“æœå°±ä¼šä¸ä¸€æ ·ã€‚ let x = 1; function f(y = x) { let x = 2; console.log(y); } f() // 1 ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°è°ƒç”¨æ—¶ï¼Œyçš„é»˜è®¤å€¼å˜é‡xå°šæœªåœ¨å‡½æ•°å†…éƒ¨ç”Ÿæˆï¼Œæ‰€ä»¥xæŒ‡å‘å…¨å±€å˜é‡ã€‚ å¦‚æœæ­¤æ—¶ï¼Œå…¨å±€å˜é‡xä¸å­˜åœ¨ï¼Œå°±ä¼šæŠ¥é”™ã€‚ function f(y = x) { let x = 2; console.log(y); } f() // ReferenceError: x is not defined ä¸‹é¢è¿™æ ·å†™ï¼Œä¹Ÿä¼šæŠ¥é”™ã€‚ var x = 1; function foo(x = x) { // ... } foo() // ReferenceError: x is not defined ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fooçš„å‚æ•°xçš„é»˜è®¤å€¼ä¹Ÿæ˜¯xã€‚è¿™æ—¶ï¼Œé»˜è®¤å€¼xçš„ä½œç”¨åŸŸæ˜¯å‡½æ•°ä½œç”¨åŸŸï¼Œè€Œä¸æ˜¯å…¨å±€ä½œç”¨åŸŸã€‚ç”±äºåœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ï¼Œå­˜åœ¨å˜é‡xï¼Œä½†æ˜¯é»˜è®¤å€¼åœ¨xèµ‹å€¼ä¹‹å‰å…ˆæ‰§è¡Œäº†ï¼Œæ‰€ä»¥è¿™æ—¶å±äºæš‚æ—¶æ€§æ­»åŒºï¼ˆå‚è§ã€Šletå’Œconstå‘½ä»¤ã€‹ä¸€ç« ï¼‰ï¼Œä»»ä½•å¯¹xçš„æ“ä½œéƒ½ä¼šæŠ¥é”™ã€‚ å¦‚æœå‚æ•°çš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨åŸŸæ˜¯å…¶å£°æ˜æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚ let foo = &#39;outer&#39;; function bar(func = x =&gt; foo) { let foo = &#39;inner&#39;; console.log(func()); // outer } bar(); ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°barçš„å‚æ•°funcçš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¿”å›å€¼ä¸ºå˜é‡fooã€‚è¿™ä¸ªåŒ¿åå‡½æ•°å£°æ˜æ—¶ï¼Œbarå‡½æ•°çš„ä½œç”¨åŸŸè¿˜æ²¡æœ‰å½¢æˆï¼Œæ‰€ä»¥åŒ¿åå‡½æ•°é‡Œé¢çš„fooæŒ‡å‘å¤–å±‚ä½œç”¨åŸŸçš„fooï¼Œè¾“å‡ºouterã€‚ å¦‚æœå†™æˆä¸‹é¢è¿™æ ·ï¼Œå°±ä¼šæŠ¥é”™ã€‚ function bar(func = () =&gt; foo) { let foo = &#39;inner&#39;; console.log(func()); } bar() // ReferenceError: foo is not defined ä¸Šé¢ä»£ç ä¸­ï¼ŒåŒ¿åå‡½æ•°é‡Œé¢çš„fooæŒ‡å‘å‡½æ•°å¤–å±‚ï¼Œä½†æ˜¯å‡½æ•°å¤–å±‚å¹¶æ²¡æœ‰å£°æ˜fooï¼Œæ‰€ä»¥å°±æŠ¥é”™äº†ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ã€‚ var x = 1; function foo(x, y = function() { x = 2; }) { var x = 3; y(); console.log(x); } foo() // 3 ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fooçš„å‚æ•°yçš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚å‡½æ•°fooè°ƒç”¨æ—¶ï¼Œå®ƒçš„å‚æ•°xçš„å€¼ä¸ºundefinedï¼Œæ‰€ä»¥yå‡½æ•°å†…éƒ¨çš„xä¸€å¼€å§‹æ˜¯undefinedï¼Œåæ¥è¢«é‡æ–°èµ‹å€¼2ã€‚ä½†æ˜¯ï¼Œå‡½æ•°fooå†…éƒ¨é‡æ–°å£°æ˜äº†ä¸€ä¸ªxï¼Œå€¼ä¸º3ï¼Œè¿™ä¸¤ä¸ªxæ˜¯ä¸ä¸€æ ·çš„ï¼Œäº’ç›¸ä¸äº§ç”Ÿå½±å“ï¼Œå› æ­¤æœ€åè¾“å‡º3ã€‚ å¦‚æœå°†var x = 3çš„varå»é™¤ï¼Œä¸¤ä¸ªxå°±æ˜¯ä¸€æ ·çš„ï¼Œæœ€åè¾“å‡ºçš„å°±æ˜¯2ã€‚ var x = 1; function foo(x, y = function() { x = 2; }) { x = 3; y(); console.log(x); } foo() // 2 åº”ç”¨åˆ©ç”¨å‚æ•°é»˜è®¤å€¼ï¼Œå¯ä»¥æŒ‡å®šæŸä¸€ä¸ªå‚æ•°ä¸å¾—çœç•¥ï¼Œå¦‚æœçœç•¥å°±æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ function throwIfMissing() { throw new Error(&#39;Missing parameter&#39;); } function foo(mustBeProvided = throwIfMissing()) { return mustBeProvided; } foo() // Error: Missing parameter ä¸Šé¢ä»£ç çš„fooå‡½æ•°ï¼Œå¦‚æœè°ƒç”¨çš„æ—¶å€™æ²¡æœ‰å‚æ•°ï¼Œå°±ä¼šè°ƒç”¨é»˜è®¤å€¼throwIfMissingå‡½æ•°ï¼Œä»è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ ä»ä¸Šé¢ä»£ç è¿˜å¯ä»¥çœ‹åˆ°ï¼Œå‚æ•°mustBeProvidedçš„é»˜è®¤å€¼ç­‰äºthrowIfMissingå‡½æ•°çš„è¿è¡Œç»“æœï¼ˆå³å‡½æ•°åä¹‹åæœ‰ä¸€å¯¹åœ†æ‹¬å·ï¼‰ï¼Œè¿™è¡¨æ˜å‚æ•°çš„é»˜è®¤å€¼ä¸æ˜¯åœ¨å®šä¹‰æ—¶æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡Œï¼ˆå³å¦‚æœå‚æ•°å·²ç»èµ‹å€¼ï¼Œé»˜è®¤å€¼ä¸­çš„å‡½æ•°å°±ä¸ä¼šè¿è¡Œï¼‰ï¼Œè¿™ä¸pythonè¯­è¨€ä¸ä¸€æ ·ã€‚ å¦å¤–ï¼Œå¯ä»¥å°†å‚æ•°é»˜è®¤å€¼è®¾ä¸ºundefinedï¼Œè¡¨æ˜è¿™ä¸ªå‚æ•°æ˜¯å¯ä»¥çœç•¥çš„ã€‚ function foo(optional = undefined) { Â·Â·Â· } restå‚æ•°ES6å¼•å…¥restå‚æ•°ï¼ˆå½¢å¼ä¸ºâ€œâ€¦å˜é‡åâ€ï¼‰ï¼Œç”¨äºè·å–å‡½æ•°çš„å¤šä½™å‚æ•°ï¼Œè¿™æ ·å°±ä¸éœ€è¦ä½¿ç”¨argumentså¯¹è±¡äº†ã€‚restå‚æ•°æ­é…çš„å˜é‡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥å˜é‡å°†å¤šä½™çš„å‚æ•°æ”¾å…¥æ•°ç»„ä¸­ã€‚ function add(...values) { let sum = 0; for (var val of values) { sum += val; } return sum; } add(2, 5, 3) // 10 ä¸Šé¢ä»£ç çš„addå‡½æ•°æ˜¯ä¸€ä¸ªæ±‚å’Œå‡½æ•°ï¼Œåˆ©ç”¨restå‚æ•°ï¼Œå¯ä»¥å‘è¯¥å‡½æ•°ä¼ å…¥ä»»æ„æ•°ç›®çš„å‚æ•°ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªrestå‚æ•°ä»£æ›¿argumentså˜é‡çš„ä¾‹å­ã€‚ // argumentså˜é‡çš„å†™æ³• function sortNumbers() { return Array.prototype.slice.call(arguments).sort(); } // restå‚æ•°çš„å†™æ³• const sortNumbers = (...numbers) =&gt; numbers.sort(); ä¸Šé¢ä»£ç çš„ä¸¤ç§å†™æ³•ï¼Œæ¯”è¾ƒåå¯ä»¥å‘ç°ï¼Œrestå‚æ•°çš„å†™æ³•æ›´è‡ªç„¶ä¹Ÿæ›´ç®€æ´ã€‚ restå‚æ•°ä¸­çš„å˜é‡ä»£è¡¨ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æ•°ç»„ç‰¹æœ‰çš„æ–¹æ³•éƒ½å¯ä»¥ç”¨äºè¿™ä¸ªå˜é‡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ©ç”¨restå‚æ•°æ”¹å†™æ•°ç»„pushæ–¹æ³•çš„ä¾‹å­ã€‚ function push(array, ...items) { items.forEach(function(item) { array.push(item); console.log(item); }); } var a = []; push(a, 1, 2, 3) æ³¨æ„ï¼Œrestå‚æ•°ä¹‹åä¸èƒ½å†æœ‰å…¶ä»–å‚æ•°ï¼ˆå³åªèƒ½æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼‰ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ // æŠ¥é”™ function f(a, ...b, c) { // ... } å‡½æ•°çš„lengthå±æ€§ï¼Œä¸åŒ…æ‹¬restå‚æ•°ã€‚ (function(a) {}).length // 1 (function(...a) {}).length // 0 (function(a, ...b) {}).length // 1 æ‰©å±•è¿ç®—ç¬¦å«ä¹‰æ‰©å±•è¿ç®—ç¬¦ï¼ˆspreadï¼‰æ˜¯ä¸‰ä¸ªç‚¹ï¼ˆ...ï¼‰ã€‚å®ƒå¥½æ¯”restå‚æ•°çš„é€†è¿ç®—ï¼Œå°†ä¸€ä¸ªæ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—ã€‚ console.log(...[1, 2, 3]) // 1 2 3 console.log(1, ...[2, 3, 4], 5) // 1 2 3 4 5 [...document.querySelectorAll(&#39;div&#39;)] // [&lt;div&gt;, &lt;div&gt;, &lt;div&gt;] è¯¥è¿ç®—ç¬¦ä¸»è¦ç”¨äºå‡½æ•°è°ƒç”¨ã€‚ function push(array, ...items) { array.push(...items); } function add(x, y) { return x + y; } var numbers = [4, 38]; add(...numbers) // 42 ä¸Šé¢ä»£ç ä¸­ï¼Œarray.push(...items)å’Œadd(...numbers)è¿™ä¸¤è¡Œï¼Œéƒ½æ˜¯å‡½æ•°çš„è°ƒç”¨ï¼Œå®ƒä»¬çš„éƒ½ä½¿ç”¨äº†æ‰©å±•è¿ç®—ç¬¦ã€‚è¯¥è¿ç®—ç¬¦å°†ä¸€ä¸ªæ•°ç»„ï¼Œå˜ä¸ºå‚æ•°åºåˆ—ã€‚ æ‰©å±•è¿ç®—ç¬¦ä¸æ­£å¸¸çš„å‡½æ•°å‚æ•°å¯ä»¥ç»“åˆä½¿ç”¨ï¼Œéå¸¸çµæ´»ã€‚ function f(v, w, x, y, z) { } var args = [0, 1]; f(-1, ...args, 2, ...[3]); æ›¿ä»£æ•°ç»„çš„applyæ–¹æ³•ç”±äºæ‰©å±•è¿ç®—ç¬¦å¯ä»¥å±•å¼€æ•°ç»„ï¼Œæ‰€ä»¥ä¸å†éœ€è¦applyæ–¹æ³•ï¼Œå°†æ•°ç»„è½¬ä¸ºå‡½æ•°çš„å‚æ•°äº†ã€‚ // ES5çš„å†™æ³• function f(x, y, z) { // ... } var args = [0, 1, 2]; f.apply(null, args); // ES6çš„å†™æ³• function f(x, y, z) { // ... } var args = [0, 1, 2]; f(...args); ä¸‹é¢æ˜¯æ‰©å±•è¿ç®—ç¬¦å–ä»£applyæ–¹æ³•çš„ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œåº”ç”¨Math.maxæ–¹æ³•ï¼Œç®€åŒ–æ±‚å‡ºä¸€ä¸ªæ•°ç»„æœ€å¤§å…ƒç´ çš„å†™æ³•ã€‚ // ES5çš„å†™æ³• Math.max.apply(null, [14, 3, 77]) // ES6çš„å†™æ³• Math.max(...[14, 3, 77]) // ç­‰åŒäº Math.max(14, 3, 77); ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œç”±äºJavaScriptä¸æä¾›æ±‚æ•°ç»„æœ€å¤§å…ƒç´ çš„å‡½æ•°ï¼Œæ‰€ä»¥åªèƒ½å¥—ç”¨Math.maxå‡½æ•°ï¼Œå°†æ•°ç»„è½¬ä¸ºä¸€ä¸ªå‚æ•°åºåˆ—ï¼Œç„¶åæ±‚æœ€å¤§å€¼ã€‚æœ‰äº†æ‰©å±•è¿ç®—ç¬¦ä»¥åï¼Œå°±å¯ä»¥ç›´æ¥ç”¨Math.maxäº†ã€‚ å¦ä¸€ä¸ªä¾‹å­æ˜¯é€šè¿‡pushå‡½æ•°ï¼Œå°†ä¸€ä¸ªæ•°ç»„æ·»åŠ åˆ°å¦ä¸€ä¸ªæ•°ç»„çš„å°¾éƒ¨ã€‚ // ES5çš„å†™æ³• var arr1 = [0, 1, 2]; var arr2 = [3, 4, 5]; Array.prototype.push.apply(arr1, arr2); // ES6çš„å†™æ³• var arr1 = [0, 1, 2]; var arr2 = [3, 4, 5]; arr1.push(...arr2); ä¸Šé¢ä»£ç çš„ES5å†™æ³•ä¸­ï¼Œpushæ–¹æ³•çš„å‚æ•°ä¸èƒ½æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥åªå¥½é€šè¿‡applyæ–¹æ³•å˜é€šä½¿ç”¨pushæ–¹æ³•ã€‚æœ‰äº†æ‰©å±•è¿ç®—ç¬¦ï¼Œå°±å¯ä»¥ç›´æ¥å°†æ•°ç»„ä¼ å…¥pushæ–¹æ³•ã€‚ ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚ // ES5 new (Date.bind.apply(Date, [null, 2015, 1, 1])) // ES6 new Date(...[2015, 1, 1]); æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨ï¼ˆ1ï¼‰åˆå¹¶æ•°ç»„ æ‰©å±•è¿ç®—ç¬¦æä¾›äº†æ•°ç»„åˆå¹¶çš„æ–°å†™æ³•ã€‚ // ES5 [1, 2].concat(more) // ES6 [1, 2, ...more] var arr1 = [&#39;a&#39;, &#39;b&#39;]; var arr2 = [&#39;c&#39;]; var arr3 = [&#39;d&#39;, &#39;e&#39;]; // ES5çš„åˆå¹¶æ•°ç»„ arr1.concat(arr2, arr3); // [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39; ] // ES6çš„åˆå¹¶æ•°ç»„ [...arr1, ...arr2, ...arr3] // [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39; ] ï¼ˆ2ï¼‰ä¸è§£æ„èµ‹å€¼ç»“åˆ æ‰©å±•è¿ç®—ç¬¦å¯ä»¥ä¸è§£æ„èµ‹å€¼ç»“åˆèµ·æ¥ï¼Œç”¨äºç”Ÿæˆæ•°ç»„ã€‚ // ES5 a = list[0], rest = list.slice(1) // ES6 [a, ...rest] = list ä¸‹é¢æ˜¯å¦å¤–ä¸€äº›ä¾‹å­ã€‚ const [first, ...rest] = [1, 2, 3, 4, 5]; first // 1 rest // [2, 3, 4, 5] const [first, ...rest] = []; first // undefined rest // []: const [first, ...rest] = [&quot;foo&quot;]; first // &quot;foo&quot; rest // [] å¦‚æœå°†æ‰©å±•è¿ç®—ç¬¦ç”¨äºæ•°ç»„èµ‹å€¼ï¼Œåªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åä¸€ä½ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ const [...butLast, last] = [1, 2, 3, 4, 5]; // æŠ¥é”™ const [first, ...middle, last] = [1, 2, 3, 4, 5]; // æŠ¥é”™ ï¼ˆ3ï¼‰å‡½æ•°çš„è¿”å›å€¼ JavaScriptçš„å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚æœéœ€è¦è¿”å›å¤šä¸ªå€¼ï¼Œåªèƒ½è¿”å›æ•°ç»„æˆ–å¯¹è±¡ã€‚æ‰©å±•è¿ç®—ç¬¦æä¾›äº†è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§å˜é€šæ–¹æ³•ã€‚ var dateFields = readDateFields(database); var d = new Date(...dateFields); ä¸Šé¢ä»£ç ä»æ•°æ®åº“å–å‡ºä¸€è¡Œæ•°æ®ï¼Œé€šè¿‡æ‰©å±•è¿ç®—ç¬¦ï¼Œç›´æ¥å°†å…¶ä¼ å…¥æ„é€ å‡½æ•°Dateã€‚ ï¼ˆ4ï¼‰å­—ç¬¦ä¸² æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ [...&#39;hello&#39;] // [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ] ä¸Šé¢çš„å†™æ³•ï¼Œæœ‰ä¸€ä¸ªé‡è¦çš„å¥½å¤„ï¼Œé‚£å°±æ˜¯èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«32ä½çš„Unicodeå­—ç¬¦ã€‚ &#39;x\\uD83D\\uDE80y&#39;.length // 4 [...&#39;x\\uD83D\\uDE80y&#39;].length // 3 ä¸Šé¢ä»£ç çš„ç¬¬ä¸€ç§å†™æ³•ï¼ŒJavaScriptä¼šå°†32ä½Unicodeå­—ç¬¦ï¼Œè¯†åˆ«ä¸º2ä¸ªå­—ç¬¦ï¼Œé‡‡ç”¨æ‰©å±•è¿ç®—ç¬¦å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚å› æ­¤ï¼Œæ­£ç¡®è¿”å›å­—ç¬¦ä¸²é•¿åº¦çš„å‡½æ•°ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ã€‚ function length(str) { return [...str].length; } length(&#39;x\\uD83D\\uDE80y&#39;) // 3 å‡¡æ˜¯æ¶‰åŠåˆ°æ“ä½œ32ä½Unicodeå­—ç¬¦çš„å‡½æ•°ï¼Œéƒ½æœ‰è¿™ä¸ªé—®é¢˜ã€‚å› æ­¤ï¼Œæœ€å¥½éƒ½ç”¨æ‰©å±•è¿ç®—ç¬¦æ”¹å†™ã€‚ let str = &#39;x\\uD83D\\uDE80y&#39;; str.split(&#39;&#39;).reverse().join(&#39;&#39;) // &#39;y\\uDE80\\uD83Dx&#39; [...str].reverse().join(&#39;&#39;) // &#39;y\\uD83D\\uDE80x&#39; ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœä¸ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œå­—ç¬¦ä¸²çš„reverseæ“ä½œå°±ä¸æ­£ç¡®ã€‚ ï¼ˆ5ï¼‰å®ç°äº†Iteratoræ¥å£çš„å¯¹è±¡ ä»»ä½•Iteratoræ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨æ‰©å±•è¿ç®—ç¬¦è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ var nodeList = document.querySelectorAll(&#39;div&#39;); var array = [...nodeList]; ä¸Šé¢ä»£ç ä¸­ï¼ŒquerySelectorAllæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªnodeListå¯¹è±¡ã€‚å®ƒä¸æ˜¯æ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚è¿™æ—¶ï¼Œæ‰©å±•è¿ç®—ç¬¦å¯ä»¥å°†å…¶è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼ŒåŸå› å°±åœ¨äºNodeListå¯¹è±¡å®ç°äº†Iteratoræ¥å£ã€‚ å¯¹äºé‚£äº›æ²¡æœ‰éƒ¨ç½²Iteratoræ¥å£çš„ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œæ‰©å±•è¿ç®—ç¬¦å°±æ— æ³•å°†å…¶è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ let arrayLike = { &#39;0&#39;: &#39;a&#39;, &#39;1&#39;: &#39;b&#39;, &#39;2&#39;: &#39;c&#39;, length: 3 }; // TypeError: Cannot spread non-iterable object. let arr = [...arrayLike]; ä¸Šé¢ä»£ç ä¸­ï¼ŒarrayLikeæ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œä½†æ˜¯æ²¡æœ‰éƒ¨ç½²Iteratoræ¥å£ï¼Œæ‰©å±•è¿ç®—ç¬¦å°±ä¼šæŠ¥é”™ã€‚è¿™æ—¶ï¼Œå¯ä»¥æ”¹ä¸ºä½¿ç”¨Array.fromæ–¹æ³•å°†arrayLikeè½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ ï¼ˆ6ï¼‰Mapå’ŒSetç»“æ„ï¼ŒGeneratorå‡½æ•° æ‰©å±•è¿ç®—ç¬¦å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„Iteratoræ¥å£ï¼Œå› æ­¤åªè¦å…·æœ‰Iteratoræ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œæ¯”å¦‚Mapç»“æ„ã€‚ let map = new Map([ [1, &#39;one&#39;], [2, &#39;two&#39;], [3, &#39;three&#39;], ]); let arr = [...map.keys()]; // [1, 2, 3] Generatorå‡½æ•°è¿è¡Œåï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ã€‚ var go = function*(){ yield 1; yield 2; yield 3; }; [...go()] // [1, 2, 3] ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡goæ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼Œæ‰§è¡Œåè¿”å›çš„æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå¯¹è¿™ä¸ªéå†å™¨å¯¹è±¡æ‰§è¡Œæ‰©å±•è¿ç®—ç¬¦ï¼Œå°±ä¼šå°†å†…éƒ¨éå†å¾—åˆ°çš„å€¼ï¼Œè½¬ä¸ºä¸€ä¸ªæ•°ç»„ã€‚ å¦‚æœå¯¹æ²¡æœ‰iteratoræ¥å£çš„å¯¹è±¡ï¼Œä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œå°†ä¼šæŠ¥é”™ã€‚ var obj = {a: 1, b: 2}; let arr = [...obj]; // TypeError: Cannot spread non-iterable object ä¸¥æ ¼æ¨¡å¼ä»ES5å¼€å§‹ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è®¾å®šä¸ºä¸¥æ ¼æ¨¡å¼ã€‚ function doSomething(a, b) { &#39;use strict&#39;; // code } ã€ŠECMAScript 2016æ ‡å‡†ã€‹åšäº†ä¸€ç‚¹ä¿®æ”¹ï¼Œè§„å®šåªè¦å‡½æ•°å‚æ•°ä½¿ç”¨äº†é»˜è®¤å€¼ã€è§£æ„èµ‹å€¼ã€æˆ–è€…æ‰©å±•è¿ç®—ç¬¦ï¼Œé‚£ä¹ˆå‡½æ•°å†…éƒ¨å°±ä¸èƒ½æ˜¾å¼è®¾å®šä¸ºä¸¥æ ¼æ¨¡å¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ // æŠ¥é”™ function doSomething(a, b = a) { &#39;use strict&#39;; // code } // æŠ¥é”™ const doSomething = function ({a, b}) { &#39;use strict&#39;; // code }; // æŠ¥é”™ const doSomething = (...a) =&gt; { &#39;use strict&#39;; // code }; const obj = { // æŠ¥é”™ doSomething({a, b}) { &#39;use strict&#39;; // code } }; è¿™æ ·è§„å®šçš„åŸå› æ˜¯ï¼Œå‡½æ•°å†…éƒ¨çš„ä¸¥æ ¼æ¨¡å¼ï¼ŒåŒæ—¶é€‚ç”¨äºå‡½æ•°ä½“ä»£ç å’Œå‡½æ•°å‚æ•°ä»£ç ã€‚ä½†æ˜¯ï¼Œå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œå…ˆæ‰§è¡Œå‡½æ•°å‚æ•°ä»£ç ï¼Œç„¶åå†æ‰§è¡Œå‡½æ•°ä½“ä»£ç ã€‚è¿™æ ·å°±æœ‰ä¸€ä¸ªä¸åˆç†çš„åœ°æ–¹ï¼Œåªæœ‰ä»å‡½æ•°ä½“ä»£ç ä¹‹ä¸­ï¼Œæ‰èƒ½çŸ¥é“å‚æ•°ä»£ç æ˜¯å¦åº”è¯¥ä»¥ä¸¥æ ¼æ¨¡å¼æ‰§è¡Œï¼Œä½†æ˜¯å‚æ•°ä»£ç å´åº”è¯¥å…ˆäºå‡½æ•°ä½“ä»£ç æ‰§è¡Œã€‚ // æŠ¥é”™ function doSomething(value = 070) { &#39;use strict&#39;; return value; } ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°valueçš„é»˜è®¤å€¼æ˜¯å…«è¿›åˆ¶æ•°070ï¼Œä½†æ˜¯ä¸¥æ ¼æ¨¡å¼ä¸‹ä¸èƒ½ç”¨å‰ç¼€0è¡¨ç¤ºå…«è¿›åˆ¶ï¼Œæ‰€ä»¥åº”è¯¥æŠ¥é”™ã€‚ä½†æ˜¯å®é™…ä¸Šï¼ŒJavaScriptå¼•æ“ä¼šå…ˆæˆåŠŸæ‰§è¡Œvalue = 070ï¼Œç„¶åè¿›å…¥å‡½æ•°ä½“å†…éƒ¨ï¼Œå‘ç°éœ€è¦ç”¨ä¸¥æ ¼æ¨¡å¼æ‰§è¡Œï¼Œè¿™æ—¶æ‰ä¼šæŠ¥é”™ã€‚ è™½ç„¶å¯ä»¥å…ˆè§£æå‡½æ•°ä½“ä»£ç ï¼Œå†æ‰§è¡Œå‚æ•°ä»£ç ï¼Œä½†æ˜¯è¿™æ ·æ— ç–‘å°±å¢åŠ äº†å¤æ‚æ€§ã€‚å› æ­¤ï¼Œæ ‡å‡†ç´¢æ€§ç¦æ­¢äº†è¿™ç§ç”¨æ³•ï¼Œåªè¦å‚æ•°ä½¿ç”¨äº†é»˜è®¤å€¼ã€è§£æ„èµ‹å€¼ã€æˆ–è€…æ‰©å±•è¿ç®—ç¬¦ï¼Œå°±ä¸èƒ½æ˜¾å¼æŒ‡å®šä¸¥æ ¼æ¨¡å¼ã€‚ ä¸¤ç§æ–¹æ³•å¯ä»¥è§„é¿è¿™ç§é™åˆ¶ã€‚ç¬¬ä¸€ç§æ˜¯è®¾å®šå…¨å±€æ€§çš„ä¸¥æ ¼æ¨¡å¼ï¼Œè¿™æ˜¯åˆæ³•çš„ã€‚ &#39;use strict&#39;; function doSomething(a, b = a) { // code } ç¬¬äºŒç§æ˜¯æŠŠå‡½æ•°åŒ…åœ¨ä¸€ä¸ªæ— å‚æ•°çš„ç«‹å³æ‰§è¡Œå‡½æ•°é‡Œé¢ã€‚ const doSomething = (function () { &#39;use strict&#39;; return function(value = 42) { return value; }; }()); name å±æ€§å‡½æ•°çš„nameå±æ€§ï¼Œè¿”å›è¯¥å‡½æ•°çš„å‡½æ•°åã€‚ function foo() {} foo.name // &quot;foo&quot; è¿™ä¸ªå±æ€§æ—©å°±è¢«æµè§ˆå™¨å¹¿æ³›æ”¯æŒï¼Œä½†æ˜¯ç›´åˆ° ES6ï¼Œæ‰å°†å…¶å†™å…¥äº†æ ‡å‡†ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒES6 å¯¹è¿™ä¸ªå±æ€§çš„è¡Œä¸ºåšå‡ºäº†ä¸€äº›ä¿®æ”¹ã€‚å¦‚æœå°†ä¸€ä¸ªåŒ¿åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼ŒES5 çš„nameå±æ€§ï¼Œä¼šè¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œè€Œ ES6 çš„nameå±æ€§ä¼šè¿”å›å®é™…çš„å‡½æ•°åã€‚ var f = function () {}; // ES5 f.name // &quot;&quot; // ES6 f.name // &quot;f&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡fç­‰äºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼ŒES5 å’Œ ES6 çš„nameå±æ€§è¿”å›çš„å€¼ä¸ä¸€æ ·ã€‚ å¦‚æœå°†ä¸€ä¸ªå…·åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œåˆ™ ES5 å’Œ ES6 çš„nameå±æ€§éƒ½è¿”å›è¿™ä¸ªå…·åå‡½æ•°åŸæœ¬çš„åå­—ã€‚ const bar = function baz() {}; // ES5 bar.name // &quot;baz&quot; // ES6 bar.name // &quot;baz&quot; Functionæ„é€ å‡½æ•°è¿”å›çš„å‡½æ•°å®ä¾‹ï¼Œnameå±æ€§çš„å€¼ä¸ºanonymousã€‚ (new Function).name // &quot;anonymous&quot; bindè¿”å›çš„å‡½æ•°ï¼Œnameå±æ€§å€¼ä¼šåŠ ä¸Šboundå‰ç¼€ã€‚ function foo() {}; foo.bind({}).name // &quot;bound foo&quot; (function(){}).bind({}).name // &quot;bound &quot; ç®­å¤´å‡½æ•°åŸºæœ¬ç”¨æ³•ES6å…è®¸ä½¿ç”¨â€œç®­å¤´â€ï¼ˆ=&gt;ï¼‰å®šä¹‰å‡½æ•°ã€‚ var f = v =&gt; v; ä¸Šé¢çš„ç®­å¤´å‡½æ•°ç­‰åŒäºï¼š var f = function(v) { return v; }; å¦‚æœç®­å¤´å‡½æ•°ä¸éœ€è¦å‚æ•°æˆ–éœ€è¦å¤šä¸ªå‚æ•°ï¼Œå°±ä½¿ç”¨ä¸€ä¸ªåœ†æ‹¬å·ä»£è¡¨å‚æ•°éƒ¨åˆ†ã€‚ var f = () =&gt; 5; // ç­‰åŒäº var f = function () { return 5 }; var sum = (num1, num2) =&gt; num1 + num2; // ç­‰åŒäº var sum = function(num1, num2) { return num1 + num2; }; å¦‚æœç®­å¤´å‡½æ•°çš„ä»£ç å—éƒ¨åˆ†å¤šäºä¸€æ¡è¯­å¥ï¼Œå°±è¦ä½¿ç”¨å¤§æ‹¬å·å°†å®ƒä»¬æ‹¬èµ·æ¥ï¼Œå¹¶ä¸”ä½¿ç”¨returnè¯­å¥è¿”å›ã€‚ var sum = (num1, num2) =&gt; { return num1 + num2; } ç”±äºå¤§æ‹¬å·è¢«è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰€ä»¥å¦‚æœç®­å¤´å‡½æ•°ç›´æ¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»åœ¨å¯¹è±¡å¤–é¢åŠ ä¸Šæ‹¬å·ã€‚ var getTempItem = id =&gt; ({ id: id, name: &quot;Temp&quot; }); ç®­å¤´å‡½æ•°å¯ä»¥ä¸å˜é‡è§£æ„ç»“åˆä½¿ç”¨ã€‚ const full = ({ first, last }) =&gt; first + &#39; &#39; + last; // ç­‰åŒäº function full(person) { return person.first + &#39; &#39; + person.last; } ç®­å¤´å‡½æ•°ä½¿å¾—è¡¨è¾¾æ›´åŠ ç®€æ´ã€‚ const isEven = n =&gt; n % 2 == 0; const square = n =&gt; n * n; ä¸Šé¢ä»£ç åªç”¨äº†ä¸¤è¡Œï¼Œå°±å®šä¹‰äº†ä¸¤ä¸ªç®€å•çš„å·¥å…·å‡½æ•°ã€‚å¦‚æœä¸ç”¨ç®­å¤´å‡½æ•°ï¼Œå¯èƒ½å°±è¦å ç”¨å¤šè¡Œï¼Œè€Œä¸”è¿˜ä¸å¦‚ç°åœ¨è¿™æ ·å†™é†’ç›®ã€‚ ç®­å¤´å‡½æ•°çš„ä¸€ä¸ªç”¨å¤„æ˜¯ç®€åŒ–å›è°ƒå‡½æ•°ã€‚ // æ­£å¸¸å‡½æ•°å†™æ³• [1,2,3].map(function (x) { return x * x; }); // ç®­å¤´å‡½æ•°å†™æ³• [1,2,3].map(x =&gt; x * x); å¦ä¸€ä¸ªä¾‹å­æ˜¯ // æ­£å¸¸å‡½æ•°å†™æ³• var result = values.sort(function (a, b) { return a - b; }); // ç®­å¤´å‡½æ•°å†™æ³• var result = values.sort((a, b) =&gt; a - b); ä¸‹é¢æ˜¯restå‚æ•°ä¸ç®­å¤´å‡½æ•°ç»“åˆçš„ä¾‹å­ã€‚ const numbers = (...nums) =&gt; nums; numbers(1, 2, 3, 4, 5) // [1,2,3,4,5] const headAndTail = (head, ...tail) =&gt; [head, tail]; headAndTail(1, 2, 3, 4, 5) // [1,[2,3,4,5]] ä½¿ç”¨æ³¨æ„ç‚¹ç®­å¤´å‡½æ•°æœ‰å‡ ä¸ªä½¿ç”¨æ³¨æ„ç‚¹ã€‚ ï¼ˆ1ï¼‰å‡½æ•°ä½“å†…çš„thiså¯¹è±¡ï¼Œå°±æ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚ ï¼ˆ2ï¼‰ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯ä»¥ä½¿ç”¨newå‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ ï¼ˆ3ï¼‰ä¸å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ã€‚å¦‚æœè¦ç”¨ï¼Œå¯ä»¥ç”¨Restå‚æ•°ä»£æ›¿ã€‚ ï¼ˆ4ï¼‰ä¸å¯ä»¥ä½¿ç”¨yieldå‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œGeneratorå‡½æ•°ã€‚ ä¸Šé¢å››ç‚¹ä¸­ï¼Œç¬¬ä¸€ç‚¹å°¤å…¶å€¼å¾—æ³¨æ„ã€‚thiså¯¹è±¡çš„æŒ‡å‘æ˜¯å¯å˜çš„ï¼Œä½†æ˜¯åœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œå®ƒæ˜¯å›ºå®šçš„ã€‚ function foo() { setTimeout(() =&gt; { console.log(&#39;id:&#39;, this.id); }, 100); } var id = 21; foo.call({ id: 42 }); // id: 42 ä¸Šé¢ä»£ç ä¸­ï¼ŒsetTimeoutçš„å‚æ•°æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œè¿™ä¸ªç®­å¤´å‡½æ•°çš„å®šä¹‰ç”Ÿæ•ˆæ˜¯åœ¨fooå‡½æ•°ç”Ÿæˆæ—¶ï¼Œè€Œå®ƒçš„çœŸæ­£æ‰§è¡Œè¦ç­‰åˆ°100æ¯«ç§’åã€‚å¦‚æœæ˜¯æ™®é€šå‡½æ•°ï¼Œæ‰§è¡Œæ—¶thisåº”è¯¥æŒ‡å‘å…¨å±€å¯¹è±¡windowï¼Œè¿™æ—¶åº”è¯¥è¾“å‡º21ã€‚ä½†æ˜¯ï¼Œç®­å¤´å‡½æ•°å¯¼è‡´thisæ€»æ˜¯æŒ‡å‘å‡½æ•°å®šä¹‰ç”Ÿæ•ˆæ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼ˆæœ¬ä¾‹æ˜¯{id: 42}ï¼‰ï¼Œæ‰€ä»¥è¾“å‡ºçš„æ˜¯42ã€‚ ç®­å¤´å‡½æ•°å¯ä»¥è®©setTimeouté‡Œé¢çš„thisï¼Œç»‘å®šå®šä¹‰æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œè€Œä¸æ˜¯æŒ‡å‘è¿è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ function Timer() { this.s1 = 0; this.s2 = 0; // ç®­å¤´å‡½æ•° setInterval(() =&gt; this.s1++, 1000); // æ™®é€šå‡½æ•° setInterval(function () { this.s2++; }, 1000); } var timer = new Timer(); setTimeout(() =&gt; console.log(&#39;s1: &#39;, timer.s1), 3100); setTimeout(() =&gt; console.log(&#39;s2: &#39;, timer.s2), 3100); // s1: 3 // s2: 0 ä¸Šé¢ä»£ç ä¸­ï¼ŒTimerå‡½æ•°å†…éƒ¨è®¾ç½®äº†ä¸¤ä¸ªå®šæ—¶å™¨ï¼Œåˆ†åˆ«ä½¿ç”¨äº†ç®­å¤´å‡½æ•°å’Œæ™®é€šå‡½æ•°ã€‚å‰è€…çš„thisç»‘å®šå®šä¹‰æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼ˆå³Timerå‡½æ•°ï¼‰ï¼Œåè€…çš„thisæŒ‡å‘è¿è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼ˆå³å…¨å±€å¯¹è±¡ï¼‰ã€‚æ‰€ä»¥ï¼Œ3100æ¯«ç§’ä¹‹åï¼Œtimer.s1è¢«æ›´æ–°äº†3æ¬¡ï¼Œè€Œtimer.s2ä¸€æ¬¡éƒ½æ²¡æ›´æ–°ã€‚ ç®­å¤´å‡½æ•°å¯ä»¥è®©thisæŒ‡å‘å›ºå®šåŒ–ï¼Œè¿™ç§ç‰¹æ€§å¾ˆæœ‰åˆ©äºå°è£…å›è°ƒå‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ŒDOMäº‹ä»¶çš„å›è°ƒå‡½æ•°å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ã€‚ var handler = { id: &#39;123456&#39;, init: function() { document.addEventListener(&#39;click&#39;, event =&gt; this.doSomething(event.type), false); }, doSomething: function(type) { console.log(&#39;Handling &#39; + type + &#39; for &#39; + this.id); } }; ä¸Šé¢ä»£ç çš„initæ–¹æ³•ä¸­ï¼Œä½¿ç”¨äº†ç®­å¤´å‡½æ•°ï¼Œè¿™å¯¼è‡´è¿™ä¸ªç®­å¤´å‡½æ•°é‡Œé¢çš„thisï¼Œæ€»æ˜¯æŒ‡å‘handlerå¯¹è±¡ã€‚å¦åˆ™ï¼Œå›è°ƒå‡½æ•°è¿è¡Œæ—¶ï¼Œthis.doSomethingè¿™ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºæ­¤æ—¶thisæŒ‡å‘documentå¯¹è±¡ã€‚ thisæŒ‡å‘çš„å›ºå®šåŒ–ï¼Œå¹¶ä¸æ˜¯å› ä¸ºç®­å¤´å‡½æ•°å†…éƒ¨æœ‰ç»‘å®šthisçš„æœºåˆ¶ï¼Œå®é™…åŸå› æ˜¯ç®­å¤´å‡½æ•°æ ¹æœ¬æ²¡æœ‰è‡ªå·±çš„thisï¼Œå¯¼è‡´å†…éƒ¨çš„thiså°±æ˜¯å¤–å±‚ä»£ç å—çš„thisã€‚æ­£æ˜¯å› ä¸ºå®ƒæ²¡æœ‰thisï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ã€‚ æ‰€ä»¥ï¼Œç®­å¤´å‡½æ•°è½¬æˆES5çš„ä»£ç å¦‚ä¸‹ã€‚ // ES6 function foo() { setTimeout(() =&gt; { console.log(&#39;id:&#39;, this.id); }, 100); } // ES5 function foo() { var _this = this; setTimeout(function () { console.log(&#39;id:&#39;, _this.id); }, 100); } ä¸Šé¢ä»£ç ä¸­ï¼Œè½¬æ¢åçš„ES5ç‰ˆæœ¬æ¸…æ¥šåœ°è¯´æ˜äº†ï¼Œç®­å¤´å‡½æ•°é‡Œé¢æ ¹æœ¬æ²¡æœ‰è‡ªå·±çš„thisï¼Œè€Œæ˜¯å¼•ç”¨å¤–å±‚çš„thisã€‚ è¯·é—®ä¸‹é¢çš„ä»£ç ä¹‹ä¸­æœ‰å‡ ä¸ªthisï¼Ÿ function foo() { return () =&gt; { return () =&gt; { return () =&gt; { console.log(&#39;id:&#39;, this.id); }; }; }; } var f = foo.call({id: 1}); var t1 = f.call({id: 2})()(); // id: 1 var t2 = f().call({id: 3})(); // id: 1 var t3 = f()().call({id: 4}); // id: 1 ä¸Šé¢ä»£ç ä¹‹ä¸­ï¼Œåªæœ‰ä¸€ä¸ªthisï¼Œå°±æ˜¯å‡½æ•°fooçš„thisï¼Œæ‰€ä»¥t1ã€t2ã€t3éƒ½è¾“å‡ºåŒæ ·çš„ç»“æœã€‚å› ä¸ºæ‰€æœ‰çš„å†…å±‚å‡½æ•°éƒ½æ˜¯ç®­å¤´å‡½æ•°ï¼Œéƒ½æ²¡æœ‰è‡ªå·±çš„thisï¼Œå®ƒä»¬çš„thiså…¶å®éƒ½æ˜¯æœ€å¤–å±‚fooå‡½æ•°çš„thisã€‚ é™¤äº†thisï¼Œä»¥ä¸‹ä¸‰ä¸ªå˜é‡åœ¨ç®­å¤´å‡½æ•°ä¹‹ä¸­ä¹Ÿæ˜¯ä¸å­˜åœ¨çš„ï¼ŒæŒ‡å‘å¤–å±‚å‡½æ•°çš„å¯¹åº”å˜é‡ï¼šargumentsã€superã€new.targetã€‚ function foo() { setTimeout(() =&gt; { console.log(&#39;args:&#39;, arguments); }, 100); } foo(2, 4, 6, 8) // args: [2, 4, 6, 8] ä¸Šé¢ä»£ç ä¸­ï¼Œç®­å¤´å‡½æ•°å†…éƒ¨çš„å˜é‡argumentsï¼Œå…¶å®æ˜¯å‡½æ•°fooçš„argumentså˜é‡ã€‚ å¦å¤–ï¼Œç”±äºç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œæ‰€ä»¥å½“ç„¶ä¹Ÿå°±ä¸èƒ½ç”¨call()ã€apply()ã€bind()è¿™äº›æ–¹æ³•å»æ”¹å˜thisçš„æŒ‡å‘ã€‚ (function() { return [ (() =&gt; this.x).bind({ x: &#39;inner&#39; })() ]; }).call({ x: &#39;outer&#39; }); // [&#39;outer&#39;] ä¸Šé¢ä»£ç ä¸­ï¼Œç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œæ‰€ä»¥bindæ–¹æ³•æ— æ•ˆï¼Œå†…éƒ¨çš„thisæŒ‡å‘å¤–éƒ¨çš„thisã€‚ é•¿æœŸä»¥æ¥ï¼ŒJavaScriptè¯­è¨€çš„thiså¯¹è±¡ä¸€ç›´æ˜¯ä¸€ä¸ªä»¤äººå¤´ç—›çš„é—®é¢˜ï¼Œåœ¨å¯¹è±¡æ–¹æ³•ä¸­ä½¿ç”¨thisï¼Œå¿…é¡»éå¸¸å°å¿ƒã€‚ç®­å¤´å‡½æ•°â€ç»‘å®šâ€thisï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šè§£å†³äº†è¿™ä¸ªå›°æ‰°ã€‚ åµŒå¥—çš„ç®­å¤´å‡½æ•°ç®­å¤´å‡½æ•°å†…éƒ¨ï¼Œè¿˜å¯ä»¥å†ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªES5è¯­æ³•çš„å¤šé‡åµŒå¥—å‡½æ•°ã€‚ function insert(value) { return {into: function (array) { return {after: function (afterValue) { array.splice(array.indexOf(afterValue) + 1, 0, value); return array; }}; }}; } insert(2).into([1, 3]).after(1); //[1, 2, 3] ä¸Šé¢è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°æ”¹å†™ã€‚ let insert = (value) =&gt; ({into: (array) =&gt; ({after: (afterValue) =&gt; { array.splice(array.indexOf(afterValue) + 1, 0, value); return array; }})}); insert(2).into([1, 3]).after(1); //[1, 2, 3] ä¸‹é¢æ˜¯ä¸€ä¸ªéƒ¨ç½²ç®¡é“æœºåˆ¶ï¼ˆpipelineï¼‰çš„ä¾‹å­ï¼Œå³å‰ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºæ˜¯åä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ã€‚ const pipeline = (...funcs) =&gt; val =&gt; funcs.reduce((a, b) =&gt; b(a), val); const plus1 = a =&gt; a + 1; const mult2 = a =&gt; a * 2; const addThenMult = pipeline(plus1, mult2); addThenMult(5) // 12 å¦‚æœè§‰å¾—ä¸Šé¢çš„å†™æ³•å¯è¯»æ€§æ¯”è¾ƒå·®ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„å†™æ³•ã€‚ const plus1 = a =&gt; a + 1; const mult2 = a =&gt; a * 2; mult2(plus1(5)) // 12 ç®­å¤´å‡½æ•°è¿˜æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ”¹å†™Î»æ¼”ç®—ã€‚ // Î»æ¼”ç®—çš„å†™æ³• fix = Î»f.(Î»x.f(Î»v.x(x)(v)))(Î»x.f(Î»v.x(x)(v))) // ES6çš„å†™æ³• var fix = f =&gt; (x =&gt; f(v =&gt; x(x)(v))) (x =&gt; f(v =&gt; x(x)(v))); ä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œå‡ ä¹æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ç”±äºÎ»æ¼”ç®—å¯¹äºè®¡ç®—æœºç§‘å­¦éå¸¸é‡è¦ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥ç”¨ES6ä½œä¸ºæ›¿ä»£å·¥å…·ï¼Œæ¢ç´¢è®¡ç®—æœºç§‘å­¦ã€‚ ç»‘å®š thisç®­å¤´å‡½æ•°å¯ä»¥ç»‘å®šthiså¯¹è±¡ï¼Œå¤§å¤§å‡å°‘äº†æ˜¾å¼ç»‘å®šthiså¯¹è±¡çš„å†™æ³•ï¼ˆcallã€applyã€bindï¼‰ã€‚ä½†æ˜¯ï¼Œç®­å¤´å‡½æ•°å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰åœºåˆï¼Œæ‰€ä»¥ES7æå‡ºäº†â€œå‡½æ•°ç»‘å®šâ€ï¼ˆfunction bindï¼‰è¿ç®—ç¬¦ï¼Œç”¨æ¥å–ä»£callã€applyã€bindè°ƒç”¨ã€‚è™½ç„¶è¯¥è¯­æ³•è¿˜æ˜¯ES7çš„ä¸€ä¸ªææ¡ˆï¼Œä½†æ˜¯Babelè½¬ç å™¨å·²ç»æ”¯æŒã€‚ å‡½æ•°ç»‘å®šè¿ç®—ç¬¦æ˜¯å¹¶æ’çš„ä¸¤ä¸ªåŒå†’å·ï¼ˆ::ï¼‰ï¼ŒåŒå†’å·å·¦è¾¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå³è¾¹æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚è¯¥è¿ç®—ç¬¦ä¼šè‡ªåŠ¨å°†å·¦è¾¹çš„å¯¹è±¡ï¼Œä½œä¸ºä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆå³thiså¯¹è±¡ï¼‰ï¼Œç»‘å®šåˆ°å³è¾¹çš„å‡½æ•°ä¸Šé¢ã€‚ foo::bar; // ç­‰åŒäº bar.bind(foo); foo::bar(...arguments); // ç­‰åŒäº bar.apply(foo, arguments); const hasOwnProperty = Object.prototype.hasOwnProperty; function hasOwn(obj, key) { return obj::hasOwnProperty(key); } å¦‚æœåŒå†’å·å·¦è¾¹ä¸ºç©ºï¼Œå³è¾¹æ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œåˆ™ç­‰äºå°†è¯¥æ–¹æ³•ç»‘å®šåœ¨è¯¥å¯¹è±¡ä¸Šé¢ã€‚ var method = obj::obj.foo; // ç­‰åŒäº var method = ::obj.foo; let log = ::console.log; // ç­‰åŒäº var log = console.log.bind(console); ç”±äºåŒå†’å·è¿ç®—ç¬¦è¿”å›çš„è¿˜æ˜¯åŸå¯¹è±¡ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ã€‚ // ä¾‹ä¸€ import { map, takeWhile, forEach } from &quot;iterlib&quot;; getPlayers() ::map(x =&gt; x.character()) ::takeWhile(x =&gt; x.strength &gt; 100) ::forEach(x =&gt; console.log(x)); // ä¾‹äºŒ let { find, html } = jake; document.querySelectorAll(&quot;div.myClass&quot;) ::find(&quot;p&quot;) ::html(&quot;hahaha&quot;); å°¾è°ƒç”¨ä¼˜åŒ–ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Ÿå°¾è°ƒç”¨ï¼ˆTail Callï¼‰æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œæœ¬èº«éå¸¸ç®€å•ï¼Œä¸€å¥è¯å°±èƒ½è¯´æ¸…æ¥šï¼Œå°±æ˜¯æŒ‡æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ã€‚ function f(x){ return g(x); } ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fçš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å‡½æ•°gï¼Œè¿™å°±å«å°¾è°ƒç”¨ã€‚ ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼Œéƒ½ä¸å±äºå°¾è°ƒç”¨ã€‚ // æƒ…å†µä¸€ function f(x){ let y = g(x); return y; } // æƒ…å†µäºŒ function f(x){ return g(x) + 1; } // æƒ…å†µä¸‰ function f(x){ g(x); } ä¸Šé¢ä»£ç ä¸­ï¼Œæƒ…å†µä¸€æ˜¯è°ƒç”¨å‡½æ•°gä¹‹åï¼Œè¿˜æœ‰èµ‹å€¼æ“ä½œï¼Œæ‰€ä»¥ä¸å±äºå°¾è°ƒç”¨ï¼Œå³ä½¿è¯­ä¹‰å®Œå…¨ä¸€æ ·ã€‚æƒ…å†µäºŒä¹Ÿå±äºè°ƒç”¨åè¿˜æœ‰æ“ä½œï¼Œå³ä½¿å†™åœ¨ä¸€è¡Œå†…ã€‚æƒ…å†µä¸‰ç­‰åŒäºä¸‹é¢çš„ä»£ç ã€‚ function f(x){ g(x); return undefined; } å°¾è°ƒç”¨ä¸ä¸€å®šå‡ºç°åœ¨å‡½æ•°å°¾éƒ¨ï¼Œåªè¦æ˜¯æœ€åä¸€æ­¥æ“ä½œå³å¯ã€‚ function f(x) { if (x &gt; 0) { return m(x) } return n(x); } ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°må’Œnéƒ½å±äºå°¾è°ƒç”¨ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯å‡½æ•°fçš„æœ€åä¸€æ­¥æ“ä½œã€‚ å°¾è°ƒç”¨ä¼˜åŒ–å°¾è°ƒç”¨ä¹‹æ‰€ä»¥ä¸å…¶ä»–è°ƒç”¨ä¸åŒï¼Œå°±åœ¨äºå®ƒçš„ç‰¹æ®Šçš„è°ƒç”¨ä½ç½®ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°è°ƒç”¨ä¼šåœ¨å†…å­˜å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨è®°å½•â€ï¼Œåˆç§°â€œè°ƒç”¨å¸§â€ï¼ˆcall frameï¼‰ï¼Œä¿å­˜è°ƒç”¨ä½ç½®å’Œå†…éƒ¨å˜é‡ç­‰ä¿¡æ¯ã€‚å¦‚æœåœ¨å‡½æ•°Açš„å†…éƒ¨è°ƒç”¨å‡½æ•°Bï¼Œé‚£ä¹ˆåœ¨Açš„è°ƒç”¨å¸§ä¸Šæ–¹ï¼Œè¿˜ä¼šå½¢æˆä¸€ä¸ªBçš„è°ƒç”¨å¸§ã€‚ç­‰åˆ°Bè¿è¡Œç»“æŸï¼Œå°†ç»“æœè¿”å›åˆ°Aï¼ŒBçš„è°ƒç”¨å¸§æ‰ä¼šæ¶ˆå¤±ã€‚å¦‚æœå‡½æ•°Bå†…éƒ¨è¿˜è°ƒç”¨å‡½æ•°Cï¼Œé‚£å°±è¿˜æœ‰ä¸€ä¸ªCçš„è°ƒç”¨å¸§ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ‰€æœ‰çš„è°ƒç”¨å¸§ï¼Œå°±å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨æ ˆâ€ï¼ˆcall stackï¼‰ã€‚ å°¾è°ƒç”¨ç”±äºæ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿ç•™å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå› ä¸ºè°ƒç”¨ä½ç½®ã€å†…éƒ¨å˜é‡ç­‰ä¿¡æ¯éƒ½ä¸ä¼šå†ç”¨åˆ°äº†ï¼Œåªè¦ç›´æ¥ç”¨å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§å°±å¯ä»¥äº†ã€‚ function f() { let m = 1; let n = 2; return g(m + n); } f(); // ç­‰åŒäº function f() { return g(3); } f(); // ç­‰åŒäº g(3); ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå‡½æ•°gä¸æ˜¯å°¾è°ƒç”¨ï¼Œå‡½æ•°få°±éœ€è¦ä¿å­˜å†…éƒ¨å˜é‡må’Œnçš„å€¼ã€gçš„è°ƒç”¨ä½ç½®ç­‰ä¿¡æ¯ã€‚ä½†ç”±äºè°ƒç”¨gä¹‹åï¼Œå‡½æ•°få°±ç»“æŸäº†ï¼Œæ‰€ä»¥æ‰§è¡Œåˆ°æœ€åä¸€æ­¥ï¼Œå®Œå…¨å¯ä»¥åˆ é™¤ f(x) çš„è°ƒç”¨å¸§ï¼Œåªä¿ç•™ g(3) çš„è°ƒç”¨å¸§ã€‚ è¿™å°±å«åšâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€ï¼ˆTail call optimizationï¼‰ï¼Œå³åªä¿ç•™å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§ã€‚å¦‚æœæ‰€æœ‰å‡½æ•°éƒ½æ˜¯å°¾è°ƒç”¨ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥åšåˆ°æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œè°ƒç”¨å¸§åªæœ‰ä¸€é¡¹ï¼Œè¿™å°†å¤§å¤§èŠ‚çœå†…å­˜ã€‚è¿™å°±æ˜¯â€œå°¾è°ƒç”¨ä¼˜åŒ–â€çš„æ„ä¹‰ã€‚ æ³¨æ„ï¼Œåªæœ‰ä¸å†ç”¨åˆ°å¤–å±‚å‡½æ•°çš„å†…éƒ¨å˜é‡ï¼Œå†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§æ‰ä¼šå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå¦åˆ™å°±æ— æ³•è¿›è¡Œâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€ã€‚ function addOne(a){ var one = 1; function inner(b){ return b + one; } return inner(a); } ä¸Šé¢çš„å‡½æ•°ä¸ä¼šè¿›è¡Œå°¾è°ƒç”¨ä¼˜åŒ–ï¼Œå› ä¸ºå†…å±‚å‡½æ•°innerç”¨åˆ°äº†å¤–å±‚å‡½æ•°addOneçš„å†…éƒ¨å˜é‡oneã€‚ å°¾é€’å½’å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œç§°ä¸ºé€’å½’ã€‚å¦‚æœå°¾è°ƒç”¨è‡ªèº«ï¼Œå°±ç§°ä¸ºå°¾é€’å½’ã€‚ é€’å½’éå¸¸è€—è´¹å†…å­˜ï¼Œå› ä¸ºéœ€è¦åŒæ—¶ä¿å­˜æˆåƒä¸Šç™¾ä¸ªè°ƒç”¨å¸§ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ï¼ˆstack overflowï¼‰ã€‚ä½†å¯¹äºå°¾é€’å½’æ¥è¯´ï¼Œç”±äºåªå­˜åœ¨ä¸€ä¸ªè°ƒç”¨å¸§ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šå‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ã€‚ function factorial(n) { if (n === 1) return 1; return n * factorial(n - 1); } factorial(5) // 120 ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªé˜¶ä¹˜å‡½æ•°ï¼Œè®¡ç®—nçš„é˜¶ä¹˜ï¼Œæœ€å¤šéœ€è¦ä¿å­˜nä¸ªè°ƒç”¨è®°å½•ï¼Œå¤æ‚åº¦ O(n) ã€‚ å¦‚æœæ”¹å†™æˆå°¾é€’å½’ï¼Œåªä¿ç•™ä¸€ä¸ªè°ƒç”¨è®°å½•ï¼Œå¤æ‚åº¦ O(1) ã€‚ function factorial(n, total) { if (n === 1) return total; return factorial(n - 1, n * total); } factorial(5, 1) // 120 è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒè‘—åçš„ä¾‹å­ï¼Œå°±æ˜¯è®¡ç®—fibonacci æ•°åˆ—ï¼Œä¹Ÿèƒ½å……åˆ†è¯´æ˜å°¾é€’å½’ä¼˜åŒ–çš„é‡è¦æ€§ å¦‚æœæ˜¯éå°¾é€’å½’çš„fibonacci é€’å½’æ–¹æ³• function Fibonacci (n) { if ( n &lt;= 1 ) {return 1}; return Fibonacci(n - 1) + Fibonacci(n - 2); } Fibonacci(10); // 89 // Fibonacci(100) // Fibonacci(500) // å †æ ˆæº¢å‡ºäº† å¦‚æœæˆ‘ä»¬ä½¿ç”¨å°¾é€’å½’ä¼˜åŒ–è¿‡çš„fibonacci é€’å½’ç®—æ³• function Fibonacci2 (n , ac1 = 1 , ac2 = 1) { if( n &lt;= 1 ) {return ac2}; return Fibonacci2 (n - 1, ac2, ac1 + ac2); } Fibonacci2(100) // 573147844013817200000 Fibonacci2(1000) // 7.0330367711422765e+208 Fibonacci2(10000) // Infinity ç”±æ­¤å¯è§ï¼Œâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€å¯¹é€’å½’æ“ä½œæ„ä¹‰é‡å¤§ï¼Œæ‰€ä»¥ä¸€äº›å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å°†å…¶å†™å…¥äº†è¯­è¨€è§„æ ¼ã€‚ES6ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œç¬¬ä¸€æ¬¡æ˜ç¡®è§„å®šï¼Œæ‰€æœ‰ECMAScriptçš„å®ç°ï¼Œéƒ½å¿…é¡»éƒ¨ç½²â€œå°¾è°ƒç”¨ä¼˜åŒ–â€ã€‚è¿™å°±æ˜¯è¯´ï¼Œåœ¨ES6ä¸­ï¼Œåªè¦ä½¿ç”¨å°¾é€’å½’ï¼Œå°±ä¸ä¼šå‘ç”Ÿæ ˆæº¢å‡ºï¼Œç›¸å¯¹èŠ‚çœå†…å­˜ã€‚ é€’å½’å‡½æ•°çš„æ”¹å†™å°¾é€’å½’çš„å®ç°ï¼Œå¾€å¾€éœ€è¦æ”¹å†™é€’å½’å‡½æ•°ï¼Œç¡®ä¿æœ€åä¸€æ­¥åªè°ƒç”¨è‡ªèº«ã€‚åšåˆ°è¿™ä¸€ç‚¹çš„æ–¹æ³•ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰ç”¨åˆ°çš„å†…éƒ¨å˜é‡æ”¹å†™æˆå‡½æ•°çš„å‚æ•°ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œé˜¶ä¹˜å‡½æ•° factorial éœ€è¦ç”¨åˆ°ä¸€ä¸ªä¸­é—´å˜é‡ total ï¼Œé‚£å°±æŠŠè¿™ä¸ªä¸­é—´å˜é‡æ”¹å†™æˆå‡½æ•°çš„å‚æ•°ã€‚è¿™æ ·åšçš„ç¼ºç‚¹å°±æ˜¯ä¸å¤ªç›´è§‚ï¼Œç¬¬ä¸€çœ¼å¾ˆéš¾çœ‹å‡ºæ¥ï¼Œä¸ºä»€ä¹ˆè®¡ç®—5çš„é˜¶ä¹˜ï¼Œéœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°5å’Œ1ï¼Ÿ ä¸¤ä¸ªæ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ–¹æ³•ä¸€æ˜¯åœ¨å°¾é€’å½’å‡½æ•°ä¹‹å¤–ï¼Œå†æä¾›ä¸€ä¸ªæ­£å¸¸å½¢å¼çš„å‡½æ•°ã€‚ function tailFactorial(n, total) { if (n === 1) return total; return tailFactorial(n - 1, n * total); } function factorial(n) { return tailFactorial(n, 1); } factorial(5) // 120 ä¸Šé¢ä»£ç é€šè¿‡ä¸€ä¸ªæ­£å¸¸å½¢å¼çš„é˜¶ä¹˜å‡½æ•° factorial ï¼Œè°ƒç”¨å°¾é€’å½’å‡½æ•° tailFactorial ï¼Œçœ‹èµ·æ¥å°±æ­£å¸¸å¤šäº†ã€‚ å‡½æ•°å¼ç¼–ç¨‹æœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œå«åšæŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰ï¼Œæ„æ€æ˜¯å°†å¤šå‚æ•°çš„å‡½æ•°è½¬æ¢æˆå•å‚æ•°çš„å½¢å¼ã€‚è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨æŸ¯é‡ŒåŒ–ã€‚ function currying(fn, n) { return function (m) { return fn.call(this, m, n); }; } function tailFactorial(n, total) { if (n === 1) return total; return tailFactorial(n - 1, n * total); } const factorial = currying(tailFactorial, 1); factorial(5) // 120 ä¸Šé¢ä»£ç é€šè¿‡æŸ¯é‡ŒåŒ–ï¼Œå°†å°¾é€’å½’å‡½æ•° tailFactorial å˜ä¸ºåªæ¥å—1ä¸ªå‚æ•°çš„ factorial ã€‚ ç¬¬äºŒç§æ–¹æ³•å°±ç®€å•å¤šäº†ï¼Œå°±æ˜¯é‡‡ç”¨ES6çš„å‡½æ•°é»˜è®¤å€¼ã€‚ function factorial(n, total = 1) { if (n === 1) return total; return factorial(n - 1, n * total); } factorial(5) // 120 ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•° total æœ‰é»˜è®¤å€¼1ï¼Œæ‰€ä»¥è°ƒç”¨æ—¶ä¸ç”¨æä¾›è¿™ä¸ªå€¼ã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œé€’å½’æœ¬è´¨ä¸Šæ˜¯ä¸€ç§å¾ªç¯æ“ä½œã€‚çº¯ç²¹çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€æ²¡æœ‰å¾ªç¯æ“ä½œå‘½ä»¤ï¼Œæ‰€æœ‰çš„å¾ªç¯éƒ½ç”¨é€’å½’å®ç°ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå°¾é€’å½’å¯¹è¿™äº›è¯­è¨€æå…¶é‡è¦ã€‚å¯¹äºå…¶ä»–æ”¯æŒâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€çš„è¯­è¨€ï¼ˆæ¯”å¦‚Luaï¼ŒES6ï¼‰ï¼Œåªéœ€è¦çŸ¥é“å¾ªç¯å¯ä»¥ç”¨é€’å½’ä»£æ›¿ï¼Œè€Œä¸€æ—¦ä½¿ç”¨é€’å½’ï¼Œå°±æœ€å¥½ä½¿ç”¨å°¾é€’å½’ã€‚ ä¸¥æ ¼æ¨¡å¼ES6çš„å°¾è°ƒç”¨ä¼˜åŒ–åªåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¼€å¯ï¼Œæ­£å¸¸æ¨¡å¼æ˜¯æ— æ•ˆçš„ã€‚ è¿™æ˜¯å› ä¸ºåœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œå‡½æ•°å†…éƒ¨æœ‰ä¸¤ä¸ªå˜é‡ï¼Œå¯ä»¥è·Ÿè¸ªå‡½æ•°çš„è°ƒç”¨æ ˆã€‚ func.argumentsï¼šè¿”å›è°ƒç”¨æ—¶å‡½æ•°çš„å‚æ•°ã€‚ func.callerï¼šè¿”å›è°ƒç”¨å½“å‰å‡½æ•°çš„é‚£ä¸ªå‡½æ•°ã€‚ å°¾è°ƒç”¨ä¼˜åŒ–å‘ç”Ÿæ—¶ï¼Œå‡½æ•°çš„è°ƒç”¨æ ˆä¼šæ”¹å†™ï¼Œå› æ­¤ä¸Šé¢ä¸¤ä¸ªå˜é‡å°±ä¼šå¤±çœŸã€‚ä¸¥æ ¼æ¨¡å¼ç¦ç”¨è¿™ä¸¤ä¸ªå˜é‡ï¼Œæ‰€ä»¥å°¾è°ƒç”¨æ¨¡å¼ä»…åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ç”Ÿæ•ˆã€‚ function restricted() { &quot;use strict&quot;; restricted.caller; // æŠ¥é”™ restricted.arguments; // æŠ¥é”™ } restricted(); å°¾é€’å½’ä¼˜åŒ–çš„å®ç°å°¾é€’å½’ä¼˜åŒ–åªåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ç”Ÿæ•ˆï¼Œé‚£ä¹ˆæ­£å¸¸æ¨¡å¼ä¸‹ï¼Œæˆ–è€…é‚£äº›ä¸æ”¯æŒè¯¥åŠŸèƒ½çš„ç¯å¢ƒä¸­ï¼Œæœ‰æ²¡æœ‰åŠæ³•ä¹Ÿä½¿ç”¨å°¾é€’å½’ä¼˜åŒ–å‘¢ï¼Ÿå›ç­”æ˜¯å¯ä»¥çš„ï¼Œå°±æ˜¯è‡ªå·±å®ç°å°¾é€’å½’ä¼˜åŒ–ã€‚ å®ƒçš„åŸç†éå¸¸ç®€å•ã€‚å°¾é€’å½’ä¹‹æ‰€ä»¥éœ€è¦ä¼˜åŒ–ï¼ŒåŸå› æ˜¯è°ƒç”¨æ ˆå¤ªå¤šï¼Œé€ æˆæº¢å‡ºï¼Œé‚£ä¹ˆåªè¦å‡å°‘è°ƒç”¨æ ˆï¼Œå°±ä¸ä¼šæº¢å‡ºã€‚æ€ä¹ˆåšå¯ä»¥å‡å°‘è°ƒç”¨æ ˆå‘¢ï¼Ÿå°±æ˜¯é‡‡ç”¨â€œå¾ªç¯â€æ¢æ‰â€œé€’å½’â€ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªæ­£å¸¸çš„é€’å½’å‡½æ•°ã€‚ function sum(x, y) { if (y &gt; 0) { return sum(x + 1, y - 1); } else { return x; } } sum(1, 100000) // Uncaught RangeError: Maximum call stack size exceeded(â€¦) ä¸Šé¢ä»£ç ä¸­ï¼Œsumæ˜¯ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œå‚æ•°xæ˜¯éœ€è¦ç´¯åŠ çš„å€¼ï¼Œå‚æ•°yæ§åˆ¶é€’å½’æ¬¡æ•°ã€‚ä¸€æ—¦æŒ‡å®šsumé€’å½’100000æ¬¡ï¼Œå°±ä¼šæŠ¥é”™ï¼Œæç¤ºè¶…å‡ºè°ƒç”¨æ ˆçš„æœ€å¤§æ¬¡æ•°ã€‚ è¹¦åºŠå‡½æ•°ï¼ˆtrampolineï¼‰å¯ä»¥å°†é€’å½’æ‰§è¡Œè½¬ä¸ºå¾ªç¯æ‰§è¡Œã€‚ function trampoline(f) { while (f &amp;&amp; f instanceof Function) { f = f(); } return f; } ä¸Šé¢å°±æ˜¯è¹¦åºŠå‡½æ•°çš„ä¸€ä¸ªå®ç°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°fä½œä¸ºå‚æ•°ã€‚åªè¦fæ‰§è¡Œåè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå°±ç»§ç»­æ‰§è¡Œã€‚æ³¨æ„ï¼Œè¿™é‡Œæ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæ‰§è¡Œè¯¥å‡½æ•°ï¼Œè€Œä¸æ˜¯å‡½æ•°é‡Œé¢è°ƒç”¨å‡½æ•°ï¼Œè¿™æ ·å°±é¿å…äº†é€’å½’æ‰§è¡Œï¼Œä»è€Œå°±æ¶ˆé™¤äº†è°ƒç”¨æ ˆè¿‡å¤§çš„é—®é¢˜ã€‚ ç„¶åï¼Œè¦åšçš„å°±æ˜¯å°†åŸæ¥çš„é€’å½’å‡½æ•°ï¼Œæ”¹å†™ä¸ºæ¯ä¸€æ­¥è¿”å›å¦ä¸€ä¸ªå‡½æ•°ã€‚ function sum(x, y) { if (y &gt; 0) { return sum.bind(null, x + 1, y - 1); } else { return x; } } ä¸Šé¢ä»£ç ä¸­ï¼Œsumå‡½æ•°çš„æ¯æ¬¡æ‰§è¡Œï¼Œéƒ½ä¼šè¿”å›è‡ªèº«çš„å¦ä¸€ä¸ªç‰ˆæœ¬ã€‚ ç°åœ¨ï¼Œä½¿ç”¨è¹¦åºŠå‡½æ•°æ‰§è¡Œsumï¼Œå°±ä¸ä¼šå‘ç”Ÿè°ƒç”¨æ ˆæº¢å‡ºã€‚ trampoline(sum(1, 100000)) // 100001 è¹¦åºŠå‡½æ•°å¹¶ä¸æ˜¯çœŸæ­£çš„å°¾é€’å½’ä¼˜åŒ–ï¼Œä¸‹é¢çš„å®ç°æ‰æ˜¯ã€‚ function tco(f) { var value; var active = false; var accumulated = []; return function accumulator() { accumulated.push(arguments); if (!active) { active = true; while (accumulated.length) { value = f.apply(this, accumulated.shift()); } active = false; return value; } }; } var sum = tco(function(x, y) { if (y &gt; 0) { return sum(x + 1, y - 1) } else { return x } }); sum(1, 100000) // 100001 ä¸Šé¢ä»£ç ä¸­ï¼Œtcoå‡½æ•°æ˜¯å°¾é€’å½’ä¼˜åŒ–çš„å®ç°ï¼Œå®ƒçš„å¥¥å¦™å°±åœ¨äºçŠ¶æ€å˜é‡activeã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå˜é‡æ˜¯ä¸æ¿€æ´»çš„ã€‚ä¸€æ—¦è¿›å…¥å°¾é€’å½’ä¼˜åŒ–çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªå˜é‡å°±æ¿€æ´»äº†ã€‚ç„¶åï¼Œæ¯ä¸€è½®é€’å½’sumè¿”å›çš„éƒ½æ˜¯undefinedï¼Œæ‰€ä»¥å°±é¿å…äº†é€’å½’æ‰§è¡Œï¼›è€Œaccumulatedæ•°ç»„å­˜æ”¾æ¯ä¸€è½®sumæ‰§è¡Œçš„å‚æ•°ï¼Œæ€»æ˜¯æœ‰å€¼çš„ï¼Œè¿™å°±ä¿è¯äº†accumulatorå‡½æ•°å†…éƒ¨çš„whileå¾ªç¯æ€»æ˜¯ä¼šæ‰§è¡Œã€‚è¿™æ ·å°±å¾ˆå·§å¦™åœ°å°†â€œé€’å½’â€æ”¹æˆäº†â€œå¾ªç¯â€ï¼Œè€Œåä¸€è½®çš„å‚æ•°ä¼šå–ä»£å‰ä¸€è½®çš„å‚æ•°ï¼Œä¿è¯äº†è°ƒç”¨æ ˆåªæœ‰ä¸€å±‚ã€‚ å‡½æ•°å‚æ•°çš„å°¾é€—å·ECMAScript 2017å°†å…è®¸å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æœ‰å°¾é€—å·ï¼ˆtrailing commaï¼‰ã€‚ æ­¤å‰ï¼Œå‡½æ•°å®šä¹‰å’Œè°ƒç”¨æ—¶ï¼Œéƒ½ä¸å…è®¸æœ€åä¸€ä¸ªå‚æ•°åé¢å‡ºç°é€—å·ã€‚ function clownsEverywhere( param1, param2 ) { /* ... */ } clownsEverywhere( &#39;foo&#39;, &#39;bar&#39; ); ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœåœ¨param2æˆ–baråé¢åŠ ä¸€ä¸ªé€—å·ï¼Œå°±ä¼šæŠ¥é”™ã€‚ è¿™æ ·çš„è¯ï¼Œå¦‚æœä»¥åä¿®æ”¹ä»£ç ï¼Œæƒ³ä¸ºå‡½æ•°clownsEverywhereæ·»åŠ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå°±åŠ¿å¿…è¦åœ¨ç¬¬äºŒä¸ªå‚æ•°åé¢æ·»åŠ ä¸€ä¸ªé€—å·ã€‚è¿™å¯¹ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿæ¥è¯´ï¼Œå°±ä¼šæ˜¾ç¤ºï¼Œæ·»åŠ é€—å·çš„é‚£ä¸€è¡Œä¹Ÿå‘ç”Ÿäº†å˜åŠ¨ã€‚è¿™çœ‹ä¸Šå»æœ‰ç‚¹å†—ä½™ï¼Œå› æ­¤æ–°çš„è¯­æ³•å…è®¸å®šä¹‰å’Œè°ƒç”¨æ—¶ï¼Œå°¾éƒ¨ç›´æ¥æœ‰ä¸€ä¸ªé€—å·ã€‚ function clownsEverywhere( param1, param2, ) { /* ... */ } clownsEverywhere( &#39;foo&#39;, &#39;bar&#39;, ); æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Function","slug":"Function","permalink":"https://microzz.com/tags/Function/"}]},{"title":"æ•°ç»„çš„æ‰©å±•(Array)","date":"2016-11-30T04:45:19.000Z","path":"2016/11/30/array/","text":"æ•°ç»„çš„æ‰©å±•Array.from()Array.fromæ–¹æ³•ç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆarray-like objectï¼‰å’Œå¯éå†ï¼ˆiterableï¼‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ES6æ–°å¢çš„æ•°æ®ç»“æ„Setå’ŒMapï¼‰ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ŒArray.fromå°†å®ƒè½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ let arrayLike = { &#39;0&#39;: &#39;a&#39;, &#39;1&#39;: &#39;b&#39;, &#39;2&#39;: &#39;c&#39;, length: 3 }; // ES5çš„å†™æ³• var arr1 = [].slice.call(arrayLike); // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;] // ES6çš„å†™æ³• let arr2 = Array.from(arrayLike); // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;] å®é™…åº”ç”¨ä¸­ï¼Œå¸¸è§çš„ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡æ˜¯DOMæ“ä½œè¿”å›çš„NodeListé›†åˆï¼Œä»¥åŠå‡½æ•°å†…éƒ¨çš„argumentså¯¹è±¡ã€‚Array.froméƒ½å¯ä»¥å°†å®ƒä»¬è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ // NodeListå¯¹è±¡ let ps = document.querySelectorAll(&#39;p&#39;); Array.from(ps).forEach(function (p) { console.log(p); }); // argumentså¯¹è±¡ function foo() { var args = Array.from(arguments); // ... } ä¸Šé¢ä»£ç ä¸­ï¼ŒquerySelectorAllæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œåªæœ‰å°†è¿™ä¸ªå¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œæ‰èƒ½ä½¿ç”¨forEachæ–¹æ³•ã€‚ åªè¦æ˜¯éƒ¨ç½²äº†Iteratoræ¥å£çš„æ•°æ®ç»“æ„ï¼ŒArray.froméƒ½èƒ½å°†å…¶è½¬ä¸ºæ•°ç»„ã€‚ Array.from(&#39;hello&#39;) // [&#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;] let namesSet = new Set([&#39;a&#39;, &#39;b&#39;]) Array.from(namesSet) // [&#39;a&#39;, &#39;b&#39;] ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²å’ŒSetç»“æ„éƒ½å…·æœ‰Iteratoræ¥å£ï¼Œå› æ­¤å¯ä»¥è¢«Array.fromè½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚ å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ï¼ŒArray.fromä¼šè¿”å›ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„æ–°æ•°ç»„ã€‚ Array.from([1, 2, 3]) // [1, 2, 3] å€¼å¾—æé†’çš„æ˜¯ï¼Œæ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰ä¹Ÿå¯ä»¥å°†æŸäº›æ•°æ®ç»“æ„è½¬ä¸ºæ•°ç»„ã€‚ // argumentså¯¹è±¡ function foo() { var args = [...arguments]; } // NodeListå¯¹è±¡ [...document.querySelectorAll(&#39;div&#39;)] æ‰©å±•è¿ç®—ç¬¦èƒŒåè°ƒç”¨çš„æ˜¯éå†å™¨æ¥å£ï¼ˆSymbol.iteratorï¼‰ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ¥å£ï¼Œå°±æ— æ³•è½¬æ¢ã€‚Array.fromæ–¹æ³•åˆ™æ˜¯è¿˜æ”¯æŒç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚æ‰€è°“ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œæœ¬è´¨ç‰¹å¾åªæœ‰ä¸€ç‚¹ï¼Œå³å¿…é¡»æœ‰lengthå±æ€§ã€‚å› æ­¤ï¼Œä»»ä½•æœ‰lengthå±æ€§çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥é€šè¿‡Array.fromæ–¹æ³•è½¬ä¸ºæ•°ç»„ï¼Œè€Œæ­¤æ—¶æ‰©å±•è¿ç®—ç¬¦å°±æ— æ³•è½¬æ¢ã€‚ Array.from({ length: 3 }); // [ undefined, undefined, undefined ] ä¸Šé¢ä»£ç ä¸­ï¼ŒArray.fromè¿”å›äº†ä¸€ä¸ªå…·æœ‰ä¸‰ä¸ªæˆå‘˜çš„æ•°ç»„ï¼Œæ¯ä¸ªä½ç½®çš„å€¼éƒ½æ˜¯undefinedã€‚æ‰©å±•è¿ç®—ç¬¦è½¬æ¢ä¸äº†è¿™ä¸ªå¯¹è±¡ã€‚ å¯¹äºè¿˜æ²¡æœ‰éƒ¨ç½²è¯¥æ–¹æ³•çš„æµè§ˆå™¨ï¼Œå¯ä»¥ç”¨Array.prototype.sliceæ–¹æ³•æ›¿ä»£ã€‚ const toArray = (() =&gt; Array.from ? Array.from : obj =&gt; [].slice.call(obj) )(); Array.fromè¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºæ•°ç»„çš„mapæ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åçš„å€¼æ”¾å…¥è¿”å›çš„æ•°ç»„ã€‚ Array.from(arrayLike, x =&gt; x * x); // ç­‰åŒäº Array.from(arrayLike).map(x =&gt; x * x); Array.from([1, 2, 3], (x) =&gt; x * x) // [1, 4, 9] ä¸‹é¢çš„ä¾‹å­æ˜¯å–å‡ºä¸€ç»„DOMèŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ã€‚ let spans = document.querySelectorAll(&#39;span.name&#39;); // map() let names1 = Array.prototype.map.call(spans, s =&gt; s.textContent); // Array.from() let names2 = Array.from(spans, s =&gt; s.textContent) ä¸‹é¢çš„ä¾‹å­å°†æ•°ç»„ä¸­å¸ƒå°”å€¼ä¸ºfalseçš„æˆå‘˜è½¬ä¸º0ã€‚ Array.from([1, , 2, , 3], (n) =&gt; n || 0) // [1, 0, 2, 0, 3] å¦ä¸€ä¸ªä¾‹å­æ˜¯è¿”å›å„ç§æ•°æ®çš„ç±»å‹ã€‚ function typesOf () { return Array.from(arguments, value =&gt; typeof value) } typesOf(null, [], NaN) // [&#39;object&#39;, &#39;object&#39;, &#39;number&#39;] å¦‚æœmapå‡½æ•°é‡Œé¢ç”¨åˆ°äº†thiså…³é”®å­—ï¼Œè¿˜å¯ä»¥ä¼ å…¥Array.fromçš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šthisã€‚ Array.from()å¯ä»¥å°†å„ç§å€¼è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œå¹¶ä¸”è¿˜æä¾›mapåŠŸèƒ½ã€‚è¿™å®é™…ä¸Šæ„å‘³ç€ï¼Œåªè¦æœ‰ä¸€ä¸ªåŸå§‹çš„æ•°æ®ç»“æ„ï¼Œä½ å°±å¯ä»¥å…ˆå¯¹å®ƒçš„å€¼è¿›è¡Œå¤„ç†ï¼Œç„¶åè½¬æˆè§„èŒƒçš„æ•°ç»„ç»“æ„ï¼Œè¿›è€Œå°±å¯ä»¥ä½¿ç”¨æ•°é‡ä¼—å¤šçš„æ•°ç»„æ–¹æ³•ã€‚ Array.from({ length: 2 }, () =&gt; &#39;jack&#39;) // [&#39;jack&#39;, &#39;jack&#39;] ä¸Šé¢ä»£ç ä¸­ï¼ŒArray.fromçš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†ç¬¬äºŒä¸ªå‚æ•°è¿è¡Œçš„æ¬¡æ•°ã€‚è¿™ç§ç‰¹æ€§å¯ä»¥è®©è¯¥æ–¹æ³•çš„ç”¨æ³•å˜å¾—éå¸¸çµæ´»ã€‚ Array.from()çš„å¦ä¸€ä¸ªåº”ç”¨æ˜¯ï¼Œå°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„ï¼Œç„¶åè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å› ä¸ºå®ƒèƒ½æ­£ç¡®å¤„ç†å„ç§Unicodeå­—ç¬¦ï¼Œå¯ä»¥é¿å…JavaScriptå°†å¤§äº\\uFFFFçš„Unicodeå­—ç¬¦ï¼Œç®—ä½œä¸¤ä¸ªå­—ç¬¦çš„bugã€‚ function countSymbols(string) { return Array.from(string).length; } Array.of()Array.ofæ–¹æ³•ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚ Array.of(3, 11, 8) // [3,11,8] Array.of(3) // [3] Array.of(3).length // 1 è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯å¼¥è¡¥æ•°ç»„æ„é€ å‡½æ•°Array()çš„ä¸è¶³ã€‚å› ä¸ºå‚æ•°ä¸ªæ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´Array()çš„è¡Œä¸ºæœ‰å·®å¼‚ã€‚ Array() // [] Array(3) // [, , ,] Array(3, 11, 8) // [3, 11, 8] ä¸Šé¢ä»£ç ä¸­ï¼ŒArrayæ–¹æ³•æ²¡æœ‰å‚æ•°ã€ä¸€ä¸ªå‚æ•°ã€ä¸‰ä¸ªå‚æ•°æ—¶ï¼Œè¿”å›ç»“æœéƒ½ä¸ä¸€æ ·ã€‚åªæœ‰å½“å‚æ•°ä¸ªæ•°ä¸å°‘äº2ä¸ªæ—¶ï¼ŒArray()æ‰ä¼šè¿”å›ç”±å‚æ•°ç»„æˆçš„æ–°æ•°ç»„ã€‚å‚æ•°ä¸ªæ•°åªæœ‰ä¸€ä¸ªæ—¶ï¼Œå®é™…ä¸Šæ˜¯æŒ‡å®šæ•°ç»„çš„é•¿åº¦ã€‚ Array.ofåŸºæœ¬ä¸Šå¯ä»¥ç”¨æ¥æ›¿ä»£Array()æˆ–new Array()ï¼Œå¹¶ä¸”ä¸å­˜åœ¨ç”±äºå‚æ•°ä¸åŒè€Œå¯¼è‡´çš„é‡è½½ã€‚å®ƒçš„è¡Œä¸ºéå¸¸ç»Ÿä¸€ã€‚ Array.of() // [] Array.of(undefined) // [undefined] Array.of(1) // [1] Array.of(1, 2) // [1, 2] Array.ofæ€»æ˜¯è¿”å›å‚æ•°å€¼ç»„æˆçš„æ•°ç»„ã€‚å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå°±è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚ Array.ofæ–¹æ³•å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿå®ç°ã€‚ function ArrayOf(){ return [].slice.call(arguments); } æ•°ç»„å®ä¾‹çš„copyWithin()æ•°ç»„å®ä¾‹çš„copyWithinæ–¹æ³•ï¼Œåœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼ˆä¼šè¦†ç›–åŸæœ‰æˆå‘˜ï¼‰ï¼Œç„¶åè¿”å›å½“å‰æ•°ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¼šä¿®æ”¹å½“å‰æ•°ç»„ã€‚ Array.prototype.copyWithin(target, start = 0, end = this.length) å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ã€‚ targetï¼ˆå¿…éœ€ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹æ›¿æ¢æ•°æ®ã€‚ startï¼ˆå¯é€‰ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹è¯»å–æ•°æ®ï¼Œé»˜è®¤ä¸º0ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚ endï¼ˆå¯é€‰ï¼‰ï¼šåˆ°è¯¥ä½ç½®å‰åœæ­¢è¯»å–æ•°æ®ï¼Œé»˜è®¤ç­‰äºæ•°ç»„é•¿åº¦ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚ è¿™ä¸‰ä¸ªå‚æ•°éƒ½åº”è¯¥æ˜¯æ•°å€¼ï¼Œå¦‚æœä¸æ˜¯ï¼Œä¼šè‡ªåŠ¨è½¬ä¸ºæ•°å€¼ã€‚ [1, 2, 3, 4, 5].copyWithin(0, 3) // [4, 5, 3, 4, 5] ä¸Šé¢ä»£ç è¡¨ç¤ºå°†ä»3å·ä½ç›´åˆ°æ•°ç»„ç»“æŸçš„æˆå‘˜ï¼ˆ4å’Œ5ï¼‰ï¼Œå¤åˆ¶åˆ°ä»0å·ä½å¼€å§‹çš„ä½ç½®ï¼Œç»“æœè¦†ç›–äº†åŸæ¥çš„1å’Œ2ã€‚ ä¸‹é¢æ˜¯æ›´å¤šä¾‹å­ã€‚ // å°†3å·ä½å¤åˆ¶åˆ°0å·ä½ [1, 2, 3, 4, 5].copyWithin(0, 3, 4) // [4, 2, 3, 4, 5] // -2ç›¸å½“äº3å·ä½ï¼Œ-1ç›¸å½“äº4å·ä½ [1, 2, 3, 4, 5].copyWithin(0, -2, -1) // [4, 2, 3, 4, 5] // å°†3å·ä½å¤åˆ¶åˆ°0å·ä½ [].copyWithin.call({length: 5, 3: 1}, 0, 3) // {0: 1, 3: 1, length: 5} // å°†2å·ä½åˆ°æ•°ç»„ç»“æŸï¼Œå¤åˆ¶åˆ°0å·ä½ var i32a = new Int32Array([1, 2, 3, 4, 5]); i32a.copyWithin(0, 2); // Int32Array [3, 4, 5, 4, 5] // å¯¹äºæ²¡æœ‰éƒ¨ç½²TypedArrayçš„copyWithinæ–¹æ³•çš„å¹³å° // éœ€è¦é‡‡ç”¨ä¸‹é¢çš„å†™æ³• [].copyWithin.call(new Int32Array([1, 2, 3, 4, 5]), 0, 3, 4); // Int32Array [4, 2, 3, 4, 5] æ•°ç»„å®ä¾‹çš„find()å’ŒfindIndex()æ•°ç»„å®ä¾‹çš„findæ–¹æ³•ï¼Œç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ï¼Œç›´åˆ°æ‰¾å‡ºç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸ºtrueçš„æˆå‘˜ï¼Œç„¶åè¿”å›è¯¥æˆå‘˜ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›undefinedã€‚ [1, 4, -5, 10].find((n) =&gt; n &lt; 0) // -5 ä¸Šé¢ä»£ç æ‰¾å‡ºæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå°äº0çš„æˆå‘˜ã€‚ [1, 5, 10, 15].find(function(value, index, arr) { return value &gt; 9; }) // 10 ä¸Šé¢ä»£ç ä¸­ï¼Œfindæ–¹æ³•çš„å›è°ƒå‡½æ•°å¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºå½“å‰çš„å€¼ã€å½“å‰çš„ä½ç½®å’ŒåŸæ•°ç»„ã€‚ æ•°ç»„å®ä¾‹çš„findIndexæ–¹æ³•çš„ç”¨æ³•ä¸findæ–¹æ³•éå¸¸ç±»ä¼¼ï¼Œè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æœæ‰€æœ‰æˆå‘˜éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å›-1ã€‚ [1, 5, 10, 15].findIndex(function(value, index, arr) { return value &gt; 9; }) // 2 è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå›è°ƒå‡½æ•°çš„thiså¯¹è±¡ã€‚ å¦å¤–ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å‘ç°NaNï¼Œå¼¥è¡¥äº†æ•°ç»„çš„IndexOfæ–¹æ³•çš„ä¸è¶³ã€‚ [NaN].indexOf(NaN) // -1 [NaN].findIndex(y =&gt; Object.is(NaN, y)) // 0 ä¸Šé¢ä»£ç ä¸­ï¼ŒindexOfæ–¹æ³•æ— æ³•è¯†åˆ«æ•°ç»„çš„NaNæˆå‘˜ï¼Œä½†æ˜¯findIndexæ–¹æ³•å¯ä»¥å€ŸåŠ©Object.isæ–¹æ³•åšåˆ°ã€‚ æ•°ç»„å®ä¾‹çš„fill()fillæ–¹æ³•ä½¿ç”¨ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„ã€‚ [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;].fill(7) // [7, 7, 7] new Array(3).fill(7) // [7, 7, 7] ä¸Šé¢ä»£ç è¡¨æ˜ï¼Œfillæ–¹æ³•ç”¨äºç©ºæ•°ç»„çš„åˆå§‹åŒ–éå¸¸æ–¹ä¾¿ã€‚æ•°ç»„ä¸­å·²æœ‰çš„å…ƒç´ ï¼Œä¼šè¢«å…¨éƒ¨æŠ¹å»ã€‚ fillæ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚ [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;].fill(7, 1, 2) // [&#39;a&#39;, 7, &#39;c&#39;] ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œfillæ–¹æ³•ä»1å·ä½å¼€å§‹ï¼Œå‘åŸæ•°ç»„å¡«å……7ï¼Œåˆ°2å·ä½ä¹‹å‰ç»“æŸã€‚ æ•°ç»„å®ä¾‹çš„entries()ï¼Œkeys()å’Œvalues()ES6æä¾›ä¸‰ä¸ªæ–°çš„æ–¹æ³•â€”â€”entries()ï¼Œkeys()å’Œvalues()â€”â€”ç”¨äºéå†æ•°ç»„ã€‚å®ƒä»¬éƒ½è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼ˆè¯¦è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œå¯ä»¥ç”¨for...ofå¾ªç¯è¿›è¡Œéå†ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯keys()æ˜¯å¯¹é”®åçš„éå†ã€values()æ˜¯å¯¹é”®å€¼çš„éå†ï¼Œentries()æ˜¯å¯¹é”®å€¼å¯¹çš„éå†ã€‚ for (let index of [&#39;a&#39;, &#39;b&#39;].keys()) { console.log(index); } // 0 // 1 for (let elem of [&#39;a&#39;, &#39;b&#39;].values()) { console.log(elem); } // &#39;a&#39; // &#39;b&#39; for (let [index, elem] of [&#39;a&#39;, &#39;b&#39;].entries()) { console.log(index, elem); } // 0 &quot;a&quot; // 1 &quot;b&quot; å¦‚æœä¸ä½¿ç”¨for...ofå¾ªç¯ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨éå†å™¨å¯¹è±¡çš„nextæ–¹æ³•ï¼Œè¿›è¡Œéå†ã€‚ let letter = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]; let entries = letter.entries(); console.log(entries.next().value); // [0, &#39;a&#39;] console.log(entries.next().value); // [1, &#39;b&#39;] console.log(entries.next().value); // [2, &#39;c&#39;] æ•°ç»„å®ä¾‹çš„includes()Array.prototype.includesæ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œä¸å­—ç¬¦ä¸²çš„includesæ–¹æ³•ç±»ä¼¼ã€‚è¯¥æ–¹æ³•å±äºES7ï¼Œä½†Babelè½¬ç å™¨å·²ç»æ”¯æŒã€‚ [1, 2, 3].includes(2); // true [1, 2, 3].includes(4); // false [1, 2, NaN].includes(NaN); // true è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœç´¢çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º0ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¡¨ç¤ºå€’æ•°çš„ä½ç½®ï¼Œå¦‚æœè¿™æ—¶å®ƒå¤§äºæ•°ç»„é•¿åº¦ï¼ˆæ¯”å¦‚ç¬¬äºŒä¸ªå‚æ•°ä¸º-4ï¼Œä½†æ•°ç»„é•¿åº¦ä¸º3ï¼‰ï¼Œåˆ™ä¼šé‡ç½®ä¸ºä»0å¼€å§‹ã€‚ [1, 2, 3].includes(3, 3); // false [1, 2, 3].includes(3, -1); // true æ²¡æœ‰è¯¥æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ•°ç»„çš„indexOfæ–¹æ³•ï¼Œæ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªå€¼ã€‚ if (arr.indexOf(el) !== -1) { // ... } indexOfæ–¹æ³•æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼Œä¸€æ˜¯ä¸å¤Ÿè¯­ä¹‰åŒ–ï¼Œå®ƒçš„å«ä¹‰æ˜¯æ‰¾åˆ°å‚æ•°å€¼çš„ç¬¬ä¸€ä¸ªå‡ºç°ä½ç½®ï¼Œæ‰€ä»¥è¦å»æ¯”è¾ƒæ˜¯å¦ä¸ç­‰äº-1ï¼Œè¡¨è¾¾èµ·æ¥ä¸å¤Ÿç›´è§‚ã€‚äºŒæ˜¯ï¼Œå®ƒå†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸å½“è¿ç®—ç¬¦ï¼ˆ===ï¼‰è¿›è¡Œåˆ¤æ–­ï¼Œè¿™ä¼šå¯¼è‡´å¯¹NaNçš„è¯¯åˆ¤ã€‚ [NaN].indexOf(NaN) // -1 includesä½¿ç”¨çš„æ˜¯ä¸ä¸€æ ·çš„åˆ¤æ–­ç®—æ³•ï¼Œå°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚ [NaN].includes(NaN) // true ä¸‹é¢ä»£ç ç”¨æ¥æ£€æŸ¥å½“å‰ç¯å¢ƒæ˜¯å¦æ”¯æŒè¯¥æ–¹æ³•ï¼Œå¦‚æœä¸æ”¯æŒï¼Œéƒ¨ç½²ä¸€ä¸ªç®€æ˜“çš„æ›¿ä»£ç‰ˆæœ¬ã€‚ const contains = (() =&gt; Array.prototype.includes ? (arr, value) =&gt; arr.includes(value) : (arr, value) =&gt; arr.some(el =&gt; el === value) )(); contains([&quot;foo&quot;, &quot;bar&quot;], &quot;baz&quot;); // =&gt; false å¦å¤–ï¼ŒMapå’ŒSetæ•°æ®ç»“æ„æœ‰ä¸€ä¸ªhasæ–¹æ³•ï¼Œéœ€è¦æ³¨æ„ä¸includesåŒºåˆ†ã€‚ Mapç»“æ„çš„hasæ–¹æ³•ï¼Œæ˜¯ç”¨æ¥æŸ¥æ‰¾é”®åçš„ï¼Œæ¯”å¦‚Map.prototype.has(key)ã€WeakMap.prototype.has(key)ã€Reflect.has(target, propertyKey)ã€‚ Setç»“æ„çš„hasæ–¹æ³•ï¼Œæ˜¯ç”¨æ¥æŸ¥æ‰¾å€¼çš„ï¼Œæ¯”å¦‚Set.prototype.has(value)ã€WeakSet.prototype.has(value)ã€‚ æ•°ç»„çš„ç©ºä½æ•°ç»„çš„ç©ºä½æŒ‡ï¼Œæ•°ç»„çš„æŸä¸€ä¸ªä½ç½®æ²¡æœ‰ä»»ä½•å€¼ã€‚æ¯”å¦‚ï¼ŒArrayæ„é€ å‡½æ•°è¿”å›çš„æ•°ç»„éƒ½æ˜¯ç©ºä½ã€‚ Array(3) // [, , ,] ä¸Šé¢ä»£ç ä¸­ï¼ŒArray(3)è¿”å›ä¸€ä¸ªå…·æœ‰3ä¸ªç©ºä½çš„æ•°ç»„ã€‚ æ³¨æ„ï¼Œç©ºä½ä¸æ˜¯undefinedï¼Œä¸€ä¸ªä½ç½®çš„å€¼ç­‰äºundefinedï¼Œä¾ç„¶æ˜¯æœ‰å€¼çš„ã€‚ç©ºä½æ˜¯æ²¡æœ‰ä»»ä½•å€¼ï¼Œinè¿ç®—ç¬¦å¯ä»¥è¯´æ˜è¿™ä¸€ç‚¹ã€‚ 0 in [undefined, undefined, undefined] // true 0 in [, , ,] // false ä¸Šé¢ä»£ç è¯´æ˜ï¼Œç¬¬ä¸€ä¸ªæ•°ç»„çš„0å·ä½ç½®æ˜¯æœ‰å€¼çš„ï¼Œç¬¬äºŒä¸ªæ•°ç»„çš„0å·ä½ç½®æ²¡æœ‰å€¼ã€‚ ES5å¯¹ç©ºä½çš„å¤„ç†ï¼Œå·²ç»å¾ˆä¸ä¸€è‡´äº†ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¼šå¿½ç•¥ç©ºä½ã€‚ forEach(), filter(), every() å’Œsome()éƒ½ä¼šè·³è¿‡ç©ºä½ã€‚ map()ä¼šè·³è¿‡ç©ºä½ï¼Œä½†ä¼šä¿ç•™è¿™ä¸ªå€¼ join()å’ŒtoString()ä¼šå°†ç©ºä½è§†ä¸ºundefinedï¼Œè€Œundefinedå’Œnullä¼šè¢«å¤„ç†æˆç©ºå­—ç¬¦ä¸²ã€‚ // forEachæ–¹æ³• [,&#39;a&#39;].forEach((x,i) =&gt; console.log(i)); // 1 // filteræ–¹æ³• [&#39;a&#39;,,&#39;b&#39;].filter(x =&gt; true) // [&#39;a&#39;,&#39;b&#39;] // everyæ–¹æ³• [,&#39;a&#39;].every(x =&gt; x===&#39;a&#39;) // true // someæ–¹æ³• [,&#39;a&#39;].some(x =&gt; x !== &#39;a&#39;) // false // mapæ–¹æ³• [,&#39;a&#39;].map(x =&gt; 1) // [,1] // joinæ–¹æ³• [,&#39;a&#39;,undefined,null].join(&#39;#&#39;) // &quot;#a##&quot; // toStringæ–¹æ³• [,&#39;a&#39;,undefined,null].toString() // &quot;,a,,&quot; ES6åˆ™æ˜¯æ˜ç¡®å°†ç©ºä½è½¬ä¸ºundefinedã€‚ Array.fromæ–¹æ³•ä¼šå°†æ•°ç»„çš„ç©ºä½ï¼Œè½¬ä¸ºundefinedï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šå¿½ç•¥ç©ºä½ã€‚ Array.from([&#39;a&#39;,,&#39;b&#39;]) // [ &quot;a&quot;, undefined, &quot;b&quot; ] æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰ä¹Ÿä¼šå°†ç©ºä½è½¬ä¸ºundefinedã€‚ [...[&#39;a&#39;,,&#39;b&#39;]] // [ &quot;a&quot;, undefined, &quot;b&quot; ] copyWithin()ä¼šè¿ç©ºä½ä¸€èµ·æ‹·è´ã€‚ [,&#39;a&#39;,&#39;b&#39;,,].copyWithin(2,0) // [,&quot;a&quot;,,&quot;a&quot;] fill()ä¼šå°†ç©ºä½è§†ä¸ºæ­£å¸¸çš„æ•°ç»„ä½ç½®ã€‚ new Array(3).fill(&#39;a&#39;) // [&quot;a&quot;,&quot;a&quot;,&quot;a&quot;] for...ofå¾ªç¯ä¹Ÿä¼šéå†ç©ºä½ã€‚ let arr = [, ,]; for (let i of arr) { console.log(1); } // 1 // 1 ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„arræœ‰ä¸¤ä¸ªç©ºä½ï¼Œfor...ofå¹¶æ²¡æœ‰å¿½ç•¥å®ƒä»¬ã€‚å¦‚æœæ”¹æˆmapæ–¹æ³•éå†ï¼Œç©ºä½æ˜¯ä¼šè·³è¿‡çš„ã€‚ entries()ã€keys()ã€values()ã€find()å’ŒfindIndex()ä¼šå°†ç©ºä½å¤„ç†æˆundefinedã€‚ // entries() [...[,&#39;a&#39;].entries()] // [[0,undefined], [1,&quot;a&quot;]] // keys() [...[,&#39;a&#39;].keys()] // [0,1] // values() [...[,&#39;a&#39;].values()] // [undefined,&quot;a&quot;] // find() [,&#39;a&#39;].find(x =&gt; true) // undefined // findIndex() [,&#39;a&#39;].findIndex(x =&gt; true) // 0 ç”±äºç©ºä½çš„å¤„ç†è§„åˆ™éå¸¸ä¸ç»Ÿä¸€ï¼Œæ‰€ä»¥å»ºè®®é¿å…å‡ºç°ç©ºä½ã€‚ æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Array","slug":"Array","permalink":"https://microzz.com/tags/Array/"}]},{"title":"æ•°å€¼çš„æ‰©å±•","date":"2016-11-25T09:45:19.000Z","path":"2016/11/25/number/","text":"æ•°å€¼çš„æ‰©å±•äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶è¡¨ç¤ºæ³•ES6æä¾›äº†äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶æ•°å€¼çš„æ–°çš„å†™æ³•ï¼Œåˆ†åˆ«ç”¨å‰ç¼€0bï¼ˆæˆ–0Bï¼‰å’Œ0oï¼ˆæˆ–0Oï¼‰è¡¨ç¤ºã€‚ 0b111110111 === 503 // true 0o767 === 503 // true ä»ES5å¼€å§‹ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¹‹ä¸­ï¼Œå…«è¿›åˆ¶å°±ä¸å†å…è®¸ä½¿ç”¨å‰ç¼€0è¡¨ç¤ºï¼ŒES6è¿›ä¸€æ­¥æ˜ç¡®ï¼Œè¦ä½¿ç”¨å‰ç¼€0oè¡¨ç¤ºã€‚ // éä¸¥æ ¼æ¨¡å¼ (function(){ console.log(0o11 === 011); })() // true // ä¸¥æ ¼æ¨¡å¼ (function(){ &#39;use strict&#39;; console.log(0o11 === 011); })() // Uncaught SyntaxError: Octal literals are not allowed in strict mode. å¦‚æœè¦å°†0bå’Œ0oå‰ç¼€çš„å­—ç¬¦ä¸²æ•°å€¼è½¬ä¸ºåè¿›åˆ¶ï¼Œè¦ä½¿ç”¨Numberæ–¹æ³•ã€‚ Number(&#39;0b111&#39;) // 7 Number(&#39;0o10&#39;) // 8 Number.isFinite(), Number.isNaN()ES6åœ¨Numberå¯¹è±¡ä¸Šï¼Œæ–°æä¾›äº†Number.isFinite()å’ŒNumber.isNaN()ä¸¤ä¸ªæ–¹æ³•ã€‚ Number.isFinite()ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªæ•°å€¼æ˜¯å¦ä¸ºæœ‰é™çš„ï¼ˆfiniteï¼‰ã€‚ Number.isFinite(15); // true Number.isFinite(0.8); // true Number.isFinite(NaN); // false Number.isFinite(Infinity); // false Number.isFinite(-Infinity); // false Number.isFinite(&#39;foo&#39;); // false Number.isFinite(&#39;15&#39;); // false Number.isFinite(true); // false ES5å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œéƒ¨ç½²Number.isFiniteæ–¹æ³•ã€‚ (function (global) { var global_isFinite = global.isFinite; Object.defineProperty(Number, &#39;isFinite&#39;, { value: function isFinite(value) { return typeof value === &#39;number&#39; &amp;&amp; global_isFinite(value); }, configurable: true, enumerable: false, writable: true }); })(this); Number.isNaN()ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºNaNã€‚ Number.isNaN(NaN) // true Number.isNaN(15) // false Number.isNaN(&#39;15&#39;) // false Number.isNaN(true) // false Number.isNaN(9/NaN) // true Number.isNaN(&#39;true&#39;/0) // true Number.isNaN(&#39;true&#39;/&#39;true&#39;) // true ES5é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œéƒ¨ç½²Number.isNaN()ã€‚ (function (global) { var global_isNaN = global.isNaN; Object.defineProperty(Number, &#39;isNaN&#39;, { value: function isNaN(value) { return typeof value === &#39;number&#39; &amp;&amp; global_isNaN(value); }, configurable: true, enumerable: false, writable: true }); })(this); å®ƒä»¬ä¸ä¼ ç»Ÿçš„å…¨å±€æ–¹æ³•isFinite()å’ŒisNaN()çš„åŒºåˆ«åœ¨äºï¼Œä¼ ç»Ÿæ–¹æ³•å…ˆè°ƒç”¨Number()å°†éæ•°å€¼çš„å€¼è½¬ä¸ºæ•°å€¼ï¼Œå†è¿›è¡Œåˆ¤æ–­ï¼Œè€Œè¿™ä¸¤ä¸ªæ–°æ–¹æ³•åªå¯¹æ•°å€¼æœ‰æ•ˆï¼Œéæ•°å€¼ä¸€å¾‹è¿”å›falseã€‚ isFinite(25) // true isFinite(&quot;25&quot;) // true Number.isFinite(25) // true Number.isFinite(&quot;25&quot;) // false isNaN(NaN) // true isNaN(&quot;NaN&quot;) // true Number.isNaN(NaN) // true Number.isNaN(&quot;NaN&quot;) // false Number.parseInt(), Number.parseFloat()ES6å°†å…¨å±€æ–¹æ³•parseInt()å’ŒparseFloat()ï¼Œç§»æ¤åˆ°Numberå¯¹è±¡ä¸Šé¢ï¼Œè¡Œä¸ºå®Œå…¨ä¿æŒä¸å˜ã€‚ // ES5çš„å†™æ³• parseInt(&#39;12.34&#39;) // 12 parseFloat(&#39;123.45#&#39;) // 123.45 // ES6çš„å†™æ³• Number.parseInt(&#39;12.34&#39;) // 12 Number.parseFloat(&#39;123.45#&#39;) // 123.45 è¿™æ ·åšçš„ç›®çš„ï¼Œæ˜¯é€æ­¥å‡å°‘å…¨å±€æ€§æ–¹æ³•ï¼Œä½¿å¾—è¯­è¨€é€æ­¥æ¨¡å—åŒ–ã€‚ Number.parseInt === parseInt // true Number.parseFloat === parseFloat // true Number.isInteger()Number.isInteger()ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•´æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨JavaScriptå†…éƒ¨ï¼Œæ•´æ•°å’Œæµ®ç‚¹æ•°æ˜¯åŒæ ·çš„å‚¨å­˜æ–¹æ³•ï¼Œæ‰€ä»¥3å’Œ3.0è¢«è§†ä¸ºåŒä¸€ä¸ªå€¼ã€‚ Number.isInteger(25) // true Number.isInteger(25.0) // true Number.isInteger(25.1) // false Number.isInteger(&quot;15&quot;) // false Number.isInteger(true) // false ES5å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œéƒ¨ç½²Number.isInteger()ã€‚ (function (global) { var floor = Math.floor, isFinite = global.isFinite; Object.defineProperty(Number, &#39;isInteger&#39;, { value: function isInteger(value) { return typeof value === &#39;number&#39; &amp;&amp; isFinite(value) &amp;&amp; value &gt; -9007199254740992 &amp;&amp; value &lt; 9007199254740992 &amp;&amp; floor(value) === value; }, configurable: true, enumerable: false, writable: true }); })(this); Number.EPSILONES6åœ¨Numberå¯¹è±¡ä¸Šé¢ï¼Œæ–°å¢ä¸€ä¸ªæå°çš„å¸¸é‡Number.EPSILONã€‚ Number.EPSILON // 2.220446049250313e-16 Number.EPSILON.toFixed(20) // &#39;0.00000000000000022204&#39; å¼•å…¥ä¸€ä¸ªè¿™ä¹ˆå°çš„é‡çš„ç›®çš„ï¼Œåœ¨äºä¸ºæµ®ç‚¹æ•°è®¡ç®—ï¼Œè®¾ç½®ä¸€ä¸ªè¯¯å·®èŒƒå›´ã€‚æˆ‘ä»¬çŸ¥é“æµ®ç‚¹æ•°è®¡ç®—æ˜¯ä¸ç²¾ç¡®çš„ã€‚ 0.1 + 0.2 // 0.30000000000000004 0.1 + 0.2 - 0.3 // 5.551115123125783e-17 5.551115123125783e-17.toFixed(20) // &#39;0.00000000000000005551&#39; ä½†æ˜¯å¦‚æœè¿™ä¸ªè¯¯å·®èƒ½å¤Ÿå°äºNumber.EPSILONï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºå¾—åˆ°äº†æ­£ç¡®ç»“æœã€‚ 5.551115123125783e-17 &lt; Number.EPSILON // true å› æ­¤ï¼ŒNumber.EPSILONçš„å®è´¨æ˜¯ä¸€ä¸ªå¯ä»¥æ¥å—çš„è¯¯å·®èŒƒå›´ã€‚ function withinErrorMargin (left, right) { return Math.abs(left - right) &lt; Number.EPSILON; } withinErrorMargin(0.1 + 0.2, 0.3) // true withinErrorMargin(0.2 + 0.2, 0.3) // false ä¸Šé¢çš„ä»£ç ä¸ºæµ®ç‚¹æ•°è¿ç®—ï¼Œéƒ¨ç½²äº†ä¸€ä¸ªè¯¯å·®æ£€æŸ¥å‡½æ•°ã€‚ å®‰å…¨æ•´æ•°å’ŒNumber.isSafeInteger()JavaScriptèƒ½å¤Ÿå‡†ç¡®è¡¨ç¤ºçš„æ•´æ•°èŒƒå›´åœ¨-2^53åˆ°2^53ä¹‹é—´ï¼ˆä¸å«ä¸¤ä¸ªç«¯ç‚¹ï¼‰ï¼Œè¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œæ— æ³•ç²¾ç¡®è¡¨ç¤ºè¿™ä¸ªå€¼ã€‚ Math.pow(2, 53) // 9007199254740992 9007199254740992 // 9007199254740992 9007199254740993 // 9007199254740992 Math.pow(2, 53) === Math.pow(2, 53) + 1 // true ä¸Šé¢ä»£ç ä¸­ï¼Œè¶…å‡º2çš„53æ¬¡æ–¹ä¹‹åï¼Œä¸€ä¸ªæ•°å°±ä¸ç²¾ç¡®äº†ã€‚ ES6å¼•å…¥äº†Number.MAX_SAFE_INTEGERå’ŒNumber.MIN_SAFE_INTEGERè¿™ä¸¤ä¸ªå¸¸é‡ï¼Œç”¨æ¥è¡¨ç¤ºè¿™ä¸ªèŒƒå›´çš„ä¸Šä¸‹é™ã€‚ Number.MAX_SAFE_INTEGER === Math.pow(2, 53) - 1 // true Number.MAX_SAFE_INTEGER === 9007199254740991 // true Number.MIN_SAFE_INTEGER === -Number.MAX_SAFE_INTEGER // true Number.MIN_SAFE_INTEGER === -9007199254740991 // true ä¸Šé¢ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ°JavaScriptèƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºçš„æé™ã€‚ Number.isSafeInteger()åˆ™æ˜¯ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦è½åœ¨è¿™ä¸ªèŒƒå›´ä¹‹å†…ã€‚ Number.isSafeInteger(&#39;a&#39;) // false Number.isSafeInteger(null) // false Number.isSafeInteger(NaN) // false Number.isSafeInteger(Infinity) // false Number.isSafeInteger(-Infinity) // false Number.isSafeInteger(3) // true Number.isSafeInteger(1.2) // false Number.isSafeInteger(9007199254740990) // true Number.isSafeInteger(9007199254740992) // false Number.isSafeInteger(Number.MIN_SAFE_INTEGER - 1) // false Number.isSafeInteger(Number.MIN_SAFE_INTEGER) // true Number.isSafeInteger(Number.MAX_SAFE_INTEGER) // true Number.isSafeInteger(Number.MAX_SAFE_INTEGER + 1) // false è¿™ä¸ªå‡½æ•°çš„å®ç°å¾ˆç®€å•ï¼Œå°±æ˜¯è·Ÿå®‰å…¨æ•´æ•°çš„ä¸¤ä¸ªè¾¹ç•Œå€¼æ¯”è¾ƒä¸€ä¸‹ã€‚ Number.isSafeInteger = function (n) { return (typeof n === &#39;number&#39; &amp;&amp; Math.round(n) === n &amp;&amp; Number.MIN_SAFE_INTEGER &lt;= n &amp;&amp; n &lt;= Number.MAX_SAFE_INTEGER); } å®é™…ä½¿ç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œéœ€è¦æ³¨æ„ã€‚éªŒè¯è¿ç®—ç»“æœæ˜¯å¦è½åœ¨å®‰å…¨æ•´æ•°çš„èŒƒå›´å†…ï¼Œä¸è¦åªéªŒè¯è¿ç®—ç»“æœï¼Œè€Œè¦åŒæ—¶éªŒè¯å‚ä¸è¿ç®—çš„æ¯ä¸ªå€¼ã€‚ Number.isSafeInteger(9007199254740993) // false Number.isSafeInteger(990) // true Number.isSafeInteger(9007199254740993 - 990) // true 9007199254740993 - 990 // è¿”å›ç»“æœ 9007199254740002 // æ­£ç¡®ç­”æ¡ˆåº”è¯¥æ˜¯ 9007199254740003 ä¸Šé¢ä»£ç ä¸­ï¼Œ9007199254740993ä¸æ˜¯ä¸€ä¸ªå®‰å…¨æ•´æ•°ï¼Œä½†æ˜¯Number.isSafeIntegerä¼šè¿”å›ç»“æœï¼Œæ˜¾ç¤ºè®¡ç®—ç»“æœæ˜¯å®‰å…¨çš„ã€‚è¿™æ˜¯å› ä¸ºï¼Œè¿™ä¸ªæ•°è¶…å‡ºäº†ç²¾åº¦èŒƒå›´ï¼Œå¯¼è‡´åœ¨è®¡ç®—æœºå†…éƒ¨ï¼Œä»¥9007199254740992çš„å½¢å¼å‚¨å­˜ã€‚ 9007199254740993 === 9007199254740992 // true æ‰€ä»¥ï¼Œå¦‚æœåªéªŒè¯è¿ç®—ç»“æœæ˜¯å¦ä¸ºå®‰å…¨æ•´æ•°ï¼Œå¾ˆå¯èƒ½å¾—åˆ°é”™è¯¯ç»“æœã€‚ä¸‹é¢çš„å‡½æ•°å¯ä»¥åŒæ—¶éªŒè¯ä¸¤ä¸ªè¿ç®—æ•°å’Œè¿ç®—ç»“æœã€‚ function trusty (left, right, result) { if ( Number.isSafeInteger(left) &amp;&amp; Number.isSafeInteger(right) &amp;&amp; Number.isSafeInteger(result) ) { return result; } throw new RangeError(&#39;Operation cannot be trusted!&#39;); } trusty(9007199254740993, 990, 9007199254740993 - 990) // RangeError: Operation cannot be trusted! trusty(1, 2, 3) // 3 Mathå¯¹è±¡çš„æ‰©å±•ES6åœ¨Mathå¯¹è±¡ä¸Šæ–°å¢äº†17ä¸ªä¸æ•°å­¦ç›¸å…³çš„æ–¹æ³•ã€‚æ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½æ˜¯é™æ€æ–¹æ³•ï¼Œåªèƒ½åœ¨Mathå¯¹è±¡ä¸Šè°ƒç”¨ã€‚ Math.trunc()Math.truncæ–¹æ³•ç”¨äºå»é™¤ä¸€ä¸ªæ•°çš„å°æ•°éƒ¨åˆ†ï¼Œè¿”å›æ•´æ•°éƒ¨åˆ†ã€‚ Math.trunc(4.1) // 4 Math.trunc(4.9) // 4 Math.trunc(-4.1) // -4 Math.trunc(-4.9) // -4 Math.trunc(-0.1234) // -0 å¯¹äºéæ•°å€¼ï¼ŒMath.truncå†…éƒ¨ä½¿ç”¨Numberæ–¹æ³•å°†å…¶å…ˆè½¬ä¸ºæ•°å€¼ã€‚ Math.trunc(&#39;123.456&#39;) // 123 å¯¹äºç©ºå€¼å’Œæ— æ³•æˆªå–æ•´æ•°çš„å€¼ï¼Œè¿”å›NaNã€‚ Math.trunc(NaN); // NaN Math.trunc(&#39;foo&#39;); // NaN Math.trunc(); // NaN å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚ Math.trunc = Math.trunc || function(x) { return x &lt; 0 ? Math.ceil(x) : Math.floor(x); }; Math.sign()Math.signæ–¹æ³•ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°åˆ°åº•æ˜¯æ­£æ•°ã€è´Ÿæ•°ã€è¿˜æ˜¯é›¶ã€‚ å®ƒä¼šè¿”å›äº”ç§å€¼ã€‚ å‚æ•°ä¸ºæ­£æ•°ï¼Œè¿”å›+1ï¼› å‚æ•°ä¸ºè´Ÿæ•°ï¼Œè¿”å›-1ï¼› å‚æ•°ä¸º0ï¼Œè¿”å›0ï¼› å‚æ•°ä¸º-0ï¼Œè¿”å›-0; å…¶ä»–å€¼ï¼Œè¿”å›NaNã€‚ Math.sign(-5) // -1 Math.sign(5) // +1 Math.sign(0) // +0 Math.sign(-0) // -0 Math.sign(NaN) // NaN Math.sign(&#39;foo&#39;); // NaN Math.sign(); // NaN å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚ Math.sign = Math.sign || function(x) { x = +x; // convert to a number if (x === 0 || isNaN(x)) { return x; } return x &gt; 0 ? 1 : -1; }; Math.cbrt()Math.cbrtæ–¹æ³•ç”¨äºè®¡ç®—ä¸€ä¸ªæ•°çš„ç«‹æ–¹æ ¹ã€‚ Math.cbrt(-1) // -1 Math.cbrt(0) // 0 Math.cbrt(1) // 1 Math.cbrt(2) // 1.2599210498948734 å¯¹äºéæ•°å€¼ï¼ŒMath.cbrtæ–¹æ³•å†…éƒ¨ä¹Ÿæ˜¯å…ˆä½¿ç”¨Numberæ–¹æ³•å°†å…¶è½¬ä¸ºæ•°å€¼ã€‚ Math.cbrt(&#39;8&#39;) // 2 Math.cbrt(&#39;hello&#39;) // NaN å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚ Math.cbrt = Math.cbrt || function(x) { var y = Math.pow(Math.abs(x), 1/3); return x &lt; 0 ? -y : y; }; Math.clz32()JavaScriptçš„æ•´æ•°ä½¿ç”¨32ä½äºŒè¿›åˆ¶å½¢å¼è¡¨ç¤ºï¼ŒMath.clz32æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°çš„32ä½æ— ç¬¦å·æ•´æ•°å½¢å¼æœ‰å¤šå°‘ä¸ªå‰å¯¼0ã€‚ Math.clz32(0) // 32 Math.clz32(1) // 31 Math.clz32(1000) // 22 Math.clz32(0b01000000000000000000000000000000) // 1 Math.clz32(0b00100000000000000000000000000000) // 2 ä¸Šé¢ä»£ç ä¸­ï¼Œ0çš„äºŒè¿›åˆ¶å½¢å¼å…¨ä¸º0ï¼Œæ‰€ä»¥æœ‰32ä¸ªå‰å¯¼0ï¼›1çš„äºŒè¿›åˆ¶å½¢å¼æ˜¯0b1ï¼Œåªå 1ä½ï¼Œæ‰€ä»¥32ä½ä¹‹ä¸­æœ‰31ä¸ªå‰å¯¼0ï¼›1000çš„äºŒè¿›åˆ¶å½¢å¼æ˜¯0b1111101000ï¼Œä¸€å…±æœ‰10ä½ï¼Œæ‰€ä»¥32ä½ä¹‹ä¸­æœ‰22ä¸ªå‰å¯¼0ã€‚ clz32è¿™ä¸ªå‡½æ•°åå°±æ¥è‡ªâ€count leading zero bits in 32-bit binary representations of a numberâ€œï¼ˆè®¡ç®—32ä½æ•´æ•°çš„å‰å¯¼0ï¼‰çš„ç¼©å†™ã€‚ å·¦ç§»è¿ç®—ç¬¦ï¼ˆ&lt;&lt;ï¼‰ä¸Math.clz32æ–¹æ³•ç›´æ¥ç›¸å…³ã€‚ Math.clz32(0) // 32 Math.clz32(1) // 31 Math.clz32(1 &lt;&lt; 1) // 30 Math.clz32(1 &lt;&lt; 2) // 29 Math.clz32(1 &lt;&lt; 29) // 2 å¯¹äºå°æ•°ï¼ŒMath.clz32æ–¹æ³•åªè€ƒè™‘æ•´æ•°éƒ¨åˆ†ã€‚ Math.clz32(3.2) // 30 Math.clz32(3.9) // 30 å¯¹äºç©ºå€¼æˆ–å…¶ä»–ç±»å‹çš„å€¼ï¼ŒMath.clz32æ–¹æ³•ä¼šå°†å®ƒä»¬å…ˆè½¬ä¸ºæ•°å€¼ï¼Œç„¶åå†è®¡ç®—ã€‚ Math.clz32() // 32 Math.clz32(NaN) // 32 Math.clz32(Infinity) // 32 Math.clz32(null) // 32 Math.clz32(&#39;foo&#39;) // 32 Math.clz32([]) // 32 Math.clz32({}) // 32 Math.clz32(true) // 31 Math.imul()Math.imulæ–¹æ³•è¿”å›ä¸¤ä¸ªæ•°ä»¥32ä½å¸¦ç¬¦å·æ•´æ•°å½¢å¼ç›¸ä¹˜çš„ç»“æœï¼Œè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª32ä½çš„å¸¦ç¬¦å·æ•´æ•°ã€‚ Math.imul(2, 4) // 8 Math.imul(-1, 8) // -8 Math.imul(-2, -2) // 4 å¦‚æœåªè€ƒè™‘æœ€å32ä½ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒMath.imul(a, b)ä¸a * bçš„ç»“æœæ˜¯ç›¸åŒçš„ï¼Œå³è¯¥æ–¹æ³•ç­‰åŒäº(a * b)|0çš„æ•ˆæœï¼ˆè¶…è¿‡32ä½çš„éƒ¨åˆ†æº¢å‡ºï¼‰ã€‚ä¹‹æ‰€ä»¥éœ€è¦éƒ¨ç½²è¿™ä¸ªæ–¹æ³•ï¼Œæ˜¯å› ä¸ºJavaScriptæœ‰ç²¾åº¦é™åˆ¶ï¼Œè¶…è¿‡2çš„53æ¬¡æ–¹çš„å€¼æ— æ³•ç²¾ç¡®è¡¨ç¤ºã€‚è¿™å°±æ˜¯è¯´ï¼Œå¯¹äºé‚£äº›å¾ˆå¤§çš„æ•°çš„ä¹˜æ³•ï¼Œä½ä½æ•°å€¼å¾€å¾€éƒ½æ˜¯ä¸ç²¾ç¡®çš„ï¼ŒMath.imulæ–¹æ³•å¯ä»¥è¿”å›æ­£ç¡®çš„ä½ä½æ•°å€¼ã€‚ (0x7fffffff * 0x7fffffff)|0 // 0 ä¸Šé¢è¿™ä¸ªä¹˜æ³•ç®—å¼ï¼Œè¿”å›ç»“æœä¸º0ã€‚ä½†æ˜¯ç”±äºè¿™ä¸¤ä¸ªäºŒè¿›åˆ¶æ•°çš„æœ€ä½ä½éƒ½æ˜¯1ï¼Œæ‰€ä»¥è¿™ä¸ªç»“æœè‚¯å®šæ˜¯ä¸æ­£ç¡®çš„ï¼Œå› ä¸ºæ ¹æ®äºŒè¿›åˆ¶ä¹˜æ³•ï¼Œè®¡ç®—ç»“æœçš„äºŒè¿›åˆ¶æœ€ä½ä½åº”è¯¥ä¹Ÿæ˜¯1ã€‚è¿™ä¸ªé”™è¯¯å°±æ˜¯å› ä¸ºå®ƒä»¬çš„ä¹˜ç§¯è¶…è¿‡äº†2çš„53æ¬¡æ–¹ï¼ŒJavaScriptæ— æ³•ä¿å­˜é¢å¤–çš„ç²¾åº¦ï¼Œå°±æŠŠä½ä½çš„å€¼éƒ½å˜æˆäº†0ã€‚Math.imulæ–¹æ³•å¯ä»¥è¿”å›æ­£ç¡®çš„å€¼1ã€‚ Math.imul(0x7fffffff, 0x7fffffff) // 1 Math.fround()Math.froundæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°çš„å•ç²¾åº¦æµ®ç‚¹æ•°å½¢å¼ã€‚ Math.fround(0) // 0 Math.fround(1) // 1 Math.fround(1.337) // 1.3370000123977661 Math.fround(1.5) // 1.5 Math.fround(NaN) // NaN å¯¹äºæ•´æ•°æ¥è¯´ï¼ŒMath.froundæ–¹æ³•è¿”å›ç»“æœä¸ä¼šæœ‰ä»»ä½•ä¸åŒï¼ŒåŒºåˆ«ä¸»è¦æ˜¯é‚£äº›æ— æ³•ç”¨64ä¸ªäºŒè¿›åˆ¶ä½ç²¾ç¡®è¡¨ç¤ºçš„å°æ•°ã€‚è¿™æ—¶ï¼ŒMath.froundæ–¹æ³•ä¼šè¿”å›æœ€æ¥è¿‘è¿™ä¸ªå°æ•°çš„å•ç²¾åº¦æµ®ç‚¹æ•°ã€‚ å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚ Math.fround = Math.fround || function(x) { return new Float32Array([x])[0]; }; Math.hypot()Math.hypotæ–¹æ³•è¿”å›æ‰€æœ‰å‚æ•°çš„å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹ã€‚ Math.hypot(3, 4); // 5 Math.hypot(3, 4, 5); // 7.0710678118654755 Math.hypot(); // 0 Math.hypot(NaN); // NaN Math.hypot(3, 4, &#39;foo&#39;); // NaN Math.hypot(3, 4, &#39;5&#39;); // 7.0710678118654755 Math.hypot(-3); // 3 ä¸Šé¢ä»£ç ä¸­ï¼Œ3çš„å¹³æ–¹åŠ ä¸Š4çš„å¹³æ–¹ï¼Œç­‰äº5çš„å¹³æ–¹ã€‚ å¦‚æœå‚æ•°ä¸æ˜¯æ•°å€¼ï¼ŒMath.hypotæ–¹æ³•ä¼šå°†å…¶è½¬ä¸ºæ•°å€¼ã€‚åªè¦æœ‰ä¸€ä¸ªå‚æ•°æ— æ³•è½¬ä¸ºæ•°å€¼ï¼Œå°±ä¼šè¿”å›NaNã€‚ å¯¹æ•°æ–¹æ³•ES6æ–°å¢äº†4ä¸ªå¯¹æ•°ç›¸å…³æ–¹æ³•ã€‚ ï¼ˆ1ï¼‰ Math.expm1() Math.expm1(x)è¿”å›ex - 1ï¼Œå³Math.exp(x) - 1ã€‚ Math.expm1(-1) // -0.6321205588285577 Math.expm1(0) // 0 Math.expm1(1) // 1.718281828459045 å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚ Math.expm1 = Math.expm1 || function(x) { return Math.exp(x) - 1; }; ï¼ˆ2ï¼‰Math.log1p() Math.log1p(x)æ–¹æ³•è¿”å›1 + xçš„è‡ªç„¶å¯¹æ•°ï¼Œå³Math.log(1 + x)ã€‚å¦‚æœxå°äº-1ï¼Œè¿”å›NaNã€‚ Math.log1p(1) // 0.6931471805599453 Math.log1p(0) // 0 Math.log1p(-1) // -Infinity Math.log1p(-2) // NaN å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚ Math.log1p = Math.log1p || function(x) { return Math.log(1 + x); }; ï¼ˆ3ï¼‰Math.log10() Math.log10(x)è¿”å›ä»¥10ä¸ºåº•çš„xçš„å¯¹æ•°ã€‚å¦‚æœxå°äº0ï¼Œåˆ™è¿”å›NaNã€‚ Math.log10(2) // 0.3010299956639812 Math.log10(1) // 0 Math.log10(0) // -Infinity Math.log10(-2) // NaN Math.log10(100000) // 5 å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚ Math.log10 = Math.log10 || function(x) { return Math.log(x) / Math.LN10; }; ï¼ˆ4ï¼‰Math.log2() Math.log2(x)è¿”å›ä»¥2ä¸ºåº•çš„xçš„å¯¹æ•°ã€‚å¦‚æœxå°äº0ï¼Œåˆ™è¿”å›NaNã€‚ Math.log2(3) // 1.584962500721156 Math.log2(2) // 1 Math.log2(1) // 0 Math.log2(0) // -Infinity Math.log2(-2) // NaN Math.log2(1024) // 10 Math.log2(1 &lt;&lt; 29) // 29 å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚ Math.log2 = Math.log2 || function(x) { return Math.log(x) / Math.LN2; }; ä¸‰è§’å‡½æ•°æ–¹æ³•ES6æ–°å¢äº†6ä¸ªä¸‰è§’å‡½æ•°æ–¹æ³•ã€‚ Math.sinh(x) è¿”å›xçš„åŒæ›²æ­£å¼¦ï¼ˆhyperbolic sineï¼‰ Math.cosh(x) è¿”å›xçš„åŒæ›²ä½™å¼¦ï¼ˆhyperbolic cosineï¼‰ Math.tanh(x) è¿”å›xçš„åŒæ›²æ­£åˆ‡ï¼ˆhyperbolic tangentï¼‰ Math.asinh(x) è¿”å›xçš„ååŒæ›²æ­£å¼¦ï¼ˆinverse hyperbolic sineï¼‰ Math.acosh(x) è¿”å›xçš„ååŒæ›²ä½™å¼¦ï¼ˆinverse hyperbolic cosineï¼‰ Math.atanh(x) è¿”å›xçš„ååŒæ›²æ­£åˆ‡ï¼ˆinverse hyperbolic tangentï¼‰ æŒ‡æ•°è¿ç®—ç¬¦ES7æ–°å¢äº†ä¸€ä¸ªæŒ‡æ•°è¿ç®—ç¬¦ï¼ˆ**ï¼‰ï¼Œç›®å‰Babelè½¬ç å™¨å·²ç»æ”¯æŒã€‚ 2 ** 2 // 4 2 ** 3 // 8 æŒ‡æ•°è¿ç®—ç¬¦å¯ä»¥ä¸ç­‰å·ç»“åˆï¼Œå½¢æˆä¸€ä¸ªæ–°çš„èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ**=ï¼‰ã€‚ let a = 2; a **= 2; // ç­‰åŒäº a = a * a; let b = 3; b **= 3; // ç­‰åŒäº b = b * b * b;","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Number","slug":"Number","permalink":"https://microzz.com/tags/Number/"}]},{"title":"æ­£åˆ™çš„æ‰©å±•(RegExp)","date":"2016-11-20T07:57:19.000Z","path":"2016/11/20/regex/","text":"æ­£åˆ™çš„æ‰©å±•RegExpæ„é€ å‡½æ•°åœ¨ES5ä¸­ï¼ŒRegExpæ„é€ å‡½æ•°çš„å‚æ•°æœ‰ä¸¤ç§æƒ…å†µã€‚ ç¬¬ä¸€ç§æƒ…å†µæ˜¯ï¼Œå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™æ—¶ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ï¼ˆflagï¼‰ã€‚ var regex = new RegExp(&#39;xyz&#39;, &#39;i&#39;); // ç­‰ä»·äº var regex = /xyz/i; ç¬¬äºŒç§æƒ…å†µæ˜¯ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨ç¤ºå¼ï¼Œè¿™æ—¶ä¼šè¿”å›ä¸€ä¸ªåŸæœ‰æ­£åˆ™è¡¨è¾¾å¼çš„æ‹·è´ã€‚ var regex = new RegExp(/xyz/i); // ç­‰ä»·äº var regex = /xyz/i; ä½†æ˜¯ï¼ŒES5ä¸å…è®¸æ­¤æ—¶ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ·»åŠ ä¿®é¥°ç¬¦ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ var regex = new RegExp(/xyz/, &#39;i&#39;); // Uncaught TypeError: Cannot supply flags when constructing one RegExp from another ES6æ”¹å˜äº†è¿™ç§è¡Œä¸ºã€‚å¦‚æœRegExpæ„é€ å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ­£åˆ™å¯¹è±¡ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šä¿®é¥°ç¬¦ã€‚è€Œä¸”ï¼Œè¿”å›çš„æ­£åˆ™è¡¨è¾¾å¼ä¼šå¿½ç•¥åŸæœ‰çš„æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ï¼Œåªä½¿ç”¨æ–°æŒ‡å®šçš„ä¿®é¥°ç¬¦ã€‚ new RegExp(/abc/ig, &#39;i&#39;).flags // &quot;i&quot; ä¸Šé¢ä»£ç ä¸­ï¼ŒåŸæœ‰æ­£åˆ™å¯¹è±¡çš„ä¿®é¥°ç¬¦æ˜¯igï¼Œå®ƒä¼šè¢«ç¬¬äºŒä¸ªå‚æ•°iè¦†ç›–ã€‚ å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•å­—ç¬¦ä¸²å¯¹è±¡å…±æœ‰4ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼šmatch()ã€replace()ã€search()å’Œsplit()ã€‚ ES6å°†è¿™4ä¸ªæ–¹æ³•ï¼Œåœ¨è¯­è¨€å†…éƒ¨å…¨éƒ¨è°ƒç”¨RegExpçš„å®ä¾‹æ–¹æ³•ï¼Œä»è€Œåšåˆ°æ‰€æœ‰ä¸æ­£åˆ™ç›¸å…³çš„æ–¹æ³•ï¼Œå…¨éƒ½å®šä¹‰åœ¨RegExpå¯¹è±¡ä¸Šã€‚ String.prototype.match è°ƒç”¨ RegExp.prototype[Symbol.match] String.prototype.replace è°ƒç”¨ RegExp.prototype[Symbol.replace] String.prototype.search è°ƒç”¨ RegExp.prototype[Symbol.search] String.prototype.split è°ƒç”¨ RegExp.prototype[Symbol.split] uä¿®é¥°ç¬¦ES6å¯¹æ­£åˆ™è¡¨è¾¾å¼æ·»åŠ äº†uä¿®é¥°ç¬¦ï¼Œå«ä¹‰ä¸ºâ€œUnicodeæ¨¡å¼â€ï¼Œç”¨æ¥æ­£ç¡®å¤„ç†å¤§äº\\uFFFFçš„Unicodeå­—ç¬¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼šæ­£ç¡®å¤„ç†å››ä¸ªå­—èŠ‚çš„UTF-16ç¼–ç ã€‚ /^\\uD83D/u.test(&#39;\\uD83D\\uDC2A&#39;) // false /^\\uD83D/.test(&#39;\\uD83D\\uDC2A&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œ\\uD83D\\uDC2Aæ˜¯ä¸€ä¸ªå››ä¸ªå­—èŠ‚çš„UTF-16ç¼–ç ï¼Œä»£è¡¨ä¸€ä¸ªå­—ç¬¦ã€‚ä½†æ˜¯ï¼ŒES5ä¸æ”¯æŒå››ä¸ªå­—èŠ‚çš„UTF-16ç¼–ç ï¼Œä¼šå°†å…¶è¯†åˆ«ä¸ºä¸¤ä¸ªå­—ç¬¦ï¼Œå¯¼è‡´ç¬¬äºŒè¡Œä»£ç ç»“æœä¸ºtrueã€‚åŠ äº†uä¿®é¥°ç¬¦ä»¥åï¼ŒES6å°±ä¼šè¯†åˆ«å…¶ä¸ºä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç¬¬ä¸€è¡Œä»£ç ç»“æœä¸ºfalseã€‚ ä¸€æ—¦åŠ ä¸Šuä¿®é¥°ç¬¦å·ï¼Œå°±ä¼šä¿®æ”¹ä¸‹é¢è¿™äº›æ­£åˆ™è¡¨è¾¾å¼çš„è¡Œä¸ºã€‚ ï¼ˆ1ï¼‰ç‚¹å­—ç¬¦ ç‚¹ï¼ˆ.ï¼‰å­—ç¬¦åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå«ä¹‰æ˜¯é™¤äº†æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦ã€‚å¯¹äºç ç‚¹å¤§äº0xFFFFçš„Unicodeå­—ç¬¦ï¼Œç‚¹å­—ç¬¦ä¸èƒ½è¯†åˆ«ï¼Œå¿…é¡»åŠ ä¸Šuä¿®é¥°ç¬¦ã€‚ var s = &#39;ğ ®·&#39;; /^.$/.test(s) // false /^.$/u.test(s) // true ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœä¸æ·»åŠ uä¿®é¥°ç¬¦ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°±ä¼šè®¤ä¸ºå­—ç¬¦ä¸²ä¸ºä¸¤ä¸ªå­—ç¬¦ï¼Œä»è€ŒåŒ¹é…å¤±è´¥ã€‚ ï¼ˆ2ï¼‰Unicodeå­—ç¬¦è¡¨ç¤ºæ³• ES6æ–°å¢äº†ä½¿ç”¨å¤§æ‹¬å·è¡¨ç¤ºUnicodeå­—ç¬¦ï¼Œè¿™ç§è¡¨ç¤ºæ³•åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å¿…é¡»åŠ ä¸Šuä¿®é¥°ç¬¦ï¼Œæ‰èƒ½è¯†åˆ«ã€‚ /\\u{61}/.test(&#39;a&#39;) // false /\\u{61}/u.test(&#39;a&#39;) // true /\\u{20BB7}/u.test(&#39;ğ ®·&#39;) // true ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœä¸åŠ uä¿®é¥°ç¬¦ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ— æ³•è¯†åˆ«\\u{61}è¿™ç§è¡¨ç¤ºæ³•ï¼Œåªä¼šè®¤ä¸ºè¿™åŒ¹é…61ä¸ªè¿ç»­çš„uã€‚ ï¼ˆ3ï¼‰é‡è¯ ä½¿ç”¨uä¿®é¥°ç¬¦åï¼Œæ‰€æœ‰é‡è¯éƒ½ä¼šæ­£ç¡®è¯†åˆ«ç ç‚¹å¤§äº0xFFFFçš„Unicodeå­—ç¬¦ã€‚ /a{2}/.test(&#39;aa&#39;) // true /a{2}/u.test(&#39;aa&#39;) // true /ğ ®·{2}/.test(&#39;ğ ®·ğ ®·&#39;) // false /ğ ®·{2}/u.test(&#39;ğ ®·ğ ®·&#39;) // true å¦å¤–ï¼Œåªæœ‰åœ¨ä½¿ç”¨uä¿®é¥°ç¬¦çš„æƒ…å†µä¸‹ï¼ŒUnicodeè¡¨è¾¾å¼å½“ä¸­çš„å¤§æ‹¬å·æ‰ä¼šè¢«æ­£ç¡®è§£è¯»ï¼Œå¦åˆ™ä¼šè¢«è§£è¯»ä¸ºé‡è¯ã€‚ /^\\u{3}$/.test(&#39;uuu&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºæ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰uä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥å¤§æ‹¬å·è¢«è§£è¯»ä¸ºé‡è¯ã€‚åŠ ä¸Šuä¿®é¥°ç¬¦ï¼Œå°±ä¼šè¢«è§£è¯»ä¸ºUnicodeè¡¨è¾¾å¼ã€‚ ï¼ˆ4ï¼‰é¢„å®šä¹‰æ¨¡å¼ uä¿®é¥°ç¬¦ä¹Ÿå½±å“åˆ°é¢„å®šä¹‰æ¨¡å¼ï¼Œèƒ½å¦æ­£ç¡®è¯†åˆ«ç ç‚¹å¤§äº0xFFFFçš„Unicodeå­—ç¬¦ã€‚ /^\\S$/.test(&#39;ğ ®·&#39;) // false /^\\S$/u.test(&#39;ğ ®·&#39;) // true ä¸Šé¢ä»£ç çš„\\Sæ˜¯é¢„å®šä¹‰æ¨¡å¼ï¼ŒåŒ¹é…æ‰€æœ‰ä¸æ˜¯ç©ºæ ¼çš„å­—ç¬¦ã€‚åªæœ‰åŠ äº†uä¿®é¥°ç¬¦ï¼Œå®ƒæ‰èƒ½æ­£ç¡®åŒ¹é…ç ç‚¹å¤§äº0xFFFFçš„Unicodeå­—ç¬¦ã€‚ åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå¯ä»¥å†™å‡ºä¸€ä¸ªæ­£ç¡®è¿”å›å­—ç¬¦ä¸²é•¿åº¦çš„å‡½æ•°ã€‚ function codePointLength(text) { var result = text.match(/[\\s\\S]/gu); return result ? result.length : 0; } var s = &#39;ğ ®·ğ ®·&#39;; s.length // 4 codePointLength(s) // 2 ï¼ˆ5ï¼‰iä¿®é¥°ç¬¦ æœ‰äº›Unicodeå­—ç¬¦çš„ç¼–ç ä¸åŒï¼Œä½†æ˜¯å­—å‹å¾ˆç›¸è¿‘ï¼Œæ¯”å¦‚ï¼Œ\\u004Bä¸\\u212Aéƒ½æ˜¯å¤§å†™çš„Kã€‚ /[a-z]/i.test(&#39;\\u212A&#39;) // false /[a-z]/iu.test(&#39;\\u212A&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œä¸åŠ uä¿®é¥°ç¬¦ï¼Œå°±æ— æ³•è¯†åˆ«éè§„èŒƒçš„Kå­—ç¬¦ã€‚ y ä¿®é¥°ç¬¦é™¤äº†uä¿®é¥°ç¬¦ï¼ŒES6è¿˜ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ·»åŠ äº†yä¿®é¥°ç¬¦ï¼Œå«åšâ€œç²˜è¿â€ï¼ˆstickyï¼‰ä¿®é¥°ç¬¦ã€‚ yä¿®é¥°ç¬¦çš„ä½œç”¨ä¸gä¿®é¥°ç¬¦ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å…¨å±€åŒ¹é…ï¼Œåä¸€æ¬¡åŒ¹é…éƒ½ä»ä¸Šä¸€æ¬¡åŒ¹é…æˆåŠŸçš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œgä¿®é¥°ç¬¦åªè¦å‰©ä½™ä½ç½®ä¸­å­˜åœ¨åŒ¹é…å°±å¯ï¼Œè€Œyä¿®é¥°ç¬¦ç¡®ä¿åŒ¹é…å¿…é¡»ä»å‰©ä½™çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œè¿™ä¹Ÿå°±æ˜¯â€œç²˜è¿â€çš„æ¶µä¹‰ã€‚ var s = &#39;aaa_aa_a&#39;; var r1 = /a+/g; var r2 = /a+/y; r1.exec(s) // [&quot;aaa&quot;] r2.exec(s) // [&quot;aaa&quot;] r1.exec(s) // [&quot;aa&quot;] r2.exec(s) // null ä¸Šé¢ä»£ç æœ‰ä¸¤ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸€ä¸ªä½¿ç”¨gä¿®é¥°ç¬¦ï¼Œå¦ä¸€ä¸ªä½¿ç”¨yä¿®é¥°ç¬¦ã€‚è¿™ä¸¤ä¸ªæ­£åˆ™è¡¨è¾¾å¼å„æ‰§è¡Œäº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸¤è€…è¡Œä¸ºç›¸åŒï¼Œå‰©ä½™å­—ç¬¦ä¸²éƒ½æ˜¯_aa_aã€‚ç”±äºgä¿®é¥°æ²¡æœ‰ä½ç½®è¦æ±‚ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡æ‰§è¡Œä¼šè¿”å›ç»“æœï¼Œè€Œyä¿®é¥°ç¬¦è¦æ±‚åŒ¹é…å¿…é¡»ä»å¤´éƒ¨å¼€å§‹ï¼Œæ‰€ä»¥è¿”å›nullã€‚ å¦‚æœæ”¹ä¸€ä¸‹æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¿è¯æ¯æ¬¡éƒ½èƒ½å¤´éƒ¨åŒ¹é…ï¼Œyä¿®é¥°ç¬¦å°±ä¼šè¿”å›ç»“æœäº†ã€‚ var s = &#39;aaa_aa_a&#39;; var r = /a+_/y; r.exec(s) // [&quot;aaa_&quot;] r.exec(s) // [&quot;aa_&quot;] ä¸Šé¢ä»£ç æ¯æ¬¡åŒ¹é…ï¼Œéƒ½æ˜¯ä»å‰©ä½™å­—ç¬¦ä¸²çš„å¤´éƒ¨å¼€å§‹ã€‚ ä½¿ç”¨lastIndexå±æ€§ï¼Œå¯ä»¥æ›´å¥½åœ°è¯´æ˜yä¿®é¥°ç¬¦ã€‚ const REGEX = /a/g; // æŒ‡å®šä»2å·ä½ç½®ï¼ˆyï¼‰å¼€å§‹åŒ¹é… REGEX.lastIndex = 2; // åŒ¹é…æˆåŠŸ const match = REGEX.exec(&#39;xaya&#39;); // åœ¨3å·ä½ç½®åŒ¹é…æˆåŠŸ match.index // 3 // ä¸‹ä¸€æ¬¡åŒ¹é…ä»4å·ä½å¼€å§‹ REGEX.lastIndex // 4 // 4å·ä½å¼€å§‹åŒ¹é…å¤±è´¥ REGEX.exec(&#39;xaxa&#39;) // null ä¸Šé¢ä»£ç ä¸­ï¼ŒlastIndexå±æ€§æŒ‡å®šæ¯æ¬¡æœç´¢çš„å¼€å§‹ä½ç½®ï¼Œgä¿®é¥°ç¬¦ä»è¿™ä¸ªä½ç½®å¼€å§‹å‘åæœç´¢ï¼Œç›´åˆ°å‘ç°åŒ¹é…ä¸ºæ­¢ã€‚ yä¿®é¥°ç¬¦åŒæ ·éµå®ˆlastIndexå±æ€§ï¼Œä½†æ˜¯è¦æ±‚å¿…é¡»åœ¨lastIndexæŒ‡å®šçš„ä½ç½®å‘ç°åŒ¹é…ã€‚ const REGEX = /a/y; // æŒ‡å®šä»2å·ä½ç½®å¼€å§‹åŒ¹é… REGEX.lastIndex = 2; // ä¸æ˜¯ç²˜è¿ï¼ŒåŒ¹é…å¤±è´¥ REGEX.exec(&#39;xaya&#39;) // null // æŒ‡å®šä»3å·ä½ç½®å¼€å§‹åŒ¹é… REGEX.lastIndex = 3; // 3å·ä½ç½®æ˜¯ç²˜è¿ï¼ŒåŒ¹é…æˆåŠŸ const match = REGEX.exec(&#39;xaxa&#39;); match.index // 3 REGEX.lastIndex // 4 è¿›ä¸€æ­¥è¯´ï¼Œyä¿®é¥°ç¬¦å·éšå«äº†å¤´éƒ¨åŒ¹é…çš„æ ‡å¿—^ã€‚ /b/y.exec(&#39;aba&#39;) // null ä¸Šé¢ä»£ç ç”±äºä¸èƒ½ä¿è¯å¤´éƒ¨åŒ¹é…ï¼Œæ‰€ä»¥è¿”å›nullã€‚yä¿®é¥°ç¬¦çš„è®¾è®¡æœ¬æ„ï¼Œå°±æ˜¯è®©å¤´éƒ¨åŒ¹é…çš„æ ‡å¿—^åœ¨å…¨å±€åŒ¹é…ä¸­éƒ½æœ‰æ•ˆã€‚ åœ¨splitæ–¹æ³•ä¸­ä½¿ç”¨yä¿®é¥°ç¬¦ï¼ŒåŸå­—ç¬¦ä¸²å¿…é¡»ä»¥åˆ†éš”ç¬¦å¼€å¤´ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œåªè¦åŒ¹é…æˆåŠŸï¼Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜è‚¯å®šæ˜¯ç©ºå­—ç¬¦ä¸²ã€‚ // æ²¡æœ‰æ‰¾åˆ°åŒ¹é… &#39;x##&#39;.split(/#/y) // [ &#39;x##&#39; ] // æ‰¾åˆ°ä¸¤ä¸ªåŒ¹é… &#39;##x&#39;.split(/#/y) // [ &#39;&#39;, &#39;&#39;, &#39;x&#39; ] åç»­çš„åˆ†éš”ç¬¦åªæœ‰ç´§è·Ÿå‰é¢çš„åˆ†éš”ç¬¦ï¼Œæ‰ä¼šè¢«è¯†åˆ«ã€‚ &#39;#x#&#39;.split(/#/y) // [ &#39;&#39;, &#39;x#&#39; ] &#39;##&#39;.split(/#/y) // [ &#39;&#39;, &#39;&#39;, &#39;&#39; ] ä¸‹é¢æ˜¯å­—ç¬¦ä¸²å¯¹è±¡çš„replaceæ–¹æ³•çš„ä¾‹å­ã€‚ const REGEX = /a/gy; &#39;aaxa&#39;.replace(REGEX, &#39;-&#39;) // &#39;--xa&#39; ä¸Šé¢ä»£ç ä¸­ï¼Œæœ€åä¸€ä¸ªaå› ä¸ºä¸æ˜¯å‡ºç°ä¸‹ä¸€æ¬¡åŒ¹é…çš„å¤´éƒ¨ï¼Œæ‰€ä»¥ä¸ä¼šè¢«æ›¿æ¢ã€‚ å•å•ä¸€ä¸ªyä¿®é¥°ç¬¦å¯¹matchæ–¹æ³•ï¼Œåªèƒ½è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…ï¼Œå¿…é¡»ä¸gä¿®é¥°ç¬¦è”ç”¨ï¼Œæ‰èƒ½è¿”å›æ‰€æœ‰åŒ¹é…ã€‚ &#39;a1a2a3&#39;.match(/a\\d/y) // [&quot;a1&quot;] &#39;a1a2a3&#39;.match(/a\\d/gy) // [&quot;a1&quot;, &quot;a2&quot;, &quot;a3&quot;] yä¿®é¥°ç¬¦çš„ä¸€ä¸ªåº”ç”¨ï¼Œæ˜¯ä»å­—ç¬¦ä¸²æå–tokenï¼ˆè¯å…ƒï¼‰ï¼Œyä¿®é¥°ç¬¦ç¡®ä¿äº†åŒ¹é…ä¹‹é—´ä¸ä¼šæœ‰æ¼æ‰çš„å­—ç¬¦ã€‚ const TOKEN_Y = /\\s*(\\+|[0-9]+)\\s*/y; const TOKEN_G = /\\s*(\\+|[0-9]+)\\s*/g; tokenize(TOKEN_Y, &#39;3 + 4&#39;) // [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ] tokenize(TOKEN_G, &#39;3 + 4&#39;) // [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ] function tokenize(TOKEN_REGEX, str) { let result = []; let match; while (match = TOKEN_REGEX.exec(str)) { result.push(match[1]); } return result; } ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå­—ç¬¦ä¸²é‡Œé¢æ²¡æœ‰éæ³•å­—ç¬¦ï¼Œyä¿®é¥°ç¬¦ä¸gä¿®é¥°ç¬¦çš„æå–ç»“æœæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦å‡ºç°éæ³•å­—ç¬¦ï¼Œä¸¤è€…çš„è¡Œä¸ºå°±ä¸ä¸€æ ·äº†ã€‚ tokenize(TOKEN_Y, &#39;3x + 4&#39;) // [ &#39;3&#39; ] tokenize(TOKEN_G, &#39;3x + 4&#39;) // [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ] ä¸Šé¢ä»£ç ä¸­ï¼Œgä¿®é¥°ç¬¦ä¼šå¿½ç•¥éæ³•å­—ç¬¦ï¼Œè€Œyä¿®é¥°ç¬¦ä¸ä¼šï¼Œè¿™æ ·å°±å¾ˆå®¹æ˜“å‘ç°é”™è¯¯ã€‚ stickyå±æ€§ä¸yä¿®é¥°ç¬¦ç›¸åŒ¹é…ï¼ŒES6çš„æ­£åˆ™å¯¹è±¡å¤šäº†stickyå±æ€§ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†yä¿®é¥°ç¬¦ã€‚ var r = /hello\\d/y; r.sticky // true flagså±æ€§ES6ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ–°å¢äº†flagså±æ€§ï¼Œä¼šè¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ã€‚ // ES5çš„sourceå±æ€§ // è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„æ­£æ–‡ /abc/ig.source // &quot;abc&quot; // ES6çš„flagså±æ€§ // è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ /abc/ig.flags // &#39;gi&#39; RegExp.escape()å­—ç¬¦ä¸²å¿…é¡»è½¬ä¹‰ï¼Œæ‰èƒ½ä½œä¸ºæ­£åˆ™æ¨¡å¼ã€‚ function escapeRegExp(str) { return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, &#39;\\\\$&amp;&#39;); } let str = &#39;/path/to/resource.html?search=query&#39;; escapeRegExp(str) // &quot;\\/path\\/to\\/resource\\.html\\?search=query&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œstræ˜¯ä¸€ä¸ªæ­£å¸¸å­—ç¬¦ä¸²ï¼Œå¿…é¡»ä½¿ç”¨åæ–œæ å¯¹å…¶ä¸­çš„ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰ï¼Œæ‰èƒ½ç”¨æ¥ä½œä¸ºä¸€ä¸ªæ­£åˆ™åŒ¹é…çš„æ¨¡å¼ã€‚ å·²ç»æœ‰æè®®å°†è¿™ä¸ªéœ€æ±‚æ ‡å‡†åŒ–ï¼Œä½œä¸ºRegExpå¯¹è±¡çš„é™æ€æ–¹æ³•RegExp.escape()ï¼Œæ”¾å…¥ES7ã€‚2015å¹´7æœˆ31æ—¥ï¼ŒTC39è®¤ä¸ºï¼Œè¿™ä¸ªæ–¹æ³•æœ‰å®‰å…¨é£é™©ï¼Œåˆä¸æ„¿è¿™ä¸ªæ–¹æ³•å˜å¾—è¿‡äºå¤æ‚ï¼Œæ²¡æœ‰åŒæ„å°†å…¶åˆ—å…¥ES7ï¼Œä½†è¿™ä¸å¤±ä¸ºä¸€ä¸ªçœŸå®çš„éœ€æ±‚ã€‚ RegExp.escape(&#39;The Quick Brown Fox&#39;); // &quot;The Quick Brown Fox&quot; RegExp.escape(&#39;Buy it. use it. break it. fix it.&#39;); // &quot;Buy it\\. use it\\. break it\\. fix it\\.&quot; RegExp.escape(&#39;(*.*)&#39;); // &quot;\\(\\*\\.\\*\\)&quot; å­—ç¬¦ä¸²è½¬ä¹‰ä»¥åï¼Œå¯ä»¥ä½¿ç”¨RegExpæ„é€ å‡½æ•°ç”Ÿæˆæ­£åˆ™æ¨¡å¼ã€‚ var str = &#39;hello. how are you?&#39;; var regex = new RegExp(RegExp.escape(str), &#39;g&#39;); assert.equal(String(regex), &#39;/hello\\. how are you\\?/g&#39;); ç›®å‰ï¼Œè¯¥æ–¹æ³•å¯ä»¥ç”¨ä¸Šæ–‡çš„escapeRegExpå‡½æ•°æˆ–è€…å«ç‰‡æ¨¡å—regexp.escapeå®ç°ã€‚ var escape = require(&#39;regexp.escape&#39;); escape(&#39;hi. how are you?&#39;); // &quot;hi\\\\. how are you\\\\?&quot; s ä¿®é¥°ç¬¦ï¼šdotAll æ¨¡å¼æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œç‚¹ï¼ˆ.ï¼‰æ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œä»£è¡¨ä»»æ„çš„å•ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯è¡Œç»ˆæ­¢ç¬¦ï¼ˆline terminator characterï¼‰é™¤å¤–ã€‚ ä»¥ä¸‹å››ä¸ªå­—ç¬¦å±äºâ€è¡Œç»ˆæ­¢ç¬¦â€œã€‚ U+000A æ¢è¡Œç¬¦ï¼ˆ\\nï¼‰ U+000D å›è½¦ç¬¦ï¼ˆ\\rï¼‰ U+2028 è¡Œåˆ†éš”ç¬¦ï¼ˆline separatorï¼‰ U+2029 æ®µåˆ†éš”ç¬¦ï¼ˆparagraph separatorï¼‰ /foo.bar/.test(&#39;foo\\nbar&#39;) // false ä¸Šé¢ä»£ç ä¸­ï¼Œå› ä¸º.ä¸åŒ¹é…\\nï¼Œæ‰€ä»¥æ­£åˆ™è¡¨è¾¾å¼è¿”å›falseã€‚ ä½†æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¸Œæœ›åŒ¹é…çš„æ˜¯ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œè¿™æ—¶æœ‰ä¸€ç§å˜é€šçš„å†™æ³•ã€‚ /foo[^]bar/.test(&#39;foo\\nbar&#39;) // true è¿™ç§è§£å†³æ–¹æ¡ˆæ¯•ç«Ÿä¸å¤ªç¬¦åˆç›´è§‰ï¼Œæ‰€ä»¥ç°åœ¨æœ‰ä¸€ä¸ªææ¡ˆï¼Œå¼•å…¥/sä¿®é¥°ç¬¦ï¼Œä½¿å¾—.å¯ä»¥åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ã€‚ /foo.bar/s.test(&#39;foo\\nbar&#39;) // true è¿™è¢«ç§°ä¸ºdotAllæ¨¡å¼ï¼Œå³ç‚¹ï¼ˆdotï¼‰ä»£è¡¨ä¸€åˆ‡å­—ç¬¦ã€‚æ‰€ä»¥ï¼Œæ­£åˆ™è¡¨è¾¾å¼è¿˜å¼•å…¥äº†ä¸€ä¸ªdotAllå±æ€§ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦å¤„åœ¨dotAllæ¨¡å¼ã€‚ const re = /foo.bar/s; // å¦ä¸€ç§å†™æ³• // const re = new RegExp(&#39;foo.bar&#39;, &#39;s&#39;); re.test(&#39;foo\\nbar&#39;) // true re.dotAll // true re.flags // &#39;s&#39; /sä¿®é¥°ç¬¦å’Œå¤šè¡Œä¿®é¥°ç¬¦/mä¸å†²çªï¼Œä¸¤è€…ä¸€èµ·ä½¿ç”¨çš„æƒ…å†µä¸‹ï¼Œ.åŒ¹é…æ‰€æœ‰å­—ç¬¦ï¼Œè€Œ^å’Œ$åŒ¹é…æ¯ä¸€è¡Œçš„è¡Œé¦–å’Œè¡Œå°¾ã€‚ åè¡Œæ–­è¨€JavaScriptè¯­è¨€çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåªæ”¯æŒå…ˆè¡Œæ–­è¨€ï¼ˆlookaheadï¼‰å’Œå…ˆè¡Œå¦å®šæ–­è¨€ï¼ˆnegative lookaheadï¼‰ï¼Œä¸æ”¯æŒåè¡Œæ–­è¨€ï¼ˆlookbehindï¼‰å’Œåè¡Œå¦å®šæ–­è¨€ï¼ˆnegative lookbehindï¼‰ã€‚ ç›®å‰ï¼Œæœ‰ä¸€ä¸ªææ¡ˆï¼Œåœ¨ES7åŠ å…¥åè¡Œæ–­è¨€ã€‚V8å¼•æ“4.9ç‰ˆå·²ç»æ”¯æŒï¼ŒChromeæµè§ˆå™¨49ç‰ˆæ‰“å¼€â€experimental JavaScript featuresâ€œå¼€å…³ï¼ˆåœ°å€æ é”®å…¥about:flagsï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™é¡¹åŠŸèƒ½ã€‚ â€å…ˆè¡Œæ–­è¨€â€œæŒ‡çš„æ˜¯ï¼Œxåªæœ‰åœ¨yå‰é¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/x(?=y)/ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ç™¾åˆ†å·ä¹‹å‰çš„æ•°å­—ï¼Œè¦å†™æˆ/\\d+(?=%)/ã€‚â€å…ˆè¡Œå¦å®šæ–­è¨€â€œæŒ‡çš„æ˜¯ï¼Œxåªæœ‰ä¸åœ¨yå‰é¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/x(?!y)/ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ä¸åœ¨ç™¾åˆ†å·ä¹‹å‰çš„æ•°å­—ï¼Œè¦å†™æˆ/\\d+(?!%)/ã€‚ /\\d+(?=%)/.exec(&#39;100% of US presidents have been male&#39;) // [&quot;100&quot;] /\\d+(?!%)/.exec(&#39;thatâ€™s all 44 of them&#39;) // [&quot;44&quot;] ä¸Šé¢ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœäº’æ¢æ­£åˆ™è¡¨è¾¾å¼ï¼Œå°±ä¼šåŒ¹é…å¤±è´¥ã€‚å¦å¤–ï¼Œè¿˜å¯ä»¥çœ‹åˆ°ï¼Œâ€å…ˆè¡Œæ–­è¨€â€œæ‹¬å·ä¹‹ä¸­çš„éƒ¨åˆ†ï¼ˆ(?=%)ï¼‰ï¼Œæ˜¯ä¸è®¡å…¥è¿”å›ç»“æœçš„ã€‚ â€œåè¡Œæ–­è¨€â€æ­£å¥½ä¸â€å…ˆè¡Œæ–­è¨€â€ç›¸åï¼Œxåªæœ‰åœ¨yåé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/(?&lt;=y)x/ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ç¾å…ƒç¬¦å·ä¹‹åçš„æ•°å­—ï¼Œè¦å†™æˆ/(?&lt;=\\$)\\d+/ã€‚â€åè¡Œå¦å®šæ–­è¨€â€œåˆ™ä¸â€å…ˆè¡Œå¦å®šæ–­è¨€â€œç›¸åï¼Œxåªæœ‰ä¸åœ¨yåé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/(?&lt;!y)x/ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ä¸åœ¨ç¾å…ƒç¬¦å·åé¢çš„æ•°å­—ï¼Œè¦å†™æˆ/(?&lt;!\\$)\\d+/ã€‚ /(?&lt;=\\$)\\d+/.exec(&#39;Benjamin Franklin is on the $100 bill&#39;) // [&quot;100&quot;] /(?&lt;!\\$)\\d+/.exec(&#39;itâ€™s is worth about â‚¬90&#39;) // [&quot;90&quot;] ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œâ€åè¡Œæ–­è¨€â€çš„æ‹¬å·ä¹‹ä¸­çš„éƒ¨åˆ†ï¼ˆ(?&lt;=\\$)ï¼‰ï¼Œä¹Ÿæ˜¯ä¸è®¡å…¥è¿”å›ç»“æœã€‚ â€œåè¡Œæ–­è¨€â€çš„å®ç°ï¼Œéœ€è¦å…ˆåŒ¹é…/(?&lt;=y)x/çš„xï¼Œç„¶åå†å›åˆ°å·¦è¾¹ï¼ŒåŒ¹é…yçš„éƒ¨åˆ†ã€‚è¿™ç§â€å…ˆå³åå·¦â€çš„æ‰§è¡Œé¡ºåºï¼Œä¸æ‰€æœ‰å…¶ä»–æ­£åˆ™æ“ä½œç›¸åï¼Œå¯¼è‡´äº†ä¸€äº›ä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸ºã€‚ é¦–å…ˆï¼Œâ€åè¡Œæ–­è¨€â€œçš„ç»„åŒ¹é…ï¼Œä¸æ­£å¸¸æƒ…å†µä¸‹ç»“æœæ˜¯ä¸ä¸€æ ·çš„ã€‚ /(?&lt;=(\\d+)(\\d+))$/.exec(&#39;1053&#39;) // [&quot;&quot;, &quot;1&quot;, &quot;053&quot;] /^(\\d+)(\\d+)$/.exec(&#39;1053&#39;) // [&quot;1053&quot;, &quot;105&quot;, &quot;3&quot;] ä¸Šé¢ä»£ç ä¸­ï¼Œéœ€è¦æ•æ‰ä¸¤ä¸ªç»„åŒ¹é…ã€‚æ²¡æœ‰â€åè¡Œæ–­è¨€â€æ—¶ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·æ˜¯è´ªå©ªæ¨¡å¼ï¼Œç¬¬äºŒä¸ªæ‹¬å·åªèƒ½æ•è·ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœæ˜¯105å’Œ3ã€‚è€Œâ€åè¡Œæ–­è¨€â€æ—¶ï¼Œç”±äºæ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦ï¼Œç¬¬äºŒä¸ªæ‹¬å·æ˜¯è´ªå©ªæ¨¡å¼ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·åªèƒ½æ•è·ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœæ˜¯1å’Œ053ã€‚ å…¶æ¬¡ï¼Œâ€åè¡Œæ–­è¨€â€çš„åæ–œæ å¼•ç”¨ï¼Œä¹Ÿä¸é€šå¸¸çš„é¡ºåºç›¸åï¼Œå¿…é¡»æ”¾åœ¨å¯¹åº”çš„é‚£ä¸ªæ‹¬å·ä¹‹å‰ã€‚ /(?&lt;=(o)d\\1)r/.exec(&#39;hodor&#39;) // null /(?&lt;=\\1d(o))r/.exec(&#39;hodor&#39;) // [&quot;r&quot;, &quot;o&quot;] ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœåè¡Œæ–­è¨€çš„åæ–œæ å¼•ç”¨ï¼ˆ\\1ï¼‰æ”¾åœ¨æ‹¬å·çš„åé¢ï¼Œå°±ä¸ä¼šå¾—åˆ°åŒ¹é…ç»“æœï¼Œå¿…é¡»æ”¾åœ¨å‰é¢æ‰å¯ä»¥ã€‚ Unicodeå±æ€§ç±»ç›®å‰ï¼Œæœ‰ä¸€ä¸ªææ¡ˆï¼Œå¼•å…¥äº†ä¸€ç§æ–°çš„ç±»çš„å†™æ³•\\p{...}å’Œ\\P{...}ï¼Œå…è®¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç¬¦åˆUnicodeæŸç§å±æ€§çš„æ‰€æœ‰å­—ç¬¦ã€‚ const regexGreekSymbol = /\\p{Script=Greek}/u; regexGreekSymbol.test(&#39;Ï€&#39;) // u ä¸Šé¢ä»£ç ä¸­ï¼Œ\\p{Script=Greek}æŒ‡å®šåŒ¹é…ä¸€ä¸ªå¸Œè…Šæ–‡å­—æ¯ï¼Œæ‰€ä»¥åŒ¹é…Ï€æˆåŠŸã€‚ Unicodeå±æ€§ç±»è¦æŒ‡å®šå±æ€§åå’Œå±æ€§å€¼ã€‚ \\p{UnicodePropertyName=UnicodePropertyValue} å¯¹äºæŸäº›å±æ€§ï¼Œå¯ä»¥åªå†™å±æ€§åã€‚ \\p{UnicodePropertyName} \\P{â€¦}æ˜¯\\p{â€¦}çš„åå‘åŒ¹é…ï¼Œå³åŒ¹é…ä¸æ»¡è¶³æ¡ä»¶çš„å­—ç¬¦ã€‚ æ³¨æ„ï¼Œè¿™ä¸¤ç§ç±»åªå¯¹Unicodeæœ‰æ•ˆï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™ä¸€å®šè¦åŠ ä¸Šuä¿®é¥°ç¬¦ã€‚å¦‚æœä¸åŠ uä¿®é¥°ç¬¦ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨\\på’Œ\\Pä¼šæŠ¥é”™ï¼ŒECMAScripté¢„ç•™äº†è¿™ä¸¤ä¸ªç±»ã€‚ ç”±äºUnicodeçš„å„ç§å±æ€§éå¸¸å¤šï¼Œæ‰€ä»¥è¿™ç§æ–°çš„ç±»çš„è¡¨è¾¾èƒ½åŠ›éå¸¸å¼ºã€‚ const regex = /^\\p{Decimal_Number}+$/u; regex.test(&#39;ğŸğŸğŸ‘ğŸœğŸğŸğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸºğŸ»ğŸ¼&#39;) // true ä¸Šé¢ä»£ç ä¸­ï¼Œå±æ€§ç±»æŒ‡å®šåŒ¹é…æ‰€æœ‰åè¿›åˆ¶å­—ç¬¦ï¼Œå¯ä»¥çœ‹åˆ°å„ç§å­—å‹çš„åè¿›åˆ¶å­—ç¬¦éƒ½ä¼šåŒ¹é…æˆåŠŸã€‚ \\p{Number}ç”šè‡³èƒ½åŒ¹é…ç½—é©¬æ•°å­—ã€‚ // åŒ¹é…æ‰€æœ‰æ•°å­— const regex = /^\\p{Number}+$/u; regex.test(&#39;Â²Â³Â¹Â¼Â½Â¾&#39;) // true regex.test(&#39;ã‰›ã‰œã‰&#39;) // true regex.test(&#39;â… â…¡â…¢â…£â…¤â…¥â…¦â…§â…¨â…©â…ªâ…«&#39;) // true ä¸‹é¢æ˜¯å…¶ä»–ä¸€äº›ä¾‹å­ã€‚ // åŒ¹é…å„ç§æ–‡å­—çš„æ‰€æœ‰å­—æ¯ï¼Œç­‰åŒäºUnicodeç‰ˆçš„\\w [\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}] // åŒ¹é…å„ç§æ–‡å­—çš„æ‰€æœ‰éå­—æ¯çš„å­—ç¬¦ï¼Œç­‰åŒäºUnicodeç‰ˆçš„\\W [^\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}] // åŒ¹é…æ‰€æœ‰çš„ç®­å¤´å­—ç¬¦ const regexArrows = /^\\p{Block=Arrows}+$/u; regexArrows.test(&#39;â†â†‘â†’â†“â†”â†•â†–â†—â†˜â†™â‡â‡â‡‘â‡’â‡“â‡”â‡•â‡–â‡—â‡˜â‡™â‡§â‡©&#39;) // true","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"RegExp","slug":"RegExp","permalink":"https://microzz.com/tags/RegExp/"},{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"https://microzz.com/tags/æ­£åˆ™è¡¨è¾¾å¼/"}]},{"title":"å­—ç¬¦ä¸²çš„æ‰©å±•","date":"2016-11-15T07:45:19.000Z","path":"2016/11/15/string/","text":"å­—ç¬¦ä¸²çš„æ‰©å±•ES6åŠ å¼ºäº†å¯¹Unicodeçš„æ”¯æŒï¼Œå¹¶ä¸”æ‰©å±•äº†å­—ç¬¦ä¸²å¯¹è±¡ã€‚ å­—ç¬¦çš„Unicodeè¡¨ç¤ºæ³•JavaScriptå…è®¸é‡‡ç”¨\\uxxxxå½¢å¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­â€œxxxxâ€è¡¨ç¤ºå­—ç¬¦çš„ç ç‚¹ã€‚ &quot;\\u0061&quot; // &quot;a&quot; ä½†æ˜¯ï¼Œè¿™ç§è¡¨ç¤ºæ³•åªé™äº\\u0000â€”â€”\\uFFFFä¹‹é—´çš„å­—ç¬¦ã€‚è¶…å‡ºè¿™ä¸ªèŒƒå›´çš„å­—ç¬¦ï¼Œå¿…é¡»ç”¨ä¸¤ä¸ªåŒå­—èŠ‚çš„å½¢å¼è¡¨è¾¾ã€‚ &quot;\\uD842\\uDFB7&quot; // &quot;ğ ®·&quot; &quot;\\u20BB7&quot; // &quot; 7&quot; ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœç›´æ¥åœ¨\\uåé¢è·Ÿä¸Šè¶…è¿‡0xFFFFçš„æ•°å€¼ï¼ˆæ¯”å¦‚\\u20BB7ï¼‰ï¼ŒJavaScriptä¼šç†è§£æˆ\\u20BB+7ã€‚ç”±äº\\u20BBæ˜¯ä¸€ä¸ªä¸å¯æ‰“å°å­—ç¬¦ï¼Œæ‰€ä»¥åªä¼šæ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼ï¼Œåé¢è·Ÿç€ä¸€ä¸ª7ã€‚ ES6 å¯¹è¿™ä¸€ç‚¹åšå‡ºäº†æ”¹è¿›ï¼Œåªè¦å°†ç ç‚¹æ”¾å…¥å¤§æ‹¬å·ï¼Œå°±èƒ½æ­£ç¡®è§£è¯»è¯¥å­—ç¬¦ã€‚ &quot;\\u{20BB7}&quot; // &quot;ğ ®·&quot; &quot;\\u{41}\\u{42}\\u{43}&quot; // &quot;ABC&quot; let hello = 123; hell\\u{6F} // 123 &#39;\\u{1F680}&#39; === &#39;\\uD83D\\uDE80&#39; // true ä¸Šé¢ä»£ç ä¸­ï¼Œæœ€åä¸€ä¸ªä¾‹å­è¡¨æ˜ï¼Œå¤§æ‹¬å·è¡¨ç¤ºæ³•ä¸å››å­—èŠ‚çš„UTF-16ç¼–ç æ˜¯ç­‰ä»·çš„ã€‚ æœ‰äº†è¿™ç§è¡¨ç¤ºæ³•ä¹‹åï¼ŒJavaScriptå…±æœ‰6ç§æ–¹æ³•å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚ &#39;\\z&#39; === &#39;z&#39; // true &#39;\\172&#39; === &#39;z&#39; // true &#39;\\x7A&#39; === &#39;z&#39; // true &#39;\\u007A&#39; === &#39;z&#39; // true &#39;\\u{7A}&#39; === &#39;z&#39; // true codePointAt()JavaScriptå†…éƒ¨ï¼Œå­—ç¬¦ä»¥UTF-16çš„æ ¼å¼å‚¨å­˜ï¼Œæ¯ä¸ªå­—ç¬¦å›ºå®šä¸º2ä¸ªå­—èŠ‚ã€‚å¯¹äºé‚£äº›éœ€è¦4ä¸ªå­—èŠ‚å‚¨å­˜çš„å­—ç¬¦ï¼ˆUnicodeç ç‚¹å¤§äº0xFFFFçš„å­—ç¬¦ï¼‰ï¼ŒJavaScriptä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ä¸¤ä¸ªå­—ç¬¦ã€‚ var s = &quot;ğ ®·&quot;; s.length // 2 s.charAt(0) // &#39;&#39; s.charAt(1) // &#39;&#39; s.charCodeAt(0) // 55362 s.charCodeAt(1) // 57271 ä¸Šé¢ä»£ç ä¸­ï¼Œæ±‰å­—â€œğ ®·â€ï¼ˆæ³¨æ„ï¼Œè¿™ä¸ªå­—ä¸æ˜¯â€å‰ç¥¥â€œçš„â€å‰â€œï¼‰çš„ç ç‚¹æ˜¯0x20BB7ï¼ŒUTF-16ç¼–ç ä¸º0xD842 0xDFB7ï¼ˆåè¿›åˆ¶ä¸º55362 57271ï¼‰ï¼Œéœ€è¦4ä¸ªå­—èŠ‚å‚¨å­˜ã€‚å¯¹äºè¿™ç§4ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼ŒJavaScriptä¸èƒ½æ­£ç¡®å¤„ç†ï¼Œå­—ç¬¦ä¸²é•¿åº¦ä¼šè¯¯åˆ¤ä¸º2ï¼Œè€Œä¸”charAtæ–¹æ³•æ— æ³•è¯»å–æ•´ä¸ªå­—ç¬¦ï¼ŒcharCodeAtæ–¹æ³•åªèƒ½åˆ†åˆ«è¿”å›å‰ä¸¤ä¸ªå­—èŠ‚å’Œåä¸¤ä¸ªå­—èŠ‚çš„å€¼ã€‚ ES6æä¾›äº†codePointAtæ–¹æ³•ï¼Œèƒ½å¤Ÿæ­£ç¡®å¤„ç†4ä¸ªå­—èŠ‚å‚¨å­˜çš„å­—ç¬¦ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦çš„ç ç‚¹ã€‚ var s = &#39;ğ ®·a&#39;; s.codePointAt(0) // 134071 s.codePointAt(1) // 57271 s.codePointAt(2) // 97 codePointAtæ–¹æ³•çš„å‚æ•°ï¼Œæ˜¯å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰ã€‚ä¸Šé¢ä»£ç ä¸­ï¼ŒJavaScriptå°†â€œğ ®·aâ€è§†ä¸ºä¸‰ä¸ªå­—ç¬¦ï¼ŒcodePointAtæ–¹æ³•åœ¨ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸Šï¼Œæ­£ç¡®åœ°è¯†åˆ«äº†â€œğ ®·â€ï¼Œè¿”å›äº†å®ƒçš„åè¿›åˆ¶ç ç‚¹134071ï¼ˆå³åå…­è¿›åˆ¶çš„20BB7ï¼‰ã€‚åœ¨ç¬¬äºŒä¸ªå­—ç¬¦ï¼ˆå³â€œğ ®·â€çš„åä¸¤ä¸ªå­—èŠ‚ï¼‰å’Œç¬¬ä¸‰ä¸ªå­—ç¬¦â€œaâ€ä¸Šï¼ŒcodePointAtæ–¹æ³•çš„ç»“æœä¸charCodeAtæ–¹æ³•ç›¸åŒã€‚ æ€»ä¹‹ï¼ŒcodePointAtæ–¹æ³•ä¼šæ­£ç¡®è¿”å›32ä½çš„UTF-16å­—ç¬¦çš„ç ç‚¹ã€‚å¯¹äºé‚£äº›ä¸¤ä¸ªå­—èŠ‚å‚¨å­˜çš„å¸¸è§„å­—ç¬¦ï¼Œå®ƒçš„è¿”å›ç»“æœä¸charCodeAtæ–¹æ³•ç›¸åŒã€‚ codePointAtæ–¹æ³•è¿”å›çš„æ˜¯ç ç‚¹çš„åè¿›åˆ¶å€¼ï¼Œå¦‚æœæƒ³è¦åå…­è¿›åˆ¶çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨toStringæ–¹æ³•è½¬æ¢ä¸€ä¸‹ã€‚ var s = &#39;ğ ®·a&#39;; s.codePointAt(0).toString(16) // &quot;20bb7&quot; s.codePointAt(2).toString(16) // &quot;61&quot; ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼ŒcodePointAtæ–¹æ³•çš„å‚æ•°ï¼Œä»ç„¶æ˜¯ä¸æ­£ç¡®çš„ã€‚æ¯”å¦‚ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦aåœ¨å­—ç¬¦ä¸²sçš„æ­£ç¡®ä½ç½®åºå·åº”è¯¥æ˜¯1ï¼Œä½†æ˜¯å¿…é¡»å‘codePointAtæ–¹æ³•ä¼ å…¥2ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªåŠæ³•æ˜¯ä½¿ç”¨for...ofå¾ªç¯ï¼Œå› ä¸ºå®ƒä¼šæ­£ç¡®è¯†åˆ«32ä½çš„UTF-16å­—ç¬¦ã€‚ var s = &#39;ğ ®·a&#39;; for (let ch of s) { console.log(ch.codePointAt(0).toString(16)); } // 20bb7 // 61 codePointAtæ–¹æ³•æ˜¯æµ‹è¯•ä¸€ä¸ªå­—ç¬¦ç”±ä¸¤ä¸ªå­—èŠ‚è¿˜æ˜¯ç”±å››ä¸ªå­—èŠ‚ç»„æˆçš„æœ€ç®€å•æ–¹æ³•ã€‚ function is32Bit(c) { return c.codePointAt(0) &gt; 0xFFFF; } is32Bit(&quot;ğ ®·&quot;) // true is32Bit(&quot;a&quot;) // false String.fromCodePoint()ES5æä¾›String.fromCharCodeæ–¹æ³•ï¼Œç”¨äºä»ç ç‚¹è¿”å›å¯¹åº”å­—ç¬¦ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸èƒ½è¯†åˆ«32ä½çš„UTF-16å­—ç¬¦ï¼ˆUnicodeç¼–å·å¤§äº0xFFFFï¼‰ã€‚ String.fromCharCode(0x20BB7) // &quot;à®·&quot; ä¸Šé¢ä»£ç ä¸­ï¼ŒString.fromCharCodeä¸èƒ½è¯†åˆ«å¤§äº0xFFFFçš„ç ç‚¹ï¼Œæ‰€ä»¥0x20BB7å°±å‘ç”Ÿäº†æº¢å‡ºï¼Œæœ€é«˜ä½2è¢«èˆå¼ƒäº†ï¼Œæœ€åè¿”å›ç ç‚¹U+0BB7å¯¹åº”çš„å­—ç¬¦ï¼Œè€Œä¸æ˜¯ç ç‚¹U+20BB7å¯¹åº”çš„å­—ç¬¦ã€‚ ES6æä¾›äº†String.fromCodePointæ–¹æ³•ï¼Œå¯ä»¥è¯†åˆ«0xFFFFçš„å­—ç¬¦ï¼Œå¼¥è¡¥äº†String.fromCharCodeæ–¹æ³•çš„ä¸è¶³ã€‚åœ¨ä½œç”¨ä¸Šï¼Œæ­£å¥½ä¸codePointAtæ–¹æ³•ç›¸åã€‚ String.fromCodePoint(0x20BB7) // &quot;ğ ®·&quot; String.fromCodePoint(0x78, 0x1f680, 0x79) === &#39;x\\uD83D\\uDE80y&#39; // true ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœString.fromCodePointæ–¹æ³•æœ‰å¤šä¸ªå‚æ•°ï¼Œåˆ™å®ƒä»¬ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›ã€‚ æ³¨æ„ï¼ŒfromCodePointæ–¹æ³•å®šä¹‰åœ¨Stringå¯¹è±¡ä¸Šï¼Œè€ŒcodePointAtæ–¹æ³•å®šä¹‰åœ¨å­—ç¬¦ä¸²çš„å®ä¾‹å¯¹è±¡ä¸Šã€‚ å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£ES6ä¸ºå­—ç¬¦ä¸²æ·»åŠ äº†éå†å™¨æ¥å£ï¼ˆè¯¦è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œä½¿å¾—å­—ç¬¦ä¸²å¯ä»¥è¢«for...ofå¾ªç¯éå†ã€‚ for (let codePoint of &#39;foo&#39;) { console.log(codePoint) } // &quot;f&quot; // &quot;o&quot; // &quot;o&quot; é™¤äº†éå†å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªéå†å™¨æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å¯ä»¥è¯†åˆ«å¤§äº0xFFFFçš„ç ç‚¹ï¼Œä¼ ç»Ÿçš„forå¾ªç¯æ— æ³•è¯†åˆ«è¿™æ ·çš„ç ç‚¹ã€‚ var text = String.fromCodePoint(0x20BB7); for (let i = 0; i &lt; text.length; i++) { console.log(text[i]); } // &quot; &quot; // &quot; &quot; for (let i of text) { console.log(i); } // &quot;ğ ®·&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²textåªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯forå¾ªç¯ä¼šè®¤ä¸ºå®ƒåŒ…å«ä¸¤ä¸ªå­—ç¬¦ï¼ˆéƒ½ä¸å¯æ‰“å°ï¼‰ï¼Œè€Œfor...ofå¾ªç¯ä¼šæ­£ç¡®è¯†åˆ«å‡ºè¿™ä¸€ä¸ªå­—ç¬¦ã€‚ at()ES5å¯¹å­—ç¬¦ä¸²å¯¹è±¡æä¾›charAtæ–¹æ³•ï¼Œè¿”å›å­—ç¬¦ä¸²ç»™å®šä½ç½®çš„å­—ç¬¦ã€‚è¯¥æ–¹æ³•ä¸èƒ½è¯†åˆ«ç ç‚¹å¤§äº0xFFFFçš„å­—ç¬¦ã€‚ &#39;abc&#39;.charAt(0) // &quot;a&quot; &#39;ğ ®·&#39;.charAt(0) // &quot;\\uD842&quot; ä¸Šé¢ä»£ç ä¸­ï¼ŒcharAtæ–¹æ³•è¿”å›çš„æ˜¯UTF-16ç¼–ç çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œå®é™…ä¸Šæ˜¯æ— æ³•æ˜¾ç¤ºçš„ã€‚ ç›®å‰ï¼Œæœ‰ä¸€ä¸ªææ¡ˆï¼Œæå‡ºå­—ç¬¦ä¸²å®ä¾‹çš„atæ–¹æ³•ï¼Œå¯ä»¥è¯†åˆ«Unicodeç¼–å·å¤§äº0xFFFFçš„å­—ç¬¦ï¼Œè¿”å›æ­£ç¡®çš„å­—ç¬¦ã€‚ &#39;abc&#39;.at(0) // &quot;a&quot; &#39;ğ ®·&#39;.at(0) // &quot;ğ ®·&quot; è¿™ä¸ªæ–¹æ³•å¯ä»¥é€šè¿‡å«ç‰‡åº“å®ç°ã€‚ normalize()è®¸å¤šæ¬§æ´²è¯­è¨€æœ‰è¯­è°ƒç¬¦å·å’Œé‡éŸ³ç¬¦å·ã€‚ä¸ºäº†è¡¨ç¤ºå®ƒä»¬ï¼ŒUnicodeæä¾›äº†ä¸¤ç§æ–¹æ³•ã€‚ä¸€ç§æ˜¯ç›´æ¥æä¾›å¸¦é‡éŸ³ç¬¦å·çš„å­—ç¬¦ï¼Œæ¯”å¦‚Ç‘ï¼ˆ\\u01D1ï¼‰ã€‚å¦ä¸€ç§æ˜¯æä¾›åˆæˆç¬¦å·ï¼ˆcombining characterï¼‰ï¼Œå³åŸå­—ç¬¦ä¸é‡éŸ³ç¬¦å·çš„åˆæˆï¼Œä¸¤ä¸ªå­—ç¬¦åˆæˆä¸€ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚Oï¼ˆ\\u004Fï¼‰å’ŒË‡ï¼ˆ\\u030Cï¼‰åˆæˆÇ‘ï¼ˆ\\u004F\\u030Cï¼‰ã€‚ è¿™ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ï¼Œåœ¨è§†è§‰å’Œè¯­ä¹‰ä¸Šéƒ½ç­‰ä»·ï¼Œä½†æ˜¯JavaScriptä¸èƒ½è¯†åˆ«ã€‚ &#39;\\u01D1&#39;===&#39;\\u004F\\u030C&#39; //false &#39;\\u01D1&#39;.length // 1 &#39;\\u004F\\u030C&#39;.length // 2 ä¸Šé¢ä»£ç è¡¨ç¤ºï¼ŒJavaScriptå°†åˆæˆå­—ç¬¦è§†ä¸ºä¸¤ä¸ªå­—ç¬¦ï¼Œå¯¼è‡´ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ä¸ç›¸ç­‰ã€‚ ES6æä¾›å­—ç¬¦ä¸²å®ä¾‹çš„normalize()æ–¹æ³•ï¼Œç”¨æ¥å°†å­—ç¬¦çš„ä¸åŒè¡¨ç¤ºæ–¹æ³•ç»Ÿä¸€ä¸ºåŒæ ·çš„å½¢å¼ï¼Œè¿™ç§°ä¸ºUnicodeæ­£è§„åŒ–ã€‚ &#39;\\u01D1&#39;.normalize() === &#39;\\u004F\\u030C&#39;.normalize() // true normalizeæ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°æ¥æŒ‡å®šnormalizeçš„æ–¹å¼ï¼Œå‚æ•°çš„å››ä¸ªå¯é€‰å€¼å¦‚ä¸‹ã€‚ NFCï¼Œé»˜è®¤å‚æ•°ï¼Œè¡¨ç¤ºâ€œæ ‡å‡†ç­‰ä»·åˆæˆâ€ï¼ˆNormalization Form Canonical Compositionï¼‰ï¼Œè¿”å›å¤šä¸ªç®€å•å­—ç¬¦çš„åˆæˆå­—ç¬¦ã€‚æ‰€è°“â€œæ ‡å‡†ç­‰ä»·â€æŒ‡çš„æ˜¯è§†è§‰å’Œè¯­ä¹‰ä¸Šçš„ç­‰ä»·ã€‚ NFDï¼Œè¡¨ç¤ºâ€œæ ‡å‡†ç­‰ä»·åˆ†è§£â€ï¼ˆNormalization Form Canonical Decompositionï¼‰ï¼Œå³åœ¨æ ‡å‡†ç­‰ä»·çš„å‰æä¸‹ï¼Œè¿”å›åˆæˆå­—ç¬¦åˆ†è§£çš„å¤šä¸ªç®€å•å­—ç¬¦ã€‚ NFKCï¼Œè¡¨ç¤ºâ€œå…¼å®¹ç­‰ä»·åˆæˆâ€ï¼ˆNormalization Form Compatibility Compositionï¼‰ï¼Œè¿”å›åˆæˆå­—ç¬¦ã€‚æ‰€è°“â€œå…¼å®¹ç­‰ä»·â€æŒ‡çš„æ˜¯è¯­ä¹‰ä¸Šå­˜åœ¨ç­‰ä»·ï¼Œä½†è§†è§‰ä¸Šä¸ç­‰ä»·ï¼Œæ¯”å¦‚â€œå›â€å’Œâ€œå–œå–œâ€ã€‚ï¼ˆè¿™åªæ˜¯ç”¨æ¥ä¸¾ä¾‹ï¼Œnormalizeæ–¹æ³•ä¸èƒ½è¯†åˆ«ä¸­æ–‡ã€‚ï¼‰ NFKDï¼Œè¡¨ç¤ºâ€œå…¼å®¹ç­‰ä»·åˆ†è§£â€ï¼ˆNormalization Form Compatibility Decompositionï¼‰ï¼Œå³åœ¨å…¼å®¹ç­‰ä»·çš„å‰æä¸‹ï¼Œè¿”å›åˆæˆå­—ç¬¦åˆ†è§£çš„å¤šä¸ªç®€å•å­—ç¬¦ã€‚ &#39;\\u004F\\u030C&#39;.normalize(&#39;NFC&#39;).length // 1 &#39;\\u004F\\u030C&#39;.normalize(&#39;NFD&#39;).length // 2 ä¸Šé¢ä»£ç è¡¨ç¤ºï¼ŒNFCå‚æ•°è¿”å›å­—ç¬¦çš„åˆæˆå½¢å¼ï¼ŒNFDå‚æ•°è¿”å›å­—ç¬¦çš„åˆ†è§£å½¢å¼ã€‚ ä¸è¿‡ï¼Œnormalizeæ–¹æ³•ç›®å‰ä¸èƒ½è¯†åˆ«ä¸‰ä¸ªæˆ–ä¸‰ä¸ªä»¥ä¸Šå­—ç¬¦çš„åˆæˆã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯åªèƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šè¿‡Unicodeç¼–å·åŒºé—´åˆ¤æ–­ã€‚ includes(), startsWith(), endsWith()ä¼ ç»Ÿä¸Šï¼ŒJavaScriptåªæœ‰indexOfæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ã€‚ES6åˆæä¾›äº†ä¸‰ç§æ–°æ–¹æ³•ã€‚ includes()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²ã€‚ startsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨æºå­—ç¬¦ä¸²çš„å¤´éƒ¨ã€‚ endsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨æºå­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚ var s = &#39;Hello world!&#39;; s.startsWith(&#39;Hello&#39;) // true s.endsWith(&#39;!&#39;) // true s.includes(&#39;o&#39;) // true è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºå¼€å§‹æœç´¢çš„ä½ç½®ã€‚ var s = &#39;Hello world!&#39;; s.startsWith(&#39;world&#39;, 6) // true s.endsWith(&#39;Hello&#39;, 5) // true s.includes(&#39;Hello&#39;, 6) // false ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°næ—¶ï¼ŒendsWithçš„è¡Œä¸ºä¸å…¶ä»–ä¸¤ä¸ªæ–¹æ³•æœ‰æ‰€ä¸åŒã€‚å®ƒé’ˆå¯¹å‰nä¸ªå­—ç¬¦ï¼Œè€Œå…¶ä»–ä¸¤ä¸ªæ–¹æ³•é’ˆå¯¹ä»ç¬¬nä¸ªä½ç½®ç›´åˆ°å­—ç¬¦ä¸²ç»“æŸã€‚ repeat()repeatæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå°†åŸå­—ç¬¦ä¸²é‡å¤næ¬¡ã€‚ &#39;x&#39;.repeat(3) // &quot;xxx&quot; &#39;hello&#39;.repeat(2) // &quot;hellohello&quot; &#39;na&#39;.repeat(0) // &quot;&quot; å‚æ•°å¦‚æœæ˜¯å°æ•°ï¼Œä¼šè¢«å–æ•´ã€‚ &#39;na&#39;.repeat(2.9) // &quot;nana&quot; å¦‚æœrepeatçš„å‚æ•°æ˜¯è´Ÿæ•°æˆ–è€…Infinityï¼Œä¼šæŠ¥é”™ã€‚ &#39;na&#39;.repeat(Infinity) // RangeError &#39;na&#39;.repeat(-1) // RangeError ä½†æ˜¯ï¼Œå¦‚æœå‚æ•°æ˜¯0åˆ°-1ä¹‹é—´çš„å°æ•°ï¼Œåˆ™ç­‰åŒäº0ï¼Œè¿™æ˜¯å› ä¸ºä¼šå…ˆè¿›è¡Œå–æ•´è¿ç®—ã€‚0åˆ°-1ä¹‹é—´çš„å°æ•°ï¼Œå–æ•´ä»¥åç­‰äº-0ï¼Œrepeatè§†åŒä¸º0ã€‚ &#39;na&#39;.repeat(-0.9) // &quot;&quot; å‚æ•°NaNç­‰åŒäº0ã€‚ &#39;na&#39;.repeat(NaN) // &quot;&quot; å¦‚æœrepeatçš„å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šå…ˆè½¬æ¢æˆæ•°å­—ã€‚ &#39;na&#39;.repeat(&#39;na&#39;) // &quot;&quot; &#39;na&#39;.repeat(&#39;3&#39;) // &quot;nanana&quot; padStart()ï¼ŒpadEnd()ES7æ¨å‡ºäº†å­—ç¬¦ä¸²è¡¥å…¨é•¿åº¦çš„åŠŸèƒ½ã€‚å¦‚æœæŸä¸ªå­—ç¬¦ä¸²ä¸å¤ŸæŒ‡å®šé•¿åº¦ï¼Œä¼šåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨è¡¥å…¨ã€‚padStartç”¨äºå¤´éƒ¨è¡¥å…¨ï¼ŒpadEndç”¨äºå°¾éƒ¨è¡¥å…¨ã€‚ &#39;x&#39;.padStart(5, &#39;ab&#39;) // &#39;ababx&#39; &#39;x&#39;.padStart(4, &#39;ab&#39;) // &#39;abax&#39; &#39;x&#39;.padEnd(5, &#39;ab&#39;) // &#39;xabab&#39; &#39;x&#39;.padEnd(4, &#39;ab&#39;) // &#39;xaba&#39; ä¸Šé¢ä»£ç ä¸­ï¼ŒpadStartå’ŒpadEndä¸€å…±æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ç”¨æ¥æŒ‡å®šå­—ç¬¦ä¸²çš„æœ€å°é•¿åº¦ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨æ¥è¡¥å…¨çš„å­—ç¬¦ä¸²ã€‚ å¦‚æœåŸå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç­‰äºæˆ–å¤§äºæŒ‡å®šçš„æœ€å°é•¿åº¦ï¼Œåˆ™è¿”å›åŸå­—ç¬¦ä¸²ã€‚ &#39;xxx&#39;.padStart(2, &#39;ab&#39;) // &#39;xxx&#39; &#39;xxx&#39;.padEnd(2, &#39;ab&#39;) // &#39;xxx&#39; å¦‚æœç”¨æ¥è¡¥å…¨çš„å­—ç¬¦ä¸²ä¸åŸå­—ç¬¦ä¸²ï¼Œä¸¤è€…çš„é•¿åº¦ä¹‹å’Œè¶…è¿‡äº†æŒ‡å®šçš„æœ€å°é•¿åº¦ï¼Œåˆ™ä¼šæˆªå»è¶…å‡ºä½æ•°çš„è¡¥å…¨å­—ç¬¦ä¸²ã€‚ &#39;abc&#39;.padStart(10, &#39;0123456789&#39;) // &#39;0123456abc&#39; å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ä¼šç”¨ç©ºæ ¼è¡¥å…¨é•¿åº¦ã€‚ &#39;x&#39;.padStart(4) // &#39; x&#39; &#39;x&#39;.padEnd(4) // &#39;x &#39; padStartçš„å¸¸è§ç”¨é€”æ˜¯ä¸ºæ•°å€¼è¡¥å…¨æŒ‡å®šä½æ•°ã€‚ä¸‹é¢ä»£ç ç”Ÿæˆ10ä½çš„æ•°å€¼å­—ç¬¦ä¸²ã€‚ &#39;1&#39;.padStart(10, &#39;0&#39;) // &quot;0000000001&quot; &#39;12&#39;.padStart(10, &#39;0&#39;) // &quot;0000000012&quot; &#39;123456&#39;.padStart(10, &#39;0&#39;) // &quot;0000123456&quot; å¦ä¸€ä¸ªç”¨é€”æ˜¯æç¤ºå­—ç¬¦ä¸²æ ¼å¼ã€‚ &#39;12&#39;.padStart(10, &#39;YYYY-MM-DD&#39;) // &quot;YYYY-MM-12&quot; &#39;09-12&#39;.padStart(10, &#39;YYYY-MM-DD&#39;) // &quot;YYYY-09-12&quot; æ¨¡æ¿å­—ç¬¦ä¸²ä¼ ç»Ÿçš„JavaScriptè¯­è¨€ï¼Œè¾“å‡ºæ¨¡æ¿é€šå¸¸æ˜¯è¿™æ ·å†™çš„ã€‚ $(&#39;#result&#39;).append( &#39;There are &lt;b&gt;&#39; + basket.count + &#39;&lt;/b&gt; &#39; + &#39;items in your basket, &#39; + &#39;&lt;em&gt;&#39; + basket.onSale + &#39;&lt;/em&gt; are on sale!&#39; ); ä¸Šé¢è¿™ç§å†™æ³•ç›¸å½“ç¹çä¸æ–¹ä¾¿ï¼ŒES6å¼•å…¥äº†æ¨¡æ¿å­—ç¬¦ä¸²è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ $(&#39;#result&#39;).append(` There are &lt;b&gt;${basket.count}&lt;/b&gt; items in your basket, &lt;em&gt;${basket.onSale}&lt;/em&gt; are on sale! `); æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆtemplate stringï¼‰æ˜¯å¢å¼ºç‰ˆçš„å­—ç¬¦ä¸²ï¼Œç”¨åå¼•å·ï¼ˆ&#96;ï¼‰æ ‡è¯†ã€‚å®ƒå¯ä»¥å½“ä½œæ™®é€šå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ã€‚ // æ™®é€šå­—ç¬¦ä¸² `In JavaScript &#39;\\n&#39; is a line-feed.` // å¤šè¡Œå­—ç¬¦ä¸² `In JavaScript this is not legal.` console.log(`string text line 1 string text line 2`); // å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ var name = &quot;Bob&quot;, time = &quot;today&quot;; `Hello ${name}, how are you ${time}?` ä¸Šé¢ä»£ç ä¸­çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œéƒ½æ˜¯ç”¨åå¼•å·è¡¨ç¤ºã€‚å¦‚æœåœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­éœ€è¦ä½¿ç”¨åå¼•å·ï¼Œåˆ™å‰é¢è¦ç”¨åæ–œæ è½¬ä¹‰ã€‚ var greeting = `\\`Yo\\` World!`; å¦‚æœä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ‰€æœ‰çš„ç©ºæ ¼å’Œç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¹‹ä¸­ã€‚ $(&#39;#list&#39;).html(` &lt;ul&gt; &lt;li&gt;first&lt;/li&gt; &lt;li&gt;second&lt;/li&gt; &lt;/ul&gt; `); ä¸Šé¢ä»£ç ä¸­ï¼Œæ‰€æœ‰æ¨¡æ¿å­—ç¬¦ä¸²çš„ç©ºæ ¼å’Œæ¢è¡Œï¼Œéƒ½æ˜¯è¢«ä¿ç•™çš„ï¼Œæ¯”å¦‚&lt;ul&gt;æ ‡ç­¾å‰é¢ä¼šæœ‰ä¸€ä¸ªæ¢è¡Œã€‚å¦‚æœä½ ä¸æƒ³è¦è¿™ä¸ªæ¢è¡Œï¼Œå¯ä»¥ä½¿ç”¨trimæ–¹æ³•æ¶ˆé™¤å®ƒã€‚ $(&#39;#list&#39;).html(` &lt;ul&gt; &lt;li&gt;first&lt;/li&gt; &lt;li&gt;second&lt;/li&gt; &lt;/ul&gt; `.trim()); æ¨¡æ¿å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ï¼Œéœ€è¦å°†å˜é‡åå†™åœ¨${}ä¹‹ä¸­ã€‚ function authorize(user, action) { if (!user.hasPrivilege(action)) { throw new Error( // ä¼ ç»Ÿå†™æ³•ä¸º // &#39;User &#39; // + user.name // + &#39; is not authorized to do &#39; // + action // + &#39;.&#39; `User ${user.name} is not authorized to do ${action}.`); } } å¤§æ‹¬å·å†…éƒ¨å¯ä»¥æ”¾å…¥ä»»æ„çš„JavaScriptè¡¨è¾¾å¼ï¼Œå¯ä»¥è¿›è¡Œè¿ç®—ï¼Œä»¥åŠå¼•ç”¨å¯¹è±¡å±æ€§ã€‚ var x = 1; var y = 2; `${x} + ${y} = ${x + y}` // &quot;1 + 2 = 3&quot; `${x} + ${y * 2} = ${x + y * 2}` // &quot;1 + 4 = 5&quot; var obj = {x: 1, y: 2}; `${obj.x + obj.y}` // 3 æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ä¸­è¿˜èƒ½è°ƒç”¨å‡½æ•°ã€‚ function fn() { return &quot;Hello World&quot;; } `foo ${fn()} bar` // foo Hello World bar å¦‚æœå¤§æ‹¬å·ä¸­çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå°†æŒ‰ç…§ä¸€èˆ¬çš„è§„åˆ™è½¬ä¸ºå­—ç¬¦ä¸²ã€‚æ¯”å¦‚ï¼Œå¤§æ‹¬å·ä¸­æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°†é»˜è®¤è°ƒç”¨å¯¹è±¡çš„toStringæ–¹æ³•ã€‚ å¦‚æœæ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„å˜é‡æ²¡æœ‰å£°æ˜ï¼Œå°†æŠ¥é”™ã€‚ // å˜é‡placeæ²¡æœ‰å£°æ˜ var msg = `Hello, ${place}`; // æŠ¥é”™ ç”±äºæ¨¡æ¿å­—ç¬¦ä¸²çš„å¤§æ‹¬å·å†…éƒ¨ï¼Œå°±æ˜¯æ‰§è¡ŒJavaScriptä»£ç ï¼Œå› æ­¤å¦‚æœå¤§æ‹¬å·å†…éƒ¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†ä¼šåŸæ ·è¾“å‡ºã€‚ `Hello ${&#39;World&#39;}` // &quot;Hello World&quot; æ¨¡æ¿å­—ç¬¦ä¸²ç”šè‡³è¿˜èƒ½åµŒå¥—ã€‚ const tmpl = addrs =&gt; ` &lt;table&gt; ${addrs.map(addr =&gt; ` &lt;tr&gt;&lt;td&gt;${addr.first}&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;${addr.last}&lt;/td&gt;&lt;/tr&gt; `).join(&#39;&#39;)} &lt;/table&gt; `; ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²çš„å˜é‡ä¹‹ä¸­ï¼ŒåˆåµŒå…¥äº†å¦ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚ const data = [ { first: &#39;&lt;Jane&gt;&#39;, last: &#39;Bond&#39; }, { first: &#39;Lars&#39;, last: &#39;&lt;Croft&gt;&#39; }, ]; console.log(tmpl(data)); // &lt;table&gt; // // &lt;tr&gt;&lt;td&gt;&lt;Jane&gt;&lt;/td&gt;&lt;/tr&gt; // &lt;tr&gt;&lt;td&gt;Bond&lt;/td&gt;&lt;/tr&gt; // // &lt;tr&gt;&lt;td&gt;Lars&lt;/td&gt;&lt;/tr&gt; // &lt;tr&gt;&lt;td&gt;&lt;Croft&gt;&lt;/td&gt;&lt;/tr&gt; // // &lt;/table&gt; å¦‚æœéœ€è¦å¼•ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«ï¼Œåœ¨éœ€è¦æ—¶æ‰§è¡Œï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ã€‚ // å†™æ³•ä¸€ let str = &#39;return &#39; + &#39;`Hello ${name}!`&#39;; let func = new Function(&#39;name&#39;, str); func(&#39;Jack&#39;) // &quot;Hello Jack!&quot; // å†™æ³•äºŒ let str = &#39;(name) =&gt; `Hello ${name}!`&#39;; let func = eval.call(null, str); func(&#39;Jack&#39;) // &quot;Hello Jack!&quot; å®ä¾‹ï¼šæ¨¡æ¿ç¼–è¯‘ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªé€šè¿‡æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œç”Ÿæˆæ­£å¼æ¨¡æ¿çš„å®ä¾‹ã€‚ var template = ` &lt;ul&gt; &lt;% for(var i=0; i &lt; data.supplies.length; i++) { %&gt; &lt;li&gt;&lt;%= data.supplies[i] %&gt;&lt;/li&gt; &lt;% } %&gt; &lt;/ul&gt; `; ä¸Šé¢ä»£ç åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ä¸­ï¼Œæ”¾ç½®äº†ä¸€ä¸ªå¸¸è§„æ¨¡æ¿ã€‚è¯¥æ¨¡æ¿ä½¿ç”¨&lt;%...%&gt;æ”¾ç½®JavaScriptä»£ç ï¼Œä½¿ç”¨&lt;%= ... %&gt;è¾“å‡ºJavaScriptè¡¨è¾¾å¼ã€‚ æ€ä¹ˆç¼–è¯‘è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²å‘¢ï¼Ÿ ä¸€ç§æ€è·¯æ˜¯å°†å…¶è½¬æ¢ä¸ºJavaScriptè¡¨è¾¾å¼å­—ç¬¦ä¸²ã€‚ echo(&#39;&lt;ul&gt;&#39;); for(var i=0; i &lt; data.supplies.length; i++) { echo(&#39;&lt;li&gt;&#39;); echo(data.supplies[i]); echo(&#39;&lt;/li&gt;&#39;); }; echo(&#39;&lt;/ul&gt;&#39;); è¿™ä¸ªè½¬æ¢ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å°±è¡Œäº†ã€‚ var evalExpr = /&lt;%=(.+?)%&gt;/g; var expr = /&lt;%([\\s\\S]+?)%&gt;/g; template = template .replace(evalExpr, &#39;`); \\n echo( $1 ); \\n echo(`&#39;) .replace(expr, &#39;`); \\n $1 \\n echo(`&#39;); template = &#39;echo(`&#39; + template + &#39;`);&#39;; ç„¶åï¼Œå°†templateå°è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢è¿”å›ï¼Œå°±å¯ä»¥äº†ã€‚ var script = `(function parse(data){ var output = &quot;&quot;; function echo(html){ output += html; } ${ template } return output; })`; return script; å°†ä¸Šé¢çš„å†…å®¹æ‹¼è£…æˆä¸€ä¸ªæ¨¡æ¿ç¼–è¯‘å‡½æ•°compileã€‚ function compile(template){ var evalExpr = /&lt;%=(.+?)%&gt;/g; var expr = /&lt;%([\\s\\S]+?)%&gt;/g; template = template .replace(evalExpr, &#39;`); \\n echo( $1 ); \\n echo(`&#39;) .replace(expr, &#39;`); \\n $1 \\n echo(`&#39;); template = &#39;echo(`&#39; + template + &#39;`);&#39;; var script = `(function parse(data){ var output = &quot;&quot;; function echo(html){ output += html; } ${ template } return output; })`; return script; } compileå‡½æ•°çš„ç”¨æ³•å¦‚ä¸‹ã€‚ var parse = eval(compile(template)); div.innerHTML = parse({ supplies: [ &quot;broom&quot;, &quot;mop&quot;, &quot;cleaner&quot; ] }); // &lt;ul&gt; // &lt;li&gt;broom&lt;/li&gt; // &lt;li&gt;mop&lt;/li&gt; // &lt;li&gt;cleaner&lt;/li&gt; // &lt;/ul&gt; æ ‡ç­¾æ¨¡æ¿æ¨¡æ¿å­—ç¬¦ä¸²çš„åŠŸèƒ½ï¼Œä¸ä»…ä»…æ˜¯ä¸Šé¢è¿™äº›ã€‚å®ƒå¯ä»¥ç´§è·Ÿåœ¨ä¸€ä¸ªå‡½æ•°ååé¢ï¼Œè¯¥å‡½æ•°å°†è¢«è°ƒç”¨æ¥å¤„ç†è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ã€‚è¿™è¢«ç§°ä¸ºâ€œæ ‡ç­¾æ¨¡æ¿â€åŠŸèƒ½ï¼ˆtagged templateï¼‰ã€‚ alert`123` // ç­‰åŒäº alert(123) æ ‡ç­¾æ¨¡æ¿å…¶å®ä¸æ˜¯æ¨¡æ¿ï¼Œè€Œæ˜¯å‡½æ•°è°ƒç”¨çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚â€œæ ‡ç­¾â€æŒ‡çš„å°±æ˜¯å‡½æ•°ï¼Œç´§è·Ÿåœ¨åé¢çš„æ¨¡æ¿å­—ç¬¦ä¸²å°±æ˜¯å®ƒçš„å‚æ•°ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ¨¡æ¿å­—ç¬¦é‡Œé¢æœ‰å˜é‡ï¼Œå°±ä¸æ˜¯ç®€å•çš„è°ƒç”¨äº†ï¼Œè€Œæ˜¯ä¼šå°†æ¨¡æ¿å­—ç¬¦ä¸²å…ˆå¤„ç†æˆå¤šä¸ªå‚æ•°ï¼Œå†è°ƒç”¨å‡½æ•°ã€‚ var a = 5; var b = 10; tag`Hello ${ a + b } world ${ a * b }`; // ç­‰åŒäº tag([&#39;Hello &#39;, &#39; world &#39;, &#39;&#39;], 15, 50); ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å‰é¢æœ‰ä¸€ä¸ªæ ‡è¯†åtagï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚æ•´ä¸ªè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œå°±æ˜¯tagå‡½æ•°å¤„ç†æ¨¡æ¿å­—ç¬¦ä¸²åçš„è¿”å›å€¼ã€‚ å‡½æ•°tagä¾æ¬¡ä¼šæ¥æ”¶åˆ°å¤šä¸ªå‚æ•°ã€‚ function tag(stringArr, value1, value2){ // ... } // ç­‰åŒäº function tag(stringArr, ...values){ // ... } tagå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„æˆå‘˜æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ä¸­é‚£äº›æ²¡æœ‰å˜é‡æ›¿æ¢çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå˜é‡æ›¿æ¢åªå‘ç”Ÿåœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ä¸ç¬¬äºŒä¸ªæˆå‘˜ä¹‹é—´ã€ç¬¬äºŒä¸ªæˆå‘˜ä¸ç¬¬ä¸‰ä¸ªæˆå‘˜ä¹‹é—´ï¼Œä»¥æ­¤ç±»æ¨ã€‚ tagå‡½æ•°çš„å…¶ä»–å‚æ•°ï¼Œéƒ½æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²å„ä¸ªå˜é‡è¢«æ›¿æ¢åçš„å€¼ã€‚ç”±äºæœ¬ä¾‹ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å«æœ‰ä¸¤ä¸ªå˜é‡ï¼Œå› æ­¤tagä¼šæ¥å—åˆ°value1å’Œvalue2ä¸¤ä¸ªå‚æ•°ã€‚ tagå‡½æ•°æ‰€æœ‰å‚æ•°çš„å®é™…å€¼å¦‚ä¸‹ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°ï¼š[&#39;Hello &#39;, &#39; world &#39;, &#39;&#39;] ç¬¬äºŒä¸ªå‚æ•°: 15 ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š50 ä¹Ÿå°±æ˜¯è¯´ï¼Œtagå‡½æ•°å®é™…ä¸Šä»¥ä¸‹é¢çš„å½¢å¼è°ƒç”¨ã€‚ tag([&#39;Hello &#39;, &#39; world &#39;, &#39;&#39;], 15, 50) æˆ‘ä»¬å¯ä»¥æŒ‰ç…§éœ€è¦ç¼–å†™tagå‡½æ•°çš„ä»£ç ã€‚ä¸‹é¢æ˜¯tagå‡½æ•°çš„ä¸€ç§å†™æ³•ï¼Œä»¥åŠè¿è¡Œç»“æœã€‚ var a = 5; var b = 10; function tag(s, v1, v2) { console.log(s[0]); console.log(s[1]); console.log(s[2]); console.log(v1); console.log(v2); return &quot;OK&quot;; } tag`Hello ${ a + b } world ${ a * b}`; // &quot;Hello &quot; // &quot; world &quot; // &quot;&quot; // 15 // 50 // &quot;OK&quot; ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ã€‚ var total = 30; var msg = passthru`The total is ${total} (${total*1.05} with tax)`; function passthru(literals) { var result = &#39;&#39;; var i = 0; while (i &lt; literals.length) { result += literals[i++]; if (i &lt; arguments.length) { result += arguments[i]; } } return result; } msg // &quot;The total is 30 (31.5 with tax)&quot; ä¸Šé¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†ï¼Œå¦‚ä½•å°†å„ä¸ªå‚æ•°æŒ‰ç…§åŸæ¥çš„ä½ç½®æ‹¼åˆå›å»ã€‚ passthruå‡½æ•°é‡‡ç”¨restå‚æ•°çš„å†™æ³•å¦‚ä¸‹ã€‚ function passthru(literals, ...values) { var output = &quot;&quot;; for (var index = 0; index &lt; values.length; index++) { output += literals[index] + values[index]; } output += literals[index] return output; } â€œæ ‡ç­¾æ¨¡æ¿â€çš„ä¸€ä¸ªé‡è¦åº”ç”¨ï¼Œå°±æ˜¯è¿‡æ»¤HTMLå­—ç¬¦ä¸²ï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥æ¶æ„å†…å®¹ã€‚ var message = SaferHTML`&lt;p&gt;${sender} has sent you a message.&lt;/p&gt;`; function SaferHTML(templateData) { var s = templateData[0]; for (var i = 1; i &lt; arguments.length; i++) { var arg = String(arguments[i]); // Escape special characters in the substitution. s += arg.replace(/&amp;/g, &quot;&amp;amp;&quot;) .replace(/&lt;/g, &quot;&amp;lt;&quot;) .replace(/&gt;/g, &quot;&amp;gt;&quot;); // Don&#39;t escape special characters in the template. s += templateData[i]; } return s; } ä¸Šé¢ä»£ç ä¸­ï¼Œsenderå˜é‡å¾€å¾€æ˜¯ç”¨æˆ·æä¾›çš„ï¼Œç»è¿‡SaferHTMLå‡½æ•°å¤„ç†ï¼Œé‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦éƒ½ä¼šè¢«è½¬ä¹‰ã€‚ var sender = &#39;&lt;script&gt;alert(&quot;abc&quot;)&lt;/script&gt;&#39;; // æ¶æ„ä»£ç  var message = SaferHTML`&lt;p&gt;${sender} has sent you a message.&lt;/p&gt;`; message // &lt;p&gt;&amp;lt;script&amp;gt;alert(&quot;abc&quot;)&amp;lt;/script&amp;gt; has sent you a message.&lt;/p&gt; æ ‡ç­¾æ¨¡æ¿çš„å¦ä¸€ä¸ªåº”ç”¨ï¼Œå°±æ˜¯å¤šè¯­è¨€è½¬æ¢ï¼ˆå›½é™…åŒ–å¤„ç†ï¼‰ã€‚ i18n`Welcome to ${siteName}, you are visitor number ${visitorNumber}!` // &quot;æ¬¢è¿è®¿é—®xxxï¼Œæ‚¨æ˜¯ç¬¬xxxxä½è®¿é—®è€…ï¼&quot; æ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«å¹¶ä¸èƒ½å–ä»£Mustacheä¹‹ç±»çš„æ¨¡æ¿åº“ï¼Œå› ä¸ºæ²¡æœ‰æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯å¤„ç†åŠŸèƒ½ï¼Œä½†æ˜¯é€šè¿‡æ ‡ç­¾å‡½æ•°ï¼Œä½ å¯ä»¥è‡ªå·±æ·»åŠ è¿™äº›åŠŸèƒ½ã€‚ // ä¸‹é¢çš„hashTemplateå‡½æ•° // æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ¨¡æ¿å¤„ç†å‡½æ•° var libraryHtml = hashTemplate` &lt;ul&gt; #for book in ${myBooks} &lt;li&gt;&lt;i&gt;#{book.title}&lt;/i&gt; by #{book.author}&lt;/li&gt; #end &lt;/ul&gt; `; é™¤æ­¤ä¹‹å¤–ï¼Œä½ ç”šè‡³å¯ä»¥ä½¿ç”¨æ ‡ç­¾æ¨¡æ¿ï¼Œåœ¨JavaScriptè¯­è¨€ä¹‹ä¸­åµŒå…¥å…¶ä»–è¯­è¨€ã€‚ jsx` &lt;div&gt; &lt;input ref=&#39;input&#39; onChange=&#39;${this.handleChange}&#39; defaultValue=&#39;${this.state.value}&#39; /&gt; ${this.state.value} &lt;/div&gt; ` ä¸Šé¢çš„ä»£ç é€šè¿‡jsxå‡½æ•°ï¼Œå°†ä¸€ä¸ªDOMå­—ç¬¦ä¸²è½¬ä¸ºReactå¯¹è±¡ã€‚ä½ å¯ä»¥åœ¨Githubæ‰¾åˆ°jsxå‡½æ•°çš„å…·ä½“å®ç°ã€‚ ä¸‹é¢åˆ™æ˜¯ä¸€ä¸ªå‡æƒ³çš„ä¾‹å­ï¼Œé€šè¿‡javaå‡½æ•°ï¼Œåœ¨JavaScriptä»£ç ä¹‹ä¸­è¿è¡ŒJavaä»£ç ã€‚ java` class HelloWorldApp { public static void main(String[] args) { System.out.println(â€œHello World!â€); // Display the string. } } ` HelloWorldApp.main(); æ¨¡æ¿å¤„ç†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆæ¨¡æ¿å­—ç¬¦ä¸²æ•°ç»„ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ªrawå±æ€§ã€‚ console.log`123` // [&quot;123&quot;, raw: Array[1]] ä¸Šé¢ä»£ç ä¸­ï¼Œconsole.logæ¥å—çš„å‚æ•°ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ•°ç»„æœ‰ä¸€ä¸ªrawå±æ€§ï¼Œä¿å­˜çš„æ˜¯è½¬ä¹‰åçš„åŸå­—ç¬¦ä¸²ã€‚ è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚ tag`First line\\nSecond line` function tag(strings) { console.log(strings.raw[0]); // &quot;First line\\\\nSecond line&quot; } ä¸Šé¢ä»£ç ä¸­ï¼Œtagå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°stringsï¼Œæœ‰ä¸€ä¸ªrawå±æ€§ï¼Œä¹ŸæŒ‡å‘ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ•°ç»„çš„æˆå‘˜ä¸stringsæ•°ç»„å®Œå…¨ä¸€è‡´ã€‚æ¯”å¦‚ï¼Œstringsæ•°ç»„æ˜¯[&quot;First line\\nSecond line&quot;]ï¼Œé‚£ä¹ˆstrings.rawæ•°ç»„å°±æ˜¯[&quot;First line\\\\nSecond line&quot;]ã€‚ä¸¤è€…å”¯ä¸€çš„åŒºåˆ«ï¼Œå°±æ˜¯å­—ç¬¦ä¸²é‡Œé¢çš„æ–œæ éƒ½è¢«è½¬ä¹‰äº†ã€‚æ¯”å¦‚ï¼Œstrings.rawæ•°ç»„ä¼šå°†\\nè§†ä¸º\\\\å’Œnä¸¤ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯æ¢è¡Œç¬¦ã€‚è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿å–å¾—è½¬ä¹‰ä¹‹å‰çš„åŸå§‹æ¨¡æ¿è€Œè®¾è®¡çš„ã€‚ String.raw()ES6è¿˜ä¸ºåŸç”Ÿçš„Stringå¯¹è±¡ï¼Œæä¾›äº†ä¸€ä¸ªrawæ–¹æ³•ã€‚ String.rawæ–¹æ³•ï¼Œå¾€å¾€ç”¨æ¥å……å½“æ¨¡æ¿å­—ç¬¦ä¸²çš„å¤„ç†å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–œæ éƒ½è¢«è½¬ä¹‰ï¼ˆå³æ–œæ å‰é¢å†åŠ ä¸€ä¸ªæ–œæ ï¼‰çš„å­—ç¬¦ä¸²ï¼Œå¯¹åº”äºæ›¿æ¢å˜é‡åçš„æ¨¡æ¿å­—ç¬¦ä¸²ã€‚ String.raw`Hi\\n${2+3}!`; // &quot;Hi\\\\n5!&quot; String.raw`Hi\\u000A!`; // &#39;Hi\\\\u000A!&#39; å¦‚æœåŸå­—ç¬¦ä¸²çš„æ–œæ å·²ç»è½¬ä¹‰ï¼Œé‚£ä¹ˆString.rawä¸ä¼šåšä»»ä½•å¤„ç†ã€‚ String.raw`Hi\\\\n` // &quot;Hi\\\\n&quot; String.rawçš„ä»£ç åŸºæœ¬å¦‚ä¸‹ã€‚ String.raw = function (strings, ...values) { var output = &quot;&quot;; for (var index = 0; index &lt; values.length; index++) { output += strings.raw[index] + values[index]; } output += strings.raw[index] return output; } String.rawæ–¹æ³•å¯ä»¥ä½œä¸ºå¤„ç†æ¨¡æ¿å­—ç¬¦ä¸²çš„åŸºæœ¬æ–¹æ³•ï¼Œå®ƒä¼šå°†æ‰€æœ‰å˜é‡æ›¿æ¢ï¼Œè€Œä¸”å¯¹æ–œæ è¿›è¡Œè½¬ä¹‰ï¼Œæ–¹ä¾¿ä¸‹ä¸€æ­¥ä½œä¸ºå­—ç¬¦ä¸²æ¥ä½¿ç”¨ã€‚ String.rawæ–¹æ³•ä¹Ÿå¯ä»¥ä½œä¸ºæ­£å¸¸çš„å‡½æ•°ä½¿ç”¨ã€‚è¿™æ—¶ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªå…·æœ‰rawå±æ€§çš„å¯¹è±¡ï¼Œä¸”rawå±æ€§çš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ String.raw({ raw: &#39;test&#39; }, 0, 1, 2); // &#39;t0e1s2t&#39; // ç­‰åŒäº String.raw({ raw: [&#39;t&#39;,&#39;e&#39;,&#39;s&#39;,&#39;t&#39;] }, 0, 1, 2); æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶å‰é¢æåˆ°æ ‡ç­¾æ¨¡æ¿é‡Œé¢ï¼Œå¯ä»¥å†…åµŒå…¶ä»–è¯­è¨€ã€‚ä½†æ˜¯ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²é»˜è®¤ä¼šå°†å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œå› æ­¤å¯¼è‡´äº†æ— æ³•åµŒå…¥å…¶ä»–è¯­è¨€ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨æ ‡ç­¾æ¨¡æ¿é‡Œé¢å¯ä»¥åµŒå…¥Latexè¯­è¨€ã€‚ function latex(strings) { // ... } let document = latex` \\newcommand{\\fun}{\\textbf{Fun!}} // æ­£å¸¸å·¥ä½œ \\newcommand{\\unicode}{\\textbf{Unicode!}} // æŠ¥é”™ \\newcommand{\\xerxes}{\\textbf{King!}} // æŠ¥é”™ Breve over the h goes \\u{h}ere // æŠ¥é”™ ` ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡documentå†…åµŒçš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå¯¹äºLatexè¯­è¨€æ¥è¯´å®Œå…¨æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯JavaScriptå¼•æ“ä¼šæŠ¥é”™ã€‚åŸå› å°±åœ¨äºå­—ç¬¦ä¸²çš„è½¬ä¹‰ã€‚ æ¨¡æ¿å­—ç¬¦ä¸²ä¼šå°†\\u00FFå’Œ\\u{42}å½“ä½œUnicodeå­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œæ‰€ä»¥\\unicodeè§£ææ—¶æŠ¥é”™ï¼›è€Œ\\x56ä¼šè¢«å½“ä½œåå…­è¿›åˆ¶å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œæ‰€ä»¥\\xerxesä¼šæŠ¥é”™ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç°åœ¨æœ‰ä¸€ä¸ªææ¡ˆï¼Œæ”¾æ¾å¯¹æ ‡ç­¾æ¨¡æ¿é‡Œé¢çš„å­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶ã€‚å¦‚æœé‡åˆ°ä¸åˆæ³•çš„å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œå°±è¿”å›undefinedï¼Œè€Œä¸æ˜¯æŠ¥é”™ï¼Œå¹¶ä¸”ä»rawå±æ€§ä¸Šé¢å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸²ã€‚ function tag(strs) { strs[0] === undefined strs.raw[0] === &quot;\\\\unicode and \\\\u{55}&quot;; } tag`\\unicode and \\u{55}` ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²åŸæœ¬æ˜¯åº”è¯¥æŠ¥é”™çš„ï¼Œä½†æ˜¯ç”±äºæ”¾æ¾äº†å¯¹å­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶ï¼Œæ‰€ä»¥ä¸æŠ¥é”™äº†ï¼ŒJavaScriptå¼•æ“å°†ç¬¬ä¸€ä¸ªå­—ç¬¦è®¾ç½®ä¸ºundefinedï¼Œä½†æ˜¯rawå±æ€§ä¾ç„¶å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸²ï¼Œå› æ­¤tagå‡½æ•°è¿˜æ˜¯å¯ä»¥å¯¹åŸå­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ã€‚ æ³¨æ„ï¼Œè¿™ç§å¯¹å­—ç¬¦ä¸²è½¬ä¹‰çš„æ”¾æ¾ï¼Œåªåœ¨æ ‡ç­¾æ¨¡æ¿è§£æå­—ç¬¦ä¸²æ—¶ç”Ÿæ•ˆï¼Œä¸æ˜¯æ ‡ç­¾æ¨¡æ¿çš„åœºåˆï¼Œä¾ç„¶ä¼šæŠ¥é”™ã€‚ let bad = `bad escape sequence: \\unicode`; // æŠ¥é”™","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Unicode","slug":"Unicode","permalink":"https://microzz.com/tags/Unicode/"}]},{"title":"å˜é‡çš„è§£æ„èµ‹å€¼(Destructuring)","date":"2016-11-13T07:16:19.000Z","path":"2016/11/13/destructuring/","text":"å˜é‡çš„è§£æ„èµ‹å€¼æ•°ç»„çš„è§£æ„èµ‹å€¼åŸºæœ¬ç”¨æ³•ES6å…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸ºè§£æ„ï¼ˆDestructuringï¼‰ã€‚ ä»¥å‰ï¼Œä¸ºå˜é‡èµ‹å€¼ï¼Œåªèƒ½ç›´æ¥æŒ‡å®šå€¼ã€‚ var a = 1; var b = 2; var c = 3; ES6å…è®¸å†™æˆä¸‹é¢è¿™æ ·ã€‚ var [a, b, c] = [1, 2, 3]; ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¯ä»¥ä»æ•°ç»„ä¸­æå–å€¼ï¼ŒæŒ‰ç…§å¯¹åº”ä½ç½®ï¼Œå¯¹å˜é‡èµ‹å€¼ã€‚ æœ¬è´¨ä¸Šï¼Œè¿™ç§å†™æ³•å±äºâ€œæ¨¡å¼åŒ¹é…â€ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨åµŒå¥—æ•°ç»„è¿›è¡Œè§£æ„çš„ä¾‹å­ã€‚ let [foo, [[bar], baz]] = [1, [[2], 3]]; foo // 1 bar // 2 baz // 3 let [ , , third] = [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]; third // &quot;baz&quot; let [x, , y] = [1, 2, 3]; x // 1 y // 3 let [head, ...tail] = [1, 2, 3, 4]; head // 1 tail // [2, 3, 4] let [x, y, ...z] = [&#39;a&#39;]; x // &quot;a&quot; y // undefined z // [] å¦‚æœè§£æ„ä¸æˆåŠŸï¼Œå˜é‡çš„å€¼å°±ç­‰äºundefinedã€‚ var [foo] = []; var [bar, foo] = [1]; ä»¥ä¸Šä¸¤ç§æƒ…å†µéƒ½å±äºè§£æ„ä¸æˆåŠŸï¼Œfooçš„å€¼éƒ½ä¼šç­‰äºundefinedã€‚ å¦ä¸€ç§æƒ…å†µæ˜¯ä¸å®Œå…¨è§£æ„ï¼Œå³ç­‰å·å·¦è¾¹çš„æ¨¡å¼ï¼ŒåªåŒ¹é…ä¸€éƒ¨åˆ†çš„ç­‰å·å³è¾¹çš„æ•°ç»„ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè§£æ„ä¾ç„¶å¯ä»¥æˆåŠŸã€‚ let [x, y] = [1, 2, 3]; x // 1 y // 2 let [a, [b], d] = [1, [2, 3], 4]; a // 1 b // 2 d // 4 ä¸Šé¢ä¸¤ä¸ªä¾‹å­ï¼Œéƒ½å±äºä¸å®Œå…¨è§£æ„ï¼Œä½†æ˜¯å¯ä»¥æˆåŠŸã€‚ å¦‚æœç­‰å·çš„å³è¾¹ä¸æ˜¯æ•°ç»„ï¼ˆæˆ–è€…ä¸¥æ ¼åœ°è¯´ï¼Œä¸æ˜¯å¯éå†çš„ç»“æ„ï¼Œå‚è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ã€‚ // æŠ¥é”™ let [foo] = 1; let [foo] = false; let [foo] = NaN; let [foo] = undefined; let [foo] = null; let [foo] = {}; ä¸Šé¢çš„è¡¨è¾¾å¼éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºç­‰å·å³è¾¹çš„å€¼ï¼Œè¦ä¹ˆè½¬ä¸ºå¯¹è±¡ä»¥åä¸å…·å¤‡Iteratoræ¥å£ï¼ˆå‰äº”ä¸ªè¡¨è¾¾å¼ï¼‰ï¼Œè¦ä¹ˆæœ¬èº«å°±ä¸å…·å¤‡Iteratoræ¥å£ï¼ˆæœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼‰ã€‚ è§£æ„èµ‹å€¼ä¸ä»…é€‚ç”¨äºvarå‘½ä»¤ï¼Œä¹Ÿé€‚ç”¨äºletå’Œconstå‘½ä»¤ã€‚ var [v1, v2, ..., vN ] = array; let [v1, v2, ..., vN ] = array; const [v1, v2, ..., vN ] = array; å¯¹äºSetç»“æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„çš„è§£æ„èµ‹å€¼ã€‚ let [x, y, z] = new Set([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]); x // &quot;a&quot; äº‹å®ä¸Šï¼Œåªè¦æŸç§æ•°æ®ç»“æ„å…·æœ‰Iteratoræ¥å£ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼ã€‚ function* fibs() { var a = 0; var b = 1; while (true) { yield a; [a, b] = [b, a + b]; } } var [first, second, third, fourth, fifth, sixth] = fibs(); sixth // 5 ä¸Šé¢ä»£ç ä¸­ï¼Œfibsæ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼ŒåŸç”Ÿå…·æœ‰Iteratoræ¥å£ã€‚è§£æ„èµ‹å€¼ä¼šä¾æ¬¡ä»è¿™ä¸ªæ¥å£è·å–å€¼ã€‚ é»˜è®¤å€¼è§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼ã€‚ var [foo = true] = []; foo // true [x, y = &#39;b&#39;] = [&#39;a&#39;]; // x=&#39;a&#39;, y=&#39;b&#39; [x, y = &#39;b&#39;] = [&#39;a&#39;, undefined]; // x=&#39;a&#39;, y=&#39;b&#39; æ³¨æ„ï¼ŒES6å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ===ï¼‰ï¼Œåˆ¤æ–­ä¸€ä¸ªä½ç½®æ˜¯å¦æœ‰å€¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœä¸€ä¸ªæ•°ç»„æˆå‘˜ä¸ä¸¥æ ¼ç­‰äºundefinedï¼Œé»˜è®¤å€¼æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚ var [x = 1] = [undefined]; x // 1 var [x = 1] = [null]; x // null ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœä¸€ä¸ªæ•°ç»„æˆå‘˜æ˜¯nullï¼Œé»˜è®¤å€¼å°±ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸ºnullä¸ä¸¥æ ¼ç­‰äºundefinedã€‚ å¦‚æœé»˜è®¤å€¼æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œå³åªæœ‰åœ¨ç”¨åˆ°çš„æ—¶å€™ï¼Œæ‰ä¼šæ±‚å€¼ã€‚ function f() { console.log(&#39;aaa&#39;); } let [x = f()] = [1]; ä¸Šé¢ä»£ç ä¸­ï¼Œå› ä¸ºxèƒ½å–åˆ°å€¼ï¼Œæ‰€ä»¥å‡½æ•°fæ ¹æœ¬ä¸ä¼šæ‰§è¡Œã€‚ä¸Šé¢çš„ä»£ç å…¶å®ç­‰ä»·äºä¸‹é¢çš„ä»£ç ã€‚ let x; if ([1][0] === undefined) { x = f(); } else { x = [1][0]; } é»˜è®¤å€¼å¯ä»¥å¼•ç”¨è§£æ„èµ‹å€¼çš„å…¶ä»–å˜é‡ï¼Œä½†è¯¥å˜é‡å¿…é¡»å·²ç»å£°æ˜ã€‚ let [x = 1, y = x] = []; // x=1; y=1 let [x = 1, y = x] = [2]; // x=2; y=2 let [x = 1, y = x] = [1, 2]; // x=1; y=2 let [x = y, y = 1] = []; // ReferenceError ä¸Šé¢æœ€åä¸€ä¸ªè¡¨è¾¾å¼ä¹‹æ‰€ä»¥ä¼šæŠ¥é”™ï¼Œæ˜¯å› ä¸ºxç”¨åˆ°é»˜è®¤å€¼yæ—¶ï¼Œyè¿˜æ²¡æœ‰å£°æ˜ã€‚ å¯¹è±¡çš„è§£æ„èµ‹å€¼è§£æ„ä¸ä»…å¯ä»¥ç”¨äºæ•°ç»„ï¼Œè¿˜å¯ä»¥ç”¨äºå¯¹è±¡ã€‚ var { foo, bar } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; }; foo // &quot;aaa&quot; bar // &quot;bbb&quot; å¯¹è±¡çš„è§£æ„ä¸æ•°ç»„æœ‰ä¸€ä¸ªé‡è¦çš„ä¸åŒã€‚æ•°ç»„çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œå˜é‡çš„å–å€¼ç”±å®ƒçš„ä½ç½®å†³å®šï¼›è€Œå¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼ã€‚ var { bar, foo } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; }; foo // &quot;aaa&quot; bar // &quot;bbb&quot; var { baz } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; }; baz // undefined ä¸Šé¢ä»£ç çš„ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œç­‰å·å·¦è¾¹çš„ä¸¤ä¸ªå˜é‡çš„æ¬¡åºï¼Œä¸ç­‰å·å³è¾¹ä¸¤ä¸ªåŒåå±æ€§çš„æ¬¡åºä¸ä¸€è‡´ï¼Œä½†æ˜¯å¯¹å–å€¼å®Œå…¨æ²¡æœ‰å½±å“ã€‚ç¬¬äºŒä¸ªä¾‹å­çš„å˜é‡æ²¡æœ‰å¯¹åº”çš„åŒåå±æ€§ï¼Œå¯¼è‡´å–ä¸åˆ°å€¼ï¼Œæœ€åç­‰äºundefinedã€‚ å¦‚æœå˜é‡åä¸å±æ€§åä¸ä¸€è‡´ï¼Œå¿…é¡»å†™æˆä¸‹é¢è¿™æ ·ã€‚ var { foo: baz } = { foo: &#39;aaa&#39;, bar: &#39;bbb&#39; }; baz // &quot;aaa&quot; let obj = { first: &#39;hello&#39;, last: &#39;world&#39; }; let { first: f, last: l } = obj; f // &#39;hello&#39; l // &#39;world&#39; è¿™å®é™…ä¸Šè¯´æ˜ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼æ˜¯ä¸‹é¢å½¢å¼çš„ç®€å†™ï¼ˆå‚è§ã€Šå¯¹è±¡çš„æ‰©å±•ã€‹ä¸€ç« ï¼‰ã€‚ var { foo: foo, bar: bar } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; }; ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼çš„å†…éƒ¨æœºåˆ¶ï¼Œæ˜¯å…ˆæ‰¾åˆ°åŒåå±æ€§ï¼Œç„¶åå†èµ‹ç»™å¯¹åº”çš„å˜é‡ã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯åè€…ï¼Œè€Œä¸æ˜¯å‰è€…ã€‚ var { foo: baz } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; }; baz // &quot;aaa&quot; foo // error: foo is not defined ä¸Šé¢ä»£ç ä¸­ï¼Œfooæ˜¯åŒ¹é…çš„æ¨¡å¼ï¼Œbazæ‰æ˜¯å˜é‡ã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯å˜é‡bazï¼Œè€Œä¸æ˜¯æ¨¡å¼fooã€‚ æ³¨æ„ï¼Œé‡‡ç”¨è¿™ç§å†™æ³•æ—¶ï¼Œå˜é‡çš„å£°æ˜å’Œèµ‹å€¼æ˜¯ä¸€ä½“çš„ã€‚å¯¹äºletå’Œconstæ¥è¯´ï¼Œå˜é‡ä¸èƒ½é‡æ–°å£°æ˜ï¼Œæ‰€ä»¥ä¸€æ—¦èµ‹å€¼çš„å˜é‡ä»¥å‰å£°æ˜è¿‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚ let foo; let {foo} = {foo: 1}; // SyntaxError: Duplicate declaration &quot;foo&quot; let baz; let {bar: baz} = {bar: 1}; // SyntaxError: Duplicate declaration &quot;baz&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œè§£æ„èµ‹å€¼çš„å˜é‡éƒ½ä¼šé‡æ–°å£°æ˜ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚ä¸è¿‡ï¼Œå› ä¸ºvarå‘½ä»¤å…è®¸é‡æ–°å£°æ˜ï¼Œæ‰€ä»¥è¿™ä¸ªé”™è¯¯åªä¼šåœ¨ä½¿ç”¨letå’Œconstå‘½ä»¤æ—¶å‡ºç°ã€‚å¦‚æœæ²¡æœ‰ç¬¬äºŒä¸ªletå‘½ä»¤ï¼Œä¸Šé¢çš„ä»£ç å°±ä¸ä¼šæŠ¥é”™ã€‚ let foo; ({foo} = {foo: 1}); // æˆåŠŸ let baz; ({bar: baz} = {bar: 1}); // æˆåŠŸ ä¸Šé¢ä»£ç ä¸­ï¼Œletå‘½ä»¤ä¸‹é¢ä¸€è¡Œçš„åœ†æ‹¬å·æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚å› ä¸ºè§£æå™¨ä¼šå°†èµ·é¦–çš„å¤§æ‹¬å·ï¼Œç†è§£æˆä¸€ä¸ªä»£ç å—ï¼Œè€Œä¸æ˜¯èµ‹å€¼è¯­å¥ã€‚ å’Œæ•°ç»„ä¸€æ ·ï¼Œè§£æ„ä¹Ÿå¯ä»¥ç”¨äºåµŒå¥—ç»“æ„çš„å¯¹è±¡ã€‚ var obj = { p: [ &#39;Hello&#39;, { y: &#39;World&#39; } ] }; var { p: [x, { y }] } = obj; x // &quot;Hello&quot; y // &quot;World&quot; æ³¨æ„ï¼Œè¿™æ—¶pæ˜¯æ¨¡å¼ï¼Œä¸æ˜¯å˜é‡ï¼Œå› æ­¤ä¸ä¼šè¢«èµ‹å€¼ã€‚ var node = { loc: { start: { line: 1, column: 5 } } }; var { loc: { start: { line }} } = node; line // 1 loc // error: loc is undefined start // error: start is undefined ä¸Šé¢ä»£ç ä¸­ï¼Œåªæœ‰lineæ˜¯å˜é‡ï¼Œlocå’Œstartéƒ½æ˜¯æ¨¡å¼ï¼Œä¸ä¼šè¢«èµ‹å€¼ã€‚ ä¸‹é¢æ˜¯åµŒå¥—èµ‹å€¼çš„ä¾‹å­ã€‚ let obj = {}; let arr = []; ({ foo: obj.prop, bar: arr[0] } = { foo: 123, bar: true }); obj // {prop:123} arr // [true] å¯¹è±¡çš„è§£æ„ä¹Ÿå¯ä»¥æŒ‡å®šé»˜è®¤å€¼ã€‚ var {x = 3} = {}; x // 3 var {x, y = 5} = {x: 1}; x // 1 y // 5 var {x:y = 3} = {}; y // 3 var {x:y = 3} = {x: 5}; y // 5 var { message: msg = &#39;Something went wrong&#39; } = {}; msg // &quot;Something went wrong&quot; é»˜è®¤å€¼ç”Ÿæ•ˆçš„æ¡ä»¶æ˜¯ï¼Œå¯¹è±¡çš„å±æ€§å€¼ä¸¥æ ¼ç­‰äºundefinedã€‚ var {x = 3} = {x: undefined}; x // 3 var {x = 3} = {x: null}; x // null ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœxå±æ€§ç­‰äºnullï¼Œå°±ä¸ä¸¥æ ¼ç›¸ç­‰äºundefinedï¼Œå¯¼è‡´é»˜è®¤å€¼ä¸ä¼šç”Ÿæ•ˆã€‚ å¦‚æœè§£æ„å¤±è´¥ï¼Œå˜é‡çš„å€¼ç­‰äºundefinedã€‚ var {foo} = {bar: &#39;baz&#39;}; foo // undefined å¦‚æœè§£æ„æ¨¡å¼æ˜¯åµŒå¥—çš„å¯¹è±¡ï¼Œè€Œä¸”å­å¯¹è±¡æ‰€åœ¨çš„çˆ¶å±æ€§ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ã€‚ // æŠ¥é”™ var {foo: {bar}} = {baz: &#39;baz&#39;}; ä¸Šé¢ä»£ç ä¸­ï¼Œç­‰å·å·¦è¾¹å¯¹è±¡çš„fooå±æ€§ï¼Œå¯¹åº”ä¸€ä¸ªå­å¯¹è±¡ã€‚è¯¥å­å¯¹è±¡çš„barå±æ€§ï¼Œè§£æ„æ—¶ä¼šæŠ¥é”™ã€‚åŸå› å¾ˆç®€å•ï¼Œå› ä¸ºfooè¿™æ—¶ç­‰äºundefinedï¼Œå†å–å­å±æ€§å°±ä¼šæŠ¥é”™ï¼Œè¯·çœ‹ä¸‹é¢çš„ä»£ç ã€‚ var _tmp = {baz: &#39;baz&#39;}; _tmp.foo.bar // æŠ¥é”™ å¦‚æœè¦å°†ä¸€ä¸ªå·²ç»å£°æ˜çš„å˜é‡ç”¨äºè§£æ„èµ‹å€¼ï¼Œå¿…é¡»éå¸¸å°å¿ƒã€‚ // é”™è¯¯çš„å†™æ³• var x; {x} = {x: 1}; // SyntaxError: syntax error ä¸Šé¢ä»£ç çš„å†™æ³•ä¼šæŠ¥é”™ï¼Œå› ä¸ºJavaScriptå¼•æ“ä¼šå°†{x}ç†è§£æˆä¸€ä¸ªä»£ç å—ï¼Œä»è€Œå‘ç”Ÿè¯­æ³•é”™è¯¯ã€‚åªæœ‰ä¸å°†å¤§æ‹¬å·å†™åœ¨è¡Œé¦–ï¼Œé¿å…JavaScriptå°†å…¶è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ // æ­£ç¡®çš„å†™æ³• ({x} = {x: 1}); ä¸Šé¢ä»£ç å°†æ•´ä¸ªè§£æ„èµ‹å€¼è¯­å¥ï¼Œæ”¾åœ¨ä¸€ä¸ªåœ†æ‹¬å·é‡Œé¢ï¼Œå°±å¯ä»¥æ­£ç¡®æ‰§è¡Œã€‚å…³äºåœ†æ‹¬å·ä¸è§£æ„èµ‹å€¼çš„å…³ç³»ï¼Œå‚è§ä¸‹æ–‡ã€‚ è§£æ„èµ‹å€¼å…è®¸ï¼Œç­‰å·å·¦è¾¹çš„æ¨¡å¼ä¹‹ä¸­ï¼Œä¸æ”¾ç½®ä»»ä½•å˜é‡åã€‚å› æ­¤ï¼Œå¯ä»¥å†™å‡ºéå¸¸å¤æ€ªçš„èµ‹å€¼è¡¨è¾¾å¼ã€‚ ({} = [true, false]); ({} = &#39;abc&#39;); ({} = []); ä¸Šé¢çš„è¡¨è¾¾å¼è™½ç„¶æ¯«æ— æ„ä¹‰ï¼Œä½†æ˜¯è¯­æ³•æ˜¯åˆæ³•çš„ï¼Œå¯ä»¥æ‰§è¡Œã€‚ å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†ç°æœ‰å¯¹è±¡çš„æ–¹æ³•ï¼Œèµ‹å€¼åˆ°æŸä¸ªå˜é‡ã€‚ let { log, sin, cos } = Math; ä¸Šé¢ä»£ç å°†Mathå¯¹è±¡çš„å¯¹æ•°ã€æ­£å¼¦ã€ä½™å¼¦ä¸‰ä¸ªæ–¹æ³•ï¼Œèµ‹å€¼åˆ°å¯¹åº”çš„å˜é‡ä¸Šï¼Œä½¿ç”¨èµ·æ¥å°±ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚ ç”±äºæ•°ç»„æœ¬è´¨æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡å±æ€§çš„è§£æ„ã€‚ var arr = [1, 2, 3]; var {0 : first, [arr.length - 1] : last} = arr; first // 1 last // 3 ä¸Šé¢ä»£ç å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡è§£æ„ã€‚æ•°ç»„arrçš„0é”®å¯¹åº”çš„å€¼æ˜¯1ï¼Œ[arr.length - 1]å°±æ˜¯2é”®ï¼Œå¯¹åº”çš„å€¼æ˜¯3ã€‚æ–¹æ‹¬å·è¿™ç§å†™æ³•ï¼Œå±äºâ€œå±æ€§åè¡¨è¾¾å¼â€ï¼Œå‚è§ã€Šå¯¹è±¡çš„æ‰©å±•ã€‹ä¸€ç« ã€‚ å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥è§£æ„èµ‹å€¼ã€‚è¿™æ˜¯å› ä¸ºæ­¤æ—¶ï¼Œå­—ç¬¦ä¸²è¢«è½¬æ¢æˆäº†ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚ const [a, b, c, d, e] = &#39;hello&#39;; a // &quot;h&quot; b // &quot;e&quot; c // &quot;l&quot; d // &quot;l&quot; e // &quot;o&quot; ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªlengthå±æ€§ï¼Œå› æ­¤è¿˜å¯ä»¥å¯¹è¿™ä¸ªå±æ€§è§£æ„èµ‹å€¼ã€‚ let {length : len} = &#39;hello&#39;; len // 5 æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼è§£æ„èµ‹å€¼æ—¶ï¼Œå¦‚æœç­‰å·å³è¾¹æ˜¯æ•°å€¼å’Œå¸ƒå°”å€¼ï¼Œåˆ™ä¼šå…ˆè½¬ä¸ºå¯¹è±¡ã€‚ let {toString: s} = 123; s === Number.prototype.toString // true let {toString: s} = true; s === Boolean.prototype.toString // true ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°å€¼å’Œå¸ƒå°”å€¼çš„åŒ…è£…å¯¹è±¡éƒ½æœ‰toStringå±æ€§ï¼Œå› æ­¤å˜é‡séƒ½èƒ½å–åˆ°å€¼ã€‚ è§£æ„èµ‹å€¼çš„è§„åˆ™æ˜¯ï¼Œåªè¦ç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡ï¼Œå°±å…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡ã€‚ç”±äºundefinedå’Œnullæ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹å®ƒä»¬è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œéƒ½ä¼šæŠ¥é”™ã€‚ let { prop: x } = undefined; // TypeError let { prop: y } = null; // TypeError å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼å‡½æ•°çš„å‚æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼ã€‚ function add([x, y]){ return x + y; } add([1, 2]); // 3 ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°addçš„å‚æ•°è¡¨é¢ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†åœ¨ä¼ å…¥å‚æ•°çš„é‚£ä¸€åˆ»ï¼Œæ•°ç»„å‚æ•°å°±è¢«è§£æ„æˆå˜é‡xå’Œyã€‚å¯¹äºå‡½æ•°å†…éƒ¨çš„ä»£ç æ¥è¯´ï¼Œå®ƒä»¬èƒ½æ„Ÿå—åˆ°çš„å‚æ•°å°±æ˜¯xå’Œyã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ [[1, 2], [3, 4]].map(([a, b]) =&gt; a + b); // [ 3, 7 ] å‡½æ•°å‚æ•°çš„è§£æ„ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ã€‚ function move({x = 0, y = 0} = {}) { return [x, y]; } move({x: 3, y: 8}); // [3, 8] move({x: 3}); // [3, 0] move({}); // [0, 0] move(); // [0, 0] ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°moveçš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œè§£æ„ï¼Œå¾—åˆ°å˜é‡xå’Œyçš„å€¼ã€‚å¦‚æœè§£æ„å¤±è´¥ï¼Œxå’Œyç­‰äºé»˜è®¤å€¼ã€‚ æ³¨æ„ï¼Œä¸‹é¢çš„å†™æ³•ä¼šå¾—åˆ°ä¸ä¸€æ ·çš„ç»“æœã€‚ function move({x, y} = { x: 0, y: 0 }) { return [x, y]; } move({x: 3, y: 8}); // [3, 8] move({x: 3}); // [3, undefined] move({}); // [undefined, undefined] move(); // [0, 0] ä¸Šé¢ä»£ç æ˜¯ä¸ºå‡½æ•°moveçš„å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯ä¸ºå˜é‡xå’ŒyæŒ‡å®šé»˜è®¤å€¼ï¼Œæ‰€ä»¥ä¼šå¾—åˆ°ä¸å‰ä¸€ç§å†™æ³•ä¸åŒçš„ç»“æœã€‚ undefinedå°±ä¼šè§¦å‘å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ã€‚ [1, undefined, 3].map((x = &#39;yes&#39;) =&gt; x); // [ 1, &#39;yes&#39;, 3 ] åœ†æ‹¬å·é—®é¢˜è§£æ„èµ‹å€¼è™½ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯è§£æèµ·æ¥å¹¶ä¸å®¹æ˜“ã€‚å¯¹äºç¼–è¯‘å™¨æ¥è¯´ï¼Œä¸€ä¸ªå¼å­åˆ°åº•æ˜¯æ¨¡å¼ï¼Œè¿˜æ˜¯è¡¨è¾¾å¼ï¼Œæ²¡æœ‰åŠæ³•ä»ä¸€å¼€å§‹å°±çŸ¥é“ï¼Œå¿…é¡»è§£æåˆ°ï¼ˆæˆ–è§£æä¸åˆ°ï¼‰ç­‰å·æ‰èƒ½çŸ¥é“ã€‚ ç”±æ­¤å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæ¨¡å¼ä¸­å‡ºç°åœ†æ‹¬å·æ€ä¹ˆå¤„ç†ã€‚ES6çš„è§„åˆ™æ˜¯ï¼Œåªè¦æœ‰å¯èƒ½å¯¼è‡´è§£æ„çš„æ­§ä¹‰ï¼Œå°±ä¸å¾—ä½¿ç”¨åœ†æ‹¬å·ã€‚ ä½†æ˜¯ï¼Œè¿™æ¡è§„åˆ™å®é™…ä¸Šä¸é‚£ä¹ˆå®¹æ˜“è¾¨åˆ«ï¼Œå¤„ç†èµ·æ¥ç›¸å½“éº»çƒ¦ã€‚å› æ­¤ï¼Œå»ºè®®åªè¦æœ‰å¯èƒ½ï¼Œå°±ä¸è¦åœ¨æ¨¡å¼ä¸­æ”¾ç½®åœ†æ‹¬å·ã€‚ ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µä»¥ä¸‹ä¸‰ç§è§£æ„èµ‹å€¼ä¸å¾—ä½¿ç”¨åœ†æ‹¬å·ã€‚ ï¼ˆ1ï¼‰å˜é‡å£°æ˜è¯­å¥ä¸­ï¼Œä¸èƒ½å¸¦æœ‰åœ†æ‹¬å·ã€‚ // å…¨éƒ¨æŠ¥é”™ var [(a)] = [1]; var {x: (c)} = {}; var ({x: c}) = {}; var {(x: c)} = {}; var {(x): c} = {}; var { o: ({ p: p }) } = { o: { p: 2 } }; ä¸Šé¢ä¸‰ä¸ªè¯­å¥éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯å˜é‡å£°æ˜è¯­å¥ï¼Œæ¨¡å¼ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·ã€‚ ï¼ˆ2ï¼‰å‡½æ•°å‚æ•°ä¸­ï¼Œæ¨¡å¼ä¸èƒ½å¸¦æœ‰åœ†æ‹¬å·ã€‚ å‡½æ•°å‚æ•°ä¹Ÿå±äºå˜é‡å£°æ˜ï¼Œå› æ­¤ä¸èƒ½å¸¦æœ‰åœ†æ‹¬å·ã€‚ // æŠ¥é”™ function f([(z)]) { return z; } ï¼ˆ3ï¼‰èµ‹å€¼è¯­å¥ä¸­ï¼Œä¸èƒ½å°†æ•´ä¸ªæ¨¡å¼ï¼Œæˆ–åµŒå¥—æ¨¡å¼ä¸­çš„ä¸€å±‚ï¼Œæ”¾åœ¨åœ†æ‹¬å·ä¹‹ä¸­ã€‚ // å…¨éƒ¨æŠ¥é”™ ({ p: a }) = { p: 42 }; ([a]) = [5]; ä¸Šé¢ä»£ç å°†æ•´ä¸ªæ¨¡å¼æ”¾åœ¨åœ†æ‹¬å·ä¹‹ä¸­ï¼Œå¯¼è‡´æŠ¥é”™ã€‚ // æŠ¥é”™ [({ p: a }), { x: c }] = [{}, {}]; ä¸Šé¢ä»£ç å°†åµŒå¥—æ¨¡å¼çš„ä¸€å±‚ï¼Œæ”¾åœ¨åœ†æ‹¬å·ä¹‹ä¸­ï¼Œå¯¼è‡´æŠ¥é”™ã€‚ å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µå¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µåªæœ‰ä¸€ç§ï¼šèµ‹å€¼è¯­å¥çš„éæ¨¡å¼éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨åœ†æ‹¬å·ã€‚ [(b)] = [3]; // æ­£ç¡® ({ p: (d) } = {}); // æ­£ç¡® [(parseInt.prop)] = [3]; // æ­£ç¡® ä¸Šé¢ä¸‰è¡Œè¯­å¥éƒ½å¯ä»¥æ­£ç¡®æ‰§è¡Œï¼Œå› ä¸ºé¦–å…ˆå®ƒä»¬éƒ½æ˜¯èµ‹å€¼è¯­å¥ï¼Œè€Œä¸æ˜¯å£°æ˜è¯­å¥ï¼›å…¶æ¬¡å®ƒä»¬çš„åœ†æ‹¬å·éƒ½ä¸å±äºæ¨¡å¼çš„ä¸€éƒ¨åˆ†ã€‚ç¬¬ä¸€è¡Œè¯­å¥ä¸­ï¼Œæ¨¡å¼æ˜¯å–æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ï¼Œè·Ÿåœ†æ‹¬å·æ— å…³ï¼›ç¬¬äºŒè¡Œè¯­å¥ä¸­ï¼Œæ¨¡å¼æ˜¯pï¼Œè€Œä¸æ˜¯dï¼›ç¬¬ä¸‰è¡Œè¯­å¥ä¸ç¬¬ä¸€è¡Œè¯­å¥çš„æ€§è´¨ä¸€è‡´ã€‚ ç”¨é€”å˜é‡çš„è§£æ„èµ‹å€¼ç”¨é€”å¾ˆå¤šã€‚ ï¼ˆ1ï¼‰äº¤æ¢å˜é‡çš„å€¼ [x, y] = [y, x]; ä¸Šé¢ä»£ç äº¤æ¢å˜é‡xå’Œyçš„å€¼ï¼Œè¿™æ ·çš„å†™æ³•ä¸ä»…ç®€æ´ï¼Œè€Œä¸”æ˜“è¯»ï¼Œè¯­ä¹‰éå¸¸æ¸…æ™°ã€‚ ï¼ˆ2ï¼‰ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼ å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚æœè¦è¿”å›å¤šä¸ªå€¼ï¼Œåªèƒ½å°†å®ƒä»¬æ”¾åœ¨æ•°ç»„æˆ–å¯¹è±¡é‡Œè¿”å›ã€‚æœ‰äº†è§£æ„èµ‹å€¼ï¼Œå–å‡ºè¿™äº›å€¼å°±éå¸¸æ–¹ä¾¿ã€‚ // è¿”å›ä¸€ä¸ªæ•°ç»„ function example() { return [1, 2, 3]; } var [a, b, c] = example(); // è¿”å›ä¸€ä¸ªå¯¹è±¡ function example() { return { foo: 1, bar: 2 }; } var { foo, bar } = example(); ï¼ˆ3ï¼‰å‡½æ•°å‚æ•°çš„å®šä¹‰ è§£æ„èµ‹å€¼å¯ä»¥æ–¹ä¾¿åœ°å°†ä¸€ç»„å‚æ•°ä¸å˜é‡åå¯¹åº”èµ·æ¥ã€‚ // å‚æ•°æ˜¯ä¸€ç»„æœ‰æ¬¡åºçš„å€¼ function f([x, y, z]) { ... } f([1, 2, 3]); // å‚æ•°æ˜¯ä¸€ç»„æ— æ¬¡åºçš„å€¼ function f({x, y, z}) { ... } f({z: 3, y: 2, x: 1}); ï¼ˆ4ï¼‰æå–JSONæ•°æ® è§£æ„èµ‹å€¼å¯¹æå–JSONå¯¹è±¡ä¸­çš„æ•°æ®ï¼Œå°¤å…¶æœ‰ç”¨ã€‚ var jsonData = { id: 42, status: &quot;OK&quot;, data: [867, 5309] }; let { id, status, data: number } = jsonData; console.log(id, status, number); // 42, &quot;OK&quot;, [867, 5309] ä¸Šé¢ä»£ç å¯ä»¥å¿«é€Ÿæå–JSONæ•°æ®çš„å€¼ã€‚ ï¼ˆ5ï¼‰å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ jQuery.ajax = function (url, { async = true, beforeSend = function () {}, cache = true, complete = function () {}, crossDomain = false, global = true, // ... more config }) { // ... do stuff }; æŒ‡å®šå‚æ•°çš„é»˜è®¤å€¼ï¼Œå°±é¿å…äº†åœ¨å‡½æ•°ä½“å†…éƒ¨å†å†™var foo = config.foo || &#39;default foo&#39;;è¿™æ ·çš„è¯­å¥ã€‚ ï¼ˆ6ï¼‰éå†Mapç»“æ„ ä»»ä½•éƒ¨ç½²äº†Iteratoræ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨for...ofå¾ªç¯éå†ã€‚Mapç»“æ„åŸç”Ÿæ”¯æŒIteratoræ¥å£ï¼Œé…åˆå˜é‡çš„è§£æ„èµ‹å€¼ï¼Œè·å–é”®åå’Œé”®å€¼å°±éå¸¸æ–¹ä¾¿ã€‚ var map = new Map(); map.set(&#39;first&#39;, &#39;hello&#39;); map.set(&#39;second&#39;, &#39;world&#39;); for (let [key, value] of map) { console.log(key + &quot; is &quot; + value); } // first is hello // second is world å¦‚æœåªæƒ³è·å–é”®åï¼Œæˆ–è€…åªæƒ³è·å–é”®å€¼ï¼Œå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ã€‚ // è·å–é”®å for (let [key] of map) { // ... } // è·å–é”®å€¼ for (let [,value] of map) { // ... } ï¼ˆ7ï¼‰è¾“å…¥æ¨¡å—çš„æŒ‡å®šæ–¹æ³• åŠ è½½æ¨¡å—æ—¶ï¼Œå¾€å¾€éœ€è¦æŒ‡å®šè¾“å…¥é‚£äº›æ–¹æ³•ã€‚è§£æ„èµ‹å€¼ä½¿å¾—è¾“å…¥è¯­å¥éå¸¸æ¸…æ™°ã€‚ const { SourceMapConsumer, SourceNode } = require(&quot;source-map&quot;); æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"Destructuring","slug":"Destructuring","permalink":"https://microzz.com/tags/Destructuring/"}]},{"title":"letå’Œconstå‘½ä»¤","date":"2016-11-12T07:16:19.000Z","path":"2016/11/12/let/","text":"letå’Œconstå‘½ä»¤letå‘½ä»¤åŸºæœ¬ç”¨æ³•ES6æ–°å¢äº†letå‘½ä»¤ï¼Œç”¨æ¥å£°æ˜å˜é‡ã€‚å®ƒçš„ç”¨æ³•ç±»ä¼¼äºvarï¼Œä½†æ˜¯æ‰€å£°æ˜çš„å˜é‡ï¼Œåªåœ¨letå‘½ä»¤æ‰€åœ¨çš„ä»£ç å—å†…æœ‰æ•ˆã€‚ { let a = 10; var b = 1; } a // ReferenceError: a is not defined. b // 1 ä¸Šé¢ä»£ç åœ¨ä»£ç å—ä¹‹ä¸­ï¼Œåˆ†åˆ«ç”¨letå’Œvarå£°æ˜äº†ä¸¤ä¸ªå˜é‡ã€‚ç„¶ååœ¨ä»£ç å—ä¹‹å¤–è°ƒç”¨è¿™ä¸¤ä¸ªå˜é‡ï¼Œç»“æœletå£°æ˜çš„å˜é‡æŠ¥é”™ï¼Œvarå£°æ˜çš„å˜é‡è¿”å›äº†æ­£ç¡®çš„å€¼ã€‚è¿™è¡¨æ˜ï¼Œletå£°æ˜çš„å˜é‡åªåœ¨å®ƒæ‰€åœ¨çš„ä»£ç å—æœ‰æ•ˆã€‚ forå¾ªç¯çš„è®¡æ•°å™¨ï¼Œå°±å¾ˆåˆé€‚ä½¿ç”¨letå‘½ä»¤ã€‚ for (let i = 0; i &lt; 10; i++) {} console.log(i); //ReferenceError: i is not defined ä¸Šé¢ä»£ç ä¸­ï¼Œè®¡æ•°å™¨iåªåœ¨forå¾ªç¯ä½“å†…æœ‰æ•ˆï¼Œåœ¨å¾ªç¯ä½“å¤–å¼•ç”¨å°±ä¼šæŠ¥é”™ã€‚ ä¸‹é¢çš„ä»£ç å¦‚æœä½¿ç”¨varï¼Œæœ€åè¾“å‡ºçš„æ˜¯10ã€‚ var a = []; for (var i = 0; i &lt; 10; i++) { a[i] = function () { console.log(i); }; } a[6](); // 10 ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡iæ˜¯varå£°æ˜çš„ï¼Œåœ¨å…¨å±€èŒƒå›´å†…éƒ½æœ‰æ•ˆã€‚æ‰€ä»¥æ¯ä¸€æ¬¡å¾ªç¯ï¼Œæ–°çš„iå€¼éƒ½ä¼šè¦†ç›–æ—§å€¼ï¼Œå¯¼è‡´æœ€åè¾“å‡ºçš„æ˜¯æœ€åä¸€è½®çš„içš„å€¼ã€‚ å¦‚æœä½¿ç”¨letï¼Œå£°æ˜çš„å˜é‡ä»…åœ¨å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œæœ€åè¾“å‡ºçš„æ˜¯6ã€‚ var a = []; for (let i = 0; i &lt; 10; i++) { a[i] = function () { console.log(i); }; } a[6](); // 6 ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡iæ˜¯letå£°æ˜çš„ï¼Œå½“å‰çš„iåªåœ¨æœ¬è½®å¾ªç¯æœ‰æ•ˆï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡å¾ªç¯çš„iå…¶å®éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œæ‰€ä»¥æœ€åè¾“å‡ºçš„æ˜¯6ã€‚ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœæ¯ä¸€è½®å¾ªç¯çš„å˜é‡iéƒ½æ˜¯é‡æ–°å£°æ˜çš„ï¼Œé‚£å®ƒæ€ä¹ˆçŸ¥é“ä¸Šä¸€è½®å¾ªç¯çš„å€¼ï¼Œä»è€Œè®¡ç®—å‡ºæœ¬è½®å¾ªç¯çš„å€¼ï¼Ÿè¿™æ˜¯å› ä¸º JavaScript å¼•æ“å†…éƒ¨ä¼šè®°ä½ä¸Šä¸€è½®å¾ªç¯çš„å€¼ï¼Œåˆå§‹åŒ–æœ¬è½®çš„å˜é‡iæ—¶ï¼Œå°±åœ¨ä¸Šä¸€è½®å¾ªç¯çš„åŸºç¡€ä¸Šè¿›è¡Œè®¡ç®—ã€‚ ä¸å­˜åœ¨å˜é‡æå‡letä¸åƒvaré‚£æ ·ä¼šå‘ç”Ÿâ€œå˜é‡æå‡â€ç°è±¡ã€‚æ‰€ä»¥ï¼Œå˜é‡ä¸€å®šè¦åœ¨å£°æ˜åä½¿ç”¨ï¼Œå¦åˆ™æŠ¥é”™ã€‚ // var çš„æƒ…å†µ console.log(foo); // è¾“å‡ºundefined var foo = 2; // let çš„æƒ…å†µ console.log(bar); // æŠ¥é”™ReferenceError let bar = 2; ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡fooç”¨varå‘½ä»¤å£°æ˜ï¼Œä¼šå‘ç”Ÿå˜é‡æå‡ï¼Œå³è„šæœ¬å¼€å§‹è¿è¡Œæ—¶ï¼Œå˜é‡fooå·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯æ²¡æœ‰å€¼ï¼Œæ‰€ä»¥ä¼šè¾“å‡ºundefinedã€‚å˜é‡barç”¨letå‘½ä»¤å£°æ˜ï¼Œä¸ä¼šå‘ç”Ÿå˜é‡æå‡ã€‚è¿™è¡¨ç¤ºåœ¨å£°æ˜å®ƒä¹‹å‰ï¼Œå˜é‡baræ˜¯ä¸å­˜åœ¨çš„ï¼Œè¿™æ—¶å¦‚æœç”¨åˆ°å®ƒï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ æš‚æ—¶æ€§æ­»åŒºåªè¦å—çº§ä½œç”¨åŸŸå†…å­˜åœ¨letå‘½ä»¤ï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡å°±â€œç»‘å®šâ€ï¼ˆbindingï¼‰è¿™ä¸ªåŒºåŸŸï¼Œä¸å†å—å¤–éƒ¨çš„å½±å“ã€‚ var tmp = 123; if (true) { tmp = &#39;abc&#39;; // ReferenceError let tmp; } ä¸Šé¢ä»£ç ä¸­ï¼Œå­˜åœ¨å…¨å±€å˜é‡tmpï¼Œä½†æ˜¯å—çº§ä½œç”¨åŸŸå†…letåˆå£°æ˜äº†ä¸€ä¸ªå±€éƒ¨å˜é‡tmpï¼Œå¯¼è‡´åè€…ç»‘å®šè¿™ä¸ªå—çº§ä½œç”¨åŸŸï¼Œæ‰€ä»¥åœ¨letå£°æ˜å˜é‡å‰ï¼Œå¯¹tmpèµ‹å€¼ä¼šæŠ¥é”™ã€‚ ES6æ˜ç¡®è§„å®šï¼Œå¦‚æœåŒºå—ä¸­å­˜åœ¨letå’Œconstå‘½ä»¤ï¼Œè¿™ä¸ªåŒºå—å¯¹è¿™äº›å‘½ä»¤å£°æ˜çš„å˜é‡ï¼Œä»ä¸€å¼€å§‹å°±å½¢æˆäº†å°é—­ä½œç”¨åŸŸã€‚å‡¡æ˜¯åœ¨å£°æ˜ä¹‹å‰å°±ä½¿ç”¨è¿™äº›å˜é‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚ æ€»ä¹‹ï¼Œåœ¨ä»£ç å—å†…ï¼Œä½¿ç”¨letå‘½ä»¤å£°æ˜å˜é‡ä¹‹å‰ï¼Œè¯¥å˜é‡éƒ½æ˜¯ä¸å¯ç”¨çš„ã€‚è¿™åœ¨è¯­æ³•ä¸Šï¼Œç§°ä¸ºâ€œæš‚æ—¶æ€§æ­»åŒºâ€ï¼ˆtemporal dead zoneï¼Œç®€ç§° TDZï¼‰ã€‚ if (true) { // TDZå¼€å§‹ tmp = &#39;abc&#39;; // ReferenceError console.log(tmp); // ReferenceError let tmp; // TDZç»“æŸ console.log(tmp); // undefined tmp = 123; console.log(tmp); // 123 } ä¸Šé¢ä»£ç ä¸­ï¼Œåœ¨letå‘½ä»¤å£°æ˜å˜é‡tmpä¹‹å‰ï¼Œéƒ½å±äºå˜é‡tmpçš„â€œæ­»åŒºâ€ã€‚ â€œæš‚æ—¶æ€§æ­»åŒºâ€ä¹Ÿæ„å‘³ç€typeofä¸å†æ˜¯ä¸€ä¸ªç™¾åˆ†ä¹‹ç™¾å®‰å…¨çš„æ“ä½œã€‚ typeof x; // ReferenceError let x; ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡xä½¿ç”¨letå‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥åœ¨å£°æ˜ä¹‹å‰ï¼Œéƒ½å±äºxçš„â€œæ­»åŒºâ€ï¼Œåªè¦ç”¨åˆ°è¯¥å˜é‡å°±ä¼šæŠ¥é”™ã€‚å› æ­¤ï¼Œtypeofè¿è¡Œæ—¶å°±ä¼šæŠ›å‡ºä¸€ä¸ªReferenceErrorã€‚ ä½œä¸ºæ¯”è¾ƒï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ ¹æœ¬æ²¡æœ‰è¢«å£°æ˜ï¼Œä½¿ç”¨typeofåè€Œä¸ä¼šæŠ¥é”™ã€‚ typeof undeclared_variable // &quot;undefined&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œundeclared_variableæ˜¯ä¸€ä¸ªä¸å­˜åœ¨çš„å˜é‡åï¼Œç»“æœè¿”å›â€œundefinedâ€ã€‚æ‰€ä»¥ï¼Œåœ¨æ²¡æœ‰letä¹‹å‰ï¼Œtypeofè¿ç®—ç¬¦æ˜¯ç™¾åˆ†ä¹‹ç™¾å®‰å…¨çš„ï¼Œæ°¸è¿œä¸ä¼šæŠ¥é”™ã€‚ç°åœ¨è¿™ä¸€ç‚¹ä¸æˆç«‹äº†ã€‚è¿™æ ·çš„è®¾è®¡æ˜¯ä¸ºäº†è®©å¤§å®¶å…»æˆè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œå˜é‡ä¸€å®šè¦åœ¨å£°æ˜ä¹‹åä½¿ç”¨ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚ æœ‰äº›â€œæ­»åŒºâ€æ¯”è¾ƒéšè”½ï¼Œä¸å¤ªå®¹æ˜“å‘ç°ã€‚ function bar(x = y, y = 2) { return [x, y]; } bar(); // æŠ¥é”™ ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨barå‡½æ•°ä¹‹æ‰€ä»¥æŠ¥é”™ï¼ˆæŸäº›å®ç°å¯èƒ½ä¸æŠ¥é”™ï¼‰ï¼Œæ˜¯å› ä¸ºå‚æ•°xé»˜è®¤å€¼ç­‰äºå¦ä¸€ä¸ªå‚æ•°yï¼Œè€Œæ­¤æ—¶yè¿˜æ²¡æœ‰å£°æ˜ï¼Œå±äºâ€æ­»åŒºâ€œã€‚å¦‚æœyçš„é»˜è®¤å€¼æ˜¯xï¼Œå°±ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ­¤æ—¶xå·²ç»å£°æ˜äº†ã€‚ function bar(x = 2, y = x) { return [x, y]; } bar(); // [2, 2] ES6è§„å®šæš‚æ—¶æ€§æ­»åŒºå’Œletã€constè¯­å¥ä¸å‡ºç°å˜é‡æå‡ï¼Œä¸»è¦æ˜¯ä¸ºäº†å‡å°‘è¿è¡Œæ—¶é”™è¯¯ï¼Œé˜²æ­¢åœ¨å˜é‡å£°æ˜å‰å°±ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼Œä»è€Œå¯¼è‡´æ„æ–™ä¹‹å¤–çš„è¡Œä¸ºã€‚è¿™æ ·çš„é”™è¯¯åœ¨ES5æ˜¯å¾ˆå¸¸è§çš„ï¼Œç°åœ¨æœ‰äº†è¿™ç§è§„å®šï¼Œé¿å…æ­¤ç±»é”™è¯¯å°±å¾ˆå®¹æ˜“äº†ã€‚ æ€»ä¹‹ï¼Œæš‚æ—¶æ€§æ­»åŒºçš„æœ¬è´¨å°±æ˜¯ï¼Œåªè¦ä¸€è¿›å…¥å½“å‰ä½œç”¨åŸŸï¼Œæ‰€è¦ä½¿ç”¨çš„å˜é‡å°±å·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯ä¸å¯è·å–ï¼Œåªæœ‰ç­‰åˆ°å£°æ˜å˜é‡çš„é‚£ä¸€è¡Œä»£ç å‡ºç°ï¼Œæ‰å¯ä»¥è·å–å’Œä½¿ç”¨è¯¥å˜é‡ã€‚ ä¸å…è®¸é‡å¤å£°æ˜letä¸å…è®¸åœ¨ç›¸åŒä½œç”¨åŸŸå†…ï¼Œé‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ã€‚ // æŠ¥é”™ function () { let a = 10; var a = 1; } // æŠ¥é”™ function () { let a = 10; let a = 1; } å› æ­¤ï¼Œä¸èƒ½åœ¨å‡½æ•°å†…éƒ¨é‡æ–°å£°æ˜å‚æ•°ã€‚ function func(arg) { let arg; // æŠ¥é”™ } function func(arg) { { let arg; // ä¸æŠ¥é”™ } } å—çº§ä½œç”¨åŸŸä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼ŸES5åªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œè¿™å¸¦æ¥å¾ˆå¤šä¸åˆç†çš„åœºæ™¯ã€‚ ç¬¬ä¸€ç§åœºæ™¯ï¼Œå†…å±‚å˜é‡å¯èƒ½ä¼šè¦†ç›–å¤–å±‚å˜é‡ã€‚ var tmp = new Date(); function f() { console.log(tmp); if (false) { var tmp = &quot;hello world&quot;; } } f(); // undefined ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fæ‰§è¡Œåï¼Œè¾“å‡ºç»“æœä¸ºundefinedï¼ŒåŸå› åœ¨äºå˜é‡æå‡ï¼Œå¯¼è‡´å†…å±‚çš„tmpå˜é‡è¦†ç›–äº†å¤–å±‚çš„tmpå˜é‡ã€‚ ç¬¬äºŒç§åœºæ™¯ï¼Œç”¨æ¥è®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡ã€‚ var s = &#39;hello&#39;; for (var i = 0; i &lt; s.length; i++) { console.log(s[i]); } console.log(i); // 5 ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡iåªç”¨æ¥æ§åˆ¶å¾ªç¯ï¼Œä½†æ˜¯å¾ªç¯ç»“æŸåï¼Œå®ƒå¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œæ³„éœ²æˆäº†å…¨å±€å˜é‡ã€‚ ES6çš„å—çº§ä½œç”¨åŸŸletå®é™…ä¸Šä¸ºJavaScriptæ–°å¢äº†å—çº§ä½œç”¨åŸŸã€‚ function f1() { let n = 5; if (true) { let n = 10; } console.log(n); // 5 } ä¸Šé¢çš„å‡½æ•°æœ‰ä¸¤ä¸ªä»£ç å—ï¼Œéƒ½å£°æ˜äº†å˜é‡nï¼Œè¿è¡Œåè¾“å‡º5ã€‚è¿™è¡¨ç¤ºå¤–å±‚ä»£ç å—ä¸å—å†…å±‚ä»£ç å—çš„å½±å“ã€‚å¦‚æœä½¿ç”¨varå®šä¹‰å˜é‡nï¼Œæœ€åè¾“å‡ºçš„å€¼å°±æ˜¯10ã€‚ ES6å…è®¸å—çº§ä½œç”¨åŸŸçš„ä»»æ„åµŒå¥—ã€‚ {{{{{let insane = 'Hello World'}}}}}; ä¸Šé¢ä»£ç ä½¿ç”¨äº†ä¸€ä¸ªäº”å±‚çš„å—çº§ä½œç”¨åŸŸã€‚å¤–å±‚ä½œç”¨åŸŸæ— æ³•è¯»å–å†…å±‚ä½œç”¨åŸŸçš„å˜é‡ã€‚ {{{{ {let insane = 'Hello World'} console.log(insane); // æŠ¥é”™ }}}}; å†…å±‚ä½œç”¨åŸŸå¯ä»¥å®šä¹‰å¤–å±‚ä½œç”¨åŸŸçš„åŒåå˜é‡ã€‚ {{{{ let insane = 'Hello World'; {let insane = 'Hello World'} }}}}; å—çº§ä½œç”¨åŸŸçš„å‡ºç°ï¼Œå®é™…ä¸Šä½¿å¾—è·å¾—å¹¿æ³›åº”ç”¨çš„ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰ä¸å†å¿…è¦äº†ã€‚ // IIFE å†™æ³• (function () { var tmp = ...; ... }()); // å—çº§ä½œç”¨åŸŸå†™æ³• { let tmp = ...; ... } å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜å‡½æ•°èƒ½ä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜ï¼Œæ˜¯ä¸€ä¸ªç›¸å½“ä»¤äººæ··æ·†çš„é—®é¢˜ã€‚ ES5è§„å®šï¼Œå‡½æ•°åªèƒ½åœ¨é¡¶å±‚ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜ï¼Œä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸå£°æ˜ã€‚ // æƒ…å†µä¸€ if (true) { function f() {} } // æƒ…å†µäºŒ try { function f() {} } catch(e) { } ä¸Šé¢ä»£ç çš„ä¸¤ç§å‡½æ•°å£°æ˜ï¼Œæ ¹æ®ES5çš„è§„å®šéƒ½æ˜¯éæ³•çš„ã€‚ ä½†æ˜¯ï¼Œæµè§ˆå™¨æ²¡æœ‰éµå®ˆè¿™ä¸ªè§„å®šï¼Œä¸ºäº†å…¼å®¹ä»¥å‰çš„æ—§ä»£ç ï¼Œè¿˜æ˜¯æ”¯æŒåœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜å‡½æ•°ï¼Œå› æ­¤ä¸Šé¢ä¸¤ç§æƒ…å†µå®é™…éƒ½èƒ½è¿è¡Œï¼Œä¸ä¼šæŠ¥é”™ã€‚ä¸è¿‡ï¼Œâ€œä¸¥æ ¼æ¨¡å¼â€ä¸‹è¿˜æ˜¯ä¼šæŠ¥é”™ã€‚ // ES5ä¸¥æ ¼æ¨¡å¼ &#39;use strict&#39;; if (true) { function f() {} } // æŠ¥é”™ ES6 å¼•å…¥äº†å—çº§ä½œç”¨åŸŸï¼Œæ˜ç¡®å…è®¸åœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜å‡½æ•°ã€‚ // ES6ä¸¥æ ¼æ¨¡å¼ &#39;use strict&#39;; if (true) { function f() {} } // ä¸æŠ¥é”™ ES6 è§„å®šï¼Œå—çº§ä½œç”¨åŸŸä¹‹ä¸­ï¼Œå‡½æ•°å£°æ˜è¯­å¥çš„è¡Œä¸ºç±»ä¼¼äºletï¼Œåœ¨å—çº§ä½œç”¨åŸŸä¹‹å¤–ä¸å¯å¼•ç”¨ã€‚ function f() { console.log(&#39;I am outside!&#39;); } (function () { if (false) { // é‡å¤å£°æ˜ä¸€æ¬¡å‡½æ•°f function f() { console.log(&#39;I am inside!&#39;); } } f(); }()); ä¸Šé¢ä»£ç åœ¨ ES5 ä¸­è¿è¡Œï¼Œä¼šå¾—åˆ°â€œI am inside!â€ï¼Œå› ä¸ºåœ¨ifå†…å£°æ˜çš„å‡½æ•°fä¼šè¢«æå‡åˆ°å‡½æ•°å¤´éƒ¨ï¼Œå®é™…è¿è¡Œçš„ä»£ç å¦‚ä¸‹ã€‚ // ES5ç‰ˆæœ¬ function f() { console.log(&#39;I am outside!&#39;); } (function () { function f() { console.log(&#39;I am inside!&#39;); } if (false) { } f(); }()); ES6 çš„è¿è¡Œç»“æœå°±å®Œå…¨ä¸ä¸€æ ·äº†ï¼Œä¼šå¾—åˆ°â€œI am outside!â€ã€‚å› ä¸ºå—çº§ä½œç”¨åŸŸå†…å£°æ˜çš„å‡½æ•°ç±»ä¼¼äºletï¼Œå¯¹ä½œç”¨åŸŸä¹‹å¤–æ²¡æœ‰å½±å“ï¼Œå®é™…è¿è¡Œçš„ä»£ç å¦‚ä¸‹ã€‚ // ES6ç‰ˆæœ¬ function f() { console.log(&#39;I am outside!&#39;); } (function () { f(); }()); å¾ˆæ˜¾ç„¶ï¼Œè¿™ç§è¡Œä¸ºå·®å¼‚ä¼šå¯¹è€ä»£ç äº§ç”Ÿå¾ˆå¤§å½±å“ã€‚ä¸ºäº†å‡è½»å› æ­¤äº§ç”Ÿçš„ä¸å…¼å®¹é—®é¢˜ï¼ŒES6åœ¨é™„å½•Bé‡Œé¢è§„å®šï¼Œæµè§ˆå™¨çš„å®ç°å¯ä»¥ä¸éµå®ˆä¸Šé¢çš„è§„å®šï¼Œæœ‰è‡ªå·±çš„è¡Œä¸ºæ–¹å¼ã€‚ å…è®¸åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•°ã€‚ å‡½æ•°å£°æ˜ç±»ä¼¼äºvarï¼Œå³ä¼šæå‡åˆ°å…¨å±€ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸçš„å¤´éƒ¨ã€‚ åŒæ—¶ï¼Œå‡½æ•°å£°æ˜è¿˜ä¼šæå‡åˆ°æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸçš„å¤´éƒ¨ã€‚ æ³¨æ„ï¼Œä¸Šé¢ä¸‰æ¡è§„åˆ™åªå¯¹ES6çš„æµè§ˆå™¨å®ç°æœ‰æ•ˆï¼Œå…¶ä»–ç¯å¢ƒçš„å®ç°ä¸ç”¨éµå®ˆï¼Œè¿˜æ˜¯å°†å—çº§ä½œç”¨åŸŸçš„å‡½æ•°å£°æ˜å½“ä½œletå¤„ç†ã€‚ å‰é¢é‚£æ®µä»£ç ï¼Œåœ¨ Chrome ç¯å¢ƒä¸‹è¿è¡Œä¼šæŠ¥é”™ã€‚ // ES6çš„æµè§ˆå™¨ç¯å¢ƒ function f() { console.log(&#39;I am outside!&#39;); } (function () { if (false) { // é‡å¤å£°æ˜ä¸€æ¬¡å‡½æ•°f function f() { console.log(&#39;I am inside!&#39;); } } f(); }()); // Uncaught TypeError: f is not a function ä¸Šé¢çš„ä»£ç æŠ¥é”™ï¼Œæ˜¯å› ä¸ºå®é™…è¿è¡Œçš„æ˜¯ä¸‹é¢çš„ä»£ç ã€‚ // ES6çš„æµè§ˆå™¨ç¯å¢ƒ function f() { console.log(&#39;I am outside!&#39;); } (function () { var f = undefined; if (false) { function f() { console.log(&#39;I am inside!&#39;); } } f(); }()); // Uncaught TypeError: f is not a function è€ƒè™‘åˆ°ç¯å¢ƒå¯¼è‡´çš„è¡Œä¸ºå·®å¼‚å¤ªå¤§ï¼Œåº”è¯¥é¿å…åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•°ã€‚å¦‚æœç¡®å®éœ€è¦ï¼Œä¹Ÿåº”è¯¥å†™æˆå‡½æ•°è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯å‡½æ•°å£°æ˜è¯­å¥ã€‚ // å‡½æ•°å£°æ˜è¯­å¥ { let a = &#39;secret&#39;; function f() { return a; } } // å‡½æ•°è¡¨è¾¾å¼ { let a = &#39;secret&#39;; let f = function () { return a; }; } å¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ES6çš„å—çº§ä½œç”¨åŸŸå…è®¸å£°æ˜å‡½æ•°çš„è§„åˆ™ï¼Œåªåœ¨ä½¿ç”¨å¤§æ‹¬å·çš„æƒ…å†µä¸‹æˆç«‹ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨å¤§æ‹¬å·ï¼Œå°±ä¼šæŠ¥é”™ã€‚ // ä¸æŠ¥é”™ &#39;use strict&#39;; if (true) { function f() {} } // æŠ¥é”™ &#39;use strict&#39;; if (true) function f() {} do è¡¨è¾¾å¼æœ¬è´¨ä¸Šï¼Œå—çº§ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªè¯­å¥ï¼Œå°†å¤šä¸ªæ“ä½œå°è£…åœ¨ä¸€èµ·ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚ { let t = f(); t = t * t + 1; } ä¸Šé¢ä»£ç ä¸­ï¼Œå—çº§ä½œç”¨åŸŸå°†ä¸¤ä¸ªè¯­å¥å°è£…åœ¨ä¸€èµ·ã€‚ä½†æ˜¯ï¼Œåœ¨å—çº§ä½œç”¨åŸŸä»¥å¤–ï¼Œæ²¡æœ‰åŠæ³•å¾—åˆ°tçš„å€¼ï¼Œå› ä¸ºå—çº§ä½œç”¨åŸŸä¸è¿”å›å€¼ï¼Œé™¤étæ˜¯å…¨å±€å˜é‡ã€‚ ç°åœ¨æœ‰ä¸€ä¸ªææ¡ˆï¼Œä½¿å¾—å—çº§ä½œç”¨åŸŸå¯ä»¥å˜ä¸ºè¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è¿”å›å€¼ï¼ŒåŠæ³•å°±æ˜¯åœ¨å—çº§ä½œç”¨åŸŸä¹‹å‰åŠ ä¸Šdoï¼Œä½¿å®ƒå˜ä¸ºdoè¡¨è¾¾å¼ã€‚ let x = do { let t = f(); t * t + 1; }; ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡xä¼šå¾—åˆ°æ•´ä¸ªå—çº§ä½œç”¨åŸŸçš„è¿”å›å€¼ã€‚ constå‘½ä»¤constå£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ã€‚ä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜ã€‚ const PI = 3.1415; PI // 3.1415 PI = 3; // TypeError: Assignment to constant variable. ä¸Šé¢ä»£ç è¡¨æ˜æ”¹å˜å¸¸é‡çš„å€¼ä¼šæŠ¥é”™ã€‚ constå£°æ˜çš„å˜é‡ä¸å¾—æ”¹å˜å€¼ï¼Œè¿™æ„å‘³ç€ï¼Œconstä¸€æ—¦å£°æ˜å˜é‡ï¼Œå°±å¿…é¡»ç«‹å³åˆå§‹åŒ–ï¼Œä¸èƒ½ç•™åˆ°ä»¥åèµ‹å€¼ã€‚ const foo; // SyntaxError: Missing initializer in const declaration ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¯¹äºconstæ¥è¯´ï¼Œåªå£°æ˜ä¸èµ‹å€¼ï¼Œå°±ä¼šæŠ¥é”™ã€‚ constçš„ä½œç”¨åŸŸä¸letå‘½ä»¤ç›¸åŒï¼šåªåœ¨å£°æ˜æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆã€‚ if (true) { const MAX = 5; } MAX // Uncaught ReferenceError: MAX is not defined constå‘½ä»¤å£°æ˜çš„å¸¸é‡ä¹Ÿæ˜¯ä¸æå‡ï¼ŒåŒæ ·å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œåªèƒ½åœ¨å£°æ˜çš„ä½ç½®åé¢ä½¿ç”¨ã€‚ if (true) { console.log(MAX); // ReferenceError const MAX = 5; } ä¸Šé¢ä»£ç åœ¨å¸¸é‡MAXå£°æ˜ä¹‹å‰å°±è°ƒç”¨ï¼Œç»“æœæŠ¥é”™ã€‚ constå£°æ˜çš„å¸¸é‡ï¼Œä¹Ÿä¸letä¸€æ ·ä¸å¯é‡å¤å£°æ˜ã€‚ var message = &quot;Hello!&quot;; let age = 25; // ä»¥ä¸‹ä¸¤è¡Œéƒ½ä¼šæŠ¥é”™ const message = &quot;Goodbye!&quot;; const age = 30; å¯¹äºå¤åˆç±»å‹çš„å˜é‡ï¼Œå˜é‡åä¸æŒ‡å‘æ•°æ®ï¼Œè€Œæ˜¯æŒ‡å‘æ•°æ®æ‰€åœ¨çš„åœ°å€ã€‚constå‘½ä»¤åªæ˜¯ä¿è¯å˜é‡åæŒ‡å‘çš„åœ°å€ä¸å˜ï¼Œå¹¶ä¸ä¿è¯è¯¥åœ°å€çš„æ•°æ®ä¸å˜ï¼Œæ‰€ä»¥å°†ä¸€ä¸ªå¯¹è±¡å£°æ˜ä¸ºå¸¸é‡å¿…é¡»éå¸¸å°å¿ƒã€‚ const foo = {}; foo.prop = 123; foo.prop // 123 foo = {}; // TypeError: &quot;foo&quot; is read-only ä¸Šé¢ä»£ç ä¸­ï¼Œå¸¸é‡fooå‚¨å­˜çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚ä¸å¯å˜çš„åªæ˜¯è¿™ä¸ªåœ°å€ï¼Œå³ä¸èƒ½æŠŠfooæŒ‡å‘å¦ä¸€ä¸ªåœ°å€ï¼Œä½†å¯¹è±¡æœ¬èº«æ˜¯å¯å˜çš„ï¼Œæ‰€ä»¥ä¾ç„¶å¯ä»¥ä¸ºå…¶æ·»åŠ æ–°å±æ€§ã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ const a = []; a.push(&#39;Hello&#39;); // å¯æ‰§è¡Œ a.length = 0; // å¯æ‰§è¡Œ a = [&#39;Dave&#39;]; // æŠ¥é”™ ä¸Šé¢ä»£ç ä¸­ï¼Œå¸¸é‡aæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æœ¬èº«æ˜¯å¯å†™çš„ï¼Œä½†æ˜¯å¦‚æœå°†å¦ä¸€ä¸ªæ•°ç»„èµ‹å€¼ç»™aï¼Œå°±ä¼šæŠ¥é”™ã€‚ å¦‚æœçœŸçš„æƒ³å°†å¯¹è±¡å†»ç»“ï¼Œåº”è¯¥ä½¿ç”¨Object.freezeæ–¹æ³•ã€‚ const foo = Object.freeze({}); // å¸¸è§„æ¨¡å¼æ—¶ï¼Œä¸‹é¢ä¸€è¡Œä¸èµ·ä½œç”¨ï¼› // ä¸¥æ ¼æ¨¡å¼æ—¶ï¼Œè¯¥è¡Œä¼šæŠ¥é”™ foo.prop = 123; ä¸Šé¢ä»£ç ä¸­ï¼Œå¸¸é‡fooæŒ‡å‘ä¸€ä¸ªå†»ç»“çš„å¯¹è±¡ï¼Œæ‰€ä»¥æ·»åŠ æ–°å±æ€§ä¸èµ·ä½œç”¨ï¼Œä¸¥æ ¼æ¨¡å¼æ—¶è¿˜ä¼šæŠ¥é”™ã€‚ é™¤äº†å°†å¯¹è±¡æœ¬èº«å†»ç»“ï¼Œå¯¹è±¡çš„å±æ€§ä¹Ÿåº”è¯¥å†»ç»“ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå°†å¯¹è±¡å½»åº•å†»ç»“çš„å‡½æ•°ã€‚ var constantize = (obj) =&gt; { Object.freeze(obj); Object.keys(obj).forEach( (key, value) =&gt; { if ( typeof obj[key] === &#39;object&#39; ) { constantize( obj[key] ); } }); }; ES5åªæœ‰ä¸¤ç§å£°æ˜å˜é‡çš„æ–¹æ³•ï¼švarå‘½ä»¤å’Œfunctionå‘½ä»¤ã€‚ES6é™¤äº†æ·»åŠ letå’Œconstå‘½ä»¤ï¼Œåé¢ç« èŠ‚è¿˜ä¼šæåˆ°ï¼Œå¦å¤–ä¸¤ç§å£°æ˜å˜é‡çš„æ–¹æ³•ï¼šimportå‘½ä»¤å’Œclasså‘½ä»¤ã€‚æ‰€ä»¥ï¼ŒES6ä¸€å…±æœ‰6ç§å£°æ˜å˜é‡çš„æ–¹æ³•ã€‚ é¡¶å±‚å¯¹è±¡çš„å±æ€§é¡¶å±‚å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒæŒ‡çš„æ˜¯windowå¯¹è±¡ï¼Œåœ¨NodeæŒ‡çš„æ˜¯globalå¯¹è±¡ã€‚ES5ä¹‹ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æ˜¯ç­‰ä»·çš„ã€‚ window.a = 1; a // 1 a = 2; window.a // 2 ä¸Šé¢ä»£ç ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§èµ‹å€¼ä¸å…¨å±€å˜é‡çš„èµ‹å€¼ï¼Œæ˜¯åŒä¸€ä»¶äº‹ã€‚ é¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æŒ‚é’©ï¼Œè¢«è®¤ä¸ºæ˜¯JavaScriptè¯­è¨€æœ€å¤§çš„è®¾è®¡è´¥ç¬”ä¹‹ä¸€ã€‚è¿™æ ·çš„è®¾è®¡å¸¦æ¥äº†å‡ ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œé¦–å…ˆæ˜¯æ²¡æ³•åœ¨ç¼–è¯‘æ—¶å°±æŠ¥å‡ºå˜é‡æœªå£°æ˜çš„é”™è¯¯ï¼Œåªæœ‰è¿è¡Œæ—¶æ‰èƒ½çŸ¥é“ï¼ˆå› ä¸ºå…¨å±€å˜é‡å¯èƒ½æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§åˆ›é€ çš„ï¼Œè€Œå±æ€§çš„åˆ›é€ æ˜¯åŠ¨æ€çš„ï¼‰ï¼›å…¶æ¬¡ï¼Œç¨‹åºå‘˜å¾ˆå®¹æ˜“ä¸çŸ¥ä¸è§‰åœ°å°±åˆ›å»ºäº†å…¨å±€å˜é‡ï¼ˆæ¯”å¦‚æ‰“å­—å‡ºé”™ï¼‰ï¼›æœ€åï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§æ˜¯åˆ°å¤„å¯ä»¥è¯»å†™çš„ï¼Œè¿™éå¸¸ä¸åˆ©äºæ¨¡å—åŒ–ç¼–ç¨‹ã€‚å¦ä¸€æ–¹é¢ï¼Œwindowå¯¹è±¡æœ‰å®ä½“å«ä¹‰ï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨çš„çª—å£å¯¹è±¡ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯ä¸€ä¸ªæœ‰å®ä½“å«ä¹‰çš„å¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸åˆé€‚çš„ã€‚ ES6ä¸ºäº†æ”¹å˜è¿™ä¸€ç‚¹ï¼Œä¸€æ–¹é¢è§„å®šï¼Œä¸ºäº†ä¿æŒå…¼å®¹æ€§ï¼Œvarå‘½ä»¤å’Œfunctionå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¾æ—§æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼›å¦ä¸€æ–¹é¢è§„å®šï¼Œletå‘½ä»¤ã€constå‘½ä»¤ã€classå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºé¡¶å±‚å¯¹è±¡çš„å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»ES6å¼€å§‹ï¼Œå…¨å±€å˜é‡å°†é€æ­¥ä¸é¡¶å±‚å¯¹è±¡çš„å±æ€§è„±é’©ã€‚ var a = 1; // å¦‚æœåœ¨Nodeçš„REPLç¯å¢ƒï¼Œå¯ä»¥å†™æˆglobal.a // æˆ–è€…é‡‡ç”¨é€šç”¨æ–¹æ³•ï¼Œå†™æˆthis.a window.a // 1 let b = 1; window.b // undefined ä¸Šé¢ä»£ç ä¸­ï¼Œå…¨å±€å˜é‡aç”±varå‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥å®ƒæ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼›å…¨å±€å˜é‡bç”±letå‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼Œè¿”å›undefinedã€‚ global å¯¹è±¡ES5çš„é¡¶å±‚å¯¹è±¡ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒåœ¨å„ç§å®ç°é‡Œé¢æ˜¯ä¸ç»Ÿä¸€çš„ã€‚ æµè§ˆå™¨é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯windowï¼Œä½† Node å’Œ Web Worker æ²¡æœ‰windowã€‚ æµè§ˆå™¨å’Œ Web Worker é‡Œé¢ï¼Œselfä¹ŸæŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œä½†æ˜¯Nodeæ²¡æœ‰selfã€‚ Node é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯globalï¼Œä½†å…¶ä»–ç¯å¢ƒéƒ½ä¸æ”¯æŒã€‚ åŒä¸€æ®µä»£ç ä¸ºäº†èƒ½å¤Ÿåœ¨å„ç§ç¯å¢ƒï¼Œéƒ½èƒ½å–åˆ°é¡¶å±‚å¯¹è±¡ï¼Œç°åœ¨ä¸€èˆ¬æ˜¯ä½¿ç”¨thiså˜é‡ï¼Œä½†æ˜¯æœ‰å±€é™æ€§ã€‚ å…¨å±€ç¯å¢ƒä¸­ï¼Œthisä¼šè¿”å›é¡¶å±‚å¯¹è±¡ã€‚ä½†æ˜¯ï¼ŒNodeæ¨¡å—å’ŒES6æ¨¡å—ä¸­ï¼Œthisè¿”å›çš„æ˜¯å½“å‰æ¨¡å—ã€‚ å‡½æ•°é‡Œé¢çš„thisï¼Œå¦‚æœå‡½æ•°ä¸æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¿è¡Œï¼Œè€Œæ˜¯å•çº¯ä½œä¸ºå‡½æ•°è¿è¡Œï¼Œthisä¼šæŒ‡å‘é¡¶å±‚å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™æ—¶thisä¼šè¿”å›undefinedã€‚ ä¸ç®¡æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œè¿˜æ˜¯æ™®é€šæ¨¡å¼ï¼Œnew Function(&#39;return this&#39;)()ï¼Œæ€»æ˜¯ä¼šè¿”å›å…¨å±€å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå¦‚æœæµè§ˆå™¨ç”¨äº†CSPï¼ˆContent Security Policyï¼Œå†…å®¹å®‰å…¨æ”¿ç­–ï¼‰ï¼Œé‚£ä¹ˆevalã€new Functionè¿™äº›æ–¹æ³•éƒ½å¯èƒ½æ— æ³•ä½¿ç”¨ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œå¾ˆéš¾æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œéƒ½å–åˆ°é¡¶å±‚å¯¹è±¡ã€‚ä¸‹é¢æ˜¯ä¸¤ç§å‹‰å¼ºå¯ä»¥ä½¿ç”¨çš„æ–¹æ³•ã€‚ // æ–¹æ³•ä¸€ (typeof window !== &#39;undefined&#39; ? window : (typeof process === &#39;object&#39; &amp;&amp; typeof require === &#39;function&#39; &amp;&amp; typeof global === &#39;object&#39;) ? global : this); // æ–¹æ³•äºŒ var getGlobal = function () { if (typeof self !== &#39;undefined&#39;) { return self; } if (typeof window !== &#39;undefined&#39;) { return window; } if (typeof global !== &#39;undefined&#39;) { return global; } throw new Error(&#39;unable to locate global object&#39;); }; ç°åœ¨æœ‰ä¸€ä¸ªææ¡ˆï¼Œåœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ï¼Œå¼•å…¥globalä½œä¸ºé¡¶å±‚å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰€æœ‰ç¯å¢ƒä¸‹ï¼Œglobaléƒ½æ˜¯å­˜åœ¨çš„ï¼Œéƒ½å¯ä»¥ä»å®ƒæ‹¿åˆ°é¡¶å±‚å¯¹è±¡ã€‚ å«ç‰‡åº“system.globalæ¨¡æ‹Ÿäº†è¿™ä¸ªææ¡ˆï¼Œå¯ä»¥åœ¨æ‰€æœ‰ç¯å¢ƒæ‹¿åˆ°globalã€‚ // CommonJSçš„å†™æ³• require(&#39;system.global/shim&#39;)(); // ES6æ¨¡å—çš„å†™æ³• import shim from &#39;system.global/shim&#39;; shim(); ä¸Šé¢ä»£ç å¯ä»¥ä¿è¯å„ç§ç¯å¢ƒé‡Œé¢ï¼Œglobalå¯¹è±¡éƒ½æ˜¯å­˜åœ¨çš„ã€‚ // CommonJSçš„å†™æ³• var global = require(&#39;system.global&#39;)(); // ES6æ¨¡å—çš„å†™æ³• import getGlobal from &#39;system.global&#39;; const global = getGlobal(); ä¸Šé¢ä»£ç å°†é¡¶å±‚å¯¹è±¡æ”¾å…¥å˜é‡globalã€‚ å…³äºå†…å®¹æ¥è‡ªé˜®ä¸€å³°è€å¸ˆçš„ã€ŠES6æ ‡å‡†å…¥é—¨ã€‹ï¼Œæ„Ÿè°¢","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ES6","slug":"ES6","permalink":"https://microzz.com/tags/ES6/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"https://microzz.com/tags/ECMAScript6/"},{"name":"const","slug":"const","permalink":"https://microzz.com/tags/const/"},{"name":"let","slug":"let","permalink":"https://microzz.com/tags/let/"}]},{"title":"JavaScriptç¼–ç è§„èŒƒæŒ‡å—","date":"2016-10-01T01:26:09.000Z","path":"2016/10/01/javascript-code-style/","text":"Airbnbçš„JavaScriptç¼–ç è§„èŒƒæŒ‡å—=====================å¸¸ç”¨çš„ä¸€äº›javascriptè§„èŒƒ æ•°æ®ç±»å‹ åŸå§‹ç±»å‹(Primitives)ï¼šå½“ä½ ç»™ä¸€ä¸ªåŸå§‹ç±»å‹èµ‹å€¼æ—¶ï¼Œè¿”å›çš„æ˜¯è¿™ä¸ªå€¼çš„æœ¬èº«ã€‚ string number boolean null undefined var foo = 1, bar = foo; bar = 9; console.log(foo, bar); // =&gt; 1, 9 å¯¹è±¡ç±»å‹:å½“ä½ ç»™ä¸€ä¸ªå¯¹è±¡ç±»å‹èµ‹å€¼æ—¶ï¼Œè¿”å›çš„æ˜¯è¿™ä¸ªå€¼çš„å¼•ç”¨ã€‚ object array function var foo = [1, 2], bar = foo; bar[0] = 9; console.log(foo[0], bar[0]); // =&gt; 9, 9 å¯¹è±¡ æ–°å»ºä¸€ä¸ªå¯¹è±¡çš„è¯­æ³• //ä¸æ¨è var item = new Object(); //æ¨è var item = {}; ä¸è¦ä½¿ç”¨ä¿ç•™å­—ä½œä¸ºé”®å€¼ï¼Œå¦åˆ™åœ¨IE8ä¸‹é¢ä¼šå‡ºç°é—®é¢˜(è¯¦æƒ…)ã€‚ //ä¸æ¨è var superman = { default: { clark: &#39;kent&#39;}, private: true }; //æ¨è var superman ={ defaults: { clark: &#39;kent&#39;}, hidden: true }; ä½¿ç”¨å¯è¯»æ€§å¼ºçš„åŒä¹‰è¯ä»£æ›¿ä¿ç•™å­— //ä¸æ¨è var superman = { class: &#39;alien&#39; }; //ä¸æ¨è var superman = { klass: &#39;alien&#39; }; //æ¨è var superman = { type: &#39;alien&#39; }; æ•°ç»„ æ–°å»ºä¸€ä¸ªæ•°ç»„çš„è¯­æ³• //ä¸æ¨è var items = new Array(); //æ¨è var items = []; å¦‚æœä½ ä¸çŸ¥é“æ•°ç»„çš„é•¿åº¦å¯ä»¥ä½¿ç”¨pushå°†å…ƒç´ åŠ å…¥ã€‚ var someStack = []; //ä¸æ¨è someStack[someStack.length] = &#39;something&#39;; //æ¨è someStack.push(&#39;something&#39;); å½“ä½ éœ€è¦å¤åˆ¶ä¸€ä¸ªæ•°ç»„çš„æ—¶å€™ä½¿ç”¨sliceã€‚jsPerf var len = items.length, itemsCopy = [], i; //ä¸æ¨è for (i = 0; i &lt; len; i++){ itemsCopy[i] = items[i]; } //æ¨è itemsCopy = items.slice(); ç”¨sliceè½¬æ¢ä¼ªæ•°ç»„å¯¹è±¡åˆ°æ•°ç»„ function trigger() { var args = Array.prototype.slice.call(arguments); ... } Stringç±»å‹ ä½¿ç”¨å•å¼•å·&#39;&#39; //ä¸æ¨è var name = &quot;Bob Parr&quot;; //æ¨è var name = &#39;Bob Parr&#39;; //ä¸æ¨è var fullName - &quot;Bob &quot; + this.lastName; //æ¨è var fullName = &#39;Bob &#39; + this.lastName; å½“å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡80ä¸ªæ—¶ï¼Œåº”è¯¥é€šè¿‡å­—ç¬¦ä¸²è¿æ¥å¤šè¡Œæ˜¾ç¤ºã€‚ æ³¨æ„ï¼šè¿‡åº¦ä½¿ç”¨å­—ç¬¦ä¸²è¿æ¥å°†ä¼šå½±å“æ€§èƒ½ã€‚jsPerf&amp;Discussion //ä¸æ¨è var errorMessage = &#39;This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.&#39;; //ä¸æ¨è var errorMessage = &#39;This is a super long error that \\ was thrown because of Batman. \\ When you stop to think about \\ how Batman had anything to do \\ with this, you would get nowhere \\ fast.&#39;; //æ¨è var errorMessage = &#39;This is a super long error that &#39; + &#39;was thrown because of Batman.&#39; + &#39;When you stop to think about &#39; + &#39;how Batman had anything to do &#39; + &#39;with this, you would get nowhere &#39; + &#39;fast.&#39;; å½“ç¨‹åºå»ºç«‹ä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œ ä½¿ç”¨joinä»£æ›¿å­—ç¬¦ä¸²è¿æ¥ã€‚ç‰¹åˆ«æ˜¯åœ¨IEä¸‹ï¼šjsPerf var items, messages, length, i; messages = [{ state: &#39;success&#39;, message: &#39;This one worked.&#39; },{ state: &#39;success&#39;, message: &#39;This one worked as well.&#39; },{ state: &#39;error&#39;, message: &#39;This one did not work.&#39; }]; length = messages.length; // ä¸æ¨è function inbox(messages) { items = &#39;&lt;ul&gt;&#39;; for (i = 0; i &lt; length; i++) { items += &#39;&lt;li&gt;&#39; + messages[i].message + &#39;&lt;/li&gt;&#39;; } return items + &#39;&lt;/ul&gt;&#39;; } // æ¨è function inbox(messages) { items = []; for (i = 0; i &lt; length; i++) { items[i] = messages[i].message; } return &#39;&lt;ul&gt;&lt;li&gt;&#39; + items.join(&#39;&lt;/li&gt;&lt;li&gt;&#39;) + &#39;&lt;/li&gt;&lt;/ul&gt;&#39;; } å‡½æ•° å‡½æ•°è¡¨è¾¾å¼ï¼š // åŒ¿åå‡½æ•°è¡¨è¾¾å¼ var anonymous = function(){ return true; } // å‘½åå‡½æ•°è¡¨è¾¾å¼ var named = function named() { return true; }; // ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰ (function(){ console.log(&#39;Welcome to the Internet. Please follow me.&#39;); })(); ä¸è¦å°†å‡½æ•°å£°æ˜æ”¾åœ¨å¦‚if/whileå¾ªç¯æˆ–å…¶ä»–ä»»ä½•è¯­å¥ä¸­ã€‚ä½†å¯ä»¥ç”¨å‡½æ•°è¡¨è¾¾å¼æ¥æ›¿ä»£å‡½æ•°å£°æ˜è¿™ä¹ˆåšã€‚ä¸€äº›æµè§ˆå™¨å¯èƒ½çš„ç¡®å¯ä»¥åœ¨è¯­å¥ä¸­ä½¿ç”¨å‡½æ•°å£°æ˜ã€‚ä½†æ˜¯åœ¨è§£ææ–¹é¢çš„å¤„ç†å„ä¸ç›¸åŒï¼Œå„ç§æµè§ˆå™¨ä¸‹å…¼å®¹æ€§å¾ˆä¸å¥½ã€‚ æ³¨æ„: ECMA-262å®šä¹‰äº†ä¸€ç³»åˆ—çš„è¯­å¥ï¼Œä½†æ˜¯å‡½æ•°å£°æ˜å¹¶æ²¡æœ‰è¢«å½’ç±»ä¸ºçœŸæ­£çš„è¯­å¥ã€‚å…³äºè¿™ç‚¹å¯æŸ¥çœ‹ECMA-262çš„æ–‡æ¡£ //ä¸æ¨è if (currentUser){ function test() { console.log(&#39;Nope.&#39;); } } //æ¨è if (currentUser){ var test = function test() { console.log(&#39;Yup.&#39;); } } arguments ä¸èƒ½ä½œä¸ºä¸€ä¸ªå‚æ•°çš„åå­—ï¼Œ å› ä¸ºè¿™ä¼šè¦†ç›–æ¯ä¸€ä¸ªå‡½æ•°å†…çš„argumentså¯¹è±¡ã€‚ //ä¸æ¨è function nope(name, options, arguments) { // ...stuff... } //æ¨è function yup(name, options, args) { // ...stuff... } å±æ€§ è®¿é—®ä¸€ä¸ªå±æ€§æ—¶ï¼Œä½¿ç”¨ç‚¹çš„å½¢å¼å–å€¼ã€‚ var luke = { jedi: true, age: 28 }; // ä¸æ¨è var isJedi = luke[&#39;jedi&#39;]; // æ¨è var isJedi = luke.jedi; éœ€è¦ä¸€ä¸ªå˜é‡è®¿é—®ä¸€ä¸ªå±æ€§æ—¶ï¼Œä½¿ç”¨â€œ[]â€æ¥å–å€¼ã€‚ var luke = { jedi: true, age: 28 }; function getProp(prop) { return luke[prop]; } var isJedi = getProp(&#39;jedi&#39;); å˜é‡ æ€»æ˜¯ä½¿ç”¨ var æ¥å®šä¹‰å˜é‡ã€‚å¦‚æœä¸è¿™ä¹ˆåšå°†å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡å‡ºæ¥ã€‚æˆ‘ä»¬å¸Œæœ›é¿å…å…¨å±€å‘½åç©ºé—´çš„æ±¡æŸ“ã€‚ // ä¸æ¨è superPower = new SuperPower(); // æ¨è var superPower = new SuperPower(); ä½¿ç”¨ä¸€ä¸ªvar å£°æ˜å¤šä¸ªå˜é‡ï¼Œå¹¶ä¸”æ¯å£°æ˜ä¸€ä¸ªå˜é‡å°±æ¢ä¸€è¡Œã€‚ // ä¸æ¨è var items = getItems(); var goSportsTeam = true; var dragonball = &#39;z&#39;; // æ¨è var items = getItems(), goSportsTeam = true, dragonball = &#39;z&#39;; å£°æ˜å¤šä¸ªå˜é‡æ—¶ï¼ŒæŠŠä¸èµ‹å€¼çš„å˜é‡æ”¾åœ¨åé¢ã€‚è¿™æ ·åšæ˜¯æœ‰å¥½å¤„çš„ï¼Œå¦‚æœæ—¥åä½ æƒ³ç»™æœªèµ‹å€¼å˜é‡èµ‹å€¼çš„æ—¶å€™ï¼Œå¯èƒ½è¦å¼•ç”¨åˆ°ä¸Šé¢å·²ç»èµ‹å€¼çš„å˜é‡ã€‚ // ä¸æ¨è var i, len, dragonball, items = getItems(), goSportsTeam = true; // ä¸æ¨è var i, items = getItems(), dragonball, goSportsTeam = true, len; // æ¨è var items = getItems(), goSportsTeam = true, dragonball, length, i; åœ¨ä¸€ä¸ªä½œç”¨åŸŸçš„é¡¶éƒ¨ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ã€‚è¿™æ ·æœ‰åŠ©äºé¿å¼€ï¼Œå˜é‡å£°æ˜å’Œå£°æ˜æå‰çš„åˆ†é…é—®é¢˜ã€‚ // ä¸æ¨è function() { test(); console.log(&#39;doing stuff..&#39;); //..other stuff.. var name = getName(); if (name === &#39;test&#39;) { return false; } return name; } // æ¨è function() { var name = getName(); test(); console.log(&#39;doing stuff..&#39;); //..other stuff.. if (name === &#39;test&#39;) { return false; } return name; } // ä¸æ¨è function() { var name = getName(); if (!arguments.length) { return false; } return true; } // æ¨è function() { if (!arguments.length) { return false; } var name = getName(); return true; } å£°æ˜æå‰ ä¸ç®¡ä½ åœ¨ä½•å¤„ç»™ä¸€ä¸ªå˜é‡å£°æ˜æˆ–èµ‹å€¼ï¼Œjavascriptè§£æå™¨éƒ½ä¼šäº‹å…ˆåœ¨ä½œç”¨åŸŸçš„é¡¶ç«¯åšå£°æ˜æå‰ï¼ˆHoistingï¼‰ã€‚ // æˆ‘ä»¬çŸ¥é“ä¸‹é¢å°†ä¸èƒ½æ­£å¸¸è¿è¡Œï¼ˆå‡è®¾æ²¡æœ‰å…¨å±€å˜é‡ï¼‰ function example() { console.log(notDefined); // =&gt; æŠ›å‡ºä¸€ä¸ªå¼•ç”¨é”™è¯¯ } // åœ¨å¼•ç”¨è¿™ä¸ªå˜é‡ä¹‹åï¼Œç»™è¿™ä¸ªå˜é‡èµ‹å€¼å°†ä¸ä¼šæŠ›å¼‚å¸¸ï¼Œè¿™æ˜¯å› ä¸ºjavascriptè§£æå™¨æœ‰å£°æ˜æå‰ã€‚ // æ³¨æ„ï¼šèµ‹çš„â€œtrueâ€å€¼ï¼Œä¸ä¼šè¢«æå‰ã€‚ function example() { console.log(declaredButNotAssigned); // =&gt; undefined var declaredButNotAssigned = true; } // javascriptè§£æå™¨,ä¼šåœ¨ä½œç”¨åŸŸçš„é¡¶éƒ¨æå‰å£°æ˜å˜é‡ã€‚ // ç”¨ä»£ç æè¿°å‡ºæ¥ï¼Œå…¶å®å°±ç­‰åŒäºä¸‹é¢è¿™ç§æƒ…å†µã€‚ function example() { var declaredButNotAssigned; console.log(declaredButNotAssigned); // =&gt; undefined declaredButNotAssigned = true; } åŒ¿åå‡½æ•°è¡¨è¾¾å¼å°†è¯¥å˜é‡ååšäº†æå‰å£°æ˜ï¼Œæ²¡æœ‰ç»™è¯¥å˜é‡èµ‹å€¼å‡½æ•°ã€‚ function example() { console.log(anonymous); // =&gt; undefined anonymous(); // =&gt; æŠ›å‡ºå¼‚å¸¸ï¼Œanonymous ä¸æ˜¯ä¸€ä¸ªå‡½æ•° var anonymous = function() { console.log(&#39;anonymous function expression&#39;); }; } å’ŒåŒ¿åä¸€æ ·ï¼Œæœ‰åå‡½æ•°è¡¨è¾¾å¼å°†è¯¥å˜é‡ååšäº†æå‰å£°æ˜ï¼Œæ²¡æœ‰ç»™è¯¥å˜é‡èµ‹å€¼å‡½æ•°åå’Œå‡½æ•°ä½“ã€‚ function example() { console.log(named); // =&gt; undefined named(); // =&gt; æŠ›å‡ºå¼‚å¸¸ï¼Œ named ä¸æ˜¯ä¸€ä¸ªå‡½æ•° superPower(); // =&gt; æŠ›å‡ºå¼‚å¸¸ï¼Œ superPower æ²¡å®šä¹‰ var named = function superPower() { console.log(&#39;Flying&#39;); }; } // æŠŠå‡½æ•°åæ”¹æˆå’Œå˜é‡åä¸€æ ·ï¼Œä¹Ÿå¾—å‡ºåŒæ ·çš„ç»“æœã€‚ function example() { console.log(named); // =&gt; undefined named(); // =&gt; æŠ›å‡ºå¼‚å¸¸ï¼Œ named ä¸æ˜¯ä¸€ä¸ªå‡½æ•° var named = function named() { console.log(&#39;named&#39;); }; } å‡½æ•°å£°æ˜ä¼šå°†å‡½æ•°åå’Œå‡½æ•°ä½“å£°æ˜æå‰ã€‚ function example() { superPower(); // =&gt; Flying function superPower() { console.log(&#39;Flying&#39;); } } æ›´å¤šä¿¡æ¯è¯·å‚ç…§ Ben Cherry çš„ JavaScript Scoping &amp; Hoisting æ¡ä»¶è¡¨è¾¾å¼ä¸ç­‰å¼ ä½¿ç”¨ === å’Œ !== ä»£æ›¿ == å’Œ !=ã€‚ æ¡ä»¶è¡¨è¾¾å¼ ä¼šé€šè¿‡ ToBoolean æ¥è¿›è¡Œå¼ºåˆ¶è½¬åŒ–ï¼Œè€Œä¸”éµå¾ªä»¥ä¸‹çš„è§„åˆ™ï¼š å¯¹è±¡è¢«è½¬åŒ–ä¸ºtrue Undefinedè¢«è½¬åŒ–ä¸ºfalse Nullè¢«è½¬åŒ–ä¸ºfalse å¸ƒå°”å€¼è¢«è½¬åŒ–ä¸ºç›¸åº”çš„å¸ƒå°”å€¼ æ•°å­—å½“å€¼ä¸º+0,-0æˆ–NaNæ—¶è½¬åŒ–ä¸ºfalseï¼Œå…¶ä»–çš„è½¬åŒ–ä¸ºtrue Stringsç±»å‹å¦‚æœä¸ºç©ºæ—¶è½¬åŒ–ä¸ºfalse,å¦åˆ™è½¬åŒ–ä¸ºtrue if ([0]) { // true // å› ä¸ºæ•°ç»„æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡ä¼šè¢«è½¬åŒ–ä¸º true } ä½¿ç”¨å¿«æ·æ–¹å¼ // ä¸æ¨è if (name !== &#39;&#39;) { // ...stuff... } // æ¨è if (name) { // ...stuff... } // ä¸æ¨è if (collection.length &gt; 0) { // ...stuff... } // æ¨è if (collection.length) { // ...stuff... } æ›´å¤šçš„ä¿¡æ¯ è¯·çœ‹ Angus Croll çš„ Truth Equality and JavaScript å— ç»™å¤šè¡Œçš„å—ï¼Œä½¿ç”¨å¤§æ‹¬å· // ä¸æ¨è if (test) return false; // æ¨è if (test) return false; // æ¨è if (test) { return false; } // ä¸æ¨è function() { return false; } // æ¨è function() { return false; } æ³¨é‡Š ä½¿ç”¨ /**...*/ è¿›è¡Œå¤šè¡Œæ³¨é‡Šã€‚æ³¨é‡Šè¦åŒ…æ‹¬æè¿°ã€æŒ‡å®šç±»å‹ã€å‚æ•°å€¼å’Œè¿”å›å€¼ã€‚ // ä¸æ¨è // make() returns a new element // based on the passed in tag name // // @param &lt;String&gt; tag // @return &lt;Element&gt; element function make(tag) { // ...stuff... return element; } // æ¨è /** * make() returns a new element * based on the passed in tag name * * @param &lt;String&gt; tag * @return &lt;Element&gt; element */ function make(tag) { // ...stuff... return element; } ä½¿ç”¨ // è¿›è¡Œå•è¡Œæ³¨é‡Šã€‚æ³¨é‡Šå•ç‹¬å ä¸€è¡Œï¼Œå¹¶å†™åœ¨éœ€è¦æ³¨é‡Šå¯¹è±¡çš„ä¸Šé¢ã€‚åœ¨æ³¨é‡Šçš„ä¸Šé¢ç•™ä¸€ä¸ªç©ºè¡Œã€‚ // ä¸æ¨è var active = true; // is current tab // æ¨è // is current tab var active = true; // ä¸æ¨è function getType() { console.log(&#39;fetching type...&#39;); // set the default type to &#39;no type&#39; var type = this._type || &#39;no type&#39;; return type; } // æ¨è function getType() { console.log(&#39;fetching type...&#39;); // set the default type to &#39;no type&#39; var type = this._type || &#39;no type&#39;; return type; } ç»™ä½ çš„ä»£ç åŠ å‰ç¼€ï¼Œæ¯”å¦‚FIXMEæˆ–TODOï¼Œè¿™æ ·æœ‰åŠ©äºå…¶ä»–å¼€å‘è€…å¯ä»¥è¿…é€Ÿç†è§£ä½ æŒ‡å‡ºçš„éœ€è¦è¢«å¤„ç†çš„é—®é¢˜ã€‚å¦‚æœæƒ³æ›´æ¸…æ™°ä¸€ç‚¹ä½ è¿˜å¯ä»¥åœ¨åé¢åŠ ä¸Šæè¿°ï¼Œæ¯”å¦‚: FIXME -- need to figure this outæˆ–TODO -- need to implement. ä½¿ç”¨ // FIXME: å»æ³¨é‡Šé—®é¢˜ function Calculator() { // FIXME: shouldn&#39;t use a global here total = 0; return this; } ä½¿ç”¨ // TODO: æ¥æ³¨é‡Šè§£å†³æ–¹æ³• function Calculator() { // TODO: total should be configurable by an options param this.total = 0; return this; } ç©ºæ ¼ å°†tabé”®è®¾æˆ2ä¸ªç©ºæ ¼ // ä¸æ¨è function() { âˆ™âˆ™âˆ™âˆ™var name; } // ä¸æ¨è function() { âˆ™var name; } // æ¨è function() { âˆ™âˆ™var name; } é€—å·/å†’å·/å°æ‹¬å·åé¢ç•™ä¸€ä¸ªç©ºæ ¼ // ä¸æ¨è function test(){ console.log(&#39;test&#39;); } // æ¨è function test() { console.log(&#39;test&#39;); } // ä¸æ¨è dog.set(&#39;attr&#39;,{ age: &#39;1 year&#39;, breed: &#39;Bernese Mountain Dog&#39; }); // æ¨è dog.set(&#39;attr&#39;, { age: &#39;1 year&#39;, breed: &#39;Bernese Mountain Dog&#39; }); åœ¨æ–‡ä»¶çš„æœ€åç•™ä¸€ä¸ªç©ºè¡Œ // ä¸æ¨è (function(global) { // ...stuff... })(this); // æ¨è (function(global) { // ...stuff... })(this); é€—å· é€—å·ä¸è¦å‰ç½® // ä¸æ¨è var once , upon , aTime; // æ¨è var once, upon, aTime; // ä¸æ¨è var hero = { firstName: &#39;Bob&#39; , lastName: &#39;Parr&#39; , heroName: &#39;Mr. Incredible&#39; , superPower: &#39;strength&#39; }; // æ¨è var hero = { firstName: &#39;Bob&#39;, lastName: &#39;Parr&#39;, heroName: &#39;Mr. Incredible&#39;, superPower: &#39;strength&#39; }; æœ€åä¸€ä¸ªå…ƒç´ ä¸å¯ä»¥åŠ é€—å·ã€‚è¿™åœ¨IE6å’ŒIE7è¿˜æœ‰IE9çš„æ€ªå¼‚æ¨¡å¼ä¸‹å‡ºé”™ã€‚ æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ ## å…³äº GitHub: ğŸ‘‰https://github.com/microzz","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://microzz.com/tags/JavaScript/"},{"name":"JS","slug":"JS","permalink":"https://microzz.com/tags/JS/"},{"name":"ç¼–ç è§„èŒƒ","slug":"ç¼–ç è§„èŒƒ","permalink":"https://microzz.com/tags/ç¼–ç è§„èŒƒ/"},{"name":"Airbnb","slug":"Airbnb","permalink":"https://microzz.com/tags/Airbnb/"}]}]