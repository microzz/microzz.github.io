<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ¶µæœˆå¤©-microzz.com</title>
  <subtitle>ITæŠ€æœ¯åˆ†äº«</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://microzz.com/"/>
  <updated>2018-07-10T00:19:37.817Z</updated>
  <id>https://microzz.com/</id>
  
  <author>
    <name>Microzz</name>
    <email>903036377@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å‰ç«¯æ°´å°ç”Ÿæˆæ–¹æ¡ˆ</title>
    <link href="https://microzz.com/2018/07/01/watermark/"/>
    <id>https://microzz.com/2018/07/01/watermark/</id>
    <published>2018-07-01T11:30:02.000Z</published>
    <updated>2018-07-10T00:19:37.817Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰ç«¯æ°´å°ç”Ÿæˆæ–¹æ¡ˆ"><a href="#å‰ç«¯æ°´å°ç”Ÿæˆæ–¹æ¡ˆ" class="headerlink" title="å‰ç«¯æ°´å°ç”Ÿæˆæ–¹æ¡ˆ"></a>å‰ç«¯æ°´å°ç”Ÿæˆæ–¹æ¡ˆ</h1><blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;å‰æ®µæ—¶é—´åšæŸç³»ç»Ÿå®¡æ ¸åå°ï¼Œå‡ºç°äº†å®¡æ ¸äººå‘˜æˆªå›¾æŠŠå†…å®¹å¤–æ³„éœ²çš„æƒ…å†µï¼Œè™½ç„¶æˆªå›¾å†…å®¹ä¸æ˜¯ç‰¹åˆ«æ•æ„Ÿï¼Œä½†æ˜¯å®‰å…¨é—®é¢˜è¿˜æ˜¯ä¸èƒ½å¿½è§†ã€‚äºæ˜¯ä¾¿åœ¨ç³»ç»Ÿé¡µé¢ä¸Šé¢åŠ ä¸Šäº†æ°´å°ï¼Œå¯¹äºå®¡æ ¸äººå‘˜æˆªå›¾ç­‰æ•æ„Ÿæ“ä½œæœ‰ä¸€å®šçš„æç¤ºä½œç”¨ã€‚</p>
</blockquote>
<h2 id="ç½‘é¡µæ°´å°ç”Ÿæˆè§£å†³æ–¹æ¡ˆ"><a href="#ç½‘é¡µæ°´å°ç”Ÿæˆè§£å†³æ–¹æ¡ˆ" class="headerlink" title="ç½‘é¡µæ°´å°ç”Ÿæˆè§£å†³æ–¹æ¡ˆ"></a>ç½‘é¡µæ°´å°ç”Ÿæˆè§£å†³æ–¹æ¡ˆ</h2><h3 id="é€šè¿‡canvasç”Ÿæˆæ°´å°"><a href="#é€šè¿‡canvasç”Ÿæˆæ°´å°" class="headerlink" title="é€šè¿‡canvasç”Ÿæˆæ°´å°"></a>é€šè¿‡canvasç”Ÿæˆæ°´å°</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20180701/caniuse_canvas.png" alt="Canvaså…¼å®¹æ€§" title="">
                </div>
                <div class="image-caption">Canvaså…¼å®¹æ€§</div>
            </figure>
<p>è¿™é‡Œæˆ‘ä»¬ç”¨canvasæ¥ç”Ÿæˆbase64å›¾ç‰‡ï¼Œé€šè¿‡CanIUseç½‘ç«™æŸ¥è¯¢å…¼å®¹æ€§ï¼Œå¦‚æœåœ¨ç§»åŠ¨ç«¯ä»¥åŠä¸€äº›ç®¡ç†ç³»ç»Ÿä½¿ç”¨ï¼Œå…¼å®¹æ€§é—®é¢˜å¯ä»¥å®Œå…¨å¿½ç•¥ã€‚</p>
<p><code>HTMLCanvasElement.toDataURL</code> æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«å›¾ç‰‡å±•ç¤ºçš„ data URI ã€‚å¯ä»¥ä½¿ç”¨ type å‚æ•°å…¶ç±»å‹ï¼Œé»˜è®¤ä¸º PNG æ ¼å¼ã€‚å›¾ç‰‡çš„åˆ†è¾¨ç‡ä¸º96dpiã€‚</p>
<p>å¦‚æœç”»å¸ƒçš„é«˜åº¦æˆ–å®½åº¦æ˜¯0ï¼Œé‚£ä¹ˆä¼šè¿”å›å­—ç¬¦ä¸²â€œdata:,â€ã€‚<br>å¦‚æœä¼ å…¥çš„ç±»å‹éâ€œimage/pngâ€ï¼Œä½†æ˜¯è¿”å›çš„å€¼ä»¥â€œdata:image/pngâ€å¼€å¤´ï¼Œé‚£ä¹ˆè¯¥ä¼ å…¥çš„ç±»å‹æ˜¯ä¸æ”¯æŒçš„ã€‚<br>Chromeæ”¯æŒâ€œimage/webpâ€ç±»å‹ã€‚å…·ä½“å‚è€ƒ<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLCanvasElement/toDataURL" target="_blank" rel="external">HTMLCanvasElement.toDataURL</a></p>
<p>å…·ä½“ä»£ç å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript"> (function () {
      // canvas å®ç° watermark
      function __canvasWM({
        // ä½¿ç”¨ ES6 çš„å‡½æ•°é»˜è®¤å€¼æ–¹å¼è®¾ç½®å‚æ•°çš„é»˜è®¤å–å€¼
        // å…·ä½“å‚è§ https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Default_parameters
        container = document.body,
        width = &#39;200px&#39;,
        height = &#39;150px&#39;,
        textAlign = &#39;center&#39;,
        textBaseline = &#39;middle&#39;,
        font = &quot;20px microsoft yahei&quot;,
        fillStyle = &#39;rgba(184, 184, 184, 0.8)&#39;,
        content = &#39;è¯·å‹¿å¤–ä¼ &#39;,
        rotate = &#39;30&#39;,
        zIndex = 1000
      } = {}) {
        var args = arguments[0];
        var canvas = document.createElement(&#39;canvas&#39;);

        canvas.setAttribute(&#39;width&#39;, width);
        canvas.setAttribute(&#39;height&#39;, height);
        var ctx = canvas.getContext(&quot;2d&quot;);

        ctx.textAlign = textAlign;
        ctx.textBaseline = textBaseline;
        ctx.font = font;
        ctx.fillStyle = fillStyle;
        ctx.rotate(Math.PI / 180 * rotate);
        ctx.fillText(content, parseFloat(width) / 2, parseFloat(height) / 2);

        var base64Url = canvas.toDataURL();
        const watermarkDiv = document.createElement(&quot;div&quot;);
        watermarkDiv.setAttribute(&#39;style&#39;, `
          position:absolute;
          top:0;
          left:0;
          width:100%;
          height:100%;
          z-index:${zIndex};
          pointer-events:none;
          background-repeat:repeat;
          background-image:url(&#39;${base64Url}&#39;)`);

        container.style.position = &#39;relative&#39;;
        container.insertBefore(watermarkDiv, container.firstChild);


      });

      window.__canvasWM = __canvasWM;
    })();

    // è°ƒç”¨
    __canvasWM({
      content: &#39;QQMusicFE&#39;
    })
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20180701/canvas_demo1.png" alt="Canvaså®ç°ç½‘é¡µæ°´å°æ•ˆæœ" title="">
                </div>
                <div class="image-caption">Canvaså®ç°ç½‘é¡µæ°´å°æ•ˆæœ</div>
            </figure></p>
<p>ä¸ºäº†ä½¿è¿™ä¸ªæ–¹æ³•æ›´é€šç”¨ï¼Œå…¼å®¹ä¸åŒçš„å¼•ç”¨æ–¹å¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åŠ ä¸Šè¿™æ®µä»£ç ï¼š</p>
<pre><code class="javascript">      // ä¸ºäº†å…¼å®¹ä¸åŒçš„ç¯å¢ƒ
      if (typeof module != &#39;undefined&#39; &amp;&amp; module.exports) {  //CMD
        module.exports = __canvasWM;
      } else if (typeof define == &#39;function&#39; &amp;&amp; define.amd) { // AMD
        define(function () {
          return __canvasWM;
        });
      } else {
        window.__canvasWM = __canvasWM;
      }
</code></pre>
<p>è¿™æ ·ä¼¼ä¹èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œç¨å¾®æ‡‚ä¸€ç‚¹æµè§ˆå™¨çš„ä½¿ç”¨æˆ–è€…ç½‘é¡µçŸ¥è¯†çš„ç”¨æˆ·ï¼Œå¯ä»¥ç”¨æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·æ¥åŠ¨æ€æ›´æ”¹DOMçš„å±æ€§æˆ–è€…ç»“æ„å°±å¯ä»¥å»æ‰äº†ã€‚è¿™ä¸ªæ—¶å€™æœ‰ä¸¤ä¸ªè§£å†³åŠæ³•ï¼š</p>
<ol>
<li>ç›‘æµ‹æ°´å°divçš„å˜åŒ–ï¼Œè®°å½•åˆšç”Ÿæˆçš„divçš„innerHTMLï¼Œæ¯éš”å‡ ç§’å°±å–ä¸€æ¬¡æ–°çš„å€¼ï¼Œä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™é‡æ–°ç”Ÿæˆæ°´å°ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼å¯èƒ½å½±å“æ€§èƒ½ï¼›</li>
<li>ä½¿ç”¨<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver" target="_blank" rel="external">MutationObserver</a></li>
</ol>
<p>MutationObserverç»™å¼€å‘è€…ä»¬æä¾›äº†ä¸€ç§èƒ½åœ¨æŸä¸ªèŒƒå›´å†…çš„DOMæ ‘å‘ç”Ÿå˜åŒ–æ—¶ä½œå‡ºé€‚å½“ååº”çš„èƒ½åŠ›ã€‚</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20180701/caniuse_mo.png" alt="MutationObserverå…¼å®¹æ€§" title="">
                </div>
                <div class="image-caption">MutationObserverå…¼å®¹æ€§</div>
            </figure>
<p>é€šè¿‡å…¼å®¹æ€§è¡¨å¯ä»¥çœ‹å‡ºé«˜çº§æµè§ˆå™¨ä»¥åŠç§»åŠ¨æµè§ˆå™¨æ”¯æŒéå¸¸ä¸é”™ã€‚<br>Mutation Observer API ç”¨æ¥ç›‘è§† DOM å˜åŠ¨ã€‚DOM çš„ä»»ä½•å˜åŠ¨ï¼Œæ¯”å¦‚èŠ‚ç‚¹çš„å¢å‡ã€å±æ€§çš„å˜åŠ¨ã€æ–‡æœ¬å†…å®¹çš„å˜åŠ¨ï¼Œè¿™ä¸ª API éƒ½å¯ä»¥å¾—åˆ°é€šçŸ¥ã€‚<br>ä½¿ç”¨MutationObserveræ„é€ å‡½æ•°ï¼Œæ–°å»ºä¸€ä¸ªè§‚å¯Ÿå™¨å®ä¾‹ï¼Œå®ä¾‹çš„æœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å˜åŠ¨æ•°ç»„ï¼Œç¬¬äºŒä¸ªæ˜¯è§‚å¯Ÿå™¨å®ä¾‹ã€‚MutationObserver çš„å®ä¾‹çš„observeæ–¹æ³•ç”¨æ¥å¯åŠ¨ç›‘å¬ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ã€‚<br>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ‰€è¦è§‚å¯Ÿçš„ DOM èŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼šä¸€ä¸ªé…ç½®å¯¹è±¡ï¼ŒæŒ‡å®šæ‰€è¦è§‚å¯Ÿçš„ç‰¹å®šå˜åŠ¨ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:left">å±æ€§</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">childList</td>
<td style="text-align:left">å¦‚æœéœ€è¦è§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹çš„å­èŠ‚ç‚¹(æ–°å¢äº†æŸä¸ªå­èŠ‚ç‚¹,æˆ–è€…ç§»é™¤äº†æŸä¸ªå­èŠ‚ç‚¹),åˆ™è®¾ç½®ä¸ºtrue.</td>
</tr>
<tr>
<td style="text-align:left">attributes</td>
<td style="text-align:left">å¦‚æœéœ€è¦è§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹çš„å±æ€§èŠ‚ç‚¹(æ–°å¢æˆ–åˆ é™¤äº†æŸä¸ªå±æ€§,ä»¥åŠæŸä¸ªå±æ€§çš„å±æ€§å€¼å‘ç”Ÿäº†å˜åŒ–),åˆ™è®¾ç½®ä¸ºtrue.</td>
</tr>
<tr>
<td style="text-align:left">characterData</td>
<td style="text-align:left">å¦‚æœç›®æ ‡èŠ‚ç‚¹ä¸ºcharacterDataèŠ‚ç‚¹(ä¸€ç§æŠ½è±¡æ¥å£,å…·ä½“å¯ä»¥ä¸ºæ–‡æœ¬èŠ‚ç‚¹,æ³¨é‡ŠèŠ‚ç‚¹,ä»¥åŠå¤„ç†æŒ‡ä»¤èŠ‚ç‚¹)æ—¶,ä¹Ÿè¦è§‚å¯Ÿè¯¥èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹æ˜¯å¦å‘ç”Ÿå˜åŒ–,åˆ™è®¾ç½®ä¸ºtrue.</td>
</tr>
<tr>
<td style="text-align:left">subtree</td>
<td style="text-align:left">é™¤äº†ç›®æ ‡èŠ‚ç‚¹,å¦‚æœè¿˜éœ€è¦è§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹çš„æ‰€æœ‰åä»£èŠ‚ç‚¹(è§‚å¯Ÿç›®æ ‡èŠ‚ç‚¹æ‰€åŒ…å«çš„æ•´æ£µDOMæ ‘ä¸Šçš„ä¸Šè¿°ä¸‰ç§èŠ‚ç‚¹å˜åŒ–),åˆ™è®¾ç½®ä¸ºtrue.</td>
</tr>
<tr>
<td style="text-align:left">attributeOldValue</td>
<td style="text-align:left">åœ¨attributeså±æ€§å·²ç»è®¾ä¸ºtrueçš„å‰æä¸‹,å¦‚æœéœ€è¦å°†å‘ç”Ÿå˜åŒ–çš„å±æ€§èŠ‚ç‚¹ä¹‹å‰çš„å±æ€§å€¼è®°å½•ä¸‹æ¥(è®°å½•åˆ°ä¸‹é¢MutationRecordå¯¹è±¡çš„oldValueå±æ€§ä¸­),åˆ™è®¾ç½®ä¸ºtrue.</td>
</tr>
<tr>
<td style="text-align:left">characterDataOldValue</td>
<td style="text-align:left">åœ¨characterDataå±æ€§å·²ç»è®¾ä¸ºtrueçš„å‰æä¸‹,å¦‚æœéœ€è¦å°†å‘ç”Ÿå˜åŒ–çš„characterDataèŠ‚ç‚¹ä¹‹å‰çš„æ–‡æœ¬å†…å®¹è®°å½•ä¸‹æ¥(è®°å½•åˆ°ä¸‹é¢MutationRecordå¯¹è±¡çš„oldValueå±æ€§ä¸­),åˆ™è®¾ç½®ä¸ºtrue.</td>
</tr>
<tr>
<td style="text-align:left">attributeFilter</td>
<td style="text-align:left">ä¸€ä¸ªå±æ€§åæ•°ç»„(ä¸éœ€è¦æŒ‡å®šå‘½åç©ºé—´),åªæœ‰è¯¥æ•°ç»„ä¸­åŒ…å«çš„å±æ€§åå‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šè¢«è§‚å¯Ÿåˆ°,å…¶ä»–åç§°çš„å±æ€§å‘ç”Ÿå˜åŒ–åä¼šè¢«å¿½ç•¥.</td>
</tr>
</tbody>
</table>
<p><code>MutationObserver</code>åªèƒ½ç›‘æµ‹åˆ°è¯¸å¦‚å±æ€§æ”¹å˜ã€å¢åˆ å­ç»“ç‚¹ç­‰ï¼Œå¯¹äºè‡ªå·±æœ¬èº«è¢«åˆ é™¤ï¼Œæ˜¯æ²¡æœ‰åŠæ³•çš„å¯ä»¥é€šè¿‡ç›‘æµ‹çˆ¶ç»“ç‚¹æ¥è¾¾åˆ°è¦æ±‚ã€‚å› æ­¤æœ€ç»ˆæ”¹é€ ä¹‹åä»£ç ä¸ºï¼š</p>
<pre><code class="javascript">   (function () {
      // canvas å®ç° watermark
      function __canvasWM({
        // ä½¿ç”¨ ES6 çš„å‡½æ•°é»˜è®¤å€¼æ–¹å¼è®¾ç½®å‚æ•°çš„é»˜è®¤å–å€¼
        // å…·ä½“å‚è§ https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Default_parameters
        container = document.body,
        width = &#39;300px&#39;,
        height = &#39;200px&#39;,
        textAlign = &#39;center&#39;,
        textBaseline = &#39;middle&#39;,
        font = &quot;20px Microsoft Yahei&quot;,
        fillStyle = &#39;rgba(184, 184, 184, 0.6)&#39;,
        content = &#39;è¯·å‹¿å¤–ä¼ &#39;,
        rotate = &#39;30&#39;,
        zIndex = 1000
      } = {}) {
        const args = arguments[0];
        const canvas = document.createElement(&#39;canvas&#39;);

        canvas.setAttribute(&#39;width&#39;, width);
        canvas.setAttribute(&#39;height&#39;, height);
        const ctx = canvas.getContext(&quot;2d&quot;);

        ctx.textAlign = textAlign;
        ctx.textBaseline = textBaseline;
        ctx.font = font;
        ctx.fillStyle = fillStyle;
        ctx.rotate(Math.PI / 180 * rotate);
        ctx.fillText(content, parseFloat(width) / 2, parseFloat(height) / 2);

        const base64Url = canvas.toDataURL();
        const __wm = document.querySelector(&#39;.__wm&#39;);

        const watermarkDiv = __wm || document.createElement(&quot;div&quot;);
        const styleStr = `
          position:absolute;
          top:0;
          left:0;
          width:100%;
          height:100%;
          z-index:${zIndex};
          pointer-events:none;
          background-repeat:repeat;
          background-image:url(&#39;${base64Url}&#39;)`;

        watermarkDiv.setAttribute(&#39;style&#39;, styleStr);
        watermarkDiv.classList.add(&#39;__wm&#39;);

        if (!__wm) {
          container.style.position = &#39;relative&#39;;
          container.insertBefore(watermarkDiv, container.firstChild);
        }

        const MutationObserver = window.MutationObserver || window.WebKitMutationObserver;
        if (MutationObserver) {
          let mo = new MutationObserver(function () {
            const __wm = document.querySelector(&#39;.__wm&#39;);
            // åªåœ¨__wmå…ƒç´ å˜åŠ¨æ‰é‡æ–°è°ƒç”¨ __canvasWM
            if ((__wm &amp;&amp; __wm.getAttribute(&#39;style&#39;) !== styleStr) || !__wm) {
              // é¿å…ä¸€ç›´è§¦å‘
              mo.disconnect();
              mo = null;
            __canvasWM(JSON.parse(JSON.stringify(args)));
            }
          });

          mo.observe(container, {
            attributes: true,
            subtree: true,
            childList: true
          })
        }

      }

      if (typeof module != &#39;undefined&#39; &amp;&amp; module.exports) {  //CMD
        module.exports = __canvasWM;
      } else if (typeof define == &#39;function&#39; &amp;&amp; define.amd) { // AMD
        define(function () {
          return __canvasWM;
        });
      } else {
        window.__canvasWM = __canvasWM;
      }
    })();

    // è°ƒç”¨
    __canvasWM({
      content: &#39;QQMusicFE&#39;
    });
</code></pre>
<h3 id="é€šè¿‡SVGç”Ÿæˆæ°´å°"><a href="#é€šè¿‡SVGç”Ÿæˆæ°´å°" class="headerlink" title="é€šè¿‡SVGç”Ÿæˆæ°´å°"></a>é€šè¿‡SVGç”Ÿæˆæ°´å°</h3><p>SVGï¼šå¯ç¼©æ”¾çŸ¢é‡å›¾å½¢ï¼ˆè‹±è¯­ï¼šScalable Vector Graphicsï¼ŒSVGï¼‰æ˜¯ä¸€ç§åŸºäºå¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ˆXMLï¼‰ï¼Œç”¨äºæè¿°äºŒç»´çŸ¢é‡å›¾å½¢çš„å›¾å½¢æ ¼å¼ã€‚ SVGç”±W3Cåˆ¶å®šï¼Œæ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ã€‚ â€“ <a href="https://zh.wikipedia.org/wiki/%E5%8F%AF%E7%B8%AE%E6%94%BE%E5%90%91%E9%87%8F%E5%9C%96%E5%BD%A2" target="_blank" rel="external">ç»´åŸºç™¾ç§‘</a></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20180701/caniuse_svg.png" alt="SVGæµè§ˆå™¨å…¼å®¹æ€§" title="">
                </div>
                <div class="image-caption">SVGæµè§ˆå™¨å…¼å®¹æ€§</div>
            </figure>
<p>ç›¸æ¯”Canvasï¼ŒSVGæœ‰æ›´å¥½çš„æµè§ˆå™¨å…¼å®¹æ€§ï¼Œä½¿ç”¨SVGç”Ÿæˆæ°´å°çš„æ–¹å¼ä¸Canvasçš„æ–¹å¼ç±»ä¼¼ï¼Œåªæ˜¯base64Urlçš„ç”Ÿæˆæ–¹å¼æ¢æˆäº†SVGã€‚å…·ä½“å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">     (function () {
      // svg å®ç° watermark
      function __svgWM({
        container = document.body,
        content = &#39;è¯·å‹¿å¤–ä¼ &#39;,
        width = &#39;300px&#39;,
        height = &#39;200px&#39;,
        opacity = &#39;0.2&#39;,
        fontSize = &#39;20px&#39;,
        zIndex = 1000
      } = {}) {
        const args = arguments[0];
        const svgStr = `&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;${width}&quot; height=&quot;${width}&quot;&gt;
  &lt;text x=&quot;50%&quot; y=&quot;50%&quot; dy=&quot;12px&quot;
    text-anchor=&quot;middle&quot;
    stroke=&quot;#000000&quot;
    stroke-width=&quot;1&quot;
    stroke-opacity=&quot;${opacity}&quot;
    fill=&quot;none&quot;
    transform=&quot;rotate(-45, 120 120)&quot;
    style=&quot;font-size: ${fontSize};&quot;&gt;
    ${content}
  &lt;/text&gt;
&lt;/svg&gt;`;
        const base64Url = `data:image/svg+xml;base64,${window.btoa(unescape(encodeURIComponent(svgStr)))}`;
        const __wm = document.querySelector(&#39;.__wm&#39;);

        const watermarkDiv = __wm || document.createElement(&quot;div&quot;);
     // ...
     // ä¸ canvas çš„ä¸€è‡´
     // ...
    })();

    __svgWM({
      content: &#39;QQMusicFE&#39;
    })
</code></pre>
<h3 id="é€šè¿‡NodeJSç”Ÿæˆæ°´å°"><a href="#é€šè¿‡NodeJSç”Ÿæˆæ°´å°" class="headerlink" title="é€šè¿‡NodeJSç”Ÿæˆæ°´å°"></a>é€šè¿‡NodeJSç”Ÿæˆæ°´å°</h3><p>èº«ä¸ºç°ä»£å‰ç«¯å¼€å‘è€…ï¼ŒNode.JSä¹Ÿæ˜¯éœ€è¦æŒæ¡çš„ã€‚æˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡NodeJSæ¥ç”Ÿæˆç½‘é¡µæ°´å°(å‡ºäºæ€§èƒ½è€ƒè™‘æ›´å¥½çš„æ–¹å¼æ˜¯åˆ©ç”¨ç”¨æˆ·å®¢æˆ·ç«¯æ¥ç”Ÿæˆ)ã€‚å‰ç«¯å‘ä¸€ä¸ªè¯·æ±‚ï¼Œå‚æ•°å¸¦ä¸Šæ°´å°å†…å®¹ï¼Œåå°è¿”å›å›¾ç‰‡å†…å®¹ã€‚<br>å…·ä½“å®ç°(Koa2ç¯å¢ƒ)ï¼š</p>
<ol>
<li>å®‰è£…gmä»¥åŠç›¸å…³ç¯å¢ƒï¼Œè¯¦æƒ…çœ‹<a href="https://github.com/aheckmann/gm" target="_blank" rel="external">gmæ–‡æ¡£</a></li>
<li><code>ctx.type = &#39;image/png&#39;;</code>è®¾ç½®å“åº”ä¸ºå›¾ç‰‡ç±»å‹</li>
<li>ç”Ÿæˆå›¾ç‰‡è¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥éœ€è¦åŒ…è£…ä¸€å±‚Promiseï¼Œè¿™æ ·æ‰èƒ½ä¸ºé€šè¿‡ async/await æ–¹å¼ä¸º ctx.body èµ‹å€¼</li>
</ol>
<pre><code class="javascript">const fs = require(&#39;fs&#39;)
const gm = require(&#39;gm&#39;);
const imageMagick = gm.subClass({
  imageMagick: true
});


const router = require(&#39;koa-router&#39;)();

router.get(&#39;/wm&#39;, async (ctx, next) =&gt; {
  const {
    text
  } = ctx.query;

  ctx.type = &#39;image/png&#39;;
  ctx.status = 200;
  ctx.body = await ((() =&gt; {
    return new Promise((resolve, reject) =&gt; {
      imageMagick(200, 100, &quot;rgba(255,255,255,0)&quot;)
        .fontSize(40)
        .drawText(10, 50, text)
        .write(require(&#39;path&#39;).join(__dirname, `./${text}.png`), function (err) {
          if (err) {
            reject(err);
          } else {
            resolve(fs.readFileSync(require(&#39;path&#39;).join(__dirname, `./${text}.png`)))
          }
        });
    })
  })());
});
</code></pre>
<p><strong>å¦‚æœåªæ˜¯ç®€å•çš„æ°´å°å±•ç¤ºï¼Œå»ºè®®åœ¨æµè§ˆå™¨ç”Ÿæˆï¼Œæ€§èƒ½æ›´å¥½</strong></p>
<h2 id="å›¾ç‰‡æ°´å°ç”Ÿæˆè§£å†³æ–¹æ¡ˆ"><a href="#å›¾ç‰‡æ°´å°ç”Ÿæˆè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å›¾ç‰‡æ°´å°ç”Ÿæˆè§£å†³æ–¹æ¡ˆ"></a>å›¾ç‰‡æ°´å°ç”Ÿæˆè§£å†³æ–¹æ¡ˆ</h2><p>é™¤äº†ç»™ç½‘é¡µåŠ ä¸Šæ°´å°ä¹‹å¤–ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç»™å›¾ç‰‡ä¹ŸåŠ ä¸Šæ°´å°ï¼Œè¿™æ ·åœ¨ç”¨æˆ·ä¿å­˜å›¾ç‰‡åï¼Œå¸¦ä¸Šäº†æ°´å°æ¥æºä¿¡æ¯ï¼Œæ—¢å¯ä»¥ä¿æŠ¤ç‰ˆæƒï¼Œæ°´å°çš„å…¶ä»–ä¿¡æ¯ä¹Ÿå¯ä»¥é˜²æ­¢æ³„å¯†ã€‚</p>
<h3 id="é€šè¿‡canvasç»™å›¾ç‰‡åŠ æ°´å°"><a href="#é€šè¿‡canvasç»™å›¾ç‰‡åŠ æ°´å°" class="headerlink" title="é€šè¿‡canvasç»™å›¾ç‰‡åŠ æ°´å°"></a>é€šè¿‡canvasç»™å›¾ç‰‡åŠ æ°´å°</h3><p>å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">    (function() {
      function __picWM({
        url = &#39;&#39;,
        textAlign = &#39;center&#39;,
        textBaseline = &#39;middle&#39;,
        font = &quot;20px Microsoft Yahei&quot;,
        fillStyle = &#39;rgba(184, 184, 184, 0.8)&#39;,
        content = &#39;è¯·å‹¿å¤–ä¼ &#39;,
        cb = null,
        textX = 100,
        textY = 30
      } = {}) {
        const img = new Image();
        img.src = url;
        img.crossOrigin = &#39;anonymous&#39;;
        img.onload = function() {
          const canvas = document.createElement(&#39;canvas&#39;);
          canvas.width = img.width;
          canvas.height = img.height;
          const ctx = canvas.getContext(&#39;2d&#39;);

          ctx.drawImage(img, 0, 0);
          ctx.textAlign = textAlign;
          ctx.textBaseline = textBaseline;
          ctx.font = font;
          ctx.fillStyle = fillStyle;
          ctx.fillText(content, img.width - textX, img.height - textY);

          const base64Url = canvas.toDataURL();
          cb &amp;&amp; cb(base64Url);
        }
      }

        if (typeof module != &#39;undefined&#39; &amp;&amp; module.exports) {  //CMD
        module.exports = __picWM;
      } else if (typeof define == &#39;function&#39; &amp;&amp; define.amd) { // AMD
        define(function () {
          return __picWM;
        });
      } else {
        window.__picWM = __picWM;
      }

    })();

    // è°ƒç”¨
    __picWM({
        url: &#39;http://localhost:3000/imgs/google.png&#39;,
        content: &#39;QQMusicFE&#39;,
        cb: (base64Url) =&gt; {
          document.querySelector(&#39;img&#39;).src = base64Url
        },
      });
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20180701/wm_pic.png" alt="Canvasç»™å›¾ç‰‡ç”Ÿæˆæ°´å°" title="">
                </div>
                <div class="image-caption">Canvasç»™å›¾ç‰‡ç”Ÿæˆæ°´å°</div>
            </figure>
<h3 id="é€šè¿‡NodeJSæ‰¹é‡ä¸ºå›¾ç‰‡åŠ æ°´å°"><a href="#é€šè¿‡NodeJSæ‰¹é‡ä¸ºå›¾ç‰‡åŠ æ°´å°" class="headerlink" title="é€šè¿‡NodeJSæ‰¹é‡ä¸ºå›¾ç‰‡åŠ æ°´å°"></a>é€šè¿‡NodeJSæ‰¹é‡ä¸ºå›¾ç‰‡åŠ æ°´å°</h3><p>æˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡gmè¿™ä¸ªåº“æ¥ç»™å›¾ç‰‡åŠ ä¸Šæ°´å°</p>
<pre><code class="javascript">function picWM(path, text) {
  imageMagick(path)
    .drawText(10, 50, text)
    .write(require(&#39;path&#39;).join(__dirname, `./${text}.png`), function (err) {
      if (err) {
        console.log(err);
      }
    });
}
</code></pre>
<p>å¦‚æœéœ€è¦æ‰¹å¤„ç†å›¾ç‰‡ï¼Œåªéœ€è¦éå†ç›¸å…³æ–‡ä»¶å³å¯ã€‚</p>
<p><strong>å¦‚æœåªæ˜¯ç®€å•çš„æ°´å°å±•ç¤ºï¼Œå»ºè®®åœ¨æµè§ˆå™¨ç”Ÿæˆï¼Œæ€§èƒ½æ›´å¥½</strong></p>
<h2 id="æ‹“å±•"><a href="#æ‹“å±•" class="headerlink" title="æ‹“å±•"></a>æ‹“å±•</h2><h3 id="éšæ°´å°"><a href="#éšæ°´å°" class="headerlink" title="éšæ°´å°"></a>éšæ°´å°</h3><p>å‰æ®µæ—¶é—´é˜¿é‡Œå‡­æˆªå›¾æŸ¥åˆ°äº†æœˆé¥¼äº‹ä»¶çš„æ³„å¯†è€…ï¼Œå…¶å®å°±æ˜¯ç”¨äº†éšæ°´å°ã€‚è¿™å…¶å®å¾ˆå¤§ç¨‹åº¦ä¸æ˜¯å‰ç«¯çš„èŒƒç•´äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿåº”è¯¥äº†è§£ã€‚AlloyTeamå›¢é˜Ÿå†™è¿‡ä¸€ç¯‡ <a href="http://www.alloyteam.com/2016/03/image-steganography/" target="_blank" rel="external">ä¸èƒ½è¯´çš„ç§˜å¯†â€”â€”å‰ç«¯ä¹Ÿèƒ½ç©çš„å›¾ç‰‡éšå†™æœ¯</a> ï¼Œé€šè¿‡Canvasç»™å›¾ç‰‡åŠ ä¸Šäº†â€œéšæ°´å°â€ï¼Œé’ˆå¯¹ç”¨æˆ·ä¿å­˜çš„å›¾ç‰‡ï¼Œæ˜¯å¯ä»¥è½»æ¾è¿˜åŸé‡Œé¢éšå«çš„å†…å®¹ï¼Œä½†æ˜¯å¯¹äºæˆªå›¾æˆ–è€…å¤„ç†è¿‡çš„ç…§ç‰‡å´æ— èƒ½ä¸ºåŠ›ï¼Œä¸è¿‡å¯¹äºä¸€äº›æœºå¯†å›¾ç‰‡æ–‡ä»¶å±•ç¤ºï¼Œæ˜¯å¯ä»¥å·å·ç”¨ä¸Šè¯¥æŠ€æœ¯çš„ã€‚</p>
<h3 id="ä½¿ç”¨åŠ å¯†åçš„æ°´å°å†…å®¹"><a href="#ä½¿ç”¨åŠ å¯†åçš„æ°´å°å†…å®¹" class="headerlink" title="ä½¿ç”¨åŠ å¯†åçš„æ°´å°å†…å®¹"></a>ä½¿ç”¨åŠ å¯†åçš„æ°´å°å†…å®¹</h3><p>å‰ç«¯ç”Ÿæˆçš„æ°´å°ä¹Ÿå¯ä»¥ï¼Œåˆ«äººä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼ç”Ÿæˆï¼Œå¯èƒ½ä¼šæœ‰â€œå«ç¥¸äºäººâ€ï¼ˆå¯èƒ½è¿™æ˜¯å¤šè™‘çš„ï¼‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦æœ‰æ›´å®‰å…¨çš„è§£å†³æ–¹æ³•ã€‚æ°´å°å†…å®¹å¯ä»¥åŒ…å«å¤šç§ç¼–ç åçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·åã€ç”¨æˆ·IDã€æ—¶é—´ç­‰ã€‚æ¯”å¦‚æˆ‘ä»¬åªæ˜¯æƒ³ä¿å­˜ç”¨æˆ·å”¯ä¸€çš„ç”¨æˆ·IDï¼Œéœ€è¦æŠŠç”¨æˆ·IDä¼ å…¥ä¸‹é¢çš„md5æ–¹æ³•ï¼Œå°±å¯ä»¥ç”Ÿæˆå”¯ä¸€æ ‡è¯†ã€‚ç¼–ç åçš„ä¿¡æ¯æ˜¯ä¸å¯é€†çš„ï¼Œä½†å¯ä»¥é€šè¿‡å…¨å±€éå†æ‰€æœ‰ç”¨æˆ·çš„æ–¹å¼è¿›è¡Œè¿½æº¯ã€‚è¿™æ ·å°±å¯ä»¥é˜²æ­¢æ°´å°é€ å‡ä¹Ÿå¯ä»¥è¿½æº¯çœŸæ­£æ°´å°çš„ä¿¡æ¯ã€‚</p>
<pre><code class="javascript">// MD5åŠ å¯†åº“ utility
const utils = require(&#39;utility&#39;)

// åŠ ç›MD5
exports.md5 =  function (content) {
  const salt = &#39;microzz_asd!@#IdSDAS~~&#39;;
  return utils.md5(utils.md5(content + salt));
}
</code></pre>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å®‰å…¨é—®é¢˜ä¸èƒ½å¤§æ„ï¼Œå¯¹äºä¸€äº›æ¯”è¾ƒæ•æ„Ÿçš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»„åˆä½¿ç”¨ä¸Šè¿°çš„æ°´å°æ–¹æ¡ˆï¼Œè¿™æ ·æ‰èƒ½æœ€å¤§ç¨‹åº¦ç»™æµè§ˆè€…è­¦ç¤ºçš„ä½œç”¨ï¼Œå‡å°‘æ³„å¯†çš„æƒ…å†µã€‚</p>
<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul>
<li><a href="http://www.alloyteam.com/2016/03/image-steganography/" target="_blank" rel="external">ä¸èƒ½è¯´çš„ç§˜å¯†â€”â€”å‰ç«¯ä¹Ÿèƒ½ç©çš„å›¾ç‰‡éšå†™æœ¯</a> </li>
<li><a href="http://javascript.ruanyifeng.com/dom/mutationobserver.html" target="_blank" rel="external">é˜®ä¸€å³°-Mutation Observer API</a></li>
<li>lucifer-åŸºäºKMæ°´å°çš„å›¾ç‰‡ç½‘é¡µæ°´å°å®ç°æ–¹æ¡ˆ</li>
<li>damon-ç½‘é¡µæ°´å°æ˜æ°´å°å‰ç«¯SVGå®ç°æ–¹æ¡ˆ</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‰ç«¯æ°´å°ç”Ÿæˆæ–¹æ¡ˆ&quot;&gt;&lt;a href=&quot;#å‰ç«¯æ°´å°ç”Ÿæˆæ–¹æ¡ˆ&quot; class=&quot;headerlink&quot; title=&quot;å‰ç«¯æ°´å°ç”Ÿæˆæ–¹æ¡ˆ&quot;&gt;&lt;/a&gt;å‰ç«¯æ°´å°ç”Ÿæˆæ–¹æ¡ˆ&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;å‰æ®µæ—¶é—´åšæŸç³»ç»Ÿå®¡
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="Canvas" scheme="https://microzz.com/tags/Canvas/"/>
    
      <category term="SVG" scheme="https://microzz.com/tags/SVG/"/>
    
      <category term="éšæ°´å°" scheme="https://microzz.com/tags/%E9%9A%90%E6%B0%B4%E5%8D%B0/"/>
    
      <category term="NodeJS" scheme="https://microzz.com/tags/NodeJS/"/>
    
  </entry>
  
  <entry>
    <title>Linux/Macä¸‹SSHæ— å¯†ç ç™»å½•æœåŠ¡å™¨é…ç½®</title>
    <link href="https://microzz.com/2018/03/27/ssh-login/"/>
    <id>https://microzz.com/2018/03/27/ssh-login/</id>
    <published>2018-03-27T09:57:24.000Z</published>
    <updated>2018-03-27T10:50:39.216Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Linux-Macä¸‹å®ç°SSHæ— å¯†ç ç™»å½•æœåŠ¡å™¨"><a href="#Linux-Macä¸‹å®ç°SSHæ— å¯†ç ç™»å½•æœåŠ¡å™¨" class="headerlink" title="Linux/Macä¸‹å®ç°SSHæ— å¯†ç ç™»å½•æœåŠ¡å™¨"></a>Linux/Macä¸‹å®ç°SSHæ— å¯†ç ç™»å½•æœåŠ¡å™¨</h1><p>åœ¨å¯ä¿¡è®¾å¤‡ä¸Šæ¯æ¬¡è¿æ¥æœåŠ¡å™¨éƒ½æ¯”è¾ƒç¹çï¼Œç°åœ¨é€šè¿‡é…ç½®å…¬ç§é’¥å°±å¯ä»¥å®ç°æ— å¯†ç ç™»å½•ã€‚</p>
<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><p>é¦–å…ˆæˆ‘ä»¬åœ¨è‡ªå·±çš„Linuxç³»ç»Ÿï¼ˆå®¢æˆ·ç«¯ï¼Œè¿™é‡Œæ˜¯Macï¼‰ä¸Šç”Ÿæˆä¸€å¯¹SSH Keyï¼šSSHå¯†é’¥å’ŒSSHå…¬é’¥ã€‚å¯†é’¥ä¿å­˜åœ¨è‡ªå·±çš„Linuxç³»ç»Ÿä¸Šã€‚<br>ç„¶åå…¬é’¥ä¸Šä¼ åˆ°LinuxæœåŠ¡å™¨ã€‚ä¹‹åæˆ‘ä»¬å°±èƒ½æ— å¯†ç SSHç™»å½•äº†ã€‚SSHå¯†é’¥å°±å¥½æ¯”æ˜¯ä½ çš„èº«ä»½è¯æ˜</p>
<h3 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h3><p>è¿™é‡Œç”¨Macçš„ç»ˆç«¯ç¯å¢ƒåšæ¼”ç¤º</p>
<ol>
<li>åˆ‡æ¢åˆ°ç”¨æˆ·åä¸‹é¢çš„.sshè·¯å¾„ä¸‹:<br><code>cd ~/.ssh</code></li>
<li><code>ls</code>æŸ¥çœ‹ç›®å½•ä¸‹é¢æœ‰æ²¡æœ‰<code>id_rsa</code>ã€<code>id_rsa.pub</code>æ–‡ä»¶ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å¯ä»¥è·³è¿‡3æ“ä½œ</li>
<li>æ‰“å¼€ç»ˆç«¯ï¼Œä½¿ç”¨ä¸‹é¢çš„ssh-keygenæ¥ç”ŸæˆRSAå¯†é’¥å’Œå…¬é’¥ï¼-tè¡¨ç¤ºtypeï¼Œå°±æ˜¯è¯´è¦ç”ŸæˆRSAåŠ å¯†çš„é’¥åŒ™ï¼é»˜è®¤çš„RSAé•¿åº¦æ˜¯2048ä½ã€‚å¦‚æœä½ éå¸¸æ³¨é‡å®‰å…¨ï¼Œé‚£ä¹ˆå¯ä»¥æŒ‡å®š4096ä½çš„é•¿åº¦<code>ssh-keygen -t rsa -b 4096 -C &quot;Your Email&quot;</code><br>ç”ŸæˆSSH Keyçš„è¿‡ç¨‹ä¸­ä¼šè¦æ±‚ä½ æŒ‡å®šä¸€ä¸ªæ–‡ä»¶æ¥ä¿å­˜å¯†é’¥ï¼ŒæŒ‰Enteré”®ä½¿ç”¨é»˜è®¤çš„æ–‡ä»¶å°±è¡Œäº†ã€‚ç„¶åéœ€è¦è¾“å…¥ä¸€ä¸ªå¯†ç æ¥åŠ å¯†ä½ çš„SSH Keyã€‚<br>SSHç§é’¥ä¼šä¿å­˜åœ¨ç›®å½•ä¸‹çš„<code>ï½/.ssh/id_rsa</code>æ–‡ä»¶ä¸­ã€‚SSHå…¬é’¥ä¿å­˜åœ¨<code>ï½/.ssh/id_rsa.pub</code>æ–‡ä»¶ä¸­</li>
</ol>
<h3 id="æœåŠ¡å™¨"><a href="#æœåŠ¡å™¨" class="headerlink" title="æœåŠ¡å™¨"></a>æœåŠ¡å™¨</h3><ol>
<li>åœ¨ç”¨æˆ·<code>ï½/</code>ç›®å½•ä¸‹ï¼ŒåŒæ ·ç”Ÿæˆç§é’¥å’Œå…¬é’¥<br><code>ssh-keygen -t rsa -b 4096 -C &quot;Your Email&quot;</code></li>
<li>å¼€å¯sshä»£ç†<br><code>eval &quot;$(ssh-agent -s)&quot;</code> </li>
<li>æŠŠkeyåŠ å…¥ä»£ç†ä¸­<br><code>ssh-add ~/.ssh/id_rsa</code></li>
<li>ç²˜è´´æœ¬åœ°çš„å…¬é’¥åˆ°æœåŠ¡å™¨</li>
</ol>
<p><code>vi ~/.ssh/authorized_keys</code></p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>ssh-copy-id</code>å‘½ä»¤æ¥å®Œæˆã€‚<br><code>ssh-copy-id username@remote-server</code><br>è¾“å…¥è¿œç¨‹ç”¨æˆ·çš„å¯†ç åï¼ŒSSHå…¬é’¥å°±ä¼šè‡ªåŠ¨ä¸Šä¼ äº†ã€‚SSHå…¬é’¥ä¿å­˜åœ¨è¿œç¨‹LinuxæœåŠ¡å™¨çš„<code>ï½/.ssh/authorized_keys</code>æ–‡ä»¶ä¸­ï¼</p>
<ol>
<li>æˆæƒæ–‡ä»¶<br><code>chmod 600 authorized_keys</code></li>
<li>é‡å¯æœåŠ¡<br><code>sudo service sshd restart</code></li>
</ol>
<p>åˆ°è¿™é‡Œä½ å°±å¯ä»¥ç›´æ¥åœ¨ä½ æœ¬åœ°<br><code>ssh username@remote-server</code><br>å®ç°æ— å¯†ç ç™»å½•æœåŠ¡å™¨äº†ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<h2 id="alias-åˆ«åç™»å½•"><a href="#alias-åˆ«åç™»å½•" class="headerlink" title="alias åˆ«åç™»å½•"></a>alias åˆ«åç™»å½•</h2><p>ä¸Šé¢æˆ‘ä»¬è¦ç™»å½•æœåŠ¡å™¨æ—¶è¿˜æ˜¯è¦<br><code>ssh username@remote-server</code><br>æœåŠ¡å™¨åœ°å€ä¸€èˆ¬ä¸å¥½è®°ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥åœ¨Macç»ˆç«¯é‡Œé¢è®¾ç½®åˆ«åï¼Œç®€å†™å¾ˆå¤šæ“ä½œã€‚è¿™é‡Œä»¥zshä¸ºä¾‹<br>ä¿®æ”¹aliasåˆ«åå¿«æ·æ–¹å¼ï¼Œå®ç°å¿«é€Ÿç™»å½•æœåŠ¡å™¨</p>
<ol>
<li>æ‰“å¼€é…ç½®æ–‡ä»¶<br><code>vi ~/.zshrc</code></li>
<li>æ·»åŠ åˆ«åé…ç½®</li>
</ol>
<pre><code>alias cvm=&quot;ssh root@your_server_address&quot;
alias codes=&quot;cd ~/codes&quot;
alias down=&quot;cd ~/Downloads&quot;
alias desk=&quot;cd ~/Desktop&quot;
alias ~=&quot;cd ~&quot;
</code></pre><p>3.ä½¿é…ç½®ç”Ÿæ•ˆ <code>source ~/.zshrc</code></p>
<p>ç°åœ¨æˆ‘ä»¬åœ¨ç»ˆç«¯è¾“å…¥ <code>cvm</code> å°±å¯ä»¥æ— å¯†ç å¿«é€Ÿç™»å½•è‡ªå·±çš„æœåŠ¡å™¨äº†<br>è¾“å…¥<code>codes</code>å°±å¯ä»¥å¿«æ·è¿›å…¥<code>~/codes</code>æ–‡ä»¶å¤¹ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„å¿«æ·æ–¹å¼ä½ å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ </p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Linux-Macä¸‹å®ç°SSHæ— å¯†ç ç™»å½•æœåŠ¡å™¨&quot;&gt;&lt;a href=&quot;#Linux-Macä¸‹å®ç°SSHæ— å¯†ç ç™»å½•æœåŠ¡å™¨&quot; class=&quot;headerlink&quot; title=&quot;Linux/Macä¸‹å®ç°SSHæ— å¯†ç ç™»å½•æœåŠ¡å™¨&quot;&gt;&lt;/a&gt;Linux/Macä¸‹å®ç°SSHæ— å¯†
    
    </summary>
    
    
      <category term="Linux" scheme="https://microzz.com/tags/Linux/"/>
    
      <category term="ssh" scheme="https://microzz.com/tags/ssh/"/>
    
      <category term="æœåŠ¡å™¨" scheme="https://microzz.com/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>å‡ è¡Œä»£ç äº†è§£JSä¸­çš„æŸ¯é‡ŒåŒ–å’ŒåæŸ¯é‡ŒåŒ–</title>
    <link href="https://microzz.com/2018/01/01/curryanduncurry/"/>
    <id>https://microzz.com/2018/01/01/curryanduncurry/</id>
    <published>2018-01-01T03:29:36.000Z</published>
    <updated>2018-01-10T03:38:27.494Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‡ è¡Œä»£ç äº†è§£JavaScriptä¸­çš„curringå’Œuncurring"><a href="#å‡ è¡Œä»£ç äº†è§£JavaScriptä¸­çš„curringå’Œuncurring" class="headerlink" title="å‡ è¡Œä»£ç äº†è§£JavaScriptä¸­çš„curringå’Œuncurring"></a>å‡ è¡Œä»£ç äº†è§£JavaScriptä¸­çš„curringå’Œuncurring</h1><h2 id="curry-æŸ¯é‡ŒåŒ–"><a href="#curry-æŸ¯é‡ŒåŒ–" class="headerlink" title="curry æŸ¯é‡ŒåŒ–"></a>curry æŸ¯é‡ŒåŒ–</h2><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–ï¼ˆè‹±è¯­ï¼šCurryingï¼‰ï¼Œåˆè¯‘ä¸ºå¡ç‘åŒ–æˆ–åŠ é‡ŒåŒ–ï¼Œæ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚  â€“ ç»´åŸºç™¾ç§‘</p>
<p>ä¸‹é¢å‡ è¡Œä»£ç è¯´æ˜ä¸€ä¸‹ï¼š</p>
<pre><code class="javascript">var curry = function(fn) {
  var _args = [];

  return function _f() {
    if (arguments.length) {
      Array.prototype.push.apply(_args, arguments);
      return _f;
    }

    return fn.apply(this, _args);
  }
}

// ç´¯åŠ æ–¹æ³•
var add = curry(function() {
  return Array.prototype.reduce.call(arguments, function(acc, cur) {
    return acc + cur;
  }, 0);
});

add(1)(2)(3)(); // 6
add(4)(); // 10
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å½“å‚æ•°ä¸ºç©ºæ—¶å€™å°±å¯ä»¥æ±‚å‡ºå¯¹åº”çš„å€¼ï¼Œä¹Ÿèµ·åˆ°äº†ä¸€ä¸ªæƒ°æ€§æ±‚å€¼(å»¶è¿Ÿæ±‚å€¼)çš„ç›®çš„ï¼Œåœ¨æŸäº›åœºæ™¯å¯¹æ€§èƒ½æå‡æœ‰ä¸€å®šçš„å¸®åŠ©ã€‚<br>è¿™ä¸ªä¾‹å­å¯èƒ½å¤§å®¶ä¸å¤ªç†Ÿæ‚‰ï¼Œä¸‹é¢è¿™ä¸ªä¾‹å­å¤§å®¶åº”è¯¥éƒ½ä¸é™Œç”Ÿï¼š</p>
<pre><code class="javascript">function add(a) {
  return function (b) {
    return a + b;
  }
}

var add5 = add(5);
add5(10); // 15
add5(20); // 25
</code></pre>
<h2 id="uncurry-åæŸ¯é‡ŒåŒ–"><a href="#uncurry-åæŸ¯é‡ŒåŒ–" class="headerlink" title="uncurry åæŸ¯é‡ŒåŒ–"></a>uncurry åæŸ¯é‡ŒåŒ–</h2><p>åcurringå°±æ˜¯æŠŠåŸæ¥å·²ç»å›ºå®šçš„å‚æ•°æˆ–è€…thisä¸Šä¸‹æ–‡ç­‰å½“ä½œå‚æ•°å»¶è¿Ÿåˆ°æœªæ¥ä¼ é€’ã€‚</p>
<pre><code class="javascript">Function.prototype.uncurry = function() {
  var _this = this;

  return function() {
    return Function.prototype.call.apply(_this, arguments);
  }
}

var obj = {};
var arr = [];
var push = Array.prototype.push.uncurry();

push(obj, &#39;hello&#39;, &#39;world&#39;); // obj {0: &quot;hello&quot;, 1: &quot;world&quot;, length: 2}
push(arr, &#39;hello&#39;, &#39;world&#39;); // arr [&quot;hello&quot;, &quot;world&quot;]
</code></pre>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>ä¸ªäººç½‘ç«™ï¼šğŸ”—<a href="https://microzz.com/">microzz-ITæŠ€æœ¯åˆ†äº«</a> </p>
<p>GitHubï¼šğŸ”—<a href="https://github.com/microzz" target="_blank" rel="external">microzz</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‡ è¡Œä»£ç äº†è§£JavaScriptä¸­çš„curringå’Œuncurring&quot;&gt;&lt;a href=&quot;#å‡ è¡Œä»£ç äº†è§£JavaScriptä¸­çš„curringå’Œuncurring&quot; class=&quot;headerlink&quot; title=&quot;å‡ è¡Œä»£ç äº†è§£JavaScriptä¸­çš„curr
    
    </summary>
    
    
      <category term="curring" scheme="https://microzz.com/tags/curring/"/>
    
      <category term="uncurring" scheme="https://microzz.com/tags/uncurring/"/>
    
      <category term="æŸ¯é‡ŒåŒ–" scheme="https://microzz.com/tags/%E6%9F%AF%E9%87%8C%E5%8C%96/"/>
    
      <category term="åæŸ¯é‡ŒåŒ–" scheme="https://microzz.com/tags/%E5%8F%8D%E6%9F%AF%E9%87%8C%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>è…¾è®¯AlloyTeamå‰ç«¯å¤§ä¼šAC2017</title>
    <link href="https://microzz.com/2017/10/30/ac2017/"/>
    <id>https://microzz.com/2017/10/30/ac2017/</id>
    <published>2017-10-30T05:51:31.000Z</published>
    <updated>2017-10-31T06:16:13.904Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è…¾è®¯AlloyTeamå‰ç«¯å¤§ä¼šAC2017ä»‹ç»"><a href="#è…¾è®¯AlloyTeamå‰ç«¯å¤§ä¼šAC2017ä»‹ç»" class="headerlink" title="è…¾è®¯AlloyTeamå‰ç«¯å¤§ä¼šAC2017ä»‹ç»"></a>è…¾è®¯AlloyTeamå‰ç«¯å¤§ä¼šAC2017ä»‹ç»</h1><p> æœ¬æ¬¡å¤§ä¼šå¹²è´§æ¯”è¾ƒå¤šï¼Œå†…å®¹å€¼å¾—æ¯ä¸€ä¸ªå‰ç«¯erå¥½å¥½å¸æ”¶<br>ï¼ˆåé¢æœ‰å¤§ä¼šçš„PPTèµ„æ–™ï¼‰</p>
<h2 id="å¼€åœºèˆè¹ˆ"><a href="#å¼€åœºèˆè¹ˆ" class="headerlink" title="å¼€åœºèˆè¹ˆ"></a>å¼€åœºèˆè¹ˆ</h2><p><strong>è…¾è®¯ä¸“å±èˆå›¢SOSå¥³å­ç»„åˆèˆè¹ˆè¡¨æ¼”</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s.url.cn/ac/home1/img/img/new//music-9623e9.jpg" alt="è…¾è®¯ä¸“å±èˆå›¢SOSå¥³å­ç»„åˆèˆè¹ˆ" title="">
                </div>
                <div class="image-caption">è…¾è®¯ä¸“å±èˆå›¢SOSå¥³å­ç»„åˆèˆè¹ˆ</div>
            </figure></p>
<h2 id="é¢å‘äº¿ä¸‡çº§ç”¨æˆ·çš„WebåŒæ„ç›´å‡º"><a href="#é¢å‘äº¿ä¸‡çº§ç”¨æˆ·çš„WebåŒæ„ç›´å‡º" class="headerlink" title="é¢å‘äº¿ä¸‡çº§ç”¨æˆ·çš„WebåŒæ„ç›´å‡º"></a>é¢å‘äº¿ä¸‡çº§ç”¨æˆ·çš„WebåŒæ„ç›´å‡º</h2><p><strong>æå¼º</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s.url.cn/ac/home1/img/img/avatar//xiaoqiang-f93267.jpg" alt="AlloyTeam-æå¼º" title="">
                </div>
                <div class="image-caption">AlloyTeam-æå¼º</div>
            </figure><br>ç›´å‡ºæŠ€æœ¯ä½œä¸ºæå‡é¡µé¢é¦–å±æ€§èƒ½çš„ç»ˆææ‰‹æ®µï¼Œæ—©å·²è¿ç”¨åˆ°è…¾è®¯çš„å„ä¸ªä¸šåŠ¡ä¸­ï¼Œåˆ©ç”¨ç›´å‡ºæŠ€æœ¯ï¼ŒWebé¦–å±é¡µé¢çš„åŠ è½½é€Ÿåº¦èƒ½å¾—åˆ°æå¤§æå‡ã€‚è€Œæœ‰äº†Nodejsçš„æ”¯æŒï¼Œä½¿å¾—åŒæ„ç›´å‡ºä¹Ÿæˆä¸ºäº†å¯èƒ½ï¼Œåˆ©ç”¨åŒæ„ç›´å‡ºï¼Œå‰åç«¯ä¸å¿…å†ä¸ºéœ€è¦åŒæ—¶ç»´æŠ¤ä¸¤å¥—ä»£ç è€Œçƒ¦æ¼ã€‚å…´è¶£éƒ¨è½ä½œä¸ºæ‰‹Qå†…æ—¥å‡è®¿é—®é‡é«˜è¾¾5äº¿+çš„å¤§å‹webä¸šåŠ¡ï¼Œåœ¨åŒæ„ç›´å‡ºæ–¹é¢ä¹Ÿæœ‰éå¸¸å¤šçš„å®æˆ˜ç»éªŒæ¥ä¿è¯æœåŠ¡åœ¨é«˜å¹¶å‘é‡ä¸‹çš„å¯ç”¨æ€§ã€‚æå¼ºå°†ä¸ºä½ æ­æ™“è¿™ä¸€åˆ‡ã€‚</p>
<h2 id="å¤§å‹Webé¡¹ç›®å¯ç”¨æ€§æå‡-é›¶è„šæœ¬é”™è¯¯çš„å®æˆ˜"><a href="#å¤§å‹Webé¡¹ç›®å¯ç”¨æ€§æå‡-é›¶è„šæœ¬é”™è¯¯çš„å®æˆ˜" class="headerlink" title="å¤§å‹Webé¡¹ç›®å¯ç”¨æ€§æå‡ - é›¶è„šæœ¬é”™è¯¯çš„å®æˆ˜"></a>å¤§å‹Webé¡¹ç›®å¯ç”¨æ€§æå‡ - é›¶è„šæœ¬é”™è¯¯çš„å®æˆ˜</h2><p><strong>éƒ­æ—çƒ</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s.url.cn/ac/home1/img/img/avatar//joeyW-d2dcbc.jpg" alt="AlloyTeam-éƒ­æ—çƒ" title="">
                </div>
                <div class="image-caption">AlloyTeam-éƒ­æ—çƒ</div>
            </figure><br>è„šæœ¬é”™è¯¯å¯¹äºå‰ç«¯å¼€å‘è€…ä¸€ç‚¹éƒ½ä¸é™Œç”Ÿï¼Œä¸€æ—¦å‘ç”Ÿè„šæœ¬é”™è¯¯ï¼Œè½»åˆ™å½±å“é¡µé¢çš„ä¸€äº›åŠŸèƒ½ï¼Œé‡åˆ™ç›´æ¥å¯¼è‡´é¡µé¢ç™½å±ã€‚è™½ç„¶æˆ‘ä»¬åœ¨å¼€å‘ä¸­ç«­åŠ›é¿å…é¡µé¢å‡ºç°è„šæœ¬é”™è¯¯ï¼Œä½†å› ä¸ºç”¨æˆ·å¤„åœ¨å„å¼‚çš„ç½‘ç»œæƒ…å†µã€ä¸åŒçš„æµè§ˆå™¨ç±»å‹ç­‰å¤æ‚åœºæ™¯ä¸­ï¼Œè„šæœ¬é”™è¯¯æ¯å¤©ä»ç„¶å¤§é‡å‘ç”Ÿåœ¨ç”¨æˆ·çš„é¡µé¢ä¸Šã€‚AlloyTeamå›¢é˜Ÿåœ¨903036377ç¾¤ç­‰äº¿çº§pvçš„é¡¹ç›®ä¸­ç§¯ç´¯äº†å¤§é‡è„šæœ¬é”™è¯¯ç›‘æ§å’Œä¼˜åŒ–çš„ç›¸å…³ç»éªŒã€‚Joeyguoå°†é€šè¿‡æ­¤æ¬¡åˆ†äº«ï¼Œç”±æµ…å…¥æ·±æ¥è®²è§£å¦‚ä½•è®¾è®¡å’Œæ­å»ºä¸€ä¸ªå®Œå–„çš„è„šæœ¬é”™è¯¯ç›‘æ§ä¸ŠæŠ¥ã€é«˜æ•ˆå®šä½ä»¥åŠè°ƒä¼˜çš„å®æˆ˜æ–¹æ¡ˆã€‚</p>
<h2 id="å¦‚ä½•æ„å»ºåç°ä»£å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘ä½“ç³»"><a href="#å¦‚ä½•æ„å»ºåç°ä»£å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘ä½“ç³»" class="headerlink" title="å¦‚ä½•æ„å»ºåç°ä»£å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘ä½“ç³»"></a>å¦‚ä½•æ„å»ºåç°ä»£å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘ä½“ç³»</h2><p><strong>ææˆç†™</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s.url.cn/ac/home1/img/img/avatar//heyW-3796aa.jpg" alt="AlloyTeam-ææˆç†™" title="">
                </div>
                <div class="image-caption">AlloyTeam-ææˆç†™</div>
            </figure><br>AlloyTeamä¸€ç›´æ˜¯è…¾è®¯å‰ç«¯çš„ä¸šç•Œæ ‡æ†ã€‚åœ¨ä¸šåŠ¡ä¸Šï¼Œå›¢é˜Ÿè´Ÿè´£903036377ç¾¤ã€å…´è¶£éƒ¨è½ã€äº’åŠ¨ç›´æ’­ç­‰å‡ å¤§ä¸šåŠ¡çš„ä¼—å¤šéœ€æ±‚ã€‚åœ¨å…¬å¸å†…ï¼Œå›¢é˜Ÿåˆ›é€ å¹¶ç»´æŠ¤äº†è®¸å¤šå·¥å…·å¹³å°ã€‚åœ¨å…¬å¸å¤–ï¼Œå›¢é˜ŸåŠå¤§ä¼šï¼Œåšå¼€æºï¼Œå†™æ–‡ç« ï¼Œåšåˆ†äº«ã€‚åˆ°åº•æ˜¯AlloyTeamæ˜¯å‡­å€Ÿä»€ä¹ˆæˆä¸ºå¦‚æ­¤é«˜æ•ˆçš„å¼€å‘å›¢é˜Ÿå‘¢ï¼Ÿææˆç†™çš„æ­¤æ¬¡åˆ†äº«å°†ä¼šä¸ºä½ æ­å¼€ç¥ç§˜é¢çº±ï¼Œä»‹ç»AlloyTeamæˆå‘˜å¦‚ä½•åˆ©ç”¨å‰ç«¯ç°ä»£åŒ–å¼€å‘ä½“ç³»æ¥æé«˜è‡ªå·±çš„å·¥ä½œæ•ˆç‡ã€‚å¦‚æœä½ å¸Œæœ›è‡ªå·±æˆä¸ºä¸€ä¸ªé«˜æ•ˆç‡çš„å‰ç«¯å¼€å‘è€…ï¼Œæ­¤æ¬¡åˆ†äº«ä¸å®¹é”™è¿‡ã€‚</p>
<h2 id="Javascriptä¸æœºå™¨å­¦ä¹ çš„å‰ä¸–ä»Šç”Ÿ"><a href="#Javascriptä¸æœºå™¨å­¦ä¹ çš„å‰ä¸–ä»Šç”Ÿ" class="headerlink" title="Javascriptä¸æœºå™¨å­¦ä¹ çš„å‰ä¸–ä»Šç”Ÿ"></a>Javascriptä¸æœºå™¨å­¦ä¹ çš„å‰ä¸–ä»Šç”Ÿ</h2><p><strong>å¼ ç£Š</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s.url.cn/ac/home1/img/img/avatar//dntW-18115d.jpg" alt="AlloyTeam-å¼ ç£Š" title="">
                </div>
                <div class="image-caption">AlloyTeam-å¼ ç£Š</div>
            </figure><br>äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ æ˜¯ç›®å‰æœ€ç«çƒ­çš„æŠ€æœ¯ï¼ŒGoogle DeepMindçš„AlphaGoåœ¨ä¸‡ä¼—ç©ç›®ä¸‹æ‰“è´¥äº†å›´æ£‹å¤§å¸ˆæä¸–ä¹­ä¹æ®µå’ŒæŸ¯æ°ä¹æ®µï¼Œæ›´æ˜¯è®©äººä»¬å¯¹äººå·¥æ™ºèƒ½çš„æœŸå¾…åˆ°è¾¾äº†é¡¶ç‚¹ã€‚ä½œä¸ºå¯¹äººå·¥æ™ºèƒ½æ„Ÿå…´è¶£çš„å‰ç«¯å¼€å‘è€…ï¼Œæœºå™¨å­¦ä¹ å’ŒJavaScriptç»“åˆèƒ½å¸®åŠ©æˆ‘ä»¬åšäº›ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿå‰ç«¯å¼€å‘è€…æœ‰æ²¡æœ‰å¯èƒ½åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸè¿›è¡Œæ·±è€•ï¼ŸJavaScriptç¨‹åºå‘˜èƒ½å¤Ÿä»¥ä½•ç§æ–¹å¼è¿›å…¥äººå·¥æ™ºèƒ½ç ”ç©¶çš„é¢†åŸŸï¼ŸAlloyTeamå›¢é˜Ÿçš„å¼ ç£Šå°†ä¸ºä½ ä¸€ä¸€è§£å¯†ã€‚</p>
<h2 id="é«˜æ•ˆH5åŠ¨ç”»è®¾è®¡ä¸æ€§èƒ½ä¼˜åŒ–"><a href="#é«˜æ•ˆH5åŠ¨ç”»è®¾è®¡ä¸æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="é«˜æ•ˆH5åŠ¨ç”»è®¾è®¡ä¸æ€§èƒ½ä¼˜åŒ–"></a>é«˜æ•ˆH5åŠ¨ç”»è®¾è®¡ä¸æ€§èƒ½ä¼˜åŒ–</h2><p><strong>å»–æ³½æº</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s.url.cn/ac/home1/img/img/avatar//nemoW-2595f1.jpg" alt="AlloyTeam-å»–æ³½æº" title="">
                </div>
                <div class="image-caption">AlloyTeam-å»–æ³½æº</div>
            </figure><br>åœ¨ç§»åŠ¨è®¾å¤‡æ€§èƒ½è¶Šæ¥è¶Šå¥½çš„ä»Šå¤©ï¼ŒåŸºæœ¬çš„webå›¾æ–‡å±•ç¤ºæ—©å·²ä¸èƒ½æ»¡è¶³å¹¿å¤§ç”¨æˆ·çš„éœ€æ±‚ï¼Œè€Œéšç€flashæ­£å¼é€€å‡ºå†å²èˆå°ï¼Œh5åŠ¨ç”»å¿…å°†è¿æ¥åˆä¸€æ¬¡çš„é£è·ƒå‘å±•ã€‚å»–æ³½æºçš„æœ¬æ¬¡åˆ†äº«å°†å‘å¤§å®¶ä»‹ç»H5åŠ¨ç”»çš„å„ç§å®ç°åŸç†ã€åœ¨ä¸åŒåœºæ™¯ä¸‹å¦‚ä½•é€‰æ‹©æœ€åˆé€‚çš„åŠ¨ç”»å®ç°æ–¹å¼ã€å¦‚ä½•åœ¨ä¸åŒæœºå‹ä¸‹è¿›è¡Œé€‚é…ï¼Œä»¥åŠå¯¹åŠ¨ç”»æ€§èƒ½å’Œå¯é…ç½®æ€§ä¸Šè¿›è¡Œæ·±å…¥æ¢ç´¢ï¼Œå¸®åŠ©ä½ è½»æ¾åœ¨é¡¹ç›®ä¸­å®ç°å„ç§å„æ ·çš„åŠ¨ç”»ã€‚</p>
<h2 id="ES2017æ—¶ä»£çš„åå‡½æ•°å¼ç¼–ç¨‹"><a href="#ES2017æ—¶ä»£çš„åå‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="ES2017æ—¶ä»£çš„åå‡½æ•°å¼ç¼–ç¨‹"></a>ES2017æ—¶ä»£çš„åå‡½æ•°å¼ç¼–ç¨‹</h2><p><strong>ç‹æ–Œ</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s.url.cn/ac/home1/img/img/avatar//laowangW-9aa494.jpg" alt="AlloyTeam-ç‹æ–Œ" title="">
                </div>
                <div class="image-caption">AlloyTeam-ç‹æ–Œ</div>
            </figure><br>å‡½æ•°å¼ç¼–ç¨‹è‡³ä»Šå·²æœ‰60å¹´å†å²ï¼Œä½†æ—¶è‡³ä»Šæ—¥ä»ç„¶æœ‰è®¸å¤šå¼€å‘è€…è¢«å‡½æ•°å¼ç¼–ç¨‹çš„é­…åŠ›æ‰€æŠ˜æœã€‚å¦‚æœæˆ‘ä»¬å…³æ³¨è¿‡jqueryã€reactã€reduxç­‰æ¡†æ¶çš„æºä»£ç ï¼Œä¼šå‘ç°è¿™äº›æ¡†æ¶ä½œè€…éƒ½åŠ å…¥äº†éå¸¸å¤šçš„å‡½æ•°å¼ç¼–ç¨‹æŠ€å·§ã€‚å‡½æ•°å¼ç¼–ç¨‹ç©¶ç«Ÿæœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿå¯¹æˆ‘ä»¬å‰ç«¯å¼€å‘è€…ç¼–å†™ä»£ç ç©¶ç«Ÿæœ‰ä»€ä¹ˆå¸®åŠ©å‘¢ï¼Ÿç‹æ–Œå°†ä¸ºä½ ä»æµ…å…¥æ·±ä»‹ç»å‡½æ•°å¼ç¼–ç¨‹çš„åŸç†å’Œå®æˆ˜æŠ€å·§ï¼Œè®©ä½ åƒjqueryã€reactã€reduxä½œè€…ä¸€æ ·å†™å‡ºä¼˜é›…çš„ä»£ç ã€‚</p>
<h2 id="å¦‚ä½•æŠŠè‡ªå·±æ„å»ºæˆå¤§å‹äº’è”ç½‘å…¬å¸éœ€è¦çš„å‰ç«¯äººæ‰"><a href="#å¦‚ä½•æŠŠè‡ªå·±æ„å»ºæˆå¤§å‹äº’è”ç½‘å…¬å¸éœ€è¦çš„å‰ç«¯äººæ‰" class="headerlink" title="å¦‚ä½•æŠŠè‡ªå·±æ„å»ºæˆå¤§å‹äº’è”ç½‘å…¬å¸éœ€è¦çš„å‰ç«¯äººæ‰"></a>å¦‚ä½•æŠŠè‡ªå·±æ„å»ºæˆå¤§å‹äº’è”ç½‘å…¬å¸éœ€è¦çš„å‰ç«¯äººæ‰</h2><p><strong>æ½˜ä½³éŸ©</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://s.url.cn/ac/home1/img/img/avatar//weber-38f2e9.jpg" alt="Alloyteam-æ½˜ä½³éŸ©" title="">
                </div>
                <div class="image-caption">Alloyteam-æ½˜ä½³éŸ©</div>
            </figure></p>
<p>ä½œä¸ºä¸€ä¸ªå‰ç«¯æ–°äººï¼Œä¹Ÿè®¸ä½ æœ‰ç±»ä¼¼è¿™æ ·çš„é—®é¢˜ï¼šâ€œæˆ‘ç°åœ¨å¤§ä¸‰ï¼Œæ€ä¹ˆæ‰èƒ½è¿›å…¥è…¾è®¯å®ä¹ ï¼Ÿâ€â€œæˆ‘ç°åœ¨æ¯•ä¸š1å¹´ï¼Œå¦‚ä½•å­¦ä¹ å‰ç«¯â€â€œæ„Ÿè§‰æˆ‘ç°åœ¨çš„å·¥ä½œæ²¡ä»€ä¹ˆæŠ€æœ¯å«é‡ï¼Œè…¾è®¯çš„å‰ç«¯å·¥ç¨‹å¸ˆæ˜¯æ€ä¹ˆæ ·å·¥ä½œçš„ï¼Ÿâ€è€æ•™æˆ12å¹´è¿›å…¥è…¾è®¯AlloyTeamå·¥ä½œï¼Œä»å‰ç«¯å°ç™½æˆé•¿ä¸ºé«˜çº§å·¥ç¨‹å¸ˆå’Œé¢è¯•å®˜ã€‚æ­¤æ¬¡åˆ†äº«å°†ç»“åˆè€æ•™æˆè‡ªå·±çš„æˆé•¿ç»å†ï¼Œè®²è¿°å¦‚ä½•åœ¨å­¦æ ¡å’Œå·¥ä½œæ—¶å¦‚ä½•æ›´é«˜æ•ˆåœ°å­¦ä¹ å‰ç«¯çŸ¥è¯†ã€æ ¡æ‹›å’Œç¤¾æ‹›é¢è¯•æˆ‘ä»¬åˆ°åº•éœ€è¦ä»€ä¹ˆæ ·çš„å‰ç«¯äººæ‰ã€ä»¥åŠå‰ç«¯æ–°äººå¦‚ä½•è§„åˆ’èŒä¸šå‘å±•ã€‚ä¸è®ºæ˜¯å‰ç«¯æ–°äººè¿˜æ˜¯æœ‰ä¸€å®šå·¥ä½œç»éªŒçš„å¼€å‘è€…ï¼Œæ­¤æ¬¡åˆ†äº«éƒ½å¯ä»¥è®©ä½ å°‘èµ°å¼¯è·¯ï¼Œæ—©æ—¥æˆä¸ºå‰ç«¯å¤§ç‰›ã€‚</p>
<h2 id="AC2017å¤§ä¼šPPTèµ„æ–™ä¸‹è½½"><a href="#AC2017å¤§ä¼šPPTèµ„æ–™ä¸‹è½½" class="headerlink" title="AC2017å¤§ä¼šPPTèµ„æ–™ä¸‹è½½"></a>AC2017å¤§ä¼šPPTèµ„æ–™ä¸‹è½½</h2><p>é“¾æ¥ï¼š<a href="https://share.weiyun.com/b9aecb30a80a61e0f05536253b1912d6" target="_blank" rel="external">AlloyTeam Conf 2017å¤§ä¼šPPT</a><br>(å¯†ç ï¼šLcSQjy)</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;è…¾è®¯AlloyTeamå‰ç«¯å¤§ä¼šAC2017ä»‹ç»&quot;&gt;&lt;a href=&quot;#è…¾è®¯AlloyTeamå‰ç«¯å¤§ä¼šAC2017ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;è…¾è®¯AlloyTeamå‰ç«¯å¤§ä¼šAC2017ä»‹ç»&quot;&gt;&lt;/a&gt;è…¾è®¯AlloyTeamå‰ç«¯å¤§ä¼šAC
    
    </summary>
    
    
      <category term="AlloyTeam" scheme="https://microzz.com/tags/AlloyTeam/"/>
    
      <category term="å‰ç«¯" scheme="https://microzz.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="åˆ†äº«" scheme="https://microzz.com/tags/%E5%88%86%E4%BA%AB/"/>
    
      <category term="é™„ä»¶" scheme="https://microzz.com/tags/%E9%99%84%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>JSä¸­çš„å±æ€§æè¿°å¯¹è±¡</title>
    <link href="https://microzz.com/2017/09/10/js-attributes/"/>
    <id>https://microzz.com/2017/09/10/js-attributes/</id>
    <published>2017-09-10T00:49:28.000Z</published>
    <updated>2017-09-12T01:13:57.788Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScriptä¸­çš„å±æ€§æè¿°å¯¹è±¡"><a href="#JavaScriptä¸­çš„å±æ€§æè¿°å¯¹è±¡" class="headerlink" title="JavaScriptä¸­çš„å±æ€§æè¿°å¯¹è±¡"></a>JavaScriptä¸­çš„å±æ€§æè¿°å¯¹è±¡</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>JavaScriptæä¾›äº†ä¸€ä¸ªå†…éƒ¨æ•°æ®ç»“æ„ï¼Œç”¨æ¥æè¿°ä¸€ä¸ªå¯¹è±¡çš„å±æ€§çš„è¡Œä¸ºï¼Œæ§åˆ¶å®ƒçš„è¡Œä¸ºã€‚è¿™è¢«ç§°ä¸ºâ€œå±æ€§æè¿°å¯¹è±¡â€ï¼ˆattributes objectï¼‰ã€‚æ¯ä¸ªå±æ€§éƒ½æœ‰è‡ªå·±å¯¹åº”çš„å±æ€§æè¿°å¯¹è±¡ï¼Œä¿å­˜è¯¥å±æ€§çš„ä¸€äº›å…ƒä¿¡æ¯ã€‚</p>
<p>ä¸‹é¢æ˜¯å±æ€§æè¿°å¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ã€‚</p>
<pre><code class="javascript">{
  value: 123,
  writable: false,
  enumerable: true,
  configurable: false,
  get: undefined,
  set: undefined
}
</code></pre>
<p>å±æ€§æè¿°å¯¹è±¡æä¾›6ä¸ªå…ƒå±æ€§ã€‚</p>
<p>ï¼ˆ1ï¼‰<code>value</code></p>
<p><code>value</code>å­˜æ”¾è¯¥å±æ€§çš„å±æ€§å€¼ï¼Œé»˜è®¤ä¸º<code>undefined</code>ã€‚</p>
<p>ï¼ˆ2ï¼‰<code>writable</code></p>
<p><code>writable</code>å­˜æ”¾ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå±æ€§å€¼ï¼ˆvalueï¼‰æ˜¯å¦å¯æ”¹å˜ï¼Œé»˜è®¤ä¸º<code>true</code>ã€‚</p>
<p>ï¼ˆ3ï¼‰<code>enumerable</code></p>
<p><code>enumerable</code>å­˜æ”¾ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å±æ€§æ˜¯å¦å¯æšä¸¾ï¼Œé»˜è®¤ä¸º<code>true</code>ã€‚å¦‚æœè®¾ä¸º<code>false</code>ï¼Œä¼šä½¿å¾—æŸäº›æ“ä½œï¼ˆæ¯”å¦‚<code>for...in</code>å¾ªç¯ã€<code>Object.keys()</code>ï¼‰è·³è¿‡è¯¥å±æ€§ã€‚</p>
<p>ï¼ˆ4ï¼‰<code>configurable</code></p>
<p><code>configurable</code>å­˜æ”¾ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºâ€œå¯é…ç½®æ€§â€ï¼Œé»˜è®¤ä¸º<code>true</code>ã€‚å¦‚æœè®¾ä¸º<code>false</code>ï¼Œå°†é˜»æ­¢æŸäº›æ“ä½œæ”¹å†™è¯¥å±æ€§ï¼Œæ¯”å¦‚ï¼Œæ— æ³•åˆ é™¤è¯¥å±æ€§ï¼Œä¹Ÿä¸å¾—æ”¹å˜è¯¥å±æ€§çš„å±æ€§æè¿°å¯¹è±¡ï¼ˆ<code>value</code>å±æ€§é™¤å¤–ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>configurable</code>å±æ€§æ§åˆ¶äº†å±æ€§æè¿°å¯¹è±¡çš„å¯å†™æ€§ã€‚</p>
<p>ï¼ˆ5ï¼‰<code>get</code></p>
<p><code>get</code>å­˜æ”¾ä¸€ä¸ªå‡½æ•°ï¼Œè¡¨ç¤ºè¯¥å±æ€§çš„å–å€¼å‡½æ•°ï¼ˆgetterï¼‰ï¼Œé»˜è®¤ä¸º<code>undefined</code>ã€‚</p>
<p>ï¼ˆ6ï¼‰<code>set</code></p>
<p><code>set</code>å­˜æ”¾ä¸€ä¸ªå‡½æ•°ï¼Œè¡¨ç¤ºè¯¥å±æ€§çš„å­˜å€¼å‡½æ•°ï¼ˆsetterï¼‰ï¼Œé»˜è®¤ä¸º<code>undefined</code>ã€‚</p>
<h2 id="Object-getOwnPropertyDescriptor"><a href="#Object-getOwnPropertyDescriptor" class="headerlink" title="Object.getOwnPropertyDescriptor()"></a>Object.getOwnPropertyDescriptor()</h2><p><code>Object.getOwnPropertyDescriptor</code>æ–¹æ³•å¯ä»¥è¯»å‡ºå¯¹è±¡è‡ªèº«å±æ€§çš„å±æ€§æè¿°å¯¹è±¡ã€‚</p>
<pre><code class="javascript">var o = { p: &#39;a&#39; };

Object.getOwnPropertyDescriptor(o, &#39;p&#39;)
// Object { value: &quot;a&quot;,
//   writable: true,
//   enumerable: true,
//   configurable: true
// }
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œä½¿ç”¨<code>Object.getOwnPropertyDescriptor</code>æ–¹æ³•ï¼Œè¯»å–<code>o</code>å¯¹è±¡çš„<code>p</code>å±æ€§çš„å±æ€§æè¿°å¯¹è±¡ã€‚</p>
<h2 id="Object-defineProperty-ï¼ŒObject-defineProperties"><a href="#Object-defineProperty-ï¼ŒObject-defineProperties" class="headerlink" title="Object.defineProperty()ï¼ŒObject.defineProperties()"></a>Object.defineProperty()ï¼ŒObject.defineProperties()</h2><p><code>Object.defineProperty</code>æ–¹æ³•å…è®¸é€šè¿‡å®šä¹‰å±æ€§æè¿°å¯¹è±¡ï¼Œæ¥å®šä¹‰æˆ–ä¿®æ”¹ä¸€ä¸ªå±æ€§ï¼Œç„¶åè¿”å›ä¿®æ”¹åçš„å¯¹è±¡ã€‚å®ƒçš„æ ¼å¼å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">Object.defineProperty(object, propertyName, attributesObject)
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Object.defineProperty</code>æ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å±æ€§æ‰€åœ¨çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯å±æ€§åï¼ˆå®ƒåº”è¯¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰ï¼Œç¬¬ä¸‰ä¸ªæ˜¯å±æ€§çš„æè¿°å¯¹è±¡ã€‚æ¯”å¦‚ï¼Œæ–°å»ºä¸€ä¸ª<code>o</code>å¯¹è±¡ï¼Œå¹¶å®šä¹‰å®ƒçš„<code>p</code>å±æ€§ï¼Œå†™æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">var o = Object.defineProperty({}, &#39;p&#39;, {
  value: 123,
  writable: false,
  enumerable: true,
  configurable: false
});

o.p
// 123

o.p = 246;
o.p
// 123
// å› ä¸ºwritableä¸ºfalseï¼Œæ‰€ä»¥æ— æ³•æ”¹å˜è¯¥å±æ€§çš„å€¼
</code></pre>
<p>å¦‚æœå±æ€§å·²ç»å­˜åœ¨ï¼Œ<code>Object.defineProperty</code>æ–¹æ³•ç›¸å½“äºæ›´æ–°è¯¥å±æ€§çš„å±æ€§æè¿°å¯¹è±¡ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>Object.defineProperty</code>æ–¹æ³•å’Œåé¢çš„<code>Object.defineProperties</code>æ–¹æ³•ï¼Œéƒ½æœ‰æ€§èƒ½æŸè€—ï¼Œä¼šæ‹–æ…¢æ‰§è¡Œé€Ÿåº¦ï¼Œä¸å®œå¤§é‡ä½¿ç”¨ã€‚</p>
<p>å¦‚æœä¸€æ¬¡æ€§å®šä¹‰æˆ–ä¿®æ”¹å¤šä¸ªå±æ€§ï¼Œå¯ä»¥ä½¿ç”¨<code>Object.defineProperties</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">var o = Object.defineProperties({}, {
  p1: { value: 123, enumerable: true },
  p2: { value: &#39;abc&#39;, enumerable: true },
  p3: { get: function () { return this.p1 + this.p2 },
    enumerable:true,
    configurable:true
  }
});

o.p1 // 123
o.p2 // &quot;abc&quot;
o.p3 // &quot;123abc&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­çš„<code>p3</code>å±æ€§ï¼Œå®šä¹‰äº†å–å€¼å‡½æ•°<code>get</code>ã€‚è¿™æ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦å®šä¹‰äº†å–å€¼å‡½æ•°<code>get</code>ï¼ˆæˆ–å­˜å€¼å‡½æ•°<code>set</code>ï¼‰ï¼Œå°±ä¸èƒ½å°†<code>writable</code>è®¾ä¸º<code>true</code>ï¼Œæˆ–è€…åŒæ—¶å®šä¹‰<code>value</code>å±æ€§ï¼Œä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">var o = {};

Object.defineProperty(o, &#39;p&#39;, {
  value: 123,
  get: function() { return 456; }
});
// TypeError: Invalid property.
// A property cannot both have accessors and be writable or have a value,
</code></pre>
<p>ä¸Šé¢ä»£ç åŒæ—¶å®šä¹‰äº†<code>get</code>å±æ€§å’Œ<code>value</code>å±æ€§ï¼Œç»“æœå°±æŠ¥é”™ã€‚</p>
<p><code>Object.defineProperty()</code>å’Œ<code>Object.defineProperties()</code>çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå±æ€§å¯¹è±¡ã€‚å®ƒçš„<code>writable</code>ã€<code>configurable</code>ã€<code>enumerable</code>è¿™ä¸‰ä¸ªå±æ€§çš„é»˜è®¤å€¼éƒ½ä¸º<code>false</code>ã€‚</p>
<pre><code class="javascript">var obj = {};
Object.defineProperty(obj, &#39;foo&#39;, { configurable: true });
Object.getOwnPropertyDescriptor(obj, &#39;foo&#39;)
// {
//   value: undefined,
//   writable: false,
//   enumerable: false,
//   configurable: true
// }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå®šä¹‰<code>obj</code>å¯¹è±¡çš„<code>foo</code>å±æ€§æ—¶ï¼Œåªå®šä¹‰äº†å¯é…ç½®æ€§<code>configurable</code>ä¸º<code>true</code>ã€‚ç»“æœï¼Œå…¶ä»–å…ƒå±æ€§éƒ½æ˜¯é»˜è®¤å€¼ã€‚</p>
<p><code>writable</code>å±æ€§ä¸º<code>false</code>ï¼Œè¡¨ç¤ºå¯¹åº”çš„å±æ€§çš„å€¼å°†ä¸å¾—æ”¹å†™ã€‚</p>
<pre><code class="javascript">var o = {};

Object.defineProperty(o, &#39;p&#39;, {
  value: &quot;bar&quot;
});

o.p // bar

o.p = &#39;foobar&#39;;
o.p // bar

Object.defineProperty(o, &#39;p&#39;, {
  value: &#39;foobar&#39;,
});
// TypeError: Cannot redefine property: p
</code></pre>
<p>ä¸Šé¢ä»£ç ç”±äº<code>writable</code>å±æ€§é»˜è®¤ä¸º<code>false</code>ï¼Œå¯¼è‡´æ— æ³•å¯¹<code>p</code>å±æ€§é‡æ–°èµ‹å€¼ï¼Œä½†æ˜¯ä¸ä¼šæŠ¥é”™ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ï¼‰ã€‚ä¸è¿‡ï¼Œå¦‚æœå†ä¸€æ¬¡ä½¿ç”¨<code>Object.defineProperty</code>æ–¹æ³•å¯¹<code>value</code>å±æ€§èµ‹å€¼ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<p><code>configurable</code>å±æ€§ä¸º<code>false</code>ï¼Œå°†æ— æ³•åˆ é™¤è¯¥å±æ€§ï¼Œä¹Ÿæ— æ³•ä¿®æ”¹<code>attributes</code>å¯¹è±¡ï¼ˆ<code>value</code>å±æ€§é™¤å¤–ï¼‰ã€‚</p>
<pre><code class="javascript">var o = {};

Object.defineProperty(o, &#39;p&#39;, {
  value: &#39;bar&#39;,
});

delete o.p
o.p // &quot;bar&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äº<code>configurable</code>å±æ€§é»˜è®¤ä¸º<code>false</code>ï¼Œå¯¼è‡´æ— æ³•åˆ é™¤æŸä¸ªå±æ€§ã€‚</p>
<p><code>enumerable</code>å±æ€§ä¸º<code>false</code>ï¼Œè¡¨ç¤ºå¯¹åº”çš„å±æ€§ä¸ä¼šå‡ºç°åœ¨<code>for...in</code>å¾ªç¯å’Œ<code>Object.keys</code>æ–¹æ³•ä¸­ã€‚</p>
<pre><code class="javascript">var o = {
  p1: 10,
  p2: 13,
};

Object.defineProperty(o, &#39;p3&#39;, {
  value: 3,
});

for (var i in o) {
  console.log(i, o[i]);
}
// p1 10
// p2 13
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p3</code>å±æ€§æ˜¯ç”¨<code>Object.defineProperty</code>æ–¹æ³•å®šä¹‰çš„ï¼Œç”±äº<code>enumerable</code>å±æ€§é»˜è®¤ä¸º<code>false</code>ï¼Œæ‰€ä»¥ä¸å‡ºç°åœ¨<code>for...in</code>å¾ªç¯ä¸­ã€‚</p>
<h2 id="å…ƒå±æ€§"><a href="#å…ƒå±æ€§" class="headerlink" title="å…ƒå±æ€§"></a>å…ƒå±æ€§</h2><p>å±æ€§æè¿°å¯¹è±¡çš„å±æ€§ï¼Œè¢«ç§°ä¸ºâ€œå…ƒå±æ€§â€ï¼Œå› ä¸ºå®ƒå¯ä»¥çœ‹ä½œæ˜¯æ§åˆ¶å±æ€§çš„å±æ€§ã€‚</p>
<h3 id="å¯æšä¸¾æ€§ï¼ˆenumerableï¼‰"><a href="#å¯æšä¸¾æ€§ï¼ˆenumerableï¼‰" class="headerlink" title="å¯æšä¸¾æ€§ï¼ˆenumerableï¼‰"></a>å¯æšä¸¾æ€§ï¼ˆenumerableï¼‰</h3><p>JavaScriptçš„æœ€åˆç‰ˆæœ¬ï¼Œ<code>in</code> è¿ç®—ç¬¦å’ŒåŸºäºå®ƒçš„<code>for...in</code>å¾ªç¯ï¼Œä¼šéå†å¯¹è±¡å®ä¾‹çš„æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬ç»§æ‰¿çš„å±æ€§ã€‚</p>
<pre><code class="javascript">var obj = {};
&#39;toString&#39; in obj // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>toString</code>ä¸æ˜¯<code>obj</code>å¯¹è±¡è‡ªèº«çš„å±æ€§ï¼Œä½†æ˜¯<code>in</code>è¿ç®—ç¬¦ä¹Ÿè¿”å›<code>true</code>ï¼Œå¯¼è‡´è¢«<code>for...in</code>å¾ªç¯éå†ï¼Œè¿™æ˜¾ç„¶ä¸å¤ªåˆç†ã€‚åæ¥å°±å¼•å…¥äº†â€œå¯æšä¸¾æ€§â€è¿™ä¸ªæ¦‚å¿µï¼Œåªæœ‰å¯æšä¸¾çš„å±æ€§ï¼Œæ‰ä¼šè¢«<code>for...in</code>å¾ªç¯éå†ï¼ŒåŒæ—¶è¿˜è§„å®šåŸç”Ÿç»§æ‰¿çš„å±æ€§éƒ½æ˜¯ä¸å¯æšä¸¾çš„ï¼Œè¿™æ ·å°±ä¿è¯äº†<code>for...in</code>å¾ªç¯çš„å¯ç”¨æ€§ã€‚</p>
<p>å¯æšä¸¾æ€§ï¼ˆenumerableï¼‰ç”¨æ¥æ§åˆ¶æ‰€æè¿°çš„å±æ€§ï¼Œæ˜¯å¦å°†è¢«åŒ…æ‹¬åœ¨<code>for...in</code>å¾ªç¯ä¹‹ä¸­ã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªå±æ€§çš„<code>enumerable</code>ä¸º<code>false</code>ï¼Œä¸‹é¢ä¸‰ä¸ªæ“ä½œä¸ä¼šå–åˆ°è¯¥å±æ€§ã€‚</p>
<ul>
<li><code>for..in</code>å¾ªç¯</li>
<li><code>Object.keys</code>æ–¹æ³•</li>
<li><code>JSON.stringify</code>æ–¹æ³•</li>
</ul>
<p>å› æ­¤ï¼Œ<code>enumerable</code>å¯ä»¥ç”¨æ¥è®¾ç½®â€œç§˜å¯†â€å±æ€§ã€‚</p>
<pre><code class="javascript">var o = {a: 1, b: 2};

o.c = 3;
Object.defineProperty(o, &#39;d&#39;, {
  value: 4,
  enumerable: false
});

o.d // 4

for (var key in o) {
  console.log(o[key]);
}
// 1
// 2
// 3

Object.keys(o)  // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]

JSON.stringify(o) // &quot;{a:1, b:2, c:3}&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>d</code>å±æ€§çš„<code>enumerable</code>ä¸º<code>false</code>ï¼Œæ‰€ä»¥ä¸€èˆ¬çš„éå†æ“ä½œéƒ½æ— æ³•è·å–è¯¥å±æ€§ï¼Œä½¿å¾—å®ƒæœ‰ç‚¹åƒâ€œç§˜å¯†â€å±æ€§ï¼Œä½†ä¸æ˜¯çœŸæ­£çš„ç§æœ‰å±æ€§ï¼Œè¿˜æ˜¯å¯ä»¥ç›´æ¥è·å–å®ƒçš„å€¼ã€‚</p>
<p>åŸºæœ¬ä¸Šï¼ŒJavaScriptåŸç”Ÿæä¾›çš„å±æ€§éƒ½æ˜¯ä¸å¯æšä¸¾çš„ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§éƒ½æ˜¯å¯æšä¸¾çš„ã€‚</p>
<p>ä¸æšä¸¾æ€§ç›¸å…³çš„å‡ ä¸ªæ“ä½œçš„åŒºåˆ«çš„æ˜¯ï¼Œ<code>for...in</code>å¾ªç¯åŒ…æ‹¬ç»§æ‰¿è‡ªåŸå‹å¯¹è±¡çš„å±æ€§ï¼Œ<code>Object.keys</code>æ–¹æ³•åªè¿”å›å¯¹è±¡æœ¬èº«çš„å±æ€§ã€‚å¦‚æœéœ€è¦è·å–å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ï¼Œä¸ç®¡æ˜¯å¦å¯æšä¸¾ï¼Œå¯ä»¥ä½¿ç”¨<code>Object.getOwnPropertyNames</code>æ–¹æ³•ï¼Œè¯¦è§ä¸‹æ–‡ã€‚</p>
<p>è€ƒè™‘åˆ°<code>JSON.stringify</code>æ–¹æ³•ä¼šæ’é™¤<code>enumerable</code>ä¸º<code>false</code>çš„å€¼ï¼Œæœ‰æ—¶å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œä¸ºå¯¹è±¡æ·»åŠ æ³¨é‡Šä¿¡æ¯ã€‚</p>
<pre><code class="javascript">var car = {
  id: 123,
  color: &#39;red&#39;,
  ownerId: 12
};

var owner = {
  id: 12,
  name: &#39;Jack&#39;
};

Object.defineProperty(car, &#39;ownerInfo&#39;, {
  value: owner,
  enumerable: false
});

car.ownerInfo
// {id: 12, name: &quot;Jack&quot;}

JSON.stringify(car)
//  &quot;{&quot;id&quot;: 123,&quot;color&quot;: &quot;red&quot;,&quot;ownerId&quot;: 12}&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>owner</code>å¯¹è±¡ä½œä¸ºæ³¨é‡Šéƒ¨åˆ†ï¼ŒåŠ å…¥<code>car</code>å¯¹è±¡ã€‚ç”±äº<code>ownerInfo</code>å±æ€§ä¸å¯æšä¸¾ï¼Œæ‰€ä»¥<code>JSON.stringify</code>æ–¹æ³•æœ€åè¾“å‡º<code>car</code>å¯¹è±¡æ—¶ï¼Œä¼šå¿½ç•¥<code>ownerInfo</code>å±æ€§ã€‚</p>
<p>è¿™æç¤ºæˆ‘ä»¬ï¼Œå¦‚æœä½ ä¸æ„¿æ„æŸäº›å±æ€§å‡ºç°åœ¨JSONè¾“å‡ºä¹‹ä¸­ï¼Œå¯ä»¥æŠŠå®ƒçš„<code>enumerable</code>å±æ€§è®¾ä¸º<code>false</code>ã€‚</p>
<h3 id="å¯é…ç½®æ€§ï¼ˆconfigurableï¼‰"><a href="#å¯é…ç½®æ€§ï¼ˆconfigurableï¼‰" class="headerlink" title="å¯é…ç½®æ€§ï¼ˆconfigurableï¼‰"></a>å¯é…ç½®æ€§ï¼ˆconfigurableï¼‰</h3><p>å¯é…ç½®æ€§ï¼ˆconfigurableï¼‰å†³å®šäº†æ˜¯å¦å¯ä»¥ä¿®æ”¹å±æ€§æè¿°å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“<code>configurable</code>ä¸º<code>false</code>çš„æ—¶å€™ï¼Œvalueã€writableã€enumerableå’Œconfigurableéƒ½ä¸èƒ½è¢«ä¿®æ”¹äº†ã€‚</p>
<pre><code class="javascript">var o = Object.defineProperty({}, &#39;p&#39;, {
  value: 1,
  writable: false,
  enumerable: false,
  configurable: false
});

Object.defineProperty(o,&#39;p&#39;, {value: 2})
// TypeError: Cannot redefine property: p

Object.defineProperty(o,&#39;p&#39;, {writable: true})
// TypeError: Cannot redefine property: p

Object.defineProperty(o,&#39;p&#39;, {enumerable: true})
// TypeError: Cannot redefine property: p

Object.defineProperties(o,&#39;p&#39;,{configurable: true})
// TypeError: Cannot redefine property: p
</code></pre>
<p>ä¸Šé¢ä»£ç é¦–å…ˆå®šä¹‰å¯¹è±¡<code>o</code>ï¼Œå¹¶ä¸”å®šä¹‰<code>o</code>çš„å±æ€§<code>p</code>çš„<code>configurable</code>ä¸º<code>false</code>ã€‚ç„¶åï¼Œé€ä¸€æ”¹åŠ¨<code>value</code>ã€<code>writable</code>ã€<code>enumerable</code>ã€<code>configurable</code>ï¼Œç»“æœéƒ½æŠ¥é”™ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>writable</code>åªæœ‰åœ¨ä»<code>false</code>æ”¹ä¸º<code>true</code>ä¼šæŠ¥é”™ï¼Œä»<code>true</code>æ”¹ä¸º<code>false</code>åˆ™æ˜¯å…è®¸çš„ã€‚</p>
<pre><code class="javascript">var o = Object.defineProperty({}, &#39;p&#39;, {
  writable: true,
  configurable: false
});

Object.defineProperty(o,&#39;p&#39;, {writable: false})
// ä¿®æ”¹æˆåŠŸ
</code></pre>
<p>è‡³äº<code>value</code>ï¼Œåªè¦<code>writable</code>å’Œ<code>configurable</code>æœ‰ä¸€ä¸ªä¸º<code>true</code>ï¼Œå°±å…è®¸æ”¹åŠ¨ã€‚</p>
<pre><code class="javascript">var o1 = Object.defineProperty({}, &#39;p&#39;, {
  value: 1,
  writable: true,
  configurable: false
});

Object.defineProperty(o1,&#39;p&#39;, {value: 2})
// ä¿®æ”¹æˆåŠŸ

var o2 = Object.defineProperty({}, &#39;p&#39;, {
  value: 1,
  writable: false,
  configurable: true
});

Object.defineProperty(o2,&#39;p&#39;, {value: 2})
// ä¿®æ”¹æˆåŠŸ
</code></pre>
<p>å¦å¤–ï¼Œ<code>configurable</code>ä¸º<code>false</code>æ—¶ï¼Œç›´æ¥å¯¹è¯¥å±æ€§èµ‹å€¼ï¼Œä¸æŠ¥é”™ï¼Œä½†ä¸ä¼šæˆåŠŸã€‚</p>
<pre><code class="javascript">var o = Object.defineProperty({}, &#39;p&#39;, {
  value: 1,
  configurable: false
});

o.p = 2;
o.p // 1
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>o</code>å¯¹è±¡çš„<code>p</code>å±æ€§æ˜¯ä¸å¯é…ç½®çš„ï¼Œå¯¹å®ƒèµ‹å€¼æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚</p>
<p>å¯é…ç½®æ€§å†³å®šäº†ä¸€ä¸ªå˜é‡æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ï¼ˆdeleteï¼‰ã€‚</p>
<pre><code class="javascript">var o = Object.defineProperties({}, {
  p1: { value: 1, configurable: true },
  p2: { value: 2, configurable: false }
});

delete o.p1 // true
delete o.p2 // false

o.p1 // undefined
o.p2 // 2
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­çš„å¯¹è±¡<code>o</code>æœ‰ä¸¤ä¸ªå±æ€§ï¼Œ<code>p1</code>æ˜¯å¯é…ç½®çš„ï¼Œ<code>p2</code>æ˜¯ä¸å¯é…ç½®çš„ã€‚ç»“æœï¼Œ<code>p2</code>å°±æ— æ³•åˆ é™¤ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä½¿ç”¨<code>var</code>å‘½ä»¤å£°æ˜å˜é‡æ—¶ï¼Œå˜é‡çš„<code>configurable</code>ä¸º<code>false</code>ã€‚</p>
<pre><code class="javascript">var a1 = 1;

Object.getOwnPropertyDescriptor(this,&#39;a1&#39;)
// Object {
//  value: 1,
//  writable: true,
//  enumerable: true,
//  configurable: false
// }
</code></pre>
<p>è€Œä¸ä½¿ç”¨<code>var</code>å‘½ä»¤å£°æ˜å˜é‡æ—¶ï¼ˆæˆ–è€…ä½¿ç”¨å±æ€§èµ‹å€¼çš„æ–¹å¼å£°æ˜å˜é‡ï¼‰ï¼Œå˜é‡çš„å¯é…ç½®æ€§ä¸º<code>true</code>ã€‚</p>
<pre><code class="javascript">a2 = 1;

Object.getOwnPropertyDescriptor(this,&#39;a2&#39;)
// Object {
//  value: 1,
//  writable: true,
//  enumerable: true,
//  configurable: true
// }

// æˆ–è€…å†™æˆ

window.a3 = 1;

Object.getOwnPropertyDescriptor(window, &#39;a3&#39;)
// Object {
//  value: 1,
//  writable: true,
//  enumerable: true,
//  configurable: true
// }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­çš„<code>this.a3 = 1</code>ä¸<code>a3 = 1</code>æ˜¯ç­‰ä»·çš„å†™æ³•ã€‚<code>window</code>æŒ‡çš„æ˜¯æµè§ˆå™¨çš„é¡¶å±‚å¯¹è±¡ã€‚</p>
<p>è¿™ç§å·®å¼‚æ„å‘³ç€ï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ˜¯ä½¿ç”¨<code>var</code>å‘½ä»¤ç”Ÿæˆçš„ï¼Œå°±æ— æ³•ç”¨<code>delete</code>å‘½ä»¤åˆ é™¤ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>delete</code>åªèƒ½åˆ é™¤å¯¹è±¡çš„å±æ€§ã€‚</p>
<pre><code class="javascript">var a1 = 1;
a2 = 1;

delete a1 // false
delete a2 // true

a1 // 1
a2 // ReferenceError: a2 is not defined
</code></pre>
<h3 id="å¯å†™æ€§ï¼ˆwritableï¼‰"><a href="#å¯å†™æ€§ï¼ˆwritableï¼‰" class="headerlink" title="å¯å†™æ€§ï¼ˆwritableï¼‰"></a>å¯å†™æ€§ï¼ˆwritableï¼‰</h3><p>å¯å†™æ€§ï¼ˆwritableï¼‰å†³å®šäº†å±æ€§çš„å€¼ï¼ˆvalueï¼‰æ˜¯å¦å¯ä»¥è¢«æ”¹å˜ã€‚</p>
<pre><code class="javascript">var o = {};

Object.defineProperty(o, &#39;a&#39;, {
  value: 37,
  writable: false
});

o.a // 37
o.a = 25;
o.a // 37
</code></pre>
<p>ä¸Šé¢ä»£ç å°†<code>o</code>å¯¹è±¡çš„<code>a</code>å±æ€§å¯å†™æ€§è®¾ä¸º<code>false</code>ï¼Œç„¶åæ”¹å˜è¿™ä¸ªå±æ€§çš„å€¼ï¼Œå°±ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœã€‚</p>
<p>æ³¨æ„ï¼Œæ­£å¸¸æ¨¡å¼ä¸‹ï¼Œå¯¹å¯å†™æ€§ä¸º<code>false</code>çš„å±æ€§èµ‹å€¼ä¸ä¼šæŠ¥é”™ï¼Œåªä¼šé»˜é»˜å¤±è´¥ã€‚ä½†æ˜¯ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ï¼Œå³ä½¿æ˜¯å¯¹<code>a</code>å±æ€§é‡æ–°èµ‹äºˆä¸€ä¸ªåŒæ ·çš„å€¼ã€‚</p>
<p>å…³äºå¯å†™æ€§ï¼Œè¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚å°±æ˜¯å¦‚æœåŸå‹å¯¹è±¡çš„æŸä¸ªå±æ€§çš„å¯å†™æ€§ä¸º<code>false</code>ï¼Œé‚£ä¹ˆæ´¾ç”Ÿå¯¹è±¡å°†æ— æ³•è‡ªå®šä¹‰è¿™ä¸ªå±æ€§ã€‚</p>
<pre><code class="javascript">var proto = Object.defineProperty({}, &#39;foo&#39;, {
  value: &#39;a&#39;,
  writable: false
});

var o = Object.create(proto);

o.foo = &#39;b&#39;;
o.foo // &#39;a&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡<code>proto</code>çš„<code>foo</code>å±æ€§ä¸å¯å†™ï¼Œç»“æœ<code>proto</code>çš„æ´¾ç”Ÿå¯¹è±¡<code>o</code>ï¼Œä¹Ÿä¸å¯ä»¥å†è‡ªå®šä¹‰è¿™ä¸ªå±æ€§äº†ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™æ ·åšè¿˜ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªè§„é¿æ–¹æ³•ï¼Œå°±æ˜¯é€šè¿‡è¦†ç›–å±æ€§æè¿°å¯¹è±¡ï¼Œç»•è¿‡è¿™ä¸ªé™åˆ¶ï¼ŒåŸå› æ˜¯è¿™ç§æƒ…å†µä¸‹ï¼ŒåŸå‹é“¾ä¼šè¢«å®Œå…¨å¿½è§†ã€‚</p>
<pre><code class="javascript">Object.defineProperty(o, &#39;foo&#39;, {
  value: &#39;b&#39;
});

o.foo // &#39;b&#39;
</code></pre>
<h2 id="Object-getOwnPropertyNames"><a href="#Object-getOwnPropertyNames" class="headerlink" title="Object.getOwnPropertyNames()"></a>Object.getOwnPropertyNames()</h2><p><code>Object.getOwnPropertyNames</code>æ–¹æ³•è¿”å›ç›´æ¥å®šä¹‰åœ¨æŸä¸ªå¯¹è±¡ä¸Šé¢çš„å…¨éƒ¨å±æ€§çš„åç§°ï¼Œè€Œä¸ç®¡è¯¥å±æ€§æ˜¯å¦å¯æšä¸¾ã€‚</p>
<pre><code class="javascript">var o = Object.defineProperties({}, {
  p1: { value: 1, enumerable: true },
  p2: { value: 2, enumerable: false }
});

Object.getOwnPropertyNames(o)
// [&quot;p1&quot;, &quot;p2&quot;]
</code></pre>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œç³»ç»ŸåŸç”Ÿçš„å±æ€§ï¼ˆå³éç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§ï¼‰éƒ½æ˜¯ä¸å¯æšä¸¾çš„ã€‚</p>
<pre><code class="javascript">// æ¯”å¦‚ï¼Œæ•°ç»„å®ä¾‹è‡ªå¸¦lengthå±æ€§æ˜¯ä¸å¯æšä¸¾çš„
Object.keys([]) // []
Object.getOwnPropertyNames([]) // [ &#39;length&#39; ]

// Object.prototypeå¯¹è±¡çš„è‡ªå¸¦å±æ€§ä¹Ÿéƒ½æ˜¯ä¸å¯æšä¸¾çš„
Object.keys(Object.prototype) // []
Object.getOwnPropertyNames(Object.prototype)
// [&#39;hasOwnProperty&#39;,
//  &#39;valueOf&#39;,
//  &#39;constructor&#39;,
//  &#39;toLocaleString&#39;,
//  &#39;isPrototypeOf&#39;,
//  &#39;propertyIsEnumerable&#39;,
//  &#39;toString&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œæ•°ç»„çš„å®ä¾‹å¯¹è±¡ï¼ˆ<code>[]</code>ï¼‰æ²¡æœ‰å¯æšä¸¾å±æ€§ï¼Œä¸å¯æšä¸¾å±æ€§æœ‰lengthï¼›Object.prototypeå¯¹è±¡ä¹Ÿæ²¡æœ‰å¯æšä¸¾å±æ€§ï¼Œä½†æ˜¯æœ‰ä¸å°‘ä¸å¯æšä¸¾å±æ€§ã€‚</p>
<h2 id="Object-prototype-propertyIsEnumerable"><a href="#Object-prototype-propertyIsEnumerable" class="headerlink" title="Object.prototype.propertyIsEnumerable()"></a>Object.prototype.propertyIsEnumerable()</h2><p>å¯¹è±¡å®ä¾‹çš„<code>propertyIsEnumerable</code>æ–¹æ³•ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå±æ€§æ˜¯å¦å¯æšä¸¾ã€‚</p>
<pre><code class="javascript">var o = {};
o.p = 123;

o.propertyIsEnumerable(&#39;p&#39;) // true
o.propertyIsEnumerable(&#39;toString&#39;) // false
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”¨æˆ·è‡ªå®šä¹‰çš„<code>p</code>å±æ€§æ˜¯å¯æšä¸¾çš„ï¼Œè€Œç»§æ‰¿è‡ªåŸå‹å¯¹è±¡çš„<code>toString</code>å±æ€§æ˜¯ä¸å¯æšä¸¾çš„ã€‚</p>
<h2 id="å­˜å–å™¨ï¼ˆaccessorï¼‰"><a href="#å­˜å–å™¨ï¼ˆaccessorï¼‰" class="headerlink" title="å­˜å–å™¨ï¼ˆaccessorï¼‰"></a>å­˜å–å™¨ï¼ˆaccessorï¼‰</h2><p>é™¤äº†ç›´æ¥å®šä¹‰ä»¥å¤–ï¼Œå±æ€§è¿˜å¯ä»¥ç”¨å­˜å–å™¨ï¼ˆaccessorï¼‰å®šä¹‰ã€‚å…¶ä¸­ï¼Œå­˜å€¼å‡½æ•°ç§°ä¸º<code>setter</code>ï¼Œä½¿ç”¨<code>set</code>å‘½ä»¤ï¼›å–å€¼å‡½æ•°ç§°ä¸º<code>getter</code>ï¼Œä½¿ç”¨<code>get</code>å‘½ä»¤ã€‚</p>
<p>å­˜å–å™¨æä¾›çš„æ˜¯è™šæ‹Ÿå±æ€§ï¼Œå³è¯¥å±æ€§çš„å€¼ä¸æ˜¯å®é™…å­˜åœ¨çš„ï¼Œè€Œæ˜¯æ¯æ¬¡è¯»å–æ—¶è®¡ç®—ç”Ÿæˆçš„ã€‚åˆ©ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥å®ç°è®¸å¤šé«˜çº§ç‰¹æ€§ï¼Œæ¯”å¦‚æ¯ä¸ªå±æ€§ç¦æ­¢èµ‹å€¼ã€‚</p>
<pre><code class="javascript">var o = {
  get p() {
    return &#39;getter&#39;;
  },
  set p(value) {
    console.log(&#39;setter: &#39; + value);
  }
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>o</code>å¯¹è±¡å†…éƒ¨çš„<code>get</code>å’Œ<code>set</code>å‘½ä»¤ï¼Œåˆ†åˆ«å®šä¹‰äº†<code>p</code>å±æ€§çš„å–å€¼å‡½æ•°å’Œå­˜å€¼å‡½æ•°ã€‚å®šä¹‰äº†è¿™ä¸¤ä¸ªå‡½æ•°ä¹‹åï¼Œå¯¹<code>p</code>å±æ€§å–å€¼æ—¶ï¼Œå–å€¼å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨ï¼›å¯¹<code>p</code>å±æ€§èµ‹å€¼æ—¶ï¼Œå­˜å€¼å‡½æ•°ä¼šè‡ªåŠ¨è°ƒç”¨ã€‚</p>
<pre><code class="javascript">o.p // &quot;getter&quot;
o.p = 123 // &quot;setter: 123&quot;
</code></pre>
<p>æ³¨æ„ï¼Œå–å€¼å‡½æ•°Getterä¸èƒ½æ¥å—å‚æ•°ï¼Œå­˜å€¼å‡½æ•°Setteråªèƒ½æ¥å—ä¸€ä¸ªå‚æ•°ï¼ˆå³å±æ€§çš„å€¼ï¼‰ã€‚å¦å¤–ï¼Œå¯¹è±¡ä¹Ÿä¸èƒ½æœ‰ä¸å–å€¼å‡½æ•°åŒåçš„å±æ€§ã€‚æ¯”å¦‚ï¼Œä¸Šé¢çš„å¯¹è±¡<code>o</code>è®¾ç½®äº†å–å€¼å‡½æ•°<code>p</code>ä»¥åï¼Œå°±ä¸èƒ½å†å¦å¤–å®šä¹‰ä¸€ä¸ª<code>p</code>å±æ€§ã€‚</p>
<p>å­˜å–å™¨å¾€å¾€ç”¨äºï¼Œå±æ€§çš„å€¼éœ€è¦ä¾èµ–å¯¹è±¡å†…éƒ¨æ•°æ®çš„åœºåˆã€‚</p>
<pre><code class="javascript">var o ={
  $n : 5,
  get next() { return this.$n++ },
  set next(n) {
    if (n &gt;= this.$n) this.$n = n;
    else throw &#39;æ–°çš„å€¼å¿…é¡»å¤§äºå½“å‰å€¼&#39;;
  }
};

o.next // 5

o.next = 10;
o.next // 10
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>next</code>å±æ€§çš„å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°ï¼Œéƒ½ä¾èµ–äºå¯¹å†…éƒ¨å±æ€§<code>$n</code>çš„æ“ä½œã€‚</p>
<p>å­˜å–å™¨ä¹Ÿå¯ä»¥é€šè¿‡<code>Object.defineProperty</code>å®šä¹‰ã€‚</p>
<pre><code class="javascript">var d = new Date();

Object.defineProperty(d, &#39;month&#39;, {
  get: function () {
    return d.getMonth();
  },
  set: function (v) {
    d.setMonth(v);
  }
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸º<code>Date</code>çš„å®ä¾‹å¯¹è±¡<code>d</code>ï¼Œå®šä¹‰äº†ä¸€ä¸ªå¯è¯»å†™çš„<code>month</code>å±æ€§ã€‚</p>
<p>å­˜å–å™¨ä¹Ÿå¯ä»¥ä½¿ç”¨<code>Object.create</code>æ–¹æ³•å®šä¹‰ã€‚</p>
<pre><code class="javascript">var o = Object.create(Object.prototype, {
  foo: {
    get: function () {
      return &#39;getter&#39;;
    },
    set: function (value) {
      console.log(&#39;setter: &#39;+value);
    }
  }
});
</code></pre>
<p>å¦‚æœä½¿ç”¨ä¸Šé¢è¿™ç§å†™æ³•ï¼Œå±æ€§<code>foo</code>å¿…é¡»å®šä¹‰ä¸€ä¸ªå±æ€§æè¿°å¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„<code>get</code>å’Œ<code>set</code>å±æ€§ï¼Œåˆ†åˆ«æ˜¯<code>foo</code>çš„å–å€¼å‡½æ•°å’Œå­˜å€¼å‡½æ•°ã€‚</p>
<p>åˆ©ç”¨å­˜å–å™¨ï¼Œå¯ä»¥å®ç°æ•°æ®å¯¹è±¡ä¸DOMå¯¹è±¡çš„åŒå‘ç»‘å®šã€‚</p>
<pre><code class="javascript">Object.defineProperty(user, &#39;name&#39;, {
  get: function () {
    return document.getElementById(&#39;foo&#39;).value;
  },
  set: function (newValue) {
    document.getElementById(&#39;foo&#39;).value = newValue;
  },
  configurable: true
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨å­˜å–å‡½æ•°ï¼Œå°†DOMå¯¹è±¡<code>foo</code>ä¸æ•°æ®å¯¹è±¡<code>user</code>çš„<code>name</code>å±æ€§ï¼Œå®ç°äº†ç»‘å®šã€‚ä¸¤è€…ä¹‹ä¸­åªè¦æœ‰ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œå°±èƒ½åœ¨å¦ä¸€ä¸ªå¯¹è±¡ä¸Šå®æ—¶åæ˜ å‡ºæ¥ã€‚</p>
<h2 id="å¯¹è±¡çš„æ‹·è´"><a href="#å¯¹è±¡çš„æ‹·è´" class="headerlink" title="å¯¹è±¡çš„æ‹·è´"></a>å¯¹è±¡çš„æ‹·è´</h2><p>æœ‰æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œæ‹·è´åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚ES5æ²¡æœ‰æä¾›è¿™ä¸ªæ–¹æ³•ï¼Œå¿…é¡»è‡ªå·±å®ç°ã€‚</p>
<pre><code class="javascript">var extend = function (to, from) {
  for (var property in from) {
    to[property] = from[property];
  }

  return to;
}

extend({}, {
  a: 1
})
// {a: 1}
</code></pre>
<p>ä¸Šé¢è¿™ä¸ªæ–¹æ³•çš„é—®é¢˜åœ¨äºï¼Œå¦‚æœé‡åˆ°å­˜å–å™¨å®šä¹‰çš„å±æ€§ï¼Œä¼šåªæ‹·è´å€¼ã€‚</p>
<pre><code class="javascript">extend({}, {
  get a() { return 1 }
})
// {a: 1}
</code></pre>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>Object.defineProperty</code>æ–¹æ³•æ¥æ‹·è´å±æ€§ã€‚</p>
<pre><code class="javascript">var extend = function (to, from) {
  for (var property in from) {
    Object.defineProperty(
      to,
      property,
      Object.getOwnPropertyDescriptor(from, property)
    );
  }

  return to;
}

extend({}, { get a(){ return 1 } })
// { get a(){ return 1 } })
</code></pre>
<p>è¿™æ®µä»£ç è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œæ‹·è´æŸäº›å±æ€§æ—¶ä¼šå¤±æ•ˆã€‚</p>
<pre><code class="javascript">extend(document.body.style, {
  backgroundColor: &quot;red&quot;
});
</code></pre>
<p>ä¸Šé¢ä»£ç çš„ç›®çš„æ˜¯ï¼Œè®¾ç½®<code>document.body.style.backgroundColor</code>å±æ€§ä¸º<code>red</code>ï¼Œä½†æ˜¯å®é™…ä¸Šç½‘é¡µçš„èƒŒæ™¯è‰²å¹¶ä¸ä¼šå˜çº¢ã€‚ä½†æ˜¯ï¼Œå¦‚æœç”¨ç¬¬ä¸€ç§ç®€å•æ‹·è´çš„æ–¹æ³•ï¼Œåè€Œèƒ½å¤Ÿè¾¾åˆ°ç›®çš„ã€‚è¿™æç¤ºæˆ‘ä»¬ï¼Œå¯ä»¥æŠŠä¸¤ç§æ–¹æ³•ç»“åˆèµ·æ¥ï¼Œå¯¹äºç®€å•å±æ€§ï¼Œå°±ç›´æ¥æ‹·è´ï¼Œå¯¹äºé‚£äº›é€šè¿‡å±æ€§æè¿°å¯¹è±¡è®¾ç½®çš„å±æ€§ï¼Œåˆ™ä½¿ç”¨<code>Object.defineProperty</code>æ–¹æ³•æ‹·è´ã€‚</p>
<pre><code class="javascript">var extend = function (to, from) {
  for (var property in from) {
    var descriptor = Object.getOwnPropertyDescriptor(from, property);

    if (descriptor &amp;&amp; ( !descriptor.writable
      || !descriptor.configurable
      || !descriptor.enumerable
      || descriptor.get
      || descriptor.set)) {
      Object.defineProperty(to, property, descriptor);
    } else {
      to[property] = from[property];
    }
  }
}
</code></pre>
<p>ä¸Šé¢çš„è¿™æ®µä»£ç ï¼Œå¯ä»¥å¾ˆå¥½åœ°æ‹·è´å¯¹è±¡æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰çš„å±æ€§ã€‚</p>
<h2 id="æ§åˆ¶å¯¹è±¡çŠ¶æ€"><a href="#æ§åˆ¶å¯¹è±¡çŠ¶æ€" class="headerlink" title="æ§åˆ¶å¯¹è±¡çŠ¶æ€"></a>æ§åˆ¶å¯¹è±¡çŠ¶æ€</h2><p>JavaScriptæä¾›äº†ä¸‰ç§æ–¹æ³•ï¼Œç²¾ç¡®æ§åˆ¶ä¸€ä¸ªå¯¹è±¡çš„è¯»å†™çŠ¶æ€ï¼Œé˜²æ­¢å¯¹è±¡è¢«æ”¹å˜ã€‚æœ€å¼±ä¸€å±‚çš„ä¿æŠ¤æ˜¯<code>Object.preventExtensions</code>ï¼Œå…¶æ¬¡æ˜¯<code>Object.seal</code>ï¼Œæœ€å¼ºçš„<code>Object.freeze</code>ã€‚</p>
<h3 id="Object-preventExtensions"><a href="#Object-preventExtensions" class="headerlink" title="Object.preventExtensions()"></a>Object.preventExtensions()</h3><p><code>Object.preventExtensions</code>æ–¹æ³•å¯ä»¥ä½¿å¾—ä¸€ä¸ªå¯¹è±¡æ— æ³•å†æ·»åŠ æ–°çš„å±æ€§ã€‚</p>
<pre><code class="javascript">var o = new Object();

Object.preventExtensions(o);

Object.defineProperty(o, &#39;p&#39;, {
  value: &#39;hello&#39;
});
// TypeError: Cannot define property:p, object is not extensible.

o.p = 1;
o.p // undefined
</code></pre>
<p>å¦‚æœæ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p>
<pre><code class="javascript">(function () {
  &#39;use strict&#39;;
  o.p = &#39;1&#39;
}());
// TypeError: Can&#39;t add property bar, object is not extensible
</code></pre>
<p>ä¸è¿‡ï¼Œå¯¹äºä½¿ç”¨äº†<code>preventExtensions</code>æ–¹æ³•çš„å¯¹è±¡ï¼Œå¯ä»¥ç”¨<code>delete</code>å‘½ä»¤åˆ é™¤å®ƒçš„ç°æœ‰å±æ€§ã€‚</p>
<pre><code class="javascript">var o = new Object();
o.p = 1;

Object.preventExtensions(o);

delete o.p;
o.p // undefined
</code></pre>
<h3 id="Object-isExtensible"><a href="#Object-isExtensible" class="headerlink" title="Object.isExtensible()"></a>Object.isExtensible()</h3><p><code>Object.isExtensible</code>æ–¹æ³•ç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä½¿ç”¨äº†<code>Object.preventExtensions</code>æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥ä¸ºä¸€ä¸ªå¯¹è±¡æ·»åŠ å±æ€§ã€‚</p>
<pre><code class="javascript">var o = new Object();

Object.isExtensible(o) // true
Object.preventExtensions(o);
Object.isExtensible(o) // false
</code></pre>
<p>ä¸Šé¢ä»£ç æ–°ç”Ÿæˆäº†ä¸€ä¸ªoå¯¹è±¡ï¼Œå¯¹è¯¥å¯¹è±¡ä½¿ç”¨<code>Object.isExtensible</code>æ–¹æ³•ï¼Œè¿”å›<code>true</code>ï¼Œè¡¨ç¤ºå¯ä»¥æ·»åŠ æ–°å±æ€§ã€‚å¯¹è¯¥å¯¹è±¡ä½¿ç”¨<code>Object.preventExtensions</code>æ–¹æ³•ä»¥åï¼Œå†ä½¿ç”¨<code>Object.isExtensible</code>æ–¹æ³•ï¼Œè¿”å›<code>false</code>ï¼Œè¡¨ç¤ºå·²ç»ä¸èƒ½æ·»åŠ æ–°å±æ€§äº†ã€‚</p>
<h3 id="Object-seal"><a href="#Object-seal" class="headerlink" title="Object.seal()"></a>Object.seal()</h3><p><code>Object.seal</code>æ–¹æ³•ä½¿å¾—ä¸€ä¸ªå¯¹è±¡æ—¢æ— æ³•æ·»åŠ æ–°å±æ€§ï¼Œä¹Ÿæ— æ³•åˆ é™¤æ—§å±æ€§ã€‚</p>
<pre><code class="javascript">var o = {
  p: &#39;hello&#39;
};

Object.seal(o);

delete o.p;
o.p // &quot;hello&quot;

o.x = &#39;world&#39;;
o.x // undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡æ‰§è¡Œ<code>Object.seal</code>æ–¹æ³•ä»¥åï¼Œå°±æ— æ³•æ·»åŠ æ–°å±æ€§å’Œåˆ é™¤æ—§å±æ€§äº†ã€‚</p>
<p><code>Object.seal</code>å®è´¨æ˜¯æŠŠå±æ€§æè¿°å¯¹è±¡çš„<code>configurable</code>å±æ€§è®¾ä¸º<code>false</code>ï¼Œå› æ­¤å±æ€§æè¿°å¯¹è±¡ä¸å†èƒ½æ”¹å˜äº†ã€‚</p>
<pre><code class="javascript">var o = {
  p: &#39;a&#39;
};

// sealæ–¹æ³•ä¹‹å‰
Object.getOwnPropertyDescriptor(o, &#39;p&#39;)
// Object {
//   value: &quot;a&quot;,
//   writable: true,
//   enumerable: true,
//   configurable: true
// }

Object.seal(o);

// sealæ–¹æ³•ä¹‹å
Object.getOwnPropertyDescriptor(o, &#39;p&#39;)
// Object {
//   value: &quot;a&quot;,
//   writable: true,
//   enumerable: true,
//   configurable: false
// }

Object.defineProperty(o, &#39;p&#39;, {
  enumerable: false
})
// TypeError: Cannot redefine property: p
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä½¿ç”¨<code>Object.seal</code>æ–¹æ³•ä¹‹åï¼Œå±æ€§æè¿°å¯¹è±¡çš„<code>configurable</code>å±æ€§å°±å˜æˆäº†<code>false</code>ï¼Œç„¶åæ”¹å˜<code>enumerable</code>å±æ€§å°±ä¼šæŠ¥é”™ã€‚</p>
<p>å¯å†™æ€§ï¼ˆwritableï¼‰æœ‰ç‚¹ç‰¹åˆ«ã€‚å¦‚æœ<code>writable</code>ä¸º<code>false</code>ï¼Œä½¿ç”¨<code>Object.seal</code>æ–¹æ³•ä»¥åï¼Œå°†æ— æ³•å°†å…¶å˜æˆ<code>true</code>ï¼›ä½†æ˜¯ï¼Œå¦‚æœ<code>writable</code>ä¸º<code>true</code>ï¼Œä¾ç„¶å¯ä»¥å°†å…¶å˜æˆ<code>false</code>ã€‚</p>
<pre><code class="javascript">var o1 = Object.defineProperty({}, &#39;p&#39;, {
  writable: false
});
Object.seal(o1);
Object.defineProperty(o1, &#39;p&#39;, {
  writable:true
})
// Uncaught TypeError: Cannot redefine property: p

var o2 = Object.defineProperty({}, &#39;p&#39;, {
  writable: true
});
Object.seal(o2);
Object.defineProperty(o2, &#39;p&#39;, {
  writable:false
});

Object.getOwnPropertyDescriptor(o2, &#39;p&#39;)
// {
//   value: &#39;&#39;,
//   writable: false,
//   enumerable: true,
//   configurable: false
// }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒåŒæ ·æ˜¯ä½¿ç”¨äº†<code>Object.seal</code>æ–¹æ³•ï¼Œå¦‚æœ<code>writable</code>åŸä¸º<code>false</code>ï¼Œæ”¹å˜è¿™ä¸ªè®¾ç½®å°†æŠ¥é”™ï¼›å¦‚æœåŸä¸º<code>true</code>ï¼Œåˆ™ä¸ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>è‡³äºå±æ€§å¯¹è±¡çš„<code>value</code>æ˜¯å¦å¯æ”¹å˜ï¼Œæ˜¯ç”±<code>writable</code>å†³å®šçš„ã€‚</p>
<pre><code class="javascript">var o = { p: &#39;a&#39; };
Object.seal(o);
o.p = &#39;b&#39;;
o.p // &#39;b&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Object.seal</code>æ–¹æ³•å¯¹<code>p</code>å±æ€§çš„<code>value</code>æ— æ•ˆï¼Œæ˜¯å› ä¸ºæ­¤æ—¶<code>p</code>å±æ€§çš„<code>writable</code>ä¸º<code>true</code>ã€‚</p>
<h3 id="Object-isSealed"><a href="#Object-isSealed" class="headerlink" title="Object.isSealed()"></a>Object.isSealed()</h3><p><code>Object.isSealed</code>æ–¹æ³•ç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä½¿ç”¨äº†<code>Object.seal</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">var o = { p: &#39;a&#39; };

Object.seal(o);
Object.isSealed(o) // true
</code></pre>
<p>è¿™æ—¶ï¼Œ<code>Object.isExtensible</code>æ–¹æ³•ä¹Ÿè¿”å›<code>false</code>ã€‚</p>
<pre><code class="javascript">var o = { p: &#39;a&#39; };

Object.seal(o);
Object.isExtensible(o) // false
</code></pre>
<h3 id="Object-freeze"><a href="#Object-freeze" class="headerlink" title="Object.freeze()"></a>Object.freeze()</h3><p><code>Object.freeze</code>æ–¹æ³•å¯ä»¥ä½¿å¾—ä¸€ä¸ªå¯¹è±¡æ— æ³•æ·»åŠ æ–°å±æ€§ã€æ— æ³•åˆ é™¤æ—§å±æ€§ã€ä¹Ÿæ— æ³•æ”¹å˜å±æ€§çš„å€¼ï¼Œä½¿å¾—è¿™ä¸ªå¯¹è±¡å®é™…ä¸Šå˜æˆäº†å¸¸é‡ã€‚</p>
<pre><code class="javascript">var o = {
  p: &#39;hello&#39;
};

Object.freeze(o);

o.p = &#39;world&#39;;
o.p // hello

o.t = &#39;hello&#39;;
o.t // undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹ç°æœ‰å±æ€§é‡æ–°èµ‹å€¼ï¼ˆ<code>o.p = &#39;world&#39;</code>ï¼‰æˆ–è€…æ·»åŠ ä¸€ä¸ªæ–°å±æ€§ï¼Œå¹¶ä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯é»˜é»˜åœ°å¤±è´¥ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">var o = {
  p: &#39;hello&#39;
};

Object.freeze(o);

// å¯¹ç°æœ‰å±æ€§é‡æ–°èµ‹å€¼
(function () {
  &#39;use strict&#39;;
  o.p = &#39;world&#39;;
}())
// TypeError: Cannot assign to read only property &#39;p&#39; of #&lt;Object&gt;

// æ·»åŠ ä¸å­˜åœ¨çš„å±æ€§
(function () {
  &#39;use strict&#39;;
  o.t = 123;
}())
// TypeError: Can&#39;t add property t, object is not extensible
</code></pre>
<h3 id="Object-isFrozen"><a href="#Object-isFrozen" class="headerlink" title="Object.isFrozen()"></a>Object.isFrozen()</h3><p><code>Object.isFrozen</code>æ–¹æ³•ç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä½¿ç”¨äº†<code>Object.freeze()</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">var obj = {
  p: &#39;hello&#39;
};

Object.freeze(obj);
Object.isFrozen(obj) // true
</code></pre>
<p>å‰é¢è¯´è¿‡ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡è¢«å†»ç»“ï¼Œå†å¯¹å®ƒçš„å±æ€§èµ‹å€¼ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™ã€‚<code>Object.isFrozen</code>æ–¹æ³•å¯ä»¥é˜²æ­¢å‘ç”Ÿè¿™æ ·çš„é”™è¯¯ã€‚</p>
<pre><code class="javascript">var obj = {
  p: &#39;hello&#39;
};

Object.freeze(obj);

if (!Object.isFrozen(obj)) {
  obj.p = &#39;world&#39;;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¡®è®¤<code>obj</code>æ²¡æœ‰è¢«å†»ç»“åï¼Œå†å¯¹å®ƒçš„å±æ€§èµ‹å€¼ï¼Œå°±ä¸ä¼šæŠ¥é”™äº†ã€‚</p>
<h3 id="å±€é™æ€§"><a href="#å±€é™æ€§" class="headerlink" title="å±€é™æ€§"></a>å±€é™æ€§</h3><p>ä¸Šé¢çš„æ–¹æ³•é”å®šå¯¹è±¡çš„å¯å†™æ€§æœ‰ä¸€ä¸ªæ¼æ´ï¼Œä¾ç„¶å¯ä»¥é€šè¿‡æ”¹å˜åŸå‹å¯¹è±¡ï¼Œæ¥ä¸ºå¯¹è±¡å¢åŠ å±æ€§ã€‚</p>
<pre><code class="javascript">var obj = new Object();
Object.preventExtensions(obj);

var proto = Object.getPrototypeOf(obj);
proto.t = &#39;hello&#39;;
obj.t
// hello
</code></pre>
<p>ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ï¼ŒæŠŠåŸå‹ä¹Ÿå†»ç»“ä½ã€‚</p>
<pre><code class="javascript">var obj = Object.seal(
  Object.create(
    Object.freeze({x: 1}),
    {
      y: {
        value: 2,
        writable: true
      }
    }
  )
);

Object.getPrototypeOf(obj).hello = &quot;hello&quot;;
obj.hello // undefined
</code></pre>
<p>å¦å¤–ä¸€ä¸ªå±€é™æ˜¯ï¼Œå¦‚æœå±æ€§å€¼æ˜¯å¯¹è±¡ï¼Œä¸Šé¢è¿™äº›æ–¹æ³•åªèƒ½å†»ç»“å±æ€§æŒ‡å‘çš„å¯¹è±¡ï¼Œè€Œä¸èƒ½å†»ç»“å¯¹è±¡æœ¬èº«çš„å†…å®¹ã€‚</p>
<pre><code class="javascript">var obj = {
  foo: 1,
  bar: [&#39;a&#39;, &#39;b&#39;]
};
Object.freeze(obj);

obj.bar.push(&#39;c&#39;);
obj.bar // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>obj.bar</code>å±æ€§æŒ‡å‘ä¸€ä¸ªæ•°ç»„ï¼Œ<code>obj</code>å¯¹è±¡è¢«å†»ç»“ä»¥åï¼Œè¿™ä¸ªæŒ‡å‘æ— æ³•æ”¹å˜ï¼Œå³æ— æ³•æŒ‡å‘å…¶ä»–å€¼ï¼Œä½†æ˜¯æ‰€æŒ‡å‘çš„æ•°ç»„æ˜¯å¯ä»¥æ”¹å˜çš„ã€‚</p>
<h2 id="å…³äº"><a href="#å…³äº" class="headerlink" title="å…³äº"></a>å…³äº</h2><p>æœ¬æ–‡ä»…ä¾›å­¦ä¹ äº¤æµåˆ†äº«ï¼ŒåŸæ–‡é“¾æ¥ <a href="http://javascript.ruanyifeng.com/stdlib/attributes.html" target="_blank" rel="external">å±æ€§æè¿°å¯¹è±¡</a>ï¼Œæ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆ</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScriptä¸­çš„å±æ€§æè¿°å¯¹è±¡&quot;&gt;&lt;a href=&quot;#JavaScriptä¸­çš„å±æ€§æè¿°å¯¹è±¡&quot; class=&quot;headerlink&quot; title=&quot;JavaScriptä¸­çš„å±æ€§æè¿°å¯¹è±¡&quot;&gt;&lt;/a&gt;JavaScriptä¸­çš„å±æ€§æè¿°å¯¹è±¡&lt;/h1&gt;&lt;h2 id=&quot;æ¦‚
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="Descriptor" scheme="https://microzz.com/tags/Descriptor/"/>
    
      <category term="å±æ€§æè¿°å¯¹è±¡" scheme="https://microzz.com/tags/%E5%B1%9E%E6%80%A7%E6%8F%8F%E8%BF%B0%E5%AF%B9%E8%B1%A1/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptä¸­çš„RegExpå¯¹è±¡</title>
    <link href="https://microzz.com/2017/08/26/js-regexp/"/>
    <id>https://microzz.com/2017/08/26/js-regexp/</id>
    <published>2017-08-26T02:04:05.000Z</published>
    <updated>2017-09-13T02:10:40.890Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JSä¸­çš„æ­£åˆ™å¯¹è±¡"><a href="#JSä¸­çš„æ­£åˆ™å¯¹è±¡" class="headerlink" title="JSä¸­çš„æ­£åˆ™å¯¹è±¡"></a>JSä¸­çš„æ­£åˆ™å¯¹è±¡</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>æ­£åˆ™è¡¨è¾¾å¼ï¼ˆregular expressionï¼‰æ˜¯ä¸€ç§è¡¨è¾¾æ–‡æœ¬æ¨¡å¼ï¼ˆå³å­—ç¬¦ä¸²ç»“æ„ï¼‰çš„æ–¹æ³•ï¼Œæœ‰ç‚¹åƒå­—ç¬¦ä¸²çš„æ¨¡æ¿ï¼Œå¸¸å¸¸ç”¨ä½œæŒ‰ç…§â€œç»™å®šæ¨¡å¼â€åŒ¹é…æ–‡æœ¬çš„å·¥å…·ã€‚æ¯”å¦‚ï¼Œæ­£åˆ™è¡¨è¾¾å¼ç»™å‡ºä¸€ä¸ª Email åœ°å€çš„æ¨¡å¼ï¼Œç„¶åç”¨å®ƒæ¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸º Email åœ°å€ã€‚JavaScript çš„æ­£åˆ™è¡¨è¾¾å¼ä½“ç³»æ˜¯å‚ç…§ Perl 5 å»ºç«‹çš„ã€‚</p>
<p>æ–°å»ºæ­£åˆ™è¡¨è¾¾å¼æœ‰ä¸¤ç§æ–¹æ³•ã€‚ä¸€ç§æ˜¯ä½¿ç”¨å­—é¢é‡ï¼Œä»¥æ–œæ è¡¨ç¤ºå¼€å§‹å’Œç»“æŸã€‚</p>
<pre><code class="javascript">var regex = /xyz/;
</code></pre>
<p>å¦ä¸€ç§æ˜¯ä½¿ç”¨ RegExp æ„é€ å‡½æ•°ã€‚</p>
<pre><code class="javascript">var regex = new RegExp(&#39;xyz&#39;);
</code></pre>
<p>ä¸Šé¢ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼Œéƒ½æ–°å»ºäº†ä¸€ä¸ªå†…å®¹ä¸º<code>xyz</code>çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚å®ƒä»¬çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œç¬¬ä¸€ç§æ–¹æ³•åœ¨ç¼–è¯‘æ—¶æ–°å»ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œç¬¬äºŒç§æ–¹æ³•åœ¨è¿è¡Œæ—¶æ–°å»ºæ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<p>RegExp æ„é€ å‡½æ•°è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä¿®é¥°ç¬¦ï¼ˆè¯¦ç»†è§£é‡Šè§ä¸‹æ–‡ï¼‰ã€‚</p>
<pre><code class="javascript">var regex = new RegExp(&#39;xyz&#39;, &quot;i&quot;);
// ç­‰ä»·äº
var regex = /xyz/i;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼<code>/xyz/</code>æœ‰ä¸€ä¸ªä¿®é¥°ç¬¦<code>i</code>ã€‚</p>
<p>è¿™ä¸¤ç§å†™æ³•â€”â€”å­—é¢é‡å’Œæ„é€ å‡½æ•°â€”â€”åœ¨è¿è¡Œæ—¶æœ‰ä¸€ä¸ªç»†å¾®çš„åŒºåˆ«ã€‚é‡‡ç”¨å­—é¢é‡çš„å†™æ³•ï¼Œæ­£åˆ™å¯¹è±¡åœ¨ä»£ç è½½å…¥æ—¶ï¼ˆå³ç¼–è¯‘æ—¶ï¼‰ç”Ÿæˆï¼›é‡‡ç”¨æ„é€ å‡½æ•°çš„æ–¹æ³•ï¼Œæ­£åˆ™å¯¹è±¡åœ¨ä»£ç è¿è¡Œæ—¶ç”Ÿæˆã€‚è€ƒè™‘åˆ°ä¹¦å†™çš„ä¾¿åˆ©å’Œç›´è§‚ï¼Œå®é™…åº”ç”¨ä¸­ï¼ŒåŸºæœ¬ä¸Šéƒ½é‡‡ç”¨å­—é¢é‡çš„å†™æ³•ã€‚</p>
<p>æ­£åˆ™å¯¹è±¡ç”Ÿæˆä»¥åï¼Œæœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p>
<ul>
<li>æ­£åˆ™å¯¹è±¡çš„æ–¹æ³•ï¼šå°†å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œæ¯”å¦‚<code>regex.test(string)</code>ã€‚</li>
<li>å­—ç¬¦ä¸²å¯¹è±¡çš„æ–¹æ³•ï¼šå°†æ­£åˆ™å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œæ¯”å¦‚<code>string.match(regex)</code>ã€‚</li>
</ul>
<p>è¿™ä¸¤ç§ä½¿ç”¨æ–¹å¼ä¸‹é¢éƒ½ä¼šä»‹ç»ã€‚</p>
<h2 id="æ­£åˆ™å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•"><a href="#æ­£åˆ™å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•" class="headerlink" title="æ­£åˆ™å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•"></a>æ­£åˆ™å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•</h2><h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><p>æ­£åˆ™å¯¹è±¡çš„å±æ€§åˆ†æˆä¸¤ç±»ã€‚</p>
<p>ä¸€ç±»æ˜¯ä¿®é¥°ç¬¦ç›¸å…³ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå¯¹åº”çš„ä¿®é¥°ç¬¦æ˜¯å¦è®¾ç½®ã€‚</p>
<ul>
<li><strong>ignoreCase</strong>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†iä¿®é¥°ç¬¦ï¼Œè¯¥å±æ€§åªè¯»ã€‚</li>
<li><strong>global</strong>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†gä¿®é¥°ç¬¦ï¼Œè¯¥å±æ€§åªè¯»ã€‚</li>
<li><strong>multiline</strong>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†mä¿®é¥°ç¬¦ï¼Œè¯¥å±æ€§åªè¯»ã€‚</li>
</ul>
<pre><code class="javascript">var r = /abc/igm;

r.ignoreCase // true
r.global // true
r.multiline // true
</code></pre>
<p>å¦ä¸€ç±»æ˜¯ä¸ä¿®é¥°ç¬¦æ— å…³çš„å±æ€§ï¼Œä¸»è¦æ˜¯ä¸‹é¢ä¸¤ä¸ªã€‚</p>
<ul>
<li><code>lastIndex</code>ï¼šè¿”å›ä¸‹ä¸€æ¬¡å¼€å§‹æœç´¢çš„ä½ç½®ã€‚è¯¥å±æ€§å¯è¯»å†™ï¼Œä½†æ˜¯åªåœ¨è®¾ç½®äº†<code>g</code>ä¿®é¥°ç¬¦æ—¶æœ‰æ„ä¹‰ã€‚</li>
<li><code>source</code>ï¼šè¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²å½¢å¼ï¼ˆä¸åŒ…æ‹¬åæ–œæ ï¼‰ï¼Œè¯¥å±æ€§åªè¯»ã€‚</li>
</ul>
<pre><code class="javascript">var r = /abc/igm;

r.lastIndex // 0
r.source // &quot;abc&quot;
</code></pre>
<h3 id="test"><a href="#test" class="headerlink" title="test()"></a>test()</h3><p>æ­£åˆ™å¯¹è±¡çš„<code>test</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰æ¨¡å¼æ˜¯å¦èƒ½åŒ¹é…å‚æ•°å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">/cat/.test(&#39;cats and dogs&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç éªŒè¯å‚æ•°å­—ç¬¦ä¸²ä¹‹ä¸­æ˜¯å¦åŒ…å«<code>cat</code>ï¼Œç»“æœè¿”å›<code>true</code>ã€‚</p>
<p>å¦‚æœæ­£åˆ™è¡¨è¾¾å¼å¸¦æœ‰<code>g</code>ä¿®é¥°ç¬¦ï¼Œåˆ™æ¯ä¸€æ¬¡<code>test</code>æ–¹æ³•éƒ½ä»ä¸Šä¸€æ¬¡ç»“æŸçš„ä½ç½®å¼€å§‹å‘ååŒ¹é…ã€‚</p>
<pre><code class="javascript">var r = /x/g;
var s = &#39;_x_x&#39;;

r.lastIndex // 0
r.test(s) // true

r.lastIndex // 2
r.test(s) // true

r.lastIndex // 4
r.test(s) // false
</code></pre>
<p>ä¸Šé¢ä»£ç çš„æ­£åˆ™å¯¹è±¡ä½¿ç”¨äº†<code>g</code>ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºè¦è®°å½•æœç´¢ä½ç½®ã€‚æ¥ç€ï¼Œä¸‰æ¬¡ä½¿ç”¨<code>test</code>æ–¹æ³•ï¼Œæ¯ä¸€æ¬¡å¼€å§‹æœç´¢çš„ä½ç½®éƒ½æ˜¯ä¸Šä¸€æ¬¡åŒ¹é…çš„åä¸€ä¸ªä½ç½®ã€‚</p>
<p>å¸¦æœ‰<code>g</code>ä¿®é¥°ç¬¦æ—¶ï¼Œå¯ä»¥é€šè¿‡æ­£åˆ™å¯¹è±¡çš„<code>lastIndex</code>å±æ€§æŒ‡å®šå¼€å§‹æœç´¢çš„ä½ç½®ã€‚</p>
<pre><code class="javascript">var r = /x/g;
var s = &#39;_x_x&#39;;

r.lastIndex = 4;
r.test(s) // false
</code></pre>
<p>ä¸Šé¢ä»£ç æŒ‡å®šä»å­—ç¬¦ä¸²çš„ç¬¬äº”ä¸ªä½ç½®å¼€å§‹æœç´¢ï¼Œè¿™ä¸ªä½ç½®æ˜¯æ²¡æœ‰å­—ç¬¦çš„ï¼Œæ‰€ä»¥è¿”å›<code>false</code>ã€‚</p>
<p><code>lastIndex</code>å±æ€§åªå¯¹åŒä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æœ‰æ•ˆï¼Œæ‰€ä»¥ä¸‹é¢è¿™æ ·å†™æ˜¯é”™è¯¯çš„ã€‚</p>
<pre><code class="javascript">var count = 0;
while (/a/g.test(&#39;babaa&#39;)) count++;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¼šå¯¼è‡´æ— é™å¾ªç¯ï¼Œå› ä¸º<code>while</code>å¾ªç¯çš„æ¯æ¬¡åŒ¹é…æ¡ä»¶éƒ½æ˜¯ä¸€ä¸ªæ–°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯¼è‡´<code>lastIndex</code>å±æ€§æ€»æ˜¯ç­‰äº0ã€‚</p>
<p>å¦‚æœæ­£åˆ™æ¨¡å¼æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œåˆ™åŒ¹é…æ‰€æœ‰å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">new RegExp(&#39;&#39;).test(&#39;abc&#39;)
// true
</code></pre>
<h3 id="exec"><a href="#exec" class="headerlink" title="exec()"></a>exec()</h3><p>æ­£åˆ™å¯¹è±¡çš„<code>exec</code>æ–¹æ³•ï¼Œå¯ä»¥è¿”å›åŒ¹é…ç»“æœã€‚å¦‚æœå‘ç°åŒ¹é…ï¼Œå°±è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯æ¯ä¸€ä¸ªåŒ¹é…æˆåŠŸçš„å­å­—ç¬¦ä¸²ï¼Œå¦åˆ™è¿”å›<code>null</code>ã€‚</p>
<pre><code class="javascript">var s = &#39;_x_x&#39;;
var r1 = /x/;
var r2 = /y/;

r1.exec(s) // [&quot;x&quot;]
r2.exec(s) // null
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™å¯¹è±¡<code>r1</code>åŒ¹é…æˆåŠŸï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯åŒ¹é…ç»“æœï¼›æ­£åˆ™å¯¹è±¡<code>r2</code>åŒ¹é…å¤±è´¥ï¼Œè¿”å›<code>null</code>ã€‚</p>
<p>å¦‚æœæ­£åˆ™è¡¨ç¤ºå¼åŒ…å«åœ†æ‹¬å·ï¼ˆå³å«æœ‰â€œç»„åŒ¹é…â€ï¼‰ï¼Œåˆ™è¿”å›çš„æ•°ç»„ä¼šåŒ…æ‹¬å¤šä¸ªæˆå‘˜ã€‚ç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯æ•´ä¸ªåŒ¹é…æˆåŠŸçš„ç»“æœï¼Œåé¢çš„æˆå‘˜å°±æ˜¯åœ†æ‹¬å·å¯¹åº”çš„åŒ¹é…æˆåŠŸçš„ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬äºŒä¸ªæˆå‘˜å¯¹åº”ç¬¬ä¸€ä¸ªæ‹¬å·ï¼Œç¬¬ä¸‰ä¸ªæˆå‘˜å¯¹åº”ç¬¬äºŒä¸ªæ‹¬å·ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ•´ä¸ªæ•°ç»„çš„<code>length</code>å±æ€§ç­‰äºç»„åŒ¹é…çš„æ•°é‡å†åŠ 1ã€‚</p>
<pre><code class="javascript">var s = &#39;_x_x&#39;;
var r = /_(x)/;

r.exec(s) // [&quot;_x&quot;, &quot;x&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç çš„<code>exec</code>æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚ç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯æ•´ä¸ªåŒ¹é…çš„ç»“æœï¼Œç¬¬äºŒä¸ªæˆå‘˜æ˜¯åœ†æ‹¬å·åŒ¹é…çš„ç»“æœã€‚</p>
<p><code>exec</code>æ–¹æ³•çš„è¿”å›æ•°ç»„è¿˜åŒ…å«ä»¥ä¸‹ä¸¤ä¸ªå±æ€§ï¼š</p>
<ul>
<li><code>input</code>ï¼šæ•´ä¸ªåŸå­—ç¬¦ä¸²ã€‚</li>
<li><code>index</code>ï¼šæ•´ä¸ªæ¨¡å¼åŒ¹é…æˆåŠŸçš„å¼€å§‹ä½ç½®ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰ã€‚</li>
</ul>
<pre><code class="javascript">var r = /a(b+)a/;
var arr = r.exec(&#39;_abbba_aba_&#39;);

arr // [&quot;abbba&quot;, &quot;bbb&quot;]

arr.index // 1
arr.input // &quot;_abbba_aba_&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­çš„<code>index</code>å±æ€§ç­‰äº1ï¼Œæ˜¯å› ä¸ºä»åŸå­—ç¬¦ä¸²çš„ç¬¬äºŒä¸ªä½ç½®å¼€å§‹åŒ¹é…æˆåŠŸã€‚</p>
<p>å¦‚æœæ­£åˆ™è¡¨è¾¾å¼åŠ ä¸Š<code>g</code>ä¿®é¥°ç¬¦ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¤šæ¬¡<code>exec</code>æ–¹æ³•ï¼Œä¸‹ä¸€æ¬¡æœç´¢çš„ä½ç½®ä»ä¸Šä¸€æ¬¡åŒ¹é…æˆåŠŸç»“æŸçš„ä½ç½®å¼€å§‹ã€‚</p>
<pre><code class="javascript">var r = /a(b+)a/g;

var a1 = r.exec(&#39;_abbba_aba_&#39;);
a1 // [&#39;abbba&#39;, &#39;bbb&#39;]
a1.index // 1
r.lastIndex // 6

var a2 = r.exec(&#39;_abbba_aba_&#39;);
a2 // [&#39;aba&#39;, &#39;b&#39;]
a2.index // 7
r.lastIndex // 10

var a3 = r.exec(&#39;_abbba_aba_&#39;);
a3 // null
a3.index // TypeError: Cannot read property &#39;index&#39; of null
r.lastIndex // 0

var a4 = r.exec(&#39;_abbba_aba_&#39;);
a4 // [&#39;abbba&#39;, &#39;bbb&#39;]
a4.index // 1
r.lastIndex // 6
</code></pre>
<p>ä¸Šé¢ä»£ç è¿ç»­ç”¨äº†å››æ¬¡<code>exec</code>æ–¹æ³•ï¼Œå‰ä¸‰æ¬¡éƒ½æ˜¯ä»ä¸Šä¸€æ¬¡åŒ¹é…ç»“æŸçš„ä½ç½®å‘ååŒ¹é…ã€‚å½“ç¬¬ä¸‰æ¬¡åŒ¹é…ç»“æŸä»¥åï¼Œæ•´ä¸ªå­—ç¬¦ä¸²å·²ç»åˆ°è¾¾å°¾éƒ¨ï¼Œæ­£åˆ™å¯¹è±¡çš„<code>lastIndex</code>å±æ€§é‡ç½®ä¸º<code>0</code>ï¼Œæ„å‘³ç€ç¬¬å››æ¬¡åŒ¹é…å°†ä»å¤´å¼€å§‹ã€‚</p>
<p>åˆ©ç”¨<code>g</code>ä¿®é¥°ç¬¦å…è®¸å¤šæ¬¡åŒ¹é…çš„ç‰¹ç‚¹ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªå¾ªç¯å®Œæˆå…¨éƒ¨åŒ¹é…ã€‚</p>
<pre><code class="javascript">var r = /a(b+)a/g;
var s = &#39;_abbba_aba_&#39;;

while(true) {
  var match = r.exec(s);
  if (!match) break;
  console.log(match[1]);
}
// bbb
// b
</code></pre>
<p>æ­£åˆ™å¯¹è±¡çš„<code>lastIndex</code>å±æ€§ä¸ä»…å¯è¯»ï¼Œè¿˜å¯å†™ã€‚ä¸€æ—¦æ‰‹åŠ¨è®¾ç½®äº†<code>lastIndex</code>çš„å€¼ï¼Œå°±ä¼šä»æŒ‡å®šä½ç½®å¼€å§‹åŒ¹é…ã€‚ä½†æ˜¯ï¼Œè¿™åªåœ¨è®¾ç½®äº†<code>g</code>ä¿®é¥°ç¬¦çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šæœ‰æ•ˆã€‚</p>
<pre><code class="javascript">var r = /a/;

r.lastIndex = 7; // æ— æ•ˆ
var match = r.exec(&#39;xaxa&#39;);
match.index // 1
r.lastIndex // 7
</code></pre>
<p>ä¸Šé¢ä»£ç è®¾ç½®äº†<code>lastIndex</code>å±æ€§ï¼Œä½†æ˜¯å› ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰<code>g</code>ä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥æ˜¯æ— æ•ˆçš„ã€‚æ¯æ¬¡åŒ¹é…éƒ½æ˜¯ä»å­—ç¬¦ä¸²çš„å¤´éƒ¨å¼€å§‹ã€‚</p>
<p>å¦‚æœæœ‰<code>g</code>ä¿®é¥°ç¬¦ï¼Œ<code>lastIndex</code>å±æ€§å°±ä¼šç”Ÿæ•ˆã€‚</p>
<pre><code class="javascript">var r = /a/g;

r.lastIndex = 2;
var match = r.exec(&#39;xaxa&#39;);
match.index // 3
r.lastIndex // 4
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>lastIndex</code>å±æ€§æŒ‡å®šä»å­—ç¬¦çš„ç¬¬ä¸‰ä¸ªä½ç½®å¼€å§‹åŒ¹é…ã€‚æˆåŠŸåï¼Œä¸‹ä¸€æ¬¡åŒ¹é…å°±æ˜¯ä»ç¬¬äº”ä¸ªä½ç½®å¼€å§‹ã€‚</p>
<p>å¦‚æœæ­£åˆ™å¯¹è±¡æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œåˆ™<code>exec</code>æ–¹æ³•ä¼šåŒ¹é…æˆåŠŸï¼Œä½†è¿”å›çš„ä¹Ÿæ˜¯ç©ºå­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">var r1 = new RegExp(&#39;&#39;);
var a1 = r1.exec(&#39;abc&#39;);
a1 // [&#39;&#39;]
a1.index // 0
r1.lastIndex // 0

var r2 = new RegExp(&#39;()&#39;);
var a2 = r2.exec(&#39;abc&#39;);
a2 // [&#39;&#39;, &#39;&#39;]
a2.index // 0
r2.lastIndex // 0
</code></pre>
<h2 id="å­—ç¬¦ä¸²å¯¹è±¡çš„æ–¹æ³•"><a href="#å­—ç¬¦ä¸²å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²å¯¹è±¡çš„æ–¹æ³•"></a>å­—ç¬¦ä¸²å¯¹è±¡çš„æ–¹æ³•</h2><p>å­—ç¬¦ä¸²å¯¹è±¡çš„æ–¹æ³•ä¹‹ä¸­ï¼Œæœ‰4ç§ä¸æ­£åˆ™å¯¹è±¡æœ‰å…³ã€‚</p>
<ul>
<li><code>match()</code>ï¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯æ‰€æœ‰åŒ¹é…çš„å­å­—ç¬¦ä¸²ã€‚</li>
<li><code>search()</code>ï¼šæŒ‰ç…§ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæœç´¢ï¼Œè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºåŒ¹é…å¼€å§‹çš„ä½ç½®ã€‚</li>
<li><code>replace()</code>ï¼šæŒ‰ç…§ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ›¿æ¢ï¼Œè¿”å›æ›¿æ¢åçš„å­—ç¬¦ä¸²ã€‚</li>
<li><code>split()</code>ï¼šæŒ‰ç…§ç»™å®šè§„åˆ™è¿›è¡Œå­—ç¬¦ä¸²åˆ†å‰²ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«åˆ†å‰²åçš„å„ä¸ªæˆå‘˜ã€‚</li>
</ul>
<p>ä¸‹é¢é€ä¸€ä»‹ç»ã€‚</p>
<h3 id="String-prototype-match"><a href="#String-prototype-match" class="headerlink" title="String.prototype.match()"></a>String.prototype.match()</h3><p>å­—ç¬¦ä¸²å¯¹è±¡çš„<code>match</code>æ–¹æ³•å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ­£åˆ™åŒ¹é…ï¼Œè¿”å›åŒ¹é…ç»“æœã€‚</p>
<pre><code class="javascript">var s = &#39;_x_x&#39;;
var r1 = /x/;
var r2 = /y/;

s.match(r1) // [&quot;x&quot;]
s.match(r2) // null
</code></pre>
<p>ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œå­—ç¬¦ä¸²çš„<code>match</code>æ–¹æ³•ä¸æ­£åˆ™å¯¹è±¡çš„<code>exec</code>æ–¹æ³•éå¸¸ç±»ä¼¼ï¼šåŒ¹é…æˆåŠŸè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ¹é…å¤±è´¥è¿”å›<code>null</code>ã€‚</p>
<p>å¦‚æœæ­£åˆ™è¡¨è¾¾å¼å¸¦æœ‰<code>g</code>ä¿®é¥°ç¬¦ï¼Œåˆ™è¯¥æ–¹æ³•ä¸æ­£åˆ™å¯¹è±¡çš„<code>exec</code>æ–¹æ³•è¡Œä¸ºä¸åŒï¼Œä¼šä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰åŒ¹é…æˆåŠŸçš„ç»“æœã€‚</p>
<pre><code class="javascript">var s = &#39;abba&#39;;
var r = /a/g;

s.match(r) // [&quot;a&quot;, &quot;a&quot;]
r.exec(s) // [&quot;a&quot;]
</code></pre>
<p>è®¾ç½®æ­£åˆ™è¡¨è¾¾å¼çš„<code>lastIndex</code>å±æ€§ï¼Œå¯¹<code>match</code>æ–¹æ³•æ— æ•ˆï¼ŒåŒ¹é…æ€»æ˜¯ä»å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ã€‚</p>
<pre><code class="javascript">var r = /a|b/g;
r.lastIndex = 7;
&#39;xaxb&#39;.match(r) // [&#39;a&#39;, &#39;b&#39;]
r.lastIndex // 0
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œè®¾ç½®<code>lastIndex</code>å±æ€§æ˜¯æ— æ•ˆçš„ã€‚</p>
<h3 id="String-prototype-search"><a href="#String-prototype-search" class="headerlink" title="String.prototype.search()"></a>String.prototype.search()</h3><p>å­—ç¬¦ä¸²å¯¹è±¡çš„<code>search</code>æ–¹æ³•ï¼Œè¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„åŒ¹é…ç»“æœåœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä½ç½®ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•åŒ¹é…ï¼Œåˆ™è¿”å›<code>-1</code>ã€‚</p>
<pre><code class="javascript">&#39;_x_x&#39;.search(/x/)
// 1
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªåŒ¹é…ç»“æœå‡ºç°åœ¨å­—ç¬¦ä¸²çš„<code>1</code>å·ä½ç½®ã€‚</p>
<p>è¯¥æ–¹æ³•ä¼šå¿½ç•¥<code>g</code>ä¿®é¥°ç¬¦ã€‚</p>
<pre><code class="javascript">var r = /x/g;
r.lastIndex = 2; // æ— æ•ˆ
&#39;_x_x&#39;.search(r) // 1
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨<code>g</code>ä¿®é¥°ç¬¦ä¹‹åï¼Œä½¿ç”¨<code>lastIndex</code>å±æ€§æŒ‡å®šå¼€å§‹åŒ¹é…çš„ä½ç½®ï¼Œç»“æœæ— æ•ˆï¼Œè¿˜æ˜¯ä»å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹åŒ¹é…ã€‚</p>
<h3 id="String-prototype-replace"><a href="#String-prototype-replace" class="headerlink" title="String.prototype.replace()"></a>String.prototype.replace()</h3><p>å­—ç¬¦ä¸²å¯¹è±¡çš„<code>replace</code>æ–¹æ³•å¯ä»¥æ›¿æ¢åŒ¹é…çš„å€¼ã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æœç´¢æ¨¡å¼ï¼Œç¬¬äºŒä¸ªæ˜¯æ›¿æ¢çš„å†…å®¹ã€‚</p>
<pre><code class="javascript">str.replace(search, replacement)
</code></pre>
<p>æœç´¢æ¨¡å¼å¦‚æœä¸åŠ gä¿®é¥°ç¬¦ï¼Œå°±æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…æˆåŠŸçš„å€¼ï¼Œå¦åˆ™æ›¿æ¢æ‰€æœ‰åŒ¹é…æˆåŠŸçš„å€¼ã€‚</p>
<pre><code class="javascript">&#39;aaa&#39;.replace(&#39;a&#39;, &#39;b&#39;) // &quot;baa&quot;
&#39;aaa&#39;.replace(/a/, &#39;b&#39;) // &quot;baa&quot;
&#39;aaa&#39;.replace(/a/g, &#39;b&#39;) // &quot;bbb&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæœ€åä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨äº†<code>g</code>ä¿®é¥°ç¬¦ï¼Œå¯¼è‡´æ‰€æœ‰çš„<code>b</code>éƒ½è¢«æ›¿æ¢æ‰äº†ã€‚</p>
<p><code>replace</code>æ–¹æ³•çš„ä¸€ä¸ªåº”ç”¨ï¼Œå°±æ˜¯æ¶ˆé™¤å­—ç¬¦ä¸²é¦–å°¾ä¸¤ç«¯çš„ç©ºæ ¼ã€‚</p>
<pre><code class="javascript">var str = &#39;  #id div.class  &#39;;

str.replace(/^\s+|\s+$/g, &#39;&#39;)
// &quot;#id div.class&quot;
</code></pre>
<p>replaceæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ä½¿ç”¨ç¾å…ƒç¬¦å·$ï¼Œç”¨æ¥æŒ‡ä»£æ‰€æ›¿æ¢çš„å†…å®¹ã€‚</p>
<ul>
<li><code>$&amp;</code> æŒ‡ä»£åŒ¹é…çš„å­å­—ç¬¦ä¸²ã€‚</li>
<li><code>$` </code> æŒ‡ä»£åŒ¹é…ç»“æœå‰é¢çš„æ–‡æœ¬ã€‚</li>
<li><code>$&#39;</code> æŒ‡ä»£åŒ¹é…ç»“æœåé¢çš„æ–‡æœ¬ã€‚</li>
<li><code>$n</code> æŒ‡ä»£åŒ¹é…æˆåŠŸçš„ç¬¬<code>n</code>ç»„å†…å®¹ï¼Œ<code>n</code>æ˜¯ä»1å¼€å§‹çš„è‡ªç„¶æ•°ã€‚</li>
<li><code>$$</code> æŒ‡ä»£ç¾å…ƒç¬¦å·<code>$</code>ã€‚</li>
</ul>
<pre><code class="javascript">&#39;hello world&#39;.replace(/(\w+)\s(\w+)/, &#39;$2 $1&#39;)
// &quot;world hello&quot;

&#39;abc&#39;.replace(&#39;b&#39;, &#39;[$`-$&amp;-$\&#39;]&#39;)
// &quot;a[a-b-c]c&quot;
</code></pre>
<p><code>replace</code>æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°†æ¯ä¸€ä¸ªåŒ¹é…å†…å®¹æ›¿æ¢ä¸ºå‡½æ•°è¿”å›å€¼ã€‚</p>
<pre><code class="javascript">&#39;3 and 5&#39;.replace(/[0-9]+/g, function(match){
  return 2 * match;
})
// &quot;6 and 10&quot;

var a = &#39;The quick brown fox jumped over the lazy dog.&#39;;
var pattern = /quick|brown|lazy/ig;

a.replace(pattern, function replacer(match) {
  return match.toUpperCase();
});
// The QUICK BROWN fox jumped over the LAZY dog.
</code></pre>
<p>ä½œä¸º<code>replace</code>æ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°çš„æ›¿æ¢å‡½æ•°ï¼Œå¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•æ‰åˆ°çš„å†…å®¹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•æ‰åˆ°çš„ç»„åŒ¹é…ï¼ˆæœ‰å¤šå°‘ä¸ªç»„åŒ¹é…ï¼Œå°±æœ‰å¤šå°‘ä¸ªå¯¹åº”çš„å‚æ•°ï¼‰ã€‚æ­¤å¤–ï¼Œæœ€åè¿˜å¯ä»¥æ·»åŠ ä¸¤ä¸ªå‚æ•°ï¼Œå€’æ•°ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•æ‰åˆ°çš„å†…å®¹åœ¨æ•´ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼ˆæ¯”å¦‚ä»ç¬¬äº”ä¸ªä½ç½®å¼€å§‹ï¼‰ï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯åŸå­—ç¬¦ä¸²ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç½‘é¡µæ¨¡æ¿æ›¿æ¢çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var prices = {
  &#39;pr_1&#39;: &#39;$1.99&#39;,
  &#39;pr_2&#39;: &#39;$9.99&#39;,
  &#39;pr_3&#39;: &#39;$5.00&#39;
};

var template = &#39;/* ... */&#39;; // è¿™é‡Œå¯ä»¥æ”¾ç½‘é¡µæ¨¡å—å­—ç¬¦ä¸²

template.replace(
  /(&lt;span id=&quot;)(.*?)(&quot;&gt;)(&lt;\/span&gt;)/g,
  function(match, $1, $2, $3, $4){
    return $1 + $2 + $3 + prices[$2] + $4;
  }
);
</code></pre>
<p>ä¸Šé¢ä»£ç çš„æ•æ‰æ¨¡å¼ä¸­ï¼Œæœ‰å››ä¸ªæ‹¬å·ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿå››ä¸ªç»„åŒ¹é…ï¼Œåœ¨åŒ¹é…å‡½æ•°ä¸­ç”¨<code>$1</code>åˆ°<code>$4</code>è¡¨ç¤ºã€‚åŒ¹é…å‡½æ•°çš„ä½œç”¨æ˜¯å°†ä»·æ ¼æ’å…¥æ¨¡æ¿ä¸­ã€‚</p>
<h3 id="String-prototype-split"><a href="#String-prototype-split" class="headerlink" title="String.prototype.split()"></a>String.prototype.split()</h3><p>å­—ç¬¦ä¸²å¯¹è±¡çš„<code>split</code>æ–¹æ³•æŒ‰ç…§æ­£åˆ™è§„åˆ™åˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªç”±åˆ†å‰²åçš„å„ä¸ªéƒ¨åˆ†ç»„æˆçš„æ•°ç»„ã€‚</p>
<pre><code class="javascript">str.split(separator, [limit])
</code></pre>
<p>è¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åˆ†éš”è§„åˆ™ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿”å›æ•°ç»„çš„æœ€å¤§æˆå‘˜æ•°ã€‚</p>
<pre><code class="javascript">// éæ­£åˆ™åˆ†éš”
&#39;a,  b,c, d&#39;.split(&#39;,&#39;)
// [ &#39;a&#39;, &#39;  b&#39;, &#39;c&#39;, &#39; d&#39; ]

// æ­£åˆ™åˆ†éš”ï¼Œå»é™¤å¤šä½™çš„ç©ºæ ¼
&#39;a,  b,c, d&#39;.split(/, */)
// [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39; ]

// æŒ‡å®šè¿”å›æ•°ç»„çš„æœ€å¤§æˆå‘˜
&#39;a,  b,c, d&#39;.split(/, */, 2)
[ &#39;a&#39;, &#39;b&#39; ]
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œå»é™¤äº†å­å­—ç¬¦ä¸²çš„é€—å·åé¢çš„ç©ºæ ¼ã€‚</p>
<pre><code class="javascript">// ä¾‹ä¸€
&#39;aaa*a*&#39;.split(/a*/)
// [ &#39;&#39;, &#39;*&#39;, &#39;*&#39; ]

// ä¾‹äºŒ
&#39;aaa**a*&#39;.split(/a*/)
// [&quot;&quot;, &quot;*&quot;, &quot;*&quot;, &quot;*&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç çš„åˆ†å‰²è§„åˆ™æ˜¯0æ¬¡æˆ–å¤šæ¬¡çš„<code>a</code>ï¼Œç”±äºæ­£åˆ™é»˜è®¤æ˜¯è´ªå©ªåŒ¹é…ï¼Œæ‰€ä»¥ä¾‹ä¸€çš„ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦æ˜¯<code>aaa</code>ï¼Œç¬¬äºŒä¸ªåˆ†å‰²ç¬¦æ˜¯<code>a</code>ï¼Œå°†å­—ç¬¦ä¸²åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†ï¼ŒåŒ…å«å¼€å§‹å¤„çš„ç©ºå­—ç¬¦ä¸²ã€‚ä¾‹äºŒçš„ç¬¬ä¸€ä¸ªåˆ†éš”ç¬¦æ˜¯<code>aaa</code>ï¼Œç¬¬äºŒä¸ªåˆ†éš”ç¬¦æ˜¯0ä¸ª<code>a</code>ï¼ˆå³ç©ºå­—ç¬¦ï¼‰ï¼Œç¬¬ä¸‰ä¸ªåˆ†éš”ç¬¦æ˜¯<code>a</code>ï¼Œæ‰€ä»¥å°†å­—ç¬¦ä¸²åˆ†æˆå››ä¸ªéƒ¨åˆ†ã€‚</p>
<p>å¦‚æœæ­£åˆ™è¡¨è¾¾å¼å¸¦æœ‰æ‹¬å·ï¼Œåˆ™æ‹¬å·åŒ¹é…çš„éƒ¨åˆ†ä¹Ÿä¼šä½œä¸ºæ•°ç»„æˆå‘˜è¿”å›ã€‚</p>
<pre><code class="javascript">&#39;aaa*a*&#39;.split(/(a*)/)
// [ &#39;&#39;, &#39;aaa&#39;, &#39;*&#39;, &#39;a&#39;, &#39;*&#39; ]
</code></pre>
<p>ä¸Šé¢ä»£ç çš„æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨äº†æ‹¬å·ï¼Œç¬¬ä¸€ä¸ªç»„åŒ¹é…æ˜¯â€œaaaâ€ï¼Œç¬¬äºŒä¸ªç»„åŒ¹é…æ˜¯â€œaâ€ï¼Œå®ƒä»¬éƒ½ä½œä¸ºæ•°ç»„æˆå‘˜è¿”å›ã€‚</p>
<h2 id="åŒ¹é…è§„åˆ™"><a href="#åŒ¹é…è§„åˆ™" class="headerlink" title="åŒ¹é…è§„åˆ™"></a>åŒ¹é…è§„åˆ™</h2><p>æ­£åˆ™è¡¨è¾¾å¼å¯¹å­—ç¬¦ä¸²çš„åŒ¹é…æœ‰å¾ˆå¤æ‚çš„è§„åˆ™ã€‚ä¸‹é¢ä¸€ä¸€ä»‹ç»è¿™äº›è§„åˆ™ã€‚</p>
<h3 id="å­—é¢é‡å­—ç¬¦å’Œå…ƒå­—ç¬¦"><a href="#å­—é¢é‡å­—ç¬¦å’Œå…ƒå­—ç¬¦" class="headerlink" title="å­—é¢é‡å­—ç¬¦å’Œå…ƒå­—ç¬¦"></a>å­—é¢é‡å­—ç¬¦å’Œå…ƒå­—ç¬¦</h3><p>å¤§éƒ¨åˆ†å­—ç¬¦åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå°±æ˜¯å­—é¢çš„å«ä¹‰ï¼Œæ¯”å¦‚<code>/a/</code>åŒ¹é…<code>a</code>ï¼Œ<code>/b/</code>åŒ¹é…<code>b</code>ã€‚å¦‚æœåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¹‹ä¸­ï¼ŒæŸä¸ªå­—ç¬¦åªè¡¨ç¤ºå®ƒå­—é¢çš„å«ä¹‰ï¼ˆå°±åƒå‰é¢çš„<code>a</code>å’Œ<code>b</code>ï¼‰ï¼Œé‚£ä¹ˆå®ƒä»¬å°±å«åšâ€œå­—é¢é‡å­—ç¬¦â€ï¼ˆliteral charactersï¼‰ã€‚</p>
<pre><code class="javascript">/dog/.test(&quot;old dog&quot;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­æ­£åˆ™è¡¨è¾¾å¼çš„<code>dog</code>ï¼Œå°±æ˜¯å­—é¢é‡å­—ç¬¦ï¼Œæ‰€ä»¥<code>/dog/</code>åŒ¹é…â€œold dogâ€ï¼Œå› ä¸ºå®ƒå°±è¡¨ç¤ºâ€œdâ€ã€â€œoâ€ã€â€œgâ€ä¸‰ä¸ªå­—æ¯è¿åœ¨ä¸€èµ·ã€‚</p>
<p>é™¤äº†å­—é¢é‡å­—ç¬¦ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†å­—ç¬¦æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œä¸ä»£è¡¨å­—é¢çš„æ„æ€ã€‚å®ƒä»¬å«åšâ€œå…ƒå­—ç¬¦â€ï¼ˆmetacharactersï¼‰ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªã€‚</p>
<p><strong>ï¼ˆ1ï¼‰ç‚¹å­—ç¬¦ï¼ˆ.)</strong></p>
<p>ç‚¹å­—ç¬¦ï¼ˆ<code>.</code>ï¼‰åŒ¹é…é™¤å›è½¦ï¼ˆ<code>\r</code>ï¼‰ã€æ¢è¡Œ(<code>\n</code>) ã€è¡Œåˆ†éš”ç¬¦ï¼ˆ<code>\u2028</code>ï¼‰å’Œæ®µåˆ†éš”ç¬¦ï¼ˆ<code>\u2029</code>ï¼‰ä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦ã€‚</p>
<pre><code class="javascript">/c.t/
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>c.t</code>åŒ¹é…<code>c</code>å’Œ<code>t</code>ä¹‹é—´åŒ…å«ä»»æ„ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µï¼Œåªè¦è¿™ä¸‰ä¸ªå­—ç¬¦åœ¨åŒä¸€è¡Œï¼Œæ¯”å¦‚<code>cat</code>ã€<code>c2t</code>ã€<code>c-t</code>ç­‰ç­‰ï¼Œä½†æ˜¯ä¸åŒ¹é…<code>coot</code>ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰ä½ç½®å­—ç¬¦</strong></p>
<p>ä½ç½®å­—ç¬¦ç”¨æ¥æç¤ºå­—ç¬¦æ‰€å¤„çš„ä½ç½®ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªå­—ç¬¦ã€‚</p>
<ul>
<li><code>^</code> è¡¨ç¤ºå­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®</li>
<li><code>$</code> è¡¨ç¤ºå­—ç¬¦ä¸²çš„ç»“æŸä½ç½®</li>
</ul>
<pre><code class="javascript">// testå¿…é¡»å‡ºç°åœ¨å¼€å§‹ä½ç½®
/^test/.test(&#39;test123&#39;) // true

// testå¿…é¡»å‡ºç°åœ¨ç»“æŸä½ç½®
/test$/.test(&#39;new test&#39;) // true

// ä»å¼€å§‹ä½ç½®åˆ°ç»“æŸä½ç½®åªæœ‰test
/^test$/.test(&#39;test&#39;) // true
/^test$/.test(&#39;test test&#39;) // false
</code></pre>
<p><strong>ï¼ˆ3ï¼‰é€‰æ‹©ç¬¦ï¼ˆ<code>|</code>ï¼‰</strong></p>
<p>ç«–çº¿ç¬¦å·ï¼ˆ<code>|</code>ï¼‰åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­è¡¨ç¤ºâ€œæˆ–å…³ç³»â€ï¼ˆORï¼‰ï¼Œå³<code>cat|dog</code>è¡¨ç¤ºåŒ¹é…<code>cat</code>æˆ–<code>dog</code>ã€‚</p>
<pre><code class="javascript">/11|22/.test(&#39;911&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼æŒ‡å®šå¿…é¡»åŒ¹é…<code>11</code>æˆ–<code>22</code>ã€‚</p>
<p>å¤šä¸ªé€‰æ‹©ç¬¦å¯ä»¥è”åˆä½¿ç”¨ã€‚</p>
<pre><code class="javascript">// åŒ¹é…fredã€barneyã€bettyä¹‹ä¸­çš„ä¸€ä¸ª
/fred|barney|betty/
</code></pre>
<p>é€‰æ‹©ç¬¦ä¼šåŒ…æ‹¬å®ƒå‰åçš„å¤šä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚<code>/ab|cd/</code>æŒ‡çš„æ˜¯åŒ¹é…<code>ab</code>æˆ–è€…<code>cd</code>ï¼Œè€Œä¸æ˜¯æŒ‡åŒ¹é…<code>b</code>æˆ–è€…<code>c</code>ã€‚å¦‚æœæƒ³ä¿®æ”¹è¿™ä¸ªè¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨åœ†æ‹¬å·ã€‚</p>
<pre><code class="javascript">/a( |\t)b/.test(&#39;a\tb&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç æŒ‡çš„æ˜¯ï¼Œ<code>a</code>å’Œ<code>b</code>ä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼æˆ–è€…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ã€‚</p>
<p>å…¶ä»–çš„å…ƒå­—ç¬¦è¿˜åŒ…æ‹¬<code>\\</code>ã€<code>\*</code>ã€<code>+</code>ã€<code>?</code>ã€<code>()</code>ã€<code>[]</code>ã€<code>{}</code>ç­‰ï¼Œå°†åœ¨ä¸‹æ–‡è§£é‡Šã€‚</p>
<h3 id="è½¬ä¹‰ç¬¦"><a href="#è½¬ä¹‰ç¬¦" class="headerlink" title="è½¬ä¹‰ç¬¦"></a>è½¬ä¹‰ç¬¦</h3><p>æ­£åˆ™è¡¨è¾¾å¼ä¸­é‚£äº›æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼Œå¦‚æœè¦åŒ¹é…å®ƒä»¬æœ¬èº«ï¼Œå°±éœ€è¦åœ¨å®ƒä»¬å‰é¢è¦åŠ ä¸Šåæ–œæ ã€‚æ¯”å¦‚è¦åŒ¹é…åŠ å·ï¼Œå°±è¦å†™æˆ<code>\+</code>ã€‚</p>
<pre><code class="javascript">/1+1/.test(&#39;1+1&#39;)
// false

/1\+1/.test(&#39;1+1&#39;)
// true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ç›´æ¥ç”¨åŠ å·åŒ¹é…ï¼Œç»“æœåŠ å·è§£é‡Šæˆé‡è¯ï¼Œå¯¼è‡´ä¸åŒ¹é…ã€‚ç¬¬äºŒä¸ªæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨åæ–œæ å¯¹åŠ å·è½¬ä¹‰ï¼Œå°±èƒ½åŒ¹é…æˆåŠŸã€‚</p>
<p>æ­£åˆ™æ¨¡å¼ä¸­ï¼Œéœ€è¦ç”¨æ–œæ è½¬ä¹‰çš„ï¼Œä¸€å…±æœ‰12ä¸ªå­—ç¬¦ï¼š<code>^</code>ã€<code>.</code>ã€<code>[</code>ã€<code>$</code>ã€<code>(</code>ã€<code>)</code>ã€<code>|</code>ã€<code>*</code>ã€<code>+</code>ã€<code>?</code>ã€<code>{</code>å’Œ<code>\\</code>ã€‚éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½¿ç”¨<code>RegExp</code>æ–¹æ³•ç”Ÿæˆæ­£åˆ™å¯¹è±¡ï¼Œè½¬ä¹‰éœ€è¦ä½¿ç”¨ä¸¤ä¸ªæ–œæ ï¼Œå› ä¸ºå­—ç¬¦ä¸²å†…éƒ¨ä¼šå…ˆè½¬ä¹‰ä¸€æ¬¡ã€‚</p>
<pre><code class="javascript">(new RegExp(&#39;1\+1&#39;)).test(&#39;1+1&#39;)
// false

(new RegExp(&#39;1\\+1&#39;)).test(&#39;1+1&#39;)
// true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>RegExp</code>ä½œä¸ºæ„é€ å‡½æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä½†æ˜¯ï¼Œåœ¨å­—ç¬¦ä¸²å†…éƒ¨ï¼Œåæ–œæ ä¹Ÿæ˜¯è½¬ä¹‰å­—ç¬¦ï¼Œæ‰€ä»¥å®ƒä¼šå…ˆè¢«åæ–œæ è½¬ä¹‰ä¸€æ¬¡ï¼Œç„¶åå†è¢«æ­£åˆ™è¡¨è¾¾å¼è½¬ä¹‰ä¸€æ¬¡ï¼Œå› æ­¤éœ€è¦ä¸¤ä¸ªåæ–œæ è½¬ä¹‰ã€‚</p>
<h3 id="ç‰¹æ®Šå­—ç¬¦"><a href="#ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="ç‰¹æ®Šå­—ç¬¦"></a>ç‰¹æ®Šå­—ç¬¦</h3><p>æ­£åˆ™è¡¨è¾¾å¼å¯¹ä¸€äº›ä¸èƒ½æ‰“å°çš„ç‰¹æ®Šå­—ç¬¦ï¼Œæä¾›äº†è¡¨è¾¾æ–¹æ³•ã€‚</p>
<ul>
<li><code>\cX</code> è¡¨ç¤º<code>Ctrl-[X]</code>ï¼Œå…¶ä¸­çš„<code>X</code>æ˜¯A-Zä¹‹ä¸­ä»»ä¸€ä¸ªè‹±æ–‡å­—æ¯ï¼Œç”¨æ¥åŒ¹é…æ§åˆ¶å­—ç¬¦ã€‚</li>
<li><code>[\b]</code> åŒ¹é…é€€æ ¼é”®(U+0008)ï¼Œä¸è¦ä¸<code>\b</code>æ··æ·†ã€‚</li>
<li><code>\n</code> åŒ¹é…æ¢è¡Œé”®ã€‚</li>
<li><code>\r</code> åŒ¹é…å›è½¦é”®ã€‚</li>
<li><code>\t</code> åŒ¹é…åˆ¶è¡¨ç¬¦tabï¼ˆU+0009ï¼‰ã€‚</li>
<li><code>\v</code> åŒ¹é…å‚ç›´åˆ¶è¡¨ç¬¦ï¼ˆU+000Bï¼‰ã€‚</li>
<li><code>\f</code> åŒ¹é…æ¢é¡µç¬¦ï¼ˆU+000Cï¼‰ã€‚</li>
<li><code>\0</code> åŒ¹é…nullå­—ç¬¦ï¼ˆU+0000ï¼‰ã€‚</li>
<li><code>\xhh</code> åŒ¹é…ä¸€ä¸ªä»¥ä¸¤ä½åå…­è¿›åˆ¶æ•°ï¼ˆ<code>\x00</code>-<code>\xFF</code>ï¼‰è¡¨ç¤ºçš„å­—ç¬¦ã€‚</li>
<li><code>\uhhhh</code> åŒ¹é…ä¸€ä¸ªä»¥å››ä½åå…­è¿›åˆ¶æ•°ï¼ˆ<code>\u0000</code>-<code>\uFFFF</code>ï¼‰è¡¨ç¤ºçš„unicodeå­—ç¬¦ã€‚</li>
</ul>
<h3 id="å­—ç¬¦ç±»"><a href="#å­—ç¬¦ç±»" class="headerlink" title="å­—ç¬¦ç±»"></a>å­—ç¬¦ç±»</h3><p>å­—ç¬¦ç±»ï¼ˆclassï¼‰è¡¨ç¤ºæœ‰ä¸€ç³»åˆ—å­—ç¬¦å¯ä¾›é€‰æ‹©ï¼Œåªè¦åŒ¹é…å…¶ä¸­ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚æ‰€æœ‰å¯ä¾›é€‰æ‹©çš„å­—ç¬¦éƒ½æ”¾åœ¨æ–¹æ‹¬å·å†…ï¼Œæ¯”å¦‚<code>[xyz]</code> è¡¨ç¤º<code>x</code>ã€<code>y</code>ã€<code>z</code>ä¹‹ä¸­ä»»é€‰ä¸€ä¸ªåŒ¹é…ã€‚</p>
<pre><code class="javascript">/[abc]/.test(&#39;hello world&#39;) // false
/[abc]/.test(&#39;ï£¿&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå­—ç¬¦ä¸²â€œhello worldâ€ä¸åŒ…å«<code>a</code>ã€<code>b</code>ã€<code>c</code>è¿™ä¸‰ä¸ªå­—æ¯ä¸­çš„ä»»ä¸€ä¸ªï¼Œè€Œå­—ç¬¦ä¸²â€œï£¿â€åŒ…å«å­—æ¯<code>a</code>ã€‚</p>
<p>æœ‰ä¸¤ä¸ªå­—ç¬¦åœ¨å­—ç¬¦ç±»ä¸­æœ‰ç‰¹æ®Šå«ä¹‰ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰è„±å­—ç¬¦ï¼ˆ&#94;ï¼‰</strong></p>
<p>å¦‚æœæ–¹æ‹¬å·å†…çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯<code>[^]</code>ï¼Œåˆ™è¡¨ç¤ºé™¤äº†å­—ç¬¦ç±»ä¹‹ä¸­çš„å­—ç¬¦ï¼Œå…¶ä»–å­—ç¬¦éƒ½å¯ä»¥åŒ¹é…ã€‚æ¯”å¦‚ï¼Œ<code>[^xyz]</code>è¡¨ç¤ºé™¤äº†<code>x</code>ã€<code>y</code>ã€<code>z</code>ä¹‹å¤–éƒ½å¯ä»¥åŒ¹é…ã€‚</p>
<pre><code class="javascript">/[^abc]/.test(&#39;hello world&#39;) // true
/[^abc]/.test(&#39;bbc&#39;) // false
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå­—ç¬¦ä¸²â€œhello worldâ€ä¸åŒ…å«å­—æ¯<code>a</code>ã€<code>b</code>ã€<code>c</code>ä¸­çš„ä»»ä¸€ä¸ªï¼Œæ‰€ä»¥è¿”å›<code>true</code>ï¼›å­—ç¬¦ä¸²â€œbbcâ€ä¸åŒ…å«<code>a</code>ã€<code>b</code>ã€<code>c</code>ä»¥å¤–çš„å­—æ¯ï¼Œæ‰€ä»¥è¿”å›<code>false</code>ã€‚</p>
<p>å¦‚æœæ–¹æ‹¬å·å†…æ²¡æœ‰å…¶ä»–å­—ç¬¦ï¼Œå³åªæœ‰<code>[^]</code>ï¼Œå°±è¡¨ç¤ºåŒ¹é…ä¸€åˆ‡å­—ç¬¦ï¼Œå…¶ä¸­åŒ…æ‹¬æ¢è¡Œç¬¦ï¼Œè€Œç‚¹å·ï¼ˆ<code>.</code>ï¼‰æ˜¯ä¸åŒ…æ‹¬æ¢è¡Œç¬¦çš„ã€‚</p>
<pre><code class="javascript">var s = &#39;Please yes\nmake my day!&#39;;

s.match(/yes.*day/) // null
s.match(/yes[^]*day/) // [ &#39;yes\nmake my day&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²<code>s</code>å«æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œç‚¹å·ä¸åŒ…æ‹¬æ¢è¡Œç¬¦ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å¤±è´¥ï¼›ç¬¬äºŒä¸ªæ­£åˆ™è¡¨è¾¾å¼<code>[^]</code>åŒ…å«ä¸€åˆ‡å­—ç¬¦ï¼Œæ‰€ä»¥åŒ¹é…æˆåŠŸã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œè„±å­—ç¬¦åªæœ‰åœ¨å­—ç¬¦ç±»çš„ç¬¬ä¸€ä¸ªä½ç½®æ‰æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¦åˆ™å°±æ˜¯å­—é¢å«ä¹‰ã€‚</p>
</blockquote>
<p><strong>ï¼ˆ2ï¼‰è¿å­—ç¬¦ï¼ˆ-ï¼‰</strong></p>
<p>æŸäº›æƒ…å†µä¸‹ï¼Œå¯¹äºè¿ç»­åºåˆ—çš„å­—ç¬¦ï¼Œè¿å­—ç¬¦ï¼ˆ<code>-</code>ï¼‰ç”¨æ¥æä¾›ç®€å†™å½¢å¼ï¼Œè¡¨ç¤ºå­—ç¬¦çš„è¿ç»­èŒƒå›´ã€‚æ¯”å¦‚ï¼Œ<code>[abc]</code>å¯ä»¥å†™æˆ<code>[a-c]</code>ï¼Œ<code>[0123456789]</code>å¯ä»¥å†™æˆ<code>[0-9]</code>ï¼ŒåŒç†<code>[A-Z]</code>è¡¨ç¤º26ä¸ªå¤§å†™å­—æ¯ã€‚</p>
<pre><code class="javascript">/a-z/.test(&#39;b&#39;) // false
/[a-z]/.test(&#39;b&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå½“è¿å­—å·ï¼ˆdashï¼‰ä¸å‡ºç°åœ¨æ–¹æ‹¬å·ä¹‹ä¸­ï¼Œå°±ä¸å…·å¤‡ç®€å†™çš„ä½œç”¨ï¼Œåªä»£è¡¨å­—é¢çš„å«ä¹‰ï¼Œæ‰€ä»¥ä¸åŒ¹é…å­—ç¬¦<code>b</code>ã€‚åªæœ‰å½“è¿å­—å·ç”¨åœ¨æ–¹æ‹¬å·ä¹‹ä¸­ï¼Œæ‰è¡¨ç¤ºè¿ç»­çš„å­—ç¬¦åºåˆ—ã€‚</p>
<p>ä»¥ä¸‹éƒ½æ˜¯åˆæ³•çš„å­—ç¬¦ç±»ç®€å†™å½¢å¼ã€‚</p>
<pre><code class="javascript">[0-9.,]
[0-9a-fA-F]
[a-zA-Z0-9-]
[1-31]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­æœ€åä¸€ä¸ªå­—ç¬¦ç±»<code>[1-31]</code>ï¼Œä¸ä»£è¡¨<code>1</code>åˆ°<code>31</code>ï¼Œåªä»£è¡¨<code>1</code>åˆ°<code>3</code>ã€‚</p>
<p>æ³¨æ„ï¼Œå­—ç¬¦ç±»çš„è¿å­—ç¬¦å¿…é¡»åœ¨å¤´å°¾ä¸¤ä¸ªå­—ç¬¦ä¸­é—´ï¼Œæ‰æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¦åˆ™å°±æ˜¯å­—é¢å«ä¹‰ã€‚æ¯”å¦‚ï¼Œ<code>[-9]</code>å°±è¡¨ç¤ºåŒ¹é…è¿å­—ç¬¦å’Œ<code>9</code>ï¼Œè€Œä¸æ˜¯åŒ¹é…<code>0</code>åˆ°<code>9</code>ã€‚</p>
<p>è¿å­—ç¬¦è¿˜å¯ä»¥ç”¨æ¥æŒ‡å®šUnicodeå­—ç¬¦çš„èŒƒå›´ã€‚</p>
<pre><code class="javascript">var str = &quot;\u0130\u0131\u0132&quot;;
/[\u0128-\uFFFF]/.test(str)
// true
</code></pre>
<p>å¦å¤–ï¼Œä¸è¦è¿‡åˆ†ä½¿ç”¨è¿å­—ç¬¦ï¼Œè®¾å®šä¸€ä¸ªå¾ˆå¤§çš„èŒƒå›´ï¼Œå¦åˆ™å¾ˆå¯èƒ½é€‰ä¸­æ„æ–™ä¹‹å¤–çš„å­—ç¬¦ã€‚æœ€å…¸å‹çš„ä¾‹å­å°±æ˜¯<code>[A-z]</code>ï¼Œè¡¨é¢ä¸Šå®ƒæ˜¯é€‰ä¸­ä»å¤§å†™çš„<code>A</code>åˆ°å°å†™çš„<code>z</code>ä¹‹é—´52ä¸ªå­—æ¯ï¼Œä½†æ˜¯ç”±äºåœ¨ASCIIç¼–ç ä¹‹ä¸­ï¼Œå¤§å†™å­—æ¯ä¸å°å†™å­—æ¯ä¹‹é—´è¿˜æœ‰å…¶ä»–å­—ç¬¦ï¼Œç»“æœå°±ä¼šå‡ºç°æ„æ–™ä¹‹å¤–çš„ç»“æœã€‚</p>
<pre><code class="javascript">/[A-z]/.test(&#39;\\&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºåæ–œæ ï¼ˆ<code>\\</code>ï¼‰çš„ASCIIç åœ¨å¤§å†™å­—æ¯ä¸å°å†™å­—æ¯ä¹‹é—´ï¼Œç»“æœä¼šè¢«é€‰ä¸­ã€‚</p>
<h3 id="é¢„å®šä¹‰æ¨¡å¼"><a href="#é¢„å®šä¹‰æ¨¡å¼" class="headerlink" title="é¢„å®šä¹‰æ¨¡å¼"></a>é¢„å®šä¹‰æ¨¡å¼</h3><p>é¢„å®šä¹‰æ¨¡å¼æŒ‡çš„æ˜¯æŸäº›å¸¸è§æ¨¡å¼çš„ç®€å†™æ–¹å¼ã€‚</p>
<ul>
<li><code>\d</code> åŒ¹é…0-9ä¹‹é—´çš„ä»»ä¸€æ•°å­—ï¼Œç›¸å½“äº<code>[0-9]</code>ã€‚</li>
<li><code>\D</code> åŒ¹é…æ‰€æœ‰0-9ä»¥å¤–çš„å­—ç¬¦ï¼Œç›¸å½“äº<code>[^0-9]</code>ã€‚</li>
<li><code>\w</code> åŒ¹é…ä»»æ„çš„å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œç›¸å½“äº<code>[A-Za-z0-9_]</code>ã€‚</li>
<li><code>\W</code> é™¤æ‰€æœ‰å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ä»¥å¤–çš„å­—ç¬¦ï¼Œç›¸å½“äº<code>[^A-Za-z0-9_]</code>ã€‚</li>
<li><code>\s</code> åŒ¹é…ç©ºæ ¼ï¼ˆåŒ…æ‹¬åˆ¶è¡¨ç¬¦ã€ç©ºæ ¼ç¬¦ã€æ–­è¡Œç¬¦ç­‰ï¼‰ï¼Œç›¸ç­‰äº<code>[\t\r\n\v\f]</code>ã€‚</li>
<li><code>\S</code> åŒ¹é…éç©ºæ ¼çš„å­—ç¬¦ï¼Œç›¸å½“äº<code>[^\t\r\n\v\f]</code>ã€‚</li>
<li><code>\b</code> åŒ¹é…è¯çš„è¾¹ç•Œã€‚</li>
<li><code>\B</code> åŒ¹é…éè¯è¾¹ç•Œï¼Œå³åœ¨è¯çš„å†…éƒ¨ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ã€‚</p>
<pre><code class="javascript">// \sçš„ä¾‹å­
/\s\w*/.exec(&#39;hello world&#39;) // [&quot; world&quot;]

// \bçš„ä¾‹å­
/\bworld/.test(&#39;hello world&#39;) // true
/\bworld/.test(&#39;hello-world&#39;) // true
/\bworld/.test(&#39;helloworld&#39;) // false

// \Bçš„ä¾‹å­
/\Bworld/.test(&#39;hello-world&#39;) // false
/\Bworld/.test(&#39;helloworld&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>\s</code>è¡¨ç¤ºç©ºæ ¼ï¼Œæ‰€ä»¥åŒ¹é…ç»“æœä¼šåŒ…æ‹¬ç©ºæ ¼ã€‚<code>\b</code>è¡¨ç¤ºè¯çš„è¾¹ç•Œï¼Œæ‰€ä»¥â€œworldâ€çš„è¯é¦–å¿…é¡»ç‹¬ç«‹ï¼ˆè¯å°¾æ˜¯å¦ç‹¬ç«‹æœªæŒ‡å®šï¼‰ï¼Œæ‰ä¼šåŒ¹é…ã€‚åŒç†ï¼Œ<code>\B</code>è¡¨ç¤ºéè¯çš„è¾¹ç•Œï¼Œåªæœ‰â€œworldâ€çš„è¯é¦–ä¸ç‹¬ç«‹ï¼Œæ‰ä¼šåŒ¹é…ã€‚</p>
<p>é€šå¸¸ï¼Œæ­£åˆ™è¡¨è¾¾å¼é‡åˆ°æ¢è¡Œç¬¦ï¼ˆ<code>\n</code>ï¼‰å°±ä¼šåœæ­¢åŒ¹é…ã€‚</p>
<pre><code class="javascript">var html = &quot;&lt;b&gt;Hello&lt;/b&gt;\n&lt;i&gt;world!&lt;/i&gt;&quot;;

/.*/.exec(html)[0]
// &quot;&lt;b&gt;Hello&lt;/b&gt;&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²<code>html</code>åŒ…å«ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œç»“æœç‚¹å­—ç¬¦ï¼ˆ<code>.</code>ï¼‰ä¸åŒ¹é…æ¢è¡Œç¬¦ï¼Œå¯¼è‡´åŒ¹é…ç»“æœå¯èƒ½ä¸ç¬¦åˆåŸæ„ã€‚è¿™æ—¶ä½¿ç”¨<code>\s</code>å­—ç¬¦ç±»ï¼Œå°±èƒ½åŒ…æ‹¬æ¢è¡Œç¬¦ã€‚</p>
<pre><code class="javascript">var html = &quot;&lt;b&gt;Hello&lt;/b&gt;\n&lt;i&gt;world!&lt;/i&gt;&quot;;

/[\S\s]*/.exec(html)[0]
// &quot;&lt;b&gt;Hello&lt;/b&gt;\n&lt;i&gt;world!&lt;/i&gt;&quot;

// å¦ä¸€ç§å†™æ³•ï¼ˆç”¨åˆ°äº†éæ•è·ç»„ï¼‰
/(?:.|\s)*/.exec(html)[0]
// &quot;&lt;b&gt;Hello&lt;/b&gt;\n&lt;i&gt;world!&lt;/i&gt;&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>[\S\s]</code>æŒ‡ä»£ä¸€åˆ‡å­—ç¬¦ã€‚</p>
<h3 id="é‡å¤ç±»"><a href="#é‡å¤ç±»" class="headerlink" title="é‡å¤ç±»"></a>é‡å¤ç±»</h3><p>æ¨¡å¼çš„ç²¾ç¡®åŒ¹é…æ¬¡æ•°ï¼Œä½¿ç”¨å¤§æ‹¬å·ï¼ˆ<code>{}</code>ï¼‰è¡¨ç¤ºã€‚<code>{n}</code>è¡¨ç¤ºæ°å¥½é‡å¤næ¬¡ï¼Œ<code>{n,}</code>è¡¨ç¤ºè‡³å°‘é‡å¤næ¬¡ï¼Œ<code>{n,m}</code>è¡¨ç¤ºé‡å¤ä¸å°‘äºnæ¬¡ï¼Œä¸å¤šäºmæ¬¡ã€‚</p>
<pre><code class="javascript">/lo{2}k/.test(&#39;look&#39;) // true
/lo{2,5}k/.test(&#39;looook&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªæ¨¡å¼æŒ‡å®š<code>o</code>è¿ç»­å‡ºç°2æ¬¡ï¼Œç¬¬äºŒä¸ªæ¨¡å¼æŒ‡å®š<code>o</code>è¿ç»­å‡ºç°2æ¬¡åˆ°5æ¬¡ä¹‹é—´ã€‚</p>
<h3 id="é‡è¯ç¬¦"><a href="#é‡è¯ç¬¦" class="headerlink" title="é‡è¯ç¬¦"></a>é‡è¯ç¬¦</h3><p>é‡è¯ç¬¦ç”¨æ¥è®¾å®šæŸä¸ªæ¨¡å¼å‡ºç°çš„æ¬¡æ•°ã€‚</p>
<ul>
<li><code>?</code> é—®å·è¡¨ç¤ºæŸä¸ªæ¨¡å¼å‡ºç°0æ¬¡æˆ–1æ¬¡ï¼Œç­‰åŒäº<code>{0, 1}</code>ã€‚</li>
<li><code>*</code> æ˜Ÿå·è¡¨ç¤ºæŸä¸ªæ¨¡å¼å‡ºç°0æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰åŒäº<code>{0,}</code>ã€‚</li>
<li><code>+</code> åŠ å·è¡¨ç¤ºæŸä¸ªæ¨¡å¼å‡ºç°1æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰åŒäº<code>{1,}</code>ã€‚</li>
</ul>
<pre><code class="javascript">// tå‡ºç°0æ¬¡æˆ–1æ¬¡
/t?est/.test(&#39;test&#39;) // true
/t?est/.test(&#39;est&#39;) // true

// tå‡ºç°1æ¬¡æˆ–å¤šæ¬¡
/t+est/.test(&#39;test&quot;) // true
/t+est/.test(&#39;ttest&#39;) // true
/t+est/.test(&#39;est&#39;) // false

// tå‡ºç°0æ¬¡æˆ–å¤šæ¬¡
/t*est/.test(&#39;test&#39;) // true
/t*est/.test(&#39;ttest&#39;) // true
/t*est/.test(&#39;tttest&#39;) // true
/t*est/.test(&#39;est&#39;) // true
</code></pre>
<h3 id="è´ªå©ªæ¨¡å¼"><a href="#è´ªå©ªæ¨¡å¼" class="headerlink" title="è´ªå©ªæ¨¡å¼"></a>è´ªå©ªæ¨¡å¼</h3><p>ä¸Šä¸€å°èŠ‚çš„ä¸‰ä¸ªé‡è¯ç¬¦ï¼Œé»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯æœ€å¤§å¯èƒ½åŒ¹é…ï¼Œå³åŒ¹é…ç›´åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸æ»¡è¶³åŒ¹é…è§„åˆ™ä¸ºæ­¢ã€‚è¿™è¢«ç§°ä¸ºè´ªå©ªæ¨¡å¼ã€‚</p>
<pre><code class="javascript">var s = &#39;aaa&#39;;
s.match(/a+/) // [&quot;aaa&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡å¼æ˜¯<code>/a+/</code>ï¼Œè¡¨ç¤ºåŒ¹é…1ä¸ª<code>a</code>æˆ–å¤šä¸ª<code>a</code>ï¼Œé‚£ä¹ˆåˆ°åº•ä¼šåŒ¹é…å‡ ä¸ª<code>a</code>å‘¢ï¼Ÿå› ä¸ºé»˜è®¤æ˜¯è´ªå©ªæ¨¡å¼ï¼Œä¼šä¸€ç›´åŒ¹é…åˆ°å­—ç¬¦<code>a</code>ä¸å‡ºç°ä¸ºæ­¢ï¼Œæ‰€ä»¥åŒ¹é…ç»“æœæ˜¯3ä¸ª<code>a</code>ã€‚</p>
<p>å¦‚æœæƒ³å°†è´ªå©ªæ¨¡å¼æ”¹ä¸ºéè´ªå©ªæ¨¡å¼ï¼Œå¯ä»¥åœ¨é‡è¯ç¬¦åé¢åŠ ä¸€ä¸ªé—®å·ã€‚</p>
<pre><code class="javascript">var s = &#39;aaa&#39;;
s.match(/a+?/) // [&quot;a&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡å¼ç»“å°¾æ·»åŠ äº†ä¸€ä¸ªé—®å·<code>/a+?/</code>ï¼Œè¿™æ—¶å°±æ”¹ä¸ºéè´ªå©ªæ¨¡å¼ï¼Œä¸€æ—¦æ¡ä»¶æ»¡è¶³ï¼Œå°±ä¸å†å¾€ä¸‹åŒ¹é…ã€‚</p>
<p>é™¤äº†éè´ªå©ªæ¨¡å¼çš„åŠ å·ï¼Œè¿˜æœ‰éè´ªå©ªæ¨¡å¼çš„æ˜Ÿå·ï¼ˆ<code>*</code>ï¼‰ã€‚</p>
<ul>
<li><code>*?</code>ï¼šè¡¨ç¤ºæŸä¸ªæ¨¡å¼å‡ºç°0æ¬¡æˆ–å¤šæ¬¡ï¼ŒåŒ¹é…æ—¶é‡‡ç”¨éè´ªå©ªæ¨¡å¼ã€‚</li>
<li><code>+?</code>ï¼šè¡¨ç¤ºæŸä¸ªæ¨¡å¼å‡ºç°1æ¬¡æˆ–å¤šæ¬¡ï¼ŒåŒ¹é…æ—¶é‡‡ç”¨éè´ªå©ªæ¨¡å¼ã€‚</li>
</ul>
<h3 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h3><p>ä¿®é¥°ç¬¦ï¼ˆmodifierï¼‰è¡¨ç¤ºæ¨¡å¼çš„é™„åŠ è§„åˆ™ï¼Œæ”¾åœ¨æ­£åˆ™æ¨¡å¼çš„æœ€å°¾éƒ¨ã€‚</p>
<p>ä¿®é¥°ç¬¦å¯ä»¥å•ä¸ªä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å¤šä¸ªä¸€èµ·ä½¿ç”¨ã€‚</p>
<pre><code class="javascript">// å•ä¸ªä¿®é¥°ç¬¦
var regex = /test/i;

// å¤šä¸ªä¿®é¥°ç¬¦
var regex = /test/ig;
</code></pre>
<p><strong>ï¼ˆ1ï¼‰gä¿®é¥°ç¬¦</strong></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€æ¬¡åŒ¹é…æˆåŠŸåï¼Œæ­£åˆ™å¯¹è±¡å°±åœæ­¢å‘ä¸‹åŒ¹é…äº†ã€‚<code>g</code>ä¿®é¥°ç¬¦è¡¨ç¤ºå…¨å±€åŒ¹é…ï¼ˆglobalï¼‰ï¼ŒåŠ ä¸Šå®ƒä»¥åï¼Œæ­£åˆ™å¯¹è±¡å°†åŒ¹é…å…¨éƒ¨ç¬¦åˆæ¡ä»¶çš„ç»“æœï¼Œä¸»è¦ç”¨äºæœç´¢å’Œæ›¿æ¢ã€‚</p>
<pre><code class="javascript">var regex = /b/;
var str = &#39;abba&#39;;

regex.test(str); // true
regex.test(str); // true
regex.test(str); // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™æ¨¡å¼ä¸å«<code>g</code>ä¿®é¥°ç¬¦ï¼Œæ¯æ¬¡éƒ½æ˜¯ä»å­—ç¬¦ä¸²å¤´éƒ¨å¼€å§‹åŒ¹é…ã€‚æ‰€ä»¥ï¼Œè¿ç»­åšäº†ä¸‰æ¬¡åŒ¹é…ï¼Œéƒ½è¿”å›<code>true</code>ã€‚</p>
<pre><code class="javascript">var regex = /b/g;
var str = &#39;abba&#39;;

regex.test(str); // true
regex.test(str); // true
regex.test(str); // false
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™æ¨¡å¼å«æœ‰<code>g</code>ä¿®é¥°ç¬¦ï¼Œæ¯æ¬¡éƒ½æ˜¯ä»ä¸Šä¸€æ¬¡åŒ¹é…æˆåŠŸå¤„ï¼Œå¼€å§‹å‘ååŒ¹é…ã€‚å› ä¸ºå­—ç¬¦ä¸²â€œabbaâ€åªæœ‰ä¸¤ä¸ªâ€œbâ€ï¼Œæ‰€ä»¥å‰ä¸¤æ¬¡åŒ¹é…ç»“æœä¸º<code>true</code>ï¼Œç¬¬ä¸‰æ¬¡åŒ¹é…ç»“æœä¸º<code>false</code>ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰iä¿®é¥°ç¬¦</strong></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­£åˆ™å¯¹è±¡åŒºåˆ†å­—æ¯çš„å¤§å°å†™ï¼ŒåŠ ä¸Š<code>i</code>ä¿®é¥°ç¬¦ä»¥åè¡¨ç¤ºå¿½ç•¥å¤§å°å†™ï¼ˆignorecaseï¼‰ã€‚</p>
<pre><code class="javascript">/abc/.test(&#39;ABC&#39;) // false
/abc/i.test(&#39;ABC&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼ŒåŠ äº†<code>i</code>ä¿®é¥°ç¬¦ä»¥åï¼Œä¸è€ƒè™‘å¤§å°å†™ï¼Œæ‰€ä»¥æ¨¡å¼<code>abc</code>åŒ¹é…å­—ç¬¦ä¸²<code>ABC</code>ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰mä¿®é¥°ç¬¦</strong></p>
<p><code>m</code>ä¿®é¥°ç¬¦è¡¨ç¤ºå¤šè¡Œæ¨¡å¼ï¼ˆmultilineï¼‰ï¼Œä¼šä¿®æ”¹<code>^</code>å’Œ<code>$</code>çš„è¡Œä¸ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ˆå³ä¸åŠ <code>m</code>ä¿®é¥°ç¬¦æ—¶ï¼‰ï¼Œ<code>^</code>å’Œ<code>$</code>åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹å¤„å’Œç»“å°¾å¤„ï¼ŒåŠ ä¸Š<code>m</code>ä¿®é¥°ç¬¦ä»¥åï¼Œ<code>^</code>å’Œ<code>$</code>è¿˜ä¼šåŒ¹é…è¡Œé¦–å’Œè¡Œå°¾ï¼Œå³<code>^</code>å’Œ<code>$</code>ä¼šè¯†åˆ«æ¢è¡Œç¬¦ï¼ˆ<code>\n</code>ï¼‰ã€‚</p>
<pre><code class="javascript">/world$/.test(&#39;hello world\n&#39;) // false
/world$/m.test(&#39;hello world\n&#39;) // true
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²ç»“å°¾å¤„æœ‰ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚å¦‚æœä¸åŠ <code>m</code>ä¿®é¥°ç¬¦ï¼ŒåŒ¹é…ä¸æˆåŠŸï¼Œå› ä¸ºå­—ç¬¦ä¸²çš„ç»“å°¾ä¸æ˜¯â€œworldâ€ï¼›åŠ ä¸Šä»¥åï¼Œ<code>$</code>å¯ä»¥åŒ¹é…è¡Œå°¾ã€‚</p>
<pre><code class="javascript">/^b/m.test(&#39;a\nb&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç è¦æ±‚åŒ¹é…è¡Œé¦–çš„<code>b</code>ï¼Œå¦‚æœä¸åŠ <code>m</code>ä¿®é¥°ç¬¦ï¼Œå°±ç›¸å½“äº<code>b</code>åªèƒ½å¤„åœ¨å­—ç¬¦ä¸²çš„å¼€å§‹å¤„ã€‚</p>
<h3 id="ç»„åŒ¹é…"><a href="#ç»„åŒ¹é…" class="headerlink" title="ç»„åŒ¹é…"></a>ç»„åŒ¹é…</h3><p><strong>ï¼ˆ1ï¼‰æ¦‚è¿°</strong></p>
<p>æ­£åˆ™è¡¨è¾¾å¼çš„æ‹¬å·è¡¨ç¤ºåˆ†ç»„åŒ¹é…ï¼Œæ‹¬å·ä¸­çš„æ¨¡å¼å¯ä»¥ç”¨æ¥åŒ¹é…åˆ†ç»„çš„å†…å®¹ã€‚</p>
<pre><code class="javascript">/fred+/.test(&#39;fredd&#39;) // true
/(fred)+/.test(&#39;fredfred&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªæ¨¡å¼æ²¡æœ‰æ‹¬å·ï¼Œç»“æœ<code>+</code>åªè¡¨ç¤ºé‡å¤å­—æ¯<code>d</code>ï¼Œç¬¬äºŒä¸ªæ¨¡å¼æœ‰æ‹¬å·ï¼Œç»“æœ<code>+</code>å°±è¡¨ç¤ºåŒ¹é…â€œfredâ€è¿™ä¸ªè¯ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªåˆ†ç»„æ•è·çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var m = &#39;abcabc&#39;.match(/(.)b(.)/);
m
// [&#39;abc&#39;, &#39;a&#39;, &#39;c&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼<code>/(.)b(.)/</code>ä¸€å…±ä½¿ç”¨ä¸¤ä¸ªæ‹¬å·ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·æ•è·<code>a</code>ï¼Œç¬¬äºŒä¸ªæ‹¬å·æ•è·<code>c</code>ã€‚</p>
<p>æ³¨æ„ï¼Œä½¿ç”¨ç»„åŒ¹é…æ—¶ï¼Œä¸å®œåŒæ—¶ä½¿ç”¨<code>g</code>ä¿®é¥°ç¬¦ï¼Œå¦åˆ™<code>match</code>æ–¹æ³•ä¸ä¼šæ•è·åˆ†ç»„çš„å†…å®¹ã€‚</p>
<pre><code class="javascript">var m = &#39;abcabc&#39;.match(/(.)b(.)/g);
m
// [&#39;abc&#39;, &#39;abc&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨å¸¦<code>g</code>ä¿®é¥°ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œç»“æœ<code>match</code>æ–¹æ³•åªæ•è·äº†åŒ¹é…æ•´ä¸ªè¡¨è¾¾å¼çš„éƒ¨åˆ†ã€‚</p>
<p>åœ¨æ­£åˆ™è¡¨è¾¾å¼å†…éƒ¨ï¼Œå¯ä»¥ç”¨<code>\n</code>å¼•ç”¨æ‹¬å·åŒ¹é…çš„å†…å®¹ï¼Œ<code>n</code>æ˜¯ä»1å¼€å§‹çš„è‡ªç„¶æ•°ï¼Œè¡¨ç¤ºå¯¹åº”é¡ºåºçš„æ‹¬å·ã€‚</p>
<pre><code class="javascript">/(.)b(.)\1b\2/.test(&quot;abcabc&quot;)
// true
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>\1</code>è¡¨ç¤ºå‰ä¸€ä¸ªæ‹¬å·åŒ¹é…çš„å†…å®¹ï¼ˆå³â€œaâ€ï¼‰ï¼Œ<code>\2</code>è¡¨ç¤ºç¬¬äºŒä¸ªæ‹¬å·åŒ¹é…çš„å†…å®¹ï¼ˆå³â€œbâ€ï¼‰ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">/y(..)(.)\2\1/.test(&#39;yabccab&#39;) // true
</code></pre>
<p>æ‹¬å·è¿˜å¯ä»¥åµŒå¥—ã€‚</p>
<pre><code class="javascript">/y((..)\2)\1/.test(&#39;yabababab&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>\1</code>æŒ‡å‘å¤–å±‚æ‹¬å·ï¼Œ<code>\2</code>æŒ‡å‘å†…å±‚æ‹¬å·ã€‚</p>
<p>ç»„åŒ¹é…éå¸¸æœ‰ç”¨ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªåŒ¹é…ç½‘é¡µæ ‡ç­¾çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var tagName = /&lt;([^&gt;]+)&gt;[^&lt;]*&lt;\/\1&gt;/;

tagName.exec(&quot;&lt;b&gt;bold&lt;/b&gt;&quot;)[1]
// &#39;b&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œåœ†æ‹¬å·åŒ¹é…å°–æ‹¬å·ä¹‹ä¸­çš„æ ‡ç­¾ï¼Œè€Œ<code>\1</code>å°±è¡¨ç¤ºå¯¹åº”çš„é—­åˆæ ‡ç­¾ã€‚</p>
<p>ä¸Šé¢ä»£ç ç•¥åŠ ä¿®æ”¹ï¼Œå°±èƒ½æ•è·å¸¦æœ‰å±æ€§çš„æ ‡ç­¾ã€‚</p>
<pre><code class="javascript">var html = &#39;&lt;b class=&quot;hello&quot;&gt;Hello&lt;/b&gt;&lt;i&gt;world&lt;/i&gt;&#39;;
var tag = /&lt;(\w+)([^&gt;]*)&gt;(.*?)&lt;\/\1&gt;/g;

var match = tag.exec(html);

match[1] // &quot;b&quot;
match[2] // &quot;class=&quot;hello&quot;&quot;
match[3] // &quot;Hello&quot;

match = tag.exec(html);

match[1] // &quot;i&quot;
match[2] // &quot;&quot;
match[3] // &quot;world&quot;
</code></pre>
<p><strong>ï¼ˆ2ï¼‰éæ•è·ç»„</strong></p>
<p><code>(?:x)</code>ç§°ä¸ºéæ•è·ç»„ï¼ˆNon-capturing groupï¼‰ï¼Œè¡¨ç¤ºä¸è¿”å›è¯¥ç»„åŒ¹é…çš„å†…å®¹ï¼Œå³åŒ¹é…çš„ç»“æœä¸­ä¸è®¡å…¥è¿™ä¸ªæ‹¬å·ã€‚</p>
<p>éæ•è·ç»„çš„ä½œç”¨è¯·è€ƒè™‘è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œå‡å®šéœ€è¦åŒ¹é…<code>foo</code>æˆ–è€…<code>foofoo</code>ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°±åº”è¯¥å†™æˆ<code>/(foo){1, 2}/</code>ï¼Œä½†æ˜¯è¿™æ ·ä¼šå ç”¨ä¸€ä¸ªç»„åŒ¹é…ã€‚è¿™æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨éæ•è·ç»„ï¼Œå°†æ­£åˆ™è¡¨è¾¾å¼æ”¹ä¸º<code>/(?:foo){1, 2}/</code>ï¼Œå®ƒçš„ä½œç”¨ä¸å‰ä¸€ä¸ªæ­£åˆ™æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸ä¼šå•ç‹¬è¾“å‡ºæ‹¬å·å†…éƒ¨çš„å†…å®¹ã€‚</p>
<p>è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var m = &#39;abc&#39;.match(/(?:.)b(.)/);
m // [&quot;abc&quot;, &quot;c&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­çš„æ¨¡å¼ï¼Œä¸€å…±ä½¿ç”¨äº†ä¸¤ä¸ªæ‹¬å·ã€‚å…¶ä¸­ç¬¬ä¸€ä¸ªæ‹¬å·æ˜¯éæ•è·ç»„ï¼Œæ‰€ä»¥æœ€åè¿”å›çš„ç»“æœä¸­æ²¡æœ‰ç¬¬ä¸€ä¸ªæ‹¬å·ï¼Œåªæœ‰ç¬¬äºŒä¸ªæ‹¬å·åŒ¹é…çš„å†…å®¹ã€‚</p>
<p>ä¸‹é¢æ˜¯ç”¨æ¥åˆ†è§£ç½‘å€çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</p>
<pre><code class="javascript">// æ­£å¸¸åŒ¹é…
var url = /(http|ftp):\/\/([^/\r\n]+)(\/[^\r\n]*)?/;

url.exec(&#39;http://google.com/&#39;);
// [&quot;http://google.com/&quot;, &quot;http&quot;, &quot;google.com&quot;, &quot;/&quot;]

// éæ•è·ç»„åŒ¹é…
var url = /(?:http|ftp):\/\/([^/\r\n]+)(\/[^\r\n]*)?/;

url.exec(&#39;http://google.com/&#39;);
// [&quot;http://google.com/&quot;, &quot;google.com&quot;, &quot;/&quot;]
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå‰ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ˜¯æ­£å¸¸åŒ¹é…ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·è¿”å›ç½‘ç»œåè®®ï¼›åä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ˜¯éæ•è·åŒ¹é…ï¼Œè¿”å›ç»“æœä¸­ä¸åŒ…æ‹¬ç½‘ç»œåè®®ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰å…ˆè¡Œæ–­è¨€</strong></p>
<p><code>x(?=y)</code>ç§°ä¸ºå…ˆè¡Œæ–­è¨€ï¼ˆPositive look-aheadï¼‰ï¼Œ<code>x</code>åªæœ‰åœ¨<code>y</code>å‰é¢æ‰åŒ¹é…ï¼Œ<code>y</code>ä¸ä¼šè¢«è®¡å…¥è¿”å›ç»“æœã€‚æ¯”å¦‚ï¼Œè¦åŒ¹é…åé¢è·Ÿç€ç™¾åˆ†å·çš„æ•°å­—ï¼Œå¯ä»¥å†™æˆ<code>/\d+(?=%)/</code>ã€‚</p>
<p>â€œå…ˆè¡Œæ–­è¨€â€ä¸­ï¼Œæ‹¬å·é‡Œçš„éƒ¨åˆ†æ˜¯ä¸ä¼šè¿”å›çš„ã€‚</p>
<pre><code class="javascript">var m = &#39;abc&#39;.match(/b(?=c)/);
m // [&quot;b&quot;]
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä½¿ç”¨äº†å…ˆè¡Œæ–­è¨€ï¼Œ<code>b</code>åœ¨<code>c</code>å‰é¢æ‰€ä»¥è¢«åŒ¹é…ï¼Œä½†æ˜¯æ‹¬å·å¯¹åº”çš„<code>c</code>ä¸ä¼šè¢«è¿”å›ã€‚</p>
<p>å†çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">/Jack (?=Sprat|Frost)/.test(&#39;Jack Frost&#39;) // true
</code></pre>
<p><strong>ï¼ˆ4ï¼‰å…ˆè¡Œå¦å®šæ–­è¨€</strong></p>
<p><code>x(?!y)</code>ç§°ä¸ºå…ˆè¡Œå¦å®šæ–­è¨€ï¼ˆNegative look-aheadï¼‰ï¼Œ<code>x</code>åªæœ‰ä¸åœ¨<code>y</code>å‰é¢æ‰åŒ¹é…ï¼Œ<code>y</code>ä¸ä¼šè¢«è®¡å…¥è¿”å›ç»“æœã€‚æ¯”å¦‚ï¼Œè¦åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯ç™¾åˆ†å·çš„æ•°å­—ï¼Œå°±è¦å†™æˆ<code>/\d+(?!%)/</code>ã€‚</p>
<pre><code class="javascript">/\d+(?!\.)/.exec(&#39;3.14&#39;)
// [&quot;14&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼æŒ‡å®šï¼Œåªæœ‰ä¸åœ¨å°æ•°ç‚¹å‰é¢çš„æ•°å­—æ‰ä¼šè¢«åŒ¹é…ï¼Œå› æ­¤è¿”å›çš„ç»“æœå°±æ˜¯<code>14</code>ã€‚</p>
<p>â€œå…ˆè¡Œå¦å®šæ–­è¨€â€ä¸­ï¼Œæ‹¬å·é‡Œçš„éƒ¨åˆ†æ˜¯ä¸ä¼šè¿”å›çš„ã€‚</p>
<pre><code class="javascript">var m = &#39;abd&#39;.match(/b(?!c)/);
m // [&#39;b&#39;]
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä½¿ç”¨äº†å…ˆè¡Œå¦å®šæ–­è¨€ï¼Œ<code>b</code>ä¸åœ¨<code>c</code>å‰é¢æ‰€ä»¥è¢«åŒ¹é…ï¼Œè€Œä¸”æ‹¬å·å¯¹åº”çš„<code>d</code>ä¸ä¼šè¢«è¿”å›ã€‚</p>
<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul>
<li>Axel Rauschmayer, <a href="http://www.2ality.com/2011/04/javascript-overview-of-regular.html" target="_blank" rel="external">JavaScript: an overview of the regular expression API</a></li>
<li>Mozilla Developer Network, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="external">Regular Expressions</a></li>
<li>Axel Rauschmayer, <a href="http://www.2ality.com/2013/08/regexp-g.html" target="_blank" rel="external">The flag /g of JavaScriptâ€™s regular expressions</a></li>
<li>Sam Hughes, <a href="http://qntm.org/files/re/re.html" target="_blank" rel="external">Learn regular expressions in about 55 minutes</a></li>
</ul>
<h2 id="å…³äº"><a href="#å…³äº" class="headerlink" title="å…³äº"></a>å…³äº</h2><p>æœ¬æ–‡ä»…ä¾›å­¦ä¹ äº¤æµåˆ†äº«ï¼ŒåŸæ–‡é“¾æ¥ <a href="http://javascript.ruanyifeng.com/stdlib/regexp.html" target="_blank" rel="external">RegExpå¯¹è±¡</a>ï¼Œæ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆ</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JSä¸­çš„æ­£åˆ™å¯¹è±¡&quot;&gt;&lt;a href=&quot;#JSä¸­çš„æ­£åˆ™å¯¹è±¡&quot; class=&quot;headerlink&quot; title=&quot;JSä¸­çš„æ­£åˆ™å¯¹è±¡&quot;&gt;&lt;/a&gt;JSä¸­çš„æ­£åˆ™å¯¹è±¡&lt;/h1&gt;&lt;h2 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; titl
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="RegExp" scheme="https://microzz.com/tags/RegExp/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³•</title>
    <link href="https://microzz.com/2017/08/22/js-binarytree/"/>
    <id>https://microzz.com/2017/08/22/js-binarytree/</id>
    <published>2017-08-22T14:03:04.000Z</published>
    <updated>2017-09-10T14:18:41.068Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³•"><a href="#JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³•" class="headerlink" title="JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³•"></a>JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³•</h1><h2 id="ä»€ä¹ˆæ˜¯äºŒå‰æ ‘"><a href="#ä»€ä¹ˆæ˜¯äºŒå‰æ ‘" class="headerlink" title="ä»€ä¹ˆæ˜¯äºŒå‰æ ‘"></a>ä»€ä¹ˆæ˜¯äºŒå‰æ ‘</h2><blockquote>
<p>&nbsp;&nbsp;&nbsp;åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒäºŒå‰æ ‘ï¼ˆè‹±è¯­ï¼šBinary treeï¼‰æ˜¯æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªæœ‰ä¸¤ä¸ªåˆ†æ”¯(ä¸å­˜åœ¨åˆ†æ”¯åº¦å¤§äº2çš„èŠ‚ç‚¹)çš„æ ‘ç»“æ„ã€‚é€šå¸¸åˆ†æ”¯è¢«ç§°ä½œâ€œå·¦å­æ ‘â€å’Œâ€œå³å­æ ‘â€ã€‚äºŒå‰æ ‘çš„åˆ†æ”¯å…·æœ‰å·¦å³æ¬¡åºï¼Œä¸èƒ½é¢ å€’ã€‚</p>
</blockquote>
<p>ä»¥ä¸Šæ˜¯ç»´åŸºç™¾ç§‘å¯¹<strong>äºŒå‰æ ‘</strong>çš„ç®€å•ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å›¾ç‰‡å½¢è±¡è¡¨ç¤ºï¼š<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170822_binarytree/binarytree.png" alt="äºŒå‰æ ‘ç»“æ„" title="">
                </div>
                <div class="image-caption">äºŒå‰æ ‘ç»“æ„</div>
            </figure></p>
<h2 id="JSæ¥å®ç°äºŒå‰æ ‘"><a href="#JSæ¥å®ç°äºŒå‰æ ‘" class="headerlink" title="JSæ¥å®ç°äºŒå‰æ ‘"></a>JSæ¥å®ç°äºŒå‰æ ‘</h2><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡<strong>JavaScript</strong>æ¥æ¨¡æ‹ŸäºŒå‰æ ‘çš„æ•°æ®ç»“æ„</p>
<pre><code class="javascript">/**
 * JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³•
 */
function BinaryTree() {
  // äºŒå‰æ ‘æ ¹èŠ‚ç‚¹
  this.root = null;

  // ç”ŸæˆäºŒå‰æ ‘èŠ‚ç‚¹
  const Node = function(key) {
    this.key = key;
    this.left = null;
    this.right = null;
  }

  // æ’å…¥èŠ‚ç‚¹
  const insertNode = function(node, newNode) {
    if (newNode.key &lt; node.key) {
      if (node.left === null) {
        node.left = newNode;
      } else {
        insertNode(node.left, newNode);
      }
    } else {
      if (node.right === null) {
        node.right = newNode;
      } else {
        insertNode(node.right, newNode);
      }
    }
  }

  // å®ä¾‹è°ƒç”¨çš„æ’å…¥èŠ‚ç‚¹æ–¹æ³•
  this.insert = function(key) {
    let newNode = new Node(key);
    if (this.root === null) {
      this.root = newNode;
    } else {
      insertNode(this.root, newNode);
    }
  }

}

// æ¨¡æ‹Ÿæ•°æ®
const data = [8, 3, 10, 1, 6, 14, 4, 7, 13];

// å®ä¾‹åŒ–äºŒå‰æ ‘çš„æ•°æ®ç»“æ„
const binaryTree = new BinaryTree();

// éå†æ•°æ®å¹¶æ’å…¥
data.forEach(item =&gt; binaryTree.insert(item));

// æ‰“å°ç»“æœ
console.log(binaryTree.root);
</code></pre>
<h2 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170822_binarytree/result.png" alt="binaryTree.root" title="">
                </div>
                <div class="image-caption">binaryTree.root</div>
            </figure>
<p>ä¹Ÿå³å¯¹åº”å›¾åƒï¼š<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170822_binarytree/binarytree.png" alt="äºŒå‰æ ‘ç»“æ„" title="">
                </div>
                <div class="image-caption">äºŒå‰æ ‘ç»“æ„</div>
            </figure></p>
<p>ä»¥ä¸Šå°±æ˜¯ç”¨<strong>JavaScript</strong>å¯¹<strong>äºŒå‰æ ‘</strong>çš„<strong>ç®€å•</strong>æè¿°ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³•&quot;&gt;&lt;a href=&quot;#JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³•&quot; class=&quot;headerlink&quot; title=&quot;JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³•&quot;&gt;&lt;/a&gt;JavaScriptå®ç°äºŒå‰æ ‘ç®—æ³•&lt;/h1&gt;&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯äºŒå‰
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="äºŒå‰æ ‘" scheme="https://microzz.com/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    
      <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://microzz.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Webå®‰å…¨ä¹‹CSRF</title>
    <link href="https://microzz.com/2017/08/19/csrf/"/>
    <id>https://microzz.com/2017/08/19/csrf/</id>
    <published>2017-08-19T09:02:10.000Z</published>
    <updated>2017-08-20T13:37:52.071Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Webå®‰å…¨ä¹‹CSRF"><a href="#Webå®‰å…¨ä¹‹CSRF" class="headerlink" title="Webå®‰å…¨ä¹‹CSRF"></a>Webå®‰å…¨ä¹‹CSRF</h1><h2 id="ä»€ä¹ˆæ˜¯CSRF"><a href="#ä»€ä¹ˆæ˜¯CSRF" class="headerlink" title="ä»€ä¹ˆæ˜¯CSRF"></a>ä»€ä¹ˆæ˜¯CSRF</h2><blockquote>
<p>&nbsp;&nbsp;<strong>è·¨ç«™è¯·æ±‚ä¼ªé€ </strong>ï¼ˆè‹±è¯­ï¼šCross-site request forgeryï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸º one-click attack æˆ–è€… session ridingï¼Œé€šå¸¸ç¼©å†™ä¸º <strong>CSRF</strong> æˆ–è€… <strong>XSRF</strong>ï¼Œ æ˜¯ä¸€ç§æŒŸåˆ¶ç”¨æˆ·åœ¨å½“å‰å·²ç™»å½•çš„Webåº”ç”¨ç¨‹åºä¸Šæ‰§è¡Œéæœ¬æ„çš„æ“ä½œçš„æ”»å‡»æ–¹æ³•ã€‚è·Ÿè·¨ç½‘ç«™è„šæœ¬ï¼ˆXSSï¼‰ç›¸æ¯”ï¼ŒXSS åˆ©ç”¨çš„æ˜¯ç”¨æˆ·å¯¹æŒ‡å®šç½‘ç«™çš„ä¿¡ä»»ï¼ŒCSRF åˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·ç½‘é¡µæµè§ˆå™¨çš„ä¿¡ä»»ã€‚ç®€å•åœ°è¯´ï¼Œæ˜¯æ”»å‡»è€…é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ¬ºéª—ç”¨æˆ·çš„æµè§ˆå™¨å»è®¿é—®ä¸€ä¸ªè‡ªå·±æ›¾ç»è®¤è¯è¿‡çš„ç½‘ç«™å¹¶æ‰§è¡Œä¸€äº›æ“ä½œï¼ˆå¦‚å‘é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç”šè‡³è´¢äº§æ“ä½œå¦‚è½¬è´¦å’Œè´­ä¹°å•†å“ï¼‰ã€‚ç”±äºæµè§ˆå™¨æ›¾ç»è®¤è¯è¿‡ï¼Œæ‰€ä»¥è¢«è®¿é—®çš„ç½‘ç«™ä¼šè®¤ä¸ºæ˜¯çœŸæ­£çš„ç”¨æˆ·æ“ä½œè€Œå»æ‰§è¡Œã€‚è¿™åˆ©ç”¨äº†webä¸­ç”¨æˆ·èº«ä»½éªŒè¯çš„ä¸€ä¸ªæ¼æ´ï¼šç®€å•çš„èº«ä»½éªŒè¯åªèƒ½ä¿è¯è¯·æ±‚å‘è‡ªæŸä¸ªç”¨æˆ·çš„æµè§ˆå™¨ï¼Œå´ä¸èƒ½ä¿è¯è¯·æ±‚æœ¬èº«æ˜¯ç”¨æˆ·è‡ªæ„¿å‘å‡ºçš„ã€‚</p>
</blockquote>
<p>ä»¥ä¸Šæ˜¯ç»´åŸºç™¾ç§‘å¯¹<strong>CSRF</strong>çš„è§£é‡Šï¼Œæˆ‘ç”»ä¸€å¹…æ€ç»´å¯¼å›¾æ›´å¥½ç†è§£ï¼š<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170819_csrf/csrf-1.png" alt="CSRFæ”»å‡»åŸç†" title="">
                </div>
                <div class="image-caption">CSRFæ”»å‡»åŸç†</div>
            </figure></p>
<p>ç”¨æˆ·é€šè¿‡æºç«™ç‚¹é¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®æºç«™ç‚¹æœåŠ¡å™¨æ¥å£ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¯èƒ½è¢«é’“é±¼è¿›å…¥ä¼ªç«™ç‚¹æ¥è®¿é—®æºæœåŠ¡å™¨ï¼Œå¦‚æœä¼ªç«™ç‚¹é€šè¿‡ç¬¬ä¸‰æ–¹æˆ–ç”¨æˆ·ä¿¡æ¯æ‹¼æ¥ç­‰æ–¹å¼è·å–åˆ°äº†ç”¨æˆ·çš„ä¿¡æ¯ï¼Œç›´æ¥è®¿é—®æºç«™ç‚¹çš„æœåŠ¡å™¨æ¥å£è¿›è¡Œå…³é”®æ€§æ“ä½œï¼ˆä¾‹å¦‚æ”¯ä»˜æ‰£æ¬¾æˆ–è¿”å›ç”¨æˆ·éšç§ä¿¡æ¯ç­‰æ“ä½œï¼‰ï¼Œæ­¤æ—¶å¦‚æœæºç«™ç‚¹æœåŠ¡å™¨æœªåšæ ¡éªŒé˜²æŠ¤ï¼Œä¼ªç«™ç‚¹çš„è¯·æ±‚æ“ä½œå°±å¯ä»¥è¢«æˆåŠŸæ‰§è¡Œã€‚å¦ä¸€ç§æƒ…å†µåˆ™å¯èƒ½æ˜¯ç›—åˆ·æºç«™ç‚¹çš„ç™»å½•ç­‰æ¥å£æ¥æš´åŠ›ç ´è§£ç”¨æˆ·å¯†ç çš„æƒ…å†µï¼Œå¦‚æœæºç«™ç‚¹ä¸æ·»åŠ é˜²æŠ¤æªæ–½ï¼Œç”¨æˆ·ä¿¡æ¯å°±æå¯èƒ½è¢«ç›—å–</p>
<h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p>å‡å¦‚ä¸€å®¶é“¶è¡Œç”¨ä»¥æ‰§è¡Œè½¬è´¦æ“ä½œçš„URLåœ°å€å¦‚ä¸‹ï¼š</p>
<pre><code>http://www.examplebank.com/withdraw?account=AccoutName&amp;amount=1000&amp;for=PayeeName
</code></pre><p>é‚£ä¹ˆï¼Œä¸€ä¸ªæ¶æ„æ”»å‡»è€…å¯ä»¥åœ¨å¦ä¸€ä¸ªç½‘ç«™ä¸Šæ”¾ç½®å¦‚ä¸‹ä»£ç ï¼š </p>
<pre><code>&lt;img src=&quot;http://www.examplebank.com/withdraw?account=Alice&amp;amount=1000&amp;for=Badman&quot;&gt;
</code></pre><p>å¦‚æœæœ‰è´¦æˆ·åä¸ºAliceçš„ç”¨æˆ·è®¿é—®äº†æ¶æ„ç«™ç‚¹ï¼Œè€Œå¥¹ä¹‹å‰åˆšè®¿é—®è¿‡é“¶è¡Œä¸ä¹…ï¼Œç™»å½•ä¿¡æ¯å°šæœªè¿‡æœŸï¼Œé‚£ä¹ˆå¥¹å°±ä¼šæŸå¤±1000èµ„é‡‘ã€‚<br>è¿™ç§æ¶æ„çš„ç½‘å€å¯ä»¥æœ‰å¾ˆå¤šç§å½¢å¼ï¼Œè—èº«äºç½‘é¡µä¸­çš„è®¸å¤šåœ°æ–¹ã€‚æ­¤å¤–ï¼Œæ”»å‡»è€…ä¹Ÿä¸éœ€è¦æ§åˆ¶æ”¾ç½®æ¶æ„ç½‘å€çš„ç½‘ç«™ã€‚ä¾‹å¦‚ä»–å¯ä»¥å°†è¿™ç§åœ°å€è—åœ¨è®ºå›ï¼Œåšå®¢ç­‰ä»»ä½•ç”¨æˆ·ç”Ÿæˆå†…å®¹çš„ç½‘ç«™ä¸­ã€‚è¿™æ„å‘³ç€å¦‚æœæœåŠ¡å™¨ç«¯æ²¡æœ‰åˆé€‚çš„é˜²å¾¡æªæ–½çš„è¯ï¼Œç”¨æˆ·å³ä½¿è®¿é—®ç†Ÿæ‚‰çš„å¯ä¿¡ç½‘ç«™ä¹Ÿæœ‰å—æ”»å‡»çš„å±é™©ã€‚<br>é€è¿‡ä¾‹å­èƒ½å¤Ÿçœ‹å‡ºï¼Œæ”»å‡»è€…å¹¶ä¸èƒ½é€šè¿‡CSRFæ”»å‡»æ¥ç›´æ¥è·å–ç”¨æˆ·çš„è´¦æˆ·æ§åˆ¶æƒï¼Œä¹Ÿä¸èƒ½ç›´æ¥çªƒå–ç”¨æˆ·çš„ä»»ä½•ä¿¡æ¯ã€‚ä»–ä»¬èƒ½åšåˆ°çš„ï¼Œæ˜¯æ¬ºéª—ç”¨æˆ·æµè§ˆå™¨ï¼Œè®©å…¶ä»¥ç”¨æˆ·çš„åä¹‰æ‰§è¡Œæ“ä½œã€‚</p>
<h2 id="é˜²å¾¡æªæ–½"><a href="#é˜²å¾¡æªæ–½" class="headerlink" title="é˜²å¾¡æªæ–½"></a>é˜²å¾¡æªæ–½</h2><h3 id="æ£€æŸ¥Refererå­—æ®µ"><a href="#æ£€æŸ¥Refererå­—æ®µ" class="headerlink" title="æ£€æŸ¥Refererå­—æ®µ"></a>æ£€æŸ¥Refererå­—æ®µ</h3><p>HTTPå¤´ä¸­æœ‰ä¸€ä¸ªRefererå­—æ®µï¼Œè¿™ä¸ªå­—æ®µç”¨ä»¥æ ‡æ˜è¯·æ±‚æ¥æºäºå“ªä¸ªåœ°å€ã€‚åœ¨å¤„ç†æ•æ„Ÿæ•°æ®è¯·æ±‚æ—¶ï¼Œé€šå¸¸æ¥è¯´ï¼ŒRefererå­—æ®µåº”å’Œè¯·æ±‚çš„åœ°å€ä½äºåŒä¸€åŸŸåä¸‹ã€‚ä»¥ä¸Šæ–‡é“¶è¡Œæ“ä½œä¸ºä¾‹ï¼ŒRefererå­—æ®µåœ°å€é€šå¸¸åº”è¯¥æ˜¯è½¬è´¦æŒ‰é’®æ‰€åœ¨çš„ç½‘é¡µåœ°å€ï¼Œåº”è¯¥ä¹Ÿä½äºwww.examplebank.comä¹‹ä¸‹ã€‚è€Œå¦‚æœæ˜¯CSRFæ”»å‡»ä¼ æ¥çš„è¯·æ±‚ï¼ŒRefererå­—æ®µä¼šæ˜¯åŒ…å«æ¶æ„ç½‘å€çš„åœ°å€ï¼Œä¸ä¼šä½äºwww.examplebank.comä¹‹ä¸‹ï¼Œè¿™æ—¶å€™æœåŠ¡å™¨å°±èƒ½è¯†åˆ«å‡ºæ¶æ„çš„è®¿é—®ã€‚<br>è¿™ç§åŠæ³•ç®€å•æ˜“è¡Œï¼Œå·¥ä½œé‡ä½ï¼Œä»…éœ€è¦åœ¨å…³é”®è®¿é—®å¤„å¢åŠ ä¸€æ­¥æ ¡éªŒã€‚ä½†è¿™ç§åŠæ³•ä¹Ÿæœ‰å…¶å±€é™æ€§ï¼Œå› å…¶å®Œå…¨ä¾èµ–æµè§ˆå™¨å‘é€æ­£ç¡®çš„Refererå­—æ®µã€‚è™½ç„¶httpåè®®å¯¹æ­¤å­—æ®µçš„å†…å®¹æœ‰æ˜ç¡®çš„è§„å®šï¼Œä½†å¹¶æ— æ³•ä¿è¯æ¥è®¿çš„æµè§ˆå™¨çš„å…·ä½“å®ç°ï¼Œäº¦æ— æ³•ä¿è¯æµè§ˆå™¨æ²¡æœ‰å®‰å…¨æ¼æ´å½±å“åˆ°æ­¤å­—æ®µã€‚å¹¶ä¸”ä¹Ÿå­˜åœ¨æ”»å‡»è€…æ”»å‡»æŸäº›æµè§ˆå™¨ï¼Œç¯¡æ”¹å…¶Refererå­—æ®µçš„å¯èƒ½ã€‚</p>
<h3 id="æ·»åŠ æ ¡éªŒtoken"><a href="#æ·»åŠ æ ¡éªŒtoken" class="headerlink" title="æ·»åŠ æ ¡éªŒtoken"></a>æ·»åŠ æ ¡éªŒtoken</h3><p>ç”±äºCSRFçš„æœ¬è´¨åœ¨äºæ”»å‡»è€…æ¬ºéª—ç”¨æˆ·å»è®¿é—®è‡ªå·±è®¾ç½®çš„åœ°å€ï¼Œæ‰€ä»¥å¦‚æœè¦æ±‚åœ¨è®¿é—®æ•æ„Ÿæ•°æ®è¯·æ±‚æ—¶ï¼Œè¦æ±‚ç”¨æˆ·æµè§ˆå™¨æä¾›ä¸ä¿å­˜åœ¨cookieä¸­ï¼Œå¹¶ä¸”æ”»å‡»è€…æ— æ³•ä¼ªé€ çš„æ•°æ®ä½œä¸ºæ ¡éªŒï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±æ— æ³•å†æ‰§è¡ŒCSRFæ”»å‡»ã€‚è¿™ç§æ•°æ®é€šå¸¸æ˜¯è¡¨å•ä¸­çš„ä¸€ä¸ªæ•°æ®é¡¹ã€‚æœåŠ¡å™¨å°†å…¶ç”Ÿæˆå¹¶é™„åŠ åœ¨è¡¨å•ä¸­ï¼Œå…¶å†…å®¹æ˜¯ä¸€ä¸ªä¼ªä¹±æ•°ã€‚å½“å®¢æˆ·ç«¯é€šè¿‡è¡¨å•æäº¤è¯·æ±‚æ—¶ï¼Œè¿™ä¸ªä¼ªä¹±æ•°ä¹Ÿä¸€å¹¶æäº¤ä¸Šå»ä»¥ä¾›æ ¡éªŒã€‚æ­£å¸¸çš„è®¿é—®æ—¶ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨èƒ½å¤Ÿæ­£ç¡®å¾—åˆ°å¹¶ä¼ å›è¿™ä¸ªä¼ªä¹±æ•°ï¼Œè€Œé€šè¿‡CSRFä¼ æ¥çš„æ¬ºéª—æ€§æ”»å‡»ä¸­ï¼Œæ”»å‡»è€…æ— ä»äº‹å…ˆå¾—çŸ¥è¿™ä¸ªä¼ªä¹±æ•°çš„å€¼ï¼ŒæœåŠ¡å™¨ç«¯å°±ä¼šå› ä¸ºæ ¡éªŒtokençš„å€¼ä¸ºç©ºæˆ–è€…é”™è¯¯ï¼Œæ‹’ç»è¿™ä¸ªå¯ç–‘è¯·æ±‚ã€‚</p>
<p>æˆ‘ä»¬åœ¨æºç«™ç‚¹æœåŠ¡è¯·æ±‚è°ƒç”¨æ—¶æ·»åŠ äº†å¯¹æºç«™ç‚¹çš„éªŒè¯ï¼Œä½¿ç”¨æœåŠ¡å™¨ç«¯å®æ—¶è¿”å›åŠ å¯†çš„éªŒè¯ Tokenç»™æºç«™ç‚¹é¡µé¢ï¼Œåœ¨æºç«™ç‚¹é¡µé¢æäº¤æ—¶å°† Tokenä¸€èµ·å¸¦ç»™æœåŠ¡å™¨éªŒè¯ï¼Œè€ŒTokenæ˜¯ä¸ä¼šè¢«å…¶ä»–ä¼ªç«™ç‚¹åˆ©ç”¨çš„ã€‚è€Œéæ³•çš„ä¼ªç«™ç‚¹å’Œç›—åˆ·çš„è¡Œä¸ºå°±å¯ä»¥è¢«ç›´æ¥æ‹’ç»æ‰ï¼Œè¿™æ ·å°±å¤§å¤§é™ä½äº†CSRFå‘ç”Ÿçš„æ¦‚ç‡ã€‚æ‰€ä»¥åœ¨Webåç«¯ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šè¿›è¡Œ Tokençš„éªŒè¯ï¼Œå…¶ä¸­ä¸€ç§å½¢å¼æ˜¯å°†é¡µé¢æäº¤åˆ°åå°çš„éªŒè¯ Tokenä¸ sessionä¸´æ—¶ä¿å­˜çš„ Tokenè¿›è¡Œæ¯”è¾ƒå°±å¯ä»¥æ¥å®ç°äº†ã€‚</p>
<pre><code class="javascript">//ç”Ÿæˆéšæœºçš„csrféªŒè¯ Tokenï¼Œå¹¶è¿”å›ç»™å‰ç«¯é¡µé¢
this.session.csrf = md5(math.random(0, 1).tostring().slice(5, 15);
this.body = yield render(&#39;user/login&#39;, {
  csrf: ctx.session.csrf
});

//æäº¤æ—¶éªŒè¯ Tokenæ˜¯å¦ä¸æºç«™çš„ Tokenç›¸åŒ
let csrf = this.request.body[&#39;csrf&#39;];
if (csrf !== this.session.csrf) {
  res = {
      code: 403,
      msg: &#39;ä¸æ˜ç½‘ç«™æ¥æºæäº¤&#39;
    }
} else {
  // æ­£å¸¸æäº¤åçš„é€»è¾‘
}
</code></pre>
<p>å†ç”¨æ€ç»´å¯¼å›¾è¡¨ç¤ºä¸€ä¸‹ï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170819_csrf/csrf-2.png" alt="CSRF" title="">
                </div>
                <div class="image-caption">CSRF</div>
            </figure>
<p>ç›®å‰è§£å†³CSRFçš„æœ€ä½³æ–¹å¼å°±æ˜¯é€šè¿‡åŠ å¯†è®¡ç®—çš„ TokenéªŒè¯ï¼Œè€Œ Tokené™¤äº†é€šè¿‡ sessionä¹Ÿå¯ä»¥ä½¿ç”¨HTTPè¯·æ±‚å¤´ä¸­ Authorizationçš„ç‰¹å®šè®¤è¯å­—æ®µæ¥ä¼ é€’ã€‚å½“ç„¶å¹¶ä¸æ˜¯è¯´ä½¿ç”¨äº†Tokenï¼Œç½‘ç«™è°ƒç”¨æœåŠ¡å°±å®‰å…¨äº†ï¼Œå•çº¯çš„ TokenéªŒè¯é˜²æ­¢CSRFçš„æ–¹å¼ç†è®ºä¸Šä¹Ÿæ˜¯å¯ä»¥è¢«ç ´è§£çš„ï¼Œä¾‹å¦‚å¯ä»¥é€šè¿‡åŸŸåä¼ªé€ å’Œæ‹‰å–æºç«™å®æ—¶ Tokenä¿¡æ¯çš„æ–¹å¼æ¥è¿›è¡Œæäº¤ã€‚å¦å¤–ï¼Œä»»ä½•æ‰€è°“çš„å®‰å…¨éƒ½æ˜¯ç›¸å¯¹çš„ï¼Œåªæ˜¯è¯´ç†è®ºçš„ç ´è§£æ—¶é—´å˜é•¿äº†ï¼Œè€Œä¸å®¹æ˜“è¢«æ”»å‡»ã€‚å¾ˆå¤šæ—¶å€™è¦ä½¿ç”¨å¤šç§æ–¹æ³•ç»“åˆçš„æ–¹å¼æ¥ä¸€èµ·å¢åŠ ç½‘ç«™çš„å®‰å…¨æ€§ï¼Œå¯ä»¥ç»“åˆéªŒè¯ç ç­‰æ‰‹æ®µå¤§å¤§å‡å°‘ç›—åˆ·ç½‘ç«™ç”¨å°¸ä¿¡æ¯çš„é¢‘ç‡ç­‰ï¼Œè¿›ä¸€æ­¥å¢å¼ºç½‘ç«™å†…å®¹çš„å®‰å…¨æ€§ã€‚</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://zh.wikipedia.org/wiki/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0" target="_blank" rel="external">è·¨ç«™è¯·æ±‚ä¼ªé€ </a><br>ã€Šç°ä»£å‰ç«¯æŠ€æœ¯è§£æã€‹</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Webå®‰å…¨ä¹‹CSRF&quot;&gt;&lt;a href=&quot;#Webå®‰å…¨ä¹‹CSRF&quot; class=&quot;headerlink&quot; title=&quot;Webå®‰å…¨ä¹‹CSRF&quot;&gt;&lt;/a&gt;Webå®‰å…¨ä¹‹CSRF&lt;/h1&gt;&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯CSRF&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯CSRF&quot; class
    
    </summary>
    
    
      <category term="CSRF" scheme="https://microzz.com/tags/CSRF/"/>
    
      <category term="XSS" scheme="https://microzz.com/tags/XSS/"/>
    
      <category term="Webå®‰å…¨" scheme="https://microzz.com/tags/Web%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>Webå®‰å…¨ä¹‹XSS</title>
    <link href="https://microzz.com/2017/08/17/xss/"/>
    <id>https://microzz.com/2017/08/17/xss/</id>
    <published>2017-08-17T14:27:41.000Z</published>
    <updated>2017-08-20T12:16:12.981Z</updated>
    
    <content type="html"><![CDATA[<h1 id="XSSè·¨ç«™è„šæœ¬æ”»å‡»"><a href="#XSSè·¨ç«™è„šæœ¬æ”»å‡»" class="headerlink" title="XSSè·¨ç«™è„šæœ¬æ”»å‡»"></a>XSSè·¨ç«™è„šæœ¬æ”»å‡»</h1><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;<strong>è·¨ç«™è„šæœ¬</strong>ï¼ˆCross-site scriptingï¼Œé€šå¸¸ç®€ç§°ä¸ºï¼šXSSï¼‰æ˜¯ä¸€ç§ç½‘ç«™åº”ç”¨ç¨‹åºçš„å®‰å…¨æ¼æ´æ”»å‡»ï¼Œæ˜¯ä»£ç æ³¨å…¥çš„ä¸€ç§ã€‚å®ƒå…è®¸æ¶æ„ç”¨æˆ·å°†ä»£ç æ³¨å…¥åˆ°ç½‘é¡µä¸Šï¼Œå…¶ä»–ç”¨æˆ·åœ¨è§‚çœ‹ç½‘é¡µæ—¶å°±ä¼šå—åˆ°å½±å“ã€‚è¿™ç±»æ”»å‡»é€šå¸¸åŒ…å«äº†HTMLä»¥åŠç”¨æˆ·ç«¯è„šæœ¬è¯­è¨€ã€‚<br>XSSæ”»å‡»é€šå¸¸æŒ‡çš„æ˜¯é€šè¿‡åˆ©ç”¨ç½‘é¡µå¼€å‘æ—¶ç•™ä¸‹çš„æ¼æ´ï¼Œé€šè¿‡å·§å¦™çš„æ–¹æ³•æ³¨å…¥æ¶æ„æŒ‡ä»¤ä»£ç åˆ°ç½‘é¡µï¼Œä½¿ç”¨æˆ·åŠ è½½å¹¶æ‰§è¡Œæ”»å‡»è€…æ¶æ„åˆ¶é€ çš„ç½‘é¡µç¨‹åºã€‚è¿™äº›æ¶æ„ç½‘é¡µç¨‹åºé€šå¸¸æ˜¯JavaScriptï¼Œä½†å®é™…ä¸Šä¹Ÿå¯ä»¥åŒ…æ‹¬Javaï¼ŒVBScriptï¼ŒActiveXï¼ŒFlashæˆ–è€…ç”šè‡³æ˜¯æ™®é€šçš„HTMLã€‚æ”»å‡»æˆåŠŸåï¼Œæ”»å‡»è€…å¯èƒ½å¾—åˆ°æ›´é«˜çš„æƒé™ï¼ˆå¦‚æ‰§è¡Œä¸€äº›æ“ä½œï¼‰ã€ç§å¯†ç½‘é¡µå†…å®¹ã€ä¼šè¯å’Œcookieç­‰å„ç§å†…å®¹ã€‚</p>
</blockquote>
<p>ä»¥ä¸Šæ˜¯ç»´åŸºç™¾ç§‘å¯¹<strong>XSS</strong>çš„è§£é‡Šï¼ŒXSSåœ¨Webå®‰å…¨ä¸­éå¸¸å¸¸è§ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åº”è¯¥å¼•èµ·é‡è§†çš„ã€‚ä¸‹é¢å°±è¯¦ç»†è¿›è¡Œä¸€ä¸‹ä»‹ç»ã€‚</p>
<h2 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h2><p>XSSé€šå¸¸å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<h3 id="åå°„å‹XSS"><a href="#åå°„å‹XSS" class="headerlink" title="åå°„å‹XSS"></a><strong>åå°„å‹XSS</strong></h3><p>å‘å‡ºè¯·æ±‚æ—¶ï¼ŒXSSä»£ç å‡ºç°åœ¨URLä¸­ï¼Œä½œä¸ºè¾“å…¥æäº¤åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯è§£æåå“åº”ï¼ŒXSSä»£ç éšå“åº”å†…å®¹ä¸€èµ·ä¼ å›æµè§ˆå™¨ï¼Œæœ€åæµè§ˆå™¨è§£ææ‰§è¡ŒXSSä»£ç ã€‚è¿™ä¸ªè¿‡ç¨‹åƒä¸€æ¬¡åå°„ï¼Œæ•…å«<strong>åå°„æ€§XSS</strong>ã€‚</p>
<h4 id="ä»£ç æ¼”ç¤ºåå°„å‹XSS"><a href="#ä»£ç æ¼”ç¤ºåå°„å‹XSS" class="headerlink" title="ä»£ç æ¼”ç¤ºåå°„å‹XSS"></a>ä»£ç æ¼”ç¤ºåå°„å‹XSS</h4><p>ä¸ºäº†æ–¹ä¾¿å®éªŒï¼Œæˆ‘é€‰ç”¨äº†Koa2åšåç«¯ï¼Œæ¨¡ç‰ˆä½¿ç”¨Ejsã€‚</p>
<p>æˆ‘ä»¬å¯¹ä¸€ä¸ªè·¯ç”±åšå¦‚ä¸‹å¤„ç†ï¼š</p>
<pre><code class="javascript">router.get(&#39;/&#39;, async (ctx, next) =&gt; {
  ctx.set(&#39;X-XSS-Protection&#39;, 0);
  await ctx.render(&#39;index&#39;, {
    title: &#39;XSSæ”»å‡»ç¤ºä¾‹&#39;,
    xss: ctx.request.query.xss
  })
})
</code></pre>
<p>æˆ‘ä»¬éœ€è¦æ³¨æ„ä»£ç ä¸­è¿˜é¢å¤–è®¾ç½®äº†ä¸€ä¸ªheader<br><code>ctx.set(&#39;X-XSS-Protection&#39;, 0);</code><br>å› ä¸ºå¾ˆå¤šç°åœ¨å¾ˆå¤šç°ä»£æµè§ˆå™¨éƒ½æœ‰xssçš„æ‹¦æˆªæªæ–½è¿›è¡Œä¿æŠ¤ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®çš„è¯ä¼šæœ‰å¦‚ä¸‹ç»“æœï¼š</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/xss-protection1.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure>
<p>æ‰“å¼€æ§åˆ¶å°å°±ä¼šæœ‰æŠ¥é”™ä¿¡æ¯ï¼š<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/xss-protection2.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure></p>
<pre><code class="html">&lt;!-- index.ejs é¦–é¡µæ¨¡ç‰ˆé¡µ --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;
    &lt;link rel=&#39;stylesheet&#39; href=&#39;/stylesheets/style.css&#39; /&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt;
    &lt;div&gt;&lt;%- xss %&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>(æ³¨æ„ï¼šå†™æˆ<code>&lt;%= xss %&gt;</code>å°±ä¸ä¼šæœ‰æ•ˆæœäº†ï¼Œä¸ºäº†æ¼”ç¤ºéœ€è¦å†™æˆ<code>&lt;%- xss %&gt;</code>)</p>
<p>æ­£å¸¸çš„æ˜¾ç¤ºæ˜¯è¿™æ ·çš„ï¼š<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170817_xss/xss-normal.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure></p>
<ul>
<li>ç”¨æˆ·è¾“å…¥ä¸€äº›æ¶æ„ä»£ç çš„æ—¶å€™å°±ä¼šå‡ºç°ä¸‹é¢çš„æƒ…å†µ,æ¯”å¦‚é€šè¿‡imgæ ‡ç­¾çš„onerroräº‹ä»¶è·å–cookie</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170817_xss/xss-cookie.png" alt="XSSè·å–cookie" title="">
                </div>
                <div class="image-caption">XSSè·å–cookie</div>
            </figure>
<ul>
<li>åŠ è½½ä¸€äº›éåŒæºjsï¼š<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/xss-js.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure>
æ‰“å¼€ç½‘ç»œé¢æ¿å’Œæ§åˆ¶å°ï¼Œå‘ç°æˆåŠŸåŠ è½½äº†jQueryï¼Œå¦‚æœæ˜¯å…¶ä»–æ¶æ„çš„è„šæœ¬åæœå¾ˆä¸¥é‡ã€‚<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/xss-jq.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure>
</li>
</ul>
<ul>
<li>åµŒå…¥ä¸€ä¸ªiframeæ’å…¥å„ç§å¹¿å‘Šæˆ–è€…å…¶ä»–æ¶æ„ç«™ç‚¹</li>
</ul>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170817_xss/xss-iframe.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure>
<h2 id="å­˜å‚¨å‹XSS"><a href="#å­˜å‚¨å‹XSS" class="headerlink" title="å­˜å‚¨å‹XSS"></a><strong>å­˜å‚¨å‹XSS</strong></h2><p>å­˜å‚¨å‹XSSå’Œåå°„å‹XSSå·®åˆ«ä»…åœ¨äºæäº¤çš„ä»£ç ä¼šå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯(æ•°æ®åº“ï¼Œå†…å­˜ï¼Œæ–‡ä»¶ç³»ç»Ÿç­‰)ï¼Œä¸‹æ¬¡è¯·æ±‚ç›®æ ‡é¡µé¢æ—¶ä¸ç”¨å†æäº¤XSSä»£ç </p>
<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªå›¾è¯´æ˜</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170817_xss/xss-pic.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure>
<h4 id="ä»£ç æ¼”ç¤ºå­˜å‚¨å‹XSS"><a href="#ä»£ç æ¼”ç¤ºå­˜å‚¨å‹XSS" class="headerlink" title="ä»£ç æ¼”ç¤ºå­˜å‚¨å‹XSS"></a>ä»£ç æ¼”ç¤ºå­˜å‚¨å‹XSS</h4><ul>
<li>å‰ç«¯</li>
</ul>
<p>å‰ç«¯å±•ç¤ºæ˜¯ä¸€ä¸ªå¤šè¡Œæ–‡æœ¬æ¡†ï¼Œç„¶åæ”¯æŒè¯„è®ºå’Œè·å–è¯„è®ºçš„è¾“å…¥æ¡†ï¼Œå¦‚ä¸‹å›¾ï¼š<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170817_xss/xss-db1.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure></p>
<p>ä»£ç éƒ¨åˆ†(ä¸ºäº†ä½¿æ¼”ç¤ºæ›´æ–¹ä¾¿ï¼Œæœ‰äº›åœ°æ–¹æ²¡æœ‰è€ƒè™‘å…¼å®¹æ€§)</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;%= title %&gt;&lt;/title&gt;
    &lt;link rel=&#39;stylesheet&#39; href=&#39;/stylesheets/style.css&#39; /&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt;
    &lt;div&gt;
      &lt;textarea name=&quot;name&quot; rows=&quot;8&quot; cols=&quot;80&quot;&gt;
        &lt;p&gt;microzz.com&lt;/p&gt;
        &lt;img src=&quot;null&quot; alt=&quot;æ— æ³•æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡&quot; onerror=&quot;alert(&#39;onerror&#39;)&quot;&gt;
        &lt;button onclick=&quot;alert(&#39;ä¸­å¥–å•¦&#39;)&quot;&gt;å»æŠ½å¥–&lt;/button&gt;
      &lt;/textarea&gt;

      &lt;button id=&quot;comment&quot;&gt;è¯„è®º&lt;/button&gt;
      &lt;button id=&quot;get&quot;&gt;è·å–è¯„è®º&lt;/button&gt;
    &lt;div&gt;

    &lt;script&gt;
      const oTextArea = document.querySelector(&#39;textarea&#39;);
      const oCommentBtn = document.querySelector(&#39;#comment&#39;);
      const oGetBtn = document.querySelector(&#39;#get&#39;);

      oGetBtn.addEventListener(&#39;click&#39;, () =&gt; {
        fetch(&#39;/get&#39;)
          .then(result =&gt; result.json())
          .then(data =&gt; {
            let oP = document.createElement(&#39;p&#39;);
            oP.innerHTML = data.comment;
            document.body.appendChild(oP);
          })
      });

      oCommentBtn.addEventListener(&#39;click&#39;, () =&gt; {
        fetch(`/comment?comment=${oTextArea.value}`)
      })

    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<ul>
<li>æœåŠ¡ç«¯</li>
</ul>
<p>ä¸ºäº†ä½¿æ¼”ç¤ºæ–¹ä¾¿å¹¶æ²¡æœ‰ä½¿ç”¨æ•°æ®åº“ï¼Œè¿™é‡Œä½¿ç”¨<code>Object</code>æ¥æ¨¡æ‹Ÿä»£æ›¿ï¼Œè·¯ç”±éƒ¨åˆ†å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">const router = require(&#39;koa-router&#39;)()
const db = {
  comment: &#39;&#39;
};

router.get(&#39;/get&#39;, async (ctx, next) =&gt; {
  ctx.body = {
    comment: db.comment
  }
})

router.get(&#39;/comment&#39;, async (ctx, next) =&gt; {
  db.comment = ctx.request.query.comment;
  ctx.body = {
    msg: &#39;ok&#39;
  }
})
</code></pre>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹è¯„è®ºåè·å–è¯„è®ºçš„æ•ˆæœï¼š<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170817_xss/xss-db4.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure></p>
<p>è¯±å¯¼æ˜¯ç”¨æˆ·ç‚¹å‡»ï¼š<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170817_xss/xss-db5.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure></p>
<h2 id="ä¸åŒåˆ†ç±»"><a href="#ä¸åŒåˆ†ç±»" class="headerlink" title="ä¸åŒåˆ†ç±»"></a>ä¸åŒåˆ†ç±»</h2><p>XSSæ”»å‡»ä»æ”»å‡»çš„æ–¹å¼å¯ä»¥åˆ†ä¸º</p>
<ul>
<li>åå°„å‹</li>
<li>å­˜å‚¨å‹</li>
<li>æ–‡æ¡£å‹(MXSS, ä¹Ÿå«DOM XSS)</li>
</ul>
<p>è¿™ç§åˆ†ç±»æ–¹å¼æœ‰äº›è¿‡æ—¶ï¼Œé•¿ä¹…ä»¥æ¥ï¼Œäººä»¬è®¤ä¸ºXSSåˆ†ç±»æœ‰ä»¥ä¸Šä¸‰ç§ï¼Œä½†å®é™…æƒ…å†µä¸­ç»å¸¸æ— æ³•åŒºåˆ†ï¼Œæ‰€ä»¥æ›´æ˜ç¡®çš„åˆ†ç±»æ–¹å¼å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼š</p>
<ul>
<li>client(å®¢æˆ·ç«¯å‹)</li>
<li>server(æœåŠ¡ç«¯å‹)</li>
</ul>
<p>å½“ä¸€ç«¯xssä»£ç æ˜¯åœ¨æœåŠ¡ç«¯è¢«æ’å…¥çš„ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯æœåŠ¡ç«¯å‹xssï¼ŒåŒç†ï¼Œå¦‚æœä»£ç åœ¨å®¢æˆ·ç«¯æ’å…¥ï¼Œå°±æ˜¯å®¢æˆ·ç«¯å‹xssã€‚</p>
<h2 id="é˜²å¾¡æªæ–½"><a href="#é˜²å¾¡æªæ–½" class="headerlink" title="é˜²å¾¡æªæ–½"></a>é˜²å¾¡æªæ–½</h2><ul>
<li>ç¼–ç </li>
<li>è¿‡æ»¤</li>
<li>æ ¡æ­£</li>
<li>CSP</li>
</ul>
<h3 id="ç¼–ç "><a href="#ç¼–ç " class="headerlink" title="ç¼–ç "></a>ç¼–ç </h3><p>å¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡ŒHTML Entityç¼–ç </p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170817_xss/html-entities.png" alt="HTML" title="">
                </div>
                <div class="image-caption">HTML</div>
            </figure>
<p>å…·ä½“å¯ä»¥æŸ¥é˜… ğŸ‘‰ <a href="https://dev.w3.org/html5/html-author/charref" target="_blank" rel="external">https://dev.w3.org/html5/html-author/charref</a></p>
<p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼š</p>
<pre><code class="javascript">// å¯¹ç”¨æˆ·çš„æäº¤è¿›è¡Œç¼–ç 
function htmlEncode(str) {
  return str
    .replace(/&amp;/g, &#39;&amp;amp;&#39;)
    .replace(/&lt;/g, &#39;&amp;lt;&#39;)
    .replace(/&gt;/g, &#39;&amp;gt;&#39;)
    .replace(/ /g, &#39;&amp;nbsp;&#39;)
    .replace(/\&#39;/g, &#39;&amp;#39;&#39;)
    .replace(/\&quot;/g, &#39;&amp;quot;&#39;)
    .replace(/\n/g, &#39;&lt;br&gt;&#39;);
}
</code></pre>
<p>æˆ‘ä»¬å¯¹ä¸Šé¢çš„è·¯ç”±è¿›è¡Œä¸€ä¸‹æ”¹é€ ï¼š</p>
<pre><code class="javascript">router.get(&#39;/comment&#39;, async (ctx, next) =&gt; {
  db.comment = htmlEncode(ctx.request.query.comment);
  ctx.body = {
    msg: &#39;ok&#39;
  }
})
</code></pre>
<p>æ­¤æ—¶é¡µé¢å°±æ˜¾ç¤ºæ­£å¸¸çš„å†…å®¹äº†</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170817_xss/xss-db6.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure>
<h3 id="è¿‡æ»¤"><a href="#è¿‡æ»¤" class="headerlink" title="è¿‡æ»¤"></a>è¿‡æ»¤</h3><ul>
<li><p>ç§»é™¤ç”¨æˆ·ä¸Šä¼ çš„DOMå±æ€§ï¼Œå¦‚<code>onerror</code>(<code>onerror</code>äº‹ä»¶å¯ä»¥æ‰§è¡Œjsä»£ç )ã€<code>click</code>ç­‰äº‹ä»¶</p>
</li>
<li><p>ç§»é™¤ç”¨æˆ·ä¸Šä¼ çš„Linkã€StyleèŠ‚ç‚¹(å¯ä»¥åˆ©ç”¨<code>!important</code>é‡ç½®é¡µé¢æ ·å¼ï¼Œæ¯”å¦‚: <code>body{display: none)}</code>ã€<br>ScriptèŠ‚ç‚¹(æ‰§è¡Œjsä»£ç ï¼ŒåŠ è½½éåŒæºjs)ã€<br>IframeèŠ‚ç‚¹(æ’å…¥æ¶æ„é¡µé¢æˆ–è€…å¹¿å‘Š)ç­‰</p>
</li>
</ul>
<h3 id="æ ¡æ­£"><a href="#æ ¡æ­£" class="headerlink" title="æ ¡æ­£"></a>æ ¡æ­£</h3><ul>
<li><p>é¿å…ç›´æ¥å¯¹HTML Entityè§£ç ï¼Œå¦åˆ™ç¼–ç æ„ä¹‰ä¸å¤§äº†</p>
</li>
<li><p>ä½¿ç”¨DOM Parseè½¬æ¢ï¼Œæ ¡æ­£ä¸é…å¯¹çš„DOMæ ‡ç­¾</p>
</li>
</ul>
<h3 id="CSP"><a href="#CSP" class="headerlink" title="CSP"></a>CSP</h3><p><strong>å†…å®¹å®‰å…¨ç­–ç•¥(CSP)</strong>æ˜¯ä¸€ä¸ªé¢å¤–çš„å®‰å…¨å±‚ï¼Œæœ‰åŠ©äºæ£€æµ‹å’Œå‡è½»æŸäº›ç±»å‹çš„æ”»å‡»ï¼ŒåŒ…æ‹¬è·¨ç«™è„šæœ¬ (XSS) å’Œæ•°æ®æ³¨å…¥æ”»å‡»ã€‚è¿™äº›æ”»å‡»ç”¨äºä»æ•°æ®çªƒå–åˆ°ç°åœºæ±¡æŸ“æˆ–æ¶æ„è½¯ä»¶åˆ†å‘çš„ä¸€åˆ‡ã€‚</p>
<p>CSP çš„å®è´¨å°±æ˜¯ç™½åå•åˆ¶åº¦ï¼Œå¼€å‘è€…æ˜ç¡®å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œå“ªäº›å¤–éƒ¨èµ„æºå¯ä»¥åŠ è½½å’Œæ‰§è¡Œï¼Œç­‰åŒäºæä¾›ç™½åå•ã€‚å®ƒçš„å®ç°å’Œæ‰§è¡Œå…¨éƒ¨ç”±æµè§ˆå™¨å®Œæˆï¼Œå¼€å‘è€…åªéœ€æä¾›é…ç½®ã€‚<br>CSP å¤§å¤§å¢å¼ºäº†ç½‘é¡µçš„å®‰å…¨æ€§ã€‚æ”»å‡»è€…å³ä½¿å‘ç°äº†æ¼æ´ï¼Œä¹Ÿæ²¡æ³•æ³¨å…¥è„šæœ¬ï¼Œé™¤éè¿˜æ§åˆ¶äº†ä¸€å°åˆ—å…¥äº†ç™½åå•çš„å¯ä¿¡ä¸»æœºã€‚</p>
<h4 id="å¯ç”¨æ–¹æ³•"><a href="#å¯ç”¨æ–¹æ³•" class="headerlink" title="å¯ç”¨æ–¹æ³•"></a>å¯ç”¨æ–¹æ³•</h4><ul>
<li>HTTP å¤´ä¿¡æ¯Content-Security-Policy</li>
</ul>
<p>æˆ‘ä»¬æ”¹é€ ä¸€ä¸‹å‰é¢åŠ è½½éåŒæºçš„jQueryè„šæœ¬çš„ä»£ç ï¼Œåç«¯è·¯ç”±è¿›è¡Œè¿™æ ·çš„æ”¹é€ ï¼š</p>
<pre><code class="javascript">router.get(&#39;/&#39;, async (ctx, next) =&gt; {
  ctx.set(&#39;X-XSS-Protection&#39;, 0);
  ctx.set(&#39;Content-Security-Policy&#39;, `default-src &#39;self&#39;`)
  await ctx.render(&#39;index&#39;, {
    title: &#39;XSSæ”»å‡»ç¤ºä¾‹&#39;,
    xss: ctx.request.query.xss
  })
})
</code></pre>
<p>æ­¤æ—¶é»˜è®¤åªå…è®¸åŠ è½½æœ¬ç«™çš„è„šæœ¬ï¼Œçœ‹ä¸€ä¸‹ç½‘ç»œè¯·æ±‚ï¼Œå“åº”å¤´ä¸Šå¤šäº†<br><code>Content-Security-Policy: default-src &#39;self&#39;</code><br>è¡¨ç¤ºä¸€ä¸ªç½‘ç«™ç®¡ç†è€…æƒ³è¦æ‰€æœ‰å†…å®¹å‡æ¥è‡ªç«™ç‚¹è‡ªå·± (è¿™æ’é™¤å­åŸŸå.)<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/xss-csp1.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure><br>æ­¤æ—¶æ§åˆ¶å°ä¹Ÿä¼šæŠ¥é”™<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/xss-csp2.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure></p>
<ul>
<li>é€šè¿‡ç½‘é¡µçš„<meta>æ ‡ç­¾ä¹Ÿå¯ä»¥å¼€å¯<br><code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;script-src &#39;self&#39;; object-src &#39;none&#39;; style-src cdn.example.org third-party.org; child-src https:&quot;&gt;</code></li>
</ul>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒCSP åšäº†å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="è„šæœ¬ï¼šåªä¿¡ä»»å½“å‰åŸŸå">&lt;object&gt;æ ‡ç­¾ï¼šä¸ä¿¡ä»»ä»»ä½•URLï¼Œå³ä¸åŠ è½½ä»»ä½•èµ„æº
æ ·å¼è¡¨ï¼šåªä¿¡ä»»cdn.example.orgå’Œthird-party.org
æ¡†æ¶ï¼ˆframeï¼‰ï¼šå¿…é¡»ä½¿ç”¨HTTPSåè®®åŠ è½½
å…¶ä»–èµ„æºï¼šæ²¡æœ‰é™åˆ¶
å¯ç”¨åï¼Œä¸ç¬¦åˆ CSP çš„å¤–éƒ¨èµ„æºå°±ä¼šè¢«é˜»æ­¢åŠ è½½ã€‚
</code></pre>
<h4 id="èµ„æºåŠ è½½é™åˆ¶"><a href="#èµ„æºåŠ è½½é™åˆ¶" class="headerlink" title="èµ„æºåŠ è½½é™åˆ¶"></a>èµ„æºåŠ è½½é™åˆ¶</h4><p><code>default-src</code> æŒ‡ä»¤å®šä¹‰äº†é‚£äº›æ²¡æœ‰è¢«æ›´ç²¾ç¡®æŒ‡ä»¤æŒ‡å®šçš„ï¼ˆé»˜è®¤ï¼‰å®‰å…¨ç­–ç•¥ã€‚è¯¥æŒ‡ä»¤åŒ…å«äº†ä»¥ä¸‹æŒ‡ä»¤ï¼š</p>
<ul>
<li>script-srcï¼šå¤–éƒ¨è„šæœ¬</li>
<li>style-srcï¼šæ ·å¼è¡¨</li>
<li>img-srcï¼šå›¾åƒ</li>
<li>media-srcï¼šåª’ä½“æ–‡ä»¶ï¼ˆéŸ³é¢‘å’Œè§†é¢‘ï¼‰</li>
<li>font-srcï¼šå­—ä½“æ–‡ä»¶</li>
<li>object-srcï¼šæ’ä»¶ï¼ˆæ¯”å¦‚ Flashï¼‰</li>
<li>child-srcï¼šæ¡†æ¶</li>
<li>frame-ancestorsï¼šåµŒå…¥çš„å¤–éƒ¨èµ„æºï¼ˆæ¯”å¦‚<code>&lt;frame&gt;</code>ã€<code>&lt;iframe&gt;</code>ã€<code>&lt;embed&gt;</code>å’Œ<code>&lt;applet&gt;</code>ï¼‰</li>
<li>connect-srcï¼šHTTP è¿æ¥ï¼ˆé€šè¿‡ XHRã€WebSocketsã€EventSourceç­‰ï¼‰</li>
<li>worker-srcï¼šworkerè„šæœ¬</li>
<li>manifest-srcï¼šmanifest æ–‡ä»¶</li>
</ul>
<p>è¯¦ç»†å¯ä»¥å‚è€ƒMDN ğŸ‘‰ <a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/CSP/CSP_policy_directives" target="_blank" rel="external">https://developer.mozilla.org/zh-CN/docs/Web/Security/CSP/CSP_policy_directives</a></p>
<h4 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h4><p>ï¼ˆ1ï¼‰<code>script-src</code>å’Œ<code>object-src</code>æ˜¯å¿…è®¾çš„ï¼Œé™¤éè®¾ç½®äº†<code>default-src</code>ã€‚<br>å› ä¸ºæ”»å‡»è€…åªè¦èƒ½æ³¨å…¥è„šæœ¬ï¼Œå…¶ä»–é™åˆ¶éƒ½å¯ä»¥è§„é¿ã€‚è€Œ<code>object-src</code>å¿…è®¾æ˜¯å› ä¸º Flash é‡Œé¢å¯ä»¥æ‰§è¡Œå¤–éƒ¨è„šæœ¬ã€‚<br>ï¼ˆ2ï¼‰<code>script-src</code>ä¸èƒ½ä½¿ç”¨<code>unsafe-inline</code>å…³é”®å­—ï¼ˆé™¤éä¼´éšä¸€ä¸ªnonceå€¼ï¼‰ï¼Œä¹Ÿä¸èƒ½å…è®¸è®¾ç½®data:URLã€‚<br>ä¸‹é¢æ˜¯ä¸¤ä¸ªæ¶æ„æ”»å‡»çš„ä¾‹å­ã€‚</p>
<p>```<img src="x" onerror="evil()"></p>
<p><script src="data:text/javascript,evil()"></script></p>
<pre><code>ï¼ˆ3ï¼‰å¿…é¡»ç‰¹åˆ«æ³¨æ„ JSONP çš„å›è°ƒå‡½æ•°ã€‚
</code></pre><p><script src="/path/jsonp?callback=alert(document.domain)//"><br></script></p>
<pre><code>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œè™½ç„¶åŠ è½½çš„è„šæœ¬æ¥è‡ªå½“å‰åŸŸåï¼Œä½†æ˜¯é€šè¿‡æ”¹å†™å›è°ƒå‡½æ•°ï¼Œæ”»å‡»è€…ä¾ç„¶å¯ä»¥æ‰§è¡Œæ¶æ„ä»£ç ã€‚

#### ç¼ºé™·
* æ—¥å¿—ä¸è¯¦ç»†ï¼šä¸ŠæŠ¥çš„åªæœ‰è¿è§„çš„ç«™ç‚¹åæ²¡æœ‰å…·ä½“è·¯å¾„
* è§„åˆ™ä¸çµæ´»ï¼šCSP ç›®å‰åªæ”¯æŒç™½åå•åˆ—è¡¨
* æ— æ³•å’Œé¡µé¢äº¤äº’
* ä¸ŠæŠ¥æ–¹å¼ä¸å¯æ§ï¼šåªèƒ½ä½¿ç”¨ POST + JSON çš„æ–¹å¼æäº¤ï¼Œæ— æ³•è®¾å®šä¸€ä¸ªç¼“å­˜æ—¶é—´ï¼Œæ§åˆ¶é‡å¤ä¸ŠæŠ¥çš„é—´éš”
* æµªè´¹å¸¦å®½
* ç»´æŠ¤ç¹ç
* å…¼å®¹æ€§ä¸é«˜


### X-Frame-Options

è¿™æ˜¯responseå¤´ä¸ªç°åœ¨æ­£åœ¨ä½¿ç”¨ï¼Œä½†ä»¥åå¯ä»¥è¢«CSPçš„ frame-ancestorså–ä»£ã€‚ç›®å‰æ”¯æŒçš„çŠ¶æ€æ¯”èµ· CSP frame-ancestorsè¦å¥½ ä½¿ç”¨çš„æ–¹å¼:
</code></pre><p>X-Frame-Options:DENY//è¿™ä¸ªé¡µé¢ä¸å…è®¸è¢«ä»¥frameçš„æ–¹å¼åŠ è½½<br>X-Frame-Options:SAMEORIGIN//è¿™ä¸ªé¡µé¢åªå…è®¸åŒæºé¡µé¢åŠ è½½<br>X-Frame-Options:<uri> //è¿™ä¸ªé¡µé¢åªèƒ½è¢«ç‰¹å®šçš„åŸŸåŠ è½½<br>```</uri></p>
<p>è°·æ­Œåœ¨è¿™ç‚¹å°±åšçš„æ¯”è¾ƒå¥½ï¼š<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170817_xss/xss-google.png" alt="XSS" title="">
                </div>
                <div class="image-caption">XSS</div>
            </figure></p>
<h3 id="Http-Only"><a href="#Http-Only" class="headerlink" title="Http-Only"></a>Http-Only</h3><p>ä½¿ç”¨http-only ä¿æŠ¤cookieï¼Œå¯ä»¥ä¿è¯å³ä½¿å‘ç”Ÿäº†xssï¼Œç”¨æˆ·çš„cookieä¹Ÿæ˜¯å®‰å…¨çš„ã€‚ä½¿ç”¨http-only ä¿æŠ¤çš„cookieæ˜¯ä¸ä¼šè¢«javascriptè¯»å†™çš„ã€‚</p>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ä¸€äº›æˆç†Ÿæµè¡Œçš„å¼€æºåº“æ¥å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¢å¼ºå®‰å…¨æ€§ï¼Œé˜²èŒƒXSSæ”»å‡»ã€‚</p>
<h2 id="æœªå®Œå¾…ç»­"><a href="#æœªå®Œå¾…ç»­" class="headerlink" title="æœªå®Œå¾…ç»­"></a>æœªå®Œå¾…ç»­</h2><p>é˜²èŒƒXSSæ”»å‡»æ˜¯ä¸€ä¸ªæŒä¹…è‰°å·¨çš„ä»»åŠ¡ï¼Œå³ä½¿æ˜¯ä¸€çº¿äº’è”ç½‘å…¬å¸ä¹Ÿä¼šé­é‡æ­¤ç±»æ”»å‡»ã€‚åªæœ‰åœ¨æ¯ä¸€ä¸ªæ­¥éª¤éƒ½æ—¶åˆ»æ³¨æ„ï¼Œæ‰èƒ½å¾ˆå¥½é¿å…æ­¤ç±»äº‹ä»¶ã€‚</p>
<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/CSP/CSP_policy_directives" target="_blank" rel="external">CSP ç­–ç•¥æŒ‡ä»¤</a><br><a href="http://www.ruanyifeng.com/blog/2016/09/csp.html" target="_blank" rel="external">Content Security Policy å…¥é—¨æ•™ç¨‹</a><br><a href="https://www.cnblogs.com/index-html/p/use-onload-event-trace-http-hijack.html" target="_blank" rel="external">ã€XSSã€‘åˆ©ç”¨ onload äº‹ä»¶ç›‘æ§æµé‡åŠ«æŒ</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;XSSè·¨ç«™è„šæœ¬æ”»å‡»&quot;&gt;&lt;a href=&quot;#XSSè·¨ç«™è„šæœ¬æ”»å‡»&quot; class=&quot;headerlink&quot; title=&quot;XSSè·¨ç«™è„šæœ¬æ”»å‡»&quot;&gt;&lt;/a&gt;XSSè·¨ç«™è„šæœ¬æ”»å‡»&lt;/h1&gt;&lt;h2 id=&quot;æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#æ¦‚å¿µ&quot; class=&quot;headerlink&quot; 
    
    </summary>
    
    
      <category term="CSRF" scheme="https://microzz.com/tags/CSRF/"/>
    
      <category term="XSS" scheme="https://microzz.com/tags/XSS/"/>
    
      <category term="Webå®‰å…¨" scheme="https://microzz.com/tags/Web%E5%AE%89%E5%85%A8/"/>
    
      <category term="è·¨ç«™è„šæœ¬æ”»å‡»" scheme="https://microzz.com/tags/%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨JSå®ç°é“¾è¡¨çš„æ•°æ®ç»“æ„</title>
    <link href="https://microzz.com/2017/08/01/js-link/"/>
    <id>https://microzz.com/2017/08/01/js-link/</id>
    <published>2017-08-01T11:04:29.000Z</published>
    <updated>2017-08-01T11:05:35.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç”¨JavaScriptå®ç°é“¾è¡¨çš„æ•°æ®ç»“æ„"><a href="#ç”¨JavaScriptå®ç°é“¾è¡¨çš„æ•°æ®ç»“æ„" class="headerlink" title="ç”¨JavaScriptå®ç°é“¾è¡¨çš„æ•°æ®ç»“æ„"></a>ç”¨JavaScriptå®ç°é“¾è¡¨çš„æ•°æ®ç»“æ„</h1><blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;é“¾è¡¨ï¼ˆLinked listï¼‰æ˜¯ä¸€ç§å¸¸è§çš„åŸºç¡€æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ç§çº¿æ€§è¡¨ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæŒ‰çº¿æ€§çš„é¡ºåºå­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹é‡Œå­˜åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ(Pointer)      &nbsp;&nbsp;â€” ç»´åŸºç™¾ç§‘</p>
</blockquote>
<p>ä¸Šé¢æ˜¯ç»´åŸºç™¾ç§‘å¯¹<strong>é“¾è¡¨</strong>çš„è§£è¯»ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨<strong>JavaScript</strong>ä»£ç å¯¹é“¾è¡¨çš„æ•°æ®ç»“æ„è¿›è¡Œå®ç°</p>
<h2 id="å®ç°Nodeç±»è¡¨ç¤ºèŠ‚ç‚¹"><a href="#å®ç°Nodeç±»è¡¨ç¤ºèŠ‚ç‚¹" class="headerlink" title="å®ç°Nodeç±»è¡¨ç¤ºèŠ‚ç‚¹"></a>å®ç°Nodeç±»è¡¨ç¤ºèŠ‚ç‚¹</h2><pre><code class="javascript">/**
 * Node ç±»ç”¨æ¥è¡¨ç¤ºèŠ‚ç‚¹
 * element ç”¨æ¥ä¿å­˜èŠ‚ç‚¹ä¸Šçš„æ•°æ®
 * next ç”¨æ¥ä¿å­˜æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„é“¾æ¥
 */
function Node(element) {
  this.element = element;
  this.next = null;
}
</code></pre>
<h2 id="LListç±»æä¾›å¯¹é“¾è¡¨æ“ä½œçš„æ–¹æ³•"><a href="#LListç±»æä¾›å¯¹é“¾è¡¨æ“ä½œçš„æ–¹æ³•" class="headerlink" title="LListç±»æä¾›å¯¹é“¾è¡¨æ“ä½œçš„æ–¹æ³•"></a>LListç±»æä¾›å¯¹é“¾è¡¨æ“ä½œçš„æ–¹æ³•</h2><pre><code class="javascript">/**
 * LList ç±»æä¾›äº†å¯¹é“¾è¡¨è¿›è¡Œæ“ä½œçš„æ–¹æ³•
 * é“¾è¡¨åªæœ‰ä¸€ä¸ªå±æ€§ï¼Œ
 * ä½¿ç”¨ä¸€ä¸ª Node å¯¹è±¡æ¥ä¿å­˜è¯¥é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚
 */
class LList {
  constructor() {
    this.head = new Node(&#39;head&#39;);
  }

  // æŸ¥æ‰¾èŠ‚ç‚¹
  find(item) {
    let currNode = this.head;

    while(currNode.element !== item) {
      currNode = currNode.next;
    }

    return currNode;
  }

  // æŸ¥æ‰¾å‰ä¸€ä¸ªèŠ‚ç‚¹
  findPre(item) {
    if(item === &#39;head&#39;) throw new Error(&#39;now is head!&#39;);

    let currNode = this.head;
    while (currNode.next &amp;&amp; currNode.next.element !== item) {
      currNode = currNode.next;
    }

    return currNode;
  }

  // æ’å…¥æ–°èŠ‚ç‚¹
  insert(newElement, item) {
    let newNode = new Node(newElement);
    let currNode = this.find(item);
    newNode.next = currNode.next;
    currNode.next = newNode;
  }

  // åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹
  remove(item) {
    let preNode = this.findPre(item);
    if(preNode.next !== null) {
      preNode.next = preNode.next.next;
    }
  }

  // æ˜¾ç¤ºé“¾è¡¨ä¸­çš„å…ƒç´ 
  display() {
    let currNode = this.head;

    while(currNode.next !== null) {
      console.log(currNode.next.element);
      currNode = currNode.next;
    }
  }
}
</code></pre>
<h2 id="æµ‹è¯•ä»£ç "><a href="#æµ‹è¯•ä»£ç " class="headerlink" title="æµ‹è¯•ä»£ç "></a>æµ‹è¯•ä»£ç </h2><pre><code class="javascript">const list = new LList(); 
// LList { head: Node { element: &#39;head&#39;, next: null } }

list.insert(&#39;0&#39;, &#39;head&#39;);
list.insert(&#39;1&#39;, &#39;0&#39;);
list.insert(&#39;2&#39;, &#39;1&#39;);
list.insert(&#39;3&#39;, &#39;2&#39;);
list.remove(&#39;1&#39;);
console.log(list); 
// LList { head: Node { element: &#39;head&#39;, next: Node { element: &#39;0&#39;, next: [Object] } } }

console.log(list.display()); // 0 2 3

console.log(list.findPre(&#39;1&#39;)); 
// Node { element: &#39;0&#39;, next: Node { element: &#39;1&#39;, next: Node { element: &#39;2&#39;, next: [Object] } } }
</code></pre>
<p>ä¸Šé¢å°±æ˜¯ç”¨JavaScriptå¯¹ç®€å•é“¾è¡¨çš„æ•°æ®ç»“æ„çš„ç®€å•å®ç°ğŸ˜„</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ç”¨JavaScriptå®ç°é“¾è¡¨çš„æ•°æ®ç»“æ„&quot;&gt;&lt;a href=&quot;#ç”¨JavaScriptå®ç°é“¾è¡¨çš„æ•°æ®ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;ç”¨JavaScriptå®ç°é“¾è¡¨çš„æ•°æ®ç»“æ„&quot;&gt;&lt;/a&gt;ç”¨JavaScriptå®ç°é“¾è¡¨çš„æ•°æ®ç»“æ„&lt;/h1&gt;&lt;
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://microzz.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
      <category term="é“¾è¡¨" scheme="https://microzz.com/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨JSå®ç°æ ˆçš„æ•°æ®ç»“æ„</title>
    <link href="https://microzz.com/2017/07/31/js-stack/"/>
    <id>https://microzz.com/2017/07/31/js-stack/</id>
    <published>2017-07-31T11:04:29.000Z</published>
    <updated>2017-07-31T11:35:08.975Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç”¨JavaScriptå®ç°æ ˆçš„æ•°æ®ç»“æ„"><a href="#ç”¨JavaScriptå®ç°æ ˆçš„æ•°æ®ç»“æ„" class="headerlink" title="ç”¨JavaScriptå®ç°æ ˆçš„æ•°æ®ç»“æ„"></a>ç”¨JavaScriptå®ç°æ ˆçš„æ•°æ®ç»“æ„</h1><blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;å †æ ˆï¼ˆè‹±è¯­ï¼šstackï¼‰ï¼Œä¹Ÿå¯ç›´æ¥ç§°æ ˆï¼Œåœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„ä¸²åˆ—å½¢å¼çš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„ç‰¹æ®Šä¹‹å¤„åœ¨äºåªèƒ½å…è®¸åœ¨é“¾æ¥ä¸²åˆ—æˆ–é˜µåˆ—çš„ä¸€ç«¯ï¼ˆç§°ä¸ºå †å é¡¶ç«¯æŒ‡æ ‡ï¼Œè‹±è¯­ï¼štopï¼‰è¿›è¡ŒåŠ å…¥æ•°æ®ï¼ˆpushï¼‰å’Œè¾“å‡ºæ•°æ®ï¼ˆpopï¼‰çš„è¿ç®—ã€‚å¦å¤–æ ˆä¹Ÿå¯ä»¥ç”¨ä¸€ç»´æ•°ç»„æˆ–è¿ç»“ä¸²åˆ—çš„å½¢å¼æ¥å®Œæˆã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;ç”±äºå †å æ•°æ®ç»“æ„åªå…è®¸åœ¨ä¸€ç«¯è¿›è¡Œæ“ä½œï¼Œå› è€ŒæŒ‰ç…§åè¿›å…ˆå‡ºï¼ˆLIFO, Last In First Outï¼‰çš„åŸç†è¿ä½œã€‚      â€“ ç»´åŸºç™¾ç§‘</p>
</blockquote>
<p>ä¸Šé¢æ˜¯ç»´åŸºç™¾ç§‘å¯¹<strong>æ ˆ</strong>çš„è§£è¯»ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨<strong>JavaScript</strong>(ES6)ä»£ç å¯¹æ ˆçš„æ•°æ®ç»“æ„è¿›è¡Œå®ç°</p>
<h2 id="å®ç°ä¸€ä¸ªStackç±»"><a href="#å®ç°ä¸€ä¸ªStackç±»" class="headerlink" title="å®ç°ä¸€ä¸ªStackç±»"></a>å®ç°ä¸€ä¸ªStackç±»</h2><pre><code class="javascript">/**
* Stack ç±»
*/
class Stack {
  constructor() {
    this.data = []; // å¯¹æ•°æ®åˆå§‹åŒ–
    this.top = 0; // åˆå§‹åŒ–æ ˆé¡¶ä½ç½®
  }

  // å…¥æ ˆæ–¹æ³•
  push() {
    const args = [...arguments];
    args.forEach(arg =&gt; this.data[this.top++] = arg);
    return this.top;
  }

  // å‡ºæ ˆæ–¹æ³•
  pop() {
    if (this.top === 0) throw new Error(&#39;The stack is already empty!&#39;);
    const peek = this.data[--this.top];
    this.data = this.data.slice(0, -1);
    return peek;
  }

  // è¿”å›æ ˆé¡¶å…ƒç´ 
  peek() {
    return this.data[this.top - 1];
  }

  // è¿”å›æ ˆå†…å…ƒç´ ä¸ªæ•°
  length() {
    return this.top;
  }

  // æ¸…é™¤æ ˆå†…æ‰€æœ‰å…ƒç´ 
  clear() {
    this.top = 0;
    return this.data = [];
  }

  // åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º
  isEmpty() {
    return this.top === 0;
  }
}

// å®ä¾‹åŒ–
const stack = new Stack();

stack.push(1);
stack.push(2, 3);
console.log(stack.data); // [1, 2, 3]
console.log(stack.peek()); // 3
console.log(stack.pop()); // 3, now data is [1, 2]
stack.push(3);
console.log(stack.length()); // 3
stack.clear(); // now data is []
</code></pre>
<h2 id="ç”¨æ ˆçš„æ€æƒ³å°†æ•°å­—è½¬æ¢ä¸ºäºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶"><a href="#ç”¨æ ˆçš„æ€æƒ³å°†æ•°å­—è½¬æ¢ä¸ºäºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶" class="headerlink" title="ç”¨æ ˆçš„æ€æƒ³å°†æ•°å­—è½¬æ¢ä¸ºäºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶"></a>ç”¨æ ˆçš„æ€æƒ³å°†æ•°å­—è½¬æ¢ä¸ºäºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶</h2><pre><code class="javascript">/**
 * å°†æ•°å­—è½¬æ¢ä¸ºäºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶
 */
const numConvert = (num, base) =&gt; {
  const stack = new Stack();
  let converted = &#39;&#39;;

  while(num &gt; 0) {
    stack.push(num % base);
    num = Math.floor(num / base);
  }

  while(stack.length() &gt; 0) {
    converted += stack.pop(); 
  }

  return +converted;
}

console.log(numConvert(10, 2)); // 1010
</code></pre>
<h2 id="ç”¨æ ˆçš„æ€æƒ³åˆ¤æ–­ç»™å®šå­—ç¬¦ä¸²æˆ–è€…æ•°å­—æ˜¯å¦æ˜¯å›æ–‡"><a href="#ç”¨æ ˆçš„æ€æƒ³åˆ¤æ–­ç»™å®šå­—ç¬¦ä¸²æˆ–è€…æ•°å­—æ˜¯å¦æ˜¯å›æ–‡" class="headerlink" title="ç”¨æ ˆçš„æ€æƒ³åˆ¤æ–­ç»™å®šå­—ç¬¦ä¸²æˆ–è€…æ•°å­—æ˜¯å¦æ˜¯å›æ–‡"></a>ç”¨æ ˆçš„æ€æƒ³åˆ¤æ–­ç»™å®šå­—ç¬¦ä¸²æˆ–è€…æ•°å­—æ˜¯å¦æ˜¯å›æ–‡</h2><pre><code class="javascript">/**
 * åˆ¤æ–­ç»™å®šå­—ç¬¦ä¸²æˆ–è€…æ•°å­—æ˜¯å¦æ˜¯å›æ–‡
 */
const isPalindrome = words =&gt; {
  const stack = new Stack();
  let wordsCopy = &#39;&#39;;
  words = words.toString();

  Array.prototype.forEach.call(words, word =&gt; stack.push(word));

  while(stack.length() &gt; 0) {
    wordsCopy += stack.pop();
  }

  return words === wordsCopy;
}

console.log(isPalindrome(&#39;1a121a1&#39;)); // true
console.log(isPalindrome(2121)); // false
</code></pre>
<p>ä¸Šé¢å°±æ˜¯ç”¨JavaScriptå¯¹æ ˆçš„æ•°æ®ç»“æ„çš„å®ç°ï¼Œæœ‰äº›ç®—æ³•å¯èƒ½æ¬ å¦¥ï¼Œä½†æ˜¯ä»…ä»…æ˜¯ä¸ºäº†æ¼”ç¤ºJSå¯¹æ ˆçš„å®ç°ğŸ˜„</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ç”¨JavaScriptå®ç°æ ˆçš„æ•°æ®ç»“æ„&quot;&gt;&lt;a href=&quot;#ç”¨JavaScriptå®ç°æ ˆçš„æ•°æ®ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;ç”¨JavaScriptå®ç°æ ˆçš„æ•°æ®ç»“æ„&quot;&gt;&lt;/a&gt;ç”¨JavaScriptå®ç°æ ˆçš„æ•°æ®ç»“æ„&lt;/h1&gt;&lt;bloc
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://microzz.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
      <category term="æ ˆ" scheme="https://microzz.com/tags/%E6%A0%88/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript å†…å­˜æ³„éœ²æ•™ç¨‹</title>
    <link href="https://microzz.com/2017/05/25/memory-leak/"/>
    <id>https://microzz.com/2017/05/25/memory-leak/</id>
    <published>2017-05-25T13:26:23.000Z</published>
    <updated>2017-05-31T13:31:02.340Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScript-å†…å­˜æ³„éœ²æ•™ç¨‹"><a href="#JavaScript-å†…å­˜æ³„éœ²æ•™ç¨‹" class="headerlink" title="JavaScript å†…å­˜æ³„éœ²æ•™ç¨‹"></a>JavaScript å†…å­˜æ³„éœ²æ•™ç¨‹</h1><h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯å†…å­˜æ³„éœ²ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯å†…å­˜æ³„éœ²ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯å†…å­˜æ³„éœ²ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯å†…å­˜æ³„éœ²ï¼Ÿ</h2><p>ç¨‹åºçš„è¿è¡Œéœ€è¦å†…å­˜ã€‚åªè¦ç¨‹åºæå‡ºè¦æ±‚ï¼Œæ“ä½œç³»ç»Ÿæˆ–è€…è¿è¡Œæ—¶ï¼ˆruntimeï¼‰å°±å¿…é¡»ä¾›ç»™å†…å­˜ã€‚</p>
<p>å¯¹äºæŒç»­è¿è¡Œçš„æœåŠ¡è¿›ç¨‹ï¼ˆdaemonï¼‰ï¼Œå¿…é¡»åŠæ—¶é‡Šæ”¾ä¸å†ç”¨åˆ°çš„å†…å­˜ã€‚å¦åˆ™ï¼Œå†…å­˜å ç”¨è¶Šæ¥è¶Šé«˜ï¼Œè½»åˆ™å½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œé‡åˆ™å¯¼è‡´è¿›ç¨‹å´©æºƒã€‚</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017041701-1.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>ä¸å†ç”¨åˆ°çš„å†…å­˜ï¼Œæ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œå°±å«åšå†…å­˜æ³„éœ²ï¼ˆmemory leakï¼‰ã€‚</p>
<p>æœ‰äº›è¯­è¨€ï¼ˆæ¯”å¦‚ C è¯­è¨€ï¼‰å¿…é¡»æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œç¨‹åºå‘˜è´Ÿè´£å†…å­˜ç®¡ç†ã€‚</p>
<pre><code class="clang">char * buffer;
buffer = (char*) malloc(42);

// Do something with buffer

free(buffer);
</code></pre>
<p>ä¸Šé¢æ˜¯ C è¯­è¨€ä»£ç ï¼Œ<code>malloc</code>æ–¹æ³•ç”¨æ¥ç”³è¯·å†…å­˜ï¼Œä½¿ç”¨å®Œæ¯•ä¹‹åï¼Œå¿…é¡»è‡ªå·±ç”¨<code>free</code>æ–¹æ³•é‡Šæ”¾å†…å­˜ã€‚</p>
<p>è¿™å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥å¤§å¤šæ•°è¯­è¨€æä¾›è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œå‡è½»ç¨‹åºå‘˜çš„è´Ÿæ‹…ï¼Œè¿™è¢«ç§°ä¸ºâ€œåƒåœ¾å›æ”¶æœºåˆ¶â€ï¼ˆgarbage collectorï¼‰ã€‚</p>
<h2 id="äºŒã€åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#äºŒã€åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="äºŒã€åƒåœ¾å›æ”¶æœºåˆ¶"></a>äºŒã€åƒåœ¾å›æ”¶æœºåˆ¶</h2><p>åƒåœ¾å›æ”¶æœºåˆ¶æ€ä¹ˆçŸ¥é“ï¼Œå“ªäº›å†…å­˜ä¸å†éœ€è¦å‘¢ï¼Ÿ</p>
<p>æœ€å¸¸ä½¿ç”¨çš„æ–¹æ³•å«åš<a href="https://en.wikipedia.org/wiki/Reference_counting" target="_blank" rel="external">â€œå¼•ç”¨è®¡æ•°â€</a>ï¼ˆreference countingï¼‰ï¼šè¯­è¨€å¼•æ“æœ‰ä¸€å¼ â€œå¼•ç”¨è¡¨â€ï¼Œä¿å­˜äº†å†…å­˜é‡Œé¢æ‰€æœ‰çš„èµ„æºï¼ˆé€šå¸¸æ˜¯å„ç§å€¼ï¼‰çš„å¼•ç”¨æ¬¡æ•°ã€‚å¦‚æœä¸€ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°æ˜¯<code>0</code>ï¼Œå°±è¡¨ç¤ºè¿™ä¸ªå€¼ä¸å†ç”¨åˆ°äº†ï¼Œå› æ­¤å¯ä»¥å°†è¿™å—å†…å­˜é‡Šæ”¾ã€‚</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017041703.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>ä¸Šå›¾ä¸­ï¼Œå·¦ä¸‹è§’çš„ä¸¤ä¸ªå€¼ï¼Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥é‡Šæ”¾ã€‚</p>
<p>å¦‚æœä¸€ä¸ªå€¼ä¸å†éœ€è¦äº†ï¼Œå¼•ç”¨æ•°å´ä¸ä¸º<code>0</code>ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶æ— æ³•é‡Šæ”¾è¿™å—å†…å­˜ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„éœ²ã€‚</p>
<pre><code class="javascript">const arr = [1, 2, 3, 4];
console.log(&#39;hello world&#39;);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„<code>[1, 2, 3, 4]</code>æ˜¯ä¸€ä¸ªå€¼ï¼Œä¼šå ç”¨å†…å­˜ã€‚å˜é‡<code>arr</code>æ˜¯ä»…æœ‰çš„å¯¹è¿™ä¸ªå€¼çš„å¼•ç”¨ï¼Œå› æ­¤å¼•ç”¨æ¬¡æ•°ä¸º<code>1</code>ã€‚å°½ç®¡åé¢çš„ä»£ç æ²¡æœ‰ç”¨åˆ°<code>arr</code>ï¼Œå®ƒè¿˜æ˜¯ä¼šæŒç»­å ç”¨å†…å­˜ã€‚</p>
<p>å¦‚æœå¢åŠ ä¸€è¡Œä»£ç ï¼Œè§£é™¤<code>arr</code>å¯¹<code>[1, 2, 3, 4]</code>å¼•ç”¨ï¼Œè¿™å—å†…å­˜å°±å¯ä»¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶é‡Šæ”¾äº†ã€‚</p>
<pre><code class="javascript">const arr = [1, 2, 3, 4];
console.log(&#39;hello world&#39;);
arr = null;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>arr</code>é‡ç½®ä¸º<code>null</code>ï¼Œå°±è§£é™¤äº†å¯¹<code>[1, 2, 3, 4]</code>çš„å¼•ç”¨ï¼Œå¼•ç”¨æ¬¡æ•°å˜æˆäº†<code>0</code>ï¼Œå†…å­˜å°±å¯ä»¥é‡Šæ”¾å‡ºæ¥äº†ã€‚</p>
<p>å› æ­¤ï¼Œå¹¶ä¸æ˜¯è¯´æœ‰äº†åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œç¨‹åºå‘˜å°±è½»æ¾äº†ã€‚ä½ è¿˜æ˜¯éœ€è¦å…³æ³¨å†…å­˜å ç”¨ï¼šé‚£äº›å¾ˆå ç©ºé—´çš„å€¼ï¼Œä¸€æ—¦ä¸å†ç”¨åˆ°ï¼Œä½ å¿…é¡»æ£€æŸ¥æ˜¯å¦è¿˜å­˜åœ¨å¯¹å®ƒä»¬çš„å¼•ç”¨ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œå°±å¿…é¡»æ‰‹åŠ¨è§£é™¤å¼•ç”¨ã€‚</p>
<h2 id="ä¸‰ã€å†…å­˜æ³„éœ²çš„è¯†åˆ«æ–¹æ³•"><a href="#ä¸‰ã€å†…å­˜æ³„éœ²çš„è¯†åˆ«æ–¹æ³•" class="headerlink" title="ä¸‰ã€å†…å­˜æ³„éœ²çš„è¯†åˆ«æ–¹æ³•"></a>ä¸‰ã€å†…å­˜æ³„éœ²çš„è¯†åˆ«æ–¹æ³•</h2><p>æ€æ ·å¯ä»¥è§‚å¯Ÿåˆ°å†…å­˜æ³„éœ²å‘¢ï¼Ÿ</p>
<p><a href="https://www.toptal.com/nodejs/debugging-memory-leaks-node-js-applications" target="_blank" rel="external">ç»éªŒæ³•åˆ™</a>æ˜¯ï¼Œå¦‚æœè¿ç»­äº”æ¬¡åƒåœ¾å›æ”¶ä¹‹åï¼Œå†…å­˜å ç”¨ä¸€æ¬¡æ¯”ä¸€æ¬¡å¤§ï¼Œå°±æœ‰å†…å­˜æ³„éœ²ã€‚è¿™å°±è¦æ±‚å®æ—¶æŸ¥çœ‹å†…å­˜å ç”¨ã€‚</p>
<h3 id="3-1-æµè§ˆå™¨"><a href="#3-1-æµè§ˆå™¨" class="headerlink" title="3.1 æµè§ˆå™¨"></a>3.1 æµè§ˆå™¨</h3><p>Chrome æµè§ˆå™¨æŸ¥çœ‹å†…å­˜å ç”¨ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017041704.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<blockquote>
<ol>
<li>æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œé€‰æ‹© Timeline é¢æ¿</li>
<li>åœ¨é¡¶éƒ¨çš„<code>Capture</code>å­—æ®µé‡Œé¢å‹¾é€‰ Memory</li>
<li>ç‚¹å‡»å·¦ä¸Šè§’çš„å½•åˆ¶æŒ‰é’®ã€‚</li>
<li>åœ¨é¡µé¢ä¸Šè¿›è¡Œå„ç§æ“ä½œï¼Œæ¨¡æ‹Ÿç”¨æˆ·çš„ä½¿ç”¨æƒ…å†µã€‚</li>
<li>ä¸€æ®µæ—¶é—´åï¼Œç‚¹å‡»å¯¹è¯æ¡†çš„ stop æŒ‰é’®ï¼Œé¢æ¿ä¸Šå°±ä¼šæ˜¾ç¤ºè¿™æ®µæ—¶é—´çš„å†…å­˜å ç”¨æƒ…å†µã€‚</li>
</ol>
</blockquote>
<p>å¦‚æœå†…å­˜å ç”¨åŸºæœ¬å¹³ç¨³ï¼Œæ¥è¿‘æ°´å¹³ï¼Œå°±è¯´æ˜ä¸å­˜åœ¨å†…å­˜æ³„éœ²ã€‚</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017041705.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>åä¹‹ï¼Œå°±æ˜¯å†…å­˜æ³„éœ²äº†ã€‚</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017041706.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<h3 id="3-2-å‘½ä»¤è¡Œ"><a href="#3-2-å‘½ä»¤è¡Œ" class="headerlink" title="3.2 å‘½ä»¤è¡Œ"></a>3.2 å‘½ä»¤è¡Œ</h3><p>å‘½ä»¤è¡Œå¯ä»¥ä½¿ç”¨ Node æä¾›çš„<a href="https://nodejs.org/api/process.html#process_process_memoryusage" target="_blank" rel="external"><code>process.memoryUsage</code></a>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">console.log(process.memoryUsage());
// { rss: 27709440,
//  heapTotal: 5685248,
//  heapUsed: 3449392,
//  external: 8772 }
</code></pre>
<p><code>process.memoryUsage</code>è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº† Node è¿›ç¨‹çš„å†…å­˜å ç”¨ä¿¡æ¯ã€‚è¯¥å¯¹è±¡åŒ…å«å››ä¸ªå­—æ®µï¼Œå•ä½æ˜¯å­—èŠ‚ï¼Œ<a href="http://stackoverflow.com/questions/12023359/what-do-the-return-values-of-node-js-process-memoryusage-stand-for" target="_blank" rel="external">å«ä¹‰</a>å¦‚ä¸‹ã€‚</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017041702-1.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<blockquote>
<ul>
<li>rssï¼ˆresident set sizeï¼‰ï¼šæ‰€æœ‰å†…å­˜å ç”¨ï¼ŒåŒ…æ‹¬æŒ‡ä»¤åŒºå’Œå †æ ˆã€‚</li>
<li>heapTotalï¼šâ€œå †â€å ç”¨çš„å†…å­˜ï¼ŒåŒ…æ‹¬ç”¨åˆ°çš„å’Œæ²¡ç”¨åˆ°çš„ã€‚</li>
<li>heapUsedï¼šç”¨åˆ°çš„å †çš„éƒ¨åˆ†ã€‚</li>
<li>externalï¼š V8 å¼•æ“å†…éƒ¨çš„ C++ å¯¹è±¡å ç”¨çš„å†…å­˜ã€‚</li>
</ul>
</blockquote>
<p>åˆ¤æ–­å†…å­˜æ³„éœ²ï¼Œä»¥<code>heapUsed</code>å­—æ®µä¸ºå‡†ã€‚</p>
<h2 id="å››ã€WeakMap"><a href="#å››ã€WeakMap" class="headerlink" title="å››ã€WeakMap"></a>å››ã€WeakMap</h2><p>å‰é¢è¯´è¿‡ï¼ŒåŠæ—¶æ¸…é™¤å¼•ç”¨éå¸¸é‡è¦ã€‚ä½†æ˜¯ï¼Œä½ ä¸å¯èƒ½è®°å¾—é‚£ä¹ˆå¤šï¼Œæœ‰æ—¶å€™ä¸€ç–å¿½å°±å¿˜äº†ï¼Œæ‰€ä»¥æ‰æœ‰é‚£ä¹ˆå¤šå†…å­˜æ³„éœ²ã€‚</p>
<p>æœ€å¥½èƒ½æœ‰ä¸€ç§æ–¹æ³•ï¼Œåœ¨æ–°å»ºå¼•ç”¨çš„æ—¶å€™å°±å£°æ˜ï¼Œå“ªäº›å¼•ç”¨å¿…é¡»æ‰‹åŠ¨æ¸…é™¤ï¼Œå“ªäº›å¼•ç”¨å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå½“å…¶ä»–å¼•ç”¨æ¶ˆå¤±ä»¥åï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å°±å¯ä»¥é‡Šæ”¾å†…å­˜ã€‚è¿™æ ·å°±èƒ½å¤§å¤§å‡è½»ç¨‹åºå‘˜çš„è´Ÿæ‹…ï¼Œä½ åªè¦æ¸…é™¤ä¸»è¦å¼•ç”¨å°±å¯ä»¥äº†ã€‚</p>
<p>ES6 è€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ï¼Œæ¨å‡ºäº†ä¸¤ç§æ–°çš„æ•°æ®ç»“æ„ï¼š<a href="http://es6.ruanyifeng.com/#docs/set-map#WeakSet" target="_blank" rel="external">WeakSet</a> å’Œ <a href="http://es6.ruanyifeng.com/#docs/set-map#WeakMap" target="_blank" rel="external">WeakMap</a>ã€‚å®ƒä»¬å¯¹äºå€¼çš„å¼•ç”¨éƒ½æ˜¯ä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶çš„ï¼Œæ‰€ä»¥åå­—é‡Œé¢æ‰ä¼šæœ‰ä¸€ä¸ªâ€œWeakâ€ï¼Œè¡¨ç¤ºè¿™æ˜¯å¼±å¼•ç”¨ã€‚</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017041707.jpg" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>ä¸‹é¢ä»¥ WeakMap ä¸ºä¾‹ï¼Œçœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆè§£å†³å†…å­˜æ³„éœ²çš„ã€‚</p>
<pre><code class="javascript">const wm = new WeakMap();

const element = document.getElementById(&#39;example&#39;);

wm.set(element, &#39;some information&#39;);
wm.get(element) // &quot;some information&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå…ˆæ–°å»ºä¸€ä¸ª Weakmap å®ä¾‹ã€‚ç„¶åï¼Œå°†ä¸€ä¸ª DOM èŠ‚ç‚¹ä½œä¸ºé”®åå­˜å…¥è¯¥å®ä¾‹ï¼Œå¹¶å°†ä¸€äº›é™„åŠ ä¿¡æ¯ä½œä¸ºé”®å€¼ï¼Œä¸€èµ·å­˜æ”¾åœ¨ WeakMap é‡Œé¢ã€‚è¿™æ—¶ï¼ŒWeakMap é‡Œé¢å¯¹<code>element</code>çš„å¼•ç”¨å°±æ˜¯å¼±å¼•ç”¨ï¼Œä¸ä¼šè¢«è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒDOM èŠ‚ç‚¹å¯¹è±¡çš„å¼•ç”¨è®¡æ•°æ˜¯<code>1</code>ï¼Œè€Œä¸æ˜¯<code>2</code>ã€‚è¿™æ—¶ï¼Œä¸€æ—¦æ¶ˆé™¤å¯¹è¯¥èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œå®ƒå ç”¨çš„å†…å­˜å°±ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶é‡Šæ”¾ã€‚Weakmap ä¿å­˜çš„è¿™ä¸ªé”®å€¼å¯¹ï¼Œä¹Ÿä¼šè‡ªåŠ¨æ¶ˆå¤±ã€‚</p>
<p>åŸºæœ¬ä¸Šï¼Œå¦‚æœä½ è¦å¾€å¯¹è±¡ä¸Šæ·»åŠ æ•°æ®ï¼Œåˆä¸æƒ³å¹²æ‰°åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ WeakMapã€‚</p>
<h2 id="äº”ã€WeakMap-ç¤ºä¾‹"><a href="#äº”ã€WeakMap-ç¤ºä¾‹" class="headerlink" title="äº”ã€WeakMap ç¤ºä¾‹"></a>äº”ã€WeakMap ç¤ºä¾‹</h2><p>WeakMap çš„ä¾‹å­å¾ˆéš¾æ¼”ç¤ºï¼Œå› ä¸ºæ— æ³•è§‚å¯Ÿå®ƒé‡Œé¢çš„å¼•ç”¨ä¼šè‡ªåŠ¨æ¶ˆå¤±ã€‚æ­¤æ—¶ï¼Œå…¶ä»–å¼•ç”¨éƒ½è§£é™¤äº†ï¼Œå·²ç»æ²¡æœ‰å¼•ç”¨æŒ‡å‘ WeakMap çš„é”®åäº†ï¼Œå¯¼è‡´æ— æ³•è¯å®é‚£ä¸ªé”®åæ˜¯ä¸æ˜¯å­˜åœ¨ã€‚</p>
<p>æˆ‘ä¸€ç›´æƒ³ä¸å‡ºåŠæ³•ï¼Œç›´åˆ°æœ‰ä¸€å¤©è´ºå¸ˆä¿Šè€å¸ˆ<a href="https://github.com/ruanyf/es6tutorial/issues/362#issuecomment-292109104" target="_blank" rel="external">æç¤º</a>ï¼Œå¦‚æœå¼•ç”¨æ‰€æŒ‡å‘çš„å€¼å ç”¨ç‰¹åˆ«å¤šçš„å†…å­˜ï¼Œå°±å¯ä»¥é€šè¿‡<code>process.memoryUsage</code>æ–¹æ³•çœ‹å‡ºæ¥ã€‚</p>
<p>æ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œç½‘å‹ vtxf è¡¥å……äº†ä¸‹é¢çš„<a href="https://github.com/ruanyf/es6tutorial/issues/362#issuecomment-292451925" target="_blank" rel="external">ä¾‹å­</a>ã€‚</p>
<p>é¦–å…ˆï¼Œæ‰“å¼€ Node å‘½ä»¤è¡Œã€‚</p>
<pre><code class="bash">$ node --expose-gc
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>--expose-gc</code>å‚æ•°è¡¨ç¤ºå…è®¸æ‰‹åŠ¨æ‰§è¡Œåƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p>
<p>ç„¶åï¼Œæ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚</p>
<pre><code class="javascript">// æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ï¼Œä¿è¯è·å–çš„å†…å­˜ä½¿ç”¨çŠ¶æ€å‡†ç¡®
&gt; global.gc(); 
undefined

// æŸ¥çœ‹å†…å­˜å ç”¨çš„åˆå§‹çŠ¶æ€ï¼ŒheapUsed ä¸º 4M å·¦å³
&gt; process.memoryUsage(); 
{ rss: 21106688,
  heapTotal: 7376896,
  heapUsed: 4153936,
  external: 9059 }

&gt; const wm = new WeakMap();
undefined

&gt; const b = new Object();
undefined

&gt; global.gc();
undefined

// æ­¤æ—¶ï¼ŒheapUsed ä»ç„¶ä¸º 4M å·¦å³
&gt; process.memoryUsage(); 
{ rss: 20537344,
  heapTotal: 9474048,
  heapUsed: 3967272,
  external: 8993 }

// åœ¨ WeakMap ä¸­æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹ï¼Œ
// é”®åä¸ºå¯¹è±¡ bï¼Œé”®å€¼ä¸ºä¸€ä¸ª 5*1024*1024 çš„æ•°ç»„  
&gt; wm.set(b, new Array(5*1024*1024));
WeakMap {}

// æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶
&gt; global.gc();
undefined

// æ­¤æ—¶ï¼ŒheapUsed ä¸º 45M å·¦å³
&gt; process.memoryUsage(); 
{ rss: 62652416,
  heapTotal: 51437568,
  heapUsed: 45911664,
  external: 8951 }

// è§£é™¤å¯¹è±¡ b çš„å¼•ç”¨  
&gt; b = null;
null

// å†æ¬¡æ‰§è¡Œåƒåœ¾å›æ”¶
&gt; global.gc();
undefined

// è§£é™¤ b çš„å¼•ç”¨ä»¥åï¼ŒheapUsed å˜å› 4M å·¦å³
// è¯´æ˜ WeakMap ä¸­çš„é‚£ä¸ªé•¿åº¦ä¸º 5*1024*1024 çš„æ•°ç»„è¢«é”€æ¯äº†
&gt; process.memoryUsage(); 
{ rss: 20639744,
  heapTotal: 8425472,
  heapUsed: 3979792,
  external: 8956 }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦å¤–éƒ¨çš„å¼•ç”¨æ¶ˆå¤±ï¼ŒWeakMap å†…éƒ¨çš„å¼•ç”¨ï¼Œå°±ä¼šè‡ªåŠ¨è¢«åƒåœ¾å›æ”¶æ¸…é™¤ã€‚ç”±æ­¤å¯è§ï¼Œæœ‰äº†å®ƒçš„å¸®åŠ©ï¼Œè§£å†³å†…å­˜æ³„éœ²å°±ä¼šç®€å•å¾ˆå¤šã€‚</p>
<h2 id="å…­ã€å‚è€ƒé“¾æ¥"><a href="#å…­ã€å‚è€ƒé“¾æ¥" class="headerlink" title="å…­ã€å‚è€ƒé“¾æ¥"></a>å…­ã€å‚è€ƒé“¾æ¥</h2><ul>
<li><a href="https://www.alexkras.com/simple-guide-to-finding-a-javascript-memory-leak-in-node-js/" target="_blank" rel="external">Simple Guide to Finding a JavaScript Memory Leak in Node.js</a></li>
<li><a href="https://www.dynatrace.com/blog/understanding-garbage-collection-and-hunting-memory-leaks-in-node-js/" target="_blank" rel="external">Understanding Garbage Collection and hunting Memory Leaks in Node.js</a></li>
<li><a href="https://www.toptal.com/nodejs/debugging-memory-leaks-node-js-applications" target="_blank" rel="external">Debugging Memory Leaks in Node.js Applications</a></li>
</ul>
<p>ï¼ˆå®Œï¼‰</p>
<h2 id="å…³äº"><a href="#å…³äº" class="headerlink" title="å…³äº"></a>å…³äº</h2><p>æœ¬æ–‡ä»…ä¾›å­¦ä¹ äº¤æµåˆ†äº«ï¼ŒåŸæ–‡é“¾æ¥ <a href="http://www.ruanyifeng.com/blog/2017/04/memory-leak.html" target="_blank" rel="external">JavaScript å†…å­˜æ³„æ¼æ•™ç¨‹</a>ï¼Œæ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆ</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScript-å†…å­˜æ³„éœ²æ•™ç¨‹&quot;&gt;&lt;a href=&quot;#JavaScript-å†…å­˜æ³„éœ²æ•™ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;JavaScript å†…å­˜æ³„éœ²æ•™ç¨‹&quot;&gt;&lt;/a&gt;JavaScript å†…å­˜æ³„éœ²æ•™ç¨‹&lt;/h1&gt;&lt;h2 id=&quot;ä¸€ã€ä»€ä¹ˆæ˜¯
    
    </summary>
    
    
      <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://microzz.com/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
  </entry>
  
  <entry>
    <title>JSæ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰ç»</title>
    <link href="https://microzz.com/2017/05/22/reg-lookahead/"/>
    <id>https://microzz.com/2017/05/22/reg-lookahead/</id>
    <published>2017-05-22T14:08:21.000Z</published>
    <updated>2017-05-23T14:23:21.943Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScriptæ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰ç»"><a href="#JavaScriptæ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰ç»" class="headerlink" title="JavaScriptæ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰ç»"></a>JavaScriptæ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰ç»</h1><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;æ­£åˆ™è¡¨è¾¾å¼ä»æ–‡æœ¬å¤´éƒ¨å‘å°¾éƒ¨å¼€å§‹è§£æï¼Œæ–‡æœ¬å°¾éƒ¨ç§°ä¸ºâ€œå‰â€ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;<strong>å‰ç»</strong>å°±æ˜¯åœ¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…åˆ°è§„åˆ™çš„æ—¶å€™ï¼Œå‘å‰æ£€æŸ¥æ˜¯å¦ç¬¦åˆæ–­è¨€ã€‚åé¡¾/åç»æ–¹å‘ç›¸åã€‚</p>
<p><code>exp(?=assert)</code>ï¼š<strong>æ­£å‘å‰ç»</strong><br><code>exp(?!assert)</code>ï¼š<strong>è´Ÿå‘å‰ç»</strong><br><code>exp(?&lt;=assert)</code>ï¼š<strong>æ­£å‘åé¡¾</strong> <em><br><code>exp(?&lt;!assert)</code>ï¼š<strong>è´Ÿå‘åé¡¾</strong> </em></p>
<p><strong>*JSä¸æ”¯æŒåé¡¾ã€‚</strong></p>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><pre><code class="javascript">// åˆ¤æ–­ä¸€ä¸ªå•è¯å­—ç¬¦ä¹‹åæ˜¯å¦æ˜¯æ•°å­—ï¼ˆæ­£å‘å‰ç»ï¼‰ï¼Œ
// æ˜¯çš„è¯ï¼Œåˆ™ç¬¦åˆåŒ¹é…ï¼Œè¿›è¡Œæ›¿æ¢
var str = &quot;a2*3&quot;;
var reg = /\w(?=\d)/g;
str.replace(reg,&quot;X&quot;); //&#39;X2*3&#39;
</code></pre>
<pre><code class="javascript">//åˆ¤æ–­ä¸€ä¸ªå•è¯å­—ç¬¦ä¹‹åæ˜¯å¦æ˜¯éæ•°å­—ï¼ˆè´Ÿå‘å‰ç»ï¼‰ï¼Œ
// æ˜¯çš„è¯ï¼Œåˆ™ç¬¦åˆåŒ¹é…ï¼Œè¿›è¡Œæ›¿æ¢
var str = &quot;a2*3&quot;;
var reg = /\w(?!\d)/g;
str.replace(reg,&quot;X&quot;); // &#39;aX*X&#39;
</code></pre>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>GitHub: ğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a><br>ä¸ªäººç½‘ç«™: ğŸ‘‰<a href="https://microzz.com/">https://microzz.com/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScriptæ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰ç»&quot;&gt;&lt;a href=&quot;#JavaScriptæ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰ç»&quot; class=&quot;headerlink&quot; title=&quot;JavaScriptæ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰ç»&quot;&gt;&lt;/a&gt;JavaScriptæ­£åˆ™è¡¨è¾¾å¼ä¹‹å‰ç»&lt;/h1&gt;&lt;h2 id=&quot;æ¦‚
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="RegExp" scheme="https://microzz.com/tags/RegExp/"/>
    
      <category term="æ­£åˆ™è¡¨è¾¾å¼" scheme="https://microzz.com/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>Rediså‘½ä»¤å¤§å…¨</title>
    <link href="https://microzz.com/2017/05/20/redis/"/>
    <id>https://microzz.com/2017/05/20/redis/</id>
    <published>2017-05-20T12:47:52.000Z</published>
    <updated>2017-05-22T14:07:15.133Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Rediså‘½ä»¤å¤§å…¨"><a href="#Rediså‘½ä»¤å¤§å…¨" class="headerlink" title="Rediså‘½ä»¤å¤§å…¨"></a>Rediså‘½ä»¤å¤§å…¨</h1><h2 id="Redisä»‹ç»"><a href="#Redisä»‹ç»" class="headerlink" title="Redisä»‹ç»"></a>Redisä»‹ç»</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;Redisæ˜¯ä¸€ä¸ªkey-valueå­˜å‚¨ç³»ç»Ÿã€‚å’ŒMemcachedç±»ä¼¼ï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„valueç±»å‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬string(å­—ç¬¦ä¸²)ã€list(é“¾è¡¨)ã€set(é›†åˆ)ã€zset(sorted set â€“æœ‰åºé›†åˆ)å’Œhashï¼ˆå“ˆå¸Œç±»å‹ï¼‰ã€‚è¿™äº›æ•°æ®ç±»å‹éƒ½æ”¯æŒpush/popã€add/removeåŠå–äº¤é›†å¹¶é›†å’Œå·®é›†åŠæ›´ä¸°å¯Œçš„æ“ä½œï¼Œè€Œä¸”è¿™äº›æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œredisæ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æ’åºã€‚ä¸memcachedä¸€æ ·ï¼Œä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­ã€‚åŒºåˆ«çš„æ˜¯redisä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†master-slave(ä¸»ä»)åŒæ­¥ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;Redis æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„key-valueæ•°æ®åº“ã€‚ redisçš„å‡ºç°ï¼Œå¾ˆå¤§ç¨‹åº¦è¡¥å¿äº†memcachedè¿™ç±»key/valueå­˜å‚¨çš„ä¸è¶³ï¼Œåœ¨éƒ¨ åˆ†åœºåˆå¯ä»¥å¯¹å…³ç³»æ•°æ®åº“èµ·åˆ°å¾ˆå¥½çš„è¡¥å……ä½œç”¨ã€‚å®ƒæä¾›äº†Javaï¼ŒC/C++ï¼ŒC#ï¼ŒPHPï¼ŒJavaScriptï¼ŒPerlï¼ŒObject-Cï¼ŒPythonï¼ŒRubyï¼ŒErlangç­‰å®¢æˆ·ç«¯ï¼Œä½¿ç”¨å¾ˆæ–¹ä¾¿ã€‚</p>
<h2 id="å¯¼èˆª"><a href="#å¯¼èˆª" class="headerlink" title="å¯¼èˆª"></a>å¯¼èˆª</h2><h3 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a><a href="#Strings">Strings</a></h3><p>   <a href="#StringsGet">get</a> | <a href="#StringsSet">set</a> | <a href="#StringsDel">del</a> </p>
<h3 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a><a href="#Lists">Lists</a></h3><p>   <a href="#ListsRPush">rpush</a> | <a href="#ListsLRange">lrange</a> | <a href="#ListsLIndex">lindex</a> | <a href="#ListsLPop">lpop</a></p>
<h3 id="Sets"><a href="#Sets" class="headerlink" title="Sets"></a><a href="#Sets">Sets</a></h3><p>   <a href="#Setssadd">sadd</a> | <a href="#Setssmembers">smembers</a> | <a href="#Setssismember">sismember</a> | <a href="#Setssrem">srem </a> </p>
<h3 id="Hashes"><a href="#Hashes" class="headerlink" title="Hashes"></a><a href="#Hashes">Hashes</a></h3><p>   <a href="#Hasheshset">hset</a> | <a href="#Hasheshget">hget</a> | <a href="#Hasheshgetall">hgetall</a> | <a href="#Hasheshdel">hdel</a></p>
<h3 id="Sorted-sets"><a href="#Sorted-sets" class="headerlink" title="Sorted sets"></a><a href="#SortedSets">Sorted sets</a></h3><p>   <a href="#SortedSetszadd">zadd</a> | <a href="#SortedSetszrange">zrange</a> | <a href="#SortedSetszrangebyscore">zrangebyscore</a> |<br>   <a href="#SortedSetszrem">szrem</a> | <a href="#SortedSetszrevrank">zrevrank</a> | <a href="#SortedSetszrevrange">zrevrange</a> </p>
<h3 id="Other-Commands"><a href="#Other-Commands" class="headerlink" title="Other Commands"></a><a href="#OtherCommands">Other Commands</a></h3><p><a href="#sort">sort</a></p>
<h4 id="publish-subscribe"><a href="#publish-subscribe" class="headerlink" title="publish/subscribe"></a><a href="#pubsub">publish/subscribe</a></h4><p><a href="#subscribe">subscribe</a> | <a href="#unsubscribe">unsubscribe</a> | <a href="#publish">publish</a> |<br><a href="#psubscribesort">psubscribe</a> | <a href="#punsubscribe">punsubscribe</a> </p>
<h4 id="expiring-keys"><a href="#expiring-keys" class="headerlink" title="expiring keys"></a><a href="#expiring">expiring keys</a></h4><p><a href="#persist">persist</a> | <a href="#ttl">ttl</a> | <a href="#expire">expire</a> | <a href="#expireat">expireat</a> |<br><a href="#pttl">pttl</a> | <a href="#pexpire">pexpire</a> | <a href="#pexpireat">pexpireat</a> </p>
<h2 id="Strings">å­—ç¬¦ä¸²(Strings)</h2>

<ul>
<li><p id="StringsGet"><code>Get key-name</code> - è·å–å­˜å‚¨åœ¨ç»™å®šé”®ä¸­çš„å€¼</p></li>
<li><p id="StringsSet"><code>Set key-name</code> - è·å–å­˜å‚¨åœ¨ç»™å®šé”®ä¸­çš„å€¼</p></li>
<li><p id="StringsDel"><code>Del key-name</code> - åˆ é™¤å­˜å‚¨åœ¨ç»™å®šé”®ä¸­çš„å€¼ï¼ˆé€‚ç”¨äºæ‰€æœ‰ç±»å‹ï¼‰</p>

</li>
</ul>
<h2 id="Lists">åˆ—è¡¨(Lists)</h2>

<ul>
<li><p id="ListsRPush"><code>RPush list-key item</code> - å°†ç»™å®šå€¼æ¨å…¥åˆ—è¡¨çš„å³ç«¯</p></li>
<li><p id="ListsLRange"><code>LRange list-key start stop</code> - è·å–åˆ—è¡¨åœ¨ç»™å®šèŒƒå›´ä¸Šçš„æ‰€æœ‰å€¼</p></li>
<li><p id="ListsLIndex"><code>LIndex list-key index</code> - è·å–åˆ—è¡¨åœ¨ç»™å®šä½ç½®ä¸Šçš„å•ä¸ªå…ƒç´ </p></li>
<li><p id="ListsLPop"><code>LPop list-key</code> - ä»åˆ—è¡¨çš„å·¦ç«¯popå‡ºä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›è¯¥å€¼</p>

</li>
</ul>
<h2 id="Sets">é›†åˆ(Sets)</h2>

<ul>
<li><p id="Setssadd"><code>sadd set-key item</code> - å°†ç»™å®šå…ƒç´ itemæ·»åŠ åˆ°é›†åˆï¼ˆè¿”å›0è¡¨ç¤ºå…ƒç´ å·²å­˜åœ¨äºé›†åˆä¸­ï¼Œ1è¡¨ç¤ºæ·»åŠ æˆåŠŸï¼‰</p></li>
<li><p id="Setssmembers"><code>smembers set-key</code> - è¿”å›é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ </p></li>
<li><p id="Setssismember"><code>sismember set-key item</code> - æ£€æŸ¥ç»™å®šå…ƒç´ itemæ˜¯å¦å­˜åœ¨äºé›†åˆä¸­</p></li>
<li><p id="Setssrem"><code>srem set-key item</code> - å¦‚æœitemå­˜åœ¨äºé›†åˆä¸­ï¼Œç§»é™¤è¯¥å…ƒç´ ï¼ˆè¿”å›ç§»é™¤å…ƒç´ çš„æ•°é‡ï¼‰</p>

</li>
</ul>
<h2 id="Hashes">æ•£åˆ—(Hashes)</h2>

<ul>
<li><p id="Hasheshset"><code>hset hash-key sub-key value</code> - åœ¨æ•£åˆ—ä¸­è®¾ç½®ç»™å®šçš„é”®å€¼å¯¹</p></li>
<li><p id="Hasheshget"><code>hget hash-key sub-key</code> - åœ¨æ•£åˆ—ä¸­è·å–æŒ‡å®šé”®çš„å€¼</p></li>
<li><p id="Hasheshgetall"><code>hgetall hash-key</code> - è·å–æ•£åˆ—ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹</p></li>
<li><p id="Hasheshdel"><code>hdel hash-key sub-key</code> - ç§»é™¤æ•£åˆ—ä¸­çš„ç»™å®šé”®ï¼ˆå­˜åœ¨è¿”å›1ï¼Œä¸å­˜åœ¨è¿”å›0ï¼‰</p>

</li>
</ul>
<h2 id="SortedSets">æœ‰åºé›†åˆ(Sorted Sets)</h2>

<ul>
<li><p id="SortedSetszadd"><code>zadd zset-key score member</code> - å°†ä¸€ä¸ªå¸¦æœ‰ç»™å®šåˆ†å€¼çš„æˆå‘˜æ·»åŠ åˆ°æœ‰åºé›†åˆä¸­</p></li>
<li><p id="SortedSetszrange"><code>zrange zset-key start stop [withscores]</code> - æ ¹æ®å…ƒç´ åœ¨æœ‰åºé›†åˆä¸­æ‰€å¤„çš„ä½ç½®ï¼Œä»æœ‰åºé›†åˆé‡Œé¢è·å–å¤šä¸ªå…ƒç´ </p></li>
<li><p id="SortedSetszrangebyscore"><code>zrangebyscore zset-key start stop [withscores]</code> - è·å–æœ‰åºé›†åˆåœ¨ç»™å®šåˆ†å€¼èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ </p></li>
<li><p id="SortedSetszrem"><code>zrem zset-key member</code> - åœ¨æœ‰åºé›†åˆä¸­ç§»é™¤ç»™å®šæˆå‘˜ï¼ˆå­˜åœ¨è¿”å›1ï¼Œä¸å­˜åœ¨è¿”å›0ï¼‰</p></li>
<li><p id="SortedSetszrevrank"><code>zrevrank zset-key member</code> - è¿”å›æœ‰åºé›†åˆæˆå‘˜ memberçš„æ’åï¼Œæˆå‘˜æŒ‰ç…§åˆ†å€¼ä»å¤§åˆ°å°æ’åˆ—</p></li>
<li><p id="SortedSetszrevrange"><code>zrevrange zset-key start stop [withscores]</code> - è¿”å›æœ‰åºé›†åˆç»™å®šæ’åèŒƒå›´å†…çš„æˆå‘˜ï¼Œæˆå‘˜æŒ‰ç…§åˆ†å€¼ä»å¤§åˆ°å°æ’åˆ—</p>

</li>
</ul>
<p></p><h2 id="OtherCommands">å…¶ä»–å‘½ä»¤(Other Commands)</h2><p></p>
<ul>
<li><p id="sort"><code>sort source-key [BY pattern] [Limit offset count] [Get pattern [Get pattern ...]] [Asc|Desc] [Alpha] [Store dest-key]</code> - æ ¹æ®ç»™å®šçš„é€‰é¡¹ï¼Œå¯¹è¾“å…¥çš„åˆ—è¡¨ã€é›†åˆæˆ–è€…æœ‰åºé›†åˆè¿›è¡Œæ’åºï¼Œè¿”å›æˆ–å­˜å‚¨æ’åºçš„ç»“æœ</p><h3 id="pubsub">å‘å¸ƒ/è®¢é˜…(publish/subscribe)</h3></li>
<li><p id="subscribe"><code>subscribe channel [channel ...]</code> - è®¢é˜…ç»™å®šçš„é¢‘é“ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰</p></li>
<li><p id="unsubscribe"><code>unsubscribe [channel [channel ...]]</code> - é€€è®¢ç»™å®šçš„é¢‘é“ï¼Œå¦‚æœæ²¡æœ‰ç»™å®šé¢‘é“ï¼Œå°†é€€è®¢æ‰€æœ‰é¢‘é“</p></li>
<li><p id="publish"><code>publish channel message</code> - å‘ç»™å®šé¢‘é“å‘é€æ¶ˆæ¯</p></li>
<li><p id="psubscribe"><code>psubscribe pattern [pattern ...]</code> - è®¢é˜…ç»™å®šæ¨¡å¼åŒ¹é…çš„é¢‘é“</p></li>
<li><p id="punsubscribe"><code>punsubscribe [pattern [pattern ...]]</code> - é€€è®¢ç»™å®špatternåŒ¹é…çš„æ‰€æœ‰æ¨¡å¼ï¼Œå¦‚æœæ²¡æœ‰ç»™å®šæ¨¡å¼ï¼Œå°†é€€è®¢æ‰€æœ‰æ¨¡å¼</p><h3 id="expiring">è¿‡æœŸæ—¶é—´(expiring keys)</h3></li>
<li><p id="persist"><code>persist key-name</code> - ç§»é™¤é”®çš„è¿‡æœŸæ—¶é—´</p></li>
<li><p id="ttl"><code>ttl key-name</code> - æŸ¥çœ‹ç»™å®šé”®è·ç¦»è¿‡æœŸè¿˜æœ‰å¤šå°‘ç§’</p></li>
<li><p id="expire"><code>expire key-name seconds</code> - è®©æŒ‡å®šé”®åœ¨ç»™å®šç§’æ•°åè¿‡æœŸ</p></li>
<li><p id="expireat"><code>expireat key-name timestamp</code> - å°†ç»™å®šçš„è¿‡æœŸæ—¶é—´è®¾ç½®ä¸ºç»™å®šçš„Unixæ—¶é—´æˆ³</p></li>
<li><p id="pttl"><code>pttl key-name</code> - æŸ¥çœ‹ç»™å®šé”®è·ç¦»è¿‡æœŸè¿˜æœ‰å¤šå°‘æ¯«ç§’(version &gt;= 2.6)</p></li>
<li><p id="pexpire"><code>pexpire key-name milliseconds</code> - è®©æŒ‡å®šé”®åœ¨ç»™å®šæ¯«ç§’æ•°åè¿‡æœŸ(version &gt;= 2.6)</p></li>
<li><p id="pexpireat"><code>pexpireat key-name timestamp-milliseconds</code> - å°†ç»™å®šçš„è¿‡æœŸæ—¶é—´è®¾ç½®ä¸ºç»™å®šçš„æ¯«ç§’çº§ç²¾åº¦çš„Unixæ—¶é—´æˆ³(version &gt;= 2.6)</p>

</li>
</ul>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>GitHub: ğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a><br>ä¸ªäººç½‘ç«™: ğŸ‘‰<a href="https://microzz.com/">https://microzz.com/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Rediså‘½ä»¤å¤§å…¨&quot;&gt;&lt;a href=&quot;#Rediså‘½ä»¤å¤§å…¨&quot; class=&quot;headerlink&quot; title=&quot;Rediså‘½ä»¤å¤§å…¨&quot;&gt;&lt;/a&gt;Rediså‘½ä»¤å¤§å…¨&lt;/h1&gt;&lt;h2 id=&quot;Redisä»‹ç»&quot;&gt;&lt;a href=&quot;#Redisä»‹ç»&quot; class=&quot;he
    
    </summary>
    
    
      <category term="Redis" scheme="https://microzz.com/tags/Redis/"/>
    
      <category term="æ•°æ®åº“" scheme="https://microzz.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="å‘½ä»¤" scheme="https://microzz.com/tags/%E5%91%BD%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>JSä¸­çš„å‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–</title>
    <link href="https://microzz.com/2017/05/18/throttle-debounce/"/>
    <id>https://microzz.com/2017/05/18/throttle-debounce/</id>
    <published>2017-05-18T14:35:44.000Z</published>
    <updated>2017-05-20T15:44:05.671Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScriptä¸­çš„å‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–"><a href="#JavaScriptä¸­çš„å‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–" class="headerlink" title="JavaScriptä¸­çš„å‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–"></a>JavaScriptä¸­çš„å‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–</h1><h2 id="å‡½æ•°èŠ‚æµ"><a href="#å‡½æ•°èŠ‚æµ" class="headerlink" title="å‡½æ•°èŠ‚æµ"></a><strong>å‡½æ•°èŠ‚æµ</strong></h2><p>æŒ‡è®©å‡½æ•°æœ‰è§„å¾‹çš„è¿›è¡Œè°ƒç”¨ï¼Œåº”ç”¨åœºæ™¯ï¼šwindow.resizeï¼Œæ¸¸æˆä¸­å­å¼¹å‘å°„(1såªèƒ½å‘å°„ä¸€é¢—å­å¼¹)ç­‰ï¼›</p>
<h2 id="å‡½æ•°é˜²æŠ–"><a href="#å‡½æ•°é˜²æŠ–" class="headerlink" title="å‡½æ•°é˜²æŠ–"></a><strong>å‡½æ•°é˜²æŠ–</strong></h2><p>è®©å‡½æ•°åœ¨â€è°ƒç”¨â€™â€™ä¹‹åçš„ä¸€æ®µæ—¶é—´åç”Ÿæ•ˆï¼Œåº”ç”¨åœºæ™¯:è¾“å…¥æ¡†(ä¾‹ï¼šåœ¨ç”¨æˆ·åœæ­¢è¾“å…¥çš„500msåå†å¤„ç†ç”¨æˆ·æ•°æ®)ã€‚</p>
<pre><code class="javascript">//å‡½æ•°èŠ‚æµ
/*
* @params {Function} fun è°ƒç”¨å‡½æ•°
* @params {delay} number å»¶è¿Ÿæ—¶é—´
*/
const throttle = (fun, delay, ...rest) =&gt; {
    let last = null;
    return () =&gt; {
        const now = + new Date();
        if (now - last &gt; delay) {
            fun(rest);
            last = now;
        }
    }
}
//å®ä¾‹
const throttleExample  = throttle(() =&gt; console.log(1), 1000);
//è°ƒç”¨
throttleExample();
throttleExample();
throttleExample();
//å‡½æ•°é˜²æŠ–
const debouce = (fun, delay, ...rest) =&gt; {
    let timer = null;
    return () =&gt; {
        clearTimeout(timer);
        timer = setTimeout(() =&gt; {
            fun(rest);
        }, delay);
    }
}
//å®ä¾‹
const debouceExample = debouce(() =&gt; console.log(1), 1000);
//è°ƒç”¨
debouceExample();
debouceExample();
debouceExample();
</code></pre>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>GitHub: ğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScriptä¸­çš„å‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–&quot;&gt;&lt;a href=&quot;#JavaScriptä¸­çš„å‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–&quot; class=&quot;headerlink&quot; title=&quot;JavaScriptä¸­çš„å‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–&quot;&gt;&lt;/a&gt;JavaScriptä¸­çš„å‡½æ•°èŠ‚æµå’Œå‡½æ•°é˜²æŠ–&lt;/
    
    </summary>
    
    
      <category term="throttle" scheme="https://microzz.com/tags/throttle/"/>
    
      <category term="debounce" scheme="https://microzz.com/tags/debounce/"/>
    
      <category term="å‡½æ•°èŠ‚æµ" scheme="https://microzz.com/tags/%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81/"/>
    
      <category term="å‡½æ•°é˜²æŠ–" scheme="https://microzz.com/tags/%E5%87%BD%E6%95%B0%E9%98%B2%E6%8A%96/"/>
    
  </entry>
  
  <entry>
    <title>Redisé…ç½®è®¤è¯å¯†ç </title>
    <link href="https://microzz.com/2017/05/15/redispass/"/>
    <id>https://microzz.com/2017/05/15/redispass/</id>
    <published>2017-05-15T14:32:28.000Z</published>
    <updated>2017-05-23T14:42:17.028Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Redisé…ç½®è®¤è¯å¯†ç "><a href="#Redisé…ç½®è®¤è¯å¯†ç " class="headerlink" title="Redisé…ç½®è®¤è¯å¯†ç "></a>Redisé…ç½®è®¤è¯å¯†ç </h1><h2 id="é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®"><a href="#é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®" class="headerlink" title="é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®"></a>é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®</h2><p>yumæ–¹å¼å®‰è£…çš„redisé…ç½®æ–‡ä»¶é€šå¸¸åœ¨/etc/redis.confä¸­ï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶æ‰¾åˆ°<br>   <code>#requirepass foobared</code><br>å»æ‰è¡Œå‰çš„æ³¨é‡Šï¼Œå¹¶ä¿®æ”¹å¯†ç ä¸ºæ‰€éœ€çš„å¯†ç ,ä¿å­˜æ–‡ä»¶<br><code>requirepass myRedis</code><br>é‡å¯redis</p>
<p><code>sudo service redis restart</code></p>
<pre><code class="bash">sudo service redis stop  
sudo redis-server /etc/redis.conf
</code></pre>
<p>è¿™ä¸ªæ—¶å€™å°è¯•ç™»å½•redisï¼Œå‘ç°å¯ä»¥ç™»ä¸Šï¼Œä½†æ˜¯æ‰§è¡Œå…·ä½“å‘½ä»¤æ˜¯æç¤ºæ“ä½œä¸å…è®¸</p>
<pre><code class="bash">redis-cli -h 127.0.0.1 -p 6379  
redis 127.0.0.1:6379&gt;  
redis 127.0.0.1:6379&gt; keys *  
(error) ERR operation not permitted  
redis 127.0.0.1:6379&gt; select 1  
(error) ERR operation not permitted  
redis 127.0.0.1:6379[1]&gt;
</code></pre>
<p>å°è¯•ç”¨å¯†ç ç™»å½•å¹¶æ‰§è¡Œå…·ä½“çš„å‘½ä»¤çœ‹åˆ°å¯ä»¥æˆåŠŸæ‰§è¡Œ</p>
<pre><code class="bash">redis-cli -h 127.0.0.1 -p 6379 -a myRedis  
redis 127.0.0.1:6379&gt; keys *  
1) &quot;myset&quot;  
2) &quot;mysortset&quot;  
redis 127.0.0.1:6379&gt; select 1  
OK  
redis 127.0.0.1:6379[1]&gt; config get requirepass  
1) &quot;requirepass&quot;  
2) &quot;myRedis&quot;
</code></pre>
<h2 id="é€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œé…ç½®"><a href="#é€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œé…ç½®" class="headerlink" title="é€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œé…ç½®"></a>é€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œé…ç½®</h2><pre><code class="bash">redis 127.0.0.1:6379[1]&gt; config set requirepass my_redis  
OK  
redis 127.0.0.1:6379[1]&gt; config get requirepass  
1) &quot;requirepass&quot;  
2) &quot;my_redis&quot;
</code></pre>
<p>æ— éœ€é‡å¯redis<br>ä½¿ç”¨ç¬¬ä¸€æ­¥ä¸­é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„è€å¯†ç ç™»å½•redisï¼Œä¼šå‘ç°åŸæ¥çš„å¯†ç å·²ä¸å¯ç”¨ï¼Œæ“ä½œè¢«æ‹’ç»</p>
<pre><code class="bash">redis-cli -h 127.0.0.1 -p 6379 -a myRedis  
redis 127.0.0.1:6379&gt; config get requirepass  
(error) ERR operation not permitted
</code></pre>
<p>ä½¿ç”¨ä¿®æ”¹åçš„å¯†ç ç™»å½•redisï¼Œå¯ä»¥æ‰§è¡Œç›¸åº”æ“ä½œ</p>
<pre><code class="bash">redis-cli -h 127.0.0.1 -p 6379 -a my_redis  
redis 127.0.0.1:6379&gt; config get requirepass  
1) &quot;requirepass&quot;  
2) &quot;my_redis
</code></pre>
<p>å°è¯•é‡å¯ä¸€ä¸‹redisï¼Œç”¨æ–°é…ç½®çš„å¯†ç ç™»å½•redisæ‰§è¡Œæ“ä½œï¼Œå‘ç°æ–°çš„å¯†ç å¤±æ•ˆï¼Œredisé‡æ–°ä½¿ç”¨äº†é…ç½®æ–‡ä»¶ä¸­çš„å¯†ç </p>
<pre><code class="bash">sudo service redis restart  
Stopping redis-server:                                     [  OK  ]  
Starting redis-server:                                     [  OK  ]  
redis-cli -h 127.0.0.1 -p 6379 -a my_redis  
redis 127.0.0.1:6379&gt; config get requirepass  
(error) ERR operation not permitted  
redis-cli -h 127.0.0.1 -p 6379 -a myRedis  
redis 127.0.0.1:6379&gt; config get requirepass  
1) &quot;requirepass&quot;  
2) &quot;myRedis&quot;
</code></pre>
<p>é™¤äº†åœ¨ç™»å½•æ—¶é€šè¿‡ -a å‚æ•°åˆ¶å®šå¯†ç å¤–ï¼Œè¿˜å¯ä»¥ç™»å½•æ—¶ä¸æŒ‡å®šå¯†ç ï¼Œè€Œåœ¨æ‰§è¡Œæ“ä½œå‰è¿›è¡Œè®¤è¯ã€‚</p>
<pre><code class="bash">redis-cli -h 127.0.0.1 -p 6379  
redis 127.0.0.1:6379&gt; config get requirepass  
(error) ERR operation not permitted  
redis 127.0.0.1:6379&gt; auth myRedis  
OK  
redis 127.0.0.1:6379&gt; config get requirepass  
1) &quot;requirepass&quot;  
2) &quot;myRedis&quot;
</code></pre>
<h2 id="masteré…ç½®äº†å¯†ç ï¼Œslaveå¦‚ä½•é…ç½®"><a href="#masteré…ç½®äº†å¯†ç ï¼Œslaveå¦‚ä½•é…ç½®" class="headerlink" title="masteré…ç½®äº†å¯†ç ï¼Œslaveå¦‚ä½•é…ç½®"></a>masteré…ç½®äº†å¯†ç ï¼Œslaveå¦‚ä½•é…ç½®</h2><p>è‹¥masteré…ç½®äº†å¯†ç åˆ™slaveä¹Ÿè¦é…ç½®ç›¸åº”çš„å¯†ç å‚æ•°å¦åˆ™æ— æ³•è¿›è¡Œæ­£å¸¸å¤åˆ¶çš„ã€‚<br>slaveä¸­é…ç½®æ–‡ä»¶å†…æ‰¾åˆ°å¦‚ä¸‹è¡Œï¼Œç§»é™¤æ³¨é‡Šï¼Œä¿®æ”¹å¯†ç å³å¯</p>
<p> <code>#masterauth  mstpassword</code>  </p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>GitHub: ğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a><br>ä¸ªäººç½‘ç«™: ğŸ‘‰<a href="https://microzz.com/">https://microzz.com/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Redisé…ç½®è®¤è¯å¯†ç &quot;&gt;&lt;a href=&quot;#Redisé…ç½®è®¤è¯å¯†ç &quot; class=&quot;headerlink&quot; title=&quot;Redisé…ç½®è®¤è¯å¯†ç &quot;&gt;&lt;/a&gt;Redisé…ç½®è®¤è¯å¯†ç &lt;/h1&gt;&lt;h2 id=&quot;é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®&quot;&gt;&lt;a href=&quot;#é€šè¿‡é…ç½®æ–‡ä»¶è¿›
    
    </summary>
    
    
      <category term="Redis" scheme="https://microzz.com/tags/Redis/"/>
    
      <category term="å®‰å…¨" scheme="https://microzz.com/tags/%E5%AE%89%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>Webå‰ç«¯æ€§èƒ½ä¼˜åŒ–</title>
    <link href="https://microzz.com/2017/05/13/Performance/"/>
    <id>https://microzz.com/2017/05/13/Performance/</id>
    <published>2017-05-13T14:37:32.000Z</published>
    <updated>2017-05-17T14:49:00.650Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Webæ€§èƒ½ä¼˜åŒ–ï¼šPerformanceï¼Œæ•°æ®æœé›†æ–¹æ³•"><a href="#Webæ€§èƒ½ä¼˜åŒ–ï¼šPerformanceï¼Œæ•°æ®æœé›†æ–¹æ³•" class="headerlink" title="Webæ€§èƒ½ä¼˜åŒ–ï¼šPerformanceï¼Œæ•°æ®æœé›†æ–¹æ³•"></a>Webæ€§èƒ½ä¼˜åŒ–ï¼šPerformanceï¼Œæ•°æ®æœé›†æ–¹æ³•</h2><p>æµè§ˆå™¨æ–°æä¾›çš„performanceæ¥å£ç²¾ç¡®çš„å‘Šè¯‰æˆ‘ä»¬å½“è®¿é—®ä¸€ä¸ªç½‘ç«™é¡µé¢æ—¶å½“å‰ç½‘é¡µæ¯ä¸ªå¤„ç†é˜¶æ®µçš„ç²¾ç¡®æ—¶é—´(timestamp)ï¼Œä»¥æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œå‰ç«¯åˆ†æã€‚<br>å®ƒæ˜¯æµè§ˆå™¨çš„ç›´æ¥å®ç°ï¼Œæ¯”ä¹‹å‰åœ¨ç½‘é¡µä¸­ç”¨jsè®¾ç½®Date.timeæˆ–è€…cookieæ¥åˆ†æç½‘é¡µæ—¶é—´ä¸Šè¦ç²¾ç¡®å¾ˆå¤šã€‚</p>
<p><img src="http://www.w3.org/TR/resource-timing/resource-timing-overview-1.png" alt="alt text" title="Title"></p>
<pre><code class="java">
readyStart = timing.fetchStart - timing.navigationStart; // å‡†å¤‡æ–°é¡µé¢æ—¶é—´è€—æ—¶
redirectTime = timing.redirectEnd - timing.redirectStart; // é‡å®šå‘è€—æ—¶
appcacheTime = timing.domainLookupStart - timing.fetchStart; // Appcache è€—æ—¶
unloadEventTime = timing.unloadEventEnd - timing.unloadEventStart; // unload å‰æ–‡æ¡£è€—æ—¶
lookupDomainTime = timing.domainLookupEnd - timing.domainLookupStart; // DNS æŸ¥è¯¢è€—æ—¶
connectTime = timing.connectEnd - timing.connectStart; // TCPè¿æ¥è€—æ—¶
requestTime = timing.responseEnd - timing.requestStart; // requestè¯·æ±‚è€—æ—¶
initDomTreeTime = timing.domInteractive - timing.responseEnd; // è¯·æ±‚å®Œæ¯•è‡³DOMåŠ è½½:
domReadyTime = timing.domComplete - timing.domInteractive; // è§£é‡Šdomæ ‘è€—æ—¶:
loadTime = timing.loadEventEnd - timing.navigationStart // ä»å¼€å§‹è‡³loadæ€»è€—æ—¶:
</code></pre>
<h3 id="performanceNavigation-performance-navigation-å¯¹è±¡çš„æˆå‘˜"><a href="#performanceNavigation-performance-navigation-å¯¹è±¡çš„æˆå‘˜" class="headerlink" title="performanceNavigation(performance.navigation)å¯¹è±¡çš„æˆå‘˜"></a>performanceNavigation(performance.navigation)å¯¹è±¡çš„æˆå‘˜</h3><h5 id="performanceNavigation-type"><a href="#performanceNavigation-type" class="headerlink" title="performanceNavigation.type"></a>performanceNavigation.type</h5><p>è¿”å›å€¼åº”è¯¥æ˜¯0,1,2 ä¸­çš„ä¸€ä¸ª.åˆ†åˆ«å¯¹åº”ä¸‰ä¸ªæšä¸¾å€¼:</p>
<p><strong>0. : TYPE_NAVIGATE  (ç”¨æˆ·é€šè¿‡å¸¸è§„å¯¼èˆªæ–¹å¼è®¿é—®é¡µé¢,æ¯”å¦‚ç‚¹ä¸€ä¸ªé“¾æ¥ï¼Œæˆ–è€…ä¸€èˆ¬çš„getæ–¹å¼.)</strong></p>
<p><strong>1. : TYPE_RELOAD  (ç”¨æˆ·é€šè¿‡åˆ·æ–°,åŒ…æ‹¬JSè°ƒç”¨åˆ·æ–°æ¥å£ç­‰æ–¹å¼è®¿é—®é¡µé¢)</strong></p>
<p><strong>2. : TYPE_BACK_FORWARD (ç”¨æˆ·é€šè¿‡åé€€æŒ‰é’®è®¿é—®æœ¬é¡µé¢)</strong></p>
<p><strong>3. ps:è‰æ¡ˆä¸­å…¶å®è¿˜æœ‰  TYPE_RESERVED (ä¿ç•™,å…¶ä»–éå‰ä¸‰ç§æ–¹å¼è®¿é—®.)</strong></p>
<h5 id="performanceNavigation-redirectCount"><a href="#performanceNavigation-redirectCount" class="headerlink" title="performanceNavigation.redirectCount"></a>performanceNavigation.redirectCount</h5><p>ä¸€ä¸ªåªè¯»å±æ€§,è¿”å›å½“å‰é¡µé¢æ˜¯å‡ æ¬¡é‡å®šå‘æ‰è¿‡æ¥çš„.ä½†æ˜¯è¿™ä¸ªæ¥å£æœ‰åŒæºç­–ç•¥é™åˆ¶,å³ä»…èƒ½æ£€æµ‹åŒæºçš„é‡å®šå‘.</p>
<p>bugs:</p>
<pre><code> 1. IE9,å½“ä¸€ä¸ªåŒæºçš„é¡µé¢aè¿æ¥åˆ°åœ°å€b(æ˜¯å¦äºa,cåŒæºéƒ½å¦‚æ­¤),åè¢«é‡å®šå‘åˆ°åŒæºé¡µé¢cæ—¶.navigation.redirectCountå±…ç„¶ä¼šæ˜¯1.è€Œä¸æ˜¯0,æ­¤bugå·²è¢«IE10 PP2ä¿®å¤.**
</code></pre><h3 id="performanceTiming-performance-timing-å¯¹è±¡çš„æˆå‘˜"><a href="#performanceTiming-performance-timing-å¯¹è±¡çš„æˆå‘˜" class="headerlink" title="performanceTiming(performance.timing)å¯¹è±¡çš„æˆå‘˜:"></a>performanceTiming(performance.timing)å¯¹è±¡çš„æˆå‘˜:</h3><h4 id="navigationStart"><a href="#navigationStart" class="headerlink" title=".navigationStart"></a>.navigationStart</h4><p>æµè§ˆå™¨å®Œæˆå¸è½½å‰ä¸€ä¸ªæ–‡æ¡£çš„æ—¶é—´(ä¹Ÿå°±æ˜¯å‡†å¤‡åŠ è½½æ–°é¡µé¢çš„é‚£ä¸ªèµ·å§‹æ—¶é—´).å¦‚æœæ²¡æœ‰å‰ä¸€ä¸ªæ–‡æ¡£ï¼Œé‚£ä¹ˆå°±è¿”å› timing.fetchStartçš„å€¼.</p>
<p>ä¼¼ä¹åªæœ‰Chrome éå¸¸ä¸¥æ ¼éµå®ˆäº†æ­¤è‰æ¡ˆ. å³ä¸æŠŠåˆ·æ–°é¡µé¢ ï¼Œä»¥åŠä¸€ä¸ªæ ‡ç­¾é¡µè¾“å…¥åœ°å€åˆ°æŒ‡å®šé¡µé¢ï¼Œè§†ä¸ºå‘ç”Ÿæ–‡æ¡£çš„å¸è½½</p>
<p>bugs:</p>
<pre><code> 1. IE9,å½“å‘ç”Ÿé‡å®šå‘æ—¶,.navigationStart ä¼šæ˜¯0. IE10 PP2 å·²ä¿®å¤æ­¤é—®é¢˜.

 2. IE9-IE10 PP2,çš„ä¸€ä¸ªé—®é¢˜æ˜¯åˆ·æ–°å½“å‰é¡µé¢,æˆ–åœ¨æŸä¸ªæ ‡ç­¾é¡µè¾“å…¥åœ°å€ä¸ºéç›¸åŒé¡µé¢æ—¶, ä¼šè¢«è§†ä¸ºå­˜åœ¨å‰ä¸€ä¸ªæ–‡æ¡£ï¼Œä¹Ÿå°±æ˜¯è¯´,å…¶navigationStartä¼šæ—©äºfetchStart.(é™¤éåœ¨å½“å‰é¡µå†æ¬¡è¾“å…¥åœ°å€æŒ‰å›è½¦.å†æ¬¡è¿›å…¥è¯¥é¡µé¢ï¼Œåˆ™è¢«è§†ä¸ºæ— å‰ä¸€ä¸ªæ–‡æ¡£è¢«å¸è½½.).è€Œå®é™…ä¸Šè¿™æ—¶å€™navigationStart,æ˜¯unloadEventEndçš„æ—¶é—´.

 3. Firefox7-Firefox10,ä¸€ä¸ªæ–°æ ‡ç­¾é¡µä¹Ÿä¼šè¢«è§†ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„æ–‡æ¡£. æ‰€ä»¥è¿™æ—¶å€™,ä¼šæœ‰å€¼ï¼Œä¸”ä¸æ˜¯fetchStartçš„å€¼.
</code></pre><h4 id="unloadEventStart"><a href="#unloadEventStart" class="headerlink" title=".unloadEventStart"></a>.unloadEventStart</h4><p>å¦‚æœå‰ä¸€ä¸ªæ–‡æ¡£ï¼Œå’Œå½“å‰æ–‡æ¡£åŒæº,è¿”å›å‰ä¸€ä¸ªæ–‡æ¡£å‘ç”Ÿunloadäº‹ä»¶å‰çš„æ—¶é—´.å¦‚æœæ²¡æœ‰å‰ä¸€ä¸ªæ–‡æ¡£ï¼Œæˆ–ä¸åŒæº,åˆ™è¿”å›0.</p>
<p>bugs:</p>
<pre><code> 1. IE9-IE10 pp2,Chrome17-,åœ¨å‰ä¸€ä¸ªæ–‡æ¡£ä¸å½“å‰æ–‡æ¡£ä¸­é—´å‘ç”Ÿé‡å®šå‘æ—¶, ä¸”å‰åä¸¤ä¸ªæ–‡æ¡£åŒæºæ—¶, unloadEventStart,ä¹Ÿä¼šè¿”å›0
</code></pre><h4 id="unloadEventEnd"><a href="#unloadEventEnd" class="headerlink" title=".unloadEventEnd"></a>.unloadEventEnd</h4><p>å¦‚æœå‰ä¸€ä¸ªæ–‡æ¡£å’Œå½“å‰æ–‡æ¡£åŒæº.è¿”å›å‰ä¸€ä¸ªæ–‡æ¡£å‘ç”Ÿunloadäº‹ä»¶çš„æ—¶é—´. å¦‚æœæ²¡æœ‰å‰ä¸€ä¸ªæ–‡æ¡£ï¼Œæˆ–ä¸åŒæº,åˆ™è¿”å›0.</p>
<p>å¦‚æœ,å‘ç”Ÿäº†HTTPé‡å®šå‘,æˆ–è€…ç±»ä¼¼çš„äº‹æƒ….å¹¶ä¸”,ä»å¯¼èˆªå¼€å§‹ä¸­é—´çš„æ¯æ¬¡é‡å®šå‘ï¼Œå¹¶ä¸éƒ½å’Œå½“å‰æ–‡æ¡£åŒåŸŸçš„è¯,.åˆ™è¿”å›0</p>
<p>bugs:</p>
<pre><code> 1. IE9-IE10 pp2,Chrome17-,åœ¨å‰ä¸€ä¸ªæ–‡æ¡£ä¸å½“å‰æ–‡æ¡£ä¸­é—´å‘ç”Ÿé‡å®šå‘æ—¶, ä¸”å‰åä¸¤ä¸ªæ–‡æ¡£åŒæºæ—¶, unloadEventEnd,ä¹Ÿä¼šè¿”å›0
</code></pre><h4 id="redirectStart"><a href="#redirectStart" class="headerlink" title=".redirectStart"></a>.redirectStart</h4><p>å¦‚æœ,å‘ç”Ÿäº†HTTPé‡å®šå‘,æˆ–è€…ç±»ä¼¼çš„äº‹æƒ….å¹¶ä¸”,ä»å¯¼èˆªå¼€å§‹,ä¸­é—´çš„æ¯æ¬¡é‡å®šå‘ï¼Œéƒ½å’Œå½“å‰æ–‡æ¡£åŒåŸŸçš„è¯,å°±è¿”å›å¼€å§‹é‡å®šå‘çš„,timing.fetchStartçš„å€¼.å…¶ä»–æƒ…å†µï¼Œåˆ™è¿”å›0.</p>
<p>bugs:</p>
<pre><code> 1. IE9-IE10 pp2,åœ¨é¡µé¢a,é“¾æ¥åˆ°åœ°å€b,å¹¶é‡å®šå‘åˆ°ä¸båŒæºçš„é¡µé¢cæ—¶. redirectStart,å°†ä¸º0.å³åŒæºç­–ç•¥ï¼Œå±…ç„¶ä¼šè€ƒè™‘å¯¼èˆªé¡µ.
</code></pre><h4 id="redirectEnd"><a href="#redirectEnd" class="headerlink" title=".redirectEnd"></a>.redirectEnd</h4><p>å¦‚æœ,å‘ç”Ÿäº†HTTPé‡å®šå‘,æˆ–è€…ç±»ä¼¼çš„äº‹æƒ….å¹¶ä¸”,ä»å¯¼èˆªå¼€å§‹,ä¸­é—´çš„æ¯æ¬¡é‡å®šå‘ï¼Œéƒ½å’Œå½“å‰æ–‡æ¡£åŒåŸŸçš„è¯,å°±è¿”å›æœ€åä¸€æ¬¡é‡å®šå‘ï¼Œæ¥æ”¶åˆ°æœ€åä¸€ä¸ªå­—èŠ‚æ•°æ®åçš„é‚£ä¸ªæ—¶é—´.å…¶ä»–æƒ…å†µåˆ™è¿”å›0.</p>
<p>bugs:</p>
<pre><code> 1. IE9-IE10 pp2,åœ¨é¡µé¢a,é“¾æ¥åˆ°åœ°å€b,å¹¶é‡å®šå‘åˆ°ä¸båŒæºçš„é¡µé¢cæ—¶. redirectSEnd,å°†ä¸º0.å³åŒæºç­–ç•¥ï¼Œå±…ç„¶ä¼šè€ƒè™‘å¯¼èˆªé¡µ.
</code></pre><h4 id="fetchStart"><a href="#fetchStart" class="headerlink" title=".fetchStart"></a>.fetchStart</h4><p>å¦‚æœä¸€ä¸ªæ–°çš„èµ„æº(è¿™é‡Œæ˜¯æŒ‡å½“å‰æ–‡æ¡£)è·å–è¢«å‘èµ·,æˆ–ç±»ä¼¼çš„äº‹æƒ…å‘ç”Ÿ,åˆ™ fetchStartå¿…é¡»è¿”å›ç”¨æˆ·ä»£ç†å¼€å§‹æ£€æŸ¥å…¶ç›¸å…³ç¼“å­˜çš„é‚£ä¸ªæ—¶é—´,å…¶ä»–æƒ…å†µåˆ™è¿”å›å¼€å§‹è·å–è¯¥èµ„æºçš„æ—¶é—´.</p>
<h4 id="domainLookupStart"><a href="#domainLookupStart" class="headerlink" title=".domainLookupStart"></a>.domainLookupStart</h4><p>è¿”å›ç”¨æˆ·ä»£ç†å¯¹å½“å‰æ–‡æ¡£æ‰€å±åŸŸè¿›è¡ŒDNSæŸ¥è¯¢å¼€å§‹çš„æ—¶é—´. å¦‚æœæ­¤è¯·æ±‚æ²¡æœ‰DNSæŸ¥è¯¢è¿‡ç¨‹,å¦‚é•¿è¿æ¥ï¼Œèµ„æºcache,ç”šè‡³æ˜¯æœ¬åœ°èµ„æºç­‰. é‚£ä¹ˆå°±è¿”å› fetchStartçš„å€¼.</p>
<p>bugs:</p>
<pre><code> 1. Firefox7-Firefox10,çš„å®ç°æœ‰é”™è¯¯. å› ä¸ºå…¶å€¼,å¹¶æ²¡æœ‰éµå®ˆæ ‡å‡†æ‰€æè¿°çš„å¯¹åº”æ—¶é—´èŠ‚ç‚¹.è€Œæ˜¯é»˜è®¤ä»¥navigationStartä½œä¸ºæ—¶é—´èµ·ç‚¹,å¹¶ä»¥ä¸­é—´çš„é‡å®šå‘æ—¶é—´åšç´¯åŠ .è€Œå¾—åˆ°domainLookupStartçš„æ—¶é—´.å³ä½¿è¿™ä¸ªé‡å®šå‘æ˜¯éåŒæºçš„é‡å®šå‘.æ‰€æ¶ˆè€—çš„æ—¶é—´éƒ½ä¼šè¢«è®¡ç®—è¿›å». é‚£ä¹ˆï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ï¼Œä¸ºä»€ä¹ˆå½“æ²¡æœ‰é‡å®šå‘å‘ç”Ÿæ—¶, domainLookupStart - fetchStart, æˆ‘ä»¬å¾€å¾€ä¼šå¾—åˆ°ä¸€ä¸ªè´Ÿå€¼çš„åŸå› ,å› ä¸ºnavigationStart,æ˜¯è¦æ—©äº fetchStartçš„.
</code></pre><h4 id="domainLookupEnd"><a href="#domainLookupEnd" class="headerlink" title=".domainLookupEnd"></a>.domainLookupEnd</h4><p>è¿”å›ç”¨æˆ·ä»£ç†å¯¹ç»“æŸå¯¹å½“å‰æ–‡æ¡£æ‰€å±åŸŸè¿›è¡ŒDNSæŸ¥è¯¢çš„æ—¶é—´.å¦‚æœæ­¤è¯·æ±‚æ²¡æœ‰DNSæŸ¥è¯¢è¿‡ç¨‹,å¦‚é•¿è¿æ¥ï¼Œèµ„æºcache,ç”šè‡³æ˜¯æœ¬åœ°èµ„æºç­‰. é‚£ä¹ˆå°±è¿”å› fetchStartçš„å€¼.</p>
<p>bugs:</p>
<pre><code> 1.å‚è€ƒdomainLookupStartçš„bug. Endå…·å¤‡ç›¸åŒçš„é—®é¢˜.
</code></pre><h4 id="connectStart"><a href="#connectStart" class="headerlink" title=".connectStart"></a>.connectStart</h4><p>è¿”å›ç”¨æˆ·ä»£ç†å‘æœåŠ¡å™¨æœåŠ¡å™¨è¯·æ±‚æ–‡æ¡£ï¼Œå¼€å§‹å»ºç«‹è¿æ¥çš„é‚£ä¸ªæ—¶é—´,å¦‚æœæ­¤è¿æ¥æ˜¯ä¸€ä¸ªé•¿è¿æ¥,åˆæˆ–è€…ç›´æ¥ä»ç¼“å­˜ä¸­è·å–èµ„æºï¼ˆå³æ²¡æœ‰ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼‰.åˆ™è¿”å›domainLookupEndçš„å€¼.</p>
<p>bugs:</p>
<pre><code> 1. Firefox7 å½“èµ„æºèµ°cache,å³å¹¶æœªåˆ›å»ºè¿æ¥æ—¶. connentStart çš„å€¼ä¸º0.

 2. Firefox8-Firefox10,å½“å¹¶æœªåˆ›å»ºè¿æ¥æ—¶,connetStartçš„å€¼æ˜¯fetchStartçš„å€¼ï¼Œè€Œä¸æ˜¯domainLookEndçš„å€¼. ä½†è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªæƒ¯æ€§é—®é¢˜ï¼Œå› ä¸ºdomainLookupEndçš„ç´¯ç§¯æ—¶é—´å°±å·²ç»èƒŒç¦»äº†æ ‡å‡†äº†ï¼Œæ‰€ä»¥å³ä½¿connectStartéµå®ˆæ ‡å‡†.ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰é—®é¢˜çš„å€¼.
</code></pre><h4 id="connectEnd"><a href="#connectEnd" class="headerlink" title=".connectEnd"></a>.connectEnd</h4><p>è¿”å›ç”¨æˆ·ä»£ç†å‘æœåŠ¡å™¨æœåŠ¡å™¨è¯·æ±‚æ–‡æ¡£ï¼Œå»ºç«‹è¿æ¥æˆåŠŸå(æ³¨æ„ï¼Œä¸æ˜¯æ–­å¼€è¿æ¥çš„æ—¶é—´.)çš„é‚£ä¸ªæ—¶é—´.å¦‚æœæ­¤è¿æ¥æ˜¯ä¸€ä¸ªé•¿è¿æ¥ï¼Œåˆæˆ–ç›´æ¥ä»ç¼“å­˜ä¸­è·å–èµ„æº ï¼ˆå³æ²¡æœ‰ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼‰,åˆ™è¿”å›domainLookupEndçš„å€¼.</p>
<p>bugs:</p>
<pre><code> å‚è€ƒconnectStartçš„é—®é¢˜.connectEndå…·å¤‡åŒæ ·çš„é—®é¢˜.
</code></pre><p>å¦‚æœè¿æ¥å»ºç«‹å¤±è´¥,è€Œç”¨æˆ·ä»£ç†è¿›è¡Œé‡è¿,åˆ™connectStartå’ŒconnectEndåˆ™åº”è¯¥æ˜¯è¿™æ¬¡é‡è¿çš„ç›¸å…³çš„å€¼.å…¶ä¸­connectEndå¿…é¡»åŒ…æ‹¬å»ºç«‹è¿æ¥çš„æ—¶é—´ä»¥åŠ,SSHæ¡æ‰‹åè®®å’ŒSOCKSè®¤è¯ç­‰æ—¶é—´.</p>
<h4 id="secureConnectionStart"><a href="#secureConnectionStart" class="headerlink" title=".secureConnectionStart"></a>.secureConnectionStart</h4><p>å¯é€‰ç‰¹æ€§.ç”¨æˆ·ä»£ç†å¦‚æœæ²¡æœ‰å¯¹åº”çš„ä¸œä¸œ,å°±è¦æŠŠè¿™ä¸ªè®¾ç½®ä¸ºundefined.å¦‚æœæœ‰è¿™ä¸ªä¸œä¸œ,å¹¶ä¸”æ˜¯HTTPSåè®®,é‚£ä¹ˆå°±è¦è¿”å›å¼€å§‹SSLæ¡æ‰‹çš„é‚£ä¸ªæ—¶é—´. å¦‚æœä¸æ˜¯HTTPS, é‚£ä¹ˆå°±è¿”å›0.</p>
<p>è¡¥å……:Firefox7-10,IE9-IE10 PP2,éƒ½æœ¨æœ‰å®ç°è¿™ä¸ªapi.æ‰€ä»¥å§‹ç»ˆæ˜¯undefined.</p>
<h4 id="requestStart"><a href="#requestStart" class="headerlink" title=".requestStart"></a>.requestStart</h4><p>è¿”å›ä»æœåŠ¡å™¨ã€ç¼“å­˜ã€æœ¬åœ°èµ„æºç­‰,å¼€å§‹è¯·æ±‚æ–‡æ¡£çš„æ—¶é—´. </p>
<p>å¦‚æœè¯·æ±‚ä¸­é€”,è¿æ¥æ–­å¼€äº†,å¹¶ä¸”ç”¨æˆ·ä»£ç†è¿›è¡Œäº†é‡è¿ï¼Œå¹¶é‡æ–°è¯·æ±‚äº†èµ„æº,é‚£ä¹ˆrequestStartå°±å¿…é¡»ä¸ºè¿™ä¸ªæ–°è¯·æ±‚æ‰€å¯¹åº”çš„æ—¶é—´.</p>
<p><strong>performance.timing å¹¶ä¸åŒ…å«ä¸€ä¸ª å•è¡¨è¯·æ±‚ç»“æŸçš„â€requestEndâ€æ¥å£. åŸå› æœ‰ä¸¤ç‚¹:</strong></p>
<pre><code> 1. ç”¨æˆ·ä»£ç†æ‰€èƒ½ç¡®å®šçš„è¯·æ±‚çš„ç»“æŸ,å¹¶ä¸èƒ½ä»£è¡¨æ­£ç¡®çš„ç½‘ç»œæ “ä¹¦ä¸­çš„ç»“æŸæ—¶é—´. æ‰€ä»¥è®¾è®¡è¿™ä¸ªå±æ€§å¹¶æ²¡ä»€ä¹ˆç”¨å¤„.

 2. ä¸€äº›ç”¨æˆ·ä»£ç†ï¼Œå¦‚æœè¦å°è£…ä¸€ä¸ªä»£è¡¨HTTPå±‚é¢çš„ï¼Œè¯·æ±‚ç»“æŸæ—¶é—´çš„æ¥å£,æˆæœ¬ä¼šéå¸¸é«˜æ˜‚.
</code></pre><p>bugs: </p>
<pre><code> 1. Firefox7,ç›´æ¥èµ°æœ¬åœ°ç¼“å­˜æ—¶,.requestStartçš„å€¼å°†ä¸º0. (Firefox8å·²ä¿®å¤æ­¤é—®é¢˜)
</code></pre><h4 id="responseStart"><a href="#responseStart" class="headerlink" title=".responseStart"></a>.responseStart</h4><p>è¿”å›ç”¨æˆ·ä»£ç†ä»æœåŠ¡å™¨ã€ç¼“å­˜ã€æœ¬åœ°èµ„æºä¸­ï¼Œæ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚æ•°æ®çš„æ—¶é—´.</p>
<h4 id="responseEnd"><a href="#responseEnd" class="headerlink" title=".responseEnd"></a>.responseEnd</h4><p>è¿”å›ç”¨æˆ·ä»£ç†æ¥æ”¶åˆ°æœ€åä¸€ä¸ªå­—ç¬¦çš„æ—¶é—´ï¼Œå’Œå½“å‰è¿æ¥è¢«å…³é—­çš„æ—¶é—´ä¸­ï¼Œæ›´æ—©çš„é‚£ä¸ª. åŒæ ·,æ–‡æ¡£å¯èƒ½æ¥è‡ªæœåŠ¡å™¨ã€ç¼“å­˜ã€æˆ–æœ¬åœ°èµ„æº.</p>
<p>è¡¥å……: æ­¤å€¼çš„è¯»å–åº”è¯¥æ˜¯åœ¨æˆ‘ä»¬å¯ä»¥ç¡®ä¿çœŸçš„æ˜¯Responseç»“æŸä»¥å. æ¯”å¦‚window.onload.  å› ä¸ºè€ƒè™‘åˆ°chunkedè¾“å‡ºçš„æƒ…å†µ. é‚£ä¹ˆæˆ‘ä»¬è„šæœ¬æ‰§è¡Œï¼Œå¹¶è·å–è¯¥å€¼æ—¶ï¼Œå“åº”è¿˜æ²¡æœ‰ç»“æŸ. è¿™å°±ä¼šå¯¼è‡´è·å–æ—¶é—´ä¸å‡†ç¡®.</p>
<p>bugs : </p>
<pre><code> 1. IE10 PP2, ä»¥åŠChrome17- ï¼Œèµ°æœ¬åœ°ç¼“å­˜æ—¶.åœ¨æ–‡æ¡£ä¸­é—´çš„è„šæœ¬æ‰§è¡Œæ—¶å»è¯»å–æ­¤å€¼, å°†ä¸º0. IE9æœ¬æ¥æ²¡æœ‰é—®é¢˜,ç»“æœIE10 PP2,åå€’æœ‰äº†é—®é¢˜.


 2. Chrome16-,(Chrome17,å·²ä¿®å¤æ­¤é—®é¢˜.)åœ¨åœ°å€æ è¾“å…¥ç›¸åŒåœ°å€,èµ°æœ¬åœ°ç¼“å­˜æ—¶. responseEndçš„æ—¶é—´ï¼Œå±…ç„¶æ—©äºresponseStartçš„æ—¶é—´. ï¼ˆä¸å¾—ä¸æ‰¿è®¤ï¼Œè¿™ç®€ç›´å°±æ˜¯å¥‡è‘©å•Š!ï¼‰


 3. Chrome17-,ä»é¡µé¢a,åˆ°åœ°å€b,å†é‡å®šå‘åˆ°åœ°å€c, æ­¤æ—¶å¦‚æœåœ°å€cæ˜¯èµ°ç¼“å­˜.åˆ™. ResponseEndçš„æ—¶é—´ï¼Œä¼šé­é‡ResponseStartçš„æ—¶é—´.(å¥½å§,æˆ‘ä»¬æŠŠå¸Œæœ›å¯„äºˆChrome18å¥½äº†.)
</code></pre><p>å®ç°å·®å¼‚:(ç”±äºè‰æ¡ˆä¸­ï¼Œå¹¶æœªæåŠ,å½“æ–‡æ¡£è¢«åˆ†æ®µè¾“å‡ºå.åœ¨ä¸­é—´æ–‡æ¡£æ•°æ®ï¼Œæ¥å—è¿‡ç¨‹ä¸­,responseEndåº”å¦‚ä½•å¤„ç†,å¯¼è‡´æµè§ˆå™¨å®ç°å­˜åœ¨å·®å¼‚.)</p>
<ul>
<li>IE9 - IE10 PP2 , Firefox8-Firefox10,åœ¨ä¸èµ°å­˜åœ¨Responseé˜¶æ®µï¼ˆéèµ°cacheçš„æƒ…å†µä¸‹.ï¼‰.ä»¥æ¥æ”¶ç¬¬ä¸€ä¸ªchunkedåŒ…ç»“æŸçš„æ—¶é—´ä½œä¸º.responseEndçš„æ—¶é—´.(è¿™å°†å¯¼è‡´åç»­çš„ä¸€ç³»åˆ—é—®é¢˜.)<em>
</em>Chrome17-,Firefox7,åˆ™åœ¨åˆ†æ®µæ•°æ®çš„æ¥å—è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šæ›´æ–°.responseEndçš„æ—¶é—´,å…¶å€¼,å§‹ç»ˆä¸º0.*</li>
</ul>
<h4 id="domLoading"><a href="#domLoading" class="headerlink" title=".domLoading"></a>.domLoading</h4><p>è¿”å›ç”¨æˆ·ä»£ç†æŠŠå…¶æ–‡æ¡£çš„ â€œcurrent document readinessâ€ è®¾ç½®ä¸º â€œloadingâ€çš„æ—¶å€™.</p>
<p>(current document readiness å…¶å®å°±æ˜¯document.readyState APIå¯¹åº”çš„çŠ¶æ€.)</p>
<p>å‚è€ƒ:<a href="http://dev.w3.org/html5/spec/dom.html#current-document-readiness" target="_blank" rel="external">http://dev.w3.org/html5/spec/dom.html#current-document-readiness</a></p>
<p>bugs : </p>
<pre><code> 1. IE9. åœ¨åˆ†æ®µè¾“å‡ºæ–‡æ¡£çš„æƒ…å†µä¸‹ï¼Œè¯¥å€¼æ€»æ˜¯è¦æ™šäºæœ€ç»ˆresponseEndçš„å€¼. åŸºäºresponseEndçš„IEå®ç°çš„bug.è¿™ä¹Ÿåˆæƒ…åˆç†.
</code></pre><p>å®ç°å·®å¼‚:<br>     iE9 - IE10 PP2 , å½“æ–‡æ¡£æ˜¯chunkedæ–¹å¼è¾“å‡ºçš„æ—¶å€™.æ€»æ˜¯è¦ç­‰æœ€åä¸€ä¸ªchunkedè¢«æµè§ˆå™¨æ¥æ”¶å,domLoadingæ‰ä¼šæœ‰æœ‰æ•ˆå€¼.  ä¹Ÿå°±æ˜¯è¯´,IEä¸­ç›®å‰çš„çŠ¶å†µæ˜¯.domLoading.æ— è®ºå¦‚ä½•ï¼Œéƒ½è¦æ™šäºresponseEnd.å…¶ä»–æµè§ˆå™¨åˆ™æ— æ­¤é—®é¢˜.  ä½†æ˜¯è¿™ä¸ªé—®é¢˜å¯¼è‡´æˆ‘ä»¬è®¡ç®—IEä¸‹DOM Parseä¸å‡†ç¡®. å³ domInteractive - domLoading ç”šè‡³ä¼šç»å¸¸å¾—åˆ°0. </p>
<h4 id="domInteractive"><a href="#domInteractive" class="headerlink" title=".domInteractive"></a>.domInteractive</h4><p>è¿”å›ç”¨æˆ·ä»£ç†æŠŠå…¶æ–‡æ¡£çš„ â€œcurrent document readinessâ€ è®¾ç½®ä¸º â€œinteractiveâ€çš„æ—¶å€™.</p>
<p>ä»æ ‡å‡†æ¥è¯´,domReadyçš„çŠ¶æ€ä¸ºâ€interactiveâ€æ—¶,æ„å‘³ç€,æ–‡æ¡£è§£æç»“æŸäº†. å› ä¸ºæ ‡å‡†ä¸­æè¿°, DOMæ ‘åˆ›å»ºç»“æŸåç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯æŠŠ â€œcurrent document readinessâ€ è®¾ç½®ä¸ºâ€interactiveâ€</p>
<p>å‚è€ƒ:<a href="http://dev.w3.org/html5/spec/the-end.html#the-end" target="_blank" rel="external">http://dev.w3.org/html5/spec/the-end.html#the-end</a> ä¸­ç¬¬ä¸€æ­¥.</p>
<p>bugs : </p>
<pre><code> 1. IE9,IE10 PP2 . åœ¨åˆ†æ®µè¾“å‡ºæ–‡æ¡£çš„æƒ…å†µä¸‹ï¼Œè¯¥å€¼å¹¶ä¸æ˜¯å…¨éƒ¨æ–‡æ¡£è§£æå®Œæˆåçš„æ—¶é—´,è€Œæ˜¯ç¬¬ä¸€ä¸ªæ•°æ®å—è¢«è§£æå®Œæˆçš„æ—¶é—´,åŸºäºresponseEndçš„IEå®ç°çš„bug.ç»è¿‡å‘åæ¨å®šè¿™ä¹Ÿåˆæƒ…åˆç†.
</code></pre><p>å®ç°å·®å¼‚:(ç”±äºè‰æ¡ˆä¸­ï¼Œå¹¶æœªæåŠ,æ–‡æ¡£è§£æå¹¶æœªç»“æŸæ—¶,å…¶é»˜è®¤å€¼çš„åº”è¯¥æ˜¯å¤šå°‘.å¯¼è‡´æµè§ˆå™¨å®ç°æœ‰å·®å¼‚.)<br>    æŒ‰æˆ‘ä¸ªäººç†è§£ï¼Œå¹¶æœªè§£æç»“æŸï¼Œåº”è¯¥ä¸º0. ä½†æ˜¯IEä¼¼ä¹å¯¹è¿™ä¸ªä¸œè¥¿ç†è§£ä¸å¤ªä¸€æ ·. å…¶ä»–æµè§ˆå™¨ä¼šæ˜¯0. ä½†æ˜¯. IE9-IE10 PP2,åˆ™ä¼šæ¯”è¾ƒæœ‰è¶£.å³ä½¿æ˜¯åˆ†æ®µè¾“å‡º,æˆ‘å–åˆ°çš„å€¼.ä¹Ÿå’Œonloadä»¥åå»åˆ°çš„,domInteractiveçš„å€¼æ˜¯ä¸€è‡´çš„.  å¯¼è‡´è¿™ä¸€ç¥å¥‡ç°è±¡çš„åŸå› æ˜¯,æ­£å¼IEç³»çš„bugæ‰€å¯¼. è¯¥æ—¶é—´æ˜¯é”™è¯¯çš„å¼•ç”¨äº†,DOMè§£æå®Œæˆç¬¬ä¸€ä¸ªæ•°æ®å—çš„æ—¶é—´.è€Œä¸æ˜¯æ•´ä¸ªæ–‡æ¡£çš„. ä½†æ˜¯çº ç»“èµ·æ¥å°±è¦æŒ–æ˜æ›´æ·±å±‚æ¬¡çš„åŸå› äº†. å› ä¸ºè‰æ¡ˆåªè¯´è¯¥å€¼ä½“ç°çš„æ˜¯,ç”¨æˆ·ä»£ç†æŠŠâ€current document readinessâ€ è®¾ç½®ä¸º â€œinteractiveâ€çš„æ—¶é—´.å¦‚æœIEç³»å¤„ç†åˆ†æ®µè¾“å‡ºçš„htmlæ–‡æ¡£ï¼Œå‘æ¥éƒ½æ˜¯è¿™æ ·åšçš„ã€‚é‚£ä¹ˆè¯¥å€¼ä¸å…¶ä»–æµè§ˆå™¨çš„å·®å¼‚ã€‚ä¹Ÿæ˜¯å¯ä»¥ç†è§£çš„. </p>
<h4 id="domContentLoadedEventStart"><a href="#domContentLoadedEventStart" class="headerlink" title=".domContentLoadedEventStart"></a>.domContentLoadedEventStart</h4><p>è¿”å›æ–‡æ¡£å‘ç”Ÿ DOMContentLoadedäº‹ä»¶çš„æ—¶é—´.</p>
<p>å‚è€ƒ:<a href="http://dev.w3.org/html5/spec/the-end.html#the-end" target="_blank" rel="external">http://dev.w3.org/html5/spec/the-end.html#the-end</a>  ä¸­ç¬¬4æ­¥.<br>DOMContentLoadå’Œ DOMInteractive ä¹‹é—´å·®äº†ä¸¤ä¸ªæ­¥éª¤. å…¶ä¸­ä¹‹ä¸€æ˜¯, æ‰€æœ‰open elementså‡ºæ ˆ ï¼Œç„¶åå»çœ‹çœ‹ å¾…è¿è¡Œçš„script listä¸­æ˜¯å¦æœ‰éœ€è¦è¿è¡Œçš„è„šæœ¬,å¦‚æœæœ‰åˆ™æ‰§è¡Œï¼Œä¸€ç›´åˆ°è¿™ä¸ªåˆ—è¡¨ä¸ºç©ºäº†.å†è§¦å‘DOMContentLoad.  éœ€è¦ä¸»çš„æ˜¯è¿™ä¸ªå¾…è¿è¡Œè„šæœ¬åˆ—è¡¨.æœ‰äº›å¯èƒ½åœ¨ä¸åŒæµè§ˆå™¨ä¸­ï¼Œè¢«åŠ å…¥è¿›å»çš„è¡Œä¸ºå¯èƒ½ä¸åŒ. æ¯”å¦‚ document.writeå†™å…¥æ–‡æ¡£æµçš„è„šæœ¬ï¼Œä»¥åŠscript deferr çš„è„šæœ¬.. æ‰€ä»¥æˆ‘ä»¬åº”è¯¥çŸ¥é“deferrçš„è„šæœ¬ä¹Ÿæ˜¯è¦ä»–æ¨è¿ŸdomContentLoadedçš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„æ‰€è°“domReady.(è‡³å°‘html5çš„è§„èŒƒæ˜¯å¦‚æ­¤.)</p>
<h4 id="domContentLoadedEventEnd"><a href="#domContentLoadedEventEnd" class="headerlink" title=".domContentLoadedEventEnd"></a>.domContentLoadedEventEnd</h4><p>æ–‡æ¡£çš„DOMContentLoaded äº‹ä»¶çš„ç»“æŸæ—¶é—´.</p>
<p>è¡¥å……:æ‰€è°“äº‹ä»¶ç»“æŸçš„æ—¶é—´ï¼Œæ˜¯æŒ‡ï¼Œå¦‚æœDOMContentLoadedäº‹ä»¶è¢«å¼€å‘è€…æ³¨å†Œäº†å›è°ƒäº‹ä»¶.é‚£ä¹ˆè¿™ä¸ªæ—¶é—´çš„Endæ—¶é—´å‡å»Startçš„æ—¶é—´.å°±ä¼šæ˜¯è¿™ä¸ªå›è°ƒæ‰§è¡Œçš„å¤§æ¦‚äº‹ä»¶. å½“ç„¶å±…äºéƒ¨åˆ†æµè§ˆå™¨å®ç°å¯èƒ½ä¼šæœ‰2-3msçš„è¯¯å·®. ä½†æ˜¯è¿™ä¸ªæ—¶é—´ï¼ŒåŸºæœ¬å¯ä»¥å¿½ç•¥ä¸è®¡. ç±»ä¼¼çš„æƒ…å†µè¿˜æœ‰åé¢çš„.loadEventStart,End. å³ window.onload æ‰€æœ‰å›è°ƒæ‰€æ¶ˆè€—çš„æ—¶é—´.</p>
<h4 id="domComplete"><a href="#domComplete" class="headerlink" title=".domComplete"></a>.domComplete</h4><p>è¿”å›ç”¨æˆ·ä»£ç†æŠŠå…¶æ–‡æ¡£çš„ â€œcurrent document readinessâ€ è®¾ç½®ä¸º â€œcompleteâ€çš„æ—¶å€™.</p>
<p><strong><em>PS:å¦‚æœ current document readiness çš„æŸä¸ªçŠ¶æ€è¢«å¤šæ¬¡è§¦å‘ï¼Œé‚£ä¹ˆå¯¹åº”çš„  domLoading, domInteractive, domContentLoadedEventStart, domContentLoadedEventEnd and domCompleteè¿™äº›å¯¹åº”çš„APIè¿”å›çš„æ—¶é—´,å°±åº”è¯¥æ˜¯è¿™ä¸ªçŠ¶æ€ç¬¬ä¸€æ¬¡è§¦å‘çš„æ—¶é—´.</em></strong></p>
<h4 id="loadEventStart"><a href="#loadEventStart" class="headerlink" title=".loadEventStart"></a>.loadEventStart</h4><p>æ–‡æ¡£è§¦å‘loadäº‹ä»¶çš„æ—¶é—´. å¦‚æœloadäº‹ä»¶æ²¡æœ‰è§¦å‘,é‚£ä¹ˆè¯¥æ¥å£å°±è¿”å›0.</p>
<p>ç¼“å­˜ï¼š<br>1ã€æµè§ˆå™¨ç¼“å­˜<br>2ã€æ“ä½œç³»ç»Ÿç¼“å­˜<br>3ã€è·¯ç”±å™¨ç¼“å­˜<br>4ã€è¿è¥å•†ç¼“å­˜</p>
<p>åŸæ–‡åœ°å€ï¼šğŸ‘‰ <a href="https://github.com/ChenChenJoke/JokerWebFont/blob/master/Performance/README.md" target="_blank" rel="external">https://github.com/ChenChenJoke/JokerWebFont/blob/master/Performance/README.md</a> æ„Ÿè°¢ã€‚</p>
<h2 id="å…³äº"><a href="#å…³äº" class="headerlink" title="å…³äº"></a>å…³äº</h2><p>GitHubï¼šğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Webæ€§èƒ½ä¼˜åŒ–ï¼šPerformanceï¼Œæ•°æ®æœé›†æ–¹æ³•&quot;&gt;&lt;a href=&quot;#Webæ€§èƒ½ä¼˜åŒ–ï¼šPerformanceï¼Œæ•°æ®æœé›†æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;Webæ€§èƒ½ä¼˜åŒ–ï¼šPerformanceï¼Œæ•°æ®æœé›†æ–¹æ³•&quot;&gt;&lt;/a&gt;Webæ€§èƒ½ä¼˜åŒ–ï¼š
    
    </summary>
    
    
      <category term="Chrome" scheme="https://microzz.com/tags/Chrome/"/>
    
      <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://microzz.com/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
      <category term="Web" scheme="https://microzz.com/tags/Web/"/>
    
  </entry>
  
  <entry>
    <title>Vue.js+Socket.io+Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤</title>
    <link href="https://microzz.com/2017/05/10/vuechat/"/>
    <id>https://microzz.com/2017/05/10/vuechat/</id>
    <published>2017-05-10T13:22:03.000Z</published>
    <updated>2017-05-10T13:24:17.300Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue-js-Socket-io-Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤"><a href="#Vue-js-Socket-io-Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤" class="headerlink" title="Vue.js+Socket.io+Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤"></a>Vue.js+Socket.io+Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤</h1><p>Vue.jså…¨å®¶æ¡¶+Socket.io+Express/Koa2 æ‰“é€ çš„ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤ã€‚<br>å·²ç»å¼€æºå•¦ï¼ä¸ºäº†æ–¹ä¾¿å¤§å®¶å­¦ä¹ ï¼Œæ™ºèƒ½æœºå™¨äººã€IPå®šä½æ¥å£ä¹Ÿå¼€æ”¾äº†ï¼æ¥å£è¯·åœ¨æºç ä¸­æŸ¥çœ‹ğŸ˜„</p>
<blockquote>
<p>&nbsp;&nbsp;&nbsp;QQç¾¤é‡Œé¢çš„æ™ºèƒ½æœºå™¨äººå¾ˆç«ï¼Œäºæ˜¯ç”¨Vue.js+Socket.io+Koa2æ‰“é€ äº†ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤ï¼Œå®ç°äº†IPå®šä½ã€åœ¨çº¿ç¾¤èŠï¼ŒåŠ å…¥äº†Emojiè¡¨æƒ…ğŸ˜„ï¼Œä»¥åŠæ¥å…¥äº†æ™ºèƒ½æœºå™¨äººğŸ˜</p>
</blockquote>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¯è¯´æœ€è¿‘å‰ç«¯æŠ€æœ¯åœˆä¹Ÿæœ‰æ´¾ç³»ä¹‹äº‰äº†ï¼Œæ˜¯å¥½äº‹è¿˜æ˜¯åäº‹ï¼Ÿèåœé’èœå„æœ‰æ‰€çˆ±ï¼Œæœ¬é¡¹ç›®é‡‡ç”¨çš„æ˜¯Vue.jsåšå‰ç«¯é¡µé¢å±•ç¤ºï¼Œå¤§å®¶å®Œå…¨å¯ä»¥æ¢æˆè‡ªå·±åˆ«çš„å–œæ¬¢çš„ï¼ŒReactã€Angularç­‰ç­‰ï¼Œæ¯ä¸ªæ¡†æ¶éƒ½æœ‰å¯å–çš„åœ°æ–¹ï¼Œè¿™é‡Œä¸å¤šè¯´ğŸ˜‚ä¸‹é¢æ‰¯åˆ°æ­£é¢˜ä¸ŠğŸ‘‡</p>
<h2 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h2><p>åœ¨çº¿é¢„è§ˆåœ°å€ï¼šğŸ‘‰ <a href="https://microzz.com/vue-chat/">https://microzz.com/vue-chat/</a></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://dn-mhke0kuv.qbox.me/24330ba3e01436df1eb8.png" alt="Vue.js+Socket.io" title="">
                </div>
                <div class="image-caption">Vue.js+Socket.io</div>
            </figure>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://dn-mhke0kuv.qbox.me/a5abbff92a442fa2d356.png" alt="Vue.js+Socket.io" title="">
                </div>
                <div class="image-caption">Vue.js+Socket.io</div>
            </figure>
<h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><p> ç°åœ¨å·²ç»å¼€æºï¼š ğŸ‘‰<a href="https://github.com/microzz/vue-chat" target="_blank" rel="external">https://github.com/microzz/vue-chat</a><br> æ¬¢è¿starå’Œæå‡ºå®è´µæ„è§ğŸ˜„</p>
<h2 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="headerlink" title="æŠ€æœ¯æ ˆ"></a>æŠ€æœ¯æ ˆ</h2><ul>
<li><strong>Vue2.0</strong>ï¼šå‰ç«¯é¡µé¢å±•ç¤ºã€‚</li>
<li><strong>Socket.io</strong>ï¼šå®ç°å®æ—¶é€šä¿¡</li>
<li><strong>Vuex</strong>ï¼šVuexï¼Œå®ç°ä¸åŒç»„ä»¶é—´çš„çŠ¶æ€å…±äº«</li>
<li><strong>vue-router</strong>ï¼šé¡µé¢è·¯ç”±åˆ‡æ¢</li>
<li><strong>axios</strong>ï¼šä¸€ä¸ªåŸºäº <code>Promise</code> çš„ HTTP åº“ï¼Œå‘åç«¯å‘èµ·è¯·æ±‚ã€‚</li>
<li><strong>Express</strong>ã€<strong>Koa2</strong>ï¼šå› ä¸ºvue-cliç”Ÿæˆçš„é¡¹ç›®æ˜¯åŸºäº<strong>express</strong>çš„ï¼Œæ‰€ä»¥åœ¨å¼€å‘é˜¶æ®µæˆ‘ä½¿ç”¨çš„æ˜¯å®ƒï¼Œä½†æ˜¯çœŸæ­£ä¸Šçº¿ç”Ÿäº§ç¯å¢ƒæˆ‘æ¢æˆäº†<strong>Koa2</strong>ã€‚</li>
<li><strong>Moment.js</strong>ï¼šä¸€ä¸ªæ—¶é—´å¤„ç†çš„åº“ï¼Œæ–¹ä¾¿å¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–æˆéœ€è¦çš„æ ¼å¼ã€‚</li>
<li><strong>ES6</strong>ã€<strong>ES7</strong>ï¼šé‡‡ç”¨ES6è¯­æ³•ï¼Œè¿™æ˜¯ä»¥åçš„è¶‹åŠ¿ã€‚ç®­å¤´å‡½æ•°ã€Promiseç­‰ç­‰è¯­æ³•å¾ˆå¥½ç”¨ã€‚</li>
<li><strong>localStorage</strong>ï¼šä¿å­˜ç”¨æˆ·ä¿¡æ¯ä»¥åŠèŠå¤©è®°å½•ã€‚</li>
<li><strong>Webpack</strong>ï¼švue-cliè‡ªå¸¦Webpackï¼Œä½†æ˜¯éœ€è¦è‡ªå·±æ”¹é€ ä¸€ä¸‹ï¼Œæ¯”å¦‚è¦å¯¹éœ€è¦å®‰è£…sassç›¸å…³loaderï¼Œvue-cliå·²ç»é…ç½®å¥½äº†webpackï¼Œä½ åªéœ€è¦å®‰è£…ä¾èµ–å°±å¯ä»¥ï¼Œä½¿ç”¨çš„æ—¶å€™åªéœ€è¦<code>&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;</code>ã€‚</li>
<li><strong>SASS</strong>(<strong>SCSS</strong>)ï¼šç”¨SCSSåšCSSé¢„å¤„ç†è¯­è¨€ï¼Œæœ‰äº›åœ°æ–¹å¾ˆæ–¹ä¾¿ï¼Œä¸ªäººå¾ˆå–œæ¬¢ç”¨ã€‚(è¯¦çœ‹ğŸ‘‰<a href="https://microzz.com/2017/03/18/sass/">SASSç”¨æ³•æŒ‡å—</a>)</li>
<li><strong>flex</strong>ï¼šflexå¼¹æ€§å¸ƒå±€ï¼Œ<strong>ç®€å•</strong>é€‚é…æ‰‹æœºã€PCç«¯ã€‚</li>
<li><strong>CSS3</strong>ï¼šCSS3è¿‡æ¸¡åŠ¨ç”»åŠæ ·å¼ã€‚</li>
</ul>
<h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><h3 id="Socket-io"><a href="#Socket-io" class="headerlink" title="Socket.io"></a>Socket.io</h3><p>é€šè¿‡Express/Koaåœ¨æœåŠ¡ç«¯å¯ä»¥è¿™æ ·åš:</p>
<pre><code class="javascript">// Server (app.js)

var app = require(&#39;express&#39;)();
var server = require(&#39;http&#39;).Server(app);
var io = require(&#39;socket.io&#39;)(server);

server.listen(80);

app.get(&#39;/&#39;, function (req, res) {
  res.sendfile(__dirname + &#39;/index.html&#39;);
});

io.on(&#39;connection&#39;, function (socket) {
  socket.emit(&#39;news&#39;, { hello: &#39;world&#39; });
  socket.on(&#39;my other event&#39;, function (data) {
    console.log(data);
  });
});
</code></pre>
<p>å®¢æˆ·ç«¯ä»£ç </p>
<pre><code class="javascript">// Client (index.html)

&lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  var socket = io.connect(&#39;http://localhost&#39;);
  socket.on(&#39;news&#39;, function (data) {
    console.log(data);
    socket.emit(&#39;my other event&#39;, { my: &#39;data&#39; });
  });
&lt;/script&gt;
</code></pre>
<p>ä¸ç®¡æ˜¯æœåŠ¡å™¨è¿˜æ˜¯å®¢æˆ·ç«¯éƒ½æœ‰ <code>emit</code> å’Œ <code>on</code> è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå¯ä»¥è¯´ socket.io çš„æ ¸å¿ƒå°±æ˜¯è¿™ä¸¤ä¸ªå‡½æ•°äº†ï¼Œé€šè¿‡ <code>emit</code> å’Œ <code>on</code> å¯ä»¥è½»æ¾åœ°å®ç°æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„åŒå‘é€šä¿¡ã€‚</p>
<p><code>emit</code> ï¼šç”¨æ¥å‘å°„ä¸€ä¸ªäº‹ä»¶æˆ–è€…è¯´è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºäº‹ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦å‘é€çš„æ•°æ®ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼ˆä¸€èˆ¬çœç•¥ï¼Œå¦‚éœ€å¯¹æ–¹æ¥å—åˆ°ä¿¡æ¯åç«‹å³å¾—åˆ°ç¡®è®¤æ—¶ï¼Œåˆ™éœ€è¦ç”¨åˆ°å›è°ƒå‡½æ•°ï¼‰ã€‚<br><code>on</code> ï¼šç”¨æ¥ç›‘å¬ä¸€ä¸ª emit å‘å°„çš„äº‹ä»¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦ç›‘å¬çš„äº‹ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªåŒ¿åå‡½æ•°ç”¨æ¥æ¥æ”¶å¯¹æ–¹å‘æ¥çš„æ•°æ®ï¼Œè¯¥åŒ¿åå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¥æ”¶çš„æ•°æ®ï¼Œè‹¥æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ä¸ºè¦è¿”å›çš„å‡½æ•°ã€‚<br>socket.io æä¾›äº†ä¸‰ç§é»˜è®¤çš„äº‹ä»¶ï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½æœ‰ï¼‰ï¼š<code>connect</code> ã€<code>message</code> ã€<code>disconnect</code> ã€‚å½“ä¸å¯¹æ–¹å»ºç«‹è¿æ¥åè‡ªåŠ¨è§¦å‘ <code>connect</code> äº‹ä»¶ï¼Œå½“æ”¶åˆ°å¯¹æ–¹å‘æ¥çš„æ•°æ®åè§¦å‘ <code>message</code> äº‹ä»¶ï¼ˆé€šå¸¸ä¸º <code>socket.send()</code> è§¦å‘ï¼‰ï¼Œå½“å¯¹æ–¹å…³é—­è¿æ¥åè§¦å‘ <code>disconnect</code> äº‹ä»¶ã€‚</p>
<p>æ­¤å¤–ï¼Œsocket.io è¿˜æ”¯æŒè‡ªå®šä¹‰äº‹ä»¶ï¼Œæ¯•ç«Ÿä»¥ä¸Šä¸‰ç§äº‹ä»¶åº”ç”¨èŒƒå›´æœ‰é™ï¼Œæ­£æ˜¯é€šè¿‡è¿™äº›è‡ªå®šä¹‰çš„äº‹ä»¶æ‰å®ç°äº†ä¸°å¯Œå¤šå½©çš„é€šä¿¡ã€‚</p>
<p>æœ€åï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æœåŠ¡å™¨ç«¯åŒºåˆ†ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š</p>
<p><code>socket.emit()</code> ï¼šå‘å»ºç«‹è¯¥è¿æ¥çš„å®¢æˆ·ç«¯å¹¿æ’­<br><code>socket.broadcast.emit()</code> ï¼šå‘é™¤å»å»ºç«‹è¯¥è¿æ¥çš„å®¢æˆ·ç«¯çš„æ‰€æœ‰å®¢æˆ·ç«¯å¹¿æ’­<br><code>io.sockets.emit()</code> ï¼šå‘æ‰€æœ‰å®¢æˆ·ç«¯å¹¿æ’­ï¼Œç­‰åŒäºä¸Šé¢ä¸¤ä¸ªçš„å’Œ</p>
<h2 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h2><p>åœ¨Vueçš„æ–¹é¢å°±æ¯”è¾ƒå¸¸è§„äº†ï¼ŒVueå…¨å®¶æ¡¶ï¼šVue2.0+Vuex+axios+vue-router,æˆ‘GitHubçš„æœ‰å‡ ä¸ªå¼€æºé¡¹ç›®å¯ä»¥å‚è€ƒğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol>
<li><p>ç»„ä»¶çŠ¶æ€å¤šäº†ç”¨Vuexç®¡ç†å¾ˆæ–¹ä¾¿ï¼Œå¼•ç”¨ Redux çš„ä½œè€… Dan Abramov çš„è¯è¯´å°±æ˜¯ï¼š</p>
<blockquote>
<p>Flux æ¶æ„å°±åƒçœ¼é•œï¼šæ‚¨è‡ªä¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å®ƒã€‚</p>
</blockquote>
</li>
<li><p>äº‹å…ˆä¸€å®šè¦å…ˆæƒ³å¥½æ•´ä¸ªé¡µé¢ç»„æˆï¼Œæ€æ ·å»åˆ†ç»„ä»¶å¼€å‘ï¼Œè¿™æ ·åœ¨å¼€å‘é˜¶æ®µä¼šäº‹åŠåŠŸå€ã€‚</p>
</li>
<li>Moment.jsåœ¨Vueä¸­ç”¨ES6çš„æ–¹å¼å¼•å…¥ä¼šæœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•åœ¨main.jså°è¯•è¿™æ ·<code>import moment from &#39;moment&#39;</code> <code>Vue.prototype.moment = moment;</code>ç»™Vueçš„åŸå‹ä¸Šæ·»åŠ momentï¼Œè¿™æ ·å°±å¯ä»¥åœ¨Vueçš„å®ä¾‹ä¸­éšæ„ä½¿ç”¨å®ƒäº†ã€‚</li>
<li>getæ–¹å¼é€šè¿‡URLä¼ å‚æœ€å¥½ä½¿ç”¨<code>encodeURI</code>å¯¹å‚æ•°è¿›è¡Œç¼–ç </li>
<li>ä¸€å®šè¦å¤„ç†å¥½é‚£äº›å¼‚æ­¥æ“ä½œï¼Œå¦åˆ™ä¼šå¸¦æ¥å„ç§é—®é¢˜ã€‚å¼€å‘é˜¶æ®µä½¿ç”¨çš„æ˜¯<code>Promise</code>ï¼Œä¸Šçº¿æ—¶å€™ä½¿ç”¨äº†ES7çš„<code>Async</code>+<code>Promise</code>çš„ç»„åˆï¼Œè®©å¼‚æ­¥æ“ä½œæ›´åŠ åˆç†ã€‚</li>
</ol>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>å…³äºæˆ‘ï¼šğŸ‘‰<a href="https://microzz.com/about/">https://microzz.com/about/</a></p>
<p>GitHubï¼šğŸ‘‰ <a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a></p>
<p>E-mail: ğŸ‘‰ <a href="mailto:zhaohui@microzz.com">zhaohui@microzz.com</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Vue-js-Socket-io-Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤&quot;&gt;&lt;a href=&quot;#Vue-js-Socket-io-Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤&quot; class=&quot;headerlink&quot; title=&quot;Vue.js+Socket.io+Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤&quot;&gt;
    
    </summary>
    
    
      <category term="Vue.js" scheme="https://microzz.com/tags/Vue-js/"/>
    
      <category term="Koa2" scheme="https://microzz.com/tags/Koa2/"/>
    
      <category term="Socket.io" scheme="https://microzz.com/tags/Socket-io/"/>
    
      <category term="Vuex" scheme="https://microzz.com/tags/Vuex/"/>
    
      <category term="Express" scheme="https://microzz.com/tags/Express/"/>
    
  </entry>
  
  <entry>
    <title>Gitè¿œç¨‹æ“ä½œè¯¦è§£</title>
    <link href="https://microzz.com/2017/05/06/git/"/>
    <id>https://microzz.com/2017/05/06/git/</id>
    <published>2017-05-06T12:41:07.000Z</published>
    <updated>2017-05-06T13:20:45.813Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Gitè¿œç¨‹æ“ä½œè¯¦è§£"><a href="#Gitè¿œç¨‹æ“ä½œè¯¦è§£" class="headerlink" title="Gitè¿œç¨‹æ“ä½œè¯¦è§£"></a>Gitè¿œç¨‹æ“ä½œè¯¦è§£</h1><p>ä½œè€…ï¼š é˜®ä¸€å³°</p>
<p>Gitæ˜¯ç›®å‰æœ€æµè¡Œçš„ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œå­¦ä¼šGitå‡ ä¹æˆäº†å¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚<br>Gitæœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯è¿œç¨‹æ“ä½œéå¸¸ç®€ä¾¿ã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»5ä¸ªGitå‘½ä»¤ï¼Œå®ƒä»¬çš„æ¦‚å¿µå’Œç”¨æ³•ï¼Œç†è§£äº†è¿™äº›å†…å®¹ï¼Œä½ å°±ä¼šå®Œå…¨æŒæ¡Gitè¿œç¨‹æ“ä½œã€‚<br><code>git clone</code>ã€<code>git remote</code>ã€<code>git fetch</code>ã€<code>git pull</code>ã€<code>git push</code></p>
<p>æœ¬æ–‡é’ˆå¯¹åˆçº§ç”¨æˆ·ï¼Œä»æœ€ç®€å•çš„è®²èµ·ï¼Œä½†æ˜¯éœ€è¦è¯»è€…å¯¹Gitçš„åŸºæœ¬ç”¨æ³•æœ‰æ‰€äº†è§£ã€‚åŒæ—¶ï¼Œæœ¬æ–‡è¦†ç›–äº†ä¸Šé¢5ä¸ªå‘½ä»¤çš„å‡ ä¹æ‰€æœ‰çš„å¸¸ç”¨ç”¨æ³•ï¼Œæ‰€ä»¥å¯¹äºç†Ÿç»ƒç”¨æˆ·ä¹Ÿæœ‰å‚è€ƒä»·å€¼ã€‚<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170506_git/git.jpg" alt="Git" title="">
                </div>
                <div class="image-caption">Git</div>
            </figure></p>
<h2 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h2><p>è¿œç¨‹æ“ä½œçš„ç¬¬ä¸€æ­¥ï¼Œé€šå¸¸æ˜¯ä»è¿œç¨‹ä¸»æœºå…‹éš†ä¸€ä¸ªç‰ˆæœ¬åº“ï¼Œè¿™æ—¶å°±è¦ç”¨åˆ°git cloneå‘½ä»¤ã€‚</p>
<p><code>$ git clone &lt;ç‰ˆæœ¬åº“çš„ç½‘å€&gt;</code></p>
<p>æ¯”å¦‚ï¼Œå…‹éš†jQueryçš„ç‰ˆæœ¬åº“ã€‚</p>
<p><code>$ git clone https://github.com/jquery/jquery.git</code></p>
<p>è¯¥å‘½ä»¤ä¼šåœ¨æœ¬åœ°ä¸»æœºç”Ÿæˆä¸€ä¸ªç›®å½•ï¼Œä¸è¿œç¨‹ä¸»æœºçš„ç‰ˆæœ¬åº“åŒåã€‚å¦‚æœè¦æŒ‡å®šä¸åŒçš„ç›®å½•åï¼Œå¯ä»¥å°†ç›®å½•åä½œä¸º<code>git clone</code>å‘½ä»¤çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚</p>
<p><code>$ git clone &lt;ç‰ˆæœ¬åº“çš„ç½‘å€&gt; &lt;æœ¬åœ°ç›®å½•å&gt;</code><br><code>git clone</code>æ”¯æŒå¤šç§åè®®ï¼Œé™¤äº†HTTP(s)ä»¥å¤–ï¼Œè¿˜æ”¯æŒSSHã€Gitã€æœ¬åœ°æ–‡ä»¶åè®®ç­‰ï¼Œä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ã€‚</p>
<pre><code class="bash">$ git clone http[s]://example.com/path/to/repo.git/
$ git clone ssh://example.com/path/to/repo.git/
$ git clone git://example.com/path/to/repo.git/
$ git clone /opt/git/project.git 
$ git clone file:///opt/git/project.git
$ git clone ftp[s]://example.com/path/to/repo.git/
$ git clone rsync://example.com/path/to/repo.git/
</code></pre>
<p>SSHåè®®è¿˜æœ‰å¦ä¸€ç§å†™æ³•ã€‚</p>
<pre><code class="bash">$ git clone [user@]example.com:path/to/repo.git/
</code></pre>
<p>é€šå¸¸æ¥è¯´ï¼ŒGitåè®®ä¸‹è½½é€Ÿåº¦æœ€å¿«ï¼ŒSSHåè®®ç”¨äºéœ€è¦ç”¨æˆ·è®¤è¯çš„åœºåˆã€‚å„ç§åè®®ä¼˜åŠ£çš„è¯¦ç»†è®¨è®ºè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</p>
<h2 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h2><p>ä¸ºäº†ä¾¿äºç®¡ç†ï¼ŒGitè¦æ±‚æ¯ä¸ªè¿œç¨‹ä¸»æœºéƒ½å¿…é¡»æŒ‡å®šä¸€ä¸ªä¸»æœºåã€‚<code>git remote</code>å‘½ä»¤å°±ç”¨äºç®¡ç†ä¸»æœºåã€‚<br>ä¸å¸¦é€‰é¡¹çš„æ—¶å€™ï¼Œ<code>git remote</code>å‘½ä»¤åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä¸»æœºã€‚</p>
<pre><code class="bash">$ git remote
origin
</code></pre>
<p>ä½¿ç”¨-vé€‰é¡¹ï¼Œå¯ä»¥å‚çœ‹è¿œç¨‹ä¸»æœºçš„ç½‘å€ã€‚</p>
<pre><code class="bash">$ git remote -v
origin  git@github.com:jquery/jquery.git (fetch)
origin  git@github.com:jquery/jquery.git (push)
</code></pre>
<p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå½“å‰åªæœ‰ä¸€å°è¿œç¨‹ä¸»æœºï¼Œå«åšoriginï¼Œä»¥åŠå®ƒçš„ç½‘å€ã€‚<br>å…‹éš†ç‰ˆæœ¬åº“çš„æ—¶å€™ï¼Œæ‰€ä½¿ç”¨çš„è¿œç¨‹ä¸»æœºè‡ªåŠ¨è¢«Gitå‘½åä¸ºoriginã€‚å¦‚æœæƒ³ç”¨å…¶ä»–çš„ä¸»æœºåï¼Œéœ€è¦ç”¨<code>git clone</code>å‘½ä»¤çš„-oé€‰é¡¹æŒ‡å®šã€‚</p>
<pre><code class="bash">$ git clone -o jQuery https://github.com/jquery/jquery.git
$ git remote
jQuery
</code></pre>
<p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå…‹éš†çš„æ—¶å€™ï¼ŒæŒ‡å®šè¿œç¨‹ä¸»æœºå«åšjQueryã€‚<br><code>git remote show</code>å‘½ä»¤åŠ ä¸Šä¸»æœºåï¼Œå¯ä»¥æŸ¥çœ‹è¯¥ä¸»æœºçš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<pre><code class="bash">$ git remote show &lt;ä¸»æœºå&gt;
git remote addå‘½ä»¤ç”¨äºæ·»åŠ è¿œç¨‹ä¸»æœºã€‚

$ git remote add &lt;ä¸»æœºå&gt; &lt;ç½‘å€&gt;
git remote rmå‘½ä»¤ç”¨äºåˆ é™¤è¿œç¨‹ä¸»æœºã€‚

$ git remote rm &lt;ä¸»æœºå&gt;
git remote renameå‘½ä»¤ç”¨äºè¿œç¨‹ä¸»æœºçš„æ”¹åã€‚

$ git remote rename &lt;åŸä¸»æœºå&gt; &lt;æ–°ä¸»æœºå&gt;
</code></pre>
<h2 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h2><p>ä¸€æ—¦è¿œç¨‹ä¸»æœºçš„ç‰ˆæœ¬åº“æœ‰äº†æ›´æ–°ï¼ˆGitæœ¯è¯­å«åšcommitï¼‰ï¼Œéœ€è¦å°†è¿™äº›æ›´æ–°å–å›æœ¬åœ°ï¼Œè¿™æ—¶å°±è¦ç”¨åˆ°<code>git fetch</code>å‘½ä»¤ã€‚</p>
<p><code>$ git fetch &lt;è¿œç¨‹ä¸»æœºå&gt;</code><br>ä¸Šé¢å‘½ä»¤å°†æŸä¸ªè¿œç¨‹ä¸»æœºçš„æ›´æ–°ï¼Œå…¨éƒ¨å–å›æœ¬åœ°ã€‚<br>git fetchå‘½ä»¤é€šå¸¸ç”¨æ¥æŸ¥çœ‹å…¶ä»–äººçš„è¿›ç¨‹ï¼Œå› ä¸ºå®ƒå–å›çš„ä»£ç å¯¹ä½ æœ¬åœ°çš„å¼€å‘ä»£ç æ²¡æœ‰å½±å“ã€‚<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>git fetch</code>å–å›æ‰€æœ‰åˆ†æ”¯ï¼ˆbranchï¼‰çš„æ›´æ–°ã€‚å¦‚æœåªæƒ³å–å›ç‰¹å®šåˆ†æ”¯çš„æ›´æ–°ï¼Œå¯ä»¥æŒ‡å®šåˆ†æ”¯åã€‚</p>
<p><code>$ git fetch &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;åˆ†æ”¯å&gt;</code><br>æ¯”å¦‚ï¼Œå–å›originä¸»æœºçš„masteråˆ†æ”¯ã€‚</p>
<p><code>$ git fetch origin master</code><br>æ‰€å–å›çš„æ›´æ–°ï¼Œåœ¨æœ¬åœ°ä¸»æœºä¸Šè¦ç”¨â€è¿œç¨‹ä¸»æœºå/åˆ†æ”¯åâ€çš„å½¢å¼è¯»å–ã€‚æ¯”å¦‚originä¸»æœºçš„masterï¼Œå°±è¦ç”¨origin/masterè¯»å–ã€‚<br>git branchå‘½ä»¤çš„-ré€‰é¡¹ï¼Œå¯ä»¥ç”¨æ¥æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ï¼Œ-aé€‰é¡¹æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ã€‚</p>
<pre><code class="bash">$ git branch -r
origin/master

$ git branch -a
* master
  remotes/origin/master
</code></pre>
<p>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œæœ¬åœ°ä¸»æœºçš„å½“å‰åˆ†æ”¯æ˜¯masterï¼Œè¿œç¨‹åˆ†æ”¯æ˜¯origin/masterã€‚<br>å–å›è¿œç¨‹ä¸»æœºçš„æ›´æ–°ä»¥åï¼Œå¯ä»¥åœ¨å®ƒçš„åŸºç¡€ä¸Šï¼Œä½¿ç”¨git checkoutå‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ã€‚</p>
<p><code>$ git checkout -b newBrach origin/master</code><br>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œåœ¨origin/masterçš„åŸºç¡€ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ã€‚<br>æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨git mergeå‘½ä»¤æˆ–è€…git rebaseå‘½ä»¤ï¼Œåœ¨æœ¬åœ°åˆ†æ”¯ä¸Šåˆå¹¶è¿œç¨‹åˆ†æ”¯ã€‚</p>
<p><code>$ git merge origin/master</code><br> æˆ–è€…<br><code>$ git rebase origin/master</code><br>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºåœ¨å½“å‰åˆ†æ”¯ä¸Šï¼Œåˆå¹¶origin/masterã€‚</p>
<h2 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h2><p><code>git pull</code>å‘½ä»¤çš„ä½œç”¨æ˜¯ï¼Œå–å›è¿œç¨‹ä¸»æœºæŸä¸ªåˆ†æ”¯çš„æ›´æ–°ï¼Œå†ä¸æœ¬åœ°çš„æŒ‡å®šåˆ†æ”¯åˆå¹¶ã€‚å®ƒçš„å®Œæ•´æ ¼å¼ç¨ç¨æœ‰ç‚¹å¤æ‚ã€‚</p>
<p><code>$ git pull &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt;</code><br>æ¯”å¦‚ï¼Œå–å›originä¸»æœºçš„nextåˆ†æ”¯ï¼Œä¸æœ¬åœ°çš„masteråˆ†æ”¯åˆå¹¶ï¼Œéœ€è¦å†™æˆä¸‹é¢è¿™æ ·ã€‚</p>
<p><code>$ git pull origin next:master</code><br>å¦‚æœè¿œç¨‹åˆ†æ”¯æ˜¯ä¸å½“å‰åˆ†æ”¯åˆå¹¶ï¼Œåˆ™å†’å·åé¢çš„éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚</p>
<p><code>$ git pull origin next</code><br>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå–å›origin/nextåˆ†æ”¯ï¼Œå†ä¸å½“å‰åˆ†æ”¯åˆå¹¶ã€‚å®è´¨ä¸Šï¼Œè¿™ç­‰åŒäºå…ˆåšgit fetchï¼Œå†åšgit mergeã€‚</p>
<p><code>$ git fetch origin</code><br><code>$ git merge origin/next</code></p>
<p>åœ¨æŸäº›åœºåˆï¼ŒGitä¼šè‡ªåŠ¨åœ¨æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¹‹é—´ï¼Œå»ºç«‹ä¸€ç§è¿½è¸ªå…³ç³»ï¼ˆtrackingï¼‰ã€‚æ¯”å¦‚ï¼Œåœ¨<code>git clone</code>çš„æ—¶å€™ï¼Œæ‰€æœ‰æœ¬åœ°åˆ†æ”¯é»˜è®¤ä¸è¿œç¨‹ä¸»æœºçš„åŒååˆ†æ”¯ï¼Œå»ºç«‹è¿½è¸ªå…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬åœ°çš„masteråˆ†æ”¯è‡ªåŠ¨â€è¿½è¸ªâ€origin/masteråˆ†æ”¯ã€‚<br>Gitä¹Ÿå…è®¸æ‰‹åŠ¨å»ºç«‹è¿½è¸ªå…³ç³»ã€‚</p>
<p><code>git branch --set-upstream master origin/next</code><br>ä¸Šé¢å‘½ä»¤æŒ‡å®šmasteråˆ†æ”¯è¿½è¸ªorigin/nextåˆ†æ”¯ã€‚<br>å¦‚æœå½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œgit pullå°±å¯ä»¥çœç•¥è¿œç¨‹åˆ†æ”¯åã€‚</p>
<p><code>$ git pull origin</code><br>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œæœ¬åœ°çš„å½“å‰åˆ†æ”¯è‡ªåŠ¨ä¸å¯¹åº”çš„originä¸»æœºâ€è¿½è¸ªåˆ†æ”¯â€ï¼ˆremote-tracking branchï¼‰è¿›è¡Œåˆå¹¶ã€‚<br>å¦‚æœå½“å‰åˆ†æ”¯åªæœ‰ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯ï¼Œè¿è¿œç¨‹ä¸»æœºåéƒ½å¯ä»¥çœç•¥ã€‚</p>
<p><code>$ git pull</code><br>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå½“å‰åˆ†æ”¯è‡ªåŠ¨ä¸å”¯ä¸€ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯è¿›è¡Œåˆå¹¶ã€‚<br>å¦‚æœåˆå¹¶éœ€è¦é‡‡ç”¨rebaseæ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨â€“rebaseé€‰é¡¹ã€‚</p>
<p><code>$ git pull --rebase &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt;</code>å¦‚æœè¿œç¨‹ä¸»æœºåˆ é™¤äº†æŸä¸ªåˆ†æ”¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>git pull</code> ä¸ä¼šåœ¨æ‹‰å–è¿œç¨‹åˆ†æ”¯çš„æ—¶å€™ï¼Œåˆ é™¤å¯¹åº”çš„æœ¬åœ°åˆ†æ”¯ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢ï¼Œç”±äºå…¶ä»–äººæ“ä½œäº†è¿œç¨‹ä¸»æœºï¼Œå¯¼è‡´<code>git pull</code>ä¸çŸ¥ä¸è§‰åˆ é™¤äº†æœ¬åœ°åˆ†æ”¯ã€‚<br>ä½†æ˜¯ï¼Œä½ å¯ä»¥æ”¹å˜è¿™ä¸ªè¡Œä¸ºï¼ŒåŠ ä¸Šå‚æ•° -p å°±ä¼šåœ¨æœ¬åœ°åˆ é™¤è¿œç¨‹å·²ç»åˆ é™¤çš„åˆ†æ”¯ã€‚</p>
<p><code>$ git pull -p</code><br> ç­‰åŒäºä¸‹é¢çš„å‘½ä»¤<br><code>$ git fetch --prune origin</code><br><code>$ git fetch -p</code></p>
<h2 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h2><p><code>git push</code>å‘½ä»¤ç”¨äºå°†æœ¬åœ°åˆ†æ”¯çš„æ›´æ–°ï¼Œæ¨é€åˆ°è¿œç¨‹ä¸»æœºã€‚å®ƒçš„æ ¼å¼ä¸<code>git pull</code>å‘½ä»¤ç›¸ä»¿ã€‚</p>
<p><code>$ git push &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt;</code><br>æ³¨æ„ï¼Œåˆ†æ”¯æ¨é€é¡ºåºçš„å†™æ³•æ˜¯&lt;æ¥æºåœ°&gt;:&lt;ç›®çš„åœ°&gt;ï¼Œæ‰€ä»¥git pullæ˜¯&lt;è¿œç¨‹åˆ†æ”¯&gt;:&lt;æœ¬åœ°åˆ†æ”¯&gt;ï¼Œè€Œgit pushæ˜¯&lt;æœ¬åœ°åˆ†æ”¯&gt;:&lt;è¿œç¨‹åˆ†æ”¯&gt;ã€‚<br>å¦‚æœçœç•¥è¿œç¨‹åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºå°†æœ¬åœ°åˆ†æ”¯æ¨é€ä¸ä¹‹å­˜åœ¨â€è¿½è¸ªå…³ç³»â€çš„è¿œç¨‹åˆ†æ”¯ï¼ˆé€šå¸¸ä¸¤è€…åŒåï¼‰ï¼Œå¦‚æœè¯¥è¿œç¨‹åˆ†æ”¯ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚</p>
<p><code>$ git push origin master</code><br>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°originä¸»æœºçš„masteråˆ†æ”¯ã€‚å¦‚æœåè€…ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚<br>å¦‚æœçœç•¥æœ¬åœ°åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºåˆ é™¤æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ï¼Œå› ä¸ºè¿™ç­‰åŒäºæ¨é€ä¸€ä¸ªç©ºçš„æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹åˆ†æ”¯ã€‚</p>
<p><code>$ git push origin :master</code><br>ç­‰åŒäº<br><code>$ git push origin --delete master</code><br>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºåˆ é™¤originä¸»æœºçš„masteråˆ†æ”¯ã€‚<br>å¦‚æœå½“å‰åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¹‹é—´å­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œåˆ™æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯éƒ½å¯ä»¥çœç•¥ã€‚</p>
<p><code>$ git push origin</code><br>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†å½“å‰åˆ†æ”¯æ¨é€åˆ°originä¸»æœºçš„å¯¹åº”åˆ†æ”¯ã€‚<br>å¦‚æœå½“å‰åˆ†æ”¯åªæœ‰ä¸€ä¸ªè¿½è¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆä¸»æœºåéƒ½å¯ä»¥çœç•¥ã€‚</p>
<p><code>$ git push</code><br>å¦‚æœå½“å‰åˆ†æ”¯ä¸å¤šä¸ªä¸»æœºå­˜åœ¨è¿½è¸ªå…³ç³»ï¼Œåˆ™å¯ä»¥ä½¿ç”¨-ué€‰é¡¹æŒ‡å®šä¸€ä¸ªé»˜è®¤ä¸»æœºï¼Œè¿™æ ·åé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨git pushã€‚</p>
<p><code>$ git push -u origin master</code><br>ä¸Šé¢å‘½ä»¤å°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°originä¸»æœºï¼ŒåŒæ—¶æŒ‡å®šoriginä¸ºé»˜è®¤ä¸»æœºï¼Œåé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨git pushäº†ã€‚<br>ä¸å¸¦ä»»ä½•å‚æ•°çš„git pushï¼Œé»˜è®¤åªæ¨é€å½“å‰åˆ†æ”¯ï¼Œè¿™å«åšsimpleæ–¹å¼ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§matchingæ–¹å¼ï¼Œä¼šæ¨é€æ‰€æœ‰æœ‰å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯çš„æœ¬åœ°åˆ†æ”¯ã€‚Git 2.0ç‰ˆæœ¬ä¹‹å‰ï¼Œé»˜è®¤é‡‡ç”¨matchingæ–¹æ³•ï¼Œç°åœ¨æ”¹ä¸ºé»˜è®¤é‡‡ç”¨simpleæ–¹å¼ã€‚å¦‚æœè¦ä¿®æ”¹è¿™ä¸ªè®¾ç½®ï¼Œå¯ä»¥é‡‡ç”¨git configå‘½ä»¤ã€‚</p>
<p><code>$ git config --global push.default matching</code><br> æˆ–è€…<br><code>$ git config --global push.default simple</code><br>è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯ä¸ç®¡æ˜¯å¦å­˜åœ¨å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯ï¼Œå°†æœ¬åœ°çš„æ‰€æœ‰åˆ†æ”¯éƒ½æ¨é€åˆ°è¿œç¨‹ä¸»æœºï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨â€“allé€‰é¡¹ã€‚</p>
<p><code>$ git push --all origin</code><br>ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†æ‰€æœ‰æœ¬åœ°åˆ†æ”¯éƒ½æ¨é€åˆ°originä¸»æœºã€‚<br>å¦‚æœè¿œç¨‹ä¸»æœºçš„ç‰ˆæœ¬æ¯”æœ¬åœ°ç‰ˆæœ¬æ›´æ–°ï¼Œæ¨é€æ—¶Gitä¼šæŠ¥é”™ï¼Œè¦æ±‚å…ˆåœ¨æœ¬åœ°åšgit pullåˆå¹¶å·®å¼‚ï¼Œç„¶åå†æ¨é€åˆ°è¿œç¨‹ä¸»æœºã€‚è¿™æ—¶ï¼Œå¦‚æœä½ ä¸€å®šè¦æ¨é€ï¼Œå¯ä»¥ä½¿ç”¨â€“forceé€‰é¡¹ã€‚</p>
<p><code>$ git push --force origin</code><br>ä¸Šé¢å‘½ä»¤ä½¿ç”¨â€“forceé€‰é¡¹ï¼Œç»“æœå¯¼è‡´è¿œç¨‹ä¸»æœºä¸Šæ›´æ–°çš„ç‰ˆæœ¬è¢«è¦†ç›–ã€‚é™¤éä½ å¾ˆç¡®å®šè¦è¿™æ ·åšï¼Œå¦åˆ™åº”è¯¥å°½é‡é¿å…ä½¿ç”¨â€“forceé€‰é¡¹ã€‚<br>æœ€åï¼Œ<code>git push</code>ä¸ä¼šæ¨é€æ ‡ç­¾ï¼ˆtagï¼‰ï¼Œé™¤éä½¿ç”¨â€“tagsé€‰é¡¹ã€‚<br><code>$ git push origin --tags</code></p>
<p>ï¼ˆå®Œï¼‰</p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>GitHubï¼šğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a><br>ä¸ªäººç½‘ç«™ï¼šğŸ‘‰<a href="https://microzz.com/">https://microzz.com/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Gitè¿œç¨‹æ“ä½œè¯¦è§£&quot;&gt;&lt;a href=&quot;#Gitè¿œç¨‹æ“ä½œè¯¦è§£&quot; class=&quot;headerlink&quot; title=&quot;Gitè¿œç¨‹æ“ä½œè¯¦è§£&quot;&gt;&lt;/a&gt;Gitè¿œç¨‹æ“ä½œè¯¦è§£&lt;/h1&gt;&lt;p&gt;ä½œè€…ï¼š é˜®ä¸€å³°&lt;/p&gt;
&lt;p&gt;Gitæ˜¯ç›®å‰æœ€æµè¡Œçš„ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œå­¦ä¼šGitå‡ ä¹æˆäº†å¼€
    
    </summary>
    
    
      <category term="Git" scheme="https://microzz.com/tags/Git/"/>
    
      <category term="ç‰ˆæœ¬ç®¡ç†" scheme="https://microzz.com/tags/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>JSä¸­çš„callå’Œapplyåº”ç”¨</title>
    <link href="https://microzz.com/2017/05/04/callapply/"/>
    <id>https://microzz.com/2017/05/04/callapply/</id>
    <published>2017-05-04T12:38:49.000Z</published>
    <updated>2017-05-04T14:15:29.163Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScriptä¸­çš„callå’Œapplyåº”ç”¨"><a href="#JavaScriptä¸­çš„callå’Œapplyåº”ç”¨" class="headerlink" title="JavaScriptä¸­çš„callå’Œapplyåº”ç”¨"></a>JavaScriptä¸­çš„callå’Œapplyåº”ç”¨</h1><blockquote>
<p>ECMAScript3ç»™<code>Function</code>çš„åŸå‹å®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œä»–ä»¬æ˜¯<code>Function.prototype.call</code> å’Œ <code>Function.prototype.apply</code>. åœ¨å®é™…å¼€å‘ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›å‡½æ•°å¼é£æ ¼çš„ä»£ç ç¼–å†™ä¸­ï¼Œ<code>call</code>å’Œ<code>apply</code>æ–¹æ³•å°¤ä¸ºæœ‰ç”¨ã€‚</p>
</blockquote>
<h2 id="callå’ŒapplyåŒºåˆ«"><a href="#callå’ŒapplyåŒºåˆ«" class="headerlink" title="callå’ŒapplyåŒºåˆ«"></a>callå’ŒapplyåŒºåˆ«</h2><p>å…¶å®ä»–ä»¬çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ä¼ é€’çš„å‚æ•°ä¸ä¸€æ ·è€Œå·²ã€‚<br>applyï¼š æ¥å—2ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†å‡½æ•°ä½“å†…thiså¯¹è±¡çš„æŒ‡å‘ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ•°ç»„æˆ–è€…ä¸€ä¸ªç±»æ•°ç»„ã€‚applyä¼ å…¥çš„æ˜¯ä¸€ä¸ªå‚æ•°æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯å°†å¤šä¸ªå‚æ•°ç»„åˆæˆä¸ºä¸€ä¸ªæ•°ç»„ä¼ å…¥ï¼Œè€Œcallåˆ™ä½œä¸ºcallçš„å‚æ•°ä¼ å…¥ï¼ˆä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ï¼‰ã€‚</p>
<p>ä¸¾ä¸ªæ —å­ï¼š</p>
<pre><code class="javascript">const obj1 = {
    name: &#39;microzz&#39;,
    getName: function() {
        return this.name;
    }
};

const obj2 = {
    name: &#39;Zhaohui&#39;
}

console.log(obj1.getName());  // &quot;microzz&quot;
console.log(obj1.getName.call(obj2));  // &quot;Zhaohui&quot;
console.log(obj1.getName.apply(obj2));  // &quot;Zhaohui&quot;
</code></pre>
<h2 id="callå’Œapplyçš„ç”¨é€”"><a href="#callå’Œapplyçš„ç”¨é€”" class="headerlink" title="callå’Œapplyçš„ç”¨é€”"></a>callå’Œapplyçš„ç”¨é€”</h2><h3 id="æ”¹å˜thisæŒ‡å‘"><a href="#æ”¹å˜thisæŒ‡å‘" class="headerlink" title="æ”¹å˜thisæŒ‡å‘"></a>æ”¹å˜thisæŒ‡å‘</h3><p>callå’Œapplyå¯ä»¥æ”¹å˜<code>this</code>çš„æŒ‡å‘ï¼Œè¿™ç‚¹æˆ‘ä»¬ä»ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºã€‚æˆ‘ä»¬è¿˜å¯ä»¥ä¸¾ä¸€ä¸ªå®é™…å½“ä¸­å¯ä»¥é‡åˆ°çš„æƒ…å†µï¼š</p>
<p>æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¼šè§‰å¾— document.getElementByIdè¿™ä¸ªæ–¹æ³•å¤ªé•¿äº†ï¼Œæˆ‘ä»¬ä¼šå°è¯•ç”¨ä¸€ä¸ªçŸ­å‡½æ•°æ¥ä»£æ›¿å®ƒï¼Œå¦‚åŒprototype.jsç­‰ä¸€äº›æ¡†æ¶æ‰€åšè¿‡çš„äº‹æƒ…ï¼Œä¸‹é¢ç”¨ä»£ç è¯´æ˜ï¼š</p>
<pre><code class="javascript">const getId = function(id) {
  return document.getElementById(id);
}

getId(&#39;id&#39;);
</code></pre>
<p>åœ¨Chromeã€Firefoxã€IE10ä¸­æ‰§è¡Œä¼šå‘ç°æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™æ˜¯å› ä¸ºå¾ˆå¤šå¼•æ“çš„ document.getElementById çš„æ–¹æ³•å†…éƒ¨éœ€è¦ç”¨åˆ°thisï¼Œè¿™ä¸ªthisæœ¬æ¥è¢«æœŸæœ›æŒ‡å‘documentï¼Œä½†ç›´æ¥æ™®é€šå‡½æ•°è°ƒç”¨å°±æŒ‡å‘äº†windowã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨applyâ€œä¿®æ­£â€ <code>this</code>ï¼š</p>
<pre><code class="javascript">document.getElementById = (function(func) {
  return function() {
    return func.apply(document, arguments);
  }
})(document.getElement);

const getId = document.getElementById;
</code></pre>
<h3 id="Function-prototype-bind"><a href="#Function-prototype-bind" class="headerlink" title="Function.prototype.bind"></a>Function.prototype.bind</h3><p>åœ¨å¤§éƒ¨åˆ†é«˜çº§æµè§ˆå™¨å·²ç»å®ç°äº†å†…ç½®çš„<code>Function.prototype.bind</code>ï¼Œç”¨æ¥æŒ‡å®šå‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘ï¼Œå¦‚æœæ²¡æœ‰åŸç”Ÿçš„<code>Function.prototype.bind</code>,æˆ‘ä»¬ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿä¸€ä¸ªï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">Function.prototype.bind = function(context) {
  var self = this;
  return function() {
    return self.apply(context, arguments);
  }
}

var obj = {
  name: &#39;microzz&#39;
};

var func = function() {
  console.log(this.name); // microzz
}.bind(obj);

func();
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šå®ç°å¾—ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼š</p>
<pre><code class="javascript">
Function.prototype.bind = function() {
  var self = this;

  // éœ€è¦ç»‘å®šçš„thisä¸Šä¸‹æ–‡
  var context = [].shift.call(arguments);

  // å‰©ä½™çš„å‚æ•°è½¬æˆæ•°ç»„
  var args = [].slice.call(arguments);

  return function() {
    return self.apply(context, [].concat.call(args, [].slice.call(arguments)));
  }
}

var obj = {
  name: &#39;microzz&#39;
};

var func = function(a, b, c, d) {
  console.log(this.name); // microzz
  console.log([a, b, c, d]); // [1, 2, 3, 4]
}.bind(obj, 1, 2);

func(3, 4);
</code></pre>
<h3 id="å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•"><a href="#å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•"></a>å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•</h3><h4 id="å€Ÿç”¨æ„é€ å‡½æ•°"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°"></a>å€Ÿç”¨æ„é€ å‡½æ•°</h4><p>å€Ÿç”¨æ–¹æ³•çš„ç¬¬ä¸€ç§åœºæ™¯æ˜¯â€œå€Ÿç”¨æ„é€ å‡½æ•°â€ï¼Œå¯ä»¥å®ç°ç±»ä¼¼ç»§æ‰¿çš„æ•ˆæœï¼š</p>
<pre><code class="javascript">var A = function(name) {
  this.name = name;
}

var B = function() {
  A.apply(this, arguments);
}

B.prototype.getName = function() {
  return this.name;
}

var b = new B(&#39;microzz&#39;);
console.log(b.getName()); // microzz
</code></pre>
<h4 id="ç±»æ•°ç»„"><a href="#ç±»æ•°ç»„" class="headerlink" title="ç±»æ•°ç»„"></a>ç±»æ•°ç»„</h4><p>å‡½æ•°å‚æ•°åˆ—è¡¨<code>arguments</code>æ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œè™½ç„¶å®ƒæœ‰ä¸‹æ ‡ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯çœŸæ­£çš„æ•°ç»„ã€‚ä¸ºäº†èƒ½ä½¿ç”¨æ•°ç»„çš„ä¸€äº›æ–¹æ³•ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šå€Ÿç”¨<code>Array.prototype</code>å¯¹è±¡ä¸Šçš„æ–¹æ³•ã€‚<br>æ¯”å¦‚æƒ³å¾€<code>arguments</code>ä¸­æ·»åŠ æ–°å…ƒç´ ï¼Œé€šå¸¸ä¼šå€Ÿç”¨<code>Array.prototype.push</code><br>æƒ³æŠŠ<code>arguments</code>è½¬æˆçœŸæ­£æ•°ç»„çš„æ—¶å€™ï¼Œå¯ä»¥å€Ÿç”¨<code>Array.prototype.slice</code>æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ES6çš„<code>Array.from</code></p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>GitHubï¼šğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a><br>ä¸ªäººç½‘ç«™ï¼šğŸ‘‰<a href="https://microzz.com/">https://microzz.com/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScriptä¸­çš„callå’Œapplyåº”ç”¨&quot;&gt;&lt;a href=&quot;#JavaScriptä¸­çš„callå’Œapplyåº”ç”¨&quot; class=&quot;headerlink&quot; title=&quot;JavaScriptä¸­çš„callå’Œapplyåº”ç”¨&quot;&gt;&lt;/a&gt;JavaScriptä¸­çš„ca
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="call" scheme="https://microzz.com/tags/call/"/>
    
      <category term="apply" scheme="https://microzz.com/tags/apply/"/>
    
  </entry>
  
  <entry>
    <title>ä½ çœŸçš„çŸ¥é“JSå—ï¼Ÿ</title>
    <link href="https://microzz.com/2017/04/30/knowjs/"/>
    <id>https://microzz.com/2017/04/30/knowjs/</id>
    <published>2017-04-30T10:08:44.000Z</published>
    <updated>2017-05-03T10:54:44.745Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä½ çœŸçš„çŸ¥é“JavaScriptå—"><a href="#ä½ çœŸçš„çŸ¥é“JavaScriptå—" class="headerlink" title="ä½ çœŸçš„çŸ¥é“JavaScriptå—"></a>ä½ çœŸçš„çŸ¥é“JavaScriptå—</h1><blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;JavaScriptæ˜¯ä¸€é—¨<strong>å¥‡æ€ª</strong>çš„è¯­è¨€ï¼Œè¦çœŸæ­£æŒæ¡å¹¶ä¸å®¹æ˜“ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œæ¥ä¸€ä¸ªå¿«é€Ÿæµ‹è¯•ï¼Œ5é“é¢˜ç›®ï¼Œçœ‹çœ‹ä½ å¯¹JavaScriptæ˜¯å¦çœŸæ­£æŒæ¡ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹å’¯ğŸ˜„</p>
</blockquote>
<h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><h3 id="No-1"><a href="#No-1" class="headerlink" title="No.1"></a>No.1</h3><pre><code class="javascript">if (!(&quot;a&quot; in window)) {
    var a = 1;
}

console.log(a);
</code></pre>
<h3 id="No-2"><a href="#No-2" class="headerlink" title="No.2"></a>No.2</h3><pre><code class="javascript">var a = 1,
    b = function a(x) {
        x &amp;&amp; a(--x);
    };
console.log(a);
</code></pre>
<h3 id="No-3"><a href="#No-3" class="headerlink" title="No.3"></a>No.3</h3><pre><code class="javascript">function a(x) {
    return x * 2;
}
var a;
console.log(a);
</code></pre>
<h3 id="No-4"><a href="#No-4" class="headerlink" title="No.4"></a>No.4</h3><pre><code class="javascript">function b(x, y, a) {
    arguments[2] = 10;
    console.log(a);
}
b(1, 2, 3);
</code></pre>
<h3 id="No-5"><a href="#No-5" class="headerlink" title="No.5"></a>No.5</h3><pre><code class="javascript">function a() {
    console.log(this);
}
a.call(null);
</code></pre>
<h2 id="è§£æ"><a href="#è§£æ" class="headerlink" title="è§£æ"></a>è§£æ</h2><h3 id="No-1-1"><a href="#No-1-1" class="headerlink" title="No.1"></a>No.1</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå…¨å±€å˜é‡éƒ½æ˜¯<code>window</code>çš„ä¸€ä¸ªå±æ€§ï¼Œå³<br><code>var a = 1</code> ç­‰ä»·äº <code>window.a = 1</code>ã€‚<code>in</code>æ“ä½œç¬¦ç”¨æ¥åˆ¤æ–­æŸä¸ªå±æ€§å±äºæŸä¸ªå¯¹è±¡ï¼Œå¯ä»¥æ˜¯å¯¹è±¡çš„ç›´æ¥å±æ€§ï¼Œä¹Ÿå¯ä»¥æ˜¯é€šè¿‡<code>prototype</code>ç»§æ‰¿çš„å±æ€§ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;å†çœ‹é¢˜ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­ï¼Œå¦‚æœæ²¡æœ‰å…¨å±€å˜é‡ <code>a</code> ï¼Œåˆ™å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡ <code>a</code> (ES5æ²¡æœ‰å—çº§ä½œç”¨åŸŸ)ï¼Œå¹¶ä¸”èµ‹å€¼ä¸º1ã€‚å¾ˆå¤šäººä¼šè®¤ä¸ºæ‰“å°çš„æ˜¯1ã€‚éä¹Ÿï¼Œå¤§å®¶ä¸è¦å¿˜äº†å˜é‡å£°æ˜ä¼šè¢«å‰ç½®ï¼ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿé¢˜ç›®ä¹Ÿå°±ç­‰ä»·äº</p>
<pre><code class="javascript">var a;

if (!(&quot;a&quot; in window)) {
    a = 1;
}

console.log(a);
</code></pre>
<p>æ‰€ä»¥å…¶å®å·²ç»å£°æ˜äº†å˜é‡<code>a</code>ï¼Œåªä¸è¿‡<code>if</code>è¯­å¥ä¹‹å‰å€¼æ˜¯<code>undefined</code>ï¼Œæ‰€ä»¥<code>if</code>è¯­å¥å‹æ ¹ä¸ä¼šæ‰§è¡Œã€‚<br>æœ€åç­”æ¡ˆå°±æ˜¯ <code>undefined</code> </p>
<h3 id="No-2-1"><a href="#No-2-1" class="headerlink" title="No.2"></a>No.2</h3><p>è¿™é“é¢˜æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p>
<ol>
<li>å˜é‡å£°æ˜ã€å‡½æ•°å£°æ˜ä¼šè¢«å‰ç½®ï¼Œä½†æ˜¯å‡½æ•°è¡¨è¾¾å¼å¹¶ä¸ä¼šï¼Œå‡†ç¡®è¯´ç±»ä¼¼å˜é‡å£°æ˜å‰ç½®ï¼Œä¸¾ä¸ªæ —å­ï¼š</li>
</ol>
<pre><code class="javascript">console.log(&#39;b&#39;, b); // b undefined
var b = function() {}
console.log(&#39;b&#39;, b); // b function () {}
</code></pre>
<p>2.å…·åçš„å‡½æ•°è¡¨è¾¾å¼çš„åå­—åªèƒ½åœ¨è¯¥å‡½æ•°å†…éƒ¨å–åˆ°ï¼Œä¸¾ä¸ªä¾‹å­(æ’é™¤è€çš„IEğŸ˜‚)ï¼š</p>
<pre><code class="javascript">var foo = function bar () {}

console.log(&#39;foo&#39;, foo); 
// foo function bar(){}

console.log(&#39;bar&#39;, bar);
// Uncaught ReferenceError: bar is not defined
</code></pre>
<p>&nbsp;&nbsp;&nbsp;&nbsp;ç»¼åˆè¿™ä¸¤ç‚¹ï¼Œå†çœ‹é¢˜ç›®ï¼Œæœ€åè¾“å‡ºçš„å†…å®¹å°±ä¸º 1</p>
<h3 id="No-3-1"><a href="#No-3-1" class="headerlink" title="No.3"></a>No.3</h3><p>å‡½æ•°å£°æ˜ä¼šè¦†ç›–å˜é‡å£°æ˜ï¼Œä½†ä¸ä¼šè¦†ç›–å˜é‡èµ‹å€¼ï¼Œä¸¾ä¸ªæ —å­ç®€å•ç²—æš´ï¼š</p>
<pre><code class="javascript">function foo(){
    return 1;
}
var foo;
console.log(typeof foo);    // &quot;function&quot;
</code></pre>
<p>å‡½æ•°å£°æ˜çš„ä¼˜å…ˆçº§é«˜äºå˜é‡å£°æ˜çš„ä¼˜å…ˆçº§ï¼Œä½†å¦‚æœè¯¥å˜é‡<code>foo</code>èµ‹å€¼äº†ï¼Œé‚£ç»“æœå°±å®Œå…¨ä¸ä¸€æ ·äº†ï¼š</p>
<pre><code class="javascript">function foo(){
    return 1;
}
var foo = 1;
console.log(typeof foo);    // &quot;number&quot;
</code></pre>
<p>å˜é‡<code>foo</code>èµ‹å€¼ä»¥åï¼Œå˜é‡èµ‹å€¼åˆå§‹åŒ–å°±è¦†ç›–äº†å‡½æ•°å£°æ˜ã€‚è¿™ä¸ªéœ€è¦æ³¨æ„<br>å†çœ‹é¢˜ç›®</p>
<pre><code class="javascript">function a(x) {
    return x * 2;
}
var a;
console.log(a); // function a(x) {...}
</code></pre>
<h3 id="No-4-1"><a href="#No-4-1" class="headerlink" title="No.4"></a>No.4</h3><p>è¿™é¢˜è€ƒå¯Ÿ <code>arguments</code> å¯¹è±¡çš„ç”¨æ³•(è¯¦çœ‹ğŸ‘‰<a href="https://microzz.com/2017/04/28/arguments/">JavaScriptä¸­çš„argumentså¯¹è±¡</a>)<br><strong>ä¸€èˆ¬æƒ…å†µ</strong>ï¼Œ<code>arguments</code>ä¸å‡½æ•°å‚æ•°æ˜¯åŠ¨æ€ç»‘å®šå…³ç³»(ä¸ºä»€ä¹ˆè¯´æ˜¯ä¸€èˆ¬ç¨åä¼šè§£é‡Š)ï¼Œæ‰€ä»¥å¾ˆå¥½ç†è§£ï¼Œæœ€åè¾“å‡ºçš„æ˜¯10</p>
<p>ä½†æ˜¯ä½†æ˜¯ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸è¦å¿˜äº†ä¸€ä¸ªç‰¹æ®Šæƒ…å†µâ€“ä¸¥æ ¼æ¨¡å¼ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ <code>arguments</code> ä¸ç›¸å½“äºå‡½æ•°å‚æ•°çš„ä¸€ä¸ªæ‹·è´ï¼Œå¹¶æ²¡æœ‰åŠ¨æ€ç»‘å®šå…³ç³»ï¼Œä¸¾ä¸ªæ —å­ï¼š</p>
<pre><code class="javascript">&#39;use strict&#39;
// ä¸¥æ ¼æ¨¡å¼ï¼ï¼

function b(x, y, a) {
    arguments[2] = 10;
    console.log(a);
}
b(1, 2, 3); // 3
</code></pre>
<h3 id="No-5-1"><a href="#No-5-1" class="headerlink" title="No.5"></a>No.5</h3><pre><code class="javascript">function a() {
    console.log(this);
}
a.call(null);
</code></pre>
<p>å…³äº <code>a.call(null);</code> æ ¹æ®ECMAScript262è§„èŒƒè§„å®šï¼š<br>å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„å¯¹è±¡è°ƒç”¨è€…æ˜¯<code>null</code>æˆ–è€…<code>undefined</code>çš„è¯ï¼Œ<code>call</code>æ–¹æ³•å°†æŠŠå…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸Šæ˜¯<code>window</code>å¯¹è±¡ï¼‰ä½œä¸ºthisçš„å€¼ã€‚æ‰€ä»¥ï¼Œä¸ç®¡ä½ ä»€ä¹ˆæ—¶å€™ä¼ å…¥<code>null</code>æˆ–è€… <code>undefined</code>ï¼Œå…¶<code>this</code>éƒ½æ˜¯å…¨å±€å¯¹è±¡<code>window</code>ã€‚æ‰€ä»¥ï¼Œåœ¨æµè§ˆå™¨ä¸Šç­”æ¡ˆæ˜¯è¾“å‡º <code>window</code> å¯¹è±¡ã€‚</p>
<p>ä½†æ˜¯ä½†æ˜¯ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¾æ—§ä¸èƒ½å¿˜è®°ä¸€ä¸ªç‰¹æ®Šæƒ…å†µâ€“ä¸¥æ ¼æ¨¡å¼ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œ<code>null</code> å°±æ˜¯ <code>null</code>ï¼Œ<code>undefined</code> å°±æ˜¯ <code>undefined</code> ï¼Œä¸¾ä¸ªæ —å­ï¼š</p>
<pre><code class="javascript">&#39;use strict&#39;;
// ä¸¥æ ¼æ¨¡å¼ï¼ï¼

function a() {
    console.log(this);
}
a.call(null); // null
a.call(undefined); // undefined
</code></pre>
<h2 id="æé†’"><a href="#æé†’" class="headerlink" title="æé†’"></a>æé†’</h2><ol>
<li>åœ¨æµè§ˆå™¨ä¸­çš„å…¨å±€å¯¹è±¡æ˜¯<code>window</code>ï¼ŒNode.jsä¸­æ˜¯<code>global</code>;</li>
<li>ä¸ºäº†ä½¿ä»£ç æ›´åŠ ä¸¥è°¨ä¸å¥å£®ï¼Œå»ºè®®å†™JSéƒ½åŠ ä¸Šä¸¥æ ¼æ¨¡å¼<code>&#39;use strict&#39;;</code></li>
<li>ES6å·²ç»æˆä¸ºå‰ç«¯å¿…å¤‡æŠ€èƒ½ï¼Œå‘¼åå¤§å®¶éƒ½ä½¿ç”¨ES6ï¼Œæ–¹ä¾¿é«˜æ•ˆï¼Œå¯ä»¥ä½¿ç”¨babelæŠŠES6è½¬æˆES5ç”šè‡³ES3ï¼Œå°½é‡ä½¿ç”¨ES6æ¨åŠ¨å‰ç«¯çš„å‘å±•ğŸ‘</li>
</ol>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>GitHub: ğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a><br>ä¸ªäººç½‘ç«™: ğŸ‘‰<a href="https://microzz.com/">https://microzz.com/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä½ çœŸçš„çŸ¥é“JavaScriptå—&quot;&gt;&lt;a href=&quot;#ä½ çœŸçš„çŸ¥é“JavaScriptå—&quot; class=&quot;headerlink&quot; title=&quot;ä½ çœŸçš„çŸ¥é“JavaScriptå—&quot;&gt;&lt;/a&gt;ä½ çœŸçš„çŸ¥é“JavaScriptå—&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ç†è§£ES6ä¸­çš„ç®­å¤´å‡½æ•°</title>
    <link href="https://microzz.com/2017/04/29/arrowfunc/"/>
    <id>https://microzz.com/2017/04/29/arrowfunc/</id>
    <published>2017-04-29T13:08:13.000Z</published>
    <updated>2017-04-29T13:47:58.863Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScriptæ·±å…¥ç†è§£ES6ä¸­çš„ç®­å¤´å‡½æ•°"><a href="#JavaScriptæ·±å…¥ç†è§£ES6ä¸­çš„ç®­å¤´å‡½æ•°" class="headerlink" title="JavaScriptæ·±å…¥ç†è§£ES6ä¸­çš„ç®­å¤´å‡½æ•°"></a>JavaScriptæ·±å…¥ç†è§£ES6ä¸­çš„ç®­å¤´å‡½æ•°</h1><blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¯­æ³•æ¯”å‡½æ•°è¡¨è¾¾å¼çŸ­ï¼Œå¹¶ä¸”ä¸ç»‘å®šè‡ªå·±çš„ thisï¼Œargumentsï¼Œsuperæˆ– new.targetã€‚æ­¤å¤–ï¼Œç®­å¤´å‡½æ•°æœ€å¥½åœ¨éæ–¹æ³•å‡½æ•°ä¸­ä½¿ç”¨ï¼Œä¸”ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ã€‚</p>
</blockquote>
<h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><h3 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h3><pre><code class="javascript">(param1, param2, â€¦, paramN) =&gt; { statements }
(param1, param2, â€¦, paramN) =&gt; expression
// ç­‰ä»·äº:  =&gt; { return expression; } 

// å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œåœ†æ‹¬å·æ˜¯å¯é€‰çš„:
(singleParam) =&gt; { statements }
singleParam =&gt; { statements }

// æ— å‚æ•°æˆ–è€…å¤šå‚æ•°çš„ç®­å¤´å‡½æ•°éœ€è¦ä½¿ç”¨åœ†æ‹¬å·æˆ–è€…ä¸‹åˆ’çº¿:
() =&gt; { statements } _ =&gt; { statements }
</code></pre>
<h3 id="é«˜çº§è¯­æ³•"><a href="#é«˜çº§è¯­æ³•" class="headerlink" title="é«˜çº§è¯­æ³•"></a>é«˜çº§è¯­æ³•</h3><pre><code class="javascript">// åªè¿”å›ä¸€ä¸ªå¯¹è±¡å­—é¢é‡,æ²¡æœ‰å…¶ä»–è¯­å¥æ—¶, åº”å½“ç”¨åœ†æ‹¬å·å°†å…¶åŒ…èµ·æ¥:
params =&gt; ({foo: bar})

// æ”¯æŒ Rest parameters å’Œ default parameters:
(param1, param2, ...rest) =&gt; { statements }
(param1 = defaultValue1, param2, â€¦, paramN = defaultValueN) =&gt; { statements }

// æ”¯æŒå‚æ•°åˆ—è¡¨ä¸­çš„è§£æ„èµ‹å€¼
var f = ([a, b] = [1, 2], {x: c} = {x: a + b}) =&gt; a + b + c;
f();  // 6
</code></pre>
<h2 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h2><blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;ç®­å¤´å‡½æ•°çš„å¼•å…¥æœ‰ä¸¤ä¸ªæ–¹é¢çš„ä½œç”¨ï¼šä¸€æ˜¯æ›´ç®€çŸ­çš„å‡½æ•°ä¹¦å†™ï¼ŒäºŒæ˜¯å¯¹ thisçš„è¯æ³•è§£æã€‚</p>
</blockquote>
<h3 id="æ›´çŸ­çš„å‡½æ•°"><a href="#æ›´çŸ­çš„å‡½æ•°" class="headerlink" title="æ›´çŸ­çš„å‡½æ•°"></a>æ›´çŸ­çš„å‡½æ•°</h3><p>æ›´çŸ­çš„å‡½æ•°åœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œå¾ˆå—æ¬¢è¿ã€‚è¯•æ¯”è¾ƒï¼š</p>
<pre><code class="javascript">var a = [
  &quot;Hydrogen&quot;,
  &quot;Helium&quot;,
  &quot;Lithium&quot;,
  &quot;BerylÂ­lium&quot;
];

var a2 = a.map(function(s){ return s.length });

var a3 = a.map( s =&gt; s.length );
</code></pre>
<h3 id="ä¸ç»‘å®š-this"><a href="#ä¸ç»‘å®š-this" class="headerlink" title="ä¸ç»‘å®š this"></a>ä¸ç»‘å®š this</h3><blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;åœ¨ç®­å¤´å‡½æ•°å‡ºç°ä¹‹å‰ï¼Œæ¯ä¸ªæ–°å®šä¹‰çš„å‡½æ•°éƒ½æœ‰å…¶è‡ªå·±çš„ this å€¼ï¼ˆä¾‹å¦‚ï¼Œæ„é€ å‡½æ•°çš„ this æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹çš„å‡½æ•°çš„ this å€¼ä¸º undefinedï¼›å¦‚æœå‡½æ•°æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨çš„ï¼Œåˆ™å…¶ this æŒ‡å‘äº†é‚£ä¸ªè°ƒç”¨å®ƒçš„å¯¹è±¡ï¼‰ã€‚åœ¨é¢å‘å¯¹è±¡é£æ ¼çš„ç¼–ç¨‹ä¸­ï¼Œè¿™ä¼šå¸¦æ¥å¾ˆå¤šå›°æ‰°ã€‚</p>
</blockquote>
<pre><code class="javascript">function Person() {
  // æ„é€ å‡½æ•° Person() å®šä¹‰çš„ `this` å°±æ˜¯æ–°å®ä¾‹å¯¹è±¡è‡ªå·±
  this.age = 0;
  setInterval(function growUp() {
    // åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒgrowUp() å‡½æ•°å®šä¹‰äº†å…¶å†…éƒ¨çš„ `this`ä¸ºå…¨å±€å¯¹è±¡, 
      ä¸åŒäºæ„é€ å‡½æ•°Person()çš„å®šä¹‰çš„ `this`
    this.age++; 
  }, 1000);
}

var p = new Person();

// åœ¨ ECMAScript 3/5 ä¸­ï¼Œè¿™ä¸ªé—®é¢˜é€šè¿‡æŠŠthisçš„å€¼èµ‹ç»™å˜é‡ï¼Œ
// ç„¶åå°†è¯¥å˜é‡æ”¾åˆ°é—­åŒ…ä¸­æ¥è§£å†³ã€‚
function Person() {
  var self = this; // ä¹Ÿæœ‰äººé€‰æ‹©ä½¿ç”¨ `that` è€Œé `self`. 
                   // åªè¦ä¿è¯ä¸€è‡´å°±å¥½.
  self.age = 0;

  setInterval(function growUp() {
    // å›è°ƒé‡Œé¢çš„ `self` å˜é‡å°±æŒ‡å‘äº†æœŸæœ›çš„é‚£ä¸ªå¯¹è±¡äº†
    self.age++;
  }, 1000);
}
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ bind å‡½æ•°ï¼ŒæŠŠæœŸæœ›çš„ this å€¼ä¼ é€’ç»™ <code>growUp()</code> å‡½æ•°ã€‚</p>
<p>ç®­å¤´å‡½æ•°ä¼šæ•è·å…¶æ‰€åœ¨ä¸Šä¸‹æ–‡çš„  this å€¼ï¼Œä½œä¸ºè‡ªå·±çš„ this å€¼ï¼Œå› æ­¤ä¸‹é¢çš„ä»£ç å°†å¦‚æœŸè¿è¡Œã€‚</p>
<pre><code class="javascript">function Person(){
  this.age = 0;

  setInterval(() =&gt; {
    this.age++; // thisæ­£ç¡®åœ°æŒ‡å‘äº†personå¯¹è±¡
  }, 1000);
}

var p = new Person();
</code></pre>
<h4 id="ä¸ä¸¥æ ¼æ¨¡å¼çš„å…³ç³»"><a href="#ä¸ä¸¥æ ¼æ¨¡å¼çš„å…³ç³»" class="headerlink" title="ä¸ä¸¥æ ¼æ¨¡å¼çš„å…³ç³»"></a>ä¸ä¸¥æ ¼æ¨¡å¼çš„å…³ç³»</h4><p>è€ƒè™‘åˆ° this æ˜¯è¯æ³•å±‚é¢ä¸Šçš„ï¼Œä¸¥æ ¼æ¨¡å¼ä¸­ä¸ this ç›¸å…³çš„è§„åˆ™éƒ½å°†è¢«å¿½ç•¥ã€‚</p>
<pre><code class="javascript">var f = () =&gt; {&#39;use strict&#39;; return this};
f() === window; // æˆ–å…¨å±€å¯¹è±¡
</code></pre>
<p>ä¸¥æ ¼æ¨¡å¼çš„å…¶ä»–è§„åˆ™ä¾ç„¶ä¸å˜.</p>
<h4 id="ä½¿ç”¨-call-æˆ–-apply-è°ƒç”¨"><a href="#ä½¿ç”¨-call-æˆ–-apply-è°ƒç”¨" class="headerlink" title="ä½¿ç”¨ call æˆ– apply è°ƒç”¨"></a>ä½¿ç”¨ call æˆ– apply è°ƒç”¨</h4><p><strong>ç”±äº this å·²ç»åœ¨è¯æ³•å±‚é¢å®Œæˆäº†ç»‘å®šï¼Œé€šè¿‡ <code>call()</code> æˆ– <code>apply()</code> æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œåªæ˜¯ä¼ å…¥äº†å‚æ•°è€Œå·²ï¼Œå¯¹ this å¹¶æ²¡æœ‰ä»€ä¹ˆå½±å“</strong>ï¼š</p>
<pre><code class="javascript">var adder = {
  base : 1,

  add : function(a) {
    var f = v =&gt; v + this.base;
    return f(a);
  },

  addThruCall: function(a) {
    var f = v =&gt; v + this.base;
    var b = {
      base : 2
    };

    return f.call(b, a);
  }
};

console.log(adder.add(1));         // è¾“å‡º 2
console.log(adder.addThruCall(1)); // ä»ç„¶è¾“å‡º 2ï¼ˆè€Œä¸æ˜¯3ï¼‰
</code></pre>
<h3 id="ä¸ç»‘å®šå‚æ•°ï¼ˆargumentsï¼‰"><a href="#ä¸ç»‘å®šå‚æ•°ï¼ˆargumentsï¼‰" class="headerlink" title="ä¸ç»‘å®šå‚æ•°ï¼ˆargumentsï¼‰"></a>ä¸ç»‘å®šå‚æ•°ï¼ˆargumentsï¼‰</h3><blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;ç®­å¤´å‡½æ•°ä¸ä¼šåœ¨å…¶å†…éƒ¨æš´éœ²å‡ºå‚æ•°ï¼ˆarguments )ï¼š arguments.length, arguments[0], arguments[1] ç­‰ç­‰ï¼Œéƒ½ä¸ä¼šæŒ‡å‘ç®­å¤´å‡½æ•°çš„ argumentsï¼Œè€Œæ˜¯æŒ‡å‘äº†ç®­å¤´å‡½æ•°æ‰€åœ¨ä½œç”¨åŸŸçš„ä¸€ä¸ªåä¸º arguments çš„å€¼ï¼ˆå¦‚æœæœ‰çš„è¯ï¼Œå¦åˆ™ï¼Œå°±æ˜¯ undefinedã€‚ï¼‰</p>
</blockquote>
<pre><code class="javascript">var arguments = 42;
var arr = () =&gt; arguments;

arr(); // 42

function foo() {
  var f = (i) =&gt; arguments[0]+i; // fooå‡½æ•°çš„é—´æ¥å‚æ•°ç»‘å®š
  return f(2);
}

foo(1); // 3
// ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ arguments ï¼Œ
// ä¸è¿‡åœ¨å¤§å¤šæ•°æƒ…å½¢ä¸‹ï¼Œrestå‚æ•°å¯ä»¥ç»™å‡ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼š

function foo() { 
  var f = (...args) =&gt; args[0]; 
  return f(2); 
}

foo(1); // 2
</code></pre>
<h3 id="åƒæ–¹æ³•ä¸€æ ·ä½¿ç”¨ç®­å¤´å‡½æ•°"><a href="#åƒæ–¹æ³•ä¸€æ ·ä½¿ç”¨ç®­å¤´å‡½æ•°" class="headerlink" title="åƒæ–¹æ³•ä¸€æ ·ä½¿ç”¨ç®­å¤´å‡½æ•°"></a>åƒæ–¹æ³•ä¸€æ ·ä½¿ç”¨ç®­å¤´å‡½æ•°</h3><p>å¦‚ä¸Šæ‰€è¿°ï¼Œç®­å¤´å‡½æ•°è¡¨è¾¾å¼å¯¹éæ–¹æ³•å‡½æ•°æ˜¯æœ€åˆé€‚çš„ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬è¯•ç€æŠŠå®ƒä»¬ä½œä¸ºæ–¹æ³•æ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<pre><code class="javascript">&#39;use strict&#39;;
var obj = {
  i: 10,
  b: () =&gt; console.log(this.i, this),
  c: function() {
    console.log( this.i, this)
  }
}
obj.b(); // undefined, Window
obj.c(); // 10, Object {...}
// ç®­å¤´å‡½æ•°æ²¡æœ‰å®šä¹‰thisç»‘å®šã€‚
// å¦ä¸€ä¸ªæ¶‰åŠObject.defineProperty():çš„ç¤ºä¾‹ï¼š

&#39;use strict&#39;;
var obj = {
  a: 10
};

Object.defineProperty(obj, &quot;b&quot;, {
  get: () =&gt; {
    console.log(this.a, typeof this.a, this);
    return this.a+10; 
    // represents global object &#39;Window&#39;, 
    // therefore &#39;this.a&#39; returns &#39;undefined&#39;
  }
});
</code></pre>
<h3 id="ä½¿ç”¨-new-æ“ä½œç¬¦"><a href="#ä½¿ç”¨-new-æ“ä½œç¬¦" class="headerlink" title="ä½¿ç”¨ new æ“ä½œç¬¦"></a>ä½¿ç”¨ new æ“ä½œç¬¦</h3><p>ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œæ„é€ å™¨ï¼Œå’Œ <code>new</code> ä¸€èµ·ç”¨å°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p>
<pre><code class="javascript">var Foo = () =&gt; {};
var foo = new Foo(); // TypeError: Foo is not a constructor
</code></pre>
<h3 id="ä½¿ç”¨åŸå‹å±æ€§"><a href="#ä½¿ç”¨åŸå‹å±æ€§" class="headerlink" title="ä½¿ç”¨åŸå‹å±æ€§"></a>ä½¿ç”¨åŸå‹å±æ€§</h3><p>ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹å±æ€§ã€‚</p>
<pre><code class="javascript">var Foo = () =&gt; {};
console.log(Foo.prototype); // undefined
</code></pre>
<h3 id="ä½¿ç”¨-yield-å…³é”®å­—"><a href="#ä½¿ç”¨-yield-å…³é”®å­—" class="headerlink" title="ä½¿ç”¨ yield å…³é”®å­—"></a>ä½¿ç”¨ yield å…³é”®å­—</h3><p> yield å…³é”®å­—é€šå¸¸ä¸èƒ½åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨ï¼ˆé™¤éæ˜¯åµŒå¥—åœ¨å…è®¸ä½¿ç”¨çš„å‡½æ•°å†…ï¼‰ã€‚å› æ­¤ï¼Œç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œç”Ÿæˆå™¨ã€‚</p>
<h2 id="å‡½æ•°ä¸»ä½“"><a href="#å‡½æ•°ä¸»ä½“" class="headerlink" title="å‡½æ•°ä¸»ä½“"></a>å‡½æ•°ä¸»ä½“</h2><p>ç®­å¤´å‡½æ•°æ—¢æ”¯æŒç®€å†™ä¹Ÿæ”¯æŒå¸¸è§„ç¼–å†™ã€‚</p>
<p>ç®€å†™æ—¶åªéœ€è¦ä¸€ä¸ªè¡¨è¾¾å¼å’Œä¸€ä¸ªè¿”å›å€¼ã€‚å¸¸è§„ç¼–å†™æ—¶å¿…é¡»æœ‰ä¸€ä¸ªæ˜ç¡®çš„è¿”å›å€¼ã€‚</p>
<pre><code class="javascript">var func = x =&gt; x * x;                  
// ç®€å†™å‡½æ•° çœç•¥return

var func = (x, y) =&gt; { return x + y; }; 
//å¸¸è§„ç¼–å†™ æ˜ç¡®çš„è¿”å›å€¼
</code></pre>
<h2 id="è¿”å›æ–‡å­—è¡¨è¾¾å¼"><a href="#è¿”å›æ–‡å­—è¡¨è¾¾å¼" class="headerlink" title="è¿”å›æ–‡å­—è¡¨è¾¾å¼"></a>è¿”å›æ–‡å­—è¡¨è¾¾å¼</h2><p>è¯·ç‰¢è®°ï¼Œç”¨ <code>params =&gt; {object:literal}</code> è¿™ç§ç®€å•çš„è¯­æ³•è¿”å›ä¸€ä¸ªæ–‡å­—è¡¨è¾¾å¼æ˜¯è¡Œä¸é€šçš„ï¼š</p>
<pre><code class="javascript">var func = () =&gt; {  foo: 1  };
// undefined!

var func = () =&gt; {  foo: function() {}  };
// SyntaxError: function statement requires a nameï¼ˆæœªå®šä¹‰å‡½æ•°è¯­å¥ï¼‰
// è¿™æ˜¯å› ä¸ºèŠ±æ‹¬å·ï¼ˆå³ {} ï¼‰é‡Œé¢çš„ä»£ç è¢«è§£æä¸ºåºåˆ—è¯­å¥äº†
//ï¼ˆä¾‹å¦‚ï¼Œ foo è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ ‡ç­¾, è€Œéæ–‡å­—è¡¨è¾¾å¼çš„ç»„æˆéƒ¨åˆ†ï¼‰ã€‚
</code></pre>
<p>æ‰€ä»¥ï¼Œè®°å¾—ç”¨åœ†æ‹¬å·æŠŠæ–‡å­—è¡¨è¾¾å¼åŒ…èµ·æ¥ï¼š</p>
<p><code>var func = () =&gt; ({ foo: 1 });</code></p>
<h2 id="æ¢è¡Œ"><a href="#æ¢è¡Œ" class="headerlink" title="æ¢è¡Œ"></a>æ¢è¡Œ</h2><p>ç®­å¤´å‡½æ•°åœ¨å‚æ•°å’Œç®­å¤´ä¹‹é—´ä¸èƒ½æ¢è¡Œå“¦</p>
<pre><code class="javascript">var func = ()
=&gt; 1; // SyntaxError: expected expression, got &#39;=&gt;&#39;
</code></pre>
<h2 id="è§£æé¡ºåº"><a href="#è§£æé¡ºåº" class="headerlink" title="è§£æé¡ºåº"></a>è§£æé¡ºåº</h2><p>åœ¨ç®­å¤´å‡½æ•°ä¸­çš„ç®­å¤´ä¸æ˜¯æ“ä½œç¬¦(æˆ–è€…è¿ç®—ç¬¦,å°±åƒâ€™+ -â€˜é‚£äº›)ï¼Œ ä½†æ˜¯ç®­å¤´å‡½æ•°æœ‰ç‰¹æ®Šçš„è§£æè§„åˆ™å°±æ˜¯ï¼šç›¸æ¯”æ™®é€šçš„å‡½æ•°ï¼Œå—æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å½±å“ã€‚</p>
<pre><code class="javascript">let callback;

callback = callback || function() {}; // ok

callback = callback || () =&gt; {};      
// SyntaxError:éæ³•ç®­å¤´å‡½æ•°å±æ€§

callback = callback || (() =&gt; {});    // ok
</code></pre>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><pre><code class="javascript">// ä¸€ä¸ªç©ºç®­å¤´å‡½æ•°,è¿”å› undefined
let empty = () =&gt; {};

(() =&gt; &quot;foobar&quot;)() // è¿”å› &quot;foobar&quot; 

var simple = a =&gt; a &gt; 15 ? 15 : a; 
simple(16); // 15
simple(10); // 10

let max = (a, b) =&gt; a &gt; b ? a : b;

// ç®€å•çš„æ•°ç»„ç­›é€‰ï¼ˆæ•°ç»„filteræ–¹æ³•ï¼‰ï¼Œè¿ç®—ï¼ˆæ•°ç»„mapæ–¹æ³•ï¼‰, ...

var arr = [5, 6, 13, 0, 1, 18, 23];

var sum = arr.reduce((a, b) =&gt; a + b);  // 66

var even = arr.filter(v =&gt; v % 2 == 0); 
// [6, 0, 18] 

var double = arr.map(v =&gt; v * 2);       
// [10, 12, 26, 0, 2, 36, 46] 

// æ›´å¤šç®€æ˜çš„promiseé“¾
promise.then(a =&gt; {
  // ...
}).then(b =&gt; {
   // ...
});

// æ›´æ˜“ç†è§£çš„æ— å‚æ•°ç®­å¤´å‡½æ•°
setTimeout( () =&gt; {
  console.log(&#39;I happen sooner&#39;);
  setTimeout( () =&gt; {
    // deeper code
    console.log(&#39;I happen later&#39;);
  }, 1);
}, 1);
</code></pre>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>GitHub: ğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a><br>ä¸ªäººç½‘ç«™: ğŸ‘‰<a href="https://microzz.com/">https://microzz.com/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScriptæ·±å…¥ç†è§£ES6ä¸­çš„ç®­å¤´å‡½æ•°&quot;&gt;&lt;a href=&quot;#JavaScriptæ·±å…¥ç†è§£ES6ä¸­çš„ç®­å¤´å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;JavaScriptæ·±å…¥ç†è§£ES6ä¸­çš„ç®­å¤´å‡½æ•°&quot;&gt;&lt;/a&gt;JavaScriptæ·±å…¥ç†è§£ES6
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="ç®­å¤´å‡½æ•°" scheme="https://microzz.com/tags/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptä¸­çš„argumentså¯¹è±¡</title>
    <link href="https://microzz.com/2017/04/28/arguments/"/>
    <id>https://microzz.com/2017/04/28/arguments/</id>
    <published>2017-04-28T07:55:02.000Z</published>
    <updated>2017-04-28T08:36:10.478Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScriptä¸­çš„argumentså¯¹è±¡"><a href="#JavaScriptä¸­çš„argumentså¯¹è±¡" class="headerlink" title="JavaScriptä¸­çš„argumentså¯¹è±¡"></a>JavaScriptä¸­çš„argumentså¯¹è±¡</h1><p><strong>arguments</strong> æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡, å¯¹åº”äºä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ã€‚</p>
<h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p><code>arguments</code></p>
<h2 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h2><p>argumentså¯¹è±¡æ˜¯æ‰€æœ‰å‡½æ•°ä¸­å¯ç”¨çš„å±€éƒ¨å˜é‡ã€‚ä½ å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡åœ¨å‡½æ•°ä¸­å¼•ç”¨å‡½æ•°çš„å‚æ•°ã€‚æ­¤å¯¹è±¡åŒ…å«ä¼ é€’ç»™å‡½æ•°çš„æ¯ä¸ªå‚æ•°çš„æ¡ç›®ï¼Œç¬¬ä¸€ä¸ªæ¡ç›®çš„ç´¢å¼•ä»0å¼€å§‹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°ä¼ é€’äº†ä¸‰ä¸ªå‚æ•°ï¼Œä½ å¯ä»¥å‚è€ƒå®ƒä»¬å¦‚ä¸‹ï¼š</p>
<p><code>arguments[0]</code><br><code>arguments[1]</code><br><code>arguments[2]</code><br>å‚æ•°ä¹Ÿå¯ä»¥è¢«è®¾ç½®:</p>
<pre><code class="javascript">arguments[1] = &#39;new value&#39;;
</code></pre>
<p><code>arguments</code>å¯¹è±¡<strong>ä¸æ˜¯</strong>ä¸€ä¸ª <code>Array</code> ã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†é™¤äº† é•¿åº¦ä¹‹å¤–æ²¡æœ‰ä»»ä½•æ•°ç»„å±æ€§ã€‚ä¾‹å¦‚ï¼Œå®ƒæ²¡æœ‰ <code>pop</code> æ–¹æ³•ã€‚ä½†æ˜¯å®ƒå¯ä»¥è¢«è½¬æ¢ä¸ºä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ï¼šï¼š</p>
<pre><code class="javascript">let args = Array.prototype.slice.call(arguments); 

let args = [].slice.call(arguments);
</code></pre>
<p>ä½ è¿˜å¯ä»¥ä½¿ç”¨  <code>Array.from()</code>æ–¹æ³•æˆ– <code>spread</code> è¿ç®—ç¬¦å°† arguments è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„ï¼š</p>
<pre><code class="javascript">let args = Array.from(arguments);
let args = [...arguments];
</code></pre>
<p>å¯¹å‚æ•°ä½¿ç”¨sliceä¼šé˜»æ­¢æŸäº›JavaScriptå¼•æ“ä¸­çš„ä¼˜åŒ– (æ¯”å¦‚ V8 å¼•æ“)ã€‚</p>
<p>å¦‚æœä½ å…³å¿ƒå®ƒä»¬ï¼Œå°è¯•é€šè¿‡éå†argumentså¯¹è±¡æ¥æ„é€ ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚</p>
<p>å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ è¢«å¿½è§†çš„/é„™è§†/è½»è§†,/çœ‹ä¸èµ· Arrayæ„é€ å‡½æ•°ä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼š</p>
<pre><code class="javascript">let args = (
arguments.length === 1 ? 
[arguments[0]] : 
Array.apply(null, arguments)
);
</code></pre>
<p>å¦‚æœ Array generics å¯ç”¨çš„è¯ï¼Œä¸‹é¢çš„ä»£ç å¯ä»¥ä½œä¸ºæ›¿ä»£:</p>
<pre><code class="javascript">var args = Array.slice(arguments);
</code></pre>
<ul>
<li><p>arguments å¯¹è±¡ä»…åœ¨å‡½æ•°å†…éƒ¨æœ‰æ•ˆï¼Œåœ¨å‡½æ•°å¤–éƒ¨è°ƒç”¨ arguments å¯¹è±¡ä¼šå‡ºç°ä¸€ä¸ªé”™è¯¯ã€‚</p>
</li>
<li><p>argumentsçš„typeofè¿”å›â€™<strong>object</strong>â€˜ã€‚</p>
</li>
<li><p><code>console.log(typeof arguments);  // &#39;object&#39;</code></p>
</li>
<li><p>å¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥ç¡®å®šå„ä¸ªargumentsçš„ç±»å‹ã€‚</p>
</li>
</ul>
<pre><code class="javascript">console.log(typeof arguments[0]); 
//è¿™å°†è¿”å›å•ä¸ªå‚æ•°çš„typeofã€‚
</code></pre>
<p>å¦‚æœä½ è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªå‡½æ•°çš„å‚æ•°æ•°é‡æ¯”å®ƒæ˜¾å¼å£°æ˜çš„å‚æ•°æ•°é‡æ›´å¤šçš„æ—¶å€™ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ arguments å¯¹è±¡ã€‚è¿™ä¸ªæŠ€æœ¯å¯¹äºå‚æ•°æ•°é‡æ˜¯ä¸€ä¸ªå¯å˜é‡çš„å‡½æ•°æ¥è¯´æ¯”è¾ƒæœ‰ç”¨ã€‚ ä½ å¯ä»¥ç”¨ arguments.length æ¥å¾—åˆ°å‚æ•°çš„æ•°é‡ï¼Œç„¶åå¯ä»¥ç”¨ arguments object æ¥å¯¹æ¯ä¸ªå‚æ•°è¿›è¡Œå¤„ç†ã€‚ (æƒ³è¦å¾—åˆ°å‡½æ•°ç­¾åçš„å‚æ•°æ•°é‡, è¯·ä½¿ç”¨ Function.length å±æ€§ã€‚)</p>
<h2 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h2><pre><code class="javascript">arguments.callee
// æŒ‡å‘å½“å‰æ‰§è¡Œçš„å‡½æ•°ã€‚

arguments.caller 
// æŒ‡å‘è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°ã€‚

arguments.length
// æŒ‡å‘ä¼ é€’ç»™å½“å‰å‡½æ•°çš„å‚æ•°æ•°é‡ã€‚
</code></pre>
<h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><h3 id="å®šä¹‰ä¸€ä¸ªè¿æ¥å‡ ä¸ªå­—ç¬¦ä¸²çš„å‡½æ•°"><a href="#å®šä¹‰ä¸€ä¸ªè¿æ¥å‡ ä¸ªå­—ç¬¦ä¸²çš„å‡½æ•°" class="headerlink" title="å®šä¹‰ä¸€ä¸ªè¿æ¥å‡ ä¸ªå­—ç¬¦ä¸²çš„å‡½æ•°"></a>å®šä¹‰ä¸€ä¸ªè¿æ¥å‡ ä¸ªå­—ç¬¦ä¸²çš„å‡½æ•°</h3><p>è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æ¥è¿æ¥å­—ç¬¦ä¸²ã€‚è¿™ä¸ªå‡½æ•°å”¯ä¸€æ­£å¼å£°æ˜äº†çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å‚æ•°æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä½œä¸ºè¡”æ¥ç‚¹æ¥è¿æ¥å­—ç¬¦ä¸²ã€‚è¯¥å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">function myConcat(separator) {
  var args = Array.prototype.slice.call(arguments, 1);
  return args.join(separator);
}
</code></pre>
<p>ä½ å¯ä»¥ä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°åˆ°è¯¥å‡½æ•°ï¼Œç„¶åè¯¥å‡½æ•°ä¼šå°†æ¯ä¸ªå‚æ•°ä½œä¸ºä¸€ä¸ªæ¡ç›®æ¥åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ã€‚</p>
<pre><code class="javascript">myConcat(&quot;, &quot;, &quot;red&quot;, &quot;orange&quot;, &quot;blue&quot;);
// returns &quot;red, orange, blue&quot;

myConcat(&quot;; &quot;, &quot;elephant&quot;, &quot;giraffe&quot;, &quot;lion&quot;, &quot;cheetah&quot;);
// returns &quot;elephant; giraffe; lion; cheetah&quot;

myConcat(&quot;. &quot;, &quot;sage&quot;, &quot;basil&quot;, &quot;oregano&quot;, &quot;pepper&quot;, &quot;parsley&quot;);
// returns &quot;sage. basil. oregano. pepper. parsley&quot;
</code></pre>
<h3 id="å®šä¹‰ä¸€ä¸ªåˆ›å»ºHTMLåˆ—è¡¨çš„æ–¹æ³•"><a href="#å®šä¹‰ä¸€ä¸ªåˆ›å»ºHTMLåˆ—è¡¨çš„æ–¹æ³•" class="headerlink" title="å®šä¹‰ä¸€ä¸ªåˆ›å»ºHTMLåˆ—è¡¨çš„æ–¹æ³•"></a>å®šä¹‰ä¸€ä¸ªåˆ›å»ºHTMLåˆ—è¡¨çš„æ–¹æ³•</h3><p>è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°é€šè¿‡ä¸€ä¸ªå­—ç¬¦ä¸²æ¥åˆ›å»ºHTMLåˆ—è¡¨ã€‚è¿™ä¸ªå‡½æ•°å”¯ä¸€æ­£å¼å£°æ˜äº†çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚å½“è¯¥å‚æ•°ä¸º â€œuâ€ æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ— åºåˆ—è¡¨ (é¡¹ç›®åˆ—è¡¨)ï¼›å½“è¯¥å‚æ•°ä¸º â€œoâ€ æ—¶ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæœ‰åºåˆ—è¡¨ (ç¼–å·åˆ—è¡¨)ã€‚è¯¥å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">function list(type) {
  var result = &quot;&lt;&quot; + type + &quot;l&gt;&lt;li&gt;&quot;;
  var args = Array.prototype.slice.call(arguments, 1);
  result += args.join(&quot;&lt;/li&gt;&lt;li&gt;&quot;);
  result += &quot;&lt;/li&gt;&lt;/&quot; + type + &quot;l&gt;&quot;; // end list

  return result;
}
</code></pre>
<p>ä½ å¯ä»¥ä¼ é€’ä»»æ„æ•°é‡çš„å‚æ•°åˆ°è¯¥å‡½æ•°ï¼Œç„¶åè¯¥å‡½æ•°ä¼šå°†æ¯ä¸ªå‚æ•°ä½œä¸ºä¸€ä¸ªæ¡ç›®æ·»åŠ åˆ°ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šç±»å‹çš„åˆ—è¡¨å½“ä¸­ã€‚</p>
<pre><code class="javascript">var listHTML = list(&quot;u&quot;, &quot;One&quot;, &quot;Two&quot;, &quot;Three&quot;);

/* listHTML is:

&quot;&lt;ul&gt;&lt;li&gt;One&lt;/li&gt;&lt;li&gt;Two&lt;/li&gt;&lt;li&gt;Three&lt;/li&gt;&lt;/ul&gt;&quot;

*/
</code></pre>
<h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p>ES6ä¸­çš„ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ <code>arguments</code> å¯¹è±¡ï¼Œä¸è¿‡åœ¨å¤§å¤šæ•°æƒ…å½¢ä¸‹ï¼Œ<code>rest</code>å‚æ•°å¯ä»¥ç»™å‡ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼š</p>
<pre><code class="javascript">let a;
const fn = (...rest) =&gt; Array.prototype.slice.call(rest, 1);
a = fn(1, 2); // [2]
</code></pre>
<h2 id="å…³äº"><a href="#å…³äº" class="headerlink" title="å…³äº"></a>å…³äº</h2><p>GitHubï¼šğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a><br>ä¸ªäººç½‘ç«™ï¼šğŸ‘‰<a href="https://microzz.com/">https://microzz.com/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScriptä¸­çš„argumentså¯¹è±¡&quot;&gt;&lt;a href=&quot;#JavaScriptä¸­çš„argumentså¯¹è±¡&quot; class=&quot;headerlink&quot; title=&quot;JavaScriptä¸­çš„argumentså¯¹è±¡&quot;&gt;&lt;/a&gt;JavaScriptä¸­çš„argum
    
    </summary>
    
    
      <category term="JavaScrip" scheme="https://microzz.com/tags/JavaScrip/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="arguments" scheme="https://microzz.com/tags/arguments/"/>
    
  </entry>
  
  <entry>
    <title>Vue+Socket.io+Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤</title>
    <link href="https://microzz.com/2017/04/27/vue-chat/"/>
    <id>https://microzz.com/2017/04/27/vue-chat/</id>
    <published>2017-04-27T02:07:21.000Z</published>
    <updated>2017-05-14T13:47:28.934Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue-js-Socket-io-Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤"><a href="#Vue-js-Socket-io-Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤" class="headerlink" title="Vue.js+Socket.io+Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤"></a>Vue.js+Socket.io+Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤</h1><p>ğŸ‘‰<a href="https://microzz.com/2017/05/10/vuechat/">æ–‡ç« å·²æ›´æ–°è¯·çœ‹è¿™é‡Œ</a></p>
<p>QQç¾¤é‡Œé¢çš„æ™ºèƒ½æœºå™¨äººå¾ˆç«ï¼Œäºæ˜¯ç”¨Vue.js+Socket.io+Koa2æ‰“é€ äº†ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤ï¼Œå®ç°äº†IPå®šä½ã€åœ¨çº¿ç¾¤èŠï¼ŒåŠ å…¥äº†Emojiè¡¨æƒ…ğŸ˜„ï¼Œä»¥åŠæ¥å…¥äº†æ™ºèƒ½æœºå™¨äººğŸ˜</p>
<h2 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170426_vue_chat/vue_chat.gif" alt="Vue.js+Socket.io" title="">
                </div>
                <div class="image-caption">Vue.js+Socket.io</div>
            </figure> 
<p>åœ¨çº¿é¢„è§ˆåœ°å€ï¼šğŸ‘‰ <a href="https://microzz.com/vue-chat/">https://microzz.com/vue-chat/</a></p>
<h2 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="headerlink" title="æŠ€æœ¯æ ˆ"></a>æŠ€æœ¯æ ˆ</h2><ul>
<li><strong>Vue2.0</strong>ï¼šå‰ç«¯é¡µé¢å±•ç¤ºã€‚</li>
<li><strong>Socket.io</strong>ï¼šå®ç°å®æ—¶é€šä¿¡</li>
<li><strong>Vuex</strong>ï¼šVuexï¼Œå®ç°ä¸åŒç»„ä»¶é—´çš„çŠ¶æ€å…±äº«</li>
<li><strong>vue-router</strong>ï¼šé¡µé¢è·¯ç”±åˆ‡æ¢</li>
<li><strong>axios</strong>ï¼šä¸€ä¸ªåŸºäº <code>Promise</code> çš„ HTTP åº“ï¼Œå‘åç«¯å‘èµ·è¯·æ±‚ã€‚</li>
<li><strong>Express</strong>ã€<strong>Koa2</strong>ï¼šå› ä¸ºvue-cliç”Ÿæˆçš„é¡¹ç›®æ˜¯åŸºäº<strong>express</strong>çš„ï¼Œæ‰€ä»¥åœ¨å¼€å‘é˜¶æ®µæˆ‘ä½¿ç”¨çš„æ˜¯å®ƒï¼Œä½†æ˜¯çœŸæ­£ä¸Šçº¿ç”Ÿäº§ç¯å¢ƒæˆ‘æ¢æˆäº†<strong>Koa2</strong>ã€‚</li>
<li><strong>Moment.js</strong>ï¼šä¸€ä¸ªæ—¶é—´å¤„ç†çš„åº“ï¼Œæ–¹ä¾¿å¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–æˆéœ€è¦çš„æ ¼å¼ã€‚</li>
<li><strong>ES6</strong>ã€<strong>ES7</strong>ï¼šé‡‡ç”¨ES6è¯­æ³•ï¼Œè¿™æ˜¯ä»¥åçš„è¶‹åŠ¿ã€‚ç®­å¤´å‡½æ•°ã€Promiseç­‰ç­‰è¯­æ³•å¾ˆå¥½ç”¨ã€‚</li>
<li><strong>localStorage</strong>ï¼šä¿å­˜ç”¨æˆ·ä¿¡æ¯ä»¥åŠèŠå¤©è®°å½•ã€‚</li>
<li><strong>Webpack</strong>ï¼švue-cliè‡ªå¸¦Webpackï¼Œä½†æ˜¯éœ€è¦è‡ªå·±æ”¹é€ ä¸€ä¸‹ï¼Œæ¯”å¦‚è¦å¯¹éœ€è¦å®‰è£…sassç›¸å…³loaderï¼Œvue-cliå·²ç»é…ç½®å¥½äº†webpackï¼Œä½ åªéœ€è¦å®‰è£…ä¾èµ–å°±å¯ä»¥ï¼Œä½¿ç”¨çš„æ—¶å€™åªéœ€è¦<code>&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;</code>ã€‚</li>
<li><strong>SASS</strong>(<strong>SCSS</strong>)ï¼šç”¨SCSSåšCSSé¢„å¤„ç†è¯­è¨€ï¼Œæœ‰äº›åœ°æ–¹å¾ˆæ–¹ä¾¿ï¼Œä¸ªäººå¾ˆå–œæ¬¢ç”¨ã€‚(è¯¦çœ‹ğŸ‘‰<a href="https://microzz.com/2017/03/18/sass/">SASSç”¨æ³•æŒ‡å—</a>)</li>
<li><strong>flex</strong>ï¼šflexå¼¹æ€§å¸ƒå±€ï¼Œ<strong>ç®€å•</strong>é€‚é…æ‰‹æœºã€PCç«¯ã€‚</li>
<li><strong>CSS3</strong>ï¼šCSS3è¿‡æ¸¡åŠ¨ç”»åŠæ ·å¼ã€‚</li>
</ul>
<h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><h3 id="Socket-io"><a href="#Socket-io" class="headerlink" title="Socket.io"></a>Socket.io</h3><p>é€šè¿‡Express/Koaåœ¨æœåŠ¡ç«¯å¯ä»¥è¿™æ ·åš:</p>
<pre><code class="javascript">// Server (app.js)

var app = require(&#39;express&#39;)();
var server = require(&#39;http&#39;).Server(app);
var io = require(&#39;socket.io&#39;)(server);

server.listen(80);

app.get(&#39;/&#39;, function (req, res) {
  res.sendfile(__dirname + &#39;/index.html&#39;);
});

io.on(&#39;connection&#39;, function (socket) {
  socket.emit(&#39;news&#39;, { hello: &#39;world&#39; });
  socket.on(&#39;my other event&#39;, function (data) {
    console.log(data);
  });
});
</code></pre>
<p>å®¢æˆ·ç«¯ä»£ç </p>
<pre><code class="javascript">// Client (index.html)

&lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  var socket = io.connect(&#39;http://localhost&#39;);
  socket.on(&#39;news&#39;, function (data) {
    console.log(data);
    socket.emit(&#39;my other event&#39;, { my: &#39;data&#39; });
  });
&lt;/script&gt;
</code></pre>
<p>ä¸ç®¡æ˜¯æœåŠ¡å™¨è¿˜æ˜¯å®¢æˆ·ç«¯éƒ½æœ‰ <code>emit</code> å’Œ <code>on</code> è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå¯ä»¥è¯´ socket.io çš„æ ¸å¿ƒå°±æ˜¯è¿™ä¸¤ä¸ªå‡½æ•°äº†ï¼Œé€šè¿‡ <code>emit</code> å’Œ <code>on</code> å¯ä»¥è½»æ¾åœ°å®ç°æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„åŒå‘é€šä¿¡ã€‚</p>
<p><code>emit</code> ï¼šç”¨æ¥å‘å°„ä¸€ä¸ªäº‹ä»¶æˆ–è€…è¯´è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºäº‹ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè¦å‘é€çš„æ•°æ®ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼ˆä¸€èˆ¬çœç•¥ï¼Œå¦‚éœ€å¯¹æ–¹æ¥å—åˆ°ä¿¡æ¯åç«‹å³å¾—åˆ°ç¡®è®¤æ—¶ï¼Œåˆ™éœ€è¦ç”¨åˆ°å›è°ƒå‡½æ•°ï¼‰ã€‚<br><code>on</code> ï¼šç”¨æ¥ç›‘å¬ä¸€ä¸ª emit å‘å°„çš„äº‹ä»¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦ç›‘å¬çš„äº‹ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªåŒ¿åå‡½æ•°ç”¨æ¥æ¥æ”¶å¯¹æ–¹å‘æ¥çš„æ•°æ®ï¼Œè¯¥åŒ¿åå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¥æ”¶çš„æ•°æ®ï¼Œè‹¥æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ä¸ºè¦è¿”å›çš„å‡½æ•°ã€‚<br>socket.io æä¾›äº†ä¸‰ç§é»˜è®¤çš„äº‹ä»¶ï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½æœ‰ï¼‰ï¼š<code>connect</code> ã€<code>message</code> ã€<code>disconnect</code> ã€‚å½“ä¸å¯¹æ–¹å»ºç«‹è¿æ¥åè‡ªåŠ¨è§¦å‘ <code>connect</code> äº‹ä»¶ï¼Œå½“æ”¶åˆ°å¯¹æ–¹å‘æ¥çš„æ•°æ®åè§¦å‘ <code>message</code> äº‹ä»¶ï¼ˆé€šå¸¸ä¸º <code>socket.send()</code> è§¦å‘ï¼‰ï¼Œå½“å¯¹æ–¹å…³é—­è¿æ¥åè§¦å‘ <code>disconnect</code> äº‹ä»¶ã€‚</p>
<p>æ­¤å¤–ï¼Œsocket.io è¿˜æ”¯æŒè‡ªå®šä¹‰äº‹ä»¶ï¼Œæ¯•ç«Ÿä»¥ä¸Šä¸‰ç§äº‹ä»¶åº”ç”¨èŒƒå›´æœ‰é™ï¼Œæ­£æ˜¯é€šè¿‡è¿™äº›è‡ªå®šä¹‰çš„äº‹ä»¶æ‰å®ç°äº†ä¸°å¯Œå¤šå½©çš„é€šä¿¡ã€‚</p>
<p>æœ€åï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æœåŠ¡å™¨ç«¯åŒºåˆ†ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š</p>
<p><code>socket.emit()</code> ï¼šå‘å»ºç«‹è¯¥è¿æ¥çš„å®¢æˆ·ç«¯å¹¿æ’­<br><code>socket.broadcast.emit()</code> ï¼šå‘é™¤å»å»ºç«‹è¯¥è¿æ¥çš„å®¢æˆ·ç«¯çš„æ‰€æœ‰å®¢æˆ·ç«¯å¹¿æ’­<br><code>io.sockets.emit()</code> ï¼šå‘æ‰€æœ‰å®¢æˆ·ç«¯å¹¿æ’­ï¼Œç­‰åŒäºä¸Šé¢ä¸¤ä¸ªçš„å’Œ</p>
<h2 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h2><p>åœ¨Vueçš„æ–¹é¢å°±æ¯”è¾ƒå¸¸è§„äº†ï¼ŒVue2.0+Vuex+axios+vue-router,æˆ‘GitHubçš„æœ‰å‡ ä¸ªå¼€æºé¡¹ç›®å¯ä»¥å‚è€ƒğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol>
<li><p>ç»„ä»¶çŠ¶æ€å¤šäº†ç”¨Vuexç®¡ç†å¾ˆæ–¹ä¾¿ï¼Œå¼•ç”¨ Redux çš„ä½œè€… Dan Abramov çš„è¯è¯´å°±æ˜¯ï¼š</p>
<blockquote>
<p>Flux æ¶æ„å°±åƒçœ¼é•œï¼šæ‚¨è‡ªä¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å®ƒã€‚</p>
</blockquote>
</li>
<li><p>äº‹å…ˆä¸€å®šè¦å…ˆæƒ³å¥½æ•´ä¸ªé¡µé¢ç»„æˆï¼Œæ€æ ·å»åˆ†ç»„ä»¶å¼€å‘ï¼Œè¿™æ ·åœ¨å¼€å‘é˜¶æ®µä¼šäº‹åŠåŠŸå€ã€‚</p>
</li>
<li>Moment.jsåœ¨Vueä¸­ç”¨ES6çš„æ–¹å¼å¼•å…¥ä¼šæœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•åœ¨main.jså°è¯•è¿™æ ·<code>import moment from &#39;moment&#39;</code> <code>Vue.prototype.moment = moment;</code>ç»™Vueçš„åŸå‹ä¸Šæ·»åŠ momentï¼Œè¿™æ ·å°±å¯ä»¥åœ¨Vueçš„å®ä¾‹ä¸­éšæ„ä½¿ç”¨å®ƒäº†ã€‚</li>
<li>getæ–¹å¼é€šè¿‡URLä¼ å‚æœ€å¥½ä½¿ç”¨<code>encodeURI</code>å¯¹å‚æ•°è¿›è¡Œç¼–ç </li>
<li>ä¸€å®šè¦å¤„ç†å¥½é‚£äº›å¼‚æ­¥æ“ä½œï¼Œå¦åˆ™ä¼šå¸¦æ¥å„ç§é—®é¢˜ã€‚å¼€å‘é˜¶æ®µä½¿ç”¨çš„æ˜¯<code>Promise</code>ï¼Œä¸Šçº¿æ—¶å€™ä½¿ç”¨äº†ES7çš„<code>Async</code>+<code>Promise</code>çš„ç»„åˆï¼Œè®©å¼‚æ­¥æ“ä½œæ›´åŠ åˆç†ã€‚</li>
</ol>
<h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><p>å·²ç»å¼€æºï¼ŒGitHub ğŸ‘‰ <a href="https://github.com/microzz/vue-chat" target="_blank" rel="external">https://github.com/microzz/vue-chat</a></p>
<p>ğŸ“® <a href="mailto:zhaohui@microzz.com">zhaohui@microzz.com</a></p>
<p>ä¹Ÿå¯ä»¥å…³æ³¨æˆ‘çš„GitHubè·å–æœ€æ–°æƒ…å†µ<br> ğŸ‘‰ <a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a></p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>ä¸ªäººç½‘ç«™ï¼šğŸ‘‰ <a href="https://microzz.com/">microzz.com</a></p>
<p>GitHubï¼šğŸ‘‰ <a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Vue-js-Socket-io-Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤&quot;&gt;&lt;a href=&quot;#Vue-js-Socket-io-Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤&quot; class=&quot;headerlink&quot; title=&quot;Vue.js+Socket.io+Koa2æ‰“é€ ä¸€ä¸ªæ™ºèƒ½èŠå¤©å®¤&quot;&gt;
    
    </summary>
    
    
      <category term="Vue.js" scheme="https://microzz.com/tags/Vue-js/"/>
    
      <category term="Koa2" scheme="https://microzz.com/tags/Koa2/"/>
    
      <category term="Socket.io" scheme="https://microzz.com/tags/Socket-io/"/>
    
  </entry>
  
  <entry>
    <title>iTerm2 å¿«æ·é”®å¤§å…¨</title>
    <link href="https://microzz.com/2017/04/22/iterm2/"/>
    <id>https://microzz.com/2017/04/22/iterm2/</id>
    <published>2017-04-22T02:03:18.000Z</published>
    <updated>2017-04-22T02:34:29.762Z</updated>
    
    <content type="html"><![CDATA[<h1 id="iTerm2-å¿«æ·é”®å¤§å…¨-æå‡Macå¼€å‘æ•ˆç‡"><a href="#iTerm2-å¿«æ·é”®å¤§å…¨-æå‡Macå¼€å‘æ•ˆç‡" class="headerlink" title="iTerm2 å¿«æ·é”®å¤§å…¨ æå‡Macå¼€å‘æ•ˆç‡"></a>iTerm2 å¿«æ·é”®å¤§å…¨ æå‡Macå¼€å‘æ•ˆç‡</h1><h2 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h2><p>æ–°å»ºæ ‡ç­¾ï¼š<code>command + t</code></p>
<p>å…³é—­æ ‡ç­¾ï¼š<code>command + w</code></p>
<p>åˆ‡æ¢æ ‡ç­¾ï¼š<br><code>command + æ•°å­—</code> <code>command + å·¦å³æ–¹å‘é”®</code></p>
<p>åˆ‡æ¢å…¨å±ï¼š<code>command + enter</code></p>
<p>æŸ¥æ‰¾ï¼š<code>command + f</code></p>
<h2 id="åˆ†å±"><a href="#åˆ†å±" class="headerlink" title="åˆ†å±"></a>åˆ†å±</h2><p>å‚ç›´åˆ†å±ï¼š<code>command + d</code></p>
<p>æ°´å¹³åˆ†å±ï¼š<code>command + shift + d</code></p>
<p>åˆ‡æ¢å±å¹•ï¼š<br><code>command + option + æ–¹å‘é”®</code><br><code>command + [</code> æˆ– <code>command + ]</code></p>
<p>æŸ¥çœ‹å†å²å‘½ä»¤ï¼š<code>command + ;</code></p>
<p>æŸ¥çœ‹å‰ªè´´æ¿å†å²ï¼š<code>command + shift + h</code></p>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p>æ¸…é™¤å½“å‰è¡Œï¼š<code>ctrl + u</code></p>
<p>åˆ°è¡Œé¦–ï¼š<code>ctrl + a</code></p>
<p>åˆ°è¡Œå°¾ï¼š<code>ctrl + e</code></p>
<p>å‰è¿›åé€€ï¼š<code>ctrl + f/b</code> (ç›¸å½“äºå·¦å³æ–¹å‘é”®)</p>
<p>ä¸Šä¸€æ¡å‘½ä»¤ï¼š<code>ctrl + p</code></p>
<p>æœç´¢å‘½ä»¤å†å²ï¼š<code>ctrl + r</code></p>
<p>åˆ é™¤å½“å‰å…‰æ ‡çš„å­—ç¬¦ï¼š<code>ctrl + d</code></p>
<p>åˆ é™¤å…‰æ ‡ä¹‹å‰çš„å­—ç¬¦ï¼š<code>ctrl + h</code></p>
<p>åˆ é™¤å…‰æ ‡ä¹‹å‰çš„å•è¯ï¼š<code>ctrl + w</code></p>
<p>åˆ é™¤åˆ°æ–‡æœ¬æœ«å°¾ï¼š<code>ctrl + k</code></p>
<p>äº¤æ¢å…‰æ ‡å¤„æ–‡æœ¬ï¼š<code>ctrl + t</code></p>
<p>æ¸…å±1ï¼š<code>command + r</code></p>
<p>æ¸…å±2ï¼š<code>ctrl + l</code></p>
<h2 id="è‡ªå¸¦æœ‰å“ªäº›å¾ˆå®ç”¨çš„åŠŸèƒ½-å¿«æ·é”®"><a href="#è‡ªå¸¦æœ‰å“ªäº›å¾ˆå®ç”¨çš„åŠŸèƒ½-å¿«æ·é”®" class="headerlink" title="è‡ªå¸¦æœ‰å“ªäº›å¾ˆå®ç”¨çš„åŠŸèƒ½/å¿«æ·é”®"></a>è‡ªå¸¦æœ‰å“ªäº›å¾ˆå®ç”¨çš„åŠŸèƒ½/å¿«æ·é”®</h2><p><code>âŒ˜ + æ•°å­—</code> åœ¨å„ tab æ ‡ç­¾ç›´æ¥æ¥å›åˆ‡æ¢</p>
<p>é€‰æ‹©å³å¤åˆ¶ + é¼ æ ‡ä¸­é”®ç²˜è´´ï¼Œè¿™ä¸ªå¾ˆå®ç”¨</p>
<p><code>âŒ˜ + f</code> æ‰€æŸ¥æ‰¾çš„å†…å®¹ä¼šè¢«è‡ªåŠ¨å¤åˆ¶</p>
<p><code>âŒ˜ + d</code> æ¨ªç€åˆ†å± /<br><code>âŒ˜ + shift + d</code> ç«–ç€åˆ†å±</p>
<p><code>âŒ˜ + r</code> = <code>clear</code>ï¼Œè€Œä¸”åªæ˜¯æ¢åˆ°æ–°ä¸€å±ï¼Œä¸ä¼šæƒ³ <code>clear</code> ä¸€æ ·åˆ›å»ºä¸€ä¸ªç©ºå±</p>
<p><code>ctrl + u</code> æ¸…ç©ºå½“å‰è¡Œï¼Œæ— è®ºå…‰æ ‡åœ¨ä»€ä¹ˆä½ç½®</p>
<p>è¾“å…¥å¼€å¤´å‘½ä»¤å æŒ‰ <code>âŒ˜ + ;</code> ä¼šè‡ªåŠ¨åˆ—å‡ºè¾“å…¥è¿‡çš„å‘½ä»¤</p>
<p><code>âŒ˜ + shift + h</code> ä¼šåˆ—å‡ºå‰ªåˆ‡æ¿å†å²</p>
<p>å¯ä»¥åœ¨ Preferences &gt; keys è®¾ç½®å…¨å±€å¿«æ·é”®è°ƒå‡º itermï¼Œè¿™ä¸ªä¹Ÿå¯ä»¥ç”¨è¿‡ Alfred å®ç°</p>
<h2 id="å¸¸ç”¨çš„ä¸€äº›å¿«æ·é”®"><a href="#å¸¸ç”¨çš„ä¸€äº›å¿«æ·é”®" class="headerlink" title="å¸¸ç”¨çš„ä¸€äº›å¿«æ·é”®"></a>å¸¸ç”¨çš„ä¸€äº›å¿«æ·é”®</h2><p><code>âŒ˜ + 1 / 2</code> å·¦å³ tab ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œè¿™ä¸ªåœ¨ å‰é¢ å·²ç»ä»‹ç»è¿‡äº†</p>
<p><code>âŒ˜â†</code> / <code>âŒ˜â†’</code> åˆ°ä¸€è¡Œå‘½ä»¤æœ€å·¦è¾¹/æœ€å³è¾¹ ï¼Œè¿™ä¸ªåŠŸèƒ½åŒ <code>C+a</code> / <code>C+e</code></p>
<p><code>âŒ¥â†</code> / <code>âŒ¥â†’</code> æŒ‰å•è¯å‰ç§»/åç§»ï¼Œç›¸å½“ä¸ <code>C+f</code> / <code>C+b</code>ï¼Œå…¶å®è¿™ä¸ªåŠŸèƒ½åœ¨Itermä¸­å·²ç»é¢„å®šä¹‰å¥½äº†ï¼Œ<code>âŒ¥f</code> / <code>âŒ¥b</code>ï¼Œçœ‹ä¸ªäººä¹ æƒ¯äº†</p>
<p>å¥½åƒå°±è¿™å‡ ä¸ª</p>
<p>è®¾ç½®æ–¹æ³•å¦‚ä¸‹</p>
<p>å½“ç„¶é™¤äº†è¿™äº›å¯ä»¥è‡ªå®šä¹‰çš„ä¹Ÿä¸èƒ½å¿˜äº† linux ä¸‹é‚£äº›å¥½ç”¨çš„ç»„åˆ</p>
<p><code>C+a</code> / <code>C+e</code> è¿™ä¸ªå‡ ä¹åœ¨å“ªéƒ½å¯ä»¥ä½¿ç”¨</p>
<p><code>C+p</code> / <code>!!</code> ä¸Šä¸€æ¡å‘½ä»¤</p>
<p><code>C+k</code> ä»å…‰æ ‡å¤„åˆ è‡³å‘½ä»¤è¡Œå°¾ (æœ¬æ¥ <code>C+u</code> æ˜¯åˆ è‡³å‘½ä»¤è¡Œé¦–ï¼Œä½†itermä¸­æ˜¯åˆ æ‰æ•´è¡Œ)</p>
<p><code>C+w</code> <code>A+d</code> ä»å…‰æ ‡å¤„åˆ è‡³å­—é¦–/å°¾</p>
<p><code>C+h</code> <code>C+d</code> åˆ æ‰å…‰æ ‡å‰åçš„è‡ªè´Ÿ</p>
<p><code>C+y</code> ç²˜è´´è‡³å…‰æ ‡å</p>
<p><code>C+r</code> æœç´¢å‘½ä»¤å†å²ï¼Œè¿™ä¸ªè¾ƒå¸¸ç”¨</p>
<h2 id="é€‰ä¸­å³å¤åˆ¶"><a href="#é€‰ä¸­å³å¤åˆ¶" class="headerlink" title="é€‰ä¸­å³å¤åˆ¶"></a>é€‰ä¸­å³å¤åˆ¶</h2><p>iterm2 æœ‰ 2 ç§å¥½ç”¨çš„é€‰ä¸­å³å¤åˆ¶æ¨¡å¼ã€‚</p>
<p>ä¸€ç§æ˜¯ç”¨é¼ æ ‡ï¼Œåœ¨ iterm2 ä¸­ï¼Œé€‰ä¸­æŸä¸ªè·¯å¾„æˆ–è€…æŸä¸ªè¯æ±‡ï¼Œé‚£ä¹ˆï¼Œiterm2 å°±è‡ª åŠ¨å¤åˆ¶äº†ã€‚<br> ã€€ã€€<br>å¦ä¸€ç§æ˜¯æ— é¼ æ ‡æ¨¡å¼ï¼Œcommand+f,å¼¹å‡º iterm2 çš„æŸ¥æ‰¾æ¨¡å¼ï¼Œè¾“å…¥è¦æŸ¥æ‰¾å¹¶å¤åˆ¶çš„å†…å®¹çš„å‰å‡ ä¸ªå­—æ¯ï¼Œç¡®è®¤æ‰¾åˆ°çš„æ˜¯è‡ªå·±çš„å†…å®¹ä¹‹åï¼Œè¾“å…¥ tabï¼ŒæŸ¥æ‰¾çª—å£å°†è‡ªåŠ¨å˜åŒ–å†…å®¹ï¼Œå¹¶å°†å…¶å¤åˆ¶ã€‚å¦‚æœè¾“å…¥çš„æ˜¯ shift+tabï¼Œåˆ™è‡ªåŠ¨å°†æŸ¥æ‰¾å†…å®¹çš„å·¦è¾¹é€‰ä¸­å¹¶å¤åˆ¶ã€‚</p>
<p>è‡ªåŠ¨å®Œæˆ<br>è¾“å…¥æ‰“å¤´å‡ ä¸ªå­—æ¯ï¼Œç„¶åè¾“å…¥ <code>command+;</code> iterm2 å°†è‡ªåŠ¨åˆ—å‡ºä¹‹å‰è¾“å…¥è¿‡çš„ç±»ä¼¼å‘½ä»¤ã€‚ ã€€ã€€</p>
<h2 id="å‰ªåˆ‡å†å²"><a href="#å‰ªåˆ‡å†å²" class="headerlink" title="å‰ªåˆ‡å†å²"></a>å‰ªåˆ‡å†å²</h2><p>è¾“å…¥ <code>command+shift+h</code>ï¼Œiterm2 å°†è‡ªåŠ¨åˆ—å‡ºå‰ªåˆ‡æ¿çš„å†å²è®°å½•ã€‚å¦‚æœéœ€è¦å°†å‰ªåˆ‡æ¿çš„å†å²è®°å½•ä¿å­˜åˆ°ç£ç›˜ï¼Œåœ¨ Preferences &gt; General &gt; Save copy/paste history to disk ä¸­è®¾ç½®ã€‚</p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>ä¸ªäººç½‘ç«™ï¼šğŸ‘‰ <a href="https://microzz.com/">https://microzz.com/</a></p>
<p>GitHubï¼šğŸ‘‰ <a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;iTerm2-å¿«æ·é”®å¤§å…¨-æå‡Macå¼€å‘æ•ˆç‡&quot;&gt;&lt;a href=&quot;#iTerm2-å¿«æ·é”®å¤§å…¨-æå‡Macå¼€å‘æ•ˆç‡&quot; class=&quot;headerlink&quot; title=&quot;iTerm2 å¿«æ·é”®å¤§å…¨ æå‡Macå¼€å‘æ•ˆç‡&quot;&gt;&lt;/a&gt;iTerm2 å¿«æ·é”®å¤§å…¨ æå‡Macå¼€å‘
    
    </summary>
    
    
      <category term="å¼€å‘è€…" scheme="https://microzz.com/tags/%E5%BC%80%E5%8F%91%E8%80%85/"/>
    
      <category term="Mac" scheme="https://microzz.com/tags/Mac/"/>
    
      <category term="iTerm2" scheme="https://microzz.com/tags/iTerm2/"/>
    
  </entry>
  
  <entry>
    <title>åŸç”ŸJSä¸­å¯¹è±¡ç›¸å…³APIåˆé›†</title>
    <link href="https://microzz.com/2017/04/20/jsobject/"/>
    <id>https://microzz.com/2017/04/20/jsobject/</id>
    <published>2017-04-20T10:02:48.000Z</published>
    <updated>2017-04-24T10:30:26.818Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸç”ŸJavaScriptä¸­å¯¹è±¡ç›¸å…³APIåˆé›†-å¯¹è±¡ç¯‡"><a href="#åŸç”ŸJavaScriptä¸­å¯¹è±¡ç›¸å…³APIåˆé›†-å¯¹è±¡ç¯‡" class="headerlink" title="åŸç”ŸJavaScriptä¸­å¯¹è±¡ç›¸å…³APIåˆé›†-å¯¹è±¡ç¯‡"></a>åŸç”ŸJavaScriptä¸­å¯¹è±¡ç›¸å…³APIåˆé›†-å¯¹è±¡ç¯‡</h1><p>ç°åœ¨jQueryå·²ç»æ²¡æœ‰é‚£ä¹ˆæœ‰ä¼˜åŠ¿äº†ï¼ŒåŸç”ŸJSèµ¶ç´§å­¦èµ·æ¥ğŸ˜„<br><strong>é™„</strong>ï¼š<br>ğŸ‘‰<a href="https://microzz.com/2017/04/06/jsdom/">åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†-DOMæ“ä½œç¯‡</a><br>ğŸ‘‰<a href="https://microzz.com/2017/04/14/jscss/">åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†-CSSæ“ä½œç¯‡</a></p>
<h2 id="Objectå¯¹è±¡"><a href="#Objectå¯¹è±¡" class="headerlink" title="Objectå¯¹è±¡"></a>Objectå¯¹è±¡</h2><h3 id="ç”Ÿæˆå®ä¾‹å¯¹è±¡"><a href="#ç”Ÿæˆå®ä¾‹å¯¹è±¡" class="headerlink" title="ç”Ÿæˆå®ä¾‹å¯¹è±¡"></a>ç”Ÿæˆå®ä¾‹å¯¹è±¡</h3><pre><code class="javascript">var o = new Object()
</code></pre>
<h3 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><pre><code class="javascript">Object.prototype   //è¿”å›åŸå‹å¯¹è±¡
</code></pre>
<h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><pre><code class="javascript">Object.keys(o)   //éå†å¯¹è±¡çš„å¯æšä¸¾å±æ€§
Object.getOwnPropertyName(o)   //éå†å¯¹è±¡ä¸å¯æšä¸¾çš„å±æ€§
</code></pre>
<h3 id="å¯¹è±¡å®ä¾‹çš„æ–¹æ³•"><a href="#å¯¹è±¡å®ä¾‹çš„æ–¹æ³•" class="headerlink" title="å¯¹è±¡å®ä¾‹çš„æ–¹æ³•"></a>å¯¹è±¡å®ä¾‹çš„æ–¹æ³•</h3><pre><code class="javascript">valueOf // è¿”å›å½“å‰å¯¹è±¡å¯¹åº”çš„å€¼ã€‚  
toString // è¿”å›å½“å‰å¯¹è±¡å¯¹åº”çš„å­—ç¬¦ä¸²å½¢å¼ã€‚  
toLocaleString // è¿”å›å½“å‰å¯¹è±¡å¯¹åº”çš„æœ¬åœ°å­—ç¬¦ä¸²å½¢å¼ã€‚  
hasOwnProperty // åˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦ä¸ºå½“å‰å¯¹è±¡è‡ªèº«çš„å±æ€§ï¼Œè¿˜æ˜¯ç»§æ‰¿è‡ªåŸå‹å¯¹è±¡çš„å±æ€§ã€‚ 
isPrototypeOf // åˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦ä¸ºå¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ã€‚
propertyIsEnumerable // åˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦å¯æšä¸¾ã€‚
</code></pre>
<h2 id="Arrayå¯¹è±¡"><a href="#Arrayå¯¹è±¡" class="headerlink" title="Arrayå¯¹è±¡"></a>Arrayå¯¹è±¡</h2><h3 id="ç”Ÿæˆå®ä¾‹å¯¹è±¡-1"><a href="#ç”Ÿæˆå®ä¾‹å¯¹è±¡-1" class="headerlink" title="ç”Ÿæˆå®ä¾‹å¯¹è±¡"></a>ç”Ÿæˆå®ä¾‹å¯¹è±¡</h3><pre><code class="javascript">var a = new Array()
</code></pre>
<h3 id="å±æ€§-1"><a href="#å±æ€§-1" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><pre><code class="javascript">a.length  // é•¿åº¦
</code></pre>
<h3 id="Array-isArray"><a href="#Array-isArray" class="headerlink" title="Array.isArray()"></a>Array.isArray()</h3><pre><code class="javascript">Array.isArray(a)   // ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•°ç»„
</code></pre>
<h3 id="Arrayå®ä¾‹çš„æ–¹æ³•"><a href="#Arrayå®ä¾‹çš„æ–¹æ³•" class="headerlink" title="Arrayå®ä¾‹çš„æ–¹æ³•"></a>Arrayå®ä¾‹çš„æ–¹æ³•</h3><pre><code class="javascript">a.valueof()   // è¿”å›æ•°ç»„æœ¬èº«

a.toString()  // è¿”å›æ•°ç»„çš„å­—ç¬¦ä¸²å½¢å¼

a.push(value,vlaue....)   
// ç”¨äºåœ¨æ•°ç»„çš„æœ«ç«¯æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œ
// å¹¶è¿”å›æ·»åŠ æ–°å…ƒç´ åçš„æ•°ç»„é•¿åº¦ã€‚

pop()   // ç”¨äºåˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ 

join()  
// ä»¥å‚æ•°ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå°†æ‰€æœ‰æ•°ç»„æˆå‘˜ç»„æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›ã€‚
// å¦‚æœä¸æä¾›å‚æ•°ï¼Œé»˜è®¤ç”¨é€—å·åˆ†éš”ã€‚

concat()  
// ç”¨äºå¤šä¸ªæ•°ç»„çš„åˆå¹¶ã€‚å®ƒå°†æ–°æ•°ç»„çš„æˆå‘˜ï¼Œ
// æ·»åŠ åˆ°åŸæ•°ç»„çš„å°¾éƒ¨ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼ŒåŸæ•°ç»„ä¸å˜ã€‚

shift()  // ç”¨äºåˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ ã€‚

unshift(value)  
// ç”¨äºåœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®æ·»åŠ å…ƒç´ ï¼Œ
// å¹¶è¿”å›æ·»åŠ æ–°å…ƒç´ åçš„æ•°ç»„é•¿åº¦ã€‚

reverse()   // ç”¨äºé¢ å€’æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåºï¼Œè¿”å›æ”¹å˜åçš„æ•°ç»„

slice(start_index, upto_index)
// ç”¨äºæå–åŸæ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼ŒåŸæ•°ç»„ä¸å˜ã€‚
// ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºèµ·å§‹ä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç»ˆæ­¢ä½ç½®
// ï¼ˆä½†è¯¥ä½ç½®çš„å…ƒç´ æœ¬èº«ä¸åŒ…æ‹¬åœ¨å†…ï¼‰ã€‚
// å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ä¸€ç›´è¿”å›åˆ°åŸæ•°ç»„çš„æœ€åä¸€ä¸ªæˆå‘˜ã€‚
// è´Ÿæ•°è¡¨ç¤ºå€’æ•°ç¬¬å‡ ä¸ªã€‚

splice(index, count_to_remove, addElement1, addElement2, ...);   
// ç”¨äºåˆ é™¤åŸæ•°ç»„çš„ä¸€éƒ¨åˆ†æˆå‘˜ï¼Œå¹¶å¯ä»¥åœ¨è¢«åˆ é™¤çš„ä½ç½®æ·»åŠ å…¥æ–°çš„æ•°ç»„æˆå‘˜ï¼Œ
// è¿”å›å€¼æ˜¯è¢«åˆ é™¤çš„å…ƒç´ ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åˆ é™¤çš„èµ·å§‹ä½ç½®ï¼Œ
// ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¢«åˆ é™¤çš„å…ƒç´ ä¸ªæ•°ã€‚å¦‚æœåé¢è¿˜æœ‰æ›´å¤šçš„å‚æ•°ï¼Œ
// åˆ™è¡¨ç¤ºè¿™äº›å°±æ˜¯è¦è¢«æ’å…¥æ•°ç»„çš„æ–°å…ƒç´ ã€‚

sort()   
// å¯¹æ•°ç»„æˆå‘˜è¿›è¡Œæ’åºï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å­—å…¸é¡ºåºæ’åºã€‚
// æ’åºåï¼ŒåŸæ•°ç»„å°†è¢«æ”¹å˜ã€‚å¦‚æœæƒ³è®©sortæ–¹æ³•æŒ‰ç…§è‡ªå®šä¹‰æ–¹å¼æ’åºï¼Œ
// å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºæŒ‰ç…§è‡ªå®šä¹‰æ–¹æ³•è¿›è¡Œæ’åºã€‚
// è¯¥å‡½æ•°æœ¬èº«åˆæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿›è¡Œæ¯”è¾ƒçš„ä¸¤ä¸ªå…ƒç´ ã€‚
// å¦‚æœè¿”å›å€¼å¤§äº0ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå…ƒç´ æ’åœ¨ç¬¬äºŒä¸ªå…ƒç´ åé¢ï¼›
// å…¶ä»–æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ æ’åœ¨ç¬¬äºŒä¸ªå…ƒç´ å‰é¢ã€‚

map()   
// å¯¹æ•°ç»„çš„æ‰€æœ‰æˆå‘˜ä¾æ¬¡è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®å‡½æ•°ç»“æœè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚

map(elem,index,arr)   
// mapæ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ã€‚
// è¯¥å‡½æ•°è°ƒç”¨æ—¶ï¼Œmapæ–¹æ³•ä¼šå°†å…¶ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œ
// åˆ†åˆ«æ˜¯å½“å‰æˆå‘˜ã€å½“å‰ä½ç½®å’Œæ•°ç»„æœ¬èº«ã€‚

forEach()   
// éå†æ•°ç»„çš„æ‰€æœ‰æˆå‘˜ï¼Œæ‰§è¡ŒæŸç§æ“ä½œ,å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚
// å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å½“å‰ä½ç½®çš„å€¼ã€å½“å‰ä½ç½®çš„ç¼–å·å’Œæ•´ä¸ªæ•°ç»„ã€‚

filter()   
// å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å‡½æ•°ï¼Œ
// è¿”å›ç»“æœä¸ºtrueçš„æˆå‘˜ç»„æˆä¸€ä¸ªæ–°æ•°ç»„è¿”å›ã€‚è¯¥æ–¹æ³•ä¸ä¼šæ”¹å˜åŸæ•°ç»„ã€‚

some()    
// ç”¨æ¥åˆ¤æ–­æ•°ç»„æˆå‘˜æ˜¯å¦ç¬¦åˆæŸç§æ¡ä»¶ã€‚
// æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚
// è¯¥å‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡æ˜¯å½“å‰ä½ç½®çš„æˆå‘˜ã€å½“å‰ä½ç½®çš„åºå·å’Œæ•´ä¸ªæ•°ç»„ã€‚
// åªè¦æœ‰ä¸€ä¸ªæ•°ç»„æˆå‘˜çš„è¿”å›å€¼æ˜¯trueï¼Œåˆ™æ•´ä¸ªsomeæ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯trueï¼Œå¦åˆ™falseã€‚

every()   
// ç”¨æ¥åˆ¤æ–­æ•°ç»„æˆå‘˜æ˜¯å¦ç¬¦åˆæŸç§æ¡ä»¶ã€‚
// æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚
// è¯¥å‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡æ˜¯å½“å‰ä½ç½®çš„æˆå‘˜ã€å½“å‰ä½ç½®çš„åºå·å’Œæ•´ä¸ªæ•°ç»„ã€‚
// æ‰€æœ‰æ•°ç»„æˆå‘˜çš„è¿”å›å€¼éƒ½æ˜¯trueï¼Œæ‰è¿”å›trueï¼Œå¦åˆ™falseã€‚

reduce()   
// ä¾æ¬¡å¤„ç†æ•°ç»„çš„æ¯ä¸ªæˆå‘˜ï¼Œæœ€ç»ˆç´¯è®¡ä¸ºä¸€ä¸ªå€¼ã€‚
// ä»å·¦åˆ°å³å¤„ç†ï¼ˆä»ç¬¬ä¸€ä¸ªæˆå‘˜åˆ°æœ€åä¸€ä¸ªæˆå‘˜ï¼‰

reduceRight()  
// ä¾æ¬¡å¤„ç†æ•°ç»„çš„æ¯ä¸ªæˆå‘˜ï¼Œæœ€ç»ˆç´¯è®¡ä¸ºä¸€ä¸ªå€¼ã€‚
// ä»å³åˆ°å·¦ï¼ˆä»æœ€åä¸€ä¸ªæˆå‘˜åˆ°ç¬¬ä¸€ä¸ªæˆå‘˜ï¼‰

indexOf(s)   
// è¿”å›ç»™å®šå…ƒç´ åœ¨æ•°ç»„ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚
// å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæœç´¢çš„å¼€å§‹ä½ç½®

lastIndexOf()  
// è¿”å›ç»™å®šå…ƒç´ åœ¨æ•°ç»„ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚
</code></pre>
<h2 id="Numberå¯¹è±¡"><a href="#Numberå¯¹è±¡" class="headerlink" title="Numberå¯¹è±¡"></a>Numberå¯¹è±¡</h2><h3 id="ç”Ÿæˆå¯¹è±¡"><a href="#ç”Ÿæˆå¯¹è±¡" class="headerlink" title="ç”Ÿæˆå¯¹è±¡"></a>ç”Ÿæˆå¯¹è±¡</h3><pre><code class="javascript">var n = new Number()
</code></pre>
<h3 id="Numberå¯¹è±¡çš„å±æ€§"><a href="#Numberå¯¹è±¡çš„å±æ€§" class="headerlink" title="Numberå¯¹è±¡çš„å±æ€§"></a>Numberå¯¹è±¡çš„å±æ€§</h3><pre><code class="javascript">Number.POSITIVE_INFINITY // æ­£çš„æ— é™ï¼ŒæŒ‡å‘Infinityã€‚

Number.NEGATIVE_INFINITY // è´Ÿçš„æ— é™ï¼ŒæŒ‡å‘-Infinityã€‚

Number.NaN // è¡¨ç¤ºéæ•°å€¼ï¼ŒæŒ‡å‘NaNã€‚  

Number.MAX_VALUE // è¡¨ç¤ºæœ€å¤§çš„æ­£æ•°ï¼Œç›¸åº”çš„ï¼Œæœ€å°çš„è´Ÿæ•°ä¸º-Number.MAX_VALUEã€‚  

Number.MIN_VALUE 
// è¡¨ç¤ºæœ€å°çš„æ­£æ•°ï¼ˆå³æœ€æ¥è¿‘0çš„æ­£æ•°ï¼Œåœ¨64ä½æµ®ç‚¹æ•°ä½“ç³»ä¸­ä¸º5e-324ï¼‰ï¼Œ
// ç›¸åº”çš„ï¼Œæœ€æ¥è¿‘0çš„è´Ÿæ•°ä¸º-Number.MIN_VALUEã€‚ 

Number.MAX_SAFE_INTEGER // è¡¨ç¤ºèƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºçš„æœ€å¤§æ•´æ•°ï¼Œå³9007199254740991ã€‚  

Number.MIN_SAFE_INTEGER // è¡¨ç¤ºèƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºçš„æœ€å°æ•´æ•°ï¼Œå³-9007199254740991ã€‚
</code></pre>
<h3 id="Numberå¯¹è±¡å®ä¾‹çš„æ–¹æ³•"><a href="#Numberå¯¹è±¡å®ä¾‹çš„æ–¹æ³•" class="headerlink" title="Numberå¯¹è±¡å®ä¾‹çš„æ–¹æ³•"></a>Numberå¯¹è±¡å®ä¾‹çš„æ–¹æ³•</h3><pre><code class="javascript">toString()   
// ç”¨æ¥å°†ä¸€ä¸ªæ•°å€¼è½¬ä¸ºå­—ç¬¦ä¸²å½¢å¼.å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¾“å‡ºçš„è¿›åˆ¶ã€‚
// å¦‚æœçœç•¥è¿™ä¸ªå‚æ•°ï¼Œé»˜è®¤å°†æ•°å€¼å…ˆè½¬ä¸ºåè¿›åˆ¶ï¼Œå†è¾“å‡ºå­—ç¬¦ä¸²ï¼›
// å¦åˆ™ï¼Œå°±æ ¹æ®å‚æ•°æŒ‡å®šçš„è¿›åˆ¶ï¼Œå°†ä¸€ä¸ªæ•°å­—è½¬åŒ–æˆæŸä¸ªè¿›åˆ¶çš„å­—ç¬¦ä¸²ã€‚

toFixed()   // ç”¨äºå°†ä¸€ä¸ªæ•°è½¬ä¸ºæŒ‡å®šä½æ•°çš„å°æ•°ï¼Œè¿”å›è¿™ä¸ªå°æ•°å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚

toExponential()  
// ç”¨äºå°†ä¸€ä¸ªæ•°è½¬ä¸ºç§‘å­¦è®¡æ•°æ³•å½¢å¼ã€‚
//å¯ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°è¡¨ç¤ºå°æ•°ç‚¹åæœ‰æ•ˆæ•°å­—çš„ä½æ•°ï¼ŒèŒƒå›´ä¸º0åˆ°20ï¼Œ
// è¶…å‡ºè¿™ä¸ªèŒƒå›´ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªRangeErrorã€‚

toPrecision()  // ç”¨äºå°†ä¸€ä¸ªæ•°è½¬ä¸ºæŒ‡å®šä½æ•°çš„æœ‰æ•ˆæ•°å­—ã€‚
</code></pre>
<h2 id="String-å¯¹è±¡"><a href="#String-å¯¹è±¡" class="headerlink" title="String å¯¹è±¡"></a>String å¯¹è±¡</h2><h3 id="ç”Ÿæˆå®ä¾‹å¯¹è±¡-2"><a href="#ç”Ÿæˆå®ä¾‹å¯¹è±¡-2" class="headerlink" title="ç”Ÿæˆå®ä¾‹å¯¹è±¡"></a>ç”Ÿæˆå®ä¾‹å¯¹è±¡</h3><pre><code class="javascript">var s = new String()
</code></pre>
<h3 id="Stringå¯¹è±¡çš„å±æ€§"><a href="#Stringå¯¹è±¡çš„å±æ€§" class="headerlink" title="Stringå¯¹è±¡çš„å±æ€§"></a>Stringå¯¹è±¡çš„å±æ€§</h3><pre><code class="javascript">s.length   //è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦
</code></pre>
<h3 id="æ–¹æ³•-1"><a href="#æ–¹æ³•-1" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><pre><code class="javascript">s.chatAt(index)   // è¿”å›æŒ‡å®šä½ç½®çš„å­—ç¬¦

s.fromCharCode()    // è¯¥æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ç³»åˆ—Unicodeç ç‚¹ï¼Œè¿”å›å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚

s.charCodeAt(index)    // è¿”å›ç»™å®šä½ç½®å­—ç¬¦çš„Unicodeç ç‚¹ï¼ˆåè¿›åˆ¶è¡¨ç¤ºï¼‰

s.concat(s2)  // ç”¨äºè¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²

s.slice(start,end)   
// ç”¨äºä»åŸå­—ç¬¦ä¸²å–å‡ºå­å­—ç¬¦ä¸²å¹¶è¿”å›ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸²ã€‚
// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ï¼ˆä¸å«è¯¥ä½ç½®ï¼‰ã€‚
// å¦‚æœå‚æ•°æ˜¯è´Ÿå€¼ï¼Œè¡¨ç¤ºä»ç»“å°¾å¼€å§‹å€’æ•°è®¡ç®—çš„ä½ç½®ï¼Œå³è¯¥è´Ÿå€¼åŠ ä¸Šå­—ç¬¦ä¸²é•¿åº¦ã€‚

s.substring(start,end)  
// ç”¨äºä»åŸå­—ç¬¦ä¸²å–å‡ºå­å­—ç¬¦ä¸²å¹¶è¿”å›ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸².
// ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå­å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªä½ç½®è¡¨ç¤ºç»“æŸä½ç½®ã€‚

s.substr(start,length)   
// ç”¨äºä»åŸå­—ç¬¦ä¸²å–å‡ºå­å­—ç¬¦ä¸²å¹¶è¿”å›ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸²ã€‚
// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚
// å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è´Ÿæ•°ï¼Œè¡¨ç¤ºå€’æ•°è®¡ç®—çš„å­—ç¬¦ä½ç½®ã€‚
// å¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯è´Ÿæ•°ï¼Œå°†è¢«è‡ªåŠ¨è½¬ä¸º0ï¼Œå› æ­¤ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚

s.indexOf(s)   
// è¿”å›ç»™å®šå…ƒç´ åœ¨å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚
// å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæœç´¢çš„å¼€å§‹ä½ç½® 

s.lastIndexOf()  
// è¿”å›ç»™å®šå…ƒç´ åœ¨å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚

s.trim()  // ç”¨äºå»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼ï¼Œè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²

s.toLowerCase()  // ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå°å†™,è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸²ã€‚

s.toUpperCase()  // å…¨éƒ¨è½¬ä¸ºå¤§å†™

s.localeCompare(s2)  
// ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚å®ƒè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œå¦‚æœå°äº0ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å°äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼›
// å¦‚æœç­‰äº0ï¼Œè¡¨ç¤ºä¸¤è€…ç›¸ç­‰ï¼›å¦‚æœå¤§äº0ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å¤§äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ã€‚

s.match(regexp)   
// ç”¨äºç¡®å®šåŸå­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…æŸä¸ªå­å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œ
// æˆå‘˜ä¸ºåŒ¹é…çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…ï¼Œåˆ™è¿”å›nullã€‚

s.search()  // è¿”å›å€¼ä¸ºåŒ¹é…çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…ï¼Œåˆ™è¿”å›-1ã€‚

s.replace(oldValue,newValue)  
// ç”¨äºæ›¿æ¢åŒ¹é…çš„å­å­—ç¬¦ä¸²ï¼Œä¸€èˆ¬æƒ…å†µä¸‹åªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…
// ï¼ˆé™¤éä½¿ç”¨å¸¦æœ‰gä¿®é¥°ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚

s.split()  
// æŒ‰ç…§ç»™å®šè§„åˆ™åˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªç”±åˆ†å‰²å‡ºæ¥çš„å­å­—ç¬¦ä¸²ç»„æˆçš„æ•°ç»„ã€‚
// è¿˜å¯ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå†³å®šäº†è¿”å›æ•°ç»„çš„æˆå‘˜æ•°ã€‚
</code></pre>
<h2 id="Mathå¯¹è±¡"><a href="#Mathå¯¹è±¡" class="headerlink" title="Mathå¯¹è±¡"></a>Mathå¯¹è±¡</h2><h3 id="å±æ€§-2"><a href="#å±æ€§-2" class="headerlink" title="å±æ€§"></a>å±æ€§</h3><pre><code class="javascript">Math.E  // å¸¸æ•°eã€‚  
Math.LN2  // 2çš„è‡ªç„¶å¯¹æ•°ã€‚  
Math.LN10  // 10çš„è‡ªç„¶å¯¹æ•°ã€‚  
Math.LOG2E  // ä»¥2ä¸ºåº•çš„eçš„å¯¹æ•°ã€‚  
Math.LOG10E  // ä»¥10ä¸ºåº•çš„eçš„å¯¹æ•°ã€‚  
Math.PI  // å¸¸æ•°Piã€‚  
Math.SQRT1_2  // 0.5çš„å¹³æ–¹æ ¹ã€‚  
Math.SQRT2  // 2çš„å¹³æ–¹æ ¹ã€‚
</code></pre>
<h3 id="æ•°å­¦æ–¹æ³•"><a href="#æ•°å­¦æ–¹æ³•" class="headerlink" title="æ•°å­¦æ–¹æ³•"></a>æ•°å­¦æ–¹æ³•</h3><pre><code class="javascript">Math.abs()  // è¿”å›å‚æ•°çš„ç»å¯¹å€¼  
Math.ceil()  // å‘ä¸Šå–æ•´ï¼Œæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›å¤§äºè¯¥å‚æ•°çš„æœ€å°æ•´æ•°ã€‚ 
Math.floor()  // å‘ä¸‹å–æ•´  
Math.max(n,n1,...)  // å¯æ¥å—å¤šä¸ªå‚æ•°ï¼Œè¿”å›æœ€å¤§å€¼  
Math.min(n,n1,..)  // å¯æ¥å—å¤šä¸ªå‚æ•°ï¼Œè¿”å›æœ€å°å€¼  
Math.pow(n,e)  // æŒ‡æ•°è¿ç®—, è¿”å›ä»¥ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåº•æ•°ã€ç¬¬äºŒä¸ªå‚æ•°ä¸ºå¹‚çš„æŒ‡æ•°å€¼ã€‚ 
Math.sqrt()  // è¿”å›å‚æ•°å€¼çš„å¹³æ–¹æ ¹ã€‚å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªè´Ÿå€¼ï¼Œåˆ™è¿”å›NaNã€‚  
Math.log()  // è¿”å›ä»¥eä¸ºåº•çš„è‡ªç„¶å¯¹æ•°å€¼ã€‚
Math.exp()  // è¿”å›eçš„æŒ‡æ•°ï¼Œä¹Ÿå°±æ˜¯å¸¸æ•°eçš„å‚æ•°æ¬¡æ–¹ã€‚
Math.round()  // å››èˆäº”å…¥  
Math.random()  //è¿”å›0åˆ°1ä¹‹é—´çš„ä¸€ä¸ªä¼ªéšæœºæ•°ï¼Œå¯èƒ½ç­‰äº0ï¼Œä½†æ˜¯ä¸€å®šå°äº1ã€‚
</code></pre>
<h3 id="ä¸‰è§’å‡½æ•°æ–¹æ³•"><a href="#ä¸‰è§’å‡½æ•°æ–¹æ³•" class="headerlink" title="ä¸‰è§’å‡½æ•°æ–¹æ³•"></a>ä¸‰è§’å‡½æ•°æ–¹æ³•</h3><pre><code class="javascript">Math.sin()  // è¿”å›å‚æ•°çš„æ­£å¼¦  
Math.cos()  // è¿”å›å‚æ•°çš„ä½™å¼¦  
Math.tan()  // è¿”å›å‚æ•°çš„æ­£åˆ‡  
Math.asin()  // è¿”å›å‚æ•°çš„åæ­£å¼¦ï¼ˆå¼§åº¦å€¼ï¼‰  
Math.acos()  // è¿”å›å‚æ•°çš„åä½™å¼¦ï¼ˆå¼§åº¦å€¼ï¼‰  
Math.atan()  // è¿”å›å‚æ•°çš„åæ­£åˆ‡ï¼ˆå¼§åº¦å€¼ï¼‰
</code></pre>
<h2 id="JSONå¯¹è±¡"><a href="#JSONå¯¹è±¡" class="headerlink" title="JSONå¯¹è±¡"></a>JSONå¯¹è±¡</h2><h3 id="æ–¹æ³•-2"><a href="#æ–¹æ³•-2" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><pre><code class="javascript">JSON.stringify()   
// ç”¨äºå°†ä¸€ä¸ªå€¼è½¬ä¸ºå­—ç¬¦ä¸²ã€‚è¯¥å­—ç¬¦ä¸²åº”è¯¥ç¬¦åˆJSONæ ¼å¼ï¼Œå¹¶ä¸”å¯ä»¥è¢«JSON.parseæ–¹æ³•è¿˜åŸã€‚
//ï¼ˆJSON.stringify(obj, selectedProperties)ï¼‰è¿˜å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œ
// ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‡å®šéœ€è¦è½¬æˆå­—ç¬¦ä¸²çš„å±æ€§ã€‚
// è¿˜å¯ä»¥æ¥å—ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºå¢åŠ è¿”å›çš„JSONå­—ç¬¦ä¸²çš„å¯è¯»æ€§ã€‚
// å¦‚æœæ˜¯æ•°å­—ï¼Œè¡¨ç¤ºæ¯ä¸ªå±æ€§å‰é¢æ·»åŠ çš„ç©ºæ ¼ï¼ˆæœ€å¤šä¸è¶…è¿‡10ä¸ªï¼‰ï¼›
// å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼ˆä¸è¶…è¿‡10ä¸ªå­—ç¬¦ï¼‰ï¼Œåˆ™è¯¥å­—ç¬¦ä¸²ä¼šæ·»åŠ åœ¨æ¯è¡Œå‰é¢ã€‚

JSON.parse()   //ç”¨äºå°†JSONå­—ç¬¦ä¸²è½¬åŒ–æˆå¯¹è±¡ã€‚
</code></pre>
<h2 id="consoleå¯¹è±¡"><a href="#consoleå¯¹è±¡" class="headerlink" title="consoleå¯¹è±¡"></a>consoleå¯¹è±¡</h2><h3 id="æ–¹æ³•-3"><a href="#æ–¹æ³•-3" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><pre><code class="javascript">console.log(text,text2,...)   
// ç”¨äºåœ¨consoleçª—å£è¾“å‡ºä¿¡æ¯ã€‚
// å®ƒå¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ï¼Œå°†å®ƒä»¬çš„ç»“æœè¿æ¥èµ·æ¥è¾“å‡ºã€‚
// å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ ¼å¼å­—ç¬¦ä¸²ï¼ˆä½¿ç”¨äº†æ ¼å¼å ä½ç¬¦ï¼‰ï¼Œ
// console.logæ–¹æ³•å°†ä¾æ¬¡ç”¨åé¢çš„å‚æ•°æ›¿æ¢å ä½ç¬¦ï¼Œç„¶åå†è¿›è¡Œè¾“å‡ºã€‚

console.info()   
// åœ¨consoleçª—å£è¾“å‡ºä¿¡æ¯ï¼Œ
// åŒæ—¶ï¼Œä¼šåœ¨è¾“å‡ºä¿¡æ¯çš„å‰é¢ï¼ŒåŠ ä¸Šä¸€ä¸ªè“è‰²å›¾æ ‡ã€‚

console.debug()  
// åœ¨consoleçª—å£è¾“å‡ºä¿¡æ¯ï¼Œ
// åŒæ—¶ï¼Œä¼šåœ¨è¾“å‡ºä¿¡æ¯çš„å‰é¢ï¼ŒåŠ ä¸Šä¸€ä¸ªè“è‰²å›¾æ ‡ã€‚

console.warn()  // è¾“å‡ºä¿¡æ¯æ—¶ï¼Œåœ¨æœ€å‰é¢åŠ ä¸€ä¸ªé»„è‰²ä¸‰è§’ï¼Œè¡¨ç¤ºè­¦å‘Šï¼›

console.error()  
// è¾“å‡ºä¿¡æ¯æ—¶ï¼Œåœ¨æœ€å‰é¢åŠ ä¸€ä¸ªçº¢è‰²çš„å‰ï¼Œ
// è¡¨ç¤ºå‡ºé”™ï¼ŒåŒæ—¶ä¼šæ˜¾ç¤ºé”™è¯¯å‘ç”Ÿçš„å †æ ˆ

console.table()  // å¯ä»¥å°†å¤åˆç±»å‹çš„æ•°æ®è½¬ä¸ºè¡¨æ ¼æ˜¾ç¤ºã€‚

console.count()  // ç”¨äºè®¡æ•°ï¼Œè¾“å‡ºå®ƒè¢«è°ƒç”¨äº†å¤šå°‘æ¬¡ã€‚

console.dir()    
// ç”¨æ¥å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ£€æŸ¥ï¼ˆinspectï¼‰ï¼Œ
// å¹¶ä»¥æ˜“äºé˜…è¯»å’Œæ‰“å°çš„æ ¼å¼æ˜¾ç¤ºã€‚

console.dirxml()  // ç”¨äºä»¥ç›®å½•æ ‘çš„å½¢å¼ï¼Œæ˜¾ç¤ºDOMèŠ‚ç‚¹ã€‚

console.assert()  
// æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ã€‚
// åªæœ‰å½“ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºfalseï¼Œæ‰ä¼šè¾“å‡ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™ä¸ä¼šæœ‰ä»»ä½•ç»“æœã€‚

// è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºè®¡æ—¶ï¼Œå¯ä»¥ç®—å‡ºä¸€ä¸ªæ“ä½œæ‰€èŠ±è´¹çš„å‡†ç¡®æ—¶é—´ã€‚
console.time()
console.timeEnd()
// timeæ–¹æ³•è¡¨ç¤ºè®¡æ—¶å¼€å§‹ï¼ŒtimeEndæ–¹æ³•è¡¨ç¤ºè®¡æ—¶ç»“æŸã€‚
// å®ƒä»¬çš„å‚æ•°æ˜¯è®¡æ—¶å™¨çš„åç§°ã€‚
// è°ƒç”¨timeEndæ–¹æ³•ä¹‹åï¼Œconsoleçª—å£ä¼šæ˜¾ç¤ºâ€œè®¡æ—¶å™¨åç§°: 
// æ‰€è€—è´¹çš„æ—¶é—´â€ã€‚

console.profile()  
// ç”¨æ¥æ–°å»ºä¸€ä¸ªæ€§èƒ½æµ‹è¯•å™¨ï¼ˆprofileï¼‰ï¼Œ
// å®ƒçš„å‚æ•°æ˜¯æ€§èƒ½æµ‹è¯•å™¨çš„åå­—ã€‚

console.profileEnd()  // ç”¨æ¥ç»“æŸæ­£åœ¨è¿è¡Œçš„æ€§èƒ½æµ‹è¯•å™¨ã€‚

console.group()
console.groupend()
// ä¸Šé¢è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºå°†æ˜¾ç¤ºçš„ä¿¡æ¯åˆ†ç»„ã€‚
// å®ƒåªåœ¨è¾“å‡ºå¤§é‡ä¿¡æ¯æ—¶æœ‰ç”¨ï¼Œåˆ†åœ¨ä¸€ç»„çš„ä¿¡æ¯ï¼Œå¯ä»¥ç”¨é¼ æ ‡æŠ˜å /å±•å¼€ã€‚

console.groupCollapsed()  
// ç”¨äºå°†æ˜¾ç¤ºçš„ä¿¡æ¯åˆ†ç»„ï¼Œè¯¥ç»„çš„å†…å®¹ï¼Œ
//åœ¨ç¬¬ä¸€æ¬¡æ˜¾ç¤ºæ—¶æ˜¯æ”¶èµ·çš„ï¼ˆcollapsedï¼‰ï¼Œè€Œä¸æ˜¯å±•å¼€çš„ã€‚

console.trace()  // æ˜¾ç¤ºå½“å‰æ‰§è¡Œçš„ä»£ç åœ¨å †æ ˆä¸­çš„è°ƒç”¨è·¯å¾„ã€‚
console.clear()  // ç”¨äºæ¸…é™¤å½“å‰æ§åˆ¶å°çš„æ‰€æœ‰è¾“å‡ºï¼Œå°†å…‰æ ‡å›ç½®åˆ°ç¬¬ä¸€è¡Œã€‚
</code></pre>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>GitHubï¼šğŸ‘‰ <a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a><br>ä¸ªäººç½‘ç«™ï¼šğŸ‘‰ <a href="https://microzz.com/">https://microzz.com/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;åŸç”ŸJavaScriptä¸­å¯¹è±¡ç›¸å…³APIåˆé›†-å¯¹è±¡ç¯‡&quot;&gt;&lt;a href=&quot;#åŸç”ŸJavaScriptä¸­å¯¹è±¡ç›¸å…³APIåˆé›†-å¯¹è±¡ç¯‡&quot; class=&quot;headerlink&quot; title=&quot;åŸç”ŸJavaScriptä¸­å¯¹è±¡ç›¸å…³APIåˆé›†-å¯¹è±¡ç¯‡&quot;&gt;&lt;/a&gt;åŸç”ŸJavaSc
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="Object" scheme="https://microzz.com/tags/Object/"/>
    
  </entry>
  
  <entry>
    <title>Vue.jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒº</title>
    <link href="https://microzz.com/2017/04/17/vue-cnode/"/>
    <id>https://microzz.com/2017/04/17/vue-cnode/</id>
    <published>2017-04-17T09:04:19.000Z</published>
    <updated>2017-04-17T09:10:01.745Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue-jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒº"><a href="#Vue-jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒº" class="headerlink" title="Vue.jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒº"></a>Vue.jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒº</h1><p>Vue.jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒºï¼Œå®ç°äº†æµè§ˆã€å‘å¸–ã€æ”¶è—ã€å›å¤ã€ç‚¹èµã€ä¸ªäººä¸­å¿ƒç­‰ç­‰åŠŸèƒ½ã€‚</p>
<h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><p>æºä»£ç åœ°å€ï¼šğŸ‘‰ <a href="https://github.com/microzz/vue-cnode" target="_blank" rel="external">https://github.com/microzz/vue-cnode</a></p>
<p>æ¬¢è¿å¤§å®¶starå’ŒforkğŸ˜„</p>
<h2 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h2><p>åœ¨çº¿é¢„è§ˆåœ°å€ï¼šğŸ‘‰ <a href="https://microzz.com/vue-cnode/">https://microzz.com/vue-cnode/</a></p>
<h2 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="headerlink" title="æŠ€æœ¯æ ˆ"></a>æŠ€æœ¯æ ˆ</h2><ul>
<li><strong>Vue2.0</strong>ï¼šå‰ç«¯é¡µé¢å±•ç¤ºã€‚</li>
<li><strong>Vuex</strong>ï¼šVuexï¼Œå®ç°ä¸åŒç»„ä»¶é—´çš„çŠ¶æ€å…±äº«</li>
<li><strong>vue-router</strong>ï¼šé¡µé¢è·¯ç”±åˆ‡æ¢</li>
<li><strong>axios</strong>ï¼šä¸€ä¸ªåŸºäº <code>Promise</code> çš„ HTTP åº“ï¼Œå‘åç«¯å‘èµ·è¯·æ±‚ã€‚</li>
<li><strong>Express</strong>ã€<strong>Koa2</strong>ï¼šå› ä¸ºvue-cliç”Ÿæˆçš„é¡¹ç›®æ˜¯åŸºäº<strong>express</strong>çš„ï¼Œæ‰€ä»¥åœ¨å¼€å‘é˜¶æ®µæˆ‘ä½¿ç”¨çš„æ˜¯å®ƒï¼Œä½†æ˜¯çœŸæ­£ä¸Šçº¿ç”Ÿäº§ç¯å¢ƒæˆ‘æ¢æˆäº†<strong>Koa2</strong>ã€‚</li>
<li><strong>Moment.js</strong>ï¼šä¸€ä¸ªæ—¶é—´å¤„ç†çš„åº“ï¼Œæ–¹ä¾¿å¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–æˆéœ€è¦çš„æ ¼å¼ï¼Œå¦‚ä¸»é¢˜ã€å›å¤æ—¶é—´æ˜¾ç¤ºâ€<em> åˆ†é’Ÿå‰ã€</em> å°æ—¶å‰ã€*å¤©å‰â€ç­‰ç­‰ã€‚</li>
<li><strong>ES6</strong>ã€<strong>ES7</strong>ï¼šé‡‡ç”¨ES6è¯­æ³•ï¼Œè¿™æ˜¯ä»¥åçš„è¶‹åŠ¿ã€‚ç®­å¤´å‡½æ•°ã€Promiseç­‰ç­‰è¯­æ³•å¾ˆå¥½ç”¨ã€‚</li>
<li><strong>localStorage</strong>ï¼šä¿å­˜ç”¨æˆ·ä¿¡æ¯ã€‚</li>
<li><strong>Canvas</strong>ï¼šé¡µé¢é¡¶éƒ¨å°é›ªèŠ±æ•ˆæœã€‚</li>
<li><strong>Webpack</strong>ï¼švue-cliè‡ªå¸¦Webpackï¼Œä½†æ˜¯éœ€è¦è‡ªå·±æ”¹é€ ä¸€ä¸‹ï¼Œæ¯”å¦‚è¦å¯¹éœ€è¦å®‰è£…sassç›¸å…³loaderï¼Œvue-cliå·²ç»é…ç½®å¥½äº†webpackï¼Œä½ åªéœ€è¦å®‰è£…ä¾èµ–å°±å¯ä»¥ï¼Œä½¿ç”¨çš„æ—¶å€™åªéœ€è¦<code>&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;</code>ã€‚</li>
<li><strong>SASS</strong>(<strong>SCSS</strong>)ï¼šç”¨SCSSåšCSSé¢„å¤„ç†è¯­è¨€ï¼Œæœ‰äº›åœ°æ–¹å¾ˆæ–¹ä¾¿ï¼Œä¸ªäººå¾ˆå–œæ¬¢ç”¨ã€‚(è¯¦çœ‹ğŸ‘‰<a href="https://microzz.com/2017/03/18/sass/">SASSç”¨æ³•æŒ‡å—</a>)</li>
<li><strong>flex</strong>ï¼šflexå¼¹æ€§å¸ƒå±€ï¼Œ<strong>ç®€å•</strong>é€‚é…æ‰‹æœºã€PCç«¯ã€‚</li>
<li><strong>CSS3</strong>ï¼šCSS3è¿‡æ¸¡åŠ¨ç”»åŠæ ·å¼ã€‚</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol>
<li><p>ç»„ä»¶çŠ¶æ€å¤šäº†ç”¨Vuexç®¡ç†å¾ˆæ–¹ä¾¿ï¼Œå¼•ç”¨ Redux çš„ä½œè€… Dan Abramov çš„è¯è¯´å°±æ˜¯ï¼š</p>
<blockquote>
<p>Flux æ¶æ„å°±åƒçœ¼é•œï¼šæ‚¨è‡ªä¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å®ƒã€‚</p>
</blockquote>
</li>
<li><p>äº‹å…ˆä¸€å®šè¦å…ˆæƒ³å¥½æ•´ä¸ªé¡µé¢ç»„æˆï¼Œæ€æ ·å»åˆ†ç»„ä»¶å¼€å‘ï¼Œè¿™æ ·åœ¨å¼€å‘é˜¶æ®µä¼šäº‹åŠåŠŸå€ã€‚</p>
</li>
<li>Moment.jsåœ¨Vueä¸­ç”¨ES6çš„æ–¹å¼å¼•å…¥ä¼šæœ‰é—®é¢˜ï¼Œå¯ä»¥å°è¯•åœ¨main.jså°è¯•è¿™æ ·<code>import moment from &#39;moment&#39;</code> <code>Vue.prototype.moment = moment;</code>ç»™Vueçš„åŸå‹ä¸Šæ·»åŠ momentï¼Œè¿™æ ·å°±å¯ä»¥åœ¨Vueçš„å®ä¾‹ä¸­éšæ„ä½¿ç”¨å®ƒäº†ã€‚</li>
<li>é¡¹ç›®ç»“æ„å¦‚ä¸‹å›¾</li>
</ol>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170417_vue_cnode/vue_cnode.png" alt="Vue-CNode" title="">
                </div>
                <div class="image-caption">Vue-CNode</div>
            </figure>
<h2 id="æ—¶é—´è½¨è¿¹"><a href="#æ—¶é—´è½¨è¿¹" class="headerlink" title="æ—¶é—´è½¨è¿¹"></a>æ—¶é—´è½¨è¿¹</h2><ul>
<li><p><strong>4.13</strong>ï¼šåŸºæœ¬åŠŸèƒ½å®Œæˆï¼Œåç»­å®Œæˆç™»å½•åçš„æ“ä½œã€‚</p>
</li>
<li><p><strong>4.14</strong>ï¼šå®Œæˆç™»å½•ä»¥åŠä¾§è¾¹æ ã€‚</p>
</li>
<li><p><strong>4.15</strong>ï¼šå¢åŠ æ”¶è—</p>
</li>
<li><p><strong>4.16</strong>ï¼šåŠ å…¥å›å¤ã€å•æ¡å›å¤ã€ç‚¹èµã€‚é¡¹ç›®å®Œæˆã€‚</p>
</li>
</ul>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>æºä»£ç åœ°å€ï¼šğŸ‘‰ <a href="https://github.com/microzz/vue-cnode" target="_blank" rel="external">GitHub</a></p>
<p>ä¸ªäººç½‘ç«™ï¼šğŸ‘‰ <a href="https://microzz.com/">microzz.com</a></p>
<p>GitHubï¼šğŸ‘‰ <a href="https://github.com/microzz" target="_blank" rel="external">microzz</a></p>
<h2 id="Build-Setup"><a href="#Build-Setup" class="headerlink" title="Build Setup"></a>Build Setup</h2><pre><code class="bash"># install dependencies
npm install

# serve with hot reload at localhost:8080
npm run dev

# build for production with minification
npm run build

# build for production and view the bundle analyzer report
npm run build --report
</code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Vue-jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒº&quot;&gt;&lt;a href=&quot;#Vue-jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒº&quot; class=&quot;headerlink&quot; title=&quot;Vue.jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒº&quot;&gt;&lt;/a&gt;Vue.jsæ‰“é€ ä¸€ä¸ªå¼€æºçš„CNodeç¤¾åŒº&lt;/h1&gt;&lt;
    
    </summary>
    
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Vue.js" scheme="https://microzz.com/tags/Vue-js/"/>
    
      <category term="SCSS" scheme="https://microzz.com/tags/SCSS/"/>
    
      <category term="Vuex" scheme="https://microzz.com/tags/Vuex/"/>
    
  </entry>
  
  <entry>
    <title>åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†</title>
    <link href="https://microzz.com/2017/04/14/jscss/"/>
    <id>https://microzz.com/2017/04/14/jscss/</id>
    <published>2017-04-14T14:42:43.000Z</published>
    <updated>2017-04-14T14:52:37.209Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†-CSSæ“ä½œç¯‡"><a href="#åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†-CSSæ“ä½œç¯‡" class="headerlink" title="åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†-CSSæ“ä½œç¯‡"></a>åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†-CSSæ“ä½œç¯‡</h1><h2 id="ç±»åæ“ä½œ"><a href="#ç±»åæ“ä½œ" class="headerlink" title="ç±»åæ“ä½œ"></a>ç±»åæ“ä½œ</h2><pre><code class="javascript">//ie8ä»¥ä¸‹
Element.className  //è·å–å…ƒç´ èŠ‚ç‚¹çš„ç±»å
Element.className += &#39; &#39; + newClassName  //æ–°å¢ä¸€ä¸ªç±»å

//åˆ¤æ–­æ˜¯å¦æœ‰æŸä¸ªç±»å
function hasClass(element,className){
  return new RegExp(className,&#39;gi&#39;).test(element.className);
}

//ç§»é™¤class
function removeClass(element,className){
  element.className = element.className.replace(new RegExp(&#39;(^|\\b)&#39; + className.split(&#39; &#39;).join(&#39;|&#39;) + &#39;(\\b|$)&#39;, &#39;gi&#39;),&#39;&#39;);
}

//ie10 
element.classList.add(className)  //æ–°å¢
element.classList.remove(className)  //åˆ é™¤
element.classList.contains(className)  //æ˜¯å¦åŒ…å«
element.classList.toggle(className)  //toggle class
</code></pre>
<h2 id="styleæ“ä½œ"><a href="#styleæ“ä½œ" class="headerlink" title="styleæ“ä½œ"></a>styleæ“ä½œ</h2><pre><code class="javascript">element.setAttribute(&#39;style&#39;,&#39;&#39;)

element.style.backgroundColor = &#39;red&#39;

element.style.cssText //ç”¨æ¥è¯»å†™æˆ–åˆ é™¤æ•´ä¸ªstyleå±æ€§

element.style.setProperty(propertyName,value)  //è®¾ç½®csså±æ€§
element.style.getPropertyValue(property)  //è·å–csså±æ€§
element.style.removeProperty(property)  //åˆ é™¤csså±æ€§
æ“ä½œéå†…è”æ ·å¼
//ie8
element.currentStyle[attrName]
//ie9+
window.getComputedStyle(el,null)[attrName] 
window.getComputedStyle(el,null).getPropertyValue(attrName)
//ä¼ªç±»
window.getComputedStyle(el,&#39;:after&#39;)[attrName]
</code></pre>
<h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p>ğŸ‘‰ <a href="https://microzz.com/2017/04/06/jsdom/">åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†</a></p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>ä¸ªäººç½‘ç«™ï¼šğŸ‘‰ <a href="https://microzz.com/">https://microzz.com/</a> </p>
<p>GitHubï¼šğŸ‘‰ <a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†-CSSæ“ä½œç¯‡&quot;&gt;&lt;a href=&quot;#åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†-CSSæ“ä½œç¯‡&quot; class=&quot;headerlink&quot; title=&quot;åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†-CSSæ“ä½œç¯‡&quot;&gt;&lt;/a&gt;åŸç”ŸJSä¸­CSSç›¸å…³APIåˆé›†-CSSæ“
    
    </summary>
    
    
      <category term="API" scheme="https://microzz.com/tags/API/"/>
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="CSS" scheme="https://microzz.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>ä¸Šæ‰‹Weexè¸©åˆ°çš„å‘ é•¿æœŸæ›´æ–°</title>
    <link href="https://microzz.com/2017/04/12/weex-start/"/>
    <id>https://microzz.com/2017/04/12/weex-start/</id>
    <published>2017-04-12T00:56:29.000Z</published>
    <updated>2017-04-25T10:31:14.106Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸Šæ‰‹Weexè¸©åˆ°çš„å‘-é•¿æœŸæ›´æ–°"><a href="#ä¸Šæ‰‹Weexè¸©åˆ°çš„å‘-é•¿æœŸæ›´æ–°" class="headerlink" title="ä¸Šæ‰‹Weexè¸©åˆ°çš„å‘ é•¿æœŸæ›´æ–°"></a>ä¸Šæ‰‹Weexè¸©åˆ°çš„å‘ é•¿æœŸæ›´æ–°</h1><h2 id="weex-toolkit-VS-weexpack"><a href="#weex-toolkit-VS-weexpack" class="headerlink" title="weex-toolkit VS weexpack"></a>weex-toolkit VS weexpack</h2><p>å®˜æ–¹å‡ºäº†ä¸¤ä¸ªè„šæ‰‹æ¶å·¥å…·ï¼š<strong>weex-toolkit</strong>ã€<strong>weexpack</strong>ã€‚</p>
<p><strong>weex-toolkit</strong> æ˜¯å®˜æ–¹æä¾›çš„ä¸€ä¸ªè„šæ‰‹æ¶å‘½ä»¤è¡Œå·¥å…·ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒè¿›è¡Œ Weex é¡¹ç›®çš„åˆ›å»ºï¼Œè°ƒè¯•ä»¥åŠæ‰“åŒ…ç­‰åŠŸèƒ½ã€‚</p>
<p><strong>weexpack</strong> æ˜¯åŸºäº Weex å¿«é€Ÿæ­å»ºåº”ç”¨åŸå‹çš„åˆ©å™¨ã€‚å®ƒèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…é€šè¿‡å‘½ä»¤è¡Œåˆ›å»º Weex å·¥ç¨‹ï¼Œæ·»åŠ ç›¸åº”å¹³å°çš„ Weex app æ¨¡ç‰ˆï¼Œå¹¶åŸºäºæ¨¡ç‰ˆä»æœ¬åœ°ï¼ŒGitHub æˆ–è€… Weex åº”ç”¨å¸‚åœºå®‰è£…æ’ä»¶ï¼Œå¿«é€Ÿæ‰“åŒ… Weex åº”ç”¨å¹¶å®‰è£…åˆ°æ‰‹æœºè¿è¡Œï¼Œå¯¹äºå…·æœ‰åˆ†äº«ç²¾ç¥çš„å¼€å‘è€…è€Œè¨€è¿˜èƒ½å¤Ÿåˆ›å»º Weex æ’ä»¶æ¨¡ç‰ˆå¹¶å‘å¸ƒæ’ä»¶åˆ° Weex åº”ç”¨å¸‚åœºã€‚</p>
<p>å®˜ç½‘æ˜¯è¿™æ ·æè¿°å®ƒä»¬çš„</p>
<blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;ç°åœ¨ä½¿ç”¨ weex-toolkit åŒæ ·æ”¯æŒå¯¹ weexpack çš„å‘½ä»¤è°ƒç”¨,å¦‚æœä½ å½“å‰çš„é¡¹ç›®ä¸ weexpack ç”Ÿæˆçš„é¡¹ç›®ç›®å½•ä¸€è‡´ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç›´æ¥å®ç°å¯¹äº platform çš„æ“ä½œï¼Œä»è€Œæ„å»ºå…·ä½“çš„ Android/IOS app ã€‚</p>
</blockquote>
<p><strong>è¯·æ³¨æ„</strong>ï¼Œè¯´çš„æ˜¯<strong>å¦‚æœä½ å½“å‰çš„é¡¹ç›®ä¸ weexpack ç”Ÿæˆçš„é¡¹ç›®ç›®å½•ä¸€è‡´</strong>ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒä»¬ç”Ÿæˆçš„é¡¹ç›®ç›®å½•å¹¶ä¸ä¸€æ ·ï¼Œæ„å»ºAndroidå’ŒIOSé¡¹ç›®ä¼šå¤±è´¥ã€‚<br>è€Œä¸”å®˜ç½‘æ•™ç¨‹ä¸­æœ‰çš„ä½¿ç”¨weexå‘½ä»¤ï¼Œæœ‰çš„ä½¿ç”¨weexpackå‘½ä»¤ï¼Œå¯¹äºåˆšä¸Šæ‰‹çš„äººæ¥è¯´ä¸å‹å¥½ã€‚çœ‹å®˜æ–¹3.22åœ¨Issuesä¸­å›å¤è¯´</p>
<blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;ç¡®å®æˆ‘ä»¬å†…éƒ¨åœ¨äº‰è®ºç›®å½•ä¸€è‡´æ€§ï¼ŒåæœŸæˆ‘ä»¬å¸Œæœ›è®©ä¸¤è€…çš„ç›®å½•ä¿æŒä¸€è‡´æ€§ï¼Œæˆ–è€…é€šè¿‡æ£€æŸ¥çš„å½¢å¼è‡ªåŠ¨è¡¥å…¨ç¼ºæŸçš„ç›®å½•ï¼Œä»è€Œè®©å®ƒä»¬ä¸€è‡´ã€‚</p>
</blockquote>
<p>å¸Œæœ›å°½æ—©ç»Ÿä¸€ç›®å½•æˆ–è€…åˆå¹¶è¿™ä¸¤ä¸ªå·¥å…·å§ğŸ˜„</p>
<h2 id="å®‰è£…æºé—®é¢˜"><a href="#å®‰è£…æºé—®é¢˜" class="headerlink" title="å®‰è£…æºé—®é¢˜"></a>å®‰è£…æºé—®é¢˜</h2><p>å®‰è£…å®Œweex-toolkiå’Œweexpackä¸¤ä¸ªå·¥å…·ä¹‹åï¼Œç”Ÿæˆé¡¹ç›®æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯æ‰“åŒ…åˆ°çœŸæœºè¿è¡Œå°±å‡ºç°äº†é—®é¢˜ï¼Œéå¸¸è«åå…¶å¦™çš„å„ç§é”™è¯¯ã€‚<br>äºæ˜¯ç”¨npmå‘½ä»¤ <code>npm list -g --depth 0</code> æŸ¥çœ‹è¿™ä¸¤ä¸ªå…¨å±€å®‰è£…çš„åŒ…çš„æƒ…å†µï¼Œå‘ç°å¤§é‡ç›¸å…³ä¾èµ–æŠ¥é”™ã€‚æˆ‘æ˜¯æ·˜å®æºcnpmå…¨å±€å®‰è£…è¿™ä¸¤ä¸ªå·¥å…·çš„ï¼ŒæŒ‰é“ç†éƒ½æ˜¯é˜¿é‡Œçš„ä¸œè¥¿ï¼Œåº”è¯¥ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚<br>çœ‹äº†ä¸€ä¸‹å®˜æ–¹GitHubçš„Issuesï¼Œå‘ç°ä¹Ÿæœ‰ä¸€æ ·çš„æƒ…å†µã€‚<br>äºæ˜¯ç«‹é©¬å¸è½½è¿™ä¸¤ä¸ªå…¨å±€å®‰è£…çš„å·¥å…·ï¼š<br><code>npm uninstall weex-toolkit -g</code><br> <code>npm uninstall weexpack -g</code>ï¼Œ<br> ç„¶åå¼€ç¿»å¢™ï¼Œé‡æ–°å®‰è£…è¿™ä¸¤ä¸ªå·¥å…·ï¼Œè™½ç„¶é€Ÿåº¦æ…¢ä¸€ç‚¹ï¼Œä½†æ˜¯å®‰è£…å®Œä¹‹åå†æ¬¡<code>npm list -g --depth 0</code> è‡³å°‘ä¸ä¼šæŠ¥é”™äº†ã€‚<br> ç„¶åå†ç”Ÿæˆé¡¹ç›®ï¼ŒçœŸæœºè¿è¡Œï¼Œä¸€åˆ‡å°±æ­£å¸¸äº†ã€‚ã€‚ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä¸Šæ‰‹Weexè¸©åˆ°çš„å‘-é•¿æœŸæ›´æ–°&quot;&gt;&lt;a href=&quot;#ä¸Šæ‰‹Weexè¸©åˆ°çš„å‘-é•¿æœŸæ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;ä¸Šæ‰‹Weexè¸©åˆ°çš„å‘ é•¿æœŸæ›´æ–°&quot;&gt;&lt;/a&gt;ä¸Šæ‰‹Weexè¸©åˆ°çš„å‘ é•¿æœŸæ›´æ–°&lt;/h1&gt;&lt;h2 id=&quot;weex-toolkit-
    
    </summary>
    
    
      <category term="Vue.js" scheme="https://microzz.com/tags/Vue-js/"/>
    
      <category term="npm" scheme="https://microzz.com/tags/npm/"/>
    
      <category term="Weex" scheme="https://microzz.com/tags/Weex/"/>
    
  </entry>
  
  <entry>
    <title>Vueåšä¸€ä¸ªGitHubé¡¹ç›®æ’è¡Œæ¦œ</title>
    <link href="https://microzz.com/2017/04/10/github-ranking/"/>
    <id>https://microzz.com/2017/04/10/github-ranking/</id>
    <published>2017-04-10T11:41:53.000Z</published>
    <updated>2017-04-10T15:26:27.258Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vueåšä¸€ä¸ªGitHubé¡¹ç›®æ’è¡Œæ¦œ"><a href="#Vueåšä¸€ä¸ªGitHubé¡¹ç›®æ’è¡Œæ¦œ" class="headerlink" title="Vueåšä¸€ä¸ªGitHubé¡¹ç›®æ’è¡Œæ¦œ"></a>Vueåšä¸€ä¸ªGitHubé¡¹ç›®æ’è¡Œæ¦œ</h1><p>GitHubä¸åŒè¯­è¨€çƒ­é—¨é¡¹ç›®æ’è¡Œï¼ŒVueåšé¡µé¢å±•ç¤ºã€‚</p>
<h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><p>æºä»£ç åœ°å€ï¼šğŸ”— <a href="https://github.com/microzz/github-ranking" target="_blank" rel="external">GitHub</a><br>æ¬¢è¿å¤§å®¶ starå’ŒforkğŸ˜„</p>
<h2 id="é¢„è§ˆåœ°å€"><a href="#é¢„è§ˆåœ°å€" class="headerlink" title="é¢„è§ˆåœ°å€"></a>é¢„è§ˆåœ°å€</h2><p>åœ¨çº¿æ•ˆæœé¢„è§ˆåœ°å€ï¼š<a href="https://microzz.com/github-ranking/">https://microzz.com/github-ranking/</a></p>
<h2 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="headerlink" title="æŠ€æœ¯æ ˆ"></a>æŠ€æœ¯æ ˆ</h2><ul>
<li><strong>Vue2.0</strong>ï¼šå‰ç«¯é¡µé¢å±•ç¤ºã€‚</li>
<li><strong>axios</strong>ï¼šä¸€ä¸ªåŸºäº <code>Promise</code> çš„ HTTP åº“ï¼Œå‘åç«¯å‘èµ·è¯·æ±‚ã€‚</li>
<li><strong>Express</strong>ã€<strong>Koa2</strong>ï¼šå› ä¸ºvue-cliç”Ÿæˆçš„é¡¹ç›®æ˜¯åŸºäº<strong>express</strong>çš„ï¼Œæ‰€ä»¥åœ¨å¼€å‘é˜¶æ®µæˆ‘ä½¿ç”¨çš„æ˜¯å®ƒï¼Œä½†æ˜¯çœŸæ­£ä¸Šçº¿ç”Ÿäº§ç¯å¢ƒæˆ‘æ¢æˆäº†<strong>Koa2</strong>ã€‚</li>
<li><strong>request</strong>ã€<strong>request-promise</strong>ï¼šæ²¡æœ‰ç”¨Node.jsåŸç”Ÿçš„<code>http/https</code>æ¨¡å—æ˜¯å› ä¸ºä¸å–œæ¬¢å›è°ƒå‡½æ•°å¼çš„å¼‚æ­¥ï¼Œå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å¾ˆå·®ã€‚æ‰€ä»¥é€‰æ‹©äº†<strong>request</strong>+<strong>request-promise</strong>ï¼Œè®©å¼‚æ­¥æ›´ä¸ºä¼˜é›…ä¸€ç‚¹ã€‚</li>
<li><strong>cheerio</strong>ï¼šæœåŠ¡å™¨ç‰¹åˆ«å®šåˆ¶çš„ï¼Œå¿«é€Ÿã€çµæ´»ã€å®æ–½çš„jQueryæ ¸å¿ƒå®ç°ï¼ŒæŠ“å–é¡µé¢å†…å®¹å¾ˆæ–¹ä¾¿ã€‚</li>
<li><strong>SASS</strong>(<strong>SCSS</strong>)ï¼šç”¨SCSSåšCSSé¢„å¤„ç†è¯­è¨€ï¼Œæœ‰äº›åœ°æ–¹å¾ˆæ–¹ä¾¿ï¼Œä¸ªäººå¾ˆå–œæ¬¢ç”¨ã€‚(è¯¦çœ‹ğŸ‘‰<a href="https://microzz.com/2017/03/18/sass/">SASSç”¨æ³•æŒ‡å—</a>)</li>
<li><strong>ES6</strong>ã€<strong>ES7</strong>ï¼šé‡‡ç”¨ES6è¯­æ³•ï¼Œè¿™æ˜¯ä»¥åçš„è¶‹åŠ¿ã€‚è‡ªå·±ä¸Šçº¿çš„ç”Ÿäº§ç¯å¢ƒåç«¯å¢åŠ äº†<code>Async/await</code>ï¼Œä½¿å¼‚æ­¥æ›´åŠ ä¼˜é›…ã€‚</li>
<li><strong>Webpack</strong>ï¼švue-cliè‡ªå¸¦Webpackï¼Œä½†æ˜¯éœ€è¦è‡ªå·±æ”¹é€ ä¸€ä¸‹ï¼Œæ¯”å¦‚è¦å¯¹ <code>build/dev-server.js</code>æ‰©å±•expressï¼Œå¢åŠ åç«¯è¯·æ±‚è·¯ç”±(ä¸Šçº¿ç‰ˆæœ¬ç”¨çš„æ˜¯Koa2)ã€‚æ­¤å¤–éœ€è¦å®‰è£…sassç›¸å…³loaderï¼Œvue-cliå·²ç»é…ç½®å¥½äº†webpackï¼Œä½ åªéœ€è¦å®‰è£…ä¾èµ–å°±å¯ä»¥ï¼Œä½¿ç”¨çš„æ—¶å€™åªéœ€è¦<code>&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;</code>ã€‚</li>
<li><strong>flex</strong>ï¼šflexå¼¹æ€§å¸ƒå±€ã€‚</li>
<li><strong>CSS3</strong>ï¼šCSS3è¿‡æ¸¡åŠ¨ç”»åŠæ ·å¼ã€‚</li>
</ul>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><ol>
<li>å¼‚æ­¥æ“ä½œå¾ˆå®¹æ˜“å‡ºé—®é¢˜ï¼Œå¼‚æ­¥å¤„ç†ä¸€å®šè¦å°å¿ƒï¼è¦ç†Ÿç»ƒæŒæ¡<code>Promise</code>ã€<code>Async/await</code>ã€<code>Generator</code>ç­‰æ–¹æ³•ã€‚(è¯¦çœ‹ğŸ‘‰<a href="https://microzz.com/2017/01/15/async/">å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°</a>ã€<a href="https://microzz.com/2017/01/14/promise/">Promiseå¯¹è±¡</a>ã€<a href="https://microzz.com/2017/01/13/generator/">Generator å‡½æ•°</a>)</li>
<li>å› ä¸ºè®¿é—®æ¯æ¬¡çˆ¬å–GitHubé€Ÿåº¦æ…¢ï¼Œæ€§èƒ½å·®ï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨ç¼“å­˜ï¼ŒæŠŠçˆ¬å–åˆ°çš„æ•°æ®ä¿å­˜ä¸ºjsonæ–‡ä»¶æˆ–è€…å…¶ä»–ç¼“å­˜æ–¹å¼ï¼Œæˆ‘åœ¨ä¸Šçº¿çš„æ­£å¼ç‰ˆæ˜¯ä¿å­˜ä¸ºjsonæ–‡ä»¶ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±è¦æœ‰ä¸€ä¸ªå®šæ—¶çˆ¬å–çš„å·¥å…·äº†ï¼Œè¿™é‡Œæ¨è<a href="https://github.com/node-schedule/node-schedule" target="_blank" rel="external">node-schedule</a>æ¨¡å—ï¼Œå¾ˆæ–¹ä¾¿å°±èƒ½å®ç°å®šæ—¶ä»»åŠ¡ï¼ŒæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å°±èƒ½ç®€å•ä¸Šæ‰‹äº†ã€‚ä¸Šçº¿ç‰ˆæœ¬æˆ‘æ˜¯æ¯éš”å‡ ä¸ªå°æ—¶å°±çˆ¬å–ä¸€æ¬¡ï¼Œç„¶åä¿å­˜æ•°æ®ï¼Œè¿™æ ·å‡è½»äº†æœåŠ¡å™¨å‹åŠ›ï¼Œå‰ç«¯è®¿é—®é€Ÿåº¦ä¹Ÿå¤§å¤§åŠ å¿«ã€‚</li>
<li>GitHubè²Œä¼¼æœ€å¤šåªèƒ½æœ‰10ä¸ªå¹¶å‘ï¼Œæˆ‘å°è¯•9ä¸ªæ˜¯æ­£å¸¸çš„ï¼Œ10ä¸ªå°±ä¼šæŠ¥é”™ï¼Œåˆšå¥½æˆ‘ä¸€æ¬¡æ€§çˆ¬å–çš„è¯­è¨€æ•°ç›®è¶…è¿‡æ•°ç›®ï¼Œä¸€çœ‹æŠ¥é”™ä¿¡æ¯æ˜¯<strong>429</strong>çŠ¶æ€ç ã€‚æŸ¥ä¿¡æ¯å‘ç°ï¼š</li>
</ol>
<blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;429 Too Many Requests (å¤ªå¤šè¯·æ±‚)<br>å½“ä½ éœ€è¦é™åˆ¶å®¢æˆ·ç«¯è¯·æ±‚æŸä¸ªæœåŠ¡çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯é™åˆ¶è¯·æ±‚é€Ÿåº¦æ—¶ï¼Œè¯¥çŠ¶æ€ç å°±ä¼šéå¸¸æœ‰ç”¨ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæœ‰ä¸€äº›ç±»ä¼¼çš„çŠ¶æ€ç ã€‚ä¾‹å¦‚â€œ509 Bandwidth Limit Exceededâ€ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ä¸€å®šå¥½å¤„ç†å¥½è¿™äº›å¼‚æ­¥è¯·æ±‚ï¼Œä¸ç„¶å°±çˆ¬å–ä¸åˆ°ä¿¡æ¯ç¼“å­˜äº†ã€‚</p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>æºä»£ç åœ°å€ï¼šğŸ‘‰ <a href="https://github.com/microzz/github-ranking" target="_blank" rel="external">GitHub</a> </p>
<p>ä¸ªäººç½‘ç«™ï¼šğŸ”—<a href="https://microzz.com/">microzz-ITæŠ€æœ¯åˆ†äº«</a> </p>
<p>GitHubï¼šğŸ”—<a href="https://github.com/microzz" target="_blank" rel="external">microzz</a></p>
<h2 id="Build-Setup"><a href="#Build-Setup" class="headerlink" title="Build Setup"></a>Build Setup</h2><pre><code class="bash"># install dependencies
npm install

# serve with hot reload at localhost:8080
npm run dev

# build for production with minification
npm run build

# build for production and view the bundle analyzer report
npm run build --report
</code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Vueåšä¸€ä¸ªGitHubé¡¹ç›®æ’è¡Œæ¦œ&quot;&gt;&lt;a href=&quot;#Vueåšä¸€ä¸ªGitHubé¡¹ç›®æ’è¡Œæ¦œ&quot; class=&quot;headerlink&quot; title=&quot;Vueåšä¸€ä¸ªGitHubé¡¹ç›®æ’è¡Œæ¦œ&quot;&gt;&lt;/a&gt;Vueåšä¸€ä¸ªGitHubé¡¹ç›®æ’è¡Œæ¦œ&lt;/h1&gt;&lt;p&gt;GitHubä¸åŒè¯­è¨€
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Vue.js" scheme="https://microzz.com/tags/Vue-js/"/>
    
      <category term="SASS" scheme="https://microzz.com/tags/SASS/"/>
    
      <category term="SCSS" scheme="https://microzz.com/tags/SCSS/"/>
    
      <category term="Koa2" scheme="https://microzz.com/tags/Koa2/"/>
    
  </entry>
  
  <entry>
    <title>Vue.jséŸ³ä¹æ’­æ”¾å™¨å‡çº§ç‰ˆ</title>
    <link href="https://microzz.com/2017/04/08/vue-music2/"/>
    <id>https://microzz.com/2017/04/08/vue-music2/</id>
    <published>2017-04-07T23:08:28.000Z</published>
    <updated>2017-04-10T01:12:24.202Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue-jséŸ³ä¹æ’­æ”¾å™¨2-0å‡çº§ç‰ˆ"><a href="#Vue-jséŸ³ä¹æ’­æ”¾å™¨2-0å‡çº§ç‰ˆ" class="headerlink" title="Vue.jséŸ³ä¹æ’­æ”¾å™¨2.0å‡çº§ç‰ˆ"></a>Vue.jséŸ³ä¹æ’­æ”¾å™¨2.0å‡çº§ç‰ˆ</h1><p>ä¹‹å‰åˆå­¦Vueåšäº†ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨ï¼Œå—åˆ°ä¸å°‘äººçš„å–œæ¬¢ã€‚ç°åœ¨å‡çº§ç‰ˆæ¥äº†ï¼åŠŸèƒ½æ›´å¼ºï¼ŒæŠ€æœ¯æ ˆæ›´å¤šã€‚</p>
<h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><p>æºä»£ç åœ°å€ï¼šğŸ‘‰ <a href="https://github.com/microzz/vue-music-player" target="_blank" rel="external">GitHub</a><br>æ¬¢è¿å¤§å®¶starå’ŒfollowğŸ˜„</p>
<h2 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h2><h3 id="åœ¨çº¿é¢„è§ˆ"><a href="#åœ¨çº¿é¢„è§ˆ" class="headerlink" title="åœ¨çº¿é¢„è§ˆ"></a>åœ¨çº¿é¢„è§ˆ</h3><p>åœ¨çº¿é¢„è§ˆåœ°å€ï¼šğŸ‘‰ <a href="https://microzz.com/vue-music/">VueéŸ³ä¹æ’­æ”¾å™¨</a></p>
<h3 id="é¢„è§ˆå›¾"><a href="#é¢„è§ˆå›¾" class="headerlink" title="é¢„è§ˆå›¾"></a>é¢„è§ˆå›¾</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170408_vue_music/preview.gif" alt="VueéŸ³ä¹æ’­æ”¾å™¨å‡çº§ç‰ˆ" title="">
                </div>
                <div class="image-caption">VueéŸ³ä¹æ’­æ”¾å™¨å‡çº§ç‰ˆ</div>
            </figure>
<p>æ›´å¤šé¢„è§ˆå›¾è¯·çœ‹ğŸ‘‰ <a href="https://github.com/microzz/vue-music-player/tree/2.0.0/preview" target="_blank" rel="external">æ›´å¤š</a></p>
<h2 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="headerlink" title="æŠ€æœ¯æ ˆ"></a>æŠ€æœ¯æ ˆ</h2><p><strong>Vue2</strong>ï¼šé‡‡ç”¨æœ€æ–°Vue2çš„è¯­æ³•ğŸ˜<br><strong>Vuex</strong>ï¼šå®ç°ä¸åŒç»„ä»¶ä¹‹é—´çš„çŠ¶æ€å…±äº«âœŒï¸<br><strong>vue-router</strong>ï¼šå•é¡µåº”ç”¨è·¯ç”±ç®¡ç†å¿…å¤‡ğŸ˜<br><strong>axios</strong>ï¼šå‘èµ·httpè¯·æ±‚ğŸ˜‰<br><strong>SASS(SCSS)</strong>ï¼šcssé¢„å¤„ç†è¯­è¨€ğŸ’ª<br><strong>Express</strong>(ä¸Šçº¿ç‰ˆæœ¬æ˜¯<strong>Koa2</strong>)ï¼šå› ä¸ºvue-cliæ˜¯ç”¨çš„ExpressåšæœåŠ¡å™¨ï¼Œæ‰€ä»¥å¼€æºçš„å¼€å‘ç‰ˆæœ¬æ˜¯Expressï¼Œè‡ªå·±ç”Ÿäº§ç¯å¢ƒç”¨çš„æ˜¯Koa2ã€‚ ğŸ˜œ<br><strong>Webpack</strong>ï¼šè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œå¤§éƒ¨åˆ†é…ç½®vue-cliè„šæ‰‹æ¶å·²ç»å¼„å¥½äº†ï¼Œå¾ˆæ–¹ä¾¿ã€‚ğŸ˜<br><strong>ES6</strong>ï¼šé‡‡ç”¨ES6è¯­æ³•ï¼Œè¿™æ˜¯è¶‹åŠ¿ã€‚ğŸ‘<br><strong>localStorage(HTML5)</strong>ï¼šæœ¬åœ°å­˜å‚¨ï¼Œä¿å­˜ç”¨æˆ·ä¸ªæ€§åŒ–è®¾ç½®ã€‚ğŸ˜Š<br><strong>CSS3</strong>ï¼šCSS3åŠ¨ç”»åŠæ ·å¼ã€‚ğŸ‘</p>
<h2 id="ä½¿ç”¨-Build-Setup"><a href="#ä½¿ç”¨-Build-Setup" class="headerlink" title="ä½¿ç”¨ Build Setup"></a>ä½¿ç”¨ Build Setup</h2><pre><code class="bash"># install dependencies
npm install

# serve with hot reload at localhost:8080
npm run dev

# build for production with minification
npm run build

# build for production and view the bundle analyzer report
npm run build --report
</code></pre>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><ol>
<li><p>vuexä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Œå¦‚ä½•ä½¿ç”¨ï¼Œå°±è¦çœ‹é¡¹ç›®éœ€è¦ã€‚å¼•ç”¨ Redux çš„ä½œè€… Dan Abramov çš„è¯è¯´å°±æ˜¯ï¼š</p>
<blockquote>
<p>Flux æ¶æ„å°±åƒçœ¼é•œï¼šæ‚¨è‡ªä¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å®ƒã€‚</p>
</blockquote>
<p>å„ç»„ä»¶ä¹‹é—´çŠ¶æ€å…±äº«ä¹Ÿæ˜¯éš¾ç‚¹ã€‚</p>
</li>
<li><p>å¼‚æ­¥ç¼–ç¨‹ï¼šJSæ˜¯å•çº¿ç¨‹ï¼Œå¼‚æ­¥ç¼–ç¨‹å°¤ä¸ºé‡è¦ã€‚å½“æˆ‘ä»¬å‘åç«¯è¯·æ±‚æ•°æ®ï¼Œæ˜¯å¼‚æ­¥çš„ï¼Œå¦‚æœæ²¡æœ‰å¤„ç†å¥½ç›¸å…³çš„å¼‚æ­¥æ“ä½œï¼Œæ˜¯ä¼šæœ‰å„ç§é—®é¢˜çš„ã€‚JSå¯ä»¥åˆ©ç”¨<code>setTimeout</code>ã€<code>å›è°ƒ</code>ã€<code>Generator</code>ã€<code>Promise</code>ã€<code>Async</code>ã€‚<br>å®šæ—¶è¿™ç§æ–¹å¼å¤ªéº»çƒ¦ï¼Œè¿˜æ˜¯ä¸æ¨èï¼›å›è°ƒå±‚æ¬¡å¤šäº†ï¼Œæœ‰å›è°ƒåœ°ç‹±ï¼Œä»£ç ç»´æŠ¤æ€§å¾ˆå·®ï¼›Generatoréœ€è¦æ‰‹åŠ¨å»æ‰§è¡Œï¼Œå½“ç„¶å¯ä»¥ä½¿ç”¨ç±»ä¼¼<code>co</code>çš„æ¨¡å—ã€‚ç›¸æ¯”ä¹‹ä¸‹<code>Promise</code>å’Œ<code>Async</code>æ˜¯æ¯”è¾ƒç†æƒ³çš„ã€‚(è¯¦çœ‹ğŸ‘‰<a href="https://microzz.com/2017/01/14/promise/">Promiseå¯¹è±¡</a>ã€<a href="https://microzz.com/2017/01/15/async/">å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°</a>)</p>
</li>
<li>æœ¬é¡¹ç›®ä¸­ä½¿ç”¨äº†QQéŸ³ä¹å’ŒOne(ä¸€ä¸ª)çš„æ¥å£ï¼Œåç«¯APIç¼–å†™ä¹Ÿæ˜¯éš¾ç‚¹ï¼ŒåŒ…å«äº†å„ç§å¼‚æ­¥è¯·æ±‚ã€‚å¯¹è¿”å›æ•°æ®çš„è§£æä¹Ÿæ˜¯éš¾ç‚¹ï¼Œæœ‰çš„æ—¶å€™ä½ è¿˜éœ€è¦å¯¹æ•°æ®è¿›è¡Œè§£ç ã€‚</li>
<li>å„ç»„ä»¶ç»“æ„çš„è®¾è®¡ï¼šä¸€å¼€å§‹å¤§çº²æ²¡è®¾è®¡å¥½ï¼Œåé¢æƒ³ä¿®æ”¹æ¶‰åŠé¢ä¼šå¾ˆå¹¿ã€‚</li>
<li>è¿‡æ¸¡åŠ¨ç”»è®©äº¤äº’æ›´æœ‰è¶£ï¼Œä½†æ˜¯æœ‰çš„è¿˜æ˜¯è€—æ€§èƒ½çš„ï¼Œæœ‰è®¾å¤‡å·®å¼‚ï¼Œæ²¡ç”¨å¥½ä¼šé€ æˆå¡é¡¿ã€‚</li>
</ol>
<p>ã€å£°æ˜ã€‘ï¼šæœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµï¼Œè¯·ä¸è¦ç”¨åšä»»ä½•å•†ä¸šç”¨é€”ğŸ˜Šæœ‰ä»»ä½•ç–‘é—®è¯·è”ç³»ä½œè€…ğŸ“©<a href="mailto:zhaohui@microzz.com">zhaohui@microzz.com</a></p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>æºä»£ç åœ°å€ï¼šğŸ‘‰ <a href="https://github.com/microzz/vue-music-player" target="_blank" rel="external">GitHub</a><br>ä¸ªäººç½‘ç«™ï¼šğŸ”—<a href="https://microzz.com/">microzz-ITæŠ€æœ¯åˆ†äº«</a><br>GitHubï¼šğŸ”—<a href="https://github.com/microzz" target="_blank" rel="external">microzz</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Vue-jséŸ³ä¹æ’­æ”¾å™¨2-0å‡çº§ç‰ˆ&quot;&gt;&lt;a href=&quot;#Vue-jséŸ³ä¹æ’­æ”¾å™¨2-0å‡çº§ç‰ˆ&quot; class=&quot;headerlink&quot; title=&quot;Vue.jséŸ³ä¹æ’­æ”¾å™¨2.0å‡çº§ç‰ˆ&quot;&gt;&lt;/a&gt;Vue.jséŸ³ä¹æ’­æ”¾å™¨2.0å‡çº§ç‰ˆ&lt;/h1&gt;&lt;p&gt;ä¹‹å‰åˆå­¦Vueåšäº†ä¸€
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="HTML5" scheme="https://microzz.com/tags/HTML5/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Vue.js" scheme="https://microzz.com/tags/Vue-js/"/>
    
      <category term="SASS" scheme="https://microzz.com/tags/SASS/"/>
    
      <category term="SCSS" scheme="https://microzz.com/tags/SCSS/"/>
    
  </entry>
  
  <entry>
    <title>åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†</title>
    <link href="https://microzz.com/2017/04/06/jsdom/"/>
    <id>https://microzz.com/2017/04/06/jsdom/</id>
    <published>2017-04-06T12:14:10.000Z</published>
    <updated>2017-04-06T15:26:39.177Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†"><a href="#åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†" class="headerlink" title="åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†"></a>åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†</h1><h2 id="èŠ‚ç‚¹å±æ€§"><a href="#èŠ‚ç‚¹å±æ€§" class="headerlink" title="èŠ‚ç‚¹å±æ€§"></a>èŠ‚ç‚¹å±æ€§</h2><pre><code class="javascript">Node.nodeName   //è¿”å›èŠ‚ç‚¹åç§°ï¼Œåªè¯»
Node.nodeType   //è¿”å›èŠ‚ç‚¹ç±»å‹çš„å¸¸æ•°å€¼ï¼Œåªè¯»
Node.nodeValue  //è¿”å›Textæˆ–CommentèŠ‚ç‚¹çš„æ–‡æœ¬å€¼ï¼Œåªè¯»
Node.textContent  //è¿”å›å½“å‰èŠ‚ç‚¹å’Œå®ƒçš„æ‰€æœ‰åä»£èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ï¼Œå¯è¯»å†™
Node.baseURI    //è¿”å›å½“å‰ç½‘é¡µçš„ç»å¯¹è·¯å¾„

Node.ownerDocument  //è¿”å›å½“å‰èŠ‚ç‚¹æ‰€åœ¨çš„é¡¶å±‚æ–‡æ¡£å¯¹è±¡ï¼Œå³document
Node.nextSibling  //è¿”å›ç´§è·Ÿåœ¨å½“å‰èŠ‚ç‚¹åé¢çš„ç¬¬ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹
Node.previousSibling  //è¿”å›å½“å‰èŠ‚ç‚¹å‰é¢çš„ã€è·ç¦»æœ€è¿‘çš„ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹
Node.parentNode   //è¿”å›å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹
Node.parentElement  //è¿”å›å½“å‰èŠ‚ç‚¹çš„çˆ¶ElementèŠ‚ç‚¹
Node.childNodes   //è¿”å›å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹
Node.firstChild  //è¿”å›å½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹
Node.lastChild   //è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹

//parentNodeæ¥å£
Node.children  //è¿”å›æŒ‡å®šèŠ‚ç‚¹çš„æ‰€æœ‰Elementå­èŠ‚ç‚¹
Node.firstElementChild  //è¿”å›å½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªElementå­èŠ‚ç‚¹
Node.lastElementChild   //è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªElementå­èŠ‚ç‚¹
Node.childElementCount  //è¿”å›å½“å‰èŠ‚ç‚¹æ‰€æœ‰Elementå­èŠ‚ç‚¹çš„æ•°ç›®ã€‚
</code></pre>
<h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><pre><code class="javascript">Node.appendChild(node)   //å‘èŠ‚ç‚¹æ·»åŠ æœ€åä¸€ä¸ªå­èŠ‚ç‚¹
Node.hasChildNodes()   //è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹
Node.cloneNode(true);  // é»˜è®¤ä¸ºfalse(å…‹éš†èŠ‚ç‚¹), true(å…‹éš†èŠ‚ç‚¹åŠå…¶å±æ€§ï¼Œä»¥åŠåä»£)
Node.insertBefore(newNode,oldNode)  // åœ¨æŒ‡å®šå­èŠ‚ç‚¹ä¹‹å‰æ’å…¥æ–°çš„å­èŠ‚ç‚¹
Node.removeChild(node)   //åˆ é™¤èŠ‚ç‚¹ï¼Œåœ¨è¦åˆ é™¤èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸Šæ“ä½œ
Node.replaceChild(newChild,oldChild)  //æ›¿æ¢èŠ‚ç‚¹
Node.contains(node)  //è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°èŠ‚ç‚¹æ˜¯å¦ä¸ºå½“å‰èŠ‚ç‚¹çš„åä»£èŠ‚ç‚¹ã€‚
Node.compareDocumentPosition(node)   //è¿”å›ä¸€ä¸ª7ä¸ªæ¯”ç‰¹ä½çš„äºŒè¿›åˆ¶å€¼ï¼Œè¡¨ç¤ºå‚æ•°èŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹çš„å…³ç³»
Node.isEqualNode(noe)  //è¿”å›å¸ƒå°”å€¼ï¼Œç”¨äºæ£€æŸ¥ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰ã€‚æ‰€è°“ç›¸ç­‰çš„èŠ‚ç‚¹ï¼ŒæŒ‡çš„æ˜¯ä¸¤ä¸ªèŠ‚ç‚¹çš„ç±»å‹ç›¸åŒã€å±æ€§ç›¸åŒã€å­èŠ‚ç‚¹ç›¸åŒã€‚
Node.normalize()   //ç”¨äºæ¸…ç†å½“å‰èŠ‚ç‚¹å†…éƒ¨çš„æ‰€æœ‰TextèŠ‚ç‚¹ã€‚å®ƒä¼šå»é™¤ç©ºçš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†æ¯—é‚»çš„æ–‡æœ¬èŠ‚ç‚¹åˆå¹¶æˆä¸€ä¸ªã€‚

//ChildNodeæ¥å£
Node.remove()  //ç”¨äºåˆ é™¤å½“å‰èŠ‚ç‚¹
Node.before()  //
Node.after()
Node.replaceWith()
</code></pre>
<h2 id="DocumentèŠ‚ç‚¹"><a href="#DocumentèŠ‚ç‚¹" class="headerlink" title="DocumentèŠ‚ç‚¹"></a>DocumentèŠ‚ç‚¹</h2><h3 id="DocumentèŠ‚ç‚¹çš„å±æ€§"><a href="#DocumentèŠ‚ç‚¹çš„å±æ€§" class="headerlink" title="DocumentèŠ‚ç‚¹çš„å±æ€§"></a>DocumentèŠ‚ç‚¹çš„å±æ€§</h3><pre><code class="javascript">document.doctype   //
document.documentElement  //è¿”å›å½“å‰æ–‡æ¡£çš„æ ¹èŠ‚ç‚¹
document.defaultView   //è¿”å›documentå¯¹è±¡æ‰€åœ¨çš„windowå¯¹è±¡
document.body   //è¿”å›å½“å‰æ–‡æ¡£çš„&lt;body&gt;èŠ‚ç‚¹
document.head   //è¿”å›å½“å‰æ–‡æ¡£çš„&lt;head&gt;èŠ‚ç‚¹
document.activeElement  //è¿”å›å½“å‰æ–‡æ¡£ä¸­è·å¾—ç„¦ç‚¹çš„é‚£ä¸ªå…ƒç´ ã€‚

//èŠ‚ç‚¹é›†åˆå±æ€§
document.links  //è¿”å›å½“å‰æ–‡æ¡£çš„æ‰€æœ‰aå…ƒç´ 
document.forms  //è¿”å›é¡µé¢ä¸­æ‰€æœ‰è¡¨å•å…ƒç´ 
document.images  //è¿”å›é¡µé¢ä¸­æ‰€æœ‰å›¾ç‰‡å…ƒç´ 
document.embeds  //è¿”å›ç½‘é¡µä¸­æ‰€æœ‰åµŒå…¥å¯¹è±¡
document.scripts  //è¿”å›å½“å‰æ–‡æ¡£çš„æ‰€æœ‰è„šæœ¬
document.styleSheets  //è¿”å›å½“å‰ç½‘é¡µçš„æ‰€æœ‰æ ·å¼è¡¨

//æ–‡æ¡£ä¿¡æ¯å±æ€§
document.documentURI  //è¡¨ç¤ºå½“å‰æ–‡æ¡£çš„ç½‘å€
document.URL  //è¿”å›å½“å‰æ–‡æ¡£çš„ç½‘å€
document.domain  //è¿”å›å½“å‰æ–‡æ¡£çš„åŸŸå
document.lastModified  //è¿”å›å½“å‰æ–‡æ¡£æœ€åä¿®æ”¹çš„æ—¶é—´æˆ³
document.location  //è¿”å›locationå¯¹è±¡ï¼Œæä¾›å½“å‰æ–‡æ¡£çš„URLä¿¡æ¯
document.referrer  //è¿”å›å½“å‰æ–‡æ¡£çš„è®¿é—®æ¥æº
document.title    //è¿”å›å½“å‰æ–‡æ¡£çš„æ ‡é¢˜
document.characterSetå±æ€§è¿”å›æ¸²æŸ“å½“å‰æ–‡æ¡£çš„å­—ç¬¦é›†ï¼Œæ¯”å¦‚UTF-8ã€ISO-8859-1ã€‚
document.readyState  //è¿”å›å½“å‰æ–‡æ¡£çš„çŠ¶æ€
document.designMode  //æ§åˆ¶å½“å‰æ–‡æ¡£æ˜¯å¦å¯ç¼–è¾‘ï¼Œå¯è¯»å†™
document.compatMode  //è¿”å›æµè§ˆå™¨å¤„ç†æ–‡æ¡£çš„æ¨¡å¼
document.cookie   //ç”¨æ¥æ“ä½œCookie
</code></pre>
<h3 id="DocumentèŠ‚ç‚¹çš„æ–¹æ³•"><a href="#DocumentèŠ‚ç‚¹çš„æ–¹æ³•" class="headerlink" title="DocumentèŠ‚ç‚¹çš„æ–¹æ³•"></a>DocumentèŠ‚ç‚¹çš„æ–¹æ³•</h3><h4 id="è¯»å†™æ–¹æ³•"><a href="#è¯»å†™æ–¹æ³•" class="headerlink" title="è¯»å†™æ–¹æ³•"></a>è¯»å†™æ–¹æ³•</h4><pre><code class="javascript">document.open()   //ç”¨äºæ–°å»ºå¹¶æ‰“å¼€ä¸€ä¸ªæ–‡æ¡£
document.close()   //ä¸å®‰æ¯”openæ–¹æ³•æ‰€æ–°å»ºçš„æ–‡æ¡£
document.write()   //ç”¨äºå‘å½“å‰æ–‡æ¡£å†™å…¥å†…å®¹
document.writeIn()  //ç”¨äºå‘å½“å‰æ–‡æ¡£å†™å…¥å†…å®¹ï¼Œå°¾éƒ¨æ·»åŠ æ¢è¡Œç¬¦ã€‚
</code></pre>
<h4 id="æŸ¥æ‰¾èŠ‚ç‚¹"><a href="#æŸ¥æ‰¾èŠ‚ç‚¹" class="headerlink" title="æŸ¥æ‰¾èŠ‚ç‚¹"></a>æŸ¥æ‰¾èŠ‚ç‚¹</h4><pre><code class="javascript">document.querySelector(selectors)   //æ¥å—ä¸€ä¸ªCSSé€‰æ‹©å™¨ä½œä¸ºå‚æ•°ï¼Œè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…è¯¥é€‰æ‹©å™¨çš„å…ƒç´ èŠ‚ç‚¹ã€‚
document.querySelectorAll(selectors)  //æ¥å—ä¸€ä¸ªCSSé€‰æ‹©å™¨ä½œä¸ºå‚æ•°ï¼Œè¿”å›æ‰€æœ‰åŒ¹é…è¯¥é€‰æ‹©å™¨çš„å…ƒç´ èŠ‚ç‚¹ã€‚
document.getElementsByTagName(tagName)  //è¿”å›æ‰€æœ‰æŒ‡å®šHTMLæ ‡ç­¾çš„å…ƒç´ 
document.getElementsByClassName(className)   //è¿”å›åŒ…æ‹¬äº†æ‰€æœ‰classåå­—ç¬¦åˆæŒ‡å®šæ¡ä»¶çš„å…ƒç´ 
document.getElementsByName(name)   //ç”¨äºé€‰æ‹©æ‹¥æœ‰nameå±æ€§çš„HTMLå…ƒç´ ï¼ˆæ¯”å¦‚&lt;form&gt;ã€&lt;radio&gt;ã€&lt;img&gt;ã€&lt;frame&gt;ã€&lt;embed&gt;å’Œ&lt;object&gt;ç­‰ï¼‰
document.getElementById(id)   //è¿”å›åŒ¹é…æŒ‡å®šidå±æ€§çš„å…ƒç´ èŠ‚ç‚¹ã€‚
document.elementFromPoint(x,y)  //è¿”å›ä½äºé¡µé¢æŒ‡å®šä½ç½®æœ€ä¸Šå±‚çš„Elementå­èŠ‚ç‚¹ã€‚
</code></pre>
<h4 id="ç”ŸæˆèŠ‚ç‚¹"><a href="#ç”ŸæˆèŠ‚ç‚¹" class="headerlink" title="ç”ŸæˆèŠ‚ç‚¹"></a>ç”ŸæˆèŠ‚ç‚¹</h4><pre><code class="javascript">document.createElement(tagName)   //ç”¨æ¥ç”ŸæˆHTMLå…ƒç´ èŠ‚ç‚¹ã€‚
document.createTextNode(text)   //ç”¨æ¥ç”Ÿæˆæ–‡æœ¬èŠ‚ç‚¹
document.createAttribute(name)  //ç”Ÿæˆä¸€ä¸ªæ–°çš„å±æ€§å¯¹è±¡èŠ‚ç‚¹ï¼Œå¹¶è¿”å›å®ƒã€‚
document.createDocumentFragment()  //ç”Ÿæˆä¸€ä¸ªDocumentFragmentå¯¹è±¡
ï¼ˆ4ï¼‰äº‹ä»¶æ–¹æ³•

document.createEvent(type)   //ç”Ÿæˆä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œè¯¥å¯¹è±¡èƒ½è¢«element.dispatchEvent()æ–¹æ³•ä½¿ç”¨
document.addEventListener(type,listener,capture)  //æ³¨å†Œäº‹ä»¶
document.removeEventListener(type,listener,capture)  //æ³¨é”€äº‹ä»¶
document.dispatchEvent(event)  //è§¦å‘äº‹ä»¶
</code></pre>
<h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><pre><code class="javascript">document.hasFocus()   //è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰æ–‡æ¡£ä¹‹ä¸­æ˜¯å¦æœ‰å…ƒç´ è¢«æ¿€æ´»æˆ–è·å¾—ç„¦ç‚¹ã€‚
document.adoptNode(externalNode)  //å°†æŸä¸ªèŠ‚ç‚¹ï¼Œä»å…¶åŸæ¥æ‰€åœ¨çš„æ–‡æ¡£ç§»é™¤ï¼Œæ’å…¥å½“å‰æ–‡æ¡£ï¼Œå¹¶è¿”å›æ’å…¥åçš„æ–°èŠ‚ç‚¹ã€‚
document.importNode(externalNode, deep)   //ä»å¤–éƒ¨æ–‡æ¡£æ‹·è´æŒ‡å®šèŠ‚ç‚¹ï¼Œæ’å…¥å½“å‰æ–‡æ¡£ã€‚
</code></pre>
<h2 id="ElementèŠ‚ç‚¹"><a href="#ElementèŠ‚ç‚¹" class="headerlink" title="ElementèŠ‚ç‚¹"></a>ElementèŠ‚ç‚¹</h2><h3 id="ElementèŠ‚ç‚¹çš„å±æ€§"><a href="#ElementèŠ‚ç‚¹çš„å±æ€§" class="headerlink" title="ElementèŠ‚ç‚¹çš„å±æ€§"></a>ElementèŠ‚ç‚¹çš„å±æ€§</h3><h4 id="ç‰¹æ€§å±æ€§"><a href="#ç‰¹æ€§å±æ€§" class="headerlink" title="ç‰¹æ€§å±æ€§"></a>ç‰¹æ€§å±æ€§</h4><pre><code class="javascript">Element.attributes  //è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§èŠ‚ç‚¹
Element.id  //è¿”å›æŒ‡å®šå…ƒç´ çš„idå±æ€§ï¼Œå¯è¯»å†™
Element.tagName  //è¿”å›æŒ‡å®šå…ƒç´ çš„å¤§å†™æ ‡ç­¾å
Element.innerHTML   //è¿”å›è¯¥å…ƒç´ åŒ…å«çš„HTMLä»£ç ï¼Œå¯è¯»å†™
Element.outerHTML  //è¿”å›æŒ‡å®šå…ƒç´ èŠ‚ç‚¹çš„æ‰€æœ‰HTMLä»£ç ï¼ŒåŒ…æ‹¬å®ƒè‡ªèº«å’ŒåŒ…å«çš„çš„æ‰€æœ‰å­å…ƒç´ ï¼Œå¯è¯»å†™
Element.className  //è¿”å›å½“å‰å…ƒç´ çš„classå±æ€§ï¼Œå¯è¯»å†™
Element.classList  //è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„æ‰€æœ‰classé›†åˆ
Element.dataset   //è¿”å›å…ƒç´ èŠ‚ç‚¹ä¸­æ‰€æœ‰çš„data-*å±æ€§ã€‚
</code></pre>
<h4 id="å°ºå¯¸å±æ€§"><a href="#å°ºå¯¸å±æ€§" class="headerlink" title="å°ºå¯¸å±æ€§"></a>å°ºå¯¸å±æ€§</h4><pre><code class="javascript">Element.clientHeight   //è¿”å›å…ƒç´ èŠ‚ç‚¹å¯è§éƒ¨åˆ†çš„é«˜åº¦
Element.clientWidth   //è¿”å›å…ƒç´ èŠ‚ç‚¹å¯è§éƒ¨åˆ†çš„å®½åº¦
Element.clientLeft   //è¿”å›å…ƒç´ èŠ‚ç‚¹å·¦è¾¹æ¡†çš„å®½åº¦
Element.clientTop   //è¿”å›å…ƒç´ èŠ‚ç‚¹é¡¶éƒ¨è¾¹æ¡†çš„å®½åº¦
Element.scrollHeight  //è¿”å›å…ƒç´ èŠ‚ç‚¹çš„æ€»é«˜åº¦
Element.scrollWidth  //è¿”å›å…ƒç´ èŠ‚ç‚¹çš„æ€»å®½åº¦
Element.scrollLeft   //è¿”å›å…ƒç´ èŠ‚ç‚¹çš„æ°´å¹³æ»šåŠ¨æ¡å‘å³æ»šåŠ¨çš„åƒç´ æ•°å€¼,é€šè¿‡è®¾ç½®è¿™ä¸ªå±æ€§å¯ä»¥æ”¹å˜å…ƒç´ çš„æ»šåŠ¨ä½ç½®
Element.scrollTop   //è¿”å›å…ƒç´ èŠ‚ç‚¹çš„å‚ç›´æ»šåŠ¨å‘ä¸‹æ»šåŠ¨çš„åƒç´ æ•°å€¼
Element.offsetHeight   //è¿”å›å…ƒç´ çš„å‚ç›´é«˜åº¦(åŒ…å«border,padding)
Element.offsetWidth    //è¿”å›å…ƒç´ çš„æ°´å¹³å®½åº¦(åŒ…å«border,padding)
Element.offsetLeft    //è¿”å›å½“å‰å…ƒç´ å·¦ä¸Šè§’ç›¸å¯¹äºElement.offsetParentèŠ‚ç‚¹çš„å‚ç›´åç§»
Element.offsetTop   //è¿”å›æ°´å¹³ä½ç§»
Element.style  //è¿”å›å…ƒç´ èŠ‚ç‚¹çš„è¡Œå†…æ ·å¼
</code></pre>
<h4 id="èŠ‚ç‚¹ç›¸å…³å±æ€§"><a href="#èŠ‚ç‚¹ç›¸å…³å±æ€§" class="headerlink" title="èŠ‚ç‚¹ç›¸å…³å±æ€§"></a>èŠ‚ç‚¹ç›¸å…³å±æ€§</h4><pre><code class="javascript">Element.children   //åŒ…æ‹¬å½“å‰å…ƒç´ èŠ‚ç‚¹çš„æ‰€æœ‰å­å…ƒç´ 
Element.childElementCount   //è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹åŒ…å«çš„å­HTMLå…ƒç´ èŠ‚ç‚¹çš„ä¸ªæ•°
Element.firstElementChild  //è¿”å›å½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªElementå­èŠ‚ç‚¹  
Element.lastElementChild   //è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªElementå­èŠ‚ç‚¹  
Element.nextElementSibling  //è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸHTMLå…ƒç´ èŠ‚ç‚¹
Element.previousElementSibling  //è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„å‰ä¸€ä¸ªå…„å¼ŸHTMLèŠ‚ç‚¹
Element.offsetParent   //è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„æœ€é è¿‘çš„ã€å¹¶ä¸”CSSçš„positionå±æ€§ä¸ç­‰äºstaticçš„çˆ¶å…ƒç´ ã€‚
</code></pre>
<h3 id="ElementèŠ‚ç‚¹çš„æ–¹æ³•"><a href="#ElementèŠ‚ç‚¹çš„æ–¹æ³•" class="headerlink" title="ElementèŠ‚ç‚¹çš„æ–¹æ³•"></a>ElementèŠ‚ç‚¹çš„æ–¹æ³•</h3><h4 id="ä½ç½®æ–¹æ³•"><a href="#ä½ç½®æ–¹æ³•" class="headerlink" title="ä½ç½®æ–¹æ³•"></a>ä½ç½®æ–¹æ³•</h4><pre><code class="javascript">getBoundingClientRect()  
// getBoundingClientRectè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«top,left,right,bottom,width,height // widthã€height å…ƒç´ è‡ªèº«å®½é«˜
// top å…ƒç´ ä¸Šå¤–è¾¹ç•Œè·çª—å£æœ€ä¸Šé¢çš„è·ç¦»
// right å…ƒç´ å³å¤–è¾¹ç•Œè·çª—å£æœ€ä¸Šé¢çš„è·ç¦»
// bottom å…ƒç´ ä¸‹å¤–è¾¹ç•Œè·çª—å£æœ€ä¸Šé¢çš„è·ç¦»
// left å…ƒç´ å·¦å¤–è¾¹ç•Œè·çª—å£æœ€ä¸Šé¢çš„è·ç¦»
// width å…ƒç´ è‡ªèº«å®½(åŒ…å«border,padding) 
// height å…ƒç´ è‡ªèº«é«˜(åŒ…å«border,padding) 

getClientRects()   //è¿”å›å½“å‰å…ƒç´ åœ¨é¡µé¢ä¸Šå½¢å‚çš„æ‰€æœ‰çŸ©å½¢ã€‚

// å…ƒç´ åœ¨é¡µé¢ä¸Šçš„åç§»é‡  
var rect = el.getBoundingClientRect()  
return {   
  top: rect.top + document.body.scrollTop,   
  left: rect.left + document.body.scrollLeft  
}
</code></pre>
<h4 id="å±æ€§æ–¹æ³•"><a href="#å±æ€§æ–¹æ³•" class="headerlink" title="å±æ€§æ–¹æ³•"></a>å±æ€§æ–¹æ³•</h4><pre><code class="javascript">Element.getAttribute()ï¼šè¯»å–æŒ‡å®šå±æ€§  
Element.setAttribute()ï¼šè®¾ç½®æŒ‡å®šå±æ€§  
Element.hasAttribute()ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å…ƒç´ èŠ‚ç‚¹æ˜¯å¦æœ‰æŒ‡å®šçš„å±æ€§  
Element.removeAttribute()ï¼šç§»é™¤æŒ‡å®šå±æ€§
</code></pre>
<h4 id="æŸ¥æ‰¾æ–¹æ³•"><a href="#æŸ¥æ‰¾æ–¹æ³•" class="headerlink" title="æŸ¥æ‰¾æ–¹æ³•"></a>æŸ¥æ‰¾æ–¹æ³•</h4><pre><code class="javascript">Element.querySelector()  
Element.querySelectorAll()  
Element.getElementsByTagName()  
Element.getElementsByClassName()
</code></pre>
<h4 id="äº‹ä»¶æ–¹æ³•"><a href="#äº‹ä»¶æ–¹æ³•" class="headerlink" title="äº‹ä»¶æ–¹æ³•"></a>äº‹ä»¶æ–¹æ³•</h4><pre><code class="javascript">Element.addEventListener()ï¼šæ·»åŠ äº‹ä»¶çš„å›è°ƒå‡½æ•°  
Element.removeEventListener()ï¼šç§»é™¤äº‹ä»¶ç›‘å¬å‡½æ•°  
Element.dispatchEvent()ï¼šè§¦å‘äº‹ä»¶

//ie8
Element.attachEvent(oneventName,listener)
Element.detachEvent(oneventName,listener)

// eventå¯¹è±¡  
var event = window.event||event;    

// äº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹  
var target = event.target || event.srcElement;

// äº‹ä»¶ä»£ç†  
ul.addEventListener(&#39;click&#39;, function(event) {   
  if (event.target.tagName.toLowerCase() === &#39;li&#39;) {   
    console.log(event.target.innerHTML)   
  }  
});
</code></pre>
<h4 id="å…¶ä»–-1"><a href="#å…¶ä»–-1" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><pre><code class="javascript">Element.scrollIntoView()   //æ»šåŠ¨å½“å‰å…ƒç´ ï¼Œè¿›å…¥æµè§ˆå™¨çš„å¯è§åŒºåŸŸ

//è§£æHTMLå­—ç¬¦ä¸²ï¼Œç„¶åå°†ç”Ÿæˆçš„èŠ‚ç‚¹æ’å…¥DOMæ ‘çš„æŒ‡å®šä½ç½®ã€‚
Element.insertAdjacentHTML(where, htmlString); 
Element.insertAdjacentHTML(&#39;beforeBegin&#39;, htmlString); // åœ¨è¯¥å…ƒç´ å‰æ’å…¥  
Element.insertAdjacentHTML(&#39;afterBegin&#39;, htmlString); // åœ¨è¯¥å…ƒç´ ç¬¬ä¸€ä¸ªå­å…ƒç´ å‰æ’å…¥ 
Element.insertAdjacentHTML(&#39;beforeEnd&#39;, htmlString); // åœ¨è¯¥å…ƒç´ æœ€åä¸€ä¸ªå­å…ƒç´ åé¢æ’å…¥ 
Element.insertAdjacentHTML(&#39;afterEnd&#39;, htmlString); // åœ¨è¯¥å…ƒç´ åæ’å…¥

Element.remove()  //ç”¨äºå°†å½“å‰å…ƒç´ èŠ‚ç‚¹ä»DOMä¸­ç§»é™¤
Element.focus()   //ç”¨äºå°†å½“å‰é¡µé¢çš„ç„¦ç‚¹ï¼Œè½¬ç§»åˆ°æŒ‡å®šå…ƒç´ ä¸Š
</code></pre>
<p>ğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">GitHub</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†&quot;&gt;&lt;a href=&quot;#åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†&quot; class=&quot;headerlink&quot; title=&quot;åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†&quot;&gt;&lt;/a&gt;åŸç”ŸJSä¸­DOMèŠ‚ç‚¹ç›¸å…³APIåˆé›†&lt;/h1&gt;&lt;h2 id=&quot;èŠ‚ç‚¹å±æ€§&quot;
    
    </summary>
    
    
      <category term="API" scheme="https://microzz.com/tags/API/"/>
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="DOM" scheme="https://microzz.com/tags/DOM/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºArrayå¯¹è±¡æ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•</title>
    <link href="https://microzz.com/2017/04/01/array-uniq/"/>
    <id>https://microzz.com/2017/04/01/array-uniq/</id>
    <published>2017-04-01T14:34:16.000Z</published>
    <updated>2017-04-01T15:12:01.342Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸º-Array-å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•"><a href="#ä¸º-Array-å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•" class="headerlink" title="ä¸º Array å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•"></a>ä¸º Array å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•</h1><h2 id="è¾“å…¥ä¾‹å­"><a href="#è¾“å…¥ä¾‹å­" class="headerlink" title="è¾“å…¥ä¾‹å­"></a>è¾“å…¥ä¾‹å­</h2><pre><code class="javascript">[false, true, undefined, null, NaN, 0, 1, {}, {}, &#39;a&#39;, &#39;a&#39;, NaN].uniq()
</code></pre>
<h2 id="è¾“å‡ºä¾‹å­"><a href="#è¾“å‡ºä¾‹å­" class="headerlink" title="è¾“å‡ºä¾‹å­"></a>è¾“å‡ºä¾‹å­</h2><pre><code class="javascript">[false, true, undefined, null, NaN, 0, 1, {}, {}, &#39;a&#39;]
</code></pre>
<h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é¢˜ç›®è¦æ±‚ç»™ Array æ·»åŠ æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨åˆ° <code>prototype</code>ã€‚æ•°ç»„å»é‡æœ¬èº«ç®—æ³•ä¸æ˜¯å¾ˆéš¾ï¼Œä½†æ˜¯åœ¨ JavaScript ä¸­å¾ˆå¤šäººä¼šå¿½è§† <code>NaN</code> çš„å­˜åœ¨ï¼Œå› ä¸ºåœ¨ JS ä¸­ <code>NaN !== NaN</code> ã€‚ä½†æ˜¯åœ¨å»é‡ä¸­æˆ‘ä»¬åˆä¸èƒ½ä¿ç•™ä¸¤ä¸ª NaN ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œä¸€ä¸‹åˆ¤æ–­ï¼Œè¿™æ˜¯å¾ˆå¤šäººå®¹æ˜“å¿½è§†çš„ã€‚ES5çš„å®ç°å¦‚ä¸‹ï¼š</p>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre><code class="javascript">Array.prototype.uniq = function () {
  var arr = [];
  var flag = true;
  this.forEach(function(item) {
    // æ’é™¤ NaN (é‡è¦ï¼ï¼ï¼)
    if (item != item) {
      flag &amp;&amp; arr.indexOf(item) === -1 ? arr.push(item) : &#39;&#39;;
      flag = false;
    } else {
      arr.indexOf(item) === -1 ? arr.push(item) : &#39;&#39;
    }

  });
  return arr;
}
</code></pre>
<h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>æˆ‘ä»¬åªéœ€è¦åœ¨æ•°ç»„ä¸Šç›´æ¥è°ƒç”¨ <code>uniq</code> æ–¹æ³•å°±å¯ä»¥äº†ï¼Œå¦‚ï¼š</p>
<pre><code class="javascript">[false, true, undefined, null, NaN, 0, 1, {}, {}, &#39;a&#39;, &#39;a&#39;, NaN].uniq()
</code></pre>
<p>ç»“æœä¸ºï¼š</p>
<pre><code class="javascript">[false, true, undefined, null, NaN, 0, 1, {}, {}, &#39;a&#39;]
</code></pre>
<h2 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h2><h3 id="ES6çš„å®ç°"><a href="#ES6çš„å®ç°" class="headerlink" title="ES6çš„å®ç°"></a>ES6çš„å®ç°</h3><p>ES6æ–°å¢äº† <code>Set</code> å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„â€œé›†åˆâ€ï¼Œå®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚æ‰€ä»¥å¯ä»¥æ–¹ä¾¿å»é‡ã€‚<br>Setæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆSetæ•°æ®ç»“æ„ã€‚(è¯¦çœ‹ğŸ‘‰<a href="https://microzz.com/2017/01/05/set-map/">Setå’ŒMapæ•°æ®ç»“æ„</a>)</p>
<p>å¦‚æœç”¨ES6ä¸º Array å¯¹è±¡æ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•ï¼Œåˆ™å¯ä»¥å¦‚ä¸‹å®ç°ï¼š</p>
<pre><code class="javascript">Array.prototype.uniq = function() {
  return Array.from(new Set(this));
}
</code></pre>
<p>ä»£ç ä¸­ç”¨ <code>Array.from</code> æŠŠ <code>Set</code> ç»“æ„è½¬æ¢æˆæ•°ç»„ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨å…¶ä»–æ–¹æ³•ï¼Œè¿™é‡Œä¸æ·±ç©¶ã€‚è¿™é‡Œå»é‡å…³é”®ä»£ç åªéœ€è¦ä¸€è¡Œï¼Œæ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼ŸğŸ˜„<br>å¦‚æœä½ è¦ä¼˜é›…ä¸€ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ ES6 çš„æ‰©å±•è¿ç®—ç¬¦ã€‚å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">Array.prototype.uniq = function() {
  return [...new Set(this)];
}
</code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä¸º-Array-å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•&quot;&gt;&lt;a href=&quot;#ä¸º-Array-å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;ä¸º Array å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•&quot;&gt;&lt;/a&gt;ä¸º Array å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="prototype" scheme="https://microzz.com/tags/prototype/"/>
    
      <category term="åŸå‹é“¾" scheme="https://microzz.com/tags/%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>ReactJSæ–°é—»App</title>
    <link href="https://microzz.com/2017/03/29/react-news/"/>
    <id>https://microzz.com/2017/03/29/react-news/</id>
    <published>2017-03-29T11:58:19.000Z</published>
    <updated>2017-04-11T14:43:42.154Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ReactNewsApp"><a href="#ReactNewsApp" class="headerlink" title="ReactNewsApp"></a>ReactNewsApp</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>ä¸€ä¸ªç”±React.jsç¼–å†™çš„æ–°é—»WebAppã€‚<br>A news WebApp by React.js.<br>æœ¬åº”ç”¨ä»…ä¾›å­¦ä¹ ï¼Œè¯·ä¸è¦ç”¨äºå•†ä¸šç”¨é€”ï¼Œä¾›å­¦ä¹ äº¤æµğŸ˜<br>å› ä¸ºæŠ€æœ¯æœ‰é™ï¼Œæ‰€ä»¥å¯èƒ½æœ‰å¥½å¤šä¸è¶³ï¼Œæ¬¢è¿æå»ºè®®å“¦ğŸ˜„<br> ğŸ‘‰ <a href="https://github.com/microzz/news-app-by-react.js" target="_blank" rel="external">é¡¹ç›®åœ°å€</a></p>
<h2 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="headerlink" title="æŠ€æœ¯æ ˆ"></a>æŠ€æœ¯æ ˆ</h2><h3 id="React-jsç»„ä»¶åŒ–å¼€å‘"><a href="#React-jsç»„ä»¶åŒ–å¼€å‘" class="headerlink" title="React.jsç»„ä»¶åŒ–å¼€å‘"></a>React.jsç»„ä»¶åŒ–å¼€å‘</h3><p>é¡¹ç›®é‡‡ç”¨ç»„ä»¶åŒ–çš„æ€æƒ³ï¼ŒæŠŠå¤§çš„åŠŸèƒ½æ¨¡å—åˆ’åˆ†æˆä¸€ä¸ªä¸ªå°çš„æ¨¡å—ï¼Œä¾¿äºå›¢é˜Ÿåˆä½œå’Œç»´æŠ¤ã€‚</p>
<h3 id="react-routerè·¯ç”±ç®¡ç†"><a href="#react-routerè·¯ç”±ç®¡ç†" class="headerlink" title="react-routerè·¯ç”±ç®¡ç†"></a>react-routerè·¯ç”±ç®¡ç†</h3><p>è·¯ç”±åº“React-Routerï¼Œå®ƒæ˜¯å®˜æ–¹ç»´æŠ¤çš„ï¼Œäº‹å®ä¸Šä¹Ÿæ˜¯å”¯ä¸€å¯é€‰çš„è·¯ç”±åº“ã€‚å®ƒé€šè¿‡ç®¡ç† URLï¼Œå®ç°ç»„ä»¶çš„åˆ‡æ¢å’ŒçŠ¶æ€çš„å˜åŒ–ï¼Œå¼€å‘å¤æ‚çš„åº”ç”¨å‡ ä¹è‚¯å®šä¼šç”¨åˆ°ï¼Œç‰¹åˆ«æ˜¯SPA(å•é¡µåº”ç”¨)</p>
<h3 id="antdä½¿é¡µé¢æ›´åŠ ç¾è§‚"><a href="#antdä½¿é¡µé¢æ›´åŠ ç¾è§‚" class="headerlink" title="antdä½¿é¡µé¢æ›´åŠ ç¾è§‚"></a>antdä½¿é¡µé¢æ›´åŠ ç¾è§‚</h3><p>Ant Design æ˜¯èš‚èšé‡‘æœå¼€å‘å’Œæ­£åœ¨ä½¿ç”¨çš„ä¸€å¥—ä¼ä¸šçº§çš„å‰ç«¯è®¾è®¡è¯­è¨€å’ŒåŸºäº React çš„å‰ç«¯æ¡†æ¶å®ç°ã€‚</p>
<ul>
<li>ç‰¹æ€§</li>
</ul>
<p>ä¼ä¸šçº§é‡‘èäº§å“çš„äº¤äº’è¯­è¨€å’Œè§†è§‰ä½“ç³»ã€‚</p>
<p>ä¸°å¯Œå®ç”¨çš„ React UI ç»„ä»¶ã€‚</p>
<p>åŸºäº React çš„ç»„ä»¶åŒ–å¼€å‘æ¨¡å¼ã€‚</p>
<p>èƒŒé  npm ç”Ÿæ€åœˆã€‚</p>
<p>åŸºäº webpack çš„è°ƒè¯•æ„å»ºæ–¹æ¡ˆï¼Œæ”¯æŒ ES6ã€‚</p>
<h3 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h3><p>Webpackä½œä¸ºæ„å»ºå·¥å…·</p>
<h4 id="ES6è¯­æ³•"><a href="#ES6è¯­æ³•" class="headerlink" title="ES6è¯­æ³•"></a>ES6è¯­æ³•</h4><p>å…¨é¢é‡‡ç”¨ES6è¯­æ³•</p>
<h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><p>æœ¬é¡¹ç›®ä»¥æ…•è¯¾ç½‘è§†é¢‘ä¸ºåŸå‹å¼€å‘ï¼Œå¤§å®¶å¯ä»¥å‘æŒ¥æƒ³è±¡æ”¹è¿›åŠŸèƒ½ğŸ˜„ </p>
<p>ä¸‹è½½ä¸‹æ¥ä¹‹åï¼Œå…ˆå®‰è£…ä¾èµ– <code>npm install</code> æˆ–è€… <code>cnpm install</code>ï¼Œç„¶åï¼š </p>
<p><code>npm run dev</code> or <code>npm run build</code></p>
<h2 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h2><p>PCç«¯<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170329_react_news/pc-index.png" alt="react-news" title="">
                </div>
                <div class="image-caption">react-news</div>
            </figure></p>
<p>æ‰‹æœºç«¯</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170329_react_news/phone.png" alt="react-news" title="">
                </div>
                <div class="image-caption">react-news</div>
            </figure>
<p>ğŸ‘‰ <a href="https://microzz.com/">ä¸ªäººæŠ€æœ¯ç½‘ç«™</a><br>ğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">GitHub</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ReactNewsApp&quot;&gt;&lt;a href=&quot;#ReactNewsApp&quot; class=&quot;headerlink&quot; title=&quot;ReactNewsApp&quot;&gt;&lt;/a&gt;ReactNewsApp&lt;/h1&gt;&lt;h2 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; class=&quot;
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="ReactJS" scheme="https://microzz.com/tags/ReactJS/"/>
    
  </entry>
  
  <entry>
    <title>JSä¸­ä¸€ä¸ªè¿ç®—ç¬¦ä¼˜å…ˆçº§é—®é¢˜å¼•å‘çš„æ€è€ƒ</title>
    <link href="https://microzz.com/2017/03/25/operator/"/>
    <id>https://microzz.com/2017/03/25/operator/</id>
    <published>2017-03-25T11:32:46.000Z</published>
    <updated>2017-03-25T12:32:19.542Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScriptä¸­ä¸€ä¸ªè¿ç®—ç¬¦ä¼˜å…ˆçº§é—®é¢˜å¼•å‘çš„æ€è€ƒ"><a href="#JavaScriptä¸­ä¸€ä¸ªè¿ç®—ç¬¦ä¼˜å…ˆçº§é—®é¢˜å¼•å‘çš„æ€è€ƒ" class="headerlink" title="JavaScriptä¸­ä¸€ä¸ªè¿ç®—ç¬¦ä¼˜å…ˆçº§é—®é¢˜å¼•å‘çš„æ€è€ƒ"></a>JavaScriptä¸­ä¸€ä¸ªè¿ç®—ç¬¦ä¼˜å…ˆçº§é—®é¢˜å¼•å‘çš„æ€è€ƒ</h1><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><blockquote>
<p>å‡è®¾ <code>val</code> å·²ç»å£°æ˜,å¯å®šä¹‰ä¸ºä»»ä½•å€¼ã€‚åˆ™ä¸‹é¢jsä»£ç æœ‰å¯èƒ½è¾“å‡ºçš„ç»“æœä¸º:</p>
</blockquote>
<pre><code class="javascript">console.log(&#39;Value is &#39; + (val != &#39;0&#39;) ? &#39;define&#39; : &#39;undefine&#39;);
</code></pre>
<p>A. <em>Value is define</em><br>B. <em>Value is undefine</em><br>C. <em>define</em><br>D. <em>undefine</em><br>E. <em>Value is define æˆ–è€… Value is undefine</em><br>F. <em>define æˆ–è€… undefine</em><br>G. <em>å…¶å®ƒé€‰é¡¹éƒ½æœ‰å¯èƒ½</em></p>
<p>å¦‚æœæ˜¯ä½ ï¼Œä½ ä¼šé€‰ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<hr>
<p>å¯ä»¥è¯´ï¼Œå¤§éƒ¨åˆ†äººéƒ½ä¼šåœ¨Aã€Bã€Eä¸­é€‰æ‹©ï¼Œä»¥ä¸ºé‡ç‚¹åœ¨åé¢çš„ä¸‰ç›®è¿ç®—ç¬¦ï¼Œå‰é¢å­—ç¬¦ä¸²åŸæ ·è¾“å‡ºå°±æ˜¯äº†ã€‚ä½†æ˜¯ç­”æ¡ˆæ˜¯ <strong>C</strong> ã€‚</p>
<hr>
<h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å› ä¸ºæˆ‘ä»¬å¿½ç•¥äº†è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ã€‚è¦çŸ¥é“ï¼ŒåŠ å· <code>+</code> ä¼˜å…ˆçº§é«˜äºä¸‰ç›®è¿ç®— <code>? :</code>ï¼Œä½äºæ‹¬å· <code>()</code>ã€‚ä¸ç®¡ <code>(val != &#39;0&#39;)</code> çš„çœŸå‡ï¼Œ<code>&#39;Value is &#39; + (val != &#39;0&#39;)</code> æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶ä¸”è½¬æ¢æˆå¸ƒå°”å€¼ä¸€å®šæ˜¯ <code>true</code> ï¼</p>
<hr>
<p>ä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“åˆ†æé‡Œé¢çš„æ¯ä¸€éƒ¨åˆ†ã€‚</p>
<p>å…ˆæ¥çœ‹çœ‹æ‹¬å·é‡Œé¢çš„æƒ…å†µï¼Œé¢˜ç›®å·²ç»è¯´äº†ï¼š</p>
<blockquote>
<p>å‡è®¾ <code>val</code> å·²ç»å£°æ˜,å¯å®šä¹‰ä¸ºä»»ä½•å€¼ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œ<code>(val != &#39;0&#39;)</code> çš„å€¼å¯ä»¥æ˜¯ <code>true</code> æˆ–è€… <code>false</code> ï¼Œé‚£ä¹ˆè¿™ä¸ªå°±æ¶‰åŠåˆ°JavaScriptçš„ä¸€äº›éšå¼è½¬æ¢é€»è¾‘ã€‚</p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œ </p>
<pre><code class="javascript">0 == &#39;0&#39;  // true
null == undefined  // true
false == &#39;0&#39;  // true
</code></pre>
<h2 id="å¸¸ç”¨çš„éšå¼è½¬æ¢é€»è¾‘"><a href="#å¸¸ç”¨çš„éšå¼è½¬æ¢é€»è¾‘" class="headerlink" title="å¸¸ç”¨çš„éšå¼è½¬æ¢é€»è¾‘"></a>å¸¸ç”¨çš„éšå¼è½¬æ¢é€»è¾‘</h2><pre><code class="javascript">x+&quot;&quot;  //ç­‰ä»·äºStringï¼ˆxï¼‰

+x  //ç­‰ä»·äºNumberï¼ˆxï¼‰ï¼Œä¹Ÿå¯ä»¥å†™æˆx-0

!!x  //ç­‰ä»·äºBoolean(x)
</code></pre>
<h2 id="é™„å½•-Javascriptç±»å‹è½¬æ¢"><a href="#é™„å½•-Javascriptç±»å‹è½¬æ¢" class="headerlink" title="é™„å½• - Javascriptç±»å‹è½¬æ¢"></a>é™„å½• - Javascriptç±»å‹è½¬æ¢</h2><table>
<thead>
<tr>
<th style="text-align:center">å€¼</th>
<th style="text-align:center">è½¬æ¢ä¸ºï¼šå­—ç¬¦ä¸²</th>
<th style="text-align:center">æ•°å­—</th>
<th style="text-align:center">å¸ƒå°”å€¼</th>
<th style="text-align:center">å¯¹è±¡</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">undefined</td>
<td style="text-align:center">â€œundefinedâ€</td>
<td style="text-align:center">NaN</td>
<td style="text-align:center">false</td>
<td style="text-align:center">throws TypeError</td>
</tr>
<tr>
<td style="text-align:center">null</td>
<td style="text-align:center">â€œnullâ€</td>
<td style="text-align:center">0</td>
<td style="text-align:center">false</td>
<td style="text-align:center">TypeError</td>
</tr>
<tr>
<td style="text-align:center">true</td>
<td style="text-align:center">â€œtrueâ€</td>
<td style="text-align:center">1</td>
<td style="text-align:center">new Boolean(true)</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">false</td>
<td style="text-align:center">â€œfalseâ€</td>
<td style="text-align:center">0</td>
<td style="text-align:center">new Boolean(false)</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">â€œâ€ç©ºå­—ç¬¦ä¸²</td>
<td style="text-align:center"></td>
<td style="text-align:center">0</td>
<td style="text-align:center">false</td>
<td style="text-align:center">new String(â€œâ€)</td>
</tr>
<tr>
<td style="text-align:center">â€œ1.2â€ï¼ˆéç©ºï¼Œæ•°å­—ï¼‰</td>
<td style="text-align:center"></td>
<td style="text-align:center">1.2</td>
<td style="text-align:center">true</td>
<td style="text-align:center">new String(â€œ1.2â€)</td>
</tr>
<tr>
<td style="text-align:center">â€œoneâ€ï¼ˆéç©ºï¼Œéæ•°å­—ï¼‰</td>
<td style="text-align:center"></td>
<td style="text-align:center">NaN</td>
<td style="text-align:center">true</td>
<td style="text-align:center">new String(â€œoneâ€)</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">â€œ0â€</td>
<td style="text-align:center"></td>
<td style="text-align:center">false</td>
<td style="text-align:center">Number(0)</td>
</tr>
<tr>
<td style="text-align:center">-0</td>
<td style="text-align:center">â€œ0â€</td>
<td style="text-align:center"></td>
<td style="text-align:center">false</td>
<td style="text-align:center">Number(-0)</td>
</tr>
<tr>
<td style="text-align:center">NaN</td>
<td style="text-align:center">â€œNaNâ€</td>
<td style="text-align:center"></td>
<td style="text-align:center">false</td>
<td style="text-align:center">new Number(NaN)</td>
</tr>
<tr>
<td style="text-align:center">Infinity</td>
<td style="text-align:center">â€œInfinityâ€</td>
<td style="text-align:center"></td>
<td style="text-align:center">true</td>
<td style="text-align:center">new Number(Infinity)</td>
</tr>
<tr>
<td style="text-align:center">-Infinity</td>
<td style="text-align:center">â€œ-Infinityâ€</td>
<td style="text-align:center"></td>
<td style="text-align:center">true</td>
<td style="text-align:center">new Number(-Infinity)</td>
</tr>
<tr>
<td style="text-align:center">1ï¼ˆæ— ç©·å¤§ï¼Œéé›¶ï¼‰</td>
<td style="text-align:center">â€œ1â€</td>
<td style="text-align:center"></td>
<td style="text-align:center">true</td>
<td style="text-align:center">new Number(1)</td>
</tr>
<tr>
<td style="text-align:center">{}ï¼ˆä»»æ„å¯¹è±¡ï¼‰</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">true</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">[]ï¼ˆä»»æ„æ•°ç»„ï¼‰</td>
<td style="text-align:center">â€œâ€</td>
<td style="text-align:center">0</td>
<td style="text-align:center">true</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">[9]ï¼ˆ1ä¸ªæ•°å­—å¯¹è±¡ï¼‰</td>
<td style="text-align:center">â€œ9â€</td>
<td style="text-align:center">9</td>
<td style="text-align:center">true</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">[â€˜aâ€™]ï¼ˆå…¶ä»–æ•°ç»„ï¼‰</td>
<td style="text-align:center">ä½¿ç”¨joinï¼ˆï¼‰æ–¹æ³•</td>
<td style="text-align:center">NaN</td>
<td style="text-align:center">true</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">functionï¼ˆï¼‰ï½›ï½ï¼ˆä»»æ„å‡½æ•°ï¼‰</td>
<td style="text-align:center"></td>
<td style="text-align:center">NaN</td>
<td style="text-align:center">true</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>å›åˆ°æœ¬é¢˜æ¡ä»¶æ°¸è¿œä¸ºçœŸï¼Œå¹¶ä¸”åªè¾“å‡º <code>&#39;define&#39;</code></p>
<h2 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean"></a>Boolean</h2><p>è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹</p>
<p>ä¸‹é¢ç¨‹åºçš„æ˜¾ç¤ºç»“æœæ˜¯ï¼Ÿ</p>
<pre><code class="javascript">var x = new Boolean(false);
if (x) {
  alert(&#39;hi&#39;);
}
var y = Boolean(0);
if (y) {
  alert(&#39;hello&#39;); 
}
</code></pre>
<p>xä¸ºBooleanå¯¹è±¡ï¼Œåœ¨ifè¯­å¥é‡Œçš„åˆ¤æ–­ä¸ºtrueï¼Œè™½ç„¶xçš„å€¼ä¸ºfalseï¼Œä½†æ˜¯ä½œä¸ºå¯¹è±¡ï¼Œifä¼šç›´æ¥åˆ¤æ–­ä¸ºtrueã€‚yä¸ºBooleanå€¼ï¼Œåœ¨ifé‡Œçš„åˆ¤æ–­å°±æ˜¯falseå€¼ã€‚æ‰€ä»¥ä¼šæ˜¾ç¤º <code>&#39;hi&#39;</code>ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScriptä¸­ä¸€ä¸ªè¿ç®—ç¬¦ä¼˜å…ˆçº§é—®é¢˜å¼•å‘çš„æ€è€ƒ&quot;&gt;&lt;a href=&quot;#JavaScriptä¸­ä¸€ä¸ªè¿ç®—ç¬¦ä¼˜å…ˆçº§é—®é¢˜å¼•å‘çš„æ€è€ƒ&quot; class=&quot;headerlink&quot; title=&quot;JavaScriptä¸­ä¸€ä¸ªè¿ç®—ç¬¦ä¼˜å…ˆçº§é—®é¢˜å¼•å‘çš„æ€è€ƒ&quot;&gt;&lt;/a&gt;JavaScri
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="Boolean" scheme="https://microzz.com/tags/Boolean/"/>
    
  </entry>
  
  <entry>
    <title>ã€é¢è¯•é¢˜ã€‘åˆ›å»ºé•¿åº¦ä¸º100çš„æ•°ç»„</title>
    <link href="https://microzz.com/2017/03/24/create-arr/"/>
    <id>https://microzz.com/2017/03/24/create-arr/</id>
    <published>2017-03-24T10:57:25.000Z</published>
    <updated>2017-12-18T03:40:58.970Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸ç”¨å¾ªç¯åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º100çš„æ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ çš„å€¼ç­‰äºå®ƒçš„ä¸‹æ ‡"><a href="#ä¸ç”¨å¾ªç¯åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º100çš„æ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ çš„å€¼ç­‰äºå®ƒçš„ä¸‹æ ‡" class="headerlink" title="ä¸ç”¨å¾ªç¯åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º100çš„æ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ çš„å€¼ç­‰äºå®ƒçš„ä¸‹æ ‡"></a>ä¸ç”¨å¾ªç¯åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º100çš„æ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ çš„å€¼ç­‰äºå®ƒçš„ä¸‹æ ‡</h1><p>å…ˆæ¥è¯´ä¸€ä¸‹æœ€ç›´æ¥çš„è§£æ³•â€¦</p>
<pre><code class="javascript">var arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99];
</code></pre>
<p>â€¦</p>
<p>æ¥ä¸‹æ¥è½¬å…¥æ­£é¢˜ã€‚ã€‚ã€‚</p>
<h2 id="ä¼ ç»Ÿforå¾ªç¯"><a href="#ä¼ ç»Ÿforå¾ªç¯" class="headerlink" title="ä¼ ç»Ÿforå¾ªç¯"></a>ä¼ ç»Ÿforå¾ªç¯</h2><p>æ¥è¯´ä¸€ä¸‹ä¼ ç»Ÿçš„forå¾ªç¯ï¼š</p>
<pre><code class="javascript">var arr = new Array(100)
for (var i = 0; i &lt; arr.length; i++) {
  arr[i] = i;
}
arr; // [0, 1, ..., 99]
</code></pre>
<p>æƒ³å¿…å¤§å®¶éƒ½æ²¡ä»€ä¹ˆé—®é¢˜ğŸ‘</p>
<h2 id="ä¸ç”¨forå¾ªç¯"><a href="#ä¸ç”¨forå¾ªç¯" class="headerlink" title="ä¸ç”¨forå¾ªç¯"></a>ä¸ç”¨forå¾ªç¯</h2><p>ä½†æ˜¯å¦‚ä½•ä¸ç”¨<code>for</code>å¾ªç¯å®ç°å‘¢ï¼Ÿ</p>
<h3 id="ES5çš„å®ç°"><a href="#ES5çš„å®ç°" class="headerlink" title="ES5çš„å®ç°"></a>ES5çš„å®ç°</h3><pre><code class="javascript">Object.keys(Array.from({ length: 100 }));  
// [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, ..., &quot;98&quot;, &quot;99&quot;]
</code></pre>
<p>ä»€ä¹ˆï¼Ÿ<code>Array.from</code>æ˜¯ES6çš„ï¼Ÿæ²¡äº‹ï¼Œæˆ‘ä»¬å¯ä»¥æ¢æˆES5çš„ğŸ˜„</p>
<pre><code class="javascrript">Object.keys(
Array.apply(null,{ length: 100 }));
</code></pre>
<p>è¿™æ ·ä¼¼ä¹çš„ç¡®å®Œæˆäº†åŠŸèƒ½ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ­¤æ—¶å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ES5çš„<code>map</code>æ–¹æ³•è¿›è¡Œå¤„ç†ä¸€ä¸‹ï¼š</p>
<pre><code class="javascript">Object.keys(Array.from({ length: 100 })).map(function(item) {
    return +item;
});
</code></pre>
<p>è¿™é‡Œç”¨äº†ä¸€ä¸ªå°æŠ€å·§ï¼Œå­—ç¬¦ä¸²å‰é¢åŠ ä¸€ä¸ª â€œ+â€ å°±å¯ä»¥è½¬æˆæ•°å­—ã€‚å¦‚æœä½ ä¸å–œæ¬¢è¿™æ ·ï¼Œå¯ä»¥ä½¿ç”¨parseIntï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœã€‚</p>
<h3 id="ES6çš„å®ç°"><a href="#ES6çš„å®ç°" class="headerlink" title="ES6çš„å®ç°"></a>ES6çš„å®ç°</h3><h4 id="æ™®é€šå®ç°"><a href="#æ™®é€šå®ç°" class="headerlink" title="æ™®é€šå®ç°"></a>æ™®é€šå®ç°</h4><p>ES6ä¸­æ•°ç»„å®ä¾‹æœ‰<code>keys</code>ã€<code>values</code>ã€<code>entries</code>æ–¹æ³•ï¼Œåˆ†åˆ«ç”¨äºéå†æ•°ç»„çš„ç´¢å¼•ã€é”®å€¼ã€é”®å€¼å¯¹ï¼Œå®ƒä»¬éƒ½è¿”å›<strong>éå†å™¨å¯¹è±¡</strong>ï¼ˆè¯¦ç»†ğŸ‘‰<a href="https://microzz.com/2017/01/12/iterator/">Iteratorå’Œforâ€¦ofå¾ªç¯</a>ï¼‰</p>
<p>å› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨ES6çš„<code>Array.from</code>è½¬æˆæ•°ç»„ï¼š</p>
<pre><code class="javascript">Array.from(new Array(100).keys());
</code></pre>
<p><code>Array.from</code>å…¶å®è¿˜æœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿éå†å¤„ç†æ¯ä¸€ä¸ªæ•°æ®</p>
<pre><code class="javascript">Array.from({ length: 100 }, (v, i) =&gt; i);
Array.from(Array(100), (v, i) =&gt; i);
// [0, 1, 2, ..., 98, 99]
</code></pre>
<h4 id="ä¼˜é›…è¿›é˜¶-æ‰©å±•è¿ç®—ç¬¦"><a href="#ä¼˜é›…è¿›é˜¶-æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="ä¼˜é›…è¿›é˜¶ - æ‰©å±•è¿ç®—ç¬¦"></a>ä¼˜é›…è¿›é˜¶ - æ‰©å±•è¿ç®—ç¬¦</h4><p>ES6æ–°å¢ <code>...</code> <strong>æ‰©å±•è¿ç®—ç¬¦</strong>ï¼Œæå¤§æ–¹ä¾¿äº†ç›¸å…³æ“ä½œ(è¯¦è§ğŸ‘‰<a href="https://microzz.com/2016/12/10/function/">å‡½æ•°çš„æ‰©å±•</a>é‡Œé¢çš„æ‰©å±•è¿ç®—ç¬¦)</p>
<p>å› æ­¤æˆ‘ä»¬å¯ä»¥æ›´åŠ ä¼˜é›…åœ°å®ç°ï¼š</p>
<pre><code class="javascript">[...Array(100).keys()]
</code></pre>
<p>æˆ–è€…</p>
<pre><code class="javascript">[...Array.from({ length: 100 }).keys()]
</code></pre>
<p>æ€è·¯å°±æ˜¯è¿™æ ·ï¼Œå½“ç„¶æˆ‘ä»¬è¿˜å¯ä»¥æ··åˆæ­é…å‡ºå„ç§è§£æ³•ï¼Œç”šè‡³ES5ã€ES6æ··åˆğŸ˜‚æœ‰å¯èƒ½è¿˜æœ‰å„ç§å¥‡å¦™è§£æ³•ï¼Œæ¯ä¸ªäººå»ç»†ç»†ä¸“ç ”å§ğŸ˜Š</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä¸ç”¨å¾ªç¯åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º100çš„æ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ çš„å€¼ç­‰äºå®ƒçš„ä¸‹æ ‡&quot;&gt;&lt;a href=&quot;#ä¸ç”¨å¾ªç¯åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º100çš„æ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ çš„å€¼ç­‰äºå®ƒçš„ä¸‹æ ‡&quot; class=&quot;headerlink&quot; title=&quot;ä¸ç”¨å¾ªç¯åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º100çš„æ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ çš„å€¼ç­‰äº
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="Array" scheme="https://microzz.com/tags/Array/"/>
    
      <category term="ECMAScrpt6" scheme="https://microzz.com/tags/ECMAScrpt6/"/>
    
  </entry>
  
  <entry>
    <title>Reactå’ŒVueå¯¹æ¯”</title>
    <link href="https://microzz.com/2017/03/22/react-vue/"/>
    <id>https://microzz.com/2017/03/22/react-vue/</id>
    <published>2017-03-22T15:23:29.000Z</published>
    <updated>2017-05-18T15:35:20.162Z</updated>
    
    <content type="html"><![CDATA[<h1 id="React-jså’ŒVue-jså¯¹æ¯”"><a href="#React-jså’ŒVue-jså¯¹æ¯”" class="headerlink" title="React.jså’ŒVue.jså¯¹æ¯”"></a>React.jså’ŒVue.jså¯¹æ¯”</h1><h2 id="ç›¸åŒç‚¹"><a href="#ç›¸åŒç‚¹" class="headerlink" title="ç›¸åŒç‚¹"></a>ç›¸åŒç‚¹</h2><ol>
<li>æ•°æ®é©±åŠ¨è§†å›¾ï¼Œæä¾›å“åº”å¼çš„è§†å›¾ç»„ä»¶</li>
<li>éƒ½æœ‰Virtual DOMï¼Œç»„ä»¶åŒ–å¼€å‘ï¼Œé€šè¿‡propså‚æ•°è¿›è¡Œçˆ¶å­ç»„ä»¶æ•°æ®çš„ä¼ é€’ï¼Œéƒ½å®ç°webComponentsè§„èŒƒ</li>
<li><p>æ•°æ®æµåŠ¨å•å‘<br>éƒ½æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“</p>
</li>
<li><p>éƒ½æœ‰æ”¯æŒnativeçš„æ–¹æ¡ˆï¼ŒReactçš„React nativeï¼ŒVueçš„weex</p>
</li>
</ol>
<h2 id="ä¸åŒç‚¹"><a href="#ä¸åŒç‚¹" class="headerlink" title="ä¸åŒç‚¹"></a>ä¸åŒç‚¹</h2><ol>
<li><p>ç¤¾åŒºï¼šReactç¤¾åŒºè¿˜æ˜¯è¦æ¯”vueå¤§å¾ˆå¤šï¼›</p>
</li>
<li><p>å¼€å‘æ¨¡å¼ï¼šReactåœ¨viewå±‚ä¾µå…¥æ€§è¿˜æ˜¯è¦æ¯”Vueå¤§å¾ˆå¤šçš„,Reactä¸¥æ ¼ä¸Šåªé’ˆå¯¹MVCçš„viewå±‚ï¼ŒVueåˆ™æ˜¯MVVMæ¨¡å¼çš„ä¸€ç§å®ç°ï¼›</p>
</li>
<li><p>æ•°æ®ç»‘å®šï¼šVueæœ‰å®ç°äº†åŒå‘æ•°æ®ç»‘å®šï¼ŒReactæ•°æ®æµåŠ¨æ˜¯å•å‘çš„</p>
</li>
<li><p>æ•°æ®æ¸²æŸ“ï¼šå¯¹äºå¤§è§„æ¨¡æ•°æ®æ¸²æŸ“ï¼ŒReactè¦æ¯”Vueæ›´å¿«ï¼Œæ¸²æŸ“æœºåˆ¶å¯åŠ¨æ—¶å€™è¦åšçš„å·¥ä½œæ¯”è¾ƒå¤šï¼›</p>
</li>
<li><p>æ•°æ®æ›´æ–°æ–¹é¢ï¼šVue ç”±äºé‡‡ç”¨ä¾èµ–è¿½è¸ªï¼Œé»˜è®¤å°±æ˜¯ä¼˜åŒ–çŠ¶æ€ï¼šä½ åŠ¨äº†å¤šå°‘æ•°æ®ï¼Œå°±è§¦å‘å¤šå°‘æ›´æ–°ï¼Œä¸å¤šä¹Ÿä¸å°‘ã€‚Reactåœ¨å¤æ‚çš„åº”ç”¨é‡Œæœ‰ä¸¤ä¸ªé€‰æ‹©:</p>
</li>
</ol>
<p>(1). æ‰‹åŠ¨æ·»åŠ  shouldComponentUpdate æ¥é¿å…ä¸éœ€è¦çš„ vdom re-renderã€‚<br>(2).Components å°½å¯èƒ½éƒ½ç”¨ pureRenderMixinï¼Œç„¶åé‡‡ç”¨ redux ç»“æ„ + Immutable.jsï¼›</p>
<ol>
<li><p>å¼€å‘é£æ ¼çš„åå¥½ï¼šReact æ¨èçš„åšæ³•æ˜¯ JSX + inline styleï¼Œä¹Ÿå°±æ˜¯æŠŠ HTML å’Œ CSS å…¨éƒ½å†™è¿› JavaScript äº†ï¼Œå³â€all in jsâ€ï¼›Vueè¿›é˜¶ä¹‹åæ¨èçš„æ˜¯ä½¿ç”¨ webpack + vue-loader çš„å•æ–‡ä»¶ç»„ä»¶æ ¼å¼ï¼Œå³html,css,jså†™åœ¨åŒä¸€ä¸ªæ–‡ä»¶ï¼›</p>
</li>
<li><p>ä½¿ç”¨åœºæ™¯ï¼šReacté…åˆReduxæ¶æ„é€‚åˆè¶…å¤§è§„æ¨¡å¤šäººåä½œçš„å¤æ‚é¡¹ç›®;Vueåˆ™é€‚åˆå°å¿«çµçš„é¡¹ç›®ã€‚å¯¹äºéœ€è¦å¯¹ DOM è¿›è¡Œå¾ˆå¤šè‡ªå®šä¹‰æ“ä½œçš„é¡¹ç›®ï¼ŒVue çš„çµæ´»æ€§ä¼˜äº Reactï¼›</p>
</li>
<li><p>Vueè¦æ¯”Reactæ›´å¥½ä¸Šæ‰‹ï¼Œå…·ä½“å¯èƒ½ä½“ç°åœ¨å¾ˆå¤šäººä¸ç†Ÿæ‚‰Reactçš„JSXè¯­æ³•å’Œå‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ï¼Œä»¥åŠæƒ³è¦å‘æŒ¥å‡ºReactçš„æœ€å¤§å¨åŠ›éœ€è¦å­¦ä¹ å®ƒä¸€ç³»åˆ—ç”Ÿæ€çš„ç¼˜æ•…ï¼›</p>
</li>
<li><p>Vueç€é‡æé«˜å¼€å‘æ•ˆç‡,è®©å‰ç«¯ç¨‹åºå‘˜æ›´å¿«é€Ÿæ–¹ä¾¿çš„å¼€å‘åº”ç”¨ã€‚Reactç€é‡äºå˜é©å¼€å‘æ€æƒ³ï¼Œæå‡å‰ç«¯ç¨‹åºå‘˜ç¼–ç¨‹çš„æ·±åº¦ä¸åˆ›é€ åŠ›,è®©å‰ç«¯å·¥ç¨‹å¸ˆæˆä¸ºçœŸæ­£çš„ç¨‹åºå‘˜è€Œä¸æ˜¯UIçš„æ„å»ºè€…</p>
</li>
</ol>
<h2 id="å…³äº"><a href="#å…³äº" class="headerlink" title="å…³äº"></a>å…³äº</h2><p>GitHub: ğŸ‘‰<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;React-jså’ŒVue-jså¯¹æ¯”&quot;&gt;&lt;a href=&quot;#React-jså’ŒVue-jså¯¹æ¯”&quot; class=&quot;headerlink&quot; title=&quot;React.jså’ŒVue.jså¯¹æ¯”&quot;&gt;&lt;/a&gt;React.jså’ŒVue.jså¯¹æ¯”&lt;/h1&gt;&lt;h2 id=&quot;ç›¸åŒç‚¹&quot;&gt;
    
    </summary>
    
    
      <category term="Vue.js" scheme="https://microzz.com/tags/Vue-js/"/>
    
      <category term="ReactJS" scheme="https://microzz.com/tags/ReactJS/"/>
    
  </entry>
  
  <entry>
    <title>Vue.js2.0å­¦ä¹ ç¬”è®°</title>
    <link href="https://microzz.com/2017/03/20/vue-note/"/>
    <id>https://microzz.com/2017/03/20/vue-note/</id>
    <published>2017-03-20T14:30:39.000Z</published>
    <updated>2017-03-21T15:15:17.377Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue-js2-0å­¦ä¹ ç¬”è®°"><a href="#Vue-js2-0å­¦ä¹ ç¬”è®°" class="headerlink" title="Vue.js2.0å­¦ä¹ ç¬”è®°"></a>Vue.js2.0å­¦ä¹ ç¬”è®°</h1><h2 id="çˆ¶å­ç»„ä»¶å¦‚ä½•é€šä¿¡"><a href="#çˆ¶å­ç»„ä»¶å¦‚ä½•é€šä¿¡" class="headerlink" title="çˆ¶å­ç»„ä»¶å¦‚ä½•é€šä¿¡"></a>çˆ¶å­ç»„ä»¶å¦‚ä½•é€šä¿¡</h2><p>1.çˆ¶å­ç»„ä»¶å¦‚ä½•é€šä¿¡ï¼Ÿ</p>
<h3 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h3><ul>
<li>çˆ¶ç»„ä»¶ç›‘å¬ä¸€ä¸ªäº‹ä»¶ï¼Œå­ç»„ä»¶è§¦å‘è¯¥äº‹ä»¶ï¼Œå¹¶ä¸”å¯ä»¥ä¼ é€’è‡ªèº«æ•°æ®ã€‚æ¯”å¦‚</li>
</ul>
<pre><code class="js">
// çˆ¶ç»„ä»¶å¼•å…¥å­ç»„ä»¶
&lt;child v-on:tellFather=&quot;fatherFunc&quot;&gt;&lt;/child&gt;

// çˆ¶ç»„ä»¶ data é‡Œé¢æœ‰ info
data() {
    return {
      info: &#39;&#39;
    }

// çˆ¶ç»„ä»¶ methods æœ‰ fatherFunc æ–¹æ³•
methods: {
    fatherFunc(msg) {
      this.info = msg
    }
  }

// å­ç»„ä»¶ é€šè¿‡ childFunc è§¦å‘çˆ¶ç»„ä»¶ç›‘å¬çš„äº‹ä»¶
&lt;button v-on:click=&quot;childFunc&quot;&gt;Button&lt;/button&gt;

// å­ç»„ä»¶ data é‡Œé¢æœ‰ msg ä¿¡æ¯è¦ä¼ ç»™çˆ¶ç»„ä»¶
data() {
    return {
      msg: &#39;This is the message from child&#39;
    }
  },

  // å­ç»„ä»¶çš„ childFunc æ–¹æ³•
  methods: {
    childFunc() {

      // å…³é”®ï¼ï¼ï¼ 
      // å­ç»„ä»¶è§¦å‘çˆ¶ç»„ä»¶çš„ tellFather äº‹ä»¶ï¼Œ
      // å¹¶å¯ä»¥ä¼ é€’è‡ªèº« data é‡Œé¢çš„æ•°æ®ç»™çˆ¶ç»„ä»¶
      this.$emit(&#39;tellFather&#39;, this.msg)
    }
  }
</code></pre>
<h3 id="ä½¿ç”¨Vuex"><a href="#ä½¿ç”¨Vuex" class="headerlink" title="ä½¿ç”¨Vuex"></a>ä½¿ç”¨Vuex</h3><ul>
<li>ä½¿ç”¨ Vuex è®©ä¸åŒç»„ä»¶é—´å…±äº«çŠ¶æ€(state)</li>
</ul>
<h2 id="this-parent-message"><a href="#this-parent-message" class="headerlink" title="this.$parent.message"></a>this.$parent.message</h2><p>2.å­ç»„ä»¶ä¸­ä½¿ç”¨<code>this.$parent.message</code>å¯ä»¥è·å–çˆ¶äº²dataé‡Œé¢çš„message</p>
<h2 id="this-refs"><a href="#this-refs" class="headerlink" title="this.$refs"></a>this.$refs</h2><p>3.<code>this.$refs.img</code>å¯ä»¥è·å–refå±æ€§ä¸ºimgçš„DOMå…ƒç´ </p>
<h2 id="event"><a href="#event" class="headerlink" title="$event"></a>$event</h2><p>4.æœ‰æ—¶ä¹Ÿéœ€è¦åœ¨å†…è”è¯­å¥å¤„ç†å™¨ä¸­è®¿é—®åŸç”Ÿ DOM äº‹ä»¶ã€‚å¯ä»¥ç”¨ç‰¹æ®Šå˜é‡ <code>$event</code> æŠŠå®ƒä¼ å…¥æ–¹æ³•ï¼š</p>
<pre><code class="javascript">&lt;button v-on:click=&quot;warn(&#39;Form cannot be submitted yet.&#39;, $event)&quot;&gt;Submit&lt;/button&gt;
// ...
methods: {
  warn: function (message, event) {
    // ç°åœ¨æˆ‘ä»¬å¯ä»¥è®¿é—®åŸç”Ÿäº‹ä»¶å¯¹è±¡
    if (event) event.preventDefault()
    alert(message)
  }
}
</code></pre>
<h2 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h2><p>5.åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­è°ƒç”¨ <code>event.preventDefault()</code> æˆ– <code>event.stopPropagation()</code> æ˜¯éå¸¸å¸¸è§çš„éœ€æ±‚ã€‚å°½ç®¡æˆ‘ä»¬å¯ä»¥åœ¨ methods ä¸­è½»æ¾å®ç°è¿™ç‚¹ï¼Œä½†æ›´å¥½çš„æ–¹å¼æ˜¯ï¼šmethods åªæœ‰çº¯ç²¹çš„æ•°æ®é€»è¾‘ï¼Œè€Œä¸æ˜¯å»å¤„ç† DOM äº‹ä»¶ç»†èŠ‚ã€‚<br>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ Vue.js ä¸º<code>v-on</code> æä¾›äº† äº‹ä»¶ä¿®é¥°ç¬¦ã€‚é€šè¿‡ç”±ç‚¹(.)è¡¨ç¤ºçš„æŒ‡ä»¤åç¼€æ¥è°ƒç”¨ä¿®é¥°ç¬¦ã€‚<br><code>.stop</code><br><code>.prevent</code><br><code>.capture</code><br><code>.self</code><br><code>.once</code></p>
<pre><code class="js">&lt;!-- é˜»æ­¢å•å‡»äº‹ä»¶å†’æ³¡ --&gt;
&lt;a v-on:click.stop=&quot;doThis&quot;&gt;&lt;/a&gt;
&lt;!-- æäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢ --&gt;
&lt;form v-on:submit.prevent=&quot;onSubmit&quot;&gt;&lt;/form&gt;
&lt;!-- ä¿®é¥°ç¬¦å¯ä»¥ä¸²è”  --&gt;
&lt;a v-on:click.stop.prevent=&quot;doThat&quot;&gt;&lt;/a&gt;
&lt;!-- åªæœ‰ä¿®é¥°ç¬¦ --&gt;
&lt;form v-on:submit.prevent&gt;&lt;/form&gt;
&lt;!-- æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨æ—¶ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼ --&gt;
&lt;div v-on:click.capture=&quot;doThis&quot;&gt;...&lt;/div&gt;
&lt;!-- åªå½“äº‹ä»¶åœ¨è¯¥å…ƒç´ æœ¬èº«ï¼ˆè€Œä¸æ˜¯å­å…ƒç´ ï¼‰è§¦å‘æ—¶è§¦å‘å›è°ƒ --&gt;
&lt;div v-on:click.self=&quot;doThat&quot;&gt;...&lt;/div&gt;
</code></pre>
<h2 id="name"><a href="#name" class="headerlink" title="name"></a>name</h2><p>6.ä¸€å¼€å§‹å¥½å¤šäººä¼šå¿½è§† <code>name</code> çš„å±æ€§ï¼Œä¸ºä»€ä¹ˆè¦ç»™ç»„ä»¶å†™ä¸Š <code>name</code> å‘¢ï¼Ÿ</p>
<ul>
<li><p>å…è®¸ç»„ä»¶æ¨¡æ¿é€’å½’åœ°è°ƒç”¨è‡ªèº«ã€‚æ³¨æ„ï¼Œç»„ä»¶åœ¨å…¨å±€ç”¨ <code>Vue.component()</code> æ³¨å†Œæ—¶ï¼Œå…¨å±€ ID è‡ªåŠ¨ä½œä¸ºç»„ä»¶çš„ nameã€‚</p>
</li>
<li><p>æŒ‡å®š <code>name</code> é€‰é¡¹çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯ä¾¿äºè°ƒè¯•ã€‚æœ‰åå­—çš„ç»„ä»¶æœ‰æ›´å‹å¥½çš„è­¦å‘Šä¿¡æ¯ã€‚å¦å¤–ï¼Œå½“åœ¨æœ‰ vue-devtools, æœªå‘½åç»„ä»¶å°†æ˜¾ç¤ºæˆ <code>&lt;AnonymousComponent&gt;</code>, è¿™å¾ˆæ²¡æœ‰è¯­ä¹‰ã€‚é€šè¿‡æä¾› <code>name</code> é€‰é¡¹ï¼Œå¯ä»¥è·å¾—æ›´æœ‰è¯­ä¹‰ä¿¡æ¯çš„ç»„ä»¶æ ‘ã€‚</p>
</li>
</ul>
<h2 id="Vuex-action"><a href="#Vuex-action" class="headerlink" title="Vuex action"></a>Vuex action</h2><p>7.<strong>Vuex</strong>ä¸­ Mutations å¿…é¡»æ˜¯<em>åŒæ­¥</em>çš„ï¼ŒAction æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ã€‚Action å¯ä»¥åŒ…å«ä»»æ„<em>å¼‚æ­¥</em>æ“ä½œã€‚</p>
<p><strong><em>æœªå®Œå¾…ç»­â€¦</em></strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Vue-js2-0å­¦ä¹ ç¬”è®°&quot;&gt;&lt;a href=&quot;#Vue-js2-0å­¦ä¹ ç¬”è®°&quot; class=&quot;headerlink&quot; title=&quot;Vue.js2.0å­¦ä¹ ç¬”è®°&quot;&gt;&lt;/a&gt;Vue.js2.0å­¦ä¹ ç¬”è®°&lt;/h1&gt;&lt;h2 id=&quot;çˆ¶å­ç»„ä»¶å¦‚ä½•é€šä¿¡&quot;&gt;&lt;a href=&quot;#çˆ¶
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="Vue.js" scheme="https://microzz.com/tags/Vue-js/"/>
    
      <category term="Vuex" scheme="https://microzz.com/tags/Vuex/"/>
    
  </entry>
  
  <entry>
    <title>SASSç”¨æ³•æŒ‡å—</title>
    <link href="https://microzz.com/2017/03/18/sass/"/>
    <id>https://microzz.com/2017/03/18/sass/</id>
    <published>2017-03-18T15:17:32.000Z</published>
    <updated>2017-03-18T15:36:54.018Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;å­¦è¿‡CSSçš„äººéƒ½çŸ¥é“ï¼Œå®ƒä¸æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;ä½ å¯ä»¥ç”¨å®ƒå¼€å‘ç½‘é¡µæ ·å¼ï¼Œä½†æ˜¯æ²¡æ³•ç”¨å®ƒç¼–ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCSSåŸºæœ¬ä¸Šæ˜¯è®¾è®¡å¸ˆçš„å·¥å…·ï¼Œä¸æ˜¯ç¨‹åºå‘˜çš„å·¥å…·ã€‚åœ¨ç¨‹åºå‘˜çœ¼é‡Œï¼ŒCSSæ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„ä¸œè¥¿ã€‚å®ƒæ²¡æœ‰å˜é‡ï¼Œä¹Ÿæ²¡æœ‰æ¡ä»¶è¯­å¥ï¼Œåªæ˜¯ä¸€è¡Œè¡Œå•çº¯çš„æè¿°ï¼Œå†™èµ·æ¥ç›¸å½“è´¹äº‹ã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;å¾ˆè‡ªç„¶åœ°ï¼Œæœ‰äººå°±å¼€å§‹ä¸ºCSSåŠ å…¥ç¼–ç¨‹å…ƒç´ ï¼Œè¿™è¢«å«åšâ€CSSé¢„å¤„ç†å™¨â€ï¼ˆcss preprocessorï¼‰ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œç”¨ä¸€ç§ä¸“é—¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿›è¡Œç½‘é¡µæ ·å¼è®¾è®¡ï¼Œç„¶åå†ç¼–è¯‘æˆæ­£å¸¸çš„CSSæ–‡ä»¶ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;å„ç§â€CSSé¢„å¤„ç†å™¨â€ä¹‹ä¸­ï¼Œæˆ‘è‡ªå·±æœ€å–œæ¬¢SASSï¼Œè§‰å¾—å®ƒæœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œæ‰“ç®—ä»¥åéƒ½ç”¨å®ƒæ¥å†™CSSã€‚ä¸‹é¢æ˜¯æˆ‘æ•´ç†çš„ç”¨æ³•æ€»ç»“ï¼Œä¾›è‡ªå·±å¼€å‘æ—¶å‚è€ƒï¼Œç›¸ä¿¡å¯¹å…¶ä»–äººä¹Ÿæœ‰ç”¨ã€‚</p>
</blockquote>
<h1 id="SASSç”¨æ³•æŒ‡å—"><a href="#SASSç”¨æ³•æŒ‡å—" class="headerlink" title="SASSç”¨æ³•æŒ‡å—"></a>SASSç”¨æ³•æŒ‡å—</h1><p>ä½œè€…ï¼šé˜®ä¸€å³°</p>
<h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯SASS"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯SASS" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯SASS"></a>ä¸€ã€ä»€ä¹ˆæ˜¯SASS</h2><p>SASSæ˜¯ä¸€ç§CSSçš„å¼€å‘å·¥å…·ï¼Œæä¾›äº†è®¸å¤šä¾¿åˆ©çš„å†™æ³•ï¼Œå¤§å¤§èŠ‚çœäº†è®¾è®¡è€…çš„æ—¶é—´ï¼Œä½¿å¾—CSSçš„å¼€å‘ï¼Œå˜å¾—ç®€å•å’Œå¯ç»´æŠ¤ã€‚<br>æœ¬æ–‡æ€»ç»“äº†SASSçš„ä¸»è¦ç”¨æ³•ã€‚æˆ‘çš„ç›®æ ‡æ˜¯ï¼Œæœ‰äº†è¿™ç¯‡æ–‡ç« ï¼Œæ—¥å¸¸çš„ä¸€èˆ¬ä½¿ç”¨å°±ä¸éœ€è¦å»çœ‹å®˜æ–¹æ–‡æ¡£äº†ã€‚</p>
<h2 id="äºŒã€å®‰è£…å’Œä½¿ç”¨"><a href="#äºŒã€å®‰è£…å’Œä½¿ç”¨" class="headerlink" title="äºŒã€å®‰è£…å’Œä½¿ç”¨"></a>äºŒã€å®‰è£…å’Œä½¿ç”¨</h2><h3 id="2-1-å®‰è£…"><a href="#2-1-å®‰è£…" class="headerlink" title="2.1 å®‰è£…"></a>2.1 å®‰è£…</h3><p>SASSæ˜¯Rubyè¯­è¨€å†™çš„ï¼Œä½†æ˜¯ä¸¤è€…çš„è¯­æ³•æ²¡æœ‰å…³ç³»ã€‚ä¸æ‡‚Rubyï¼Œç…§æ ·ä½¿ç”¨ã€‚åªæ˜¯å¿…é¡»å…ˆå®‰è£…Rubyï¼Œç„¶åå†å®‰è£…SASSã€‚<br>å‡å®šä½ å·²ç»å®‰è£…å¥½äº†Rubyï¼Œæ¥ç€åœ¨å‘½ä»¤è¡Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼š<br>ã€€ã€€<code>gem install sass</code><br>ç„¶åï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p>
<h3 id="2-2-ä½¿ç”¨"><a href="#2-2-ä½¿ç”¨" class="headerlink" title="2.2 ä½¿ç”¨"></a>2.2 ä½¿ç”¨</h3><p>SASSæ–‡ä»¶å°±æ˜¯æ™®é€šçš„æ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢å¯ä»¥ç›´æ¥ä½¿ç”¨CSSè¯­æ³•ã€‚æ–‡ä»¶åç¼€åæ˜¯.scssï¼Œæ„æ€ä¸ºSassy CSSã€‚<br>ä¸‹é¢çš„å‘½ä»¤ï¼Œå¯ä»¥åœ¨å±å¹•ä¸Šæ˜¾ç¤º.scssæ–‡ä»¶è½¬åŒ–çš„cssä»£ç ã€‚ï¼ˆå‡è®¾æ–‡ä»¶åä¸ºtestã€‚ï¼‰<br>ã€€ã€€<code>sass test.scss</code><br>å¦‚æœè¦å°†æ˜¾ç¤ºç»“æœä¿å­˜æˆæ–‡ä»¶ï¼Œåé¢å†è·Ÿä¸€ä¸ª.cssæ–‡ä»¶åã€‚<br>ã€€ã€€<code>sass test.scss test.css</code><br>SASSæä¾›å››ä¸ªç¼–è¯‘é£æ ¼çš„é€‰é¡¹ï¼š<br>ã€€ã€€<em> <code>nested</code>ï¼šåµŒå¥—ç¼©è¿›çš„cssä»£ç ï¼Œå®ƒæ˜¯é»˜è®¤å€¼ã€‚
ã€€ã€€</em> <code>expanded</code>ï¼šæ²¡æœ‰ç¼©è¿›çš„ã€æ‰©å±•çš„cssä»£ç ã€‚<br>ã€€ã€€<em> <code>compact</code>ï¼šç®€æ´æ ¼å¼çš„cssä»£ç ã€‚
ã€€ã€€</em> <code>compressed</code>ï¼šå‹ç¼©åçš„cssä»£ç ã€‚<br>ç”Ÿäº§ç¯å¢ƒå½“ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨æœ€åä¸€ä¸ªé€‰é¡¹ã€‚<br>ã€€ã€€<code>sass --style compressed test.sass test.css</code><br>ä½ ä¹Ÿå¯ä»¥è®©SASSç›‘å¬æŸä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œä¸€æ—¦æºæ–‡ä»¶æœ‰å˜åŠ¨ï¼Œå°±è‡ªåŠ¨ç”Ÿæˆç¼–è¯‘åçš„ç‰ˆæœ¬ã€‚</p>
<p>ã€€ã€€// watch a file<br>ã€€ã€€<code>sass --watch input.scss:output.css</code><br>ã€€ã€€<br>ã€€ã€€// watch a directory<br>ã€€ã€€<code>sass --watch app/sass:public/stylesheets</code><br>ã€€ã€€<br>SASSçš„å®˜æ–¹ç½‘ç«™ï¼Œæä¾›äº†ä¸€ä¸ªåœ¨çº¿è½¬æ¢å™¨ã€‚ä½ å¯ä»¥åœ¨é‚£é‡Œï¼Œè¯•è¿è¡Œä¸‹é¢çš„å„ç§ä¾‹å­ã€‚</p>
<h2 id="ä¸‰ã€åŸºæœ¬ç”¨æ³•"><a href="#ä¸‰ã€åŸºæœ¬ç”¨æ³•" class="headerlink" title="ä¸‰ã€åŸºæœ¬ç”¨æ³•"></a>ä¸‰ã€åŸºæœ¬ç”¨æ³•</h2><h3 id="3-1-å˜é‡"><a href="#3-1-å˜é‡" class="headerlink" title="3.1 å˜é‡"></a>3.1 å˜é‡</h3><p>SASSå…è®¸ä½¿ç”¨å˜é‡ï¼Œæ‰€æœ‰å˜é‡ä»¥$å¼€å¤´ã€‚</p>
<pre><code class="scss">ã€€ã€€$blue : #1875e7;ã€€
ã€€ã€€div {
ã€€ã€€ã€€color : $blue;
ã€€ã€€}
</code></pre>
<p>ã€€ã€€<br>å¦‚æœå˜é‡éœ€è¦é•¶åµŒåœ¨å­—ç¬¦ä¸²ä¹‹ä¸­ï¼Œå°±å¿…é¡»éœ€è¦å†™åœ¨#{}ä¹‹ä¸­ã€‚</p>
<pre><code class="scss">ã€€ã€€$side : left;
ã€€ã€€.rounded {
ã€€ã€€ã€€ã€€border-#{$side}-radius: 5px;
ã€€ã€€}
</code></pre>
<h3 id="3-2-è®¡ç®—åŠŸèƒ½"><a href="#3-2-è®¡ç®—åŠŸèƒ½" class="headerlink" title="3.2 è®¡ç®—åŠŸèƒ½"></a>3.2 è®¡ç®—åŠŸèƒ½</h3><p>SASSå…è®¸åœ¨ä»£ç ä¸­ä½¿ç”¨ç®—å¼ï¼š</p>
<pre><code class="scss">ã€€ã€€body {
ã€€ã€€ã€€ã€€margin: (14px/2);
ã€€ã€€ã€€ã€€top: 50px + 100px;
ã€€ã€€ã€€ã€€right: $var * 10%;
ã€€ã€€}
</code></pre>
<h3 id="3-3-åµŒå¥—"><a href="#3-3-åµŒå¥—" class="headerlink" title="3.3 åµŒå¥—"></a>3.3 åµŒå¥—</h3><p>SASSå…è®¸é€‰æ‹©å™¨åµŒå¥—ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„CSSä»£ç ï¼š</p>
<pre><code class="scss">ã€€ã€€div h1 {
ã€€ã€€ã€€ã€€color : red;
ã€€ã€€}
</code></pre>
<p>å¯ä»¥å†™æˆï¼š</p>
<pre><code class="scss">ã€€ã€€div {
ã€€ã€€ã€€ã€€hi {
ã€€ã€€ã€€ã€€ã€€ã€€color:red;
ã€€ã€€ã€€ã€€}
ã€€ã€€}
</code></pre>
<p>å±æ€§ä¹Ÿå¯ä»¥åµŒå¥—ï¼Œæ¯”å¦‚<code>border-color</code>å±æ€§ï¼Œå¯ä»¥å†™æˆï¼š</p>
<pre><code class="scss">ã€€ã€€p {
ã€€ã€€ã€€ã€€border: {
ã€€ã€€ã€€ã€€ã€€ã€€color: red;
ã€€ã€€ã€€ã€€}
ã€€ã€€}
</code></pre>
<p>æ³¨æ„ï¼Œ<code>border</code>åé¢å¿…é¡»åŠ ä¸Šå†’å·ã€‚<br>åœ¨åµŒå¥—çš„ä»£ç å—å†…ï¼Œå¯ä»¥ä½¿ç”¨&amp;å¼•ç”¨çˆ¶å…ƒç´ ã€‚æ¯”å¦‚<code>a:hover</code>ä¼ªç±»ï¼Œå¯ä»¥å†™æˆï¼š</p>
<pre><code class="scss">ã€€ã€€a {
ã€€ã€€ã€€ã€€&amp;:hover { color: #ffb3ff; }
ã€€ã€€}
</code></pre>
<h3 id="3-4-æ³¨é‡Š"><a href="#3-4-æ³¨é‡Š" class="headerlink" title="3.4 æ³¨é‡Š"></a>3.4 æ³¨é‡Š</h3><p>SASSå…±æœ‰ä¸¤ç§æ³¨é‡Šé£æ ¼ã€‚<br>æ ‡å‡†çš„CSSæ³¨é‡Š <code>/* comment */</code>ï¼Œä¼šä¿ç•™åˆ°ç¼–è¯‘åçš„æ–‡ä»¶ã€‚<br>å•è¡Œæ³¨é‡Š <code>// comment</code>ï¼Œåªä¿ç•™åœ¨SASSæºæ–‡ä»¶ä¸­ï¼Œç¼–è¯‘åè¢«çœç•¥ã€‚<br>åœ¨<code>/*</code>åé¢åŠ ä¸€ä¸ªæ„Ÿå¹å·ï¼Œè¡¨ç¤ºè¿™æ˜¯â€é‡è¦æ³¨é‡Šâ€ã€‚å³ä½¿æ˜¯å‹ç¼©æ¨¡å¼ç¼–è¯‘ï¼Œä¹Ÿä¼šä¿ç•™è¿™è¡Œæ³¨é‡Šï¼Œé€šå¸¸å¯ä»¥ç”¨äºå£°æ˜ç‰ˆæƒä¿¡æ¯ã€‚</p>
<pre><code class="scss">ã€€ã€€/*! 
ã€€ã€€ã€€ã€€é‡è¦æ³¨é‡Šï¼
ã€€ã€€*/
</code></pre>
<h2 id="å››ã€ä»£ç çš„é‡ç”¨"><a href="#å››ã€ä»£ç çš„é‡ç”¨" class="headerlink" title="å››ã€ä»£ç çš„é‡ç”¨"></a>å››ã€ä»£ç çš„é‡ç”¨</h2><h3 id="4-1-ç»§æ‰¿"><a href="#4-1-ç»§æ‰¿" class="headerlink" title="4.1 ç»§æ‰¿"></a>4.1 ç»§æ‰¿</h3><p>SASSå…è®¸ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œç»§æ‰¿å¦ä¸€ä¸ªé€‰æ‹©å™¨ã€‚æ¯”å¦‚ï¼Œç°æœ‰class1ï¼š</p>
<pre><code class="scss">ã€€ã€€.class1 {
ã€€ã€€ã€€ã€€border: 1px solid #ddd;
ã€€ã€€}
</code></pre>
<p>class2è¦ç»§æ‰¿class1ï¼Œå°±è¦ä½¿ç”¨<code>@extend</code>å‘½ä»¤ï¼š</p>
<pre><code class="scss">ã€€ã€€.class2 {
ã€€ã€€ã€€ã€€@extend .class1;
ã€€ã€€ã€€ã€€font-size:120%;
ã€€ã€€}
</code></pre>
<h3 id="4-2-Mixin"><a href="#4-2-Mixin" class="headerlink" title="4.2 Mixin"></a>4.2 Mixin</h3><p>Mixinæœ‰ç‚¹åƒCè¯­è¨€çš„å®ï¼ˆmacroï¼‰ï¼Œæ˜¯å¯ä»¥é‡ç”¨çš„ä»£ç å—ã€‚<br>ä½¿ç”¨<code>@mixin</code>å‘½ä»¤ï¼Œå®šä¹‰ä¸€ä¸ªä»£ç å—ã€‚</p>
<pre><code class="scss">ã€€ã€€@mixin left {
ã€€ã€€ã€€ã€€float: left;
ã€€ã€€ã€€ã€€margin-left: 10px;
ã€€ã€€}
</code></pre>
<p>ä½¿ç”¨<code>@include</code>å‘½ä»¤ï¼Œè°ƒç”¨è¿™ä¸ªmixinã€‚</p>
<pre><code class="scss">ã€€ã€€div {
ã€€ã€€ã€€ã€€@include left;
ã€€ã€€}
</code></pre>
<p>mixinçš„å¼ºå¤§ä¹‹å¤„ï¼Œåœ¨äºå¯ä»¥æŒ‡å®šå‚æ•°å’Œç¼ºçœå€¼ã€‚</p>
<pre><code class="scss">ã€€ã€€@mixin left($value: 10px) {
ã€€ã€€ã€€ã€€float: left;
ã€€ã€€ã€€ã€€margin-right: $value;
ã€€ã€€}
</code></pre>
<p>ä½¿ç”¨çš„æ—¶å€™ï¼Œæ ¹æ®éœ€è¦åŠ å…¥å‚æ•°ï¼š</p>
<pre><code class="scss">ã€€ã€€div {
ã€€ã€€ã€€ã€€@include left(20px);
ã€€ã€€}
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªmixinçš„å®ä¾‹ï¼Œç”¨æ¥ç”Ÿæˆæµè§ˆå™¨å‰ç¼€ã€‚</p>
<pre><code class="scss">ã€€ã€€@mixin rounded($vert, $horz, $radius: 10px) {
ã€€ã€€ã€€ã€€border-#{$vert}-#{$horz}-radius: $radius;
ã€€ã€€ã€€ã€€-moz-border-radius-#{$vert}#{$horz}: $radius;
ã€€ã€€ã€€ã€€-webkit-border-#{$vert}-#{$horz}-radius: $radius;
ã€€ã€€}
</code></pre>
<p>ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·è°ƒç”¨ï¼š</p>
<pre><code class="scss">ã€€ã€€#navbar li { @include rounded(top, left); }
ã€€ã€€#footer { @include rounded(top, left, 5px); }
</code></pre>
<h3 id="4-3-é¢œè‰²å‡½æ•°"><a href="#4-3-é¢œè‰²å‡½æ•°" class="headerlink" title="4.3 é¢œè‰²å‡½æ•°"></a>4.3 é¢œè‰²å‡½æ•°</h3><p>SASSæä¾›äº†ä¸€äº›å†…ç½®çš„é¢œè‰²å‡½æ•°ï¼Œä»¥ä¾¿ç”Ÿæˆç³»åˆ—é¢œè‰²ã€‚</p>
<pre><code class="scss">ã€€ã€€lighten(#cc3, 10%) // #d6d65c
ã€€ã€€darken(#cc3, 10%) // #a3a329
ã€€ã€€grayscale(#cc3) // #808080
ã€€ã€€complement(#cc3) // #33c
</code></pre>
<h3 id="4-4-æ’å…¥æ–‡ä»¶"><a href="#4-4-æ’å…¥æ–‡ä»¶" class="headerlink" title="4.4 æ’å…¥æ–‡ä»¶"></a>4.4 æ’å…¥æ–‡ä»¶</h3><p><code>@import</code>å‘½ä»¤ï¼Œç”¨æ¥æ’å…¥å¤–éƒ¨æ–‡ä»¶ã€‚<br>ã€€ã€€<code>@import &quot;path/filename.scss&quot;;</code><br>å¦‚æœæ’å…¥çš„æ˜¯.cssæ–‡ä»¶ï¼Œåˆ™ç­‰åŒäºcssçš„importå‘½ä»¤ã€‚<br>ã€€ã€€<code>@import &quot;foo.css&quot;;</code>
ã€€ã€€</p>
<h2 id="äº”ã€é«˜çº§ç”¨æ³•"><a href="#äº”ã€é«˜çº§ç”¨æ³•" class="headerlink" title="äº”ã€é«˜çº§ç”¨æ³•"></a>äº”ã€é«˜çº§ç”¨æ³•</h2><h3 id="5-1-æ¡ä»¶è¯­å¥"><a href="#5-1-æ¡ä»¶è¯­å¥" class="headerlink" title="5.1 æ¡ä»¶è¯­å¥"></a>5.1 æ¡ä»¶è¯­å¥</h3><p><code>@if</code>å¯ä»¥ç”¨æ¥åˆ¤æ–­ï¼š</p>
<pre><code class="scss">ã€€ã€€p {
ã€€ã€€ã€€ã€€@if 1 + 1 == 2 { border: 1px solid; }
ã€€ã€€ã€€ã€€@if 5 &lt; 3 { border: 2px dotted; }
ã€€ã€€}
</code></pre>
<p>é…å¥—çš„è¿˜æœ‰<code>@else</code>å‘½ä»¤ï¼š</p>
<pre><code class="scss">ã€€ã€€@if lightness($color) &gt; 30% {
ã€€ã€€ã€€ã€€background-color: #000;
ã€€ã€€} @else {
ã€€ã€€ã€€ã€€background-color: #fff;
ã€€ã€€}
</code></pre>
<h3 id="5-2-å¾ªç¯è¯­å¥"><a href="#5-2-å¾ªç¯è¯­å¥" class="headerlink" title="5.2 å¾ªç¯è¯­å¥"></a>5.2 å¾ªç¯è¯­å¥</h3><p>SASSæ”¯æŒ<code>for</code>å¾ªç¯ï¼š</p>
<pre><code class="scss">ã€€ã€€@for $i from 1 to 10 {
ã€€ã€€ã€€ã€€.border-#{$i} {
ã€€ã€€ã€€ã€€ã€€ã€€border: #{$i}px solid blue;
ã€€ã€€ã€€ã€€}
ã€€ã€€}
</code></pre>
<p>ä¹Ÿæ”¯æŒ<code>while</code>å¾ªç¯ï¼š</p>
<pre><code class="scss">ã€€ã€€$i: 6;
ã€€ã€€@while $i &gt; 0 {
ã€€ã€€ã€€ã€€.item-#{$i} { width: 2em * $i; }
ã€€ã€€ã€€ã€€$i: $i - 2;
ã€€ã€€}
</code></pre>
<p><code>each</code>å‘½ä»¤ï¼Œä½œç”¨ä¸<code>for</code>ç±»ä¼¼ï¼š</p>
<pre><code class="scss">ã€€ã€€@each $member in a, b, c, d {
ã€€ã€€ã€€ã€€.#{$member} {
ã€€ã€€ã€€ã€€ã€€ã€€background-image: url(&quot;/image/#{$member}.jpg&quot;);
ã€€ã€€ã€€ã€€}
ã€€ã€€}
</code></pre>
<h3 id="5-3-è‡ªå®šä¹‰å‡½æ•°"><a href="#5-3-è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="5.3 è‡ªå®šä¹‰å‡½æ•°"></a>5.3 è‡ªå®šä¹‰å‡½æ•°</h3><p>SASSå…è®¸ç”¨æˆ·ç¼–å†™è‡ªå·±çš„å‡½æ•°ã€‚</p>
<pre><code class="scss">ã€€ã€€@function double($n) {
ã€€ã€€ã€€ã€€@return $n * 2;
ã€€ã€€}
ã€€ã€€#sidebar {
ã€€ã€€ã€€ã€€width: double(5px);
ã€€ã€€}
</code></pre>
<h3 id="é¡»çŸ¥"><a href="#é¡»çŸ¥" class="headerlink" title="é¡»çŸ¥"></a>é¡»çŸ¥</h3><p><strong>æ„Ÿè°¢</strong>é˜®ä¸€å³°è€å¸ˆçš„æ€»ç»“ï¼Œ<a href="http://www.ruanyifeng.com/blog/2012/06/sass.html" target="_blank" rel="external">åŸæ–‡åœ°å€</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;å­¦è¿‡CSSçš„äººéƒ½çŸ¥é“ï¼Œå®ƒä¸æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ä½ å¯ä»¥ç”¨å®ƒå¼€å‘ç½‘é¡µæ ·å¼ï¼Œä½†æ˜¯æ²¡æ³•ç”¨å®ƒç¼–ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCSSåŸºæœ¬ä¸Šæ˜¯è®¾è®¡å¸ˆçš„å·¥å…·ï¼Œä¸æ˜¯ç¨‹åºå‘˜çš„å·¥å…·ã€‚åœ¨ç¨‹
    
    </summary>
    
    
      <category term="SASS" scheme="https://microzz.com/tags/SASS/"/>
    
      <category term="SCSS" scheme="https://microzz.com/tags/SCSS/"/>
    
      <category term="CSS" scheme="https://microzz.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>Vue.jså†™ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨</title>
    <link href="https://microzz.com/2017/03/15/vue-music/"/>
    <id>https://microzz.com/2017/03/15/vue-music/</id>
    <published>2017-03-15T13:44:02.000Z</published>
    <updated>2017-04-21T13:58:40.693Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue-jså†™ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨"><a href="#Vue-jså†™ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨" class="headerlink" title="Vue.jså†™ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨"></a>Vue.jså†™ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨</h1><p><strong>VueéŸ³ä¹æ’­æ”¾å™¨2.0å‡çº§ç‰ˆå·²ç»å‘å¸ƒï¼Œè¯·çœ‹<br>ğŸ‘‰ <a href="https://microzz.com/2017/04/08/vue-music2/">Vue.jséŸ³ä¹æ’­æ”¾å™¨å‡çº§ç‰ˆ</a></strong></p>
<h2 id="åœ¨çº¿é¢„è§ˆ"><a href="#åœ¨çº¿é¢„è§ˆ" class="headerlink" title="åœ¨çº¿é¢„è§ˆ"></a>åœ¨çº¿é¢„è§ˆ</h2><p><strong>2.0ç‰ˆæœ¬é¢„è§ˆåœ°å€</strong>ï¼šğŸ”—<a href="https://microzz.com/vue-music/">https://microzz.com/vue-music/</a><br>åœ¨çº¿é¢„è§ˆåœ°å€1: ğŸ”—<a href="http://microzz.cn/vue-music/" target="_blank" rel="external">http://microzz.cn/vue-music/</a><br>åœ¨çº¿é¢„è§ˆåœ°å€2: ğŸ”—<a href="https://microzz.github.io/vue-music-player/" target="_blank" rel="external">https://microzz.github.io/vue-music-player/</a></p>
<h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><p>GitHubåœ°å€: ğŸ”—<a href="https://github.com/microzz/vue-music-player" target="_blank" rel="external">https://github.com/microzz/vue-music-player</a><br>æ¬¢è¿å¤§å®¶followå’Œstarå“¦ğŸ˜„</p>
<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>å­¦ä¹ Vue.jsåï¼Œå†³å®šåšä¸ªå°é¡¹ç›®é”»ç‚¼ä¸€ä¸‹ï¼Œäºæ˜¯é€‰æ‹©äº†å…¸å‹çš„éŸ³ä¹æ’­æ”¾å™¨ä¸Šæ‰‹ã€‚å…¶ä¸­é‡åˆ°äº†å¾ˆå¤šå‘ï¼Œä¹Ÿå­¦åˆ°äº†å¾ˆå¤šã€‚ä»£ç å¯èƒ½è¿˜æœ‰ç‘•ç–µï¼Œæ¬¢è¿å¤§å®¶åˆ°æˆ‘çš„<a href="https://github.com/microzz/vue-music-player" target="_blank" rel="external">GitHub</a>åé¦ˆï¼Œç›¸äº’äº¤æµå­¦ä¹ ã€‚åŒæ—¶ä¹Ÿæ¬¢è¿å¤§å®¶followå’ŒstarğŸ˜„<br>é¢„è§ˆå›¾ï¼š<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170315_vue_music/red.png" alt="çº¢è‰²çš®è‚¤-microzz.com" title="">
                </div>
                <div class="image-caption">çº¢è‰²çš®è‚¤-microzz.com</div>
            </figure><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170315_vue_music/green.png" alt="ç»¿è‰²çš®è‚¤-microzz.com" title="">
                </div>
                <div class="image-caption">ç»¿è‰²çš®è‚¤-microzz.com</div>
            </figure><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170315_vue_music/blue.png" alt="è“è‰²çš®è‚¤-microzz.com" title="">
                </div>
                <div class="image-caption">è“è‰²çš®è‚¤-microzz.com</div>
            </figure><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170315_vue_music/black.png" alt="é»‘è‰²çš®è‚¤-microzz.com" title="">
                </div>
                <div class="image-caption">é»‘è‰²çš®è‚¤-microzz.com</div>
            </figure></p>
<h3 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="headerlink" title="æŠ€æœ¯æ ˆ"></a>æŠ€æœ¯æ ˆ</h3><h4 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a><strong>Vue.js</strong></h4><p>Vueçš„åŒå‘æ•°æ®ç»‘å®šçœŸçš„å¾ˆçˆ½ï¼Œè®©å¼€å‘è€…æ›´å¤šçš„å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯è€—æ€§èƒ½çš„DOMæ“ä½œã€‚å€Ÿé‰´äº†React.jså’ŒAngular.jsç­‰è‘—åæ¡†æ¶ï¼ŒVueå†™èµ·æ¥ä¹Ÿçš„ç¡®å¾ˆæ–¹ä¾¿ï¼Œå¾ˆå¤šåœ°æ–¹ä¹Ÿæƒ³çš„å¾ˆå‘¨åˆ°ã€‚å› ä¸ºå®é™…åœºæ™¯ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨åˆ°è·¯ç”±ã€vuexç­‰ä¸œè¥¿ã€‚<br>å…¶ä¸­ä¹Ÿé‡åˆ°äº†å‡ ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼š</p>
<ol>
<li>ç”¨å¥½<code>watch</code>ä¼šäº‹åŠåŠŸå€</li>
<li>æœ‰äº›æ“ä½œè¦åœ¨å®ä¾‹åŠ è½½å®Œï¼Œæ‰€ä»¥é’©å­å‡½æ•°<code>mounted</code>éœ€è¦æ³¨æ„</li>
<li>å¾ˆå¤šå°æŠ€å·§è¦è¯•è¿‡æ‰çŸ¥é“èµ°äº†å¼¯è·¯ğŸ˜‚</li>
</ol>
<hr>
<h4 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a><strong>ES6</strong></h4><p>æœ¬ç¤ºä¾‹é‡‡ç”¨çš„æ˜¯ES6çš„è¯­æ³•ï¼Œå› ä¸ºwebpackç¼–è¯‘ï¼Œæ‰€ä»¥ä¹Ÿä¸å¿…å¤ªè¿‡å½“å¿ƒå…¼å®¹æ€§é—®é¢˜ã€‚ES6ä¹Ÿå³ECMAScript 2015ï¼Œå‘å¸ƒä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå¾ˆå¤šåœ°æ–¹å¾ˆæ–¹ä¾¿ï¼Œè¿™æ˜¯å¤§åŠ¿æ‰€è¶‹ï¼Œä»¥åä¼šæ…¢æ…¢åœ°å‘ES6è¿ç§»ã€‚æŒæ¡æ˜¯å¾ˆå¿…è¦çš„ï¼</p>
<hr>
<h4 id="HTML5"><a href="#HTML5" class="headerlink" title="HTML5"></a>HTML5</h4><p><strong>localStorage</strong><br>æœ¬demoç”¨localStorageæœ¬åœ°å­˜å‚¨ä¿å­˜ç”¨æˆ·è®¾ç½®ï¼ˆå¦‚ï¼šçš®è‚¤ï¼‰å’Œç”¨æˆ·æ­Œå•åˆ—è¡¨</p>
<hr>
<h4 id="CSS3"><a href="#CSS3" class="headerlink" title="CSS3"></a>CSS3</h4><p>å¾ˆå¤šåŠ¨ç”»éƒ½æ˜¯ä¾é CSS3å®Œæˆçš„ï¼Œæ–¹ä¾¿æ€§èƒ½ä¹Ÿä¸é”™ï¼Œç¼ºç‚¹æ˜¯å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<hr>
<h2 id="æ›´æ–°è®°å½•"><a href="#æ›´æ–°è®°å½•" class="headerlink" title="æ›´æ–°è®°å½•"></a>æ›´æ–°è®°å½•</h2><h3 id="2017-03-13"><a href="#2017-03-13" class="headerlink" title="2017.03.13"></a>2017.03.13</h3><p>A music player by Vue.jsã€‚ä¸€ä¸ªç”±Vue.jså†™çš„éŸ³ä¹æ’­æ”¾å™¨ï¼Œä»Šå¤©å®Œæˆäº†æ’­æ”¾å™¨çš„å¤§ä½“åŠŸèƒ½ï¼Œæ•°æ®æ˜¯é€šè¿‡JSONæ¨¡æ‹Ÿ</p>
<h4 id="åç»­å®Œå–„"><a href="#åç»­å®Œå–„" class="headerlink" title="åç»­å®Œå–„"></a>åç»­å®Œå–„</h4><ol>
<li>æ­å»ºåå°è°ƒç”¨ç½‘ä¸ŠéŸ³ä¹API</li>
<li>å®Œå–„åŠŸèƒ½</li>
</ol>
<hr>
<h3 id="2017-03-14"><a href="#2017-03-14" class="headerlink" title="2017.03.14"></a>2017.03.14</h3><p>åˆ—è¡¨éƒ¨åˆ†åŠŸèƒ½å®Œå–„ï¼Œéƒ¨åˆ†ä»£ç ä¼˜åŒ–ï¼Œéƒ¨åˆ†å¼‚æ­¥ä»£ç PromiseåŒ–</p>
<h4 id="åç»­å®Œå–„-1"><a href="#åç»­å®Œå–„-1" class="headerlink" title="åç»­å®Œå–„"></a>åç»­å®Œå–„</h4><ol>
<li>å†—ä½™ä»£ç æ•´åˆä¼˜åŒ–</li>
<li>éƒ¨åˆ†ä»£ç å°è£…</li>
</ol>
<hr>
<h3 id="2017-03-15"><a href="#2017-03-15" class="headerlink" title="2017.03.15"></a>2017.03.15</h3><p>1.0.0æ­£å¼ç‰ˆå‘å¸ƒ</p>
<hr>
<h3 id="2017-03-19"><a href="#2017-03-19" class="headerlink" title="2017.03.19"></a>2017.03.19</h3><p>2.0.0ç‰ˆæœ¬ç­¹åˆ’â€¦</p>
<h3 id="2017-04-03"><a href="#2017-04-03" class="headerlink" title="2017.04.03"></a>2017.04.03</h3><p>2.0.0ç‰ˆæœ¬å¼€å§‹</p>
<h3 id="2017-04-08"><a href="#2017-04-08" class="headerlink" title="2017.04.08"></a>2017.04.08</h3><p>2.0.0ç‰ˆæœ¬å®Œæˆ</p>
<p><strong>VueéŸ³ä¹æ’­æ”¾å™¨2.0å‡çº§ç‰ˆå·²ç»å‘å¸ƒï¼Œè¯·çœ‹<br>ğŸ‘‰ <a href="https://microzz.com/2017/04/08/vue-music2/">Vue.jséŸ³ä¹æ’­æ”¾å™¨å‡çº§ç‰ˆ</a></strong></p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>ä¸ªäººç½‘ç«™ï¼šğŸ”—<a href="https://microzz.com/">https://microzz.com/</a><br>GitHubï¼šğŸ”—<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Vue-jså†™ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨&quot;&gt;&lt;a href=&quot;#Vue-jså†™ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨&quot; class=&quot;headerlink&quot; title=&quot;Vue.jså†™ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨&quot;&gt;&lt;/a&gt;Vue.jså†™ä¸€ä¸ªéŸ³ä¹æ’­æ”¾å™¨&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;VueéŸ³ä¹æ’­æ”¾å™¨2.0å‡çº§ç‰ˆ
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="HTML5" scheme="https://microzz.com/tags/HTML5/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Vue.js" scheme="https://microzz.com/tags/Vue-js/"/>
    
  </entry>
  
  <entry>
    <title>ä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶</title>
    <link href="https://microzz.com/2017/03/12/select-plugin/"/>
    <id>https://microzz.com/2017/03/12/select-plugin/</id>
    <published>2017-03-12T09:03:01.000Z</published>
    <updated>2017-03-31T08:31:58.800Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶"><a href="#ä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶" class="headerlink" title="ä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶"></a>ä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>ä¸€ä¸ªä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶ï¼Œé»˜è®¤ç”Ÿæˆä¸­å›½åœ°åŒºğŸ‡¨ğŸ‡³çš„ä¸‰çº§è”åŠ¨æ•°æ®ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ•°æ®ã€‚<br>npmåœ°å€ï¼š<a href="https://www.npmjs.com/package/select-plugin" target="_blank" rel="external">https://www.npmjs.com/package/select-plugin</a></p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>è¾“å…¥ <code>npm install select-plugin</code> .  </p>
<p>æœ€å¥½å…ˆåˆå§‹åŒ–ä¸€ä¸‹package.jsonæ–‡ä»¶ï¼Œè¾“å…¥ <code>npm init -y</code>ï¼Œç„¶åå†æ‰§è¡Œå®‰è£…<code>npm install select-plugin</code></p>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="é»˜è®¤æ•°æ®"><a href="#é»˜è®¤æ•°æ®" class="headerlink" title="é»˜è®¤æ•°æ®"></a><strong>é»˜è®¤æ•°æ®</strong></h3><p> å¼•å…¥jsæ–‡ä»¶ã€‚<br> åœ¨htmlæ–‡ä»¶ä¸­æ’å…¥<code>&lt;script src=&quot;./node_modules/select-plugin/dist/select-plugin-all.js&quot;&gt;&lt;/script&gt;</code>ï¼Œ<br> ç„¶å<br> <code>&lt;script&gt;new Select()&lt;/script&gt;</code><br> é»˜è®¤å°±å¯ä»¥ç”Ÿæˆä¸­å›½åœ°åŒºçš„ä¸‰çº§è”åŠ¨æ•°æ®å•¦ğŸ˜„</p>
<h3 id="è‡ªå®šä¹‰æ•°æ®"><a href="#è‡ªå®šä¹‰æ•°æ®" class="headerlink" title="è‡ªå®šä¹‰æ•°æ®"></a><strong>è‡ªå®šä¹‰æ•°æ®</strong></h3><p>å¦‚æœä½ <strong>åªä½¿ç”¨</strong>è‡ªå®šä¹‰çš„æ•°æ®ï¼Œå»ºè®®åªå¼•å…¥ä¸åŒ…å«åœ°åŒºæ•°æ®çš„jsæ–‡ä»¶ï¼Œ<br>å³<code>&lt;script src=&quot;./node_modules/select-plugin/dist/select-plugin.js&quot;&gt;&lt;/script&gt;</code>ï¼Œ<br>è¿™æ ·æ–‡ä»¶å¤§å°å¯ä»¥å‡å°‘å¾ˆå¤šï¼Œæ¯•ç«Ÿå¤§ä¸­å›½åœ°åŒºæ•°æ®å¤ªåºå¤§äº†ğŸ˜‡ä½†æ˜¯åŠ¡å¿…ä¼ é€’ä¼ é€’ç›¸å…³å‚æ•°ï¼<br><br><code>new Select(&#39;.container&#39;, data, id, text);</code> <br><br><strong>å‚æ•°ä¾æ¬¡æ˜¯æ’å…¥çˆ¶å®¹å™¨ä½ç½®ï¼ˆé»˜è®¤æ˜¯bodyï¼Œå‚æ•°æ˜¯CSS3é€‰æ‹©å™¨çš„å½¢å¼ï¼Œå¦‚â€™#idâ€™ , â€˜ .classNameâ€™ï¼‰ï¼Œæ•°æ®ï¼Œåœ¨DOMå…ƒç´ çš„idï¼Œæ˜¾ç¤ºçš„æ–‡æœ¬</strong></p>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;
  &lt;title&gt;ä¸‰çº§è”åŠ¨ç”Ÿæˆå™¨æ’ä»¶&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div class=&quot;container&quot;&gt;&lt;/div&gt;

  &lt;script src=&quot;./node_modules/select-plugin/dist/select-plugin-all.js&quot;&gt;&lt;/script&gt;
  &lt;script&gt;
  // ä¸ä¼ ä»»ä½•å‚æ•°,é»˜è®¤ç”Ÿæˆä¸­å›½åœ°åŒºä¸‰çº§è”åŠ¨
    new Select();

  // è‡ªå®šä¹‰æ•°æ®
    var data = {
                One: [&#39;a1&#39;, &#39;a2&#39;, &#39;a3&#39;],
                Two: [
                  [&#39;a11&#39;, &#39;a12&#39;, &#39;a13&#39;],
                  [&#39;a21&#39;, &#39;a22&#39;],
                  [&#39;a31&#39;, &#39;a32&#39;]
                ],
                Three:  [
                  [[&#39;a111&#39;, &#39;a112&#39;], [&#39;a121&#39;, &#39;a122&#39;], [&#39;a131&#39;, &#39;a132&#39;]],
                  [[&#39;a211&#39;, &#39;a212&#39;], [&#39;a221&#39;, &#39;a222&#39;]],
                  [[&#39;a311&#39;], [&#39;a312&#39;]]
                ]
              };
    var id = [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;];
    var text = [&#39;é€‰é¡¹1&#39;, &#39;é€‰é¡¹2&#39;, &#39;é€‰é¡¹3&#39;];
    // å‚æ•°ä¾æ¬¡æ˜¯æ’å…¥çˆ¶å®¹å™¨ä½ç½®ï¼Œæ•°æ®ï¼ŒDOMçš„idï¼Œæ˜¾ç¤ºçš„æ–‡æœ¬
    new Select(&#39;.container&#39;, data, id, text);
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h3 id="æ•ˆæœé¢„è§ˆ"><a href="#æ•ˆæœé¢„è§ˆ" class="headerlink" title="æ•ˆæœé¢„è§ˆ"></a>æ•ˆæœé¢„è§ˆ</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170312_select_plugin/preview.png" alt="select-plugin-microzz.com" title="">
                </div>
                <div class="image-caption">select-plugin-microzz.com</div>
            </figure>
<h3 id="åœ¨çº¿é¢„è§ˆ"><a href="#åœ¨çº¿é¢„è§ˆ" class="headerlink" title="åœ¨çº¿é¢„è§ˆ"></a>åœ¨çº¿é¢„è§ˆ</h3><p><a href="https://microzz.github.io/select-plugin/" target="_blank" rel="external">åœ¨çº¿é¢„è§ˆåœ°å€1</a><br><a href="http://microzz.cn/select-plugin/" target="_blank" rel="external">åœ¨çº¿é¢„è§ˆåœ°å€2</a></p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>GitHubï¼š <a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a>  <br><br>ä¸ªäººç½‘ç«™ï¼š<a href="https://microzz.com/">https://microzz.com/</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶&quot;&gt;&lt;a href=&quot;#ä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶&quot; class=&quot;headerlink&quot; title=&quot;ä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶&quot;&gt;&lt;/a&gt;ä¸‰çº§è”åŠ¨çš„ç”Ÿæˆå™¨æ’ä»¶&lt;/h1&gt;&lt;h2 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; class=&quot;headerli
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="npm" scheme="https://microzz.com/tags/npm/"/>
    
  </entry>
  
  <entry>
    <title>Vue.jsåˆä½“éªŒ-TodoList</title>
    <link href="https://microzz.com/2017/03/09/vue-begin/"/>
    <id>https://microzz.com/2017/03/09/vue-begin/</id>
    <published>2017-03-09T14:51:14.000Z</published>
    <updated>2017-03-10T00:22:07.409Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue-jsåˆä½“éªŒ"><a href="#Vue-jsåˆä½“éªŒ" class="headerlink" title="Vue.jsåˆä½“éªŒ"></a>Vue.jsåˆä½“éªŒ</h1><blockquote>
<p>&nbsp;&nbsp;&nbsp;ä¹‹å‰å­¦äº†React.jsï¼Œä»Šå¤©ç®€å•ä¸Šæ‰‹äº†Vue.jsï¼Œæ„Ÿå—åˆ°äº†Vue.jsçš„ä¸€äº›ç‹¬ç‰¹é­…åŠ›ã€‚åŒå‘çš„æ•°æ®ç»‘å®šè®©äººå¼€å‘èµ·æ¥å¾ˆâ€œçˆ½â€ï¼Œäºæ˜¯åŠ¨æ‰‹ç®€å•å†™äº†ä¸€ä¸ªTodo Listå°demoï¼ŒVueä¸Šæ‰‹çš„ç¡®æ¯”è¾ƒç®€å•ï¼Œæ–¹ä¾¿ä¸å°‘ã€‚æœŸå¾…åç»­çš„å­¦ä¹ ğŸ˜„</p>
</blockquote>
<h2 id="TodoListå°demo"><a href="#TodoListå°demo" class="headerlink" title="TodoListå°demo"></a>TodoListå°demo</h2><h3 id="åœ¨çº¿é¢„è§ˆ"><a href="#åœ¨çº¿é¢„è§ˆ" class="headerlink" title="åœ¨çº¿é¢„è§ˆ"></a>åœ¨çº¿é¢„è§ˆ</h3><p>åœ¨çº¿é¢„è§ˆåœ°å€1: ğŸ”—<a href="http://microzz.cn/todo-vue/" target="_blank" rel="external">http://microzz.cn/todo-vue/</a><br>åœ¨çº¿é¢„è§ˆåœ°å€2: ğŸ”—<a href="https://microzz.github.io/todo-list-vuejs/" target="_blank" rel="external">https://microzz.github.io/todo-list-vuejs/</a></p>
<h3 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h3><p>æºä»£ç åœ°å€ï¼šğŸ”—<a href="https://github.com/microzz/todo-list-vuejs" target="_blank" rel="external">https://github.com/microzz/todo-list-vuejs</a></p>
<h2 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>Vue.jsæ˜¯ä¸€å¥—æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚ä¸å…¶ä»–é‡é‡çº§æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue é‡‡ç”¨è‡ªåº•å‘ä¸Šå¢é‡å¼€å‘çš„è®¾è®¡ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œå¹¶ä¸”éå¸¸å®¹æ˜“å­¦ä¹ ï¼Œéå¸¸å®¹æ˜“ä¸å…¶å®ƒåº“æˆ–å·²æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼ŒVue å®Œå…¨æœ‰èƒ½åŠ›é©±åŠ¨é‡‡ç”¨å•æ–‡ä»¶ç»„ä»¶å’Œ Vue ç”Ÿæ€ç³»ç»Ÿæ”¯æŒçš„åº“å¼€å‘çš„å¤æ‚å•é¡µåº”ç”¨ã€‚<br>Vue.js çš„ç›®æ ‡æ˜¯é€šè¿‡å°½å¯èƒ½ç®€å•çš„ API å®ç°å“åº”çš„æ•°æ®ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚</p>
<h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ol>
<li><strong>æ˜“ç”¨</strong><br>å·²ç»ä¼šäº†HTML,CSS,JavaScriptï¼Ÿå³åˆ»é˜…è¯»æŒ‡å—å¼€å§‹æ„å»ºåº”ç”¨ï¼</li>
<li><strong>çµæ´»</strong><br>ç®€å•å°å·§çš„æ ¸å¿ƒï¼Œæ¸è¿›å¼æŠ€æœ¯æ ˆï¼Œè¶³ä»¥åº”ä»˜ä»»ä½•è§„æ¨¡çš„åº”ç”¨ã€‚</li>
<li><strong>æ€§èƒ½</strong><br>17kb min+gzip è¿è¡Œå¤§å°<br>è¶…å¿«è™šæ‹Ÿ DOM<br>æœ€çœå¿ƒçš„ä¼˜åŒ–</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Vue-jsåˆä½“éªŒ&quot;&gt;&lt;a href=&quot;#Vue-jsåˆä½“éªŒ&quot; class=&quot;headerlink&quot; title=&quot;Vue.jsåˆä½“éªŒ&quot;&gt;&lt;/a&gt;Vue.jsåˆä½“éªŒ&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;ä¹‹å‰å­¦äº†React.j
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Vue.js" scheme="https://microzz.com/tags/Vue-js/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptå®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•</title>
    <link href="https://microzz.com/2017/03/06/extend/"/>
    <id>https://microzz.com/2017/03/06/extend/</id>
    <published>2017-03-06T13:44:25.000Z</published>
    <updated>2017-03-08T15:18:28.334Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•"><a href="#JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•" class="headerlink" title="JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•"></a>JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•</h1><h2 id="ES5ä¸­çš„å®ç°"><a href="#ES5ä¸­çš„å®ç°" class="headerlink" title="ES5ä¸­çš„å®ç°"></a>ES5ä¸­çš„å®ç°</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>JavaScript(ES5)ä¸­æ²¡æœ‰åƒJavaé‚£æ ·ç±»çš„æ¦‚å¿µï¼Œå†™æ³•è·Ÿä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆæ¯”å¦‚C++å’ŒJavaï¼‰å·®å¼‚å¾ˆå¤§ï¼Œå¾ˆå®¹æ˜“è®©æ–°å­¦ä¹ è¿™é—¨è¯­è¨€çš„ç¨‹åºå‘˜æ„Ÿåˆ°å›°æƒ‘ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åŸå‹é“¾prototypeæ¥æ¨¡æ‹Ÿç±»ï¼Œå»å®ç°ç»§æ‰¿çš„ç›¸å…³åŠŸèƒ½ã€‚ä¸‹é¢æ¥çœ‹çœ‹ES5ä¸­å®ç°ç»§æ‰¿å¸¸è§çš„ä¸‰ç§æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre><code class="javascript">/**
 * JavaScript(ES5)ä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•
 */

// å®šä¹‰åŸºç±»Person
function Person(name, age) {
  this.name = name;
  this.age = age;
}

// å…±äº«æ•°æ®
Person.prototype.LEGS_NUM = 2;

// å…±äº«æ–¹æ³•
Person.prototype.info = function () {
  console.log(&#39;My name is &#39; + this.name + &#39; .I\&#39;m &#39; + this.age + &#39; years old now&#39;);
};

Person.prototype.walk = function () {
  console.log(this.name + &#39; is walking...&#39;);
};

// Studentå­ç±»
function Student(name, age, className) {
  // è°ƒç”¨çˆ¶ç±»
  Person.call(this, name, age);
  this.className = className;
}

// 1âƒ£ï¸ æ–¹æ³•ä¸€ï¼šPerson.prototypeç›´æ¥èµ‹å€¼ç»™Student.prototype
// Student.prototype = Person.prototype;

// 2âƒ£ï¸ æ–¹æ³•äºŒï¼šStudent.prototypeä¸ºPersonçš„å®ä¾‹
// Student.prototype = new Person();

// 3âƒ£ï¸ æ–¹æ³•ä¸‰ï¼šåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¯¹è±¡çš„åŸå‹æŒ‡å‘Person.prototypeï¼Œèµ‹å€¼ç»™Student.prototype
Student.prototype = Object.create(Person.prototype);

Student.prototype.constructor = Student;

// è¦†ç›–çˆ¶ç±»çš„infoæ–¹æ³•
Student.prototype.info = function () {
  console.log(&#39;My name is &#39; + this.name + &#39;,I\&#39;m &#39; + this.age + &#39; years old now, and from class &#39; + this.className + &#39;.&#39;);
};

// Studentç±»çš„å…±äº«æ–¹æ³•
Student.prototype.learn = function (subject) {
  console.log(this.name + &#39; is learning &#39; + subject + &#39;.&#39;);
};

// æµ‹è¯•,åˆ›å»ºä¸€ä¸ªStudentçš„å®ä¾‹
var microzz = new Student(&#39;Microzz&#39;, 22, 5);
microzz.info(); // My name is Microzz,I&#39;m 22 years old now, and from class 5.
console.log(microzz.LEGS_NUM); // 2
microzz.walk(); // Microzz is walking...
microzz.learn(&#39;JavaScript&#39;); // Microzz is learning JavaScript.
console.log(microzz.__proto__.__proto__ === Person.prototype); // true
console.log(microzz.__proto__ === Student.prototype); // true
console.log(microzz.__proto__.constructor === Student); // true
</code></pre>
<h3 id="ä¸‰ç§æ–¹æ³•æ¯”è¾ƒ"><a href="#ä¸‰ç§æ–¹æ³•æ¯”è¾ƒ" class="headerlink" title="ä¸‰ç§æ–¹æ³•æ¯”è¾ƒ"></a>ä¸‰ç§æ–¹æ³•æ¯”è¾ƒ</h3><p>ä¸Šé¢ä»£ç ä¸­æœ‰ä¸‰ç§æ–¹æ³•å®ç°ç»§æ‰¿ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥æ¥åˆ†æä¸€ä¸‹è¿™å‡ ç§æ–¹æ³•ã€‚<br>1âƒ£ï¸è¿™ç§æ–¹æ³•ä¸­ï¼ŒPerson.prototypeç›´æ¥èµ‹å€¼ç»™Student.prototypeï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œå¦‚æœå­ç±»prototypeæ·»åŠ æ–°çš„ä¸œè¥¿çš„è¯ä¹Ÿä¼šæ”¹å†™çˆ¶ç±»ã€‚æ‰€ä»¥è¿™ç§æ–¹æ³•ä¸æ¨èã€‚<br>2âƒ£ï¸ç¬¬äºŒç§æ–¹æ³•Student.prototypeä¸ºPersonçš„å®ä¾‹ï¼Œè¿™ä¹Ÿæ˜¯å¯ä»¥å®ç°çš„ã€‚ä½†æ˜¯Personæ„é€ å‡½æ•°æœ‰å‚æ•°åº”è¯¥ä¼ ä»€ä¹ˆå‘¢ï¼Ÿä¼ ä»»ä½•ä¸€ä¸ªéƒ½æ˜¯å¾ˆå¥‡æ€ªçš„ã€‚æ‰€ä»¥ä¹Ÿä¸æ¨èã€‚<br>3âƒ£ï¸ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯æ¯”è¾ƒç†æƒ³çš„ï¼Œåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¯¹è±¡çš„åŸå‹æŒ‡å‘Person.prototypeï¼Œèµ‹å€¼ç»™Student.prototypeã€‚ä½†æ˜¯Object.createä¹Ÿæœ‰ä¸€ç‚¹å°ç‘•ç–µï¼Œå› ä¸ºå®ƒæ˜¯ES5ä¹‹åæ‰æ”¯æŒçš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡æ‹Ÿå®ç°Object.createæ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript">if (!Object.create) {
  Object.prototype.create = function (proto) {
    function F() {}
    F.prototype = proto;
    return new F;
  }
}
</code></pre>
<p>è¿™æ ·åœ¨ES5ä¸­å°±å®Œç¾å®ç°äº†ç»§æ‰¿ğŸ˜„</p>
<h2 id="ES6ä¸­çš„å®ç°"><a href="#ES6ä¸­çš„å®ç°" class="headerlink" title="ES6ä¸­çš„å®ç°"></a>ES6ä¸­çš„å®ç°</h2><h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>ES6æä¾›äº†æ›´æ¥è¿‘ä¼ ç»Ÿè¯­è¨€â€ç±»â€çš„å†™æ³•ï¼Œå¼•å…¥äº†Classï¼ˆç±»ï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œä½œä¸ºå¯¹è±¡çš„æ¨¡æ¿ã€‚é€šè¿‡classå…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ç±»ã€‚åŸºæœ¬ä¸Šï¼ŒES6çš„classå¯ä»¥çœ‹ä½œåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒçš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼ŒES5éƒ½å¯ä»¥åšåˆ°ï¼Œæ–°çš„classå†™æ³•åªæ˜¯è®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•è€Œå·²ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨ES6çš„è¯­æ³•å®ç°ç±»çš„ç»§æ‰¿ã€‚</p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre><code class="javascript">// åŸºç±» Person
class Person {
  // çˆ¶ç±»çš„æ„é€ æ–¹æ³•
  constructor(name, age) {
    this.name = name;
    this.age = age;
    // å…±äº«å˜é‡
    this.LEGS_NUM = 2;
  }
  // çˆ¶ç±»çš„infoæ–¹æ³•
  info() {
    console.log(`My name is ${this.name}, I\&#39;m ${this.age} years old now.`);
  }

  // çˆ¶ç±»çš„walkæ–¹æ³•
  walk() {
    console.log(this.name + &#39; is walking...&#39;);
  }

}

// å­ç±» Student
class Student extends Person {
  constructor(name, age, className) {
    // è°ƒç”¨åŸºç±»çš„æ„é€ æ–¹æ³•
    super(name, age);
    this.className = className;
  }

  // è¦†ç›–çˆ¶ç±»çš„infoæ–¹æ³•
  info() {
    console.log(`My name is ${this.name}, I\&#39;m ${this.age} years old, and from class ${this.className}.`);
  }
}

// å®ä¾‹åŒ–ä¸€ä¸ªStudentçš„å®ä¾‹
let stu = new Student(&#39;Zhaohui&#39;, 22, 5);
stu.info(); // My name is Zhaohui, I&#39;m 22 years old, and from class 5.
stu.walk(); // Zhaohui is walking...
console.log(stu.LEGS_NUM); // 2
console.log(stu instanceof Student); // true
console.log(stu instanceof Person); // true
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±é€šè¿‡ES6ä¸­çš„classå®ç°äº†â€œç±»â€çš„ç»§æ‰¿äº†ğŸ˜„</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•&quot;&gt;&lt;a href=&quot;#JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•&quot;&gt;&lt;/a&gt;JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•&lt;/h1&gt;&lt;
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="åŸå‹é“¾" scheme="https://microzz.com/tags/%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>JSä¸­çš„é«˜é˜¶å‡½æ•°å’Œåå‡½æ•°</title>
    <link href="https://microzz.com/2017/03/05/func/"/>
    <id>https://microzz.com/2017/03/05/func/</id>
    <published>2017-03-05T11:49:42.000Z</published>
    <updated>2017-03-05T12:18:09.031Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JSä¸­çš„é«˜é˜¶å‡½æ•°å’Œåå‡½æ•°"><a href="#JSä¸­çš„é«˜é˜¶å‡½æ•°å’Œåå‡½æ•°" class="headerlink" title="JSä¸­çš„é«˜é˜¶å‡½æ•°å’Œåå‡½æ•°"></a>JSä¸­çš„é«˜é˜¶å‡½æ•°å’Œåå‡½æ•°</h1><h2 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h2><h3 id="ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°"><a href="#ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°" class="headerlink" title="ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°"></a>ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°</h3><p>é«˜é˜¶å‡½æ•°æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„åŸºç¡€ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°å‘¢?</p>
<p>é«˜é˜¶äºŒå­—å¬èµ·æ¥æœ‰ç‚¹é«˜å¤§ä¸Šçš„æ„Ÿè§‰ï¼Œå…¶å®ä¸ç„¶ï¼Œé«˜é˜¶å‡½æ•°ä¸æ™®é€šå‡½æ•°ä¸åŒçš„åœ°æ–¹æ˜¯é«˜é˜¶å‡½æ•°å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…æ˜¯å°†å‡½æ•°ä½œä¸ºè¿”å›å€¼ï¼Œè¯·çœ‹å¦‚ä¸‹ç¤ºä¾‹ã€‚</p>
<h3 id="ç¤ºä¾‹ï¼š"><a href="#ç¤ºä¾‹ï¼š" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h3><pre><code class="javascript">function test(v){
  return function(){
    return v;
  }
}
</code></pre>
<p>ç¤ºä¾‹ä¸­æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„é«˜é˜¶å‡½æ•°ï¼Œå¦‚ä½ æ‰€è§ï¼Œé«˜é˜¶å‡½æ•°testçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚</p>
<h3 id="ç°å®ä¸­çš„åº”ç”¨"><a href="#ç°å®ä¸­çš„åº”ç”¨" class="headerlink" title="ç°å®ä¸­çš„åº”ç”¨"></a>ç°å®ä¸­çš„åº”ç”¨</h3><p>è™½ç„¶æœ‰å¯èƒ½æ˜¯ç¬¬ä¸€æ¬¡çœŸæ­£çš„å»äº†è§£ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°ï¼Œä½†æ˜¯å…¶å®æˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸ä¼šç”¨åˆ°å®ƒï¼Œåªæ˜¯æˆ‘ä»¬æ²¡æœ‰å»ç•™æ„æˆ–è€…è¯´ä¸çŸ¥é“å®ƒçš„ç§°è°“è€Œå·²ã€‚</p>
<p>ç¤ºä¾‹ï¼šæ•°ç»„çš„æ’åº(sort)å‡½æ•°</p>
<pre><code class="javascript">var arr = [23,54,3,12,78];
arr.sort(function(a,b){
  return a-b;
});
</code></pre>
<h2 id="åå‡½æ•°"><a href="#åå‡½æ•°" class="headerlink" title="åå‡½æ•°"></a>åå‡½æ•°</h2><h3 id="ä»€ä¹ˆæ˜¯åå‡½æ•°"><a href="#ä»€ä¹ˆæ˜¯åå‡½æ•°" class="headerlink" title="ä»€ä¹ˆæ˜¯åå‡½æ•°"></a>ä»€ä¹ˆæ˜¯åå‡½æ•°</h3><p>å‡è®¾æœ‰ä¸€ä¸ªå‚æ•°æˆ–å˜é‡å·²ç»é¢„ç½®çš„å‡½æ•°Aï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨Aæ¥äº§ç”Ÿä¸€ä¸ªæ–°çš„å‡½æ•°Bï¼Œå‡½æ•°Bå°±æ˜¯æˆ‘ä»¬è¯´çš„åå‡½æ•°ã€‚ä¸‹é¢å¯ä»¥çœ‹ä¸€ä¸ªç¤ºä¾‹ã€‚</p>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><pre><code class="javascript">// åˆ¤æ–­ç±»å‹çš„å°demo
var isType = function(type){
  return function(obj){
    return toString.call(obj)==&#39;[object &#39;+type+&#39;]&#39;;
  }
};

// å®šåˆ¶æ–°çš„å‡½æ•°
var isString = isType(&#39;String&#39;);
var isArray = isType(&#39;Array&#39;);
var isFunction = isType(&#39;Function&#39;);

// æµ‹è¯•åå‡½æ•°
console.log(isString(&#39;abc&#39;)); // true
console.log(isArray([1, 2])); // true
console.log(isFunction(&#39;abc&#39;)); // false
</code></pre>
<p>isTypeå‡½æ•°ä¸­é¢„ç½®äº†åˆ¤æ–­ç±»å‹çš„æ–¹æ³•ï¼ŒåªæŒ‡å®šéƒ¨åˆ†å‚æ•°æ¥äº§ç”Ÿçš„æ–°çš„å®šåˆ¶çš„å‡½æ•°isStringã€isArrayå’ŒisFunctionå°±æ˜¯åå‡½æ•°ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JSä¸­çš„é«˜é˜¶å‡½æ•°å’Œåå‡½æ•°&quot;&gt;&lt;a href=&quot;#JSä¸­çš„é«˜é˜¶å‡½æ•°å’Œåå‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;JSä¸­çš„é«˜é˜¶å‡½æ•°å’Œåå‡½æ•°&quot;&gt;&lt;/a&gt;JSä¸­çš„é«˜é˜¶å‡½æ•°å’Œåå‡½æ•°&lt;/h1&gt;&lt;h2 id=&quot;é«˜é˜¶å‡½æ•°&quot;&gt;&lt;a href=&quot;#é«˜é˜¶å‡½æ•°&quot; cla
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="å‡½æ•°" scheme="https://microzz.com/tags/%E5%87%BD%E6%95%B0/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºHTML5çš„Webé˜…è¯»å™¨</title>
    <link href="https://microzz.com/2017/03/04/WebReader/"/>
    <id>https://microzz.com/2017/03/04/WebReader/</id>
    <published>2017-03-04T12:11:26.000Z</published>
    <updated>2017-04-01T15:20:04.088Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸºäºHTML5çš„Webé˜…è¯»å™¨"><a href="#åŸºäºHTML5çš„Webé˜…è¯»å™¨" class="headerlink" title="åŸºäºHTML5çš„Webé˜…è¯»å™¨"></a>åŸºäºHTML5çš„Webé˜…è¯»å™¨</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>è¿™æ˜¯åŸºäºHTML5å¼€å‘çš„ç®€å•çš„è½»é‡çº§ WebAppåœ¨çº¿é˜…è¯»å™¨ï¼Œå¯ä»¥è¿›è¡Œç®€å•çš„ä¸ªæ€§åŒ–è®¾ç½®ï¼Œé€‚é…äº†æ‰‹æœºå’Œç”µè„‘ã€‚è¿è¡Œéœ€è¦ä¸€ä¸ªWebæœåŠ¡å™¨çš„æ”¯æŒã€‚æ¬¢è¿å¤§å®¶åœ¨æˆ‘çš„<a href="https://github.com/microzz/WebReader" target="_blank" rel="external">GitHub</a>ä¸ŠStarï¼Œä¹Ÿå¯ä»¥æå‡ºå®è´µæ„è§å“¦ğŸ˜„</p>
<h2 id="åœ¨çº¿é¢„è§ˆ"><a href="#åœ¨çº¿é¢„è§ˆ" class="headerlink" title="åœ¨çº¿é¢„è§ˆ"></a>åœ¨çº¿é¢„è§ˆ</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170304_WebReader/web-reader.png" alt="åŸºäºHTML5çš„Webé˜…è¯»å™¨" title="">
                </div>
                <div class="image-caption">åŸºäºHTML5çš„Webé˜…è¯»å™¨</div>
            </figure>
<p>åœ¨çº¿é¢„è§ˆåœ°å€1ï¼šğŸ”—<a href="http://microzz.cn/web-reader/" target="_blank" rel="external">http://microzz.cn/web-reader/</a><br>åœ¨çº¿é¢„è§ˆåœ°å€2:ğŸ”—<a href="https://microzz.github.io/WebReader/" target="_blank" rel="external">https://microzz.github.io/WebReader/</a></p>
<h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><p>æºç åœ°å€ï¼š<a href="https://github.com/microzz/WebReader" target="_blank" rel="external">https://github.com/microzz/WebReader</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;åŸºäºHTML5çš„Webé˜…è¯»å™¨&quot;&gt;&lt;a href=&quot;#åŸºäºHTML5çš„Webé˜…è¯»å™¨&quot; class=&quot;headerlink&quot; title=&quot;åŸºäºHTML5çš„Webé˜…è¯»å™¨&quot;&gt;&lt;/a&gt;åŸºäºHTML5çš„Webé˜…è¯»å™¨&lt;/h1&gt;&lt;h2 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot;
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="HTML5" scheme="https://microzz.com/tags/HTML5/"/>
    
      <category term="WebApp" scheme="https://microzz.com/tags/WebApp/"/>
    
  </entry>
  
  <entry>
    <title>å“åº”å¼ç½‘é¡µè®¾è®¡</title>
    <link href="https://microzz.com/2017/03/02/responsive/"/>
    <id>https://microzz.com/2017/03/02/responsive/</id>
    <published>2017-03-02T14:55:31.000Z</published>
    <updated>2017-03-03T13:47:40.779Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å“åº”å¼ç½‘é¡µè®¾è®¡"><a href="#å“åº”å¼ç½‘é¡µè®¾è®¡" class="headerlink" title="å“åº”å¼ç½‘é¡µè®¾è®¡"></a>å“åº”å¼ç½‘é¡µè®¾è®¡</h1><h2 id="ä»€ä¹ˆæ˜¯å“åº”å¼ç½‘ç«™"><a href="#ä»€ä¹ˆæ˜¯å“åº”å¼ç½‘ç«™" class="headerlink" title="ä»€ä¹ˆæ˜¯å“åº”å¼ç½‘ç«™"></a>ä»€ä¹ˆæ˜¯å“åº”å¼ç½‘ç«™</h2><p>å“åº”å¼å¸ƒå±€æ˜¯Ethan Marcotteåœ¨2010å¹´5æœˆä»½æå‡ºçš„ä¸€ä¸ªæ¦‚å¿µï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä¸€ä¸ªç½‘ç«™èƒ½å¤Ÿå…¼å®¹å¤šä¸ªç»ˆç«¯â€”â€”è€Œä¸æ˜¯ä¸ºæ¯ä¸ªç»ˆç«¯åšä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬ã€‚è¿™ä¸ªæ¦‚å¿µæ˜¯ä¸ºè§£å†³ç§»åŠ¨äº’è”ç½‘æµè§ˆè€Œè¯ç”Ÿçš„ã€‚</p>
<h2 id="ä¼˜ç‚¹å’Œç¼ºç‚¹"><a href="#ä¼˜ç‚¹å’Œç¼ºç‚¹" class="headerlink" title="ä¼˜ç‚¹å’Œç¼ºç‚¹"></a>ä¼˜ç‚¹å’Œç¼ºç‚¹</h2><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><p>ä¼˜ç‚¹ï¼š<br>é¢å¯¹ä¸åŒåˆ†è¾¨ç‡è®¾å¤‡çµæ´»æ€§å¼º<br>èƒ½å¤Ÿå¿«æ·è§£å†³å¤šè®¾å¤‡æ˜¾ç¤ºé€‚åº”é—®é¢˜</p>
<h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><p>å…¼å®¹å„ç§è®¾å¤‡å·¥ä½œé‡å¤§ï¼Œæ•ˆç‡ä½ä¸‹<br>ä»£ç ç´¯èµ˜ï¼Œä¼šå‡ºç°éšè—æ— ç”¨çš„å…ƒç´ ï¼ŒåŠ è½½æ—¶é—´åŠ é•¿<br>å…¶å®è¿™æ˜¯ä¸€ç§æŠ˜ä¸­æ€§è´¨çš„è®¾è®¡è§£å†³æ–¹æ¡ˆï¼Œå¤šæ–¹é¢å› ç´ å½±å“è€Œè¾¾ä¸åˆ°æœ€ä½³æ•ˆæœ<br>ä¸€å®šç¨‹åº¦ä¸Šæ”¹å˜äº†ç½‘ç«™åŸæœ‰çš„å¸ƒå±€ç»“æ„ï¼Œä¼šå‡ºç°ç”¨æˆ·æ··æ·†çš„æƒ…å†µ</p>
<h2 id="å“åº”å¼ç½‘é¡µè®¾è®¡å®æˆ˜"><a href="#å“åº”å¼ç½‘é¡µè®¾è®¡å®æˆ˜" class="headerlink" title="å“åº”å¼ç½‘é¡µè®¾è®¡å®æˆ˜"></a>å“åº”å¼ç½‘é¡µè®¾è®¡å®æˆ˜</h2><p>ç”¨HTML5ä»¥åŠCSS3çš„åª’ä½“æŸ¥è¯¢å®Œæˆäº†ä¸€ä¸ªå“åº”å¼å¸ƒå±€çš„demoï¼Œå¤§å®¶å¯ä»¥ç”¨ä¸åŒçš„å°ºå¯¸çš„è®¾å¤‡ï¼ŒæŸ¥çœ‹ä¸åŒåˆ†è¾¨ç‡ä¸‹çš„è¡¨ç°ã€‚ä¹Ÿå¯ä»¥åœ¨æ§åˆ¶å°æ¨¡æ‹Ÿå„ç§è®¾å¤‡ï¼Œæ¬¢è¿å¤§å®¶æå‡ºæ„è§ã€‚ğŸ˜„</p>
<h2 id="åœ¨çº¿é¢„è§ˆ"><a href="#åœ¨çº¿é¢„è§ˆ" class="headerlink" title="åœ¨çº¿é¢„è§ˆ"></a>åœ¨çº¿é¢„è§ˆ</h2><p>åœ¨çº¿é¢„è§ˆåœ°å€1: ğŸ”—<a href="http://microzz.cn/responsive/" target="_blank" rel="external">http://microzz.cn/responsive/</a><br>åœ¨çº¿é¢„è§ˆåœ°å€2: ğŸ”—<a href="https://microzz.github.io/ResponsiveWeb/" target="_blank" rel="external">https://microzz.github.io/ResponsiveWeb/</a></p>
<h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><p>æºç åœ°å€ï¼šğŸ”—<a href="https://github.com/microzz/ResponsiveWeb" target="_blank" rel="external">https://github.com/microzz/ResponsiveWeb</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å“åº”å¼ç½‘é¡µè®¾è®¡&quot;&gt;&lt;a href=&quot;#å“åº”å¼ç½‘é¡µè®¾è®¡&quot; class=&quot;headerlink&quot; title=&quot;å“åº”å¼ç½‘é¡µè®¾è®¡&quot;&gt;&lt;/a&gt;å“åº”å¼ç½‘é¡µè®¾è®¡&lt;/h1&gt;&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯å“åº”å¼ç½‘ç«™&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯å“åº”å¼ç½‘ç«™&quot; class=&quot;headerli
    
    </summary>
    
    
      <category term="HTML5" scheme="https://microzz.com/tags/HTML5/"/>
    
      <category term="CSS3" scheme="https://microzz.com/tags/CSS3/"/>
    
      <category term="Responsive" scheme="https://microzz.com/tags/Responsive/"/>
    
      <category term="å“åº”å¼è®¾è®¡" scheme="https://microzz.com/tags/%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ</title>
    <link href="https://microzz.com/2017/03/01/flow-info/"/>
    <id>https://microzz.com/2017/03/01/flow-info/</id>
    <published>2017-03-01T07:42:04.000Z</published>
    <updated>2017-03-31T13:16:11.113Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ"><a href="#JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ" class="headerlink" title="JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ"></a>JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ</h1><h2 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170301_flow_info/preview.gif" alt="JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ" title="">
                </div>
                <div class="image-caption">JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ</div>
            </figure>
<h3 id="åœ¨çº¿é¢„è§ˆ1"><a href="#åœ¨çº¿é¢„è§ˆ1" class="headerlink" title="åœ¨çº¿é¢„è§ˆ1"></a>åœ¨çº¿é¢„è§ˆ1</h3><p>åœ¨çº¿é¢„è§ˆåœ°å€1: ğŸ”—<a href="http://microzz.cn/flow-info/" target="_blank" rel="external">http://microzz.cn/flow-info/</a></p>
<h3 id="åœ¨çº¿é¢„è§ˆ2"><a href="#åœ¨çº¿é¢„è§ˆ2" class="headerlink" title="åœ¨çº¿é¢„è§ˆ2"></a>åœ¨çº¿é¢„è§ˆ2</h3><p>åœ¨çº¿é¢„è§ˆåœ°å€2: ğŸ”—<a href="https://microzz.github.io/flow-info-by-js/" target="_blank" rel="external">https://microzz.github.io/flow-info-by-js/</a></p>
<h3 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h3><p>æºä»£ç åœ°å€ï¼šğŸ”—<a href="https://github.com/microzz/flow-info-by-js" target="_blank" rel="external">https://github.com/microzz/flow-info-by-js</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ&quot;&gt;&lt;a href=&quot;#JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ&quot; class=&quot;headerlink&quot; title=&quot;JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ&quot;&gt;&lt;/a&gt;JSå®ç°æ–‡å­—ä¿¡æ¯æ— ç¼æ»šåŠ¨æ•ˆæœ&lt;/h1&gt;&lt;h2 id=&quot;é¢„è§ˆ&quot;&gt;&lt;a href=&quot;#é¢„è§ˆ&quot;
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å·¥ä½œé¢è¯•é—®é¢˜</title>
    <link href="https://microzz.com/2017/02/26/interview2/"/>
    <id>https://microzz.com/2017/02/26/interview2/</id>
    <published>2017-02-26T12:02:20.000Z</published>
    <updated>2017-06-18T15:52:31.780Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰ç«¯å·¥ä½œé¢è¯•é—®é¢˜"><a href="#å‰ç«¯å·¥ä½œé¢è¯•é—®é¢˜" class="headerlink" title="å‰ç«¯å·¥ä½œé¢è¯•é—®é¢˜"></a>å‰ç«¯å·¥ä½œé¢è¯•é—®é¢˜</h1><p>æœ¬æ–‡åŒ…å«äº†ä¸€äº›ç”¨äºè€ƒæŸ¥å€™é€‰è€…çš„å‰ç«¯é¢è¯•é—®é¢˜ã€‚ä¸å»ºè®®å¯¹å•ä¸ªå€™é€‰è€…é—®åŠæ¯ä¸ªé—®é¢˜ (é‚£éœ€è¦å¥½å‡ ä¸ªå°æ—¶)ã€‚åªè¦ä»åˆ—è¡¨é‡ŒæŒ‘é€‰ä¸€äº›ï¼Œå°±èƒ½å¸®åŠ©ä½ è€ƒæŸ¥å€™é€‰è€…æ˜¯å¦å…·å¤‡æ‰€éœ€è¦çš„æŠ€èƒ½ã€‚</p>
<p><strong>å¤‡æ³¨ï¼š</strong> è¿™äº›é—®é¢˜ä¸­å¾ˆå¤šéƒ½æ˜¯å¼€æ”¾æ€§çš„ï¼Œå¯ä»¥å¼•å‘æœ‰è¶£çš„è®¨è®ºã€‚è¿™æ¯”ç›´æ¥çš„ç­”æ¡ˆæ›´èƒ½ä½“ç°æ­¤äººçš„èƒ½åŠ›ã€‚</p>
<h4 id="å¸¸è§é—®é¢˜ï¼š"><a href="#å¸¸è§é—®é¢˜ï¼š" class="headerlink" title="å¸¸è§é—®é¢˜ï¼š"></a>å¸¸è§é—®é¢˜ï¼š</h4><ul>
<li>ä½ åœ¨æ˜¨å¤©/æœ¬å‘¨å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</li>
<li>ç¼–å†™ä»£ç çš„å“ªäº›æ–¹é¢èƒ½å¤Ÿä½¿ä½ å…´å¥‹æˆ–æ„Ÿå…´è¶£ï¼Ÿ</li>
<li>ä½ æœ€è¿‘é‡åˆ°è¿‡ä»€ä¹ˆæŠ€æœ¯æŒ‘æˆ˜ï¼Ÿä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ</li>
<li>åœ¨åˆ¶ä½œä¸€ä¸ªç½‘é¡µåº”ç”¨æˆ–ç½‘ç«™çš„è¿‡ç¨‹ä¸­ï¼Œä½ æ˜¯å¦‚ä½•è€ƒè™‘å…¶ UIã€å®‰å…¨æ€§ã€é«˜æ€§èƒ½ã€SEOã€å¯ç»´æŠ¤æ€§ä»¥åŠæŠ€æœ¯å› ç´ çš„ï¼Ÿ</li>
<li>è¯·è°ˆè°ˆä½ å–œæ¬¢çš„å¼€å‘ç¯å¢ƒã€‚</li>
<li>ä½ æœ€ç†Ÿæ‚‰å“ªä¸€å¥—ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Ÿ</li>
<li>ä½ èƒ½æè¿°å½“ä½ åˆ¶ä½œä¸€ä¸ªç½‘é¡µçš„å·¥ä½œæµç¨‹å—ï¼Ÿ</li>
<li>å‡è‹¥ä½ æœ‰ 5 ä¸ªä¸åŒçš„æ ·å¼æ–‡ä»¶ (stylesheets), æ•´åˆè¿›ç½‘ç«™çš„æœ€å¥½æ–¹å¼æ˜¯?</li>
<li>ä½ èƒ½æè¿°æ¸è¿›å¢å¼º (progressive enhancement) å’Œä¼˜é›…é™çº§ (graceful degradation) ä¹‹é—´çš„ä¸åŒå—?</li>
<li>ä½ å¦‚ä½•å¯¹ç½‘ç«™çš„æ–‡ä»¶å’Œèµ„æºè¿›è¡Œä¼˜åŒ–ï¼Ÿ</li>
<li>æµè§ˆå™¨åŒä¸€æ—¶é—´å¯ä»¥ä»ä¸€ä¸ªåŸŸåä¸‹è½½å¤šå°‘èµ„æºï¼Ÿ<ul>
<li>æœ‰ä»€ä¹ˆä¾‹å¤–å—ï¼Ÿ</li>
</ul>
</li>
<li>è¯·è¯´å‡ºä¸‰ç§å‡å°‘é¡µé¢åŠ è½½æ—¶é—´çš„æ–¹æ³•ã€‚(åŠ è½½æ—¶é—´æŒ‡æ„ŸçŸ¥çš„æ—¶é—´æˆ–è€…å®é™…åŠ è½½æ—¶é—´)</li>
<li>å¦‚æœä½ å‚ä¸åˆ°ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œå‘ç°ä»–ä»¬ä½¿ç”¨ Tab æ¥ç¼©è¿›ä»£ç ï¼Œä½†æ˜¯ä½ å–œæ¬¢ç©ºæ ¼ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</li>
<li>è¯·å†™ä¸€ä¸ªç®€å•çš„å¹»ç¯æ•ˆæœé¡µé¢ã€‚</li>
<li>å¦‚æœä»Šå¹´ä½ æ‰“ç®—ç†Ÿç»ƒæŒæ¡ä¸€é¡¹æ–°æŠ€æœ¯ï¼Œé‚£ä¼šæ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>è¯·è°ˆè°ˆä½ å¯¹ç½‘é¡µæ ‡å‡†å’Œæ ‡å‡†åˆ¶å®šæœºæ„é‡è¦æ€§çš„ç†è§£ã€‚</li>
<li>ä»€ä¹ˆæ˜¯ FOUC (æ— æ ·å¼å†…å®¹é—ªçƒ)ï¼Ÿä½ å¦‚ä½•æ¥é¿å… FOUCï¼Ÿ</li>
<li>è¯·è§£é‡Šä»€ä¹ˆæ˜¯ ARIA å’Œå±å¹•é˜…è¯»å™¨ (screenreaders)ï¼Œä»¥åŠå¦‚ä½•ä½¿ç½‘ç«™å®ç°æ— éšœç¢è®¿é—® (accessible)ã€‚</li>
<li>è¯·è§£é‡Š CSS åŠ¨ç”»å’Œ JavaScript åŠ¨ç”»çš„ä¼˜ç¼ºç‚¹ã€‚</li>
<li>ä»€ä¹ˆæ˜¯è·¨åŸŸèµ„æºå…±äº« (CORS)ï¼Ÿå®ƒç”¨äºè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li>
</ul>
<h4 id="HTML-ç›¸å…³é—®é¢˜ï¼š"><a href="#HTML-ç›¸å…³é—®é¢˜ï¼š" class="headerlink" title="HTML ç›¸å…³é—®é¢˜ï¼š"></a><a name="html-questions">HTML ç›¸å…³é—®é¢˜ï¼š</a></h4><ul>
<li><code>doctype</code>(æ–‡æ¡£ç±»å‹) çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>æµè§ˆå™¨æ ‡å‡†æ¨¡å¼ (standards mode) ã€å‡ ä¹æ ‡å‡†æ¨¡å¼ï¼ˆalmost standards modeï¼‰å’Œæ€ªå¼‚æ¨¡å¼ (quirks mode) ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>HTML å’Œ XHTML æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li>
<li>å¦‚æœé¡µé¢ä½¿ç”¨ â€˜application/xhtml+xmlâ€™ ä¼šæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</li>
<li>å¦‚æœç½‘é¡µå†…å®¹éœ€è¦æ”¯æŒå¤šè¯­è¨€ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</li>
<li>åœ¨è®¾è®¡å’Œå¼€å‘å¤šè¯­è¨€ç½‘ç«™æ—¶ï¼Œæœ‰å“ªäº›é—®é¢˜ä½ å¿…é¡»è¦è€ƒè™‘ï¼Ÿ</li>
<li>ä½¿ç”¨ <code>data-</code> å±æ€§çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>å¦‚æœæŠŠ HTML5 çœ‹ä½œåšä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œé‚£å®ƒçš„æ„å»ºæ¨¡å—æœ‰å“ªäº›ï¼Ÿ</li>
<li>è¯·æè¿° <code>cookies</code>ã€<code>sessionStorage</code> å’Œ <code>localStorage</code> çš„åŒºåˆ«ã€‚</li>
<li>è¯·è§£é‡Š <code>&lt;script&gt;</code>ã€<code>&lt;script async&gt;</code> å’Œ <code>&lt;script defer&gt;</code> çš„åŒºåˆ«ã€‚</li>
<li>ä¸ºä»€ä¹ˆé€šå¸¸æ¨èå°† CSS <code>&lt;link&gt;</code> æ”¾ç½®åœ¨ <code>&lt;head&gt;&lt;/head&gt;</code> ä¹‹é—´ï¼Œè€Œå°† JS <code>&lt;script&gt;</code> æ”¾ç½®åœ¨ <code>&lt;/body&gt;</code> ä¹‹å‰ï¼Ÿä½ çŸ¥é“æœ‰å“ªäº›ä¾‹å¤–å—ï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯æ¸è¿›å¼æ¸²æŸ“ (progressive rendering)ï¼Ÿ</li>
<li>ä½ ç”¨è¿‡å“ªäº›ä¸åŒçš„ HTML æ¨¡æ¿è¯­è¨€ï¼Ÿ</li>
</ul>
<h4 id="CSS-ç›¸å…³é—®é¢˜ï¼š"><a href="#CSS-ç›¸å…³é—®é¢˜ï¼š" class="headerlink" title="CSS ç›¸å…³é—®é¢˜ï¼š"></a>CSS ç›¸å…³é—®é¢˜ï¼š</h4><ul>
<li>CSS ä¸­ç±» (classes) å’Œ ID çš„åŒºåˆ«ã€‚</li>
<li>è¯·é—® â€œresettingâ€ å’Œ â€œnormalizingâ€ CSS ä¹‹é—´çš„åŒºåˆ«ï¼Ÿä½ ä¼šå¦‚ä½•é€‰æ‹©ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</li>
<li>è¯·è§£é‡Šæµ®åŠ¨ (Floats) åŠå…¶å·¥ä½œåŸç†ã€‚</li>
<li>æè¿°<code>z-index</code>å’Œå åŠ ä¸Šä¸‹æ–‡æ˜¯å¦‚ä½•å½¢æˆçš„ã€‚</li>
<li>è¯·æè¿° BFC(Block Formatting Context) åŠå…¶å¦‚ä½•å·¥ä½œã€‚</li>
<li>åˆ—ä¸¾ä¸åŒçš„æ¸…é™¤æµ®åŠ¨çš„æŠ€å·§ï¼Œå¹¶æŒ‡å‡ºå®ƒä»¬å„è‡ªé€‚ç”¨çš„ä½¿ç”¨åœºæ™¯ã€‚</li>
<li>è¯·è§£é‡Š CSS spritesï¼Œä»¥åŠä½ è¦å¦‚ä½•åœ¨é¡µé¢æˆ–ç½‘ç«™ä¸­å®ç°å®ƒã€‚</li>
<li>ä½ æœ€å–œæ¬¢çš„å›¾ç‰‡æ›¿æ¢æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œä½ å¦‚ä½•é€‰æ‹©ä½¿ç”¨ã€‚</li>
<li>ä½ ä¼šå¦‚ä½•è§£å†³ç‰¹å®šæµè§ˆå™¨çš„æ ·å¼é—®é¢˜ï¼Ÿ</li>
<li>å¦‚ä½•ä¸ºæœ‰åŠŸèƒ½é™åˆ¶çš„æµè§ˆå™¨æä¾›ç½‘é¡µï¼Ÿ<ul>
<li>ä½ ä¼šä½¿ç”¨å“ªäº›æŠ€æœ¯å’Œå¤„ç†æ–¹æ³•ï¼Ÿ</li>
</ul>
</li>
<li>æœ‰å“ªäº›çš„éšè—å†…å®¹çš„æ–¹æ³• (å¦‚æœåŒæ—¶è¿˜è¦ä¿è¯å±å¹•é˜…è¯»å™¨å¯ç”¨å‘¢)ï¼Ÿ</li>
<li>ä½ ç”¨è¿‡æ …æ ¼ç³»ç»Ÿ (grid system) å—ï¼Ÿå¦‚æœä½¿ç”¨è¿‡ï¼Œä½ æœ€å–œæ¬¢å“ªç§ï¼Ÿ</li>
<li>ä½ ç”¨è¿‡åª’ä½“æŸ¥è¯¢ï¼Œæˆ–é’ˆå¯¹ç§»åŠ¨ç«¯çš„å¸ƒå±€/CSS å—ï¼Ÿ</li>
<li>ä½ ç†Ÿæ‚‰ SVG æ ·å¼çš„ä¹¦å†™å—ï¼Ÿ</li>
<li>å¦‚ä½•ä¼˜åŒ–ç½‘é¡µçš„æ‰“å°æ ·å¼ï¼Ÿ</li>
<li>åœ¨ä¹¦å†™é«˜æ•ˆ CSS æ—¶ä¼šæœ‰å“ªäº›é—®é¢˜éœ€è¦è€ƒè™‘ï¼Ÿ</li>
<li>ä½¿ç”¨ CSS é¢„å¤„ç†å™¨çš„ä¼˜ç¼ºç‚¹æœ‰å“ªäº›ï¼Ÿ<ul>
<li>è¯·æè¿°ä½ æ›¾ç»ä½¿ç”¨è¿‡çš„ CSS é¢„å¤„ç†å™¨çš„ä¼˜ç¼ºç‚¹ã€‚</li>
</ul>
</li>
<li>å¦‚æœè®¾è®¡ä¸­ä½¿ç”¨äº†éæ ‡å‡†çš„å­—ä½“ï¼Œä½ è¯¥å¦‚ä½•å»å®ç°ï¼Ÿ</li>
<li>è¯·è§£é‡Šæµè§ˆå™¨æ˜¯å¦‚ä½•åˆ¤æ–­å…ƒç´ æ˜¯å¦åŒ¹é…æŸä¸ª CSS é€‰æ‹©å™¨ï¼Ÿ</li>
<li>è¯·æè¿°ä¼ªå…ƒç´  (pseudo-elements) åŠå…¶ç”¨é€”ã€‚</li>
<li>è¯·è§£é‡Šä½ å¯¹ç›’æ¨¡å‹çš„ç†è§£ï¼Œä»¥åŠå¦‚ä½•åœ¨ CSS ä¸­å‘Šè¯‰æµè§ˆå™¨ä½¿ç”¨ä¸åŒçš„ç›’æ¨¡å‹æ¥æ¸²æŸ“ä½ çš„å¸ƒå±€ã€‚</li>
<li>è¯·è§£é‡Š <code>* { box-sizing: border-box; }</code> çš„ä½œç”¨, å¹¶ä¸”è¯´æ˜ä½¿ç”¨å®ƒæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</li>
<li>è¯·ç½—åˆ—å‡ºä½ æ‰€çŸ¥é“çš„ display å±æ€§çš„å…¨éƒ¨å€¼</li>
<li>è¯·è§£é‡Š inline å’Œ inline-block çš„åŒºåˆ«ï¼Ÿ</li>
<li>è¯·è§£é‡Š relativeã€fixedã€absolute å’Œ static å…ƒç´ çš„åŒºåˆ«</li>
<li>CSS ä¸­å­—æ¯ â€˜Câ€™ çš„æ„æ€æ˜¯å å±‚ (Cascading)ã€‚è¯·é—®åœ¨ç¡®å®šæ ·å¼çš„è¿‡ç¨‹ä¸­ä¼˜å…ˆçº§æ˜¯å¦‚ä½•å†³å®šçš„ (è¯·ä¸¾ä¾‹)ï¼Ÿå¦‚ä½•æœ‰æ•ˆä½¿ç”¨æ­¤ç³»ç»Ÿï¼Ÿ</li>
<li>ä½ åœ¨å¼€å‘æˆ–ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨è¿‡å“ªäº› CSS æ¡†æ¶ï¼Ÿä½ è§‰å¾—åº”è¯¥å¦‚ä½•æ”¹å–„ä»–ä»¬ï¼Ÿ</li>
<li>è¯·é—®ä½ æœ‰å°è¯•è¿‡ CSS Flexbox æˆ–è€… Grid æ ‡å‡†è§„æ ¼å—ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆå“åº”å¼è®¾è®¡ (responsive design) å’Œè‡ªé€‚åº”è®¾è®¡ (adaptive design) ä¸åŒï¼Ÿ</li>
<li>ä½ æœ‰å…¼å®¹ retina å±å¹•çš„ç»å†å—ï¼Ÿå¦‚æœæœ‰ï¼Œåœ¨ä»€ä¹ˆåœ°æ–¹ä½¿ç”¨äº†ä½•ç§æŠ€æœ¯ï¼Ÿ</li>
<li>è¯·é—®ä¸ºä½•è¦ä½¿ç”¨ <code>translate()</code> è€Œé <em>absolute positioning</em>ï¼Œæˆ–åä¹‹çš„ç†ç”±ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>
</ul>
<h4 id="JS-ç›¸å…³é—®é¢˜ï¼š"><a href="#JS-ç›¸å…³é—®é¢˜ï¼š" class="headerlink" title="JS ç›¸å…³é—®é¢˜ï¼š"></a>JS ç›¸å…³é—®é¢˜ï¼š</h4><ul>
<li>è¯·è§£é‡Šäº‹ä»¶ä»£ç† (event delegation)ã€‚</li>
<li>è¯·è§£é‡Š JavaScript ä¸­ <code>this</code> æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</li>
<li>è¯·è§£é‡ŠåŸå‹ç»§æ‰¿ (prototypal inheritance) çš„åŸç†ã€‚</li>
<li>ä½ æ€ä¹ˆçœ‹ AMD vs. CommonJSï¼Ÿ</li>
<li>è¯·è§£é‡Šä¸ºä»€ä¹ˆæ¥ä¸‹æ¥è¿™æ®µä»£ç ä¸æ˜¯ IIFE (ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼)ï¼š<code>function foo(){ }();</code>.<ul>
<li>è¦åšå“ªäº›æ”¹åŠ¨ä½¿å®ƒå˜æˆ IIFE?</li>
</ul>
</li>
<li>æè¿°ä»¥ä¸‹å˜é‡çš„åŒºåˆ«ï¼š<code>null</code>ï¼Œ<code>undefined</code> æˆ– <code>undeclared</code>ï¼Ÿ<ul>
<li>è¯¥å¦‚ä½•æ£€æµ‹å®ƒä»¬ï¼Ÿ</li>
</ul>
</li>
<li>ä»€ä¹ˆæ˜¯é—­åŒ… (closure)ï¼Œå¦‚ä½•ä½¿ç”¨å®ƒï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒï¼Ÿ</li>
<li>è¯·ä¸¾å‡ºä¸€ä¸ªåŒ¿åå‡½æ•°çš„å…¸å‹ç”¨ä¾‹ï¼Ÿ</li>
<li>ä½ æ˜¯å¦‚ä½•ç»„ç»‡è‡ªå·±çš„ä»£ç ï¼Ÿæ˜¯ä½¿ç”¨æ¨¡å—æ¨¡å¼ï¼Œè¿˜æ˜¯ä½¿ç”¨ç»å…¸ç»§æ‰¿çš„æ–¹æ³•ï¼Ÿ</li>
<li>è¯·æŒ‡å‡º JavaScript å®¿ä¸»å¯¹è±¡ (host objects) å’ŒåŸç”Ÿå¯¹è±¡ (native objects) çš„åŒºåˆ«ï¼Ÿ</li>
<li>è¯·æŒ‡å‡ºä»¥ä¸‹ä»£ç çš„åŒºåˆ«ï¼š<code>function Person(){}</code>ã€<code>var person = Person()</code>ã€<code>var person = new Person()</code>ï¼Ÿ</li>
<li><code>.call</code> å’Œ <code>.apply</code> çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>è¯·è§£é‡Š <code>Function.prototype.bind</code>ï¼Ÿ</li>
<li>åœ¨ä»€ä¹ˆæ—¶å€™ä½ ä¼šä½¿ç”¨ <code>document.write()</code>ï¼Ÿ</li>
<li>è¯·æŒ‡å‡ºæµè§ˆå™¨ç‰¹æ€§æ£€æµ‹ï¼Œç‰¹æ€§æ¨æ–­å’Œæµè§ˆå™¨ UA å­—ç¬¦ä¸²å—…æ¢çš„åŒºåˆ«ï¼Ÿ</li>
<li>è¯·å°½å¯èƒ½è¯¦å°½çš„è§£é‡Š Ajax çš„å·¥ä½œåŸç†ã€‚</li>
<li>ä½¿ç”¨ Ajax éƒ½æœ‰å“ªäº›ä¼˜åŠ£ï¼Ÿ</li>
<li>è¯·è§£é‡Š JSONP çš„å·¥ä½œåŸç†ï¼Œä»¥åŠå®ƒä¸ºä»€ä¹ˆä¸æ˜¯çœŸæ­£çš„ Ajaxã€‚</li>
<li>ä½ ä½¿ç”¨è¿‡ JavaScript æ¨¡æ¿ç³»ç»Ÿå—ï¼Ÿ<ul>
<li>å¦‚æœ‰ä½¿ç”¨è¿‡ï¼Œè¯·è°ˆè°ˆä½ éƒ½ä½¿ç”¨è¿‡å“ªäº›åº“ï¼Ÿ</li>
</ul>
</li>
<li>è¯·è§£é‡Šå˜é‡å£°æ˜æå‡ (hoisting)ã€‚</li>
<li>è¯·æè¿°äº‹ä»¶å†’æ³¡æœºåˆ¶ (event bubbling)ã€‚</li>
<li>â€œattributeâ€ å’Œ â€œpropertyâ€ çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆæ‰©å±• JavaScript å†…ç½®å¯¹è±¡ä¸æ˜¯å¥½çš„åšæ³•ï¼Ÿ</li>
<li>è¯·æŒ‡å‡º document load å’Œ document DOMContentLoaded ä¸¤ä¸ªäº‹ä»¶çš„åŒºåˆ«ã€‚</li>
<li><code>==</code> å’Œ <code>===</code> æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</li>
<li>è¯·è§£é‡Š JavaScript çš„åŒæºç­–ç•¥ (same-origin policy)ã€‚</li>
<li>å¦‚ä½•å®ç°ä¸‹åˆ—ä»£ç ï¼š<pre><code class="javascript">[1,2,3,4,5].duplicator(); // [1,2,3,4,5,1,2,3,4,5]
</code></pre>
</li>
<li>ä»€ä¹ˆæ˜¯ä¸‰å…ƒè¡¨è¾¾å¼ (Ternary expression)ï¼Ÿâ€œä¸‰å…ƒ (Ternary)â€ è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯ <code>&quot;use strict&quot;;</code> ? ä½¿ç”¨å®ƒçš„å¥½å¤„å’Œåå¤„åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>è¯·å®ç°ä¸€ä¸ªéå†è‡³ <code>100</code> çš„ for loop å¾ªç¯ï¼Œåœ¨èƒ½è¢« <code>3</code> æ•´é™¤æ—¶è¾“å‡º <strong>â€œfizzâ€</strong>ï¼Œåœ¨èƒ½è¢« <code>5</code> æ•´é™¤æ—¶è¾“å‡º <strong>â€œbuzzâ€</strong>ï¼Œåœ¨èƒ½åŒæ—¶è¢« <code>3</code> å’Œ <code>5</code> æ•´é™¤æ—¶è¾“å‡º <strong>â€œfizzbuzzâ€</strong>ã€‚</li>
<li>ä¸ºä½•é€šå¸¸ä¼šè®¤ä¸ºä¿ç•™ç½‘ç«™ç°æœ‰çš„å…¨å±€ä½œç”¨åŸŸ (global scope) ä¸å»æ”¹å˜å®ƒï¼Œæ˜¯è¾ƒå¥½çš„é€‰æ‹©ï¼Ÿ</li>
<li>ä¸ºä½•ä½ ä¼šä½¿ç”¨ <code>load</code> ä¹‹ç±»çš„äº‹ä»¶ (event)ï¼Ÿæ­¤äº‹ä»¶æœ‰ç¼ºç‚¹å—ï¼Ÿä½ æ˜¯å¦çŸ¥é“å…¶ä»–æ›¿ä»£å“ï¼Œä»¥åŠä¸ºä½•ä½¿ç”¨å®ƒä»¬ï¼Ÿ</li>
<li>è¯·è§£é‡Šä»€ä¹ˆæ˜¯å•é¡µåº”ç”¨ (single page app), ä»¥åŠå¦‚ä½•ä½¿å…¶å¯¹æœç´¢å¼•æ“å‹å¥½ (SEO-friendly)ã€‚</li>
<li>What is the extent of your experience with Promises and/or their polyfills?</li>
<li>ä½¿ç”¨ Promises è€Œéå›è°ƒ (callbacks) ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä½¿ç”¨ä¸€ç§å¯ä»¥ç¼–è¯‘æˆ JavaScript çš„è¯­è¨€æ¥å†™ JavaScript ä»£ç æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ</li>
<li>ä½ ä½¿ç”¨å“ªäº›å·¥å…·å’ŒæŠ€æœ¯æ¥è°ƒè¯• JavaScript ä»£ç ï¼Ÿ</li>
<li>ä½ ä¼šä½¿ç”¨æ€æ ·çš„è¯­è¨€ç»“æ„æ¥éå†å¯¹è±¡å±æ€§ (object properties) å’Œæ•°ç»„å†…å®¹ï¼Ÿ</li>
<li>è¯·è§£é‡Šå¯å˜ (mutable) å’Œä¸å˜ (immutable) å¯¹è±¡çš„åŒºåˆ«ã€‚<ul>
<li>è¯·ä¸¾å‡º JavaScript ä¸­ä¸€ä¸ªä¸å˜æ€§å¯¹è±¡ (immutable object) çš„ä¾‹å­ï¼Ÿ</li>
<li>ä¸å˜æ€§ (immutability) æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ</li>
<li>å¦‚ä½•ç”¨ä½ è‡ªå·±çš„ä»£ç æ¥å®ç°ä¸å˜æ€§ (immutability)ï¼Ÿ</li>
</ul>
</li>
<li>è¯·è§£é‡ŠåŒæ­¥ (synchronous) å’Œå¼‚æ­¥ (asynchronous) å‡½æ•°çš„åŒºåˆ«ã€‚</li>
<li>ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ (event loop)ï¼Ÿ<ul>
<li>è¯·é—®è°ƒç”¨æ ˆ (call stack) å’Œä»»åŠ¡é˜Ÿåˆ— (task queue) çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
</li>
<li>è§£é‡Š <code>function foo() {}</code> ä¸ <code>var foo = function() {}</code> ç”¨æ³•çš„åŒºåˆ«</li>
</ul>
<h4 id="æµ‹è¯•ç›¸å…³é—®é¢˜ï¼š"><a href="#æµ‹è¯•ç›¸å…³é—®é¢˜ï¼š" class="headerlink" title="æµ‹è¯•ç›¸å…³é—®é¢˜ï¼š"></a>æµ‹è¯•ç›¸å…³é—®é¢˜ï¼š</h4><ul>
<li>å¯¹ä»£ç è¿›è¡Œæµ‹è¯•çš„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ</li>
<li>ä½ ä¼šç”¨ä»€ä¹ˆå·¥å…·æµ‹è¯•ä½ çš„ä»£ç åŠŸèƒ½ï¼Ÿ</li>
<li>å•å…ƒæµ‹è¯•ä¸åŠŸèƒ½/é›†æˆæµ‹è¯•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä»£ç é£æ ¼ linting å·¥å…·çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<h4 id="æ•ˆèƒ½ç›¸å…³é—®é¢˜ï¼š"><a href="#æ•ˆèƒ½ç›¸å…³é—®é¢˜ï¼š" class="headerlink" title="æ•ˆèƒ½ç›¸å…³é—®é¢˜ï¼š"></a>æ•ˆèƒ½ç›¸å…³é—®é¢˜ï¼š</h4><ul>
<li>ä½ ä¼šç”¨ä»€ä¹ˆå·¥å…·æ¥æŸ¥æ‰¾ä»£ç ä¸­çš„æ€§èƒ½é—®é¢˜ï¼Ÿ</li>
<li>ä½ ä¼šç”¨ä»€ä¹ˆæ–¹å¼æ¥å¢å¼ºç½‘ç«™çš„é¡µé¢æ»šåŠ¨æ•ˆèƒ½ï¼Ÿ</li>
<li>è¯·è§£é‡Š layoutã€painting å’Œ compositing çš„åŒºåˆ«ã€‚</li>
</ul>
<h4 id="ç½‘ç»œç›¸å…³é—®é¢˜ï¼š"><a href="#ç½‘ç»œç›¸å…³é—®é¢˜ï¼š" class="headerlink" title="ç½‘ç»œç›¸å…³é—®é¢˜ï¼š"></a>ç½‘ç»œç›¸å…³é—®é¢˜ï¼š</h4><ul>
<li>ä¸ºä»€ä¹ˆä¼ ç»Ÿä¸Šåˆ©ç”¨å¤šä¸ªåŸŸåæ¥æä¾›ç½‘ç«™èµ„æºä¼šæ›´æœ‰æ•ˆï¼Ÿ</li>
<li>è¯·å°½å¯èƒ½å®Œæ•´å¾—æè¿°ä»è¾“å…¥ URL åˆ°æ•´ä¸ªç½‘é¡µåŠ è½½å®Œæ¯•åŠæ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ•´ä¸ªæµç¨‹ã€‚</li>
<li>Long-Pollingã€Websockets å’Œ Server-Sent Event ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li>
<li>è¯·æè¿°ä»¥ä¸‹ request å’Œ response headersï¼š<ul>
<li>Diff. between Expires, Date, Age and If-Modified-â€¦</li>
<li>Do Not Track</li>
<li>Cache-Control</li>
<li>Transfer-Encoding</li>
<li>ETag</li>
<li>X-Frame-Options</li>
</ul>
</li>
<li>ä»€ä¹ˆæ˜¯ HTTP methodï¼Ÿè¯·ç½—åˆ—å‡ºä½ æ‰€çŸ¥é“çš„æ‰€æœ‰ HTTP methodï¼Œå¹¶ç»™å‡ºè§£é‡Šã€‚</li>
</ul>
<h4 id="ä»£ç ç›¸å…³çš„é—®é¢˜ï¼š"><a href="#ä»£ç ç›¸å…³çš„é—®é¢˜ï¼š" class="headerlink" title="ä»£ç ç›¸å…³çš„é—®é¢˜ï¼š"></a>ä»£ç ç›¸å…³çš„é—®é¢˜ï¼š</h4><p><em>é—®é¢˜ï¼š<code>foo</code>çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</em></p>
<pre><code class="javascript">var foo = 10 + &#39;20&#39;;
</code></pre>
<p><em>é—®é¢˜ï¼šå¦‚ä½•å®ç°ä»¥ä¸‹å‡½æ•°ï¼Ÿ</em></p>
<pre><code class="javascript">add(2, 5); // 7
add(2)(5); // 7
</code></pre>
<p><em>é—®é¢˜ï¼šä¸‹é¢çš„è¯­å¥çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</em></p>
<pre><code class="javascript">&quot;i&#39;m a lasagna hog&quot;.split(&quot;&quot;).reverse().join(&quot;&quot;);
</code></pre>
<p><em>é—®é¢˜ï¼š<code>window.foo</code>çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</em></p>
<pre><code class="javascript">( window.foo || ( window.foo = &quot;bar&quot; ) );
</code></pre>
<p><em>é—®é¢˜ï¼šä¸‹é¢ä¸¤ä¸ª alert çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</em></p>
<pre><code class="javascript">var foo = &quot;Hello&quot;;
(function() {
  var bar = &quot; World&quot;;
  alert(foo + bar);
})();
alert(foo + bar);
</code></pre>
<p><em>é—®é¢˜ï¼š<code>foo.length</code>çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</em></p>
<pre><code class="javascript">var foo = [];
foo.push(1);
foo.push(2);
</code></pre>
<p><em>é—®é¢˜ï¼š<code>foo.x</code>çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</em></p>
<pre><code class="javascript">var foo = {n: 1};
var bar = foo;
foo.x = foo = {n: 2};
</code></pre>
<p><em>é—®é¢˜ï¼šä¸‹é¢ä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</em></p>
<pre><code class="javascript">console.log(&#39;one&#39;);
setTimeout(function() {
  console.log(&#39;two&#39;);
}, 0);
console.log(&#39;three&#39;);
</code></pre>
<h4 id="è¶£å‘³é—®é¢˜ï¼š"><a href="#è¶£å‘³é—®é¢˜ï¼š" class="headerlink" title="è¶£å‘³é—®é¢˜ï¼š"></a>è¶£å‘³é—®é¢˜ï¼š</h4><ul>
<li>ä½ æœ€è¿‘å†™è¿‡ä»€ä¹ˆçš„å¾ˆé…·çš„é¡¹ç›®å—ï¼Ÿ</li>
<li>åœ¨ä½ ä½¿ç”¨çš„å¼€å‘å·¥å…·ä¸­ï¼Œæœ€å–œæ¬¢å“ªäº›æ–¹é¢ï¼Ÿ</li>
<li>è°ä½¿ä½ è¸è¶³äº†å‰ç«¯å¼€å‘é¢†åŸŸï¼Ÿ</li>
<li>ä½ æœ‰ä»€ä¹ˆä¸šä½™é¡¹ç›®å—ï¼Ÿæ˜¯å“ªç§ç±»å‹çš„ï¼Ÿ</li>
<li>ä½ æœ€çˆ±çš„ IE ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä½ å¯¹å’–å•¡æœ‰æ²¡æœ‰ä»€ä¹ˆå–œå¥½ï¼Ÿ</li>
</ul>
<h4 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h4><p>æœ¬æ–‡æ”¶é›†è‡ªç½‘ç»œï¼Œä¸ç”¨ä½œä»»ä½•å•†ä¸šç”¨é€”ï¼Œæ„Ÿè°¢è´¡çŒ®è€…ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‰ç«¯å·¥ä½œé¢è¯•é—®é¢˜&quot;&gt;&lt;a href=&quot;#å‰ç«¯å·¥ä½œé¢è¯•é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;å‰ç«¯å·¥ä½œé¢è¯•é—®é¢˜&quot;&gt;&lt;/a&gt;å‰ç«¯å·¥ä½œé¢è¯•é—®é¢˜&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡åŒ…å«äº†ä¸€äº›ç”¨äºè€ƒæŸ¥å€™é€‰è€…çš„å‰ç«¯é¢è¯•é—®é¢˜ã€‚ä¸å»ºè®®å¯¹å•ä¸ªå€™é€‰è€…é—®åŠæ¯ä¸ªé—®é¢˜ (é‚£éœ€è¦å¥½å‡ ä¸ªå°
    
    </summary>
    
    
      <category term="Web" scheme="https://microzz.com/tags/Web/"/>
    
      <category term="å‰ç«¯" scheme="https://microzz.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="é¢è¯•" scheme="https://microzz.com/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="æ±‚èŒ" scheme="https://microzz.com/tags/%E6%B1%82%E8%81%8C/"/>
    
  </entry>
  
  <entry>
    <title>JSæƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…</title>
    <link href="https://microzz.com/2017/02/23/lazy-func/"/>
    <id>https://microzz.com/2017/02/23/lazy-func/</id>
    <published>2017-02-23T06:55:16.000Z</published>
    <updated>2017-02-23T07:35:44.171Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JSæƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…"><a href="#JSæƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…" class="headerlink" title="JSæƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…"></a>JSæƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…</h1><h2 id="JavaScriptæƒ°æ€§å‡½æ•°"><a href="#JavaScriptæƒ°æ€§å‡½æ•°" class="headerlink" title="JavaScriptæƒ°æ€§å‡½æ•°"></a>JavaScriptæƒ°æ€§å‡½æ•°</h2><blockquote>
<p>&nbsp;&nbsp;&nbsp;æƒ°æ€§å‡½æ•°ï¼Œå³åªåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œåå†è°ƒç”¨å¾—åˆ°çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚è¿™å¯¹äºå‰ç«¯æ€§èƒ½ä¼˜åŒ–æœ‰ä¸€å®šçš„å¸®åŠ©ï¼Œæœ‰åŠ©äºå¼€å‘å¥å£®çš„é¡¹ç›®ã€‚</p>
</blockquote>
<h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><blockquote>
<p>&nbsp;&nbsp;&nbsp;AJAXå³â€œAsynchronous Javascript And XMLâ€ï¼ˆå¼‚æ­¥JavaScriptå’ŒXMLï¼‰ï¼Œæ˜¯æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚<br>AJAX = å¼‚æ­¥ JavaScriptå’ŒXMLã€‚<br>é€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢ï¼ŒAJAX å¯ä»¥ä½¿ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚</p>
</blockquote>
<h2 id="æƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…"><a href="#æƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…" class="headerlink" title="æƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…"></a>æƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…</h2><pre><code class="javascript">/**
 * æƒ°æ€§å‡½æ•°
 */
function createXHR() {
  var xhr = null;
  if ( typeof XMLHttpRequest !== &#39;undefined&#39;) {
    xhr = new XMLHttpRequest();
    createXHR = function () {
      return new XMLHttpRequest();
    };
  } else {
    try {
      xhr = new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);
      createXHR = function () {
        return new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);
      };
    } catch (e) {
      try {
        xhr = new ActiveXObject(&#39;Microsoft.XMLHTTP&#39;);
        createXHR = function () {
          return ActiveXObject(&#39;Microsoft.XMLHTTP&#39;);
        };
      } catch (e) {
        createXHR = function () {
          return null;
        }
      }
    }
  }
  return xhr;
}
</code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JSæƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…&quot;&gt;&lt;a href=&quot;#JSæƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…&quot; class=&quot;headerlink&quot; title=&quot;JSæƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…&quot;&gt;&lt;/a&gt;JSæƒ°æ€§å‡½æ•°å®ç°Ajaxå°è£…&lt;/h1&gt;&lt;h2 id=&quot;JavaScriptæƒ°æ€§å‡½æ•°&quot;&gt;&lt;
    
    </summary>
    
    
      <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://microzz.com/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="Function" scheme="https://microzz.com/tags/Function/"/>
    
      <category term="Ajax" scheme="https://microzz.com/tags/Ajax/"/>
    
  </entry>
  
  <entry>
    <title>åŸç”ŸJSå®ç°è½®æ’­å›¾</title>
    <link href="https://microzz.com/2017/02/22/carousel/"/>
    <id>https://microzz.com/2017/02/22/carousel/</id>
    <published>2017-02-22T02:05:02.000Z</published>
    <updated>2017-04-04T14:38:59.446Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸç”ŸJSå®ç°è½®æ’­å›¾"><a href="#åŸç”ŸJSå®ç°è½®æ’­å›¾" class="headerlink" title="åŸç”ŸJSå®ç°è½®æ’­å›¾"></a>åŸç”ŸJSå®ç°è½®æ’­å›¾</h1><h2 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h2><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170222_carousel/preview.gif" alt="åŸç”ŸJSå®ç°å®šæ—¶è‡ªåŠ¨åˆ‡æ¢è½®æ’­å›¾" title="">
                </div>
                <div class="image-caption">åŸç”ŸJSå®ç°å®šæ—¶è‡ªåŠ¨åˆ‡æ¢è½®æ’­å›¾</div>
            </figure>
<h2 id="åœ¨çº¿é¢„è§ˆ"><a href="#åœ¨çº¿é¢„è§ˆ" class="headerlink" title="åœ¨çº¿é¢„è§ˆ"></a>åœ¨çº¿é¢„è§ˆ</h2><h3 id="åœ¨çº¿é¢„è§ˆåœ°å€1"><a href="#åœ¨çº¿é¢„è§ˆåœ°å€1" class="headerlink" title="åœ¨çº¿é¢„è§ˆåœ°å€1"></a>åœ¨çº¿é¢„è§ˆåœ°å€1</h3><p> ğŸ”—<a href="http://microzz.cn/Carousel/" target="_blank" rel="external">http://microzz.cn/Carousel/</a></p>
<h3 id="åœ¨çº¿é¢„è§ˆåœ°å€2"><a href="#åœ¨çº¿é¢„è§ˆåœ°å€2" class="headerlink" title="åœ¨çº¿é¢„è§ˆåœ°å€2"></a>åœ¨çº¿é¢„è§ˆåœ°å€2</h3><p> ğŸ”—<a href="https://microzz.github.io/carousel/" target="_blank" rel="external">https://microzz.github.io/carousel/</a></p>
<h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><p>æºä»£ç åœ°å€ï¼šğŸ”—<a href="https://github.com/microzz/carousel" target="_blank" rel="external">https://github.com/microzz/carousel</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;åŸç”ŸJSå®ç°è½®æ’­å›¾&quot;&gt;&lt;a href=&quot;#åŸç”ŸJSå®ç°è½®æ’­å›¾&quot; class=&quot;headerlink&quot; title=&quot;åŸç”ŸJSå®ç°è½®æ’­å›¾&quot;&gt;&lt;/a&gt;åŸç”ŸJSå®ç°è½®æ’­å›¾&lt;/h1&gt;&lt;h2 id=&quot;æ•ˆæœå›¾&quot;&gt;&lt;a href=&quot;#æ•ˆæœå›¾&quot; class=&quot;headerlink
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="Carousel" scheme="https://microzz.com/tags/Carousel/"/>
    
  </entry>
  
  <entry>
    <title>React.JSå­¦ä¹ æ€ç»´å¯¼å›¾</title>
    <link href="https://microzz.com/2017/02/21/react-mind-map/"/>
    <id>https://microzz.com/2017/02/21/react-mind-map/</id>
    <published>2017-02-21T13:41:34.000Z</published>
    <updated>2017-03-31T08:16:54.550Z</updated>
    
    <content type="html"><![CDATA[<h1 id="React-JSå­¦ä¹ æ€ç»´å¯¼å›¾"><a href="#React-JSå­¦ä¹ æ€ç»´å¯¼å›¾" class="headerlink" title="React.JSå­¦ä¹ æ€ç»´å¯¼å›¾"></a>React.JSå­¦ä¹ æ€ç»´å¯¼å›¾</h1><h2 id="ReactJSç®€ä»‹"><a href="#ReactJSç®€ä»‹" class="headerlink" title="ReactJSç®€ä»‹"></a>ReactJSç®€ä»‹</h2><p>React æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JAVASCRIPT åº“ã€‚<br>Reactä¸»è¦ç”¨äºæ„å»ºUIï¼Œå¾ˆå¤šäººè®¤ä¸º React æ˜¯ MVC ä¸­çš„ Vï¼ˆè§†å›¾ï¼‰ã€‚<br>React èµ·æºäº Facebook çš„å†…éƒ¨é¡¹ç›®ï¼Œç”¨æ¥æ¶è®¾ Instagram çš„ç½‘ç«™ï¼Œå¹¶äº 2013 å¹´ 5 æœˆå¼€æºã€‚<br>React æ‹¥æœ‰è¾ƒé«˜çš„æ€§èƒ½ï¼Œä»£ç é€»è¾‘éå¸¸ç®€å•ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå·²å¼€å§‹å…³æ³¨å’Œä½¿ç”¨å®ƒã€‚</p>
<h2 id="æ€ç»´å¯¼å›¾"><a href="#æ€ç»´å¯¼å›¾" class="headerlink" title="æ€ç»´å¯¼å›¾"></a>æ€ç»´å¯¼å›¾</h2><h3 id="åœ¨çº¿é¢„è§ˆåœ°å€"><a href="#åœ¨çº¿é¢„è§ˆåœ°å€" class="headerlink" title="åœ¨çº¿é¢„è§ˆåœ°å€"></a>åœ¨çº¿é¢„è§ˆåœ°å€</h3><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://icdn.microzz.com/20170221_react_mind_map/mind-map-for-react.png" alt="mind" title="">
                </div>
                <div class="image-caption">mind</div>
            </figure>
<h3 id="æºæ–‡ä»¶"><a href="#æºæ–‡ä»¶" class="headerlink" title="æºæ–‡ä»¶"></a>æºæ–‡ä»¶</h3><p><a href="https://github.com/microzz/mind-map-for-react" target="_blank" rel="external">React.JSå­¦ä¹ æ€ç»´å¯¼å›¾</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;React-JSå­¦ä¹ æ€ç»´å¯¼å›¾&quot;&gt;&lt;a href=&quot;#React-JSå­¦ä¹ æ€ç»´å¯¼å›¾&quot; class=&quot;headerlink&quot; title=&quot;React.JSå­¦ä¹ æ€ç»´å¯¼å›¾&quot;&gt;&lt;/a&gt;React.JSå­¦ä¹ æ€ç»´å¯¼å›¾&lt;/h1&gt;&lt;h2 id=&quot;ReactJSç®€ä»‹&quot;&gt;&lt;a hre
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="ReactJS" scheme="https://microzz.com/tags/ReactJS/"/>
    
  </entry>
  
  <entry>
    <title>jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€</title>
    <link href="https://microzz.com/2017/02/20/waterfalljq/"/>
    <id>https://microzz.com/2017/02/20/waterfalljq/</id>
    <published>2017-02-20T13:42:02.000Z</published>
    <updated>2017-02-20T14:05:07.389Z</updated>
    
    <content type="html"><![CDATA[<h1 id="jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€"><a href="#jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€" class="headerlink" title="jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€"></a>jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€</h1><h2 id="ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ"><a href="#ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ" class="headerlink" title="ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ"></a>ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ</h2><p>ç€‘å¸ƒæµï¼Œåˆç§°ç€‘å¸ƒæµå¼å¸ƒå±€ã€‚æ˜¯æ¯”è¾ƒæµè¡Œçš„ä¸€ç§ç½‘ç«™é¡µé¢å¸ƒå±€ï¼Œè§†è§‰è¡¨ç°ä¸ºå‚å·®ä¸é½çš„å¤šæ å¸ƒå±€ï¼Œéšç€é¡µé¢æ»šåŠ¨æ¡å‘ä¸‹æ»šåŠ¨ï¼Œè¿™ç§å¸ƒå±€è¿˜ä¼šä¸æ–­åŠ è½½æ•°æ®å—å¹¶é™„åŠ è‡³å½“å‰å°¾éƒ¨ã€‚æœ€æ—©é‡‡ç”¨æ­¤å¸ƒå±€çš„ç½‘ç«™æ˜¯Pinterestï¼Œé€æ¸åœ¨å›½å†…æµè¡Œå¼€æ¥ã€‚å›½å†…å¤§å¤šæ•°æ¸…æ–°ç«™åŸºæœ¬ä¸ºè¿™ç±»é£æ ¼ã€‚</p>
<h2 id="ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹"><a href="#ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹" class="headerlink" title="ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹"></a>ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹</h2><ol>
<li>ç³ç…æ»¡ç›®ï¼šæ•´ç‰ˆä»¥å›¾ç‰‡ä¸ºä¸»ï¼Œå¤§å°ä¸ä¸€çš„å›¾ç‰‡æŒ‰ç…§ä¸€å®šçš„è§„å¾‹æ’åˆ—ã€‚</li>
<li>å”¯ç¾ï¼šå›¾ç‰‡çš„é£æ ¼ä»¥å”¯ç¾çš„å›¾ç‰‡ä¸ºä¸»ã€‚</li>
<li>æ“ä½œç®€å•ï¼šåœ¨æµè§ˆç½‘ç«™çš„æ—¶å€™åªéœ€è¦è½»è½»æ»‘åŠ¨ä¸€ä¸‹é¼ æ ‡æ»šè½®ï¼Œä¸€åˆ‡çš„ç¾å¦™çš„å›¾ç‰‡ç²¾å½©ä¾¿å¯å‘ˆç°åœ¨ä½ é¢å‰ã€‚</li>
</ol>
<h2 id="æ•ˆæœé¢„è§ˆ"><a href="#æ•ˆæœé¢„è§ˆ" class="headerlink" title="æ•ˆæœé¢„è§ˆ"></a>æ•ˆæœé¢„è§ˆ</h2><p> åœ¨çº¿é¢„è§ˆåœ°å€1ï¼š ğŸ”—<a href="http://microzz.cn/waterfall-jq/" target="_blank" rel="external">http://microzz.cn/waterfall-jq/</a><br> åœ¨çº¿é¢„è§ˆåœ°å€2ï¼š ğŸ”—<a href="https://microzz.github.io/waterfall-jq/" target="_blank" rel="external">https://microzz.github.io/waterfall-jq/</a></p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>æºä»£ç åœ°å€ï¼šğŸ”—<a href="https://github.com/microzz/waterfall-jq" target="_blank" rel="external">https://github.com/microzz/waterfall-jq</a></p>
<h2 id="ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹"><a href="#ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹" class="headerlink" title="ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹"></a>ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹</h2><h3 id="å¸ƒå±€ä¼˜ç‚¹"><a href="#å¸ƒå±€ä¼˜ç‚¹" class="headerlink" title="å¸ƒå±€ä¼˜ç‚¹"></a>å¸ƒå±€ä¼˜ç‚¹</h3><ol>
<li>æœ‰æ•ˆçš„é™ä½äº†ç•Œé¢å¤æ‚åº¦ï¼ŒèŠ‚çœäº†ç©ºé—´ï¼šæˆ‘ä»¬ä¸å†éœ€è¦è‡ƒè‚¿å¤æ‚çš„é¡µç å¯¼èˆªé“¾æ¥æˆ–æŒ‰é’®äº†ã€‚</li>
<li>å¯¹è§¦å±è®¾å¤‡æ¥è¯´ï¼Œäº¤äº’æ–¹å¼æ›´ç¬¦åˆç›´è§‰ï¼šåœ¨ç§»åŠ¨åº”ç”¨çš„äº¤äº’ç¯å¢ƒå½“ä¸­ï¼Œé€šè¿‡å‘ä¸Šæ»‘åŠ¨è¿›è¡Œæ»šå±çš„æ“ä½œå·²ç»æˆä¸ºæœ€åŸºæœ¬çš„ç”¨æˆ·ä¹ æƒ¯ï¼Œè€Œä¸”æ‰€éœ€è¦çš„æ“ä½œç²¾å‡†ç¨‹åº¦è¿œè¿œä½äºç‚¹å‡»é“¾æ¥æˆ–æŒ‰é’®ã€‚</li>
<li>æ›´é«˜çš„å‚ä¸åº¦ï¼šä»¥ä¸Šä¸¤ç‚¹æ‰€å¸¦æ¥çš„äº¤äº’ä¾¿æ·æ€§å¯ä»¥ä½¿ç”¨æˆ·å°†æ³¨æ„åŠ›æ›´å¤šçš„é›†ä¸­åœ¨å†…å®¹è€Œä¸æ˜¯æ“ä½œä¸Šï¼Œä»è€Œè®©ä»–ä»¬æ›´ä¹äºæ²‰æµ¸åœ¨æ¢ç´¢ä¸æµè§ˆå½“ä¸­ã€‚<h3 id="å¸ƒå±€ç¼ºç‚¹"><a href="#å¸ƒå±€ç¼ºç‚¹" class="headerlink" title="å¸ƒå±€ç¼ºç‚¹"></a>å¸ƒå±€ç¼ºç‚¹</h3></li>
<li>æœ‰é™çš„ç”¨ä¾‹ï¼š<br>æ— é™æ»šåŠ¨çš„æ–¹å¼åªé€‚ç”¨äºæŸäº›ç‰¹å®šç±»å‹äº§å“å½“ä¸­ä¸€éƒ¨åˆ†ç‰¹å®šç±»å‹çš„å†…å®¹ã€‚<br>ä¾‹å¦‚ï¼Œåœ¨ç”µå•†ç½‘ç«™å½“ä¸­ï¼Œç”¨æˆ·æ—¶å¸¸éœ€è¦åœ¨å•†å“åˆ—è¡¨ä¸è¯¦æƒ…é¡µé¢ä¹‹é—´åˆ‡æ¢ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¼ ç»Ÿçš„ã€å¸¦æœ‰é¡µç å¯¼èˆªçš„æ–¹å¼å¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´ç¨³å¦¥å’Œå‡†ç¡®çš„å›åˆ°æŸä¸ªç‰¹å®šçš„åˆ—è¡¨é¡µé¢å½“ä¸­ã€‚</li>
<li>é¢å¤–çš„å¤æ‚åº¦ï¼š<br>é‚£äº›ç”¨æ¥æ‰“é€ æ— é™æ»šåŠ¨çš„JSåº“è™½ç„¶éƒ½è‡ªç§°å¾ˆå®¹æ˜“ä½¿ç”¨ï¼Œä½†ä½ æ€»ä¼šéœ€è¦åœ¨è‡ªå·±çš„äº§å“ä¸­è¿›è¡Œä¸åŒç¨‹åº¦çš„å®šåˆ¶åŒ–å¤„ç†ï¼Œä»¥æ»¡è¶³ä½ ä»¬è‡ªå·±çš„éœ€æ±‚;å¦å¤–è¿™äº›JSåº“åœ¨æµè§ˆå™¨å’Œè®¾å¤‡å…¼å®¹æ€§ç­‰æ–¹é¢çš„è¡¨ç°ä¹Ÿå‚å·®ä¸é½ï¼Œä½ å¿…é¡»åšå¥½å……åˆ†çš„æµ‹è¯•ä¸è°ƒæ•´å·¥ä½œã€‚</li>
<li>å†è§äº†ï¼Œé¡µè„šï¼š<br>å¦‚æœä½¿ç”¨äº†æ¯”è¾ƒå…¸å‹çš„æ— é™æ»šåŠ¨åŠ è½½æ¨¡å¼ï¼Œè¿™å°±æ„å‘³ç€ä½ å¯ä»¥å’Œé¡µè„šè¯´æ‹œæ‹œäº†ã€‚<br>æœ€å¥½è€ƒè™‘ä¸€ä¸‹é¡µè„šå¯¹äºä½ çš„ç½‘ç«™ï¼Œç‰¹åˆ«æ˜¯ç”¨æˆ·çš„é‡è¦æ€§;å¦‚æœå…¶ä¸­ç¡®å®æœ‰æ¯”è¾ƒé‡è¦çš„å†…å®¹æˆ–é“¾æ¥ï¼Œé‚£ä¹ˆæœ€å¥½æ¢ä¸€ç§æ›´ä¼ ç»Ÿå’Œç¨³å¦¥çš„æ–¹å¼ã€‚<br>åƒä¸‡ä¸è¦è€å¼„ä½ çš„ç”¨æˆ·ï¼Œå½“ä»–ä»¬ä¸€æ¬¡æ¬¡çš„æµè§ˆåˆ°é¡µé¢åº•éƒ¨ï¼Œçœ‹åˆ°é¡µè„šï¼Œå´å› ä¸ºè‡ªåŠ¨åŠ è½½çš„å†…å®¹çªç„¶å‡ºç°è€Œæ— è®ºå¦‚ä½•éƒ½æ— æ³•ç‚¹å‡»é¡µè„šä¸­çš„é“¾æ¥æ—¶ï¼Œä»–ä»¬ä¼šå˜çš„è¶Šå‘æ„¤æ€’ã€‚</li>
<li>SEOï¼š<br>é›†ä¸­åœ¨ä¸€é¡µå½“ä¸­åŠ¨æ€åŠ è½½æ•°æ®ï¼Œä¸ä¸€é¡µä¸€é¡µçš„è¾“å‡ºç›¸æ¯”ï¼Œç©¶ç«Ÿé‚£ç§æ–¹å¼æ›´åˆ©äºSEOï¼Œè¿™æ˜¯ä½ å¿…é¡»è€ƒè™‘çš„é—®é¢˜ã€‚å¯¹äºæŸäº›ä»¥ç±»å‹ç½‘ç«™æ¥è¯´ï¼Œåœ¨è¿™æ–¹é¢è¿›è¡Œå†’é™©æ˜¯å¾ˆä¸åˆ’ç®—çš„ã€‚</li>
<li>å…³äºé¡µé¢æ•°é‡çš„å°è±¡ï¼š<br>å…¶å®ç«™åœ¨ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸€ç‚¹å¹¶éè´Ÿé¢;ä¸è¿‡ï¼Œå¦‚æœå¯¹äºä½ çš„ç½‘ç«™æ¥è¯´ï¼Œé€šè¿‡æ›´å¤šçš„å†…å®¹é¡µé¢å±•ç¤ºæ›´å¤šçš„ç›¸å…³ä¿¡æ¯(åŒ…æ‹¬å¹¿å‘Š)æ˜¯å¾ˆé‡è¦çš„ç­–ç•¥ï¼Œé‚£ä¹ˆå•é¡µæ— é™æ»šåŠ¨çš„æ–¹å¼å¯¹ä½ å¹¶ä¸é€‚ç”¨ã€‚</li>
</ol>
<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><p> <a href="https://microzz.com/2017/02/17/waterfalljs/">åŸç”ŸJavaScriptå®ç°ç€‘å¸ƒæµå¸ƒå±€</a><br> <a href="https://microzz.com/2017/02/19/waterfallcss3/">CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€&quot;&gt;&lt;a href=&quot;#jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€&quot; class=&quot;headerlink&quot; title=&quot;jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€&quot;&gt;&lt;/a&gt;jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€&lt;/h1&gt;&lt;h2 id=&quot;ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ&quot;&gt;&lt;a h
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="waterfall" scheme="https://microzz.com/tags/waterfall/"/>
    
      <category term="ç€‘å¸ƒæµ" scheme="https://microzz.com/tags/%E7%80%91%E5%B8%83%E6%B5%81/"/>
    
      <category term="jQuery" scheme="https://microzz.com/tags/jQuery/"/>
    
  </entry>
  
  <entry>
    <title>CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€</title>
    <link href="https://microzz.com/2017/02/19/waterfallcss3/"/>
    <id>https://microzz.com/2017/02/19/waterfallcss3/</id>
    <published>2017-02-19T11:30:02.000Z</published>
    <updated>2017-02-20T14:10:38.467Z</updated>
    
    <content type="html"><![CDATA[<h1 id="CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€"><a href="#CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€" class="headerlink" title="CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€"></a>CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€</h1><h2 id="ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ"><a href="#ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ" class="headerlink" title="ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ"></a>ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ</h2><p>ç€‘å¸ƒæµï¼Œåˆç§°ç€‘å¸ƒæµå¼å¸ƒå±€ã€‚æ˜¯æ¯”è¾ƒæµè¡Œçš„ä¸€ç§ç½‘ç«™é¡µé¢å¸ƒå±€ï¼Œè§†è§‰è¡¨ç°ä¸ºå‚å·®ä¸é½çš„å¤šæ å¸ƒå±€ï¼Œéšç€é¡µé¢æ»šåŠ¨æ¡å‘ä¸‹æ»šåŠ¨ï¼Œè¿™ç§å¸ƒå±€è¿˜ä¼šä¸æ–­åŠ è½½æ•°æ®å—å¹¶é™„åŠ è‡³å½“å‰å°¾éƒ¨ã€‚æœ€æ—©é‡‡ç”¨æ­¤å¸ƒå±€çš„ç½‘ç«™æ˜¯Pinterestï¼Œé€æ¸åœ¨å›½å†…æµè¡Œå¼€æ¥ã€‚å›½å†…å¤§å¤šæ•°æ¸…æ–°ç«™åŸºæœ¬ä¸ºè¿™ç±»é£æ ¼ã€‚</p>
<h2 id="ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹"><a href="#ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹" class="headerlink" title="ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹"></a>ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹</h2><ol>
<li>ç³ç…æ»¡ç›®ï¼šæ•´ç‰ˆä»¥å›¾ç‰‡ä¸ºä¸»ï¼Œå¤§å°ä¸ä¸€çš„å›¾ç‰‡æŒ‰ç…§ä¸€å®šçš„è§„å¾‹æ’åˆ—ã€‚</li>
<li>å”¯ç¾ï¼šå›¾ç‰‡çš„é£æ ¼ä»¥å”¯ç¾çš„å›¾ç‰‡ä¸ºä¸»ã€‚</li>
<li>æ“ä½œç®€å•ï¼šåœ¨æµè§ˆç½‘ç«™çš„æ—¶å€™åªéœ€è¦è½»è½»æ»‘åŠ¨ä¸€ä¸‹é¼ æ ‡æ»šè½®ï¼Œä¸€åˆ‡çš„ç¾å¦™çš„å›¾ç‰‡ç²¾å½©ä¾¿å¯å‘ˆç°åœ¨ä½ é¢å‰ã€‚</li>
</ol>
<h2 id="æ•ˆæœé¢„è§ˆ"><a href="#æ•ˆæœé¢„è§ˆ" class="headerlink" title="æ•ˆæœé¢„è§ˆ"></a>æ•ˆæœé¢„è§ˆ</h2><p> åœ¨çº¿é¢„è§ˆåœ°å€1ï¼š ğŸ”—<a href="http://microzz.cn/waterfall-css3/" target="_blank" rel="external">http://microzz.cn/waterfall-css3/</a><br> åœ¨çº¿é¢„è§ˆåœ°å€2ï¼š ğŸ”—<a href="https://microzz.github.io/waterfall-css3/" target="_blank" rel="external">https://microzz.github.io/waterfall-css3/</a></p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>æºä»£ç åœ°å€ï¼šğŸ”—<a href="https://github.com/microzz/waterfall-css3" target="_blank" rel="external">https://github.com/microzz/waterfall-css3</a></p>
<h2 id="ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹"><a href="#ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹" class="headerlink" title="ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹"></a>ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹</h2><h3 id="å¸ƒå±€ä¼˜ç‚¹"><a href="#å¸ƒå±€ä¼˜ç‚¹" class="headerlink" title="å¸ƒå±€ä¼˜ç‚¹"></a>å¸ƒå±€ä¼˜ç‚¹</h3><ol>
<li>æœ‰æ•ˆçš„é™ä½äº†ç•Œé¢å¤æ‚åº¦ï¼ŒèŠ‚çœäº†ç©ºé—´ï¼šæˆ‘ä»¬ä¸å†éœ€è¦è‡ƒè‚¿å¤æ‚çš„é¡µç å¯¼èˆªé“¾æ¥æˆ–æŒ‰é’®äº†ã€‚</li>
<li>å¯¹è§¦å±è®¾å¤‡æ¥è¯´ï¼Œäº¤äº’æ–¹å¼æ›´ç¬¦åˆç›´è§‰ï¼šåœ¨ç§»åŠ¨åº”ç”¨çš„äº¤äº’ç¯å¢ƒå½“ä¸­ï¼Œé€šè¿‡å‘ä¸Šæ»‘åŠ¨è¿›è¡Œæ»šå±çš„æ“ä½œå·²ç»æˆä¸ºæœ€åŸºæœ¬çš„ç”¨æˆ·ä¹ æƒ¯ï¼Œè€Œä¸”æ‰€éœ€è¦çš„æ“ä½œç²¾å‡†ç¨‹åº¦è¿œè¿œä½äºç‚¹å‡»é“¾æ¥æˆ–æŒ‰é’®ã€‚</li>
<li>æ›´é«˜çš„å‚ä¸åº¦ï¼šä»¥ä¸Šä¸¤ç‚¹æ‰€å¸¦æ¥çš„äº¤äº’ä¾¿æ·æ€§å¯ä»¥ä½¿ç”¨æˆ·å°†æ³¨æ„åŠ›æ›´å¤šçš„é›†ä¸­åœ¨å†…å®¹è€Œä¸æ˜¯æ“ä½œä¸Šï¼Œä»è€Œè®©ä»–ä»¬æ›´ä¹äºæ²‰æµ¸åœ¨æ¢ç´¢ä¸æµè§ˆå½“ä¸­ã€‚<h3 id="å¸ƒå±€ç¼ºç‚¹"><a href="#å¸ƒå±€ç¼ºç‚¹" class="headerlink" title="å¸ƒå±€ç¼ºç‚¹"></a>å¸ƒå±€ç¼ºç‚¹</h3></li>
<li>æœ‰é™çš„ç”¨ä¾‹ï¼š<br>æ— é™æ»šåŠ¨çš„æ–¹å¼åªé€‚ç”¨äºæŸäº›ç‰¹å®šç±»å‹äº§å“å½“ä¸­ä¸€éƒ¨åˆ†ç‰¹å®šç±»å‹çš„å†…å®¹ã€‚<br>ä¾‹å¦‚ï¼Œåœ¨ç”µå•†ç½‘ç«™å½“ä¸­ï¼Œç”¨æˆ·æ—¶å¸¸éœ€è¦åœ¨å•†å“åˆ—è¡¨ä¸è¯¦æƒ…é¡µé¢ä¹‹é—´åˆ‡æ¢ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¼ ç»Ÿçš„ã€å¸¦æœ‰é¡µç å¯¼èˆªçš„æ–¹å¼å¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´ç¨³å¦¥å’Œå‡†ç¡®çš„å›åˆ°æŸä¸ªç‰¹å®šçš„åˆ—è¡¨é¡µé¢å½“ä¸­ã€‚</li>
<li>é¢å¤–çš„å¤æ‚åº¦ï¼š<br>é‚£äº›ç”¨æ¥æ‰“é€ æ— é™æ»šåŠ¨çš„JSåº“è™½ç„¶éƒ½è‡ªç§°å¾ˆå®¹æ˜“ä½¿ç”¨ï¼Œä½†ä½ æ€»ä¼šéœ€è¦åœ¨è‡ªå·±çš„äº§å“ä¸­è¿›è¡Œä¸åŒç¨‹åº¦çš„å®šåˆ¶åŒ–å¤„ç†ï¼Œä»¥æ»¡è¶³ä½ ä»¬è‡ªå·±çš„éœ€æ±‚;å¦å¤–è¿™äº›JSåº“åœ¨æµè§ˆå™¨å’Œè®¾å¤‡å…¼å®¹æ€§ç­‰æ–¹é¢çš„è¡¨ç°ä¹Ÿå‚å·®ä¸é½ï¼Œä½ å¿…é¡»åšå¥½å……åˆ†çš„æµ‹è¯•ä¸è°ƒæ•´å·¥ä½œã€‚</li>
<li>å†è§äº†ï¼Œé¡µè„šï¼š<br>å¦‚æœä½¿ç”¨äº†æ¯”è¾ƒå…¸å‹çš„æ— é™æ»šåŠ¨åŠ è½½æ¨¡å¼ï¼Œè¿™å°±æ„å‘³ç€ä½ å¯ä»¥å’Œé¡µè„šè¯´æ‹œæ‹œäº†ã€‚<br>æœ€å¥½è€ƒè™‘ä¸€ä¸‹é¡µè„šå¯¹äºä½ çš„ç½‘ç«™ï¼Œç‰¹åˆ«æ˜¯ç”¨æˆ·çš„é‡è¦æ€§;å¦‚æœå…¶ä¸­ç¡®å®æœ‰æ¯”è¾ƒé‡è¦çš„å†…å®¹æˆ–é“¾æ¥ï¼Œé‚£ä¹ˆæœ€å¥½æ¢ä¸€ç§æ›´ä¼ ç»Ÿå’Œç¨³å¦¥çš„æ–¹å¼ã€‚<br>åƒä¸‡ä¸è¦è€å¼„ä½ çš„ç”¨æˆ·ï¼Œå½“ä»–ä»¬ä¸€æ¬¡æ¬¡çš„æµè§ˆåˆ°é¡µé¢åº•éƒ¨ï¼Œçœ‹åˆ°é¡µè„šï¼Œå´å› ä¸ºè‡ªåŠ¨åŠ è½½çš„å†…å®¹çªç„¶å‡ºç°è€Œæ— è®ºå¦‚ä½•éƒ½æ— æ³•ç‚¹å‡»é¡µè„šä¸­çš„é“¾æ¥æ—¶ï¼Œä»–ä»¬ä¼šå˜çš„è¶Šå‘æ„¤æ€’ã€‚</li>
<li>SEOï¼š<br>é›†ä¸­åœ¨ä¸€é¡µå½“ä¸­åŠ¨æ€åŠ è½½æ•°æ®ï¼Œä¸ä¸€é¡µä¸€é¡µçš„è¾“å‡ºç›¸æ¯”ï¼Œç©¶ç«Ÿé‚£ç§æ–¹å¼æ›´åˆ©äºSEOï¼Œè¿™æ˜¯ä½ å¿…é¡»è€ƒè™‘çš„é—®é¢˜ã€‚å¯¹äºæŸäº›ä»¥ç±»å‹ç½‘ç«™æ¥è¯´ï¼Œåœ¨è¿™æ–¹é¢è¿›è¡Œå†’é™©æ˜¯å¾ˆä¸åˆ’ç®—çš„ã€‚</li>
<li>å…³äºé¡µé¢æ•°é‡çš„å°è±¡ï¼š<br>å…¶å®ç«™åœ¨ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸€ç‚¹å¹¶éè´Ÿé¢;ä¸è¿‡ï¼Œå¦‚æœå¯¹äºä½ çš„ç½‘ç«™æ¥è¯´ï¼Œé€šè¿‡æ›´å¤šçš„å†…å®¹é¡µé¢å±•ç¤ºæ›´å¤šçš„ç›¸å…³ä¿¡æ¯(åŒ…æ‹¬å¹¿å‘Š)æ˜¯å¾ˆé‡è¦çš„ç­–ç•¥ï¼Œé‚£ä¹ˆå•é¡µæ— é™æ»šåŠ¨çš„æ–¹å¼å¯¹ä½ å¹¶ä¸é€‚ç”¨ã€‚</li>
</ol>
<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><p> <a href="https://microzz.com/2017/02/17/waterfalljs/">åŸç”ŸJavaScriptå®ç°ç€‘å¸ƒæµå¸ƒå±€</a><br><a href="https://microzz.com/2017/02/20/waterfalljq/">jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€&quot;&gt;&lt;a href=&quot;#CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€&quot; class=&quot;headerlink&quot; title=&quot;CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€&quot;&gt;&lt;/a&gt;CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€&lt;/h1&gt;&lt;h2 id=&quot;ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#ç€‘å¸ƒ
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="CSS3" scheme="https://microzz.com/tags/CSS3/"/>
    
      <category term="waterfall" scheme="https://microzz.com/tags/waterfall/"/>
    
      <category term="ç€‘å¸ƒæµ" scheme="https://microzz.com/tags/%E7%80%91%E5%B8%83%E6%B5%81/"/>
    
  </entry>
  
  <entry>
    <title>åŸç”ŸJavaScriptå®ç°ç€‘å¸ƒæµå¸ƒå±€</title>
    <link href="https://microzz.com/2017/02/17/waterfalljs/"/>
    <id>https://microzz.com/2017/02/17/waterfalljs/</id>
    <published>2017-02-17T09:35:03.000Z</published>
    <updated>2017-02-20T14:11:36.712Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸç”ŸJavaScriptå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€"><a href="#åŸç”ŸJavaScriptå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€" class="headerlink" title="åŸç”ŸJavaScriptå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€"></a>åŸç”ŸJavaScriptå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€</h1><h2 id="ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ"><a href="#ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ" class="headerlink" title="ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ"></a>ç€‘å¸ƒæµå¸ƒå±€æ¦‚å¿µ</h2><p>ç€‘å¸ƒæµï¼Œåˆç§°ç€‘å¸ƒæµå¼å¸ƒå±€ã€‚æ˜¯æ¯”è¾ƒæµè¡Œçš„ä¸€ç§ç½‘ç«™é¡µé¢å¸ƒå±€ï¼Œè§†è§‰è¡¨ç°ä¸ºå‚å·®ä¸é½çš„å¤šæ å¸ƒå±€ï¼Œéšç€é¡µé¢æ»šåŠ¨æ¡å‘ä¸‹æ»šåŠ¨ï¼Œè¿™ç§å¸ƒå±€è¿˜ä¼šä¸æ–­åŠ è½½æ•°æ®å—å¹¶é™„åŠ è‡³å½“å‰å°¾éƒ¨ã€‚æœ€æ—©é‡‡ç”¨æ­¤å¸ƒå±€çš„ç½‘ç«™æ˜¯Pinterestï¼Œé€æ¸åœ¨å›½å†…æµè¡Œå¼€æ¥ã€‚å›½å†…å¤§å¤šæ•°æ¸…æ–°ç«™åŸºæœ¬ä¸ºè¿™ç±»é£æ ¼ã€‚</p>
<h2 id="ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹"><a href="#ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹" class="headerlink" title="ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹"></a>ç€‘å¸ƒæµå¸ƒå±€ç‰¹ç‚¹</h2><ol>
<li>ç³ç…æ»¡ç›®ï¼šæ•´ç‰ˆä»¥å›¾ç‰‡ä¸ºä¸»ï¼Œå¤§å°ä¸ä¸€çš„å›¾ç‰‡æŒ‰ç…§ä¸€å®šçš„è§„å¾‹æ’åˆ—ã€‚</li>
<li>å”¯ç¾ï¼šå›¾ç‰‡çš„é£æ ¼ä»¥å”¯ç¾çš„å›¾ç‰‡ä¸ºä¸»ã€‚</li>
<li>æ“ä½œç®€å•ï¼šåœ¨æµè§ˆç½‘ç«™çš„æ—¶å€™åªéœ€è¦è½»è½»æ»‘åŠ¨ä¸€ä¸‹é¼ æ ‡æ»šè½®ï¼Œä¸€åˆ‡çš„ç¾å¦™çš„å›¾ç‰‡ç²¾å½©ä¾¿å¯å‘ˆç°åœ¨ä½ é¢å‰ã€‚</li>
</ol>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>æºä»£ç åœ°å€ï¼šğŸ”—<a href="https://github.com/microzz/waterfall-js" target="_blank" rel="external">https://github.com/microzz/waterfall-js</a></p>
<h2 id="æ•ˆæœé¢„è§ˆ"><a href="#æ•ˆæœé¢„è§ˆ" class="headerlink" title="æ•ˆæœé¢„è§ˆ"></a>æ•ˆæœé¢„è§ˆ</h2><p> åœ¨çº¿é¢„è§ˆåœ°å€1ï¼š ğŸ”—<a href="http://microzz.cn/waterfall/" target="_blank" rel="external">http://microzz.cn/waterfall/</a><br> åœ¨çº¿é¢„è§ˆåœ°å€2ï¼š ğŸ”—<a href="https://microzz.github.io/waterfall-js/" target="_blank" rel="external">https://microzz.github.io/waterfall-js/</a></p>
<h2 id="ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹"><a href="#ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹" class="headerlink" title="ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹"></a>ç€‘å¸ƒæµå¸ƒå±€ä¼˜ç¼ºç‚¹</h2><h3 id="å¸ƒå±€ä¼˜ç‚¹"><a href="#å¸ƒå±€ä¼˜ç‚¹" class="headerlink" title="å¸ƒå±€ä¼˜ç‚¹"></a>å¸ƒå±€ä¼˜ç‚¹</h3><ol>
<li>æœ‰æ•ˆçš„é™ä½äº†ç•Œé¢å¤æ‚åº¦ï¼ŒèŠ‚çœäº†ç©ºé—´ï¼šæˆ‘ä»¬ä¸å†éœ€è¦è‡ƒè‚¿å¤æ‚çš„é¡µç å¯¼èˆªé“¾æ¥æˆ–æŒ‰é’®äº†ã€‚</li>
<li>å¯¹è§¦å±è®¾å¤‡æ¥è¯´ï¼Œäº¤äº’æ–¹å¼æ›´ç¬¦åˆç›´è§‰ï¼šåœ¨ç§»åŠ¨åº”ç”¨çš„äº¤äº’ç¯å¢ƒå½“ä¸­ï¼Œé€šè¿‡å‘ä¸Šæ»‘åŠ¨è¿›è¡Œæ»šå±çš„æ“ä½œå·²ç»æˆä¸ºæœ€åŸºæœ¬çš„ç”¨æˆ·ä¹ æƒ¯ï¼Œè€Œä¸”æ‰€éœ€è¦çš„æ“ä½œç²¾å‡†ç¨‹åº¦è¿œè¿œä½äºç‚¹å‡»é“¾æ¥æˆ–æŒ‰é’®ã€‚</li>
<li>æ›´é«˜çš„å‚ä¸åº¦ï¼šä»¥ä¸Šä¸¤ç‚¹æ‰€å¸¦æ¥çš„äº¤äº’ä¾¿æ·æ€§å¯ä»¥ä½¿ç”¨æˆ·å°†æ³¨æ„åŠ›æ›´å¤šçš„é›†ä¸­åœ¨å†…å®¹è€Œä¸æ˜¯æ“ä½œä¸Šï¼Œä»è€Œè®©ä»–ä»¬æ›´ä¹äºæ²‰æµ¸åœ¨æ¢ç´¢ä¸æµè§ˆå½“ä¸­ã€‚<h3 id="å¸ƒå±€ç¼ºç‚¹"><a href="#å¸ƒå±€ç¼ºç‚¹" class="headerlink" title="å¸ƒå±€ç¼ºç‚¹"></a>å¸ƒå±€ç¼ºç‚¹</h3></li>
<li>æœ‰é™çš„ç”¨ä¾‹ï¼š<br>æ— é™æ»šåŠ¨çš„æ–¹å¼åªé€‚ç”¨äºæŸäº›ç‰¹å®šç±»å‹äº§å“å½“ä¸­ä¸€éƒ¨åˆ†ç‰¹å®šç±»å‹çš„å†…å®¹ã€‚<br>ä¾‹å¦‚ï¼Œåœ¨ç”µå•†ç½‘ç«™å½“ä¸­ï¼Œç”¨æˆ·æ—¶å¸¸éœ€è¦åœ¨å•†å“åˆ—è¡¨ä¸è¯¦æƒ…é¡µé¢ä¹‹é—´åˆ‡æ¢ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¼ ç»Ÿçš„ã€å¸¦æœ‰é¡µç å¯¼èˆªçš„æ–¹å¼å¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´ç¨³å¦¥å’Œå‡†ç¡®çš„å›åˆ°æŸä¸ªç‰¹å®šçš„åˆ—è¡¨é¡µé¢å½“ä¸­ã€‚</li>
<li>é¢å¤–çš„å¤æ‚åº¦ï¼š<br>é‚£äº›ç”¨æ¥æ‰“é€ æ— é™æ»šåŠ¨çš„JSåº“è™½ç„¶éƒ½è‡ªç§°å¾ˆå®¹æ˜“ä½¿ç”¨ï¼Œä½†ä½ æ€»ä¼šéœ€è¦åœ¨è‡ªå·±çš„äº§å“ä¸­è¿›è¡Œä¸åŒç¨‹åº¦çš„å®šåˆ¶åŒ–å¤„ç†ï¼Œä»¥æ»¡è¶³ä½ ä»¬è‡ªå·±çš„éœ€æ±‚;å¦å¤–è¿™äº›JSåº“åœ¨æµè§ˆå™¨å’Œè®¾å¤‡å…¼å®¹æ€§ç­‰æ–¹é¢çš„è¡¨ç°ä¹Ÿå‚å·®ä¸é½ï¼Œä½ å¿…é¡»åšå¥½å……åˆ†çš„æµ‹è¯•ä¸è°ƒæ•´å·¥ä½œã€‚</li>
<li>å†è§äº†ï¼Œé¡µè„šï¼š<br>å¦‚æœä½¿ç”¨äº†æ¯”è¾ƒå…¸å‹çš„æ— é™æ»šåŠ¨åŠ è½½æ¨¡å¼ï¼Œè¿™å°±æ„å‘³ç€ä½ å¯ä»¥å’Œé¡µè„šè¯´æ‹œæ‹œäº†ã€‚<br>æœ€å¥½è€ƒè™‘ä¸€ä¸‹é¡µè„šå¯¹äºä½ çš„ç½‘ç«™ï¼Œç‰¹åˆ«æ˜¯ç”¨æˆ·çš„é‡è¦æ€§;å¦‚æœå…¶ä¸­ç¡®å®æœ‰æ¯”è¾ƒé‡è¦çš„å†…å®¹æˆ–é“¾æ¥ï¼Œé‚£ä¹ˆæœ€å¥½æ¢ä¸€ç§æ›´ä¼ ç»Ÿå’Œç¨³å¦¥çš„æ–¹å¼ã€‚<br>åƒä¸‡ä¸è¦è€å¼„ä½ çš„ç”¨æˆ·ï¼Œå½“ä»–ä»¬ä¸€æ¬¡æ¬¡çš„æµè§ˆåˆ°é¡µé¢åº•éƒ¨ï¼Œçœ‹åˆ°é¡µè„šï¼Œå´å› ä¸ºè‡ªåŠ¨åŠ è½½çš„å†…å®¹çªç„¶å‡ºç°è€Œæ— è®ºå¦‚ä½•éƒ½æ— æ³•ç‚¹å‡»é¡µè„šä¸­çš„é“¾æ¥æ—¶ï¼Œä»–ä»¬ä¼šå˜çš„è¶Šå‘æ„¤æ€’ã€‚</li>
<li>SEOï¼š<br>é›†ä¸­åœ¨ä¸€é¡µå½“ä¸­åŠ¨æ€åŠ è½½æ•°æ®ï¼Œä¸ä¸€é¡µä¸€é¡µçš„è¾“å‡ºç›¸æ¯”ï¼Œç©¶ç«Ÿé‚£ç§æ–¹å¼æ›´åˆ©äºSEOï¼Œè¿™æ˜¯ä½ å¿…é¡»è€ƒè™‘çš„é—®é¢˜ã€‚å¯¹äºæŸäº›ä»¥ç±»å‹ç½‘ç«™æ¥è¯´ï¼Œåœ¨è¿™æ–¹é¢è¿›è¡Œå†’é™©æ˜¯å¾ˆä¸åˆ’ç®—çš„ã€‚</li>
<li>å…³äºé¡µé¢æ•°é‡çš„å°è±¡ï¼š<br>å…¶å®ç«™åœ¨ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ä¸€ç‚¹å¹¶éè´Ÿé¢;ä¸è¿‡ï¼Œå¦‚æœå¯¹äºä½ çš„ç½‘ç«™æ¥è¯´ï¼Œé€šè¿‡æ›´å¤šçš„å†…å®¹é¡µé¢å±•ç¤ºæ›´å¤šçš„ç›¸å…³ä¿¡æ¯(åŒ…æ‹¬å¹¿å‘Š)æ˜¯å¾ˆé‡è¦çš„ç­–ç•¥ï¼Œé‚£ä¹ˆå•é¡µæ— é™æ»šåŠ¨çš„æ–¹å¼å¯¹ä½ å¹¶ä¸é€‚ç”¨ã€‚</li>
</ol>
<h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><p> <a href="https://microzz.com/2017/02/19/waterfallcss3/">CSS3å®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€</a><br><a href="https://microzz.com/2017/02/20/waterfalljq/">jQueryå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;åŸç”ŸJavaScriptå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€&quot;&gt;&lt;a href=&quot;#åŸç”ŸJavaScriptå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€&quot; class=&quot;headerlink&quot; title=&quot;åŸç”ŸJavaScriptå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€&quot;&gt;&lt;/a&gt;åŸç”ŸJavaScriptå®ç°ä¸€ä¸ªç€‘å¸ƒæµå¸ƒå±€&lt;/
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="waterfall" scheme="https://microzz.com/tags/waterfall/"/>
    
      <category term="ç€‘å¸ƒæµ" scheme="https://microzz.com/tags/%E7%80%91%E5%B8%83%E6%B5%81/"/>
    
  </entry>
  
  <entry>
    <title>Node.jså®ç°ä¸€ä¸ªå°çˆ¬è™«</title>
    <link href="https://microzz.com/2017/02/14/crawler/"/>
    <id>https://microzz.com/2017/02/14/crawler/</id>
    <published>2017-02-14T08:33:13.000Z</published>
    <updated>2017-02-24T13:52:06.630Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Node-jså®ç°ä¸€ä¸ªå°çˆ¬è™«"><a href="#Node-jså®ç°ä¸€ä¸ªå°çˆ¬è™«" class="headerlink" title="Node.jså®ç°ä¸€ä¸ªå°çˆ¬è™«"></a>Node.jså®ç°ä¸€ä¸ªå°çˆ¬è™«</h1><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>æˆ‘ä»¬å°†ç”¨æœ€ç®€å•çš„ä»£ç å®ç°ä¸€ä¸ªç®€å•çš„å°çˆ¬è™«ã€‚æœ¬ç¤ºä¾‹é‡‡ç”¨ES6å†™æ³•ã€‚é¦–å…ˆæˆ‘ä»¬è¦å®‰è£…ç¬¬ä¸‰æ–¹cheerioæ¨¡å—ï¼Œåœ¨é¡¹ç›®ç›®å½•ä½¿ç”¨<code>npm install cheerio --save</code> å‘½ä»¤å³å¯ã€‚åœ¨æ–‡ä»¶ä¸­æˆ‘ä»¬éœ€è¦å¼•å…¥å¦‚ä¸‹æ¨¡å—ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">æ¨¡å—å</th>
<th style="text-align:center">ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">cheerio</td>
<td style="text-align:center">ç±»ä¼¼jQueryï¼Œæ–¹ä¾¿å¯¹DOMå†…å®¹æ“ä½œ</td>
</tr>
<tr>
<td style="text-align:center">https</td>
<td style="text-align:center">é’ˆå¯¹httpsåè®®ï¼Œhttpæ¨¡å—ç”¨æ³•ç±»ä¼¼</td>
</tr>
</tbody>
</table>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><pre><code class="javascript">// å¼•å…¥æ¨¡å—
const https = require(&#39;https&#39;);
const cheerio = require(&#39;cheerio&#39;);

// çˆ¬å–ç›®æ ‡ç½‘ç«™URL
let url = &#39;https://microzz.com&#39;;

// ä½¿ç”¨getæ–¹æ³•è®¿é—®
https.get(url, res =&gt; {
  let html = &#39;&#39;;

  // ç›‘å¬dataäº‹ä»¶è·å–htmlæºç 
  res.on(&#39;data&#39;, data =&gt; {
    html += data;
  });

 // ç›‘å¬endäº‹ä»¶ï¼ŒåŒæ—¶æŠŠè·å–åˆ°çš„æ•°æ®ä¼ ç»™filterDataæ–¹æ³•è¿›è¡Œè¿‡æ»¤
  res.on(&#39;end&#39;, () =&gt; {
    let titles = filterData(html);
    console.log(titles);
  });

}).on(&#39;error&#39;, e =&gt; {
  console.log(e.message);
});

// ä½¿ç”¨cheerioæ¨¡å—å¯¹å†…å®¹è¿›è¡Œç­›é€‰è¿‡æ»¤
function filterData(html) {
  let $ = cheerio.load(html);
  let oTitles = $(&#39;.post-title-link&#39;);
  let titles = &#39;&#39;;

  oTitles.each( (index, item) =&gt; {
    let title = $(item).text();
    let end = index == (oTitles.length - 1) ? &#39;&#39; : &#39;\n&#39;;
    titles += &#39;ã€&#39; + (index+1) + &#39;ã€‘&#39; + title + end;
  });

  return titles;

}
</code></pre>
<p>è‡³æ­¤ä¸€ä¸ªç®€å•çš„çˆ¬å– <a href="https://microzz.com">https://microzz.com</a> æ–‡ç« å†…å®¹æ ‡é¢˜çš„å°çˆ¬è™«å°±å®Œæˆå•¦ğŸ˜„</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Node-jså®ç°ä¸€ä¸ªå°çˆ¬è™«&quot;&gt;&lt;a href=&quot;#Node-jså®ç°ä¸€ä¸ªå°çˆ¬è™«&quot; class=&quot;headerlink&quot; title=&quot;Node.jså®ç°ä¸€ä¸ªå°çˆ¬è™«&quot;&gt;&lt;/a&gt;Node.jså®ç°ä¸€ä¸ªå°çˆ¬è™«&lt;/h1&gt;&lt;h2 id=&quot;åˆ†æ&quot;&gt;&lt;a href=&quot;#åˆ†æ&quot;
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Nodejs" scheme="https://microzz.com/tags/Nodejs/"/>
    
      <category term="çˆ¬è™«" scheme="https://microzz.com/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>npm scripts ä½¿ç”¨æŒ‡å—</title>
    <link href="https://microzz.com/2017/02/13/npm-scripts/"/>
    <id>https://microzz.com/2017/02/13/npm-scripts/</id>
    <published>2017-02-13T11:51:28.000Z</published>
    <updated>2017-02-13T12:23:32.976Z</updated>
    
    <content type="html"><![CDATA[<h1 id="npm-scripts-ä½¿ç”¨æŒ‡å—"><a href="#npm-scripts-ä½¿ç”¨æŒ‡å—" class="headerlink" title="npm scripts ä½¿ç”¨æŒ‡å—"></a>npm scripts ä½¿ç”¨æŒ‡å—</h1><blockquote>
<p>&nbsp;&nbsp;&nbsp;Node å¼€å‘ç¦»ä¸å¼€ npmï¼Œè€Œè„šæœ¬åŠŸèƒ½æ˜¯ npm æœ€å¼ºå¤§ã€æœ€å¸¸ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ã€‚<br>æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ npm è„šæœ¬ï¼ˆnpm scriptsï¼‰ã€‚</p>
</blockquote>
<h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯-npm-è„šæœ¬ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯-npm-è„šæœ¬ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯ npm è„šæœ¬ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯ npm è„šæœ¬ï¼Ÿ</h2><p><code>npm</code> å…è®¸åœ¨package.jsonæ–‡ä»¶é‡Œé¢ï¼Œä½¿ç”¨scriptså­—æ®µå®šä¹‰è„šæœ¬å‘½ä»¤ã€‚</p>
<pre><code class="json">{
  // ...
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;node build.js&quot;
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç æ˜¯package.jsonæ–‡ä»¶çš„ä¸€ä¸ªç‰‡æ®µï¼Œé‡Œé¢çš„scriptså­—æ®µæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å®ƒçš„æ¯ä¸€ä¸ªå±æ€§ï¼Œå¯¹åº”ä¸€æ®µè„šæœ¬ã€‚æ¯”å¦‚ï¼Œ<code>build</code>å‘½ä»¤å¯¹åº”çš„è„šæœ¬æ˜¯<code>node build.js</code>ã€‚<br>å‘½ä»¤è¡Œä¸‹ä½¿ç”¨<code>npm run</code>å‘½ä»¤ï¼Œå°±å¯ä»¥æ‰§è¡Œè¿™æ®µè„šæœ¬ã€‚</p>
<pre><code>$ npm run build
# ç­‰åŒäºæ‰§è¡Œ
$ node build.js
</code></pre><p>è¿™äº›å®šä¹‰åœ¨package.jsoné‡Œé¢çš„è„šæœ¬ï¼Œå°±ç§°ä¸º npm è„šæœ¬ã€‚å®ƒçš„ä¼˜ç‚¹å¾ˆå¤šã€‚<br>é¡¹ç›®çš„ç›¸å…³è„šæœ¬ï¼Œå¯ä»¥é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚<br>ä¸åŒé¡¹ç›®çš„è„šæœ¬å‘½ä»¤ï¼Œåªè¦åŠŸèƒ½ç›¸åŒï¼Œå°±å¯ä»¥æœ‰åŒæ ·çš„å¯¹å¤–æ¥å£ã€‚ç”¨æˆ·ä¸éœ€è¦çŸ¥é“æ€ä¹ˆæµ‹è¯•ä½ çš„é¡¹ç›®ï¼Œåªè¦è¿è¡Œ<code>npm run test</code>å³å¯ã€‚<br>å¯ä»¥åˆ©ç”¨ npm æä¾›çš„å¾ˆå¤šè¾…åŠ©åŠŸèƒ½ã€‚<br>æŸ¥çœ‹å½“å‰é¡¹ç›®çš„æ‰€æœ‰ npm è„šæœ¬å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸å¸¦ä»»ä½•å‚æ•°çš„<code>npm run</code>å‘½ä»¤ã€‚</p>
<pre><code>$ npm run
</code></pre><h2 id="äºŒã€åŸç†"><a href="#äºŒã€åŸç†" class="headerlink" title="äºŒã€åŸç†"></a>äºŒã€åŸç†</h2><p>npm è„šæœ¬çš„åŸç†éå¸¸ç®€å•ã€‚æ¯å½“æ‰§è¡Œ<code>npm run</code>ï¼Œå°±ä¼šè‡ªåŠ¨æ–°å»ºä¸€ä¸ª Shellï¼Œåœ¨è¿™ä¸ª Shell é‡Œé¢æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬å‘½ä»¤ã€‚å› æ­¤ï¼Œåªè¦æ˜¯ Shellï¼ˆä¸€èˆ¬æ˜¯ Bashï¼‰å¯ä»¥è¿è¡Œçš„å‘½ä»¤ï¼Œå°±å¯ä»¥å†™åœ¨ npm è„šæœ¬é‡Œé¢ã€‚<br>æ¯”è¾ƒç‰¹åˆ«çš„æ˜¯ï¼Œnpm runæ–°å»ºçš„è¿™ä¸ª Shellï¼Œä¼šå°†å½“å‰ç›®å½•çš„node_modules/.binå­ç›®å½•åŠ å…¥PATHå˜é‡ï¼Œæ‰§è¡Œç»“æŸåï¼Œå†å°†PATHå˜é‡æ¢å¤åŸæ ·ã€‚<br>è¿™æ„å‘³ç€ï¼Œå½“å‰ç›®å½•çš„node_modules/.binå­ç›®å½•é‡Œé¢çš„æ‰€æœ‰è„šæœ¬ï¼Œéƒ½å¯ä»¥ç›´æ¥ç”¨è„šæœ¬åè°ƒç”¨ï¼Œè€Œä¸å¿…åŠ ä¸Šè·¯å¾„ã€‚æ¯”å¦‚ï¼Œå½“å‰é¡¹ç›®çš„ä¾èµ–é‡Œé¢æœ‰ Mochaï¼Œåªè¦ç›´æ¥å†™<code>mocha test</code>å°±å¯ä»¥äº†ã€‚</p>
<pre><code class="json">&quot;test&quot;: &quot;mocha test&quot;
</code></pre>
<p>è€Œä¸ç”¨å†™æˆä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="json">&quot;test&quot;: &quot;./node_modules/.bin/mocha test&quot;
</code></pre>
<p>ç”±äº npm è„šæœ¬çš„å”¯ä¸€è¦æ±‚å°±æ˜¯å¯ä»¥åœ¨ Shell æ‰§è¡Œï¼Œå› æ­¤å®ƒä¸ä¸€å®šæ˜¯ Node è„šæœ¬ï¼Œä»»ä½•å¯æ‰§è¡Œæ–‡ä»¶éƒ½å¯ä»¥å†™åœ¨é‡Œé¢ã€‚<br>npm è„šæœ¬çš„é€€å‡ºç ï¼Œä¹Ÿéµå®ˆ Shell è„šæœ¬è§„åˆ™ã€‚å¦‚æœé€€å‡ºç ä¸æ˜¯0ï¼Œnpm å°±è®¤ä¸ºè¿™ä¸ªè„šæœ¬æ‰§è¡Œå¤±è´¥ã€‚</p>
<h2 id="ä¸‰ã€é€šé…ç¬¦"><a href="#ä¸‰ã€é€šé…ç¬¦" class="headerlink" title="ä¸‰ã€é€šé…ç¬¦"></a>ä¸‰ã€é€šé…ç¬¦</h2><p>ç”±äº npm è„šæœ¬å°±æ˜¯ Shell è„šæœ¬ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ Shell é€šé…ç¬¦ã€‚</p>
<pre><code class="json">&quot;lint&quot;: &quot;jshint *.js&quot;
&quot;lint&quot;: &quot;jshint **/*.js&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<em>è¡¨ç¤ºä»»æ„æ–‡ä»¶åï¼Œ*</em>è¡¨ç¤ºä»»æ„ä¸€å±‚å­ç›®å½•ã€‚<br>å¦‚æœè¦å°†é€šé…ç¬¦ä¼ å…¥åŸå§‹å‘½ä»¤ï¼Œé˜²æ­¢è¢« Shell è½¬ä¹‰ï¼Œè¦å°†æ˜Ÿå·è½¬ä¹‰ã€‚</p>
<pre><code class="json">&quot;test&quot;: &quot;tap test/\*.js&quot;
</code></pre>
<h2 id="å››ã€ä¼ å‚"><a href="#å››ã€ä¼ å‚" class="headerlink" title="å››ã€ä¼ å‚"></a>å››ã€ä¼ å‚</h2><p>å‘ npm è„šæœ¬ä¼ å…¥å‚æ•°ï¼Œè¦ä½¿ç”¨â€“æ ‡æ˜ã€‚</p>
<pre><code class="json">&quot;lint&quot;: &quot;jshint **.js&quot;
</code></pre>
<p>å‘ä¸Šé¢çš„<code>npm run lint</code>å‘½ä»¤ä¼ å…¥å‚æ•°ï¼Œå¿…é¡»å†™æˆä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code>$ npm run lint --  --reporter checkstyle &gt; checkstyle.xml
</code></pre><p>ä¹Ÿå¯ä»¥åœ¨package.jsoné‡Œé¢å†å°è£…ä¸€ä¸ªå‘½ä»¤ã€‚</p>
<pre><code class="json">&quot;lint&quot;: &quot;jshint **.js&quot;,
&quot;lint:checkstyle&quot;: &quot;npm run lint -- --reporter checkstyle &gt; checkstyle.xml&quot;
</code></pre>
<h2 id="äº”ã€æ‰§è¡Œé¡ºåº"><a href="#äº”ã€æ‰§è¡Œé¡ºåº" class="headerlink" title="äº”ã€æ‰§è¡Œé¡ºåº"></a>äº”ã€æ‰§è¡Œé¡ºåº</h2><p>å¦‚æœ npm è„šæœ¬é‡Œé¢éœ€è¦æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œé‚£ä¹ˆéœ€è¦æ˜ç¡®å®ƒä»¬çš„æ‰§è¡Œé¡ºåºã€‚<br>å¦‚æœæ˜¯å¹¶è¡Œæ‰§è¡Œï¼ˆå³åŒæ—¶çš„å¹³è¡Œæ‰§è¡Œï¼‰ï¼Œå¯ä»¥ä½¿ç”¨&amp;ç¬¦å·ã€‚</p>
<pre><code>$ npm run script1.js &amp; npm run script2.js
</code></pre><p>å¦‚æœæ˜¯ç»§å‘æ‰§è¡Œï¼ˆå³åªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æˆåŠŸï¼Œæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨&amp;&amp;ç¬¦å·ã€‚</p>
<pre><code>$ npm run script1.js &amp;&amp; npm run script2.js
</code></pre><p>è¿™ä¸¤ä¸ªç¬¦å·æ˜¯ Bash çš„åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ node çš„ä»»åŠ¡ç®¡ç†æ¨¡å—ï¼šscript-runnerã€npm-run-allã€redrunã€‚</p>
<h2 id="å…­ã€é»˜è®¤å€¼"><a href="#å…­ã€é»˜è®¤å€¼" class="headerlink" title="å…­ã€é»˜è®¤å€¼"></a>å…­ã€é»˜è®¤å€¼</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œnpm è„šæœ¬ç”±ç”¨æˆ·æä¾›ã€‚ä½†æ˜¯ï¼Œnpm å¯¹ä¸¤ä¸ªè„šæœ¬æä¾›äº†é»˜è®¤å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸¤ä¸ªè„šæœ¬ä¸ç”¨å®šä¹‰ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<pre><code class="json">&quot;start&quot;: &quot;node server.js&quot;ï¼Œ
&quot;install&quot;: &quot;node-gyp rebuild&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>npm run start</code>çš„é»˜è®¤å€¼æ˜¯<code>node server.js</code>ï¼Œå‰ææ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰server.jsè¿™ä¸ªè„šæœ¬ï¼›<code>npm run install</code>çš„é»˜è®¤å€¼æ˜¯<code>node-gyp rebuild</code>ï¼Œå‰ææ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰binding.gypæ–‡ä»¶ã€‚</p>
<h2 id="ä¸ƒã€é’©å­"><a href="#ä¸ƒã€é’©å­" class="headerlink" title="ä¸ƒã€é’©å­"></a>ä¸ƒã€é’©å­</h2><p>npm è„šæœ¬æœ‰preå’Œpostä¸¤ä¸ªé’©å­ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œ<code>build</code>è„šæœ¬å‘½ä»¤çš„é’©å­å°±æ˜¯prebuildå’Œpostbuildã€‚</p>
<pre><code class="json">&quot;prebuild&quot;: &quot;echo I run before the build script&quot;,
&quot;build&quot;: &quot;cross-env NODE_ENV=production webpack&quot;,
&quot;postbuild&quot;: &quot;echo I run after the build script&quot;
</code></pre>
<p>ç”¨æˆ·æ‰§è¡Œ<code>npm run build</code>çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æŒ‰ç…§ä¸‹é¢çš„é¡ºåºæ‰§è¡Œã€‚</p>
<pre><code>npm run prebuild &amp;&amp; npm run build &amp;&amp; npm run postbuild
</code></pre><p>å› æ­¤ï¼Œå¯ä»¥åœ¨è¿™ä¸¤ä¸ªé’©å­é‡Œé¢ï¼Œå®Œæˆä¸€äº›å‡†å¤‡å·¥ä½œå’Œæ¸…ç†å·¥ä½œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="json">&quot;clean&quot;: &quot;rimraf ./dist &amp;&amp; mkdir dist&quot;,
&quot;prebuild&quot;: &quot;npm run clean&quot;,
&quot;build&quot;: &quot;cross-env NODE_ENV=production webpack&quot;
</code></pre>
<p>npm é»˜è®¤æä¾›ä¸‹é¢è¿™äº›é’©å­ã€‚</p>
<blockquote>
<p>prepublishï¼Œpostpublish<br>preinstallï¼Œpostinstall<br>preuninstallï¼Œpostuninstall<br>preversionï¼Œpostversion<br>pretestï¼Œposttest<br>prestopï¼Œpoststop<br>prestartï¼Œpoststart<br>prerestartï¼Œpostrestart</p>
</blockquote>
<p>è‡ªå®šä¹‰çš„è„šæœ¬å‘½ä»¤ä¹Ÿå¯ä»¥åŠ ä¸Špreå’Œposté’©å­ã€‚æ¯”å¦‚ï¼Œ<code>myscript</code>è¿™ä¸ªè„šæœ¬å‘½ä»¤ï¼Œä¹Ÿæœ‰premyscriptå’Œpostmyscripté’©å­ã€‚ä¸è¿‡ï¼ŒåŒé‡çš„preå’Œpostæ— æ•ˆï¼Œæ¯”å¦‚prepretestå’Œpostposttestæ˜¯æ— æ•ˆçš„ã€‚<br>npm æä¾›ä¸€ä¸ªnpm_lifecycle_eventå˜é‡ï¼Œè¿”å›å½“å‰æ­£åœ¨è¿è¡Œçš„è„šæœ¬åç§°ï¼Œæ¯”å¦‚pretestã€testã€posttestç­‰ç­‰ã€‚æ‰€ä»¥ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªå˜é‡ï¼Œåœ¨åŒä¸€ä¸ªè„šæœ¬æ–‡ä»¶é‡Œé¢ï¼Œä¸ºä¸åŒçš„npm scriptså‘½ä»¤ç¼–å†™ä»£ç ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">const TARGET = process.env.npm_lifecycle_event;

if (TARGET === &#39;test&#39;) {
  console.log(`Running the test task!`);
}

if (TARGET === &#39;pretest&#39;) {
  console.log(`Running the pretest task!`);
}

if (TARGET === &#39;posttest&#39;) {
  console.log(`Running the posttest task!`);
}
</code></pre>
<p>æ³¨æ„ï¼Œprepublishè¿™ä¸ªé’©å­ä¸ä»…ä¼šåœ¨npm publishå‘½ä»¤ä¹‹å‰è¿è¡Œï¼Œè¿˜ä¼šåœ¨<code>npm install</code>ï¼ˆä¸å¸¦ä»»ä½•å‚æ•°ï¼‰å‘½ä»¤ä¹‹å‰è¿è¡Œã€‚è¿™ç§è¡Œä¸ºå¾ˆå®¹æ˜“è®©ç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘ï¼Œæ‰€ä»¥ npm 4 å¼•å…¥äº†ä¸€ä¸ªæ–°çš„é’©å­prepareï¼Œè¡Œä¸ºç­‰åŒäºprepublishï¼Œè€Œä» npm 5 å¼€å§‹ï¼Œprepublishå°†åªåœ¨npm publishå‘½ä»¤ä¹‹å‰è¿è¡Œã€‚</p>
<h2 id="å…«ã€ç®€å†™å½¢å¼"><a href="#å…«ã€ç®€å†™å½¢å¼" class="headerlink" title="å…«ã€ç®€å†™å½¢å¼"></a>å…«ã€ç®€å†™å½¢å¼</h2><p>å››ä¸ªå¸¸ç”¨çš„ npm è„šæœ¬æœ‰ç®€å†™å½¢å¼ã€‚<br><code>npm start</code>æ˜¯<code>npm run start</code><br><code>npm stop</code>æ˜¯<code>npm run stop</code>çš„ç®€å†™<br><code>npm test</code>æ˜¯<code>npm run test</code>çš„ç®€å†™<br><code>npm restart</code>æ˜¯<code>npm run stop &amp;&amp; npm run restart &amp;&amp; npm run start</code>çš„ç®€å†™<br><code>npm start</code>ã€<code>npm stop</code>å’Œ<code>npm test</code>éƒ½æ¯”è¾ƒå¥½ç†è§£ï¼Œè€Œ<code>npm restart</code>æ˜¯ä¸€ä¸ªå¤åˆå‘½ä»¤ï¼Œå®é™…ä¸Šä¼šæ‰§è¡Œä¸‰ä¸ªè„šæœ¬å‘½ä»¤ï¼š<code>stop</code>ã€<code>restart</code>ã€<code>start</code>ã€‚å…·ä½“çš„æ‰§è¡Œé¡ºåºå¦‚ä¸‹ã€‚<br><code>prerestart</code><br><code>prestop</code><br><code>stop</code><br><code>poststop</code><br><code>restart</code><br><code>prestart</code><br><code>start</code><br><code>poststart</code><br><code>postrestart</code></p>
<h2 id="ä¹ã€å˜é‡"><a href="#ä¹ã€å˜é‡" class="headerlink" title="ä¹ã€å˜é‡"></a>ä¹ã€å˜é‡</h2><p><code>npm</code> è„šæœ¬æœ‰ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥ä½¿ç”¨ npm çš„å†…éƒ¨å˜é‡ã€‚<br>é¦–å…ˆï¼Œé€šè¿‡npm<em>package</em>å‰ç¼€ï¼Œnpm è„šæœ¬å¯ä»¥æ‹¿åˆ°package.jsoné‡Œé¢çš„å­—æ®µã€‚æ¯”å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªpackage.jsonã€‚</p>
<pre><code class="json">{
  &quot;name&quot;: &quot;foo&quot;, 
  &quot;version&quot;: &quot;1.2.5&quot;,
  &quot;scripts&quot;: {
    &quot;view&quot;: &quot;node view.js&quot;
  }
}
</code></pre>
<p>é‚£ä¹ˆï¼Œå˜é‡npm_package_nameè¿”å›fooï¼Œå˜é‡npm_package_versionè¿”å›1.2.5ã€‚</p>
<pre><code class="js">// view.js
console.log(process.env.npm_package_name); // foo
console.log(process.env.npm_package_version); // 1.2.5
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç¯å¢ƒå˜é‡<code>process.env</code>å¯¹è±¡ï¼Œæ‹¿åˆ°package.jsonçš„å­—æ®µå€¼ã€‚å¦‚æœæ˜¯ Bash è„šæœ¬ï¼Œå¯ä»¥ç”¨\$npm_package_nameå’Œ$npm_package_versionå–åˆ°è¿™ä¸¤ä¸ªå€¼ã€‚<br>npm<em>package</em>å‰ç¼€ä¹Ÿæ”¯æŒåµŒå¥—çš„package.jsonå­—æ®µã€‚</p>
<pre><code class="json">  &quot;repository&quot;: {
    &quot;type&quot;: &quot;git&quot;,
    &quot;url&quot;: &quot;xxx&quot;
  },
  scripts: {
    &quot;view&quot;: &quot;echo $npm_package_repository_type&quot;
  }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œrepositoryå­—æ®µçš„typeå±æ€§ï¼Œå¯ä»¥é€šè¿‡npm_package_repository_typeå–åˆ°ã€‚<br>ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="json">&quot;scripts&quot;: {
  &quot;install&quot;: &quot;foo.js&quot;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œnpm_package_scripts_installå˜é‡çš„å€¼ç­‰äºfoo.jsã€‚<br>ç„¶åï¼Œnpm è„šæœ¬è¿˜å¯ä»¥é€šè¿‡npm<em>config</em>å‰ç¼€ï¼Œæ‹¿åˆ° npm çš„é…ç½®å˜é‡ï¼Œå³<code>npm config get xxx</code>å‘½ä»¤è¿”å›çš„å€¼ã€‚æ¯”å¦‚ï¼Œå½“å‰æ¨¡å—çš„å‘è¡Œæ ‡ç­¾ï¼Œå¯ä»¥é€šè¿‡npm_config_tagå–åˆ°ã€‚</p>
<pre><code class="json">&quot;view&quot;: &quot;echo $npm_config_tag&quot;,
</code></pre>
<p>æ³¨æ„ï¼Œpackage.jsoné‡Œé¢çš„configå¯¹è±¡ï¼Œå¯ä»¥è¢«ç¯å¢ƒå˜é‡è¦†ç›–ã€‚</p>
<pre><code class="json">{ 
  &quot;name&quot; : &quot;foo&quot;,
  &quot;config&quot; : { &quot;port&quot; : &quot;8080&quot; },
  &quot;scripts&quot; : { &quot;start&quot; : &quot;node server.js&quot; }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œnpm_package_config_portå˜é‡è¿”å›çš„æ˜¯8080ã€‚è¿™ä¸ªå€¼å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•è¦†ç›–ã€‚</p>
<pre><code>$ npm config set foo:port 80
</code></pre><p>æœ€åï¼Œenvå‘½ä»¤å¯ä»¥åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚</p>
<pre><code class="js">&quot;env&quot;: &quot;env&quot;
</code></pre>
<h2 id="åã€å¸¸ç”¨è„šæœ¬ç¤ºä¾‹"><a href="#åã€å¸¸ç”¨è„šæœ¬ç¤ºä¾‹" class="headerlink" title="åã€å¸¸ç”¨è„šæœ¬ç¤ºä¾‹"></a>åã€å¸¸ç”¨è„šæœ¬ç¤ºä¾‹</h2><pre><code class="json">// åˆ é™¤ç›®å½•
&quot;clean&quot;: &quot;rimraf dist/*&quot;,

// æœ¬åœ°æ­å»ºä¸€ä¸ª HTTP æœåŠ¡
&quot;serve&quot;: &quot;http-server -p 9090 dist/&quot;,

// æ‰“å¼€æµè§ˆå™¨
&quot;open:dev&quot;: &quot;opener http://localhost:9090&quot;,

// å®æ—¶åˆ·æ–°
 &quot;livereload&quot;: &quot;live-reload --port 9091 dist/&quot;,

// æ„å»º HTML æ–‡ä»¶
&quot;build:html&quot;: &quot;jade index.jade &gt; dist/index.html&quot;,

// åªè¦ CSS æ–‡ä»¶æœ‰å˜åŠ¨ï¼Œå°±é‡æ–°æ‰§è¡Œæ„å»º
&quot;watch:css&quot;: &quot;watch &#39;npm run build:css&#39; assets/styles/&quot;,

// åªè¦ HTML æ–‡ä»¶æœ‰å˜åŠ¨ï¼Œå°±é‡æ–°æ‰§è¡Œæ„å»º
&quot;watch:html&quot;: &quot;watch &#39;npm run build:html&#39; assets/html&quot;,

// éƒ¨ç½²åˆ° Amazon S3
&quot;deploy:prod&quot;: &quot;s3-cli sync ./dist/ s3://example-com/prod-site/&quot;,

// æ„å»º favicon
&quot;build:favicon&quot;: &quot;node scripts/favicon.js&quot;,
</code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;npm-scripts-ä½¿ç”¨æŒ‡å—&quot;&gt;&lt;a href=&quot;#npm-scripts-ä½¿ç”¨æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;npm scripts ä½¿ç”¨æŒ‡å—&quot;&gt;&lt;/a&gt;npm scripts ä½¿ç”¨æŒ‡å—&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="Nodejs" scheme="https://microzz.com/tags/Nodejs/"/>
    
      <category term="npm" scheme="https://microzz.com/tags/npm/"/>
    
      <category term="js" scheme="https://microzz.com/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>Mac ç»ˆç«¯å‘½ä»¤å¤§å…¨ (Shell)</title>
    <link href="https://microzz.com/2017/02/12/mac-shell/"/>
    <id>https://microzz.com/2017/02/12/mac-shell/</id>
    <published>2017-02-12T10:24:35.000Z</published>
    <updated>2017-02-12T11:07:56.767Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Mac-ç»ˆç«¯å‘½ä»¤å¤§å…¨"><a href="#Mac-ç»ˆç«¯å‘½ä»¤å¤§å…¨" class="headerlink" title="Mac ç»ˆç«¯å‘½ä»¤å¤§å…¨"></a>Mac ç»ˆç«¯å‘½ä»¤å¤§å…¨</h1><h2 id="ç›®å½•æ“ä½œ"><a href="#ç›®å½•æ“ä½œ" class="headerlink" title="ç›®å½•æ“ä½œ"></a>ç›®å½•æ“ä½œ</h2><table>
<thead>
<tr>
<th>å‘½ä»¤å</th>
<th>åŠŸèƒ½æè¿°</th>
<th>ä½¿ç”¨ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>mkdir</td>
<td>åˆ›å»ºä¸€ä¸ªç›®å½•</td>
<td>mkdir dirname</td>
</tr>
<tr>
<td>rmdir</td>
<td>åˆ é™¤ä¸€ä¸ªç›®å½•</td>
<td>rmdir dirname</td>
</tr>
<tr>
<td>mvdir</td>
<td>ç§»åŠ¨æˆ–é‡å‘½åä¸€ä¸ªç›®å½•</td>
<td>mvdir dir1 dir2</td>
</tr>
<tr>
<td>cd</td>
<td>æ”¹å˜å½“å‰ç›®å½•</td>
<td>cd dirname</td>
</tr>
<tr>
<td>pwd</td>
<td>æ˜¾ç¤ºå½“å‰ç›®å½•çš„è·¯å¾„å</td>
<td>pwd</td>
</tr>
<tr>
<td>ls</td>
<td>æ˜¾ç¤ºå½“å‰ç›®å½•çš„å†…å®¹</td>
<td>ls -la</td>
</tr>
<tr>
<td>dircmp</td>
<td>æ¯”è¾ƒä¸¤ä¸ªç›®å½•çš„å†…å®¹</td>
<td>dircmp dir1 dir2</td>
</tr>
</tbody>
</table>
<h2 id="æ–‡ä»¶æ“ä½œ"><a href="#æ–‡ä»¶æ“ä½œ" class="headerlink" title="æ–‡ä»¶æ“ä½œ"></a>æ–‡ä»¶æ“ä½œ</h2><table>
<thead>
<tr>
<th>å‘½ä»¤å</th>
<th>åŠŸèƒ½æè¿°</th>
<th>ä½¿ç”¨ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>cat</td>
<td>æ˜¾ç¤ºæˆ–è¿æ¥æ–‡ä»¶</td>
<td>cat filename</td>
</tr>
<tr>
<td>pg</td>
<td>åˆ†é¡µæ ¼å¼åŒ–æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</td>
<td>pg filename</td>
</tr>
<tr>
<td>more</td>
<td>åˆ†å±æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</td>
<td>more filename</td>
</tr>
<tr>
<td>od</td>
<td>æ˜¾ç¤ºéæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹</td>
<td>od -c filename</td>
</tr>
<tr>
<td>cp</td>
<td>å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•</td>
<td>cp file1 file2</td>
</tr>
<tr>
<td>rm</td>
<td>åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•</td>
<td>rm filename</td>
</tr>
<tr>
<td>mv</td>
<td>æ”¹å˜æ–‡ä»¶åæˆ–æ‰€åœ¨ç›®å½•</td>
<td>mv file1 file2</td>
</tr>
<tr>
<td>ln</td>
<td>è”æ¥æ–‡ä»¶</td>
<td>ln -s file1 file2</td>
</tr>
<tr>
<td>find</td>
<td>ä½¿ç”¨åŒ¹é…è¡¨è¾¾å¼æŸ¥æ‰¾æ–‡ä»¶</td>
<td>find . -name â€œ*.câ€ -print</td>
</tr>
<tr>
<td>file</td>
<td>æ˜¾ç¤ºæ–‡ä»¶ç±»å‹</td>
<td>file filename</td>
</tr>
<tr>
<td>open</td>
<td>ä½¿ç”¨é»˜è®¤çš„ç¨‹åºæ‰“å¼€æ–‡ä»¶</td>
<td>open filename</td>
</tr>
</tbody>
</table>
<h2 id="é€‰æ‹©æ“ä½œ"><a href="#é€‰æ‹©æ“ä½œ" class="headerlink" title="é€‰æ‹©æ“ä½œ"></a>é€‰æ‹©æ“ä½œ</h2><table>
<thead>
<tr>
<th>å‘½ä»¤å</th>
<th>åŠŸèƒ½æè¿°</th>
<th>ä½¿ç”¨ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>head</td>
<td>æ˜¾ç¤ºæ–‡ä»¶çš„æœ€åˆå‡ è¡Œ</td>
<td>head -20 filename</td>
</tr>
<tr>
<td>tail</td>
<td>æ˜¾ç¤ºæ–‡ä»¶çš„æœ€åå‡ è¡Œ</td>
<td>tail -15 filename</td>
</tr>
<tr>
<td>cut</td>
<td>æ˜¾ç¤ºæ–‡ä»¶æ¯è¡Œä¸­çš„æŸäº›åŸŸ</td>
<td>cut -f1,7 -d: /etc/passwd</td>
</tr>
<tr>
<td>colrm</td>
<td>ä»æ ‡å‡†è¾“å…¥ä¸­åˆ é™¤è‹¥å¹²åˆ—</td>
<td>colrm 8 20 file2</td>
</tr>
<tr>
<td>paste</td>
<td>æ¨ªå‘è¿æ¥æ–‡ä»¶</td>
<td>paste file1 file2</td>
</tr>
<tr>
<td>diff</td>
<td>æ¯”è¾ƒå¹¶æ˜¾ç¤ºä¸¤ä¸ªæ–‡ä»¶çš„å·®å¼‚</td>
<td>diff file1 file2</td>
</tr>
<tr>
<td>sed</td>
<td>éäº¤äº’æ–¹å¼æµç¼–è¾‘å™¨</td>
<td>sed â€œs/red/green/gâ€ filename</td>
</tr>
<tr>
<td>grep</td>
<td>åœ¨æ–‡ä»¶ä¸­æŒ‰æ¨¡å¼æŸ¥æ‰¾</td>
<td>grep â€œ^[a-zA-Z]â€ filename</td>
</tr>
<tr>
<td>awk</td>
<td>åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾å¹¶å¤„ç†æ¨¡å¼</td>
<td>awk â€˜{print $1 $1}â€™ filename</td>
</tr>
<tr>
<td>sort</td>
<td>æ’åºæˆ–å½’å¹¶æ–‡ä»¶</td>
<td>sort -d -f -u file1</td>
</tr>
<tr>
<td>uniq</td>
<td>å»æ‰æ–‡ä»¶ä¸­çš„é‡å¤è¡Œ</td>
<td>uniq file1 file2</td>
</tr>
<tr>
<td>comm</td>
<td>æ˜¾ç¤ºä¸¤æœ‰åºæ–‡ä»¶çš„å…¬å…±å’Œéå…¬å…±è¡Œ</td>
<td>comm file1 file2</td>
</tr>
<tr>
<td>wc</td>
<td>ç»Ÿè®¡æ–‡ä»¶çš„å­—ç¬¦æ•°ã€è¯æ•°å’Œè¡Œæ•°</td>
<td>wc filename</td>
</tr>
<tr>
<td>nl</td>
<td>ç»™æ–‡ä»¶åŠ ä¸Šè¡Œå·</td>
<td>nl file1 &gt;file2</td>
</tr>
</tbody>
</table>
<h2 id="å®‰å…¨æ“ä½œ"><a href="#å®‰å…¨æ“ä½œ" class="headerlink" title="å®‰å…¨æ“ä½œ"></a>å®‰å…¨æ“ä½œ</h2><table>
<thead>
<tr>
<th>å‘½ä»¤å</th>
<th>åŠŸèƒ½æè¿°</th>
<th>ä½¿ç”¨ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>passwd</td>
<td>ä¿®æ”¹ç”¨æˆ·å¯†ç </td>
<td>passwd</td>
</tr>
<tr>
<td>chmod</td>
<td>æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™</td>
<td>chmod ug+x filename</td>
</tr>
<tr>
<td>umask</td>
<td>å®šä¹‰åˆ›å»ºæ–‡ä»¶çš„æƒé™æ©ç </td>
<td>umask 027</td>
</tr>
<tr>
<td>chown</td>
<td>æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•çš„å±ä¸»</td>
<td>chown newowner filename</td>
</tr>
<tr>
<td>chgrp</td>
<td>æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç»„</td>
<td>chgrp staff filename</td>
</tr>
<tr>
<td>xlock</td>
<td>ç»™ç»ˆç«¯ä¸Šé”</td>
<td>xlock -remote</td>
</tr>
</tbody>
</table>
<h2 id="ç¼–ç¨‹æ“ä½œ"><a href="#ç¼–ç¨‹æ“ä½œ" class="headerlink" title="ç¼–ç¨‹æ“ä½œ"></a>ç¼–ç¨‹æ“ä½œ</h2><table>
<thead>
<tr>
<th>å‘½ä»¤å</th>
<th>åŠŸèƒ½æè¿°</th>
<th>ä½¿ç”¨ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>make</td>
<td>ç»´æŠ¤å¯æ‰§è¡Œç¨‹åºçš„æœ€æ–°ç‰ˆæœ¬</td>
<td>make</td>
</tr>
<tr>
<td>touch</td>
<td>æ›´æ–°æ–‡ä»¶çš„è®¿é—®å’Œä¿®æ”¹æ—¶é—´</td>
<td>touch -m 05202400 filename</td>
</tr>
<tr>
<td>dbx</td>
<td>å‘½ä»¤è¡Œç•Œé¢è°ƒè¯•å·¥å…·</td>
<td>dbx a.out</td>
</tr>
<tr>
<td>xde</td>
<td>å›¾å½¢ç”¨æˆ·ç•Œé¢è°ƒè¯•å·¥å…·</td>
<td>xde a.out</td>
</tr>
</tbody>
</table>
<h2 id="è¿›ç¨‹æ“ä½œ"><a href="#è¿›ç¨‹æ“ä½œ" class="headerlink" title="è¿›ç¨‹æ“ä½œ"></a>è¿›ç¨‹æ“ä½œ</h2><table>
<thead>
<tr>
<th>å‘½ä»¤å</th>
<th>åŠŸèƒ½æè¿°</th>
<th>ä½¿ç”¨ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>ps</td>
<td>æ˜¾ç¤ºè¿›ç¨‹å½“å‰çŠ¶æ€</td>
<td>ps u</td>
</tr>
<tr>
<td>kill</td>
<td>ç»ˆæ­¢è¿›ç¨‹</td>
<td>kill -9 30142</td>
</tr>
<tr>
<td>nice</td>
<td>æ”¹å˜å¾…æ‰§è¡Œå‘½ä»¤çš„ä¼˜å…ˆçº§</td>
<td>nice cc -c *.c</td>
</tr>
<tr>
<td>renice</td>
<td>æ”¹å˜å·²è¿è¡Œè¿›ç¨‹çš„ä¼˜å…ˆçº§</td>
<td>renice +20 32768</td>
</tr>
</tbody>
</table>
<h2 id="æ—¶é—´æ“ä½œ"><a href="#æ—¶é—´æ“ä½œ" class="headerlink" title="æ—¶é—´æ“ä½œ"></a>æ—¶é—´æ“ä½œ</h2><table>
<thead>
<tr>
<th>å‘½ä»¤å    åŠŸèƒ½æè¿°</th>
<th>ä½¿ç”¨ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>date</td>
<td>æ˜¾ç¤ºç³»ç»Ÿçš„å½“å‰æ—¥æœŸå’Œæ—¶é—´</td>
<td>date</td>
</tr>
<tr>
<td>cal</td>
<td>æ˜¾ç¤ºæ—¥å†</td>
<td>cal 8 1996</td>
</tr>
<tr>
<td>time</td>
<td>ç»Ÿè®¡ç¨‹åºçš„æ‰§è¡Œæ—¶é—´</td>
<td>time a.out</td>
</tr>
</tbody>
</table>
<h2 id="ç½‘ç»œä¸é€šä¿¡æ“ä½œ"><a href="#ç½‘ç»œä¸é€šä¿¡æ“ä½œ" class="headerlink" title="ç½‘ç»œä¸é€šä¿¡æ“ä½œ"></a>ç½‘ç»œä¸é€šä¿¡æ“ä½œ</h2><table>
<thead>
<tr>
<th>å‘½ä»¤å</th>
<th>åŠŸèƒ½æè¿°</th>
<th>ä½¿ç”¨ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>telnet</td>
<td>è¿œç¨‹ç™»å½•</td>
<td>telnet hpc.sp.net.edu.cn</td>
</tr>
<tr>
<td>rlogin</td>
<td>è¿œç¨‹ç™»å½•</td>
<td>rlogin hostname -l username</td>
</tr>
<tr>
<td>rsh</td>
<td>åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡ŒæŒ‡å®šå‘½ä»¤</td>
<td>rsh f01n03 date</td>
</tr>
<tr>
<td>ftp</td>
<td>åœ¨æœ¬åœ°ä¸»æœºä¸è¿œç¨‹ä¸»æœºä¹‹é—´ä¼ è¾“æ–‡ä»¶</td>
<td>ftp ftp.sp.net.edu.cn</td>
</tr>
<tr>
<td>rcp</td>
<td>åœ¨æœ¬åœ°ä¸»æœºä¸è¿œç¨‹ä¸»æœºä¹‹é—´å¤åˆ¶æ–‡ä»¶</td>
<td>rcp file1 host1:file2</td>
</tr>
<tr>
<td>ping</td>
<td>ç»™ä¸€ä¸ªç½‘ç»œä¸»æœºå‘é€å›åº”è¯·æ±‚</td>
<td>ping hpc.sp.net.edu.cn</td>
</tr>
<tr>
<td>mail</td>
<td>é˜…è¯»å’Œå‘é€ç”µå­é‚®ä»¶</td>
<td>mail</td>
</tr>
<tr>
<td>write</td>
<td>ç»™å¦ä¸€ç”¨æˆ·å‘é€æŠ¥æ–‡</td>
<td>write username pts/1</td>
</tr>
<tr>
<td>mesg</td>
<td>å…è®¸æˆ–æ‹’ç»æ¥æ”¶æŠ¥æ–‡</td>
<td>mesg n</td>
</tr>
</tbody>
</table>
<h2 id="Korn-Shell-å‘½ä»¤"><a href="#Korn-Shell-å‘½ä»¤" class="headerlink" title="Korn Shell å‘½ä»¤"></a>Korn Shell å‘½ä»¤</h2><table>
<thead>
<tr>
<th>å‘½ä»¤å</th>
<th>åŠŸèƒ½æè¿°</th>
<th>ä½¿ç”¨ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>history</td>
<td>åˆ—å‡ºæœ€è¿‘æ‰§è¡Œè¿‡çš„å‡ æ¡å‘½ä»¤åŠç¼–å·</td>
<td>history</td>
</tr>
<tr>
<td>r</td>
<td>é‡å¤æ‰§è¡Œæœ€è¿‘æ‰§è¡Œè¿‡çš„æŸæ¡å‘½ä»¤</td>
<td>r -2</td>
</tr>
<tr>
<td>alias</td>
<td>ç»™æŸä¸ªå‘½ä»¤å®šä¹‰åˆ«å</td>
<td>alias del=rm -i</td>
</tr>
<tr>
<td>unalias</td>
<td>å–æ¶ˆå¯¹æŸä¸ªåˆ«åçš„å®šä¹‰</td>
<td>unalias del</td>
</tr>
</tbody>
</table>
<h2 id="å…¶å®ƒå‘½ä»¤"><a href="#å…¶å®ƒå‘½ä»¤" class="headerlink" title="å…¶å®ƒå‘½ä»¤"></a>å…¶å®ƒå‘½ä»¤</h2><table>
<thead>
<tr>
<th>å‘½ä»¤å</th>
<th>åŠŸèƒ½æè¿°</th>
<th>ä½¿ç”¨ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>uname</td>
<td>æ˜¾ç¤ºæ“ä½œç³»ç»Ÿçš„æœ‰å…³ä¿¡æ¯</td>
<td>uname -a</td>
</tr>
<tr>
<td>clear</td>
<td>æ¸…é™¤å±å¹•æˆ–çª—å£å†…å®¹</td>
<td>clear</td>
</tr>
<tr>
<td>env</td>
<td>æ˜¾ç¤ºå½“å‰æ‰€æœ‰è®¾ç½®è¿‡çš„ç¯å¢ƒå˜é‡</td>
<td>env</td>
</tr>
<tr>
<td>who</td>
<td>åˆ—å‡ºå½“å‰ç™»å½•çš„æ‰€æœ‰ç”¨æˆ·</td>
<td>who</td>
</tr>
<tr>
<td>whoami</td>
<td>æ˜¾ç¤ºå½“å‰æ­£è¿›è¡Œæ“ä½œçš„ç”¨æˆ·å</td>
<td>whoami</td>
</tr>
<tr>
<td>tty</td>
<td>æ˜¾ç¤ºç»ˆç«¯æˆ–ä¼ªç»ˆç«¯çš„åç§°</td>
<td>tty</td>
</tr>
<tr>
<td>stty</td>
<td>æ˜¾ç¤ºæˆ–é‡ç½®æ§åˆ¶é”®å®šä¹‰</td>
<td>stty -a</td>
</tr>
<tr>
<td>du</td>
<td>æŸ¥è¯¢ç£ç›˜ä½¿ç”¨æƒ…å†µ</td>
<td>du -k subdir</td>
</tr>
<tr>
<td>df</td>
<td>æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿçš„æ€»ç©ºé—´å’Œå¯ç”¨ç©ºé—´</td>
<td>df /tmp</td>
</tr>
<tr>
<td>w</td>
<td>æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ´»åŠ¨çš„æ€»ä¿¡æ¯</td>
<td>w</td>
</tr>
</tbody>
</table>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Mac-ç»ˆç«¯å‘½ä»¤å¤§å…¨&quot;&gt;&lt;a href=&quot;#Mac-ç»ˆç«¯å‘½ä»¤å¤§å…¨&quot; class=&quot;headerlink&quot; title=&quot;Mac ç»ˆç«¯å‘½ä»¤å¤§å…¨&quot;&gt;&lt;/a&gt;Mac ç»ˆç«¯å‘½ä»¤å¤§å…¨&lt;/h1&gt;&lt;h2 id=&quot;ç›®å½•æ“ä½œ&quot;&gt;&lt;a href=&quot;#ç›®å½•æ“ä½œ&quot; class=&quot;head
    
    </summary>
    
    
      <category term="å¼€å‘è€…" scheme="https://microzz.com/tags/%E5%BC%80%E5%8F%91%E8%80%85/"/>
    
      <category term="Mac" scheme="https://microzz.com/tags/Mac/"/>
    
      <category term="Shell" scheme="https://microzz.com/tags/Shell/"/>
    
      <category term="Linux" scheme="https://microzz.com/tags/Linux/"/>
    
      <category term="Unix" scheme="https://microzz.com/tags/Unix/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å¼€å‘é¢è¯•é¢˜é›†é”¦</title>
    <link href="https://microzz.com/2017/02/10/interview/"/>
    <id>https://microzz.com/2017/02/10/interview/</id>
    <published>2017-02-10T10:01:15.000Z</published>
    <updated>2017-06-15T01:54:27.499Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰ç«¯å¼€å‘é¢è¯•é¢˜"><a href="#å‰ç«¯å¼€å‘é¢è¯•é¢˜" class="headerlink" title="å‰ç«¯å¼€å‘é¢è¯•é¢˜"></a>å‰ç«¯å¼€å‘é¢è¯•é¢˜</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‰ç«¯è¿˜æ˜¯ä¸€ä¸ªå¹´è½»çš„è¡Œä¸šï¼Œæ–°çš„è¡Œä¸šæ ‡å‡†ï¼Œ æ¡†æ¶ï¼Œ åº“éƒ½ä¸æ–­åœ¨æ›´æ–°å’Œæ–°å¢ï¼Œæ­£å¦‚èµ«é—¨åœ¨2015æ·±JSå¤§ä¼šä¸Šçš„ã€Šå‰ç«¯æœåŠ¡åŒ–ä¹‹è·¯ã€‹ä¸»é¢˜æ¼”è®²ä¸­è¯´çš„ä¸€å¥è¯ï¼šâ€œæ¯18è‡³24ä¸ªæœˆï¼Œå‰ç«¯éƒ½ä¼šéš¾ä¸€å€â€ï¼Œè¿™äº›å˜åŒ–ä½¿å‰ç«¯çš„èƒ½åŠ›æ›´åŠ ä¸°å¯Œã€åˆ›é€ çš„åº”ç”¨ä¹Ÿä¼šæ›´åŠ å®Œç¾ã€‚æ‰€ä»¥å…³æ³¨å„ç§å‰ç«¯æŠ€æœ¯ï¼Œè·Ÿä¸Šå¿«é€Ÿå˜åŒ–çš„èŠ‚å¥ï¼Œä¹Ÿæ˜¯èº«ä¸ºä¸€ä¸ªå‰ç«¯ç¨‹åºå‘˜å¿…å¤‡çš„æŠ€èƒ½ä¹‹ä¸€ã€‚</p>
<ol>
<li><p>é¢è¯•é¢˜ç›®ï¼š æ ¹æ®ä½ çš„ç­‰çº§å’ŒèŒä½çš„å˜åŒ–ï¼Œå…¥é—¨çº§åˆ°ä¸“å®¶çº§ï¼Œå¹¿åº¦å’Œæ·±åº¦éƒ½ä¼šæœ‰æ‰€å¢åŠ ã€‚</p>
</li>
<li><p>é¢˜ç›®ç±»å‹ï¼š ç†è®ºçŸ¥è¯†ã€ç®—æ³•ã€é¡¹ç›®ç»†èŠ‚ã€æŠ€æœ¯è§†é‡ã€å¼€æ”¾æ€§é¢˜ã€å·¥ä½œæ¡ˆä¾‹ã€‚</p>
</li>
<li><p>ç»†èŠ‚è¿½é—®ï¼š å¯ä»¥ç¡®ä¿é—®åˆ°ä½ å¼€å§‹ä¸æ‡‚æˆ–é¢è¯•å®˜å¼€å§‹ä¸æ‡‚ä¸ºæ­¢ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å»¶å±•é¢˜ç›®çš„åŒºåˆ†åº¦å’Œæ·±åº¦ï¼ŒçŸ¥é“ä½ çš„å®é™…èƒ½åŠ›ã€‚å› ä¸ºè¿™ç§çŸ¥è¯†å…³è”æ˜¯é•¿æ—¶æœŸçš„å­¦ä¹ ï¼Œä¸´æ—¶æŠ±ä½›è„šç»å¯¹æ˜¯è®°ä¸ä½çš„ã€‚</p>
</li>
<li><p>å›ç­”é—®é¢˜å†æ£’ï¼Œé¢è¯•å®˜ï¼ˆå¯èƒ½æ˜¯ä½ é¢è¯•èŒä½çš„ç›´æ¥é¢†å¯¼ï¼‰ï¼Œä¼šè€ƒè™‘æˆ‘è¦ä¸è¦è¿™ä¸ªäººåšæˆ‘çš„åŒäº‹ï¼Ÿæ‰€ä»¥æ€åº¦å¾ˆé‡è¦ã€é™¤äº†èƒ½åšäº‹ï¼Œè¿˜è¦ä¼šåšäººã€‚ï¼ˆæ„Ÿè§‰æ›´åƒæ˜¯ç›¸äº²( â€¢Ì£Ì£Ì£Ì£Ì£Ì¥Ìà¯°â€¢Ì£Ì£Ì£Ì£Ì£Ì¥Ì€ )ï¼‰</p>
</li>
<li><p>èµ„æ·±çš„å‰ç«¯å¼€å‘èƒ½æŠŠabsoluteå’Œrelativeå¼„æ··ï¼Œè¿™æ ·çš„äººä¸è¦ä¹Ÿç½¢ï¼Œå› ä¸ºå›¢é˜Ÿéœ€è¦çš„æ˜¯ï¼šä½ è¿™ä¸ªäººå…·æœ‰å¯ä»¥ä¾é çš„æ‰èƒ½ï¼ˆé è°±ï¼‰ã€‚</p>
</li>
</ol>
<p><strong>å‰ç«¯å¼€å‘çŸ¥è¯†ç‚¹ï¼š</strong></p>
<pre><code>HTML&amp;CSSï¼š
    å¯¹Webæ ‡å‡†çš„ç†è§£ã€æµè§ˆå™¨å†…æ ¸å·®å¼‚ã€å…¼å®¹æ€§ã€hackã€CSSåŸºæœ¬åŠŸï¼šå¸ƒå±€ã€ç›’å­æ¨¡å‹ã€é€‰æ‹©å™¨ä¼˜å…ˆçº§ã€
    HTML5ã€CSS3ã€Flexbox

JavaScriptï¼š
    æ•°æ®ç±»å‹ã€è¿ç®—ã€å¯¹è±¡ã€Functionã€ç»§æ‰¿ã€é—­åŒ…ã€ä½œç”¨åŸŸã€åŸå‹é“¾ã€äº‹ä»¶ã€RegExpã€JSONã€Ajaxã€
    DOMã€BOMã€å†…å­˜æ³„æ¼ã€è·¨åŸŸã€å¼‚æ­¥è£…è½½ã€æ¨¡æ¿å¼•æ“ã€å‰ç«¯MVCã€è·¯ç”±ã€æ¨¡å—åŒ–ã€Canvasã€ECMAScript 6ã€Nodejs

å…¶ä»–ï¼š
    ç§»åŠ¨ç«¯ã€å“åº”å¼ã€è‡ªåŠ¨åŒ–æ„å»ºã€HTTPã€ç¦»çº¿å­˜å‚¨ã€WEBå®‰å…¨ã€ä¼˜åŒ–ã€é‡æ„ã€å›¢é˜Ÿåä½œã€å¯ç»´æŠ¤ã€æ˜“ç”¨æ€§ã€SEOã€UEDã€æ¶æ„ã€èŒä¸šç”Ÿæ¶¯ã€å¿«é€Ÿå­¦ä¹ èƒ½åŠ›
</code></pre><p>ä½œä¸ºä¸€åå‰ç«¯å·¥ç¨‹å¸ˆï¼Œ<strong>æ— è®ºå·¥ä½œå¹´å¤´é•¿çŸ­éƒ½åº”è¯¥æŒæ¡çš„çŸ¥è¯†ç‚¹</strong>ï¼š</p>
<pre><code>    1ã€DOMç»“æ„ â€”â€” ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å¯èƒ½å­˜åœ¨å“ªäº›å…³ç³»ä»¥åŠå¦‚ä½•åœ¨èŠ‚ç‚¹ä¹‹é—´ä»»æ„ç§»åŠ¨ã€‚

    2ã€DOMæ“ä½œ â€”â€” å¦‚ä½•æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ç­‰ã€‚

    3ã€äº‹ä»¶ â€”â€” å¦‚ä½•ä½¿ç”¨äº‹ä»¶ï¼Œä»¥åŠIEå’Œæ ‡å‡†DOMäº‹ä»¶æ¨¡å‹ä¹‹é—´å­˜åœ¨çš„å·®åˆ«ã€‚

    4ã€XMLHttpRequest â€”â€” è¿™æ˜¯ä»€ä¹ˆã€æ€æ ·å®Œæ•´åœ°æ‰§è¡Œä¸€æ¬¡GETè¯·æ±‚ã€æ€æ ·æ£€æµ‹é”™è¯¯ã€‚

    5ã€ä¸¥æ ¼æ¨¡å¼ä¸æ··æ‚æ¨¡å¼ â€”â€” å¦‚ä½•è§¦å‘è¿™ä¸¤ç§æ¨¡å¼ï¼ŒåŒºåˆ†å®ƒä»¬æœ‰ä½•æ„ä¹‰ã€‚

    6ã€ç›’æ¨¡å‹ â€”â€” å¤–è¾¹è·ã€å†…è¾¹è·å’Œè¾¹æ¡†ä¹‹é—´çš„å…³ç³»ï¼ŒåŠIE8ä»¥ä¸‹ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­çš„ç›’æ¨¡å‹

    7ã€å—çº§å…ƒç´ ä¸è¡Œå†…å…ƒç´  â€”â€” æ€ä¹ˆç”¨CSSæ§åˆ¶å®ƒä»¬ã€ä»¥åŠå¦‚ä½•åˆç†çš„ä½¿ç”¨å®ƒä»¬

    8ã€æµ®åŠ¨å…ƒç´  â€”â€” æ€ä¹ˆä½¿ç”¨å®ƒä»¬ã€å®ƒä»¬æœ‰ä»€ä¹ˆé—®é¢˜ä»¥åŠæ€ä¹ˆè§£å†³è¿™äº›é—®é¢˜ã€‚

    9ã€HTMLä¸XHTML â€”â€” äºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½ è§‰å¾—åº”è¯¥ä½¿ç”¨å“ªä¸€ä¸ªå¹¶è¯´å‡ºç†ç”±ã€‚

    10ã€JSON â€”â€” ä½œç”¨ã€ç”¨é€”ã€è®¾è®¡ç»“æ„ã€‚
</code></pre><p><strong>å¤‡æ³¨ï¼š</strong></p>
<pre><code>æ ¹æ®è‡ªå·±éœ€è¦é€‰æ‹©æ€§é˜…è¯»ï¼Œé¢è¯•é¢˜æ˜¯å¯¹ç†è®ºçŸ¥è¯†çš„æ€»ç»“ï¼Œè®©è‡ªå·±å­¦ä¼šåº”è¯¥å¦‚ä½•è¡¨è¾¾ã€‚

èµ„æ–™ç­”æ¡ˆä¸å¤Ÿæ­£ç¡®å’Œå…¨é¢ï¼Œæ¬¢è¿æ¬¢è¿Starå’Œæäº¤issuesã€‚

æ ¼å¼ä¸æ–­ä¿®æ”¹æ›´æ–°ä¸­ã€‚

æ›´æ–°è®°å½•ï¼š
2016å¹´3æœˆ25æ—¥ï¼šæ–°å¢ECMAScript6 ç›¸å…³é—®é¢˜
</code></pre><h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><ul>
<li><p>Doctypeä½œç”¨ï¼Ÿæ ‡å‡†æ¨¡å¼ä¸å…¼å®¹æ¨¡å¼å„æœ‰ä»€ä¹ˆåŒºåˆ«?</p>
<pre><code>  ï¼ˆ1ï¼‰ã€&lt;!DOCTYPE&gt;å£°æ˜ä½äºä½äºHTMLæ–‡æ¡£ä¸­çš„ç¬¬ä¸€è¡Œï¼Œå¤„äº &lt;html&gt; æ ‡ç­¾ä¹‹å‰ã€‚å‘ŠçŸ¥æµè§ˆå™¨çš„è§£æå™¨ç”¨ä»€ä¹ˆæ–‡æ¡£æ ‡å‡†è§£æè¿™ä¸ªæ–‡æ¡£ã€‚DOCTYPEä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®ä¼šå¯¼è‡´æ–‡æ¡£ä»¥å…¼å®¹æ¨¡å¼å‘ˆç°ã€‚

  ï¼ˆ2ï¼‰ã€æ ‡å‡†æ¨¡å¼çš„æ’ç‰ˆ å’ŒJSè¿ä½œæ¨¡å¼éƒ½æ˜¯ä»¥è¯¥æµè§ˆå™¨æ”¯æŒçš„æœ€é«˜æ ‡å‡†è¿è¡Œã€‚åœ¨å…¼å®¹æ¨¡å¼ä¸­ï¼Œé¡µé¢ä»¥å®½æ¾çš„å‘åå…¼å®¹çš„æ–¹å¼æ˜¾ç¤º,æ¨¡æ‹Ÿè€å¼æµè§ˆå™¨çš„è¡Œä¸ºä»¥é˜²æ­¢ç«™ç‚¹æ— æ³•å·¥ä½œã€‚
</code></pre></li>
<li><p>HTML5 ä¸ºä»€ä¹ˆåªéœ€è¦å†™ &lt;!DOCTYPE HTML&gt;ï¼Ÿ</p>
<pre><code>   HTML5 ä¸åŸºäº SGMLï¼Œå› æ­¤ä¸éœ€è¦å¯¹DTDè¿›è¡Œå¼•ç”¨ï¼Œä½†æ˜¯éœ€è¦doctypeæ¥è§„èŒƒæµè§ˆå™¨çš„è¡Œä¸ºï¼ˆè®©æµè§ˆå™¨æŒ‰ç…§å®ƒä»¬åº”è¯¥çš„æ–¹å¼æ¥è¿è¡Œï¼‰ï¼›

   è€ŒHTML4.01åŸºäºSGML,æ‰€ä»¥éœ€è¦å¯¹DTDè¿›è¡Œå¼•ç”¨ï¼Œæ‰èƒ½å‘ŠçŸ¥æµè§ˆå™¨æ–‡æ¡£æ‰€ä½¿ç”¨çš„æ–‡æ¡£ç±»å‹ã€‚
</code></pre></li>
<li><p>è¡Œå†…å…ƒç´ æœ‰å“ªäº›ï¼Ÿå—çº§å…ƒç´ æœ‰å“ªäº›ï¼Ÿ ç©º(void)å…ƒç´ æœ‰é‚£äº›ï¼Ÿ</p>
<pre><code>  é¦–å…ˆï¼šCSSè§„èŒƒè§„å®šï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰displayå±æ€§ï¼Œç¡®å®šè¯¥å…ƒç´ çš„ç±»å‹ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰é»˜è®¤çš„displayå€¼ï¼Œå¦‚divçš„displayé»˜è®¤å€¼ä¸ºâ€œblockâ€ï¼Œåˆ™ä¸ºâ€œå—çº§â€å…ƒç´ ï¼›spané»˜è®¤displayå±æ€§å€¼ä¸ºâ€œinlineâ€ï¼Œæ˜¯â€œè¡Œå†…â€å…ƒç´ ã€‚

  ï¼ˆ1ï¼‰è¡Œå†…å…ƒç´ æœ‰ï¼ša b span img input select strongï¼ˆå¼ºè°ƒçš„è¯­æ°”ï¼‰
  ï¼ˆ2ï¼‰å—çº§å…ƒç´ æœ‰ï¼šdiv ul ol li dl dt dd h1 h2 h3 h4â€¦p

  ï¼ˆ3ï¼‰å¸¸è§çš„ç©ºå…ƒç´ ï¼š
      &lt;br&gt; &lt;hr&gt; &lt;img&gt; &lt;input&gt; &lt;link&gt; &lt;meta&gt;
      é²œä¸ºäººçŸ¥çš„æ˜¯ï¼š
      &lt;area&gt; &lt;base&gt; &lt;col&gt; &lt;command&gt; &lt;embed&gt; &lt;keygen&gt; &lt;param&gt; &lt;source&gt; &lt;track&gt; &lt;wbr&gt;

  ä¸åŒæµè§ˆå™¨ï¼ˆç‰ˆæœ¬ï¼‰ã€HTML4ï¼ˆ5ï¼‰ã€CSS2ç­‰å®é™…ç•¥æœ‰å·®å¼‚
  å‚è€ƒ: http://stackoverflow.com/questions/6867254/browsers-default-css-for-html-elements
</code></pre></li>
</ul>
<ul>
<li>é¡µé¢å¯¼å…¥æ ·å¼æ—¶ï¼Œä½¿ç”¨linkå’Œ@importæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li>
</ul>
<pre><code>    ï¼ˆ1ï¼‰linkå±äºXHTMLæ ‡ç­¾ï¼Œé™¤äº†åŠ è½½CSSå¤–ï¼Œè¿˜èƒ½ç”¨äºå®šä¹‰RSS, å®šä¹‰relè¿æ¥å±æ€§ç­‰ä½œç”¨ï¼›è€Œ@importæ˜¯CSSæä¾›çš„ï¼Œåªèƒ½ç”¨äºåŠ è½½CSS;

    ï¼ˆ2ï¼‰é¡µé¢è¢«åŠ è½½çš„æ—¶ï¼Œlinkä¼šåŒæ—¶è¢«åŠ è½½ï¼Œè€Œ@importå¼•ç”¨çš„CSSä¼šç­‰åˆ°é¡µé¢è¢«åŠ è½½å®Œå†åŠ è½½;

    ï¼ˆ3ï¼‰importæ˜¯CSS2.1 æå‡ºçš„ï¼Œåªåœ¨IE5ä»¥ä¸Šæ‰èƒ½è¢«è¯†åˆ«ï¼Œè€Œlinkæ˜¯XHTMLæ ‡ç­¾ï¼Œæ— å…¼å®¹é—®é¢˜;
</code></pre><ul>
<li><p>ä»‹ç»ä¸€ä¸‹ä½ å¯¹æµè§ˆå™¨å†…æ ¸çš„ç†è§£ï¼Ÿ</p>
<pre><code>  ä¸»è¦åˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ¸²æŸ“å¼•æ“(layout engineeræˆ–Rendering Engine)å’ŒJSå¼•æ“ã€‚
  æ¸²æŸ“å¼•æ“ï¼šè´Ÿè´£å–å¾—ç½‘é¡µçš„å†…å®¹ï¼ˆHTMLã€XMLã€å›¾åƒç­‰ç­‰ï¼‰ã€æ•´ç†è®¯æ¯ï¼ˆä¾‹å¦‚åŠ å…¥CSSç­‰ï¼‰ï¼Œä»¥åŠè®¡ç®—ç½‘é¡µçš„æ˜¾ç¤ºæ–¹å¼ï¼Œç„¶åä¼šè¾“å‡ºè‡³æ˜¾ç¤ºå™¨æˆ–æ‰“å°æœºã€‚æµè§ˆå™¨çš„å†…æ ¸çš„ä¸åŒå¯¹äºç½‘é¡µçš„è¯­æ³•è§£é‡Šä¼šæœ‰ä¸åŒï¼Œæ‰€ä»¥æ¸²æŸ“çš„æ•ˆæœä¹Ÿä¸ç›¸åŒã€‚æ‰€æœ‰ç½‘é¡µæµè§ˆå™¨ã€ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ä»¥åŠå…¶å®ƒéœ€è¦ç¼–è¾‘ã€æ˜¾ç¤ºç½‘ç»œå†…å®¹çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦å†…æ ¸ã€‚

  JSå¼•æ“åˆ™ï¼šè§£æå’Œæ‰§è¡Œjavascriptæ¥å®ç°ç½‘é¡µçš„åŠ¨æ€æ•ˆæœã€‚

  æœ€å¼€å§‹æ¸²æŸ“å¼•æ“å’ŒJSå¼•æ“å¹¶æ²¡æœ‰åŒºåˆ†çš„å¾ˆæ˜ç¡®ï¼Œåæ¥JSå¼•æ“è¶Šæ¥è¶Šç‹¬ç«‹ï¼Œå†…æ ¸å°±å€¾å‘äºåªæŒ‡æ¸²æŸ“å¼•æ“ã€‚
</code></pre></li>
<li><p>å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›ï¼Ÿ</p>
<pre><code>  Tridentå†…æ ¸ï¼šIE,MaxThon,TT,The World,360,æœç‹—æµè§ˆå™¨ç­‰ã€‚[åˆç§°MSHTML]
  Geckoå†…æ ¸ï¼šNetscape6åŠä»¥ä¸Šç‰ˆæœ¬ï¼ŒFF,MozillaSuite/SeaMonkeyç­‰
  Prestoå†…æ ¸ï¼šOpera7åŠä»¥ä¸Šã€‚      [Operaå†…æ ¸åŸä¸ºï¼šPrestoï¼Œç°ä¸ºï¼šBlink;]
  Webkitå†…æ ¸ï¼šSafari,Chromeç­‰ã€‚   [ Chromeçš„ï¼šBlinkï¼ˆWebKitçš„åˆ†æ”¯ï¼‰]

è¯¦ç»†æ–‡ç« ï¼š[æµè§ˆå™¨å†…æ ¸çš„è§£æå’Œå¯¹æ¯”](http://www.cnblogs.com/fullhouse/archive/2011/12/19/2293455.html)
</code></pre></li>
</ul>
<ul>
<li>html5æœ‰å“ªäº›æ–°ç‰¹æ€§ã€ç§»é™¤äº†é‚£äº›å…ƒç´ ï¼Ÿå¦‚ä½•å¤„ç†HTML5æ–°æ ‡ç­¾çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Ÿå¦‚ä½•åŒºåˆ† HTML å’Œ<br>HTML5ï¼Ÿ</li>
</ul>
<pre><code>    * HTML5 ç°åœ¨å·²ç»ä¸æ˜¯ SGML çš„å­é›†ï¼Œä¸»è¦æ˜¯å…³äºå›¾åƒï¼Œä½ç½®ï¼Œå­˜å‚¨ï¼Œå¤šä»»åŠ¡ç­‰åŠŸèƒ½çš„å¢åŠ ã€‚
          ç»˜ç”» canvas;
          ç”¨äºåª’ä»‹å›æ”¾çš„ video å’Œ audio å…ƒç´ ;
          æœ¬åœ°ç¦»çº¿å­˜å‚¨ localStorage é•¿æœŸå­˜å‚¨æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±;
          sessionStorage çš„æ•°æ®åœ¨æµè§ˆå™¨å…³é—­åè‡ªåŠ¨åˆ é™¤;
          è¯­æ„åŒ–æ›´å¥½çš„å†…å®¹å…ƒç´ ï¼Œæ¯”å¦‚ articleã€footerã€headerã€navã€section;
          è¡¨å•æ§ä»¶ï¼Œcalendarã€dateã€timeã€emailã€urlã€search;
          æ–°çš„æŠ€æœ¯webworker, websocket, Geolocation;

      ç§»é™¤çš„å…ƒç´ ï¼š
          çº¯è¡¨ç°çš„å…ƒç´ ï¼šbasefontï¼Œbigï¼Œcenterï¼Œfont, sï¼Œstrikeï¼Œttï¼Œu;
          å¯¹å¯ç”¨æ€§äº§ç”Ÿè´Ÿé¢å½±å“çš„å…ƒç´ ï¼šframeï¼Œframesetï¼Œnoframesï¼›

    * æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼š
         IE8/IE7/IE6æ”¯æŒé€šè¿‡document.createElementæ–¹æ³•äº§ç”Ÿçš„æ ‡ç­¾ï¼Œ
           å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‰¹æ€§è®©è¿™äº›æµè§ˆå™¨æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼Œ
           æµè§ˆå™¨æ”¯æŒæ–°æ ‡ç­¾åï¼Œè¿˜éœ€è¦æ·»åŠ æ ‡ç­¾é»˜è®¤çš„æ ·å¼ã€‚

         å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æˆç†Ÿçš„æ¡†æ¶ã€æ¯”å¦‚html5shim;
         &lt;!--[if lt IE 9]&gt;
            &lt;script&gt; src=&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;&lt;/script&gt;
         &lt;![endif]--&gt;

    * å¦‚ä½•åŒºåˆ†HTML5ï¼š DOCTYPEå£°æ˜\æ–°å¢çš„ç»“æ„å…ƒç´ \åŠŸèƒ½å…ƒç´ 
</code></pre><ul>
<li><p>ç®€è¿°ä¸€ä¸‹ä½ å¯¹HTMLè¯­ä¹‰åŒ–çš„ç†è§£ï¼Ÿ</p>
<pre><code>  ç”¨æ­£ç¡®çš„æ ‡ç­¾åšæ­£ç¡®çš„äº‹æƒ…ã€‚
  htmlè¯­ä¹‰åŒ–è®©é¡µé¢çš„å†…å®¹ç»“æ„åŒ–ï¼Œç»“æ„æ›´æ¸…æ™°ï¼Œä¾¿äºå¯¹æµè§ˆå™¨ã€æœç´¢å¼•æ“è§£æ;
  å³ä½¿åœ¨æ²¡æœ‰æ ·å¼CSSæƒ…å†µä¸‹ä¹Ÿä»¥ä¸€ç§æ–‡æ¡£æ ¼å¼æ˜¾ç¤ºï¼Œå¹¶ä¸”æ˜¯å®¹æ˜“é˜…è¯»çš„;
  æœç´¢å¼•æ“çš„çˆ¬è™«ä¹Ÿä¾èµ–äºHTMLæ ‡è®°æ¥ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ï¼Œåˆ©äºSEO;
  ä½¿é˜…è¯»æºä»£ç çš„äººå¯¹ç½‘ç«™æ›´å®¹æ˜“å°†ç½‘ç«™åˆ†å—ï¼Œä¾¿äºé˜…è¯»ç»´æŠ¤ç†è§£ã€‚
</code></pre></li>
</ul>
<ul>
<li><p>HTML5çš„ç¦»çº¿å‚¨å­˜æ€ä¹ˆä½¿ç”¨ï¼Œå·¥ä½œåŸç†èƒ½ä¸èƒ½è§£é‡Šä¸€ä¸‹ï¼Ÿ</p>
<pre><code>  åœ¨ç”¨æˆ·æ²¡æœ‰ä¸å› ç‰¹ç½‘è¿æ¥æ—¶ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ç«™ç‚¹æˆ–åº”ç”¨ï¼Œåœ¨ç”¨æˆ·ä¸å› ç‰¹ç½‘è¿æ¥æ—¶ï¼Œæ›´æ–°ç”¨æˆ·æœºå™¨ä¸Šçš„ç¼“å­˜æ–‡ä»¶ã€‚
  åŸç†ï¼šHTML5çš„ç¦»çº¿å­˜å‚¨æ˜¯åŸºäºä¸€ä¸ªæ–°å»ºçš„.appcacheæ–‡ä»¶çš„ç¼“å­˜æœºåˆ¶(ä¸æ˜¯å­˜å‚¨æŠ€æœ¯)ï¼Œé€šè¿‡è¿™ä¸ªæ–‡ä»¶ä¸Šçš„è§£ææ¸…å•ç¦»çº¿å­˜å‚¨èµ„æºï¼Œè¿™äº›èµ„æºå°±ä¼šåƒcookieä¸€æ ·è¢«å­˜å‚¨äº†ä¸‹æ¥ã€‚ä¹‹åå½“ç½‘ç»œåœ¨å¤„äºç¦»çº¿çŠ¶æ€ä¸‹æ—¶ï¼Œæµè§ˆå™¨ä¼šé€šè¿‡è¢«ç¦»çº¿å­˜å‚¨çš„æ•°æ®è¿›è¡Œé¡µé¢å±•ç¤ºã€‚
</code></pre></li>
</ul>
<pre><code>    å¦‚ä½•ä½¿ç”¨ï¼š
    1ã€é¡µé¢å¤´éƒ¨åƒä¸‹é¢ä¸€æ ·åŠ å…¥ä¸€ä¸ªmanifestçš„å±æ€§ï¼›
    2ã€åœ¨cache.manifestæ–‡ä»¶çš„ç¼–å†™ç¦»çº¿å­˜å‚¨çš„èµ„æºï¼›
        CACHE MANIFEST
        #v0.11
        CACHE:
        js/app.js
        css/style.css
        NETWORK:
        resourse/logo.png
        FALLBACK:
        / /offline.html
    3ã€åœ¨ç¦»çº¿çŠ¶æ€æ—¶ï¼Œæ“ä½œwindow.applicationCacheè¿›è¡Œéœ€æ±‚å®ç°ã€‚

è¯¦ç»†çš„ä½¿ç”¨è¯·å‚è€ƒï¼š

[HTML5 ç¦»çº¿ç¼“å­˜-manifestç®€ä»‹](http://yanhaijing.com/html/2014/12/28/html5-manifest/)

[æœ‰è¶£çš„HTML5ï¼šç¦»çº¿å­˜å‚¨](http://segmentfault.com/a/1190000000732617)
</code></pre><ul>
<li><p>æµè§ˆå™¨æ˜¯æ€ä¹ˆå¯¹HTML5çš„ç¦»çº¿å‚¨å­˜èµ„æºè¿›è¡Œç®¡ç†å’ŒåŠ è½½çš„å‘¢ï¼Ÿ</p>
<pre><code>  åœ¨çº¿çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å‘ç°htmlå¤´éƒ¨æœ‰manifestå±æ€§ï¼Œå®ƒä¼šè¯·æ±‚manifestæ–‡ä»¶ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è®¿é—®appï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šæ ¹æ®manifestæ–‡ä»¶çš„å†…å®¹ä¸‹è½½ç›¸åº”çš„èµ„æºå¹¶ä¸”è¿›è¡Œç¦»çº¿å­˜å‚¨ã€‚å¦‚æœå·²ç»è®¿é—®è¿‡appå¹¶ä¸”èµ„æºå·²ç»ç¦»çº¿å­˜å‚¨äº†ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šä½¿ç”¨ç¦»çº¿çš„èµ„æºåŠ è½½é¡µé¢ï¼Œç„¶åæµè§ˆå™¨ä¼šå¯¹æ¯”æ–°çš„manifestæ–‡ä»¶ä¸æ—§çš„manifestæ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¸åšä»»ä½•æ“ä½œï¼Œå¦‚æœæ–‡ä»¶æ”¹å˜äº†ï¼Œé‚£ä¹ˆå°±ä¼šé‡æ–°ä¸‹è½½æ–‡ä»¶ä¸­çš„èµ„æºå¹¶è¿›è¡Œç¦»çº¿å­˜å‚¨ã€‚
  ç¦»çº¿çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å°±ç›´æ¥ä½¿ç”¨ç¦»çº¿å­˜å‚¨çš„èµ„æºã€‚
</code></pre><p>  è¯¦ç»†è¯·å‚è€ƒï¼š<a href="http://segmentfault.com/a/1190000000732617" target="_blank" rel="external">æœ‰è¶£çš„HTML5ï¼šç¦»çº¿å­˜å‚¨</a></p>
</li>
<li><p>è¯·æè¿°ä¸€ä¸‹ cookiesï¼ŒsessionStorage å’Œ localStorage çš„åŒºåˆ«ï¼Ÿ</p>
<pre><code>  cookieæ˜¯ç½‘ç«™ä¸ºäº†æ ‡ç¤ºç”¨æˆ·èº«ä»½è€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ï¼ˆClient Sideï¼‰ä¸Šçš„æ•°æ®ï¼ˆé€šå¸¸ç»è¿‡åŠ å¯†ï¼‰ã€‚
  cookieæ•°æ®å§‹ç»ˆåœ¨åŒæºçš„httpè¯·æ±‚ä¸­æºå¸¦ï¼ˆå³ä½¿ä¸éœ€è¦ï¼‰ï¼Œè®°ä¼šåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨é—´æ¥å›ä¼ é€’ã€‚
  sessionStorageå’ŒlocalStorageä¸ä¼šè‡ªåŠ¨æŠŠæ•°æ®å‘ç»™æœåŠ¡å™¨ï¼Œä»…åœ¨æœ¬åœ°ä¿å­˜ã€‚

  å­˜å‚¨å¤§å°ï¼š
      cookieæ•°æ®å¤§å°ä¸èƒ½è¶…è¿‡4kã€‚
      sessionStorageå’ŒlocalStorage è™½ç„¶ä¹Ÿæœ‰å­˜å‚¨å¤§å°çš„é™åˆ¶ï¼Œä½†æ¯”cookieå¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ°5Mæˆ–æ›´å¤§ã€‚

  æœ‰æœŸæ—¶é—´ï¼š
      localStorage    å­˜å‚¨æŒä¹…æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±é™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼›
      sessionStorage  æ•°æ®åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­åè‡ªåŠ¨åˆ é™¤ã€‚
      cookie          è®¾ç½®çš„cookieè¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿çª—å£æˆ–æµè§ˆå™¨å…³é—­
</code></pre></li>
<li><p>iframeæœ‰é‚£äº›ç¼ºç‚¹ï¼Ÿ</p>
<pre><code>  *iframeä¼šé˜»å¡ä¸»é¡µé¢çš„Onloadäº‹ä»¶ï¼›
  *æœç´¢å¼•æ“çš„æ£€ç´¢ç¨‹åºæ— æ³•è§£è¯»è¿™ç§é¡µé¢ï¼Œä¸åˆ©äºSEO;

  *iframeå’Œä¸»é¡µé¢å…±äº«è¿æ¥æ± ï¼Œè€Œæµè§ˆå™¨å¯¹ç›¸åŒåŸŸçš„è¿æ¥æœ‰é™åˆ¶ï¼Œæ‰€ä»¥ä¼šå½±å“é¡µé¢çš„å¹¶è¡ŒåŠ è½½ã€‚

  ä½¿ç”¨iframeä¹‹å‰éœ€è¦è€ƒè™‘è¿™ä¸¤ä¸ªç¼ºç‚¹ã€‚å¦‚æœéœ€è¦ä½¿ç”¨iframeï¼Œæœ€å¥½æ˜¯é€šè¿‡javascript
  åŠ¨æ€ç»™iframeæ·»åŠ srcå±æ€§å€¼ï¼Œè¿™æ ·å¯ä»¥ç»•å¼€ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ã€‚
</code></pre></li>
<li><p>Labelçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ</p>
<pre><code>  labelæ ‡ç­¾æ¥å®šä¹‰è¡¨å•æ§åˆ¶é—´çš„å…³ç³»,å½“ç”¨æˆ·é€‰æ‹©è¯¥æ ‡ç­¾æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°†ç„¦ç‚¹è½¬åˆ°å’Œæ ‡ç­¾ç›¸å…³çš„è¡¨å•æ§ä»¶ä¸Šã€‚

  &lt;label for=&quot;Name&quot;&gt;Number:&lt;/label&gt;
  &lt;input type=â€œtextâ€œname=&quot;Name&quot; id=&quot;Name&quot;/&gt;

  &lt;label&gt;Date:&lt;input type=&quot;text&quot; name=&quot;B&quot;/&gt;&lt;/label&gt;
</code></pre></li>
<li><p>HTML5çš„formå¦‚ä½•å…³é—­è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ï¼Ÿ</p>
<pre><code>  ç»™ä¸æƒ³è¦æç¤ºçš„ form æˆ–æŸä¸ª input è®¾ç½®ä¸º autocomplete=offã€‚
</code></pre></li>
</ul>
<ul>
<li><p>å¦‚ä½•å®ç°æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡? (é˜¿é‡Œ)</p>
<pre><code>  WebSocketã€SharedWorkerï¼›
  ä¹Ÿå¯ä»¥è°ƒç”¨localstorgeã€cookiesç­‰æœ¬åœ°å­˜å‚¨æ–¹å¼ï¼›

  localstorgeå¦ä¸€ä¸ªæµè§ˆä¸Šä¸‹æ–‡é‡Œè¢«æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤æ—¶ï¼Œå®ƒéƒ½ä¼šè§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ
  æˆ‘ä»¬é€šè¿‡ç›‘å¬äº‹ä»¶ï¼Œæ§åˆ¶å®ƒçš„å€¼æ¥è¿›è¡Œé¡µé¢ä¿¡æ¯é€šä¿¡ï¼›
  æ³¨æ„quirksï¼šSafari åœ¨æ— ç—•æ¨¡å¼ä¸‹è®¾ç½®localstorgeå€¼æ—¶ä¼šæŠ›å‡º QuotaExceededError çš„å¼‚å¸¸ï¼›
</code></pre></li>
<li><p>webSocketå¦‚ä½•å…¼å®¹ä½æµè§ˆå™¨ï¼Ÿ(é˜¿é‡Œ)</p>
<pre><code>  Adobe Flash Socket ã€
  ActiveX HTMLFile (IE) ã€
  åŸºäº multipart ç¼–ç å‘é€ XHR ã€
  åŸºäºé•¿è½®è¯¢çš„ XHR
</code></pre></li>
<li><p>é¡µé¢å¯è§æ€§ï¼ˆPage Visibility APIï¼‰ å¯ä»¥æœ‰å“ªäº›ç”¨é€”ï¼Ÿ</p>
<pre><code>  é€šè¿‡ visibilityState çš„å€¼æ£€æµ‹é¡µé¢å½“å‰æ˜¯å¦å¯è§ï¼Œä»¥åŠæ‰“å¼€ç½‘é¡µçš„æ—¶é—´ç­‰;
  åœ¨é¡µé¢è¢«åˆ‡æ¢åˆ°å…¶ä»–åå°è¿›ç¨‹çš„æ—¶å€™ï¼Œè‡ªåŠ¨æš‚åœéŸ³ä¹æˆ–è§†é¢‘çš„æ’­æ”¾ï¼›
</code></pre></li>
</ul>
<ul>
<li><p>å¦‚ä½•åœ¨é¡µé¢ä¸Šå®ç°ä¸€ä¸ªåœ†å½¢çš„å¯ç‚¹å‡»åŒºåŸŸï¼Ÿ</p>
<pre><code>  1ã€map+areaæˆ–è€…svg
  2ã€border-radius
  3ã€çº¯jså®ç° éœ€è¦æ±‚ä¸€ä¸ªç‚¹åœ¨ä¸åœ¨åœ†ä¸Šç®€å•ç®—æ³•ã€è·å–é¼ æ ‡åæ ‡ç­‰ç­‰
</code></pre></li>
<li><p>å®ç°ä¸ä½¿ç”¨ border ç”»å‡º1pxé«˜çš„çº¿ï¼Œåœ¨ä¸åŒæµè§ˆå™¨çš„æ ‡å‡†æ¨¡å¼ä¸æ€ªå¼‚æ¨¡å¼ä¸‹éƒ½èƒ½ä¿æŒä¸€è‡´çš„æ•ˆæœã€‚</p>
<pre><code>  &lt;div style=&quot;height:1px;overflow:hidden;background:red&quot;&gt;&lt;/div&gt;
</code></pre></li>
</ul>
<ul>
<li><p>ç½‘é¡µéªŒè¯ç æ˜¯å¹²å˜›çš„ï¼Œæ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆå®‰å…¨é—®é¢˜ã€‚</p>
<pre><code>  åŒºåˆ†ç”¨æˆ·æ˜¯è®¡ç®—æœºè¿˜æ˜¯äººçš„å…¬å…±å…¨è‡ªåŠ¨ç¨‹åºã€‚å¯ä»¥é˜²æ­¢æ¶æ„ç ´è§£å¯†ç ã€åˆ·ç¥¨ã€è®ºå›çŒæ°´ï¼›
  æœ‰æ•ˆé˜²æ­¢é»‘å®¢å¯¹æŸä¸€ä¸ªç‰¹å®šæ³¨å†Œç”¨æˆ·ç”¨ç‰¹å®šç¨‹åºæš´åŠ›ç ´è§£æ–¹å¼è¿›è¡Œä¸æ–­çš„ç™»é™†å°è¯•ã€‚
</code></pre></li>
<li><p>titleä¸h1çš„åŒºåˆ«ã€bä¸strongçš„åŒºåˆ«ã€iä¸emçš„åŒºåˆ«ï¼Ÿ</p>
<pre><code>  titleå±æ€§æ²¡æœ‰æ˜ç¡®æ„ä¹‰åªè¡¨ç¤ºæ˜¯ä¸ªæ ‡é¢˜ï¼ŒH1åˆ™è¡¨ç¤ºå±‚æ¬¡æ˜ç¡®çš„æ ‡é¢˜ï¼Œå¯¹é¡µé¢ä¿¡æ¯çš„æŠ“å–ä¹Ÿæœ‰å¾ˆå¤§çš„å½±å“ï¼›

  strongæ˜¯æ ‡æ˜é‡ç‚¹å†…å®¹ï¼Œæœ‰è¯­æ°”åŠ å¼ºçš„å«ä¹‰ï¼Œä½¿ç”¨é˜…è¯»è®¾å¤‡é˜…è¯»ç½‘ç»œæ—¶ï¼š&lt;strong&gt;ä¼šé‡è¯»ï¼Œè€Œ&lt;B&gt;æ˜¯å±•ç¤ºå¼ºè°ƒå†…å®¹ã€‚

  iå†…å®¹å±•ç¤ºä¸ºæ–œä½“ï¼Œemè¡¨ç¤ºå¼ºè°ƒçš„æ–‡æœ¬ï¼›

  Physical Style Elements -- è‡ªç„¶æ ·å¼æ ‡ç­¾
  b, i, u, s, pre
  Semantic Style Elements -- è¯­ä¹‰æ ·å¼æ ‡ç­¾
  strong, em, ins, del, code
  åº”è¯¥å‡†ç¡®ä½¿ç”¨è¯­ä¹‰æ ·å¼æ ‡ç­¾, ä½†ä¸èƒ½æ»¥ç”¨, å¦‚æœä¸èƒ½ç¡®å®šæ—¶é¦–é€‰ä½¿ç”¨è‡ªç„¶æ ·å¼æ ‡ç­¾ã€‚
</code></pre></li>
</ul>
<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><ul>
<li><p>ä»‹ç»ä¸€ä¸‹æ ‡å‡†çš„CSSçš„ç›’å­æ¨¡å‹ï¼Ÿä½ç‰ˆæœ¬IEçš„ç›’å­æ¨¡å‹æœ‰ä»€ä¹ˆä¸åŒçš„ï¼Ÿ</p>
<pre><code>  ï¼ˆ1ï¼‰æœ‰ä¸¤ç§ï¼Œ IE ç›’å­æ¨¡å‹ã€W3C ç›’å­æ¨¡å‹ï¼›
  ï¼ˆ2ï¼‰ç›’æ¨¡å‹ï¼š å†…å®¹(content)ã€å¡«å……(padding)ã€è¾¹ç•Œ(margin)ã€ è¾¹æ¡†(border)ï¼›
  ï¼ˆ3ï¼‰åŒº  åˆ«ï¼š IEçš„contentéƒ¨åˆ†æŠŠ border å’Œ paddingè®¡ç®—äº†è¿›å»;
</code></pre></li>
</ul>
<ul>
<li><p>CSSé€‰æ‹©ç¬¦æœ‰å“ªäº›ï¼Ÿå“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿ</p>
<pre><code>  *   1.idé€‰æ‹©å™¨ï¼ˆ # myidï¼‰
      2.ç±»é€‰æ‹©å™¨ï¼ˆ.myclassnameï¼‰
      3.æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆdiv, h1, pï¼‰
      4.ç›¸é‚»é€‰æ‹©å™¨ï¼ˆh1 + pï¼‰
      5.å­é€‰æ‹©å™¨ï¼ˆul &gt; liï¼‰
      6.åä»£é€‰æ‹©å™¨ï¼ˆli aï¼‰
      7.é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ * ï¼‰
      8.å±æ€§é€‰æ‹©å™¨ï¼ˆa[rel = &quot;external&quot;]ï¼‰
      9.ä¼ªç±»é€‰æ‹©å™¨ï¼ˆa:hover, li:nth-childï¼‰

  *   å¯ç»§æ‰¿çš„æ ·å¼ï¼š font-size font-family color, UL LI DL DD DT;

  *   ä¸å¯ç»§æ‰¿çš„æ ·å¼ï¼šborder padding margin width height ;
</code></pre></li>
</ul>
<ul>
<li><p>CSSä¼˜å…ˆçº§ç®—æ³•å¦‚ä½•è®¡ç®—ï¼Ÿ</p>
<pre><code>  *   ä¼˜å…ˆçº§å°±è¿‘åŸåˆ™ï¼ŒåŒæƒé‡æƒ…å†µä¸‹æ ·å¼å®šä¹‰æœ€è¿‘è€…ä¸ºå‡†;
  *   è½½å…¥æ ·å¼ä»¥æœ€åè½½å…¥çš„å®šä½ä¸ºå‡†;

  ä¼˜å…ˆçº§ä¸º:
      åŒæƒé‡: å†…è”æ ·å¼è¡¨ï¼ˆæ ‡ç­¾å†…éƒ¨ï¼‰&gt; åµŒå…¥æ ·å¼è¡¨ï¼ˆå½“å‰æ–‡ä»¶ä¸­ï¼‰&gt; å¤–éƒ¨æ ·å¼è¡¨ï¼ˆå¤–éƒ¨æ–‡ä»¶ä¸­ï¼‰ã€‚
      !important &gt;  id &gt; class &gt; tag
      important æ¯” å†…è”ä¼˜å…ˆçº§é«˜
</code></pre></li>
<li><p>CSS3æ–°å¢ä¼ªç±»æœ‰é‚£äº›ï¼Ÿ</p>
<pre><code>      ä¸¾ä¾‹ï¼š
      p:first-of-type    é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„é¦–ä¸ª &lt;p&gt; å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚
      p:last-of-type    é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„æœ€å &lt;p&gt; å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚
      p:only-of-type    é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ å”¯ä¸€çš„ &lt;p&gt; å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚
      p:only-child        é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„å”¯ä¸€å­å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚
      p:nth-child(2)    é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„ç¬¬äºŒä¸ªå­å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚

      :after            åœ¨å…ƒç´ ä¹‹å‰æ·»åŠ å†…å®¹,ä¹Ÿå¯ä»¥ç”¨æ¥åšæ¸…é™¤æµ®åŠ¨ã€‚
      :before            åœ¨å…ƒç´ ä¹‹åæ·»åŠ å†…å®¹
       :enabled          
      :disabled         æ§åˆ¶è¡¨å•æ§ä»¶çš„ç¦ç”¨çŠ¶æ€ã€‚
      :checked        å•é€‰æ¡†æˆ–å¤é€‰æ¡†è¢«é€‰ä¸­ã€‚
</code></pre></li>
<li><p>å¦‚ä½•å±…ä¸­divï¼Ÿ</p>
</li>
</ul>
<pre><code>*  æ°´å¹³å±…ä¸­ï¼šç»™divè®¾ç½®ä¸€ä¸ªå®½åº¦ï¼Œç„¶åæ·»åŠ margin:0 autoå±æ€§

        div{
            width:200px;
            margin:0 auto;
         }

*  è®©ç»å¯¹å®šä½çš„divå±…ä¸­

        div {
            position: absolute;
            width: 300px;
            height: 300px;
            margin: auto;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background-color: pink;    /* æ–¹ä¾¿çœ‹æ•ˆæœ */
        }

*  æ°´å¹³å‚ç›´å±…ä¸­ä¸€

        ç¡®å®šå®¹å™¨çš„å®½é«˜ å®½500 é«˜ 300 çš„å±‚
        è®¾ç½®å±‚çš„å¤–è¾¹è·

        div {
            position: relative;        /* ç›¸å¯¹å®šä½æˆ–ç»å¯¹å®šä½å‡å¯ */
            width:500px;
            height:300px;
            top: 50%;
            left: 50%;
            margin: -150px 0 0 -250px;         /* å¤–è¾¹è·ä¸ºè‡ªèº«å®½é«˜çš„ä¸€åŠ */
            background-color: pink;         /* æ–¹ä¾¿çœ‹æ•ˆæœ */

         }

*  æ°´å¹³å‚ç›´å±…ä¸­äºŒ

        æœªçŸ¥å®¹å™¨çš„å®½é«˜ï¼Œåˆ©ç”¨ `transform` å±æ€§

        div {
            position: absolute;        /* ç›¸å¯¹å®šä½æˆ–ç»å¯¹å®šä½å‡å¯ */
            width:500px;
            height:300px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: pink;         /* æ–¹ä¾¿çœ‹æ•ˆæœ */

        }

*  æ°´å¹³å‚ç›´å±…ä¸­ä¸‰

        åˆ©ç”¨ flex å¸ƒå±€
        å®é™…ä½¿ç”¨æ—¶åº”è€ƒè™‘å…¼å®¹æ€§

        .container {
            display: flex;
            align-items: center;         /* å‚ç›´å±…ä¸­ */
            justify-content: center;    /* æ°´å¹³å±…ä¸­ */

        }
        .container div {
            width: 100px;
            height: 100px;
            background-color: pink;        /* æ–¹ä¾¿çœ‹æ•ˆæœ */
        }  
</code></pre><ul>
<li><p>displayæœ‰å“ªäº›å€¼ï¼Ÿè¯´æ˜ä»–ä»¬çš„ä½œç”¨ã€‚</p>
<pre><code>    block           å—ç±»å‹ã€‚é»˜è®¤å®½åº¦ä¸ºçˆ¶å…ƒç´ å®½åº¦ï¼Œå¯è®¾ç½®å®½é«˜ï¼Œæ¢è¡Œæ˜¾ç¤ºã€‚
    none            ç¼ºçœå€¼ã€‚è±¡è¡Œå†…å…ƒç´ ç±»å‹ä¸€æ ·æ˜¾ç¤ºã€‚
    inline          è¡Œå†…å…ƒç´ ç±»å‹ã€‚é»˜è®¤å®½åº¦ä¸ºå†…å®¹å®½åº¦ï¼Œä¸å¯è®¾ç½®å®½é«˜ï¼ŒåŒè¡Œæ˜¾ç¤ºã€‚
    inline-block  é»˜è®¤å®½åº¦ä¸ºå†…å®¹å®½åº¦ï¼Œå¯ä»¥è®¾ç½®å®½é«˜ï¼ŒåŒè¡Œæ˜¾ç¤ºã€‚
    list-item       è±¡å—ç±»å‹å…ƒç´ ä¸€æ ·æ˜¾ç¤ºï¼Œå¹¶æ·»åŠ æ ·å¼åˆ—è¡¨æ ‡è®°ã€‚
    table           æ­¤å…ƒç´ ä¼šä½œä¸ºå—çº§è¡¨æ ¼æ¥æ˜¾ç¤ºã€‚
    inherit         è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ display å±æ€§çš„å€¼ã€‚
</code></pre></li>
</ul>
<ul>
<li><p>positionçš„å€¼relativeå’Œabsoluteå®šä½åŸç‚¹æ˜¯ï¼Ÿ</p>
<pre><code>    absolute
      ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºå€¼ä¸ä¸º staticçš„ç¬¬ä¸€ä¸ªçˆ¶å…ƒç´ è¿›è¡Œå®šä½ã€‚
    fixed ï¼ˆè€IEä¸æ”¯æŒï¼‰
      ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½ã€‚
    relative
      ç”Ÿæˆç›¸å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºå…¶æ­£å¸¸ä½ç½®è¿›è¡Œå®šä½ã€‚
    static
      é»˜è®¤å€¼ã€‚æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­ï¼ˆå¿½ç•¥ top, bottom, left, right z-index å£°æ˜ï¼‰ã€‚
    inherit
      è§„å®šä»çˆ¶å…ƒç´ ç»§æ‰¿ position å±æ€§çš„å€¼ã€‚
</code></pre></li>
<li><p>CSS3æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ</p>
<pre><code>    æ–°å¢å„ç§CSSé€‰æ‹©å™¨    ï¼ˆ: not(.input)ï¼šæ‰€æœ‰ class ä¸æ˜¯â€œinputâ€çš„èŠ‚ç‚¹ï¼‰
      åœ†è§’            ï¼ˆborder-radius:8pxï¼‰
    å¤šåˆ—å¸ƒå±€        ï¼ˆmulti-column layoutï¼‰
    é˜´å½±å’Œåå°„    ï¼ˆShadow\Reflectï¼‰
    æ–‡å­—ç‰¹æ•ˆ        ï¼ˆtext-shadowã€ï¼‰
    æ–‡å­—æ¸²æŸ“        ï¼ˆText-decorationï¼‰
    çº¿æ€§æ¸å˜        ï¼ˆgradientï¼‰
    æ—‹è½¬             ï¼ˆtransformï¼‰
    ç¼©æ”¾,å®šä½,å€¾æ–œ,åŠ¨ç”»,å¤šèƒŒæ™¯
    ä¾‹å¦‚:transform:\scale(0.85,0.90)\ translate(0px,-30px)\ skew(-9deg,0deg)\Animation:
</code></pre></li>
<li><p>è¯·è§£é‡Šä¸€ä¸‹CSS3çš„Flexboxï¼ˆå¼¹æ€§ç›’å¸ƒå±€æ¨¡å‹ï¼‰,ä»¥åŠé€‚ç”¨åœºæ™¯ï¼Ÿ</p>
<pre><code>   ä¸€ä¸ªç”¨äºé¡µé¢å¸ƒå±€çš„å…¨æ–°CSS3åŠŸèƒ½ï¼ŒFlexboxå¯ä»¥æŠŠåˆ—è¡¨æ”¾åœ¨åŒä¸€ä¸ªæ–¹å‘ï¼ˆä»ä¸Šåˆ°ä¸‹æ’åˆ—ï¼Œä»å·¦åˆ°å³ï¼‰ï¼Œå¹¶è®©åˆ—è¡¨èƒ½å»¶ä¼¸åˆ°å ç”¨å¯ç”¨çš„ç©ºé—´ã€‚
   è¾ƒä¸ºå¤æ‚çš„å¸ƒå±€è¿˜å¯ä»¥é€šè¿‡åµŒå¥—ä¸€ä¸ªä¼¸ç¼©å®¹å™¨ï¼ˆflex containerï¼‰æ¥å®ç°ã€‚
   é‡‡ç”¨Flexå¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸ºFlexå®¹å™¨ï¼ˆflex containerï¼‰ï¼Œç®€ç§°&quot;å®¹å™¨&quot;ã€‚
   å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸ºFlexé¡¹ç›®ï¼ˆflex itemï¼‰ï¼Œç®€ç§°&quot;é¡¹ç›®&quot;ã€‚
   å¸¸è§„å¸ƒå±€æ˜¯åŸºäºå—å’Œå†…è”æµæ–¹å‘ï¼Œè€ŒFlexå¸ƒå±€æ˜¯åŸºäºflex-flowæµå¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨æ¥åšå±€ä¸­ï¼Œèƒ½å¯¹ä¸åŒå±å¹•å¤§å°è‡ªé€‚åº”ã€‚
   åœ¨å¸ƒå±€ä¸Šæœ‰äº†æ¯”ä»¥å‰æ›´åŠ çµæ´»çš„ç©ºé—´ã€‚

   å…·ä½“ï¼šhttp://www.w3cplus.com/css3/flexbox-basics.html
</code></pre></li>
<li><p>ç”¨çº¯CSSåˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<pre><code>  æŠŠä¸Šã€å·¦ã€å³ä¸‰æ¡è¾¹éšè—æ‰ï¼ˆé¢œè‰²è®¾ä¸º transparentï¼‰
  #demo {
    width: 0;
    height: 0;
    border-width: 20px;
    border-style: solid;
    border-color: transparent transparent red transparent;
  }
</code></pre></li>
<li><p>ä¸€ä¸ªæ»¡å± å“ å­—å¸ƒå±€ å¦‚ä½•è®¾è®¡?</p>
<pre><code>  ç®€å•çš„æ–¹å¼ï¼š
      ä¸Šé¢çš„divå®½100%ï¼Œ
      ä¸‹é¢çš„ä¸¤ä¸ªdivåˆ†åˆ«å®½50%ï¼Œ
      ç„¶åç”¨floatæˆ–è€…inlineä½¿å…¶ä¸æ¢è¡Œå³å¯
</code></pre></li>
<li><p>csså¤šåˆ—ç­‰é«˜å¦‚ä½•å®ç°ï¼Ÿ</p>
<pre><code>  åˆ©ç”¨padding-bottom|margin-bottomæ­£è´Ÿå€¼ç›¸æŠµï¼›
  è®¾ç½®çˆ¶å®¹å™¨è®¾ç½®è¶…å‡ºéšè—ï¼ˆoverflow:hiddenï¼‰ï¼Œè¿™æ ·å­çˆ¶å®¹å™¨çš„é«˜åº¦å°±è¿˜æ˜¯å®ƒé‡Œé¢çš„åˆ—æ²¡æœ‰è®¾å®špadding-bottomæ—¶çš„é«˜åº¦ï¼Œ
  å½“å®ƒé‡Œé¢çš„ä»» ä¸€åˆ—é«˜åº¦å¢åŠ äº†ï¼Œåˆ™çˆ¶å®¹å™¨çš„é«˜åº¦è¢«æ’‘åˆ°é‡Œé¢æœ€é«˜é‚£åˆ—çš„é«˜åº¦ï¼Œ
  å…¶ä»–æ¯”è¿™åˆ—çŸ®çš„åˆ—ä¼šç”¨å®ƒä»¬çš„padding-bottomè¡¥å¿è¿™éƒ¨åˆ†é«˜åº¦å·®ã€‚
</code></pre></li>
</ul>
<ul>
<li><p>ç»å¸¸é‡åˆ°çš„æµè§ˆå™¨çš„å…¼å®¹æ€§æœ‰å“ªäº›ï¼ŸåŸå› ï¼Œè§£å†³æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œå¸¸ç”¨hackçš„æŠ€å·§ ï¼Ÿ</p>
<pre><code>  * png24ä½çš„å›¾ç‰‡åœ¨iE6æµè§ˆå™¨ä¸Šå‡ºç°èƒŒæ™¯ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åšæˆPNG8.

  * æµè§ˆå™¨é»˜è®¤çš„marginå’Œpaddingä¸åŒã€‚è§£å†³æ–¹æ¡ˆæ˜¯åŠ ä¸€ä¸ªå…¨å±€çš„*{margin:0;padding:0;}æ¥ç»Ÿä¸€ã€‚

  * IE6åŒè¾¹è·bug:å—å±æ€§æ ‡ç­¾floatåï¼Œåˆæœ‰æ¨ªè¡Œçš„marginæƒ…å†µä¸‹ï¼Œåœ¨ie6æ˜¾ç¤ºmarginæ¯”è®¾ç½®çš„å¤§ã€‚

    æµ®åŠ¨ieäº§ç”Ÿçš„åŒå€è·ç¦» #box{ float:left; width:10px; margin:0 0 0 100px;}

    è¿™ç§æƒ…å†µä¹‹ä¸‹IEä¼šäº§ç”Ÿ20pxçš„è·ç¦»ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨floatçš„æ ‡ç­¾æ ·å¼æ§åˆ¶ä¸­åŠ å…¥ â€”â€”_display:inline;å°†å…¶è½¬åŒ–ä¸ºè¡Œå†…å±æ€§ã€‚(_è¿™ä¸ªç¬¦å·åªæœ‰ie6ä¼šè¯†åˆ«)

    æ¸è¿›è¯†åˆ«çš„æ–¹å¼ï¼Œä»æ€»ä½“ä¸­é€æ¸æ’é™¤å±€éƒ¨ã€‚

    é¦–å…ˆï¼Œå·§å¦™çš„ä½¿ç”¨â€œ\9â€è¿™ä¸€æ ‡è®°ï¼Œå°†IEæ¸¸è§ˆå™¨ä»æ‰€æœ‰æƒ…å†µä¸­åˆ†ç¦»å‡ºæ¥ã€‚
    æ¥ç€ï¼Œå†æ¬¡ä½¿ç”¨â€œ+â€å°†IE8å’ŒIE7ã€IE6åˆ†ç¦»å¼€æ¥ï¼Œè¿™æ ·IE8å·²ç»ç‹¬ç«‹è¯†åˆ«ã€‚

    css
        .bb{
            background-color:red;/*æ‰€æœ‰è¯†åˆ«*/
            background-color:#00deff\9; /*IE6ã€7ã€8è¯†åˆ«*/
            +background-color:#a200ff;/*IE6ã€7è¯†åˆ«*/
            _background-color:#1e0bd1;/*IE6è¯†åˆ«*/
        }
</code></pre></li>
</ul>
<pre><code>    *  IEä¸‹,å¯ä»¥ä½¿ç”¨è·å–å¸¸è§„å±æ€§çš„æ–¹æ³•æ¥è·å–è‡ªå®šä¹‰å±æ€§,
       ä¹Ÿå¯ä»¥ä½¿ç”¨getAttribute()è·å–è‡ªå®šä¹‰å±æ€§;
       Firefoxä¸‹,åªèƒ½ä½¿ç”¨getAttribute()è·å–è‡ªå®šä¹‰å±æ€§ã€‚
       è§£å†³æ–¹æ³•:ç»Ÿä¸€é€šè¿‡getAttribute()è·å–è‡ªå®šä¹‰å±æ€§ã€‚

    *  IEä¸‹,evenå¯¹è±¡æœ‰x,yå±æ€§,ä½†æ˜¯æ²¡æœ‰pageX,pageYå±æ€§;
       Firefoxä¸‹,eventå¯¹è±¡æœ‰pageX,pageYå±æ€§,ä½†æ˜¯æ²¡æœ‰x,yå±æ€§ã€‚

    *  è§£å†³æ–¹æ³•ï¼šï¼ˆæ¡ä»¶æ³¨é‡Šï¼‰ç¼ºç‚¹æ˜¯åœ¨IEæµè§ˆå™¨ä¸‹å¯èƒ½ä¼šå¢åŠ é¢å¤–çš„HTTPè¯·æ±‚æ•°ã€‚

    *  Chrome ä¸­æ–‡ç•Œé¢ä¸‹é»˜è®¤ä¼šå°†å°äº 12px çš„æ–‡æœ¬å¼ºåˆ¶æŒ‰ç…§ 12px æ˜¾ç¤º,
       å¯é€šè¿‡åŠ å…¥ CSS å±æ€§ -webkit-text-size-adjust: none; è§£å†³ã€‚

    è¶…é“¾æ¥è®¿é—®è¿‡åhoveræ ·å¼å°±ä¸å‡ºç°äº† è¢«ç‚¹å‡»è®¿é—®è¿‡çš„è¶…é“¾æ¥æ ·å¼ä¸åœ¨å…·æœ‰hoverå’Œactiveäº†è§£å†³æ–¹æ³•æ˜¯æ”¹å˜CSSå±æ€§çš„æ’åˆ—é¡ºåº:
    L-V-H-A :  a:link {} a:visited {} a:hover {} a:active {}
</code></pre><ul>
<li><p>liä¸liä¹‹é—´æœ‰çœ‹ä¸è§çš„ç©ºç™½é—´éš”æ˜¯ä»€ä¹ˆåŸå› å¼•èµ·çš„ï¼Ÿæœ‰ä»€ä¹ˆè§£å†³åŠæ³•ï¼Ÿ</p>
<pre><code>  è¡Œæ¡†çš„æ’åˆ—ä¼šå—åˆ°ä¸­é—´ç©ºç™½ï¼ˆå›è½¦\ç©ºæ ¼ï¼‰ç­‰çš„å½±å“ï¼Œå› ä¸ºç©ºæ ¼ä¹Ÿå±äºå­—ç¬¦,è¿™äº›ç©ºç™½ä¹Ÿä¼šè¢«åº”ç”¨æ ·å¼ï¼Œå æ®ç©ºé—´ï¼Œæ‰€ä»¥ä¼šæœ‰é—´éš”ï¼ŒæŠŠå­—ç¬¦å¤§å°è®¾ä¸º0ï¼Œå°±æ²¡æœ‰ç©ºæ ¼äº†ã€‚
</code></pre></li>
</ul>
<ul>
<li><p>ä¸ºä»€ä¹ˆè¦åˆå§‹åŒ–CSSæ ·å¼ã€‚</p>
<pre><code>  - å› ä¸ºæµè§ˆå™¨çš„å…¼å®¹é—®é¢˜ï¼Œä¸åŒæµè§ˆå™¨å¯¹æœ‰äº›æ ‡ç­¾çš„é»˜è®¤å€¼æ˜¯ä¸åŒçš„ï¼Œå¦‚æœæ²¡å¯¹CSSåˆå§‹åŒ–å¾€å¾€ä¼šå‡ºç°æµè§ˆå™¨ä¹‹é—´çš„é¡µé¢æ˜¾ç¤ºå·®å¼‚ã€‚

  - å½“ç„¶ï¼Œåˆå§‹åŒ–æ ·å¼ä¼šå¯¹SEOæœ‰ä¸€å®šçš„å½±å“ï¼Œä½†é±¼å’Œç†ŠæŒä¸å¯å…¼å¾—ï¼Œä½†åŠ›æ±‚å½±å“æœ€å°çš„æƒ…å†µä¸‹åˆå§‹åŒ–ã€‚

  æœ€ç®€å•çš„åˆå§‹åŒ–æ–¹æ³•ï¼š * {padding: 0; margin: 0;} ï¼ˆå¼ºçƒˆä¸å»ºè®®ï¼‰

  æ·˜å®çš„æ ·å¼åˆå§‹åŒ–ä»£ç ï¼š
  body, h1, h2, h3, h4, h5, h6, hr, p, blockquote, dl, dt, dd, ul, ol, li, pre, form, fieldset, legend, button, input, textarea, th, td { margin:0; padding:0; }
  body, button, input, select, textarea { font:12px/1.5tahoma, arial, \5b8b\4f53; }
  h1, h2, h3, h4, h5, h6{ font-size:100%; }
  address, cite, dfn, em, var { font-style:normal; }
  code, kbd, pre, samp { font-family:couriernew, courier, monospace; }
  small{ font-size:12px; }
  ul, ol { list-style:none; }
  a { text-decoration:none; }
  a:hover { text-decoration:underline; }
  sup { vertical-align:text-top; }
  sub{ vertical-align:text-bottom; }
  legend { color:#000; }
  fieldset, img { border:0; }
  button, input, select, textarea { font-size:100%; }
  table { border-collapse:collapse; border-spacing:0; }
</code></pre></li>
</ul>
<ul>
<li><p>absoluteçš„containing block(å®¹å™¨å—)è®¡ç®—æ–¹å¼è·Ÿæ­£å¸¸æµæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p>
<pre><code>  æ— è®ºå±äºå“ªç§ï¼Œéƒ½è¦å…ˆæ‰¾åˆ°å…¶ç¥–å…ˆå…ƒç´ ä¸­æœ€è¿‘çš„ position å€¼ä¸ä¸º static çš„å…ƒç´ ï¼Œç„¶åå†åˆ¤æ–­ï¼š
  1ã€è‹¥æ­¤å…ƒç´ ä¸º inline å…ƒç´ ï¼Œåˆ™ containing block ä¸ºèƒ½å¤ŸåŒ…å«è¿™ä¸ªå…ƒç´ ç”Ÿæˆçš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ª inline box çš„ padding box (é™¤ margin, border å¤–çš„åŒºåŸŸ) çš„æœ€å°çŸ©å½¢ï¼›
  2ã€å¦åˆ™,åˆ™ç”±è¿™ä¸ªç¥–å…ˆå…ƒç´ çš„ padding box æ„æˆã€‚
  å¦‚æœéƒ½æ‰¾ä¸åˆ°ï¼Œåˆ™ä¸º initial containing blockã€‚

  è¡¥å……ï¼š
  1. static(é»˜è®¤çš„)/relativeï¼šç®€å•è¯´å°±æ˜¯å®ƒçš„çˆ¶å…ƒç´ çš„å†…å®¹æ¡†ï¼ˆå³å»æ‰paddingçš„éƒ¨åˆ†ï¼‰
  2. absolute: å‘ä¸Šæ‰¾æœ€è¿‘çš„å®šä½ä¸ºabsolute/relativeçš„å…ƒç´ 
  3. fixed: å®ƒçš„containing blockä¸€å¾‹ä¸ºæ ¹å…ƒç´ (html/body)ï¼Œæ ¹å…ƒç´ ä¹Ÿæ˜¯initial containing block
</code></pre></li>
<li><p>CSSé‡Œçš„visibilityå±æ€§æœ‰ä¸ªcollapseå±æ€§å€¼æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿåœ¨ä¸åŒæµè§ˆå™¨ä¸‹ä»¥åä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<p>  å¯¹äºæ™®é€šå…ƒç´ visibility:collapse;ä¼šå°†å…ƒç´ å®Œå…¨éšè—,ä¸å æ®é¡µé¢å¸ƒå±€ç©ºé—´,ä¸display:none;è¡¨ç°ç›¸åŒ.<br>  å¦‚æœç›®æ ‡å…ƒç´ ä¸ºtable,visibility:collapse;å°†tableéšè—,ä½†æ˜¯ä¼šå æ®é¡µé¢å¸ƒå±€ç©ºé—´.<br>  ä»…åœ¨Firefoxä¸‹èµ·ä½œç”¨,IEä¼šæ˜¾ç¤ºå…ƒç´ ,Chromeä¼šå°†å…ƒç´ éšè—,ä½†æ˜¯å æ®ç©ºé—´.</p>
</li>
<li><p>positionè·Ÿdisplayã€margin collapseã€overflowã€floatè¿™äº›ç‰¹æ€§ç›¸äº’å åŠ åä¼šæ€ä¹ˆæ ·ï¼Ÿ</p>
<p>  å¦‚æœå…ƒç´ çš„displayä¸ºnone,é‚£ä¹ˆå…ƒç´ ä¸è¢«æ¸²æŸ“,position,floatä¸èµ·ä½œç”¨,å¦‚æœå…ƒç´ æ‹¥æœ‰position:absolute;æˆ–è€…position:fixed;å±æ€§é‚£ä¹ˆå…ƒç´ å°†ä¸ºç»å¯¹å®šä½,floatä¸èµ·ä½œç”¨.å¦‚æœå…ƒç´ floatå±æ€§ä¸æ˜¯none,å…ƒç´ ä¼šè„±ç¦»æ–‡æ¡£æµ,æ ¹æ®floatå±æ€§å€¼æ¥æ˜¾ç¤º.æœ‰æµ®åŠ¨,ç»å¯¹å®šä½,inline-blockå±æ€§çš„å…ƒç´ ,marginä¸ä¼šå’Œå‚ç›´æ–¹å‘ä¸Šçš„å…¶ä»–å…ƒç´ marginæŠ˜å .</p>
</li>
<li><p>å¯¹BFCè§„èŒƒ(å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼šblock formatting context)çš„ç†è§£ï¼Ÿ</p>
<pre><code>  ï¼ˆW3C CSS 2.1 è§„èŒƒä¸­çš„ä¸€ä¸ªæ¦‚å¿µ,å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹å®¹å™¨ï¼Œå†³å®šäº†å…ƒç´ å¦‚ä½•å¯¹å…¶å†…å®¹è¿›è¡Œå®šä½,ä»¥åŠä¸å…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚ï¼‰
   ä¸€ä¸ªé¡µé¢æ˜¯ç”±å¾ˆå¤šä¸ª Box ç»„æˆçš„,å…ƒç´ çš„ç±»å‹å’Œ display å±æ€§,å†³å®šäº†è¿™ä¸ª Box çš„ç±»å‹ã€‚
   ä¸åŒç±»å‹çš„ Box,ä¼šå‚ä¸ä¸åŒçš„ Formatting Contextï¼ˆå†³å®šå¦‚ä½•æ¸²æŸ“æ–‡æ¡£çš„å®¹å™¨ï¼‰,å› æ­¤Boxå†…çš„å…ƒç´ ä¼šä»¥ä¸åŒçš„æ–¹å¼æ¸²æŸ“,ä¹Ÿå°±æ˜¯è¯´BFCå†…éƒ¨çš„å…ƒç´ å’Œå¤–éƒ¨çš„å…ƒç´ ä¸ä¼šäº’ç›¸å½±å“ã€‚
</code></pre></li>
<li><p>csså®šä¹‰çš„æƒé‡</p>
<pre><code>  ä»¥ä¸‹æ˜¯æƒé‡çš„è§„åˆ™ï¼šæ ‡ç­¾çš„æƒé‡ä¸º1ï¼Œclassçš„æƒé‡ä¸º10ï¼Œidçš„æƒé‡ä¸º100ï¼Œä»¥ä¸‹ä¾‹å­æ˜¯æ¼”ç¤ºå„ç§å®šä¹‰çš„æƒé‡å€¼ï¼š

  /*æƒé‡ä¸º1*/
  div{
  }
  /*æƒé‡ä¸º10*/
  .class1{
  }
  /*æƒé‡ä¸º100*/
  #id1{
  }
  /*æƒé‡ä¸º100+1=101*/
  #id1 div{
  }
  /*æƒé‡ä¸º10+1=11*/
  .class1 div{
  }
  /*æƒé‡ä¸º10+10+1=21*/
  .class1 .class2 div{
  }

  å¦‚æœæƒé‡ç›¸åŒï¼Œåˆ™æœ€åå®šä¹‰çš„æ ·å¼ä¼šèµ·ä½œç”¨ï¼Œä½†æ˜¯åº”è¯¥é¿å…è¿™ç§æƒ…å†µå‡ºç°
</code></pre></li>
</ul>
<ul>
<li><p>è¯·è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦æ¸…é™¤æµ®åŠ¨ï¼Ÿæ¸…é™¤æµ®åŠ¨çš„æ–¹å¼</p>
<p>  æ¸…é™¤æµ®åŠ¨æ˜¯ä¸ºäº†æ¸…é™¤ä½¿ç”¨æµ®åŠ¨å…ƒç´ äº§ç”Ÿçš„å½±å“ã€‚æµ®åŠ¨çš„å…ƒç´ ï¼Œé«˜åº¦ä¼šå¡Œé™·ï¼Œè€Œé«˜åº¦çš„å¡Œé™·ä½¿æˆ‘ä»¬é¡µé¢åé¢çš„å¸ƒå±€ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚</p>
<pre><code>  1ã€çˆ¶çº§divå®šä¹‰heightï¼›
  2ã€çˆ¶çº§div ä¹Ÿä¸€èµ·æµ®åŠ¨ï¼›
  3ã€å¸¸è§„çš„ä½¿ç”¨ä¸€ä¸ªclassï¼›
      .clearfix:before, .clearfix:after {
          content: &quot; &quot;;
          display: table;
      }
      .clearfix:after {
          clear: both;
      }
      .clearfix {
          *zoom: 1;
      }

  4ã€SASSç¼–è¯‘çš„æ—¶å€™ï¼Œæµ®åŠ¨å…ƒç´ çš„çˆ¶çº§divå®šä¹‰ä¼ªç±»:after
      &amp;:after,&amp;:before{
          content: &quot; &quot;;
          visibility: hidden;
          display: block;
          height: 0;
          clear: both;
      }

  è§£æåŸç†ï¼š
  1) display:block ä½¿ç”Ÿæˆçš„å…ƒç´ ä»¥å—çº§å…ƒç´ æ˜¾ç¤º,å æ»¡å‰©ä½™ç©ºé—´;
  2) height:0 é¿å…ç”Ÿæˆå†…å®¹ç ´ååŸæœ‰å¸ƒå±€çš„é«˜åº¦ã€‚
  3) visibility:hidden ä½¿ç”Ÿæˆçš„å†…å®¹ä¸å¯è§ï¼Œå¹¶å…è®¸å¯èƒ½è¢«ç”Ÿæˆå†…å®¹ç›–ä½çš„å†…å®¹å¯ä»¥è¿›è¡Œç‚¹å‡»å’Œäº¤äº’;
  4ï¼‰é€šè¿‡ content:&quot;.&quot;ç”Ÿæˆå†…å®¹ä½œä¸ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œè‡³äºcontenté‡Œé¢æ˜¯ç‚¹è¿˜æ˜¯å…¶ä»–éƒ½æ˜¯å¯ä»¥çš„ï¼Œä¾‹å¦‚oocssé‡Œé¢å°±æœ‰ç»å…¸çš„ content:&quot;.&quot;,æœ‰äº›ç‰ˆæœ¬å¯èƒ½content é‡Œé¢å†…å®¹ä¸ºç©º,ä¸€ä¸å†°å‡‰æ˜¯ä¸æ¨èè¿™æ ·åšçš„,firefoxç›´åˆ°7.0 content:â€&quot; ä»ç„¶ä¼šäº§ç”Ÿé¢å¤–çš„ç©ºéš™ï¼›
  5ï¼‰zoomï¼š1 è§¦å‘IE hasLayoutã€‚

  é€šè¿‡åˆ†æå‘ç°ï¼Œé™¤äº†clearï¼šbothç”¨æ¥é—­åˆæµ®åŠ¨çš„ï¼Œå…¶ä»–ä»£ç æ— ééƒ½æ˜¯ä¸ºäº†éšè—æ‰contentç”Ÿæˆçš„å†…å®¹ï¼Œè¿™ä¹Ÿå°±æ˜¯å…¶ä»–ç‰ˆæœ¬çš„é—­åˆæµ®åŠ¨ä¸ºä»€ä¹ˆä¼šæœ‰font-sizeï¼š0ï¼Œline-heightï¼š0ã€‚
</code></pre></li>
<li><p>ä»€ä¹ˆæ˜¯å¤–è¾¹è·åˆå¹¶ï¼Ÿ</p>
<pre><code>  å¤–è¾¹è·åˆå¹¶æŒ‡çš„æ˜¯ï¼Œå½“ä¸¤ä¸ªå‚ç›´å¤–è¾¹è·ç›¸é‡æ—¶ï¼Œå®ƒä»¬å°†å½¢æˆä¸€ä¸ªå¤–è¾¹è·ã€‚
  åˆå¹¶åçš„å¤–è¾¹è·çš„é«˜åº¦ç­‰äºä¸¤ä¸ªå‘ç”Ÿåˆå¹¶çš„å¤–è¾¹è·çš„é«˜åº¦ä¸­çš„è¾ƒå¤§è€…ã€‚
  w3schoolä»‹ç»ç½‘å€ï¼š http://www.w3school.com.cn/css/css_margin_collapsing.asp
</code></pre></li>
<li><p>zoom:1çš„æ¸…é™¤æµ®åŠ¨åŸç†?</p>
<pre><code>  æ¸…é™¤æµ®åŠ¨ï¼Œè§¦å‘hasLayoutï¼›
  Zoomå±æ€§æ˜¯IEæµè§ˆå™¨çš„ä¸“æœ‰å±æ€§ï¼Œå®ƒå¯ä»¥è®¾ç½®æˆ–æ£€ç´¢å¯¹è±¡çš„ç¼©æ”¾æ¯”ä¾‹ã€‚è§£å†³ieä¸‹æ¯”è¾ƒå¥‡è‘©çš„bugã€‚
  è­¬å¦‚å¤–è¾¹è·ï¼ˆmarginï¼‰çš„é‡å ï¼Œæµ®åŠ¨æ¸…é™¤ï¼Œè§¦å‘ieçš„haslayoutå±æ€§ç­‰ã€‚

  æ¥é¾™å»è„‰å¤§æ¦‚å¦‚ä¸‹ï¼š
  å½“è®¾ç½®äº†zoomçš„å€¼ä¹‹åï¼Œæ‰€è®¾ç½®çš„å…ƒç´ å°±ä¼šå°±ä¼šæ‰©å¤§æˆ–è€…ç¼©å°ï¼Œé«˜åº¦å®½åº¦å°±ä¼šé‡æ–°è®¡ç®—äº†ï¼Œè¿™é‡Œä¸€æ—¦æ”¹å˜zoomå€¼æ—¶å…¶å®ä¹Ÿä¼šå‘ç”Ÿé‡æ–°æ¸²æŸ“ï¼Œè¿ç”¨è¿™ä¸ªåŸç†ï¼Œä¹Ÿå°±è§£å†³äº†ieä¸‹å­å…ƒç´ æµ®åŠ¨æ—¶å€™çˆ¶å…ƒç´ ä¸éšç€è‡ªåŠ¨æ‰©å¤§çš„é—®é¢˜ã€‚

  Zoomå±æ˜¯IEæµè§ˆå™¨çš„ä¸“æœ‰å±æ€§ï¼Œç«ç‹å’Œè€ç‰ˆæœ¬çš„webkitæ ¸å¿ƒçš„æµè§ˆå™¨éƒ½ä¸æ”¯æŒè¿™ä¸ªå±æ€§ã€‚ç„¶è€Œï¼Œzoomç°åœ¨å·²ç»è¢«é€æ­¥æ ‡å‡†åŒ–ï¼Œå‡ºç°åœ¨ CSS 3.0 è§„èŒƒè‰æ¡ˆä¸­ã€‚

  ç›®å‰éieç”±äºä¸æ”¯æŒè¿™ä¸ªå±æ€§ï¼Œå®ƒä»¬åˆæ˜¯é€šè¿‡ä»€ä¹ˆå±æ€§æ¥å®ç°å…ƒç´ çš„ç¼©æ”¾å‘¢ï¼Ÿ
  å¯ä»¥é€šè¿‡css3é‡Œé¢çš„åŠ¨ç”»å±æ€§scaleè¿›è¡Œç¼©æ”¾ã€‚
</code></pre></li>
<li><p>ç§»åŠ¨ç«¯çš„å¸ƒå±€ç”¨è¿‡åª’ä½“æŸ¥è¯¢å—ï¼Ÿ</p>
</li>
</ul>
<pre><code>å‡è®¾ä½ ç°åœ¨æ­£ç”¨ä¸€å°æ˜¾ç¤ºè®¾å¤‡æ¥é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼ŒåŒæ—¶ä½ ä¹Ÿæƒ³æŠŠå®ƒæŠ•å½±åˆ°å±å¹•ä¸Šï¼Œæˆ–è€…æ‰“å°å‡ºæ¥ï¼Œ
è€Œæ˜¾ç¤ºè®¾å¤‡ã€å±å¹•æŠ•å½±å’Œæ‰“å°ç­‰è¿™äº›åª’ä»‹éƒ½æœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼ŒCSSå°±æ˜¯ä¸ºæ–‡æ¡£æä¾›åœ¨ä¸åŒåª’ä»‹ä¸Šå±•ç¤ºçš„é€‚é…æ–¹æ³•

&lt;!-- linkå…ƒç´ ä¸­çš„CSSåª’ä½“æŸ¥è¯¢ --&gt;
å½“åª’ä½“æŸ¥è¯¢ä¸ºçœŸæ—¶ï¼Œç›¸å…³çš„æ ·å¼è¡¨æˆ–æ ·å¼è§„åˆ™ä¼šæŒ‰ç…§æ­£å¸¸çš„çº§è”è§„è¢«åº”ç”¨ã€‚
å½“åª’ä½“æŸ¥è¯¢è¿”å›å‡ï¼Œ &lt;link&gt; æ ‡ç­¾ä¸Šå¸¦æœ‰åª’ä½“æŸ¥è¯¢çš„æ ·å¼è¡¨ ä»å°†è¢«ä¸‹è½½ ï¼ˆåªä¸è¿‡ä¸ä¼šè¢«åº”ç”¨ï¼‰ã€‚

&lt;link rel=&quot;stylesheet&quot; media=&quot;(max-width: 800px)&quot; href=&quot;example.css&quot; /&gt;

&lt;!-- æ ·å¼è¡¨ä¸­çš„CSSåª’ä½“æŸ¥è¯¢ --&gt;
åŒ…å«äº†ä¸€ä¸ªåª’ä½“ç±»å‹å’Œè‡³å°‘ä¸€ä¸ªä½¿ç”¨ å®½åº¦ã€é«˜åº¦å’Œé¢œè‰²ç­‰åª’ä½“å±æ€§æ¥é™åˆ¶æ ·å¼è¡¨èŒƒå›´çš„è¡¨è¾¾å¼ã€‚
CSS3åŠ å…¥çš„åª’ä½“æŸ¥è¯¢ä½¿å¾—æ— éœ€ä¿®æ”¹å†…å®¹ä¾¿å¯ä»¥ä½¿æ ·å¼åº”ç”¨äºæŸäº›ç‰¹å®šçš„è®¾å¤‡èŒƒå›´ã€‚

&lt;style&gt;
    @media (min-width: 700px) and (orientation: landscape){
      .sidebar {
        display: none;
      }
    }
&lt;/style&gt;
</code></pre><ul>
<li><p>ä½¿ç”¨ CSS é¢„å¤„ç†å™¨å—ï¼Ÿå–œæ¬¢é‚£ä¸ªï¼Ÿ</p>
<pre><code>  SASS (SASSã€LESSæ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œåªå› ä¸ºå›¢é˜Ÿå‰ç«¯éƒ½æ˜¯ç”¨çš„SASS)
</code></pre></li>
</ul>
<ul>
<li><p>CSSä¼˜åŒ–ã€æé«˜æ€§èƒ½çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</p>
<pre><code>  å…³é”®é€‰æ‹©å™¨ï¼ˆkey selectorï¼‰ã€‚é€‰æ‹©å™¨çš„æœ€åé¢çš„éƒ¨åˆ†ä¸ºå…³é”®é€‰æ‹©å™¨ï¼ˆå³ç”¨æ¥åŒ¹é…ç›®æ ‡å…ƒç´ çš„éƒ¨åˆ†ï¼‰ï¼›
  å¦‚æœè§„åˆ™æ‹¥æœ‰ ID é€‰æ‹©å™¨ä½œä¸ºå…¶å…³é”®é€‰æ‹©å™¨ï¼Œåˆ™ä¸è¦ä¸ºè§„åˆ™å¢åŠ æ ‡ç­¾ã€‚è¿‡æ»¤æ‰æ— å…³çš„è§„åˆ™ï¼ˆè¿™æ ·æ ·å¼ç³»ç»Ÿå°±ä¸ä¼šæµªè´¹æ—¶é—´å»åŒ¹é…å®ƒä»¬äº†ï¼‰ï¼›
  æå–é¡¹ç›®çš„é€šç”¨å…¬æœ‰æ ·å¼ï¼Œå¢å¼ºå¯å¤ç”¨æ€§ï¼ŒæŒ‰æ¨¡å—ç¼–å†™ç»„ä»¶ï¼›å¢å¼ºé¡¹ç›®çš„ååŒå¼€å‘æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§;
  ä½¿ç”¨é¢„å¤„ç†å·¥å…·æˆ–æ„å»ºå·¥å…·ï¼ˆgulpå¯¹cssè¿›è¡Œè¯­æ³•æ£€æŸ¥ã€è‡ªåŠ¨è¡¥å‰ç¼€ã€æ‰“åŒ…å‹ç¼©ã€è‡ªåŠ¨ä¼˜é›…é™çº§ï¼‰ï¼›
</code></pre></li>
</ul>
<ul>
<li><p>æµè§ˆå™¨æ˜¯æ€æ ·è§£æCSSé€‰æ‹©å™¨çš„ï¼Ÿ</p>
<pre><code>  æ ·å¼ç³»ç»Ÿä»å…³é”®é€‰æ‹©å™¨å¼€å§‹åŒ¹é…ï¼Œç„¶åå·¦ç§»æŸ¥æ‰¾è§„åˆ™é€‰æ‹©å™¨çš„ç¥–å…ˆå…ƒç´ ã€‚
  åªè¦é€‰æ‹©å™¨çš„å­æ ‘ä¸€ç›´åœ¨å·¥ä½œï¼Œæ ·å¼ç³»ç»Ÿå°±ä¼šæŒç»­å·¦ç§»ï¼Œç›´åˆ°å’Œè§„åˆ™åŒ¹é…ï¼Œæˆ–è€…æ˜¯å› ä¸ºä¸åŒ¹é…è€Œæ”¾å¼ƒè¯¥è§„åˆ™ã€‚
</code></pre></li>
</ul>
<ul>
<li><p>åœ¨ç½‘é¡µä¸­çš„åº”è¯¥ä½¿ç”¨å¥‡æ•°è¿˜æ˜¯å¶æ•°çš„å­—ä½“ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
</li>
<li><p>marginå’Œpaddingåˆ†åˆ«é€‚åˆä»€ä¹ˆåœºæ™¯ä½¿ç”¨ï¼Ÿ</p>
<pre><code>  marginæ˜¯ç”¨æ¥éš”å¼€å…ƒç´ ä¸å…ƒç´ çš„é—´è·ï¼›paddingæ˜¯ç”¨æ¥éš”å¼€å…ƒç´ ä¸å†…å®¹çš„é—´éš”ã€‚
  marginç”¨äºå¸ƒå±€åˆ†å¼€å…ƒç´ ä½¿å…ƒç´ ä¸å…ƒç´ äº’ä¸ç›¸å¹²ï¼›
  paddingç”¨äºå…ƒç´ ä¸å†…å®¹ä¹‹é—´çš„é—´éš”ï¼Œè®©å†…å®¹ï¼ˆæ–‡å­—ï¼‰ä¸ï¼ˆåŒ…è£¹ï¼‰å…ƒç´ ä¹‹é—´æœ‰ä¸€æ®µ
</code></pre></li>
</ul>
<ul>
<li><p>æŠ½ç¦»æ ·å¼æ¨¡å—æ€ä¹ˆå†™ï¼Œè¯´å‡ºæ€è·¯ï¼Œæœ‰æ— å®è·µç»éªŒï¼Ÿ[é˜¿é‡Œèˆªæ—…çš„é¢è¯•é¢˜]</p>
</li>
<li><p>å…ƒç´ ç«–å‘çš„ç™¾åˆ†æ¯”è®¾å®šæ˜¯ç›¸å¯¹äºå®¹å™¨çš„é«˜åº¦å—ï¼Ÿ</p>
</li>
<li><p>å…¨å±æ»šåŠ¨çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿç”¨åˆ°äº†CSSçš„é‚£äº›å±æ€§ï¼Ÿ</p>
</li>
<li><p>ä»€ä¹ˆæ˜¯å“åº”å¼è®¾è®¡ï¼Ÿå“åº”å¼è®¾è®¡çš„åŸºæœ¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•å…¼å®¹ä½ç‰ˆæœ¬çš„IEï¼Ÿ</p>
</li>
<li><p>è§†å·®æ»šåŠ¨æ•ˆæœï¼Œå¦‚ä½•ç»™æ¯é¡µåšä¸åŒçš„åŠ¨ç”»ï¼Ÿï¼ˆå›åˆ°é¡¶éƒ¨ï¼Œå‘ä¸‹æ»‘åŠ¨è¦å†æ¬¡å‡ºç°ï¼Œå’Œåªå‡ºç°ä¸€æ¬¡åˆ†åˆ«æ€ä¹ˆåšï¼Ÿï¼‰</p>
</li>
<li><p>::before å’Œ :afterä¸­åŒå†’å·å’Œå•å†’å· æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿè§£é‡Šä¸€ä¸‹è¿™2ä¸ªä¼ªå…ƒç´ çš„ä½œç”¨ã€‚</p>
<pre><code>  å•å†’å·(:)ç”¨äºCSS3ä¼ªç±»ï¼ŒåŒå†’å·(::)ç”¨äºCSS3ä¼ªå…ƒç´ ã€‚ï¼ˆä¼ªå…ƒç´ ç”±åŒå†’å·å’Œä¼ªå…ƒç´ åç§°ç»„æˆï¼‰
  åŒå†’å·æ˜¯åœ¨å½“å‰è§„èŒƒä¸­å¼•å…¥çš„ï¼Œç”¨äºåŒºåˆ†ä¼ªç±»å’Œä¼ªå…ƒç´ ã€‚ä¸è¿‡æµè§ˆå™¨éœ€è¦åŒæ—¶æ”¯æŒæ—§çš„å·²ç»å­˜åœ¨çš„ä¼ªå…ƒç´ å†™æ³•ï¼Œ
  æ¯”å¦‚:first-lineã€:first-letterã€:beforeã€:afterç­‰ï¼Œ
  è€Œæ–°çš„åœ¨CSS3ä¸­å¼•å…¥çš„ä¼ªå…ƒç´ åˆ™ä¸å…è®¸å†æ”¯æŒæ—§çš„å•å†’å·çš„å†™æ³•ã€‚

  æƒ³è®©æ’å…¥çš„å†…å®¹å‡ºç°åœ¨å…¶å®ƒå†…å®¹å‰ï¼Œä½¿ç”¨::beforeï¼Œå¦è€…ï¼Œä½¿ç”¨::afterï¼›
  åœ¨ä»£ç é¡ºåºä¸Šï¼Œ::afterç”Ÿæˆçš„å†…å®¹ä¹Ÿæ¯”::beforeç”Ÿæˆçš„å†…å®¹é åã€‚
  å¦‚æœæŒ‰å †æ ˆè§†è§’ï¼Œ::afterç”Ÿæˆçš„å†…å®¹ä¼šåœ¨::beforeç”Ÿæˆçš„å†…å®¹ä¹‹ä¸Š
</code></pre></li>
</ul>
<ul>
<li><p>å¦‚ä½•ä¿®æ”¹chromeè®°ä½å¯†ç åè‡ªåŠ¨å¡«å……è¡¨å•çš„é»„è‰²èƒŒæ™¯ ï¼Ÿ</p>
<pre><code>  input:-webkit-autofill, textarea:-webkit-autofill, select:-webkit-autofill {
    background-color: rgb(250, 255, 189); /* #FAFFBD; */
    background-image: none;
    color: rgb(0, 0, 0);
  }
</code></pre></li>
<li><p>ä½ å¯¹line-heightæ˜¯å¦‚ä½•ç†è§£çš„ï¼Ÿ</p>
</li>
<li><p>è®¾ç½®å…ƒç´ æµ®åŠ¨åï¼Œè¯¥å…ƒç´ çš„displayå€¼æ˜¯å¤šå°‘ï¼Ÿ</p>
<pre><code>  è‡ªåŠ¨å˜æˆäº† display: inline-block
</code></pre></li>
<li><p>æ€ä¹ˆè®©Chromeæ”¯æŒå°äº12px çš„æ–‡å­—ï¼Ÿ</p>
<pre><code>  1ã€ç”¨å›¾ç‰‡ï¼šå¦‚æœæ˜¯å†…å®¹å›ºå®šä¸å˜æƒ…å†µä¸‹ï¼Œä½¿ç”¨å°†å°äº12pxæ–‡å­—å†…å®¹åˆ‡å‡ºåšå›¾ç‰‡ï¼Œè¿™æ ·ä¸å½±å“å…¼å®¹ä¹Ÿä¸å½±å“ç¾è§‚ã€‚
  2ã€ä½¿ç”¨12pxåŠ12pxä»¥ä¸Šå­—ä½“å¤§å°ï¼šä¸ºäº†å…¼å®¹å„å¤§ä¸»æµæµè§ˆå™¨ï¼Œå»ºè®®è®¾è®¡ç¾å·¥å›¾æ—¶å€™è®¾ç½®å¤§äºæˆ–ç­‰äº12pxçš„å­—ä½“å¤§å°ï¼Œå¦‚æœæ˜¯æ¥å•çš„è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç»™å®¢æˆ·è®²è§£å°äº12pxæµè§ˆå™¨ä¸å…¼å®¹ç­‰äº‹å®œã€‚
  3ã€ç»§ç»­ä½¿ç”¨å°äº12pxå­—ä½“å¤§å°æ ·å¼è®¾ç½®ï¼šå¦‚æœä¸è€ƒè™‘chromeå¯ä»¥ä¸ç”¨è€ƒè™‘å…¼å®¹ï¼ŒåŒæ—¶åœ¨è®¾ç½®å°äº12pxå¯¹è±¡è®¾ç½®-webkit-text-size-adjust:noneï¼Œåšåˆ°æœ€å¤§å…¼å®¹è€ƒè™‘ã€‚
  4ã€ä½¿ç”¨12pxä»¥ä¸Šå­—ä½“ï¼šä¸ºäº†å…¼å®¹ã€ä¸ºäº†ä»£ç æ›´ç®€å• ä»æ–°è€ƒè™‘æƒé‡ä¸‹å…¼å®¹æ€§ã€‚
</code></pre></li>
<li><p>è®©é¡µé¢é‡Œçš„å­—ä½“å˜æ¸…æ™°ï¼Œå˜ç»†ç”¨CSSæ€ä¹ˆåšï¼Ÿ</p>
<pre><code>  -webkit-font-smoothing: antialiased;
</code></pre></li>
<li><p>font-styleå±æ€§å¯ä»¥è®©å®ƒèµ‹å€¼ä¸ºâ€œobliqueâ€ obliqueæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</p>
<pre><code>  å€¾æ–œçš„å­—ä½“æ ·å¼
</code></pre></li>
<li><p>position:fixed;åœ¨androidä¸‹æ— æ•ˆæ€ä¹ˆå¤„ç†ï¼Ÿ</p>
<pre><code>  fixedçš„å…ƒç´ æ˜¯ç›¸å¯¹æ•´ä¸ªé¡µé¢å›ºå®šä½ç½®çš„ï¼Œä½ åœ¨å±å¹•ä¸Šæ»‘åŠ¨åªæ˜¯åœ¨ç§»åŠ¨è¿™ä¸ªæ‰€è°“çš„viewportï¼Œ
  åŸæ¥çš„ç½‘é¡µè¿˜å¥½å¥½çš„åœ¨é‚£ï¼Œfixedçš„å†…å®¹ä¹Ÿæ²¡æœ‰å˜è¿‡ä½ç½®ï¼Œ
  æ‰€ä»¥è¯´å¹¶ä¸æ˜¯iOSä¸æ”¯æŒfixedï¼Œåªæ˜¯fixedçš„å…ƒç´ ä¸æ˜¯ç›¸å¯¹æ‰‹æœºå±å¹•å›ºå®šçš„ã€‚
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no&quot;/&gt;
</code></pre></li>
<li><p>å¦‚æœéœ€è¦æ‰‹åŠ¨å†™åŠ¨ç”»ï¼Œä½ è®¤ä¸ºæœ€å°æ—¶é—´é—´éš”æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼ˆé˜¿é‡Œï¼‰</p>
<pre><code>  å¤šæ•°æ˜¾ç¤ºå™¨é»˜è®¤é¢‘ç‡æ˜¯60Hzï¼Œå³1ç§’åˆ·æ–°60æ¬¡ï¼Œæ‰€ä»¥ç†è®ºä¸Šæœ€å°é—´éš”ä¸º1/60ï¼Š1000ms ï¼ 16.7ms
</code></pre></li>
<li><p>display:inline-block ä»€ä¹ˆæ—¶å€™ä¼šæ˜¾ç¤ºé—´éš™ï¼Ÿ(æºç¨‹)</p>
<pre><code>  ç§»é™¤ç©ºæ ¼ã€ä½¿ç”¨marginè´Ÿå€¼ã€ä½¿ç”¨font-size:0ã€letter-spacingã€word-spacing
</code></pre></li>
<li><p>overflow: scrollæ—¶ä¸èƒ½å¹³æ»‘æ»šåŠ¨çš„é—®é¢˜æ€ä¹ˆå¤„ç†ï¼Ÿ</p>
</li>
<li><p>æœ‰ä¸€ä¸ªé«˜åº¦è‡ªé€‚åº”çš„divï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªdivï¼Œä¸€ä¸ªé«˜åº¦100pxï¼Œå¸Œæœ›å¦ä¸€ä¸ªå¡«æ»¡å‰©ä¸‹çš„é«˜åº¦ã€‚</p>
</li>
<li><p>pngã€jpgã€gif è¿™äº›å›¾ç‰‡æ ¼å¼è§£é‡Šä¸€ä¸‹ï¼Œåˆ†åˆ«ä»€ä¹ˆæ—¶å€™ç”¨ã€‚æœ‰æ²¡æœ‰äº†è§£è¿‡webpï¼Ÿ</p>
</li>
</ul>
<ul>
<li><p>ä»€ä¹ˆæ˜¯Cookie éš”ç¦»ï¼Ÿï¼ˆæˆ–è€…è¯´ï¼šè¯·æ±‚èµ„æºçš„æ—¶å€™ä¸è¦è®©å®ƒå¸¦cookieæ€ä¹ˆåšï¼‰</p>
<pre><code>  å¦‚æœé™æ€æ–‡ä»¶éƒ½æ”¾åœ¨ä¸»åŸŸåä¸‹ï¼Œé‚£é™æ€æ–‡ä»¶è¯·æ±‚çš„æ—¶å€™éƒ½å¸¦æœ‰çš„cookieçš„æ•°æ®æäº¤ç»™serverçš„ï¼Œéå¸¸æµªè´¹æµé‡ï¼Œ
  æ‰€ä»¥ä¸å¦‚éš”ç¦»å¼€ã€‚

  å› ä¸ºcookieæœ‰åŸŸçš„é™åˆ¶ï¼Œå› æ­¤ä¸èƒ½è·¨åŸŸæäº¤è¯·æ±‚ï¼Œæ•…ä½¿ç”¨éä¸»è¦åŸŸåçš„æ—¶å€™ï¼Œè¯·æ±‚å¤´ä¸­å°±ä¸ä¼šå¸¦æœ‰cookieæ•°æ®ï¼Œ
  è¿™æ ·å¯ä»¥é™ä½è¯·æ±‚å¤´çš„å¤§å°ï¼Œé™ä½è¯·æ±‚æ—¶é—´ï¼Œä»è€Œè¾¾åˆ°é™ä½æ•´ä½“è¯·æ±‚å»¶æ—¶çš„ç›®çš„ã€‚

  åŒæ—¶è¿™ç§æ–¹å¼ä¸ä¼šå°†cookieä¼ å…¥Web Serverï¼Œä¹Ÿå‡å°‘äº†Web Serverå¯¹cookieçš„å¤„ç†åˆ†æç¯èŠ‚ï¼Œ
  æé«˜äº†webserverçš„httpè¯·æ±‚çš„è§£æé€Ÿåº¦ã€‚
</code></pre></li>
</ul>
<ul>
<li>styleæ ‡ç­¾å†™åœ¨bodyåä¸bodyå‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li>
</ul>
<ul>
<li><p>ä»€ä¹ˆæ˜¯CSS é¢„å¤„ç†å™¨ / åå¤„ç†å™¨ï¼Ÿ</p>
<pre><code>  - é¢„å¤„ç†å™¨ä¾‹å¦‚ï¼šLESSã€Sassã€Stylusï¼Œç”¨æ¥é¢„ç¼–è¯‘Sassæˆ–lessï¼Œå¢å¼ºäº†cssä»£ç çš„å¤ç”¨æ€§ï¼Œ
    è¿˜æœ‰å±‚çº§ã€mixinã€å˜é‡ã€å¾ªç¯ã€å‡½æ•°ç­‰ï¼Œå…·æœ‰å¾ˆæ–¹ä¾¿çš„UIç»„ä»¶æ¨¡å—åŒ–å¼€å‘èƒ½åŠ›ï¼Œæå¤§çš„æé«˜å·¥ä½œæ•ˆç‡ã€‚

  - åå¤„ç†å™¨ä¾‹å¦‚ï¼šPostCSSï¼Œé€šå¸¸è¢«è§†ä¸ºåœ¨å®Œæˆçš„æ ·å¼è¡¨ä¸­æ ¹æ®CSSè§„èŒƒå¤„ç†CSSï¼Œè®©å…¶æ›´æœ‰æ•ˆï¼›ç›®å‰æœ€å¸¸åšçš„
    æ˜¯ç»™CSSå±æ€§æ·»åŠ æµè§ˆå™¨ç§æœ‰å‰ç¼€ï¼Œå®ç°è·¨æµè§ˆå™¨å…¼å®¹æ€§çš„é—®é¢˜ã€‚
</code></pre></li>
</ul>
<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a><a name="js">JavaScript</a></h2><ul>
<li><p>ä»‹ç»jsçš„åŸºæœ¬æ•°æ®ç±»å‹ã€‚</p>
<pre><code>  Undefinedã€Nullã€Booleanã€Numberã€Stringã€
  ECMAScript 2015 æ–°å¢:Symbol(åˆ›å»ºåç‹¬ä¸€æ— äºŒä¸”ä¸å¯å˜çš„æ•°æ®ç±»å‹ )
</code></pre></li>
<li><p>ä»‹ç»jsæœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿ</p>
<pre><code> Object æ˜¯ JavaScript ä¸­æ‰€æœ‰å¯¹è±¡çš„çˆ¶å¯¹è±¡

 æ•°æ®å°è£…ç±»å¯¹è±¡ï¼šObjectã€Arrayã€Booleanã€Number å’Œ String
 å…¶ä»–å¯¹è±¡ï¼šFunctionã€Argumentsã€Mathã€Dateã€RegExpã€Error

 å‚è€ƒï¼šhttp://www.ibm.com/developerworks/cn/web/wa-objectsinjs-v1b/index.html
</code></pre></li>
<li><p>è¯´å‡ æ¡å†™JavaScriptçš„åŸºæœ¬è§„èŒƒï¼Ÿ</p>
<pre><code> 1.ä¸è¦åœ¨åŒä¸€è¡Œå£°æ˜å¤šä¸ªå˜é‡ã€‚
 2.è¯·ä½¿ç”¨ ===/!==æ¥æ¯”è¾ƒtrue/falseæˆ–è€…æ•°å€¼
 3.ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ›¿ä»£new Arrayè¿™ç§å½¢å¼
 4.ä¸è¦ä½¿ç”¨å…¨å±€å‡½æ•°ã€‚
 5.Switchè¯­å¥å¿…é¡»å¸¦æœ‰defaultåˆ†æ”¯
 6.å‡½æ•°ä¸åº”è¯¥æœ‰æ—¶å€™æœ‰è¿”å›å€¼ï¼Œæœ‰æ—¶å€™æ²¡æœ‰è¿”å›å€¼ã€‚
 7.Forå¾ªç¯å¿…é¡»ä½¿ç”¨å¤§æ‹¬å·
 8.Ifè¯­å¥å¿…é¡»ä½¿ç”¨å¤§æ‹¬å·
 9.for-inå¾ªç¯ä¸­çš„å˜é‡ åº”è¯¥ä½¿ç”¨varå…³é”®å­—æ˜ç¡®é™å®šä½œç”¨åŸŸï¼Œä»è€Œé¿å…ä½œç”¨åŸŸæ±¡æŸ“ã€‚
</code></pre></li>
<li><p>JavaScriptåŸå‹ï¼ŒåŸå‹é“¾ ? æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</p>
<pre><code> æ¯ä¸ªå¯¹è±¡éƒ½ä¼šåœ¨å…¶å†…éƒ¨åˆå§‹åŒ–ä¸€ä¸ªå±æ€§ï¼Œå°±æ˜¯prototype(åŸå‹)ï¼Œå½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œ
 å¦‚æœè¿™ä¸ªå¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆä»–å°±ä¼šå»prototypeé‡Œæ‰¾è¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªprototypeåˆä¼šæœ‰è‡ªå·±çš„prototypeï¼Œ
 äºæ˜¯å°±è¿™æ ·ä¸€ç›´æ‰¾ä¸‹å»ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„åŸå‹é“¾çš„æ¦‚å¿µã€‚
 å…³ç³»ï¼šinstance.constructor.prototype = instance.__proto__

 ç‰¹ç‚¹ï¼š
 JavaScriptå¯¹è±¡æ˜¯é€šè¿‡å¼•ç”¨æ¥ä¼ é€’çš„ï¼Œæˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªæ–°å¯¹è±¡å®ä½“ä¸­å¹¶æ²¡æœ‰ä¸€ä»½å±äºè‡ªå·±çš„åŸå‹å‰¯æœ¬ã€‚å½“æˆ‘ä»¬ä¿®æ”¹åŸå‹æ—¶ï¼Œä¸ä¹‹ç›¸å…³çš„å¯¹è±¡ä¹Ÿä¼šç»§æ‰¿è¿™ä¸€æ”¹å˜ã€‚
</code></pre></li>
</ul>
<pre><code>     å½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå±æ€§çš„æ—¶ï¼ŒJavascriptå¼•æ“ä¼šå…ˆçœ‹å½“å‰å¯¹è±¡ä¸­æ˜¯å¦æœ‰è¿™ä¸ªå±æ€§ï¼Œ å¦‚æœæ²¡æœ‰çš„è¯ï¼Œ
     å°±ä¼šæŸ¥æ‰¾ä»–çš„Prototypeå¯¹è±¡æ˜¯å¦æœ‰è¿™ä¸ªå±æ€§ï¼Œå¦‚æ­¤é€’æ¨ä¸‹å»ï¼Œä¸€ç›´æ£€ç´¢åˆ° Object å†…å»ºå¯¹è±¡ã€‚
        function Func(){}
        Func.prototype.name = &quot;Sean&quot;;
        Func.prototype.getInfo = function() {
          return this.name;
        }
        var person = new Func();//ç°åœ¨å¯ä»¥å‚è€ƒvar person = Object.create(oldObject);
        console.log(person.getInfo());//å®ƒæ‹¥æœ‰äº†Funcçš„å±æ€§å’Œæ–¹æ³•
        //&quot;Sean&quot;
        console.log(Func.prototype);
        // Func { name=&quot;Sean&quot;, getInfo=function()}
</code></pre><ul>
<li><p>JavaScriptæœ‰å‡ ç§ç±»å‹çš„å€¼ï¼Ÿï¼Œä½ èƒ½ç”»ä¸€ä¸‹ä»–ä»¬çš„å†…å­˜å›¾å—ï¼Ÿ</p>
<pre><code> æ ˆï¼šåŸå§‹æ•°æ®ç±»å‹ï¼ˆUndefinedï¼ŒNullï¼ŒBooleanï¼ŒNumberã€Stringï¼‰
 å †ï¼šå¼•ç”¨æ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ã€æ•°ç»„å’Œå‡½æ•°ï¼‰

 ä¸¤ç§ç±»å‹çš„åŒºåˆ«æ˜¯ï¼šå­˜å‚¨ä½ç½®ä¸åŒï¼›
 åŸå§‹æ•°æ®ç±»å‹ç›´æ¥å­˜å‚¨åœ¨æ ˆ(stack)ä¸­çš„ç®€å•æ•°æ®æ®µï¼Œå æ®ç©ºé—´å°ã€å¤§å°å›ºå®šï¼Œå±äºè¢«é¢‘ç¹ä½¿ç”¨æ•°æ®ï¼Œæ‰€ä»¥æ”¾å…¥æ ˆä¸­å­˜å‚¨ï¼›
 å¼•ç”¨æ•°æ®ç±»å‹å­˜å‚¨åœ¨å †(heap)ä¸­çš„å¯¹è±¡,å æ®ç©ºé—´å¤§ã€å¤§å°ä¸å›ºå®šã€‚å¦‚æœå­˜å‚¨åœ¨æ ˆä¸­ï¼Œå°†ä¼šå½±å“ç¨‹åºè¿è¡Œçš„æ€§èƒ½ï¼›å¼•ç”¨æ•°æ®ç±»å‹åœ¨æ ˆä¸­å­˜å‚¨äº†æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘å †ä¸­è¯¥å®ä½“çš„èµ·å§‹åœ°å€ã€‚å½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šé¦–å…ˆæ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œå–å¾—åœ°å€åä»å †ä¸­è·å¾—å®ä½“
</code></pre><p> <img src="http://www.w3school.com.cn/i/ct_js_value.gif" alt="Stated Clearly Image"></p>
</li>
<li><p>å¦‚ä½•å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°å­—ï¼Œä¾‹å¦‚â€™12.3bâ€™?</p>
<pre><code>  * parseFloat(&#39;12.3b&#39;);
  * æ­£åˆ™è¡¨è¾¾å¼ï¼Œ&#39;12.3b&#39;.match(/(\d)+(\.)?(\d)+/g)[0] * 1, ä½†æ˜¯è¿™ä¸ªä¸å¤ªé è°±ï¼Œæä¾›ä¸€ç§æ€è·¯è€Œå·²ã€‚
</code></pre></li>
<li><p>å¦‚ä½•å°†æµ®ç‚¹æ•°ç‚¹å·¦è¾¹çš„æ•°æ¯ä¸‰ä½æ·»åŠ ä¸€ä¸ªé€—å·ï¼Œå¦‚12000000.11è½¬åŒ–ä¸ºã€12,000,000.11ã€?</p>
<pre><code>  function commafy(num){
      return num &amp;&amp; num
          .toString()
          .replace(/(\d)(?=(\d{3})+\.)/g, function($1, $2){
              return $2 + &#39;,&#39;;
          });
  }
</code></pre></li>
<li><p>å¦‚ä½•å®ç°æ•°ç»„çš„éšæœºæ’åºï¼Ÿ</p>
<pre><code>  æ–¹æ³•ä¸€ï¼š
  ```javascript
          var arr = [1,2,3,4,5,6,7,8,9,10];
          function randSort1(arr){
              for(var i = 0,len = arr.length;i &lt; len; i++ ){
                  var rand = parseInt(Math.random()*len);
                  var temp = arr[rand];
                  arr[rand] = arr[i];
                  arr[i] = temp;
              }
              return arr;
          }
          console.log(randSort1(arr));

  ```
  æ–¹æ³•äºŒï¼š
  ```javascript
          var arr = [1,2,3,4,5,6,7,8,9,10];
          function randSort2(arr){
              var mixedArray = [];
              while(arr.length &gt; 0){
                  var randomIndex = parseInt(Math.random()*arr.length);
                  mixedArray.push(arr[randomIndex]);
                  arr.splice(randomIndex, 1);
              }
              return mixedArray;
          }
          console.log(randSort2(arr));

  ```
  æ–¹æ³•ä¸‰ï¼š
  ```javascript
          var arr = [1,2,3,4,5,6,7,8,9,10];
          arr.sort(function(){
              return Math.random() - 0.5;
          })
          console.log(arr);
  ```
</code></pre></li>
<li><p>Javascriptå¦‚ä½•å®ç°ç»§æ‰¿ï¼Ÿ</p>
<pre><code> 1ã€æ„é€ ç»§æ‰¿
 2ã€åŸå‹ç»§æ‰¿
 3ã€å®ä¾‹ç»§æ‰¿
 4ã€æ‹·è´ç»§æ‰¿

 åŸå‹prototypeæœºåˆ¶æˆ–applyå’Œcallæ–¹æ³•å»å®ç°è¾ƒç®€å•ï¼Œå»ºè®®ä½¿ç”¨æ„é€ å‡½æ•°ä¸åŸå‹æ··åˆæ–¹å¼ã€‚
 ```javascript
         function Parent(){
             this.name = &#39;wang&#39;;
         }

         function Child(){
             this.age = 28;
         }
         Child.prototype = new Parent();//ç»§æ‰¿äº†Parentï¼Œé€šè¿‡åŸå‹

         var demo = new Child();
         alert(demo.age);
         alert(demo.name);//å¾—åˆ°è¢«ç»§æ‰¿çš„å±æ€§

 ```
</code></pre></li>
<li>JavaScriptç»§æ‰¿çš„å‡ ç§å®ç°æ–¹å¼ï¼Ÿ<ul>
<li>å‚è€ƒï¼š<a href="http://www.ruanyifeng.com/blog/2010/05/object-oriented_javascript_inheritance.html" target="_blank" rel="external">æ„é€ å‡½æ•°çš„ç»§æ‰¿</a>ï¼Œ<a href="http://www.ruanyifeng.com/blog/2010/05/object-oriented_javascript_inheritance_continued.html" target="_blank" rel="external">éæ„é€ å‡½æ•°çš„ç»§æ‰¿</a>ï¼›</li>
</ul>
</li>
</ul>
<ul>
<li><p>javascriptåˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼ï¼Ÿ</p>
<pre><code> javascriptåˆ›å»ºå¯¹è±¡ç®€å•çš„è¯´,æ— éå°±æ˜¯ä½¿ç”¨å†…ç½®å¯¹è±¡æˆ–å„ç§è‡ªå®šä¹‰å¯¹è±¡ï¼Œå½“ç„¶è¿˜å¯ä»¥ç”¨JSONï¼›ä½†å†™æ³•æœ‰å¾ˆå¤šç§ï¼Œä¹Ÿèƒ½æ··åˆä½¿ç”¨ã€‚
</code></pre></li>
</ul>
<pre><code>    1ã€å¯¹è±¡å­—é¢é‡çš„æ–¹å¼

        person={firstname:&quot;Mark&quot;,lastname:&quot;Yun&quot;,age:25,eyecolor:&quot;black&quot;};

    2ã€ç”¨functionæ¥æ¨¡æ‹Ÿæ— å‚çš„æ„é€ å‡½æ•°

        function Person(){}
        var person=new Person();//å®šä¹‰ä¸€ä¸ªfunctionï¼Œå¦‚æœä½¿ç”¨new&quot;å®ä¾‹åŒ–&quot;,è¯¥functionå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªClass
        person.name=&quot;Mark&quot;;
        person.age=&quot;25&quot;;
        person.work=function(){
        alert(person.name+&quot; hello...&quot;);
        }
        person.work();

    3ã€ç”¨functionæ¥æ¨¡æ‹Ÿå‚æ„é€ å‡½æ•°æ¥å®ç°ï¼ˆç”¨thiså…³é”®å­—å®šä¹‰æ„é€ çš„ä¸Šä¸‹æ–‡å±æ€§ï¼‰

        function Pet(name,age,hobby){
           this.name=name;//thisä½œç”¨åŸŸï¼šå½“å‰å¯¹è±¡
           this.age=age;
           this.hobby=hobby;
           this.eat=function(){
              alert(&quot;æˆ‘å«&quot;+this.name+&quot;,æˆ‘å–œæ¬¢&quot;+this.hobby+&quot;,æ˜¯ä¸ªç¨‹åºå‘˜&quot;);
           }
        }
        var maidou =new Pet(&quot;éº¦å…œ&quot;,25,&quot;coding&quot;);//å®ä¾‹åŒ–ã€åˆ›å»ºå¯¹è±¡
        maidou.eat();//è°ƒç”¨eatæ–¹æ³•


    4ã€ç”¨å·¥å‚æ–¹å¼æ¥åˆ›å»ºï¼ˆå†…ç½®å¯¹è±¡ï¼‰

         var wcDog =new Object();
         wcDog.name=&quot;æ—ºè´¢&quot;;
         wcDog.age=3;
         wcDog.work=function(){
           alert(&quot;æˆ‘æ˜¯&quot;+wcDog.name+&quot;,æ±ªæ±ªæ±ª......&quot;);
         }
         wcDog.work();


    5ã€ç”¨åŸå‹æ–¹å¼æ¥åˆ›å»º

        function Dog(){

         }
         Dog.prototype.name=&quot;æ—ºè´¢&quot;;
         Dog.prototype.eat=function(){
         alert(this.name+&quot;æ˜¯ä¸ªåƒè´§&quot;);
         }
         var wangcai =new Dog();
         wangcai.eat();


    5ã€ç”¨æ··åˆæ–¹å¼æ¥åˆ›å»º

        function Car(name,price){
          this.name=name;
          this.price=price;
        }
         Car.prototype.sell=function(){
           alert(&quot;æˆ‘æ˜¯&quot;+this.name+&quot;ï¼Œæˆ‘ç°åœ¨å–&quot;+this.price+&quot;ä¸‡å…ƒ&quot;);
          }
        var camry =new Car(&quot;å‡¯ç¾ç‘&quot;,27);
        camry.sell();
</code></pre><ul>
<li><p>Javascriptä½œç”¨é“¾åŸŸ?</p>
<pre><code> å…¨å±€å‡½æ•°æ— æ³•æŸ¥çœ‹å±€éƒ¨å‡½æ•°çš„å†…éƒ¨ç»†èŠ‚ï¼Œä½†å±€éƒ¨å‡½æ•°å¯ä»¥æŸ¥çœ‹å…¶ä¸Šå±‚çš„å‡½æ•°ç»†èŠ‚ï¼Œç›´è‡³å…¨å±€ç»†èŠ‚ã€‚
 å½“éœ€è¦ä»å±€éƒ¨å‡½æ•°æŸ¥æ‰¾æŸä¸€å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå¦‚æœå½“å‰ä½œç”¨åŸŸæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šä¸Šæº¯åˆ°ä¸Šå±‚ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œ
 ç›´è‡³å…¨å±€å‡½æ•°ï¼Œè¿™ç§ç»„ç»‡å½¢å¼å°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚
</code></pre></li>
<li><p>è°ˆè°ˆThiså¯¹è±¡çš„ç†è§£ã€‚</p>
<ul>
<li>thisæ€»æ˜¯æŒ‡å‘å‡½æ•°çš„ç›´æ¥è°ƒç”¨è€…ï¼ˆè€Œéé—´æ¥è°ƒç”¨è€…ï¼‰ï¼›</li>
<li>å¦‚æœæœ‰newå…³é”®å­—ï¼ŒthisæŒ‡å‘newå‡ºæ¥çš„é‚£ä¸ªå¯¹è±¡ï¼›</li>
<li>åœ¨äº‹ä»¶ä¸­ï¼ŒthisæŒ‡å‘è§¦å‘è¿™ä¸ªäº‹ä»¶çš„å¯¹è±¡ï¼Œç‰¹æ®Šçš„æ˜¯ï¼ŒIEä¸­çš„attachEventä¸­çš„thisæ€»æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡Windowï¼›</li>
</ul>
</li>
<li><p>evalæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</p>
<pre><code> å®ƒçš„åŠŸèƒ½æ˜¯æŠŠå¯¹åº”çš„å­—ç¬¦ä¸²è§£ææˆJSä»£ç å¹¶è¿è¡Œï¼›
 åº”è¯¥é¿å…ä½¿ç”¨evalï¼Œä¸å®‰å…¨ï¼Œéå¸¸è€—æ€§èƒ½ï¼ˆ2æ¬¡ï¼Œä¸€æ¬¡è§£ææˆjsè¯­å¥ï¼Œä¸€æ¬¡æ‰§è¡Œï¼‰ã€‚
 ç”±JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJSONå¯¹è±¡çš„æ—¶å€™å¯ä»¥ç”¨evalï¼Œvar obj =eval(&#39;(&#39;+ str +&#39;)&#39;);
</code></pre></li>
<li><p>ä»€ä¹ˆæ˜¯windowå¯¹è±¡? ä»€ä¹ˆæ˜¯documentå¯¹è±¡?</p>
<pre><code> windowå¯¹è±¡æ˜¯æŒ‡æµè§ˆå™¨æ‰“å¼€çš„çª—å£ã€‚
 documentå¯¹è±¡æ˜¯Documentdå¯¹è±¡ï¼ˆHTML æ–‡æ¡£å¯¹è±¡ï¼‰çš„ä¸€ä¸ªåªè¯»å¼•ç”¨ï¼Œwindowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚
</code></pre></li>
<li><p>nullï¼Œundefined çš„åŒºåˆ«ï¼Ÿ</p>
<pre><code> null         è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡æ˜¯â€œæ²¡æœ‰å€¼â€çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å€¼ä¸ºâ€œç©ºâ€ï¼›
 undefined     è¡¨ç¤ºä¸€ä¸ªå˜é‡å£°æ˜äº†æ²¡æœ‰åˆå§‹åŒ–(èµ‹å€¼)ï¼›

 undefinedä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONï¼Œè€Œnullæ˜¯ï¼›
 undefinedçš„ç±»å‹(typeof)æ˜¯undefinedï¼›
 nullçš„ç±»å‹(typeof)æ˜¯objectï¼›
</code></pre></li>
</ul>
<pre><code>    Javascriptå°†æœªèµ‹å€¼çš„å˜é‡é»˜è®¤å€¼è®¾ä¸ºundefinedï¼›
    Javascriptä»æ¥ä¸ä¼šå°†å˜é‡è®¾ä¸ºnullã€‚å®ƒæ˜¯ç”¨æ¥è®©ç¨‹åºå‘˜è¡¨æ˜æŸä¸ªç”¨varå£°æ˜çš„å˜é‡æ—¶æ²¡æœ‰å€¼çš„ã€‚

    typeof undefined
        //&quot;undefined&quot;
        undefined :æ˜¯ä¸€ä¸ªè¡¨ç¤º&quot;æ— &quot;çš„åŸå§‹å€¼æˆ–è€…è¯´è¡¨ç¤º&quot;ç¼ºå°‘å€¼&quot;ï¼Œå°±æ˜¯æ­¤å¤„åº”è¯¥æœ‰ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å®šä¹‰ã€‚å½“å°è¯•è¯»å–æ—¶ä¼šè¿”å› undefinedï¼›
        ä¾‹å¦‚å˜é‡è¢«å£°æ˜äº†ï¼Œä½†æ²¡æœ‰èµ‹å€¼æ—¶ï¼Œå°±ç­‰äºundefined

    typeof null
        //&quot;object&quot;
        null : æ˜¯ä¸€ä¸ªå¯¹è±¡(ç©ºå¯¹è±¡, æ²¡æœ‰ä»»ä½•å±æ€§å’Œæ–¹æ³•)ï¼›
        ä¾‹å¦‚ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°çš„å‚æ•°ä¸æ˜¯å¯¹è±¡ï¼›

    æ³¨æ„ï¼š
        åœ¨éªŒè¯nullæ—¶ï¼Œä¸€å®šè¦ä½¿ç”¨ã€€=== ï¼Œå› ä¸º == æ— æ³•åˆ†åˆ« null å’Œã€€undefined
         null == undefined // true
          null === undefined // false

    å†æ¥ä¸€ä¸ªä¾‹å­ï¼š

        null
        Qï¼šæœ‰å¼ ä¸‰è¿™ä¸ªäººä¹ˆï¼Ÿ
        Aï¼šæœ‰ï¼
        Qï¼šå¼ ä¸‰æœ‰æˆ¿å­ä¹ˆï¼Ÿ
        Aï¼šæ²¡æœ‰ï¼

        undefined
        Qï¼šæœ‰å¼ ä¸‰è¿™ä¸ªäººä¹ˆï¼Ÿ
        Aï¼šæœ‰ï¼
        Q: å¼ ä¸‰æœ‰å¤šå°‘å²ï¼Ÿ
        A: ä¸çŸ¥é“ï¼ˆæ²¡æœ‰è¢«å‘Šè¯‰ï¼‰

å‚è€ƒé˜…è¯»ï¼š[undefinedä¸nullçš„åŒºåˆ«](http://www.ruanyifeng.com/blog/2014/03/undefined-vs-null.html)
</code></pre><ul>
<li><p>å†™ä¸€ä¸ªé€šç”¨çš„äº‹ä»¶ä¾¦å¬å™¨å‡½æ•°ã€‚</p>
<pre><code>     // event(äº‹ä»¶)å·¥å…·é›†ï¼Œæ¥æºï¼šgithub.com/markyun
     markyun.Event = {
         // é¡µé¢åŠ è½½å®Œæˆå
         readyEvent : function(fn) {
             if (fn==null) {
                 fn=document;
             }
             var oldonload = window.onload;
             if (typeof window.onload != &#39;function&#39;) {
                 window.onload = fn;
             } else {
                 window.onload = function() {
                     oldonload();
                     fn();
                 };
             }
         },
         // è§†èƒ½åŠ›åˆ†åˆ«ä½¿ç”¨dom0||dom2||IEæ–¹å¼ æ¥ç»‘å®šäº‹ä»¶
         // å‚æ•°ï¼š æ“ä½œçš„å…ƒç´ ,äº‹ä»¶åç§° ,äº‹ä»¶å¤„ç†ç¨‹åº
         addEvent : function(element, type, handler) {
             if (element.addEventListener) {
                 //äº‹ä»¶ç±»å‹ã€éœ€è¦æ‰§è¡Œçš„å‡½æ•°ã€æ˜¯å¦æ•æ‰
                 element.addEventListener(type, handler, false);
             } else if (element.attachEvent) {
                 element.attachEvent(&#39;on&#39; + type, function() {
                     handler.call(element);
                 });
             } else {
                 element[&#39;on&#39; + type] = handler;
             }
         },
         // ç§»é™¤äº‹ä»¶
         removeEvent : function(element, type, handler) {
             if (element.removeEventListener) {
                 element.removeEventListener(type, handler, false);
             } else if (element.datachEvent) {
                 element.detachEvent(&#39;on&#39; + type, handler);
             } else {
                 element[&#39;on&#39; + type] = null;
             }
         },
         // é˜»æ­¢äº‹ä»¶ (ä¸»è¦æ˜¯äº‹ä»¶å†’æ³¡ï¼Œå› ä¸ºIEä¸æ”¯æŒäº‹ä»¶æ•è·)
         stopPropagation : function(ev) {
             if (ev.stopPropagation) {
                 ev.stopPropagation();
             } else {
                 ev.cancelBubble = true;
             }
         },
         // å–æ¶ˆäº‹ä»¶çš„é»˜è®¤è¡Œä¸º
         preventDefault : function(event) {
             if (event.preventDefault) {
                 event.preventDefault();
             } else {
                 event.returnValue = false;
             }
         },
         // è·å–äº‹ä»¶ç›®æ ‡
         getTarget : function(event) {
             return event.target || event.srcElement;
         },
         // è·å–eventå¯¹è±¡çš„å¼•ç”¨ï¼Œå–åˆ°äº‹ä»¶çš„æ‰€æœ‰ä¿¡æ¯ï¼Œç¡®ä¿éšæ—¶èƒ½ä½¿ç”¨eventï¼›
         getEvent : function(e) {
             var ev = e || window.event;
             if (!ev) {
                 var c = this.getEvent.caller;
                 while (c) {
                     ev = c.arguments[0];
                     if (ev &amp;&amp; Event == ev.constructor) {
                         break;
                     }
                     c = c.caller;
                 }
             }
             return ev;
         }
     };
</code></pre></li>
<li><p>[â€œ1â€, â€œ2â€, â€œ3â€].map(parseInt) ç­”æ¡ˆæ˜¯å¤šå°‘ï¼Ÿ</p>
<pre><code> parseInt() å‡½æ•°èƒ½è§£æä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œéœ€è¦ä¸¤ä¸ªå‚æ•° (val, radix)ï¼Œ
 å…¶ä¸­ radix è¡¨ç¤ºè¦è§£æçš„æ•°å­—çš„åŸºæ•°ã€‚ã€è¯¥å€¼ä»‹äº 2 ~ 36 ä¹‹é—´ï¼Œå¹¶ä¸”å­—ç¬¦ä¸²ä¸­çš„æ•°å­—ä¸èƒ½å¤§äºradixæ‰èƒ½æ­£ç¡®è¿”å›æ•°å­—ç»“æœå€¼ã€‘;
 ä½†æ­¤å¤„ map ä¼ äº† 3 ä¸ª (element, index, array),æˆ‘ä»¬é‡å†™parseIntå‡½æ•°æµ‹è¯•ä¸€ä¸‹æ˜¯å¦ç¬¦åˆä¸Šé¢çš„è§„åˆ™ã€‚

 function parseInt(str, radix) {
     return str+&#39;-&#39;+radix;
 };
 var a=[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;];
 a.map(parseInt);  // [&quot;1-0&quot;, &quot;2-1&quot;, &quot;3-2&quot;] ä¸èƒ½å¤§äºradix

 å› ä¸ºäºŒè¿›åˆ¶é‡Œé¢ï¼Œæ²¡æœ‰æ•°å­—3,å¯¼è‡´å‡ºç°è¶…èŒƒå›´çš„radixèµ‹å€¼å’Œä¸åˆæ³•çš„è¿›åˆ¶è§£æï¼Œæ‰ä¼šè¿”å›NaN
 æ‰€ä»¥[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;].map(parseInt) ç­”æ¡ˆä¹Ÿå°±æ˜¯ï¼š[1, NaN, NaN]

 è¯¦ç»†è§£æï¼šhttp://blog.csdn.net/justjavac/article/details/19473199
</code></pre></li>
<li><p>äº‹ä»¶æ˜¯ï¼ŸIEä¸ç«ç‹çš„äº‹ä»¶æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å¦‚ä½•é˜»æ­¢å†’æ³¡ï¼Ÿ</p>
<pre><code>  1. æˆ‘ä»¬åœ¨ç½‘é¡µä¸­çš„æŸä¸ªæ“ä½œï¼ˆæœ‰çš„æ“ä½œå¯¹åº”å¤šä¸ªäº‹ä»¶ï¼‰ã€‚ä¾‹å¦‚ï¼šå½“æˆ‘ä»¬ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å°±ä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶ã€‚æ˜¯å¯ä»¥è¢« JavaScript ä¾¦æµ‹åˆ°çš„è¡Œä¸ºã€‚
  2. äº‹ä»¶å¤„ç†æœºåˆ¶ï¼šIEæ˜¯äº‹ä»¶å†’æ³¡ã€FirefoxåŒæ—¶æ”¯æŒä¸¤ç§äº‹ä»¶æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯ï¼šæ•è·å‹äº‹ä»¶å’Œå†’æ³¡å‹äº‹ä»¶ï¼›
  3. ev.stopPropagation();ï¼ˆæ—§ieçš„æ–¹æ³• ev.cancelBubble = true;ï¼‰
</code></pre></li>
</ul>
<ul>
<li><p>ä»€ä¹ˆæ˜¯é—­åŒ…ï¼ˆclosureï¼‰ï¼Œä¸ºä»€ä¹ˆè¦ç”¨å®ƒï¼Ÿ</p>
<pre><code> é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ï¼Œåˆ›å»ºé—­åŒ…çš„æœ€å¸¸è§çš„æ–¹å¼å°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡å¦ä¸€ä¸ªå‡½æ•°è®¿é—®è¿™ä¸ªå‡½æ•°çš„å±€éƒ¨å˜é‡,åˆ©ç”¨é—­åŒ…å¯ä»¥çªç ´ä½œç”¨é“¾åŸŸï¼Œå°†å‡½æ•°å†…éƒ¨çš„å˜é‡å’Œæ–¹æ³•ä¼ é€’åˆ°å¤–éƒ¨ã€‚

 é—­åŒ…çš„ç‰¹æ€§ï¼š

 1.å‡½æ•°å†…å†åµŒå¥—å‡½æ•°
 2.å†…éƒ¨å‡½æ•°å¯ä»¥å¼•ç”¨å¤–å±‚çš„å‚æ•°å’Œå˜é‡
 3.å‚æ•°å’Œå˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶

 //lièŠ‚ç‚¹çš„onclickäº‹ä»¶éƒ½èƒ½æ­£ç¡®çš„å¼¹å‡ºå½“å‰è¢«ç‚¹å‡»çš„liç´¢å¼•
  &lt;ul id=&quot;testUL&quot;&gt;
     &lt;li&gt; index = 0&lt;/li&gt;
     &lt;li&gt; index = 1&lt;/li&gt;
     &lt;li&gt; index = 2&lt;/li&gt;
     &lt;li&gt; index = 3&lt;/li&gt;
 &lt;/ul&gt;
 &lt;script type=&quot;text/javascript&quot;&gt;
       var nodes = document.getElementsByTagName(&quot;li&quot;);
     for(i = 0;i&lt;nodes.length;i+= 1){
         nodes[i].onclick = (function(i){
                   return function() {
                      console.log(i);
                   } //ä¸ç”¨é—­åŒ…çš„è¯ï¼Œå€¼æ¯æ¬¡éƒ½æ˜¯4
                 })(i);
     }
 &lt;/script&gt;
</code></pre></li>
</ul>
<pre><code>    æ‰§è¡Œsay667()å,say667()é—­åŒ…å†…éƒ¨å˜é‡ä¼šå­˜åœ¨,è€Œé—­åŒ…å†…éƒ¨å‡½æ•°çš„å†…éƒ¨å˜é‡ä¸ä¼šå­˜åœ¨
    ä½¿å¾—Javascriptçš„åƒåœ¾å›æ”¶æœºåˆ¶GCä¸ä¼šæ”¶å›say667()æ‰€å ç”¨çš„èµ„æº
    å› ä¸ºsay667()çš„å†…éƒ¨å‡½æ•°çš„æ‰§è¡Œéœ€è¦ä¾èµ–say667()ä¸­çš„å˜é‡
    è¿™æ˜¯å¯¹é—­åŒ…ä½œç”¨çš„éå¸¸ç›´ç™½çš„æè¿°

      function say667() {
        // Local variable that ends up within closure
        var num = 666;
        var sayAlert = function() {
            alert(num);
        }
        num++;
        return sayAlert;
    }

     var sayAlert = say667();
     sayAlert()//æ‰§è¡Œç»“æœåº”è¯¥å¼¹å‡ºçš„667
</code></pre><ul>
<li><p>javascript ä»£ç ä¸­çš„â€use strictâ€;æ˜¯ä»€ä¹ˆæ„æ€ ? ä½¿ç”¨å®ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<pre><code> use strictæ˜¯ä¸€ç§ECMAscript 5 æ·»åŠ çš„ï¼ˆä¸¥æ ¼ï¼‰è¿è¡Œæ¨¡å¼,è¿™ç§æ¨¡å¼ä½¿å¾— Javascript åœ¨æ›´ä¸¥æ ¼çš„æ¡ä»¶ä¸‹è¿è¡Œ,

 ä½¿JSç¼–ç æ›´åŠ è§„èŒƒåŒ–çš„æ¨¡å¼,æ¶ˆé™¤Javascriptè¯­æ³•çš„ä¸€äº›ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘ä¸€äº›æ€ªå¼‚è¡Œä¸ºã€‚
 é»˜è®¤æ”¯æŒçš„ç³Ÿç³•ç‰¹æ€§éƒ½ä¼šè¢«ç¦ç”¨ï¼Œæ¯”å¦‚ä¸èƒ½ç”¨withï¼Œä¹Ÿä¸èƒ½åœ¨æ„å¤–çš„æƒ…å†µä¸‹ç»™å…¨å±€å˜é‡èµ‹å€¼;
 å…¨å±€å˜é‡çš„æ˜¾ç¤ºå£°æ˜,å‡½æ•°å¿…é¡»å£°æ˜åœ¨é¡¶å±‚ï¼Œä¸å…è®¸åœ¨éå‡½æ•°ä»£ç å—å†…å£°æ˜å‡½æ•°,arguments.calleeä¹Ÿä¸å…è®¸ä½¿ç”¨ï¼›
 æ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸€äº›ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨,é™åˆ¶å‡½æ•°ä¸­çš„argumentsä¿®æ”¹ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹çš„evalå‡½æ•°çš„è¡Œä¸ºå’Œéä¸¥æ ¼æ¨¡å¼çš„ä¹Ÿä¸ç›¸åŒ;

 æé«˜ç¼–è¯‘å™¨æ•ˆç‡ï¼Œå¢åŠ è¿è¡Œé€Ÿåº¦ï¼›
 ä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„Javascriptæ ‡å‡†åŒ–åšé“ºå«ã€‚
</code></pre></li>
</ul>
<ul>
<li><p>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸä¸ªç±»ï¼Ÿ</p>
<pre><code>    ä½¿ç”¨instanceof ï¼ˆå¾…å®Œå–„ï¼‰
    if(a instanceof Person){
        alert(&#39;yes&#39;);
    }
</code></pre></li>
<li><p>newæ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆå‘¢?</p>
<pre><code>      1ã€åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¹¶ä¸” this å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ï¼ŒåŒæ—¶è¿˜ç»§æ‰¿äº†è¯¥å‡½æ•°çš„åŸå‹ã€‚
          2ã€å±æ€§å’Œæ–¹æ³•è¢«åŠ å…¥åˆ° this å¼•ç”¨çš„å¯¹è±¡ä¸­ã€‚
       3ã€æ–°åˆ›å»ºçš„å¯¹è±¡ç”± this æ‰€å¼•ç”¨ï¼Œå¹¶ä¸”æœ€åéšå¼çš„è¿”å› this ã€‚

 var obj  = {};
 obj.__proto__ = Base.prototype;
 Base.call(obj);
</code></pre></li>
</ul>
<ul>
<li>ç”¨åŸç”ŸJavaScriptçš„å®ç°è¿‡ä»€ä¹ˆåŠŸèƒ½å—ï¼Ÿ</li>
</ul>
<ul>
<li><p>Javascriptä¸­ï¼Œæœ‰ä¸€ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œæ—¶å¯¹è±¡æŸ¥æ‰¾æ—¶ï¼Œæ°¸è¿œä¸ä¼šå»æŸ¥æ‰¾åŸå‹ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ï¼Ÿ</p>
<pre><code> hasOwnProperty

 javaScriptä¸­hasOwnPropertyå‡½æ•°æ–¹æ³•æ˜¯è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡å‡ºä¸€ä¸ªå¯¹è±¡æ˜¯å¦å…·æœ‰æŒ‡å®šåç§°çš„å±æ€§ã€‚æ­¤æ–¹æ³•æ— æ³•æ£€æŸ¥è¯¥å¯¹è±¡çš„åŸå‹é“¾ä¸­æ˜¯å¦å…·æœ‰è¯¥å±æ€§ï¼›è¯¥å±æ€§å¿…é¡»æ˜¯å¯¹è±¡æœ¬èº«çš„ä¸€ä¸ªæˆå‘˜ã€‚
 ä½¿ç”¨æ–¹æ³•ï¼š
 object.hasOwnProperty(proName)
 å…¶ä¸­å‚æ•°objectæ˜¯å¿…é€‰é¡¹ã€‚ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ã€‚
 proNameæ˜¯å¿…é€‰é¡¹ã€‚ä¸€ä¸ªå±æ€§åç§°çš„å­—ç¬¦ä¸²å€¼ã€‚

 å¦‚æœ object å…·æœ‰æŒ‡å®šåç§°çš„å±æ€§ï¼Œé‚£ä¹ˆJavaScriptä¸­hasOwnPropertyå‡½æ•°æ–¹æ³•è¿”å› trueï¼Œåä¹‹åˆ™è¿”å› falseã€‚
</code></pre></li>
<li><p>JSON çš„äº†è§£ï¼Ÿ</p>
<pre><code> JSON(JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚
 å®ƒæ˜¯åŸºäºJavaScriptçš„ä¸€ä¸ªå­é›†ã€‚æ•°æ®æ ¼å¼ç®€å•, æ˜“äºè¯»å†™, å ç”¨å¸¦å®½å°
 å¦‚ï¼š{&quot;age&quot;:&quot;12&quot;, &quot;name&quot;:&quot;back&quot;}

 JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJSONå¯¹è±¡:
 var obj =eval(&#39;(&#39;+ str +&#39;)&#39;);
 var obj = str.parseJSON();
 var obj = JSON.parse(str);

 JSONå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼š
 var last=obj.toJSONString();
 var last=JSON.stringify(obj);
</code></pre></li>
<li><p><code>[].forEach.call($$(&quot;*&quot;),function(a){a.style.outline=&quot;1px solid #&quot;+(~~(Math.random()*(1&lt;&lt;24))).toString(16)})</code> èƒ½è§£é‡Šä¸€ä¸‹è¿™æ®µä»£ç çš„æ„æ€å—ï¼Ÿ</p>
</li>
</ul>
<ul>
<li><p>jså»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</p>
<pre><code> deferå’Œasyncã€åŠ¨æ€åˆ›å»ºDOMæ–¹å¼ï¼ˆç”¨å¾—æœ€å¤šï¼‰ã€æŒ‰éœ€å¼‚æ­¥è½½å…¥js
</code></pre></li>
</ul>
<ul>
<li><p>Ajax æ˜¯ä»€ä¹ˆ? å¦‚ä½•åˆ›å»ºä¸€ä¸ªAjaxï¼Ÿ</p>
<pre><code> ajaxçš„å…¨ç§°ï¼šAsynchronous Javascript And XMLã€‚
 å¼‚æ­¥ä¼ è¾“+js+xmlã€‚
 æ‰€è°“å¼‚æ­¥ï¼Œåœ¨è¿™é‡Œç®€å•åœ°è§£é‡Šå°±æ˜¯ï¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¿…ç­‰å¾…ç»“æœï¼Œè€Œæ˜¯å¯ä»¥åŒæ—¶åšå…¶ä»–çš„äº‹æƒ…ï¼Œç­‰åˆ°æœ‰äº†ç»“æœå®ƒè‡ªå·±ä¼šæ ¹æ®è®¾å®šè¿›è¡Œåç»­æ“ä½œï¼Œä¸æ­¤åŒæ—¶ï¼Œé¡µé¢æ˜¯ä¸ä¼šå‘ç”Ÿæ•´é¡µåˆ·æ–°çš„ï¼Œæé«˜äº†ç”¨æˆ·ä½“éªŒã€‚

 (1)åˆ›å»ºXMLHttpRequestå¯¹è±¡,ä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªå¼‚æ­¥è°ƒç”¨å¯¹è±¡
 (2)åˆ›å»ºä¸€ä¸ªæ–°çš„HTTPè¯·æ±‚,å¹¶æŒ‡å®šè¯¥HTTPè¯·æ±‚çš„æ–¹æ³•ã€URLåŠéªŒè¯ä¿¡æ¯
 (3)è®¾ç½®å“åº”HTTPè¯·æ±‚çŠ¶æ€å˜åŒ–çš„å‡½æ•°
 (4)å‘é€HTTPè¯·æ±‚
 (5)è·å–å¼‚æ­¥è°ƒç”¨è¿”å›çš„æ•°æ®
 (6)ä½¿ç”¨JavaScriptå’ŒDOMå®ç°å±€éƒ¨åˆ·æ–°
</code></pre></li>
<li><p>Ajax è§£å†³æµè§ˆå™¨ç¼“å­˜é—®é¢˜ï¼Ÿ</p>
<pre><code>  1ã€åœ¨ajaxå‘é€è¯·æ±‚å‰åŠ ä¸Š anyAjaxObj.setRequestHeader(&quot;If-Modified-Since&quot;,&quot;0&quot;)ã€‚

  2ã€åœ¨ajaxå‘é€è¯·æ±‚å‰åŠ ä¸Š anyAjaxObj.setRequestHeader(&quot;Cache-Control&quot;,&quot;no-cache&quot;)ã€‚

  3ã€åœ¨URLåé¢åŠ ä¸Šä¸€ä¸ªéšæœºæ•°ï¼š &quot;fresh=&quot; + Math.random();ã€‚

  4ã€åœ¨URLåé¢åŠ ä¸Šæ—¶é—´æ“ï¼š&quot;nowtime=&quot; + new Date().getTime();ã€‚

  5ã€å¦‚æœæ˜¯ä½¿ç”¨jQueryï¼Œç›´æ¥è¿™æ ·å°±å¯ä»¥äº† $.ajaxSetup({cache:false})ã€‚è¿™æ ·é¡µé¢çš„æ‰€æœ‰ajaxéƒ½ä¼šæ‰§è¡Œè¿™æ¡è¯­å¥å°±æ˜¯ä¸éœ€è¦ä¿å­˜ç¼“å­˜è®°å½•ã€‚
</code></pre></li>
<li><p>åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«?</p>
<p> åŒæ­¥çš„æ¦‚å¿µåº”è¯¥æ˜¯æ¥è‡ªäºOSä¸­å…³äºåŒæ­¥çš„æ¦‚å¿µ:ä¸åŒè¿›ç¨‹ä¸ºååŒå®ŒæˆæŸé¡¹å·¥ä½œè€Œåœ¨å…ˆåæ¬¡åºä¸Šè°ƒæ•´(é€šè¿‡é˜»å¡,å”¤é†’ç­‰æ–¹å¼).åŒæ­¥å¼ºè°ƒçš„æ˜¯é¡ºåºæ€§.è°å…ˆè°å.å¼‚æ­¥åˆ™ä¸å­˜åœ¨è¿™ç§é¡ºåºæ€§.</p>
</li>
</ul>
<pre><code>åŒæ­¥ï¼šæµè§ˆå™¨è®¿é—®æœåŠ¡å™¨è¯·æ±‚ï¼Œç”¨æˆ·çœ‹å¾—åˆ°é¡µé¢åˆ·æ–°ï¼Œé‡æ–°å‘è¯·æ±‚,ç­‰è¯·æ±‚å®Œï¼Œé¡µé¢åˆ·æ–°ï¼Œæ–°å†…å®¹å‡ºç°ï¼Œç”¨æˆ·çœ‹åˆ°æ–°å†…å®¹,è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚

å¼‚æ­¥ï¼šæµè§ˆå™¨è®¿é—®æœåŠ¡å™¨è¯·æ±‚ï¼Œç”¨æˆ·æ­£å¸¸æ“ä½œï¼Œæµè§ˆå™¨åç«¯è¿›è¡Œè¯·æ±‚ã€‚ç­‰è¯·æ±‚å®Œï¼Œé¡µé¢ä¸åˆ·æ–°ï¼Œæ–°å†…å®¹ä¹Ÿä¼šå‡ºç°ï¼Œç”¨æˆ·çœ‹åˆ°æ–°å†…å®¹ã€‚



ï¼ˆå¾…å®Œå–„ï¼‰
</code></pre><ul>
<li><p>å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜?</p>
<pre><code> jsonpã€ iframeã€window.nameã€window.postMessageã€æœåŠ¡å™¨ä¸Šè®¾ç½®ä»£ç†é¡µé¢
</code></pre></li>
<li><p>é¡µé¢ç¼–ç å’Œè¢«è¯·æ±‚çš„èµ„æºç¼–ç å¦‚æœä¸ä¸€è‡´å¦‚ä½•å¤„ç†ï¼Ÿ</p>
</li>
<li><p>æ¨¡å—åŒ–å¼€å‘æ€ä¹ˆåšï¼Ÿ</p>
<p>  <a href="http://benalman.com/news/2010/11/immediately-invoked-function-expression/" target="_blank" rel="external"> ç«‹å³æ‰§è¡Œå‡½æ•°</a>,ä¸æš´éœ²ç§æœ‰æˆå‘˜</p>
<pre><code>     var module1 = (function(){
     ã€€ã€€ã€€ã€€var _count = 0;
     ã€€ã€€ã€€ã€€var m1 = function(){
     ã€€ã€€ã€€ã€€ã€€ã€€//...
     ã€€ã€€ã€€ã€€};
     ã€€ã€€ã€€ã€€var m2 = function(){
     ã€€ã€€ã€€ã€€ã€€ã€€//...
     ã€€ã€€ã€€ã€€};
     ã€€ã€€ã€€ã€€return {
     ã€€ã€€ã€€ã€€ã€€ã€€m1 : m1,
     ã€€ã€€ã€€ã€€ã€€ã€€m2 : m2
     ã€€ã€€ã€€ã€€};
     ã€€ã€€})();
</code></pre><p> ï¼ˆå¾…å®Œå–„ï¼‰</p>
</li>
<li><p>AMDï¼ˆModules/Asynchronous-Definitionï¼‰ã€CMDï¼ˆCommon Module Definitionï¼‰è§„èŒƒåŒºåˆ«ï¼Ÿ</p>
<blockquote>
<p>AMD è§„èŒƒåœ¨è¿™é‡Œï¼š<a href="https://github.com/amdjs/amdjs-api/wiki/AMD" target="_blank" rel="external">https://github.com/amdjs/amdjs-api/wiki/AMD</a></p>
<p>CMD è§„èŒƒåœ¨è¿™é‡Œï¼š<a href="https://github.com/seajs/seajs/issues/242" target="_blank" rel="external">https://github.com/seajs/seajs/issues/242</a></p>
</blockquote>
<pre><code> Asynchronous Module Definitionï¼Œå¼‚æ­¥æ¨¡å—å®šä¹‰ï¼Œæ‰€æœ‰çš„æ¨¡å—å°†è¢«å¼‚æ­¥åŠ è½½ï¼Œæ¨¡å—åŠ è½½ä¸å½±å“åé¢è¯­å¥è¿è¡Œã€‚æ‰€æœ‰ä¾èµ–æŸäº›æ¨¡å—çš„è¯­å¥å‡æ”¾ç½®åœ¨å›è°ƒå‡½æ•°ä¸­ã€‚

  åŒºåˆ«ï¼š

     1. å¯¹äºä¾èµ–çš„æ¨¡å—ï¼ŒAMD æ˜¯æå‰æ‰§è¡Œï¼ŒCMD æ˜¯å»¶è¿Ÿæ‰§è¡Œã€‚ä¸è¿‡ RequireJS ä» 2.0 å¼€å§‹ï¼Œä¹Ÿæ”¹æˆå¯ä»¥å»¶è¿Ÿæ‰§è¡Œï¼ˆæ ¹æ®å†™æ³•ä¸åŒï¼Œå¤„ç†æ–¹å¼ä¸åŒï¼‰ã€‚CMD æ¨å´‡ as lazy as possible.
     2. CMD æ¨å´‡ä¾èµ–å°±è¿‘ï¼ŒAMD æ¨å´‡ä¾èµ–å‰ç½®ã€‚çœ‹ä»£ç ï¼š

 // CMD
 define(function(require, exports, module) {
     var a = require(&#39;./a&#39;)
     a.doSomething()
     // æ­¤å¤„ç•¥å» 100 è¡Œ
     var b = require(&#39;./b&#39;) // ä¾èµ–å¯ä»¥å°±è¿‘ä¹¦å†™
     b.doSomething()
     // ...
 })

 // AMD é»˜è®¤æ¨è
 define([&#39;./a&#39;, &#39;./b&#39;], function(a, b) { // ä¾èµ–å¿…é¡»ä¸€å¼€å§‹å°±å†™å¥½
     a.doSomething()
     // æ­¤å¤„ç•¥å» 100 è¡Œ
     b.doSomething()
     // ...
 })
</code></pre></li>
</ul>
<ul>
<li><p>requireJSçš„æ ¸å¿ƒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¦‚ä½•åŠ¨æ€åŠ è½½çš„ï¼Ÿå¦‚ä½•é¿å…å¤šæ¬¡åŠ è½½çš„ï¼Ÿå¦‚ä½•<br>ç¼“å­˜çš„ï¼Ÿï¼‰</p>
<pre><code> å‚è€ƒï¼šhttp://annn.me/how-to-realize-cmd-loader/
</code></pre></li>
<li><p>JSæ¨¡å—åŠ è½½å™¨çš„è½®å­æ€ä¹ˆé€ ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•å®ç°ä¸€ä¸ªæ¨¡å—åŠ è½½å™¨ï¼Ÿ</p>
</li>
<li><p>è°ˆä¸€è°ˆä½ å¯¹ECMAScript6çš„äº†è§£ï¼Ÿ</p>
</li>
<li><p>ECMAScript6 æ€ä¹ˆå†™classä¹ˆï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°classè¿™ç§ä¸œè¥¿?</p>
</li>
<li><p>å¼‚æ­¥åŠ è½½JSçš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</p>
<pre><code>   (1) deferï¼Œåªæ”¯æŒIE

   (2) asyncï¼š

   (3) åˆ›å»ºscriptï¼Œæ’å…¥åˆ°DOMä¸­ï¼ŒåŠ è½½å®Œæ¯•åcallBack
</code></pre></li>
<li><p>documen.writeå’Œ innerHTMLçš„åŒºåˆ«</p>
<pre><code>  document.writeåªèƒ½é‡ç»˜æ•´ä¸ªé¡µé¢

  innerHTMLå¯ä»¥é‡ç»˜é¡µé¢çš„ä¸€éƒ¨åˆ†
</code></pre></li>
<li><p>DOMæ“ä½œâ€”â€”æ€æ ·æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹?</p>
<pre><code>  ï¼ˆ1ï¼‰åˆ›å»ºæ–°èŠ‚ç‚¹
    createDocumentFragment()    //åˆ›å»ºä¸€ä¸ªDOMç‰‡æ®µ
    createElement()   //åˆ›å»ºä¸€ä¸ªå…·ä½“çš„å…ƒç´ 
    createTextNode()   //åˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹
  ï¼ˆ2ï¼‰æ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ã€æ’å…¥
    appendChild()
    removeChild()
    replaceChild()
    insertBefore() //åœ¨å·²æœ‰çš„å­èŠ‚ç‚¹å‰æ’å…¥ä¸€ä¸ªæ–°çš„å­èŠ‚ç‚¹
  ï¼ˆ3ï¼‰æŸ¥æ‰¾
    getElementsByTagName()    //é€šè¿‡æ ‡ç­¾åç§°
    getElementsByName()    //é€šè¿‡å…ƒç´ çš„Nameå±æ€§çš„å€¼(IEå®¹é”™èƒ½åŠ›è¾ƒå¼ºï¼Œä¼šå¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…æ‹¬idç­‰äºnameå€¼çš„)
    getElementById()    //é€šè¿‡å…ƒç´ Idï¼Œå”¯ä¸€æ€§
</code></pre></li>
<li><p>.call() å’Œ .apply() çš„åŒºåˆ«ï¼Ÿ</p>
</li>
</ul>
<pre><code>      ä¾‹å­ä¸­ç”¨ add æ¥æ›¿æ¢ subï¼Œadd.call(sub,3,1) == add(3,1) ï¼Œæ‰€ä»¥è¿è¡Œç»“æœä¸ºï¼šalert(4);

      æ³¨æ„ï¼šjs ä¸­çš„å‡½æ•°å…¶å®æ˜¯å¯¹è±¡ï¼Œå‡½æ•°åæ˜¯å¯¹ Function å¯¹è±¡çš„å¼•ç”¨ã€‚

        function add(a,b)
        {
            alert(a+b);
        }

        function sub(a,b)
        {
            alert(a-b);
        }

        add.call(sub,3,1);
</code></pre><ul>
<li><p>æ•°ç»„å’Œå¯¹è±¡æœ‰å“ªäº›åŸç”Ÿæ–¹æ³•ï¼Œåˆ—ä¸¾ä¸€ä¸‹ï¼Ÿ</p>
</li>
<li><p>JS æ€ä¹ˆå®ç°ä¸€ä¸ªç±»ã€‚æ€ä¹ˆå®ä¾‹åŒ–è¿™ä¸ªç±»</p>
</li>
<li><p>JavaScriptä¸­çš„ä½œç”¨åŸŸä¸å˜é‡å£°æ˜æå‡ï¼Ÿ</p>
</li>
<li><p>å¦‚ä½•ç¼–å†™é«˜æ€§èƒ½çš„Javascriptï¼Ÿ</p>
</li>
<li><p>é‚£äº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ</p>
</li>
<li><p>JQueryçš„æºç çœ‹è¿‡å—ï¼Ÿèƒ½ä¸èƒ½ç®€å•æ¦‚å†µä¸€ä¸‹å®ƒçš„å®ç°åŸç†ï¼Ÿ</p>
</li>
<li><p>jQuery.fnçš„initæ–¹æ³•è¿”å›çš„thisæŒ‡çš„æ˜¯ä»€ä¹ˆå¯¹è±¡ï¼Ÿä¸ºä»€ä¹ˆè¦è¿”å›thisï¼Ÿ</p>
</li>
<li><p>jqueryä¸­å¦‚ä½•å°†æ•°ç»„è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸²ï¼Œç„¶åå†è½¬åŒ–å›æ¥ï¼Ÿ</p>
</li>
<li><p>jQuery çš„å±æ€§æ‹·è´(extend)çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å®ç°æ·±æ‹·è´ï¼Ÿ</p>
</li>
<li><p>jquery.extend ä¸ jquery.fn.extendçš„åŒºåˆ«ï¼Ÿ</p>
<pre><code> * jquery.extend ä¸ºjqueryç±»æ·»åŠ ç±»æ–¹æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºæ·»åŠ é™æ€æ–¹æ³•
 * jquery.fn.extend:
     æºç ä¸­jquery.fn = jquery.prototypeï¼Œæ‰€ä»¥å¯¹jquery.fnçš„æ‰©å±•ï¼Œå°±æ˜¯ä¸ºjqueryç±»æ·»åŠ æˆå‘˜å‡½æ•°
 ä½¿ç”¨ï¼š
 jquery.extendæ‰©å±•ï¼Œéœ€è¦é€šè¿‡jqueryç±»æ¥è°ƒç”¨ï¼Œè€Œjquery.fn.extendæ‰©å±•ï¼Œæ‰€æœ‰jqueryå®ä¾‹éƒ½å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚
</code></pre></li>
</ul>
<ul>
<li><p>jQuery çš„é˜Ÿåˆ—æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿé˜Ÿåˆ—å¯ä»¥ç”¨åœ¨å“ªäº›åœ°æ–¹ï¼Ÿ</p>
</li>
<li><p>è°ˆä¸€ä¸‹Jqueryä¸­çš„bind(),live(),delegate(),on()çš„åŒºåˆ«ï¼Ÿ</p>
</li>
<li><p>JQueryä¸€ä¸ªå¯¹è±¡å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªäº‹ä»¶ï¼Œè¿™æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</p>
</li>
<li><p>æ˜¯å¦çŸ¥é“è‡ªå®šä¹‰äº‹ä»¶ã€‚jQueryé‡Œçš„fireå‡½æ•°æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ</p>
</li>
<li><p>jQuery æ˜¯é€šè¿‡å“ªä¸ªæ–¹æ³•å’Œ Sizzle é€‰æ‹©å™¨ç»“åˆçš„ï¼Ÿï¼ˆjQuery.fn.find()è¿›å…¥Sizzleï¼‰</p>
</li>
<li><p>é’ˆå¯¹ jQueryæ€§èƒ½çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ</p>
</li>
<li><p>Jqueryä¸jQuery UI æœ‰å•¥åŒºåˆ«ï¼Ÿ</p>
</li>
</ul>
<pre><code>    *jQueryæ˜¯ä¸€ä¸ªjsåº“ï¼Œä¸»è¦æä¾›çš„åŠŸèƒ½æ˜¯é€‰æ‹©å™¨ï¼Œå±æ€§ä¿®æ”¹å’Œäº‹ä»¶ç»‘å®šç­‰ç­‰ã€‚

    *jQuery UIåˆ™æ˜¯åœ¨jQueryçš„åŸºç¡€ä¸Šï¼Œåˆ©ç”¨jQueryçš„æ‰©å±•æ€§ï¼Œè®¾è®¡çš„æ’ä»¶ã€‚
     æä¾›äº†ä¸€äº›å¸¸ç”¨çš„ç•Œé¢å…ƒç´ ï¼Œè¯¸å¦‚å¯¹è¯æ¡†ã€æ‹–åŠ¨è¡Œä¸ºã€æ”¹å˜å¤§å°è¡Œä¸ºç­‰ç­‰
</code></pre><ul>
<li><p>JQueryçš„æºç çœ‹è¿‡å—ï¼Ÿèƒ½ä¸èƒ½ç®€å•è¯´ä¸€ä¸‹å®ƒçš„å®ç°åŸç†ï¼Ÿ</p>
</li>
<li><p>jquery ä¸­å¦‚ä½•å°†æ•°ç»„è½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸²ï¼Œç„¶åå†è½¬åŒ–å›æ¥ï¼Ÿ</p>
</li>
</ul>
<p>jQueryä¸­æ²¡æœ‰æä¾›è¿™ä¸ªåŠŸèƒ½ï¼Œæ‰€ä»¥ä½ éœ€è¦å…ˆç¼–å†™ä¸¤ä¸ªjQueryçš„æ‰©å±•ï¼š</p>
<pre><code>    $.fn.stringifyArray = function(array) {
        return JSON.stringify(array)
    }

    $.fn.parseArray = function(array) {
        return JSON.parse(array)
    }

    ç„¶åè°ƒç”¨ï¼š
    $(&quot;&quot;).stringifyArray(array)
</code></pre><ul>
<li><p>jQueryå’ŒZeptoçš„åŒºåˆ«ï¼Ÿå„è‡ªçš„ä½¿ç”¨åœºæ™¯ï¼Ÿ</p>
</li>
<li><p>é’ˆå¯¹ jQuery çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ</p>
<pre><code> *åŸºäºClassçš„é€‰æ‹©æ€§çš„æ€§èƒ½ç›¸å¯¹äºIdé€‰æ‹©å™¨å¼€é”€å¾ˆå¤§ï¼Œå› ä¸ºéœ€éå†æ‰€æœ‰DOMå…ƒç´ ã€‚

 *é¢‘ç¹æ“ä½œçš„DOMï¼Œå…ˆç¼“å­˜èµ·æ¥å†æ“ä½œã€‚ç”¨Jqueryçš„é“¾å¼è°ƒç”¨æ›´å¥½ã€‚
  æ¯”å¦‚ï¼švar str=$(&quot;a&quot;).attr(&quot;href&quot;);

 *for (var i = size; i &lt; arr.length; i++) {}
  for å¾ªç¯æ¯ä¸€æ¬¡å¾ªç¯éƒ½æŸ¥æ‰¾äº†æ•°ç»„ (arr) çš„.length å±æ€§ï¼Œåœ¨å¼€å§‹å¾ªç¯çš„æ—¶å€™è®¾ç½®ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨è¿™ä¸ªæ•°å­—ï¼Œå¯ä»¥è®©å¾ªç¯è·‘å¾—æ›´å¿«ï¼š
  for (var i = size, length = arr.length; i &lt; length; i++) {}
</code></pre></li>
</ul>
<ul>
<li><p>Zeptoçš„ç‚¹é€é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ</p>
</li>
<li><p>jQueryUIå¦‚ä½•è‡ªå®šä¹‰ç»„ä»¶?</p>
</li>
<li><p>éœ€æ±‚ï¼šå®ç°ä¸€ä¸ªé¡µé¢æ“ä½œä¸ä¼šæ•´é¡µåˆ·æ–°çš„ç½‘ç«™ï¼Œå¹¶ä¸”èƒ½åœ¨æµè§ˆå™¨å‰è¿›ã€åé€€æ—¶æ­£ç¡®å“åº”ã€‚ç»™å‡ºä½ çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼Ÿ</p>
</li>
<li><p>å¦‚ä½•åˆ¤æ–­å½“å‰è„šæœ¬è¿è¡Œåœ¨æµè§ˆå™¨è¿˜æ˜¯nodeç¯å¢ƒä¸­ï¼Ÿï¼ˆé˜¿é‡Œï¼‰</p>
<pre><code>  this === window ? &#39;browser&#39; : &#39;node&#39;;

  é€šè¿‡åˆ¤æ–­Globalå¯¹è±¡æ˜¯å¦ä¸ºwindowï¼Œå¦‚æœä¸ä¸ºwindowï¼Œå½“å‰è„šæœ¬æ²¡æœ‰è¿è¡Œåœ¨æµè§ˆå™¨ä¸­
</code></pre></li>
<li><p>ç§»åŠ¨ç«¯æœ€å°è§¦æ§åŒºåŸŸæ˜¯å¤šå¤§ï¼Ÿ</p>
</li>
<li><p>jQuery çš„ slideUpåŠ¨ç”» ï¼Œå¦‚æœç›®æ ‡å…ƒç´ æ˜¯è¢«å¤–éƒ¨äº‹ä»¶é©±åŠ¨, å½“é¼ æ ‡å¿«é€Ÿåœ°è¿ç»­è§¦å‘å¤–éƒ¨å…ƒç´ äº‹ä»¶, åŠ¨ç”»ä¼šæ»åçš„åå¤æ‰§è¡Œï¼Œè¯¥å¦‚ä½•å¤„ç†å‘¢?</p>
<pre><code> jquery stop(): å¦‚ï¼š$(&quot;#div&quot;).stop().animate({width:&quot;100px&quot;},100);
</code></pre></li>
<li><p>æŠŠ Script æ ‡ç­¾ æ”¾åœ¨é¡µé¢çš„æœ€åº•éƒ¨çš„bodyå°é—­ä¹‹å‰ å’Œå°é—­ä¹‹åæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæµè§ˆå™¨ä¼šå¦‚ä½•è§£æå®ƒä»¬ï¼Ÿ</p>
</li>
<li><p>ç§»åŠ¨ç«¯çš„ç‚¹å‡»äº‹ä»¶çš„æœ‰å»¶è¿Ÿï¼Œæ—¶é—´æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ï¼Ÿ æ€ä¹ˆè§£å†³è¿™ä¸ªå»¶æ—¶ï¼Ÿï¼ˆclick æœ‰ 300ms å»¶è¿Ÿ,ä¸ºäº†å®ç°safariçš„åŒå‡»äº‹ä»¶çš„è®¾è®¡ï¼Œæµè§ˆå™¨è¦çŸ¥é“ä½ æ˜¯ä¸æ˜¯è¦åŒå‡»æ“ä½œã€‚ï¼‰</p>
</li>
<li><p>çŸ¥é“å„ç§JSæ¡†æ¶(Angular, Backbone, Ember, React, Meteor, Knockoutâ€¦)ä¹ˆ? èƒ½è®²å‡ºä»–ä»¬å„è‡ªçš„ä¼˜ç‚¹å’Œç¼ºç‚¹ä¹ˆ?</p>
</li>
<li><p>Underscore å¯¹å“ªäº› JS åŸç”Ÿå¯¹è±¡è¿›è¡Œäº†æ‰©å±•ä»¥åŠæä¾›äº†å“ªäº›å¥½ç”¨çš„å‡½æ•°æ–¹æ³•ï¼Ÿ</p>
</li>
<li><p>è§£é‡ŠJavaScriptä¸­çš„ä½œç”¨åŸŸä¸å˜é‡å£°æ˜æå‡ï¼Ÿ</p>
</li>
<li><p>é‚£äº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ</p>
<pre><code> å†…å­˜æ³„æ¼æŒ‡ä»»ä½•å¯¹è±¡åœ¨æ‚¨ä¸å†æ‹¥æœ‰æˆ–éœ€è¦å®ƒä¹‹åä»ç„¶å­˜åœ¨ã€‚
 åƒåœ¾å›æ”¶å™¨å®šæœŸæ‰«æå¯¹è±¡ï¼Œå¹¶è®¡ç®—å¼•ç”¨äº†æ¯ä¸ªå¯¹è±¡çš„å…¶ä»–å¯¹è±¡çš„æ•°é‡ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æ•°é‡ä¸º 0ï¼ˆæ²¡æœ‰å…¶ä»–å¯¹è±¡å¼•ç”¨è¿‡è¯¥å¯¹è±¡ï¼‰ï¼Œæˆ–å¯¹è¯¥å¯¹è±¡çš„æƒŸä¸€å¼•ç”¨æ˜¯å¾ªç¯çš„ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„å†…å­˜å³å¯å›æ”¶ã€‚

 setTimeout çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½¿ç”¨å­—ç¬¦ä¸²è€Œéå‡½æ•°çš„è¯ï¼Œä¼šå¼•å‘å†…å­˜æ³„æ¼ã€‚
 é—­åŒ…ã€æ§åˆ¶å°æ—¥å¿—ã€å¾ªç¯ï¼ˆåœ¨ä¸¤ä¸ªå¯¹è±¡å½¼æ­¤å¼•ç”¨ä¸”å½¼æ­¤ä¿ç•™æ—¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªå¾ªç¯ï¼‰
</code></pre></li>
<li><p>JQueryä¸€ä¸ªå¯¹è±¡å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªäº‹ä»¶ï¼Œè¿™æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</p>
<pre><code> * å¤šä¸ªäº‹ä»¶åŒä¸€ä¸ªå‡½æ•°ï¼š
     $(&quot;div&quot;).on(&quot;click mouseover&quot;, function(){});
 * å¤šä¸ªäº‹ä»¶ä¸åŒå‡½æ•°
     $(&quot;div&quot;).on({
         click: function(){},
         mouseover: function(){}
     });
</code></pre></li>
<li><p>Node.jsçš„é€‚ç”¨åœºæ™¯ï¼Ÿ</p>
</li>
<li><p>(å¦‚æœä¼šç”¨node)çŸ¥é“route, middleware, cluster, nodemon, pm2, server-side renderingä¹ˆ?</p>
</li>
<li><p>è§£é‡Šä¸€ä¸‹ Backbone çš„ MVC å®ç°æ–¹å¼ï¼Ÿ</p>
</li>
<li><p>ä»€ä¹ˆæ˜¯â€œå‰ç«¯è·¯ç”±â€?ä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨â€œå‰ç«¯è·¯ç”±â€? â€œå‰ç«¯è·¯ç”±â€æœ‰å“ªäº›ä¼˜ç‚¹å’Œç¼ºç‚¹?</p>
</li>
<li><p>çŸ¥é“ä»€ä¹ˆæ˜¯webkitä¹ˆ? çŸ¥é“æ€ä¹ˆç”¨æµè§ˆå™¨çš„å„ç§å·¥å…·æ¥è°ƒè¯•å’Œdebugä»£ç ä¹ˆ?</p>
<pre><code>  Chrome,Safariæµè§ˆå™¨å†…æ ¸ã€‚
</code></pre></li>
<li><p>å¦‚ä½•æµ‹è¯•å‰ç«¯ä»£ç ä¹ˆ? çŸ¥é“BDD, TDD, Unit Testä¹ˆ? çŸ¥é“æ€ä¹ˆæµ‹è¯•ä½ çš„å‰ç«¯å·¥ç¨‹ä¹ˆ(mocha, sinon, jasmin, qUnit..)?</p>
</li>
<li><p>å‰ç«¯templating(Mustache, underscore, handlebars)æ˜¯å¹²å˜›çš„, æ€ä¹ˆç”¨?</p>
</li>
<li><p>ç®€è¿°ä¸€ä¸‹ Handlebars çš„åŸºæœ¬ç”¨æ³•ï¼Ÿ</p>
</li>
<li><p>ç®€è¿°ä¸€ä¸‹ Handlerbars çš„å¯¹æ¨¡æ¿çš„åŸºæœ¬å¤„ç†æµç¨‹ï¼Œ å¦‚ä½•ç¼–è¯‘çš„ï¼Ÿå¦‚ä½•ç¼“å­˜çš„ï¼Ÿ</p>
</li>
<li><p>ç”¨jså®ç°åƒä½åˆ†éš”ç¬¦?(æ¥æºï¼š<a href="http://div.io/topic/744" target="_blank" rel="external">å‰ç«¯å†œæ°‘å·¥</a>ï¼Œæç¤ºï¼šæ­£åˆ™+replace)</p>
</li>
</ul>
<pre><code>    å‚è€ƒï¼šhttp://www.tuicool.com/articles/ArQZfui
    function commafy(num) {
        return num &amp;&amp; num
            .toString()
            .replace(/(\d)(?=(\d{3})+\.)/g, function($0, $1) {
                return $1 + &quot;,&quot;;
            });
    }
    console.log(commafy(1234567.90)); //1,234,567.90
</code></pre><ul>
<li><p>æ£€æµ‹æµè§ˆå™¨ç‰ˆæœ¬ç‰ˆæœ¬æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</p>
<pre><code>  åŠŸèƒ½æ£€æµ‹ã€userAgentç‰¹å¾æ£€æµ‹

  æ¯”å¦‚ï¼šnavigator.userAgent
  //&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_2) AppleWebKit/537.36
    (KHTML, like Gecko) Chrome/41.0.2272.101 Safari/537.36&quot;
</code></pre></li>
</ul>
<ul>
<li><p>What is a Polyfill?</p>
<pre><code>  polyfill æ˜¯â€œåœ¨æ—§ç‰ˆæµè§ˆå™¨ä¸Šå¤åˆ¶æ ‡å‡† API çš„ JavaScript è¡¥å……â€,å¯ä»¥åŠ¨æ€åœ°åŠ è½½ JavaScript ä»£ç æˆ–åº“ï¼Œåœ¨ä¸æ”¯æŒè¿™äº›æ ‡å‡† API çš„æµè§ˆå™¨ä¸­æ¨¡æ‹Ÿå®ƒä»¬ã€‚
  ä¾‹å¦‚ï¼Œgeolocationï¼ˆåœ°ç†ä½ç½®ï¼‰polyfill å¯ä»¥åœ¨ navigator å¯¹è±¡ä¸Šæ·»åŠ å…¨å±€çš„ geolocation å¯¹è±¡ï¼Œè¿˜èƒ½æ·»åŠ  getCurrentPosition å‡½æ•°ä»¥åŠâ€œåæ ‡â€å›è°ƒå¯¹è±¡ï¼Œ
  æ‰€æœ‰è¿™äº›éƒ½æ˜¯ W3C åœ°ç†ä½ç½® API å®šä¹‰çš„å¯¹è±¡å’Œå‡½æ•°ã€‚å› ä¸º polyfill æ¨¡æ‹Ÿæ ‡å‡† APIï¼Œæ‰€ä»¥èƒ½å¤Ÿä»¥ä¸€ç§é¢å‘æ‰€æœ‰æµè§ˆå™¨æœªæ¥çš„æ–¹å¼é’ˆå¯¹è¿™äº› API è¿›è¡Œå¼€å‘ï¼Œ
  ä¸€æ—¦å¯¹è¿™äº› API çš„æ”¯æŒå˜æˆç»å¯¹å¤§å¤šæ•°ï¼Œåˆ™å¯ä»¥æ–¹ä¾¿åœ°å»æ‰ polyfillï¼Œæ— éœ€åšä»»ä½•é¢å¤–å·¥ä½œã€‚
</code></pre></li>
<li><p>åšçš„é¡¹ç›®ä¸­ï¼Œæœ‰æ²¡æœ‰ç”¨è¿‡æˆ–è‡ªå·±å®ç°ä¸€äº› polyfill æ–¹æ¡ˆï¼ˆå…¼å®¹æ€§å¤„ç†æ–¹æ¡ˆï¼‰ï¼Ÿ</p>
<pre><code>  æ¯”å¦‚ï¼š html5shivã€Geolocationã€Placeholder
</code></pre></li>
<li><p>æˆ‘ä»¬ç»™ä¸€ä¸ªdomåŒæ—¶ç»‘å®šä¸¤ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œä¸€ä¸ªç”¨æ•è·ï¼Œä¸€ä¸ªç”¨å†’æ³¡ã€‚ä¼šæ‰§è¡Œå‡ æ¬¡äº‹ä»¶ï¼Œä¼šå…ˆæ‰§è¡Œå†’æ³¡è¿˜æ˜¯æ•è·ï¼Ÿ</p>
</li>
</ul>
<ul>
<li><p>ä½¿ç”¨JSå®ç°è·å–æ–‡ä»¶æ‰©å±•åï¼Ÿ</p>
<pre><code>  function getFileExtension(filename) {
    return filename.slice((filename.lastIndexOf(&quot;.&quot;) - 1 &gt;&gt;&gt; 0) + 2);
  }

  String.lastIndexOf() æ–¹æ³•è¿”å›æŒ‡å®šå€¼ï¼ˆæœ¬ä¾‹ä¸­çš„&#39;.&#39;ï¼‰åœ¨è°ƒç”¨è¯¥æ–¹æ³•çš„å­—ç¬¦ä¸²ä¸­æœ€åå‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æ‰¾åˆ°åˆ™è¿”å› -1ã€‚
  å¯¹äº&#39;filename&#39;å’Œ&#39;.hiddenfile&#39;ï¼ŒlastIndexOfçš„è¿”å›å€¼åˆ†åˆ«ä¸º0å’Œ-1æ— ç¬¦å·å³ç§»æ“ä½œç¬¦(Â»&gt;) å°†-1è½¬æ¢ä¸º4294967295ï¼Œå°†-2è½¬æ¢ä¸º4294967294ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥ä¿è¯è¾¹ç¼˜æƒ…å†µæ—¶æ–‡ä»¶åä¸å˜ã€‚
  String.prototype.slice() ä»ä¸Šé¢è®¡ç®—çš„ç´¢å¼•å¤„æå–æ–‡ä»¶çš„æ‰©å±•åã€‚å¦‚æœç´¢å¼•æ¯”æ–‡ä»¶åçš„é•¿åº¦å¤§ï¼Œç»“æœä¸º&quot;&quot;ã€‚
</code></pre></li>
</ul>
<h4 id="ECMAScript6-ç›¸å…³"><a href="#ECMAScript6-ç›¸å…³" class="headerlink" title="ECMAScript6 ç›¸å…³"></a><a name="other">ECMAScript6 ç›¸å…³</a></h4><ul>
<li><p>Object.is() ä¸åŸæ¥çš„æ¯”è¾ƒæ“ä½œç¬¦â€œ ===â€ã€â€œ ==â€çš„åŒºåˆ«ï¼Ÿ</p>
<pre><code>  ä¸¤ç­‰å·åˆ¤ç­‰ï¼Œä¼šåœ¨æ¯”è¾ƒæ—¶è¿›è¡Œç±»å‹è½¬æ¢ï¼›
  ä¸‰ç­‰å·åˆ¤ç­‰(åˆ¤æ–­ä¸¥æ ¼)ï¼Œæ¯”è¾ƒæ—¶ä¸è¿›è¡Œéšå¼ç±»å‹è½¬æ¢,ï¼ˆç±»å‹ä¸åŒåˆ™ä¼šè¿”å›falseï¼‰ï¼›

  Object.is åœ¨ä¸‰ç­‰å·åˆ¤ç­‰çš„åŸºç¡€ä¸Šç‰¹åˆ«å¤„ç†äº† NaN ã€-0 å’Œ +0 ï¼Œä¿è¯ -0 å’Œ +0 ä¸å†ç›¸åŒï¼Œ
  ä½† Object.is(NaN, NaN) ä¼šè¿”å› true.

   Object.is åº”è¢«è®¤ä¸ºæœ‰å…¶ç‰¹æ®Šçš„ç”¨é€”ï¼Œè€Œä¸èƒ½ç”¨å®ƒè®¤ä¸ºå®ƒæ¯”å…¶å®ƒçš„ç›¸ç­‰å¯¹æ¯”æ›´å®½æ¾æˆ–ä¸¥æ ¼ã€‚
</code></pre></li>
</ul>
<h4 id="å‰ç«¯æ¡†æ¶ç›¸å…³"><a href="#å‰ç«¯æ¡†æ¶ç›¸å…³" class="headerlink" title="å‰ç«¯æ¡†æ¶ç›¸å…³"></a><a name="other">å‰ç«¯æ¡†æ¶ç›¸å…³</a></h4><ul>
<li><p>react-router è·¯ç”±ç³»ç»Ÿçš„å®ç°åŸç†ï¼Ÿ</p>
</li>
<li><p>Reactä¸­å¦‚ä½•è§£å†³ç¬¬ä¸‰æ–¹ç±»åº“çš„é—®é¢˜?</p>
</li>
</ul>
<h2 id="å…¶ä»–é—®é¢˜"><a href="#å…¶ä»–é—®é¢˜" class="headerlink" title="å…¶ä»–é—®é¢˜"></a>å…¶ä»–é—®é¢˜</h2><ul>
<li><p>åŸæ¥å…¬å¸å·¥ä½œæµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Œå¦‚ä½•ä¸å…¶ä»–äººåä½œçš„ï¼Ÿå¦‚ä½•å¤¸éƒ¨é—¨åˆä½œçš„ï¼Ÿ</p>
</li>
<li><p>ä½ é‡åˆ°è¿‡æ¯”è¾ƒéš¾çš„æŠ€æœ¯é—®é¢˜æ˜¯ï¼Ÿä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ</p>
</li>
<li><p>è®¾è®¡æ¨¡å¼ çŸ¥é“ä»€ä¹ˆæ˜¯singleton, factory, strategy, decratorä¹ˆ?</p>
</li>
<li><p>å¸¸ä½¿ç”¨çš„åº“æœ‰å“ªäº›ï¼Ÿå¸¸ç”¨çš„å‰ç«¯å¼€å‘å·¥å…·ï¼Ÿå¼€å‘è¿‡ä»€ä¹ˆåº”ç”¨æˆ–ç»„ä»¶ï¼Ÿ</p>
</li>
<li><p>é¡µé¢é‡æ„æ€ä¹ˆæ“ä½œï¼Ÿ</p>
<pre><code>  ç½‘ç«™é‡æ„ï¼šåœ¨ä¸æ”¹å˜å¤–éƒ¨è¡Œä¸ºçš„å‰æä¸‹ï¼Œç®€åŒ–ç»“æ„ã€æ·»åŠ å¯è¯»æ€§ï¼Œè€Œåœ¨ç½‘ç«™å‰ç«¯ä¿æŒä¸€è‡´çš„è¡Œä¸ºã€‚
  ä¹Ÿå°±æ˜¯è¯´æ˜¯åœ¨ä¸æ”¹å˜UIçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘ç«™è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨æ‰©å±•çš„åŒæ—¶ä¿æŒä¸€è‡´çš„UIã€‚

  å¯¹äºä¼ ç»Ÿçš„ç½‘ç«™æ¥è¯´é‡æ„é€šå¸¸æ˜¯ï¼š

  è¡¨æ ¼(table)å¸ƒå±€æ”¹ä¸ºDIV+CSS
  ä½¿ç½‘ç«™å‰ç«¯å…¼å®¹äºç°ä»£æµè§ˆå™¨(é’ˆå¯¹äºä¸åˆè§„èŒƒçš„CSSã€å¦‚å¯¹IE6æœ‰æ•ˆçš„)
  å¯¹äºç§»åŠ¨å¹³å°çš„ä¼˜åŒ–
  é’ˆå¯¹äºSEOè¿›è¡Œä¼˜åŒ–
  æ·±å±‚æ¬¡çš„ç½‘ç«™é‡æ„åº”è¯¥è€ƒè™‘çš„æ–¹é¢

  å‡å°‘ä»£ç é—´çš„è€¦åˆ
  è®©ä»£ç ä¿æŒå¼¹æ€§
  ä¸¥æ ¼æŒ‰è§„èŒƒç¼–å†™ä»£ç 
  è®¾è®¡å¯æ‰©å±•çš„API
  ä»£æ›¿æ—§æœ‰çš„æ¡†æ¶ã€è¯­è¨€(å¦‚VB)
  å¢å¼ºç”¨æˆ·ä½“éªŒ
  é€šå¸¸æ¥è¯´å¯¹äºé€Ÿåº¦çš„ä¼˜åŒ–ä¹ŸåŒ…å«åœ¨é‡æ„ä¸­

  å‹ç¼©JSã€CSSã€imageç­‰å‰ç«¯èµ„æº(é€šå¸¸æ˜¯ç”±æœåŠ¡å™¨æ¥è§£å†³)
  ç¨‹åºçš„æ€§èƒ½ä¼˜åŒ–(å¦‚æ•°æ®è¯»å†™)
  é‡‡ç”¨CDNæ¥åŠ é€Ÿèµ„æºåŠ è½½
  å¯¹äºJS DOMçš„ä¼˜åŒ–
  HTTPæœåŠ¡å™¨çš„æ–‡ä»¶ç¼“å­˜
</code></pre></li>
<li><p>åˆ—ä¸¾IEä¸å…¶ä»–æµè§ˆå™¨ä¸ä¸€æ ·çš„ç‰¹æ€§ï¼Ÿ</p>
</li>
</ul>
<pre><code>    1ã€äº‹ä»¶ä¸åŒä¹‹å¤„ï¼š

           è§¦å‘äº‹ä»¶çš„å…ƒç´ è¢«è®¤ä¸ºæ˜¯ç›®æ ‡ï¼ˆtargetï¼‰ã€‚è€Œåœ¨ IE ä¸­ï¼Œç›®æ ‡åŒ…å«åœ¨ event å¯¹è±¡çš„ srcElement å±æ€§ï¼›

        è·å–å­—ç¬¦ä»£ç ã€å¦‚æœæŒ‰é”®ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ï¼ˆshiftã€ctrlã€alté™¤å¤–ï¼‰ï¼ŒIE çš„ keyCode ä¼šè¿”å›å­—ç¬¦ä»£ç ï¼ˆUnicodeï¼‰ï¼ŒDOM ä¸­æŒ‰é”®çš„ä»£ç å’Œå­—ç¬¦æ˜¯åˆ†ç¦»çš„ï¼Œè¦è·å–å­—ç¬¦ä»£ç ï¼Œéœ€è¦ä½¿ç”¨ charCode å±æ€§ï¼›

        é˜»æ­¢æŸä¸ªäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼ŒIE ä¸­é˜»æ­¢æŸä¸ªäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œå¿…é¡»å°† returnValue å±æ€§è®¾ç½®ä¸º falseï¼ŒMozilla ä¸­ï¼Œéœ€è¦è°ƒç”¨ preventDefault() æ–¹æ³•ï¼›

        åœæ­¢äº‹ä»¶å†’æ³¡ï¼ŒIE ä¸­é˜»æ­¢äº‹ä»¶è¿›ä¸€æ­¥å†’æ³¡ï¼Œéœ€è¦è®¾ç½® cancelBubble ä¸º trueï¼ŒMozzilla ä¸­ï¼Œéœ€è¦è°ƒç”¨ stopPropagation()ï¼›
</code></pre><ul>
<li><p>99%çš„ç½‘ç«™éƒ½éœ€è¦è¢«é‡æ„æ˜¯é‚£æœ¬ä¹¦ä¸Šå†™çš„ï¼Ÿ</p>
<pre><code>  ç½‘ç«™é‡æ„ï¼šåº”ç”¨webæ ‡å‡†è¿›è¡Œè®¾è®¡ï¼ˆç¬¬2ç‰ˆï¼‰
</code></pre></li>
<li><p>ä»€ä¹ˆå«ä¼˜é›…é™çº§å’Œæ¸è¿›å¢å¼ºï¼Ÿ</p>
<pre><code>  ä¼˜é›…é™çº§ï¼šWebç«™ç‚¹åœ¨æ‰€æœ‰æ–°å¼æµè§ˆå™¨ä¸­éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œå¦‚æœç”¨æˆ·ä½¿ç”¨çš„æ˜¯è€å¼æµè§ˆå™¨ï¼Œåˆ™ä»£ç ä¼šé’ˆå¯¹æ—§ç‰ˆæœ¬çš„IEè¿›è¡Œé™çº§å¤„ç†äº†,ä½¿ä¹‹åœ¨æ—§å¼æµè§ˆå™¨ä¸Šä»¥æŸç§å½¢å¼é™çº§ä½“éªŒå´ä¸è‡³äºå®Œå…¨ä¸èƒ½ç”¨ã€‚
  å¦‚ï¼šborder-shadow

  æ¸è¿›å¢å¼ºï¼šä»è¢«æ‰€æœ‰æµè§ˆå™¨æ”¯æŒçš„åŸºæœ¬åŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥åœ°æ·»åŠ é‚£äº›åªæœ‰æ–°ç‰ˆæœ¬æµè§ˆå™¨æ‰æ”¯æŒçš„åŠŸèƒ½,å‘é¡µé¢å¢åŠ ä¸å½±å“åŸºç¡€æµè§ˆå™¨çš„é¢å¤–æ ·å¼å’ŒåŠŸèƒ½çš„ã€‚å½“æµè§ˆå™¨æ”¯æŒæ—¶ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨åœ°å‘ˆç°å‡ºæ¥å¹¶å‘æŒ¥ä½œç”¨ã€‚
  å¦‚ï¼šé»˜è®¤ä½¿ç”¨flashä¸Šä¼ ï¼Œä½†å¦‚æœæµè§ˆå™¨æ”¯æŒ HTML5 çš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ™ä½¿ç”¨HTML5å®ç°æ›´å¥½çš„ä½“éªŒï¼›
</code></pre></li>
<li><p>æ˜¯å¦äº†è§£å…¬é’¥åŠ å¯†å’Œç§é’¥åŠ å¯†ã€‚</p>
<pre><code>  ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æŒ‡ç§é’¥ç”¨äºå¯¹æ•°æ®è¿›è¡Œç­¾åï¼Œå…¬é’¥ç”¨äºå¯¹ç­¾åè¿›è¡ŒéªŒè¯;
  HTTPç½‘ç«™åœ¨æµè§ˆå™¨ç«¯ç”¨å…¬é’¥åŠ å¯†æ•æ„Ÿæ•°æ®ï¼Œç„¶ååœ¨æœåŠ¡å™¨ç«¯å†ç”¨ç§é’¥è§£å¯†ã€‚
</code></pre></li>
</ul>
<ul>
<li><p>WEBåº”ç”¨ä»æœåŠ¡å™¨ä¸»åŠ¨æ¨é€Dataåˆ°å®¢æˆ·ç«¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ</p>
<pre><code>  html5æä¾›çš„Websocket
  ä¸å¯è§çš„iframe
  WebSocketé€šè¿‡Flash
  XHRé•¿æ—¶é—´è¿æ¥
  XHR Multipart Streaming
  &lt;script&gt;æ ‡ç­¾çš„é•¿æ—¶é—´è¿æ¥(å¯è·¨åŸŸ)
</code></pre></li>
<li><p>å¯¹Nodeçš„ä¼˜ç‚¹å’Œç¼ºç‚¹æå‡ºäº†è‡ªå·±çš„çœ‹æ³•ï¼Ÿ</p>
</li>
</ul>
<pre><code>    *ï¼ˆä¼˜ç‚¹ï¼‰å› ä¸ºNodeæ˜¯åŸºäºäº‹ä»¶é©±åŠ¨å’Œæ— é˜»å¡çš„ï¼Œæ‰€ä»¥éå¸¸é€‚åˆå¤„ç†å¹¶å‘è¯·æ±‚ï¼Œ
      å› æ­¤æ„å»ºåœ¨Nodeä¸Šçš„ä»£ç†æœåŠ¡å™¨ç›¸æ¯”å…¶ä»–æŠ€æœ¯å®ç°ï¼ˆå¦‚Rubyï¼‰çš„æœåŠ¡å™¨è¡¨ç°è¦å¥½å¾—å¤šã€‚
      æ­¤å¤–ï¼Œä¸Nodeä»£ç†æœåŠ¡å™¨äº¤äº’çš„å®¢æˆ·ç«¯ä»£ç æ˜¯ç”±javascriptè¯­è¨€ç¼–å†™çš„ï¼Œ
      å› æ­¤å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½ç”¨åŒä¸€ç§è¯­è¨€ç¼–å†™ï¼Œè¿™æ˜¯éå¸¸ç¾å¦™çš„äº‹æƒ…ã€‚

    *ï¼ˆç¼ºç‚¹ï¼‰Nodeæ˜¯ä¸€ä¸ªç›¸å¯¹æ–°çš„å¼€æºé¡¹ç›®ï¼Œæ‰€ä»¥ä¸å¤ªç¨³å®šï¼Œå®ƒæ€»æ˜¯ä¸€ç›´åœ¨å˜ï¼Œ
      è€Œä¸”ç¼ºå°‘è¶³å¤Ÿå¤šçš„ç¬¬ä¸‰æ–¹åº“æ”¯æŒã€‚çœ‹èµ·æ¥ï¼Œå°±åƒæ˜¯Ruby/Railså½“å¹´çš„æ ·å­ã€‚
</code></pre><ul>
<li><p>ä½ æœ‰ç”¨è¿‡å“ªäº›å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æ–¹æ³•ï¼Ÿ</p>
<pre><code>    ï¼ˆ1ï¼‰ å‡å°‘httpè¯·æ±‚æ¬¡æ•°ï¼šCSS Sprites, JSã€CSSæºç å‹ç¼©ã€å›¾ç‰‡å¤§å°æ§åˆ¶åˆé€‚ï¼›ç½‘é¡µGzipï¼ŒCDNæ‰˜ç®¡ï¼Œdataç¼“å­˜ ï¼Œå›¾ç‰‡æœåŠ¡å™¨ã€‚

    ï¼ˆ2ï¼‰ å‰ç«¯æ¨¡æ¿ JS+æ•°æ®ï¼Œå‡å°‘ç”±äºHTMLæ ‡ç­¾å¯¼è‡´çš„å¸¦å®½æµªè´¹ï¼Œå‰ç«¯ç”¨å˜é‡ä¿å­˜AJAXè¯·æ±‚ç»“æœï¼Œæ¯æ¬¡æ“ä½œæœ¬åœ°å˜é‡ï¼Œä¸ç”¨è¯·æ±‚ï¼Œå‡å°‘è¯·æ±‚æ¬¡æ•°

    ï¼ˆ3ï¼‰ ç”¨innerHTMLä»£æ›¿DOMæ“ä½œï¼Œå‡å°‘DOMæ“ä½œæ¬¡æ•°ï¼Œä¼˜åŒ–javascriptæ€§èƒ½ã€‚

    ï¼ˆ4ï¼‰ å½“éœ€è¦è®¾ç½®çš„æ ·å¼å¾ˆå¤šæ—¶è®¾ç½®classNameè€Œä¸æ˜¯ç›´æ¥æ“ä½œstyleã€‚

    ï¼ˆ5ï¼‰ å°‘ç”¨å…¨å±€å˜é‡ã€ç¼“å­˜DOMèŠ‚ç‚¹æŸ¥æ‰¾çš„ç»“æœã€‚å‡å°‘IOè¯»å–æ“ä½œã€‚

    ï¼ˆ6ï¼‰ é¿å…ä½¿ç”¨CSS Expressionï¼ˆcssè¡¨è¾¾å¼)åˆç§°Dynamic properties(åŠ¨æ€å±æ€§)ã€‚

    ï¼ˆ7ï¼‰ å›¾ç‰‡é¢„åŠ è½½ï¼Œå°†æ ·å¼è¡¨æ”¾åœ¨é¡¶éƒ¨ï¼Œå°†è„šæœ¬æ”¾åœ¨åº•éƒ¨  åŠ ä¸Šæ—¶é—´æˆ³ã€‚

    ï¼ˆ8ï¼‰ é¿å…åœ¨é¡µé¢çš„ä¸»ä½“å¸ƒå±€ä¸­ä½¿ç”¨tableï¼Œtableè¦ç­‰å…¶ä¸­çš„å†…å®¹å®Œå…¨ä¸‹è½½ä¹‹åæ‰ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œæ˜¾ç¤ºæ¯”div+csså¸ƒå±€æ…¢ã€‚
    å¯¹æ™®é€šçš„ç½‘ç«™æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ€è·¯ï¼Œå°±æ˜¯å°½é‡å‘å‰ç«¯ä¼˜åŒ–ã€å‡å°‘æ•°æ®åº“æ“ä½œã€å‡å°‘ç£ç›˜IOã€‚å‘å‰ç«¯ä¼˜åŒ–æŒ‡çš„æ˜¯ï¼Œåœ¨ä¸å½±å“åŠŸèƒ½å’Œä½“éªŒçš„æƒ…å†µä¸‹ï¼Œèƒ½åœ¨æµè§ˆå™¨æ‰§è¡Œçš„ä¸è¦åœ¨æœåŠ¡ç«¯æ‰§è¡Œï¼Œèƒ½åœ¨ç¼“å­˜æœåŠ¡å™¨ä¸Šç›´æ¥è¿”å›çš„ä¸è¦åˆ°åº”ç”¨æœåŠ¡å™¨ï¼Œç¨‹åºèƒ½ç›´æ¥å–å¾—çš„ç»“æœä¸è¦åˆ°å¤–éƒ¨å–å¾—ï¼Œæœ¬æœºå†…èƒ½å–å¾—çš„æ•°æ®ä¸è¦åˆ°è¿œç¨‹å–ï¼Œå†…å­˜èƒ½å–åˆ°çš„ä¸è¦åˆ°ç£ç›˜å–ï¼Œç¼“å­˜ä¸­æœ‰çš„ä¸è¦å»æ•°æ®åº“æŸ¥è¯¢ã€‚å‡å°‘æ•°æ®åº“æ“ä½œæŒ‡å‡å°‘æ›´æ–°æ¬¡æ•°ã€ç¼“å­˜ç»“æœå‡å°‘æŸ¥è¯¢æ¬¡æ•°ã€å°†æ•°æ®åº“æ‰§è¡Œçš„æ“ä½œå°½å¯èƒ½çš„è®©ä½ çš„ç¨‹åºå®Œæˆï¼ˆä¾‹å¦‚joinæŸ¥è¯¢ï¼‰ï¼Œå‡å°‘ç£ç›˜IOæŒ‡å°½é‡ä¸ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿä½œä¸ºç¼“å­˜ã€å‡å°‘è¯»å†™æ–‡ä»¶æ¬¡æ•°ç­‰ã€‚ç¨‹åºä¼˜åŒ–æ°¸è¿œè¦ä¼˜åŒ–æ…¢çš„éƒ¨åˆ†ï¼Œæ¢è¯­è¨€æ˜¯æ— æ³•â€œä¼˜åŒ–â€çš„ã€‚
</code></pre></li>
<li><p>httpçŠ¶æ€ç æœ‰é‚£äº›ï¼Ÿåˆ†åˆ«ä»£è¡¨æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</p>
<pre><code>      ç®€å•ç‰ˆ
      [
          100  Continue    ç»§ç»­ï¼Œä¸€èˆ¬åœ¨å‘é€postè¯·æ±‚æ—¶ï¼Œå·²å‘é€äº†http headerä¹‹åæœåŠ¡ç«¯å°†è¿”å›æ­¤ä¿¡æ¯ï¼Œè¡¨ç¤ºç¡®è®¤ï¼Œä¹‹åå‘é€å…·ä½“å‚æ•°ä¿¡æ¯
          200  OK         æ­£å¸¸è¿”å›ä¿¡æ¯
          201  Created      è¯·æ±‚æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æº
          202  Accepted     æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†
          301  Moved Permanently  è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚
          302 Found          ä¸´æ—¶æ€§é‡å®šå‘ã€‚
          303 See Other      ä¸´æ—¶æ€§é‡å®šå‘ï¼Œä¸”æ€»æ˜¯ä½¿ç”¨ GET è¯·æ±‚æ–°çš„ URIã€‚
          304  Not Modified è‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚

          400 Bad Request  æœåŠ¡å™¨æ— æ³•ç†è§£è¯·æ±‚çš„æ ¼å¼ï¼Œå®¢æˆ·ç«¯ä¸åº”å½“å°è¯•å†æ¬¡ä½¿ç”¨ç›¸åŒçš„å†…å®¹å‘èµ·è¯·æ±‚ã€‚
          401 Unauthorized è¯·æ±‚æœªæˆæƒã€‚
          403 Forbidden      ç¦æ­¢è®¿é—®ã€‚
          404 Not Found      æ‰¾ä¸åˆ°å¦‚ä½•ä¸ URI ç›¸åŒ¹é…çš„èµ„æºã€‚

          500 Internal Server Error  æœ€å¸¸è§çš„æœåŠ¡å™¨ç«¯é”™è¯¯ã€‚
          503 Service Unavailable æœåŠ¡å™¨ç«¯æš‚æ—¶æ— æ³•å¤„ç†è¯·æ±‚ï¼ˆå¯èƒ½æ˜¯è¿‡è½½æˆ–ç»´æŠ¤ï¼‰ã€‚
      ]

    å®Œæ•´ç‰ˆ
    1**(ä¿¡æ¯ç±»)ï¼šè¡¨ç¤ºæ¥æ”¶åˆ°è¯·æ±‚å¹¶ä¸”ç»§ç»­å¤„ç†
      100â€”â€”å®¢æˆ·å¿…é¡»ç»§ç»­å‘å‡ºè¯·æ±‚
      101â€”â€”å®¢æˆ·è¦æ±‚æœåŠ¡å™¨æ ¹æ®è¯·æ±‚è½¬æ¢HTTPåè®®ç‰ˆæœ¬

    2**(å“åº”æˆåŠŸ)ï¼šè¡¨ç¤ºåŠ¨ä½œè¢«æˆåŠŸæ¥æ”¶ã€ç†è§£å’Œæ¥å—
      200â€”â€”è¡¨æ˜è¯¥è¯·æ±‚è¢«æˆåŠŸåœ°å®Œæˆï¼Œæ‰€è¯·æ±‚çš„èµ„æºå‘é€å›å®¢æˆ·ç«¯
      201â€”â€”æç¤ºçŸ¥é“æ–°æ–‡ä»¶çš„URL
      202â€”â€”æ¥å—å’Œå¤„ç†ã€ä½†å¤„ç†æœªå®Œæˆ
      203â€”â€”è¿”å›ä¿¡æ¯ä¸ç¡®å®šæˆ–ä¸å®Œæ•´
      204â€”â€”è¯·æ±‚æ”¶åˆ°ï¼Œä½†è¿”å›ä¿¡æ¯ä¸ºç©º
      205â€”â€”æœåŠ¡å™¨å®Œæˆäº†è¯·æ±‚ï¼Œç”¨æˆ·ä»£ç†å¿…é¡»å¤ä½å½“å‰å·²ç»æµè§ˆè¿‡çš„æ–‡ä»¶
      206â€”â€”æœåŠ¡å™¨å·²ç»å®Œæˆäº†éƒ¨åˆ†ç”¨æˆ·çš„GETè¯·æ±‚

    3**(é‡å®šå‘ç±»)ï¼šä¸ºäº†å®ŒæˆæŒ‡å®šçš„åŠ¨ä½œï¼Œå¿…é¡»æ¥å—è¿›ä¸€æ­¥å¤„ç†
      300â€”â€”è¯·æ±‚çš„èµ„æºå¯åœ¨å¤šå¤„å¾—åˆ°
      301â€”â€”æœ¬ç½‘é¡µè¢«æ°¸ä¹…æ€§è½¬ç§»åˆ°å¦ä¸€ä¸ªURL
      302â€”â€”è¯·æ±‚çš„ç½‘é¡µè¢«è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„åœ°å€ï¼Œä½†å®¢æˆ·è®¿é—®ä»ç»§ç»­é€šè¿‡åŸå§‹URLåœ°å€ï¼Œé‡å®šå‘ï¼Œæ–°çš„URLä¼šåœ¨responseä¸­çš„Locationä¸­è¿”å›ï¼Œæµè§ˆå™¨å°†ä¼šä½¿ç”¨æ–°çš„URLå‘å‡ºæ–°çš„Requestã€‚
      303â€”â€”å»ºè®®å®¢æˆ·è®¿é—®å…¶ä»–URLæˆ–è®¿é—®æ–¹å¼
      304â€”â€”è‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤å“åº”æ—¶ï¼Œä¸ä¼šè¿”å›ç½‘é¡µå†…å®¹ï¼Œä»£è¡¨ä¸Šæ¬¡çš„æ–‡æ¡£å·²ç»è¢«ç¼“å­˜äº†ï¼Œè¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨
      305â€”â€”è¯·æ±‚çš„èµ„æºå¿…é¡»ä»æœåŠ¡å™¨æŒ‡å®šçš„åœ°å€å¾—åˆ°
      306â€”â€”å‰ä¸€ç‰ˆæœ¬HTTPä¸­ä½¿ç”¨çš„ä»£ç ï¼Œç°è¡Œç‰ˆæœ¬ä¸­ä¸å†ä½¿ç”¨
      307â€”â€”ç”³æ˜è¯·æ±‚çš„èµ„æºä¸´æ—¶æ€§åˆ é™¤

    4**(å®¢æˆ·ç«¯é”™è¯¯ç±»)ï¼šè¯·æ±‚åŒ…å«é”™è¯¯è¯­æ³•æˆ–ä¸èƒ½æ­£ç¡®æ‰§è¡Œ
      400â€”â€”å®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£
      401â€”â€”è¯·æ±‚æœªç»æˆæƒï¼Œè¿™ä¸ªçŠ¶æ€ä»£ç å¿…é¡»å’ŒWWW-AuthenticateæŠ¥å¤´åŸŸä¸€èµ·ä½¿ç”¨
      HTTP 401.1 - æœªæˆæƒï¼šç™»å½•å¤±è´¥
      ã€€ã€€HTTP 401.2 - æœªæˆæƒï¼šæœåŠ¡å™¨é…ç½®é—®é¢˜å¯¼è‡´ç™»å½•å¤±è´¥
      ã€€ã€€HTTP 401.3 - ACL ç¦æ­¢è®¿é—®èµ„æº
      ã€€ã€€HTTP 401.4 - æœªæˆæƒï¼šæˆæƒè¢«ç­›é€‰å™¨æ‹’ç»
      HTTP 401.5 - æœªæˆæƒï¼šISAPI æˆ– CGI æˆæƒå¤±è´¥
      402â€”â€”ä¿ç•™æœ‰æ•ˆChargeToå¤´å“åº”
      403â€”â€”ç¦æ­¢è®¿é—®ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡
      HTTP 403.1 ç¦æ­¢è®¿é—®ï¼šç¦æ­¢å¯æ‰§è¡Œè®¿é—®
      ã€€ã€€HTTP 403.2 - ç¦æ­¢è®¿é—®ï¼šç¦æ­¢è¯»è®¿é—®
      ã€€ã€€HTTP 403.3 - ç¦æ­¢è®¿é—®ï¼šç¦æ­¢å†™è®¿é—®
      ã€€ã€€HTTP 403.4 - ç¦æ­¢è®¿é—®ï¼šè¦æ±‚ SSL
      ã€€ã€€HTTP 403.5 - ç¦æ­¢è®¿é—®ï¼šè¦æ±‚ SSL 128
      ã€€ã€€HTTP 403.6 - ç¦æ­¢è®¿é—®ï¼šIP åœ°å€è¢«æ‹’ç»
      ã€€ã€€HTTP 403.7 - ç¦æ­¢è®¿é—®ï¼šè¦æ±‚å®¢æˆ·è¯ä¹¦
      ã€€ã€€HTTP 403.8 - ç¦æ­¢è®¿é—®ï¼šç¦æ­¢ç«™ç‚¹è®¿é—®
      ã€€ã€€HTTP 403.9 - ç¦æ­¢è®¿é—®ï¼šè¿æ¥çš„ç”¨æˆ·è¿‡å¤š
      ã€€ã€€HTTP 403.10 - ç¦æ­¢è®¿é—®ï¼šé…ç½®æ— æ•ˆ
      ã€€ã€€HTTP 403.11 - ç¦æ­¢è®¿é—®ï¼šå¯†ç æ›´æ”¹
      ã€€ã€€HTTP 403.12 - ç¦æ­¢è®¿é—®ï¼šæ˜ å°„å™¨æ‹’ç»è®¿é—®
      ã€€ã€€HTTP 403.13 - ç¦æ­¢è®¿é—®ï¼šå®¢æˆ·è¯ä¹¦å·²è¢«åŠé”€
      ã€€ã€€HTTP 403.15 - ç¦æ­¢è®¿é—®ï¼šå®¢æˆ·è®¿é—®è®¸å¯è¿‡å¤š
      ã€€ã€€HTTP 403.16 - ç¦æ­¢è®¿é—®ï¼šå®¢æˆ·è¯ä¹¦ä¸å¯ä¿¡æˆ–è€…æ— æ•ˆ
      HTTP 403.17 - ç¦æ­¢è®¿é—®ï¼šå®¢æˆ·è¯ä¹¦å·²ç»åˆ°æœŸæˆ–è€…å°šæœªç”Ÿæ•ˆ
      404â€”â€”ä¸€ä¸ª404é”™è¯¯è¡¨æ˜å¯è¿æ¥æœåŠ¡å™¨ï¼Œä½†æœåŠ¡å™¨æ— æ³•å–å¾—æ‰€è¯·æ±‚çš„ç½‘é¡µï¼Œè¯·æ±‚èµ„æºä¸å­˜åœ¨ã€‚egï¼šè¾“å…¥äº†é”™è¯¯çš„URL
      405â€”â€”ç”¨æˆ·åœ¨Request-Lineå­—æ®µå®šä¹‰çš„æ–¹æ³•ä¸å…è®¸
      406â€”â€”æ ¹æ®ç”¨æˆ·å‘é€çš„Acceptæ‹–ï¼Œè¯·æ±‚èµ„æºä¸å¯è®¿é—®
      407â€”â€”ç±»ä¼¼401ï¼Œç”¨æˆ·å¿…é¡»é¦–å…ˆåœ¨ä»£ç†æœåŠ¡å™¨ä¸Šå¾—åˆ°æˆæƒ
      408â€”â€”å®¢æˆ·ç«¯æ²¡æœ‰åœ¨ç”¨æˆ·æŒ‡å®šçš„é¥¿æ—¶é—´å†…å®Œæˆè¯·æ±‚
      409â€”â€”å¯¹å½“å‰èµ„æºçŠ¶æ€ï¼Œè¯·æ±‚ä¸èƒ½å®Œæˆ
      410â€”â€”æœåŠ¡å™¨ä¸Šä¸å†æœ‰æ­¤èµ„æºä¸”æ— è¿›ä¸€æ­¥çš„å‚è€ƒåœ°å€
      411â€”â€”æœåŠ¡å™¨æ‹’ç»ç”¨æˆ·å®šä¹‰çš„Content-Lengthå±æ€§è¯·æ±‚
      412â€”â€”ä¸€ä¸ªæˆ–å¤šä¸ªè¯·æ±‚å¤´å­—æ®µåœ¨å½“å‰è¯·æ±‚ä¸­é”™è¯¯
      413â€”â€”è¯·æ±‚çš„èµ„æºå¤§äºæœåŠ¡å™¨å…è®¸çš„å¤§å°
      414â€”â€”è¯·æ±‚çš„èµ„æºURLé•¿äºæœåŠ¡å™¨å…è®¸çš„é•¿åº¦
      415â€”â€”è¯·æ±‚èµ„æºä¸æ”¯æŒè¯·æ±‚é¡¹ç›®æ ¼å¼
      416â€”â€”è¯·æ±‚ä¸­åŒ…å«Rangeè¯·æ±‚å¤´å­—æ®µï¼Œåœ¨å½“å‰è¯·æ±‚èµ„æºèŒƒå›´å†…æ²¡æœ‰rangeæŒ‡ç¤ºå€¼ï¼Œè¯·æ±‚ä¹Ÿä¸åŒ…å«If-Rangeè¯·æ±‚å¤´å­—æ®µ
      417â€”â€”æœåŠ¡å™¨ä¸æ»¡è¶³è¯·æ±‚Expectå¤´å­—æ®µæŒ‡å®šçš„æœŸæœ›å€¼ï¼Œå¦‚æœæ˜¯ä»£ç†æœåŠ¡å™¨ï¼Œå¯èƒ½æ˜¯ä¸‹ä¸€çº§æœåŠ¡å™¨ä¸èƒ½æ»¡è¶³è¯·æ±‚é•¿ã€‚

    5**(æœåŠ¡ç«¯é”™è¯¯ç±»)ï¼šæœåŠ¡å™¨ä¸èƒ½æ­£ç¡®æ‰§è¡Œä¸€ä¸ªæ­£ç¡®çš„è¯·æ±‚
      HTTP 500 - æœåŠ¡å™¨é‡åˆ°é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚
      ã€€ã€€HTTP 500.100 - å†…éƒ¨æœåŠ¡å™¨é”™è¯¯ - ASP é”™è¯¯
      ã€€ã€€HTTP 500-11 æœåŠ¡å™¨å…³é—­
      ã€€ã€€HTTP 500-12 åº”ç”¨ç¨‹åºé‡æ–°å¯åŠ¨
      ã€€ã€€HTTP 500-13 - æœåŠ¡å™¨å¤ªå¿™
      ã€€ã€€HTTP 500-14 - åº”ç”¨ç¨‹åºæ— æ•ˆ
      ã€€ã€€HTTP 500-15 - ä¸å…è®¸è¯·æ±‚ global.asa
      ã€€ã€€Error 501 - æœªå®ç°
    HTTP 502 - ç½‘å…³é”™è¯¯
    HTTP 503ï¼šç”±äºè¶…è½½æˆ–åœæœºç»´æŠ¤ï¼ŒæœåŠ¡å™¨ç›®å‰æ— æ³•ä½¿ç”¨ï¼Œä¸€æ®µæ—¶é—´åå¯èƒ½æ¢å¤æ­£å¸¸
</code></pre></li>
<li><p>ä¸€ä¸ªé¡µé¢ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½æ˜¾ç¤ºå®Œæˆï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆæµç¨‹è¯´çš„è¶Šè¯¦ç»†è¶Šå¥½ï¼‰</p>
<pre><code>    æ³¨ï¼šè¿™é¢˜èƒœåœ¨åŒºåˆ†åº¦é«˜ï¼ŒçŸ¥è¯†ç‚¹è¦†ç›–å¹¿ï¼Œå†ä¸æ‡‚çš„äººï¼Œä¹Ÿèƒ½ç­”å‡ºå‡ å¥ï¼Œ
    è€Œé«˜æ‰‹å¯ä»¥æ ¹æ®è‡ªå·±æ“…é•¿çš„é¢†åŸŸè‡ªç”±å‘æŒ¥ï¼Œä»URLè§„èŒƒã€HTTPåè®®ã€DNSã€CDNã€æ•°æ®åº“æŸ¥è¯¢ã€
    åˆ°æµè§ˆå™¨æµå¼è§£æã€CSSè§„åˆ™æ„å»ºã€layoutã€paintã€onload/domreadyã€JSæ‰§è¡Œã€JS APIç»‘å®šç­‰ç­‰ï¼›

    è¯¦ç»†ç‰ˆï¼š
      1ã€æµè§ˆå™¨ä¼šå¼€å¯ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå¯¹ URL åˆ†æåˆ¤æ–­å¦‚æœæ˜¯ http åè®®å°±æŒ‰ç…§ Web æ–¹å¼æ¥å¤„ç†;
      2ã€è°ƒç”¨æµè§ˆå™¨å†…æ ¸ä¸­çš„å¯¹åº”æ–¹æ³•ï¼Œæ¯”å¦‚ WebView ä¸­çš„ loadUrl æ–¹æ³•;
      3ã€é€šè¿‡DNSè§£æè·å–ç½‘å€çš„IPåœ°å€ï¼Œè®¾ç½® UA ç­‰ä¿¡æ¯å‘å‡ºç¬¬äºŒä¸ªGETè¯·æ±‚;
      4ã€è¿›è¡ŒHTTPåè®®ä¼šè¯ï¼Œå®¢æˆ·ç«¯å‘é€æŠ¥å¤´(è¯·æ±‚æŠ¥å¤´);
      5ã€è¿›å…¥åˆ°webæœåŠ¡å™¨ä¸Šçš„ Web Serverï¼Œå¦‚ Apacheã€Tomcatã€Node.JS ç­‰æœåŠ¡å™¨;
      6ã€è¿›å…¥éƒ¨ç½²å¥½çš„åç«¯åº”ç”¨ï¼Œå¦‚ PHPã€Javaã€JavaScriptã€Python ç­‰ï¼Œæ‰¾åˆ°å¯¹åº”çš„è¯·æ±‚å¤„ç†;
      7ã€å¤„ç†ç»“æŸå›é¦ˆæŠ¥å¤´ï¼Œæ­¤å¤„å¦‚æœæµè§ˆå™¨è®¿é—®è¿‡ï¼Œç¼“å­˜ä¸Šæœ‰å¯¹åº”èµ„æºï¼Œä¼šä¸æœåŠ¡å™¨æœ€åä¿®æ”¹æ—¶é—´å¯¹æ¯”ï¼Œä¸€è‡´åˆ™è¿”å›304;
      8ã€æµè§ˆå™¨å¼€å§‹ä¸‹è½½htmlæ–‡æ¡£(å“åº”æŠ¥å¤´ï¼ŒçŠ¶æ€ç 200)ï¼ŒåŒæ—¶ä½¿ç”¨ç¼“å­˜;
      9ã€æ–‡æ¡£æ ‘å»ºç«‹ï¼Œæ ¹æ®æ ‡è®°è¯·æ±‚æ‰€éœ€æŒ‡å®šMIMEç±»å‹çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚cssã€jsï¼‰,åŒæ—¶è®¾ç½®äº†cookie;
      10ã€é¡µé¢å¼€å§‹æ¸²æŸ“DOMï¼ŒJSæ ¹æ®DOM APIæ“ä½œDOM,æ‰§è¡Œäº‹ä»¶ç»‘å®šç­‰ï¼Œé¡µé¢æ˜¾ç¤ºå®Œæˆã€‚

    ç®€æ´ç‰ˆï¼š
      æµè§ˆå™¨æ ¹æ®è¯·æ±‚çš„URLäº¤ç»™DNSåŸŸåè§£æï¼Œæ‰¾åˆ°çœŸå®IPï¼Œå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼›
      æœåŠ¡å™¨äº¤ç»™åå°å¤„ç†å®Œæˆåè¿”å›æ•°æ®ï¼Œæµè§ˆå™¨æ¥æ”¶æ–‡ä»¶ï¼ˆHTMLã€JSã€CSSã€å›¾è±¡ç­‰ï¼‰ï¼›
      æµè§ˆå™¨å¯¹åŠ è½½åˆ°çš„èµ„æºï¼ˆHTMLã€JSã€CSSç­‰ï¼‰è¿›è¡Œè¯­æ³•è§£æï¼Œå»ºç«‹ç›¸åº”çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼ˆå¦‚HTMLçš„DOMï¼‰ï¼›
      è½½å…¥è§£æåˆ°çš„èµ„æºæ–‡ä»¶ï¼Œæ¸²æŸ“é¡µé¢ï¼Œå®Œæˆã€‚
</code></pre></li>
<li><p>éƒ¨åˆ†åœ°åŒºç”¨æˆ·ååº”ç½‘ç«™å¾ˆå¡ï¼Œè¯·é—®æœ‰å“ªäº›å¯èƒ½æ€§çš„åŸå› ï¼Œä»¥åŠè§£å†³æ–¹æ³•ï¼Ÿ</p>
</li>
<li><p>ä»æ‰“å¼€appåˆ°åˆ·æ–°å‡ºå†…å®¹ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå¦‚æœæ„Ÿè§‰æ…¢ï¼Œæ€ä¹ˆå®šä½é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³?</p>
</li>
<li><p>é™¤äº†å‰ç«¯ä»¥å¤–è¿˜äº†è§£ä»€ä¹ˆå…¶å®ƒæŠ€æœ¯ä¹ˆï¼Ÿä½ æœ€æœ€å‰å®³çš„æŠ€èƒ½æ˜¯ä»€ä¹ˆï¼Ÿ</p>
</li>
<li><p>ä½ ç”¨çš„å¾—å¿ƒåº”æ‰‹ç”¨çš„ç†Ÿç»ƒåœ°ç¼–è¾‘å™¨&amp;å¼€å‘ç¯å¢ƒæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ</p>
<pre><code>  Sublime Text 3 + ç›¸å…³æ’ä»¶ç¼–å†™å‰ç«¯ä»£ç 
  Google chrome ã€Mozilla Firefoxæµè§ˆå™¨ +firebug å…¼å®¹æµ‹è¯•å’Œé¢„è§ˆé¡µé¢UIã€åŠ¨ç”»æ•ˆæœå’Œäº¤äº’åŠŸèƒ½
  Node.js+Gulp
  git ç”¨äºç‰ˆæœ¬æ§åˆ¶å’ŒCode Review
</code></pre></li>
<li><p>å¯¹å‰ç«¯å·¥ç¨‹å¸ˆè¿™ä¸ªèŒä½æ˜¯æ€ä¹ˆæ ·ç†è§£çš„ï¼Ÿå®ƒçš„å‰æ™¯ä¼šæ€ä¹ˆæ ·ï¼Ÿ</p>
<pre><code>  å‰ç«¯æ˜¯æœ€è´´è¿‘ç”¨æˆ·çš„ç¨‹åºå‘˜ï¼Œæ¯”åç«¯ã€æ•°æ®åº“ã€äº§å“ç»ç†ã€è¿è¥ã€å®‰å…¨éƒ½è¿‘ã€‚
  1ã€å®ç°ç•Œé¢äº¤äº’
  2ã€æå‡ç”¨æˆ·ä½“éªŒ
  3ã€æœ‰äº†Node.jsï¼Œå‰ç«¯å¯ä»¥å®ç°æœåŠ¡ç«¯çš„ä¸€äº›äº‹æƒ…
</code></pre></li>
</ul>
<pre><code>    å‰ç«¯æ˜¯æœ€è´´è¿‘ç”¨æˆ·çš„ç¨‹åºå‘˜ï¼Œå‰ç«¯çš„èƒ½åŠ›å°±æ˜¯èƒ½è®©äº§å“ä» 90åˆ†è¿›åŒ–åˆ° 100 åˆ†ï¼Œç”šè‡³æ›´å¥½ï¼Œ

    å‚ä¸é¡¹ç›®ï¼Œå¿«é€Ÿé«˜è´¨é‡å®Œæˆå®ç°æ•ˆæœå›¾ï¼Œç²¾ç¡®åˆ°1pxï¼›

    ä¸å›¢é˜Ÿæˆå‘˜ï¼ŒUIè®¾è®¡ï¼Œäº§å“ç»ç†çš„æ²Ÿé€šï¼›

    åšå¥½çš„é¡µé¢ç»“æ„ï¼Œé¡µé¢é‡æ„å’Œç”¨æˆ·ä½“éªŒï¼›

    å¤„ç†hackï¼Œå…¼å®¹ã€å†™å‡ºä¼˜ç¾çš„ä»£ç æ ¼å¼ï¼›

    é’ˆå¯¹æœåŠ¡å™¨çš„ä¼˜åŒ–ã€æ‹¥æŠ±æœ€æ–°å‰ç«¯æŠ€æœ¯ã€‚
</code></pre><ul>
<li><p>ä½ æ€ä¹ˆçœ‹å¾…Web App ã€hybrid Appã€Native Appï¼Ÿ</p>
</li>
<li><p>ä½ ç§»åŠ¨ç«¯å‰ç«¯å¼€å‘çš„ç†è§£ï¼Ÿï¼ˆå’Œ Web å‰ç«¯å¼€å‘çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿï¼‰</p>
</li>
<li><p>ä½ å¯¹åŠ ç­çš„çœ‹æ³•ï¼Ÿ</p>
</li>
</ul>
<pre><code>       åŠ ç­å°±åƒå€Ÿé’±ï¼ŒåŸåˆ™åº”å½“æ˜¯------æ•‘æ€¥ä¸æ•‘ç©·
</code></pre><ul>
<li><p>å¹³æ—¶å¦‚ä½•ç®¡ç†ä½ çš„é¡¹ç›®ï¼Ÿ</p>
<pre><code>  å…ˆæœŸå›¢é˜Ÿå¿…é¡»ç¡®å®šå¥½å…¨å±€æ ·å¼ï¼ˆglobe.cssï¼‰ï¼Œç¼–ç æ¨¡å¼(utf-8) ç­‰ï¼›

  ç¼–å†™ä¹ æƒ¯å¿…é¡»ä¸€è‡´ï¼ˆä¾‹å¦‚éƒ½æ˜¯é‡‡ç”¨ç»§æ‰¿å¼çš„å†™æ³•ï¼Œå•æ ·å¼éƒ½å†™æˆä¸€è¡Œï¼‰ï¼›

  æ ‡æ³¨æ ·å¼ç¼–å†™äººï¼Œå„æ¨¡å—éƒ½åŠæ—¶æ ‡æ³¨ï¼ˆæ ‡æ³¨å…³é”®æ ·å¼è°ƒç”¨çš„åœ°æ–¹ï¼‰ï¼›

  é¡µé¢è¿›è¡Œæ ‡æ³¨ï¼ˆä¾‹å¦‚ é¡µé¢ æ¨¡å— å¼€å§‹å’Œç»“æŸï¼‰ï¼›

  CSSè·ŸHTML åˆ†æ–‡ä»¶å¤¹å¹¶è¡Œå­˜æ”¾ï¼Œå‘½åéƒ½å¾—ç»Ÿä¸€ï¼ˆä¾‹å¦‚style.cssï¼‰ï¼›

  JS åˆ†æ–‡ä»¶å¤¹å­˜æ”¾ å‘½åä»¥è¯¥JSåŠŸèƒ½ä¸ºå‡†çš„è‹±æ–‡ç¿»è¯‘ã€‚

  å›¾ç‰‡é‡‡ç”¨æ•´åˆçš„ images.png png8 æ ¼å¼æ–‡ä»¶ä½¿ç”¨ å°½é‡æ•´åˆåœ¨ä¸€èµ·ä½¿ç”¨æ–¹ä¾¿å°†æ¥çš„ç®¡ç†
</code></pre></li>
<li><p>å¦‚ä½•è®¾è®¡çªå‘å¤§è§„æ¨¡å¹¶å‘æ¶æ„ï¼Ÿ</p>
</li>
</ul>
<ul>
<li><p>å½“å›¢é˜Ÿäººæ‰‹ä¸è¶³ï¼ŒæŠŠåŠŸèƒ½ä»£ç å†™å®Œå·²ç»éœ€è¦åŠ ç­çš„æƒ…å†µä¸‹ï¼Œä½ ä¼šåšå‰ç«¯ä»£ç çš„æµ‹è¯•å—ï¼Ÿ</p>
</li>
<li><p>è¯´è¯´æœ€è¿‘æœ€æµè¡Œçš„ä¸€äº›ä¸œè¥¿å§ï¼Ÿå¸¸å»å“ªäº›ç½‘ç«™ï¼Ÿ</p>
<pre><code>      ES6\WebAssembly\Node\MVVM\Web Components\React\React Native\Webpack ç»„ä»¶åŒ–
</code></pre></li>
<li><p>çŸ¥é“ä»€ä¹ˆæ˜¯SEOå¹¶ä¸”æ€ä¹ˆä¼˜åŒ–ä¹ˆ? çŸ¥é“å„ç§meta dataçš„å«ä¹‰ä¹ˆ?</p>
</li>
</ul>
<ul>
<li><p>ç§»åŠ¨ç«¯ï¼ˆAndroid IOSï¼‰æ€ä¹ˆåšå¥½ç”¨æˆ·ä½“éªŒ?</p>
<pre><code>  æ¸…æ™°çš„è§†è§‰çºµçº¿ã€
  ä¿¡æ¯çš„åˆ†ç»„ã€æè‡´çš„å‡æ³•ã€
  åˆ©ç”¨é€‰æ‹©ä»£æ›¿è¾“å…¥ã€
  æ ‡ç­¾åŠæ–‡å­—çš„æ’å¸ƒæ–¹å¼ã€
  ä¾é æ˜æ–‡ç¡®è®¤å¯†ç ã€
  åˆç†çš„é”®ç›˜åˆ©ç”¨ã€
</code></pre></li>
<li><p>ç®€å•æè¿°ä¸€ä¸‹ä½ åšè¿‡çš„ç§»åŠ¨APPé¡¹ç›®ç ”å‘æµç¨‹ï¼Ÿ</p>
</li>
<li><p>ä½ åœ¨ç°åœ¨çš„å›¢é˜Ÿå¤„äºä»€ä¹ˆæ ·çš„è§’è‰²ï¼Œèµ·åˆ°äº†ä»€ä¹ˆæ˜æ˜¾çš„ä½œç”¨ï¼Ÿ</p>
</li>
<li><p>ä½ è®¤ä¸ºæ€æ ·æ‰æ˜¯å…¨ç«¯å·¥ç¨‹å¸ˆï¼ˆFull Stack developerï¼‰ï¼Ÿ</p>
</li>
<li><p>ä»‹ç»ä¸€ä¸ªä½ æœ€å¾—æ„çš„ä½œå“å§ï¼Ÿ</p>
</li>
<li><p>ä½ æœ‰è‡ªå·±çš„æŠ€æœ¯åšå®¢å—ï¼Œç”¨äº†å“ªäº›æŠ€æœ¯ï¼Ÿ</p>
</li>
<li><p>å¯¹å‰ç«¯å®‰å…¨æœ‰ä»€ä¹ˆçœ‹æ³•ï¼Ÿ</p>
</li>
<li><p>æ˜¯å¦äº†è§£Webæ³¨å…¥æ”»å‡»ï¼Œè¯´ä¸‹åŸç†ï¼Œæœ€å¸¸è§çš„ä¸¤ç§æ”»å‡»ï¼ˆXSS å’Œ CSRFï¼‰äº†è§£åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿ</p>
</li>
<li><p>é¡¹ç›®ä¸­é‡åˆ°å›½å“ªäº›å°è±¡æ·±åˆ»çš„æŠ€æœ¯éš¾é¢˜ï¼Œå…·ä½“æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿã€‚</p>
</li>
<li><p>æœ€è¿‘åœ¨å­¦ä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p>
</li>
<li><p>ä½ çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p>
</li>
<li><p>å¦‚ä½•ç®¡ç†å‰ç«¯å›¢é˜Ÿ?</p>
</li>
<li><p>æœ€è¿‘åœ¨å­¦ä»€ä¹ˆï¼Ÿèƒ½è°ˆè°ˆä½ æœªæ¥3ï¼Œ5å¹´ç»™è‡ªå·±çš„è§„åˆ’å—ï¼Ÿ</p>
</li>
</ul>
<h2 id="å‰ç«¯å­¦ä¹ ç½‘ç«™æ¨è"><a href="#å‰ç«¯å­¦ä¹ ç½‘ç«™æ¨è" class="headerlink" title="å‰ç«¯å­¦ä¹ ç½‘ç«™æ¨è"></a>å‰ç«¯å­¦ä¹ ç½‘ç«™æ¨è</h2><pre><code>1. æå®¢æ ‡ç­¾ï¼š     http://www.gbtags.com/

2. ç å†œå‘¨åˆŠï¼š     http://weekly.manong.io/issues/

3. å‰ç«¯å‘¨åˆŠï¼š     http://www.feweekly.com/issues

4. æ…•è¯¾ç½‘ï¼š       http://www.imooc.com/

5. div.ioï¼š         http://div.io

6. Hacker Newsï¼š https://news.ycombinator.com/news

7. InfoQï¼š       http://www.infoq.com/

8. w3cplusï¼š     http://www.w3cplus.com/

9. Stack Overflowï¼š http://stackoverflow.com/

10.w3schoolï¼š    http://www.w3school.com.cn/

11.mozillaï¼š     https://developer.mozilla.org/zh-CN/docs/Web/JavaScript
</code></pre><h2 id="æ–‡æ¡£æ¨è"><a href="#æ–‡æ¡£æ¨è" class="headerlink" title="æ–‡æ¡£æ¨è"></a>æ–‡æ¡£æ¨è</h2><ol>
<li><p><a href="http://docs.huihoo.com/jquery/jquery-fundamentals/zh-cn/index.html" title="jQuery åŸºæœ¬åŸç†" target="_blank" rel="external">jQuery åŸºæœ¬åŸç†</a></p>
</li>
<li><p><a href="http://bonsaiden.github.io/JavaScript-Garden/zh/" target="_blank" rel="external">JavaScript ç§˜å¯†èŠ±å›­</a></p>
</li>
<li><p><a href="http://css.doyoe.com/" target="_blank" rel="external">CSSå‚è€ƒæ‰‹å†Œ</a></p>
</li>
<li><p><a href="http://javascript.ruanyifeng.com/" target="_blank" rel="external">JavaScript æ ‡å‡†å‚è€ƒæ•™ç¨‹</a></p>
</li>
<li><p><a href="http://es6.ruanyifeng.com/" target="_blank" rel="external">ECMAScript 6å…¥é—¨</a></p>
</li>
</ol>
<p><strong>å¤‡æ³¨ï¼š</strong></p>
<pre><code>æ ¹æ®è‡ªå·±éœ€è¦é€‰æ‹©æ€§é˜…è¯»ï¼Œé¢è¯•é¢˜æ˜¯å¯¹ç†è®ºçŸ¥è¯†çš„æ€»ç»“ï¼Œè®©è‡ªå·±å­¦ä¼šåº”è¯¥å¦‚ä½•è¡¨è¾¾ã€‚

èµ„æ–™ç­”æ¡ˆä¸å¤Ÿæ­£ç¡®å’Œå…¨é¢ï¼Œæ¬¢è¿æ¬¢è¿Starå’Œæäº¤issuesã€‚

æ ¼å¼ä¸æ–­ä¿®æ”¹æ›´æ–°ä¸­ã€‚

åœ¨ github é¡¹ç›®çš„å³ä¸Šè§’ï¼Œæœ‰ä¸‰ä¸ªæŒ‰é’®,åˆ†åˆ«æ˜¯ watchã€starã€forkï¼Œæ–°æ¥çš„åŒå­¦æ³¨æ„ä¸è¦ç”¨é”™äº†ï¼Œæ— ä¼‘æ­¢çš„é‚®ä»¶æé†’ä¼šç»™ä½ é€ æˆä¸å¿…è¦çš„ä¿¡æ¯å¹²æ‰°ã€‚

å½“ä½ é€‰æ‹©Watchingï¼Œè¡¨ç¤ºä½ ä»¥åä¼šå…³æ³¨è¿™ä¸ªé¡¹ç›®çš„å…¨éƒ¨åŠ¨æ€ï¼Œä»¥ååªè¦è¿™ä¸ªé¡¹ç›®å‘ç”Ÿå˜åŠ¨ï¼Œè¢«åˆ«äººæäº¤äº†pull requestã€è¢«å‘èµ·äº†issueç­‰æƒ…å†µä½ éƒ½ä¼šæ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚

starç›¸å½“äºæ˜¯ç‚¹èµæˆ–æ”¶è—ï¼Œæ–¹ä¾¿ä»¥åæŸ¥æ‰¾ã€‚

forkè¡¨ç¤ºä½ æƒ³è¦è¡¥å……å®Œå–„è¿™ä¸ªé¡¹ç›®çš„å†…å®¹ã€‚
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‰ç«¯å¼€å‘é¢è¯•é¢˜&quot;&gt;&lt;a href=&quot;#å‰ç«¯å¼€å‘é¢è¯•é¢˜&quot; class=&quot;headerlink&quot; title=&quot;å‰ç«¯å¼€å‘é¢è¯•é¢˜&quot;&gt;&lt;/a&gt;å‰ç«¯å¼€å‘é¢è¯•é¢˜&lt;/h1&gt;&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://microzz.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="é¢è¯•" scheme="https://microzz.com/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="æ±‚èŒ" scheme="https://microzz.com/tags/%E6%B1%82%E8%81%8C/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯é¢è¯•é¢˜(éƒ¨åˆ†)</title>
    <link href="https://microzz.com/2017/02/08/web-interview/"/>
    <id>https://microzz.com/2017/02/08/web-interview/</id>
    <published>2017-02-08T14:52:44.000Z</published>
    <updated>2017-05-17T14:55:03.774Z</updated>
    
    <content type="html"><![CDATA[<h3 id="åŸå‹ï¼š"><a href="#åŸå‹ï¼š" class="headerlink" title="åŸå‹ï¼š"></a>åŸå‹ï¼š</h3><blockquote>
<p>æˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½å¯ä»¥æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯åŸå‹ã€‚</p>
</blockquote>
<p>å½“æˆ‘ä»¬åœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œé€‰æ‹©æ€§çš„å°†ä¸€äº›å±æ€§å’Œæ–¹æ³•é€šè¿‡prototypeå±æ€§ï¼ŒæŒ‚è½½åœ¨åŸå‹å¯¹è±¡ä¸Šã€‚è€Œæ¯ä¸€ä¸ªnewå‡ºæ¥çš„å®ä¾‹ï¼Œéƒ½æœ‰ä¸€ä¸ª<strong>proto</strong>å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§ï¼Œè®©å®ä¾‹å¯¹è±¡ä¹Ÿèƒ½å¤Ÿè®¿é—®åŸå‹å¯¹è±¡ä¸Šçš„æ–¹æ³•ã€‚å› æ­¤ï¼Œå½“æ‰€æœ‰çš„å®ä¾‹éƒ½èƒ½å¤Ÿé€šè¿‡<strong>proto</strong>è®¿é—®åˆ°åŸå‹å¯¹è±¡æ—¶ï¼ŒåŸå‹å¯¹è±¡çš„æ–¹æ³•ä¸å±æ€§å°±å˜æˆäº†å…±æœ‰æ–¹æ³•ä¸å±æ€§ã€‚</p>
<pre><code class="javascript">// å£°æ˜æ„é€ å‡½æ•°
function Person(name, age) {
    this.name = name;
    this.age = age;
}

// é€šè¿‡prototyeå±æ€§ï¼Œå°†æ–¹æ³•æŒ‚è½½åˆ°åŸå‹å¯¹è±¡ä¸Š
Person.prototype.getName = function() {
    return this.name;
}

var p1 = new Person(&#39;tim&#39;, 10);
var p2 = new Person(&#39;jak&#39;, 22);
console.log(p1.getName === p2.getName); // true
</code></pre>
<p>é€šè¿‡å›¾ç¤ºæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œæ„é€ å‡½æ•°çš„prototypeä¸æ‰€æœ‰å®ä¾‹å¯¹è±¡çš„<strong>proto</strong>éƒ½æŒ‡å‘åŸå‹å¯¹è±¡ã€‚è€ŒåŸå‹å¯¹è±¡çš„constructoræŒ‡å‘æ„é€ å‡½æ•°ã€‚</p>
<h3 id="åŸå‹é“¾ï¼š"><a href="#åŸå‹é“¾ï¼š" class="headerlink" title="åŸå‹é“¾ï¼š"></a>åŸå‹é“¾ï¼š</h3><blockquote>
<p>æˆ‘ä»¬çŸ¥é“æ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰ä¸€ä¸ªå«åštoStringçš„æ–¹æ³•ã€‚é‚£ä¹ˆè¿™ä¸ªæ–¹æ³•åˆ°åº•æ˜¯åœ¨å“ªé‡Œçš„å‘¢ï¼Ÿ</p>
</blockquote>
<p>å…ˆéšæ„å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼š</p>
<pre><code class="javascript">function foo() {}
</code></pre>
<p>å…¶ä¸­fooæ˜¯Functionå¯¹è±¡çš„å®ä¾‹ã€‚è€ŒFunctionçš„åŸå‹å¯¹è±¡åŒæ—¶åˆæ˜¯Objectçš„å®ä¾‹ã€‚è¿™æ ·å°±æ„æˆäº†ä¸€æ¡åŸå‹é“¾ã€‚åŸå‹é“¾çš„è®¿é—®ï¼Œå…¶å®è·Ÿä½œç”¨åŸŸé“¾æœ‰å¾ˆå¤§çš„ç›¸ä¼¼ä¹‹å¤„ï¼Œä»–ä»¬éƒ½æ˜¯ä¸€æ¬¡å•å‘çš„æŸ¥æ‰¾è¿‡ç¨‹ã€‚å› æ­¤å®ä¾‹å¯¹è±¡èƒ½å¤Ÿé€šè¿‡åŸå‹é“¾ï¼Œè®¿é—®åˆ°å¤„äºåŸå‹é“¾ä¸Šå¯¹è±¡çš„æ‰€æœ‰å±æ€§ä¸æ–¹æ³•ã€‚è¿™ä¹Ÿæ˜¯fooæœ€ç»ˆèƒ½å¤Ÿè®¿é—®åˆ°å¤„äºObjectåŸå‹å¯¹è±¡ä¸Šçš„toStringæ–¹æ³•çš„åŸå› ã€‚</p>
<h3 id="é—­åŒ…ï¼š"><a href="#é—­åŒ…ï¼š" class="headerlink" title="é—­åŒ…ï¼š"></a>é—­åŒ…ï¼š</h3><blockquote>
<p>é—­åŒ… æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ï¼Œåˆ›å»ºé—­åŒ…çš„æœ€å¸¸è§çš„æ–¹å¼å°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡å¦ä¸€ä¸ªå‡½æ•°è®¿é—®è¿™ä¸ªå‡½æ•°çš„å±€éƒ¨å˜é‡<br>å¦ä¸€ç§ç†è§£ï¼šå½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸæ—¶ï¼Œå°±äº§ç”Ÿäº†é—­åŒ…ï¼Œè¿™ä¸ªå‡½æ•°æŒæœ‰å¯¹è¯¥è¯æ³•ä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œè¿™ä¸ªå¼•ç”¨å°±å«åšé—­åŒ…</p>
<p>é—­åŒ…æœ¬è´¨è¿˜æ˜¯å‡½æ•°ï¼Œåªä¸è¿‡è¿™ä¸ªå‡½æ•°ç»‘å®šäº†ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆå‡½æ•°å†…éƒ¨å¼•ç”¨çš„æ‰€æœ‰å˜é‡ï¼‰</p>
</blockquote>
<p>JavaScriptçš„ä½œç”¨åŸŸå°±æ˜¯è¯æ³•ä½œç”¨åŸŸè€Œä¸æ˜¯åŠ¨æ€ä½œç”¨åŸŸ,<br>è¯æ³•ä½œç”¨åŸŸæœ€é‡è¦çš„ç‰¹å¾æ˜¯å®ƒçš„å®šä¹‰è¿‡ç¨‹å‘ç”Ÿåœ¨ä»£ç çš„ä¹¦å†™é˜¶æ®µ<br>åŠ¨æ€ä½œç”¨åŸŸçš„ä½œç”¨åŸŸé“¾æ˜¯åŸºäºè°ƒç”¨æ ˆçš„ è¯æ³•ä½œç”¨åŸŸçš„ä½œç”¨åŸŸé“¾æ˜¯åŸºäºä»£ç ä¸­çš„ä½œç”¨åŸŸåµŒå¥—</p>
<blockquote>
<p>é—­åŒ…çš„ç¼ºç‚¹å°±æ˜¯å¸¸é©»å†…å­˜ï¼Œä¼šå¢å¤§å†…å­˜ä½¿ç”¨é‡ï¼Œä½¿ç”¨ä¸å½“å¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„éœ²ã€‚</p>
<p>é—­åŒ…å¯ä»¥ç”¨æ¥ç®¡ç†ç§æœ‰å˜é‡å’Œç§æœ‰æ–¹æ³•ï¼Œå°†å¯¹å˜é‡ï¼ˆçŠ¶æ€ï¼‰çš„å˜åŒ–å°è£…åœ¨å®‰å…¨çš„ç¯å¢ƒä¸­ï¼Œä½¿å¾—è¿™äº›å˜é‡ä¸èƒ½è¢«å¤–éƒ¨éšæ„ä¿®æ”¹ï¼ŒåŒæ—¶åˆå¯ä»¥é€šè¿‡æŒ‡å®šçš„å‡½æ•°æ¥å£æ¥æ“ä½œã€‚ </p>
</blockquote>
<p><strong>é—­åŒ…æœ‰ä¸‰ä¸ªç‰¹æ€§ï¼š</strong><br>1.å‡½æ•°åµŒå¥—å‡½æ•°<br>2.å‡½æ•°å†…éƒ¨å¯ä»¥å¼•ç”¨å¤–éƒ¨çš„å‚æ•°å’Œå˜é‡<br>3.å‚æ•°å’Œå˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶</p>
<p><strong>ç»å…¸æ —å­ï¼š</strong><br>åœ¨ä¸€ä¸ª ul li åˆ—è¡¨ï¼Œæˆ‘æƒ³ç‚¹å‡»æŸä¸ª li ç„¶åè¿”å›å¯¹åº”çš„ç´¢å¼•ã€‚<br>é€šå¸¸çš„åšæ³•æ˜¯ å†™ä¸€ä¸ª for å¾ªç¯ ç„¶åç»™æ¯ä¸ª li ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œè¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ã€‚</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;é—­åŒ…&lt;/title&gt;
    &lt;script&gt;
    window.onload = function(){
        var aLi = document.getElementsByTagName(&#39;li&#39;);
        for (var i=0;i&lt;aLi.length;i++){
            aLi[i].onclick = function(){  //å½“ç‚¹å‡»æ—¶forå¾ªç¯å·²ç»ç»“æŸ
                alert(i);
            };
        }
    }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;ul&gt;
        &lt;li&gt;0&lt;/li&gt;
        &lt;li&gt;1&lt;/li&gt;
        &lt;li&gt;2&lt;/li&gt;
        &lt;li&gt;3&lt;/li&gt;
    &lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>æˆ‘çš„ç†è§£æ˜¯è¿™æ ·çš„ï¼šå½“æˆ‘ä»¬ç»™æ¯ä¸ª li ç»‘å®šç‚¹å‡»äº‹ä»¶çš„æ—¶å€™ï¼Œå› ä¸ºæ˜¯äº‹ä»¶ç›‘å¬ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯äº‹ä»¶é©±åŠ¨æ¨¡å¼ï¼Œå¤„ç†äº‹ä»¶ç›‘å¬çš„é€»è¾‘æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»ä¸€ä¸ª li çš„æ—¶å€™ï¼Œfor å¾ªç¯å·²ç»ç»“æŸï¼Œæ­¤æ—¶çš„ä¸‹æ ‡ç´¢å¼•ä¸º li çš„ lengthå¤§å°ï¼Œæ‰€ä»¥ç‚¹å‡»ä»»ä½•ä¸€ä¸ª li æŸ¥æ‰¾ç´¢å¼•çš„æ—¶å€™éƒ½æ˜¯æŸ¥æ‰¾åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œéƒ½æ˜¯è¿”å› length å¤§å°ã€‚</p>
<p>è§£å†³åŠæ³•ï¼š<br>ç»™æ¯ä¸ª li ç»‘å®šç‚¹å‡»äº‹ä»¶çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªå—çº§ä½œç”¨åŸŸï¼Œè¿™æ ·ï¼Œå½“å¤„ç†äº‹ä»¶ç›‘å¬çš„é€»è¾‘çš„æ—¶å€™å‘ä¸ŠæŸ¥æ‰¾å°±ä¸ä¼šæŸ¥æ‰¾åˆ°å…¨å±€ä½œç”¨åŸŸã€‚</p>
<blockquote>
<p>1ã€å®šä¹‰ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°</p>
<pre><code class="javascript">var aLi = document.getElementsByTagName(&#39;li&#39;);
for (var i=0;i&lt;aLi.length;i++){
    (function(i){
        aLi[i].onclick = function(){
            alert(i);
        };
    })(i);
}
</code></pre>
<p>2ã€ç”¨es6ä¸­çš„letæ›¿æ¢var</p>
<pre><code class="javascript">var aLi = document.getElementsByTagName(&#39;li&#39;);
for (let i=0;i&lt;aLi.length;i++){
    aLi[i].onclick = function(){
        alert(i);
    };
}
</code></pre>
</blockquote>
<h3 id="å¯¹è±¡ï¼š"><a href="#å¯¹è±¡ï¼š" class="headerlink" title="å¯¹è±¡ï¼š"></a>å¯¹è±¡ï¼š</h3><blockquote>
<p>JSä¸­çš„å¯¹è±¡ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç»„æ•°æ®å’ŒåŠŸèƒ½çš„é›†åˆï¼Œå¸¦æœ‰å„ç§å±æ€§å’Œæ–¹æ³•çš„ä¸€ç§æ•°æ®ç±»å‹ã€‚</p>
</blockquote>
<p>JSä¸­å¯¹è±¡åˆ†ä¸ºä¸¤ç§ï¼š<br>1ã€JSçš„å†…å»ºå¯¹è±¡ï¼Œå¦‚ï¼šStringï¼ŒDateï¼ŒArrayç­‰ç­‰(Functionã€Mathã€Number)</p>
<p>2ã€æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„å¯¹è±¡ï¼š<br>    1ï¼‰å¯¹è±¡å­—é¢é‡<br>    2ï¼‰æ„é€ å‡½æ•°</p>
<p>è°ƒç”¨æ„é€ å‡½æ•° new 4ä¸ªæ­¥éª¤ï¼š<br>1ã€åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡<br>2ã€å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆå› æ­¤thiså°±æŒ‡å‘äº†è¿™ä¸ªæ–°å¯¹è±¡ï¼‰<br>3ã€æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰<br>4ã€è¿”å›æ–°å¯¹è±¡</p>
<h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><blockquote>
<p>jsä¸­çš„ç»§æ‰¿ä¸»è¦ä¾é åŸå‹é“¾æ¥å®ç°çš„ï¼Œé€šè¿‡åŸå‹é“¾çš„æ–¹å¼å®ç°äº†çˆ¶ç±»å­ç±»ä¹‹é—´å…±äº«å±æ€§çš„ç»§æ‰¿ä»¥åŠèº«ä»½ç¡®è®¤æœºåˆ¶ã€‚</p>
<ul>
<li><p>æ„é€ å‡½æ•°æ–¹å¼å®ç°ç»§æ‰¿<br>åœ¨å­ç±»çš„æ„é€ å‡½æ•°å†…éƒ¨é€šè¿‡ çˆ¶ç±»å.call æˆ– apply æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°(applyçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°æ•°ç»„ï¼Œcallçš„å‚æ•°è¦å…¨éƒ¨åˆ—ä¸¾å‡ºæ¥ï¼Œbindä¸ä¼šç«‹å³è°ƒç”¨ï¼Œå…¶ä»–ä¸¤ä¸ªä¼šç«‹å³è°ƒç”¨<br>)<br>æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œå› æ­¤å‡½æ•°æ— æ³•å¤ç”¨ã€‚</p>
</li>
<li><p>ç»„åˆç»§æ‰¿<br>ä½¿ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œé€šè¿‡æ„é€ å‡½æ•°å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿<br>Sub.prototype = new Sup()<br>å­ç±»åŸå‹è¦†ç›–æ‰äº†çˆ¶ç±»åŸå‹çš„æŸäº›å±æ€§ï¼ˆçˆ¶ç±»åŸå‹ä¸­çš„ä¾ç„¶è¿˜åœ¨ï¼‰</p>
</li>
<li><p>å¯„ç”Ÿç»„åˆç»§æ‰¿<br>es5ä¸­ä¸»æµçš„ç»§æ‰¿æ–¹å¼<br>Sub.prototype=Object.create(Sup.prototype)<br>Sub.prototype.constructor=Sub<br>Object.create(obj)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šå¯¹ä¼ å…¥çš„objå¯¹è±¡è¿›è¡Œæµ…æ‹·è´ã€‚å’Œä¸Šé¢ç»„åˆç»§æ‰¿çš„ä¸»è¦åŒºåˆ«å°±æ˜¯ï¼šå°†çˆ¶ç±»çš„<strong>åŸå‹</strong>å¤åˆ¶ç»™äº†å­ç±»åŸå‹ã€‚æ„é€ å‡½æ•°ä¸­ç»§æ‰¿çˆ¶ç±»å±æ€§ï¼æ–¹æ³•ï¼Œå¹¶åˆå§‹åŒ–çˆ¶ç±»ã€‚å­ç±»åŸå‹å’Œçˆ¶ç±»åŸå‹å»ºç«‹è”ç³»ã€‚</p>
</li>
</ul>
<p>es6çš„ç»§æ‰¿æ–¹å¼<br>es6å¼•å…¥äº†classã€extendsã€superã€static(éƒ¨åˆ†ä¸ºES2016æ ‡å‡†)</p>
</blockquote>
<pre><code class="javascript">class A {
}

class B extends A {
}

B.__proto__ === A // true
B.prototype.__proto__ === A.prototype // true
</code></pre>
<h3 id="ç®—æ³•ï¼š"><a href="#ç®—æ³•ï¼š" class="headerlink" title="ç®—æ³•ï¼š"></a>ç®—æ³•ï¼š</h3><h4 id="æ•°ç»„å»é‡ï¼šå»ºä¸€ä¸ªç©ºå¯¹è±¡å’Œç©ºæ•°ç»„ï¼Œå¾ªç¯éå†éœ€è¦å»é‡çš„æ•°ç»„ï¼Œåˆ¤æ–­å¯¹è±¡æœ‰æ²¡æœ‰æ­¤å±æ€§ï¼Œæ²¡æœ‰çš„è¯å°±ç»™å¯¹è±¡æ·»åŠ æ­¤å±æ€§ï¼Œå¹¶å‘ç©ºæ•°ç»„ä¸­pushè¿™ä¸ªå€¼ã€‚"><a href="#æ•°ç»„å»é‡ï¼šå»ºä¸€ä¸ªç©ºå¯¹è±¡å’Œç©ºæ•°ç»„ï¼Œå¾ªç¯éå†éœ€è¦å»é‡çš„æ•°ç»„ï¼Œåˆ¤æ–­å¯¹è±¡æœ‰æ²¡æœ‰æ­¤å±æ€§ï¼Œæ²¡æœ‰çš„è¯å°±ç»™å¯¹è±¡æ·»åŠ æ­¤å±æ€§ï¼Œå¹¶å‘ç©ºæ•°ç»„ä¸­pushè¿™ä¸ªå€¼ã€‚" class="headerlink" title="æ•°ç»„å»é‡ï¼šå»ºä¸€ä¸ªç©ºå¯¹è±¡å’Œç©ºæ•°ç»„ï¼Œå¾ªç¯éå†éœ€è¦å»é‡çš„æ•°ç»„ï¼Œåˆ¤æ–­å¯¹è±¡æœ‰æ²¡æœ‰æ­¤å±æ€§ï¼Œæ²¡æœ‰çš„è¯å°±ç»™å¯¹è±¡æ·»åŠ æ­¤å±æ€§ï¼Œå¹¶å‘ç©ºæ•°ç»„ä¸­pushè¿™ä¸ªå€¼ã€‚"></a>æ•°ç»„å»é‡ï¼šå»ºä¸€ä¸ªç©ºå¯¹è±¡å’Œç©ºæ•°ç»„ï¼Œå¾ªç¯éå†éœ€è¦å»é‡çš„æ•°ç»„ï¼Œåˆ¤æ–­å¯¹è±¡æœ‰æ²¡æœ‰æ­¤å±æ€§ï¼Œæ²¡æœ‰çš„è¯å°±ç»™å¯¹è±¡æ·»åŠ æ­¤å±æ€§ï¼Œå¹¶å‘ç©ºæ•°ç»„ä¸­pushè¿™ä¸ªå€¼ã€‚</h4><pre><code class="javascript">//es5
function unique(arr){
    var obj = {}
    var result = []
    for(var i in arr){
        if(!obj[arr[i]]){
            obj[arr[i]] = true;
            result.push(arr[i]);
        }
    }
    return result;
}

//es6
[...new Set(arr)]
</code></pre>
<h4 id="å†’æ³¡æ’åºï¼šç›¸é‚»ä¸¤ä¸ªå¯¹æ¯”ï¼Œæœ€åæŠŠæœ€å¤§çš„æ’åˆ°äº†æœ€åï¼Œé‡å¤æ­¤è¿‡ç¨‹ã€‚"><a href="#å†’æ³¡æ’åºï¼šç›¸é‚»ä¸¤ä¸ªå¯¹æ¯”ï¼Œæœ€åæŠŠæœ€å¤§çš„æ’åˆ°äº†æœ€åï¼Œé‡å¤æ­¤è¿‡ç¨‹ã€‚" class="headerlink" title="å†’æ³¡æ’åºï¼šç›¸é‚»ä¸¤ä¸ªå¯¹æ¯”ï¼Œæœ€åæŠŠæœ€å¤§çš„æ’åˆ°äº†æœ€åï¼Œé‡å¤æ­¤è¿‡ç¨‹ã€‚"></a>å†’æ³¡æ’åºï¼šç›¸é‚»ä¸¤ä¸ªå¯¹æ¯”ï¼Œæœ€åæŠŠæœ€å¤§çš„æ’åˆ°äº†æœ€åï¼Œé‡å¤æ­¤è¿‡ç¨‹ã€‚</h4><pre><code class="javascript">function bubbleSort(arr) {
    var len = arr.length;
    for (var i = 0; i &lt; len; i++) {
        for (var j = 0; j &lt; len - 1 - i; j++) {
            if (arr[j] &gt; arr[j+1]) {        //ç›¸é‚»å…ƒç´ ä¸¤ä¸¤å¯¹æ¯”
                var temp = arr[j+1];        //å…ƒç´ äº¤æ¢
                arr[j+1] = arr[j];
                arr[j] = temp;
            }
        }
    }
    return arr;
}
</code></pre>
<h4 id="é€‰æ‹©æ’åºï¼šå¯»æ‰¾æœ€å°çš„æ•°ï¼Œä¿å­˜ç´¢å¼•ï¼Œç„¶åä¸ç¬¬ä¸€å±‚å¾ªç¯å…¶ä¸‹æ ‡å¯¹äºçš„å€¼è¿›è¡Œäº¤æ¢"><a href="#é€‰æ‹©æ’åºï¼šå¯»æ‰¾æœ€å°çš„æ•°ï¼Œä¿å­˜ç´¢å¼•ï¼Œç„¶åä¸ç¬¬ä¸€å±‚å¾ªç¯å…¶ä¸‹æ ‡å¯¹äºçš„å€¼è¿›è¡Œäº¤æ¢" class="headerlink" title="é€‰æ‹©æ’åºï¼šå¯»æ‰¾æœ€å°çš„æ•°ï¼Œä¿å­˜ç´¢å¼•ï¼Œç„¶åä¸ç¬¬ä¸€å±‚å¾ªç¯å…¶ä¸‹æ ‡å¯¹äºçš„å€¼è¿›è¡Œäº¤æ¢"></a>é€‰æ‹©æ’åºï¼šå¯»æ‰¾æœ€å°çš„æ•°ï¼Œä¿å­˜ç´¢å¼•ï¼Œç„¶åä¸ç¬¬ä¸€å±‚å¾ªç¯å…¶ä¸‹æ ‡å¯¹äºçš„å€¼è¿›è¡Œäº¤æ¢</h4><pre><code class="javascript">function selectionSort(arr) {
    var len = arr.length;
    var minIndex, temp;
    for (var i = 0; i &lt; len - 1; i++) {
        minIndex = i;
        for (var j = i + 1; j &lt; len; j++) {
            if (arr[j] &lt; arr[minIndex]) {     //å¯»æ‰¾æœ€å°çš„æ•°
                minIndex = j;                 //å°†æœ€å°æ•°çš„ç´¢å¼•ä¿å­˜
            }
        }
        temp = arr[i];
        arr[i] = arr[minIndex];
        arr[minIndex] = temp;
    }
    return arr;
}
</code></pre>
<h4 id="å¿«é€Ÿæ’åºï¼šé€‰å–ä¸€ä¸ªè®°å½•ä½œä¸ºä¸­é—´è½´ï¼Œç„¶åå°†æ¯”â€˜è¿™ä¸ªè®°å½•å€¼â€™å°çš„ç§»åˆ°â€˜è®°å½•å€¼â€™ä¹‹å‰ï¼Œå¤§çš„ç§»åˆ°ä¹‹åï¼Œç„¶åé€’å½’"><a href="#å¿«é€Ÿæ’åºï¼šé€‰å–ä¸€ä¸ªè®°å½•ä½œä¸ºä¸­é—´è½´ï¼Œç„¶åå°†æ¯”â€˜è¿™ä¸ªè®°å½•å€¼â€™å°çš„ç§»åˆ°â€˜è®°å½•å€¼â€™ä¹‹å‰ï¼Œå¤§çš„ç§»åˆ°ä¹‹åï¼Œç„¶åé€’å½’" class="headerlink" title="å¿«é€Ÿæ’åºï¼šé€‰å–ä¸€ä¸ªè®°å½•ä½œä¸ºä¸­é—´è½´ï¼Œç„¶åå°†æ¯”â€˜è¿™ä¸ªè®°å½•å€¼â€™å°çš„ç§»åˆ°â€˜è®°å½•å€¼â€™ä¹‹å‰ï¼Œå¤§çš„ç§»åˆ°ä¹‹åï¼Œç„¶åé€’å½’"></a>å¿«é€Ÿæ’åºï¼šé€‰å–ä¸€ä¸ªè®°å½•ä½œä¸ºä¸­é—´è½´ï¼Œç„¶åå°†æ¯”â€˜è¿™ä¸ªè®°å½•å€¼â€™å°çš„ç§»åˆ°â€˜è®°å½•å€¼â€™ä¹‹å‰ï¼Œå¤§çš„ç§»åˆ°ä¹‹åï¼Œç„¶åé€’å½’</h4><pre><code class="javascript">function quickSort(arr) {
    if(arr.length == 0) {
        return [];    // è¿”å›ç©ºæ•°ç»„
    }
    var cIndex = Math.floor(arr.length / 2);
    var c = arr.splice(cIndex, 1);
    var l = [];
    var r = [];
    for (var i = 0; i &lt; arr.length; i++) {
        if(arr[i] &lt; c) {
            l.push(arr[i]);
        } else {
            r.push(arr[i]);
        }
    }
    return quickSort(l).concat(c, quickSort(r));
}
</code></pre>
<h3 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h3><blockquote>
<ul>
<li>ç½‘é¡µå†…å®¹<ul>
<li>å‡å°‘ httpè¯·æ±‚æ¬¡æ•°</li>
<li>å‡å°‘ DNSæŸ¥è¯¢æ¬¡æ•°</li>
<li>é¿å…é¡µé¢è·³è½¬</li>
<li>ç¼“å­˜ Ajax</li>
<li>å»¶è¿ŸåŠ è½½</li>
<li>æå‰åŠ è½½</li>
<li>å‡å°‘ DOMå…ƒç´ æ•°é‡</li>
<li>é¿å… 404</li>
</ul>
</li>
<li>æœåŠ¡å™¨<ul>
<li>ä½¿ç”¨CDN(å†…å®¹åˆ†å‘ç½‘ç»œ)</li>
<li>æ·»åŠ Expiresæˆ–Cache-ControlæŠ¥æ–‡å¤´</li>
<li>Gzipå‹ç¼©ä¼ è¾“æ–‡ä»¶</li>
</ul>
</li>
<li>CSS<ul>
<li>å°†æ ·å¼è¡¨ç½®é¡¶</li>
<li>ç”¨<link>ä»£æ›¿@import</li>
</ul>
</li>
<li>JavaScript<ul>
<li>æŠŠè„šæœ¬ç½®äºé¡µé¢åº•éƒ¨</li>
<li>ä½¿ç”¨å¤–éƒ¨JavaScriptå’ŒCSS</li>
<li>ç²¾ç®€JavaScriptå’ŒCSS</li>
<li>å»é™¤é‡å¤è„šæœ¬</li>
<li>å‡å°‘DOMè®¿é—®</li>
</ul>
</li>
<li>å›¾ç‰‡<ul>
<li>ä¼˜åŒ–å›¾åƒ</li>
<li>ä¼˜åŒ–CSS Spirite</li>
<li>ä¸è¦åœ¨HTMLä¸­ç¼©æ”¾å›¾ç‰‡</li>
<li>favicon.icoè¦å°è€Œä¸”å¯ç¼“å­˜</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="é—®é¢è¯•å®˜"><a href="#é—®é¢è¯•å®˜" class="headerlink" title="é—®é¢è¯•å®˜"></a>é—®é¢è¯•å®˜</h3><blockquote>
<ul>
<li>ç›®å‰å…³æ³¨å“ªäº›æœ€æ–°çš„Webå‰ç«¯æŠ€æœ¯ï¼ˆæœªæ¥çš„å‘å±•æ–¹å‘ï¼‰ï¼Ÿ</li>
<li>å›¢é˜Ÿå¦‚ä½•å·¥ä½œçš„ï¼ˆå®ç°ä¸€ä¸ªäº§å“çš„æµç¨‹ï¼‰ï¼Ÿ</li>
<li>å…¬å¸çš„è–ªèµ„ç»“æ„æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿï¼ˆæ‘¸æ¸…è‡ªå·±å…·ä½“åœ¨ä»€ä¹ˆå±‚æ¬¡ï¼‰</li>
<li>å…¬å¸çš„æ™‹å‡æœºåˆ¶å…·ä½“æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿï¼ˆçœ‹å‡ºä½ çš„ä¸Šè¿›å¿ƒçš„ç¨³å®šæ€§ï¼‰</li>
</ul>
</blockquote>
<h3 id="Event-Loopã€æ¶ˆæ¯é˜Ÿåˆ—ã€äº‹ä»¶è½®è¯¢"><a href="#Event-Loopã€æ¶ˆæ¯é˜Ÿåˆ—ã€äº‹ä»¶è½®è¯¢" class="headerlink" title="Event Loopã€æ¶ˆæ¯é˜Ÿåˆ—ã€äº‹ä»¶è½®è¯¢"></a>Event Loopã€æ¶ˆæ¯é˜Ÿåˆ—ã€äº‹ä»¶è½®è¯¢</h3><p>å¼‚æ­¥å‡½æ•°åœ¨æ‰§è¡Œç»“æŸåï¼Œä¼šåœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ªäº‹ä»¶ï¼ˆå›è°ƒå‡½æ•°ï¼‰(éµå¾ªå…ˆè¿›å…ˆå‡ºåŸåˆ™)ï¼Œä¸»çº¿ç¨‹ä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•åï¼ˆå³ä¸€æ¬¡å¾ªç¯ç»“æŸï¼‰ï¼Œä¸‹ä¸€æ¬¡å¾ªç¯å¼€å§‹å°±åœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­â€œè¯»å–â€äº‹ä»¶ï¼Œç„¶åè°ƒç”¨å®ƒæ‰€å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯ä¸æ–­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªçš„è¿™ç§è¿è¡Œæœºåˆ¶åˆç§°ä¸ºEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰</p>
<p>ä¸»çº¿ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œäº§ç”Ÿå †ï¼ˆheapï¼‰å’Œæ ˆï¼ˆstackï¼‰ï¼Œæ ˆä¸­çš„ä»£ç ï¼ˆåŒæ­¥ä»»åŠ¡ï¼‰è°ƒç”¨å„ç§å¤–éƒ¨APIï¼Œå®ƒä»¬åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¸­åŠ å…¥å„ç§äº‹ä»¶ï¼ˆclickï¼Œloadï¼Œdoneï¼‰ã€‚åªè¦æ ˆä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œä¸»çº¿ç¨‹å°±ä¼šå»è¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œä¾æ¬¡æ‰§è¡Œé‚£äº›äº‹ä»¶æ‰€å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚</p>
<p>æ‰§è¡Œæ ˆä¸­çš„ä»£ç ï¼ˆåŒæ­¥ä»»åŠ¡ï¼‰ï¼Œæ€»æ˜¯åœ¨è¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰ä¹‹å‰æ‰§è¡Œã€‚</p>
<h3 id="tokenã€session"><a href="#tokenã€session" class="headerlink" title="tokenã€session"></a>tokenã€session</h3><blockquote>
<p>tokenå°±æ˜¯ä»¤ç‰Œ,æ¯”å¦‚ä½ æˆæƒ(ç™»å½•)ä¸€ä¸ªç¨‹åºæ—¶,ä»–å°±æ˜¯ä¸ªä¾æ®,åˆ¤æ–­ä½ æ˜¯å¦å·²ç»æˆæƒè¯¥è½¯ä»¶;cookieå°±æ˜¯å†™åœ¨å®¢æˆ·ç«¯çš„ä¸€ä¸ªtxtæ–‡ä»¶,é‡Œé¢åŒ…æ‹¬ä½ ç™»å½•ä¿¡æ¯ä¹‹ç±»çš„</p>
</blockquote>
<p>åŸºäºTokençš„èº«ä»½éªŒè¯çš„è¿‡ç¨‹å¦‚ä¸‹:</p>
<p>1.ç”¨æˆ·é€šè¿‡ç”¨æˆ·åå’Œå¯†ç å‘é€è¯·æ±‚ã€‚</p>
<p>2.æœåŠ¡ç«¯éªŒè¯ã€‚</p>
<p>3.æœåŠ¡ç«¯è¿”å›ä¸€ä¸ªç­¾åçš„token ç»™å®¢æˆ·ç«¯ã€‚</p>
<p>4.å®¢æˆ·ç«¯å‚¨å­˜token,å¹¶ä¸”æ¯æ¬¡ç”¨äºå‘é€è¯·æ±‚ã€‚</p>
<p>5.æœåŠ¡ç«¯éªŒè¯tokenå¹¶è¿”å›æ•°æ®ã€‚</p>
<p> æ¯ä¸€æ¬¡è¯·æ±‚éƒ½éœ€è¦tokenã€‚</p>
<blockquote>
<p>sessionæ˜¯æŒ‡ä¸€ç±»ç”¨æ¥åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ä¿æŒçŠ¶æ€çš„è§£å†³æ–¹æ¡ˆ,ä¹Ÿå¯ä»¥ç”¨æ¥ä¿å­˜å°‘é‡æ•°æ®ï¼Œä½†ä¼šéšç€ä¼šè¯ç»“æŸè€Œé”€æ¯ã€‚</p>
</blockquote>
<h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><blockquote>
<p>Expiresã€Cache-Controlã€Last-Modifiedã€ ETag</p>
<p>æµè§ˆå™¨ç¼“å­˜ï¼ˆBrowser Cachingï¼‰æ˜¯æµè§ˆå™¨ç«¯ä¿å­˜æ•°æ®ç”¨äºå¿«é€Ÿè¯»å–æˆ–é¿å…é‡å¤èµ„æºè¯·æ±‚çš„ä¼˜åŒ–æœºåˆ¶ï¼Œæœ‰æ•ˆçš„ç¼“å­˜ä½¿ç”¨å¯ä»¥é¿å…é‡å¤çš„ç½‘ç»œè¯·æ±‚å’Œæµè§ˆå™¨å¿«é€Ÿåœ°è¯»å–æœ¬åœ°æ•°æ®ï¼Œ</p>
</blockquote>
<ul>
<li><p>httpç¼“å­˜</p>
<blockquote>
<p>httpç¼“å­˜æ˜¯åŸºäºHTTPåè®®çš„æµè§ˆå™¨æ–‡ä»¶çº§ç¼“å­˜æœºåˆ¶ã€‚å³é’ˆå¯¹æ–‡ä»¶çš„é‡å¤è¯·æ±‚æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å¯ä»¥æ ¹æ®åè®®å¤´åˆ¤æ–­ä»æœåŠ¡å™¨ç«¯è¯·æ±‚æ–‡ä»¶è¿˜æ˜¯ä»æœ¬åœ°è¯»å–æ–‡ä»¶<br>åˆ¤æ–­expiresï¼Œå¦‚æœæœªè¿‡æœŸï¼Œç›´æ¥è¯»å–httpç¼“å­˜æ–‡ä»¶</p>
</blockquote>
</li>
<li><p>indexDB</p>
<blockquote>
<p>æ˜¯ä¸€ä¸ªåœ¨å®¢æˆ·ç«¯å­˜å‚¨å¯è§‚æ•°é‡çš„ç»“æ„åŒ–æ•°æ®,å¹¶ä¸”ä¸ºè¿™äº›æ•°æ®æ·»åŠ ç´¢å¼•è¿›è¡Œé«˜æ€§èƒ½æ£€ç´¢ã€‚</p>
</blockquote>
</li>
<li><p>cookie</p>
<blockquote>
<p>æŒ‡ä¸€èˆ¬ç½‘ç«™ä¸ºäº†è¾¨åˆ«ç”¨æˆ·èº«ä»½ã€å‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ä¸Šçš„æ•°æ®ï¼ˆé€šå¸¸ç»è¿‡åŠ å¯†ï¼‰ã€‚cookieä¸€èˆ¬é€šè¿‡httpè¯·æ±‚ä¸­åœ¨å¤´éƒ¨ä¸€èµ·å‘é€åˆ°æœåŠ¡å™¨ç«¯ã€‚ä¸€æ¡cookieè®°å½•ä¸»è¦ç”±é”®ã€å€¼ã€åŸŸã€è¿‡æœŸæ—¶é—´ã€å¤§å°ç»„æˆï¼Œä¸€èˆ¬ç”¨æˆ·ä¿å­˜ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯ã€‚</p>
</blockquote>
</li>
<li><p>localstorage</p>
<blockquote>
<p>localStorageæ˜¯h5çš„ä¸€ç§æ–°çš„æœ¬åœ°ç¼“å­˜æ–¹æ¡ˆ,åŠ å¿«ä¸‹æ¬¡é¡µé¢æ‰“å¼€æ—¶çš„æ¸²æŸ“é€Ÿåº¦,é™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼Œå¦åˆ™æ•°æ®æ˜¯æ°¸è¿œä¸ä¼šè¿‡æœŸçš„ã€‚</p>
</blockquote>
</li>
<li><p>sessionstorage</p>
<blockquote>
<p>ä¹Ÿæ˜¯h5çš„ä¸€ç§æœ¬åœ°ç¼“å­˜æ–¹æ¡ˆï¼Œæ•°æ®çš„å­˜å‚¨ä»…ç‰¹å®šäºæŸä¸ªä¼šè¯ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°æ®åªä¿æŒåˆ°æµè§ˆå™¨å…³é—­ï¼Œå½“æµè§ˆå™¨å…³é—­åé‡æ–°æ‰“å¼€è¿™ä¸ªé¡µé¢æ—¶ï¼Œ ä¹‹å‰çš„å­˜å‚¨å·²ç»è¢«æ¸…é™¤ã€‚</p>
</blockquote>
</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;åŸå‹ï¼š&quot;&gt;&lt;a href=&quot;#åŸå‹ï¼š&quot; class=&quot;headerlink&quot; title=&quot;åŸå‹ï¼š&quot;&gt;&lt;/a&gt;åŸå‹ï¼š&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;æˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½å¯ä»¥æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯åŸå‹ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Web" scheme="https://microzz.com/tags/Web/"/>
    
      <category term="é¢è¯•é¢˜" scheme="https://microzz.com/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>ES6ç¼–ç¨‹é£æ ¼</title>
    <link href="https://microzz.com/2017/02/06/es6-style/"/>
    <id>https://microzz.com/2017/02/06/es6-style/</id>
    <published>2017-02-06T10:00:23.000Z</published>
    <updated>2017-08-21T11:34:16.025Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç¼–ç¨‹é£æ ¼"><a href="#ç¼–ç¨‹é£æ ¼" class="headerlink" title="ç¼–ç¨‹é£æ ¼"></a>ç¼–ç¨‹é£æ ¼</h1><p>æœ¬ç« æ¢è®¨å¦‚ä½•å°†ES6çš„æ–°è¯­æ³•ï¼Œè¿ç”¨åˆ°ç¼–ç å®è·µä¹‹ä¸­ï¼Œä¸ä¼ ç»Ÿçš„JavaScriptè¯­æ³•ç»“åˆåœ¨ä¸€èµ·ï¼Œå†™å‡ºåˆç†çš„ã€æ˜“äºé˜…è¯»å’Œç»´æŠ¤çš„ä»£ç ã€‚</p>
<p>å¤šå®¶å…¬å¸å’Œç»„ç»‡å·²ç»å…¬å¼€äº†å®ƒä»¬çš„é£æ ¼è§„èŒƒï¼Œå…·ä½“å¯å‚é˜…<a href="http://jscs.info/" target="_blank" rel="external">jscs.info</a>ï¼Œä¸‹é¢çš„å†…å®¹ä¸»è¦å‚è€ƒäº†<a href="https://github.com/airbnb/javascript" target="_blank" rel="external">Airbnb</a>çš„JavaScripté£æ ¼è§„èŒƒã€‚</p>
<h2 id="å—çº§ä½œç”¨åŸŸ"><a href="#å—çº§ä½œç”¨åŸŸ" class="headerlink" title="å—çº§ä½œç”¨åŸŸ"></a>å—çº§ä½œç”¨åŸŸ</h2><p><strong>ï¼ˆ1ï¼‰let å–ä»£ var</strong></p>
<p>ES6æå‡ºäº†ä¸¤ä¸ªæ–°çš„å£°æ˜å˜é‡çš„å‘½ä»¤ï¼š<code>let</code>å’Œ<code>const</code>ã€‚å…¶ä¸­ï¼Œ<code>let</code>å®Œå…¨å¯ä»¥å–ä»£<code>var</code>ï¼Œå› ä¸ºä¸¤è€…è¯­ä¹‰ç›¸åŒï¼Œè€Œä¸”<code>let</code>æ²¡æœ‰å‰¯ä½œç”¨ã€‚</p>
<pre><code class="javascript">&#39;use strict&#39;;

if (true) {
  let x = &#39;hello&#39;;
}

for (let i = 0; i &lt; 10; i++) {
  console.log(i);
}
</code></pre>
<p>ä¸Šé¢ä»£ç å¦‚æœç”¨<code>var</code>æ›¿ä»£<code>let</code>ï¼Œå®é™…ä¸Šå°±å£°æ˜äº†ä¸¤ä¸ªå…¨å±€å˜é‡ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯æœ¬æ„ã€‚å˜é‡åº”è¯¥åªåœ¨å…¶å£°æ˜çš„ä»£ç å—å†…æœ‰æ•ˆï¼Œ<code>var</code>å‘½ä»¤åšä¸åˆ°è¿™ä¸€ç‚¹ã€‚</p>
<p><code>var</code>å‘½ä»¤å­˜åœ¨å˜é‡æå‡æ•ˆç”¨ï¼Œ<code>let</code>å‘½ä»¤æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚</p>
<pre><code class="javascript">&#39;use strict&#39;;

if(true) {
  console.log(x); // ReferenceError
  let x = &#39;hello&#39;;
}
</code></pre>
<p>ä¸Šé¢ä»£ç å¦‚æœä½¿ç”¨<code>var</code>æ›¿ä»£<code>let</code>ï¼Œ<code>console.log</code>é‚£ä¸€è¡Œå°±ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯ä¼šè¾“å‡º<code>undefined</code>ï¼Œå› ä¸ºå˜é‡å£°æ˜æå‡åˆ°ä»£ç å—çš„å¤´éƒ¨ã€‚è¿™è¿åäº†å˜é‡å…ˆå£°æ˜åä½¿ç”¨çš„åŸåˆ™ã€‚</p>
<p>æ‰€ä»¥ï¼Œå»ºè®®ä¸å†ä½¿ç”¨<code>var</code>å‘½ä»¤ï¼Œè€Œæ˜¯ä½¿ç”¨<code>let</code>å‘½ä»¤å–ä»£ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰å…¨å±€å¸¸é‡å’Œçº¿ç¨‹å®‰å…¨</strong></p>
<p>åœ¨<code>let</code>å’Œ<code>const</code>ä¹‹é—´ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨<code>const</code>ï¼Œå°¤å…¶æ˜¯åœ¨å…¨å±€ç¯å¢ƒï¼Œä¸åº”è¯¥è®¾ç½®å˜é‡ï¼Œåªåº”è®¾ç½®å¸¸é‡ã€‚</p>
<p><code>const</code>ä¼˜äº<code>let</code>æœ‰å‡ ä¸ªåŸå› ã€‚ä¸€ä¸ªæ˜¯<code>const</code>å¯ä»¥æé†’é˜…è¯»ç¨‹åºçš„äººï¼Œè¿™ä¸ªå˜é‡ä¸åº”è¯¥æ”¹å˜ï¼›å¦ä¸€ä¸ªæ˜¯<code>const</code>æ¯”è¾ƒç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œè¿ç®—ä¸æ”¹å˜å€¼ï¼Œåªæ˜¯æ–°å»ºå€¼ï¼Œè€Œä¸”è¿™æ ·ä¹Ÿæœ‰åˆ©äºå°†æ¥çš„åˆ†å¸ƒå¼è¿ç®—ï¼›æœ€åä¸€ä¸ªåŸå› æ˜¯ JavaScript ç¼–è¯‘å™¨ä¼šå¯¹<code>const</code>è¿›è¡Œä¼˜åŒ–ï¼Œæ‰€ä»¥å¤šä½¿ç”¨<code>const</code>ï¼Œæœ‰åˆ©äºæä¾›ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼Œä¹Ÿå°±æ˜¯è¯´<code>let</code>å’Œ<code>const</code>çš„æœ¬è´¨åŒºåˆ«ï¼Œå…¶å®æ˜¯ç¼–è¯‘å™¨å†…éƒ¨çš„å¤„ç†ä¸åŒã€‚</p>
<pre><code class="javascript">// bad
var a = 1, b = 2, c = 3;

// good
const a = 1;
const b = 2;
const c = 3;

// best
const [a, b, c] = [1, 2, 3];
</code></pre>
<p><code>const</code>å£°æ˜å¸¸é‡è¿˜æœ‰ä¸¤ä¸ªå¥½å¤„ï¼Œä¸€æ˜¯é˜…è¯»ä»£ç çš„äººç«‹åˆ»ä¼šæ„è¯†åˆ°ä¸åº”è¯¥ä¿®æ”¹è¿™ä¸ªå€¼ï¼ŒäºŒæ˜¯é˜²æ­¢äº†æ— æ„é—´ä¿®æ”¹å˜é‡å€¼æ‰€å¯¼è‡´çš„é”™è¯¯ã€‚</p>
<p>æ‰€æœ‰çš„å‡½æ•°éƒ½åº”è¯¥è®¾ç½®ä¸ºå¸¸é‡ã€‚</p>
<p>é•¿è¿œæ¥çœ‹ï¼ŒJavaScriptå¯èƒ½ä¼šæœ‰å¤šçº¿ç¨‹çš„å®ç°ï¼ˆæ¯”å¦‚Intelçš„River Trailé‚£ä¸€ç±»çš„é¡¹ç›®ï¼‰ï¼Œè¿™æ—¶<code>let</code>è¡¨ç¤ºçš„å˜é‡ï¼Œåªåº”å‡ºç°åœ¨å•çº¿ç¨‹è¿è¡Œçš„ä»£ç ä¸­ï¼Œä¸èƒ½æ˜¯å¤šçº¿ç¨‹å…±äº«çš„ï¼Œè¿™æ ·æœ‰åˆ©äºä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p>
<h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><p>é™æ€å­—ç¬¦ä¸²ä¸€å¾‹ä½¿ç”¨å•å¼•å·æˆ–åå¼•å·ï¼Œä¸ä½¿ç”¨åŒå¼•å·ã€‚åŠ¨æ€å­—ç¬¦ä¸²ä½¿ç”¨åå¼•å·ã€‚</p>
<pre><code class="javascript">// bad
const a = &quot;foobar&quot;;
const b = &#39;foo&#39; + a + &#39;bar&#39;;

// acceptable
const c = `foobar`;

// good
const a = &#39;foobar&#39;;
const b = `foo${a}bar`;
const c = &#39;foobar&#39;;
</code></pre>
<h2 id="è§£æ„èµ‹å€¼"><a href="#è§£æ„èµ‹å€¼" class="headerlink" title="è§£æ„èµ‹å€¼"></a>è§£æ„èµ‹å€¼</h2><p>ä½¿ç”¨æ•°ç»„æˆå‘˜å¯¹å˜é‡èµ‹å€¼æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨è§£æ„èµ‹å€¼ã€‚</p>
<pre><code class="javascript">const arr = [1, 2, 3, 4];

// bad
const first = arr[0];
const second = arr[1];

// good
const [first, second] = arr;
</code></pre>
<p>å‡½æ•°çš„å‚æ•°å¦‚æœæ˜¯å¯¹è±¡çš„æˆå‘˜ï¼Œä¼˜å…ˆä½¿ç”¨è§£æ„èµ‹å€¼ã€‚</p>
<pre><code class="javascript">// bad
function getFullName(user) {
  const firstName = user.firstName;
  const lastName = user.lastName;
}

// good
function getFullName(obj) {
  const { firstName, lastName } = obj;
}

// best
function getFullName({ firstName, lastName }) {
}
</code></pre>
<p>å¦‚æœå‡½æ•°è¿”å›å¤šä¸ªå€¼ï¼Œä¼˜å…ˆä½¿ç”¨å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œè€Œä¸æ˜¯æ•°ç»„çš„è§£æ„èµ‹å€¼ã€‚è¿™æ ·ä¾¿äºä»¥åæ·»åŠ è¿”å›å€¼ï¼Œä»¥åŠæ›´æ”¹è¿”å›å€¼çš„é¡ºåºã€‚</p>
<pre><code class="javascript">// bad
function processInput(input) {
  return [left, right, top, bottom];
}

// good
function processInput(input) {
  return { left, right, top, bottom };
}

const { left, right } = processInput(input);
</code></pre>
<h2 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h2><p>å•è¡Œå®šä¹‰çš„å¯¹è±¡ï¼Œæœ€åä¸€ä¸ªæˆå‘˜ä¸ä»¥é€—å·ç»“å°¾ã€‚å¤šè¡Œå®šä¹‰çš„å¯¹è±¡ï¼Œæœ€åä¸€ä¸ªæˆå‘˜ä»¥é€—å·ç»“å°¾ã€‚</p>
<pre><code class="javascript">// bad
const a = { k1: v1, k2: v2, };
const b = {
  k1: v1,
  k2: v2
};

// good
const a = { k1: v1, k2: v2 };
const b = {
  k1: v1,
  k2: v2,
};
</code></pre>
<p>å¯¹è±¡å°½é‡é™æ€åŒ–ï¼Œä¸€æ—¦å®šä¹‰ï¼Œå°±ä¸å¾—éšæ„æ·»åŠ æ–°çš„å±æ€§ã€‚å¦‚æœæ·»åŠ å±æ€§ä¸å¯é¿å…ï¼Œè¦ä½¿ç”¨<code>Object.assign</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">// bad
const a = {};
a.x = 3;

// if reshape unavoidable
const a = {};
Object.assign(a, { x: 3 });

// good
const a = { x: null };
a.x = 3;
</code></pre>
<p>å¦‚æœå¯¹è±¡çš„å±æ€§åæ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥åœ¨åˆ›é€ å¯¹è±¡çš„æ—¶å€™ï¼Œä½¿ç”¨å±æ€§è¡¨è¾¾å¼å®šä¹‰ã€‚</p>
<pre><code class="javascript">// bad
const obj = {
  id: 5,
  name: &#39;San Francisco&#39;,
};
obj[getKey(&#39;enabled&#39;)] = true;

// good
const obj = {
  id: 5,
  name: &#39;San Francisco&#39;,
  [getKey(&#39;enabled&#39;)]: true,
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡<code>obj</code>çš„æœ€åä¸€ä¸ªå±æ€§åï¼Œéœ€è¦è®¡ç®—å¾—åˆ°ã€‚è¿™æ—¶æœ€å¥½é‡‡ç”¨å±æ€§è¡¨è¾¾å¼ï¼Œåœ¨æ–°å»º<code>obj</code>çš„æ—¶å€™ï¼Œå°†è¯¥å±æ€§ä¸å…¶ä»–å±æ€§å®šä¹‰åœ¨ä¸€èµ·ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ‰€æœ‰å±æ€§å°±åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰äº†ã€‚</p>
<p>å¦å¤–ï¼Œå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œå°½é‡é‡‡ç”¨ç®€æ´è¡¨è¾¾æ³•ï¼Œè¿™æ ·æ˜“äºæè¿°å’Œä¹¦å†™ã€‚</p>
<pre><code class="javascript">var ref = &#39;some value&#39;;

// bad
const atom = {
  ref: ref,

  value: 1,

  addValue: function (value) {
    return atom.value + value;
  },
};

// good
const atom = {
  ref,

  value: 1,

  addValue(value) {
    return atom.value + value;
  },
};
</code></pre>
<h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰æ‹·è´æ•°ç»„ã€‚</p>
<pre><code class="javascript">// bad
const len = items.length;
const itemsCopy = [];
let i;

for (i = 0; i &lt; len; i++) {
  itemsCopy[i] = items[i];
}

// good
const itemsCopy = [...items];
</code></pre>
<p>ä½¿ç”¨Array.fromæ–¹æ³•ï¼Œå°†ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡è½¬ä¸ºæ•°ç»„ã€‚</p>
<pre><code class="javascript">const foo = document.querySelectorAll(&#39;.foo&#39;);
const nodes = Array.from(foo);
</code></pre>
<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>ç«‹å³æ‰§è¡Œå‡½æ•°å¯ä»¥å†™æˆç®­å¤´å‡½æ•°çš„å½¢å¼ã€‚</p>
<pre><code class="javascript">(() =&gt; {
  console.log(&#39;Welcome to the Internet.&#39;);
})();
</code></pre>
<p>é‚£äº›éœ€è¦ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼çš„åœºåˆï¼Œå°½é‡ç”¨ç®­å¤´å‡½æ•°ä»£æ›¿ã€‚å› ä¸ºè¿™æ ·æ›´ç®€æ´ï¼Œè€Œä¸”ç»‘å®šäº†thisã€‚</p>
<pre><code class="javascript">// bad
[1, 2, 3].map(function (x) {
  return x * x;
});

// good
[1, 2, 3].map((x) =&gt; {
  return x * x;
});

// best
[1, 2, 3].map(x =&gt; x * x);
</code></pre>
<p>ç®­å¤´å‡½æ•°å–ä»£<code>Function.prototype.bind</code>ï¼Œä¸åº”å†ç”¨self/_this/thatç»‘å®š thisã€‚</p>
<pre><code class="javascript">// bad
const self = this;
const boundMethod = function(...params) {
  return method.apply(self, params);
}

// acceptable
const boundMethod = method.bind(this);

// best
const boundMethod = (...params) =&gt; method.apply(this, params);
</code></pre>
<p>ç®€å•çš„ã€å•è¡Œçš„ã€ä¸ä¼šå¤ç”¨çš„å‡½æ•°ï¼Œå»ºè®®é‡‡ç”¨ç®­å¤´å‡½æ•°ã€‚å¦‚æœå‡½æ•°ä½“è¾ƒä¸ºå¤æ‚ï¼Œè¡Œæ•°è¾ƒå¤šï¼Œè¿˜æ˜¯åº”è¯¥é‡‡ç”¨ä¼ ç»Ÿçš„å‡½æ•°å†™æ³•ã€‚</p>
<p>æ‰€æœ‰é…ç½®é¡¹éƒ½åº”è¯¥é›†ä¸­åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œæ”¾åœ¨æœ€åä¸€ä¸ªå‚æ•°ï¼Œå¸ƒå°”å€¼ä¸å¯ä»¥ç›´æ¥ä½œä¸ºå‚æ•°ã€‚</p>
<pre><code class="javascript">// bad
function divide(a, b, option = false ) {
}

// good
function divide(a, b, { option = false } = {}) {
}
</code></pre>
<p>ä¸è¦åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨argumentså˜é‡ï¼Œä½¿ç”¨restè¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰ä»£æ›¿ã€‚å› ä¸ºrestè¿ç®—ç¬¦æ˜¾å¼è¡¨æ˜ä½ æƒ³è¦è·å–å‚æ•°ï¼Œè€Œä¸”argumentsæ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œè€Œrestè¿ç®—ç¬¦å¯ä»¥æä¾›ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ã€‚</p>
<pre><code class="javascript">// bad
function concatenateAll() {
  const args = Array.prototype.slice.call(arguments);
  return args.join(&#39;&#39;);
}

// good
function concatenateAll(...args) {
  return args.join(&#39;&#39;);
}
</code></pre>
<p>ä½¿ç”¨é»˜è®¤å€¼è¯­æ³•è®¾ç½®å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ã€‚</p>
<pre><code class="javascript">// bad
function handleThings(opts) {
  opts = opts || {};
}

// good
function handleThings(opts = {}) {
  // ...
}
</code></pre>
<h2 id="Mapç»“æ„"><a href="#Mapç»“æ„" class="headerlink" title="Mapç»“æ„"></a>Mapç»“æ„</h2><p>æ³¨æ„åŒºåˆ†Objectå’ŒMapï¼Œåªæœ‰æ¨¡æ‹Ÿç°å®ä¸–ç•Œçš„å®ä½“å¯¹è±¡æ—¶ï¼Œæ‰ä½¿ç”¨Objectã€‚å¦‚æœåªæ˜¯éœ€è¦<code>key: value</code>çš„æ•°æ®ç»“æ„ï¼Œä½¿ç”¨Mapç»“æ„ã€‚å› ä¸ºMapæœ‰å†…å»ºçš„éå†æœºåˆ¶ã€‚</p>
<pre><code class="javascript">let map = new Map(arr);

for (let key of map.keys()) {
  console.log(key);
}

for (let value of map.values()) {
  console.log(value);
}

for (let item of map.entries()) {
  console.log(item[0], item[1]);
}
</code></pre>
<h2 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h2><p>æ€»æ˜¯ç”¨Classï¼Œå–ä»£éœ€è¦prototypeçš„æ“ä½œã€‚å› ä¸ºClassçš„å†™æ³•æ›´ç®€æ´ï¼Œæ›´æ˜“äºç†è§£ã€‚</p>
<pre><code class="javascript">// bad
function Queue(contents = []) {
  this._queue = [...contents];
}
Queue.prototype.pop = function() {
  const value = this._queue[0];
  this._queue.splice(0, 1);
  return value;
}

// good
class Queue {
  constructor(contents = []) {
    this._queue = [...contents];
  }
  pop() {
    const value = this._queue[0];
    this._queue.splice(0, 1);
    return value;
  }
}
</code></pre>
<p>ä½¿ç”¨<code>extends</code>å®ç°ç»§æ‰¿ï¼Œå› ä¸ºè¿™æ ·æ›´ç®€å•ï¼Œä¸ä¼šæœ‰ç ´å<code>instanceof</code>è¿ç®—çš„å±é™©ã€‚</p>
<pre><code class="javascript">// bad
const inherits = require(&#39;inherits&#39;);
function PeekableQueue(contents) {
  Queue.apply(this, contents);
}
inherits(PeekableQueue, Queue);
PeekableQueue.prototype.peek = function() {
  return this._queue[0];
}

// good
class PeekableQueue extends Queue {
  peek() {
    return this._queue[0];
  }
}
</code></pre>
<h2 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h2><p>é¦–å…ˆï¼ŒModuleè¯­æ³•æ˜¯JavaScriptæ¨¡å—çš„æ ‡å‡†å†™æ³•ï¼ŒåšæŒä½¿ç”¨è¿™ç§å†™æ³•ã€‚ä½¿ç”¨<code>import</code>å–ä»£<code>require</code>ã€‚</p>
<pre><code class="javascript">// bad
const moduleA = require(&#39;moduleA&#39;);
const func1 = moduleA.func1;
const func2 = moduleA.func2;

// good
import { func1, func2 } from &#39;moduleA&#39;;
</code></pre>
<p>ä½¿ç”¨<code>export</code>å–ä»£<code>module.exports</code>ã€‚</p>
<pre><code class="javascript">// commonJSçš„å†™æ³•
var React = require(&#39;react&#39;);

var Breadcrumbs = React.createClass({
  render() {
    return &lt;nav /&gt;;
  }
});

module.exports = Breadcrumbs;

// ES6çš„å†™æ³•
import React from &#39;react&#39;;

const Breadcrumbs = React.createClass({
  render() {
    return &lt;nav /&gt;;
  }
});

export default Breadcrumbs
</code></pre>
<p>å¦‚æœæ¨¡å—åªæœ‰ä¸€ä¸ªè¾“å‡ºå€¼ï¼Œå°±ä½¿ç”¨<code>export default</code>ï¼Œå¦‚æœæ¨¡å—æœ‰å¤šä¸ªè¾“å‡ºå€¼ï¼Œå°±ä¸ä½¿ç”¨<code>export default</code>ï¼Œä¸è¦<code>export default</code>ä¸æ™®é€šçš„<code>export</code>åŒæ—¶ä½¿ç”¨ã€‚</p>
<p>ä¸è¦åœ¨æ¨¡å—è¾“å…¥ä¸­ä½¿ç”¨é€šé…ç¬¦ã€‚å› ä¸ºè¿™æ ·å¯ä»¥ç¡®ä¿ä½ çš„æ¨¡å—ä¹‹ä¸­ï¼Œæœ‰ä¸€ä¸ªé»˜è®¤è¾“å‡ºï¼ˆexport defaultï¼‰ã€‚</p>
<pre><code class="javascript">// bad
import * as myObject &#39;./importModule&#39;;

// good
import myObject from &#39;./importModule&#39;;
</code></pre>
<p>å¦‚æœæ¨¡å—é»˜è®¤è¾“å‡ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°åçš„é¦–å­—æ¯åº”è¯¥å°å†™ã€‚</p>
<pre><code class="javascript">function makeStyleGuide() {
}

export default makeStyleGuide;
</code></pre>
<p>å¦‚æœæ¨¡å—é»˜è®¤è¾“å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡åçš„é¦–å­—æ¯åº”è¯¥å¤§å†™ã€‚</p>
<pre><code class="javascript">const StyleGuide = {
  es6: {
  }
};

export default StyleGuide;
</code></pre>
<h2 id="ESLintçš„ä½¿ç”¨"><a href="#ESLintçš„ä½¿ç”¨" class="headerlink" title="ESLintçš„ä½¿ç”¨"></a>ESLintçš„ä½¿ç”¨</h2><p>ESLintæ˜¯ä¸€ä¸ªè¯­æ³•è§„åˆ™å’Œä»£ç é£æ ¼çš„æ£€æŸ¥å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥ä¿è¯å†™å‡ºè¯­æ³•æ­£ç¡®ã€é£æ ¼ç»Ÿä¸€çš„ä»£ç ã€‚</p>
<p>é¦–å…ˆï¼Œå®‰è£…ESLintã€‚</p>
<pre><code class="bash">$ npm i -g eslint
</code></pre>
<p>ç„¶åï¼Œå®‰è£…Airbnbè¯­æ³•è§„åˆ™ã€‚</p>
<pre><code class="bash">$ npm i -g eslint-config-airbnb
</code></pre>
<p>æœ€åï¼Œåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>.eslintrc</code>æ–‡ä»¶ï¼Œé…ç½®ESLintã€‚</p>
<pre><code class="javascript">{
  &quot;extends&quot;: &quot;eslint-config-airbnb&quot;
}
</code></pre>
<p>ç°åœ¨å°±å¯ä»¥æ£€æŸ¥ï¼Œå½“å‰é¡¹ç›®çš„ä»£ç æ˜¯å¦ç¬¦åˆé¢„è®¾çš„è§„åˆ™ã€‚</p>
<p><code>index.js</code>æ–‡ä»¶çš„ä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">var unusued = &#39;I have no purpose!&#39;;

function greet() {
    var message = &#39;Hello, World!&#39;;
    alert(message);
}

greet();
</code></pre>
<p>ä½¿ç”¨ESLintæ£€æŸ¥è¿™ä¸ªæ–‡ä»¶ã€‚</p>
<pre><code class="bash">$ eslint index.js
index.js
  1:5  error  unusued is defined but never used                 no-unused-vars
  4:5  error  Expected indentation of 2 characters but found 4  indent
  5:5  error  Expected indentation of 2 characters but found 4  indent

âœ– 3 problems (3 errors, 0 warnings)
</code></pre>
<p>ä¸Šé¢ä»£ç è¯´æ˜ï¼ŒåŸæ–‡ä»¶æœ‰ä¸‰ä¸ªé”™è¯¯ï¼Œä¸€ä¸ªæ˜¯å®šä¹‰äº†å˜é‡ï¼Œå´æ²¡æœ‰ä½¿ç”¨ï¼Œå¦å¤–ä¸¤ä¸ªæ˜¯è¡Œé¦–ç¼©è¿›ä¸º4ä¸ªç©ºæ ¼ï¼Œè€Œä¸æ˜¯è§„å®šçš„2ä¸ªç©ºæ ¼ã€‚</p>
<blockquote>
<p>æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ç¼–ç¨‹é£æ ¼&quot;&gt;&lt;a href=&quot;#ç¼–ç¨‹é£æ ¼&quot; class=&quot;headerlink&quot; title=&quot;ç¼–ç¨‹é£æ ¼&quot;&gt;&lt;/a&gt;ç¼–ç¨‹é£æ ¼&lt;/h1&gt;&lt;p&gt;æœ¬ç« æ¢è®¨å¦‚ä½•å°†ES6çš„æ–°è¯­æ³•ï¼Œè¿ç”¨åˆ°ç¼–ç å®è·µä¹‹ä¸­ï¼Œä¸ä¼ ç»Ÿçš„JavaScriptè¯­æ³•ç»“åˆåœ¨ä¸€èµ·ï¼Œå†™å‡ºåˆç†çš„ã€æ˜“äºé˜…è¯»å’Œç»´æŠ¤çš„ä»£
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="è§„èŒƒ" scheme="https://microzz.com/tags/%E8%A7%84%E8%8C%83/"/>
    
  </entry>
  
  <entry>
    <title>ã€å¼€å‘åˆ©å™¨ã€‘ä¸­å›½å›½å†…å¯ç”¨APIåˆé›†</title>
    <link href="https://microzz.com/2017/02/03/API/"/>
    <id>https://microzz.com/2017/02/03/API/</id>
    <published>2017-02-03T07:00:19.000Z</published>
    <updated>2017-04-26T04:52:08.569Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸­å›½å›½å†…å¯ç”¨APIåˆé›†"><a href="#ä¸­å›½å›½å†…å¯ç”¨APIåˆé›†" class="headerlink" title="ä¸­å›½å›½å†…å¯ç”¨APIåˆé›†"></a>ä¸­å›½å›½å†…å¯ç”¨APIåˆé›†</h1><h3 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h3><ul>
<li><a href="#ç¬”è®°">ç¬”è®°</a></li>
<li><a href="#å‡ºè¡Œ">å‡ºè¡Œ</a></li>
<li><a href="#è¯å…¸">è¯å…¸</a></li>
<li><a href="#ç”µå•†">ç”µå•†</a></li>
<li><a href="#åœ°å›¾">åœ°å›¾</a></li>
<li><a href="#ç”µå½±">ç”µå½±</a></li>
<li><a href="#å³æ—¶é€šè®¯">å³æ—¶é€šè®¯</a></li>
<li><a href="#å¼€å‘è€…ç½‘ç«™">å¼€å‘è€…ç½‘ç«™</a></li>
<li><a href="#å¿«é€’æŸ¥è¯¢">å¿«é€’æŸ¥è¯¢</a></li>
<li><a href="#æ—…æ¸¸">æ—…æ¸¸</a></li>
<li><a href="#ç¤¾äº¤">ç¤¾äº¤</a></li>
<li><a href="#è§†é¢‘">è§†é¢‘</a></li>
<li><a href="#å¤©æ°”">å¤©æ°”</a></li>
<li><a href="#å›¢é˜Ÿåä½œ">å›¢é˜Ÿåä½œ</a></li>
<li><a href="#å›¾ç‰‡ä¸å›¾åƒå¤„ç†">å›¾ç‰‡ä¸å›¾åƒå¤„ç†</a></li>
<li><a href="#å¤–å–">å¤–å–</a></li>
<li><a href="#æ¶ˆæ¯æ¨é€">æ¶ˆæ¯æ¨é€</a></li>
<li><a href="#éŸ³ä¹">éŸ³ä¹</a></li>
<li><a href="#äº‘">äº‘</a></li>
<li><a href="#è¯­éŸ³è¯†åˆ«">è¯­éŸ³è¯†åˆ«</a></li>
<li><a href="#ç»¼åˆ">ç»¼åˆ</a></li>
</ul>
<h4 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h4><ul>
<li><a href="https://msdn.microsoft.com/en-us/office/office365/howto/onenote-landing" target="_blank" rel="external">OneNote</a> - OneNoteæ”¯æŒè·å–ï¼Œå¤åˆ¶ï¼Œåˆ›å»ºï¼Œæ›´æ–°ï¼Œå¯¼å…¥ä¸å¯¼å‡ºç¬”è®°ï¼Œæ”¯æŒä¸ºç¬”è®°æ·»åŠ å¤šåª’ä½“å†…å®¹ï¼Œç®¡ç†æƒé™ç­‰ã€‚æä¾›SDKå’ŒDemoã€‚</li>
<li><a href="http://www.wiz.cn/manual/plugin/" target="_blank" rel="external">ä¸ºçŸ¥ç¬”è®°</a> - ä¸ºçŸ¥ç¬”è®°Windowså®¢æˆ·ç«¯å¼€æ”¾äº†å¤§é‡çš„APIï¼Œå…¶ä¸­ç»å¤§éƒ¨åˆ†ï¼Œéƒ½é€šè¿‡COMæä¾›ï¼Œå¯ä»¥åœ¨javascript, C#, C++, Delphiç­‰è¯­è¨€ä¸­ä½¿ç”¨ã€‚æ¥å£é€šè¿‡IDL(Interface description language)è¯­è¨€æè¿°ã€‚</li>
<li><a href="https://dev.yinxiang.com/" target="_blank" rel="external">å°è±¡ç¬”è®°</a> - å°è±¡ç¬”è®°æä¾›äº†ActionScript 3, Android, C++, Windows, iOS, Java, JavaScript, OS X, Perl, PHP, Python, Rubyç­‰å¹³å°çš„SDKå’Œå®Œæ•´çš„APIå‚è€ƒæ–‡æ¡£ï¼Œå¯é€šè¿‡APIè¿›è¡Œè®¤è¯ï¼Œç¬”è®°ï¼Œç¬”è®°æœ¬ï¼Œé™„ä»¶ï¼Œæœç´¢ï¼ŒåŒæ­¥ç­‰æ“ä½œï¼ŒåŒæ—¶æä¾›ä¼ä¸šç‰ˆå’Œæœ¬åœ°APIã€‚</li>
<li><a href="http://note.youdao.com/open/" target="_blank" rel="external">æœ‰é“äº‘ç¬”è®°</a> - æœ‰é“äº‘ç¬”è®°æä¾›äº†Android SDKï¼ŒåŒæ—¶Open APIå…è®¸è¿›è¡Œæˆæƒï¼Œç”¨æˆ·ï¼Œç¬”è®°æœ¬ï¼Œç¬”è®°ï¼Œåˆ†äº«ï¼Œé™„ä»¶ç­‰æ–¹é¢çš„æ“ä½œã€‚</li>
</ul>
<h4 id="å‡ºè¡Œ"><a href="#å‡ºè¡Œ" class="headerlink" title="å‡ºè¡Œ"></a>å‡ºè¡Œ</h4><ul>
<li><a href="http://open.xiaojukeji.com/" target="_blank" rel="external">æ»´æ»´</a> - æ»´æ»´æä¾›äº†iOSå’ŒAndroid SDK, å¯å®ç°æ‹‰èµ·æ»´æ»´å«è½¦ç­‰æ–¹é¢çš„æ“ä½œã€‚</li>
<li><a href="http://developerpre.10101111.com/" target="_blank" rel="external">ç¥å·ä¸“è½¦</a> - ç¥å·ä¸“è½¦æä¾›äº†APIæ¨¡å¼å’ŒH5æ¨¡å¼ä¸¤ç§æ¥å…¥æ¨¡å¼ï¼Œå…è®¸è¿›è¡ŒåŸºç¡€ä¿¡æ¯ï¼Œè®¢å•ï¼Œæ”¯ä»˜ï¼Œå……å€¼ï¼Œç”¨æˆ·ï¼Œå‘ç¥¨ï¼Œä»£é‡‘åˆ¸ï¼Œä¼ä¸šç­‰æ–¹é¢çš„æ“ä½œã€‚</li>
<li><a href="https://developer.uber.com/" target="_blank" rel="external">Uber</a> - Uberæä¾›äº†Androidå’ŒiOSçš„SDK,å…è®¸è¿›è¡Œä¹˜å®¢ï¼Œè¡Œç¨‹ä½“éªŒï¼Œå¸æœºï¼Œæ´¾é€æ¬¡æ•°ç­‰å››å¤§æ–¹é¢çš„æ“ä½œã€‚</li>
</ul>
<h4 id="è¯å…¸"><a href="#è¯å…¸" class="headerlink" title="è¯å…¸"></a>è¯å…¸</h4><ul>
<li><a href="http://api.fanyi.baidu.com/api/trans/product/index" target="_blank" rel="external">ç™¾åº¦ç¿»è¯‘</a> - ç™¾åº¦ç¿»è¯‘æ”¯æŒå¤šç§è¯­è¨€äº’ç›¸ç¿»è¯‘ï¼ŒåŒ…å«PHP, JS, Python, C, Javaç‰ˆDemoã€‚</li>
<li><a href="https://www.microsoft.com/en-us/translator/translatorapi.aspx" target="_blank" rel="external">å¿…åº”è¯å…¸</a> - å¾®è½¯ç¿»è¯‘APIæ”¯æŒæ–‡å­—å’Œè¯­éŸ³ä¸¤ç§ç±»å‹ï¼Œæ”¯æŒå¤šç§è¯­è¨€äº’ç›¸ç¿»è¯‘ï¼Œæä¾›C#ç‰ˆæœ¬Demoã€‚</li>
<li><a href="http://open.iciba.com/?c=api" target="_blank" rel="external">é‡‘å±±è¯éœ¸</a> - é‡‘å±±è¯éœ¸å…è®¸è¿›è¡Œç®€å•çš„ç¿»è¯‘æ“ä½œã€‚</li>
<li><a href="https://www.shanbay.com/help/developer/api_v1/" target="_blank" rel="external">æ‰‡è´</a> - æ‰‡è´æä¾›äº†å®Œæ•´çš„APIï¼Œå…è®¸è¿›è¡Œç”¨æˆ·ï¼ŒæŸ¥è¯¢ï¼Œæ·»åŠ å­¦ä¹ è®°å½•ï¼Œå¿˜è®°å•è¯ï¼Œä¾‹å¥ï¼Œç¬”è®°ç­‰æ–¹é¢çš„æ“ä½œã€‚</li>
<li><a href="http://fanyi.youdao.com/openapi" target="_blank" rel="external">æœ‰é“è¯å…¸</a> - æœ‰é“è¯å…¸å…è®¸è¿›è¡Œç®€å•çš„ç¿»è¯‘æ“ä½œã€‚</li>
</ul>
<h4 id="ç”µå•†"><a href="#ç”µå•†" class="headerlink" title="ç”µå•†"></a>ç”µå•†</h4><ul>
<li><a href="http://open.dangdang.com/" target="_blank" rel="external">å½“å½“</a> - å½“å½“å…è®¸å•†å®¶ç”¨æˆ·å’Œç½‘ç«™æ¥å…¥æˆæƒï¼Œå¯è¿›è¡Œå•†å“ï¼Œè®¢å•ï¼Œå›¾ç‰‡ï¼Œé—®ç­”ï¼Œåº—é“ºå’Œä¿ƒé”€ç­‰æ–¹é¢çš„æ“ä½œã€‚</li>
<li><a href="https://jos.jd.com/api/index.htm" target="_blank" rel="external">äº¬ä¸œ</a> - äº¬ä¸œæä¾›äº†Java, PHP, .netçš„SDKï¼Œæˆæƒåå¯è¿›è¡Œå¤šç§æ“ä½œã€‚</li>
<li><a href="http://open.suning.com/ospos/apipage/toApiListMenu.do" target="_blank" rel="external">è‹å®å¼€æ”¾æœåŠ¡</a> - è‹å®æä¾›äº†Java, PHP, .Net, Pythonç‰ˆæœ¬çš„SDKï¼Œæˆæƒåå¯è¿›è¡Œå¤šç§æ“ä½œã€‚</li>
<li><a href="https://open.taobao.com/doc2/api_list.htm" target="_blank" rel="external">æ·˜å®å¼€æ”¾å¹³å°</a> - æ·˜å®æä¾›äº†Java, .Net, PHP, Pythonç‰ˆæœ¬çš„SDKï¼Œæˆæƒåæä¾›å¤šç§æ“ä½œã€‚</li>
<li><a href="https://developer.amazon.com/public/zh" target="_blank" rel="external">äºšé©¬é€Š</a> - äºšé©¬é€Šæä¾›å¤šç§è¯­è¨€ç‰ˆæœ¬çš„SDKï¼Œæˆæƒåå…è®¸å¤šç§æ“ä½œã€‚</li>
</ul>
<h4 id="åœ°å›¾"><a href="#åœ°å›¾" class="headerlink" title="åœ°å›¾"></a>åœ°å›¾</h4><ul>
<li><a href="http://lbsyun.baidu.com/" target="_blank" rel="external">ç™¾åº¦åœ°å›¾</a> - ç™¾åº¦åœ°å›¾æä¾›äº†Android, iOSç‰ˆæœ¬çš„SDKå’ŒJavaScript APIï¼Œå¯è¿›è¡Œå®šä½ã€åœ°å›¾ã€æ•°æ®ã€å‡ºè¡Œã€é¹°çœ¼è½¨è¿¹å’Œåˆ†ææœåŠ¡ã€‚</li>
<li><a href="http://lbs.amap.com/" target="_blank" rel="external">é«˜å¾·åœ°å›¾</a> - é«˜å¾·åœ°å›¾æä¾›äº†JavaScriptå’ŒwebæœåŠ¡APIï¼ŒAndroidå’ŒiOS SDKï¼Œæ”¯æŒåœ°å›¾ï¼Œå®šä½ï¼Œæœç´¢ï¼Œè·¯çº¿è§„åˆ’ï¼Œå¯¼èˆªå’Œå®¤å†…åœ°å›¾ç­‰ã€‚</li>
<li><a href="http://lbs.qq.com/" target="_blank" rel="external">è…¾è®¯åœ°å›¾</a> - è…¾è®¯åœ°å›¾æä¾›äº†JavaScript APIï¼ŒAndroidå’ŒiOS SDKï¼Œæ”¯æŒå®šä½ï¼Œåœ°å›¾ï¼Œåœ°ç‚¹æœç´¢ï¼Œè·¯çº¿å’Œå¯¼èˆªç­‰ã€‚</li>
<li><a href="http://lbs.tianditu.com/api-new/home.html" target="_blank" rel="external">å¤©åœ°å›¾</a> - å¤©åœ°å›¾æä¾›äº†H5 APIå’ŒJavaScript APIç­‰web APIï¼ŒåŒæ—¶æä¾›äº†Androidå’ŒiOS SDKï¼Œæ”¯æŒåŸºç¡€åœ°å›¾æœåŠ¡ï¼Œå›¾å±‚ç®¡ç†ï¼Œåœ°å›¾è¦†ç›–ç‰©ï¼Œåœ°å›¾å·¥å…·ï¼Œåœ°åæœç´¢å’Œå‡ºè¡Œè§„åˆ’æœåŠ¡ã€‚</li>
<li><a href="http://open.mapbar.com/" target="_blank" rel="external">å›¾å§åœ°å›¾</a> - å›¾å§æä¾›äº†JavaScriptå’ŒFlash APIï¼ŒAndroidå’ŒiOS SDKï¼Œæ”¯æŒå®šä½ï¼Œåœ°å€è§£æï¼Œä½ç½®æ ‡æ³¨ï¼Œä½ç½®æˆªå›¾ï¼Œè·¯çº¿è§„åˆ’ï¼Œå‘¨è¾¹æŸ¥è¯¢ï¼Œå…´è¶£ç‚¹æœç´¢å’Œåœ¨çº¿å¯¼èˆªã€‚</li>
</ul>
<h4 id="ç”µå½±"><a href="#ç”µå½±" class="headerlink" title="ç”µå½±"></a>ç”µå½±</h4><ul>
<li><a href="https://developers.douban.com/wiki/?title=movie_v2" target="_blank" rel="external">è±†ç“£ç”µå½±</a> - è±†ç“£ç”µå½±æ”¯æŒç”µå½±æ¡ç›®ï¼Œå½±äººæ¡ç›®ï¼Œæœç´¢å’Œæ¦œå•ç­‰ã€‚</li>
<li><a href="http://www.jianshu.com/p/9855610eb1d4" target="_blank" rel="external">çŒ«çœ¼ç”µå½±(éå®˜æ–¹)</a> - æ”¯æŒæŸ¥è¯¢é¦–é¡µç”µå½±åˆ—è¡¨ï¼Œç”µå½±è¯¦æƒ…(å«è¯„è®º)ï¼Œæœ¬åœ°å½±é™¢å’Œå½±é™¢è¯¦æƒ…ï¼Œé€‰åº§ã€‚ #éå®˜æ–¹</li>
<li><a href="https://github.com/avenwu/vplus/blob/master/doc/v%E7%94%B5%E5%BD%B1api%E6%8E%A5%E5%8F%A3.md" target="_blank" rel="external">Vç”µå½±(éå®˜æ–¹)</a> - æ”¯æŒè·å–<a href="http://www.vmovier.com/" target="_blank" rel="external">Vç”µå½±</a>ç½‘ç«™çš„æ•°æ®ã€‚ #éå®˜æ–¹</li>
<li><a href="https://github.com/jokermonn/-Api/blob/master/Time.md" target="_blank" rel="external">Timeæ—¶å…‰(éå®˜æ–¹)</a> - æ”¯æŒè·å–<a href="http://www.mtime.com/" target="_blank" rel="external">æ—¶å…‰ç½‘</a>ç½‘ç«™æ•°æ®ã€‚ #éå®˜æ–¹</li>
</ul>
<h4 id="å³æ—¶é€šè®¯"><a href="#å³æ—¶é€šè®¯" class="headerlink" title="å³æ—¶é€šè®¯"></a>å³æ—¶é€šè®¯</h4><ul>
<li><a href="http://www.easemob.com/" target="_blank" rel="external">ç¯ä¿¡</a> - æ”¯æŒAndroid, iOS, WebIM, Linux, RESTé›†æˆï¼Œæ”¯æŒå¤šç§æ¶ˆæ¯ç±»å‹ã€‚</li>
<li><a href="http://rongcloud.cn/" target="_blank" rel="external">èäº‘</a> - æ”¯æŒAndroid, iOS, Web, æ¸¸æˆé›†æˆï¼Œæ”¯æŒå¤šç§æ¶ˆæ¯ç±»å‹ã€‚</li>
<li><a href="http://netease.im/" target="_blank" rel="external">ç½‘æ˜“äº‘ä¿¡</a> - æ”¯æŒIMå®æ—¶é€šè®¯ï¼Œå®æ—¶éŸ³è§†é¢‘ï¼Œæ•™å­¦ç™½ç­ï¼Œä¸“çº¿ç”µè¯ï¼ŒçŸ­ä¿¡ï¼ŒèŠå¤©å®¤ï¼Œæä¾›iOS, Android, Windowså’ŒWeb SDKã€‚</li>
<li><a href="https://www.qcloud.com/product/im" target="_blank" rel="external">è…¾è®¯äº‘é€šä¿¡IM</a> - æä¾›iOS, Android, Windowså’ŒWeb SDKï¼Œæ”¯æŒå¤šç§æ¶ˆæ¯ç±»å‹ã€‚</li>
</ul>
<h4 id="å¼€å‘è€…ç½‘ç«™"><a href="#å¼€å‘è€…ç½‘ç«™" class="headerlink" title="å¼€å‘è€…ç½‘ç«™"></a>å¼€å‘è€…ç½‘ç«™</h4><ul>
<li><a href="https://open.coding.net/" target="_blank" rel="external">Coding</a> - æˆæƒåå¯è®¿é—®coding.netç½‘ç«™çš„å†…å®¹ã€‚</li>
<li><a href="http://gank.io/api" target="_blank" rel="external">å¹²è´§é›†ä¸­è¥</a> - æä¾›å¦¹å­å›¾å’ŒAndroid, iOS, å‰ç«¯ï¼Œæ‹“å±•èµ„æºç­‰å†…å®¹ã€‚</li>
<li><a href="https://www.diycode.cc/api" target="_blank" rel="external">diycode</a> - æˆæƒåå¯è®¿é—®diycodeç½‘ç«™çš„å†…å®¹ã€‚</li>
<li><a href="http://www.oschina.net/openapi" target="_blank" rel="external">å¼€æºä¸­å›½</a> - æˆæƒåå¯è®¿é—®å¼€æºä¸­å›½ç½‘ç«™çš„å†…å®¹ã€‚</li>
<li><a href="https://laravel-china.org/topics/3097" target="_blank" rel="external">Laravel China</a> - æˆæƒåå¯è®¿é—® Laravel China ç½‘ç«™çš„å†…å®¹ã€‚</li>
<li><a href="https://ruby-china.org/api-doc/" target="_blank" rel="external">Ruby China</a> - æˆæƒåå¯è®¿é—®Ruby Chinaç½‘ç«™çš„å†…å®¹ã€‚</li>
<li><a href="https://www.v2ex.com/p/7v9TEc53" target="_blank" rel="external">V2EX</a> - å¯è®¿é—®V2EXç½‘ç«™çš„å†…å®¹ã€‚</li>
</ul>
<h4 id="å¿«é€’æŸ¥è¯¢"><a href="#å¿«é€’æŸ¥è¯¢" class="headerlink" title="å¿«é€’æŸ¥è¯¢"></a>å¿«é€’æŸ¥è¯¢</h4><ul>
<li><a href="http://www.aikuaidi.cn/api/" target="_blank" rel="external">çˆ±å¿«é€’</a> - çˆ±å¿«é€’æ”¯æŒå›½å†…90å¤šå®¶å¿«é€’ç‰©æµè®¢å•æŸ¥è¯¢æœåŠ¡ï¼Œå…è´¹ç‰ˆæœ‰ä½¿ç”¨æ¬¡æ•°é™åˆ¶ï¼Œå¯ç”¨äºç”µå­å•†åŸå•å·è·Ÿè¸ª,æ‰‹æœºåº”ç”¨,å¾®ä¿¡å¿«é€’æ¥å£ç­‰æœåŠ¡ã€‚</li>
<li><a href="http://www.kuaidi100.com/openapi/" target="_blank" rel="external">å¿«é€’100</a> - å¿«é€’100æ”¯æŒ300å®¶å›½å†…å›½é™…å¿«é€’ï¼Œå…è´¹ç‰ˆæœ‰ä½¿ç”¨æ¬¡æ•°é™åˆ¶ã€‚</li>
<li><a href="http://www.kdniao.com/" target="_blank" rel="external">å¿«é€’é¸Ÿ</a> - å¿«é€’é¸Ÿæ”¯æŒå›½å†…å¤–400å¤šå®¶å¿«é€’å…¬å¸ï¼Œå…è´¹ç‰ˆæœ‰ä½¿ç”¨æ¬¡æ•°é™åˆ¶ï¼ŒåŒ…å«.Net, PHP, Javaç‰ˆDemoã€‚</li>
<li><a href="http://www.kuaidi.com/openapi.html" target="_blank" rel="external">å¿«é€’ç½‘</a> - å¿«é€’ç½‘æ”¯æŒä¸Šç™¾å®¶å¿«é€’æŸ¥è¯¢æœåŠ¡ï¼Œå…è´¹ç‰ˆæœ‰ä½¿ç”¨æ¬¡æ•°é™åˆ¶ã€‚</li>
</ul>
<h4 id="æ—…æ¸¸"><a href="#æ—…æ¸¸" class="headerlink" title="æ—…æ¸¸"></a>æ—…æ¸¸</h4><ul>
<li><a href="http://open.qunar.com/" target="_blank" rel="external">å»å“ªå„¿</a> - æ”¯æŒè·å–å»å“ªå„¿ç½‘çš„å†…å®¹ã€‚</li>
<li><a href="http://open.tuniu.cn/" target="_blank" rel="external">é€”ç‰›</a> - æ”¯æŒé€”ç‰›ç½‘çš„å†…å®¹ï¼Œä»…å¼€æ”¾ç»™ä¾›åº”å•†ç³»ç»Ÿã€‚</li>
<li><a href="http://u.ctrip.com/union/help/Termsofuse.aspx" target="_blank" rel="external">æºç¨‹</a> - æ”¯æŒæºç¨‹ç½‘çš„å†…å®¹ã€‚</li>
<li><a href="http://open.elong.com/wiki/API%E6%96%87%E6%A1%A3" target="_blank" rel="external">è‰ºé¾™</a> - æ”¯æŒè·å–äº§å“æ•°æ®ï¼Œå®Œæˆç”¨æˆ·çš„é¢„è®¢ï¼Œè¿›è¡Œè®¢å•æŸ¥è¯¢ã€æ›´æ”¹æˆ–å–æ¶ˆã€‚æä¾›åœ¨çº¿å·¥å…·ï¼Œä»¥åŠH5, Java, C#, PHP, Rubyç‰ˆæœ¬çš„Demoã€‚</li>
<li><a href="https://github.com/jokermonn/-Api/blob/master/12306.md" target="_blank" rel="external">12306(éå®˜æ–¹)</a> - æ”¯æŒè·å–12306ç«è½¦ç¥¨ç¥¨æ•°ã€ç¥¨ä»·æŸ¥è¯¢ã€‚ #éå®˜æ–¹</li>
</ul>
<h4 id="ç¤¾äº¤"><a href="#ç¤¾äº¤" class="headerlink" title="ç¤¾äº¤"></a>ç¤¾äº¤</h4><ul>
<li><a href="https://open-doc.dingtalk.com/" target="_blank" rel="external">é’‰é’‰</a> - æ”¯æŒå…ç™»ï¼Œä¼ä¸šé€šè®¯å½•ï¼ŒæœåŠ¡çª—ï¼Œé’‰ç›˜ï¼Œåœ°å›¾ï¼Œä¼šè¯ï¼ŒDINGï¼Œç”µè¯ï¼ŒéŸ³é¢‘ï¼Œæ‰«ç ï¼Œæ”¯ä»˜ï¼Œåˆ†äº«ç­‰æœåŠ¡ï¼Œæä¾›SDKå’ŒDemoï¼ŒPCç‰ˆUIè§„èŒƒï¼Œè°ƒè¯•å·¥å…·å’Œé’‰é’‰UIç»„ä»¶åº“ã€‚</li>
<li><a href="https://developers.douban.com/wiki/?title=guide" target="_blank" rel="external">è±†ç“£</a> - æ”¯æŒå›¾ä¹¦ï¼Œç”µå½±ï¼ŒéŸ³ä¹ï¼ŒåŒåŸï¼Œå¹¿æ’­ï¼Œç”¨æˆ·ï¼Œæ—¥è®°ï¼Œç›¸å†Œï¼Œçº¿ä¸Šæ´»åŠ¨ï¼Œè®ºå›ï¼Œå›å¤å’Œæˆ‘å»ç­‰åŠŸèƒ½ï¼Œæä¾›è±†ç“£ç»„ä»¶ï¼Œè±†ç“£æ ‡ç¤ºå’ŒDemoã€‚</li>
<li><a href="http://open.kaixin001.com/document.php" target="_blank" rel="external">å¼€å¿ƒç½‘</a> - æ”¯æŒç”¨æˆ·ä¿¡æ¯ï¼Œç™»å½•æˆæƒï¼Œå¥½å‹ï¼Œä¼ æ’­åº”ç”¨ï¼Œæ”¯ä»˜ï¼Œåˆ†äº«å†…å®¹ï¼Œæ¶ˆæ¯ï¼Œäº¤äº’ï¼Œå¼€å¿ƒç½‘åº”ç”¨ç­‰å†…å®¹ï¼Œæä¾›SDKï¼Œå¼€æºæ’ä»¶å’Œæ ‡ç¤ºç´ æã€‚</li>
<li><a href="http://wiki.connect.qq.com/api%E5%88%97%E8%A1%A8" target="_blank" rel="external">QQäº’è”</a> - æ”¯æŒç”¨æˆ·èµ„æ–™ï¼ŒQQä¼šå‘˜ä¿¡æ¯ï¼Œç©ºé—´ç›¸å†Œï¼Œè…¾è®¯å¾®åšèµ„æ–™ï¼Œåˆ†äº«åˆ°è…¾è®¯å¾®åšï¼Œå¾®åšå¥½å‹ä¿¡æ¯ï¼Œè´¢ä»˜é€šä¿¡æ¯ç­‰å†…å®¹ï¼Œæä¾›SDK, Demo, ä»¥åŠè®¾è®¡èµ„æºã€‚</li>
<li><a href="http://open.weibo.com/wiki/API" target="_blank" rel="external">å¾®åš</a> - æ”¯æŒç²‰ä¸æœåŠ¡ï¼Œå¾®åšï¼Œè¯„è®ºï¼Œç”¨æˆ·ï¼Œå…³ç³»ï¼Œè´¦å·ï¼Œæ”¶è—ï¼Œæœç´¢ï¼Œæé†’ï¼ŒçŸ­é“¾ï¼Œå…¬å…±æœåŠ¡ï¼Œä½ç½®æœåŠ¡ï¼Œåœ°ç†ä¿¡æ¯ï¼Œåœ°å›¾å¼•æ“ï¼Œæ”¯ä»˜ä»¥åŠOAuth2.0æˆæƒç­‰å†…å®¹ï¼Œæä¾›å¾®åšæ ‡ç¤ºåŠSDKã€‚</li>
<li><a href="https://open.weixin.qq.com/" target="_blank" rel="external">å¾®ä¿¡</a> - æ”¯æŒç§»åŠ¨åº”ç”¨ï¼Œç½‘ç«™åº”ç”¨ï¼Œå…¬ä¼—è´¦å·ï¼Œå…¬ä¼—å·ç¬¬ä¸‰æ–¹å¹³å°ç­‰å†…å®¹ï¼Œæä¾›SDK, Demo, ä»¥åŠè®¾è®¡èµ„æºã€‚</li>
</ul>
<h4 id="è§†é¢‘"><a href="#è§†é¢‘" class="headerlink" title="è§†é¢‘"></a>è§†é¢‘</h4><ul>
<li><a href="http://open.iqiyi.com/" target="_blank" rel="external">çˆ±å¥‡è‰º</a> - æ”¯æŒå¼¹å¹•ï¼Œå…¨è‰²å½©æ’­æ”¾å™¨ï¼Œé«˜æ¸…ç æµï¼Œè§†é¢‘æ‰˜ç®¡ï¼Œæ’­æ”¾çˆ±å¥‡è‰ºè§†é¢‘ï¼Œåº”ç”¨åˆ†å‘ï¼ŒIOCPç­‰å†…å®¹ã€‚</li>
<li><a href="https://github.com/fython/BilibiliAPIDocs" target="_blank" rel="external">Bilibili(éå®˜æ–¹)</a> - æ”¯æŒç™»å½•ï¼Œæˆ‘çš„ä¿¡æ¯ï¼Œç•ªå‰§ä¸“é¢˜ï¼Œè§†é¢‘/ä¸“é¢˜æ”¶è—ã€å…³æ³¨ï¼Œç•ªå‰§ï¼Œå¼¹å¹•ç­‰ã€‚ #éå®˜æ–¹</li>
<li><a href="http://www.lecloud.com/zh-cn/help/api.html" target="_blank" rel="external">ä¹è§†</a> - æ”¯æŒæ ‡å‡†ç›´æ’­ï¼Œæ ‡å‡†ç‚¹æ’­ï¼Œè§†é¢‘å‘è¡Œå¹³å°ï¼Œç§»åŠ¨ç›´æ’­ç­‰å†…å®¹ï¼Œæä¾›SDKä¸‹è½½ã€‚</li>
<li><a href="http://lm.tv.sohu.com/union/open_platform.do" target="_blank" rel="external">æœç‹è§†é¢‘</a> - æ”¯æŒä¸€äºŒçº§å†…å®¹è·å–ï¼Œå†…å®¹åˆ†ç±»è·å–ï¼Œè§†é¢‘è¯¦æƒ…ä¿¡æ¯ï¼Œä¸“è¾‘è¯¦æƒ…ä¿¡æ¯ï¼Œåˆ†çº§åˆ—è¡¨è·å–ï¼Œå…³é”®è¯æœç´¢ç­‰å†…å®¹ã€‚</li>
<li><a href="http://api.tudou.com/apidoc/index.php/%E9%A6%96%E9%A1%B5" target="_blank" rel="external">åœŸè±†</a> - æ”¯æŒè§†é¢‘æ¨¡å—ï¼Œè±†å•æ¨¡å—ï¼Œå½±è§†åº“æ¨¡å—ï¼Œç”¨æˆ·æ¨¡å—ï¼Œè½¬å¸–æ¨¡å—ï¼Œå­—æ®µå®šä¹‰æ¨¡å—ç­‰å†…å®¹ã€‚</li>
<li><a href="http://doc.open.youku.com/?spm=0.0.0.0.fOn6ND" target="_blank" rel="external">ä¼˜é…·</a> - æ”¯æŒå†…å®¹è¾“å‡ºï¼Œè§†é¢‘æœç´¢ï¼Œæ™ºèƒ½æ¨èï¼Œç”¨æˆ·ç™»å½•ï¼Œç”¨æˆ·äº’åŠ¨ï¼Œç”¨æˆ·ä¿¡æ¯ï¼Œè§†é¢‘ä¸Šä¼ è‡³ä¼˜é…·ï¼Œè§†é¢‘äº’åŠ¨ç­‰å†…å®¹ï¼Œæä¾›SDKã€‚</li>
</ul>
<h4 id="å¤©æ°”"><a href="#å¤©æ°”" class="headerlink" title="å¤©æ°”"></a>å¤©æ°”</h4><ul>
<li><a href="http://wiki.swarma.net/index.php/%E5%BD%A9%E4%BA%91%E5%A4%A9%E6%B0%94API/v2" target="_blank" rel="external">å½©äº‘å¤©æ°”</a> - æ”¯æŒå…¨çƒå¤©æ°”æ•°æ®ï¼Œä¸¤ç§ç©ºæ°”è´¨é‡æ•°æ®ï¼Œå¤©æ°”é¢„æŠ¥ï¼Œå®å†µå¤©æ°”ï¼Œç‹¬å®¶é™æ°´é¢„æŠ¥ï¼Œç‹¬å®¶ç©ºæ°”è´¨é‡é¢„æŠ¥ï¼Œå…­ç§å¤©æ°”æ•°æ®ï¼Œå››ç§ç”Ÿæ´»æŒ‡æ•°æ•°æ®ç­‰å†…å®¹ï¼Œéƒ¨åˆ†åŠŸèƒ½æ”¶è´¹ã€‚</li>
<li><a href="http://www.kancloud.cn/hefengyun/weather/222344" target="_blank" rel="external">å’Œé£å¤©æ°”</a> - æ”¯æŒ7-10å¤©é¢„æŠ¥ï¼Œå®å†µå¤©æ°”ï¼Œæ¯å°æ—¶é¢„æŠ¥ï¼Œç”Ÿæ´»æŒ‡æ•°ï¼Œç¾å®³é¢„è­¦ï¼Œæ™¯ç‚¹å¤©æ°”ï¼Œå†å²å¤©æ°”ï¼ŒåŸå¸‚æŸ¥è¯¢ç­‰å†…å®¹ï¼Œä»…å›½å†…æ•°æ®å…è´¹ã€‚</li>
<li><a href="http://www.thinkpage.cn/doc" target="_blank" rel="external">å¿ƒçŸ¥å¤©æ°”</a> - æ”¯æŒå¤©æ°”å®å†µï¼Œé€æ—¥é¢„æŠ¥å’Œå†å²ï¼Œ24å°æ—¶é€å°æ—¶é¢„æŠ¥ï¼Œè¿‡å»24å°æ—¶å¤©æ°”å†å²è®°å½•ï¼Œæ°”è±¡ç¾å®³é¢„è­¦ï¼Œç©ºæ°”è´¨é‡å®å†µä¸åŸå¸‚æ’è¡Œï¼Œé€æ—¥å’Œé€å°æ—¶ç©ºæ°”è´¨é‡é¢„æŠ¥ï¼Œè¿‡å»24å°æ—¶ç©ºæ°”è´¨é‡å†å²è®°å½•ï¼Œç”Ÿæ´»æŒ‡æ•°ï¼Œå†œå†ã€èŠ‚æ°”ã€ç”Ÿè‚–ï¼ŒæœºåŠ¨è½¦å°¾å·é™è¡Œï¼Œæ—¥å‡ºæ—¥è½ï¼Œæœˆåˆæœˆè½å’Œæœˆåƒï¼ŒåŸå¸‚æœç´¢ç­‰å†…å®¹ï¼Œä»…å›½å†…æ•°æ®å…è´¹ã€‚</li>
</ul>
<h4 id="å›¢é˜Ÿåä½œ"><a href="#å›¢é˜Ÿåä½œ" class="headerlink" title="å›¢é˜Ÿåä½œ"></a>å›¢é˜Ÿåä½œ</h4><ul>
<li><a href="https://www.teambition.com/developer/open-platform" target="_blank" rel="external">Teambition</a> - æ”¯æŒè¯¦ç»†çš„æ–‡æ¡£è¯´æ˜ï¼Œéƒ¨åˆ†å¹³å°æä¾›demoã€‚</li>
</ul>
<h4 id="å›¾ç‰‡ä¸å›¾åƒå¤„ç†"><a href="#å›¾ç‰‡ä¸å›¾åƒå¤„ç†" class="headerlink" title="å›¾ç‰‡ä¸å›¾åƒå¤„ç†"></a>å›¾ç‰‡ä¸å›¾åƒå¤„ç†</h4><ul>
<li><a href="https://www.v2ex.com/t/157267" target="_blank" rel="external">Bingæ¯æ—¥å£çº¸(éå®˜æ–¹)</a> - æ”¯æŒå›¾ç‰‡URLå’Œå›¾ç‰‡æè¿°ï¼Œå¯è·å–ä¸åŒåœ°åŒºçš„æ•°æ®ã€‚ #éå®˜æ–¹</li>
<li><a href="https://github.com/pinguo/PGSkinPrettifyEngine" target="_blank" rel="external">Camera360</a> - æ”¯æŒå…¨å¸§ç‡ç›´æ’­ç¾ç™½æ»¤é•œï¼Œæä¾›SDKå’ŒDemoã€‚</li>
<li><a href="http://imgsdk.com/" target="_blank" rel="external">å—¨å›¾</a> - æ”¯æŒå›¾ç‰‡æ ‡æ³¨ï¼Œä»…æä¾›iOSç‰ˆæœ¬SDKã€‚</li>
<li><a href="https://dev.camcard.com/?language=zh-cn" target="_blank" rel="external">åç‰‡å…¨èƒ½ç‹</a> - æ”¯æŒç²¾å‡†è¯†åˆ«å‡ åç§è¯­è¨€çš„åç‰‡ï¼Œè‡ªåŠ¨åˆ‡è¾¹å¹¶ç¾åŒ–åç‰‡å›¾åƒï¼Œè‡ªåŠ¨è¿”å›è¯†åˆ«ç»“æœï¼Œæä¾›å¤šç§ç‰ˆæœ¬SDKï¼Œæ”¶è´¹ã€‚</li>
<li><a href="http://www.intsig.com/zh/products/camcard_for_id" target="_blank" rel="external">ä¼ä¸šè¯ä»¶è¯†åˆ«</a> - æ”¯æŒèº«ä»½è¯ï¼Œé©¾é©¶è¯ï¼ŒæŠ¤ç…§ç­‰ï¼Œæ”¶è´¹ã€‚</li>
<li><a href="https://dev.camscanner.com/?language=zh-cn" target="_blank" rel="external">æ‰«æå…¨èƒ½ç‹</a> - æ”¯æŒå›¾åƒæ™ºèƒ½å‰ªè£ï¼Œäº”ç§å›¾åƒå¢å¼ºæ¨¡å¼ï¼Œæ‰‹åŠ¨è°ƒèŠ‚å›¾åƒç»†èŠ‚ï¼Œè‡ªåŠ¨è¿”å›æ‰«æç»“æœç­‰ï¼Œæä¾›iOSä¸Androidç‰ˆæœ¬SDKï¼Œæ”¶è´¹ã€‚</li>
<li><a href="http://api1.wozhitu.com/" target="_blank" rel="external">æˆ‘çŸ¥å›¾</a> - æ”¯æŒç›¸ä¼¼å›¾åƒæœç´¢ï¼Œå›¾åƒè¯†åˆ«åŒ¹é…ï¼Œå›¾åƒè¯†åˆ«å…³é”®è¯æ¨èï¼Œé‡å¤å›¾ç‰‡æ¢æµ‹ç­‰å†…å®¹ã€‚</li>
<li><a href="http://www.intsig.com/zh/products/creditcard" target="_blank" rel="external">é“¶è¡Œå¡|ä¿¡ç”¨å¡è¯†åˆ«</a> - æä¾›SDKå’ŒAPIï¼Œæ”¶è´¹ã€‚</li>
</ul>
<h4 id="å¤–å–"><a href="#å¤–å–" class="headerlink" title="å¤–å–"></a>å¤–å–</h4><ul>
<li><a href="http://dev.waimai.baidu.com/" target="_blank" rel="external">ç™¾åº¦å¤–å–</a> - æ”¯æŒå•†æˆ·ï¼Œèœå“ï¼Œå•†å“ï¼Œè®¢å•å’ŒåŸºç¡€æ•°æ®ç­‰å†…å®¹ï¼Œæä¾›SDKå’ŒDemoã€‚</li>
<li><a href="http://developer.dianping.com/" target="_blank" rel="external">å¤§ä¼—ç‚¹è¯„</a> - æ”¯æŒå•†æˆ·ï¼Œå›¢è´­ï¼Œåœ¨çº¿é¢„å®šï¼Œå•†å“ç‚¹è¯„ï¼Œæ•°æ®ç»Ÿè®¡ï¼Œå…ƒæ•°æ®ç­‰å†…å®¹ã€‚</li>
<li><a href="http://openapi.eleme.io/v2/quickstart.html" target="_blank" rel="external">é¥¿äº†ä¹ˆ</a> - æ”¯æŒæŸ¥è¯¢ï¼Œé¢„å®šï¼Œè®¢å•ï¼Œå…¶ä»–è®¢å•ï¼Œæ•°æ®æ¨é€ï¼Œæ”¯ä»˜ï¼Œè¯„ä»·ï¼Œæ´»åŠ¨ï¼Œè´¦æˆ·åŒæ­¥ï¼Œæ•°æ®è½åœ°åŒæ­¥ç­‰å†…å®¹ã€‚</li>
<li><a href="http://developer.waimai.meituan.com/doc/show" target="_blank" rel="external">ç¾å›¢å¤–å–</a> - æ”¯æŒé—¨åº—ï¼Œé…é€èŒƒå›´ï¼Œèœå“ï¼Œè¯å“ï¼Œè®¢å•ï¼Œè®¢å•æ¨é€ç­‰å†…å®¹ã€‚</li>
</ul>
<h4 id="æ¶ˆæ¯æ¨é€"><a href="#æ¶ˆæ¯æ¨é€" class="headerlink" title="æ¶ˆæ¯æ¨é€"></a>æ¶ˆæ¯æ¨é€</h4><ul>
<li><a href="http://push.baidu.com/doc/restapi/restapi" target="_blank" rel="external">ç™¾åº¦äº‘æ¨é€</a> - æ”¯æŒiOS, Androidå’ŒæœåŠ¡å™¨ç«¯ï¼Œæ”¯æŒæ¨é€ï¼Œç»Ÿè®¡ï¼Œç»„ç®¡ç†ç­‰Rest APIæ¥å£ã€‚æœåŠ¡å™¨ç«¯æ”¯æŒJava, Python, PHP, REST APIã€‚æä¾›æ‰€æ”¯æŒå„è¯­è¨€ç‰ˆæœ¬çš„SDKã€‚</li>
<li><a href="http://developer.huawei.com/push" target="_blank" rel="external">åä¸ºæ¨é€</a> - æ”¯æŒAndroidï¼Œæä¾›SDKã€‚</li>
<li><a href="https://docs.jiguang.cn/jpush/server/push/rest_api_v3_push/" target="_blank" rel="external">æå…‰</a> - æ”¯æŒAndroid, iOS, WindowsPhone, æœåŠ¡å™¨ç«¯REST API, æä¾›Java, Python, PHP, Ruby, C#, Node.jsç­‰ç‰ˆæœ¬çš„SDKã€‚</li>
<li><a href="https://leancloud.cn/docs/push_guide.html" target="_blank" rel="external">LeanCloud</a> - æ”¯æŒAndroid, iOS, WindowsPhoneå’ŒWebç½‘é¡µæ¨é€ï¼Œä½¿ç”¨äº‘å¼•æ“å’ŒJavaScriptåˆ›å»ºæ¨é€ï¼Œä½¿ç”¨REST APIæ¨é€æ¶ˆæ¯ã€‚æä¾›Objectvie-C(å¼€æ”¾æºç ), JavaScript(å¼€æ”¾æºç ), Android, Unity, .Net, WindowsPhone, Java(å¼€æ”¾æºç ), Python(å¼€æ”¾æºç ), PHP(å¼€æ”¾æºç ), C++(å¼€æ”¾æºç ), Swift(å¼€æ”¾æºç )ç‰ˆæœ¬SDKã€‚åŒæ—¶æä¾›Demoã€‚</li>
<li><a href="http://xg.qq.com/" target="_blank" rel="external">è…¾è®¯ä¿¡é¸½</a> - æ”¯æŒiOSå’ŒAndroidå¹³å°ï¼ŒæœåŠ¡å™¨ç«¯é‡‡ç”¨Rest API, åŒæ—¶æœåŠ¡å™¨ç«¯æ”¯æŒJava, PHP, Pythonç­‰è¯­è¨€å¹¶æä¾›SDKã€‚</li>
<li><a href="http://dev.xiaomi.com/console/appservice/push.html" target="_blank" rel="external">å°ç±³</a> - æ”¯æŒAndroidå’ŒiOSå¹³å°ï¼ŒæœåŠ¡å™¨ç«¯æ”¯æŒJava, Pythonå¹¶æä¾›SDKã€‚</li>
<li><a href="http://dev.umeng.com/push/android/api-doc" target="_blank" rel="external">å‹ç›Ÿ</a> - æ”¯æŒAndroidå’ŒiOSå¹³å°ï¼ŒæœåŠ¡å™¨ç«¯æ”¯æŒPHP, Java, Pythonå¹¶æä¾›SDKã€‚</li>
</ul>
<h4 id="éŸ³ä¹"><a href="#éŸ³ä¹" class="headerlink" title="éŸ³ä¹"></a>éŸ³ä¹</h4><ul>
<li><a href="https://my.oschina.net/skiden/blog/102025" target="_blank" rel="external">ç™¾åº¦éŸ³ä¹(éå®˜æ–¹)</a> - æ”¯æŒé¢‘é“æ­Œæ›²åˆ—è¡¨ï¼Œä¸“è¾‘çš„æ­Œæ›²åˆ—è¡¨ï¼Œæ­Œæ›²çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ­Œæ‰‹ä¸“è¾‘ä¿¡æ¯ï¼Œæœç´¢ï¼Œæ­Œæ‰‹çš„æ‰€æœ‰æ­Œæ›²ï¼Œæ’è¡Œæ¦œï¼Œæ‰€æœ‰ä¸“è¾‘ï¼Œæ‰€æœ‰æ­Œæ‰‹ï¼Œæ­Œæ‰‹çš„ä¸“è¾‘åˆ—è¡¨ï¼Œæ­Œæ‰‹ä¿¡æ¯ï¼Œæ­Œè¯æœç´¢ï¼Œæ­Œæ›²æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ã€‚ #éå®˜æ–¹</li>
<li><a href="https://developers.douban.com/wiki/?title=music_v2" target="_blank" rel="external">è±†ç“£éŸ³ä¹</a> - æ”¯æŒéŸ³ä¹ä¿¡æ¯ï¼Œè¯„è®ºä¿¡æ¯ï¼Œæ ‡ç­¾ä¿¡æ¯ï¼Œæœç´¢éŸ³ä¹ï¼ŒæŸä¸ªéŸ³ä¹ä¸­æ ‡è®°æœ€å¤šçš„æ ‡ç­¾ï¼Œå‘è¡¨ã€ä¿®æ”¹ã€åˆ é™¤è¯„è®ºï¼Œç”¨æˆ·å¯¹éŸ³ä¹çš„æ‰€æœ‰æ ‡ç­¾ç­‰å†…å®¹ã€‚</li>
<li><a href="https://github.com/kaolafm/api" target="_blank" rel="external">è€ƒæ‹‰FM</a> - æ”¯æŒè·å–æŒ‡å®šåˆ†ç±»ä¸‹åˆ—è¡¨å’Œå†…å®¹ï¼Œæœç´¢æŒ‡å®šå…³é”®å­—å†…å®¹ï¼Œä¸“è¾‘/ç”µå°/ç›´æ’­è¯¦æƒ…ï¼ŒæŒ‡å®šä¸“è¾‘ä¸‹åˆ—è¡¨ï¼ŒæŒ‡å®šç”µå°æ’­å•ï¼Œåˆ†ç±»ä¸‹ä¸“è¾‘TOP50ï¼ŒæŒ‡å®šæœŸ(ç¢ç‰‡)æ‰€åœ¨ä¸“è¾‘æœ€æ–°åˆ†é¡µåŠŸèƒ½ï¼Œåˆ†ç±»ä¸‹å…¨éƒ¨ç›´æ’­è®¡åˆ’ï¼Œç‰ˆæœ¬å‡çº§æ¥å£ï¼Œæ’è¡Œæ¦œï¼Œç²¾é€‰ï¼Œä¼ ç»Ÿç”µå°åˆ—è¡¨/è¯¦æƒ…/åœ°åŒºç­‰ã€‚</li>
<li><a href="http://119.29.39.252/index.php/2016/10/20/1-2/" target="_blank" rel="external">é…·ç‹—éŸ³ä¹(éå®˜æ–¹)</a> - æ”¯æŒæœç´¢ï¼Œå„ç§æ’è¡Œæ¦œï¼Œæ­Œæ‰‹ä¸“è¾‘ä¿¡æ¯ï¼Œä¸‹è½½å’Œè·å–æ’­æ”¾åœ°å€ã€‚ #éå®˜æ–¹</li>
<li><a href="http://wq.qq.com/" target="_blank" rel="external">ä¼é¹…FM</a> - æ”¯æŒè·å–ç”µå°åˆ†ç±»åˆ—è¡¨ï¼Œç”µå°åˆ†ç±»ä¸‹çš„ä¸“è¾‘ä¿¡æ¯åˆ—è¡¨ï¼Œä¸“è¾‘ä¸‹èŠ‚ç›®ä¿¡æ¯åˆ—è¡¨ï¼Œç”µå°èŠ‚ç›®æ’­æ”¾é“¾æ¥ï¼Œæœç´¢å…³é”®å­—ç›¸å…³ä¸»æ’­/ä¸“è¾‘/èŠ‚ç›®ï¼Œä¸»æ’­åä¸‹ä¸“è¾‘ï¼Œç‰¹å®šæ—¶é—´æ®µå†…æ–°å¢ä¸»æ’­/æ›´æ–°çš„ä¸“è¾‘/æ–°å¢çš„ä¸“è¾‘ç­‰ã€‚</li>
<li><a href="https://github.com/ccchangkong/article/issues/23" target="_blank" rel="external">QQéŸ³ä¹(éå®˜æ–¹)</a> - æ”¯æŒæ­Œæ›²æ¦œå•ï¼Œæ­Œæ›²/æ­Œè¯åœ°å€ï¼Œæ­Œæ›²å›¾ç‰‡ã€‚ #éå®˜æ–¹</li>
<li><a href="http://open.qingting.fm/" target="_blank" rel="external">èœ»èœ“FM</a> - æ”¯æŒOAuth2.0æˆæƒï¼ŒéŸ³é¢‘æ•°æ®ä¸­å¿ƒï¼Œåˆ†ç±»ï¼Œç‚¹æ’­ï¼Œç›´æ’­ï¼Œä¸´æ—¶ç›´æ’­ï¼Œæ’è¡Œæ¦œï¼Œæœç´¢ï¼Œå†…å®¹æ›´æ–°çŠ¶æ€ï¼Œä¸»æ’­ï¼Œæ­¤åˆ»ï¼Œä¸“é¢˜ï¼Œæ´»åŠ¨ç­‰å†…å®¹ã€‚</li>
<li><a href="https://github.com/darknessomi/musicbox/wiki/%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%96%B0%E7%89%88WebAPI%E5%88%86%E6%9E%90%E3%80%82" target="_blank" rel="external">ç½‘æ˜“äº‘éŸ³ä¹(éå®˜æ–¹)</a> - æ”¯æŒè·å–ç”¨æˆ·æ­Œå•ï¼Œæ­Œå•è¯¦æƒ…ï¼Œæ­Œæ›²URLã€‚ #éå®˜æ–¹</li>
<li><a href="http://open.ximalaya.com/index" target="_blank" rel="external">å–œé©¬æ‹‰é›…FM</a> - æ”¯æŒAndroidå’ŒiOSå¹³å°ï¼Œå¹¶æä¾›ç›¸åº”çš„SDKå’ŒDemoï¼Œå…·ä½“æ”¯æŒå†…å®¹è¯·ä¸‹è½½ç›¸å…³æ–‡ä»¶æŸ¥çœ‹ã€‚</li>
</ul>
<h4 id="äº‘"><a href="#äº‘" class="headerlink" title="äº‘"></a>äº‘</h4><ul>
<li><a href="https://develop.aliyun.com/api?spm=5176.8142029.388261.274.4FJSwV" target="_blank" rel="external">é˜¿é‡Œäº‘</a> - æ”¯æŒå¼¹æ€§è®¡ç®—ï¼Œæ•°æ®åº“ï¼Œå­˜å‚¨ä¸CDNï¼Œç½‘ç»œï¼Œåº”ç”¨æœåŠ¡ï¼ŒåŸŸåä¸ç½‘ç«™ç­‰ç±»åˆ«çš„å†…å®¹ï¼Œå¹¶æä¾›äº†ç›¸å…³SDKã€‚</li>
<li><a href="https://cloud.baidu.com/doc/index.html" target="_blank" rel="external">ç™¾åº¦äº‘</a> - æ”¯æŒè®¡ç®—å’Œç½‘ç»œï¼Œå­˜å‚¨å’ŒCDNï¼Œæ•°æ®åº“ï¼Œå®‰å…¨å’Œç®¡ç†ï¼Œæ•°æ®åˆ†æï¼Œæ™ºèƒ½å¤šåª’ä½“æœåŠ¡ï¼Œç‰©è”ç½‘æœåŠ¡ï¼Œäººå·¥æ™ºèƒ½ï¼Œåº”ç”¨æœåŠ¡ï¼Œç½‘ç«™æœåŠ¡ï¼Œæ•°å­—è¥é”€æœåŠ¡ç­‰å†…å®¹ï¼Œå¹¶æä¾›ç›¸å…³çš„SDKã€‚</li>
<li><a href="http://www.bmob.cn/" target="_blank" rel="external">Bmob</a> - æ”¯æŒäº‘æ•°æ®åº“ï¼Œå®¹å™¨æœåŠ¡ï¼Œæ¶ˆæ¯æ¨é€ï¼Œæ–‡ä»¶å­˜å‚¨ï¼ŒçŸ­ä¿¡éªŒè¯ç ï¼ŒåŠæ—¶é€šè®¯ï¼Œäº‘ç«¯é€»è¾‘ï¼Œå®šæ—¶ä»»åŠ¡ï¼Œåœ°ç†ä½ç½®ç­‰ã€‚</li>
<li><a href="https://leancloud.cn/" target="_blank" rel="external">LeanCloud</a> -     æ”¯æŒäº‘å­˜å‚¨ï¼Œæ•°æ®åˆ†æï¼Œç”¨æˆ·å…³ç³»ï¼Œå®æ—¶é€šè®¯ï¼Œæ¶ˆæ¯æ¨é€ï¼Œç§»åŠ¨ç»Ÿè®¡ç­‰ã€‚</li>
<li><a href="http://www.qiniu.com/" target="_blank" rel="external">ä¸ƒç‰›äº‘</a> - æ”¯æŒå¯¹è±¡å­˜å‚¨ï¼ŒèåˆCDNï¼Œç›´æ’­äº‘ï¼Œæ•°æ®å¤„ç†ç­‰ã€‚</li>
<li><a href="https://www.qcloud.com/doc/api" target="_blank" rel="external">è…¾è®¯äº‘</a> - æ”¯æŒè®¡ç®—ï¼Œç½‘ç»œï¼Œå­˜å‚¨ä¸CDNï¼Œæ•°æ®åº“ï¼Œå®‰å…¨æœåŠ¡ï¼Œç›‘æ§ä¸ç®¡ç†ï¼ŒåŸŸåæœåŠ¡ï¼Œè§†é¢‘æœåŠ¡ï¼Œå¤§æ•°æ®ä¸AIç­‰å†…å®¹ï¼Œæä¾›ç›¸å…³SDKã€‚</li>
<li><a href="https://www.upyun.com/" target="_blank" rel="external">åˆæ‹äº‘</a> - æ”¯æŒ CDNã€äº‘å­˜å‚¨ã€ç›´æ’­äº‘ã€ç‚¹æ’­äº‘ã€SSLè¯ä¹¦æœåŠ¡ã€äº‘å¤„ç†ã€æµé‡è¥é”€ç­‰ã€‚</li>
<li><a href="https://www.wilddog.com/" target="_blank" rel="external">é‡ç‹—</a> - æ”¯æŒå®æ—¶æ•°æ®åŒæ­¥ï¼Œå®æ—¶è§†é¢‘é€šè¯ï¼ŒåŠæ—¶é€šè®¯ï¼ŒçŸ­ä¿¡ï¼Œèº«ä»½è®¤è¯ç­‰ã€‚</li>
</ul>
<h4 id="è¯­éŸ³è¯†åˆ«"><a href="#è¯­éŸ³è¯†åˆ«" class="headerlink" title="è¯­éŸ³è¯†åˆ«"></a>è¯­éŸ³è¯†åˆ«</h4><ul>
<li><a href="http://yuyin.baidu.com/" target="_blank" rel="external">ç™¾åº¦è¯­éŸ³</a> - æ”¯æŒå…¨å¹³å°REST API, ç¦»çº¿åœ¨çº¿èåˆæ¨¡å¼ï¼Œæ·±åº¦è¯­ä¹‰è§£æï¼Œåœºæ™¯è¯†åˆ«å®šåˆ¶ï¼Œè‡ªå®šä¹‰ä¸Šä¼ è¯­æ–™ã€è®­ç»ƒæ¨¡å‹ï¼ŒåŸºç¡€æœåŠ¡æ°¸ä¹…å…è´¹ã€‚æä¾›ç›¸åº”SDKå’ŒDemoåº”ç”¨ã€‚</li>
<li><a href="http://openspeech.sogou.com/Sogou/php/index.php" target="_blank" rel="external">æœç‹—è¯­éŸ³äº‘å¼€æ”¾å¹³å°</a> - æ”¯æŒåœ¨çº¿/ç¦»çº¿è¯­éŸ³è¯†åˆ«ï¼Œåœ¨çº¿å¬æ­Œè¯†æ›²ï¼Œç¦»çº¿è¯­éŸ³åˆæˆç­‰å†…å®¹ã€‚æä¾›ç›¸åº”å¹³å°SDKã€‚</li>
<li><a href="http://www.xfyun.cn/" target="_blank" rel="external">è®¯é£å¼€æ”¾å¹³å°</a> - æ”¯æŒè¯­éŸ³å¬å†™/è½¬å†™ï¼Œåœ¨çº¿/ç¦»çº¿å‘½ä»¤è¯è¯†åˆ«ï¼Œè¯­éŸ³å”¤é†’ç­‰å†…å®¹ï¼Œå¹³å°æ”¯æŒå¹¿æ³›ï¼Œæä¾›ç›¸åº”SDKã€‚</li>
</ul>
<h4 id="æ‚å¿—"><a href="#æ‚å¿—" class="headerlink" title="æ‚å¿—"></a>æ‚å¿—</h4><ul>
<li><a href="https://github.com/ZongweiBai/DoubanOpenDaily/blob/b87473b90911e687d291e847b133b5c4c4a700a3/app/src/main/java/com/monosky/daily/constant/APIConstData.java" target="_blank" rel="external">è±†ç“£ä¸€åˆ»(éå®˜æ–¹)</a> - æ”¯æŒè·å–æŒ‡å®šæ—¥æœŸæ–‡ç« åˆ—è¡¨ï¼Œæ ç›®æ€»è§ˆï¼Œæ¨èä½œè€…ï¼Œä½œè€…ä¿¡æ¯ï¼Œä½œè€…æ›´å¤šæ–‡ç« ä¿¡æ¯ï¼Œæ ç›®æ–‡ç« åˆ—è¡¨åŠç¿»é¡µï¼Œæ–‡ç« è¯„è®ºåŠçƒ­é—¨è¯„è®ºåˆ—è¡¨ã€‚ #éå®˜æ–¹</li>
<li><a href="https://github.com/jokermonn/-Api/blob/master/ONEv3.5.0~.md" target="_blank" rel="external">Oneä¸€ä¸ª(éå®˜æ–¹)</a> - æ”¯æŒè·å–é¦–é¡µå›¾ç‰‡ï¼Œæ–‡ç« ï¼ŒéŸ³ä¹åŠç”µå½±ã€‚ #éå®˜æ–¹</li>
<li><a href="https://github.com/izzyleung/ZhihuDailyPurify/wiki/%E7%9F%A5%E4%B9%8E%E6%97%A5%E6%8A%A5-API-%E5%88%86%E6%9E%90" target="_blank" rel="external">çŸ¥ä¹æ—¥æŠ¥(éå®˜æ–¹)</a> - æ”¯æŒè·å–ç•Œé¢å¯åŠ¨å›¾åƒï¼Œè½¯ä»¶ç‰ˆæœ¬æŸ¥è¯¢ï¼Œæœ€æ–°æ¶ˆæ¯ï¼Œæ¶ˆæ¯å†…å®¹è·å–ä¸ç¦»çº¿ä¸‹è½½ï¼Œè¿‡å¾€æ¶ˆæ¯ï¼Œæ–°é—»é¢å¤–æ¶ˆæ¯ï¼Œæ–°é—»å¯¹åº”é•¿/çŸ­è¯„è®ºæŸ¥çœ‹ï¼Œä¸»é¢˜æ—¥æŠ¥åˆ—è¡¨ï¼Œä¸»é¢˜æ—¥æŠ¥å†…å®¹ï¼Œçƒ­é—¨æ¶ˆæ¯ï¼Œæ ç›®æ€»è§ˆï¼Œæ ç›®å…·ä½“æ¶ˆæ¯ï¼Œæ–°é—»çš„æ¨èè€…ï¼ŒæŸä¸ªä¸“æ ä¹‹å‰çš„æ–°é—»ï¼ŒEditorçš„ä¸»é¡µç­‰ã€‚ #éå®˜æ–¹</li>
<li><a href="https://github.com/marktony/zhuanlan/wiki" target="_blank" rel="external">çŸ¥ä¹ä¸“æ (éå®˜æ–¹)</a> - æ”¯æŒè·å–æŒ‡å®šä¸“æ çš„ä¿¡æ¯ï¼ŒæŒ‡å®šä¸“æ çš„æ–‡ç« åˆ—è¡¨ï¼ŒæŒ‡å®šçš„æ–‡ç« å†…å®¹ï¼Œè¯„è®ºåˆ—è¡¨ï¼Œç‚¹èµä¿¡æ¯ã€‚ #éå®˜æ–¹</li>
</ul>
<h4 id="ç»¼åˆ"><a href="#ç»¼åˆ" class="headerlink" title="ç»¼åˆ"></a>ç»¼åˆ</h4><ul>
<li><a href="http://www.avatardata.cn/Docs" target="_blank" rel="external">é˜¿å‡¡è¾¾æ•°æ®</a> - æ”¯æŒé‡‘èè‚¡ç¥¨ï¼Œå……å€¼è®¤è¯ï¼Œä¾¿æ°‘ç±»ï¼Œæ–°é—»æ–‡ç« ï¼ŒåŒ»è¯äº¤é€šï¼Œç§‘æ•™æ–‡è‰ºï¼Œåˆ›æ„æ•°æ®ï¼ŒåŠæ—¶é€šè®¯ç­‰å†…å®¹ã€‚</li>
<li><a href="http://www.alidayu.com/" target="_blank" rel="external">é˜¿é‡Œå¤§äº</a> - æ”¯æŒéªŒè¯ç ï¼ŒçŸ­ä¿¡é€šçŸ¥ï¼Œè¯­éŸ³é€šçŸ¥ï¼Œæµé‡é’±åŒ…å……å€¼ï¼Œç§å¯†ä¸“çº¿ï¼Œç¾¤å‘åŠ©æ‰‹ç­‰å†…å®¹ã€‚</li>
<li><a href="https://www.apix.cn/" target="_blank" rel="external">APiX</a> - æ”¯æŒåŸºç¡€å¾ä¿¡æ•°æ®ï¼Œä¿¡ç”¨åˆ†ææœåŠ¡ï¼Œæ”¯ä»˜ç¼´è´¹æ¥å£ç­‰æ•°æ®ï¼Œéƒ¨åˆ†å…è´¹ã€‚</li>
<li><a href="http://apistore.baidu.com/" target="_blank" rel="external">ç™¾åº¦API STORE</a> - æ”¯æŒå¤šç§ç±»å‹æ•°æ®ï¼Œéƒ¨åˆ†å…è´¹ï¼Œæä¾›SDKã€‚</li>
<li><a href="http://www.haoservice.com/" target="_blank" rel="external">HaoService</a> - æ”¯æŒå¤šç§ç±»å‹æ•°æ®ã€‚</li>
<li><a href="https://www.juhe.cn/" target="_blank" rel="external">èšåˆæ•°æ®</a> - æ”¯æŒå¤šç§ç±»å‹æ•°æ®ï¼Œéƒ¨åˆ†å…è´¹ã€‚</li>
<li><a href="https://m.datayes.com/" target="_blank" rel="external">é€šè”æ•°æ®</a> - æä¾›é‡‘èç±»æ•°æ®ï¼Œæ”¯æŒå…è´¹è¯•ç”¨ã€‚</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä¸­å›½å›½å†…å¯ç”¨APIåˆé›†&quot;&gt;&lt;a href=&quot;#ä¸­å›½å›½å†…å¯ç”¨APIåˆé›†&quot; class=&quot;headerlink&quot; title=&quot;ä¸­å›½å›½å†…å¯ç”¨APIåˆé›†&quot;&gt;&lt;/a&gt;ä¸­å›½å›½å†…å¯ç”¨APIåˆé›†&lt;/h1&gt;&lt;h3 id=&quot;ç›®å½•&quot;&gt;&lt;a href=&quot;#ç›®å½•&quot; class=&quot;head
    
    </summary>
    
    
      <category term="API" scheme="https://microzz.com/tags/API/"/>
    
      <category term="å¼€å‘è€…" scheme="https://microzz.com/tags/%E5%BC%80%E5%8F%91%E8%80%85/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯é¢è¯•é¢˜</title>
    <link href="https://microzz.com/2017/02/01/fe-interview/"/>
    <id>https://microzz.com/2017/02/01/fe-interview/</id>
    <published>2017-02-01T07:26:06.000Z</published>
    <updated>2017-06-17T15:51:22.136Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰ç«¯é¢è¯•é¢˜"><a href="#å‰ç«¯é¢è¯•é¢˜" class="headerlink" title="å‰ç«¯é¢è¯•é¢˜"></a>å‰ç«¯é¢è¯•é¢˜</h1><h2 id="ä¸€äº›å¼€æ”¾æ€§é¢˜ç›®"><a href="#ä¸€äº›å¼€æ”¾æ€§é¢˜ç›®" class="headerlink" title="ä¸€äº›å¼€æ”¾æ€§é¢˜ç›®"></a>ä¸€äº›å¼€æ”¾æ€§é¢˜ç›®</h2><pre><code>1.è‡ªæˆ‘ä»‹ç»ï¼šé™¤äº†åŸºæœ¬ä¸ªäººä¿¡æ¯ä»¥å¤–ï¼Œé¢è¯•å®˜æ›´æƒ³å¬çš„æ˜¯ä½ ä¸ä¼—ä¸åŒçš„åœ°æ–¹å’Œä½ çš„ä¼˜åŠ¿ã€‚

2.é¡¹ç›®ä»‹ç»

3.å¦‚ä½•çœ‹å¾…å‰ç«¯å¼€å‘ï¼Ÿ

4.å¹³æ—¶æ˜¯å¦‚ä½•å­¦ä¹ å‰ç«¯å¼€å‘çš„ï¼Ÿ

5.æœªæ¥ä¸‰åˆ°äº”å¹´çš„è§„åˆ’æ˜¯æ€æ ·çš„ï¼Ÿ
</code></pre><h2 id="positionçš„å€¼ï¼Œ-relativeå’Œabsoluteåˆ†åˆ«æ˜¯ç›¸å¯¹äºè°è¿›è¡Œå®šä½çš„ï¼Ÿ"><a href="#positionçš„å€¼ï¼Œ-relativeå’Œabsoluteåˆ†åˆ«æ˜¯ç›¸å¯¹äºè°è¿›è¡Œå®šä½çš„ï¼Ÿ" class="headerlink" title="positionçš„å€¼ï¼Œ relativeå’Œabsoluteåˆ†åˆ«æ˜¯ç›¸å¯¹äºè°è¿›è¡Œå®šä½çš„ï¼Ÿ"></a>positionçš„å€¼ï¼Œ relativeå’Œabsoluteåˆ†åˆ«æ˜¯ç›¸å¯¹äºè°è¿›è¡Œå®šä½çš„ï¼Ÿ</h2><ul>
<li><p><code>absolute</code> :ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œ ç›¸å¯¹äºæœ€è¿‘ä¸€çº§çš„ å®šä½ä¸æ˜¯ static çš„çˆ¶å…ƒç´ æ¥è¿›è¡Œå®šä½ã€‚</p>
</li>
<li><p><code>fixed</code> ï¼ˆè€IEä¸æ”¯æŒï¼‰ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œé€šå¸¸ç›¸å¯¹äºæµè§ˆå™¨çª—å£æˆ– frame è¿›è¡Œå®šä½ã€‚</p>
</li>
<li><p><code>relative</code> ç”Ÿæˆç›¸å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºå…¶åœ¨æ™®é€šæµä¸­çš„ä½ç½®è¿›è¡Œå®šä½ã€‚</p>
</li>
<li><p><code>static</code>  é»˜è®¤å€¼ã€‚æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­</p>
</li>
<li><p><code>sticky</code> ç”Ÿæˆç²˜æ€§å®šä½çš„å…ƒç´ ï¼Œå®¹å™¨çš„ä½ç½®æ ¹æ®æ­£å¸¸æ–‡æ¡£æµè®¡ç®—å¾—å‡º</p>
</li>
</ul>
<p><br></p>
<h2 id="å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜"><a href="#å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜" class="headerlink" title="å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜"></a>å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜</h2><blockquote>
<p>JSONPï¼š</p>
</blockquote>
<p>åŸç†æ˜¯ï¼šåŠ¨æ€æ’å…¥<code>script</code>æ ‡ç­¾ï¼Œé€šè¿‡<code>script</code>æ ‡ç­¾å¼•å…¥ä¸€ä¸ª<code>js</code>æ–‡ä»¶ï¼Œè¿™ä¸ªjsæ–‡ä»¶è½½å…¥æˆåŠŸåä¼šæ‰§è¡Œæˆ‘ä»¬åœ¨urlå‚æ•°ä¸­æŒ‡å®šçš„å‡½æ•°ï¼Œå¹¶ä¸”ä¼šæŠŠæˆ‘ä»¬éœ€è¦çš„<code>json</code>æ•°æ®ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚</p>
<p>ç”±äºåŒæºç­–ç•¥çš„é™åˆ¶ï¼Œ<code>XmlHttpRequest</code>åªå…è®¸è¯·æ±‚å½“å‰æºï¼ˆåŸŸåã€åè®®ã€ç«¯å£ï¼‰çš„èµ„æºï¼Œä¸ºäº†å®ç°è·¨åŸŸè¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡<code>script</code>æ ‡ç­¾å®ç°è·¨åŸŸè¯·æ±‚ï¼Œç„¶ååœ¨æœåŠ¡ç«¯è¾“å‡ºJSONæ•°æ®å¹¶æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œä»è€Œè§£å†³äº†è·¨åŸŸçš„æ•°æ®è¯·æ±‚ã€‚</p>
<p>ä¼˜ç‚¹æ˜¯å…¼å®¹æ€§å¥½ï¼Œç®€å•æ˜“ç”¨ï¼Œæ”¯æŒæµè§ˆå™¨ä¸æœåŠ¡å™¨åŒå‘é€šä¿¡ã€‚ç¼ºç‚¹æ˜¯åªæ”¯æŒGETè¯·æ±‚ã€‚</p>
<p><code>JSONP</code>ï¼š<code>json+padding</code>ï¼ˆå†…å¡«å……ï¼‰ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æŠŠJSONå¡«å……åˆ°ä¸€ä¸ªç›’å­é‡Œ</p>
<pre><code class="js">&lt;script&gt;
    function createJs(sUrl){

        var oScript = document.createElement(&#39;script&#39;);
        oScript.type = &#39;text/javascript&#39;;
        oScript.src = sUrl;
        document.getElementsByTagName(&#39;head&#39;)[0].appendChild(oScript);
    }

    createJs(&#39;jsonp.js&#39;);

    box({
       &#39;name&#39;: &#39;test&#39;
    });

    function box(json){
        alert(json.name);
    }
&lt;/script&gt;
</code></pre>
<blockquote>
<p>CORS</p>
</blockquote>
<p>æœåŠ¡å™¨ç«¯å¯¹äº<code>CORS</code>çš„æ”¯æŒï¼Œä¸»è¦å°±æ˜¯é€šè¿‡è®¾ç½®<code>Access-Control-Allow-Origin</code>æ¥è¿›è¡Œçš„ã€‚å¦‚æœæµè§ˆå™¨æ£€æµ‹åˆ°ç›¸åº”çš„è®¾ç½®ï¼Œå°±å¯ä»¥å…è®¸<code>Ajax</code>è¿›è¡Œè·¨åŸŸçš„è®¿é—®ã€‚</p>
<blockquote>
<p>é€šè¿‡ä¿®æ”¹document.domainæ¥è·¨å­åŸŸ</p>
</blockquote>
<p>å°†å­åŸŸå’Œä¸»åŸŸçš„<code>document.domain</code>è®¾ä¸ºåŒä¸€ä¸ªä¸»åŸŸ.å‰ææ¡ä»¶ï¼šè¿™ä¸¤ä¸ªåŸŸåå¿…é¡»å±äºåŒä¸€ä¸ªåŸºç¡€åŸŸå!è€Œä¸”æ‰€ç”¨çš„åè®®ï¼Œç«¯å£éƒ½è¦ä¸€è‡´ï¼Œå¦åˆ™æ— æ³•åˆ©ç”¨<code>document.domain</code>è¿›è¡Œè·¨åŸŸ</p>
<p>ä¸»åŸŸç›¸åŒçš„ä½¿ç”¨<code>document.domain</code></p>
<blockquote>
<p>ä½¿ç”¨window.nameæ¥è¿›è¡Œè·¨åŸŸ</p>
</blockquote>
<p><code>window</code>å¯¹è±¡æœ‰ä¸ª<code>name</code>å±æ€§ï¼Œè¯¥å±æ€§æœ‰ä¸ªç‰¹å¾ï¼šå³åœ¨ä¸€ä¸ªçª—å£(window)çš„ç”Ÿå‘½å‘¨æœŸå†…,çª—å£è½½å…¥çš„æ‰€æœ‰çš„é¡µé¢éƒ½æ˜¯å…±äº«ä¸€ä¸ª<code>window.name</code>çš„ï¼Œæ¯ä¸ªé¡µé¢å¯¹<code>window.name</code>éƒ½æœ‰è¯»å†™çš„æƒé™ï¼Œ<code>window.name</code>æ˜¯æŒä¹…å­˜åœ¨ä¸€ä¸ªçª—å£è½½å…¥è¿‡çš„æ‰€æœ‰é¡µé¢ä¸­çš„</p>
<blockquote>
<p>ä½¿ç”¨HTML5ä¸­æ–°å¼•è¿›çš„<code>window.postMessage</code>æ–¹æ³•æ¥è·¨åŸŸä¼ é€æ•°æ®</p>
</blockquote>
<p>è¿˜æœ‰flashã€åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®ä»£ç†é¡µé¢ç­‰è·¨åŸŸæ–¹å¼ã€‚ä¸ªäººè®¤ä¸º<code>window.name</code>çš„æ–¹æ³•æ—¢ä¸å¤æ‚ï¼Œä¹Ÿèƒ½å…¼å®¹åˆ°å‡ ä¹æ‰€æœ‰æµè§ˆå™¨ï¼Œè¿™çœŸæ˜¯æå¥½çš„ä¸€ç§è·¨åŸŸæ–¹æ³•ã€‚</p>
<h2 id="XMLå’ŒJSONçš„åŒºåˆ«"><a href="#XMLå’ŒJSONçš„åŒºåˆ«" class="headerlink" title="XMLå’ŒJSONçš„åŒºåˆ«"></a>XMLå’ŒJSONçš„åŒºåˆ«</h2><p>(1).æ•°æ®ä½“ç§¯æ–¹é¢ã€‚</p>
<p>JSONç›¸å¯¹äºXMLæ¥è®²ï¼Œæ•°æ®çš„ä½“ç§¯å°ï¼Œä¼ é€’çš„é€Ÿåº¦æ›´å¿«äº›ã€‚</p>
<p>(2).æ•°æ®äº¤äº’æ–¹é¢ã€‚</p>
<p>JSONä¸JavaScriptçš„äº¤äº’æ›´åŠ æ–¹ä¾¿ï¼Œæ›´å®¹æ˜“è§£æå¤„ç†ï¼Œæ›´å¥½çš„æ•°æ®äº¤äº’ã€‚</p>
<p>(3).æ•°æ®æè¿°æ–¹é¢ã€‚</p>
<p>JSONå¯¹æ•°æ®çš„æè¿°æ€§æ¯”XMLè¾ƒå·®ã€‚</p>
<p>(4).ä¼ è¾“é€Ÿåº¦æ–¹é¢ã€‚</p>
<p>JSONçš„é€Ÿåº¦è¦è¿œè¿œå¿«äºXMLã€‚</p>
<h2 id="è°ˆè°ˆä½ å¯¹webpackçš„çœ‹æ³•"><a href="#è°ˆè°ˆä½ å¯¹webpackçš„çœ‹æ³•" class="headerlink" title="è°ˆè°ˆä½ å¯¹webpackçš„çœ‹æ³•"></a>è°ˆè°ˆä½ å¯¹webpackçš„çœ‹æ³•</h2><p><code>WebPack</code> æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>WebPack</code>ç®¡ç†ä½ çš„æ¨¡å—ä¾èµ–ï¼Œå¹¶ç¼–ç»è¾“å‡ºæ¨¡å—ä»¬æ‰€éœ€çš„é™æ€æ–‡ä»¶ã€‚å®ƒèƒ½å¤Ÿå¾ˆå¥½åœ°ç®¡ç†ã€æ‰“åŒ…Webå¼€å‘ä¸­æ‰€ç”¨åˆ°çš„<code>HTMLã€Javascriptã€CSS</code>ä»¥åŠå„ç§é™æ€æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€å­—ä½“ç­‰ï¼‰ï¼Œè®©å¼€å‘è¿‡ç¨‹æ›´åŠ é«˜æ•ˆã€‚å¯¹äºä¸åŒç±»å‹çš„èµ„æºï¼Œ<code>webpack</code>æœ‰å¯¹åº”çš„æ¨¡å—åŠ è½½å™¨ã€‚<code>webpack</code>æ¨¡å—æ‰“åŒ…å™¨ä¼šåˆ†ææ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œæœ€å ç”Ÿæˆäº†ä¼˜åŒ–ä¸”åˆå¹¶åçš„é™æ€èµ„æºã€‚</p>
<p><code>webpack</code>çš„ä¸¤å¤§ç‰¹è‰²ï¼š</p>
<pre><code>1.code splittingï¼ˆå¯ä»¥è‡ªåŠ¨å®Œæˆï¼‰

2.loader å¯ä»¥å¤„ç†å„ç§ç±»å‹çš„é™æ€æ–‡ä»¶ï¼Œå¹¶ä¸”æ”¯æŒä¸²è”æ“ä½œ
</code></pre><p><code>webpack</code> æ˜¯ä»¥<code>commonJS</code>çš„å½¢å¼æ¥ä¹¦å†™è„šæœ¬æ»´ï¼Œä½†å¯¹ <code>AMD/CMD</code> çš„æ”¯æŒä¹Ÿå¾ˆå…¨é¢ï¼Œæ–¹ä¾¿æ—§é¡¹ç›®è¿›è¡Œä»£ç è¿ç§»ã€‚</p>
<p><code>webpack</code>å…·æœ‰<code>requireJs</code>å’Œ<code>browserify</code>çš„åŠŸèƒ½ï¼Œä½†ä»æœ‰å¾ˆå¤šè‡ªå·±çš„æ–°ç‰¹æ€§ï¼š</p>
<pre><code>1. å¯¹ CommonJS ã€ AMD ã€ES6çš„è¯­æ³•åšäº†å…¼å®¹

2. å¯¹jsã€cssã€å›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶éƒ½æ”¯æŒæ‰“åŒ…

3. ä¸²è”å¼æ¨¡å—åŠ è½½å™¨ä»¥åŠæ’ä»¶æœºåˆ¶ï¼Œè®©å…¶å…·æœ‰æ›´å¥½çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ï¼Œä¾‹å¦‚æä¾›å¯¹CoffeeScriptã€ES6çš„æ”¯æŒ

4. æœ‰ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶webpack.config.js

5. å¯ä»¥å°†ä»£ç åˆ‡å‰²æˆä¸åŒçš„chunkï¼Œå®ç°æŒ‰éœ€åŠ è½½ï¼Œé™ä½äº†åˆå§‹åŒ–æ—¶é—´

6. æ”¯æŒ SourceUrls å’Œ SourceMapsï¼Œæ˜“äºè°ƒè¯•

7. å…·æœ‰å¼ºå¤§çš„Pluginæ¥å£ï¼Œå¤§å¤šæ˜¯å†…éƒ¨æ’ä»¶ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒçµæ´»

8.webpack ä½¿ç”¨å¼‚æ­¥ IO å¹¶å…·æœ‰å¤šçº§ç¼“å­˜ã€‚è¿™ä½¿å¾— webpack å¾ˆå¿«ä¸”åœ¨å¢é‡ç¼–è¯‘ä¸Šæ›´åŠ å¿«
</code></pre><h2 id="è¯´è¯´TCPä¼ è¾“çš„ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹ç­–ç•¥"><a href="#è¯´è¯´TCPä¼ è¾“çš„ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹ç­–ç•¥" class="headerlink" title="è¯´è¯´TCPä¼ è¾“çš„ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹ç­–ç•¥"></a>è¯´è¯´TCPä¼ è¾“çš„ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹ç­–ç•¥</h2><p> ä¸ºäº†å‡†ç¡®æ— è¯¯åœ°æŠŠæ•°æ®é€è¾¾ç›®æ ‡å¤„ï¼Œ<code>TCP</code>åè®®é‡‡ç”¨äº†ä¸‰æ¬¡æ¡æ‰‹ç­–ç•¥ã€‚ç”¨TCPåè®®æŠŠæ•°æ®åŒ…é€å‡ºå»åï¼Œ<code>TCP</code>ä¸ä¼šå¯¹ä¼ é€    åçš„æƒ…å†µç½®ä¹‹ä¸ç†ï¼Œå®ƒä¸€å®šä¼šå‘å¯¹æ–¹ç¡®è®¤æ˜¯å¦æˆåŠŸé€è¾¾ã€‚æ¡æ‰‹è¿‡ç¨‹ä¸­ä½¿ç”¨äº†TCPçš„æ ‡å¿—ï¼š<code>SYN</code>å’Œ<code>ACK</code>ã€‚</p>
<p>å‘é€ç«¯é¦–å…ˆå‘é€ä¸€ä¸ªå¸¦<code>SYN</code>æ ‡å¿—çš„æ•°æ®åŒ…ç»™å¯¹æ–¹ã€‚æ¥æ”¶ç«¯æ”¶åˆ°åï¼Œå›ä¼ ä¸€ä¸ªå¸¦æœ‰<code>SYN/ACK</code>æ ‡å¿—çš„æ•°æ®åŒ…ä»¥ç¤ºä¼ è¾¾ç¡®è®¤ä¿¡æ¯ã€‚<br>æœ€åï¼Œå‘é€ç«¯å†å›ä¼ ä¸€ä¸ªå¸¦<code>ACK</code>æ ‡å¿—çš„æ•°æ®åŒ…ï¼Œä»£è¡¨â€œæ¡æ‰‹â€ç»“æŸã€‚<br>è‹¥åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­æŸä¸ªé˜¶æ®µè«åä¸­æ–­ï¼Œ<code>TCP</code>åè®®ä¼šå†æ¬¡ä»¥ç›¸åŒçš„é¡ºåºå‘é€ç›¸åŒçš„æ•°æ®åŒ…ã€‚</p>
<p><br></p>
<blockquote>
<p>æ–­å¼€ä¸€ä¸ªTCPè¿æ¥åˆ™éœ€è¦â€œå››æ¬¡æ¡æ‰‹â€ï¼š</p>
</blockquote>
<ul>
<li><p>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šä¸»åŠ¨å…³é—­æ–¹å‘é€ä¸€ä¸ª<code>FIN</code>ï¼Œç”¨æ¥å…³é—­ä¸»åŠ¨æ–¹åˆ°è¢«åŠ¨å…³é—­æ–¹çš„æ•°æ®ä¼ é€ï¼Œä¹Ÿå°±æ˜¯ä¸»åŠ¨å…³é—­æ–¹å‘Šè¯‰è¢«åŠ¨å…³é—­æ–¹ï¼šæˆ‘å·²ç»ä¸ ä¼šå†ç»™ä½ å‘æ•°æ®äº†(å½“ç„¶ï¼Œåœ¨finåŒ…ä¹‹å‰å‘é€å‡ºå»çš„æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°å¯¹åº”çš„ackç¡®è®¤æŠ¥æ–‡ï¼Œä¸»åŠ¨å…³é—­æ–¹ä¾ç„¶ä¼šé‡å‘è¿™äº›æ•°æ®)ï¼Œä½†æ˜¯ï¼Œæ­¤æ—¶ä¸»åŠ¨å…³é—­æ–¹è¿˜å¯ ä»¥æ¥å—æ•°æ®ã€‚</p>
</li>
<li><p>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šè¢«åŠ¨å…³é—­æ–¹æ”¶åˆ°<code>FIN</code>åŒ…åï¼Œå‘é€ä¸€ä¸ª<code>ACK</code>ç»™å¯¹æ–¹ï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·<code>+1</code>ï¼ˆä¸<code>SYN</code>ç›¸åŒï¼Œä¸€ä¸ª<code>FIN</code>å ç”¨ä¸€ä¸ªåºå·ï¼‰ã€‚</p>
</li>
<li><p>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šè¢«åŠ¨å…³é—­æ–¹å‘é€ä¸€ä¸ª<code>FIN</code>ï¼Œç”¨æ¥å…³é—­è¢«åŠ¨å…³é—­æ–¹åˆ°ä¸»åŠ¨å…³é—­æ–¹çš„æ•°æ®ä¼ é€ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰ä¸»åŠ¨å…³é—­æ–¹ï¼Œæˆ‘çš„æ•°æ®ä¹Ÿå‘é€å®Œäº†ï¼Œä¸ä¼šå†ç»™ä½ å‘æ•°æ®äº†ã€‚</p>
</li>
<li><p>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šä¸»åŠ¨å…³é—­æ–¹æ”¶åˆ°<code>FIN</code>åï¼Œå‘é€ä¸€ä¸ª<code>ACK</code>ç»™è¢«åŠ¨å…³é—­æ–¹ï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼Œè‡³æ­¤ï¼Œå®Œæˆå››æ¬¡æŒ¥æ‰‹ã€‚</p>
</li>
</ul>
<h2 id="TCPå’ŒUDPçš„åŒºåˆ«"><a href="#TCPå’ŒUDPçš„åŒºåˆ«" class="headerlink" title="TCPå’ŒUDPçš„åŒºåˆ«"></a>TCPå’ŒUDPçš„åŒºåˆ«</h2><p><code>TCP</code>ï¼ˆTransmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰æ˜¯åŸºäºè¿æ¥çš„åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ­£å¼æ”¶å‘æ•°æ®å‰ï¼Œå¿…é¡»å’Œå¯¹æ–¹å»ºç«‹å¯é çš„è¿æ¥ã€‚ä¸€ä¸ª<code>TCP</code>è¿æ¥å¿…é¡»è¦ç»è¿‡ä¸‰æ¬¡â€œå¯¹è¯â€æ‰èƒ½å»ºç«‹èµ·æ¥</p>
<p><code>UDP</code>ï¼ˆUser Data Protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰æ˜¯ä¸TCPç›¸å¯¹åº”çš„åè®®ã€‚å®ƒæ˜¯é¢å‘éè¿æ¥çš„åè®®ï¼Œå®ƒä¸ä¸å¯¹æ–¹å»ºç«‹è¿æ¥ï¼Œè€Œæ˜¯ç›´æ¥å°±æŠŠæ•°æ®åŒ…å‘é€è¿‡å»ï¼<br>  UDPé€‚ç”¨äºä¸€æ¬¡åªä¼ é€å°‘é‡æ•°æ®ã€å¯¹å¯é æ€§è¦æ±‚ä¸é«˜çš„åº”ç”¨ç¯å¢ƒã€‚</p>
<h2 id="è¯´è¯´ä½ å¯¹ä½œç”¨åŸŸé“¾çš„ç†è§£"><a href="#è¯´è¯´ä½ å¯¹ä½œç”¨åŸŸé“¾çš„ç†è§£" class="headerlink" title="è¯´è¯´ä½ å¯¹ä½œç”¨åŸŸé“¾çš„ç†è§£"></a>è¯´è¯´ä½ å¯¹ä½œç”¨åŸŸé“¾çš„ç†è§£</h2><p>ä½œç”¨åŸŸé“¾çš„ä½œç”¨æ˜¯ä¿è¯æ‰§è¡Œç¯å¢ƒé‡Œæœ‰æƒè®¿é—®çš„å˜é‡å’Œå‡½æ•°æ˜¯æœ‰åºçš„ï¼Œä½œç”¨åŸŸé“¾çš„å˜é‡åªèƒ½å‘ä¸Šè®¿é—®ï¼Œå˜é‡è®¿é—®åˆ°<code>window</code>å¯¹è±¡å³è¢«ç»ˆæ­¢ï¼Œä½œç”¨åŸŸé“¾å‘ä¸‹è®¿é—®å˜é‡æ˜¯ä¸è¢«å…è®¸çš„ã€‚</p>
<h2 id="åˆ›å»ºajaxè¿‡ç¨‹"><a href="#åˆ›å»ºajaxè¿‡ç¨‹" class="headerlink" title="åˆ›å»ºajaxè¿‡ç¨‹"></a>åˆ›å»ºajaxè¿‡ç¨‹</h2><pre><code class="js">(1)åˆ›å»ºXMLHttpRequestå¯¹è±¡,ä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªå¼‚æ­¥è°ƒç”¨å¯¹è±¡.

(2)åˆ›å»ºä¸€ä¸ªæ–°çš„HTTPè¯·æ±‚,å¹¶æŒ‡å®šè¯¥HTTPè¯·æ±‚çš„æ–¹æ³•ã€URLåŠéªŒè¯ä¿¡æ¯.

(3)è®¾ç½®å“åº”HTTPè¯·æ±‚çŠ¶æ€å˜åŒ–çš„å‡½æ•°.

(4)å‘é€HTTPè¯·æ±‚.

(5)è·å–å¼‚æ­¥è°ƒç”¨è¿”å›çš„æ•°æ®.

(6)ä½¿ç”¨JavaScriptå’ŒDOMå®ç°å±€éƒ¨åˆ·æ–°.
</code></pre>
<h2 id="æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§"><a href="#æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§" class="headerlink" title="æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§"></a>æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§</h2><p>æ¸è¿›å¢å¼º ï¼šé’ˆå¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨è¿›è¡Œæ„å»ºé¡µé¢ï¼Œä¿è¯æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œç„¶åå†é’ˆå¯¹é«˜çº§æµè§ˆå™¨è¿›è¡Œæ•ˆæœã€äº¤äº’ç­‰æ”¹è¿›å’Œè¿½åŠ åŠŸèƒ½è¾¾åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>ä¼˜é›…é™çº§ ï¼šä¸€å¼€å§‹å°±æ„å»ºå®Œæ•´çš„åŠŸèƒ½ï¼Œç„¶åå†é’ˆå¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨è¿›è¡Œå…¼å®¹ã€‚</p>
<h2 id="å¸¸è§webå®‰å…¨åŠé˜²æŠ¤åŸç†"><a href="#å¸¸è§webå®‰å…¨åŠé˜²æŠ¤åŸç†" class="headerlink" title="å¸¸è§webå®‰å…¨åŠé˜²æŠ¤åŸç†"></a>å¸¸è§webå®‰å…¨åŠé˜²æŠ¤åŸç†</h2><blockquote>
<p>sqlæ³¨å…¥åŸç†</p>
</blockquote>
<p>å°±æ˜¯é€šè¿‡æŠŠSQLå‘½ä»¤æ’å…¥åˆ°Webè¡¨å•é€’äº¤æˆ–è¾“å…¥åŸŸåæˆ–é¡µé¢è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆè¾¾åˆ°æ¬ºéª—æœåŠ¡å™¨æ‰§è¡Œæ¶æ„çš„SQLå‘½ä»¤ã€‚</p>
<p>æ€»çš„æ¥è¯´æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<pre><code>
    1.æ°¸è¿œä¸è¦ä¿¡ä»»ç”¨æˆ·çš„è¾“å…¥ï¼Œè¦å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œæ ¡éªŒï¼Œå¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼ï¼Œæˆ–é™åˆ¶é•¿åº¦ï¼Œå¯¹å•å¼•å·å’ŒåŒ&quot;-&quot;è¿›è¡Œè½¬æ¢ç­‰ã€‚

    2.æ°¸è¿œä¸è¦ä½¿ç”¨åŠ¨æ€æ‹¼è£…SQLï¼Œå¯ä»¥ä½¿ç”¨å‚æ•°åŒ–çš„SQLæˆ–è€…ç›´æ¥ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹è¿›è¡Œæ•°æ®æŸ¥è¯¢å­˜å–ã€‚

    3.æ°¸è¿œä¸è¦ä½¿ç”¨ç®¡ç†å‘˜æƒé™çš„æ•°æ®åº“è¿æ¥ï¼Œä¸ºæ¯ä¸ªåº”ç”¨ä½¿ç”¨å•ç‹¬çš„æƒé™æœ‰é™çš„æ•°æ®åº“è¿æ¥ã€‚

    4.ä¸è¦æŠŠæœºå¯†ä¿¡æ¯æ˜æ–‡å­˜æ”¾ï¼Œè¯·åŠ å¯†æˆ–è€…hashæ‰å¯†ç å’Œæ•æ„Ÿçš„ä¿¡æ¯ã€‚
</code></pre><blockquote>
<p>XSSåŸç†åŠé˜²èŒƒ</p>
</blockquote>
<p>Xss(cross-site scripting)æ”»å‡»æŒ‡çš„æ˜¯æ”»å‡»è€…å¾€Webé¡µé¢é‡Œæ’å…¥æ¶æ„ <code>html</code>æ ‡ç­¾æˆ–è€…<code>javascript</code>ä»£ç ã€‚æ¯”å¦‚ï¼šæ”»å‡»è€…åœ¨è®ºå›ä¸­æ”¾ä¸€ä¸ª</p>
<p>çœ‹ä¼¼å®‰å…¨çš„é“¾æ¥ï¼Œéª—å–ç”¨æˆ·ç‚¹å‡»åï¼Œçªƒå–<code>cookie</code>ä¸­çš„ç”¨æˆ·ç§å¯†ä¿¡æ¯ï¼›æˆ–è€…æ”»å‡»è€…åœ¨è®ºå›ä¸­åŠ ä¸€ä¸ªæ¶æ„è¡¨å•ï¼Œ</p>
<p>å½“ç”¨æˆ·æäº¤è¡¨å•çš„æ—¶å€™ï¼Œå´æŠŠä¿¡æ¯ä¼ é€åˆ°æ”»å‡»è€…çš„æœåŠ¡å™¨ä¸­ï¼Œè€Œä¸æ˜¯ç”¨æˆ·åŸæœ¬ä»¥ä¸ºçš„ä¿¡ä»»ç«™ç‚¹ã€‚</p>
<blockquote>
<p>XSSé˜²èŒƒæ–¹æ³•</p>
</blockquote>
<p>é¦–å…ˆä»£ç é‡Œå¯¹ç”¨æˆ·è¾“å…¥çš„åœ°æ–¹å’Œå˜é‡éƒ½éœ€è¦ä»”ç»†æ£€æŸ¥é•¿åº¦å’Œå¯¹<code>â€&lt;â€,â€&gt;â€,â€;â€,â€â€™â€</code>ç­‰å­—ç¬¦åšè¿‡æ»¤ï¼›å…¶æ¬¡ä»»ä½•å†…å®¹å†™åˆ°é¡µé¢ä¹‹å‰éƒ½å¿…é¡»åŠ ä»¥<code>encode</code>ï¼Œé¿å…ä¸å°å¿ƒæŠŠ<code>html tag</code> å¼„å‡ºæ¥ã€‚è¿™ä¸€ä¸ªå±‚é¢åšå¥½ï¼Œè‡³å°‘å¯ä»¥å µä½è¶…è¿‡ä¸€åŠçš„<code>XSS</code> æ”»å‡»ã€‚</p>
<p>é¦–å…ˆï¼Œé¿å…ç›´æ¥åœ¨<code>cookie</code> ä¸­æ³„éœ²ç”¨æˆ·éšç§ï¼Œä¾‹å¦‚emailã€å¯†ç ç­‰ç­‰ã€‚</p>
<p>å…¶æ¬¡ï¼Œé€šè¿‡ä½¿<code>cookie</code> å’Œç³»ç»Ÿ<code>ip</code> ç»‘å®šæ¥é™ä½<code>cookie</code> æ³„éœ²åçš„å±é™©ã€‚è¿™æ ·æ”»å‡»è€…å¾—åˆ°çš„<code>cookie</code> æ²¡æœ‰å®é™…ä»·å€¼ï¼Œä¸å¯èƒ½æ‹¿æ¥é‡æ”¾ã€‚</p>
<p>å¦‚æœç½‘ç«™ä¸éœ€è¦å†æµè§ˆå™¨ç«¯å¯¹<code>cookie</code> è¿›è¡Œæ“ä½œï¼Œå¯ä»¥åœ¨<code>Set-Cookie</code> æœ«å°¾åŠ ä¸Š<code>HttpOnly</code> æ¥é˜²æ­¢<code>javascript</code> ä»£ç ç›´æ¥è·å–<code>cookie</code> ã€‚</p>
<p>å°½é‡é‡‡ç”¨<code>POST</code> è€Œé<code>GET</code> æäº¤è¡¨å•</p>
<blockquote>
<p>XSSä¸CSRFæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ</p>
</blockquote>
<p><code>XSS</code>æ˜¯è·å–ä¿¡æ¯ï¼Œä¸éœ€è¦æå‰çŸ¥é“å…¶ä»–ç”¨æˆ·é¡µé¢çš„ä»£ç å’Œæ•°æ®åŒ…ã€‚<code>CSRF</code>æ˜¯ä»£æ›¿ç”¨æˆ·å®ŒæˆæŒ‡å®šçš„åŠ¨ä½œï¼Œéœ€è¦çŸ¥é“å…¶ä»–ç”¨æˆ·é¡µé¢çš„ä»£ç å’Œæ•°æ®åŒ…ã€‚</p>
<p>è¦å®Œæˆä¸€æ¬¡<code>CSRF</code>æ”»å‡»ï¼Œå—å®³è€…å¿…é¡»ä¾æ¬¡å®Œæˆä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<pre><code>ç™»å½•å—ä¿¡ä»»ç½‘ç«™Aï¼Œå¹¶åœ¨æœ¬åœ°ç”ŸæˆCookieã€‚

åœ¨ä¸ç™»å‡ºAçš„æƒ…å†µä¸‹ï¼Œè®¿é—®å±é™©ç½‘ç«™Bã€‚
</code></pre><blockquote>
<p>CSRFçš„é˜²å¾¡</p>
</blockquote>
<ul>
<li><p>æœåŠ¡ç«¯çš„<code>CSRF</code>æ–¹å¼æ–¹æ³•å¾ˆå¤šæ ·ï¼Œä½†æ€»çš„æ€æƒ³éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå°±æ˜¯åœ¨å®¢æˆ·ç«¯é¡µé¢å¢åŠ ä¼ªéšæœºæ•°ã€‚</p>
</li>
<li><p>é€šè¿‡éªŒè¯ç çš„æ–¹æ³•</p>
</li>
</ul>
<h2 id="Web-Worker-å’ŒwebSocket"><a href="#Web-Worker-å’ŒwebSocket" class="headerlink" title="Web Worker å’ŒwebSocket"></a>Web Worker å’ŒwebSocket</h2><blockquote>
<p>workerä¸»çº¿ç¨‹:</p>
</blockquote>
<pre><code class="js">    1.é€šè¿‡ worker = new Worker( url ) åŠ è½½ä¸€ä¸ªJSæ–‡ä»¶æ¥åˆ›å»ºä¸€ä¸ªworkerï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªworkerå®ä¾‹ã€‚

    2.é€šè¿‡worker.postMessage( data ) æ–¹æ³•æ¥å‘workerå‘é€æ•°æ®ã€‚

    3.ç»‘å®šworker.onmessageæ–¹æ³•æ¥æ¥æ”¶workerå‘é€è¿‡æ¥çš„æ•°æ®ã€‚

    4.å¯ä»¥ä½¿ç”¨ worker.terminate() æ¥ç»ˆæ­¢ä¸€ä¸ªworkerçš„æ‰§è¡Œã€‚
</code></pre>
<p><code>WebSocket</code>æ˜¯<code>Web</code>åº”ç”¨ç¨‹åºçš„ä¼ è¾“åè®®ï¼Œå®ƒæä¾›äº†åŒå‘çš„ï¼ŒæŒ‰åºåˆ°è¾¾çš„æ•°æ®æµã€‚ä»–æ˜¯ä¸€ä¸ª<code>HTML5</code>åè®®ï¼Œ<code>WebSocket</code>çš„è¿æ¥æ˜¯æŒä¹…çš„ï¼Œä»–é€šè¿‡åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¿æŒåŒå·¥è¿æ¥ï¼ŒæœåŠ¡å™¨çš„æ›´æ–°å¯ä»¥è¢«åŠæ—¶æ¨é€ç»™å®¢æˆ·ç«¯ï¼Œè€Œä¸éœ€è¦å®¢æˆ·ç«¯ä»¥ä¸€å®šæ—¶é—´é—´éš”å»è½®è¯¢ã€‚</p>
<h2 id="HTTPå’ŒHTTPS"><a href="#HTTPå’ŒHTTPS" class="headerlink" title="HTTPå’ŒHTTPS"></a>HTTPå’ŒHTTPS</h2><p><code>HTTP</code>åè®®é€šå¸¸æ‰¿è½½äºTCPåè®®ä¹‹ä¸Šï¼Œåœ¨<code>HTTP</code>å’Œ<code>TCP</code>ä¹‹é—´æ·»åŠ ä¸€ä¸ªå®‰å…¨åè®®å±‚ï¼ˆ<code>SSL</code>æˆ–<code>TSL</code>ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±æˆäº†æˆ‘ä»¬å¸¸è¯´çš„HTTPSã€‚</p>
<p>é»˜è®¤HTTPçš„ç«¯å£å·ä¸º80ï¼Œ<code>HTTPS</code>çš„ç«¯å£å·ä¸º443ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆHTTPSå®‰å…¨"><a href="#ä¸ºä»€ä¹ˆHTTPSå®‰å…¨" class="headerlink" title="ä¸ºä»€ä¹ˆHTTPSå®‰å…¨"></a>ä¸ºä»€ä¹ˆHTTPSå®‰å…¨</h2><p>å› ä¸ºç½‘ç»œè¯·æ±‚éœ€è¦ä¸­é—´æœ‰å¾ˆå¤šçš„æœåŠ¡å™¨è·¯ç”±å™¨çš„è½¬å‘ã€‚ä¸­é—´çš„èŠ‚ç‚¹éƒ½å¯èƒ½ç¯¡æ”¹ä¿¡æ¯ï¼Œè€Œå¦‚æœä½¿ç”¨<code>HTTPS</code>ï¼Œå¯†é’¥åœ¨ä½ å’Œç»ˆç‚¹ç«™æ‰æœ‰ã€‚<code>https</code>ä¹‹æ‰€ä»¥æ¯”<code>http</code>å®‰å…¨ï¼Œæ˜¯å› ä¸ºä»–åˆ©ç”¨<code>ssl/tls</code>åè®®ä¼ è¾“ã€‚å®ƒåŒ…å«è¯ä¹¦ï¼Œå¸è½½ï¼Œæµé‡è½¬å‘ï¼Œè´Ÿè½½å‡è¡¡ï¼Œé¡µé¢é€‚é…ï¼Œæµè§ˆå™¨é€‚é…ï¼Œreferä¼ é€’ç­‰ã€‚ä¿éšœäº†ä¼ è¾“è¿‡ç¨‹çš„å®‰å…¨æ€§</p>
<h2 id="å¯¹å‰ç«¯æ¨¡å—åŒ–çš„è®¤è¯†"><a href="#å¯¹å‰ç«¯æ¨¡å—åŒ–çš„è®¤è¯†" class="headerlink" title="å¯¹å‰ç«¯æ¨¡å—åŒ–çš„è®¤è¯†"></a>å¯¹å‰ç«¯æ¨¡å—åŒ–çš„è®¤è¯†</h2><blockquote>
<p>AMD æ˜¯ <code>RequireJS</code> åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºã€‚</p>
<p>CMD æ˜¯ <code>SeaJS</code> åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºã€‚</p>
</blockquote>
<p><code>AMD</code> æ˜¯æå‰æ‰§è¡Œï¼Œ<code>CMD</code> æ˜¯å»¶è¿Ÿæ‰§è¡Œã€‚</p>
<p><code>AMD</code>æ¨èçš„é£æ ¼é€šè¿‡è¿”å›ä¸€ä¸ªå¯¹è±¡åšä¸ºæ¨¡å—å¯¹è±¡ï¼Œ<code>CommonJS</code>çš„é£æ ¼é€šè¿‡å¯¹<code>module.exports</code>æˆ–<code>exports</code>çš„å±æ€§èµ‹å€¼æ¥è¾¾åˆ°æš´éœ²æ¨¡å—å¯¹è±¡çš„ç›®çš„ã€‚</p>
<blockquote>
<p>CMDæ¨¡å—æ–¹å¼</p>
</blockquote>
<pre><code class="js">    define(function(require, exports, module) {

      // æ¨¡å—ä»£ç 

    });
</code></pre>
<h2 id="Javascriptåƒåœ¾å›æ”¶æ–¹æ³•"><a href="#Javascriptåƒåœ¾å›æ”¶æ–¹æ³•" class="headerlink" title="Javascriptåƒåœ¾å›æ”¶æ–¹æ³•"></a>Javascriptåƒåœ¾å›æ”¶æ–¹æ³•</h2><blockquote>
<p>æ ‡è®°æ¸…é™¤ï¼ˆmark and sweepï¼‰</p>
</blockquote>
<p>è¿™æ˜¯JavaScriptæœ€å¸¸è§çš„åƒåœ¾å›æ”¶æ–¹å¼ï¼Œå½“å˜é‡è¿›å…¥æ‰§è¡Œç¯å¢ƒçš„æ—¶å€™ï¼Œæ¯”å¦‚å‡½æ•°ä¸­å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œåƒåœ¾å›æ”¶å™¨å°†å…¶æ ‡è®°ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€ï¼Œå½“å˜é‡ç¦»å¼€ç¯å¢ƒçš„æ—¶å€™ï¼ˆå‡½æ•°æ‰§è¡Œç»“æŸï¼‰å°†å…¶æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€ã€‚</p>
<p>åƒåœ¾å›æ”¶å™¨ä¼šåœ¨è¿è¡Œçš„æ—¶å€™ç»™å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡åŠ ä¸Šæ ‡è®°ï¼Œç„¶åå»æ‰ç¯å¢ƒä¸­çš„å˜é‡ä»¥åŠè¢«ç¯å¢ƒä¸­å˜é‡æ‰€å¼•ç”¨çš„å˜é‡ï¼ˆé—­åŒ…ï¼‰ï¼Œåœ¨è¿™äº›å®Œæˆä¹‹åä»å­˜åœ¨æ ‡è®°çš„å°±æ˜¯è¦åˆ é™¤çš„å˜é‡äº†</p>
<blockquote>
<p>å¼•ç”¨è®¡æ•°(reference counting)</p>
</blockquote>
<p>åœ¨ä½ç‰ˆæœ¬IEä¸­ç»å¸¸ä¼šå‡ºç°å†…å­˜æ³„éœ²ï¼Œå¾ˆå¤šæ—¶å€™å°±æ˜¯å› ä¸ºå…¶é‡‡ç”¨å¼•ç”¨è®¡æ•°æ–¹å¼è¿›è¡Œåƒåœ¾å›æ”¶ã€‚å¼•ç”¨è®¡æ•°çš„ç­–ç•¥æ˜¯è·Ÿè¸ªè®°å½•æ¯ä¸ªå€¼è¢«ä½¿ç”¨çš„æ¬¡æ•°ï¼Œå½“å£°æ˜äº†ä¸€ä¸ª å˜é‡å¹¶å°†ä¸€ä¸ªå¼•ç”¨ç±»å‹èµ‹å€¼ç»™è¯¥å˜é‡çš„æ—¶å€™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å°±åŠ 1ï¼Œå¦‚æœè¯¥å˜é‡çš„å€¼å˜æˆäº†å¦å¤–ä¸€ä¸ªï¼Œåˆ™è¿™ä¸ªå€¼å¾—å¼•ç”¨æ¬¡æ•°å‡1ï¼Œå½“è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å˜ä¸º0çš„æ—¶ å€™ï¼Œè¯´æ˜æ²¡æœ‰å˜é‡åœ¨ä½¿ç”¨ï¼Œè¿™ä¸ªå€¼æ²¡æ³•è¢«è®¿é—®äº†ï¼Œå› æ­¤å¯ä»¥å°†å…¶å ç”¨çš„ç©ºé—´å›æ”¶ï¼Œè¿™æ ·åƒåœ¾å›æ”¶å™¨ä¼šåœ¨è¿è¡Œçš„æ—¶å€™æ¸…ç†æ‰å¼•ç”¨æ¬¡æ•°ä¸º0çš„å€¼å ç”¨çš„ç©ºé—´ã€‚</p>
<p>åœ¨IEä¸­è™½ç„¶<code>JavaScript</code>å¯¹è±¡é€šè¿‡æ ‡è®°æ¸…é™¤çš„æ–¹å¼è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œä½†BOMä¸DOMå¯¹è±¡å´æ˜¯é€šè¿‡å¼•ç”¨è®¡æ•°å›æ”¶åƒåœ¾çš„ï¼Œ<br>ä¹Ÿå°±æ˜¯è¯´åªè¦æ¶‰åŠ<code>BOM</code>åŠDOMå°±ä¼šå‡ºç°å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚</p>
<h2 id="ä½ è§‰å¾—å‰ç«¯å·¥ç¨‹çš„ä»·å€¼ä½“ç°åœ¨å“ª"><a href="#ä½ è§‰å¾—å‰ç«¯å·¥ç¨‹çš„ä»·å€¼ä½“ç°åœ¨å“ª" class="headerlink" title="ä½ è§‰å¾—å‰ç«¯å·¥ç¨‹çš„ä»·å€¼ä½“ç°åœ¨å“ª"></a>ä½ è§‰å¾—å‰ç«¯å·¥ç¨‹çš„ä»·å€¼ä½“ç°åœ¨å“ª</h2><pre><code>ä¸ºç®€åŒ–ç”¨æˆ·ä½¿ç”¨æä¾›æŠ€æœ¯æ”¯æŒï¼ˆäº¤äº’éƒ¨åˆ†ï¼‰

ä¸ºå¤šä¸ªæµè§ˆå™¨å…¼å®¹æ€§æä¾›æ”¯æŒ

ä¸ºæé«˜ç”¨æˆ·æµè§ˆé€Ÿåº¦ï¼ˆæµè§ˆå™¨æ€§èƒ½ï¼‰æä¾›æ”¯æŒ

ä¸ºè·¨å¹³å°æˆ–è€…å…¶ä»–åŸºäºwebkitæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“çš„åº”ç”¨æä¾›æ”¯æŒ

ä¸ºå±•ç¤ºæ•°æ®æä¾›æ”¯æŒï¼ˆæ•°æ®æ¥å£ï¼‰
</code></pre><h2 id="è°ˆè°ˆæ€§èƒ½ä¼˜åŒ–é—®é¢˜"><a href="#è°ˆè°ˆæ€§èƒ½ä¼˜åŒ–é—®é¢˜" class="headerlink" title="è°ˆè°ˆæ€§èƒ½ä¼˜åŒ–é—®é¢˜"></a>è°ˆè°ˆæ€§èƒ½ä¼˜åŒ–é—®é¢˜</h2><p>ä»£ç å±‚é¢ï¼šé¿å…ä½¿ç”¨cssè¡¨è¾¾å¼ï¼Œé¿å…ä½¿ç”¨é«˜çº§é€‰æ‹©å™¨ï¼Œé€šé…é€‰æ‹©å™¨ã€‚</p>
<p>ç¼“å­˜åˆ©ç”¨ï¼šç¼“å­˜Ajaxï¼Œä½¿ç”¨CDNï¼Œä½¿ç”¨å¤–éƒ¨jså’Œcssæ–‡ä»¶ä»¥ä¾¿ç¼“å­˜ï¼Œæ·»åŠ Expireså¤´ï¼ŒæœåŠ¡ç«¯é…ç½®Etagï¼Œå‡å°‘DNSæŸ¥æ‰¾ç­‰</p>
<p>è¯·æ±‚æ•°é‡ï¼šåˆå¹¶æ ·å¼å’Œè„šæœ¬ï¼Œä½¿ç”¨csså›¾ç‰‡ç²¾çµï¼Œåˆå§‹é¦–å±ä¹‹å¤–çš„å›¾ç‰‡èµ„æºæŒ‰éœ€åŠ è½½ï¼Œé™æ€èµ„æºå»¶è¿ŸåŠ è½½ã€‚</p>
<p>è¯·æ±‚å¸¦å®½ï¼šå‹ç¼©æ–‡ä»¶ï¼Œå¼€å¯GZIPï¼Œ</p>
<blockquote>
<p>ä»£ç å±‚é¢çš„ä¼˜åŒ–</p>
</blockquote>
<ul>
<li><p>ç”¨<code>hash-table</code>æ¥ä¼˜åŒ–æŸ¥æ‰¾</p>
</li>
<li><p>å°‘ç”¨å…¨å±€å˜é‡</p>
</li>
<li><p>ç”¨<code>innerHTML</code>ä»£æ›¿<code>DOM</code>æ“ä½œï¼Œå‡å°‘<code>DOM</code>æ“ä½œæ¬¡æ•°ï¼Œä¼˜åŒ–<code>javascript</code>æ€§èƒ½</p>
</li>
<li><p>ç”¨<code>setTimeout</code>æ¥é¿å…é¡µé¢å¤±å»å“åº”</p>
</li>
<li><p>ç¼“å­˜DOMèŠ‚ç‚¹æŸ¥æ‰¾çš„ç»“æœ</p>
</li>
<li><p>é¿å…ä½¿ç”¨CSS Expression</p>
</li>
<li><p>é¿å…å…¨å±€æŸ¥è¯¢</p>
</li>
<li><p>é¿å…ä½¿ç”¨with(withä¼šåˆ›å»ºè‡ªå·±çš„ä½œç”¨åŸŸï¼Œä¼šå¢åŠ ä½œç”¨åŸŸé“¾é•¿åº¦)</p>
</li>
<li><p>å¤šä¸ªå˜é‡å£°æ˜åˆå¹¶</p>
</li>
<li><p>é¿å…å›¾ç‰‡å’ŒiFrameç­‰çš„ç©ºSrcã€‚ç©ºSrcä¼šé‡æ–°åŠ è½½å½“å‰é¡µé¢ï¼Œå½±å“é€Ÿåº¦å’Œæ•ˆç‡</p>
</li>
<li>å°½é‡é¿å…å†™åœ¨HTMLæ ‡ç­¾ä¸­å†™Styleå±æ€§</li>
</ul>
<h2 id="ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ–"><a href="#ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ–"></a>ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ–</h2><ul>
<li>å°½é‡ä½¿ç”¨css3åŠ¨ç”»ï¼Œå¼€å¯ç¡¬ä»¶åŠ é€Ÿã€‚</li>
<li>é€‚å½“ä½¿ç”¨<code>touch</code>äº‹ä»¶ä»£æ›¿<code>click</code>äº‹ä»¶ã€‚</li>
<li>é¿å…ä½¿ç”¨<code>css3</code>æ¸å˜é˜´å½±æ•ˆæœã€‚</li>
<li>å¯ä»¥ç”¨<code>transform: translateZ(0)</code>æ¥å¼€å¯ç¡¬ä»¶åŠ é€Ÿã€‚</li>
<li>ä¸æ»¥ç”¨Floatã€‚Floatåœ¨æ¸²æŸ“æ—¶è®¡ç®—é‡æ¯”è¾ƒå¤§ï¼Œå°½é‡å‡å°‘ä½¿ç”¨</li>
<li>ä¸æ»¥ç”¨Webå­—ä½“ã€‚Webå­—ä½“éœ€è¦ä¸‹è½½ï¼Œè§£æï¼Œé‡ç»˜å½“å‰é¡µé¢ï¼Œå°½é‡å‡å°‘ä½¿ç”¨ã€‚</li>
<li>åˆç†ä½¿ç”¨requestAnimationFrameåŠ¨ç”»ä»£æ›¿setTimeout</li>
<li>CSSä¸­çš„å±æ€§ï¼ˆCSS3 transitionsã€CSS3 3D transformsã€Opacityã€Canvasã€WebGLã€Videoï¼‰ä¼šè§¦å‘GPUæ¸²æŸ“ï¼Œè¯·åˆç†ä½¿ç”¨ã€‚è¿‡æ¸¡ä½¿ç”¨ä¼šå¼•å‘æ‰‹æœºè¿‡è€—ç”µå¢åŠ </li>
<li>PCç«¯çš„åœ¨ç§»åŠ¨ç«¯åŒæ ·é€‚ç”¨</li>
</ul>
<blockquote>
<p>ç›¸å…³é˜…è¯»ï¼š<a href="https://github.com/cssmagic/blog/issues/20" target="_blank" rel="external">å¦‚ä½•åšåˆ°ä¸€ç§’æ¸²æŸ“ä¸€ä¸ªç§»åŠ¨é¡µé¢</a></p>
</blockquote>
<h2 id="ä»€ä¹ˆæ˜¯Etag"><a href="#ä»€ä¹ˆæ˜¯Etag" class="headerlink" title="ä»€ä¹ˆæ˜¯Etag"></a>ä»€ä¹ˆæ˜¯Etag</h2><p>å½“å‘é€ä¸€ä¸ªæœåŠ¡å™¨è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨é¦–å…ˆä¼šè¿›è¡Œç¼“å­˜è¿‡æœŸåˆ¤æ–­ã€‚æµè§ˆå™¨æ ¹æ®ç¼“å­˜è¿‡æœŸæ—¶é—´åˆ¤æ–­ç¼“å­˜æ–‡ä»¶æ˜¯å¦è¿‡æœŸã€‚<br></p>
<p>æƒ…æ™¯ä¸€ï¼šè‹¥æ²¡æœ‰è¿‡æœŸï¼Œåˆ™ä¸å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„ç»“æœï¼Œæ­¤æ—¶æˆ‘ä»¬åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­å¯ä»¥çœ‹åˆ°  <code>200 OK</code>(from cache) ï¼Œæ­¤æ—¶çš„æƒ…å†µå°±æ˜¯å®Œå…¨ä½¿ç”¨ç¼“å­˜ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨æ²¡æœ‰ä»»ä½•äº¤äº’çš„ã€‚</p>
<p>æƒ…æ™¯äºŒï¼šè‹¥å·²è¿‡æœŸï¼Œåˆ™å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œæ­¤æ—¶è¯·æ±‚ä¸­ä¼šå¸¦ä¸Šâ‘ ä¸­è®¾ç½®çš„æ–‡ä»¶ä¿®æ”¹æ—¶é—´ï¼Œå’Œ<code>Etag</code></p>
<p>ç„¶åï¼Œè¿›è¡Œèµ„æºæ›´æ–°åˆ¤æ–­ã€‚æœåŠ¡å™¨æ ¹æ®æµè§ˆå™¨ä¼ è¿‡æ¥çš„æ–‡ä»¶ä¿®æ”¹æ—¶é—´ï¼Œåˆ¤æ–­è‡ªæµè§ˆå™¨ä¸Šä¸€æ¬¡è¯·æ±‚ä¹‹åï¼Œæ–‡ä»¶æ˜¯ä¸æ˜¯æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼›æ ¹æ®<code>Etag</code>ï¼Œåˆ¤æ–­æ–‡ä»¶å†…å®¹è‡ªä¸Šä¸€æ¬¡è¯·æ±‚ä¹‹åï¼Œæœ‰æ²¡æœ‰å‘ç”Ÿå˜åŒ–</p>
<p>æƒ…å½¢ä¸€ï¼šè‹¥ä¸¤ç§åˆ¤æ–­çš„ç»“è®ºéƒ½æ˜¯æ–‡ä»¶æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œåˆ™æœåŠ¡å™¨å°±ä¸ç»™æµè§ˆå™¨å‘<code>index.html</code>çš„å†…å®¹äº†ï¼Œç›´æ¥å‘Šè¯‰å®ƒï¼Œæ–‡ä»¶æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œä½ ç”¨ä½ é‚£è¾¹çš„ç¼“å­˜å§â€”â€” <code>304 Not Modified</code>ï¼Œæ­¤æ—¶æµè§ˆå™¨å°±ä¼šä»æœ¬åœ°ç¼“å­˜ä¸­è·å–<code>index.html</code>çš„å†…å®¹ã€‚æ­¤æ—¶çš„æƒ…å†µå«åè®®ç¼“å­˜ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´æœ‰ä¸€æ¬¡è¯·æ±‚äº¤äº’ã€‚<br></p>
<p>æƒ…å½¢äºŒï¼šè‹¥ä¿®æ”¹æ—¶é—´å’Œæ–‡ä»¶å†…å®¹åˆ¤æ–­æœ‰ä»»æ„ä¸€ä¸ªæ²¡æœ‰é€šè¿‡ï¼Œåˆ™æœåŠ¡å™¨ä¼šå—ç†æ­¤æ¬¡è¯·æ±‚ï¼Œä¹‹åçš„æ“ä½œåŒâ‘ </p>
<p><br></p>
<p>â‘  åªæœ‰getè¯·æ±‚ä¼šè¢«ç¼“å­˜ï¼Œpostè¯·æ±‚ä¸ä¼š</p>
<h2 id="Expireså’ŒCache-Control"><a href="#Expireså’ŒCache-Control" class="headerlink" title="Expireså’ŒCache-Control"></a>Expireså’ŒCache-Control</h2><p><code>Expires</code>è¦æ±‚å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ—¶é’Ÿä¸¥æ ¼åŒæ­¥ã€‚<code>HTTP1.1</code>å¼•å…¥<code>Cache-Control</code>æ¥å…‹æœExpireså¤´çš„é™åˆ¶ã€‚å¦‚æœmax-ageå’ŒExpiresåŒæ—¶å‡ºç°ï¼Œåˆ™max-ageæœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</p>
<pre><code class="js">    Cache-Control: no-cache, private, max-age=0

    ETag: abcde

    Expires: Thu, 15 Apr 201420180515 20:00:00 GMT

    Pragma: private

    Last-Modified: $now // RFC1123 format
</code></pre>
<h2 id="ETagåº”ç”¨"><a href="#ETagåº”ç”¨" class="headerlink" title="ETagåº”ç”¨:"></a>ETagåº”ç”¨:</h2><p><code>Etag</code>ç”±æœåŠ¡å™¨ç«¯ç”Ÿæˆï¼Œå®¢æˆ·ç«¯é€šè¿‡<code>If-Match</code>æˆ–è€…è¯´<code>If-None-Match</code>è¿™ä¸ªæ¡ä»¶åˆ¤æ–­è¯·æ±‚æ¥éªŒè¯èµ„æºæ˜¯å¦ä¿®æ”¹ã€‚å¸¸è§çš„æ˜¯ä½¿ç”¨<code>If-None-Match</code>ã€‚è¯·æ±‚ä¸€ä¸ªæ–‡ä»¶çš„æµç¨‹å¯èƒ½å¦‚ä¸‹ï¼š</p>
<p>====ç¬¬ä¸€æ¬¡è¯·æ±‚===</p>
<pre><code>1.å®¢æˆ·ç«¯å‘èµ· HTTP GET è¯·æ±‚ä¸€ä¸ªæ–‡ä»¶ï¼›

2.æœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼Œè¿”å›æ–‡ä»¶å†…å®¹å’Œä¸€å †Headerï¼Œå½“ç„¶åŒ…æ‹¬Etag(ä¾‹å¦‚&quot;2e681a-6-5d044840&quot;)(å‡è®¾æœåŠ¡å™¨æ”¯æŒEtagç”Ÿæˆå’Œå·²ç»å¼€å¯äº†Etag).çŠ¶æ€ç 200
</code></pre><p>====ç¬¬äºŒæ¬¡è¯·æ±‚===</p>
<pre><code>å®¢æˆ·ç«¯å‘èµ· HTTP GET è¯·æ±‚ä¸€ä¸ªæ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯åŒæ—¶å‘é€ä¸€ä¸ªIf-None-Matchå¤´ï¼Œè¿™ä¸ªå¤´çš„å†…å®¹å°±æ˜¯ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶æœåŠ¡å™¨è¿”å›çš„Etagï¼š2e681a-6-5d0448402.æœåŠ¡å™¨åˆ¤æ–­å‘é€è¿‡æ¥çš„Etagå’Œè®¡ç®—å‡ºæ¥çš„EtagåŒ¹é…ï¼Œå› æ­¤If-None-Matchä¸ºFalseï¼Œä¸è¿”å›200ï¼Œè¿”å›304ï¼Œå®¢æˆ·ç«¯ç»§ç»­ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼›æµç¨‹å¾ˆç®€å•ï¼Œé—®é¢˜æ˜¯ï¼Œå¦‚æœæœåŠ¡å™¨åˆè®¾ç½®äº†Cache-Control:max-ageå’ŒExpireså‘¢ï¼Œæ€ä¹ˆåŠ
</code></pre><p>ç­”æ¡ˆæ˜¯åŒæ—¶ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å®Œå…¨åŒ¹é…<code>If-Modified-Since</code>å’Œ<code>If-None-Match</code>å³æ£€æŸ¥å®Œä¿®æ”¹æ—¶é—´å’Œ<code>Etag</code>ä¹‹åï¼Œ</p>
<p>æœåŠ¡å™¨æ‰èƒ½è¿”å›304.(ä¸è¦é™·å…¥åˆ°åº•ä½¿ç”¨è°çš„é—®é¢˜æ€ªåœˆ)</p>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨Etagè¯·æ±‚å¤´?</p>
<p>Etag ä¸»è¦ä¸ºäº†è§£å†³ <code>Last-Modified</code> æ— æ³•è§£å†³çš„ä¸€äº›é—®é¢˜ã€‚</p>
<h2 id="æ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ«"><a href="#æ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ«" class="headerlink" title="æ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ«"></a>æ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ«</h2><pre><code>æ ˆçš„æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½æ˜¯åœ¨ä¸€ç«¯è¿›è¡Œçš„ï¼Œè€Œé˜Ÿåˆ—çš„æ“ä½œå´æ˜¯åœ¨ä¸¤ç«¯è¿›è¡Œçš„ã€‚

é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºï¼Œæ ˆå…ˆè¿›åå‡ºã€‚

æ ˆåªå…è®¸åœ¨è¡¨å°¾ä¸€ç«¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤ï¼Œè€Œé˜Ÿåˆ—åªå…è®¸åœ¨è¡¨å°¾ä¸€ç«¯è¿›è¡Œæ’å…¥ï¼Œåœ¨è¡¨å¤´ä¸€ç«¯è¿›è¡Œåˆ é™¤
</code></pre><h2 id="æ ˆå’Œå †çš„åŒºåˆ«"><a href="#æ ˆå’Œå †çš„åŒºåˆ«" class="headerlink" title="æ ˆå’Œå †çš„åŒºåˆ«"></a>æ ˆå’Œå †çš„åŒºåˆ«</h2><pre><code>æ ˆåŒºï¼ˆstackï¼‰â€”   ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾   ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚

å †åŒºï¼ˆheapï¼‰   â€”   ä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œ   è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶ã€‚

å †ï¼ˆæ•°æ®ç»“æ„ï¼‰ï¼šå †å¯ä»¥è¢«çœ‹æˆæ˜¯ä¸€æ£µæ ‘ï¼Œå¦‚ï¼šå †æ’åºï¼›

æ ˆï¼ˆæ•°æ®ç»“æ„ï¼‰ï¼šä¸€ç§å…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„ã€‚
</code></pre><h2 id="å¿«é€Ÿ-æ’åºçš„æ€æƒ³å¹¶å®ç°ä¸€ä¸ªå¿«æ’"><a href="#å¿«é€Ÿ-æ’åºçš„æ€æƒ³å¹¶å®ç°ä¸€ä¸ªå¿«æ’" class="headerlink" title="å¿«é€Ÿ æ’åºçš„æ€æƒ³å¹¶å®ç°ä¸€ä¸ªå¿«æ’"></a>å¿«é€Ÿ æ’åºçš„æ€æƒ³å¹¶å®ç°ä¸€ä¸ªå¿«æ’</h2><p>â€œå¿«é€Ÿæ’åºâ€çš„æ€æƒ³å¾ˆç®€å•ï¼Œæ•´ä¸ªæ’åºè¿‡ç¨‹åªéœ€è¦ä¸‰æ­¥ï¼š</p>
<p>ã€€ã€€ï¼ˆ1ï¼‰åœ¨æ•°æ®é›†ä¹‹ä¸­ï¼Œæ‰¾ä¸€ä¸ªåŸºå‡†ç‚¹</p>
<p>ã€€ã€€ï¼ˆ2ï¼‰å»ºç«‹ä¸¤ä¸ªæ•°ç»„ï¼Œåˆ†åˆ«å­˜å‚¨å·¦è¾¹å’Œå³è¾¹çš„æ•°ç»„</p>
<p>ã€€ã€€ï¼ˆ3ï¼‰åˆ©ç”¨é€’å½’è¿›è¡Œä¸‹æ¬¡æ¯”è¾ƒ</p>
<pre><code class="js">    &lt;script type=&quot;text/javascript&quot;&gt;

        function quickSort(arr){
            if(arr.length&lt;=1){
                return arr;//å¦‚æœæ•°ç»„åªæœ‰ä¸€ä¸ªæ•°ï¼Œå°±ç›´æ¥è¿”å›ï¼›
            }

            var num = Math.floor(arr.length/2);//æ‰¾åˆ°ä¸­é—´æ•°çš„ç´¢å¼•å€¼ï¼Œå¦‚æœæ˜¯æµ®ç‚¹æ•°ï¼Œåˆ™å‘ä¸‹å–æ•´

            var numValue = arr.splice(num,1);//æ‰¾åˆ°ä¸­é—´æ•°çš„å€¼
            var left = [];
            var right = [];

            for(var i=0;i&lt;arr.length;i++){
                if(arr[i]&lt;numValue){
                    left.push(arr[i]);//åŸºå‡†ç‚¹çš„å·¦è¾¹çš„æ•°ä¼ åˆ°å·¦è¾¹æ•°ç»„
                }
                else{
                   right.push(arr[i]);//åŸºå‡†ç‚¹çš„å³è¾¹çš„æ•°ä¼ åˆ°å³è¾¹æ•°ç»„
                }
            }

            return quickSort(left).concat([numValue],quickSort(right));//é€’å½’ä¸æ–­é‡å¤æ¯”è¾ƒ
        }

        alert(quickSort([32,45,37,16,2,87]));//å¼¹å‡ºâ€œ2,16,32,37,45,87â€

    &lt;/script&gt;
</code></pre>
<h2 id="ä½ è§‰å¾—jQueryæˆ–zeptoæºç æœ‰å“ªäº›å†™çš„å¥½çš„åœ°æ–¹"><a href="#ä½ è§‰å¾—jQueryæˆ–zeptoæºç æœ‰å“ªäº›å†™çš„å¥½çš„åœ°æ–¹" class="headerlink" title="ä½ è§‰å¾—jQueryæˆ–zeptoæºç æœ‰å“ªäº›å†™çš„å¥½çš„åœ°æ–¹"></a>ä½ è§‰å¾—jQueryæˆ–zeptoæºç æœ‰å“ªäº›å†™çš„å¥½çš„åœ°æ–¹</h2><p>(ç­”æ¡ˆä»…ä¾›å‚è€ƒ)</p>
<p><code>jquery</code>æºç å°è£…åœ¨ä¸€ä¸ªåŒ¿åå‡½æ•°çš„è‡ªæ‰§è¡Œç¯å¢ƒä¸­ï¼Œæœ‰åŠ©äºé˜²æ­¢å˜é‡çš„å…¨å±€æ±¡æŸ“ï¼Œç„¶åé€šè¿‡ä¼ å…¥windowå¯¹è±¡å‚æ•°ï¼Œå¯ä»¥ä½¿windowå¯¹è±¡ä½œä¸ºå±€éƒ¨å˜é‡ä½¿ç”¨ï¼Œå¥½å¤„æ˜¯å½“<code>jquery</code>ä¸­è®¿é—®windowå¯¹è±¡çš„æ—¶å€™ï¼Œå°±ä¸ç”¨å°†ä½œç”¨åŸŸé“¾é€€å›åˆ°é¡¶å±‚ä½œç”¨åŸŸäº†ï¼Œä»è€Œå¯ä»¥æ›´å¿«çš„è®¿é—®<code>window</code>å¯¹è±¡ã€‚åŒæ ·ï¼Œä¼ å…¥<code>undefined</code>å‚æ•°ï¼Œå¯ä»¥ç¼©çŸ­æŸ¥æ‰¾undefinedæ—¶çš„ä½œç”¨åŸŸé“¾ã€‚</p>
<pre><code class="js">    (function( window, undefined ) {

         //ç”¨ä¸€ä¸ªå‡½æ•°åŸŸåŒ…èµ·æ¥ï¼Œå°±æ˜¯æ‰€è°“çš„æ²™ç®±

         //åœ¨è¿™é‡Œè¾¹varå®šä¹‰çš„å˜é‡ï¼Œå±äºè¿™ä¸ªå‡½æ•°åŸŸå†…çš„å±€éƒ¨å˜é‡ï¼Œé¿å…æ±¡æŸ“å…¨å±€

         //æŠŠå½“å‰æ²™ç®±éœ€è¦çš„å¤–éƒ¨å˜é‡é€šè¿‡å‡½æ•°å‚æ•°å¼•å…¥è¿›æ¥

         //åªè¦ä¿è¯å‚æ•°å¯¹å†…æä¾›çš„æ¥å£çš„ä¸€è‡´æ€§ï¼Œä½ è¿˜å¯ä»¥éšæ„æ›¿æ¢ä¼ è¿›æ¥çš„è¿™ä¸ªå‚æ•°

        window.jQuery = window.$ = jQuery;

    })( window );
</code></pre>
<p>jqueryå°†ä¸€äº›åŸå‹å±æ€§å’Œæ–¹æ³•å°è£…åœ¨äº†<code>jquery.prototype</code>ä¸­ï¼Œä¸ºäº†ç¼©çŸ­åç§°ï¼Œåˆèµ‹å€¼ç»™äº†<code>jquery.fn</code>ï¼Œè¿™æ˜¯å¾ˆå½¢è±¡çš„å†™æ³•ã€‚</p>
<p>æœ‰ä¸€äº›æ•°ç»„æˆ–å¯¹è±¡çš„æ–¹æ³•ç»å¸¸èƒ½ä½¿ç”¨åˆ°ï¼ŒjQueryå°†å…¶ä¿å­˜ä¸ºå±€éƒ¨å˜é‡ä»¥æé«˜è®¿é—®é€Ÿåº¦ã€‚</p>
<p><code>jquery</code>å®ç°çš„é“¾å¼è°ƒç”¨å¯ä»¥èŠ‚çº¦ä»£ç ï¼Œæ‰€è¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥æé«˜ä»£ç æ•ˆç‡ã€‚</p>
<h2 id="ES6çš„äº†è§£"><a href="#ES6çš„äº†è§£" class="headerlink" title="ES6çš„äº†è§£"></a>ES6çš„äº†è§£</h2><p>æ–°å¢æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆä¸ºJavaScriptæä¾›äº†ç®€å•çš„å­—ç¬¦ä¸²æ’å€¼åŠŸèƒ½ï¼‰ã€ç®­å¤´å‡½æ•°ï¼ˆæ“ä½œç¬¦å·¦è¾¹ä¸ºè¾“å…¥çš„å‚æ•°ï¼Œè€Œå³è¾¹åˆ™æ˜¯è¿›è¡Œçš„æ“ä½œä»¥åŠè¿”å›çš„å€¼<code>Inputs=&gt;outputs</code>ã€‚ï¼‰ã€<code>for-of</code>ï¼ˆç”¨æ¥éå†æ•°æ®â€”ä¾‹å¦‚æ•°ç»„ä¸­çš„å€¼ã€‚ï¼‰<code>arguments</code>å¯¹è±¡å¯è¢«ä¸å®šå‚æ•°å’Œé»˜è®¤å‚æ•°å®Œç¾ä»£æ›¿ã€‚<code>ES6</code>å°†<code>promise</code>å¯¹è±¡çº³å…¥è§„èŒƒï¼Œæä¾›äº†åŸç”Ÿçš„<code>Promise</code>å¯¹è±¡ã€‚å¢åŠ äº†<code>let</code>å’Œ<code>const</code>å‘½ä»¤ï¼Œç”¨æ¥å£°æ˜å˜é‡ã€‚å¢åŠ äº†å—çº§ä½œç”¨åŸŸã€‚letå‘½ä»¤å®é™…ä¸Šå°±å¢åŠ äº†å—çº§ä½œç”¨åŸŸã€‚ES6è§„å®šï¼Œ<code>var</code>å‘½ä»¤å’Œ<code>function</code>å‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œå±äºå…¨å±€å¯¹è±¡çš„å±æ€§ï¼›<code>let</code>å‘½ä»¤ã€<code>const</code>å‘½ä»¤ã€<code>class</code>å‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºå…¨å±€å¯¹è±¡çš„å±æ€§ã€‚ã€‚è¿˜æœ‰å°±æ˜¯å¼•å…¥<code>module</code>æ¨¡å—çš„æ¦‚å¿µ</p>
<h2 id="jsç»§æ‰¿æ–¹å¼åŠå…¶ä¼˜ç¼ºç‚¹"><a href="#jsç»§æ‰¿æ–¹å¼åŠå…¶ä¼˜ç¼ºç‚¹" class="headerlink" title="jsç»§æ‰¿æ–¹å¼åŠå…¶ä¼˜ç¼ºç‚¹"></a>jsç»§æ‰¿æ–¹å¼åŠå…¶ä¼˜ç¼ºç‚¹</h2><blockquote>
<p>åŸå‹é“¾ç»§æ‰¿çš„ç¼ºç‚¹</p>
</blockquote>
<pre><code>ä¸€æ˜¯å­—é¢é‡é‡å†™åŸå‹ä¼šä¸­æ–­å…³ç³»ï¼Œä½¿ç”¨å¼•ç”¨ç±»å‹çš„åŸå‹ï¼Œå¹¶ä¸”å­ç±»å‹è¿˜æ— æ³•ç»™è¶…ç±»å‹ä¼ é€’å‚æ•°ã€‚
</code></pre><blockquote>
<p>å€Ÿç”¨æ„é€ å‡½æ•°ï¼ˆç±»å¼ç»§æ‰¿ï¼‰</p>
</blockquote>
<pre><code>å€Ÿç”¨æ„é€ å‡½æ•°è™½ç„¶è§£å†³äº†åˆšæ‰ä¸¤ç§é—®é¢˜ï¼Œä½†æ²¡æœ‰åŸå‹ï¼Œåˆ™å¤ç”¨æ— ä»è°ˆèµ·ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åŸå‹é“¾+å€Ÿç”¨æ„é€ å‡½æ•°çš„æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ç§°ä¸ºç»„åˆç»§æ‰¿
</code></pre><blockquote>
<p>ç»„åˆå¼ç»§æ‰¿</p>
</blockquote>
<pre><code>ç»„åˆå¼ç»§æ‰¿æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§ç»§æ‰¿æ–¹æ³•ï¼Œå…¶èƒŒåçš„æ€è·¯æ˜¯ ä½¿ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œè€Œé€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿ã€‚è¿™æ ·ï¼Œæ—¢é€šè¿‡åœ¨åŸå‹ä¸Šå®šä¹‰æ–¹æ³•å®ç°äº†å‡½æ•°å¤ç”¨ï¼Œåˆä¿è¯æ¯ä¸ªå®ä¾‹éƒ½æœ‰å®ƒè‡ªå·±çš„å±æ€§ã€‚
</code></pre><p>å…·ä½“è¯·çœ‹ï¼š<a href="http://segmentfault.com/a/1190000002440502" target="_blank" rel="external">JavaScriptç»§æ‰¿æ–¹å¼è¯¦è§£</a></p>
<h2 id="å…³äºHttp-2-0-ä½ çŸ¥é“å¤šå°‘"><a href="#å…³äºHttp-2-0-ä½ çŸ¥é“å¤šå°‘" class="headerlink" title="å…³äºHttp 2.0 ä½ çŸ¥é“å¤šå°‘"></a>å…³äºHttp 2.0 ä½ çŸ¥é“å¤šå°‘</h2><p><code>HTTP/2</code>å¼•å…¥äº†â€œæœåŠ¡ç«¯æ¨ï¼ˆserver pushï¼‰â€çš„æ¦‚å¿µï¼Œå®ƒå…è®¸æœåŠ¡ç«¯åœ¨å®¢æˆ·ç«¯éœ€è¦æ•°æ®ä¹‹å‰å°±ä¸»åŠ¨åœ°å°†æ•°æ®å‘é€åˆ°å®¢æˆ·ç«¯ç¼“å­˜ä¸­ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</p>
<p><code>HTTP/2</code>æä¾›æ›´å¤šçš„åŠ å¯†æ”¯æŒ</p>
<p><code>HTTP/2</code>ä½¿ç”¨å¤šè·¯æŠ€æœ¯ï¼Œå…è®¸å¤šä¸ªæ¶ˆæ¯åœ¨ä¸€ä¸ªè¿æ¥ä¸ŠåŒæ—¶äº¤å·®ã€‚</p>
<p>å®ƒå¢åŠ äº†å¤´å‹ç¼©ï¼ˆheader compressionï¼‰ï¼Œå› æ­¤å³ä½¿éå¸¸å°çš„è¯·æ±‚ï¼Œå…¶è¯·æ±‚å’Œå“åº”çš„<code>header</code>éƒ½åªä¼šå ç”¨å¾ˆå°æ¯”ä¾‹çš„å¸¦å®½ã€‚</p>
<p><br></p>
<h2 id="deferå’Œasync"><a href="#deferå’Œasync" class="headerlink" title="deferå’Œasync"></a>deferå’Œasync</h2><blockquote>
<p>deferå¹¶è¡ŒåŠ è½½jsæ–‡ä»¶ï¼Œä¼šæŒ‰ç…§é¡µé¢ä¸Šscriptæ ‡ç­¾çš„é¡ºåºæ‰§è¡Œ<br>asyncå¹¶è¡ŒåŠ è½½jsæ–‡ä»¶ï¼Œä¸‹è½½å®Œæˆç«‹å³æ‰§è¡Œï¼Œä¸ä¼šæŒ‰ç…§é¡µé¢ä¸Šscriptæ ‡ç­¾çš„é¡ºåºæ‰§è¡Œ</p>
</blockquote>
<h2 id="è°ˆè°ˆæµ®åŠ¨å’Œæ¸…é™¤æµ®åŠ¨"><a href="#è°ˆè°ˆæµ®åŠ¨å’Œæ¸…é™¤æµ®åŠ¨" class="headerlink" title="è°ˆè°ˆæµ®åŠ¨å’Œæ¸…é™¤æµ®åŠ¨"></a>è°ˆè°ˆæµ®åŠ¨å’Œæ¸…é™¤æµ®åŠ¨</h2><p>æµ®åŠ¨çš„æ¡†å¯ä»¥å‘å·¦æˆ–å‘å³ç§»åŠ¨ï¼Œç›´åˆ°ä»–çš„å¤–è¾¹ç¼˜ç¢°åˆ°åŒ…å«æ¡†æˆ–å¦ä¸€ä¸ªæµ®åŠ¨æ¡†çš„è¾¹æ¡†ä¸ºæ­¢ã€‚ç”±äºæµ®åŠ¨æ¡†ä¸åœ¨æ–‡æ¡£çš„æ™®é€šæµä¸­ï¼Œæ‰€ä»¥æ–‡æ¡£çš„æ™®é€šæµçš„å—æ¡†è¡¨ç°å¾—å°±åƒæµ®åŠ¨æ¡†ä¸å­˜åœ¨ä¸€æ ·ã€‚æµ®åŠ¨çš„å—æ¡†ä¼šæ¼‚æµ®åœ¨æ–‡æ¡£æ™®é€šæµçš„å—æ¡†ä¸Šã€‚</p>
<h2 id="å¦‚ä½•è¯„ä»·AngularJSå’ŒBackboneJS"><a href="#å¦‚ä½•è¯„ä»·AngularJSå’ŒBackboneJS" class="headerlink" title="å¦‚ä½•è¯„ä»·AngularJSå’ŒBackboneJS"></a>å¦‚ä½•è¯„ä»·AngularJSå’ŒBackboneJS</h2><p><code>backbone</code>å…·æœ‰ä¾èµ–æ€§ï¼Œä¾èµ–<code>underscore.js</code>ã€‚<code>Backbone + Underscore + jQuery(or Zepto)</code> å°±æ¯”ä¸€ä¸ª<code>AngularJS</code> å¤šå‡ºäº†2 æ¬¡HTTPè¯·æ±‚.</p>
<p><br></p>
<p><code>Backbone</code>çš„<code>Model</code>æ²¡æœ‰ä¸UIè§†å›¾æ•°æ®ç»‘å®šï¼Œè€Œæ˜¯éœ€è¦åœ¨Viewä¸­è‡ªè¡Œæ“ä½œDOMæ¥æ›´æ–°æˆ–è¯»å–UIæ•°æ®ã€‚<code>AngularJS</code>ä¸æ­¤ç›¸åï¼ŒModelç›´æ¥ä¸UIè§†å›¾ç»‘å®šï¼Œ<code>Model</code>ä¸UIè§†å›¾çš„å…³ç³»ï¼Œé€šè¿‡<code>directive</code>å°è£…ï¼Œ<code>AngularJS</code>å†…ç½®çš„é€šç”¨<code>directive</code>ï¼Œå°±èƒ½å®ç°å¤§éƒ¨åˆ†æ“ä½œäº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸºæœ¬ä¸å¿…å…³å¿ƒ<code>Model</code>ä¸UIè§†å›¾çš„å…³ç³»ï¼Œç›´æ¥æ“ä½œModelå°±è¡Œäº†ï¼ŒUIè§†å›¾è‡ªåŠ¨æ›´æ–°ã€‚</p>
<p><br></p>
<p><code>AngularJS</code>çš„<code>directive</code>ï¼Œä½ è¾“å…¥ç‰¹å®šæ•°æ®ï¼Œä»–å°±èƒ½è¾“å‡ºç›¸åº”UIè§†å›¾ã€‚æ˜¯ä¸€ä¸ªæ¯”è¾ƒå®Œå–„çš„å‰ç«¯MVWæ¡†æ¶ï¼ŒåŒ…å«æ¨¡æ¿ï¼Œæ•°æ®åŒå‘ç»‘å®šï¼Œè·¯ç”±ï¼Œæ¨¡å—åŒ–ï¼ŒæœåŠ¡ï¼Œä¾èµ–æ³¨å…¥ç­‰æ‰€æœ‰åŠŸèƒ½ï¼Œæ¨¡æ¿åŠŸèƒ½å¼ºå¤§ä¸°å¯Œï¼Œå¹¶ä¸”æ˜¯å£°æ˜å¼çš„ï¼Œè‡ªå¸¦äº†ä¸°å¯Œçš„ Angular æŒ‡ä»¤ã€‚</p>
<h2 id="ç”¨è¿‡å“ªäº›è®¾è®¡æ¨¡å¼"><a href="#ç”¨è¿‡å“ªäº›è®¾è®¡æ¨¡å¼" class="headerlink" title="ç”¨è¿‡å“ªäº›è®¾è®¡æ¨¡å¼"></a>ç”¨è¿‡å“ªäº›è®¾è®¡æ¨¡å¼</h2><blockquote>
<p>å·¥å‚æ¨¡å¼ï¼š</p>
</blockquote>
<pre><code>ä¸»è¦å¥½å¤„å°±æ˜¯å¯ä»¥æ¶ˆé™¤å¯¹è±¡é—´çš„è€¦åˆï¼Œé€šè¿‡ä½¿ç”¨å·¥ç¨‹æ–¹æ³•è€Œä¸æ˜¯newå…³é”®å­—ã€‚å°†æ‰€æœ‰å®ä¾‹åŒ–çš„ä»£ç é›†ä¸­åœ¨ä¸€ä¸ªä½ç½®é˜²æ­¢ä»£ç é‡å¤ã€‚

    å·¥å‚æ¨¡å¼è§£å†³äº†é‡å¤å®ä¾‹åŒ–çš„é—®é¢˜ ï¼Œä½†è¿˜æœ‰ä¸€ä¸ªé—®é¢˜,é‚£å°±æ˜¯è¯†åˆ«é—®é¢˜ï¼Œå› ä¸ºæ ¹æœ¬æ— æ³• ææ¸…æ¥šä»–ä»¬åˆ°åº•æ˜¯å“ªä¸ªå¯¹è±¡çš„å®ä¾‹ã€‚


function createObject(name,age,profession){//é›†ä¸­å®ä¾‹åŒ–çš„å‡½æ•°var obj = new Object();
    obj.name = name;
    obj.age = age;
    obj.profession = profession;
    obj.move = function () {
        return this.name + &#39; at &#39; + this.age + &#39; engaged in &#39; + this.profession;
    };
    return obj;
}
var test1 = createObject(&#39;trigkit4&#39;,22,&#39;programmer&#39;);//ç¬¬ä¸€ä¸ªå®ä¾‹var test2 = createObject(&#39;mike&#39;,25,&#39;engineer&#39;);//ç¬¬äºŒä¸ªå®ä¾‹
</code></pre><p><br></p>
<blockquote>
<p>æ„é€ å‡½æ•°æ¨¡å¼</p>
</blockquote>
<p>ä½¿ç”¨æ„é€ å‡½æ•°çš„æ–¹æ³• ï¼Œå³è§£å†³äº†é‡å¤å®ä¾‹åŒ–çš„é—®é¢˜ ï¼Œåˆè§£å†³äº†å¯¹è±¡è¯†åˆ«çš„é—®é¢˜ï¼Œè¯¥æ¨¡å¼ä¸å·¥å‚æ¨¡å¼çš„ä¸åŒä¹‹å¤„åœ¨äºï¼š</p>
<pre><code>1.æ„é€ å‡½æ•°æ–¹æ³•æ²¡æœ‰æ˜¾ç¤ºçš„åˆ›å»ºå¯¹è±¡ (new Object());

2.ç›´æ¥å°†å±æ€§å’Œæ–¹æ³•èµ‹å€¼ç»™ this å¯¹è±¡;

3.æ²¡æœ‰ renturn è¯­å¥ã€‚
</code></pre><h2 id="è¯´è¯´ä½ å¯¹é—­åŒ…çš„ç†è§£"><a href="#è¯´è¯´ä½ å¯¹é—­åŒ…çš„ç†è§£" class="headerlink" title="è¯´è¯´ä½ å¯¹é—­åŒ…çš„ç†è§£"></a>è¯´è¯´ä½ å¯¹é—­åŒ…çš„ç†è§£</h2><p>ä½¿ç”¨é—­åŒ…ä¸»è¦æ˜¯ä¸ºäº†è®¾è®¡ç§æœ‰çš„æ–¹æ³•å’Œå˜é‡ã€‚é—­åŒ…çš„ä¼˜ç‚¹æ˜¯å¯ä»¥é¿å…å…¨å±€å˜é‡çš„æ±¡æŸ“ï¼Œç¼ºç‚¹æ˜¯é—­åŒ…ä¼šå¸¸é©»å†…å­˜ï¼Œä¼šå¢å¤§å†…å­˜ä½¿ç”¨é‡ï¼Œä½¿ç”¨ä¸å½“å¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„éœ²ã€‚åœ¨jsä¸­ï¼Œå‡½æ•°å³é—­åŒ…ï¼Œåªæœ‰å‡½æ•°æ‰ä¼šäº§ç”Ÿä½œç”¨åŸŸçš„æ¦‚å¿µ</p>
<p>é—­åŒ…æœ‰ä¸‰ä¸ªç‰¹æ€§ï¼š</p>
<blockquote>
<p>1.å‡½æ•°åµŒå¥—å‡½æ•°</p>
<p>2.å‡½æ•°å†…éƒ¨å¯ä»¥å¼•ç”¨å¤–éƒ¨çš„å‚æ•°å’Œå˜é‡</p>
<p>3.å‚æ•°å’Œå˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶</p>
</blockquote>
<p> å…·ä½“è¯·çœ‹ï¼š<a href="http://segmentfault.com/a/1190000000652891" target="_blank" rel="external">è¯¦è§£jsé—­åŒ…</a></p>
<h2 id="è¯·ä½ è°ˆè°ˆCookieçš„å¼Šç«¯"><a href="#è¯·ä½ è°ˆè°ˆCookieçš„å¼Šç«¯" class="headerlink" title="è¯·ä½ è°ˆè°ˆCookieçš„å¼Šç«¯"></a>è¯·ä½ è°ˆè°ˆCookieçš„å¼Šç«¯</h2><p><code>cookie</code>è™½ç„¶åœ¨æŒä¹…ä¿å­˜å®¢æˆ·ç«¯æ•°æ®æä¾›äº†æ–¹ä¾¿ï¼Œåˆ†æ‹…äº†æœåŠ¡å™¨å­˜å‚¨çš„è´Ÿæ‹…ï¼Œä½†è¿˜æ˜¯æœ‰å¾ˆå¤šå±€é™æ€§çš„ã€‚</p>
<p>ç¬¬ä¸€ï¼šæ¯ä¸ªç‰¹å®šçš„åŸŸåä¸‹æœ€å¤šç”Ÿæˆ20ä¸ª<code>cookie</code></p>
<pre><code>1.IE6æˆ–æ›´ä½ç‰ˆæœ¬æœ€å¤š20ä¸ªcookie

2.IE7å’Œä¹‹åçš„ç‰ˆæœ¬æœ€åå¯ä»¥æœ‰50ä¸ªcookieã€‚

3.Firefoxæœ€å¤š50ä¸ªcookie

4.chromeå’ŒSafariæ²¡æœ‰åšç¡¬æ€§é™åˆ¶
</code></pre><p><code>IE</code>å’Œ<code>Opera</code> ä¼šæ¸…ç†è¿‘æœŸæœ€å°‘ä½¿ç”¨çš„<code>cookie</code>ï¼Œ<code>Firefox</code>ä¼šéšæœºæ¸…ç†<code>cookie</code>ã€‚</p>
<p><code>cookie</code>çš„æœ€å¤§å¤§çº¦ä¸º<code>4096</code>å­—èŠ‚ï¼Œä¸ºäº†å…¼å®¹æ€§ï¼Œä¸€èˆ¬ä¸èƒ½è¶…è¿‡<code>4095</code>å­—èŠ‚ã€‚</p>
<p>IE æä¾›äº†ä¸€ç§å­˜å‚¨å¯ä»¥æŒä¹…åŒ–ç”¨æˆ·æ•°æ®ï¼Œå«åš<code>userdata</code>ï¼Œä»<code>IE5.0</code>å°±å¼€å§‹æ”¯æŒã€‚æ¯ä¸ªæ•°æ®æœ€å¤š128Kï¼Œæ¯ä¸ªåŸŸåä¸‹æœ€å¤š1Mã€‚è¿™ä¸ªæŒä¹…åŒ–æ•°æ®æ”¾åœ¨ç¼“å­˜ä¸­ï¼Œå¦‚æœç¼“å­˜æ²¡æœ‰æ¸…ç†ï¼Œé‚£ä¹ˆä¼šä¸€ç›´å­˜åœ¨ã€‚</p>
<blockquote>
<p>ä¼˜ç‚¹ï¼šæé«˜çš„æ‰©å±•æ€§å’Œå¯ç”¨æ€§</p>
</blockquote>
<pre><code>1.é€šè¿‡è‰¯å¥½çš„ç¼–ç¨‹ï¼Œæ§åˆ¶ä¿å­˜åœ¨cookieä¸­çš„sessionå¯¹è±¡çš„å¤§å°ã€‚

2.é€šè¿‡åŠ å¯†å’Œå®‰å…¨ä¼ è¾“æŠ€æœ¯ï¼ˆSSLï¼‰ï¼Œå‡å°‘cookieè¢«ç ´è§£çš„å¯èƒ½æ€§ã€‚

3.åªåœ¨cookieä¸­å­˜æ”¾ä¸æ•æ„Ÿæ•°æ®ï¼Œå³ä½¿è¢«ç›—ä¹Ÿä¸ä¼šæœ‰é‡å¤§æŸå¤±ã€‚

4.æ§åˆ¶cookieçš„ç”Ÿå‘½æœŸï¼Œä½¿ä¹‹ä¸ä¼šæ°¸è¿œæœ‰æ•ˆã€‚å·ç›—è€…å¾ˆå¯èƒ½æ‹¿åˆ°ä¸€ä¸ªè¿‡æœŸçš„cookieã€‚
</code></pre><blockquote>
<p>ç¼ºç‚¹ï¼š</p>
</blockquote>
<pre><code>1.`Cookie`æ•°é‡å’Œé•¿åº¦çš„é™åˆ¶ã€‚æ¯ä¸ªdomainæœ€å¤šåªèƒ½æœ‰20æ¡cookieï¼Œæ¯ä¸ªcookieé•¿åº¦ä¸èƒ½è¶…è¿‡4KBï¼Œå¦åˆ™ä¼šè¢«æˆªæ‰.


2.å®‰å…¨æ€§é—®é¢˜ã€‚å¦‚æœcookieè¢«äººæ‹¦æˆªäº†ï¼Œé‚£äººå°±å¯ä»¥å–å¾—æ‰€æœ‰çš„sessionä¿¡æ¯ã€‚å³ä½¿åŠ å¯†ä¹Ÿä¸äº‹æ— è¡¥ï¼Œå› ä¸ºæ‹¦æˆªè€…å¹¶ä¸éœ€è¦çŸ¥é“cookieçš„æ„ä¹‰ï¼Œä»–åªè¦åŸæ ·è½¬å‘cookieå°±å¯ä»¥è¾¾åˆ°ç›®çš„äº†ã€‚

3.æœ‰äº›çŠ¶æ€ä¸å¯èƒ½ä¿å­˜åœ¨å®¢æˆ·ç«¯ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†é˜²æ­¢é‡å¤æäº¤è¡¨å•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜ä¸€ä¸ªè®¡æ•°å™¨ã€‚å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªè®¡æ•°å™¨ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆå®ƒèµ·ä¸åˆ°ä»»ä½•ä½œç”¨ã€‚
</code></pre><h2 id="æµè§ˆå™¨æœ¬åœ°å­˜å‚¨"><a href="#æµè§ˆå™¨æœ¬åœ°å­˜å‚¨" class="headerlink" title="æµè§ˆå™¨æœ¬åœ°å­˜å‚¨"></a>æµè§ˆå™¨æœ¬åœ°å­˜å‚¨</h2><p>åœ¨è¾ƒé«˜ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­ï¼Œ<code>js</code>æä¾›äº†<code>sessionStorage</code>å’Œ<code>globalStorage</code>ã€‚åœ¨<code>HTML5</code>ä¸­æä¾›äº†<code>localStorage</code>æ¥å–ä»£<code>globalStorage</code>ã€‚</p>
<p><code>html5</code>ä¸­çš„<code>Web Storage</code>åŒ…æ‹¬äº†ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼š<code>sessionStorage</code>å’Œ<code>localStorage</code>ã€‚</p>
<p><code>sessionStorage</code>ç”¨äºæœ¬åœ°å­˜å‚¨ä¸€ä¸ªä¼šè¯ï¼ˆsessionï¼‰ä¸­çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®åªæœ‰åœ¨åŒä¸€ä¸ªä¼šè¯ä¸­çš„é¡µé¢æ‰èƒ½è®¿é—®å¹¶ä¸”å½“ä¼šè¯ç»“æŸåæ•°æ®ä¹Ÿéšä¹‹é”€æ¯ã€‚å› æ­¤<code>sessionStorage</code>ä¸æ˜¯ä¸€ç§æŒä¹…åŒ–çš„æœ¬åœ°å­˜å‚¨ï¼Œä»…ä»…æ˜¯ä¼šè¯çº§åˆ«çš„å­˜å‚¨ã€‚</p>
<p>è€Œ<code>localStorage</code>ç”¨äºæŒä¹…åŒ–çš„æœ¬åœ°å­˜å‚¨ï¼Œé™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼Œå¦åˆ™æ•°æ®æ˜¯æ°¸è¿œä¸ä¼šè¿‡æœŸçš„ã€‚</p>
<h2 id="web-storageå’Œcookieçš„åŒºåˆ«"><a href="#web-storageå’Œcookieçš„åŒºåˆ«" class="headerlink" title="web storageå’Œcookieçš„åŒºåˆ«"></a>web storageå’Œcookieçš„åŒºåˆ«</h2><p><code>Web Storage</code>çš„æ¦‚å¿µå’Œ<code>cookie</code>ç›¸ä¼¼ï¼ŒåŒºåˆ«æ˜¯å®ƒæ˜¯ä¸ºäº†æ›´å¤§å®¹é‡å­˜å‚¨è®¾è®¡çš„ã€‚<code>Cookie</code>çš„å¤§å°æ˜¯å—é™çš„ï¼Œå¹¶ä¸”æ¯æ¬¡ä½ è¯·æ±‚ä¸€ä¸ªæ–°çš„é¡µé¢çš„æ—¶å€™<code>Cookie</code>éƒ½ä¼šè¢«å‘é€è¿‡å»ï¼Œè¿™æ ·æ— å½¢ä¸­æµªè´¹äº†å¸¦å®½ï¼Œå¦å¤–<code>cookie</code>è¿˜éœ€è¦æŒ‡å®šä½œç”¨åŸŸï¼Œä¸å¯ä»¥è·¨åŸŸè°ƒç”¨ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>Web Storage</code>æ‹¥æœ‰<code>setItem,getItem,removeItem,clear</code>ç­‰æ–¹æ³•ï¼Œä¸åƒ<code>cookie</code>éœ€è¦å‰ç«¯å¼€å‘è€…è‡ªå·±å°è£…<code>setCookieï¼ŒgetCookie</code>ã€‚</p>
<p>ä½†æ˜¯<code>cookie</code>ä¹Ÿæ˜¯ä¸å¯ä»¥æˆ–ç¼ºçš„ï¼š<code>cookie</code>çš„ä½œç”¨æ˜¯ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’ï¼Œä½œä¸º<code>HTTP</code>è§„èŒƒçš„ä¸€éƒ¨åˆ†è€Œå­˜åœ¨ ï¼Œè€Œ<code>Web Storage</code>ä»…ä»…æ˜¯ä¸ºäº†åœ¨æœ¬åœ°â€œå­˜å‚¨â€æ•°æ®è€Œç”Ÿ</p>
<p>æµè§ˆå™¨çš„æ”¯æŒé™¤äº†<code>IEï¼—</code>åŠä»¥ä¸‹ä¸æ”¯æŒå¤–ï¼Œå…¶ä»–æ ‡å‡†æµè§ˆå™¨éƒ½å®Œå…¨æ”¯æŒ(ieåŠFFéœ€åœ¨webæœåŠ¡å™¨é‡Œè¿è¡Œ)ï¼Œå€¼å¾—ä¸€æçš„æ˜¯IEæ€»æ˜¯åŠå¥½äº‹ï¼Œä¾‹å¦‚IE7ã€IE6ä¸­çš„<code>userData</code>å…¶å®å°±æ˜¯<code>javascript</code>æœ¬åœ°å­˜å‚¨çš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡ç®€å•çš„ä»£ç å°è£…å¯ä»¥ç»Ÿä¸€åˆ°æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒ<code>web storage</code>ã€‚</p>
<p><code>localStorage</code>å’Œ<code>sessionStorage</code>éƒ½å…·æœ‰ç›¸åŒçš„æ“ä½œæ–¹æ³•ï¼Œä¾‹å¦‚<code>setItemã€getItem</code>å’Œ<code>removeItem</code>ç­‰</p>
<h2 id="cookie-å’Œsession-çš„åŒºåˆ«ï¼š"><a href="#cookie-å’Œsession-çš„åŒºåˆ«ï¼š" class="headerlink" title="cookie å’Œsession çš„åŒºåˆ«ï¼š"></a>cookie å’Œsession çš„åŒºåˆ«ï¼š</h2><pre><code> 1ã€cookieæ•°æ®å­˜æ”¾åœ¨å®¢æˆ·çš„æµè§ˆå™¨ä¸Šï¼Œsessionæ•°æ®æ”¾åœ¨æœåŠ¡å™¨ä¸Šã€‚

 2ã€cookieä¸æ˜¯å¾ˆå®‰å…¨ï¼Œåˆ«äººå¯ä»¥åˆ†æå­˜æ”¾åœ¨æœ¬åœ°çš„COOKIEå¹¶è¿›è¡ŒCOOKIEæ¬ºéª—

    è€ƒè™‘åˆ°å®‰å…¨åº”å½“ä½¿ç”¨sessionã€‚

 3ã€sessionä¼šåœ¨ä¸€å®šæ—¶é—´å†…ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚å½“è®¿é—®å¢å¤šï¼Œä¼šæ¯”è¾ƒå ç”¨ä½ æœåŠ¡å™¨çš„æ€§èƒ½

     è€ƒè™‘åˆ°å‡è½»æœåŠ¡å™¨æ€§èƒ½æ–¹é¢ï¼Œåº”å½“ä½¿ç”¨COOKIEã€‚

 4ã€å•ä¸ªcookieä¿å­˜çš„æ•°æ®ä¸èƒ½è¶…è¿‡4Kï¼Œå¾ˆå¤šæµè§ˆå™¨éƒ½é™åˆ¶ä¸€ä¸ªç«™ç‚¹æœ€å¤šä¿å­˜20ä¸ªcookieã€‚

 5ã€æ‰€ä»¥ä¸ªäººå»ºè®®ï¼š

    å°†ç™»é™†ä¿¡æ¯ç­‰é‡è¦ä¿¡æ¯å­˜æ”¾ä¸ºSESSION

    å…¶ä»–ä¿¡æ¯å¦‚æœéœ€è¦ä¿ç•™ï¼Œå¯ä»¥æ”¾åœ¨COOKIEä¸­
</code></pre><blockquote>
<p><code>display:none</code>å’Œ<code>visibility:hidden</code>çš„åŒºåˆ«ï¼Ÿ</p>
</blockquote>
<pre><code>display:none  éšè—å¯¹åº”çš„å…ƒç´ ï¼Œåœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä¸å†ç»™å®ƒåˆ†é…ç©ºé—´ï¼Œå®ƒå„è¾¹çš„å…ƒç´ ä¼šåˆæ‹¢ï¼Œå°±å½“ä»–ä»æ¥ä¸å­˜åœ¨ã€‚

visibility:hidden  éšè—å¯¹åº”çš„å…ƒç´ ï¼Œä½†æ˜¯åœ¨æ–‡æ¡£å¸ƒå±€ä¸­ä»ä¿ç•™åŸæ¥çš„ç©ºé—´ã€‚
</code></pre><blockquote>
<p>CSSä¸­<code>link</code> å’Œ<code>@import</code>çš„åŒºåˆ«æ˜¯ï¼Ÿ</p>
</blockquote>
<pre><code>(1) linkå±äºHTMLæ ‡ç­¾ï¼Œè€Œ@importæ˜¯CSSæä¾›çš„;

(2) é¡µé¢è¢«åŠ è½½çš„æ—¶ï¼Œlinkä¼šåŒæ—¶è¢«åŠ è½½ï¼Œè€Œ@importè¢«å¼•ç”¨çš„CSSä¼šç­‰åˆ°å¼•ç”¨å®ƒçš„CSSæ–‡ä»¶è¢«åŠ è½½å®Œå†åŠ è½½;

(3) importåªåœ¨IE5ä»¥ä¸Šæ‰èƒ½è¯†åˆ«ï¼Œè€Œlinkæ˜¯HTMLæ ‡ç­¾ï¼Œæ— å…¼å®¹é—®é¢˜;

(4) linkæ–¹å¼çš„æ ·å¼çš„æƒé‡ é«˜äº@importçš„æƒé‡.
</code></pre><blockquote>
<p><code>position:absolute</code>å’Œ<code>float</code>å±æ€§çš„å¼‚åŒ</p>
</blockquote>
<ul>
<li>å…±åŒç‚¹ï¼šå¯¹å†…è”å…ƒç´ è®¾ç½®<code>float</code>å’Œ<code>absolute</code>å±æ€§ï¼Œå¯ä»¥è®©å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®å…¶å®½é«˜ã€‚</li>
</ul>
<ul>
<li>ä¸åŒç‚¹ï¼š<code>float</code>ä»ä¼šå æ®ä½ç½®ï¼Œ<code>absolute</code>ä¼šè¦†ç›–æ–‡æ¡£æµä¸­çš„å…¶ä»–å…ƒç´ ã€‚</li>
</ul>
<blockquote>
<p>ä»‹ç»ä¸€ä¸‹box-sizingå±æ€§ï¼Ÿ</p>
</blockquote>
<p><code>box-sizing</code>å±æ€§ä¸»è¦ç”¨æ¥æ§åˆ¶å…ƒç´ çš„ç›’æ¨¡å‹çš„è§£ææ¨¡å¼ã€‚é»˜è®¤å€¼æ˜¯<code>content-box</code>ã€‚</p>
<ul>
<li><p><code>content-box</code>ï¼šè®©å…ƒç´ ç»´æŒW3Cçš„æ ‡å‡†ç›’æ¨¡å‹ã€‚å…ƒç´ çš„å®½åº¦/é«˜åº¦ç”±<code>border + padding + content</code>çš„å®½åº¦/é«˜åº¦å†³å®šï¼Œè®¾ç½®<code>width/height</code>å±æ€§æŒ‡çš„æ˜¯<code>content</code>éƒ¨åˆ†çš„å®½/é«˜</p>
</li>
<li><p><code>border-box</code>ï¼šè®©å…ƒç´ ç»´æŒIEä¼ ç»Ÿç›’æ¨¡å‹ï¼ˆIE6ä»¥ä¸‹ç‰ˆæœ¬å’ŒIE6~7çš„æ€ªå¼‚æ¨¡å¼ï¼‰ã€‚è®¾ç½®<code>width/height</code>å±æ€§æŒ‡çš„æ˜¯<code>border + padding + content</code></p>
</li>
</ul>
<p>æ ‡å‡†æµè§ˆå™¨ä¸‹ï¼ŒæŒ‰ç…§W3Cè§„èŒƒå¯¹ç›’æ¨¡å‹è§£æï¼Œä¸€æ—¦ä¿®æ”¹äº†å…ƒç´ çš„è¾¹æ¡†æˆ–å†…è·ï¼Œå°±ä¼šå½±å“å…ƒç´ çš„ç›’å­å°ºå¯¸ï¼Œå°±ä¸å¾—ä¸é‡æ–°è®¡ç®—å…ƒç´ çš„ç›’å­å°ºå¯¸ï¼Œä»è€Œå½±å“æ•´ä¸ªé¡µé¢çš„å¸ƒå±€ã€‚</p>
<blockquote>
<p>CSS é€‰æ‹©ç¬¦æœ‰å“ªäº›ï¼Ÿå“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿä¼˜å…ˆçº§ç®—æ³•å¦‚ä½•è®¡ç®—ï¼Ÿ CSS3æ–°å¢ä¼ªç±»æœ‰é‚£äº›ï¼Ÿ</p>
</blockquote>
<pre><code class="css">    1.idé€‰æ‹©å™¨ï¼ˆ # myidï¼‰

    2.ç±»é€‰æ‹©å™¨ï¼ˆ.myclassnameï¼‰

    3.æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆdiv, h1, pï¼‰

    4.ç›¸é‚»é€‰æ‹©å™¨ï¼ˆh1 + pï¼‰

    5.å­é€‰æ‹©å™¨ï¼ˆul &gt; liï¼‰

    6.åä»£é€‰æ‹©å™¨ï¼ˆli aï¼‰

    7.é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ * ï¼‰

    8.å±æ€§é€‰æ‹©å™¨ï¼ˆa[rel = &quot;external&quot;]ï¼‰

    9.ä¼ªç±»é€‰æ‹©å™¨ï¼ˆa: hover, li:nth-childï¼‰
</code></pre>
<p><strong>ä¼˜å…ˆçº§ä¸º:</strong></p>
<p><code>!important &gt;  id &gt; class &gt; tag</code></p>
<p><code>important</code> æ¯” å†…è”ä¼˜å…ˆçº§é«˜,ä½†å†…è”æ¯” <code>id</code> è¦é«˜</p>
<blockquote>
<p>CSS3æ–°å¢ä¼ªç±»ä¸¾ä¾‹ï¼š</p>
</blockquote>
<pre><code class="css">    p:first-of-type é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„é¦–ä¸ª &lt;p&gt; å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚

    p:last-of-type  é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„æœ€å &lt;p&gt; å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚

    p:only-of-type  é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ å”¯ä¸€çš„ &lt;p&gt; å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚

    p:only-child    é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„å”¯ä¸€å­å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚

    p:nth-child(2)  é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„ç¬¬äºŒä¸ªå­å…ƒç´ çš„æ¯ä¸ª &lt;p&gt; å…ƒç´ ã€‚

    :enabled  :disabled æ§åˆ¶è¡¨å•æ§ä»¶çš„ç¦ç”¨çŠ¶æ€ã€‚

    :checked        å•é€‰æ¡†æˆ–å¤é€‰æ¡†è¢«é€‰ä¸­ã€‚
</code></pre>
<blockquote>
<p>CSS3æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ</p>
</blockquote>
<pre><code>CSS3å®ç°åœ†è§’ï¼ˆborder-radiusï¼‰ï¼Œé˜´å½±ï¼ˆbox-shadowï¼‰ï¼Œ

å¯¹æ–‡å­—åŠ ç‰¹æ•ˆï¼ˆtext-shadowã€ï¼‰ï¼Œçº¿æ€§æ¸å˜ï¼ˆgradientï¼‰ï¼Œæ—‹è½¬ï¼ˆtransformï¼‰

transform:rotate(9deg) scale(0.85,0.90) translate(0px,-30px) skew(-9deg,0deg);//æ—‹è½¬,ç¼©æ”¾,å®šä½,å€¾æ–œ

å¢åŠ äº†æ›´å¤šçš„CSSé€‰æ‹©å™¨  å¤šèƒŒæ™¯ rgba

åœ¨CSS3ä¸­å”¯ä¸€å¼•å…¥çš„ä¼ªå…ƒç´ æ˜¯::selection.

åª’ä½“æŸ¥è¯¢ï¼Œå¤šæ å¸ƒå±€

border-image
</code></pre><p>CSS3ä¸­æ–°å¢äº†ä¸€ç§ç›’æ¨¡å‹è®¡ç®—æ–¹å¼ï¼š<code>box-sizing</code>ã€‚ç›’æ¨¡å‹é»˜è®¤çš„å€¼æ˜¯<code>content-box</code>, æ–°å¢çš„å€¼æ˜¯<code>padding-box</code>å’Œ<code>border-box</code>ï¼Œå‡ ç§ç›’æ¨¡å‹è®¡ç®—å…ƒç´ å®½é«˜çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p>
<h2 id="content-boxï¼ˆé»˜è®¤ï¼‰"><a href="#content-boxï¼ˆé»˜è®¤ï¼‰" class="headerlink" title="content-boxï¼ˆé»˜è®¤ï¼‰"></a>content-boxï¼ˆé»˜è®¤ï¼‰</h2><p>å¸ƒå±€æ‰€å å®½åº¦Widthï¼š</p>
<pre><code class="css">Width = width + padding-left + padding-right + border-left + border-right
</code></pre>
<p>å¸ƒå±€æ‰€å é«˜åº¦Height:</p>
<pre><code class="css">Height = height + padding-top + padding-bottom + border-top + border-bottom
</code></pre>
<h2 id="padding-box"><a href="#padding-box" class="headerlink" title="padding-box"></a>padding-box</h2><p>å¸ƒå±€æ‰€å å®½åº¦Widthï¼š</p>
<pre><code class="css">Width = width(åŒ…å«padding-left + padding-right) + border-top + border-bottom
</code></pre>
<p>å¸ƒå±€æ‰€å é«˜åº¦Height:</p>
<pre><code class="css">Height = height(åŒ…å«padding-top + padding-bottom) + border-top + border-bottom
</code></pre>
<h2 id="border-box"><a href="#border-box" class="headerlink" title="border-box"></a>border-box</h2><p>å¸ƒå±€æ‰€å å®½åº¦Widthï¼š</p>
<pre><code class="css">Width = width(åŒ…å«padding-left + padding-right + border-left + border-right)
</code></pre>
<p>å¸ƒå±€æ‰€å é«˜åº¦Height:</p>
<pre><code class="css">Height = height(åŒ…å«padding-top + padding-bottom + border-top + border-bottom)
</code></pre>
<blockquote>
<p>å¯¹BFCè§„èŒƒçš„ç†è§£ï¼Ÿ</p>
</blockquote>
<pre><code>      BFCï¼Œå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œä¸€ä¸ªåˆ›å»ºäº†æ–°çš„BFCçš„ç›’å­æ˜¯ç‹¬ç«‹å¸ƒå±€çš„ï¼Œç›’å­é‡Œé¢çš„å­å…ƒç´ çš„æ ·å¼ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ã€‚åœ¨åŒä¸€ä¸ªBFCä¸­çš„ä¸¤ä¸ªæ¯—é‚»çš„å—çº§ç›’åœ¨å‚ç›´æ–¹å‘ï¼ˆå’Œå¸ƒå±€æ–¹å‘æœ‰å…³ç³»ï¼‰çš„marginä¼šå‘ç”ŸæŠ˜å ã€‚

    ï¼ˆW3C CSS 2.1 è§„èŒƒä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå®ƒå†³å®šäº†å…ƒç´ å¦‚ä½•å¯¹å…¶å†…å®¹è¿›è¡Œå¸ƒå±€ï¼Œä»¥åŠä¸å…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚
</code></pre><h2 id="è¯´è¯´ä½ å¯¹è¯­ä¹‰åŒ–çš„ç†è§£"><a href="#è¯´è¯´ä½ å¯¹è¯­ä¹‰åŒ–çš„ç†è§£" class="headerlink" title="è¯´è¯´ä½ å¯¹è¯­ä¹‰åŒ–çš„ç†è§£"></a>è¯´è¯´ä½ å¯¹è¯­ä¹‰åŒ–çš„ç†è§£</h2><pre><code>1ï¼Œå»æ‰æˆ–è€…ä¸¢å¤±æ ·å¼çš„æ—¶å€™èƒ½å¤Ÿè®©é¡µé¢å‘ˆç°å‡ºæ¸…æ™°çš„ç»“æ„

2ï¼Œæœ‰åˆ©äºSEOï¼šå’Œæœç´¢å¼•æ“å»ºç«‹è‰¯å¥½æ²Ÿé€šï¼Œæœ‰åŠ©äºçˆ¬è™«æŠ“å–æ›´å¤šçš„æœ‰æ•ˆä¿¡æ¯ï¼šçˆ¬è™«ä¾èµ–äºæ ‡ç­¾æ¥ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ï¼›

3ï¼Œæ–¹ä¾¿å…¶ä»–è®¾å¤‡è§£æï¼ˆå¦‚å±å¹•é˜…è¯»å™¨ã€ç›²äººé˜…è¯»å™¨ã€ç§»åŠ¨è®¾å¤‡ï¼‰ä»¥æ„ä¹‰çš„æ–¹å¼æ¥æ¸²æŸ“ç½‘é¡µï¼›

4ï¼Œä¾¿äºå›¢é˜Ÿå¼€å‘å’Œç»´æŠ¤ï¼Œè¯­ä¹‰åŒ–æ›´å…·å¯è¯»æ€§ï¼Œæ˜¯ä¸‹ä¸€æ­¥å§ç½‘é¡µçš„é‡è¦åŠ¨å‘ï¼Œéµå¾ªW3Cæ ‡å‡†çš„å›¢é˜Ÿéƒ½éµå¾ªè¿™ä¸ªæ ‡å‡†ï¼Œå¯ä»¥å‡å°‘å·®å¼‚åŒ–ã€‚
</code></pre><h2 id="Doctypeä½œç”¨-ä¸¥æ ¼æ¨¡å¼ä¸æ··æ‚æ¨¡å¼å¦‚ä½•åŒºåˆ†ï¼Ÿå®ƒä»¬æœ‰ä½•æ„ä¹‰"><a href="#Doctypeä½œç”¨-ä¸¥æ ¼æ¨¡å¼ä¸æ··æ‚æ¨¡å¼å¦‚ä½•åŒºåˆ†ï¼Ÿå®ƒä»¬æœ‰ä½•æ„ä¹‰" class="headerlink" title="Doctypeä½œç”¨? ä¸¥æ ¼æ¨¡å¼ä¸æ··æ‚æ¨¡å¼å¦‚ä½•åŒºåˆ†ï¼Ÿå®ƒä»¬æœ‰ä½•æ„ä¹‰?"></a>Doctypeä½œç”¨? ä¸¥æ ¼æ¨¡å¼ä¸æ··æ‚æ¨¡å¼å¦‚ä½•åŒºåˆ†ï¼Ÿå®ƒä»¬æœ‰ä½•æ„ä¹‰?</h2><p>1ï¼‰ã€<code>&lt;!DOCTYPE&gt;</code> å£°æ˜ä½äºæ–‡æ¡£ä¸­çš„æœ€å‰é¢ï¼Œå¤„äº <code>&lt;html&gt;</code> æ ‡ç­¾ä¹‹å‰ã€‚å‘ŠçŸ¥æµè§ˆå™¨ä»¥ä½•ç§æ¨¡å¼æ¥æ¸²æŸ“æ–‡æ¡£ã€‚</p>
<p>2ï¼‰ã€ä¸¥æ ¼æ¨¡å¼çš„æ’ç‰ˆå’Œ <code>JS</code> è¿ä½œæ¨¡å¼æ˜¯  ä»¥è¯¥æµè§ˆå™¨æ”¯æŒçš„æœ€é«˜æ ‡å‡†è¿è¡Œã€‚</p>
<p>3ï¼‰ã€åœ¨æ··æ‚æ¨¡å¼ä¸­ï¼Œé¡µé¢ä»¥å®½æ¾çš„å‘åå…¼å®¹çš„æ–¹å¼æ˜¾ç¤ºã€‚æ¨¡æ‹Ÿè€å¼æµè§ˆå™¨çš„è¡Œä¸ºä»¥é˜²æ­¢ç«™ç‚¹æ— æ³•å·¥ä½œã€‚</p>
<p>4ï¼‰ã€<code>DOCTYPE</code>ä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®ä¼šå¯¼è‡´æ–‡æ¡£ä»¥æ··æ‚æ¨¡å¼å‘ˆç°ã€‚</p>
<h2 id="ä½ çŸ¥é“å¤šå°‘ç§Doctypeæ–‡æ¡£ç±»å‹ï¼Ÿ"><a href="#ä½ çŸ¥é“å¤šå°‘ç§Doctypeæ–‡æ¡£ç±»å‹ï¼Ÿ" class="headerlink" title="ä½ çŸ¥é“å¤šå°‘ç§Doctypeæ–‡æ¡£ç±»å‹ï¼Ÿ"></a>ä½ çŸ¥é“å¤šå°‘ç§<code>Doctype</code>æ–‡æ¡£ç±»å‹ï¼Ÿ</h2><pre><code> è¯¥æ ‡ç­¾å¯å£°æ˜ä¸‰ç§ DTD ç±»å‹ï¼Œåˆ†åˆ«è¡¨ç¤ºä¸¥æ ¼ç‰ˆæœ¬ã€è¿‡æ¸¡ç‰ˆæœ¬ä»¥åŠåŸºäºæ¡†æ¶çš„ HTML æ–‡æ¡£ã€‚

 HTML 4.01 è§„å®šäº†ä¸‰ç§æ–‡æ¡£ç±»å‹ï¼šStrictã€Transitional ä»¥åŠ Framesetã€‚

 XHTML 1.0 è§„å®šäº†ä¸‰ç§ XML æ–‡æ¡£ç±»å‹ï¼šStrictã€Transitional ä»¥åŠ Framesetã€‚

Standards ï¼ˆæ ‡å‡†ï¼‰æ¨¡å¼ï¼ˆä¹Ÿå°±æ˜¯ä¸¥æ ¼å‘ˆç°æ¨¡å¼ï¼‰ç”¨äºå‘ˆç°éµå¾ªæœ€æ–°æ ‡å‡†çš„ç½‘é¡µï¼Œè€Œ Quirks

 ï¼ˆåŒ…å®¹ï¼‰æ¨¡å¼ï¼ˆä¹Ÿå°±æ˜¯æ¾æ•£å‘ˆç°æ¨¡å¼æˆ–è€…å…¼å®¹æ¨¡å¼ï¼‰ç”¨äºå‘ˆç°ä¸ºä¼ ç»Ÿæµè§ˆå™¨è€Œè®¾è®¡çš„ç½‘é¡µã€‚
</code></pre><h2 id="HTMLä¸XHTMLâ€”â€”äºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#HTMLä¸XHTMLâ€”â€”äºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="HTMLä¸XHTMLâ€”â€”äºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«"></a>HTMLä¸XHTMLâ€”â€”äºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«</h2><pre><code>åŒºåˆ«ï¼š

1.æ‰€æœ‰çš„æ ‡è®°éƒ½å¿…é¡»è¦æœ‰ä¸€ä¸ªç›¸åº”çš„ç»“æŸæ ‡è®°

2.æ‰€æœ‰æ ‡ç­¾çš„å…ƒç´ å’Œå±æ€§çš„åå­—éƒ½å¿…é¡»ä½¿ç”¨å°å†™

3.æ‰€æœ‰çš„XMLæ ‡è®°éƒ½å¿…é¡»åˆç†åµŒå¥—

4.æ‰€æœ‰çš„å±æ€§å¿…é¡»ç”¨å¼•å·&quot;&quot;æ‹¬èµ·æ¥

5.æŠŠæ‰€æœ‰&lt;å’Œ&amp;ç‰¹æ®Šç¬¦å·ç”¨ç¼–ç è¡¨ç¤º

6.ç»™æ‰€æœ‰å±æ€§èµ‹ä¸€ä¸ªå€¼

7.ä¸è¦åœ¨æ³¨é‡Šå†…å®¹ä¸­ä½¿â€œ--â€

8.å›¾ç‰‡å¿…é¡»æœ‰è¯´æ˜æ–‡å­—
</code></pre><h2 id="å¸¸è§å…¼å®¹æ€§é—®é¢˜"><a href="#å¸¸è§å…¼å®¹æ€§é—®é¢˜" class="headerlink" title="å¸¸è§å…¼å®¹æ€§é—®é¢˜"></a>å¸¸è§å…¼å®¹æ€§é—®é¢˜</h2><pre><code>png24ä½çš„å›¾ç‰‡åœ¨iE6æµè§ˆå™¨ä¸Šå‡ºç°èƒŒæ™¯ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åšæˆPNG8.ä¹Ÿå¯ä»¥å¼•ç”¨ä¸€æ®µè„šæœ¬å¤„ç†.

æµè§ˆå™¨é»˜è®¤çš„marginå’Œpaddingä¸åŒã€‚è§£å†³æ–¹æ¡ˆæ˜¯åŠ ä¸€ä¸ªå…¨å±€çš„*{margin:0;padding:0;}æ¥ç»Ÿä¸€ã€‚

IE6åŒè¾¹è·bug:å—å±æ€§æ ‡ç­¾floatåï¼Œåˆæœ‰æ¨ªè¡Œçš„marginæƒ…å†µä¸‹ï¼Œåœ¨ie6æ˜¾ç¤ºmarginæ¯”è®¾ç½®çš„å¤§ã€‚

æµ®åŠ¨ieäº§ç”Ÿçš„åŒå€è·ç¦»ï¼ˆIE6åŒè¾¹è·é—®é¢˜ï¼šåœ¨IE6ä¸‹ï¼Œå¦‚æœå¯¹å…ƒç´ è®¾ç½®äº†æµ®åŠ¨ï¼ŒåŒæ—¶åˆè®¾ç½®äº†margin-leftæˆ–margin-rightï¼Œmarginå€¼ä¼šåŠ å€ã€‚ï¼‰

#box{ float:left; width:10px; margin:0 0 0 100px;}

è¿™ç§æƒ…å†µä¹‹ä¸‹IEä¼šäº§ç”Ÿ20pxçš„è·ç¦»ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨floatçš„æ ‡ç­¾æ ·å¼æ§åˆ¶ä¸­åŠ å…¥
_display:inline;å°†å…¶è½¬åŒ–ä¸ºè¡Œå†…å±æ€§ã€‚(_è¿™ä¸ªç¬¦å·åªæœ‰ie6ä¼šè¯†åˆ«)

æ¸è¿›è¯†åˆ«çš„æ–¹å¼ï¼Œä»æ€»ä½“ä¸­é€æ¸æ’é™¤å±€éƒ¨ã€‚


  é¦–å…ˆï¼Œå·§å¦™çš„ä½¿ç”¨â€œ\9â€è¿™ä¸€æ ‡è®°ï¼Œå°†IEæ¸¸è§ˆå™¨ä»æ‰€æœ‰æƒ…å†µä¸­åˆ†ç¦»å‡ºæ¥ã€‚

  æ¥ç€ï¼Œå†æ¬¡ä½¿ç”¨â€œ+â€å°†IE8å’ŒIE7ã€IE6åˆ†ç¦»å¼€æ¥ï¼Œè¿™æ ·IE8å·²ç»ç‹¬ç«‹è¯†åˆ«ã€‚

  css

      .bb{

       background-color:#f1ee18;/*æ‰€æœ‰è¯†åˆ«*/

      .background-color:#00deff\9; /*IE6ã€7ã€8è¯†åˆ«*/

      +background-color:#a200ff;/*IE6ã€7è¯†åˆ«*/

      _background-color:#1e0bd1;/*IE6è¯†åˆ«*/

      }


æ€ªå¼‚æ¨¡å¼é—®é¢˜ï¼šæ¼å†™DTDå£°æ˜ï¼ŒFirefoxä»ç„¶ä¼šæŒ‰ç…§æ ‡å‡†æ¨¡å¼æ¥è§£æç½‘é¡µï¼Œä½†åœ¨IEä¸­ä¼šè§¦å‘
æ€ªå¼‚æ¨¡å¼ã€‚ä¸ºé¿å…æ€ªå¼‚æ¨¡å¼ç»™æˆ‘ä»¬å¸¦æ¥ä¸å¿…è¦çš„éº»çƒ¦ï¼Œæœ€å¥½å…»æˆä¹¦å†™DTDå£°æ˜çš„å¥½ä¹ æƒ¯ã€‚ç°åœ¨
å¯ä»¥ä½¿ç”¨[html5](http://www.w3.org/TR/html5/single-page.html)æ¨èçš„å†™æ³•ï¼š`&lt;doctype html&gt;`
</code></pre><blockquote>
<p>ä¸Šä¸‹marginé‡åˆé—®é¢˜</p>
</blockquote>
<pre><code>ieå’Œfféƒ½å­˜åœ¨ï¼Œç›¸é‚»çš„ä¸¤ä¸ªdivçš„margin-leftå’Œmargin-rightä¸ä¼šé‡åˆï¼Œä½†æ˜¯margin-topå’Œmargin-bottomå´ä¼šå‘ç”Ÿé‡åˆã€‚

è§£å†³æ–¹æ³•ï¼Œå…»æˆè‰¯å¥½çš„ä»£ç ç¼–å†™ä¹ æƒ¯ï¼ŒåŒæ—¶é‡‡ç”¨margin-topæˆ–è€…åŒæ—¶é‡‡ç”¨margin-bottomã€‚
</code></pre><h2 id="è§£é‡Šä¸‹æµ®åŠ¨å’Œå®ƒçš„å·¥ä½œåŸç†ï¼Ÿæ¸…é™¤æµ®åŠ¨çš„æŠ€å·§"><a href="#è§£é‡Šä¸‹æµ®åŠ¨å’Œå®ƒçš„å·¥ä½œåŸç†ï¼Ÿæ¸…é™¤æµ®åŠ¨çš„æŠ€å·§" class="headerlink" title="è§£é‡Šä¸‹æµ®åŠ¨å’Œå®ƒçš„å·¥ä½œåŸç†ï¼Ÿæ¸…é™¤æµ®åŠ¨çš„æŠ€å·§"></a>è§£é‡Šä¸‹æµ®åŠ¨å’Œå®ƒçš„å·¥ä½œåŸç†ï¼Ÿæ¸…é™¤æµ®åŠ¨çš„æŠ€å·§</h2><pre><code>æµ®åŠ¨å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œä¸å æ®ç©ºé—´ã€‚æµ®åŠ¨å…ƒç´ ç¢°åˆ°åŒ…å«å®ƒçš„è¾¹æ¡†æˆ–è€…æµ®åŠ¨å…ƒç´ çš„è¾¹æ¡†åœç•™ã€‚


1.ä½¿ç”¨ç©ºæ ‡ç­¾æ¸…é™¤æµ®åŠ¨ã€‚

   è¿™ç§æ–¹æ³•æ˜¯åœ¨æ‰€æœ‰æµ®åŠ¨æ ‡ç­¾åé¢æ·»åŠ ä¸€ä¸ªç©ºæ ‡ç­¾ å®šä¹‰css clear:both. å¼Šç«¯å°±æ˜¯å¢åŠ äº†æ— æ„ä¹‰æ ‡ç­¾ã€‚

2.ä½¿ç”¨overflowã€‚

   ç»™åŒ…å«æµ®åŠ¨å…ƒç´ çš„çˆ¶æ ‡ç­¾æ·»åŠ csså±æ€§ overflow:auto; zoom:1; zoom:1ç”¨äºå…¼å®¹IE6ã€‚

3.ä½¿ç”¨afterä¼ªå¯¹è±¡æ¸…é™¤æµ®åŠ¨ã€‚

   è¯¥æ–¹æ³•åªé€‚ç”¨äºéIEæµè§ˆå™¨ã€‚å…·ä½“å†™æ³•å¯å‚ç…§ä»¥ä¸‹ç¤ºä¾‹ã€‚ä½¿ç”¨ä¸­éœ€æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ã€‚ä¸€ã€è¯¥æ–¹æ³•ä¸­å¿…é¡»ä¸ºéœ€è¦æ¸…é™¤æµ®åŠ¨å…ƒç´ çš„ä¼ªå¯¹è±¡ä¸­è®¾ç½® height:0ï¼Œå¦åˆ™è¯¥å…ƒç´ ä¼šæ¯”å®é™…é«˜å‡ºè‹¥å¹²åƒç´ ï¼›
</code></pre><h2 id="æµ®åŠ¨å…ƒç´ å¼•èµ·çš„é—®é¢˜å’Œè§£å†³åŠæ³•ï¼Ÿ"><a href="#æµ®åŠ¨å…ƒç´ å¼•èµ·çš„é—®é¢˜å’Œè§£å†³åŠæ³•ï¼Ÿ" class="headerlink" title="æµ®åŠ¨å…ƒç´ å¼•èµ·çš„é—®é¢˜å’Œè§£å†³åŠæ³•ï¼Ÿ"></a>æµ®åŠ¨å…ƒç´ å¼•èµ·çš„é—®é¢˜å’Œè§£å†³åŠæ³•ï¼Ÿ</h2><pre><code>æµ®åŠ¨å…ƒç´ å¼•èµ·çš„é—®é¢˜ï¼š

ï¼ˆ1ï¼‰çˆ¶å…ƒç´ çš„é«˜åº¦æ— æ³•è¢«æ’‘å¼€ï¼Œå½±å“ä¸çˆ¶å…ƒç´ åŒçº§çš„å…ƒç´ 

ï¼ˆ2ï¼‰ä¸æµ®åŠ¨å…ƒç´ åŒçº§çš„éæµ®åŠ¨å…ƒç´ ï¼ˆå†…è”å…ƒç´ ï¼‰ä¼šè·Ÿéšå…¶å

ï¼ˆ3ï¼‰è‹¥éç¬¬ä¸€ä¸ªå…ƒç´ æµ®åŠ¨ï¼Œåˆ™è¯¥å…ƒç´ ä¹‹å‰çš„å…ƒç´ ä¹Ÿéœ€è¦æµ®åŠ¨ï¼Œå¦åˆ™ä¼šå½±å“é¡µé¢æ˜¾ç¤ºçš„ç»“æ„
</code></pre><blockquote>
<p>è§£å†³æ–¹æ³•ï¼š</p>
</blockquote>
<p>ä½¿ç”¨<code>CSS</code>ä¸­çš„<code>clear:both</code>;å±æ€§æ¥æ¸…é™¤å…ƒç´ çš„æµ®åŠ¨å¯è§£å†³2ã€3é—®é¢˜ï¼Œå¯¹äºé—®é¢˜1ï¼Œæ·»åŠ å¦‚ä¸‹æ ·å¼ï¼Œç»™çˆ¶å…ƒç´ æ·»åŠ <code>clearfix</code>æ ·å¼ï¼š</p>
<pre><code class="css">    .clearfix:after{content: &quot;.&quot;;display: block;height: 0;clear: both;visibility: hidden;}

    .clearfix{display: inline-block;} /* for IE/Mac */
</code></pre>
<p><strong>æ¸…é™¤æµ®åŠ¨çš„å‡ ç§æ–¹æ³•ï¼š</strong></p>
<pre><code class="css">    1ï¼Œé¢å¤–æ ‡ç­¾æ³•ï¼Œ&lt;div style=&quot;clear:both;&quot;&gt;&lt;/div&gt;ï¼ˆç¼ºç‚¹ï¼šä¸è¿‡è¿™ä¸ªåŠæ³•ä¼šå¢åŠ é¢å¤–çš„æ ‡ç­¾ä½¿HTMLç»“æ„çœ‹èµ·æ¥ä¸å¤Ÿç®€æ´ã€‚ï¼‰

    2ï¼Œä½¿ç”¨afterä¼ªç±»

    #parent:after{

        content:&quot;.&quot;;

        height:0;

        visibility:hidden;

        display:block;

        clear:both;

        }


    3,æµ®åŠ¨å¤–éƒ¨å…ƒç´ 

    4,è®¾ç½®overflowä¸ºhiddenæˆ–è€…auto
</code></pre>
<h2 id="DOMæ“ä½œâ€”â€”æ€æ ·æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ã€‚"><a href="#DOMæ“ä½œâ€”â€”æ€æ ·æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ã€‚" class="headerlink" title="DOMæ“ä½œâ€”â€”æ€æ ·æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ã€‚"></a>DOMæ“ä½œâ€”â€”æ€æ ·æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ã€‚</h2><blockquote>
<p>1ï¼‰åˆ›å»ºæ–°èŠ‚ç‚¹</p>
</blockquote>
<pre><code>      createDocumentFragment()    //åˆ›å»ºä¸€ä¸ªDOMç‰‡æ®µ

      createElement()   //åˆ›å»ºä¸€ä¸ªå…·ä½“çš„å…ƒç´ 

      createTextNode()   //åˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹
</code></pre><blockquote>
<p>2ï¼‰æ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ã€æ’å…¥</p>
</blockquote>
<pre><code>      appendChild()

      removeChild()

      replaceChild()

      insertBefore() //å¹¶æ²¡æœ‰insertAfter()
</code></pre><blockquote>
<p>3ï¼‰æŸ¥æ‰¾</p>
</blockquote>
<pre><code>      getElementsByTagName()    //é€šè¿‡æ ‡ç­¾åç§°

      getElementsByName()    //é€šè¿‡å…ƒç´ çš„Nameå±æ€§çš„å€¼(IEå®¹é”™èƒ½åŠ›è¾ƒå¼ºï¼Œ
      ä¼šå¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…æ‹¬idç­‰äºnameå€¼çš„)

      getElementById()    //é€šè¿‡å…ƒç´ Idï¼Œå”¯ä¸€æ€§
</code></pre><h2 id="html5æœ‰å“ªäº›æ–°ç‰¹æ€§ã€ç§»é™¤äº†é‚£äº›å…ƒç´ ï¼Ÿå¦‚ä½•å¤„ç†HTML5æ–°æ ‡ç­¾çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Ÿå¦‚ä½•åŒºåˆ†-HTML-å’Œ-HTML5ï¼Ÿ"><a href="#html5æœ‰å“ªäº›æ–°ç‰¹æ€§ã€ç§»é™¤äº†é‚£äº›å…ƒç´ ï¼Ÿå¦‚ä½•å¤„ç†HTML5æ–°æ ‡ç­¾çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Ÿå¦‚ä½•åŒºåˆ†-HTML-å’Œ-HTML5ï¼Ÿ" class="headerlink" title="html5æœ‰å“ªäº›æ–°ç‰¹æ€§ã€ç§»é™¤äº†é‚£äº›å…ƒç´ ï¼Ÿå¦‚ä½•å¤„ç†HTML5æ–°æ ‡ç­¾çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Ÿå¦‚ä½•åŒºåˆ† HTML å’Œ HTML5ï¼Ÿ"></a>html5æœ‰å“ªäº›æ–°ç‰¹æ€§ã€ç§»é™¤äº†é‚£äº›å…ƒç´ ï¼Ÿå¦‚ä½•å¤„ç†HTML5æ–°æ ‡ç­¾çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Ÿå¦‚ä½•åŒºåˆ† HTML å’Œ HTML5ï¼Ÿ</h2><pre><code>  HTML5 ç°åœ¨å·²ç»ä¸æ˜¯ SGML çš„å­é›†ï¼Œä¸»è¦æ˜¯å…³äºå›¾åƒï¼Œä½ç½®ï¼Œå­˜å‚¨ï¼Œå¤šä»»åŠ¡ç­‰åŠŸèƒ½çš„å¢åŠ ã€‚

  æ‹–æ‹½é‡Šæ”¾(Drag and drop) API

  è¯­ä¹‰åŒ–æ›´å¥½çš„å†…å®¹æ ‡ç­¾ï¼ˆheader,nav,footer,aside,article,sectionï¼‰

  éŸ³é¢‘ã€è§†é¢‘API(audio,video)

  ç”»å¸ƒ(Canvas) API

  åœ°ç†(Geolocation) API

  æœ¬åœ°ç¦»çº¿å­˜å‚¨ localStorage é•¿æœŸå­˜å‚¨æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±ï¼›

  sessionStorage çš„æ•°æ®åœ¨æµè§ˆå™¨å…³é—­åè‡ªåŠ¨åˆ é™¤


  è¡¨å•æ§ä»¶ï¼Œcalendarã€dateã€timeã€emailã€urlã€search

  æ–°çš„æŠ€æœ¯webworker, websocket, Geolocation
</code></pre><blockquote>
<p>ç§»é™¤çš„å…ƒç´ </p>
</blockquote>
<pre><code>çº¯è¡¨ç°çš„å…ƒç´ ï¼šbasefontï¼Œbigï¼Œcenterï¼Œfont, sï¼Œstrikeï¼Œttï¼Œuï¼›

å¯¹å¯ç”¨æ€§äº§ç”Ÿè´Ÿé¢å½±å“çš„å…ƒç´ ï¼šframeï¼Œframesetï¼Œnoframesï¼›
</code></pre><blockquote>
<p>æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼š</p>
</blockquote>
<pre><code>
    IE8/IE7/IE6æ”¯æŒé€šè¿‡document.createElementæ–¹æ³•äº§ç”Ÿçš„æ ‡ç­¾ï¼Œ

    å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‰¹æ€§è®©è¿™äº›æµè§ˆå™¨æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼Œ

    å½“ç„¶æœ€å¥½çš„æ–¹å¼æ˜¯ç›´æ¥ä½¿ç”¨æˆç†Ÿçš„æ¡†æ¶ã€ä½¿ç”¨æœ€å¤šçš„æ˜¯html5shimæ¡†æ¶

       &lt;!--[if lt IE 9]&gt;

       &lt;script&gt; src=&quot;http://html5shim.googlecode.com/svn/trunk/html5.js&quot;&lt;/script&gt;

       &lt;![endif]--&gt;

    å¦‚ä½•åŒºåˆ†ï¼š DOCTYPEå£°æ˜\æ–°å¢çš„ç»“æ„å…ƒç´ \åŠŸèƒ½å…ƒç´ 
</code></pre><h2 id="å¦‚ä½•å®ç°æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡"><a href="#å¦‚ä½•å®ç°æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡" class="headerlink" title="å¦‚ä½•å®ç°æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡?"></a>å¦‚ä½•å®ç°æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡?</h2><pre><code class="js">    è°ƒç”¨localstorgeã€cookiesç­‰æœ¬åœ°å­˜å‚¨æ–¹å¼
</code></pre>
<h2 id="ä»€ä¹ˆæ˜¯-FOUCï¼ˆæ— æ ·å¼å†…å®¹é—ªçƒï¼‰ï¼Ÿä½ å¦‚ä½•æ¥é¿å…-FOUCï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-FOUCï¼ˆæ— æ ·å¼å†…å®¹é—ªçƒï¼‰ï¼Ÿä½ å¦‚ä½•æ¥é¿å…-FOUCï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ FOUCï¼ˆæ— æ ·å¼å†…å®¹é—ªçƒï¼‰ï¼Ÿä½ å¦‚ä½•æ¥é¿å… FOUCï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ FOUCï¼ˆæ— æ ·å¼å†…å®¹é—ªçƒï¼‰ï¼Ÿä½ å¦‚ä½•æ¥é¿å… FOUCï¼Ÿ</h2><pre><code class="html">     FOUC - Flash Of Unstyled Content æ–‡æ¡£æ ·å¼é—ªçƒ

     &lt;style type=&quot;text/css&quot; media=&quot;all&quot;&gt;@import &quot;../fouc.css&quot;;&lt;/style&gt;

    è€Œå¼•ç”¨CSSæ–‡ä»¶çš„@importå°±æ˜¯é€ æˆè¿™ä¸ªé—®é¢˜çš„ç½ªé­ç¥¸é¦–ã€‚IEä¼šå…ˆåŠ è½½æ•´ä¸ªHTMLæ–‡æ¡£çš„DOMï¼Œç„¶åå†å»å¯¼å…¥å¤–éƒ¨çš„CSSæ–‡ä»¶ï¼Œå› æ­¤ï¼Œåœ¨é¡µé¢DOMåŠ è½½å®Œæˆåˆ°CSSå¯¼å…¥å®Œæˆä¸­é—´ä¼šæœ‰ä¸€æ®µæ—¶é—´é¡µé¢ä¸Šçš„å†…å®¹æ˜¯æ²¡æœ‰æ ·å¼çš„ï¼Œè¿™æ®µæ—¶é—´çš„é•¿çŸ­è·Ÿç½‘é€Ÿï¼Œç”µè„‘é€Ÿåº¦éƒ½æœ‰å…³ç³»ã€‚

     è§£å†³æ–¹æ³•ç®€å•çš„å‡ºå¥‡ï¼Œåªè¦åœ¨&lt;head&gt;ä¹‹é—´åŠ å…¥ä¸€ä¸ª&lt;link&gt;æˆ–è€…&lt;script&gt;å…ƒç´ å°±å¯ä»¥äº†ã€‚
</code></pre>
<h2 id="nullå’Œundefinedçš„åŒºåˆ«"><a href="#nullå’Œundefinedçš„åŒºåˆ«" class="headerlink" title="nullå’Œundefinedçš„åŒºåˆ«"></a>nullå’Œundefinedçš„åŒºåˆ«</h2><p><code>null</code>æ˜¯ä¸€ä¸ªè¡¨ç¤ºâ€æ— â€çš„å¯¹è±¡ï¼Œè½¬ä¸ºæ•°å€¼æ—¶ä¸º0ï¼›<code>undefined</code>æ˜¯ä¸€ä¸ªè¡¨ç¤ºâ€æ— â€çš„åŸå§‹å€¼ï¼Œè½¬ä¸ºæ•°å€¼æ—¶ä¸º<code>NaN</code>ã€‚</p>
<p>å½“å£°æ˜çš„å˜é‡è¿˜æœªè¢«åˆå§‹åŒ–æ—¶ï¼Œå˜é‡çš„é»˜è®¤å€¼ä¸º<code>undefined</code>ã€‚</p>
<p><code>null</code>ç”¨æ¥è¡¨ç¤ºå°šæœªå­˜åœ¨çš„å¯¹è±¡ï¼Œå¸¸ç”¨æ¥è¡¨ç¤ºå‡½æ•°ä¼å›¾è¿”å›ä¸€ä¸ªä¸å­˜åœ¨çš„å¯¹è±¡ã€‚</p>
<p><code>undefined</code>è¡¨ç¤ºâ€ç¼ºå°‘å€¼â€ï¼Œå°±æ˜¯æ­¤å¤„åº”è¯¥æœ‰ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å®šä¹‰ã€‚å…¸å‹ç”¨æ³•æ˜¯ï¼š</p>
<pre><code>ï¼ˆ1ï¼‰å˜é‡è¢«å£°æ˜äº†ï¼Œä½†æ²¡æœ‰èµ‹å€¼æ—¶ï¼Œå°±ç­‰äºundefinedã€‚


ï¼ˆ2) è°ƒç”¨å‡½æ•°æ—¶ï¼Œåº”è¯¥æä¾›çš„å‚æ•°æ²¡æœ‰æä¾›ï¼Œè¯¥å‚æ•°ç­‰äºundefinedã€‚


ï¼ˆ3ï¼‰å¯¹è±¡æ²¡æœ‰èµ‹å€¼çš„å±æ€§ï¼Œè¯¥å±æ€§çš„å€¼ä¸ºundefinedã€‚


ï¼ˆ4ï¼‰å‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œé»˜è®¤è¿”å›undefinedã€‚
</code></pre><p><code>null</code>è¡¨ç¤ºâ€æ²¡æœ‰å¯¹è±¡â€ï¼Œå³è¯¥å¤„ä¸åº”è¯¥æœ‰å€¼ã€‚å…¸å‹ç”¨æ³•æ˜¯ï¼š</p>
<pre><code>ï¼ˆ1ï¼‰ ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°çš„å‚æ•°ä¸æ˜¯å¯¹è±¡ã€‚

ï¼ˆ2ï¼‰ ä½œä¸ºå¯¹è±¡åŸå‹é“¾çš„ç»ˆç‚¹ã€‚
</code></pre><h2 id="newæ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆå‘¢"><a href="#newæ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆå‘¢" class="headerlink" title="newæ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆå‘¢"></a>newæ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆå‘¢</h2><pre><code>   1ã€åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¹¶ä¸” this å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ï¼ŒåŒæ—¶è¿˜ç»§æ‰¿äº†è¯¥å‡½æ•°çš„åŸå‹ã€‚

   2ã€å±æ€§å’Œæ–¹æ³•è¢«åŠ å…¥åˆ° this å¼•ç”¨çš„å¯¹è±¡ä¸­ã€‚

   3ã€æ–°åˆ›å»ºçš„å¯¹è±¡ç”± this æ‰€å¼•ç”¨ï¼Œå¹¶ä¸”æœ€åéšå¼çš„è¿”å› this ã€‚



var obj  = {};

obj.__proto__ = Base.prototype;

Base.call(obj);
</code></pre><h2 id="jså»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"><a href="#jså»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="jså»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"></a>jså»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h2><pre><code>deferå’Œasyncã€åŠ¨æ€åˆ›å»ºDOMæ–¹å¼ï¼ˆåˆ›å»ºscriptï¼Œæ’å…¥åˆ°DOMä¸­ï¼ŒåŠ è½½å®Œæ¯•åcallBackï¼‰ã€æŒ‰éœ€å¼‚æ­¥è½½å…¥js
</code></pre><h2 id="call-å’Œ-apply-çš„åŒºåˆ«å’Œä½œç”¨ï¼Ÿ"><a href="#call-å’Œ-apply-çš„åŒºåˆ«å’Œä½œç”¨ï¼Ÿ" class="headerlink" title="call() å’Œ apply()çš„åŒºåˆ«å’Œä½œç”¨ï¼Ÿ"></a>call() å’Œ apply()çš„åŒºåˆ«å’Œä½œç”¨ï¼Ÿ</h2><p>ä½œç”¨ï¼šåŠ¨æ€æ”¹å˜æŸä¸ªç±»çš„æŸä¸ªæ–¹æ³•çš„è¿è¡Œç¯å¢ƒï¼ˆæ‰§è¡Œä¸Šä¸‹æ–‡ï¼‰ã€‚</p>
<p>åŒºåˆ«å‚è§ï¼š[JavaScriptå­¦ä¹ æ€»ç»“ï¼ˆå››ï¼‰functionå‡½æ•°éƒ¨åˆ†][3]</p>
<h2 id="å“ªäº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ"><a href="#å“ªäº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ" class="headerlink" title="å“ªäº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ"></a>å“ªäº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ</h2><pre><code>å†…å­˜æ³„æ¼æŒ‡ä»»ä½•å¯¹è±¡åœ¨æ‚¨ä¸å†æ‹¥æœ‰æˆ–éœ€è¦å®ƒä¹‹åä»ç„¶å­˜åœ¨ã€‚

åƒåœ¾å›æ”¶å™¨å®šæœŸæ‰«æå¯¹è±¡ï¼Œå¹¶è®¡ç®—å¼•ç”¨äº†æ¯ä¸ªå¯¹è±¡çš„å…¶ä»–å¯¹è±¡çš„æ•°é‡ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æ•°é‡ä¸º 0ï¼ˆæ²¡æœ‰å…¶ä»–å¯¹è±¡å¼•ç”¨è¿‡è¯¥å¯¹è±¡ï¼‰ï¼Œæˆ–å¯¹è¯¥å¯¹è±¡çš„æƒŸä¸€å¼•ç”¨æ˜¯å¾ªç¯çš„ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„å†…å­˜å³å¯å›æ”¶ã€‚



setTimeout çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½¿ç”¨å­—ç¬¦ä¸²è€Œéå‡½æ•°çš„è¯ï¼Œä¼šå¼•å‘å†…å­˜æ³„æ¼ã€‚

é—­åŒ…ã€æ§åˆ¶å°æ—¥å¿—ã€å¾ªç¯ï¼ˆåœ¨ä¸¤ä¸ªå¯¹è±¡å½¼æ­¤å¼•ç”¨ä¸”å½¼æ­¤ä¿ç•™æ—¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªå¾ªç¯ï¼‰
</code></pre><p>è¯¦è§ï¼š[è¯¦è§£jså˜é‡ã€ä½œç”¨åŸŸåŠå†…å­˜][4]</p>
<h2 id="åˆ—ä¸¾IE-ä¸å…¶ä»–æµè§ˆå™¨ä¸ä¸€æ ·çš„ç‰¹æ€§ï¼Ÿ"><a href="#åˆ—ä¸¾IE-ä¸å…¶ä»–æµè§ˆå™¨ä¸ä¸€æ ·çš„ç‰¹æ€§ï¼Ÿ" class="headerlink" title="åˆ—ä¸¾IE ä¸å…¶ä»–æµè§ˆå™¨ä¸ä¸€æ ·çš„ç‰¹æ€§ï¼Ÿ"></a>åˆ—ä¸¾IE ä¸å…¶ä»–æµè§ˆå™¨ä¸ä¸€æ ·çš„ç‰¹æ€§ï¼Ÿ</h2><ul>
<li><p>IEæ”¯æŒ<code>currentStyle</code>ï¼ŒFIrefoxä½¿ç”¨<code>getComputStyle</code></p>
</li>
<li><p>IE  ä½¿ç”¨<code>innerText</code>ï¼ŒFirefoxä½¿ç”¨<code>textContent</code></p>
</li>
<li><p>æ»¤é•œæ–¹é¢ï¼šIE:<code>filter:alpha(opacity= num)</code>ï¼›Firefoxï¼š<code>-moz-opacity:num</code></p>
</li>
<li><p>äº‹ä»¶æ–¹é¢ï¼šIEï¼š<code>attachEvent</code>ï¼šç«ç‹æ˜¯<code>addEventListener</code></p>
</li>
<li><p>é¼ æ ‡ä½ç½®ï¼šIEæ˜¯<code>event.clientX</code>ï¼›ç«ç‹æ˜¯<code>event.pageX</code></p>
</li>
<li><p>IEä½¿ç”¨<code>event.srcElement</code>ï¼›Firefoxä½¿ç”¨<code>event.target</code></p>
</li>
<li><p>IEä¸­æ¶ˆé™¤listçš„åŸç‚¹ä»…éœ€margin:0å³å¯è¾¾åˆ°æœ€ç»ˆæ•ˆæœï¼›FIrefoxéœ€è¦è®¾ç½®<code>margin:0;padding:0ä»¥åŠlist-style:none</code></p>
</li>
<li><p>CSSåœ†è§’ï¼šie7ä»¥ä¸‹ä¸æ”¯æŒåœ†è§’</p>
</li>
</ul>
<h2 id="WEBåº”ç”¨ä»æœåŠ¡å™¨ä¸»åŠ¨æ¨é€Dataåˆ°å®¢æˆ·ç«¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ"><a href="#WEBåº”ç”¨ä»æœåŠ¡å™¨ä¸»åŠ¨æ¨é€Dataåˆ°å®¢æˆ·ç«¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ" class="headerlink" title="WEBåº”ç”¨ä»æœåŠ¡å™¨ä¸»åŠ¨æ¨é€Dataåˆ°å®¢æˆ·ç«¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ"></a>WEBåº”ç”¨ä»æœåŠ¡å™¨ä¸»åŠ¨æ¨é€Dataåˆ°å®¢æˆ·ç«¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ</h2><p>Javascriptæ•°æ®æ¨é€</p>
<ul>
<li><code>Commet</code>ï¼šåŸºäºHTTPé•¿è¿æ¥çš„æœåŠ¡å™¨æ¨é€æŠ€æœ¯</li>
</ul>
<ul>
<li>åŸºäº<code>WebSocket</code>çš„æ¨é€æ–¹æ¡ˆ</li>
</ul>
<ul>
<li><code>SSE</code>ï¼ˆServer-Send Eventï¼‰ï¼šæœåŠ¡å™¨æ¨é€æ•°æ®æ–°æ–¹å¼</li>
</ul>
<h2 id="å¯¹å‰ç«¯ç•Œé¢å·¥ç¨‹å¸ˆè¿™ä¸ªèŒä½æ˜¯æ€ä¹ˆæ ·ç†è§£çš„ï¼Ÿå®ƒçš„å‰æ™¯ä¼šæ€ä¹ˆæ ·ï¼Ÿ"><a href="#å¯¹å‰ç«¯ç•Œé¢å·¥ç¨‹å¸ˆè¿™ä¸ªèŒä½æ˜¯æ€ä¹ˆæ ·ç†è§£çš„ï¼Ÿå®ƒçš„å‰æ™¯ä¼šæ€ä¹ˆæ ·ï¼Ÿ" class="headerlink" title="å¯¹å‰ç«¯ç•Œé¢å·¥ç¨‹å¸ˆè¿™ä¸ªèŒä½æ˜¯æ€ä¹ˆæ ·ç†è§£çš„ï¼Ÿå®ƒçš„å‰æ™¯ä¼šæ€ä¹ˆæ ·ï¼Ÿ"></a>å¯¹å‰ç«¯ç•Œé¢å·¥ç¨‹å¸ˆè¿™ä¸ªèŒä½æ˜¯æ€ä¹ˆæ ·ç†è§£çš„ï¼Ÿå®ƒçš„å‰æ™¯ä¼šæ€ä¹ˆæ ·ï¼Ÿ</h2><pre><code>å‰ç«¯æ˜¯æœ€è´´è¿‘ç”¨æˆ·çš„ç¨‹åºå‘˜ï¼Œæ¯”åç«¯ã€æ•°æ®åº“ã€äº§å“ç»ç†ã€è¿è¥ã€å®‰å…¨éƒ½è¿‘ã€‚

    1ã€å®ç°ç•Œé¢äº¤äº’

    2ã€æå‡ç”¨æˆ·ä½“éªŒ

    3ã€æœ‰äº†Node.jsï¼Œå‰ç«¯å¯ä»¥å®ç°æœåŠ¡ç«¯çš„ä¸€äº›äº‹æƒ…


å‰ç«¯æ˜¯æœ€è´´è¿‘ç”¨æˆ·çš„ç¨‹åºå‘˜ï¼Œå‰ç«¯çš„èƒ½åŠ›å°±æ˜¯èƒ½è®©äº§å“ä» 90åˆ†è¿›åŒ–åˆ° 100 åˆ†ï¼Œç”šè‡³æ›´å¥½ï¼Œ



 å‚ä¸é¡¹ç›®ï¼Œå¿«é€Ÿé«˜è´¨é‡å®Œæˆå®ç°æ•ˆæœå›¾ï¼Œç²¾ç¡®åˆ°1pxï¼›

 ä¸å›¢é˜Ÿæˆå‘˜ï¼ŒUIè®¾è®¡ï¼Œäº§å“ç»ç†çš„æ²Ÿé€šï¼›

 åšå¥½çš„é¡µé¢ç»“æ„ï¼Œé¡µé¢é‡æ„å’Œç”¨æˆ·ä½“éªŒï¼›

 å¤„ç†hackï¼Œå…¼å®¹ã€å†™å‡ºä¼˜ç¾çš„ä»£ç æ ¼å¼ï¼›

 é’ˆå¯¹æœåŠ¡å™¨çš„ä¼˜åŒ–ã€æ‹¥æŠ±æœ€æ–°å‰ç«¯æŠ€æœ¯ã€‚
</code></pre><h2 id="ä¸€ä¸ªé¡µé¢ä»è¾“å…¥-URL-åˆ°é¡µé¢åŠ è½½æ˜¾ç¤ºå®Œæˆï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ä¸ªé¡µé¢ä»è¾“å…¥-URL-åˆ°é¡µé¢åŠ è½½æ˜¾ç¤ºå®Œæˆï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ä¸ªé¡µé¢ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½æ˜¾ç¤ºå®Œæˆï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"></a>ä¸€ä¸ªé¡µé¢ä»è¾“å…¥ URL åˆ°é¡µé¢åŠ è½½æ˜¾ç¤ºå®Œæˆï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h2><pre><code>    åˆ†ä¸º4ä¸ªæ­¥éª¤ï¼š

    ï¼ˆ1ï¼‰ï¼Œå½“å‘é€ä¸€ä¸ªURLè¯·æ±‚æ—¶ï¼Œä¸ç®¡è¿™ä¸ªURLæ˜¯Webé¡µé¢çš„URLè¿˜æ˜¯Webé¡µé¢ä¸Šæ¯ä¸ªèµ„æºçš„URLï¼Œæµè§ˆå™¨éƒ½ä¼šå¼€å¯ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼ŒåŒæ—¶åœ¨è¿œç¨‹DNSæœåŠ¡å™¨ä¸Šå¯åŠ¨ä¸€ä¸ªDNSæŸ¥è¯¢ã€‚è¿™èƒ½ä½¿æµè§ˆå™¨è·å¾—è¯·æ±‚å¯¹åº”çš„IPåœ°å€ã€‚

    ï¼ˆ2ï¼‰ï¼Œ æµè§ˆå™¨ä¸è¿œç¨‹`Web`æœåŠ¡å™¨é€šè¿‡`TCP`ä¸‰æ¬¡æ¡æ‰‹åå•†æ¥å»ºç«‹ä¸€ä¸ª`TCP/IP`è¿æ¥ã€‚è¯¥æ¡æ‰‹åŒ…æ‹¬ä¸€ä¸ªåŒæ­¥æŠ¥æ–‡ï¼Œä¸€ä¸ªåŒæ­¥-åº”ç­”æŠ¥æ–‡å’Œä¸€ä¸ªåº”ç­”æŠ¥æ–‡ï¼Œè¿™ä¸‰ä¸ªæŠ¥æ–‡åœ¨ æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’ã€‚è¯¥æ¡æ‰‹é¦–å…ˆç”±å®¢æˆ·ç«¯å°è¯•å»ºç«‹èµ·é€šä¿¡ï¼Œè€ŒåæœåŠ¡å™¨åº”ç­”å¹¶æ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæœ€åç”±å®¢æˆ·ç«¯å‘å‡ºè¯¥è¯·æ±‚å·²ç»è¢«æ¥å—çš„æŠ¥æ–‡ã€‚

    ï¼ˆ3ï¼‰ï¼Œä¸€æ—¦`TCP/IP`è¿æ¥å»ºç«‹ï¼Œæµè§ˆå™¨ä¼šé€šè¿‡è¯¥è¿æ¥å‘è¿œç¨‹æœåŠ¡å™¨å‘é€`HTTP`çš„`GET`è¯·æ±‚ã€‚è¿œç¨‹æœåŠ¡å™¨æ‰¾åˆ°èµ„æºå¹¶ä½¿ç”¨HTTPå“åº”è¿”å›è¯¥èµ„æºï¼Œå€¼ä¸º200çš„HTTPå“åº”çŠ¶æ€è¡¨ç¤ºä¸€ä¸ªæ­£ç¡®çš„å“åº”ã€‚

    ï¼ˆ4ï¼‰ï¼Œæ­¤æ—¶ï¼Œ`Web`æœåŠ¡å™¨æä¾›èµ„æºæœåŠ¡ï¼Œå®¢æˆ·ç«¯å¼€å§‹ä¸‹è½½èµ„æºã€‚



è¯·æ±‚è¿”å›åï¼Œä¾¿è¿›å…¥äº†æˆ‘ä»¬å…³æ³¨çš„å‰ç«¯æ¨¡å—

ç®€å•æ¥è¯´ï¼Œæµè§ˆå™¨ä¼šè§£æ`HTML`ç”Ÿæˆ`DOM Tree`ï¼Œå…¶æ¬¡ä¼šæ ¹æ®CSSç”ŸæˆCSS Rule Treeï¼Œè€Œ`javascript`åˆå¯ä»¥æ ¹æ®`DOM API`æ“ä½œ`DOM`
</code></pre><p>è¯¦æƒ…ï¼š[ä»è¾“å…¥ URL åˆ°æµè§ˆå™¨æ¥æ”¶çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ][8]</p>
<h2 id="javascriptå¯¹è±¡çš„å‡ ç§åˆ›å»ºæ–¹å¼"><a href="#javascriptå¯¹è±¡çš„å‡ ç§åˆ›å»ºæ–¹å¼" class="headerlink" title="javascriptå¯¹è±¡çš„å‡ ç§åˆ›å»ºæ–¹å¼"></a>javascriptå¯¹è±¡çš„å‡ ç§åˆ›å»ºæ–¹å¼</h2><pre><code>1ï¼Œå·¥å‚æ¨¡å¼

2ï¼Œæ„é€ å‡½æ•°æ¨¡å¼

3ï¼ŒåŸå‹æ¨¡å¼

4ï¼Œæ··åˆæ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼

5ï¼ŒåŠ¨æ€åŸå‹æ¨¡å¼

6ï¼Œå¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼

7ï¼Œç¨³å¦¥æ„é€ å‡½æ•°æ¨¡å¼
</code></pre><h2 id="javascriptç»§æ‰¿çš„6ç§æ–¹æ³•"><a href="#javascriptç»§æ‰¿çš„6ç§æ–¹æ³•" class="headerlink" title="javascriptç»§æ‰¿çš„6ç§æ–¹æ³•"></a>javascriptç»§æ‰¿çš„6ç§æ–¹æ³•</h2><pre><code>1ï¼ŒåŸå‹é“¾ç»§æ‰¿

2ï¼Œå€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿

3ï¼Œç»„åˆç»§æ‰¿(åŸå‹+å€Ÿç”¨æ„é€ )

4ï¼ŒåŸå‹å¼ç»§æ‰¿

5ï¼Œå¯„ç”Ÿå¼ç»§æ‰¿

6ï¼Œå¯„ç”Ÿç»„åˆå¼ç»§æ‰¿
</code></pre><p>è¯¦æƒ…ï¼š[JavaScriptç»§æ‰¿æ–¹å¼è¯¦è§£][9]</p>
<h2 id="åˆ›å»ºajaxçš„è¿‡ç¨‹"><a href="#åˆ›å»ºajaxçš„è¿‡ç¨‹" class="headerlink" title="åˆ›å»ºajaxçš„è¿‡ç¨‹"></a>åˆ›å»ºajaxçš„è¿‡ç¨‹</h2><pre><code class="js">    (1)åˆ›å»º`XMLHttpRequest`å¯¹è±¡,ä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªå¼‚æ­¥è°ƒç”¨å¯¹è±¡.

    (2)åˆ›å»ºä¸€ä¸ªæ–°çš„`HTTP`è¯·æ±‚,å¹¶æŒ‡å®šè¯¥`HTTP`è¯·æ±‚çš„æ–¹æ³•ã€`URL`åŠéªŒè¯ä¿¡æ¯.

    (3)è®¾ç½®å“åº”`HTTP`è¯·æ±‚çŠ¶æ€å˜åŒ–çš„å‡½æ•°.

    (4)å‘é€`HTTP`è¯·æ±‚.

    (5)è·å–å¼‚æ­¥è°ƒç”¨è¿”å›çš„æ•°æ®.

    (6)ä½¿ç”¨JavaScriptå’ŒDOMå®ç°å±€éƒ¨åˆ·æ–°.


    var xmlHttp = new XMLHttpRequest();

    xmlHttp.open(&#39;GET&#39;,&#39;demo.php&#39;,&#39;true&#39;);

    xmlHttp.send()

    xmlHttp.onreadystatechange = function(){

        if(xmlHttp.readyState === 4 &amp; xmlHttp.status === 200){

        }

    }
</code></pre>
<p>è¯¦æƒ…ï¼š[JavaScriptå­¦ä¹ æ€»ç»“ï¼ˆä¸ƒï¼‰Ajaxå’ŒHttpçŠ¶æ€å­—][10]</p>
<h2 id="å¼‚æ­¥åŠ è½½å’Œå»¶è¿ŸåŠ è½½"><a href="#å¼‚æ­¥åŠ è½½å’Œå»¶è¿ŸåŠ è½½" class="headerlink" title="å¼‚æ­¥åŠ è½½å’Œå»¶è¿ŸåŠ è½½"></a>å¼‚æ­¥åŠ è½½å’Œå»¶è¿ŸåŠ è½½</h2><pre><code>1.å¼‚æ­¥åŠ è½½çš„æ–¹æ¡ˆï¼š åŠ¨æ€æ’å…¥scriptæ ‡ç­¾

2.é€šè¿‡ajaxå»è·å–jsä»£ç ï¼Œç„¶åé€šè¿‡evalæ‰§è¡Œ

3.scriptæ ‡ç­¾ä¸Šæ·»åŠ deferæˆ–è€…asyncå±æ€§

4.åˆ›å»ºå¹¶æ’å…¥iframeï¼Œè®©å®ƒå¼‚æ­¥æ‰§è¡Œjs

5.å»¶è¿ŸåŠ è½½ï¼šæœ‰äº› js ä»£ç å¹¶ä¸æ˜¯é¡µé¢åˆå§‹åŒ–çš„æ—¶å€™å°±ç«‹åˆ»éœ€è¦çš„ï¼Œè€Œç¨åçš„æŸäº›æƒ…å†µæ‰éœ€è¦çš„ã€‚
</code></pre><h2 id="ieå„ç‰ˆæœ¬å’Œchromeå¯ä»¥å¹¶è¡Œä¸‹è½½å¤šå°‘ä¸ªèµ„æº"><a href="#ieå„ç‰ˆæœ¬å’Œchromeå¯ä»¥å¹¶è¡Œä¸‹è½½å¤šå°‘ä¸ªèµ„æº" class="headerlink" title="ieå„ç‰ˆæœ¬å’Œchromeå¯ä»¥å¹¶è¡Œä¸‹è½½å¤šå°‘ä¸ªèµ„æº"></a>ieå„ç‰ˆæœ¬å’Œchromeå¯ä»¥å¹¶è¡Œä¸‹è½½å¤šå°‘ä¸ªèµ„æº</h2><pre><code>IE6 ä¸¤ä¸ªå¹¶å‘ï¼ŒiE7å‡çº§ä¹‹åçš„6ä¸ªå¹¶å‘ï¼Œä¹‹åç‰ˆæœ¬ä¹Ÿæ˜¯6ä¸ª
Firefoxï¼Œchromeä¹Ÿæ˜¯6ä¸ª
</code></pre><h2 id="Flashã€Ajaxå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œåœ¨ä½¿ç”¨ä¸­å¦‚ä½•å–èˆï¼Ÿ"><a href="#Flashã€Ajaxå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œåœ¨ä½¿ç”¨ä¸­å¦‚ä½•å–èˆï¼Ÿ" class="headerlink" title="Flashã€Ajaxå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œåœ¨ä½¿ç”¨ä¸­å¦‚ä½•å–èˆï¼Ÿ"></a>Flashã€Ajaxå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œåœ¨ä½¿ç”¨ä¸­å¦‚ä½•å–èˆï¼Ÿ</h2><ul>
<li><code>Flash</code>é€‚åˆå¤„ç†å¤šåª’ä½“ã€çŸ¢é‡å›¾å½¢ã€è®¿é—®æœºå™¨ï¼›å¯¹<code>CSS</code>ã€å¤„ç†æ–‡æœ¬ä¸Šä¸è¶³ï¼Œä¸å®¹æ˜“è¢«æœç´¢ã€‚</li>
</ul>
<p>-<code>Ajax</code>å¯¹<code>CSS</code>ã€æ–‡æœ¬æ”¯æŒå¾ˆå¥½ï¼Œæ”¯æŒæœç´¢ï¼›å¤šåª’ä½“ã€çŸ¢é‡å›¾å½¢ã€æœºå™¨è®¿é—®ä¸è¶³ã€‚</p>
<ul>
<li>å…±åŒç‚¹ï¼šä¸æœåŠ¡å™¨çš„æ— åˆ·æ–°ä¼ é€’æ¶ˆæ¯ã€ç”¨æˆ·ç¦»çº¿å’Œåœ¨çº¿çŠ¶æ€ã€æ“ä½œDOM</li>
</ul>
<h2 id="è¯·è§£é‡Šä¸€ä¸‹-JavaScript-çš„åŒæºç­–ç•¥ã€‚"><a href="#è¯·è§£é‡Šä¸€ä¸‹-JavaScript-çš„åŒæºç­–ç•¥ã€‚" class="headerlink" title="è¯·è§£é‡Šä¸€ä¸‹ JavaScript çš„åŒæºç­–ç•¥ã€‚"></a>è¯·è§£é‡Šä¸€ä¸‹ JavaScript çš„åŒæºç­–ç•¥ã€‚</h2><p>æ¦‚å¿µ:åŒæºç­–ç•¥æ˜¯å®¢æˆ·ç«¯è„šæœ¬ï¼ˆå°¤å…¶æ˜¯<code>Javascript</code>ï¼‰çš„é‡è¦çš„å®‰å…¨åº¦é‡æ ‡å‡†ã€‚å®ƒæœ€æ—©å‡ºè‡ª<code>Netscape Navigator2.0</code>ï¼Œå…¶ç›®çš„æ˜¯é˜²æ­¢æŸä¸ªæ–‡æ¡£æˆ–è„šæœ¬ä»å¤šä¸ªä¸åŒæºè£…è½½ã€‚</p>
<p>è¿™é‡Œçš„åŒæºç­–ç•¥æŒ‡çš„æ˜¯ï¼šåè®®ï¼ŒåŸŸåï¼Œç«¯å£ç›¸åŒï¼ŒåŒæºç­–ç•¥æ˜¯ä¸€ç§å®‰å…¨åè®®ã€‚</p>
<p>æŒ‡ä¸€æ®µè„šæœ¬åªèƒ½è¯»å–æ¥è‡ªåŒä¸€æ¥æºçš„çª—å£å’Œæ–‡æ¡£çš„å±æ€§ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¦æœ‰åŒæºé™åˆ¶"><a href="#ä¸ºä»€ä¹ˆè¦æœ‰åŒæºé™åˆ¶" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æœ‰åŒæºé™åˆ¶"></a>ä¸ºä»€ä¹ˆè¦æœ‰åŒæºé™åˆ¶</h2><p>   æˆ‘ä»¬ä¸¾ä¾‹è¯´æ˜ï¼šæ¯”å¦‚ä¸€ä¸ªé»‘å®¢ç¨‹åºï¼Œä»–åˆ©ç”¨<code>Iframe</code>æŠŠçœŸæ­£çš„é“¶è¡Œç™»å½•é¡µé¢åµŒåˆ°ä»–çš„é¡µé¢ä¸Šï¼Œå½“ä½ ä½¿ç”¨çœŸå®çš„ç”¨æˆ·åï¼Œå¯†ç ç™»å½•æ—¶ï¼Œä»–çš„é¡µé¢å°±å¯ä»¥é€šè¿‡<code>Javascript</code>è¯»å–åˆ°ä½ çš„è¡¨å•ä¸­<code>input</code>ä¸­çš„å†…å®¹ï¼Œè¿™æ ·ç”¨æˆ·åï¼Œå¯†ç å°±è½»æ¾åˆ°æ‰‹äº†ã€‚</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>ç°åœ¨ç½‘ç«™çš„<code>JS</code> éƒ½ä¼šè¿›è¡Œå‹ç¼©ï¼Œä¸€äº›æ–‡ä»¶ç”¨äº†ä¸¥æ ¼æ¨¡å¼ï¼Œè€Œå¦ä¸€äº›æ²¡æœ‰ã€‚è¿™æ—¶è¿™äº›æœ¬æ¥æ˜¯ä¸¥æ ¼æ¨¡å¼çš„æ–‡ä»¶ï¼Œè¢« <code>merge</code> åï¼Œè¿™ä¸ªä¸²å°±åˆ°äº†æ–‡ä»¶çš„ä¸­é—´ï¼Œä¸ä»…æ²¡æœ‰æŒ‡ç¤ºä¸¥æ ¼æ¨¡å¼ï¼Œåè€Œåœ¨å‹ç¼©åæµªè´¹äº†å­—èŠ‚ã€‚</p>
<h2 id="GETå’ŒPOSTçš„åŒºåˆ«ï¼Œä½•æ—¶ä½¿ç”¨POSTï¼Ÿ"><a href="#GETå’ŒPOSTçš„åŒºåˆ«ï¼Œä½•æ—¶ä½¿ç”¨POSTï¼Ÿ" class="headerlink" title="GETå’ŒPOSTçš„åŒºåˆ«ï¼Œä½•æ—¶ä½¿ç”¨POSTï¼Ÿ"></a>GETå’ŒPOSTçš„åŒºåˆ«ï¼Œä½•æ—¶ä½¿ç”¨POSTï¼Ÿ</h2><pre><code>    GETï¼šä¸€èˆ¬ç”¨äºä¿¡æ¯è·å–ï¼Œä½¿ç”¨URLä¼ é€’å‚æ•°ï¼Œå¯¹æ‰€å‘é€ä¿¡æ¯çš„æ•°é‡ä¹Ÿæœ‰é™åˆ¶ï¼Œä¸€èˆ¬åœ¨2000ä¸ªå­—ç¬¦

    POSTï¼šä¸€èˆ¬ç”¨äºä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œå¯¹æ‰€å‘é€çš„ä¿¡æ¯æ²¡æœ‰é™åˆ¶ã€‚


    GETæ–¹å¼éœ€è¦ä½¿ç”¨Request.QueryStringæ¥å–å¾—å˜é‡çš„å€¼ï¼Œè€ŒPOSTæ–¹å¼é€šè¿‡Request.Formæ¥è·å–å˜é‡çš„å€¼ï¼Œ

    ä¹Ÿå°±æ˜¯è¯´Getæ˜¯é€šè¿‡åœ°å€æ æ¥ä¼ å€¼ï¼Œè€ŒPostæ˜¯é€šè¿‡æäº¤è¡¨å•æ¥ä¼ å€¼ã€‚



ç„¶è€Œï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸­ï¼Œè¯·ä½¿ç”¨ POST è¯·æ±‚ï¼š

æ— æ³•ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ï¼ˆæ›´æ–°æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶æˆ–æ•°æ®åº“ï¼‰

å‘æœåŠ¡å™¨å‘é€å¤§é‡æ•°æ®ï¼ˆPOST æ²¡æœ‰æ•°æ®é‡é™åˆ¶ï¼‰

å‘é€åŒ…å«æœªçŸ¥å­—ç¬¦çš„ç”¨æˆ·è¾“å…¥æ—¶ï¼ŒPOST æ¯” GET æ›´ç¨³å®šä¹Ÿæ›´å¯é 
</code></pre><h2 id="äº‹ä»¶ã€IEä¸ç«ç‹çš„äº‹ä»¶æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ-å¦‚ä½•é˜»æ­¢å†’æ³¡ï¼Ÿ"><a href="#äº‹ä»¶ã€IEä¸ç«ç‹çš„äº‹ä»¶æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ-å¦‚ä½•é˜»æ­¢å†’æ³¡ï¼Ÿ" class="headerlink" title="äº‹ä»¶ã€IEä¸ç«ç‹çš„äº‹ä»¶æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å¦‚ä½•é˜»æ­¢å†’æ³¡ï¼Ÿ"></a>äº‹ä»¶ã€IEä¸ç«ç‹çš„äº‹ä»¶æœºåˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å¦‚ä½•é˜»æ­¢å†’æ³¡ï¼Ÿ</h2><pre><code> 1. æˆ‘ä»¬åœ¨ç½‘é¡µä¸­çš„æŸä¸ªæ“ä½œï¼ˆæœ‰çš„æ“ä½œå¯¹åº”å¤šä¸ªäº‹ä»¶ï¼‰ã€‚ä¾‹å¦‚ï¼šå½“æˆ‘ä»¬ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å°±ä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶ã€‚æ˜¯å¯ä»¥è¢« JavaScript ä¾¦æµ‹åˆ°çš„è¡Œä¸ºã€‚

 2. äº‹ä»¶å¤„ç†æœºåˆ¶ï¼šIEæ˜¯äº‹ä»¶å†’æ³¡ã€firefoxåŒæ—¶æ”¯æŒä¸¤ç§äº‹ä»¶æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯ï¼šæ•è·å‹äº‹ä»¶å’Œå†’æ³¡å‹äº‹ä»¶ã€‚ï¼›

 3. `ev.stopPropagation()`;æ³¨æ„æ—§ieçš„æ–¹æ³• `ev.cancelBubble = true`;
</code></pre><h2 id="ajaxçš„ç¼ºç‚¹å’Œåœ¨IEä¸‹çš„é—®é¢˜ï¼Ÿ"><a href="#ajaxçš„ç¼ºç‚¹å’Œåœ¨IEä¸‹çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="ajaxçš„ç¼ºç‚¹å’Œåœ¨IEä¸‹çš„é—®é¢˜ï¼Ÿ"></a>ajaxçš„ç¼ºç‚¹å’Œåœ¨IEä¸‹çš„é—®é¢˜ï¼Ÿ</h2><p>è¯¦æƒ…è¯·è§ï¼š[JavaScriptå­¦ä¹ æ€»ç»“ï¼ˆä¸ƒï¼‰Ajaxå’ŒHttpçŠ¶æ€å­—][14]</p>
<blockquote>
<p>ajaxçš„ç¼ºç‚¹</p>
</blockquote>
<pre><code>  1ã€ajaxä¸æ”¯æŒæµè§ˆå™¨backæŒ‰é’®ã€‚

  2ã€å®‰å…¨é—®é¢˜ AJAXæš´éœ²äº†ä¸æœåŠ¡å™¨äº¤äº’çš„ç»†èŠ‚ã€‚

  3ã€å¯¹æœç´¢å¼•æ“çš„æ”¯æŒæ¯”è¾ƒå¼±ã€‚

  4ã€ç ´åäº†ç¨‹åºçš„å¼‚å¸¸æœºåˆ¶ã€‚

  5ã€ä¸å®¹æ˜“è°ƒè¯•ã€‚
</code></pre><blockquote>
<p>IEç¼“å­˜é—®é¢˜</p>
</blockquote>
<p>åœ¨IEæµè§ˆå™¨ä¸‹ï¼Œå¦‚æœè¯·æ±‚çš„æ–¹æ³•æ˜¯<code>GET</code>ï¼Œå¹¶ä¸”è¯·æ±‚çš„<code>URL</code>ä¸å˜ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚çš„ç»“æœå°±ä¼šè¢«ç¼“å­˜ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å¯ä»¥é€šè¿‡å®æ—¶æ”¹å˜è¯·æ±‚çš„<code>URL</code>ï¼Œåªè¦URLæ”¹å˜ï¼Œå°±ä¸ä¼šè¢«ç¼“å­˜ï¼Œå¯ä»¥é€šè¿‡åœ¨URLæœ«å°¾æ·»åŠ ä¸Šéšæœºçš„æ—¶é—´æˆ³å‚æ•°(<code>&#39;t&#39;= + new Date().getTime()</code>)</p>
<p>æˆ–è€…ï¼š</p>
<pre><code>open(&#39;GET&#39;,&#39;demo.php?rand=+Math.random()&#39;,true);//
</code></pre><blockquote>
<p>Ajaxè¯·æ±‚çš„é¡µé¢å†å²è®°å½•çŠ¶æ€é—®é¢˜</p>
</blockquote>
<p>å¯ä»¥é€šè¿‡é”šç‚¹æ¥è®°å½•çŠ¶æ€ï¼Œ<code>location.hash</code>ã€‚è®©æµè§ˆå™¨è®°å½•Ajaxè¯·æ±‚æ—¶é¡µé¢çŠ¶æ€çš„å˜åŒ–ã€‚</p>
<p>è¿˜å¯ä»¥é€šè¿‡<code>HTML5</code>çš„<code>history.pushState</code>ï¼Œæ¥å®ç°æµè§ˆå™¨åœ°å€æ çš„æ— åˆ·æ–°æ”¹å˜</p>
<h2 id="è°ˆè°ˆä½ å¯¹é‡æ„çš„ç†è§£"><a href="#è°ˆè°ˆä½ å¯¹é‡æ„çš„ç†è§£" class="headerlink" title="è°ˆè°ˆä½ å¯¹é‡æ„çš„ç†è§£"></a>è°ˆè°ˆä½ å¯¹é‡æ„çš„ç†è§£</h2><p>ç½‘ç«™é‡æ„ï¼šåœ¨ä¸æ”¹å˜å¤–éƒ¨è¡Œä¸ºçš„å‰æä¸‹ï¼Œç®€åŒ–ç»“æ„ã€æ·»åŠ å¯è¯»æ€§ï¼Œè€Œåœ¨ç½‘ç«™å‰ç«¯ä¿æŒä¸€è‡´çš„è¡Œä¸ºã€‚ä¹Ÿå°±æ˜¯è¯´æ˜¯åœ¨ä¸æ”¹å˜UIçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘ç«™è¿›è¡Œä¼˜åŒ–ï¼Œ<br>åœ¨æ‰©å±•çš„åŒæ—¶ä¿æŒä¸€è‡´çš„UIã€‚</p>
<pre><code>å¯¹äºä¼ ç»Ÿçš„ç½‘ç«™æ¥è¯´é‡æ„é€šå¸¸æ˜¯ï¼š

è¡¨æ ¼(table)å¸ƒå±€æ”¹ä¸ºDIV+CSS

ä½¿ç½‘ç«™å‰ç«¯å…¼å®¹äºç°ä»£æµè§ˆå™¨(é’ˆå¯¹äºä¸åˆè§„èŒƒçš„CSSã€å¦‚å¯¹IE6æœ‰æ•ˆçš„)

å¯¹äºç§»åŠ¨å¹³å°çš„ä¼˜åŒ–

é’ˆå¯¹äºSEOè¿›è¡Œä¼˜åŒ–

æ·±å±‚æ¬¡çš„ç½‘ç«™é‡æ„åº”è¯¥è€ƒè™‘çš„æ–¹é¢


å‡å°‘ä»£ç é—´çš„è€¦åˆ

è®©ä»£ç ä¿æŒå¼¹æ€§

ä¸¥æ ¼æŒ‰è§„èŒƒç¼–å†™ä»£ç 

è®¾è®¡å¯æ‰©å±•çš„API

ä»£æ›¿æ—§æœ‰çš„æ¡†æ¶ã€è¯­è¨€(å¦‚VB)

å¢å¼ºç”¨æˆ·ä½“éªŒ

é€šå¸¸æ¥è¯´å¯¹äºé€Ÿåº¦çš„ä¼˜åŒ–ä¹ŸåŒ…å«åœ¨é‡æ„ä¸­



å‹ç¼©JSã€CSSã€imageç­‰å‰ç«¯èµ„æº(é€šå¸¸æ˜¯ç”±æœåŠ¡å™¨æ¥è§£å†³)

ç¨‹åºçš„æ€§èƒ½ä¼˜åŒ–(å¦‚æ•°æ®è¯»å†™)

é‡‡ç”¨CDNæ¥åŠ é€Ÿèµ„æºåŠ è½½

å¯¹äºJS DOMçš„ä¼˜åŒ–

HTTPæœåŠ¡å™¨çš„æ–‡ä»¶ç¼“å­˜
</code></pre><h2 id="HTTPçŠ¶æ€ç "><a href="#HTTPçŠ¶æ€ç " class="headerlink" title="HTTPçŠ¶æ€ç "></a>HTTPçŠ¶æ€ç </h2><pre><code class="html">
    100  Continue  ç»§ç»­ï¼Œä¸€èˆ¬åœ¨å‘é€postè¯·æ±‚æ—¶ï¼Œå·²å‘é€äº†http headerä¹‹åæœåŠ¡ç«¯å°†è¿”å›æ­¤ä¿¡æ¯ï¼Œè¡¨ç¤ºç¡®è®¤ï¼Œä¹‹åå‘é€å…·ä½“å‚æ•°ä¿¡æ¯

    200  OK   æ­£å¸¸è¿”å›ä¿¡æ¯

    201  Created  è¯·æ±‚æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æº

    202  Accepted  æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†

    301  Moved Permanently  è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚

    302 Found  ä¸´æ—¶æ€§é‡å®šå‘ã€‚

    303 See Other  ä¸´æ—¶æ€§é‡å®šå‘ï¼Œä¸”æ€»æ˜¯ä½¿ç”¨ GET è¯·æ±‚æ–°çš„ URIã€‚

    304  Not Modified  è‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚


    400 Bad Request  æœåŠ¡å™¨æ— æ³•ç†è§£è¯·æ±‚çš„æ ¼å¼ï¼Œå®¢æˆ·ç«¯ä¸åº”å½“å°è¯•å†æ¬¡ä½¿ç”¨ç›¸åŒçš„å†…å®¹å‘èµ·è¯·æ±‚ã€‚

    401 Unauthorized  è¯·æ±‚æœªæˆæƒã€‚

    403 Forbidden  ç¦æ­¢è®¿é—®ã€‚

    404 Not Found  æ‰¾ä¸åˆ°å¦‚ä½•ä¸ URI ç›¸åŒ¹é…çš„èµ„æºã€‚

    500 Internal Server Error  æœ€å¸¸è§çš„æœåŠ¡å™¨ç«¯é”™è¯¯ã€‚

    503 Service Unavailable æœåŠ¡å™¨ç«¯æš‚æ—¶æ— æ³•å¤„ç†è¯·æ±‚ï¼ˆå¯èƒ½æ˜¯è¿‡è½½æˆ–ç»´æŠ¤ï¼‰ã€‚
</code></pre>
<h2 id="è¯´è¯´ä½ å¯¹Promiseçš„ç†è§£"><a href="#è¯´è¯´ä½ å¯¹Promiseçš„ç†è§£" class="headerlink" title="è¯´è¯´ä½ å¯¹Promiseçš„ç†è§£"></a>è¯´è¯´ä½ å¯¹Promiseçš„ç†è§£</h2><p>ä¾ç…§ <code>Promise/A+</code> çš„å®šä¹‰ï¼Œ<code>Promise</code> æœ‰å››ç§çŠ¶æ€ï¼š</p>
<pre><code>pending: åˆå§‹çŠ¶æ€, é fulfilled æˆ– rejected.

fulfilled: æˆåŠŸçš„æ“ä½œ.

rejected: å¤±è´¥çš„æ“ä½œ.

settled: Promiseå·²è¢«fulfilledæˆ–rejectedï¼Œä¸”ä¸æ˜¯pending
</code></pre><p>å¦å¤–ï¼Œ <code>fulfilled</code> ä¸ <code>rejected</code> ä¸€èµ·åˆç§° <code>settled</code>ã€‚</p>
<p><code>Promise</code> å¯¹è±¡ç”¨æ¥è¿›è¡Œå»¶è¿Ÿ(deferred) å’Œå¼‚æ­¥(asynchronous ) è®¡ç®—ã€‚</p>
<blockquote>
<p>Promise çš„æ„é€ å‡½æ•°</p>
</blockquote>
<p>æ„é€ ä¸€ä¸ª <code>Promise</code>ï¼Œæœ€åŸºæœ¬çš„ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="js">    var promise = new Promise(function(resolve, reject) {

        if (...) {  // succeed

            resolve(result);

        } else {   // fails

            reject(Error(errMessage));

        }
    });
</code></pre>
<p><code>Promise</code> å®ä¾‹æ‹¥æœ‰ <code>then</code> æ–¹æ³•ï¼ˆå…·æœ‰ <code>then</code> æ–¹æ³•çš„å¯¹è±¡ï¼Œé€šå¸¸è¢«ç§°ä¸º <code>thenable</code>ï¼‰ã€‚å®ƒçš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="js">promise.then(onFulfilled, onRejected)
</code></pre>
<p>æ¥æ”¶ä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä¸€ä¸ªåœ¨ <code>fulfilled</code> çš„æ—¶å€™è¢«è°ƒç”¨ï¼Œä¸€ä¸ªåœ¨ <code>rejected</code> çš„æ—¶å€™è¢«è°ƒç”¨ï¼Œæ¥æ”¶å‚æ•°å°±æ˜¯ <code>futureï¼ŒonFulfilled</code> å¯¹åº” <code>resolve</code>, <code>onRejected</code> å¯¹åº” <code>reject</code>ã€‚</p>
<h2 id="è¯´è¯´ä½ å¯¹å‰ç«¯æ¶æ„å¸ˆçš„ç†è§£"><a href="#è¯´è¯´ä½ å¯¹å‰ç«¯æ¶æ„å¸ˆçš„ç†è§£" class="headerlink" title="è¯´è¯´ä½ å¯¹å‰ç«¯æ¶æ„å¸ˆçš„ç†è§£"></a>è¯´è¯´ä½ å¯¹å‰ç«¯æ¶æ„å¸ˆçš„ç†è§£</h2><p>è´Ÿè´£å‰ç«¯å›¢é˜Ÿçš„ç®¡ç†åŠä¸å…¶ä»–å›¢é˜Ÿçš„åè°ƒå·¥ä½œï¼Œæå‡å›¢é˜Ÿæˆå‘˜èƒ½åŠ›å’Œæ•´ä½“æ•ˆç‡ï¼›<br>å¸¦é¢†å›¢é˜Ÿå®Œæˆç ”å‘å·¥å…·åŠå¹³å°å‰ç«¯éƒ¨åˆ†çš„è®¾è®¡ã€ç ”å‘å’Œç»´æŠ¤ï¼›<br>å¸¦é¢†å›¢é˜Ÿè¿›è¡Œå‰ç«¯é¢†åŸŸå‰æ²¿æŠ€æœ¯ç ”ç©¶åŠæ–°æŠ€æœ¯è°ƒç ”ï¼Œä¿è¯å›¢é˜Ÿçš„æŠ€æœ¯é¢†å…ˆ<br>è´Ÿè´£å‰ç«¯å¼€å‘è§„èŒƒåˆ¶å®šã€åŠŸèƒ½æ¨¡å—åŒ–è®¾è®¡ã€å…¬å…±ç»„ä»¶æ­å»ºç­‰å·¥ä½œï¼Œå¹¶ç»„ç»‡åŸ¹è®­ã€‚</p>
<h2 id="å®ç°ä¸€ä¸ªå‡½æ•°cloneï¼Œå¯ä»¥å¯¹JavaScriptä¸­çš„5ç§ä¸»è¦çš„æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬Numberã€Stringã€Objectã€Arrayã€Booleanï¼‰è¿›è¡Œå€¼å¤åˆ¶"><a href="#å®ç°ä¸€ä¸ªå‡½æ•°cloneï¼Œå¯ä»¥å¯¹JavaScriptä¸­çš„5ç§ä¸»è¦çš„æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬Numberã€Stringã€Objectã€Arrayã€Booleanï¼‰è¿›è¡Œå€¼å¤åˆ¶" class="headerlink" title="å®ç°ä¸€ä¸ªå‡½æ•°cloneï¼Œå¯ä»¥å¯¹JavaScriptä¸­çš„5ç§ä¸»è¦çš„æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬Numberã€Stringã€Objectã€Arrayã€Booleanï¼‰è¿›è¡Œå€¼å¤åˆ¶"></a>å®ç°ä¸€ä¸ªå‡½æ•°cloneï¼Œå¯ä»¥å¯¹JavaScriptä¸­çš„5ç§ä¸»è¦çš„æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬Numberã€Stringã€Objectã€Arrayã€Booleanï¼‰è¿›è¡Œå€¼å¤åˆ¶</h2><pre><code class="js">    Object.prototype.clone = function(){

            var o = this.constructor === Array ? [] : {};

            for(var e in this){

                    o[e] = typeof this[e] === &quot;object&quot; ? this[e].clone() : this[e];

            }

            return o;
    }
</code></pre>
<h2 id="è¯´è¯´ä¸¥æ ¼æ¨¡å¼çš„é™åˆ¶"><a href="#è¯´è¯´ä¸¥æ ¼æ¨¡å¼çš„é™åˆ¶" class="headerlink" title="è¯´è¯´ä¸¥æ ¼æ¨¡å¼çš„é™åˆ¶"></a>è¯´è¯´ä¸¥æ ¼æ¨¡å¼çš„é™åˆ¶</h2><p>ä¸¥æ ¼æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹é™åˆ¶ï¼š</p>
<pre><code>å˜é‡å¿…é¡»å£°æ˜åå†ä½¿ç”¨

å‡½æ•°çš„å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§ï¼Œå¦åˆ™æŠ¥é”™

ä¸èƒ½ä½¿ç”¨withè¯­å¥

ä¸èƒ½å¯¹åªè¯»å±æ€§èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™

ä¸èƒ½ä½¿ç”¨å‰ç¼€0è¡¨ç¤ºå…«è¿›åˆ¶æ•°ï¼Œå¦åˆ™æŠ¥é”™

ä¸èƒ½åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™

ä¸èƒ½åˆ é™¤å˜é‡delete propï¼Œä¼šæŠ¥é”™ï¼Œåªèƒ½åˆ é™¤å±æ€§delete global[prop]

evalä¸ä¼šåœ¨å®ƒçš„å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡

evalå’Œargumentsä¸èƒ½è¢«é‡æ–°èµ‹å€¼

argumentsä¸ä¼šè‡ªåŠ¨åæ˜ å‡½æ•°å‚æ•°çš„å˜åŒ–

ä¸èƒ½ä½¿ç”¨arguments.callee

ä¸èƒ½ä½¿ç”¨arguments.caller

ç¦æ­¢thisæŒ‡å‘å…¨å±€å¯¹è±¡

ä¸èƒ½ä½¿ç”¨fn.callerå’Œfn.argumentsè·å–å‡½æ•°è°ƒç”¨çš„å †æ ˆ

å¢åŠ äº†ä¿ç•™å­—ï¼ˆæ¯”å¦‚protectedã€staticå’Œinterfaceï¼‰
</code></pre><p>è®¾ç«‹â€ä¸¥æ ¼æ¨¡å¼â€çš„ç›®çš„ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p>
<ul>
<li><p>æ¶ˆé™¤<code>Javascript</code>è¯­æ³•çš„ä¸€äº›ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘ä¸€äº›æ€ªå¼‚è¡Œä¸º;</p>
</li>
<li><p>æ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸€äº›ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨ï¼›</p>
</li>
<li><p>æé«˜ç¼–è¯‘å™¨æ•ˆç‡ï¼Œå¢åŠ è¿è¡Œé€Ÿåº¦ï¼›</p>
</li>
<li><p>ä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„<code>Javascript</code>åšå¥½é“ºå«ã€‚</p>
</li>
</ul>
<p>æ³¨ï¼šç»è¿‡æµ‹è¯•<code>IE6,7,8,9</code>å‡ä¸æ”¯æŒä¸¥æ ¼æ¨¡å¼ã€‚</p>
<h2 id="å¦‚ä½•åˆ é™¤ä¸€ä¸ªcookie"><a href="#å¦‚ä½•åˆ é™¤ä¸€ä¸ªcookie" class="headerlink" title="å¦‚ä½•åˆ é™¤ä¸€ä¸ªcookie"></a>å¦‚ä½•åˆ é™¤ä¸€ä¸ªcookie</h2><blockquote>
<p>1.å°†æ—¶é—´è®¾ä¸ºå½“å‰æ—¶é—´å¾€å‰ä¸€ç‚¹ã€‚</p>
</blockquote>
<pre><code class="js">var date = new Date();

date.setDate(date.getDate() - 1);//çœŸæ­£çš„åˆ é™¤
</code></pre>
<p><code>setDate()</code>æ–¹æ³•ç”¨äºè®¾ç½®ä¸€ä¸ªæœˆçš„æŸä¸€å¤©ã€‚</p>
<blockquote>
<p>2.expiresçš„è®¾ç½®</p>
</blockquote>
<pre><code class="js">    document.cookie = &#39;user=&#39;+ encodeURIComponent(&#39;name&#39;)  + &#39;;expires = &#39; + new Date(0)
</code></pre>
<h2 id="ï¼Œå’Œï¼Œæ ‡ç­¾"><a href="#ï¼Œå’Œï¼Œæ ‡ç­¾" class="headerlink" title="ï¼Œå’Œï¼Œæ ‡ç­¾"></a><strong>ï¼Œ<em>å’Œ<b>ï¼Œ<i>æ ‡ç­¾</i></b></em></strong></h2><pre><code class="html">&lt;strong&gt; æ ‡ç­¾å’Œ &lt;em&gt; æ ‡ç­¾ä¸€æ ·ï¼Œç”¨äºå¼ºè°ƒæ–‡æœ¬ï¼Œä½†å®ƒå¼ºè°ƒçš„ç¨‹åº¦æ›´å¼ºä¸€äº›ã€‚

em æ˜¯ æ–œä½“å¼ºè°ƒæ ‡ç­¾ï¼Œæ›´å¼ºçƒˆå¼ºè°ƒï¼Œè¡¨ç¤ºå†…å®¹çš„å¼ºè°ƒç‚¹ã€‚ç›¸å½“äºhtmlå…ƒç´ ä¸­çš„ &lt;i&gt;...&lt;/i&gt;;

&lt; b &gt; &lt; i &gt;æ˜¯è§†è§‰è¦ç´ ï¼Œåˆ†åˆ«è¡¨ç¤ºæ— æ„ä¹‰çš„åŠ ç²—ï¼Œæ— æ„ä¹‰çš„æ–œä½“ã€‚

em å’Œ strong æ˜¯è¡¨è¾¾è¦ç´ (phrase elements)ã€‚
</code></pre>
<h2 id="å¯¹AMDå’ŒCommonjsçš„ç†è§£"><a href="#å¯¹AMDå’ŒCommonjsçš„ç†è§£" class="headerlink" title="å¯¹AMDå’ŒCommonjsçš„ç†è§£"></a>å¯¹AMDå’ŒCommonjsçš„ç†è§£</h2><p><code>CommonJS</code>æ˜¯æœåŠ¡å™¨ç«¯æ¨¡å—çš„è§„èŒƒï¼ŒNode.jsé‡‡ç”¨äº†è¿™ä¸ªè§„èŒƒã€‚<code>CommonJS</code>è§„èŒƒåŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åŠ è½½å®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚AMDè§„èŒƒåˆ™æ˜¯éåŒæ­¥åŠ è½½æ¨¡å—ï¼Œå…è®¸æŒ‡å®šå›è°ƒå‡½æ•°ã€‚</p>
<p><code>AMD</code>æ¨èçš„é£æ ¼é€šè¿‡è¿”å›ä¸€ä¸ªå¯¹è±¡åšä¸ºæ¨¡å—å¯¹è±¡ï¼Œ<code>CommonJS</code>çš„é£æ ¼é€šè¿‡å¯¹<code>module.exports</code>æˆ–<code>exports</code>çš„å±æ€§èµ‹å€¼æ¥è¾¾åˆ°æš´éœ²æ¨¡å—å¯¹è±¡çš„ç›®çš„ã€‚</p>
<blockquote>
<p>è¯¦æƒ…ï¼š<a href="https://segmentfault.com/a/1190000004888589" target="_blank" rel="external">ä¹Ÿè°ˆwebpackåŠå…¶å¼€å‘æ¨¡å¼</a></p>
</blockquote>
<h2 id="document-write-çš„ç”¨æ³•"><a href="#document-write-çš„ç”¨æ³•" class="headerlink" title="document.write()çš„ç”¨æ³•"></a>document.write()çš„ç”¨æ³•</h2><p><code>document.write()</code>æ–¹æ³•å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªæ–¹é¢ï¼šé¡µé¢è½½å…¥è¿‡ç¨‹ä¸­ç”¨å®æ—¶è„šæœ¬åˆ›å»ºé¡µé¢å†…å®¹ï¼Œä»¥åŠç”¨å»¶æ—¶è„šæœ¬åˆ›å»ºæœ¬çª—å£æˆ–æ–°çª—å£çš„å†…å®¹ã€‚</p>
<p><code>document.write</code>åªèƒ½é‡ç»˜æ•´ä¸ªé¡µé¢ã€‚<code>innerHTML</code>å¯ä»¥é‡ç»˜é¡µé¢çš„ä¸€éƒ¨åˆ†</p>
<h2 id="ç¼–å†™ä¸€ä¸ªæ–¹æ³•-æ±‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦"><a href="#ç¼–å†™ä¸€ä¸ªæ–¹æ³•-æ±‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦" class="headerlink" title="ç¼–å†™ä¸€ä¸ªæ–¹æ³• æ±‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦"></a>ç¼–å†™ä¸€ä¸ªæ–¹æ³• æ±‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦</h2><p>å‡è®¾ï¼šä¸€ä¸ªè‹±æ–‡å­—ç¬¦å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªä¸­æ–‡å­—ç¬¦å ç”¨ä¸¤ä¸ªå­—èŠ‚</p>
<pre><code class="js"> function GetBytes(str){

        var len = str.length;

        var bytes = len;

        for(var i=0; i&lt;len; i++){

            if (str.charCodeAt(i) &gt; 255) bytes++;

        }

        return bytes;

    }

alert(GetBytes(&quot;ä½ å¥½,as&quot;));
</code></pre>
<h2 id="git-fetchå’Œgit-pullçš„åŒºåˆ«"><a href="#git-fetchå’Œgit-pullçš„åŒºåˆ«" class="headerlink" title="git fetchå’Œgit pullçš„åŒºåˆ«"></a>git fetchå’Œgit pullçš„åŒºåˆ«</h2><pre><code class="js">git pullï¼šç›¸å½“äºæ˜¯ä»è¿œç¨‹è·å–æœ€æ–°ç‰ˆæœ¬å¹¶mergeåˆ°æœ¬åœ°

git fetchï¼šç›¸å½“äºæ˜¯ä»è¿œç¨‹è·å–æœ€æ–°ç‰ˆæœ¬åˆ°æœ¬åœ°ï¼Œä¸ä¼šè‡ªåŠ¨merge
</code></pre>
<h2 id="è¯´è¯´ä½ å¯¹MVCå’ŒMVVMçš„ç†è§£"><a href="#è¯´è¯´ä½ å¯¹MVCå’ŒMVVMçš„ç†è§£" class="headerlink" title="è¯´è¯´ä½ å¯¹MVCå’ŒMVVMçš„ç†è§£"></a>è¯´è¯´ä½ å¯¹MVCå’ŒMVVMçš„ç†è§£</h2><blockquote>
<p><code>MVC</code></p>
</blockquote>
<pre><code>View ä¼ é€æŒ‡ä»¤åˆ° Controller

Controller å®Œæˆä¸šåŠ¡é€»è¾‘åï¼Œè¦æ±‚ Model æ”¹å˜çŠ¶æ€

Model å°†æ–°çš„æ•°æ®å‘é€åˆ° Viewï¼Œç”¨æˆ·å¾—åˆ°åé¦ˆ
</code></pre><p>æ‰€æœ‰é€šä¿¡éƒ½æ˜¯å•å‘çš„ã€‚</p>
<p><code>Angular</code>å®ƒé‡‡ç”¨åŒå‘ç»‘å®šï¼ˆdata-bindingï¼‰ï¼š<code>View</code>çš„å˜åŠ¨ï¼Œè‡ªåŠ¨åæ˜ åœ¨ <code>ViewModel</code>ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<pre><code>ç»„æˆéƒ¨åˆ†Modelã€Viewã€ViewModel

Viewï¼šUIç•Œé¢

ViewModelï¼šå®ƒæ˜¯Viewçš„æŠ½è±¡ï¼Œè´Ÿè´£Viewä¸Modelä¹‹é—´ä¿¡æ¯è½¬æ¢ï¼Œå°†Viewçš„Commandä¼ é€åˆ°Modelï¼›

Modelï¼šæ•°æ®è®¿é—®å±‚
</code></pre><h2 id="è¯·è§£é‡Šä»€ä¹ˆæ˜¯äº‹ä»¶ä»£ç†"><a href="#è¯·è§£é‡Šä»€ä¹ˆæ˜¯äº‹ä»¶ä»£ç†" class="headerlink" title="è¯·è§£é‡Šä»€ä¹ˆæ˜¯äº‹ä»¶ä»£ç†"></a>è¯·è§£é‡Šä»€ä¹ˆæ˜¯äº‹ä»¶ä»£ç†</h2><p>äº‹ä»¶ä»£ç†ï¼ˆEvent Delegationï¼‰ï¼Œåˆç§°ä¹‹ä¸ºäº‹ä»¶å§”æ‰˜ã€‚æ˜¯ <code>JavaScript</code> ä¸­å¸¸ç”¨ç»‘å®šäº‹ä»¶çš„å¸¸ç”¨æŠ€å·§ã€‚é¡¾åæ€ä¹‰ï¼Œâ€œäº‹ä»¶ä»£ç†â€å³æ˜¯æŠŠåŸæœ¬éœ€è¦ç»‘å®šçš„äº‹ä»¶å§”æ‰˜ç»™çˆ¶å…ƒç´ ï¼Œè®©çˆ¶å…ƒç´ æ‹…å½“äº‹ä»¶ç›‘å¬çš„èŒåŠ¡ã€‚äº‹ä»¶ä»£ç†çš„åŸç†æ˜¯<code>DOM</code>å…ƒç´ çš„äº‹ä»¶å†’æ³¡ã€‚ä½¿ç”¨äº‹ä»¶ä»£ç†çš„å¥½å¤„æ˜¯å¯ä»¥æé«˜æ€§èƒ½ã€‚</p>
<h2 id="attributeå’Œpropertyçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#attributeå’Œpropertyçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="attributeå’Œpropertyçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>attributeå’Œpropertyçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><code>attribute</code>æ˜¯<code>dom</code>å…ƒç´ åœ¨æ–‡æ¡£ä¸­ä½œä¸º<code>html</code>æ ‡ç­¾æ‹¥æœ‰çš„å±æ€§ï¼›</p>
<p><code>property</code>å°±æ˜¯<code>dom</code>å…ƒç´ åœ¨<code>js</code>ä¸­ä½œä¸ºå¯¹è±¡æ‹¥æœ‰çš„å±æ€§ã€‚</p>
<p>æ‰€ä»¥ï¼š</p>
<p>å¯¹äº<code>html</code>çš„æ ‡å‡†å±æ€§æ¥è¯´ï¼Œ<code>attribute</code>å’Œ<code>property</code>æ˜¯åŒæ­¥çš„ï¼Œæ˜¯ä¼šè‡ªåŠ¨æ›´æ–°çš„ï¼Œ</p>
<p>ä½†æ˜¯å¯¹äºè‡ªå®šä¹‰çš„å±æ€§æ¥è¯´ï¼Œä»–ä»¬æ˜¯ä¸åŒæ­¥çš„ï¼Œ</p>
<h2 id="è¯´è¯´ç½‘ç»œåˆ†å±‚é‡Œä¸ƒå±‚æ¨¡å‹æ˜¯å“ªä¸ƒå±‚"><a href="#è¯´è¯´ç½‘ç»œåˆ†å±‚é‡Œä¸ƒå±‚æ¨¡å‹æ˜¯å“ªä¸ƒå±‚" class="headerlink" title="è¯´è¯´ç½‘ç»œåˆ†å±‚é‡Œä¸ƒå±‚æ¨¡å‹æ˜¯å“ªä¸ƒå±‚"></a>è¯´è¯´ç½‘ç»œåˆ†å±‚é‡Œä¸ƒå±‚æ¨¡å‹æ˜¯å“ªä¸ƒå±‚</h2><ul>
<li><p>åº”ç”¨å±‚ï¼šåº”ç”¨å±‚ã€è¡¨ç¤ºå±‚ã€ä¼šè¯å±‚ï¼ˆä»ä¸Šå¾€ä¸‹ï¼‰ï¼ˆ<code>HTTPã€FTPã€SMTPã€DNS</code>ï¼‰</p>
</li>
<li><p>ä¼ è¾“å±‚ï¼ˆ<code>TCP</code>å’Œ<code>UDP</code>ï¼‰</p>
</li>
<li><p>ç½‘ç»œå±‚ï¼ˆ<code>IP</code>ï¼‰</p>
</li>
<li><p>ç‰©ç†å’Œæ•°æ®é“¾è·¯å±‚ï¼ˆä»¥å¤ªç½‘ï¼‰</p>
</li>
</ul>
<blockquote>
<p>æ¯ä¸€å±‚çš„ä½œç”¨å¦‚ä¸‹ï¼š</p>
</blockquote>
<pre><code class="js">
ç‰©ç†å±‚ï¼šé€šè¿‡åª’ä»‹ä¼ è¾“æ¯”ç‰¹,ç¡®å®šæœºæ¢°åŠç”µæ°”è§„èŒƒï¼ˆæ¯”ç‰¹Bitï¼‰
æ•°æ®é“¾è·¯å±‚ï¼šå°†æ¯”ç‰¹ç»„è£…æˆå¸§å’Œç‚¹åˆ°ç‚¹çš„ä¼ é€’ï¼ˆå¸§Frameï¼‰
ç½‘ç»œå±‚ï¼šè´Ÿè´£æ•°æ®åŒ…ä»æºåˆ°å®¿çš„ä¼ é€’å’Œç½‘é™…äº’è¿ï¼ˆåŒ…PackeTï¼‰
ä¼ è¾“å±‚ï¼šæä¾›ç«¯åˆ°ç«¯çš„å¯é æŠ¥æ–‡ä¼ é€’å’Œé”™è¯¯æ¢å¤ï¼ˆæ®µSegmentï¼‰
ä¼šè¯å±‚ï¼šå»ºç«‹ã€ç®¡ç†å’Œç»ˆæ­¢ä¼šè¯ï¼ˆä¼šè¯åè®®æ•°æ®å•å…ƒSPDUï¼‰
è¡¨ç¤ºå±‚ï¼šå¯¹æ•°æ®è¿›è¡Œç¿»è¯‘ã€åŠ å¯†å’Œå‹ç¼©ï¼ˆè¡¨ç¤ºåè®®æ•°æ®å•å…ƒPPDUï¼‰
åº”ç”¨å±‚ï¼šå…è®¸è®¿é—®OSIç¯å¢ƒçš„æ‰‹æ®µï¼ˆåº”ç”¨åè®®æ•°æ®å•å…ƒAPDUï¼‰
</code></pre>
<blockquote>
<p>å„ç§åè®®</p>
</blockquote>
<p><code>ICMPåè®®</code>ï¼š å› ç‰¹ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ã€‚å®ƒæ˜¯TCP/IPåè®®æ—çš„ä¸€ä¸ªå­åè®®ï¼Œç”¨äºåœ¨IPä¸»æœºã€è·¯ç”±å™¨ä¹‹é—´ä¼ é€’æ§åˆ¶æ¶ˆæ¯ã€‚<br><code>TFTPåè®®</code>ï¼š æ˜¯TCP/IPåè®®æ—ä¸­çš„ä¸€ä¸ªç”¨æ¥åœ¨å®¢æˆ·æœºä¸æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œç®€å•æ–‡ä»¶ä¼ è¾“çš„åè®®ï¼Œæä¾›ä¸å¤æ‚ã€å¼€é”€ä¸å¤§çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡ã€‚<br><code>HTTPåè®®</code>ï¼š è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯ä¸€ä¸ªå±äºåº”ç”¨å±‚çš„é¢å‘å¯¹è±¡çš„åè®®ï¼Œç”±äºå…¶ç®€æ·ã€å¿«é€Ÿçš„æ–¹å¼ï¼Œé€‚ç”¨äºåˆ†å¸ƒå¼è¶…åª’ä½“ä¿¡æ¯ç³»ç»Ÿã€‚<br><code>DHCPåè®®</code>ï¼š åŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œæ˜¯ä¸€ç§è®©ç³»ç»Ÿå¾—ä»¥è¿æ¥åˆ°ç½‘ç»œä¸Šï¼Œå¹¶è·å–æ‰€éœ€è¦çš„é…ç½®å‚æ•°æ‰‹æ®µã€‚</p>
<h2 id="è¯´è¯´mongoDBå’ŒMySQLçš„åŒºåˆ«"><a href="#è¯´è¯´mongoDBå’ŒMySQLçš„åŒºåˆ«" class="headerlink" title="è¯´è¯´mongoDBå’ŒMySQLçš„åŒºåˆ«"></a>è¯´è¯´mongoDBå’ŒMySQLçš„åŒºåˆ«</h2><p><code>MySQL</code>æ˜¯ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ï¼Œ<code>MongoDB</code>åˆ™æ˜¯éå…³ç³»å‹æ•°æ®åº“</p>
<p> <code>mongodb</code>ä»¥<code>BSON</code>ç»“æ„ï¼ˆäºŒè¿›åˆ¶ï¼‰è¿›è¡Œå­˜å‚¨ï¼Œå¯¹æµ·é‡æ•°æ®å­˜å‚¨æœ‰ç€å¾ˆæ˜æ˜¾çš„ä¼˜åŠ¿ã€‚</p>
<p>å¯¹æ¯”ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“,NoSQLæœ‰ç€éå¸¸æ˜¾è‘—çš„æ€§èƒ½å’Œæ‰©å±•æ€§ä¼˜åŠ¿ï¼Œä¸å…³ç³»å‹æ•°æ®åº“ç›¸æ¯”ï¼ŒMongoDBçš„ä¼˜ç‚¹æœ‰ï¼š<br>â‘ å¼±ä¸€è‡´æ€§ï¼ˆæœ€ç»ˆä¸€è‡´ï¼‰ï¼Œæ›´èƒ½ä¿è¯ç”¨æˆ·çš„è®¿é—®é€Ÿåº¦ï¼š<br>â‘¡æ–‡æ¡£ç»“æ„çš„å­˜å‚¨æ–¹å¼ï¼Œèƒ½å¤Ÿæ›´ä¾¿æ·çš„è·å–æ•°æ®ã€‚</p>
<h2 id="304ç¼“å­˜çš„åŸç†"><a href="#304ç¼“å­˜çš„åŸç†" class="headerlink" title="304ç¼“å­˜çš„åŸç†"></a>304ç¼“å­˜çš„åŸç†</h2><p>æœåŠ¡å™¨é¦–å…ˆäº§ç”Ÿ<code>ETag</code>ï¼ŒæœåŠ¡å™¨å¯åœ¨ç¨åä½¿ç”¨å®ƒæ¥åˆ¤æ–­é¡µé¢æ˜¯å¦å·²ç»è¢«ä¿®æ”¹ã€‚æœ¬è´¨ä¸Šï¼Œå®¢æˆ·ç«¯é€šè¿‡å°†è¯¥è®°å·ä¼ å›æœåŠ¡å™¨è¦æ±‚æœåŠ¡å™¨éªŒè¯å…¶ï¼ˆå®¢æˆ·ç«¯ï¼‰ç¼“å­˜ã€‚</p>
<p><br></p>
<p>304æ˜¯HTTPçŠ¶æ€ç ï¼ŒæœåŠ¡å™¨ç”¨æ¥æ ‡è¯†è¿™ä¸ªæ–‡ä»¶æ²¡ä¿®æ”¹ï¼Œä¸è¿”å›å†…å®¹ï¼Œæµè§ˆå™¨åœ¨æ¥æ”¶åˆ°ä¸ªçŠ¶æ€ç åï¼Œä¼šä½¿ç”¨æµè§ˆå™¨å·²ç¼“å­˜çš„æ–‡ä»¶</p>
<p><br></p>
<p>å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªé¡µé¢ï¼ˆAï¼‰ã€‚ æœåŠ¡å™¨è¿”å›é¡µé¢Aï¼Œå¹¶åœ¨ç»™<code>A</code>åŠ ä¸Šä¸€ä¸ª<code>ETag</code>ã€‚ å®¢æˆ·ç«¯å±•ç°è¯¥é¡µé¢ï¼Œå¹¶å°†é¡µé¢è¿åŒ<code>ETag</code>ä¸€èµ·ç¼“å­˜ã€‚ å®¢æˆ·å†æ¬¡è¯·æ±‚é¡µé¢<code>A</code>ï¼Œå¹¶å°†ä¸Šæ¬¡è¯·æ±‚æ—¶æœåŠ¡å™¨è¿”å›çš„<code>ETag</code>ä¸€èµ·ä¼ é€’ç»™æœåŠ¡å™¨ã€‚ æœåŠ¡å™¨æ£€æŸ¥è¯¥<code>ETag</code>ï¼Œå¹¶åˆ¤æ–­å‡ºè¯¥é¡µé¢è‡ªä¸Šæ¬¡å®¢æˆ·ç«¯è¯·æ±‚ä¹‹åè¿˜æœªè¢«ä¿®æ”¹ï¼Œç›´æ¥è¿”å›å“åº”<code>304</code>ï¼ˆæœªä¿®æ”¹â€”â€”<code>Not Modified</code>ï¼‰å’Œä¸€ä¸ªç©ºçš„å“åº”ä½“ã€‚</p>
<p><br></p>
<h2 id="ä»€ä¹ˆæ ·çš„å‰ç«¯ä»£ç æ˜¯å¥½"><a href="#ä»€ä¹ˆæ ·çš„å‰ç«¯ä»£ç æ˜¯å¥½" class="headerlink" title="ä»€ä¹ˆæ ·çš„å‰ç«¯ä»£ç æ˜¯å¥½"></a>ä»€ä¹ˆæ ·çš„å‰ç«¯ä»£ç æ˜¯å¥½</h2><p>é«˜å¤ç”¨ä½è€¦åˆï¼Œè¿™æ ·æ–‡ä»¶å°ï¼Œå¥½ç»´æŠ¤ï¼Œè€Œä¸”å¥½æ‰©å±•ã€‚</p>
<p>æœ¬æ–‡æ—¨åœ¨åŠ æ·±å¯¹å‰ç«¯çŸ¥è¯†ç‚¹çš„ç†è§£ï¼Œ<strong>èµ„æ–™æ¥æºäºç½‘ç»œ,æ„Ÿè°¢æ¯ä¸€ä¸ªè´¡çŒ®è€…</strong>ã€‚</p>
<h2 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h2><p>ğŸ‘‰<a href="https://microzz.com/2017/02/10/interview/">å‰ç«¯å¼€å‘é¢è¯•é¢˜é›†é”¦</a><br>ğŸ‘‰GitHubï¼š<a href="https://github.com/microzz" target="_blank" rel="external">https://github.com/microzz</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‰ç«¯é¢è¯•é¢˜&quot;&gt;&lt;a href=&quot;#å‰ç«¯é¢è¯•é¢˜&quot; class=&quot;headerlink&quot; title=&quot;å‰ç«¯é¢è¯•é¢˜&quot;&gt;&lt;/a&gt;å‰ç«¯é¢è¯•é¢˜&lt;/h1&gt;&lt;h2 id=&quot;ä¸€äº›å¼€æ”¾æ€§é¢˜ç›®&quot;&gt;&lt;a href=&quot;#ä¸€äº›å¼€æ”¾æ€§é¢˜ç›®&quot; class=&quot;headerlink&quot; title=
    
    </summary>
    
    
      <category term="å‰ç«¯" scheme="https://microzz.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="é¢è¯•" scheme="https://microzz.com/tags/%E9%9D%A2%E8%AF%95/"/>
    
      <category term="æ±‚èŒ" scheme="https://microzz.com/tags/%E6%B1%82%E8%81%8C/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptä¸­æ‰‹åŠ¨æ¨¡æ‹Ÿåˆ›å»ºIteratorsè¿­ä»£å™¨(éå†å™¨)</title>
    <link href="https://microzz.com/2017/01/29/iterators-test/"/>
    <id>https://microzz.com/2017/01/29/iterators-test/</id>
    <published>2017-01-29T12:58:35.000Z</published>
    <updated>2017-05-15T08:49:19.811Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>&nbsp;&nbsp;&nbsp;Generatorå‡½æ•°æ˜¯ES6æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œå…·ä½“è¯·çœ‹<a href="http://microzz.com/2017/01/13/generator/">Generatorå‡½æ•°æ•™ç¨‹</a>ã€‚Generatorå‡½æ•°æœ‰å¤šç§ç†è§£è§’åº¦ã€‚ä»è¯­æ³•ä¸Šï¼Œé¦–å…ˆå¯ä»¥æŠŠå®ƒç†è§£æˆï¼ŒGeneratorå‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ã€‚<br>&nbsp;&nbsp;&nbsp;æ‰§è¡ŒGeneratorå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒGeneratorå‡½æ•°é™¤äº†çŠ¶æ€æœºï¼Œè¿˜æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°ã€‚è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œå¯ä»¥ä¾æ¬¡éå†Generatorå‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€ã€‚</p>
</blockquote>
<h1 id="JavaScriptä¸­å¦‚ä½•æ‰‹åŠ¨æ¨¡æ‹Ÿåˆ›å»ºIteratorsè¿­ä»£å™¨-éå†å™¨"><a href="#JavaScriptä¸­å¦‚ä½•æ‰‹åŠ¨æ¨¡æ‹Ÿåˆ›å»ºIteratorsè¿­ä»£å™¨-éå†å™¨" class="headerlink" title="JavaScriptä¸­å¦‚ä½•æ‰‹åŠ¨æ¨¡æ‹Ÿåˆ›å»ºIteratorsè¿­ä»£å™¨(éå†å™¨)"></a>JavaScriptä¸­å¦‚ä½•æ‰‹åŠ¨æ¨¡æ‹Ÿåˆ›å»ºIteratorsè¿­ä»£å™¨(éå†å™¨)</h1><h2 id="é€šè¿‡ä»£ç å®ç°ï¼Œå…·ä½“å¦‚ä¸‹"><a href="#é€šè¿‡ä»£ç å®ç°ï¼Œå…·ä½“å¦‚ä¸‹" class="headerlink" title="é€šè¿‡ä»£ç å®ç°ï¼Œå…·ä½“å¦‚ä¸‹"></a>é€šè¿‡ä»£ç å®ç°ï¼Œå…·ä½“å¦‚ä¸‹</h2><pre><code class="javascript">/**
 * JavaScriptä¸­æ‰‹åŠ¨æ¨¡æ‹Ÿåˆ›å»ºIteratorsè¿­ä»£å™¨
 */
function Iterators(args) {
  let i = 0;
  return {
    next() {
      let done = (i &gt;= args.length - 1);
      let value = args[i++];
      return {
        value: value,
        done: done
      }
    }
  }
}

//è¿›è¡Œæµ‹è¯•éªŒè¯ç»“æœ
let test = Iterators([&#39;microzz&#39;, &#39;æ¶µæœˆå¤©&#39;, &#39;ITæŠ€æœ¯åˆ†äº«&#39;]);
console.log(test.next()); // { value: &#39;microzz&#39;, done: false }
console.log(test.next()); // { value: &#39;æ¶µæœˆå¤©&#39;, done: false }
console.log(test.next()); // { value: &#39;ITæŠ€æœ¯åˆ†äº«&#39;, done: true }
console.log(test.next()); // { value: undefined, done: true }
</code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Generatorå‡½æ•°æ˜¯ES6æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œå…·ä½“è¯·çœ‹&lt;a href=&quot;http://microzz.com/2017/01/13/generator/&quot;&gt;Generatorå‡½æ•°æ•™ç¨‹&lt;/a&gt;ã€‚Gene
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Iterators" scheme="https://microzz.com/tags/Iterators/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptè‡ªå®šä¹‰æ–¹æ³•å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´</title>
    <link href="https://microzz.com/2017/01/26/deep-copy/"/>
    <id>https://microzz.com/2017/01/26/deep-copy/</id>
    <published>2017-01-26T11:11:02.000Z</published>
    <updated>2017-05-05T13:24:03.476Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScriptè‡ªå®šä¹‰æ–¹æ³•å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´"><a href="#JavaScriptè‡ªå®šä¹‰æ–¹æ³•å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´" class="headerlink" title="JavaScriptè‡ªå®šä¹‰æ–¹æ³•å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´"></a>JavaScriptè‡ªå®šä¹‰æ–¹æ³•å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´</h1><h3 id="ES6ä¸­çš„Object-assignæ–¹æ³•"><a href="#ES6ä¸­çš„Object-assignæ–¹æ³•" class="headerlink" title="ES6ä¸­çš„Object.assignæ–¹æ³•"></a>ES6ä¸­çš„Object.assignæ–¹æ³•</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ES6ä¸­æ–°å¢Object.assignæ–¹æ³•ç”¨äºå¯¹è±¡çš„åˆå¹¶ï¼Œå°†æºå¯¹è±¡ï¼ˆsourceï¼‰çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆtargetï¼‰ã€‚</p>
<hr>
<h4 id="â—ï¸æ³¨æ„ç‚¹"><a href="#â—ï¸æ³¨æ„ç‚¹" class="headerlink" title="â—ï¸æ³¨æ„ç‚¹:"></a>â—ï¸æ³¨æ„ç‚¹:</h4><blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Object.assignæ–¹æ³•å®è¡Œçš„æ˜¯æµ…æ‹·è´ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæºå¯¹è±¡æŸä¸ªå±æ€§çš„å€¼æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆç›®æ ‡å¯¹è±¡æ‹·è´å¾—åˆ°çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚</p>
</blockquote>
<hr>
<h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è‡ªå·±åŠ¨æ‰‹æ¥æ‰‹å·¥å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´æ–¹æ³•ï¼Œå…·ä½“å®ç°æœ‰å¦‚ä¸‹ä¸¤ç§æ–¹æ³•ï¼š</p>
<h2 id="æ–¹æ³•1âƒ£ï¸"><a href="#æ–¹æ³•1âƒ£ï¸" class="headerlink" title="æ–¹æ³•1âƒ£ï¸"></a>æ–¹æ³•1âƒ£ï¸</h2><pre><code class="javascript">/**
 * è‡ªå®šä¹‰æ–¹æ³•å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´
 */
function deepCopy(obj) {
  let copy = {};

  // å¦‚æœæ˜¯åŸºæœ¬ç±»å‹ç›´æ¥èµ‹å€¼ï¼Œ
  // å¦‚æœæ˜¯æ•°ç»„åˆ™æ‹·è´ï¼Œ
  // å…¶ä»–å¯¹è±¡åˆ™é€’å½’è°ƒç”¨deepCopyæ–¹æ³•
    Object.keys(obj).forEach(key =&gt; {

      if (obj[key] instanceof Array) {
        copy[key] = Array.from(obj[key]);
      }
      else if (typeof obj[key] === &#39;object&#39;) {
        copy[key] = deepCopy(obj[key]);
      }
      else {
        copy[key] = obj[key];
      }
    })

  return copy;
}
</code></pre>
<h2 id="æ–¹æ³•2âƒ£ï¸"><a href="#æ–¹æ³•2âƒ£ï¸" class="headerlink" title="æ–¹æ³•2âƒ£ï¸"></a>æ–¹æ³•2âƒ£ï¸</h2><pre><code class="javascript">function deepCopy(obj) {
  return JSON.parse(JSON.stringify(obj));
}
</code></pre>
<hr>
<h1 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h1><p>&nbsp;&nbsp;ä»¥ä¸Šé€šè¿‡ä¸¤ç§æ–¹æ³•å®ç°äº†å¯¹è±¡çš„æ·±æ‹·è´ï¼Œä¸‹é¢é€šè¿‡æ•°æ®è¿›è¡Œç®€å•éªŒè¯:</p>
<pre><code class="javascript">//è‡ªå®šä¹‰ä¸€ä¸ªå¤æ‚æ•°æ®å¯¹è±¡
let data = {
  name: &#39;Zhao&#39;,
  age: 22,
  url: &#39;https://microzz.com&#39;,
  scores:{
    math: 66,
    java: 88,
    test: [1, 2, 3]
  },
  skills: [&#39;Node.js&#39;, &#39;ReactJS&#39;, &#39;ES6&#39;],
  say() {
    console.log(`My name is ${this.name}`)
  }
}

//è¿›è¡Œæ·±æ‹·è´ï¼ŒæŠŠæ•°æ®ä¿å­˜åœ¨copyData
let copyData = deepCopy(data);

//å¯¹copyDataè¿›è¡Œä¿®æ”¹ï¼Œçœ‹æ˜¯å¦å¯¹åŸæ•°æ®æœ‰å½±å“
copyData.name = &#39;Hui&#39;;
copyData.scores.math = 99;
copyData.scores.test[1] = 100;
copyData.skills[2] = &#39;ES5&#39;;
copyData.say = function () {
  console.log(`Copy: My name is ${this.name}`);
}

//æ‰“å°è¾“å‡ºæŸ¥çœ‹ç»“æœè¿›è¡ŒéªŒè¯
console.log(data);
/*
{ name: &#39;Zhao&#39;,
age: 22,
url: &#39;http://microzz.com&#39;,
scores: { math: 66, java: 88, test: [ 1, 2, 3 ] },
skills: [ &#39;Node.js&#39;, &#39;ReactJS&#39;, &#39;ES6&#39; ],
say: [Function: say] }
 */

console.log(copyData);
/*
{ name: &#39;Hui&#39;,
age: 22,
url: &#39;http://microzz.com&#39;,
scores: { math: 99, java: 88, test: [ 1, 100, 3 ] },
skills: [ &#39;Node.js&#39;, &#39;ReactJS&#39;, &#39;ES5&#39; ],
say: [Function] }
 */

data.say(); // My name is Zhao
copyData.say(); // Copy: My name is Hui
</code></pre>
<hr>
<blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;ä¸¤ç§æ–¹æ³•çš„ç»“æœå‡ä¸€è‡´ï¼Œå®ç°äº†å¯¹è±¡çš„æ·±æ‹·è´ï¼Œä½†æ˜¯ç¬¬äºŒç§æ–¹æ³•é€šè¿‡åŸç”Ÿçš„JSON.parseå’ŒJSON.stringifyæ–¹æ³•æ›´ä¸ºç®€å•æ˜“æ‡‚ã€‚</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScriptè‡ªå®šä¹‰æ–¹æ³•å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´&quot;&gt;&lt;a href=&quot;#JavaScriptè‡ªå®šä¹‰æ–¹æ³•å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´&quot; class=&quot;headerlink&quot; title=&quot;JavaScriptè‡ªå®šä¹‰æ–¹æ³•å®ç°å¤æ‚å¯¹è±¡çš„æ·±æ‹·è´&quot;&gt;&lt;/a&gt;JavaScriptè‡ª
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="æ·±æ‹·è´" scheme="https://microzz.com/tags/%E6%B7%B1%E6%8B%B7%E8%B4%9D/"/>
    
  </entry>
  
  <entry>
    <title>ES6ä¸­åµŒå¥—çš„å¯¹è±¡å¦‚ä½•è§£æ„(Destructuring)</title>
    <link href="https://microzz.com/2017/01/24/destructuringTest/"/>
    <id>https://microzz.com/2017/01/24/destructuringTest/</id>
    <published>2017-01-24T11:17:51.000Z</published>
    <updated>2017-01-24T11:51:37.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ES6ä¸­åµŒå¥—çš„å¯¹è±¡å¦‚ä½•è§£æ„"><a href="#ES6ä¸­åµŒå¥—çš„å¯¹è±¡å¦‚ä½•è§£æ„" class="headerlink" title="ES6ä¸­åµŒå¥—çš„å¯¹è±¡å¦‚ä½•è§£æ„"></a>ES6ä¸­åµŒå¥—çš„å¯¹è±¡å¦‚ä½•è§£æ„</h1><blockquote>
<p>å¯¹äºæ™®é€šå¯¹è±¡çš„è§£æ„å¤§å®¶åº”è¯¥æ²¡ä»€ä¹ˆé—®é¢˜(è¯¦ç»†å­¦ä¹ ES6çš„è§£æ„çŸ¥è¯†è¯·çœ‹è¿™é‡ŒğŸ‘‰ <a href="http://microzz.com/2016/11/13/destructuring/">å˜é‡çš„è§£æ„èµ‹å€¼(Destructuring)</a> )ï¼Œä½†æ˜¯é‡åˆ°å¤æ‚å¯¹è±¡ç»“æ„çš„åº”è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿå¯ä»¥çœ‹ä¸‹é¢çš„ç¤ºä¾‹ã€‚</p>
</blockquote>
<pre><code class="javascript">//å£°æ˜ä¸€ä¸ªå¯¹è±¡ä¿å­˜ä¿¡æ¯
let jsonData = {
  name: &#39;Zhao&#39;,
  age: 22,
  score: {
    Chinese: 77,
    math: 99
  }
}

//å¯¹åµŒå¥—ç»“æ„çš„å¯¹è±¡è¿›è¡Œè§£æ„1
let {name, age, score:{Chinese, math}} = jsonData;

console.log(`name is ${name}`); //name is Zhao
console.log(`age is ${age}`); //age is 22
console.log(`Chinese score is ${Chinese}`); //Chinese score is 77
console.log(`math score is ${math}`);  //math score is 99

//å¦å¤–ä¸€ä¸ªä¾‹å­ğŸ˜„
let obj = {
  p: [
    &#39;Hello&#39;,
    { y: &#39;World&#39; }
  ]
};

//å¯¹åµŒå¥—ç»“æ„çš„å¯¹è±¡è¿›è¡Œè§£æ„2
let { p: [x, { y }] } = obj;
console.log(`x is ${x}`); // x is Hello
console.log(`y is ${y}`); // y is World
</code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ES6ä¸­åµŒå¥—çš„å¯¹è±¡å¦‚ä½•è§£æ„&quot;&gt;&lt;a href=&quot;#ES6ä¸­åµŒå¥—çš„å¯¹è±¡å¦‚ä½•è§£æ„&quot; class=&quot;headerlink&quot; title=&quot;ES6ä¸­åµŒå¥—çš„å¯¹è±¡å¦‚ä½•è§£æ„&quot;&gt;&lt;/a&gt;ES6ä¸­åµŒå¥—çš„å¯¹è±¡å¦‚ä½•è§£æ„&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;å¯¹äºæ™®é€šå¯¹è±¡çš„è§£æ„å¤§å®¶åº”è¯¥
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Destructuring" scheme="https://microzz.com/tags/Destructuring/"/>
    
  </entry>
  
  <entry>
    <title>JavaScripté€šè¿‡åŸå‹è®¾è®¡ä¸€ä¸ªäº‹ä»¶å¯¹è±¡</title>
    <link href="https://microzz.com/2017/01/21/listener-event/"/>
    <id>https://microzz.com/2017/01/21/listener-event/</id>
    <published>2017-01-21T14:13:02.000Z</published>
    <updated>2017-01-21T14:27:35.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JavaScripté€šè¿‡åŸå‹è®¾è®¡ä¸€ä¸ªäº‹ä»¶å¯¹è±¡"><a href="#JavaScripté€šè¿‡åŸå‹è®¾è®¡ä¸€ä¸ªäº‹ä»¶å¯¹è±¡" class="headerlink" title="JavaScripté€šè¿‡åŸå‹è®¾è®¡ä¸€ä¸ªäº‹ä»¶å¯¹è±¡"></a>JavaScripté€šè¿‡åŸå‹è®¾è®¡ä¸€ä¸ªäº‹ä»¶å¯¹è±¡</h1><h3 id="å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š"><a href="#å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š" class="headerlink" title="å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š"></a>å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</h3><blockquote>
<ol>
<li>æ·»åŠ ç›‘å¬è€…</li>
<li>ç§»é™¤ç›‘å¬è€…</li>
<li>æ¸…ç©ºç›‘å¬è€…</li>
<li>å‘èµ·äº‹ä»¶ä¿¡å·</li>
</ol>
</blockquote>
<h3 id="è®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š"><a href="#è®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š" class="headerlink" title="è®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š"></a>è®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š</h3><blockquote>
<p>  å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä¸€ä¸ªå®ä¾‹æˆå‘˜listenersï¼Œç”¨äºè®°å½•æ‰€æœ‰çš„ç›‘å¬è€…<br>ä¸ºå¯¹è±¡çš„åŸå‹å¢åŠ ï¼Œæ–°å¢ã€åˆ é™¤ã€æ¸…ç©ºå’Œæ‰§è¡Œå››ä¸ªæˆå‘˜<br>å…·ä½“ä»£ç å¯ä»¥å‚è§ä¸‹é¢ç¤ºä¾‹</p>
</blockquote>
<h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><pre><code class="javascript">function myEvent(){
    this.listeners = [];    //ç›‘å¬è€…åˆ—è¡¨
}
//æ·»åŠ ä¸€ä¸ªç›‘å¬è€…
myEvent.prototype.addListener = function(fn){
    this.listeners.push(fn);
};
//é™¤ç§»ä¸€ä¸ªç›‘å¬è€…
myEvent.prototype.removeListener = function(fn){
    var index = this.listeners.indexOf(fn);
    this.listeners.splice(index,1);
};
//æ¸…é™¤æ‰€æœ‰ç›‘å¬è€…
myEvent.prototype.clearListeners = function(){
    this.listeners = [];
};
//å‘å‡ºæ‰§è¡Œä¿¡å·ï¼Œå¹¶å‘Šä¹‹æ‰€æœ‰ç›‘å¬è€…
myEvent.prototype.raise = function(e){
    var l = this.listeners.length;
    for(var i = 0; i &lt; l; i++){
        this.listeners[i](e);    //æ‰§è¡Œæ‰€æœ‰ç›‘å¬æ–¹æ³•
    }
};

var me = new myEvent();

//äº‹ä»¶fun1
function fun1(e) {
    console.log(&#39;fun1: &#39; + e);
}

//äº‹ä»¶fun2
function fun2(e) {
    console.log(&#39;fun2: &#39; + e);
}

//è°ƒç”¨ç›¸å…³æ–¹æ³•è¿›è¡Œæµ‹è¯•
me.addListener(fun1);
me.addListener(fun2);
me.removeListener(fun1)
//me.clearListeners();
me.raise(&quot;a&quot;);
</code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JavaScripté€šè¿‡åŸå‹è®¾è®¡ä¸€ä¸ªäº‹ä»¶å¯¹è±¡&quot;&gt;&lt;a href=&quot;#JavaScripté€šè¿‡åŸå‹è®¾è®¡ä¸€ä¸ªäº‹ä»¶å¯¹è±¡&quot; class=&quot;headerlink&quot; title=&quot;JavaScripté€šè¿‡åŸå‹è®¾è®¡ä¸€ä¸ªäº‹ä»¶å¯¹è±¡&quot;&gt;&lt;/a&gt;JavaScripté€šè¿‡åŸå‹è®¾è®¡ä¸€ä¸ªäº‹ä»¶
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="äº‹ä»¶" scheme="https://microzz.com/tags/%E4%BA%8B%E4%BB%B6/"/>
    
      <category term="event" scheme="https://microzz.com/tags/event/"/>
    
      <category term="åŸå‹" scheme="https://microzz.com/tags/%E5%8E%9F%E5%9E%8B/"/>
    
  </entry>
  
  <entry>
    <title>ES6 Module</title>
    <link href="https://microzz.com/2017/01/18/module/"/>
    <id>https://microzz.com/2017/01/18/module/</id>
    <published>2017-01-18T09:01:23.000Z</published>
    <updated>2017-01-18T09:07:56.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h1><p>å†å²ä¸Šï¼ŒJavaScript ä¸€ç›´æ²¡æœ‰æ¨¡å—ï¼ˆmoduleï¼‰ä½“ç³»ï¼Œæ— æ³•å°†ä¸€ä¸ªå¤§ç¨‹åºæ‹†åˆ†æˆäº’ç›¸ä¾èµ–çš„å°æ–‡ä»¶ï¼Œå†ç”¨ç®€å•çš„æ–¹æ³•æ‹¼è£…èµ·æ¥ã€‚å…¶ä»–è¯­è¨€éƒ½æœ‰è¿™é¡¹åŠŸèƒ½ï¼Œæ¯”å¦‚ Ruby çš„<code>require</code>ã€Python çš„<code>import</code>ï¼Œç”šè‡³å°±è¿ CSS éƒ½æœ‰<code>@import</code>ï¼Œä½†æ˜¯ JavaScript ä»»ä½•è¿™æ–¹é¢çš„æ”¯æŒéƒ½æ²¡æœ‰ï¼Œè¿™å¯¹å¼€å‘å¤§å‹çš„ã€å¤æ‚çš„é¡¹ç›®å½¢æˆäº†å·¨å¤§éšœç¢ã€‚</p>
<p>åœ¨ ES6 ä¹‹å‰ï¼Œç¤¾åŒºåˆ¶å®šäº†ä¸€äº›æ¨¡å—åŠ è½½æ–¹æ¡ˆï¼Œæœ€ä¸»è¦çš„æœ‰ CommonJS å’Œ AMD ä¸¤ç§ã€‚å‰è€…ç”¨äºæœåŠ¡å™¨ï¼Œåè€…ç”¨äºæµè§ˆå™¨ã€‚ES6 åœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ä¸Šï¼Œå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œè€Œä¸”å®ç°å¾—ç›¸å½“ç®€å•ï¼Œå®Œå…¨å¯ä»¥å–ä»£ç°æœ‰çš„ CommonJS å’Œ AMD è§„èŒƒï¼Œæˆä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šç”¨çš„æ¨¡å—è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ES6 æ¨¡å—çš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯å°½é‡çš„é™æ€åŒ–ï¼Œä½¿å¾—ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡ã€‚CommonJS å’Œ AMD æ¨¡å—ï¼Œéƒ½åªèƒ½åœ¨è¿è¡Œæ—¶ç¡®å®šè¿™äº›ä¸œè¥¿ã€‚æ¯”å¦‚ï¼ŒCommonJS æ¨¡å—å°±æ˜¯å¯¹è±¡ï¼Œè¾“å…¥æ—¶å¿…é¡»æŸ¥æ‰¾å¯¹è±¡å±æ€§ã€‚</p>
<pre><code class="javascript">// CommonJSæ¨¡å—
let { stat, exists, readFile } = require(&#39;fs&#39;);

// ç­‰åŒäº
let _fs = require(&#39;fs&#39;);
let stat = _fs.stat, exists = _fs.exists, readfile = _fs.readfile;
</code></pre>
<p>ä¸Šé¢ä»£ç çš„å®è´¨æ˜¯æ•´ä½“åŠ è½½<code>fs</code>æ¨¡å—ï¼ˆå³åŠ è½½<code>fs</code>çš„æ‰€æœ‰æ–¹æ³•ï¼‰ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼ˆ<code>_fs</code>ï¼‰ï¼Œç„¶åå†ä»è¿™ä¸ªå¯¹è±¡ä¸Šé¢è¯»å–3ä¸ªæ–¹æ³•ã€‚è¿™ç§åŠ è½½ç§°ä¸ºâ€œè¿è¡Œæ—¶åŠ è½½â€ï¼Œå› ä¸ºåªæœ‰è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œå¯¼è‡´å®Œå…¨æ²¡åŠæ³•åœ¨ç¼–è¯‘æ—¶åšâ€œé™æ€ä¼˜åŒ–â€ã€‚</p>
<p>ES6 æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡<code>export</code>å‘½ä»¤æ˜¾å¼æŒ‡å®šè¾“å‡ºçš„ä»£ç ï¼Œå†é€šè¿‡<code>import</code>å‘½ä»¤è¾“å…¥ã€‚</p>
<pre><code class="javascript">// ES6æ¨¡å—
import { stat, exists, readFile } from &#39;fs&#39;;
</code></pre>
<p>ä¸Šé¢ä»£ç çš„å®è´¨æ˜¯ä»<code>fs</code>æ¨¡å—åŠ è½½3ä¸ªæ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•ä¸åŠ è½½ã€‚è¿™ç§åŠ è½½ç§°ä¸ºâ€œç¼–è¯‘æ—¶åŠ è½½â€æˆ–è€…é™æ€åŠ è½½ï¼Œå³ ES6 å¯ä»¥åœ¨ç¼–è¯‘æ—¶å°±å®Œæˆæ¨¡å—åŠ è½½ï¼Œæ•ˆç‡è¦æ¯” CommonJS æ¨¡å—çš„åŠ è½½æ–¹å¼é«˜ã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†æ²¡æ³•å¼•ç”¨ ES6 æ¨¡å—æœ¬èº«ï¼Œå› ä¸ºå®ƒä¸æ˜¯å¯¹è±¡ã€‚</p>
<p>ç”±äº ES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶åŠ è½½ï¼Œä½¿å¾—é™æ€åˆ†ææˆä¸ºå¯èƒ½ã€‚æœ‰äº†å®ƒï¼Œå°±èƒ½è¿›ä¸€æ­¥æ‹“å®½ JavaScript çš„è¯­æ³•ï¼Œæ¯”å¦‚å¼•å…¥å®ï¼ˆmacroï¼‰å’Œç±»å‹æ£€éªŒï¼ˆtype systemï¼‰è¿™äº›åªèƒ½é é™æ€åˆ†æå®ç°çš„åŠŸèƒ½ã€‚</p>
<p>é™¤äº†é™æ€åŠ è½½å¸¦æ¥çš„å„ç§å¥½å¤„ï¼ŒES6 æ¨¡å—è¿˜æœ‰ä»¥ä¸‹å¥½å¤„ã€‚</p>
<ul>
<li>ä¸å†éœ€è¦<code>UMD</code>æ¨¡å—æ ¼å¼äº†ï¼Œå°†æ¥æœåŠ¡å™¨å’Œæµè§ˆå™¨éƒ½ä¼šæ”¯æŒ ES6 æ¨¡å—æ ¼å¼ã€‚ç›®å‰ï¼Œé€šè¿‡å„ç§å·¥å…·åº“ï¼Œå…¶å®å·²ç»åšåˆ°äº†è¿™ä¸€ç‚¹ã€‚</li>
<li>å°†æ¥æµè§ˆå™¨çš„æ–° API å°±èƒ½ç”¨æ¨¡å—æ ¼å¼æä¾›ï¼Œä¸å†å¿…é¡»åšæˆå…¨å±€å˜é‡æˆ–è€…<code>navigator</code>å¯¹è±¡çš„å±æ€§ã€‚</li>
<li>ä¸å†éœ€è¦å¯¹è±¡ä½œä¸ºå‘½åç©ºé—´ï¼ˆæ¯”å¦‚<code>Math</code>å¯¹è±¡ï¼‰ï¼Œæœªæ¥è¿™äº›åŠŸèƒ½å¯ä»¥é€šè¿‡æ¨¡å—æä¾›ã€‚</li>
</ul>
<h2 id="ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼</h2><p>ES6 çš„æ¨¡å—è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰åœ¨æ¨¡å—å¤´éƒ¨åŠ ä¸Š<code>&quot;use strict&quot;;</code>ã€‚</p>
<p>ä¸¥æ ¼æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹é™åˆ¶ã€‚</p>
<ul>
<li>å˜é‡å¿…é¡»å£°æ˜åå†ä½¿ç”¨</li>
<li>å‡½æ•°çš„å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§ï¼Œå¦åˆ™æŠ¥é”™</li>
<li>ä¸èƒ½ä½¿ç”¨<code>with</code>è¯­å¥</li>
<li>ä¸èƒ½å¯¹åªè¯»å±æ€§èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™</li>
<li>ä¸èƒ½ä½¿ç”¨å‰ç¼€0è¡¨ç¤ºå…«è¿›åˆ¶æ•°ï¼Œå¦åˆ™æŠ¥é”™</li>
<li>ä¸èƒ½åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™</li>
<li>ä¸èƒ½åˆ é™¤å˜é‡<code>delete prop</code>ï¼Œä¼šæŠ¥é”™ï¼Œåªèƒ½åˆ é™¤å±æ€§<code>delete global[prop]</code></li>
<li><code>eval</code>ä¸ä¼šåœ¨å®ƒçš„å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡</li>
<li><code>eval</code>å’Œ<code>arguments</code>ä¸èƒ½è¢«é‡æ–°èµ‹å€¼</li>
<li><code>arguments</code>ä¸ä¼šè‡ªåŠ¨åæ˜ å‡½æ•°å‚æ•°çš„å˜åŒ–</li>
<li>ä¸èƒ½ä½¿ç”¨<code>arguments.callee</code></li>
<li>ä¸èƒ½ä½¿ç”¨<code>arguments.caller</code></li>
<li>ç¦æ­¢<code>this</code>æŒ‡å‘å…¨å±€å¯¹è±¡</li>
<li>ä¸èƒ½ä½¿ç”¨<code>fn.caller</code>å’Œ<code>fn.arguments</code>è·å–å‡½æ•°è°ƒç”¨çš„å †æ ˆ</li>
<li>å¢åŠ äº†ä¿ç•™å­—ï¼ˆæ¯”å¦‚<code>protected</code>ã€<code>static</code>å’Œ<code>interface</code>ï¼‰</li>
</ul>
<p>ä¸Šé¢è¿™äº›é™åˆ¶ï¼Œæ¨¡å—éƒ½å¿…é¡»éµå®ˆã€‚ç”±äºä¸¥æ ¼æ¨¡å¼æ˜¯ ES5 å¼•å…¥çš„ï¼Œä¸å±äº ES6ï¼Œæ‰€ä»¥è¯·å‚é˜…ç›¸å…³ ES5 ä¹¦ç±ï¼Œæœ¬ä¹¦ä¸å†è¯¦ç»†ä»‹ç»äº†ã€‚</p>
<h2 id="export-å‘½ä»¤"><a href="#export-å‘½ä»¤" class="headerlink" title="export å‘½ä»¤"></a>export å‘½ä»¤</h2><p>æ¨¡å—åŠŸèƒ½ä¸»è¦ç”±ä¸¤ä¸ªå‘½ä»¤æ„æˆï¼š<code>export</code>å’Œ<code>import</code>ã€‚<code>export</code>å‘½ä»¤ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œ<code>import</code>å‘½ä»¤ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½ã€‚</p>
<p>ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶å†…éƒ¨çš„æ‰€æœ‰å˜é‡ï¼Œå¤–éƒ¨æ— æ³•è·å–ã€‚å¦‚æœä½ å¸Œæœ›å¤–éƒ¨èƒ½å¤Ÿè¯»å–æ¨¡å—å†…éƒ¨çš„æŸä¸ªå˜é‡ï¼Œå°±å¿…é¡»ä½¿ç”¨<code>export</code>å…³é”®å­—è¾“å‡ºè¯¥å˜é‡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª JS æ–‡ä»¶ï¼Œé‡Œé¢ä½¿ç”¨<code>export</code>å‘½ä»¤è¾“å‡ºå˜é‡ã€‚</p>
<pre><code class="javascript">// profile.js
export var firstName = &#39;Michael&#39;;
export var lastName = &#39;Jackson&#39;;
export var year = 1958;
</code></pre>
<p>ä¸Šé¢ä»£ç æ˜¯<code>profile.js</code>æ–‡ä»¶ï¼Œä¿å­˜äº†ç”¨æˆ·ä¿¡æ¯ã€‚ES6å°†å…¶è§†ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œé‡Œé¢ç”¨<code>export</code>å‘½ä»¤å¯¹å¤–éƒ¨è¾“å‡ºäº†ä¸‰ä¸ªå˜é‡ã€‚</p>
<p><code>export</code>çš„å†™æ³•ï¼Œé™¤äº†åƒä¸Šé¢è¿™æ ·ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§ã€‚</p>
<pre><code class="javascript">// profile.js
var firstName = &#39;Michael&#39;;
var lastName = &#39;Jackson&#39;;
var year = 1958;

export {firstName, lastName, year};
</code></pre>
<p>ä¸Šé¢ä»£ç åœ¨<code>export</code>å‘½ä»¤åé¢ï¼Œä½¿ç”¨å¤§æ‹¬å·æŒ‡å®šæ‰€è¦è¾“å‡ºçš„ä¸€ç»„å˜é‡ã€‚å®ƒä¸å‰ä¸€ç§å†™æ³•ï¼ˆç›´æ¥æ”¾ç½®åœ¨<code>var</code>è¯­å¥å‰ï¼‰æ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯åº”è¯¥ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨è¿™ç§å†™æ³•ã€‚å› ä¸ºè¿™æ ·å°±å¯ä»¥åœ¨è„šæœ¬å°¾éƒ¨ï¼Œä¸€çœ¼çœ‹æ¸…æ¥šè¾“å‡ºäº†å“ªäº›å˜é‡ã€‚</p>
<p>exportå‘½ä»¤é™¤äº†è¾“å‡ºå˜é‡ï¼Œè¿˜å¯ä»¥è¾“å‡ºå‡½æ•°æˆ–ç±»ï¼ˆclassï¼‰ã€‚</p>
<pre><code class="javascript">export function multiply(x, y) {
  return x * y;
};
</code></pre>
<p>ä¸Šé¢ä»£ç å¯¹å¤–è¾“å‡ºä¸€ä¸ªå‡½æ•°<code>multiply</code>ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œ<code>export</code>è¾“å‡ºçš„å˜é‡å°±æ˜¯æœ¬æ¥çš„åå­—ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨<code>as</code>å…³é”®å­—é‡å‘½åã€‚</p>
<pre><code class="javascript">function v1() { ... }
function v2() { ... }

export {
  v1 as streamV1,
  v2 as streamV2,
  v2 as streamLatestVersion
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨<code>as</code>å…³é”®å­—ï¼Œé‡å‘½åäº†å‡½æ•°<code>v1</code>å’Œ<code>v2</code>çš„å¯¹å¤–æ¥å£ã€‚é‡å‘½ååï¼Œ<code>v2</code>å¯ä»¥ç”¨ä¸åŒçš„åå­—è¾“å‡ºä¸¤æ¬¡ã€‚</p>
<p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œ<code>export</code>å‘½ä»¤è§„å®šçš„æ˜¯å¯¹å¤–çš„æ¥å£ï¼Œå¿…é¡»ä¸æ¨¡å—å†…éƒ¨çš„å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
export 1;

// æŠ¥é”™
var m = 1;
export m;
</code></pre>
<p>ä¸Šé¢ä¸¤ç§å†™æ³•éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ²¡æœ‰æä¾›å¯¹å¤–çš„æ¥å£ã€‚ç¬¬ä¸€ç§å†™æ³•ç›´æ¥è¾“å‡º1ï¼Œç¬¬äºŒç§å†™æ³•é€šè¿‡å˜é‡<code>m</code>ï¼Œè¿˜æ˜¯ç›´æ¥è¾“å‡º1ã€‚<code>1</code>åªæ˜¯ä¸€ä¸ªå€¼ï¼Œä¸æ˜¯æ¥å£ã€‚æ­£ç¡®çš„å†™æ³•æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">// å†™æ³•ä¸€
export var m = 1;

// å†™æ³•äºŒ
var m = 1;
export {m};

// å†™æ³•ä¸‰
var n = 1;
export {n as m};
</code></pre>
<p>ä¸Šé¢ä¸‰ç§å†™æ³•éƒ½æ˜¯æ­£ç¡®çš„ï¼Œè§„å®šäº†å¯¹å¤–çš„æ¥å£<code>m</code>ã€‚å…¶ä»–è„šæœ¬å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥å£ï¼Œå–åˆ°å€¼<code>1</code>ã€‚å®ƒä»¬çš„å®è´¨æ˜¯ï¼Œåœ¨æ¥å£åä¸æ¨¡å—å†…éƒ¨å˜é‡ä¹‹é—´ï¼Œå»ºç«‹äº†ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚</p>
<p>åŒæ ·çš„ï¼Œ<code>function</code>å’Œ<code>class</code>çš„è¾“å‡ºï¼Œä¹Ÿå¿…é¡»éµå®ˆè¿™æ ·çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
function f() {}
export f;

// æ­£ç¡®
export function f() {};

// æ­£ç¡®
function f() {}
export {f};
</code></pre>
<p>å¦å¤–ï¼Œ<code>export</code>è¯­å¥è¾“å‡ºçš„æ¥å£ï¼Œä¸å…¶å¯¹åº”çš„å€¼æ˜¯åŠ¨æ€ç»‘å®šå…³ç³»ï¼Œå³é€šè¿‡è¯¥æ¥å£ï¼Œå¯ä»¥å–åˆ°æ¨¡å—å†…éƒ¨å®æ—¶çš„å€¼ã€‚</p>
<pre><code class="javascript">export var foo = &#39;bar&#39;;
setTimeout(() =&gt; foo = &#39;baz&#39;, 500);
</code></pre>
<p>ä¸Šé¢ä»£ç è¾“å‡ºå˜é‡<code>foo</code>ï¼Œå€¼ä¸º<code>bar</code>ï¼Œ500æ¯«ç§’ä¹‹åå˜æˆ<code>baz</code>ã€‚</p>
<p>è¿™ä¸€ç‚¹ä¸CommonJSè§„èŒƒå®Œå…¨ä¸åŒã€‚CommonJSæ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„ç¼“å­˜ï¼Œä¸å­˜åœ¨åŠ¨æ€æ›´æ–°ï¼Œè¯¦è§ä¸‹æ–‡ã€ŠES6æ¨¡å—åŠ è½½çš„å®è´¨ã€‹ä¸€èŠ‚ã€‚</p>
<p>æœ€åï¼Œ<code>export</code>å‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äºæ¨¡å—é¡¶å±‚å°±å¯ä»¥ã€‚å¦‚æœå¤„äºå—çº§ä½œç”¨åŸŸå†…ï¼Œå°±ä¼šæŠ¥é”™ï¼Œä¸‹ä¸€èŠ‚çš„<code>import</code>å‘½ä»¤ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™æ˜¯å› ä¸ºå¤„äºæ¡ä»¶ä»£ç å—ä¹‹ä¸­ï¼Œå°±æ²¡æ³•åšé™æ€ä¼˜åŒ–äº†ï¼Œè¿èƒŒäº†ES6æ¨¡å—çš„è®¾è®¡åˆè¡·ã€‚</p>
<pre><code class="javascript">function foo() {
  export default &#39;bar&#39; // SyntaxError
}
foo()
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>export</code>è¯­å¥æ”¾åœ¨å‡½æ•°ä¹‹ä¸­ï¼Œç»“æœæŠ¥é”™ã€‚</p>
<h2 id="import-å‘½ä»¤"><a href="#import-å‘½ä»¤" class="headerlink" title="import å‘½ä»¤"></a>import å‘½ä»¤</h2><p>ä½¿ç”¨<code>export</code>å‘½ä»¤å®šä¹‰äº†æ¨¡å—çš„å¯¹å¤–æ¥å£ä»¥åï¼Œå…¶ä»– JS æ–‡ä»¶å°±å¯ä»¥é€šè¿‡<code>import</code>å‘½ä»¤åŠ è½½è¿™ä¸ªæ¨¡å—ã€‚</p>
<pre><code class="javascript">// main.js
import {firstName, lastName, year} from &#39;./profile&#39;;

function setName(element) {
  element.textContent = firstName + &#39; &#39; + lastName;
}
</code></pre>
<p>ä¸Šé¢ä»£ç çš„<code>import</code>å‘½ä»¤ï¼Œç”¨äºåŠ è½½<code>profile.js</code>æ–‡ä»¶ï¼Œå¹¶ä»ä¸­è¾“å…¥å˜é‡ã€‚<code>import</code>å‘½ä»¤æ¥å—ä¸€å¯¹å¤§æ‹¬å·ï¼Œé‡Œé¢æŒ‡å®šè¦ä»å…¶ä»–æ¨¡å—å¯¼å…¥çš„å˜é‡åã€‚å¤§æ‹¬å·é‡Œé¢çš„å˜é‡åï¼Œå¿…é¡»ä¸è¢«å¯¼å…¥æ¨¡å—ï¼ˆ<code>profile.js</code>ï¼‰å¯¹å¤–æ¥å£çš„åç§°ç›¸åŒã€‚</p>
<p>å¦‚æœæƒ³ä¸ºè¾“å…¥çš„å˜é‡é‡æ–°å–ä¸€ä¸ªåå­—ï¼Œ<code>import</code>å‘½ä»¤è¦ä½¿ç”¨<code>as</code>å…³é”®å­—ï¼Œå°†è¾“å…¥çš„å˜é‡é‡å‘½åã€‚</p>
<pre><code class="javascript">import { lastName as surname } from &#39;./profile&#39;;
</code></pre>
<p><code>import</code>åé¢çš„<code>from</code>æŒ‡å®šæ¨¡å—æ–‡ä»¶çš„ä½ç½®ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œ<code>.js</code>è·¯å¾„å¯ä»¥çœç•¥ã€‚å¦‚æœåªæ˜¯æ¨¡å—åï¼Œä¸å¸¦æœ‰è·¯å¾„ï¼Œé‚£ä¹ˆå¿…é¡»æœ‰é…ç½®æ–‡ä»¶ï¼Œå‘Šè¯‰ JavaScript å¼•æ“è¯¥æ¨¡å—çš„ä½ç½®ã€‚</p>
<pre><code class="javascript">import {myMethod} from &#39;util&#39;;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>util</code>æ˜¯æ¨¡å—æ–‡ä»¶åï¼Œç”±äºä¸å¸¦æœ‰è·¯å¾„ï¼Œå¿…é¡»é€šè¿‡é…ç½®ï¼Œå‘Šè¯‰å¼•æ“æ€ä¹ˆå–åˆ°è¿™ä¸ªæ¨¡å—ã€‚</p>
<p>æ³¨æ„ï¼Œ<code>import</code>å‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œã€‚</p>
<pre><code class="javascript">foo();

import { foo } from &#39;my_module&#39;;
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸º<code>import</code>çš„æ‰§è¡Œæ—©äº<code>foo</code>çš„è°ƒç”¨ã€‚è¿™ç§è¡Œä¸ºçš„æœ¬è´¨æ˜¯ï¼Œ<code>import</code>å‘½ä»¤æ˜¯ç¼–è¯‘é˜¶æ®µæ‰§è¡Œçš„ï¼Œåœ¨ä»£ç è¿è¡Œä¹‹å‰ã€‚</p>
<p>ç”±äº<code>import</code>æ˜¯é™æ€æ‰§è¡Œï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨è¡¨è¾¾å¼å’Œå˜é‡ï¼Œè¿™äº›åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°ç»“æœçš„è¯­æ³•ç»“æ„ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
import { &#39;f&#39; + &#39;oo&#39; } from &#39;my_module&#39;;

// æŠ¥é”™
let module = &#39;my_module&#39;;
import { foo } from module;

// æŠ¥é”™
if (x === 1) {
  import { foo } from &#39;module1&#39;;
} else {
  import { foo } from &#39;module2&#39;;
}
</code></pre>
<p>ä¸Šé¢ä¸‰ç§å†™æ³•éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒä»¬ç”¨åˆ°äº†è¡¨è¾¾å¼ã€å˜é‡å’Œ<code>if</code>ç»“æ„ã€‚åœ¨é™æ€åˆ†æé˜¶æ®µï¼Œè¿™äº›è¯­æ³•éƒ½æ˜¯æ²¡æ³•å¾—åˆ°å€¼çš„ã€‚</p>
<p>æœ€åï¼Œ<code>import</code>è¯­å¥ä¼šæ‰§è¡Œæ‰€åŠ è½½çš„æ¨¡å—ï¼Œå› æ­¤å¯ä»¥æœ‰ä¸‹é¢çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">import &#39;lodash&#39;;
</code></pre>
<p>ä¸Šé¢ä»£ç ä»…ä»…æ‰§è¡Œ<code>lodash</code>æ¨¡å—ï¼Œä½†æ˜¯ä¸è¾“å…¥ä»»ä½•å€¼ã€‚</p>
<p>å¦‚æœå¤šæ¬¡é‡å¤æ‰§è¡ŒåŒä¸€å¥<code>import</code>è¯­å¥ï¼Œé‚£ä¹ˆåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä¸ä¼šæ‰§è¡Œå¤šæ¬¡ã€‚</p>
<pre><code class="javascript">import &#39;lodash&#39;;
import &#39;lodash&#39;;
</code></pre>
<p>ä¸Šé¢ä»£ç åŠ è½½äº†ä¸¤æ¬¡<code>lodash</code>ï¼Œä½†æ˜¯åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<pre><code class="javascript">import { foo } from &#39;my_module&#39;;
import { bar } from &#39;my_module&#39;;

// ç­‰åŒäº
import { foo, bar } from &#39;my_module&#39;;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè™½ç„¶<code>foo</code>å’Œ<code>bar</code>åœ¨ä¸¤ä¸ªè¯­å¥ä¸­åŠ è½½ï¼Œä½†æ˜¯å®ƒä»¬å¯¹åº”çš„æ˜¯åŒä¸€ä¸ª<code>my_module</code>å®ä¾‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>import</code>è¯­å¥æ˜¯ Singleton æ¨¡å¼ã€‚</p>
<h2 id="æ¨¡å—çš„æ•´ä½“åŠ è½½"><a href="#æ¨¡å—çš„æ•´ä½“åŠ è½½" class="headerlink" title="æ¨¡å—çš„æ•´ä½“åŠ è½½"></a>æ¨¡å—çš„æ•´ä½“åŠ è½½</h2><p>é™¤äº†æŒ‡å®šåŠ è½½æŸä¸ªè¾“å‡ºå€¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ•´ä½“åŠ è½½ï¼Œå³ç”¨æ˜Ÿå·ï¼ˆ<code>*</code>ï¼‰æŒ‡å®šä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰è¾“å‡ºå€¼éƒ½åŠ è½½åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šé¢ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ª<code>circle.js</code>æ–‡ä»¶ï¼Œå®ƒè¾“å‡ºä¸¤ä¸ªæ–¹æ³•<code>area</code>å’Œ<code>circumference</code>ã€‚</p>
<pre><code class="javascript">// circle.js

export function area(radius) {
  return Math.PI * radius * radius;
}

export function circumference(radius) {
  return 2 * Math.PI * radius;
}
</code></pre>
<p>ç°åœ¨ï¼ŒåŠ è½½è¿™ä¸ªæ¨¡å—ã€‚</p>
<pre><code class="javascript">// main.js

import { area, circumference } from &#39;./circle&#39;;

console.log(&#39;åœ†é¢ç§¯ï¼š&#39; + area(4));
console.log(&#39;åœ†å‘¨é•¿ï¼š&#39; + circumference(14));
</code></pre>
<p>ä¸Šé¢å†™æ³•æ˜¯é€ä¸€æŒ‡å®šè¦åŠ è½½çš„æ–¹æ³•ï¼Œæ•´ä½“åŠ è½½çš„å†™æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">import * as circle from &#39;./circle&#39;;

console.log(&#39;åœ†é¢ç§¯ï¼š&#39; + circle.area(4));
console.log(&#39;åœ†å‘¨é•¿ï¼š&#39; + circle.circumference(14));
</code></pre>
<h2 id="export-default-å‘½ä»¤"><a href="#export-default-å‘½ä»¤" class="headerlink" title="export default å‘½ä»¤"></a>export default å‘½ä»¤</h2><p>ä»å‰é¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨<code>import</code>å‘½ä»¤çš„æ—¶å€™ï¼Œç”¨æˆ·éœ€è¦çŸ¥é“æ‰€è¦åŠ è½½çš„å˜é‡åæˆ–å‡½æ•°åï¼Œå¦åˆ™æ— æ³•åŠ è½½ã€‚ä½†æ˜¯ï¼Œç”¨æˆ·è‚¯å®šå¸Œæœ›å¿«é€Ÿä¸Šæ‰‹ï¼Œæœªå¿…æ„¿æ„é˜…è¯»æ–‡æ¡£ï¼Œå»äº†è§£æ¨¡å—æœ‰å“ªäº›å±æ€§å’Œæ–¹æ³•ã€‚</p>
<p>ä¸ºäº†ç»™ç”¨æˆ·æä¾›æ–¹ä¾¿ï¼Œè®©ä»–ä»¬ä¸ç”¨é˜…è¯»æ–‡æ¡£å°±èƒ½åŠ è½½æ¨¡å—ï¼Œå°±è¦ç”¨åˆ°<code>export default</code>å‘½ä»¤ï¼Œä¸ºæ¨¡å—æŒ‡å®šé»˜è®¤è¾“å‡ºã€‚</p>
<pre><code class="javascript">// export-default.js
export default function () {
  console.log(&#39;foo&#39;);
}
</code></pre>
<p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªæ¨¡å—æ–‡ä»¶<code>export-default.js</code>ï¼Œå®ƒçš„é»˜è®¤è¾“å‡ºæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p>
<p>å…¶ä»–æ¨¡å—åŠ è½½è¯¥æ¨¡å—æ—¶ï¼Œ<code>import</code>å‘½ä»¤å¯ä»¥ä¸ºè¯¥åŒ¿åå‡½æ•°æŒ‡å®šä»»æ„åå­—ã€‚</p>
<pre><code class="javascript">// import-default.js
import customName from &#39;./export-default&#39;;
customName(); // &#39;foo&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç çš„<code>import</code>å‘½ä»¤ï¼Œå¯ä»¥ç”¨ä»»æ„åç§°æŒ‡å‘<code>export-default.js</code>è¾“å‡ºçš„æ–¹æ³•ï¼Œè¿™æ—¶å°±ä¸éœ€è¦çŸ¥é“åŸæ¨¡å—è¾“å‡ºçš„å‡½æ•°åã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™æ—¶<code>import</code>å‘½ä»¤åé¢ï¼Œä¸ä½¿ç”¨å¤§æ‹¬å·ã€‚</p>
<p><code>export default</code>å‘½ä»¤ç”¨åœ¨éåŒ¿åå‡½æ•°å‰ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<pre><code class="javascript">// export-default.js
export default function foo() {
  console.log(&#39;foo&#39;);
}

// æˆ–è€…å†™æˆ

function foo() {
  console.log(&#39;foo&#39;);
}

export default foo;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>foo</code>å‡½æ•°çš„å‡½æ•°å<code>foo</code>ï¼Œåœ¨æ¨¡å—å¤–éƒ¨æ˜¯æ— æ•ˆçš„ã€‚åŠ è½½çš„æ—¶å€™ï¼Œè§†åŒåŒ¿åå‡½æ•°åŠ è½½ã€‚</p>
<p>ä¸‹é¢æ¯”è¾ƒä¸€ä¸‹é»˜è®¤è¾“å‡ºå’Œæ­£å¸¸è¾“å‡ºã€‚</p>
<pre><code class="javascript">// ç¬¬ä¸€ç»„
export default function crc32() { // è¾“å‡º
  // ...
}

import crc32 from &#39;crc32&#39;; // è¾“å…¥

// ç¬¬äºŒç»„
export function crc32() { // è¾“å‡º
  // ...
};

import {crc32} from &#39;crc32&#39;; // è¾“å…¥
</code></pre>
<p>ä¸Šé¢ä»£ç çš„ä¸¤ç»„å†™æ³•ï¼Œç¬¬ä¸€ç»„æ˜¯ä½¿ç”¨<code>export default</code>æ—¶ï¼Œå¯¹åº”çš„<code>import</code>è¯­å¥ä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ï¼›ç¬¬äºŒç»„æ˜¯ä¸ä½¿ç”¨<code>export default</code>æ—¶ï¼Œå¯¹åº”çš„<code>import</code>è¯­å¥éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ã€‚</p>
<p><code>export default</code>å‘½ä»¤ç”¨äºæŒ‡å®šæ¨¡å—çš„é»˜è®¤è¾“å‡ºã€‚æ˜¾ç„¶ï¼Œä¸€ä¸ªæ¨¡å—åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤è¾“å‡ºï¼Œå› æ­¤<code>export default</code>å‘½ä»¤åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œ<code>import</code>å‘½ä»¤åé¢æ‰ä¸ç”¨åŠ å¤§æ‹¬å·ï¼Œå› ä¸ºåªå¯èƒ½å¯¹åº”ä¸€ä¸ªæ–¹æ³•ã€‚</p>
<p>æœ¬è´¨ä¸Šï¼Œ<code>export default</code>å°±æ˜¯è¾“å‡ºä¸€ä¸ªå«åš<code>default</code>çš„å˜é‡æˆ–æ–¹æ³•ï¼Œç„¶åç³»ç»Ÿå…è®¸ä½ ä¸ºå®ƒå–ä»»æ„åå­—ã€‚æ‰€ä»¥ï¼Œä¸‹é¢çš„å†™æ³•æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<pre><code class="javascript">// modules.js
function add(x, y) {
  return x * y;
}
export {add as default};
// ç­‰åŒäº
// export default add;

// app.js
import { default as xxx } from &#39;modules&#39;;
// ç­‰åŒäº
// import xxx from &#39;modules&#39;;
</code></pre>
<p>æ­£æ˜¯å› ä¸º<code>export default</code>å‘½ä»¤å…¶å®åªæ˜¯è¾“å‡ºä¸€ä¸ªå«åš<code>default</code>çš„å˜é‡ï¼Œæ‰€ä»¥å®ƒåé¢ä¸èƒ½è·Ÿå˜é‡å£°æ˜è¯­å¥ã€‚</p>
<pre><code class="javascript">// æ­£ç¡®
export var a = 1;

// æ­£ç¡®
var a = 1;
export default a;

// é”™è¯¯
export default var a = 1;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>export default a</code>çš„å«ä¹‰æ˜¯å°†å˜é‡<code>a</code>çš„å€¼èµ‹ç»™å˜é‡<code>default</code>ã€‚æ‰€ä»¥ï¼Œæœ€åä¸€ç§å†™æ³•ä¼šæŠ¥é”™ã€‚</p>
<p>æœ‰äº†<code>export default</code>å‘½ä»¤ï¼Œè¾“å…¥æ¨¡å—æ—¶å°±éå¸¸ç›´è§‚äº†ï¼Œä»¥è¾“å…¥ lodash æ¨¡å—ä¸ºä¾‹ã€‚</p>
<pre><code class="javascript">import _ from &#39;lodash&#39;;
</code></pre>
<p>å¦‚æœæƒ³åœ¨ä¸€æ¡<code>import</code>è¯­å¥ä¸­ï¼ŒåŒæ—¶è¾“å…¥é»˜è®¤æ–¹æ³•å’Œå…¶ä»–å˜é‡ï¼Œå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">import _, { each } from &#39;lodash&#39;;
</code></pre>
<p>å¯¹åº”ä¸Šé¢ä»£ç çš„<code>export</code>è¯­å¥å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">export default function (obj) {
  // Â·Â·Â·
}
export function each(obj, iterator, context) {
  // Â·Â·Â·
}
export { each as forEach };
</code></pre>
<p>ä¸Šé¢ä»£ç çš„æœ€åä¸€è¡Œçš„æ„æ€æ˜¯ï¼Œæš´éœ²å‡º<code>forEach</code>æ¥å£ï¼Œé»˜è®¤æŒ‡å‘<code>each</code>æ¥å£ï¼Œå³<code>forEach</code>å’Œ<code>each</code>æŒ‡å‘åŒä¸€ä¸ªæ–¹æ³•ã€‚</p>
<p>å¦‚æœè¦è¾“å‡ºé»˜è®¤çš„å€¼ï¼Œåªéœ€å°†å€¼è·Ÿåœ¨<code>export default</code>ä¹‹åå³å¯ã€‚</p>
<pre><code class="javascript">export default 42;
</code></pre>
<p><code>export default</code>ä¹Ÿå¯ä»¥ç”¨æ¥è¾“å‡ºç±»ã€‚</p>
<pre><code class="javascript">// MyClass.js
export default class { ... }

// main.js
import MyClass from &#39;MyClass&#39;;
let o = new MyClass();
</code></pre>
<h2 id="export-ä¸-import-çš„å¤åˆå†™æ³•"><a href="#export-ä¸-import-çš„å¤åˆå†™æ³•" class="headerlink" title="export ä¸ import çš„å¤åˆå†™æ³•"></a>export ä¸ import çš„å¤åˆå†™æ³•</h2><p>å¦‚æœåœ¨ä¸€ä¸ªæ¨¡å—ä¹‹ä¸­ï¼Œå…ˆè¾“å…¥åè¾“å‡ºåŒä¸€ä¸ªæ¨¡å—ï¼Œ<code>import</code>è¯­å¥å¯ä»¥ä¸<code>export</code>è¯­å¥å†™åœ¨ä¸€èµ·ã€‚</p>
<pre><code class="javascript">export { foo, bar } from &#39;my_module&#39;;

// ç­‰åŒäº
import { foo, bar } from &#39;my_module&#39;;
export { foo, bar };
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>export</code>å’Œ<code>import</code>è¯­å¥å¯ä»¥ç»“åˆåœ¨ä¸€èµ·ï¼Œå†™æˆä¸€è¡Œã€‚</p>
<p>æ¨¡å—çš„æ¥å£æ”¹åå’Œæ•´ä½“è¾“å‡ºï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨è¿™ç§å†™æ³•ã€‚</p>
<pre><code class="javascript">// æ¥å£æ”¹å
export { foo as myFoo } from &#39;my_module&#39;;

// æ•´ä½“è¾“å‡º
export * from &#39;my_module&#39;;
</code></pre>
<p>é»˜è®¤æ¥å£çš„å†™æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">export { default } from &#39;foo&#39;;
</code></pre>
<p>å…·åæ¥å£æ”¹ä¸ºé»˜è®¤æ¥å£çš„å†™æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">export { es6 as default } from &#39;./someModule&#39;;

// ç­‰åŒäº
import { es6 } from &#39;./someModule&#39;;
export default es6;
</code></pre>
<p>åŒæ ·åœ°ï¼Œé»˜è®¤æ¥å£ä¹Ÿå¯ä»¥æ”¹åä¸ºå…·åæ¥å£ã€‚</p>
<pre><code class="javascript">export { default as es6 } from &#39;./someModule&#39;;
</code></pre>
<p>å¦å¤–ï¼ŒES7æœ‰ä¸€ä¸ª<a href="https://github.com/leebyron/ecmascript-more-export-from" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œç®€åŒ–å…ˆè¾“å…¥åè¾“å‡ºçš„å†™æ³•ï¼Œæ‹¿æ‰è¾“å‡ºæ—¶çš„å¤§æ‹¬å·ã€‚</p>
<pre><code class="javascript">// ç°è¡Œçš„å†™æ³•
export {v} from &#39;mod&#39;;

// ææ¡ˆçš„å†™æ³•
export v from &#39;mod&#39;;
</code></pre>
<h2 id="æ¨¡å—çš„ç»§æ‰¿"><a href="#æ¨¡å—çš„ç»§æ‰¿" class="headerlink" title="æ¨¡å—çš„ç»§æ‰¿"></a>æ¨¡å—çš„ç»§æ‰¿</h2><p>æ¨¡å—ä¹‹é—´ä¹Ÿå¯ä»¥ç»§æ‰¿ã€‚</p>
<p>å‡è®¾æœ‰ä¸€ä¸ª<code>circleplus</code>æ¨¡å—ï¼Œç»§æ‰¿äº†<code>circle</code>æ¨¡å—ã€‚</p>
<pre><code class="javascript">// circleplus.js

export * from &#39;circle&#39;;
export var e = 2.71828182846;
export default function(x) {
  return Math.exp(x);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­çš„<code>export *</code>ï¼Œè¡¨ç¤ºå†è¾“å‡º<code>circle</code>æ¨¡å—çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚æ³¨æ„ï¼Œ<code>export *</code>å‘½ä»¤ä¼šå¿½ç•¥<code>circle</code>æ¨¡å—çš„<code>default</code>æ–¹æ³•ã€‚ç„¶åï¼Œä¸Šé¢ä»£ç åˆè¾“å‡ºäº†è‡ªå®šä¹‰çš„<code>e</code>å˜é‡å’Œé»˜è®¤æ–¹æ³•ã€‚</p>
<p>è¿™æ—¶ï¼Œä¹Ÿå¯ä»¥å°†<code>circle</code>çš„å±æ€§æˆ–æ–¹æ³•ï¼Œæ”¹ååå†è¾“å‡ºã€‚</p>
<pre><code class="javascript">// circleplus.js

export { area as circleArea } from &#39;circle&#39;;
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œåªè¾“å‡º<code>circle</code>æ¨¡å—çš„<code>area</code>æ–¹æ³•ï¼Œä¸”å°†å…¶æ”¹åä¸º<code>circleArea</code>ã€‚</p>
<p>åŠ è½½ä¸Šé¢æ¨¡å—çš„å†™æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">// main.js

import * as math from &#39;circleplus&#39;;
import exp from &#39;circleplus&#39;;
console.log(exp(math.e));
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­çš„<code>import exp</code>è¡¨ç¤ºï¼Œå°†<code>circleplus</code>æ¨¡å—çš„é»˜è®¤æ–¹æ³•åŠ è½½ä¸º<code>exp</code>æ–¹æ³•ã€‚</p>
<h2 id="ES6æ¨¡å—åŠ è½½çš„å®è´¨"><a href="#ES6æ¨¡å—åŠ è½½çš„å®è´¨" class="headerlink" title="ES6æ¨¡å—åŠ è½½çš„å®è´¨"></a>ES6æ¨¡å—åŠ è½½çš„å®è´¨</h2><p>ES6æ¨¡å—åŠ è½½çš„æœºåˆ¶ï¼Œä¸CommonJSæ¨¡å—å®Œå…¨ä¸åŒã€‚CommonJSæ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼Œè€ŒES6æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚</p>
<p>CommonJSæ¨¡å—è¾“å‡ºçš„æ˜¯è¢«è¾“å‡ºå€¼çš„æ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚è¯·çœ‹ä¸‹é¢è¿™ä¸ªæ¨¡å—æ–‡ä»¶<code>lib.js</code>çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">// lib.js
var counter = 3;
function incCounter() {
  counter++;
}
module.exports = {
  counter: counter,
  incCounter: incCounter,
};
</code></pre>
<p>ä¸Šé¢ä»£ç è¾“å‡ºå†…éƒ¨å˜é‡<code>counter</code>å’Œæ”¹å†™è¿™ä¸ªå˜é‡çš„å†…éƒ¨æ–¹æ³•<code>incCounter</code>ã€‚ç„¶åï¼Œåœ¨<code>main.js</code>é‡Œé¢åŠ è½½è¿™ä¸ªæ¨¡å—ã€‚</p>
<pre><code class="javascript">// main.js
var mod = require(&#39;./lib&#39;);

console.log(mod.counter);  // 3
mod.incCounter();
console.log(mod.counter); // 3
</code></pre>
<p>ä¸Šé¢ä»£ç è¯´æ˜ï¼Œ<code>lib.js</code>æ¨¡å—åŠ è½½ä»¥åï¼Œå®ƒçš„å†…éƒ¨å˜åŒ–å°±å½±å“ä¸åˆ°è¾“å‡ºçš„<code>mod.counter</code>äº†ã€‚è¿™æ˜¯å› ä¸º<code>mod.counter</code>æ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ï¼Œä¼šè¢«ç¼“å­˜ã€‚é™¤éå†™æˆä¸€ä¸ªå‡½æ•°ï¼Œæ‰èƒ½å¾—åˆ°å†…éƒ¨å˜åŠ¨åçš„å€¼ã€‚</p>
<pre><code class="javascript">// lib.js
var counter = 3;
function incCounter() {
  counter++;
}
module.exports = {
  get counter() {
    return counter
  },
  incCounter: incCounter,
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè¾“å‡ºçš„<code>counter</code>å±æ€§å®é™…ä¸Šæ˜¯ä¸€ä¸ªå–å€¼å™¨å‡½æ•°ã€‚ç°åœ¨å†æ‰§è¡Œ<code>main.js</code>ï¼Œå°±å¯ä»¥æ­£ç¡®è¯»å–å†…éƒ¨å˜é‡<code>counter</code>çš„å˜åŠ¨äº†ã€‚</p>
<pre><code class="bash">$ node main.js
3
4
</code></pre>
<p>ES6æ¨¡å—çš„è¿è¡Œæœºåˆ¶ä¸CommonJSä¸ä¸€æ ·ï¼Œå®ƒé‡åˆ°æ¨¡å—åŠ è½½å‘½ä»¤<code>import</code>æ—¶ï¼Œä¸ä¼šå»æ‰§è¡Œæ¨¡å—ï¼Œè€Œæ˜¯åªç”Ÿæˆä¸€ä¸ªåŠ¨æ€çš„åªè¯»å¼•ç”¨ã€‚ç­‰åˆ°çœŸçš„éœ€è¦ç”¨åˆ°æ—¶ï¼Œå†åˆ°æ¨¡å—é‡Œé¢å»å–å€¼ï¼Œæ¢å¥è¯è¯´ï¼ŒES6çš„è¾“å…¥æœ‰ç‚¹åƒUnixç³»ç»Ÿçš„â€œç¬¦å·è¿æ¥â€ï¼ŒåŸå§‹å€¼å˜äº†ï¼Œ<code>import</code>è¾“å…¥çš„å€¼ä¹Ÿä¼šè·Ÿç€å˜ã€‚å› æ­¤ï¼ŒES6æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šç¼“å­˜å€¼ï¼Œæ¨¡å—é‡Œé¢çš„å˜é‡ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—ã€‚</p>
<p>è¿˜æ˜¯ä¸¾ä¸Šé¢çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">// lib.js
export let counter = 3;
export function incCounter() {
  counter++;
}

// main.js
import { counter, incCounter } from &#39;./lib&#39;;
console.log(counter); // 3
incCounter();
console.log(counter); // 4
</code></pre>
<p>ä¸Šé¢ä»£ç è¯´æ˜ï¼ŒES6æ¨¡å—è¾“å…¥çš„å˜é‡<code>counter</code>æ˜¯æ´»çš„ï¼Œå®Œå…¨ååº”å…¶æ‰€åœ¨æ¨¡å—<code>lib.js</code>å†…éƒ¨çš„å˜åŒ–ã€‚</p>
<p>å†ä¸¾ä¸€ä¸ªå‡ºç°åœ¨<code>export</code>ä¸€èŠ‚ä¸­çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">// m1.js
export var foo = &#39;bar&#39;;
setTimeout(() =&gt; foo = &#39;baz&#39;, 500);

// m2.js
import {foo} from &#39;./m1.js&#39;;
console.log(foo);
setTimeout(() =&gt; console.log(foo), 500);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>m1.js</code>çš„å˜é‡<code>foo</code>ï¼Œåœ¨åˆšåŠ è½½æ—¶ç­‰äº<code>bar</code>ï¼Œè¿‡äº†500æ¯«ç§’ï¼Œåˆå˜ä¸ºç­‰äº<code>baz</code>ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ï¼Œ<code>m2.js</code>èƒ½å¦æ­£ç¡®è¯»å–è¿™ä¸ªå˜åŒ–ã€‚</p>
<pre><code class="bash">$ babel-node m2.js

bar
baz
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨æ˜ï¼ŒES6æ¨¡å—ä¸ä¼šç¼“å­˜è¿è¡Œç»“æœï¼Œè€Œæ˜¯åŠ¨æ€åœ°å»è¢«åŠ è½½çš„æ¨¡å—å–å€¼ï¼Œå¹¶ä¸”å˜é‡æ€»æ˜¯ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—ã€‚</p>
<p>ç”±äºES6è¾“å…¥çš„æ¨¡å—å˜é‡ï¼Œåªæ˜¯ä¸€ä¸ªâ€œç¬¦å·è¿æ¥â€ï¼Œæ‰€ä»¥è¿™ä¸ªå˜é‡æ˜¯åªè¯»çš„ï¼Œå¯¹å®ƒè¿›è¡Œé‡æ–°èµ‹å€¼ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// lib.js
export let obj = {};

// main.js
import { obj } from &#39;./lib&#39;;

obj.prop = 123; // OK
obj = {}; // TypeError
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>main.js</code>ä»<code>lib.js</code>è¾“å…¥å˜é‡<code>obj</code>ï¼Œå¯ä»¥å¯¹<code>obj</code>æ·»åŠ å±æ€§ï¼Œä½†æ˜¯é‡æ–°èµ‹å€¼å°±ä¼šæŠ¥é”™ã€‚å› ä¸ºå˜é‡<code>obj</code>æŒ‡å‘çš„åœ°å€æ˜¯åªè¯»çš„ï¼Œä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œè¿™å°±å¥½æ¯”<code>main.js</code>åˆ›é€ äº†ä¸€ä¸ªåä¸º<code>obj</code>çš„constå˜é‡ã€‚</p>
<p>æœ€åï¼Œ<code>export</code>é€šè¿‡æ¥å£ï¼Œè¾“å‡ºçš„æ˜¯åŒä¸€ä¸ªå€¼ã€‚ä¸åŒçš„è„šæœ¬åŠ è½½è¿™ä¸ªæ¥å£ï¼Œå¾—åˆ°çš„éƒ½æ˜¯åŒæ ·çš„å®ä¾‹ã€‚</p>
<pre><code class="javascript">// mod.js
function C() {
  this.sum = 0;
  this.add = function () {
    this.sum += 1;
  };
  this.show = function () {
    console.log(this.sum);
  };
}

export let c = new C();
</code></pre>
<p>ä¸Šé¢çš„è„šæœ¬<code>mod.js</code>ï¼Œè¾“å‡ºçš„æ˜¯ä¸€ä¸ª<code>C</code>çš„å®ä¾‹ã€‚ä¸åŒçš„è„šæœ¬åŠ è½½è¿™ä¸ªæ¨¡å—ï¼Œå¾—åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚</p>
<pre><code class="javascript">// x.js
import {c} from &#39;./mod&#39;;
c.add();

// y.js
import {c} from &#39;./mod&#39;;
c.show();

// main.js
import &#39;./x&#39;;
import &#39;./y&#39;;
</code></pre>
<p>ç°åœ¨æ‰§è¡Œ<code>main.js</code>ï¼Œè¾“å‡ºçš„æ˜¯1ã€‚</p>
<pre><code class="bash">$ babel-node main.js
1
</code></pre>
<p>è¿™å°±è¯æ˜äº†<code>x.js</code>å’Œ<code>y.js</code>åŠ è½½çš„éƒ½æ˜¯<code>C</code>çš„åŒä¸€ä¸ªå®ä¾‹ã€‚</p>
<h2 id="æµè§ˆå™¨çš„æ¨¡å—åŠ è½½"><a href="#æµè§ˆå™¨çš„æ¨¡å—åŠ è½½" class="headerlink" title="æµè§ˆå™¨çš„æ¨¡å—åŠ è½½"></a>æµè§ˆå™¨çš„æ¨¡å—åŠ è½½</h2><p>æµè§ˆå™¨ä½¿ç”¨ ES6 æ¨¡å—çš„è¯­æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="html">&lt;script type=&quot;module&quot; src=&quot;foo.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>ä¸Šé¢ä»£ç åœ¨ç½‘é¡µä¸­æ’å…¥ä¸€ä¸ªæ¨¡å—<code>foo.js</code>ï¼Œç”±äº<code>type</code>å±æ€§è®¾ä¸º<code>module</code>ï¼Œæ‰€ä»¥æµè§ˆå™¨çŸ¥é“è¿™æ˜¯ä¸€ä¸ª ES6 æ¨¡å—ã€‚</p>
<p>æµè§ˆå™¨å¯¹äºå¸¦æœ‰<code>type=&quot;module&quot;</code>çš„<code>&lt;script&gt;</code>ï¼Œéƒ½æ˜¯å¼‚æ­¥åŠ è½½å¤–éƒ¨è„šæœ¬ï¼Œä¸ä¼šé€ æˆå µå¡æµè§ˆå™¨ã€‚</p>
<p>å¯¹äºå¤–éƒ¨çš„æ¨¡å—è„šæœ¬ï¼ˆä¸Šä¾‹æ˜¯<code>foo.js</code>ï¼‰ï¼Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ã€‚</p>
<ul>
<li>è¯¥è„šæœ¬è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å—ã€‚</li>
<li>è¯¥è„šæœ¬å†…éƒ¨çš„é¡¶å±‚å˜é‡ï¼Œéƒ½åªåœ¨è¯¥è„šæœ¬å†…éƒ¨æœ‰æ•ˆï¼Œå¤–éƒ¨ä¸å¯è§ã€‚</li>
<li>è¯¥è„šæœ¬å†…éƒ¨çš„é¡¶å±‚çš„<code>this</code>å…³é”®å­—ï¼Œè¿”å›<code>undefined</code>ï¼Œè€Œä¸æ˜¯æŒ‡å‘<code>window</code>ã€‚</li>
</ul>
<h2 id="å¾ªç¯åŠ è½½"><a href="#å¾ªç¯åŠ è½½" class="headerlink" title="å¾ªç¯åŠ è½½"></a>å¾ªç¯åŠ è½½</h2><p>â€œå¾ªç¯åŠ è½½â€ï¼ˆcircular dependencyï¼‰æŒ‡çš„æ˜¯ï¼Œ<code>a</code>è„šæœ¬çš„æ‰§è¡Œä¾èµ–<code>b</code>è„šæœ¬ï¼Œè€Œ<code>b</code>è„šæœ¬çš„æ‰§è¡Œåˆä¾èµ–<code>a</code>è„šæœ¬ã€‚</p>
<pre><code class="javascript">// a.js
var b = require(&#39;b&#39;);

// b.js
var a = require(&#39;a&#39;);
</code></pre>
<p>é€šå¸¸ï¼Œâ€œå¾ªç¯åŠ è½½â€è¡¨ç¤ºå­˜åœ¨å¼ºè€¦åˆï¼Œå¦‚æœå¤„ç†ä¸å¥½ï¼Œè¿˜å¯èƒ½å¯¼è‡´é€’å½’åŠ è½½ï¼Œä½¿å¾—ç¨‹åºæ— æ³•æ‰§è¡Œï¼Œå› æ­¤åº”è¯¥é¿å…å‡ºç°ã€‚</p>
<p>ä½†æ˜¯å®é™…ä¸Šï¼Œè¿™æ˜¯å¾ˆéš¾é¿å…çš„ï¼Œå°¤å…¶æ˜¯ä¾èµ–å…³ç³»å¤æ‚çš„å¤§é¡¹ç›®ï¼Œå¾ˆå®¹æ˜“å‡ºç°<code>a</code>ä¾èµ–<code>b</code>ï¼Œ<code>b</code>ä¾èµ–<code>c</code>ï¼Œ<code>c</code>åˆä¾èµ–<code>a</code>è¿™æ ·çš„æƒ…å†µã€‚è¿™æ„å‘³ç€ï¼Œæ¨¡å—åŠ è½½æœºåˆ¶å¿…é¡»è€ƒè™‘â€œå¾ªç¯åŠ è½½â€çš„æƒ…å†µã€‚</p>
<p>å¯¹äºJavaScriptè¯­è¨€æ¥è¯´ï¼Œç›®å‰æœ€å¸¸è§çš„ä¸¤ç§æ¨¡å—æ ¼å¼CommonJSå’ŒES6ï¼Œå¤„ç†â€œå¾ªç¯åŠ è½½â€çš„æ–¹æ³•æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿”å›çš„ç»“æœä¹Ÿä¸ä¸€æ ·ã€‚</p>
<h3 id="CommonJSæ¨¡å—çš„åŠ è½½åŸç†"><a href="#CommonJSæ¨¡å—çš„åŠ è½½åŸç†" class="headerlink" title="CommonJSæ¨¡å—çš„åŠ è½½åŸç†"></a>CommonJSæ¨¡å—çš„åŠ è½½åŸç†</h3><p>ä»‹ç»ES6å¦‚ä½•å¤„ç†â€å¾ªç¯åŠ è½½â€ä¹‹å‰ï¼Œå…ˆä»‹ç»ç›®å‰æœ€æµè¡Œçš„CommonJSæ¨¡å—æ ¼å¼çš„åŠ è½½åŸç†ã€‚</p>
<p>CommonJSçš„ä¸€ä¸ªæ¨¡å—ï¼Œå°±æ˜¯ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ã€‚<code>require</code>å‘½ä»¤ç¬¬ä¸€æ¬¡åŠ è½½è¯¥è„šæœ¬ï¼Œå°±ä¼šæ‰§è¡Œæ•´ä¸ªè„šæœ¬ï¼Œç„¶ååœ¨å†…å­˜ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ã€‚</p>
<pre><code class="javascript">{
  id: &#39;...&#39;,
  exports: { ... },
  loaded: true,
  ...
}
</code></pre>
<p>ä¸Šé¢ä»£ç å°±æ˜¯Nodeå†…éƒ¨åŠ è½½æ¨¡å—åç”Ÿæˆçš„ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„<code>id</code>å±æ€§æ˜¯æ¨¡å—åï¼Œ<code>exports</code>å±æ€§æ˜¯æ¨¡å—è¾“å‡ºçš„å„ä¸ªæ¥å£ï¼Œ<code>loaded</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—çš„è„šæœ¬æ˜¯å¦æ‰§è¡Œå®Œæ¯•ã€‚å…¶ä»–è¿˜æœ‰å¾ˆå¤šå±æ€§ï¼Œè¿™é‡Œéƒ½çœç•¥äº†ã€‚</p>
<p>ä»¥åéœ€è¦ç”¨åˆ°è¿™ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œå°±ä¼šåˆ°<code>exports</code>å±æ€§ä¸Šé¢å–å€¼ã€‚å³ä½¿å†æ¬¡æ‰§è¡Œ<code>require</code>å‘½ä»¤ï¼Œä¹Ÿä¸ä¼šå†æ¬¡æ‰§è¡Œè¯¥æ¨¡å—ï¼Œè€Œæ˜¯åˆ°ç¼“å­˜ä¹‹ä¸­å–å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCommonJSæ¨¡å—æ— è®ºåŠ è½½å¤šå°‘æ¬¡ï¼Œéƒ½åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œä»¥åå†åŠ è½½ï¼Œå°±è¿”å›ç¬¬ä¸€æ¬¡è¿è¡Œçš„ç»“æœï¼Œé™¤éæ‰‹åŠ¨æ¸…é™¤ç³»ç»Ÿç¼“å­˜ã€‚</p>
<h3 id="CommonJSæ¨¡å—çš„å¾ªç¯åŠ è½½"><a href="#CommonJSæ¨¡å—çš„å¾ªç¯åŠ è½½" class="headerlink" title="CommonJSæ¨¡å—çš„å¾ªç¯åŠ è½½"></a>CommonJSæ¨¡å—çš„å¾ªç¯åŠ è½½</h3><p>CommonJSæ¨¡å—çš„é‡è¦ç‰¹æ€§æ˜¯åŠ è½½æ—¶æ‰§è¡Œï¼Œå³è„šæœ¬ä»£ç åœ¨<code>require</code>çš„æ—¶å€™ï¼Œå°±ä¼šå…¨éƒ¨æ‰§è¡Œã€‚ä¸€æ—¦å‡ºç°æŸä¸ªæ¨¡å—è¢«â€å¾ªç¯åŠ è½½â€ï¼Œå°±åªè¾“å‡ºå·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œè¿˜æœªæ‰§è¡Œçš„éƒ¨åˆ†ä¸ä¼šè¾“å‡ºã€‚</p>
<p>è®©æˆ‘ä»¬æ¥çœ‹ï¼ŒNode<a href="https://nodejs.org/api/modules.html#modules_cycles" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>é‡Œé¢çš„ä¾‹å­ã€‚è„šæœ¬æ–‡ä»¶<code>a.js</code>ä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">exports.done = false;
var b = require(&#39;./b.js&#39;);
console.log(&#39;åœ¨ a.js ä¹‹ä¸­ï¼Œb.done = %j&#39;, b.done);
exports.done = true;
console.log(&#39;a.js æ‰§è¡Œå®Œæ¯•&#39;);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¹‹ä¸­ï¼Œ<code>a.js</code>è„šæœ¬å…ˆè¾“å‡ºä¸€ä¸ª<code>done</code>å˜é‡ï¼Œç„¶ååŠ è½½å¦ä¸€ä¸ªè„šæœ¬æ–‡ä»¶<code>b.js</code>ã€‚æ³¨æ„ï¼Œæ­¤æ—¶<code>a.js</code>ä»£ç å°±åœåœ¨è¿™é‡Œï¼Œç­‰å¾…<code>b.js</code>æ‰§è¡Œå®Œæ¯•ï¼Œå†å¾€ä¸‹æ‰§è¡Œã€‚</p>
<p>å†çœ‹<code>b.js</code>çš„ä»£ç ã€‚</p>
<pre><code class="javascript">exports.done = false;
var a = require(&#39;./a.js&#39;);
console.log(&#39;åœ¨ b.js ä¹‹ä¸­ï¼Œa.done = %j&#39;, a.done);
exports.done = true;
console.log(&#39;b.js æ‰§è¡Œå®Œæ¯•&#39;);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¹‹ä¸­ï¼Œ<code>b.js</code>æ‰§è¡Œåˆ°ç¬¬äºŒè¡Œï¼Œå°±ä¼šå»åŠ è½½<code>a.js</code>ï¼Œè¿™æ—¶ï¼Œå°±å‘ç”Ÿäº†â€œå¾ªç¯åŠ è½½â€ã€‚ç³»ç»Ÿä¼šå»<code>a.js</code>æ¨¡å—å¯¹åº”å¯¹è±¡çš„<code>exports</code>å±æ€§å–å€¼ï¼Œå¯æ˜¯å› ä¸º<code>a.js</code>è¿˜æ²¡æœ‰æ‰§è¡Œå®Œï¼Œä»<code>exports</code>å±æ€§åªèƒ½å–å›å·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æœ€åçš„å€¼ã€‚</p>
<p><code>a.js</code>å·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œåªæœ‰ä¸€è¡Œã€‚</p>
<pre><code class="javascript">exports.done = false;
</code></pre>
<p>å› æ­¤ï¼Œå¯¹äº<code>b.js</code>æ¥è¯´ï¼Œå®ƒä»<code>a.js</code>åªè¾“å…¥ä¸€ä¸ªå˜é‡<code>done</code>ï¼Œå€¼ä¸º<code>false</code>ã€‚</p>
<p>ç„¶åï¼Œ<code>b.js</code>æ¥ç€å¾€ä¸‹æ‰§è¡Œï¼Œç­‰åˆ°å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œå†æŠŠæ‰§è¡Œæƒäº¤è¿˜ç»™<code>a.js</code>ã€‚äºæ˜¯ï¼Œ<code>a.js</code>æ¥ç€å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°æ‰§è¡Œå®Œæ¯•ã€‚æˆ‘ä»¬å†™ä¸€ä¸ªè„šæœ¬<code>main.js</code>ï¼ŒéªŒè¯è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<pre><code class="javascript">var a = require(&#39;./a.js&#39;);
var b = require(&#39;./b.js&#39;);
console.log(&#39;åœ¨ main.js ä¹‹ä¸­, a.done=%j, b.done=%j&#39;, a.done, b.done);
</code></pre>
<p>æ‰§è¡Œ<code>main.js</code>ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ã€‚</p>
<pre><code class="bash">$ node main.js

åœ¨ b.js ä¹‹ä¸­ï¼Œa.done = false
b.js æ‰§è¡Œå®Œæ¯•
åœ¨ a.js ä¹‹ä¸­ï¼Œb.done = true
a.js æ‰§è¡Œå®Œæ¯•
åœ¨ main.js ä¹‹ä¸­, a.done=true, b.done=true
</code></pre>
<p>ä¸Šé¢çš„ä»£ç è¯æ˜äº†ä¸¤ä»¶äº‹ã€‚ä¸€æ˜¯ï¼Œåœ¨<code>b.js</code>ä¹‹ä¸­ï¼Œ<code>a.js</code>æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œåªæ‰§è¡Œäº†ç¬¬ä¸€è¡Œã€‚äºŒæ˜¯ï¼Œ<code>main.js</code>æ‰§è¡Œåˆ°ç¬¬äºŒè¡Œæ—¶ï¼Œä¸ä¼šå†æ¬¡æ‰§è¡Œ<code>b.js</code>ï¼Œè€Œæ˜¯è¾“å‡ºç¼“å­˜çš„<code>b.js</code>çš„æ‰§è¡Œç»“æœï¼Œå³å®ƒçš„ç¬¬å››è¡Œã€‚</p>
<pre><code class="javascript">exports.done = true;
</code></pre>
<p>æ€»ä¹‹ï¼ŒCommonJSè¾“å…¥çš„æ˜¯è¢«è¾“å‡ºå€¼çš„æ‹·è´ï¼Œä¸æ˜¯å¼•ç”¨ã€‚</p>
<p>å¦å¤–ï¼Œç”±äºCommonJSæ¨¡å—é‡åˆ°å¾ªç¯åŠ è½½æ—¶ï¼Œè¿”å›çš„æ˜¯å½“å‰å·²ç»æ‰§è¡Œçš„éƒ¨åˆ†çš„å€¼ï¼Œè€Œä¸æ˜¯ä»£ç å…¨éƒ¨æ‰§è¡Œåçš„å€¼ï¼Œä¸¤è€…å¯èƒ½ä¼šæœ‰å·®å¼‚ã€‚æ‰€ä»¥ï¼Œè¾“å…¥å˜é‡çš„æ—¶å€™ï¼Œå¿…é¡»éå¸¸å°å¿ƒã€‚</p>
<pre><code class="javascript">var a = require(&#39;a&#39;); // å®‰å…¨çš„å†™æ³•
var foo = require(&#39;a&#39;).foo; // å±é™©çš„å†™æ³•

exports.good = function (arg) {
  return a.foo(&#39;good&#39;, arg); // ä½¿ç”¨çš„æ˜¯ a.foo çš„æœ€æ–°å€¼
};

exports.bad = function (arg) {
  return foo(&#39;bad&#39;, arg); // ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªéƒ¨åˆ†åŠ è½½æ—¶çš„å€¼
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå‘ç”Ÿå¾ªç¯åŠ è½½ï¼Œ<code>require(&#39;a&#39;).foo</code>çš„å€¼å¾ˆå¯èƒ½åé¢ä¼šè¢«æ”¹å†™ï¼Œæ”¹ç”¨<code>require(&#39;a&#39;)</code>ä¼šæ›´ä¿é™©ä¸€ç‚¹ã€‚</p>
<h3 id="ES6æ¨¡å—çš„å¾ªç¯åŠ è½½"><a href="#ES6æ¨¡å—çš„å¾ªç¯åŠ è½½" class="headerlink" title="ES6æ¨¡å—çš„å¾ªç¯åŠ è½½"></a>ES6æ¨¡å—çš„å¾ªç¯åŠ è½½</h3><p>ES6å¤„ç†â€œå¾ªç¯åŠ è½½â€ä¸CommonJSæœ‰æœ¬è´¨çš„ä¸åŒã€‚ES6æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå¦‚æœä½¿ç”¨<code>import</code>ä»ä¸€ä¸ªæ¨¡å—åŠ è½½å˜é‡ï¼ˆå³<code>import foo from &#39;foo&#39;</code>ï¼‰ï¼Œé‚£äº›å˜é‡ä¸ä¼šè¢«ç¼“å­˜ï¼Œè€Œæ˜¯æˆä¸ºä¸€ä¸ªæŒ‡å‘è¢«åŠ è½½æ¨¡å—çš„å¼•ç”¨ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±ä¿è¯ï¼ŒçœŸæ­£å–å€¼çš„æ—¶å€™èƒ½å¤Ÿå–åˆ°å€¼ã€‚</p>
<p>è¯·çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">// a.jså¦‚ä¸‹
import {bar} from &#39;./b.js&#39;;
console.log(&#39;a.js&#39;);
console.log(bar);
export let foo = &#39;foo&#39;;

// b.js
import {foo} from &#39;./a.js&#39;;
console.log(&#39;b.js&#39;);
console.log(foo);
export let bar = &#39;bar&#39;;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>a.js</code>åŠ è½½<code>b.js</code>ï¼Œ<code>b.js</code>åˆåŠ è½½<code>a.js</code>ï¼Œæ„æˆå¾ªç¯åŠ è½½ã€‚æ‰§è¡Œ<code>a.js</code>ï¼Œç»“æœå¦‚ä¸‹ã€‚</p>
<pre><code class="bash">$ babel-node a.js
b.js
undefined
a.js
bar
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äº<code>a.js</code>çš„ç¬¬ä¸€è¡Œæ˜¯åŠ è½½<code>b.js</code>ï¼Œæ‰€ä»¥å…ˆæ‰§è¡Œçš„æ˜¯<code>b.js</code>ã€‚è€Œ<code>b.js</code>çš„ç¬¬ä¸€è¡Œåˆæ˜¯åŠ è½½<code>a.js</code>ï¼Œè¿™æ—¶ç”±äº<code>a.js</code>å·²ç»å¼€å§‹æ‰§è¡Œäº†ï¼Œæ‰€ä»¥ä¸ä¼šé‡å¤æ‰§è¡Œï¼Œè€Œæ˜¯ç»§ç»­å¾€ä¸‹æ‰§è¡Œ<code>b.js</code>ï¼Œæ‰€ä»¥ç¬¬ä¸€è¡Œè¾“å‡ºçš„æ˜¯<code>b.js</code>ã€‚</p>
<p>æ¥ç€ï¼Œ<code>b.js</code>è¦æ‰“å°å˜é‡<code>foo</code>ï¼Œè¿™æ—¶<code>a.js</code>è¿˜æ²¡æ‰§è¡Œå®Œï¼Œå–ä¸åˆ°<code>foo</code>çš„å€¼ï¼Œå¯¼è‡´æ‰“å°å‡ºæ¥æ˜¯<code>undefined</code>ã€‚<code>b.js</code>æ‰§è¡Œå®Œï¼Œå¼€å§‹æ‰§è¡Œ<code>a.js</code>ï¼Œè¿™æ—¶å°±ä¸€åˆ‡æ­£å¸¸äº†ã€‚</p>
<p>å†çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚çš„ä¾‹å­ï¼ˆæ‘˜è‡ª Dr. Axel Rauschmayer çš„<a href="http://exploringjs.com/es6/ch_modules.html" target="_blank" rel="external">ã€ŠExploring ES6ã€‹</a>ï¼‰ã€‚</p>
<pre><code class="javascript">// a.js
import {bar} from &#39;./b.js&#39;;
export function foo() {
  console.log(&#39;foo&#39;);
  bar();
  console.log(&#39;æ‰§è¡Œå®Œæ¯•&#39;);
}
foo();

// b.js
import {foo} from &#39;./a.js&#39;;
export function bar() {
  console.log(&#39;bar&#39;);
  if (Math.random() &gt; 0.5) {
    foo();
  }
}
</code></pre>
<p>æŒ‰ç…§CommonJSè§„èŒƒï¼Œä¸Šé¢çš„ä»£ç æ˜¯æ²¡æ³•æ‰§è¡Œçš„ã€‚<code>a</code>å…ˆåŠ è½½<code>b</code>ï¼Œç„¶å<code>b</code>åˆåŠ è½½<code>a</code>ï¼Œè¿™æ—¶<code>a</code>è¿˜æ²¡æœ‰ä»»ä½•æ‰§è¡Œç»“æœï¼Œæ‰€ä»¥è¾“å‡ºç»“æœä¸º<code>null</code>ï¼Œå³å¯¹äº<code>b.js</code>æ¥è¯´ï¼Œå˜é‡<code>foo</code>çš„å€¼ç­‰äº<code>null</code>ï¼Œåé¢çš„<code>foo()</code>å°±ä¼šæŠ¥é”™ã€‚</p>
<p>ä½†æ˜¯ï¼ŒES6å¯ä»¥æ‰§è¡Œä¸Šé¢çš„ä»£ç ã€‚</p>
<pre><code class="bash">$ babel-node a.js
foo
bar
æ‰§è¡Œå®Œæ¯•

// æ‰§è¡Œç»“æœä¹Ÿæœ‰å¯èƒ½æ˜¯
foo
bar
foo
bar
æ‰§è¡Œå®Œæ¯•
æ‰§è¡Œå®Œæ¯•
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>a.js</code>ä¹‹æ‰€ä»¥èƒ½å¤Ÿæ‰§è¡Œï¼ŒåŸå› å°±åœ¨äºES6åŠ è½½çš„å˜é‡ï¼Œéƒ½æ˜¯åŠ¨æ€å¼•ç”¨å…¶æ‰€åœ¨çš„æ¨¡å—ã€‚åªè¦å¼•ç”¨å­˜åœ¨ï¼Œä»£ç å°±èƒ½æ‰§è¡Œã€‚</p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬è¯¦ç»†åˆ†æè¿™æ®µä»£ç çš„è¿è¡Œè¿‡ç¨‹ã€‚</p>
<pre><code class="javascript">// a.js

// è¿™ä¸€è¡Œå»ºç«‹ä¸€ä¸ªå¼•ç”¨ï¼Œ
// ä»`b.js`å¼•ç”¨`bar`
import {bar} from &#39;./b.js&#39;;

export function foo() {
  // æ‰§è¡Œæ—¶ç¬¬ä¸€è¡Œè¾“å‡º foo
  console.log(&#39;foo&#39;);
  // åˆ° b.js æ‰§è¡Œ bar
  bar();
  console.log(&#39;æ‰§è¡Œå®Œæ¯•&#39;);
}
foo();

// b.js

// å»ºç«‹`a.js`çš„`foo`å¼•ç”¨
import {foo} from &#39;./a.js&#39;;

export function bar() {
  // æ‰§è¡Œæ—¶ï¼Œç¬¬äºŒè¡Œè¾“å‡º bar
  console.log(&#39;bar&#39;);
  // é€’å½’æ‰§è¡Œ fooï¼Œä¸€æ—¦éšæœºæ•°
  // å°äºç­‰äº0.5ï¼Œå°±åœæ­¢æ‰§è¡Œ
  if (Math.random() &gt; 0.5) {
    foo();
  }
}
</code></pre>
<p>æˆ‘ä»¬å†æ¥çœ‹ES6æ¨¡å—åŠ è½½å™¨<a href="https://github.com/ModuleLoader/es6-module-loader/blob/master/docs/circular-references-bindings.md" target="_blank" rel="external">SystemJS</a>ç»™å‡ºçš„ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">// even.js
import { odd } from &#39;./odd&#39;
export var counter = 0;
export function even(n) {
  counter++;
  return n == 0 || odd(n - 1);
}

// odd.js
import { even } from &#39;./even&#39;;
export function odd(n) {
  return n != 0 &amp;&amp; even(n - 1);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>even.js</code>é‡Œé¢çš„å‡½æ•°<code>even</code>æœ‰ä¸€ä¸ªå‚æ•°<code>n</code>ï¼Œåªè¦ä¸ç­‰äº0ï¼Œå°±ä¼šå‡å»1ï¼Œä¼ å…¥åŠ è½½çš„<code>odd()</code>ã€‚<code>odd.js</code>ä¹Ÿä¼šåšç±»ä¼¼æ“ä½œã€‚</p>
<p>è¿è¡Œä¸Šé¢è¿™æ®µä»£ç ï¼Œç»“æœå¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">$ babel-node
&gt; import * as m from &#39;./even.js&#39;;
&gt; m.even(10);
true
&gt; m.counter
6
&gt; m.even(20)
true
&gt; m.counter
17
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°<code>n</code>ä»10å˜ä¸º0çš„è¿‡ç¨‹ä¸­ï¼Œ<code>even()</code>ä¸€å…±ä¼šæ‰§è¡Œ6æ¬¡ï¼Œæ‰€ä»¥å˜é‡<code>counter</code>ç­‰äº6ã€‚ç¬¬äºŒæ¬¡è°ƒç”¨<code>even()</code>æ—¶ï¼Œå‚æ•°<code>n</code>ä»20å˜ä¸º0ï¼Œ<code>even()</code>ä¸€å…±ä¼šæ‰§è¡Œ11æ¬¡ï¼ŒåŠ ä¸Šå‰é¢çš„6æ¬¡ï¼Œæ‰€ä»¥å˜é‡<code>counter</code>ç­‰äº17ã€‚</p>
<p>è¿™ä¸ªä¾‹å­è¦æ˜¯æ”¹å†™æˆCommonJSï¼Œå°±æ ¹æœ¬æ— æ³•æ‰§è¡Œï¼Œä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// even.js
var odd = require(&#39;./odd&#39;);
var counter = 0;
exports.counter = counter;
exports.even = function(n) {
  counter++;
  return n == 0 || odd(n - 1);
}

// odd.js
var even = require(&#39;./even&#39;).even;
module.exports = function(n) {
  return n != 0 &amp;&amp; even(n - 1);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>even.js</code>åŠ è½½<code>odd.js</code>ï¼Œè€Œ<code>odd.js</code>åˆå»åŠ è½½<code>even.js</code>ï¼Œå½¢æˆâ€œå¾ªç¯åŠ è½½â€ã€‚è¿™æ—¶ï¼Œæ‰§è¡Œå¼•æ“å°±ä¼šè¾“å‡º<code>even.js</code>å·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼ˆä¸å­˜åœ¨ä»»ä½•ç»“æœï¼‰ï¼Œæ‰€ä»¥åœ¨<code>odd.js</code>ä¹‹ä¸­ï¼Œå˜é‡<code>even</code>ç­‰äº<code>null</code>ï¼Œç­‰åˆ°åé¢è°ƒç”¨<code>even(n-1)</code>å°±ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="bash">$ node
&gt; var m = require(&#39;./even&#39;);
&gt; m.even(10)
TypeError: even is not a function
</code></pre>
<h2 id="è·¨æ¨¡å—å¸¸é‡"><a href="#è·¨æ¨¡å—å¸¸é‡" class="headerlink" title="è·¨æ¨¡å—å¸¸é‡"></a>è·¨æ¨¡å—å¸¸é‡</h2><p>æœ¬ä¹¦ä»‹ç»<code>const</code>å‘½ä»¤çš„æ—¶å€™è¯´è¿‡ï¼Œ<code>const</code>å£°æ˜çš„å¸¸é‡åªåœ¨å½“å‰ä»£ç å—æœ‰æ•ˆã€‚å¦‚æœæƒ³è®¾ç½®è·¨æ¨¡å—çš„å¸¸é‡ï¼ˆå³è·¨å¤šä¸ªæ–‡ä»¶ï¼‰ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">// constants.js æ¨¡å—
export const A = 1;
export const B = 3;
export const C = 4;

// test1.js æ¨¡å—
import * as constants from &#39;./constants&#39;;
console.log(constants.A); // 1
console.log(constants.B); // 3

// test2.js æ¨¡å—
import {A, B} from &#39;./constants&#39;;
console.log(A); // 1
console.log(B); // 3
</code></pre>
<p>å¦‚æœè¦ä½¿ç”¨çš„å¸¸é‡éå¸¸å¤šï¼Œå¯ä»¥å»ºä¸€ä¸ªä¸“é—¨çš„<code>constants</code>ç›®å½•ï¼Œå°†å„ç§å¸¸é‡å†™åœ¨ä¸åŒçš„æ–‡ä»¶é‡Œé¢ï¼Œä¿å­˜åœ¨è¯¥ç›®å½•ä¸‹ã€‚</p>
<pre><code class="javascript">// constants/db.js
export const db = {
  url: &#39;http://my.couchdbserver.local:5984&#39;,
  admin_username: &#39;admin&#39;,
  admin_password: &#39;admin password&#39;
};

// constants/user.js
export const users = [&#39;root&#39;, &#39;admin&#39;, &#39;staff&#39;, &#39;ceo&#39;, &#39;chief&#39;, &#39;moderator&#39;];
</code></pre>
<p>ç„¶åï¼Œå°†è¿™äº›æ–‡ä»¶è¾“å‡ºçš„å¸¸é‡ï¼Œåˆå¹¶åœ¨<code>index.js</code>é‡Œé¢ã€‚</p>
<pre><code class="javascript">// constants/index.js
export {db} from &#39;./db&#39;;
export {users} from &#39;./users&#39;;
</code></pre>
<p>ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥åŠ è½½<code>index.js</code>å°±å¯ä»¥äº†ã€‚</p>
<pre><code class="javascript">// script.js
import {db, users} from &#39;./constants&#39;;
</code></pre>
<h2 id="import"><a href="#import" class="headerlink" title="import()"></a>import()</h2><p>ä¸Šé¢è¯´è¿‡äº†ï¼Œ<code>import</code>è¯­å¥ä¼šè¢«JavaScriptå¼•æ“é™æ€åˆ†æï¼Œå…ˆäºæ¨¡å—å†…çš„å…¶ä»–æ¨¡å—æ‰§è¡Œï¼ˆå«åšâ€è¿æ¥â€œæ›´åˆé€‚ï¼‰ã€‚æ‰€ä»¥ï¼Œä¸‹é¢çš„ä»£ç ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
if (x === 2) {
  import MyModual from &#39;./myModual&#39;;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¼•æ“å¤„ç†<code>import</code>è¯­å¥æ˜¯åœ¨æ‰§è¡Œä¹‹å‰ï¼Œæ‰€ä»¥<code>import</code>è¯­å¥æ”¾åœ¨<code>if</code>ä»£ç å—ä¹‹ä¸­æ¯«æ— æ„ä¹‰ï¼Œå› æ­¤ä¼šæŠ¥å¥æ³•é”™è¯¯ï¼Œè€Œä¸æ˜¯æ‰§è¡Œæ—¶é”™è¯¯ã€‚</p>
<p>è¿™æ ·çš„è®¾è®¡ï¼Œå›ºç„¶æœ‰åˆ©äºç¼–è¯‘å™¨æé«˜æ•ˆç‡ï¼Œä½†ä¹Ÿå¯¼è‡´æ— æ³•åœ¨è¿è¡Œæ—¶åŠ è½½æ¨¡å—ã€‚ä»é•¿è¿œæ¥çœ‹ï¼Œ<code>import</code>è¯­å¥ä¼šå–ä»£ Node çš„<code>require</code>æ–¹æ³•ï¼Œä½†æ˜¯<code>require</code>æ˜¯è¿è¡Œæ—¶åŠ è½½æ¨¡å—ï¼Œ<code>import</code>è¯­å¥æ˜¾ç„¶æ— æ³•å–ä»£è¿™ç§åŠ¨æ€åŠ è½½åŠŸèƒ½ã€‚</p>
<pre><code class="javascript">const path = &#39;./&#39; + fileName;
const myModual = require(path);
</code></pre>
<p>ä¸Šé¢çš„è¯­å¥å°±æ˜¯åŠ¨æ€åŠ è½½ï¼Œ<code>require</code>åˆ°åº•åŠ è½½å“ªä¸€ä¸ªæ¨¡å—ï¼Œåªæœ‰è¿è¡Œæ—¶æ‰çŸ¥é“ã€‚<code>import</code>è¯­å¥åšä¸åˆ°è¿™ä¸€ç‚¹ã€‚</p>
<p>å› æ­¤ï¼Œæœ‰ä¸€ä¸ª<a href="https://github.com/tc39/proposal-dynamic-import" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œå»ºè®®å¼•å…¥<code>import()</code>å‡½æ•°ï¼Œå®ŒæˆåŠ¨æ€åŠ è½½ã€‚</p>
<pre><code class="javascript">import(specifier)
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>import</code>å‡½æ•°çš„å‚æ•°<code>specifier</code>ï¼ŒæŒ‡å®šæ‰€è¦åŠ è½½çš„æ¨¡å—çš„ä½ç½®ã€‚<code>import</code>è¯­å¥èƒ½å¤Ÿæ¥å—ä»€ä¹ˆå‚æ•°ï¼Œ<code>import()</code>å‡½æ•°å°±èƒ½æ¥å—ä»€ä¹ˆå‚æ•°ï¼Œä¸¤è€…åŒºåˆ«ä¸»è¦æ˜¯åè€…ä¸ºåŠ¨æ€åŠ è½½ã€‚</p>
<p><code>import()</code>è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">const main = document.querySelector(&#39;main&#39;);

import(`./section-modules/${someVariable}.js`)
  .then(module =&gt; {
    module.loadPageInto(main);
  })
  .catch(err =&gt; {
    main.textContent = err.message;
  });
</code></pre>
<p><code>import()</code>å‡½æ•°å¯ä»¥ç”¨åœ¨ä»»ä½•åœ°æ–¹ï¼Œä¸ä»…ä»…æ˜¯æ¨¡å—ï¼Œéæ¨¡å—çš„è„šæœ¬ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚å®ƒæ˜¯è¿è¡Œæ—¶æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»€ä¹ˆæ—¶å€™è¿è¡Œåˆ°è¿™ä¸€å¥ï¼Œä¹Ÿä¼šåŠ è½½æŒ‡å®šçš„æ¨¡å—ã€‚å¦å¤–ï¼Œ<code>import()</code>å‡½æ•°ä¸æ‰€åŠ è½½çš„æ¨¡å—æ²¡æœ‰é™æ€è¿æ¥å…³ç³»ï¼Œè¿™ç‚¹ä¹Ÿæ˜¯ä¸<code>import</code>è¯­å¥ä¸ç›¸åŒã€‚</p>
<p><code>import()</code>ç±»ä¼¼äº Node çš„<code>require</code>æ–¹æ³•ï¼ŒåŒºåˆ«ä¸»è¦æ˜¯å‰è€…æ˜¯å¼‚æ­¥åŠ è½½ï¼Œåè€…æ˜¯åŒæ­¥åŠ è½½ã€‚</p>
<h2 id="ES6æ¨¡å—çš„è½¬ç "><a href="#ES6æ¨¡å—çš„è½¬ç " class="headerlink" title="ES6æ¨¡å—çš„è½¬ç "></a>ES6æ¨¡å—çš„è½¬ç </h2><p>æµè§ˆå™¨ç›®å‰è¿˜ä¸æ”¯æŒES6æ¨¡å—ï¼Œä¸ºäº†ç°åœ¨å°±èƒ½ä½¿ç”¨ï¼Œå¯ä»¥å°†è½¬ä¸ºES5çš„å†™æ³•ã€‚é™¤äº†Babelå¯ä»¥ç”¨æ¥è½¬ç ä¹‹å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è½¬ç ã€‚</p>
<h3 id="ES6-module-transpiler"><a href="#ES6-module-transpiler" class="headerlink" title="ES6 module transpiler"></a>ES6 module transpiler</h3><p><a href="https://github.com/esnext/es6-module-transpiler" target="_blank" rel="external">ES6 module transpiler</a>æ˜¯ square å…¬å¸å¼€æºçš„ä¸€ä¸ªè½¬ç å™¨ï¼Œå¯ä»¥å°† ES6 æ¨¡å—è½¬ä¸º CommonJS æ¨¡å—æˆ– AMD æ¨¡å—çš„å†™æ³•ï¼Œä»è€Œåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚</p>
<p>é¦–å…ˆï¼Œå®‰è£…è¿™ä¸ªè½¬ç›å™¨ã€‚</p>
<pre><code class="bash">$ npm install -g es6-module-transpiler
</code></pre>
<p>ç„¶åï¼Œä½¿ç”¨<code>compile-modules convert</code>å‘½ä»¤ï¼Œå°† ES6 æ¨¡å—æ–‡ä»¶è½¬ç ã€‚</p>
<pre><code class="bash">$ compile-modules convert file1.js file2.js
</code></pre>
<p><code>-o</code>å‚æ•°å¯ä»¥æŒ‡å®šè½¬ç åçš„æ–‡ä»¶åã€‚</p>
<pre><code class="bash">$ compile-modules convert -o out.js file1.js
</code></pre>
<h3 id="SystemJS"><a href="#SystemJS" class="headerlink" title="SystemJS"></a>SystemJS</h3><p>å¦ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ <a href="https://github.com/systemjs/systemjs" target="_blank" rel="external">SystemJS</a>ã€‚å®ƒæ˜¯ä¸€ä¸ªå«ç‰‡åº“ï¼ˆpolyfillï¼‰ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨å†…åŠ è½½ ES6 æ¨¡å—ã€AMD æ¨¡å—å’Œ CommonJS æ¨¡å—ï¼Œå°†å…¶è½¬ä¸º ES5 æ ¼å¼ã€‚å®ƒåœ¨åå°è°ƒç”¨çš„æ˜¯ Google çš„ Traceur è½¬ç å™¨ã€‚</p>
<p>ä½¿ç”¨æ—¶ï¼Œå…ˆåœ¨ç½‘é¡µå†…è½½å…¥<code>system.js</code>æ–‡ä»¶ã€‚</p>
<pre><code class="html">&lt;script src=&quot;system.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>ç„¶åï¼Œä½¿ç”¨<code>System.import</code>æ–¹æ³•åŠ è½½æ¨¡å—æ–‡ä»¶ã€‚</p>
<pre><code class="html">&lt;script&gt;
  System.import(&#39;./app.js&#39;);
&lt;/script&gt;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­çš„<code>./app</code>ï¼ŒæŒ‡çš„æ˜¯å½“å‰ç›®å½•ä¸‹çš„app.jsæ–‡ä»¶ã€‚å®ƒå¯ä»¥æ˜¯ES6æ¨¡å—æ–‡ä»¶ï¼Œ<code>System.import</code>ä¼šè‡ªåŠ¨å°†å…¶è½¬ç ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>System.import</code>ä½¿ç”¨å¼‚æ­¥åŠ è½½ï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¯ä»¥é’ˆå¯¹è¿™ä¸ªå¯¹è±¡ç¼–ç¨‹ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ¨¡å—æ–‡ä»¶ã€‚</p>
<pre><code class="javascript">// app/es6-file.js:

export class q {
  constructor() {
    this.es6 = &#39;hello&#39;;
  }
}
</code></pre>
<p>ç„¶åï¼Œåœ¨ç½‘é¡µå†…åŠ è½½è¿™ä¸ªæ¨¡å—æ–‡ä»¶ã€‚</p>
<pre><code class="html">&lt;script&gt;

System.import(&#39;app/es6-file&#39;).then(function(m) {
  console.log(new m.q().es6); // hello
});

&lt;/script&gt;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>System.import</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ç”¨<code>then</code>æ–¹æ³•æŒ‡å®šå›è°ƒå‡½æ•°ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Module&quot;&gt;&lt;a href=&quot;#Module&quot; class=&quot;headerlink&quot; title=&quot;Module&quot;&gt;&lt;/a&gt;Module&lt;/h1&gt;&lt;p&gt;å†å²ä¸Šï¼ŒJavaScript ä¸€ç›´æ²¡æœ‰æ¨¡å—ï¼ˆmoduleï¼‰ä½“ç³»ï¼Œæ— æ³•å°†ä¸€ä¸ªå¤§ç¨‹åºæ‹†åˆ†æˆäº’ç›¸ä¾èµ–çš„å°æ–‡ä»¶ï¼Œå†ç”¨
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Module" scheme="https://microzz.com/tags/Module/"/>
    
  </entry>
  
  <entry>
    <title>ES6ä¸­Decoratorä¿®é¥°å™¨</title>
    <link href="https://microzz.com/2017/01/17/decorator/"/>
    <id>https://microzz.com/2017/01/17/decorator/</id>
    <published>2017-01-17T08:00:53.000Z</published>
    <updated>2017-08-21T11:33:37.439Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¿®é¥°å™¨"><a href="#ä¿®é¥°å™¨" class="headerlink" title="ä¿®é¥°å™¨"></a>ä¿®é¥°å™¨</h1><h2 id="ç±»çš„ä¿®é¥°"><a href="#ç±»çš„ä¿®é¥°" class="headerlink" title="ç±»çš„ä¿®é¥°"></a>ç±»çš„ä¿®é¥°</h2><p>ä¿®é¥°å™¨ï¼ˆDecoratorï¼‰æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥ä¿®æ”¹ç±»çš„è¡Œä¸ºã€‚è¿™æ˜¯ES7çš„ä¸€ä¸ª<a href="https://github.com/wycats/javascript-decorators" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œç›®å‰Babelè½¬ç å™¨å·²ç»æ”¯æŒã€‚</p>
<p>ä¿®é¥°å™¨å¯¹ç±»çš„è¡Œä¸ºçš„æ”¹å˜ï¼Œæ˜¯ä»£ç ç¼–è¯‘æ—¶å‘ç”Ÿçš„ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚è¿™æ„å‘³ç€ï¼Œä¿®é¥°å™¨èƒ½åœ¨ç¼–è¯‘é˜¶æ®µè¿è¡Œä»£ç ã€‚</p>
<pre><code class="javascript">function testable(target) {
  target.isTestable = true;
}

@testable
class MyTestableClass {}

console.log(MyTestableClass.isTestable) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>@testable</code>å°±æ˜¯ä¸€ä¸ªä¿®é¥°å™¨ã€‚å®ƒä¿®æ”¹äº†<code>MyTestableClass</code>è¿™ä¸ªç±»çš„è¡Œä¸ºï¼Œä¸ºå®ƒåŠ ä¸Šäº†é™æ€å±æ€§<code>isTestable</code>ã€‚</p>
<p>åŸºæœ¬ä¸Šï¼Œä¿®é¥°å™¨çš„è¡Œä¸ºå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">@decorator
class A {}

// ç­‰åŒäº

class A {}
A = decorator(A) || A;
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¿®é¥°å™¨æœ¬è´¨å°±æ˜¯ç¼–è¯‘æ—¶æ‰§è¡Œçš„å‡½æ•°ã€‚</p>
<p>ä¿®é¥°å™¨å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æ‰€è¦ä¿®é¥°çš„ç›®æ ‡ç±»ã€‚</p>
<pre><code class="javascript">function testable(target) {
  // ...
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>testable</code>å‡½æ•°çš„å‚æ•°<code>target</code>ï¼Œå°±æ˜¯ä¼šè¢«ä¿®é¥°çš„ç±»ã€‚</p>
<p>å¦‚æœè§‰å¾—ä¸€ä¸ªå‚æ•°ä¸å¤Ÿç”¨ï¼Œå¯ä»¥åœ¨ä¿®é¥°å™¨å¤–é¢å†å°è£…ä¸€å±‚å‡½æ•°ã€‚</p>
<pre><code class="javascript">function testable(isTestable) {
  return function(target) {
    target.isTestable = isTestable;
  }
}

@testable(true)
class MyTestableClass {}
MyTestableClass.isTestable // true

@testable(false)
class MyClass {}
MyClass.isTestable // false
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¿®é¥°å™¨<code>testable</code>å¯ä»¥æ¥å—å‚æ•°ï¼Œè¿™å°±ç­‰äºå¯ä»¥ä¿®æ”¹ä¿®é¥°å™¨çš„è¡Œä¸ºã€‚</p>
<p>å‰é¢çš„ä¾‹å­æ˜¯ä¸ºç±»æ·»åŠ ä¸€ä¸ªé™æ€å±æ€§ï¼Œå¦‚æœæƒ³æ·»åŠ å®ä¾‹å±æ€§ï¼Œå¯ä»¥é€šè¿‡ç›®æ ‡ç±»çš„<code>prototype</code>å¯¹è±¡æ“ä½œã€‚</p>
<pre><code class="javascript">function testable(target) {
  target.prototype.isTestable = true;
}

@testable
class MyTestableClass {}

let obj = new MyTestableClass();
obj.isTestable // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¿®é¥°å™¨å‡½æ•°<code>testable</code>æ˜¯åœ¨ç›®æ ‡ç±»çš„<code>prototype</code>å¯¹è±¡ä¸Šæ·»åŠ å±æ€§ï¼Œå› æ­¤å°±å¯ä»¥åœ¨å®ä¾‹ä¸Šè°ƒç”¨ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">// mixins.js
export function mixins(...list) {
  return function (target) {
    Object.assign(target.prototype, ...list)
  }
}

// main.js
import { mixins } from &#39;./mixins&#39;

const Foo = {
  foo() { console.log(&#39;foo&#39;) }
};

@mixins(Foo)
class MyClass {}

let obj = new MyClass();
obj.foo() // &#39;foo&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç é€šè¿‡ä¿®é¥°å™¨<code>mixins</code>ï¼ŒæŠŠ<code>Foo</code>ç±»çš„æ–¹æ³•æ·»åŠ åˆ°äº†<code>MyClass</code>çš„å®ä¾‹ä¸Šé¢ã€‚å¯ä»¥ç”¨<code>Object.assign()</code>æ¨¡æ‹Ÿè¿™ä¸ªåŠŸèƒ½ã€‚</p>
<pre><code class="javascript">const Foo = {
  foo() { console.log(&#39;foo&#39;) }
};

class MyClass {}

Object.assign(MyClass.prototype, Foo);

let obj = new MyClass();
obj.foo() // &#39;foo&#39;
</code></pre>
<h2 id="æ–¹æ³•çš„ä¿®é¥°"><a href="#æ–¹æ³•çš„ä¿®é¥°" class="headerlink" title="æ–¹æ³•çš„ä¿®é¥°"></a>æ–¹æ³•çš„ä¿®é¥°</h2><p>ä¿®é¥°å™¨ä¸ä»…å¯ä»¥ä¿®é¥°ç±»ï¼Œè¿˜å¯ä»¥ä¿®é¥°ç±»çš„å±æ€§ã€‚</p>
<pre><code class="javascript">class Person {
  @readonly
  name() { return `${this.first} ${this.last}` }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¿®é¥°å™¨<code>readonly</code>ç”¨æ¥ä¿®é¥°â€œç±»â€çš„<code>name</code>æ–¹æ³•ã€‚</p>
<p>æ­¤æ—¶ï¼Œä¿®é¥°å™¨å‡½æ•°ä¸€å…±å¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰€è¦ä¿®é¥°çš„ç›®æ ‡å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ‰€è¦ä¿®é¥°çš„å±æ€§åï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¯¥å±æ€§çš„æè¿°å¯¹è±¡ã€‚</p>
<pre><code class="javascript">function readonly(target, name, descriptor){
  // descriptorå¯¹è±¡åŸæ¥çš„å€¼å¦‚ä¸‹
  // {
  //   value: specifiedFunction,
  //   enumerable: false,
  //   configurable: true,
  //   writable: true
  // };
  descriptor.writable = false;
  return descriptor;
}

readonly(Person.prototype, &#39;name&#39;, descriptor);
// ç±»ä¼¼äº
Object.defineProperty(Person.prototype, &#39;name&#39;, descriptor);
</code></pre>
<p>ä¸Šé¢ä»£ç è¯´æ˜ï¼Œä¿®é¥°å™¨ï¼ˆreadonlyï¼‰ä¼šä¿®æ”¹å±æ€§çš„æè¿°å¯¹è±¡ï¼ˆdescriptorï¼‰ï¼Œç„¶åè¢«ä¿®æ”¹çš„æè¿°å¯¹è±¡å†ç”¨æ¥å®šä¹‰å±æ€§ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œä¿®æ”¹å±æ€§æè¿°å¯¹è±¡çš„<code>enumerable</code>å±æ€§ï¼Œä½¿å¾—è¯¥å±æ€§ä¸å¯éå†ã€‚</p>
<pre><code class="javascript">class Person {
  @nonenumerable
  get kidCount() { return this.children.length; }
}

function nonenumerable(target, name, descriptor) {
  descriptor.enumerable = false;
  return descriptor;
}
</code></pre>
<p>ä¸‹é¢çš„<code>@log</code>ä¿®é¥°å™¨ï¼Œå¯ä»¥èµ·åˆ°è¾“å‡ºæ—¥å¿—çš„ä½œç”¨ã€‚</p>
<pre><code class="javascript">class Math {
  @log
  add(a, b) {
    return a + b;
  }
}

function log(target, name, descriptor) {
  var oldValue = descriptor.value;

  descriptor.value = function() {
    console.log(`Calling &quot;${name}&quot; with`, arguments);
    return oldValue.apply(null, arguments);
  };

  return descriptor;
}

const math = new Math();

// passed parameters should get logged now
math.add(2, 4);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>@log</code>ä¿®é¥°å™¨çš„ä½œç”¨å°±æ˜¯åœ¨æ‰§è¡ŒåŸå§‹çš„æ“ä½œä¹‹å‰ï¼Œæ‰§è¡Œä¸€æ¬¡<code>console.log</code>ï¼Œä»è€Œè¾¾åˆ°è¾“å‡ºæ—¥å¿—çš„ç›®çš„ã€‚</p>
<p>ä¿®é¥°å™¨æœ‰æ³¨é‡Šçš„ä½œç”¨ã€‚</p>
<pre><code class="javascript">@testable
class Person {
  @readonly
  @nonenumerable
  name() { return `${this.first} ${this.last}` }
}
</code></pre>
<p>ä»ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸€çœ¼å°±èƒ½çœ‹å‡ºï¼Œ<code>Person</code>ç±»æ˜¯å¯æµ‹è¯•çš„ï¼Œè€Œ<code>name</code>æ–¹æ³•æ˜¯åªè¯»å’Œä¸å¯æšä¸¾çš„ã€‚</p>
<p>å¦‚æœåŒä¸€ä¸ªæ–¹æ³•æœ‰å¤šä¸ªä¿®é¥°å™¨ï¼Œä¼šåƒå‰¥æ´‹è‘±ä¸€æ ·ï¼Œå…ˆä»å¤–åˆ°å†…è¿›å…¥ï¼Œç„¶åç”±å†…å‘å¤–æ‰§è¡Œã€‚</p>
<pre><code class="javascript">function dec(id){
    console.log(&#39;evaluated&#39;, id);
    return (target, property, descriptor) =&gt; console.log(&#39;executed&#39;, id);
}

class Example {
    @dec(1)
    @dec(2)
    method(){}
}
// evaluated 1
// evaluated 2
// executed 2
// executed 1
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¤–å±‚ä¿®é¥°å™¨<code>@dec(1)</code>å…ˆè¿›å…¥ï¼Œä½†æ˜¯å†…å±‚ä¿®é¥°å™¨<code>@dec(2)</code>å…ˆæ‰§è¡Œã€‚</p>
<p>é™¤äº†æ³¨é‡Šï¼Œä¿®é¥°å™¨è¿˜èƒ½ç”¨æ¥ç±»å‹æ£€æŸ¥ã€‚æ‰€ä»¥ï¼Œå¯¹äºç±»æ¥è¯´ï¼Œè¿™é¡¹åŠŸèƒ½ç›¸å½“æœ‰ç”¨ã€‚ä»é•¿æœŸæ¥çœ‹ï¼Œå®ƒå°†æ˜¯JavaScriptä»£ç é™æ€åˆ†æçš„é‡è¦å·¥å…·ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ï¼Ÿ</h2><p>ä¿®é¥°å™¨åªèƒ½ç”¨äºç±»å’Œç±»çš„æ–¹æ³•ï¼Œä¸èƒ½ç”¨äºå‡½æ•°ï¼Œå› ä¸ºå­˜åœ¨å‡½æ•°æå‡ã€‚</p>
<pre><code class="javascript">var counter = 0;

var add = function () {
  counter++;
};

@add
function foo() {
}
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ï¼Œæ„å›¾æ˜¯æ‰§è¡Œå<code>counter</code>ç­‰äº1ï¼Œä½†æ˜¯å®é™…ä¸Šç»“æœæ˜¯<code>counter</code>ç­‰äº0ã€‚å› ä¸ºå‡½æ•°æå‡ï¼Œä½¿å¾—å®é™…æ‰§è¡Œçš„ä»£ç æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">@add
function foo() {
}

var counter;
var add;

counter = 0;

add = function () {
  counter++;
};
</code></pre>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var readOnly = require(&quot;some-decorator&quot;);

@readOnly
function foo() {
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¹Ÿæœ‰é—®é¢˜ï¼Œå› ä¸ºå®é™…æ‰§è¡Œæ˜¯ä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">var readOnly;

@readOnly
function foo() {
}

readOnly = require(&quot;some-decorator&quot;);
</code></pre>
<p>æ€»ä¹‹ï¼Œç”±äºå­˜åœ¨å‡½æ•°æå‡ï¼Œä½¿å¾—ä¿®é¥°å™¨ä¸èƒ½ç”¨äºå‡½æ•°ã€‚ç±»æ˜¯ä¸ä¼šæå‡çš„ï¼Œæ‰€ä»¥å°±æ²¡æœ‰è¿™æ–¹é¢çš„é—®é¢˜ã€‚</p>
<h2 id="core-decorators-js"><a href="#core-decorators-js" class="headerlink" title="core-decorators.js"></a>core-decorators.js</h2><p><a href="https://github.com/jayphelps/core-decorators.js" target="_blank" rel="external">core-decorators.js</a>æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæä¾›äº†å‡ ä¸ªå¸¸è§çš„ä¿®é¥°å™¨ï¼Œé€šè¿‡å®ƒå¯ä»¥æ›´å¥½åœ°ç†è§£ä¿®é¥°å™¨ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰@autobind</strong></p>
<p><code>autobind</code>ä¿®é¥°å™¨ä½¿å¾—æ–¹æ³•ä¸­çš„<code>this</code>å¯¹è±¡ï¼Œç»‘å®šåŸå§‹å¯¹è±¡ã€‚</p>
<pre><code class="javascript">import { autobind } from &#39;core-decorators&#39;;

class Person {
  @autobind
  getPerson() {
    return this;
  }
}

let person = new Person();
let getPerson = person.getPerson;

getPerson() === person;
// true
</code></pre>
<p><strong>ï¼ˆ2ï¼‰@readonly</strong></p>
<p><code>readonly</code>ä¿®é¥°å™¨ä½¿å¾—å±æ€§æˆ–æ–¹æ³•ä¸å¯å†™ã€‚</p>
<pre><code class="javascript">import { readonly } from &#39;core-decorators&#39;;

class Meal {
  @readonly
  entree = &#39;steak&#39;;
}

var dinner = new Meal();
dinner.entree = &#39;salmon&#39;;
// Cannot assign to read only property &#39;entree&#39; of [object Object]
</code></pre>
<p><strong>ï¼ˆ3ï¼‰@override</strong></p>
<p><code>override</code>ä¿®é¥°å™¨æ£€æŸ¥å­ç±»çš„æ–¹æ³•ï¼Œæ˜¯å¦æ­£ç¡®è¦†ç›–äº†çˆ¶ç±»çš„åŒåæ–¹æ³•ï¼Œå¦‚æœä¸æ­£ç¡®ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">import { override } from &#39;core-decorators&#39;;

class Parent {
  speak(first, second) {}
}

class Child extends Parent {
  @override
  speak() {}
  // SyntaxError: Child#speak() does not properly override Parent#speak(first, second)
}

// or

class Child extends Parent {
  @override
  speaks() {}
  // SyntaxError: No descriptor matching Child#speaks() was found on the prototype chain.
  //
  //   Did you mean &quot;speak&quot;?
}
</code></pre>
<p><strong>ï¼ˆ4ï¼‰@deprecate (åˆ«å@deprecated)</strong></p>
<p><code>deprecate</code>æˆ–<code>deprecated</code>ä¿®é¥°å™¨åœ¨æ§åˆ¶å°æ˜¾ç¤ºä¸€æ¡è­¦å‘Šï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•å°†åºŸé™¤ã€‚</p>
<pre><code class="javascript">import { deprecate } from &#39;core-decorators&#39;;

class Person {
  @deprecate
  facepalm() {}

  @deprecate(&#39;We stopped facepalming&#39;)
  facepalmHard() {}

  @deprecate(&#39;We stopped facepalming&#39;, { url: &#39;http://knowyourmeme.com/memes/facepalm&#39; })
  facepalmHarder() {}
}

let person = new Person();

person.facepalm();
// DEPRECATION Person#facepalm: This function will be removed in future versions.

person.facepalmHard();
// DEPRECATION Person#facepalmHard: We stopped facepalming

person.facepalmHarder();
// DEPRECATION Person#facepalmHarder: We stopped facepalming
//
//     See http://knowyourmeme.com/memes/facepalm for more details.
//
</code></pre>
<p><strong>ï¼ˆ5ï¼‰@suppressWarnings</strong></p>
<p><code>suppressWarnings</code>ä¿®é¥°å™¨æŠ‘åˆ¶<code>decorated</code>ä¿®é¥°å™¨å¯¼è‡´çš„<code>console.warn()</code>è°ƒç”¨ã€‚ä½†æ˜¯ï¼Œå¼‚æ­¥ä»£ç å‘å‡ºçš„è°ƒç”¨é™¤å¤–ã€‚</p>
<pre><code class="javascript">import { suppressWarnings } from &#39;core-decorators&#39;;

class Person {
  @deprecated
  facepalm() {}

  @suppressWarnings
  facepalmWithoutWarning() {
    this.facepalm();
  }
}

let person = new Person();

person.facepalmWithoutWarning();
// no warning is logged
</code></pre>
<h2 id="ä½¿ç”¨ä¿®é¥°å™¨å®ç°è‡ªåŠ¨å‘å¸ƒäº‹ä»¶"><a href="#ä½¿ç”¨ä¿®é¥°å™¨å®ç°è‡ªåŠ¨å‘å¸ƒäº‹ä»¶" class="headerlink" title="ä½¿ç”¨ä¿®é¥°å™¨å®ç°è‡ªåŠ¨å‘å¸ƒäº‹ä»¶"></a>ä½¿ç”¨ä¿®é¥°å™¨å®ç°è‡ªåŠ¨å‘å¸ƒäº‹ä»¶</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¿®é¥°å™¨ï¼Œä½¿å¾—å¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œè‡ªåŠ¨å‘å‡ºä¸€ä¸ªäº‹ä»¶ã€‚</p>
<pre><code class="javascript">import postal from &quot;postal/lib/postal.lodash&quot;;

export default function publish(topic, channel) {
  return function(target, name, descriptor) {
    const fn = descriptor.value;

    descriptor.value = function() {
      let value = fn.apply(this, arguments);
      postal.channel(channel || target.channel || &quot;/&quot;).publish(topic, value);
    };
  };
}
</code></pre>
<p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>publish</code>çš„ä¿®é¥°å™¨ï¼Œå®ƒé€šè¿‡æ”¹å†™<code>descriptor.value</code>ï¼Œä½¿å¾—åŸæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨å‘å‡ºä¸€ä¸ªäº‹ä»¶ã€‚å®ƒä½¿ç”¨çš„äº‹ä»¶â€œå‘å¸ƒ/è®¢é˜…â€åº“æ˜¯<a href="https://github.com/postaljs/postal.js" target="_blank" rel="external">Postal.js</a>ã€‚</p>
<p>å®ƒçš„ç”¨æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">import publish from &quot;path/to/decorators/publish&quot;;

class FooComponent {
  @publish(&quot;foo.some.message&quot;, &quot;component&quot;)
  someMethod() {
    return {
      my: &quot;data&quot;
    };
  }
  @publish(&quot;foo.some.other&quot;)
  anotherMethod() {
    // ...
  }
}
</code></pre>
<p>ä»¥åï¼Œåªè¦è°ƒç”¨<code>someMethod</code>æˆ–è€…<code>anotherMethod</code>ï¼Œå°±ä¼šè‡ªåŠ¨å‘å‡ºä¸€ä¸ªäº‹ä»¶ã€‚</p>
<pre><code class="javascript">let foo = new FooComponent();

foo.someMethod() // åœ¨&quot;component&quot;é¢‘é“å‘å¸ƒ&quot;foo.some.message&quot;äº‹ä»¶ï¼Œé™„å¸¦çš„æ•°æ®æ˜¯{ my: &quot;data&quot; }
foo.anotherMethod() // åœ¨&quot;/&quot;é¢‘é“å‘å¸ƒ&quot;foo.some.other&quot;äº‹ä»¶ï¼Œä¸é™„å¸¦æ•°æ®
</code></pre>
<h2 id="Mixin"><a href="#Mixin" class="headerlink" title="Mixin"></a>Mixin</h2><p>åœ¨ä¿®é¥°å™¨çš„åŸºç¡€ä¸Šï¼Œå¯ä»¥å®ç°<code>Mixin</code>æ¨¡å¼ã€‚æ‰€è°“<code>Mixin</code>æ¨¡å¼ï¼Œå°±æ˜¯å¯¹è±¡ç»§æ‰¿çš„ä¸€ç§æ›¿ä»£æ–¹æ¡ˆï¼Œä¸­æ–‡è¯‘ä¸ºâ€œæ··å…¥â€ï¼ˆmix inï¼‰ï¼Œæ„ä¸ºåœ¨ä¸€ä¸ªå¯¹è±¡ä¹‹ä¸­æ··å…¥å¦å¤–ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<p>è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">const Foo = {
  foo() { console.log(&#39;foo&#39;) }
};

class MyClass {}

Object.assign(MyClass.prototype, Foo);

let obj = new MyClass();
obj.foo() // &#39;foo&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¹‹ä¸­ï¼Œå¯¹è±¡<code>Foo</code>æœ‰ä¸€ä¸ª<code>foo</code>æ–¹æ³•ï¼Œé€šè¿‡<code>Object.assign</code>æ–¹æ³•ï¼Œå¯ä»¥å°†<code>foo</code>æ–¹æ³•â€œæ··å…¥â€<code>MyClass</code>ç±»ï¼Œå¯¼è‡´<code>MyClass</code>çš„å®ä¾‹<code>obj</code>å¯¹è±¡éƒ½å…·æœ‰<code>foo</code>æ–¹æ³•ã€‚è¿™å°±æ˜¯â€œæ··å…¥â€æ¨¡å¼çš„ä¸€ä¸ªç®€å•å®ç°ã€‚</p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬éƒ¨ç½²ä¸€ä¸ªé€šç”¨è„šæœ¬<code>mixins.js</code>ï¼Œå°†mixinå†™æˆä¸€ä¸ªä¿®é¥°å™¨ã€‚</p>
<pre><code class="javascript">export function mixins(...list) {
  return function (target) {
    Object.assign(target.prototype, ...list);
  };
}
</code></pre>
<p>ç„¶åï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸Šé¢è¿™ä¸ªä¿®é¥°å™¨ï¼Œä¸ºç±»â€œæ··å…¥â€å„ç§æ–¹æ³•ã€‚</p>
<pre><code class="javascript">import { mixins } from &#39;./mixins&#39;;

const Foo = {
  foo() { console.log(&#39;foo&#39;) }
};

@mixins(Foo)
class MyClass {}

let obj = new MyClass();
obj.foo() // &quot;foo&quot;
</code></pre>
<p>é€šè¿‡mixinsè¿™ä¸ªä¿®é¥°å™¨ï¼Œå®ç°äº†åœ¨MyClassç±»ä¸Šé¢â€œæ··å…¥â€Fooå¯¹è±¡çš„<code>foo</code>æ–¹æ³•ã€‚</p>
<p>ä¸è¿‡ï¼Œä¸Šé¢çš„æ–¹æ³•ä¼šæ”¹å†™<code>MyClass</code>ç±»çš„<code>prototype</code>å¯¹è±¡ï¼Œå¦‚æœä¸å–œæ¬¢è¿™ä¸€ç‚¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç±»çš„ç»§æ‰¿å®ç°mixinã€‚</p>
<pre><code class="javascript">class MyClass extends MyBaseClass {
  /* ... */
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>MyClass</code>ç»§æ‰¿äº†<code>MyBaseClass</code>ã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨<code>MyClass</code>é‡Œé¢â€œæ··å…¥â€ä¸€ä¸ª<code>foo</code>æ–¹æ³•ï¼Œä¸€ä¸ªåŠæ³•æ˜¯åœ¨<code>MyClass</code>å’Œ<code>MyBaseClass</code>ä¹‹é—´æ’å…¥ä¸€ä¸ªæ··å…¥ç±»ï¼Œè¿™ä¸ªç±»å…·æœ‰<code>foo</code>æ–¹æ³•ï¼Œå¹¶ä¸”ç»§æ‰¿äº†<code>MyBaseClass</code>çš„æ‰€æœ‰æ–¹æ³•ï¼Œç„¶å<code>MyClass</code>å†ç»§æ‰¿è¿™ä¸ªç±»ã€‚</p>
<pre><code class="javascript">let MyMixin = (superclass) =&gt; class extends superclass {
  foo() {
    console.log(&#39;foo from MyMixin&#39;);
  }
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>MyMixin</code>æ˜¯ä¸€ä¸ªæ··å…¥ç±»ç”Ÿæˆå™¨ï¼Œæ¥å—<code>superclass</code>ä½œä¸ºå‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ªç»§æ‰¿<code>superclass</code>çš„å­ç±»ï¼Œè¯¥å­ç±»åŒ…å«ä¸€ä¸ª<code>foo</code>æ–¹æ³•ã€‚</p>
<p>æ¥ç€ï¼Œç›®æ ‡ç±»å†å»ç»§æ‰¿è¿™ä¸ªæ··å…¥ç±»ï¼Œå°±è¾¾åˆ°äº†â€œæ··å…¥â€<code>foo</code>æ–¹æ³•çš„ç›®çš„ã€‚</p>
<pre><code class="javascript">class MyClass extends MyMixin(MyBaseClass) {
  /* ... */
}

let c = new MyClass();
c.foo(); // &quot;foo from MyMixin&quot;
</code></pre>
<p>å¦‚æœéœ€è¦â€œæ··å…¥â€å¤šä¸ªæ–¹æ³•ï¼Œå°±ç”Ÿæˆå¤šä¸ªæ··å…¥ç±»ã€‚</p>
<pre><code class="javascript">class MyClass extends Mixin1(Mixin2(MyBaseClass)) {
  /* ... */
}
</code></pre>
<p>è¿™ç§å†™æ³•çš„ä¸€ä¸ªå¥½å¤„ï¼Œæ˜¯å¯ä»¥è°ƒç”¨<code>super</code>ï¼Œå› æ­¤å¯ä»¥é¿å…åœ¨â€œæ··å…¥â€è¿‡ç¨‹ä¸­è¦†ç›–çˆ¶ç±»çš„åŒåæ–¹æ³•ã€‚</p>
<pre><code class="javascript">let Mixin1 = (superclass) =&gt; class extends superclass {
  foo() {
    console.log(&#39;foo from Mixin1&#39;);
    if (super.foo) super.foo();
  }
};

let Mixin2 = (superclass) =&gt; class extends superclass {
  foo() {
    console.log(&#39;foo from Mixin2&#39;);
    if (super.foo) super.foo();
  }
};

class S {
  foo() {
    console.log(&#39;foo from S&#39;);
  }
}

class C extends Mixin1(Mixin2(S)) {
  foo() {
    console.log(&#39;foo from C&#39;);
    super.foo();
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¯ä¸€æ¬¡<code>æ··å…¥</code>å‘ç”Ÿæ—¶ï¼Œéƒ½è°ƒç”¨äº†çˆ¶ç±»çš„<code>super.foo</code>æ–¹æ³•ï¼Œå¯¼è‡´çˆ¶ç±»çš„åŒåæ–¹æ³•æ²¡æœ‰è¢«è¦†ç›–ï¼Œè¡Œä¸ºè¢«ä¿ç•™äº†ä¸‹æ¥ã€‚</p>
<pre><code class="javascript">new C().foo()
// foo from C
// foo from Mixin1
// foo from Mixin2
// foo from S
</code></pre>
<h2 id="Trait"><a href="#Trait" class="headerlink" title="Trait"></a>Trait</h2><p>Traitä¹Ÿæ˜¯ä¸€ç§ä¿®é¥°å™¨ï¼Œæ•ˆæœä¸Mixinç±»ä¼¼ï¼Œä½†æ˜¯æä¾›æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚é˜²æ­¢åŒåæ–¹æ³•çš„å†²çªã€æ’é™¤æ··å…¥æŸäº›æ–¹æ³•ã€ä¸ºæ··å…¥çš„æ–¹æ³•èµ·åˆ«åç­‰ç­‰ã€‚</p>
<p>ä¸‹é¢é‡‡ç”¨<a href="https://github.com/CocktailJS/traits-decorator" target="_blank" rel="external">traits-decorator</a>è¿™ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—ä½œä¸ºä¾‹å­ã€‚è¿™ä¸ªæ¨¡å—æä¾›çš„traitsä¿®é¥°å™¨ï¼Œä¸ä»…å¯ä»¥æ¥å—å¯¹è±¡ï¼Œè¿˜å¯ä»¥æ¥å—ES6ç±»ä½œä¸ºå‚æ•°ã€‚</p>
<pre><code class="javascript">import { traits } from &#39;traits-decorator&#39;;

class TFoo {
  foo() { console.log(&#39;foo&#39;) }
}

const TBar = {
  bar() { console.log(&#39;bar&#39;) }
};

@traits(TFoo, TBar)
class MyClass { }

let obj = new MyClass();
obj.foo() // foo
obj.bar() // bar
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œé€šè¿‡traitsä¿®é¥°å™¨ï¼Œåœ¨<code>MyClass</code>ç±»ä¸Šé¢â€œæ··å…¥â€äº†<code>TFoo</code>ç±»çš„<code>foo</code>æ–¹æ³•å’Œ<code>TBar</code>å¯¹è±¡çš„<code>bar</code>æ–¹æ³•ã€‚</p>
<p>Traitä¸å…è®¸â€œæ··å…¥â€åŒåæ–¹æ³•ã€‚</p>
<pre><code class="javascript">import { traits } from &#39;traits-decorator&#39;;

class TFoo {
  foo() { console.log(&#39;foo&#39;) }
}

const TBar = {
  bar() { console.log(&#39;bar&#39;) },
  foo() { console.log(&#39;foo&#39;) }
};

@traits(TFoo, TBar)
class MyClass { }
// æŠ¥é”™
// throw new Error(&#39;Method named: &#39; + methodName + &#39; is defined twice.&#39;);
//        ^
// Error: Method named: foo is defined twice.
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒTFooå’ŒTBaréƒ½æœ‰fooæ–¹æ³•ï¼Œç»“æœtraitsä¿®é¥°å™¨æŠ¥é”™ã€‚</p>
<p>ä¸€ç§è§£å†³æ–¹æ³•æ˜¯æ’é™¤TBarçš„fooæ–¹æ³•ã€‚</p>
<pre><code class="javascript">import { traits, excludes } from &#39;traits-decorator&#39;;

class TFoo {
  foo() { console.log(&#39;foo&#39;) }
}

const TBar = {
  bar() { console.log(&#39;bar&#39;) },
  foo() { console.log(&#39;foo&#39;) }
};

@traits(TFoo, TBar::excludes(&#39;foo&#39;))
class MyClass { }

let obj = new MyClass();
obj.foo() // foo
obj.bar() // bar
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨ç»‘å®šè¿ç®—ç¬¦ï¼ˆ::ï¼‰åœ¨TBarä¸Šæ’é™¤fooæ–¹æ³•ï¼Œæ··å…¥æ—¶å°±ä¸ä¼šæŠ¥é”™äº†ã€‚</p>
<p>å¦ä¸€ç§æ–¹æ³•æ˜¯ä¸ºTBarçš„fooæ–¹æ³•èµ·ä¸€ä¸ªåˆ«åã€‚</p>
<pre><code class="javascript">import { traits, alias } from &#39;traits-decorator&#39;;

class TFoo {
  foo() { console.log(&#39;foo&#39;) }
}

const TBar = {
  bar() { console.log(&#39;bar&#39;) },
  foo() { console.log(&#39;foo&#39;) }
};

@traits(TFoo, TBar::alias({foo: &#39;aliasFoo&#39;}))
class MyClass { }

let obj = new MyClass();
obj.foo() // foo
obj.aliasFoo() // foo
obj.bar() // bar
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸ºTBarçš„fooæ–¹æ³•èµ·äº†åˆ«åaliasFooï¼Œäºæ˜¯MyClassä¹Ÿå¯ä»¥æ··å…¥TBarçš„fooæ–¹æ³•äº†ã€‚</p>
<p>aliaså’Œexcludesæ–¹æ³•ï¼Œå¯ä»¥ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚</p>
<pre><code class="javascript">@traits(TExample::excludes(&#39;foo&#39;,&#39;bar&#39;)::alias({baz:&#39;exampleBaz&#39;}))
class MyClass {}
</code></pre>
<p>ä¸Šé¢ä»£ç æ’é™¤äº†TExampleçš„fooæ–¹æ³•å’Œbaræ–¹æ³•ï¼Œä¸ºbazæ–¹æ³•èµ·äº†åˆ«åexampleBazã€‚</p>
<p>asæ–¹æ³•åˆ™ä¸ºä¸Šé¢çš„ä»£ç æä¾›äº†å¦ä¸€ç§å†™æ³•ã€‚</p>
<pre><code class="javascript">@traits(TExample::as({excludes:[&#39;foo&#39;, &#39;bar&#39;], alias: {baz: &#39;exampleBaz&#39;}}))
class MyClass {}
</code></pre>
<h2 id="Babelè½¬ç å™¨çš„æ”¯æŒ"><a href="#Babelè½¬ç å™¨çš„æ”¯æŒ" class="headerlink" title="Babelè½¬ç å™¨çš„æ”¯æŒ"></a>Babelè½¬ç å™¨çš„æ”¯æŒ</h2><p>ç›®å‰ï¼ŒBabelè½¬ç å™¨å·²ç»æ”¯æŒDecoratorã€‚</p>
<p>é¦–å…ˆï¼Œå®‰è£…<code>babel-core</code>å’Œ<code>babel-plugin-transform-decorators</code>ã€‚ç”±äºåè€…åŒ…æ‹¬åœ¨<code>babel-preset-stage-0</code>ä¹‹ä¸­ï¼Œæ‰€ä»¥æ”¹ä¸ºå®‰è£…<code>babel-preset-stage-0</code>äº¦å¯ã€‚</p>
<pre><code class="bash">$ npm install babel-core babel-plugin-transform-decorators
</code></pre>
<p>ç„¶åï¼Œè®¾ç½®é…ç½®æ–‡ä»¶<code>.babelrc</code>ã€‚</p>
<pre><code class="javascript">{
  &quot;plugins&quot;: [&quot;transform-decorators&quot;]
}
</code></pre>
<p>è¿™æ—¶ï¼ŒBabelå°±å¯ä»¥å¯¹Decoratorè½¬ç äº†ã€‚</p>
<p>è„šæœ¬ä¸­æ‰“å¼€çš„å‘½ä»¤å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">babel.transform(&quot;code&quot;, {plugins: [&quot;transform-decorators&quot;]})
</code></pre>
<p>Babelçš„å®˜æ–¹ç½‘ç«™æä¾›ä¸€ä¸ª<a href="https://babeljs.io/repl/" target="_blank" rel="external">åœ¨çº¿è½¬ç å™¨</a>ï¼Œåªè¦å‹¾é€‰Experimentalï¼Œå°±èƒ½æ”¯æŒDecoratorçš„åœ¨çº¿è½¬ç ã€‚</p>
<blockquote>
<p>æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ä¿®é¥°å™¨&quot;&gt;&lt;a href=&quot;#ä¿®é¥°å™¨&quot; class=&quot;headerlink&quot; title=&quot;ä¿®é¥°å™¨&quot;&gt;&lt;/a&gt;ä¿®é¥°å™¨&lt;/h1&gt;&lt;h2 id=&quot;ç±»çš„ä¿®é¥°&quot;&gt;&lt;a href=&quot;#ç±»çš„ä¿®é¥°&quot; class=&quot;headerlink&quot; title=&quot;ç±»çš„ä¿®é¥°&quot;&gt;&lt;/a&gt;ç±»çš„ä¿®
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Decorator" scheme="https://microzz.com/tags/Decorator/"/>
    
  </entry>
  
  <entry>
    <title>ES6ä¸­çš„Class</title>
    <link href="https://microzz.com/2017/01/16/class/"/>
    <id>https://microzz.com/2017/01/16/class/</id>
    <published>2017-01-16T08:40:45.000Z</published>
    <updated>2017-08-21T11:33:20.483Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h1><h2 id="ClassåŸºæœ¬è¯­æ³•"><a href="#ClassåŸºæœ¬è¯­æ³•" class="headerlink" title="ClassåŸºæœ¬è¯­æ³•"></a>ClassåŸºæœ¬è¯­æ³•</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>JavaScriptè¯­è¨€çš„ä¼ ç»Ÿæ–¹æ³•æ˜¯é€šè¿‡æ„é€ å‡½æ•°ï¼Œå®šä¹‰å¹¶ç”Ÿæˆæ–°å¯¹è±¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">function Point(x, y) {
  this.x = x;
  this.y = y;
}

Point.prototype.toString = function () {
  return &#39;(&#39; + this.x + &#39;, &#39; + this.y + &#39;)&#39;;
};

var p = new Point(1, 2);
</code></pre>
<p>ä¸Šé¢è¿™ç§å†™æ³•è·Ÿä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆæ¯”å¦‚C++å’ŒJavaï¼‰å·®å¼‚å¾ˆå¤§ï¼Œå¾ˆå®¹æ˜“è®©æ–°å­¦ä¹ è¿™é—¨è¯­è¨€çš„ç¨‹åºå‘˜æ„Ÿåˆ°å›°æƒ‘ã€‚</p>
<p>ES6æä¾›äº†æ›´æ¥è¿‘ä¼ ç»Ÿè¯­è¨€çš„å†™æ³•ï¼Œå¼•å…¥äº†Classï¼ˆç±»ï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œä½œä¸ºå¯¹è±¡çš„æ¨¡æ¿ã€‚é€šè¿‡<code>class</code>å…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ç±»ã€‚åŸºæœ¬ä¸Šï¼ŒES6çš„<code>class</code>å¯ä»¥çœ‹ä½œåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒçš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼ŒES5éƒ½å¯ä»¥åšåˆ°ï¼Œæ–°çš„<code>class</code>å†™æ³•åªæ˜¯è®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•è€Œå·²ã€‚ä¸Šé¢çš„ä»£ç ç”¨ES6çš„â€œç±»â€æ”¹å†™ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">//å®šä¹‰ç±»
class Point {
  constructor(x, y) {
    this.x = x;
    this.y = y;
  }

  toString() {
    return &#39;(&#39; + this.x + &#39;, &#39; + this.y + &#39;)&#39;;
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªâ€œç±»â€ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰ä¸€ä¸ª<code>constructor</code>æ–¹æ³•ï¼Œè¿™å°±æ˜¯æ„é€ æ–¹æ³•ï¼Œè€Œ<code>this</code>å…³é”®å­—åˆ™ä»£è¡¨å®ä¾‹å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒES5çš„æ„é€ å‡½æ•°<code>Point</code>ï¼Œå¯¹åº”ES6çš„<code>Point</code>ç±»çš„æ„é€ æ–¹æ³•ã€‚</p>
<p><code>Point</code>ç±»é™¤äº†æ„é€ æ–¹æ³•ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ª<code>toString</code>æ–¹æ³•ã€‚æ³¨æ„ï¼Œå®šä¹‰â€œç±»â€çš„æ–¹æ³•çš„æ—¶å€™ï¼Œå‰é¢ä¸éœ€è¦åŠ ä¸Š<code>function</code>è¿™ä¸ªå…³é”®å­—ï¼Œç›´æ¥æŠŠå‡½æ•°å®šä¹‰æ”¾è¿›å»äº†å°±å¯ä»¥äº†ã€‚å¦å¤–ï¼Œæ–¹æ³•ä¹‹é—´ä¸éœ€è¦é€—å·åˆ†éš”ï¼ŒåŠ äº†ä¼šæŠ¥é”™ã€‚</p>
<p>ES6çš„ç±»ï¼Œå®Œå…¨å¯ä»¥çœ‹ä½œæ„é€ å‡½æ•°çš„å¦ä¸€ç§å†™æ³•ã€‚</p>
<pre><code class="javascript">class Point {
  // ...
}

typeof Point // &quot;function&quot;
Point === Point.prototype.constructor // true
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨æ˜ï¼Œç±»çš„æ•°æ®ç±»å‹å°±æ˜¯å‡½æ•°ï¼Œç±»æœ¬èº«å°±æŒ‡å‘æ„é€ å‡½æ•°ã€‚</p>
<p>ä½¿ç”¨çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ç›´æ¥å¯¹ç±»ä½¿ç”¨<code>new</code>å‘½ä»¤ï¼Œè·Ÿæ„é€ å‡½æ•°çš„ç”¨æ³•å®Œå…¨ä¸€è‡´ã€‚</p>
<pre><code class="javascript">class Bar {
  doStuff() {
    console.log(&#39;stuff&#39;);
  }
}

var b = new Bar();
b.doStuff() // &quot;stuff&quot;
</code></pre>
<p>æ„é€ å‡½æ•°çš„<code>prototype</code>å±æ€§ï¼Œåœ¨ES6çš„â€œç±»â€ä¸Šé¢ç»§ç»­å­˜åœ¨ã€‚äº‹å®ä¸Šï¼Œç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨ç±»çš„<code>prototype</code>å±æ€§ä¸Šé¢ã€‚</p>
<pre><code class="javascript">class Point {
  constructor(){
    // ...
  }

  toString(){
    // ...
  }

  toValue(){
    // ...
  }
}

// ç­‰åŒäº

Point.prototype = {
  toString(){},
  toValue(){}
};
</code></pre>
<p>åœ¨ç±»çš„å®ä¾‹ä¸Šé¢è°ƒç”¨æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯è°ƒç”¨åŸå‹ä¸Šçš„æ–¹æ³•ã€‚</p>
<pre><code class="javascript">class B {}
let b = new B();

b.constructor === B.prototype.constructor // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>b</code>æ˜¯Bç±»çš„å®ä¾‹ï¼Œå®ƒçš„<code>constructor</code>æ–¹æ³•å°±æ˜¯Bç±»åŸå‹çš„<code>constructor</code>æ–¹æ³•ã€‚</p>
<p>ç”±äºç±»çš„æ–¹æ³•éƒ½å®šä¹‰åœ¨<code>prototype</code>å¯¹è±¡ä¸Šé¢ï¼Œæ‰€ä»¥ç±»çš„æ–°æ–¹æ³•å¯ä»¥æ·»åŠ åœ¨<code>prototype</code>å¯¹è±¡ä¸Šé¢ã€‚<code>Object.assign</code>æ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¸€æ¬¡å‘ç±»æ·»åŠ å¤šä¸ªæ–¹æ³•ã€‚</p>
<pre><code class="javascript">class Point {
  constructor(){
    // ...
  }
}

Object.assign(Point.prototype, {
  toString(){},
  toValue(){}
});
</code></pre>
<p><code>prototype</code>å¯¹è±¡çš„<code>constructor</code>å±æ€§ï¼Œç›´æ¥æŒ‡å‘â€œç±»â€çš„æœ¬èº«ï¼Œè¿™ä¸ES5çš„è¡Œä¸ºæ˜¯ä¸€è‡´çš„ã€‚</p>
<pre><code class="javascript">Point.prototype.constructor === Point // true
</code></pre>
<p>å¦å¤–ï¼Œç±»çš„å†…éƒ¨æ‰€æœ‰å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½æ˜¯ä¸å¯æšä¸¾çš„ï¼ˆnon-enumerableï¼‰ã€‚</p>
<pre><code class="javascript">class Point {
  constructor(x, y) {
    // ...
  }

  toString() {
    // ...
  }
}

Object.keys(Point.prototype)
// []
Object.getOwnPropertyNames(Point.prototype)
// [&quot;constructor&quot;,&quot;toString&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>toString</code>æ–¹æ³•æ˜¯<code>Point</code>ç±»å†…éƒ¨å®šä¹‰çš„æ–¹æ³•ï¼Œå®ƒæ˜¯ä¸å¯æšä¸¾çš„ã€‚è¿™ä¸€ç‚¹ä¸ES5çš„è¡Œä¸ºä¸ä¸€è‡´ã€‚</p>
<pre><code class="javascript">var Point = function (x, y) {
  // ...
};

Point.prototype.toString = function() {
  // ...
};

Object.keys(Point.prototype)
// [&quot;toString&quot;]
Object.getOwnPropertyNames(Point.prototype)
// [&quot;constructor&quot;,&quot;toString&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç é‡‡ç”¨ES5çš„å†™æ³•ï¼Œ<code>toString</code>æ–¹æ³•å°±æ˜¯å¯æšä¸¾çš„ã€‚</p>
<p>ç±»çš„å±æ€§åï¼Œå¯ä»¥é‡‡ç”¨è¡¨è¾¾å¼ã€‚</p>
<pre><code class="javascript">let methodName = &quot;getArea&quot;;
class Square{
  constructor(length) {
    // ...
  }

  [methodName]() {
    // ...
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Square</code>ç±»çš„æ–¹æ³•å<code>getArea</code>ï¼Œæ˜¯ä»è¡¨è¾¾å¼å¾—åˆ°çš„ã€‚</p>
<h3 id="constructoræ–¹æ³•"><a href="#constructoræ–¹æ³•" class="headerlink" title="constructoræ–¹æ³•"></a>constructoræ–¹æ³•</h3><p><code>constructor</code>æ–¹æ³•æ˜¯ç±»çš„é»˜è®¤æ–¹æ³•ï¼Œé€šè¿‡<code>new</code>å‘½ä»¤ç”Ÿæˆå¯¹è±¡å®ä¾‹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•ã€‚ä¸€ä¸ªç±»å¿…é¡»æœ‰<code>constructor</code>æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä¸€ä¸ªç©ºçš„<code>constructor</code>æ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ã€‚</p>
<pre><code class="javascript">constructor() {}
</code></pre>
<p><code>constructor</code>æ–¹æ³•é»˜è®¤è¿”å›å®ä¾‹å¯¹è±¡ï¼ˆå³<code>this</code>ï¼‰ï¼Œå®Œå…¨å¯ä»¥æŒ‡å®šè¿”å›å¦å¤–ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<pre><code class="javascript">class Foo {
  constructor() {
    return Object.create(null);
  }
}

new Foo() instanceof Foo
// false
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>constructor</code>å‡½æ•°è¿”å›ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ï¼Œç»“æœå¯¼è‡´å®ä¾‹å¯¹è±¡ä¸æ˜¯<code>Foo</code>ç±»çš„å®ä¾‹ã€‚</p>
<p>ç±»çš„æ„é€ å‡½æ•°ï¼Œä¸ä½¿ç”¨<code>new</code>æ˜¯æ²¡æ³•è°ƒç”¨çš„ï¼Œä¼šæŠ¥é”™ã€‚è¿™æ˜¯å®ƒè·Ÿæ™®é€šæ„é€ å‡½æ•°çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«ï¼Œåè€…ä¸ç”¨<code>new</code>ä¹Ÿå¯ä»¥æ‰§è¡Œã€‚</p>
<pre><code class="javascript">class Foo {
  constructor() {
    return Object.create(null);
  }
}

Foo()
// TypeError: Class constructor Foo cannot be invoked without &#39;new&#39;
</code></pre>
<h3 id="ç±»çš„å®ä¾‹å¯¹è±¡"><a href="#ç±»çš„å®ä¾‹å¯¹è±¡" class="headerlink" title="ç±»çš„å®ä¾‹å¯¹è±¡"></a>ç±»çš„å®ä¾‹å¯¹è±¡</h3><p>ç”Ÿæˆç±»çš„å®ä¾‹å¯¹è±¡çš„å†™æ³•ï¼Œä¸ES5å®Œå…¨ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä½¿ç”¨<code>new</code>å‘½ä»¤ã€‚å¦‚æœå¿˜è®°åŠ ä¸Š<code>new</code>ï¼Œåƒå‡½æ•°é‚£æ ·è°ƒç”¨<code>Class</code>ï¼Œå°†ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
var point = Point(2, 3);

// æ­£ç¡®
var point = new Point(2, 3);
</code></pre>
<p>ä¸ES5ä¸€æ ·ï¼Œå®ä¾‹çš„å±æ€§é™¤éæ˜¾å¼å®šä¹‰åœ¨å…¶æœ¬èº«ï¼ˆå³å®šä¹‰åœ¨<code>this</code>å¯¹è±¡ä¸Šï¼‰ï¼Œå¦åˆ™éƒ½æ˜¯å®šä¹‰åœ¨åŸå‹ä¸Šï¼ˆå³å®šä¹‰åœ¨<code>class</code>ä¸Šï¼‰ã€‚</p>
<pre><code class="javascript">//å®šä¹‰ç±»
class Point {

  constructor(x, y) {
    this.x = x;
    this.y = y;
  }

  toString() {
    return &#39;(&#39; + this.x + &#39;, &#39; + this.y + &#39;)&#39;;
  }

}

var point = new Point(2, 3);

point.toString() // (2, 3)

point.hasOwnProperty(&#39;x&#39;) // true
point.hasOwnProperty(&#39;y&#39;) // true
point.hasOwnProperty(&#39;toString&#39;) // false
point.__proto__.hasOwnProperty(&#39;toString&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>x</code>å’Œ<code>y</code>éƒ½æ˜¯å®ä¾‹å¯¹è±¡<code>point</code>è‡ªèº«çš„å±æ€§ï¼ˆå› ä¸ºå®šä¹‰åœ¨<code>this</code>å˜é‡ä¸Šï¼‰ï¼Œæ‰€ä»¥<code>hasOwnProperty</code>æ–¹æ³•è¿”å›<code>true</code>ï¼Œè€Œ<code>toString</code>æ˜¯åŸå‹å¯¹è±¡çš„å±æ€§ï¼ˆå› ä¸ºå®šä¹‰åœ¨<code>Point</code>ç±»ä¸Šï¼‰ï¼Œæ‰€ä»¥<code>hasOwnProperty</code>æ–¹æ³•è¿”å›<code>false</code>ã€‚è¿™äº›éƒ½ä¸ES5çš„è¡Œä¸ºä¿æŒä¸€è‡´ã€‚</p>
<p>ä¸ES5ä¸€æ ·ï¼Œç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä¸ªåŸå‹å¯¹è±¡ã€‚</p>
<pre><code class="javascript">var p1 = new Point(2,3);
var p2 = new Point(3,2);

p1.__proto__ === p2.__proto__
//true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p1</code>å’Œ<code>p2</code>éƒ½æ˜¯Pointçš„å®ä¾‹ï¼Œå®ƒä»¬çš„åŸå‹éƒ½æ˜¯Point.prototypeï¼Œæ‰€ä»¥<code>__proto__</code>å±æ€§æ˜¯ç›¸ç­‰çš„ã€‚</p>
<p>è¿™ä¹Ÿæ„å‘³ç€ï¼Œå¯ä»¥é€šè¿‡å®ä¾‹çš„<code>__proto__</code>å±æ€§ä¸ºClassæ·»åŠ æ–¹æ³•ã€‚</p>
<pre><code class="javascript">var p1 = new Point(2,3);
var p2 = new Point(3,2);

p1.__proto__.printName = function () { return &#39;Oops&#39; };

p1.printName() // &quot;Oops&quot;
p2.printName() // &quot;Oops&quot;

var p3 = new Point(4,2);
p3.printName() // &quot;Oops&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç åœ¨<code>p1</code>çš„åŸå‹ä¸Šæ·»åŠ äº†ä¸€ä¸ª<code>printName</code>æ–¹æ³•ï¼Œç”±äº<code>p1</code>çš„åŸå‹å°±æ˜¯<code>p2</code>çš„åŸå‹ï¼Œå› æ­¤<code>p2</code>ä¹Ÿå¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚è€Œä¸”ï¼Œæ­¤åæ–°å»ºçš„å®ä¾‹<code>p3</code>ä¹Ÿå¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚è¿™æ„å‘³ç€ï¼Œä½¿ç”¨å®ä¾‹çš„<code>__proto__</code>å±æ€§æ”¹å†™åŸå‹ï¼Œå¿…é¡»ç›¸å½“è°¨æ…ï¼Œä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºè¿™ä¼šæ”¹å˜Classçš„åŸå§‹å®šä¹‰ï¼Œå½±å“åˆ°æ‰€æœ‰å®ä¾‹ã€‚</p>
<h3 id="ä¸å­˜åœ¨å˜é‡æå‡"><a href="#ä¸å­˜åœ¨å˜é‡æå‡" class="headerlink" title="ä¸å­˜åœ¨å˜é‡æå‡"></a>ä¸å­˜åœ¨å˜é‡æå‡</h3><p>Classä¸å­˜åœ¨å˜é‡æå‡ï¼ˆhoistï¼‰ï¼Œè¿™ä¸€ç‚¹ä¸ES5å®Œå…¨ä¸åŒã€‚</p>
<pre><code class="javascript">new Foo(); // ReferenceError
class Foo {}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Foo</code>ç±»ä½¿ç”¨åœ¨å‰ï¼Œå®šä¹‰åœ¨åï¼Œè¿™æ ·ä¼šæŠ¥é”™ï¼Œå› ä¸ºES6ä¸ä¼šæŠŠç±»çš„å£°æ˜æå‡åˆ°ä»£ç å¤´éƒ¨ã€‚è¿™ç§è§„å®šçš„åŸå› ä¸ä¸‹æ–‡è¦æåˆ°çš„ç»§æ‰¿æœ‰å…³ï¼Œå¿…é¡»ä¿è¯å­ç±»åœ¨çˆ¶ç±»ä¹‹åå®šä¹‰ã€‚</p>
<pre><code class="javascript">{
  let Foo = class {};
  class Bar extends Foo {
  }
}
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸º<code>Bar</code>ç»§æ‰¿<code>Foo</code>çš„æ—¶å€™ï¼Œ<code>Foo</code>å·²ç»æœ‰å®šä¹‰äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœå­˜åœ¨<code>class</code>çš„æå‡ï¼Œä¸Šé¢ä»£ç å°±ä¼šæŠ¥é”™ï¼Œå› ä¸º<code>class</code>ä¼šè¢«æå‡åˆ°ä»£ç å¤´éƒ¨ï¼Œè€Œ<code>let</code>å‘½ä»¤æ˜¯ä¸æå‡çš„ï¼Œæ‰€ä»¥å¯¼è‡´<code>Bar</code>ç»§æ‰¿<code>Foo</code>çš„æ—¶å€™ï¼Œ<code>Foo</code>è¿˜æ²¡æœ‰å®šä¹‰ã€‚</p>
<h3 id="Classè¡¨è¾¾å¼"><a href="#Classè¡¨è¾¾å¼" class="headerlink" title="Classè¡¨è¾¾å¼"></a>Classè¡¨è¾¾å¼</h3><p>ä¸å‡½æ•°ä¸€æ ·ï¼Œç±»ä¹Ÿå¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼çš„å½¢å¼å®šä¹‰ã€‚</p>
<pre><code class="javascript">const MyClass = class Me {
  getClassName() {
    return Me.name;
  }
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨è¡¨è¾¾å¼å®šä¹‰äº†ä¸€ä¸ªç±»ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªç±»çš„åå­—æ˜¯<code>MyClass</code>è€Œä¸æ˜¯<code>Me</code>ï¼Œ<code>Me</code>åªåœ¨Classçš„å†…éƒ¨ä»£ç å¯ç”¨ï¼ŒæŒ‡ä»£å½“å‰ç±»ã€‚</p>
<pre><code class="javascript">let inst = new MyClass();
inst.getClassName() // Me
Me.name // ReferenceError: Me is not defined
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œ<code>Me</code>åªåœ¨Classå†…éƒ¨æœ‰å®šä¹‰ã€‚</p>
<p>å¦‚æœç±»çš„å†…éƒ¨æ²¡ç”¨åˆ°çš„è¯ï¼Œå¯ä»¥çœç•¥<code>Me</code>ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼ã€‚</p>
<pre><code class="javascript">const MyClass = class { /* ... */ };
</code></pre>
<p>é‡‡ç”¨Classè¡¨è¾¾å¼ï¼Œå¯ä»¥å†™å‡ºç«‹å³æ‰§è¡Œçš„Classã€‚</p>
<pre><code class="javascript">let person = new class {
  constructor(name) {
    this.name = name;
  }

  sayName() {
    console.log(this.name);
  }
}(&#39;å¼ ä¸‰&#39;);

person.sayName(); // &quot;å¼ ä¸‰&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>person</code>æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œçš„ç±»çš„å®ä¾‹ã€‚</p>
<h3 id="ç§æœ‰æ–¹æ³•"><a href="#ç§æœ‰æ–¹æ³•" class="headerlink" title="ç§æœ‰æ–¹æ³•"></a>ç§æœ‰æ–¹æ³•</h3><p>ç§æœ‰æ–¹æ³•æ˜¯å¸¸è§éœ€æ±‚ï¼Œä½†ES6ä¸æä¾›ï¼Œåªèƒ½é€šè¿‡å˜é€šæ–¹æ³•æ¨¡æ‹Ÿå®ç°ã€‚</p>
<p>ä¸€ç§åšæ³•æ˜¯åœ¨å‘½åä¸ŠåŠ ä»¥åŒºåˆ«ã€‚</p>
<pre><code class="javascript">class Widget {

  // å…¬æœ‰æ–¹æ³•
  foo (baz) {
    this._bar(baz);
  }

  // ç§æœ‰æ–¹æ³•
  _bar(baz) {
    return this.snaf = baz;
  }

  // ...
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>_bar</code>æ–¹æ³•å‰é¢çš„ä¸‹åˆ’çº¿ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåªé™äºå†…éƒ¨ä½¿ç”¨çš„ç§æœ‰æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œè¿™ç§å‘½åæ˜¯ä¸ä¿é™©çš„ï¼Œåœ¨ç±»çš„å¤–éƒ¨ï¼Œè¿˜æ˜¯å¯ä»¥è°ƒç”¨åˆ°è¿™ä¸ªæ–¹æ³•ã€‚</p>
<p>å¦ä¸€ç§æ–¹æ³•å°±æ˜¯ç´¢æ€§å°†ç§æœ‰æ–¹æ³•ç§»å‡ºæ¨¡å—ï¼Œå› ä¸ºæ¨¡å—å†…éƒ¨çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯å¯¹å¤–å¯è§çš„ã€‚</p>
<pre><code class="javascript">class Widget {
  foo (baz) {
    bar.call(this, baz);
  }

  // ...
}

function bar(baz) {
  return this.snaf = baz;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>foo</code>æ˜¯å…¬æœ‰æ–¹æ³•ï¼Œå†…éƒ¨è°ƒç”¨äº†<code>bar.call(this, baz)</code>ã€‚è¿™ä½¿å¾—<code>bar</code>å®é™…ä¸Šæˆä¸ºäº†å½“å‰æ¨¡å—çš„ç§æœ‰æ–¹æ³•ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯åˆ©ç”¨<code>Symbol</code>å€¼çš„å”¯ä¸€æ€§ï¼Œå°†ç§æœ‰æ–¹æ³•çš„åå­—å‘½åä¸ºä¸€ä¸ª<code>Symbol</code>å€¼ã€‚</p>
<pre><code class="javascript">const bar = Symbol(&#39;bar&#39;);
const snaf = Symbol(&#39;snaf&#39;);

export default class myClass{

  // å…¬æœ‰æ–¹æ³•
  foo(baz) {
    this[bar](baz);
  }

  // ç§æœ‰æ–¹æ³•
  [bar](baz) {
    return this[snaf] = baz;
  }

  // ...
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>bar</code>å’Œ<code>snaf</code>éƒ½æ˜¯<code>Symbol</code>å€¼ï¼Œå¯¼è‡´ç¬¬ä¸‰æ–¹æ— æ³•è·å–åˆ°å®ƒä»¬ï¼Œå› æ­¤è¾¾åˆ°äº†ç§æœ‰æ–¹æ³•å’Œç§æœ‰å±æ€§çš„æ•ˆæœã€‚</p>
<h3 id="thisçš„æŒ‡å‘"><a href="#thisçš„æŒ‡å‘" class="headerlink" title="thisçš„æŒ‡å‘"></a>thisçš„æŒ‡å‘</h3><p>ç±»çš„æ–¹æ³•å†…éƒ¨å¦‚æœå«æœ‰<code>this</code>ï¼Œå®ƒé»˜è®¤æŒ‡å‘ç±»çš„å®ä¾‹ã€‚ä½†æ˜¯ï¼Œå¿…é¡»éå¸¸å°å¿ƒï¼Œä¸€æ—¦å•ç‹¬ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå¾ˆå¯èƒ½æŠ¥é”™ã€‚</p>
<pre><code class="javascript">class Logger {
  printName(name = &#39;there&#39;) {
    this.print(`Hello ${name}`);
  }

  print(text) {
    console.log(text);
  }
}

const logger = new Logger();
const { printName } = logger;
printName(); // TypeError: Cannot read property &#39;print&#39; of undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>printName</code>æ–¹æ³•ä¸­çš„<code>this</code>ï¼Œé»˜è®¤æŒ‡å‘<code>Logger</code>ç±»çš„å®ä¾‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœå°†è¿™ä¸ªæ–¹æ³•æå–å‡ºæ¥å•ç‹¬ä½¿ç”¨ï¼Œ<code>this</code>ä¼šæŒ‡å‘è¯¥æ–¹æ³•è¿è¡Œæ—¶æ‰€åœ¨çš„ç¯å¢ƒï¼Œå› ä¸ºæ‰¾ä¸åˆ°<code>print</code>æ–¹æ³•è€Œå¯¼è‡´æŠ¥é”™ã€‚</p>
<p>ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­ç»‘å®š<code>this</code>ï¼Œè¿™æ ·å°±ä¸ä¼šæ‰¾ä¸åˆ°<code>print</code>æ–¹æ³•äº†ã€‚</p>
<pre><code class="javascript">class Logger {
  constructor() {
    this.printName = this.printName.bind(this);
  }

  // ...
}
</code></pre>
<p>å¦ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚</p>
<pre><code class="javascript">class Logger {
  constructor() {
    this.printName = (name = &#39;there&#39;) =&gt; {
      this.print(`Hello ${name}`);
    };
  }

  // ...
}
</code></pre>
<p>è¿˜æœ‰ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨<code>Proxy</code>ï¼Œè·å–æ–¹æ³•çš„æ—¶å€™ï¼Œè‡ªåŠ¨ç»‘å®š<code>this</code>ã€‚</p>
<pre><code class="javascript">function selfish (target) {
  const cache = new WeakMap();
  const handler = {
    get (target, key) {
      const value = Reflect.get(target, key);
      if (typeof value !== &#39;function&#39;) {
        return value;
      }
      if (!cache.has(value)) {
        cache.set(value, value.bind(target));
      }
      return cache.get(value);
    }
  };
  const proxy = new Proxy(target, handler);
  return proxy;
}

const logger = selfish(new Logger());
</code></pre>
<h3 id="ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼</h3><p>ç±»å’Œæ¨¡å—çš„å†…éƒ¨ï¼Œé»˜è®¤å°±æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨<code>use strict</code>æŒ‡å®šè¿è¡Œæ¨¡å¼ã€‚åªè¦ä½ çš„ä»£ç å†™åœ¨ç±»æˆ–æ¨¡å—ä¹‹ä¸­ï¼Œå°±åªæœ‰ä¸¥æ ¼æ¨¡å¼å¯ç”¨ã€‚</p>
<p>è€ƒè™‘åˆ°æœªæ¥æ‰€æœ‰çš„ä»£ç ï¼Œå…¶å®éƒ½æ˜¯è¿è¡Œåœ¨æ¨¡å—ä¹‹ä¸­ï¼Œæ‰€ä»¥ES6å®é™…ä¸ŠæŠŠæ•´ä¸ªè¯­è¨€å‡çº§åˆ°äº†ä¸¥æ ¼æ¨¡å¼ã€‚</p>
<h3 id="nameå±æ€§"><a href="#nameå±æ€§" class="headerlink" title="nameå±æ€§"></a>nameå±æ€§</h3><p>ç”±äºæœ¬è´¨ä¸Šï¼ŒES6çš„ç±»åªæ˜¯ES5çš„æ„é€ å‡½æ•°çš„ä¸€å±‚åŒ…è£…ï¼Œæ‰€ä»¥å‡½æ•°çš„è®¸å¤šç‰¹æ€§éƒ½è¢«<code>Class</code>ç»§æ‰¿ï¼ŒåŒ…æ‹¬<code>name</code>å±æ€§ã€‚</p>
<pre><code class="javascript">class Point {}
Point.name // &quot;Point&quot;
</code></pre>
<p><code>name</code>å±æ€§æ€»æ˜¯è¿”å›ç´§è·Ÿåœ¨<code>class</code>å…³é”®å­—åé¢çš„ç±»åã€‚</p>
<h2 id="Classçš„ç»§æ‰¿"><a href="#Classçš„ç»§æ‰¿" class="headerlink" title="Classçš„ç»§æ‰¿"></a>Classçš„ç»§æ‰¿</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>Classä¹‹é—´å¯ä»¥é€šè¿‡<code>extends</code>å…³é”®å­—å®ç°ç»§æ‰¿ï¼Œè¿™æ¯”ES5çš„é€šè¿‡ä¿®æ”¹åŸå‹é“¾å®ç°ç»§æ‰¿ï¼Œè¦æ¸…æ™°å’Œæ–¹ä¾¿å¾ˆå¤šã€‚</p>
<pre><code class="javascript">class ColorPoint extends Point {}
</code></pre>
<p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ª<code>ColorPoint</code>ç±»ï¼Œè¯¥ç±»é€šè¿‡<code>extends</code>å…³é”®å­—ï¼Œç»§æ‰¿äº†<code>Point</code>ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ä½†æ˜¯ç”±äºæ²¡æœ‰éƒ¨ç½²ä»»ä½•ä»£ç ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªç±»å®Œå…¨ä¸€æ ·ï¼Œç­‰äºå¤åˆ¶äº†ä¸€ä¸ª<code>Point</code>ç±»ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬åœ¨<code>ColorPoint</code>å†…éƒ¨åŠ ä¸Šä»£ç ã€‚</p>
<pre><code class="javascript">class ColorPoint extends Point {
  constructor(x, y, color) {
    super(x, y); // è°ƒç”¨çˆ¶ç±»çš„constructor(x, y)
    this.color = color;
  }

  toString() {
    return this.color + &#39; &#39; + super.toString(); // è°ƒç”¨çˆ¶ç±»çš„toString()
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>constructor</code>æ–¹æ³•å’Œ<code>toString</code>æ–¹æ³•ä¹‹ä¸­ï¼Œéƒ½å‡ºç°äº†<code>super</code>å…³é”®å­—ï¼Œå®ƒåœ¨è¿™é‡Œè¡¨ç¤ºçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œç”¨æ¥æ–°å»ºçˆ¶ç±»çš„<code>this</code>å¯¹è±¡ã€‚</p>
<p>å­ç±»å¿…é¡»åœ¨<code>constructor</code>æ–¹æ³•ä¸­è°ƒç”¨<code>super</code>æ–¹æ³•ï¼Œå¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»æ²¡æœ‰è‡ªå·±çš„<code>this</code>å¯¹è±¡ï¼Œè€Œæ˜¯ç»§æ‰¿çˆ¶ç±»çš„<code>this</code>å¯¹è±¡ï¼Œç„¶åå¯¹å…¶è¿›è¡ŒåŠ å·¥ã€‚å¦‚æœä¸è°ƒç”¨<code>super</code>æ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ°<code>this</code>å¯¹è±¡ã€‚</p>
<pre><code class="javascript">class Point { /* ... */ }

class ColorPoint extends Point {
  constructor() {
  }
}

let cp = new ColorPoint(); // ReferenceError
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>ColorPoint</code>ç»§æ‰¿äº†çˆ¶ç±»<code>Point</code>ï¼Œä½†æ˜¯å®ƒçš„æ„é€ å‡½æ•°æ²¡æœ‰è°ƒç”¨<code>super</code>æ–¹æ³•ï¼Œå¯¼è‡´æ–°å»ºå®ä¾‹æ—¶æŠ¥é”™ã€‚</p>
<p>ES5çš„ç»§æ‰¿ï¼Œå®è´¨æ˜¯å…ˆåˆ›é€ å­ç±»çš„å®ä¾‹å¯¹è±¡<code>this</code>ï¼Œç„¶åå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ°<code>this</code>ä¸Šé¢ï¼ˆ<code>Parent.apply(this)</code>ï¼‰ã€‚ES6çš„ç»§æ‰¿æœºåˆ¶å®Œå…¨ä¸åŒï¼Œå®è´¨æ˜¯å…ˆåˆ›é€ çˆ¶ç±»çš„å®ä¾‹å¯¹è±¡<code>this</code>ï¼ˆæ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨<code>super</code>æ–¹æ³•ï¼‰ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®æ”¹<code>this</code>ã€‚</p>
<p>å¦‚æœå­ç±»æ²¡æœ‰å®šä¹‰<code>constructor</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ï¼Œä»£ç å¦‚ä¸‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡æœ‰æ²¡æœ‰æ˜¾å¼å®šä¹‰ï¼Œä»»ä½•ä¸€ä¸ªå­ç±»éƒ½æœ‰<code>constructor</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">constructor(...args) {
  super(...args);
}
</code></pre>
<p>å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œåœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œåªæœ‰è°ƒç”¨<code>super</code>ä¹‹åï¼Œæ‰å¯ä»¥ä½¿ç”¨<code>this</code>å…³é”®å­—ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»å®ä¾‹çš„æ„å»ºï¼Œæ˜¯åŸºäºå¯¹çˆ¶ç±»å®ä¾‹åŠ å·¥ï¼Œåªæœ‰<code>super</code>æ–¹æ³•æ‰èƒ½è¿”å›çˆ¶ç±»å®ä¾‹ã€‚</p>
<pre><code class="javascript">class Point {
  constructor(x, y) {
    this.x = x;
    this.y = y;
  }
}

class ColorPoint extends Point {
  constructor(x, y, color) {
    this.color = color; // ReferenceError
    super(x, y);
    this.color = color; // æ­£ç¡®
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»çš„<code>constructor</code>æ–¹æ³•æ²¡æœ‰è°ƒç”¨<code>super</code>ä¹‹å‰ï¼Œå°±ä½¿ç”¨<code>this</code>å…³é”®å­—ï¼Œç»“æœæŠ¥é”™ï¼Œè€Œæ”¾åœ¨<code>super</code>æ–¹æ³•ä¹‹åå°±æ˜¯æ­£ç¡®çš„ã€‚</p>
<p>ä¸‹é¢æ˜¯ç”Ÿæˆå­ç±»å®ä¾‹çš„ä»£ç ã€‚</p>
<pre><code class="javascript">let cp = new ColorPoint(25, 8, &#39;green&#39;);

cp instanceof ColorPoint // true
cp instanceof Point // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå®ä¾‹å¯¹è±¡<code>cp</code>åŒæ—¶æ˜¯<code>ColorPoint</code>å’Œ<code>Point</code>ä¸¤ä¸ªç±»çš„å®ä¾‹ï¼Œè¿™ä¸ES5çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚</p>
<h3 id="ç±»çš„prototypeå±æ€§å’Œ-proto-å±æ€§"><a href="#ç±»çš„prototypeå±æ€§å’Œ-proto-å±æ€§" class="headerlink" title="ç±»çš„prototypeå±æ€§å’Œ__proto__å±æ€§"></a>ç±»çš„prototypeå±æ€§å’Œ__proto__å±æ€§</h3><p>å¤§å¤šæ•°æµè§ˆå™¨çš„ES5å®ç°ä¹‹ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰<code>__proto__</code>å±æ€§ï¼ŒæŒ‡å‘å¯¹åº”çš„æ„é€ å‡½æ•°çš„prototypeå±æ€§ã€‚Classä½œä¸ºæ„é€ å‡½æ•°çš„è¯­æ³•ç³–ï¼ŒåŒæ—¶æœ‰prototypeå±æ€§å’Œ<code>__proto__</code>å±æ€§ï¼Œå› æ­¤åŒæ—¶å­˜åœ¨ä¸¤æ¡ç»§æ‰¿é“¾ã€‚</p>
<p>ï¼ˆ1ï¼‰å­ç±»çš„<code>__proto__</code>å±æ€§ï¼Œè¡¨ç¤ºæ„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»ã€‚</p>
<p>ï¼ˆ2ï¼‰å­ç±»<code>prototype</code>å±æ€§çš„<code>__proto__</code>å±æ€§ï¼Œè¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»çš„<code>prototype</code>å±æ€§ã€‚</p>
<pre><code class="javascript">class A {
}

class B extends A {
}

B.__proto__ === A // true
B.prototype.__proto__ === A.prototype // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»<code>B</code>çš„<code>__proto__</code>å±æ€§æŒ‡å‘çˆ¶ç±»<code>A</code>ï¼Œå­ç±»<code>B</code>çš„<code>prototype</code>å±æ€§çš„<code>__proto__</code>å±æ€§æŒ‡å‘çˆ¶ç±»<code>A</code>çš„<code>prototype</code>å±æ€§ã€‚</p>
<p>è¿™æ ·çš„ç»“æœæ˜¯å› ä¸ºï¼Œç±»çš„ç»§æ‰¿æ˜¯æŒ‰ç…§ä¸‹é¢çš„æ¨¡å¼å®ç°çš„ã€‚</p>
<pre><code class="javascript">class A {
}

class B {
}

// Bçš„å®ä¾‹ç»§æ‰¿Açš„å®ä¾‹
Object.setPrototypeOf(B.prototype, A.prototype);
const b = new B();

// Bçš„å®ä¾‹ç»§æ‰¿Açš„é™æ€å±æ€§
Object.setPrototypeOf(B, A);
const b = new B();
</code></pre>
<p>ã€Šå¯¹è±¡çš„æ‰©å±•ã€‹ä¸€ç« ç»™å‡ºè¿‡<code>Object.setPrototypeOf</code>æ–¹æ³•çš„å®ç°ã€‚</p>
<pre><code class="javascript">Object.setPrototypeOf = function (obj, proto) {
  obj.__proto__ = proto;
  return obj;
}
</code></pre>
<p>å› æ­¤ï¼Œå°±å¾—åˆ°äº†ä¸Šé¢çš„ç»“æœã€‚</p>
<pre><code class="javascript">Object.setPrototypeOf(B.prototype, A.prototype);
// ç­‰åŒäº
B.prototype.__proto__ = A.prototype;

Object.setPrototypeOf(B, A);
// ç­‰åŒäº
B.__proto__ = A;
</code></pre>
<p>è¿™ä¸¤æ¡ç»§æ‰¿é“¾ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼šä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå­ç±»ï¼ˆ<code>B</code>ï¼‰çš„åŸå‹ï¼ˆ<code>__proto__</code>å±æ€§ï¼‰æ˜¯çˆ¶ç±»ï¼ˆ<code>A</code>ï¼‰ï¼›ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå­ç±»ï¼ˆ<code>B</code>ï¼‰çš„åŸå‹ï¼ˆ<code>prototype</code>å±æ€§ï¼‰æ˜¯çˆ¶ç±»çš„å®ä¾‹ã€‚</p>
<pre><code class="javascript">Object.create(A.prototype);
// ç­‰åŒäº
B.prototype.__proto__ = A.prototype;
</code></pre>
<h3 id="Extends-çš„ç»§æ‰¿ç›®æ ‡"><a href="#Extends-çš„ç»§æ‰¿ç›®æ ‡" class="headerlink" title="Extends çš„ç»§æ‰¿ç›®æ ‡"></a>Extends çš„ç»§æ‰¿ç›®æ ‡</h3><p><code>extends</code>å…³é”®å­—åé¢å¯ä»¥è·Ÿå¤šç§ç±»å‹çš„å€¼ã€‚</p>
<pre><code class="javascript">class B extends A {
}
</code></pre>
<p>ä¸Šé¢ä»£ç çš„<code>A</code>ï¼Œåªè¦æ˜¯ä¸€ä¸ªæœ‰<code>prototype</code>å±æ€§çš„å‡½æ•°ï¼Œå°±èƒ½è¢«<code>B</code>ç»§æ‰¿ã€‚ç”±äºå‡½æ•°éƒ½æœ‰<code>prototype</code>å±æ€§ï¼ˆé™¤äº†<code>Function.prototype</code>å‡½æ•°ï¼‰ï¼Œå› æ­¤<code>A</code>å¯ä»¥æ˜¯ä»»æ„å‡½æ•°ã€‚</p>
<p>ä¸‹é¢ï¼Œè®¨è®ºä¸‰ç§ç‰¹æ®Šæƒ…å†µã€‚</p>
<p>ç¬¬ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå­ç±»ç»§æ‰¿Objectç±»ã€‚</p>
<pre><code class="javascript">class A extends Object {
}

A.__proto__ === Object // true
A.prototype.__proto__ === Object.prototype // true
</code></pre>
<p>è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>A</code>å…¶å®å°±æ˜¯æ„é€ å‡½æ•°<code>Object</code>çš„å¤åˆ¶ï¼Œ<code>A</code>çš„å®ä¾‹å°±æ˜¯<code>Object</code>çš„å®ä¾‹ã€‚</p>
<p>ç¬¬äºŒç§ç‰¹æ®Šæƒ…å†µï¼Œä¸å­˜åœ¨ä»»ä½•ç»§æ‰¿ã€‚</p>
<pre><code class="javascript">class A {
}

A.__proto__ === Function.prototype // true
A.prototype.__proto__ === Object.prototype // true
</code></pre>
<p>è¿™ç§æƒ…å†µä¸‹ï¼ŒAä½œä¸ºä¸€ä¸ªåŸºç±»ï¼ˆå³ä¸å­˜åœ¨ä»»ä½•ç»§æ‰¿ï¼‰ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œæ‰€ä»¥ç›´æ¥ç»§æ‰¿<code>Funciton.prototype</code>ã€‚ä½†æ˜¯ï¼Œ<code>A</code>è°ƒç”¨åè¿”å›ä¸€ä¸ªç©ºå¯¹è±¡ï¼ˆå³<code>Object</code>å®ä¾‹ï¼‰ï¼Œæ‰€ä»¥<code>A.prototype.__proto__</code>æŒ‡å‘æ„é€ å‡½æ•°ï¼ˆ<code>Object</code>ï¼‰çš„<code>prototype</code>å±æ€§ã€‚</p>
<p>ç¬¬ä¸‰ç§ç‰¹æ®Šæƒ…å†µï¼Œå­ç±»ç»§æ‰¿<code>null</code>ã€‚</p>
<pre><code class="javascript">class A extends null {
}

A.__proto__ === Function.prototype // true
A.prototype.__proto__ === undefined // true
</code></pre>
<p>è¿™ç§æƒ…å†µä¸ç¬¬äºŒç§æƒ…å†µéå¸¸åƒã€‚<code>A</code>ä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œæ‰€ä»¥ç›´æ¥ç»§æ‰¿<code>Funciton.prototype</code>ã€‚ä½†æ˜¯ï¼ŒAè°ƒç”¨åè¿”å›çš„å¯¹è±¡ä¸ç»§æ‰¿ä»»ä½•æ–¹æ³•ï¼Œæ‰€ä»¥å®ƒçš„<code>__proto__</code>æŒ‡å‘<code>Function.prototype</code>ï¼Œå³å®è´¨ä¸Šæ‰§è¡Œäº†ä¸‹é¢çš„ä»£ç ã€‚</p>
<pre><code class="javascript">class C extends null {
  constructor() { return Object.create(null); }
}
</code></pre>
<h3 id="Object-getPrototypeOf"><a href="#Object-getPrototypeOf" class="headerlink" title="Object.getPrototypeOf()"></a>Object.getPrototypeOf()</h3><p><code>Object.getPrototypeOf</code>æ–¹æ³•å¯ä»¥ç”¨æ¥ä»å­ç±»ä¸Šè·å–çˆ¶ç±»ã€‚</p>
<pre><code class="javascript">Object.getPrototypeOf(ColorPoint) === Point
// true
</code></pre>
<p>å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­ï¼Œä¸€ä¸ªç±»æ˜¯å¦ç»§æ‰¿äº†å¦ä¸€ä¸ªç±»ã€‚</p>
<h3 id="super-å…³é”®å­—"><a href="#super-å…³é”®å­—" class="headerlink" title="super å…³é”®å­—"></a>super å…³é”®å­—</h3><p><code>super</code>è¿™ä¸ªå…³é”®å­—ï¼Œæ—¢å¯ä»¥å½“ä½œå‡½æ•°ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“ä½œå¯¹è±¡ä½¿ç”¨ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå®ƒçš„ç”¨æ³•å®Œå…¨ä¸åŒã€‚</p>
<p>ç¬¬ä¸€ç§æƒ…å†µï¼Œ<code>super</code>ä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼Œä»£è¡¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚ES6 è¦æ±‚ï¼Œå­ç±»çš„æ„é€ å‡½æ•°å¿…é¡»æ‰§è¡Œä¸€æ¬¡<code>super</code>å‡½æ•°ã€‚</p>
<pre><code class="javascript">class A {}

class B extends A {
  constructor() {
    super();
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»<code>B</code>çš„æ„é€ å‡½æ•°ä¹‹ä¸­çš„<code>super()</code>ï¼Œä»£è¡¨è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚è¿™æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ JavaScript å¼•æ“ä¼šæŠ¥é”™ã€‚</p>
<p>æ³¨æ„ï¼Œ<code>super</code>è™½ç„¶ä»£è¡¨äº†çˆ¶ç±»<code>A</code>çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯å­ç±»<code>B</code>çš„å®ä¾‹ï¼Œå³<code>super</code>å†…éƒ¨çš„<code>this</code>æŒ‡çš„æ˜¯<code>B</code>ï¼Œå› æ­¤<code>super()</code>åœ¨è¿™é‡Œç›¸å½“äº<code>A.prototype.constructor.call(this)</code>ã€‚</p>
<pre><code class="javascript">class A {
  constructor() {
    console.log(new.target.name);
  }
}
class B extends A {
  constructor() {
    super();
  }
}
new A() // A
new B() // B
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>new.target</code>æŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨<code>super()</code>æ‰§è¡Œæ—¶ï¼Œå®ƒæŒ‡å‘çš„æ˜¯å­ç±»<code>B</code>çš„æ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯çˆ¶ç±»<code>A</code>çš„æ„é€ å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>super()</code>å†…éƒ¨çš„<code>this</code>æŒ‡å‘çš„æ˜¯<code>B</code>ã€‚</p>
<p>ä½œä¸ºå‡½æ•°æ—¶ï¼Œ<code>super()</code>åªèƒ½ç”¨åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¹‹ä¸­ï¼Œç”¨åœ¨å…¶ä»–åœ°æ–¹å°±ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">class A {}

class B extends A {
  m() {
    super(); // æŠ¥é”™
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>super()</code>ç”¨åœ¨<code>B</code>ç±»çš„<code>m</code>æ–¹æ³•ä¹‹ä¸­ï¼Œå°±ä¼šé€ æˆå¥æ³•é”™è¯¯ã€‚</p>
<p>ç¬¬äºŒç§æƒ…å†µï¼Œ<code>super</code>ä½œä¸ºå¯¹è±¡æ—¶ï¼ŒæŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ã€‚</p>
<pre><code class="javascript">class A {
  p() {
    return 2;
  }
}

class B extends A {
  constructor() {
    super();
    console.log(super.p()); // 2
  }
}

let b = new B();
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»<code>B</code>å½“ä¸­çš„<code>super.p()</code>ï¼Œå°±æ˜¯å°†<code>super</code>å½“ä½œä¸€ä¸ªå¯¹è±¡ä½¿ç”¨ã€‚è¿™æ—¶ï¼Œ<code>super</code>æŒ‡å‘<code>A.prototype</code>ï¼Œæ‰€ä»¥<code>super.p()</code>å°±ç›¸å½“äº<code>A.prototype.p()</code>ã€‚</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œç”±äº<code>super</code>æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼Œæ‰€ä»¥å®šä¹‰åœ¨çˆ¶ç±»å®ä¾‹ä¸Šçš„æ–¹æ³•æˆ–å±æ€§ï¼Œæ˜¯æ— æ³•é€šè¿‡<code>super</code>è°ƒç”¨çš„ã€‚</p>
<pre><code class="javascript">class A {
  constructor() {
    this.p = 2;
  }
}

class B extends A {
  get m() {
    return super.p;
  }
}

let b = new B();
b.m // undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p</code>æ˜¯çˆ¶ç±»<code>A</code>å®ä¾‹çš„å±æ€§ï¼Œ<code>super.p</code>å°±å¼•ç”¨ä¸åˆ°å®ƒã€‚</p>
<p>å¦‚æœå±æ€§å®šä¹‰åœ¨çˆ¶ç±»çš„åŸå‹å¯¹è±¡ä¸Šï¼Œ<code>super</code>å°±å¯ä»¥å–åˆ°ã€‚</p>
<pre><code class="javascript">class A {}
A.prototype.x = 2;

class B extends A {
  constructor() {
    super();
    console.log(super.x) // 2
  }
}

let b = new B();
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå±æ€§<code>x</code>æ˜¯å®šä¹‰åœ¨<code>A.prototype</code>ä¸Šé¢çš„ï¼Œæ‰€ä»¥<code>super.x</code>å¯ä»¥å–åˆ°å®ƒçš„å€¼ã€‚</p>
<p>ES6 è§„å®šï¼Œé€šè¿‡<code>super</code>è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œ<code>super</code>ä¼šç»‘å®šå­ç±»çš„<code>this</code>ã€‚</p>
<pre><code class="javascript">class A {
  constructor() {
    this.x = 1;
  }
  print() {
    console.log(this.x);
  }
}

class B extends A {
  constructor() {
    super();
    this.x = 2;
  }
  m() {
    super.print();
  }
}

let b = new B();
b.m() // 2
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>super.print()</code>è™½ç„¶è°ƒç”¨çš„æ˜¯<code>A.prototype.print()</code>ï¼Œä½†æ˜¯<code>A.prototype.print()</code>ä¼šç»‘å®šå­ç±»<code>B</code>çš„<code>this</code>ï¼Œå¯¼è‡´è¾“å‡ºçš„æ˜¯<code>2</code>ï¼Œè€Œä¸æ˜¯<code>1</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯<code>super.print.call(this)</code>ã€‚</p>
<p>ç”±äºç»‘å®šå­ç±»çš„<code>this</code>ï¼Œæ‰€ä»¥å¦‚æœé€šè¿‡<code>super</code>å¯¹æŸä¸ªå±æ€§èµ‹å€¼ï¼Œè¿™æ—¶<code>super</code>å°±æ˜¯<code>this</code>ï¼Œèµ‹å€¼çš„å±æ€§ä¼šå˜æˆå­ç±»å®ä¾‹çš„å±æ€§ã€‚</p>
<pre><code class="javascript">class A {
  constructor() {
    this.x = 1;
  }
}

class B extends A {
  constructor() {
    super();
    this.x = 2;
    super.x = 3;
    console.log(super.x); // undefined
    console.log(this.x); // 3
  }
}

let b = new B();
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>super.x</code>èµ‹å€¼ä¸º<code>3</code>ï¼Œè¿™æ—¶ç­‰åŒäºå¯¹<code>this.x</code>èµ‹å€¼ä¸º<code>3</code>ã€‚è€Œå½“è¯»å–<code>super.x</code>çš„æ—¶å€™ï¼Œè¯»çš„æ˜¯<code>A.prototype.x</code>ï¼Œæ‰€ä»¥è¿”å›<code>undefined</code>ã€‚</p>
<p>æ³¨æ„ï¼Œä½¿ç”¨<code>super</code>çš„æ—¶å€™ï¼Œå¿…é¡»æ˜¾å¼æŒ‡å®šæ˜¯ä½œä¸ºå‡½æ•°ã€è¿˜æ˜¯ä½œä¸ºå¯¹è±¡ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">class A {}

class B extends A {
  constructor() {
    super();
    console.log(super); // æŠ¥é”™
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>console.log(super)</code>å½“ä¸­çš„<code>super</code>ï¼Œæ— æ³•çœ‹å‡ºæ˜¯ä½œä¸ºå‡½æ•°ä½¿ç”¨ï¼Œè¿˜æ˜¯ä½œä¸ºå¯¹è±¡ä½¿ç”¨ï¼Œæ‰€ä»¥ JavaScript å¼•æ“è§£æä»£ç çš„æ—¶å€™å°±ä¼šæŠ¥é”™ã€‚è¿™æ—¶ï¼Œå¦‚æœèƒ½æ¸…æ™°åœ°è¡¨æ˜<code>super</code>çš„æ•°æ®ç±»å‹ï¼Œå°±ä¸ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">class A {}

class B extends A {
  constructor() {
    super();
    console.log(super.valueOf() instanceof B); // true
  }
}

let b = new B();
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>super.valueOf()</code>è¡¨æ˜<code>super</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤å°±ä¸ä¼šæŠ¥é”™ã€‚åŒæ—¶ï¼Œç”±äº<code>super</code>ç»‘å®š<code>B</code>çš„<code>this</code>ï¼Œæ‰€ä»¥<code>super.valueOf()</code>è¿”å›çš„æ˜¯ä¸€ä¸ª<code>B</code>çš„å®ä¾‹ã€‚</p>
<p>æœ€åï¼Œç”±äºå¯¹è±¡æ€»æ˜¯ç»§æ‰¿å…¶ä»–å¯¹è±¡çš„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ä»»æ„ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œä½¿ç”¨<code>super</code>å…³é”®å­—ã€‚</p>
<pre><code class="javascript">var obj = {
  toString() {
    return &quot;MyObject: &quot; + super.toString();
  }
};

obj.toString(); // MyObject: [object Object]
</code></pre>
<h3 id="å®ä¾‹çš„-proto-å±æ€§"><a href="#å®ä¾‹çš„-proto-å±æ€§" class="headerlink" title="å®ä¾‹çš„__proto__å±æ€§"></a>å®ä¾‹çš„__proto__å±æ€§</h3><p>å­ç±»å®ä¾‹çš„__proto__å±æ€§çš„__proto__å±æ€§ï¼ŒæŒ‡å‘çˆ¶ç±»å®ä¾‹çš„__proto__å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­ç±»çš„åŸå‹çš„åŸå‹ï¼Œæ˜¯çˆ¶ç±»çš„åŸå‹ã€‚</p>
<pre><code class="javascript">var p1 = new Point(2, 3);
var p2 = new ColorPoint(2, 3, &#39;red&#39;);

p2.__proto__ === p1.__proto__ // false
p2.__proto__.__proto__ === p1.__proto__ // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>ColorPoint</code>ç»§æ‰¿äº†<code>Point</code>ï¼Œå¯¼è‡´å‰è€…åŸå‹çš„åŸå‹æ˜¯åè€…çš„åŸå‹ã€‚</p>
<p>å› æ­¤ï¼Œé€šè¿‡å­ç±»å®ä¾‹çš„<code>__proto__.__proto__</code>å±æ€§ï¼Œå¯ä»¥ä¿®æ”¹çˆ¶ç±»å®ä¾‹çš„è¡Œä¸ºã€‚</p>
<pre><code class="javascript">p2.__proto__.__proto__.printName = function () {
  console.log(&#39;Ha&#39;);
};

p1.printName() // &quot;Ha&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç åœ¨<code>ColorPoint</code>çš„å®ä¾‹<code>p2</code>ä¸Šå‘<code>Point</code>ç±»æ·»åŠ æ–¹æ³•ï¼Œç»“æœå½±å“åˆ°äº†<code>Point</code>çš„å®ä¾‹<code>p1</code>ã€‚</p>
<h2 id="åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿"><a href="#åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿" class="headerlink" title="åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿"></a>åŸç”Ÿæ„é€ å‡½æ•°çš„ç»§æ‰¿</h2><p>åŸç”Ÿæ„é€ å‡½æ•°æ˜¯æŒ‡è¯­è¨€å†…ç½®çš„æ„é€ å‡½æ•°ï¼Œé€šå¸¸ç”¨æ¥ç”Ÿæˆæ•°æ®ç»“æ„ã€‚ECMAScriptçš„åŸç”Ÿæ„é€ å‡½æ•°å¤§è‡´æœ‰ä¸‹é¢è¿™äº›ã€‚</p>
<ul>
<li>Boolean()</li>
<li>Number()</li>
<li>String()</li>
<li>Array()</li>
<li>Date()</li>
<li>Function()</li>
<li>RegExp()</li>
<li>Error()</li>
<li>Object()</li>
</ul>
<p>ä»¥å‰ï¼Œè¿™äº›åŸç”Ÿæ„é€ å‡½æ•°æ˜¯æ— æ³•ç»§æ‰¿çš„ï¼Œæ¯”å¦‚ï¼Œä¸èƒ½è‡ªå·±å®šä¹‰ä¸€ä¸ª<code>Array</code>çš„å­ç±»ã€‚</p>
<pre><code class="javascript">function MyArray() {
  Array.apply(this, arguments);
}

MyArray.prototype = Object.create(Array.prototype, {
  constructor: {
    value: MyArray,
    writable: true,
    configurable: true,
    enumerable: true
  }
});
</code></pre>
<p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªç»§æ‰¿Arrayçš„<code>MyArray</code>ç±»ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªç±»çš„è¡Œä¸ºä¸<code>Array</code>å®Œå…¨ä¸ä¸€è‡´ã€‚</p>
<pre><code class="javascript">var colors = new MyArray();
colors[0] = &quot;red&quot;;
colors.length  // 0

colors.length = 0;
colors[0]  // &quot;red&quot;
</code></pre>
<p>ä¹‹æ‰€ä»¥ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œæ˜¯å› ä¸ºå­ç±»æ— æ³•è·å¾—åŸç”Ÿæ„é€ å‡½æ•°çš„å†…éƒ¨å±æ€§ï¼Œé€šè¿‡<code>Array.apply()</code>æˆ–è€…åˆ†é…ç»™åŸå‹å¯¹è±¡éƒ½ä¸è¡Œã€‚åŸç”Ÿæ„é€ å‡½æ•°ä¼šå¿½ç•¥<code>apply</code>æ–¹æ³•ä¼ å…¥çš„<code>this</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸç”Ÿæ„é€ å‡½æ•°çš„<code>this</code>æ— æ³•ç»‘å®šï¼Œå¯¼è‡´æ‹¿ä¸åˆ°å†…éƒ¨å±æ€§ã€‚</p>
<p>ES5æ˜¯å…ˆæ–°å»ºå­ç±»çš„å®ä¾‹å¯¹è±¡<code>this</code>ï¼Œå†å°†çˆ¶ç±»çš„å±æ€§æ·»åŠ åˆ°å­ç±»ä¸Šï¼Œç”±äºçˆ¶ç±»çš„å†…éƒ¨å±æ€§æ— æ³•è·å–ï¼Œå¯¼è‡´æ— æ³•ç»§æ‰¿åŸç”Ÿçš„æ„é€ å‡½æ•°ã€‚æ¯”å¦‚ï¼ŒArrayæ„é€ å‡½æ•°æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§<code>[[DefineOwnProperty]]</code>ï¼Œç”¨æ¥å®šä¹‰æ–°å±æ€§æ—¶ï¼Œæ›´æ–°<code>length</code>å±æ€§ï¼Œè¿™ä¸ªå†…éƒ¨å±æ€§æ— æ³•åœ¨å­ç±»è·å–ï¼Œå¯¼è‡´å­ç±»çš„<code>length</code>å±æ€§è¡Œä¸ºä¸æ­£å¸¸ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è®©ä¸€ä¸ªæ™®é€šå¯¹è±¡ç»§æ‰¿<code>Error</code>å¯¹è±¡ã€‚</p>
<pre><code class="javascript">var e = {};

Object.getOwnPropertyNames(Error.call(e))
// [ &#39;stack&#39; ]

Object.getOwnPropertyNames(e)
// []
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬æƒ³é€šè¿‡<code>Error.call(e)</code>è¿™ç§å†™æ³•ï¼Œè®©æ™®é€šå¯¹è±¡<code>e</code>å…·æœ‰<code>Error</code>å¯¹è±¡çš„å®ä¾‹å±æ€§ã€‚ä½†æ˜¯ï¼Œ<code>Error.call()</code>å®Œå…¨å¿½ç•¥ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œ<code>e</code>æœ¬èº«æ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚è¿™è¯æ˜äº†<code>Error.call(e)</code>è¿™ç§å†™æ³•ï¼Œæ— æ³•ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•°ã€‚</p>
<p>ES6å…è®¸ç»§æ‰¿åŸç”Ÿæ„é€ å‡½æ•°å®šä¹‰å­ç±»ï¼Œå› ä¸ºES6æ˜¯å…ˆæ–°å»ºçˆ¶ç±»çš„å®ä¾‹å¯¹è±¡<code>this</code>ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®é¥°<code>this</code>ï¼Œä½¿å¾—çˆ¶ç±»çš„æ‰€æœ‰è¡Œä¸ºéƒ½å¯ä»¥ç»§æ‰¿ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç»§æ‰¿<code>Array</code>çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">class MyArray extends Array {
  constructor(...args) {
    super(...args);
  }
}

var arr = new MyArray();
arr[0] = 12;
arr.length // 1

arr.length = 0;
arr[0] // undefined
</code></pre>
<p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ª<code>MyArray</code>ç±»ï¼Œç»§æ‰¿äº†<code>Array</code>æ„é€ å‡½æ•°ï¼Œå› æ­¤å°±å¯ä»¥ä»<code>MyArray</code>ç”Ÿæˆæ•°ç»„çš„å®ä¾‹ã€‚è¿™æ„å‘³ç€ï¼ŒES6å¯ä»¥è‡ªå®šä¹‰åŸç”Ÿæ•°æ®ç»“æ„ï¼ˆæ¯”å¦‚Arrayã€Stringç­‰ï¼‰çš„å­ç±»ï¼Œè¿™æ˜¯ES5æ— æ³•åšåˆ°çš„ã€‚</p>
<p>ä¸Šé¢è¿™ä¸ªä¾‹å­ä¹Ÿè¯´æ˜ï¼Œ<code>extends</code>å…³é”®å­—ä¸ä»…å¯ä»¥ç”¨æ¥ç»§æ‰¿ç±»ï¼Œè¿˜å¯ä»¥ç”¨æ¥ç»§æ‰¿åŸç”Ÿçš„æ„é€ å‡½æ•°ã€‚å› æ­¤å¯ä»¥åœ¨åŸç”Ÿæ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šï¼Œå®šä¹‰è‡ªå·±çš„æ•°æ®ç»“æ„ã€‚ä¸‹é¢å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªå¸¦ç‰ˆæœ¬åŠŸèƒ½çš„æ•°ç»„ã€‚</p>
<pre><code class="javascript">class VersionedArray extends Array {
  constructor() {
    super();
    this.history = [[]];
  }
  commit() {
    this.history.push(this.slice());
  }
  revert() {
    this.splice(0, this.length, ...this.history[this.history.length - 1]);
  }
}

var x = new VersionedArray();

x.push(1);
x.push(2);
x // [1, 2]
x.history // [[]]

x.commit();
x.history // [[], [1, 2]]
x.push(3);
x // [1, 2, 3]

x.revert();
x // [1, 2]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>VersionedArray</code>ç»“æ„ä¼šé€šè¿‡<code>commit</code>æ–¹æ³•ï¼Œå°†è‡ªå·±çš„å½“å‰çŠ¶æ€å­˜å…¥<code>history</code>å±æ€§ï¼Œç„¶åé€šè¿‡<code>revert</code>æ–¹æ³•ï¼Œå¯ä»¥æ’¤é”€å½“å‰ç‰ˆæœ¬ï¼Œå›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œ<code>VersionedArray</code>ä¾ç„¶æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€æœ‰åŸç”Ÿçš„æ•°ç»„æ–¹æ³•éƒ½å¯ä»¥åœ¨å®ƒä¸Šé¢è°ƒç”¨ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰<code>Error</code>å­ç±»çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">class ExtendableError extends Error {
  constructor(message) {
    super();
    this.message = message;
    this.stack = (new Error()).stack;
    this.name = this.constructor.name;
  }
}

class MyError extends ExtendableError {
  constructor(m) {
    super(m);
  }
}

var myerror = new MyError(&#39;ll&#39;);
myerror.message // &quot;ll&quot;
myerror instanceof Error // true
myerror.name // &quot;MyError&quot;
myerror.stack
// Error
//     at MyError.ExtendableError
//     ...
</code></pre>
<p>æ³¨æ„ï¼Œç»§æ‰¿<code>Object</code>çš„å­ç±»ï¼Œæœ‰ä¸€ä¸ª<a href="http://stackoverflow.com/questions/36203614/super-does-not-pass-arguments-when-instantiating-a-class-extended-from-object" target="_blank" rel="external">è¡Œä¸ºå·®å¼‚</a>ã€‚</p>
<pre><code class="javascript">class NewObj extends Object{
  constructor(){
    super(...arguments);
  }
}
var o = new NewObj({attr: true});
console.log(o.attr === true);  // false
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>NewObj</code>ç»§æ‰¿äº†<code>Object</code>ï¼Œä½†æ˜¯æ— æ³•é€šè¿‡<code>super</code>æ–¹æ³•å‘çˆ¶ç±»<code>Object</code>ä¼ å‚ã€‚è¿™æ˜¯å› ä¸ºES6æ”¹å˜äº†<code>Object</code>æ„é€ å‡½æ•°çš„è¡Œä¸ºï¼Œä¸€æ—¦å‘ç°<code>Object</code>æ–¹æ³•ä¸æ˜¯é€šè¿‡<code>new Object()</code>è¿™ç§å½¢å¼è°ƒç”¨ï¼ŒES6è§„å®š<code>Object</code>æ„é€ å‡½æ•°ä¼šå¿½ç•¥å‚æ•°ã€‚</p>
<h2 id="Classçš„å–å€¼å‡½æ•°ï¼ˆgetterï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆsetterï¼‰"><a href="#Classçš„å–å€¼å‡½æ•°ï¼ˆgetterï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆsetterï¼‰" class="headerlink" title="Classçš„å–å€¼å‡½æ•°ï¼ˆgetterï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆsetterï¼‰"></a>Classçš„å–å€¼å‡½æ•°ï¼ˆgetterï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆsetterï¼‰</h2><p>ä¸ES5ä¸€æ ·ï¼Œåœ¨Classå†…éƒ¨å¯ä»¥ä½¿ç”¨<code>get</code>å’Œ<code>set</code>å…³é”®å­—ï¼Œå¯¹æŸä¸ªå±æ€§è®¾ç½®å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°ï¼Œæ‹¦æˆªè¯¥å±æ€§çš„å­˜å–è¡Œä¸ºã€‚</p>
<pre><code class="javascript">class MyClass {
  constructor() {
    // ...
  }
  get prop() {
    return &#39;getter&#39;;
  }
  set prop(value) {
    console.log(&#39;setter: &#39;+value);
  }
}

let inst = new MyClass();

inst.prop = 123;
// setter: 123

inst.prop
// &#39;getter&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>prop</code>å±æ€§æœ‰å¯¹åº”çš„å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°ï¼Œå› æ­¤èµ‹å€¼å’Œè¯»å–è¡Œä¸ºéƒ½è¢«è‡ªå®šä¹‰äº†ã€‚</p>
<p>å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°æ˜¯è®¾ç½®åœ¨å±æ€§çš„descriptorå¯¹è±¡ä¸Šçš„ã€‚</p>
<pre><code class="javascript">class CustomHTMLElement {
  constructor(element) {
    this.element = element;
  }

  get html() {
    return this.element.innerHTML;
  }

  set html(value) {
    this.element.innerHTML = value;
  }
}

var descriptor = Object.getOwnPropertyDescriptor(
  CustomHTMLElement.prototype, &quot;html&quot;);
&quot;get&quot; in descriptor  // true
&quot;set&quot; in descriptor  // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°æ˜¯å®šä¹‰åœ¨<code>html</code>å±æ€§çš„æè¿°å¯¹è±¡ä¸Šé¢ï¼Œè¿™ä¸ES5å®Œå…¨ä¸€è‡´ã€‚</p>
<h2 id="Classçš„Generatoræ–¹æ³•"><a href="#Classçš„Generatoræ–¹æ³•" class="headerlink" title="Classçš„Generatoræ–¹æ³•"></a>Classçš„Generatoræ–¹æ³•</h2><p>å¦‚æœæŸä¸ªæ–¹æ³•ä¹‹å‰åŠ ä¸Šæ˜Ÿå·ï¼ˆ<code>*</code>ï¼‰ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ã€‚</p>
<pre><code class="javascript">class Foo {
  constructor(...args) {
    this.args = args;
  }
  * [Symbol.iterator]() {
    for (let arg of this.args) {
      yield arg;
    }
  }
}

for (let x of new Foo(&#39;hello&#39;, &#39;world&#39;)) {
  console.log(x);
}
// hello
// world
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒFooç±»çš„Symbol.iteratoræ–¹æ³•å‰æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼Œè¡¨ç¤ºè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ã€‚Symbol.iteratoræ–¹æ³•è¿”å›ä¸€ä¸ªFooç±»çš„é»˜è®¤éå†å™¨ï¼Œforâ€¦ofå¾ªç¯ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªéå†å™¨ã€‚</p>
<h2 id="Classçš„é™æ€æ–¹æ³•"><a href="#Classçš„é™æ€æ–¹æ³•" class="headerlink" title="Classçš„é™æ€æ–¹æ³•"></a>Classçš„é™æ€æ–¹æ³•</h2><p>ç±»ç›¸å½“äºå®ä¾‹çš„åŸå‹ï¼Œæ‰€æœ‰åœ¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½ä¼šè¢«å®ä¾‹ç»§æ‰¿ã€‚å¦‚æœåœ¨ä¸€ä¸ªæ–¹æ³•å‰ï¼ŒåŠ ä¸Š<code>static</code>å…³é”®å­—ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•ä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ç±»æ¥è°ƒç”¨ï¼Œè¿™å°±ç§°ä¸ºâ€œé™æ€æ–¹æ³•â€ã€‚</p>
<pre><code class="javascript">class Foo {
  static classMethod() {
    return &#39;hello&#39;;
  }
}

Foo.classMethod() // &#39;hello&#39;

var foo = new Foo();
foo.classMethod()
// TypeError: foo.classMethod is not a function
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Foo</code>ç±»çš„<code>classMethod</code>æ–¹æ³•å‰æœ‰<code>static</code>å…³é”®å­—ï¼Œè¡¨æ˜è¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥åœ¨<code>Foo</code>ç±»ä¸Šè°ƒç”¨ï¼ˆ<code>Foo.classMethod()</code>ï¼‰ï¼Œè€Œä¸æ˜¯åœ¨<code>Foo</code>ç±»çš„å®ä¾‹ä¸Šè°ƒç”¨ã€‚å¦‚æœåœ¨å®ä¾‹ä¸Šè°ƒç”¨é™æ€æ–¹æ³•ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¡¨ç¤ºä¸å­˜åœ¨è¯¥æ–¹æ³•ã€‚</p>
<p>çˆ¶ç±»çš„é™æ€æ–¹æ³•ï¼Œå¯ä»¥è¢«å­ç±»ç»§æ‰¿ã€‚</p>
<pre><code class="javascript">class Foo {
  static classMethod() {
    return &#39;hello&#39;;
  }
}

class Bar extends Foo {
}

Bar.classMethod(); // &#39;hello&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œçˆ¶ç±»<code>Foo</code>æœ‰ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå­ç±»<code>Bar</code>å¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
<p>é™æ€æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥ä»<code>super</code>å¯¹è±¡ä¸Šè°ƒç”¨çš„ã€‚</p>
<pre><code class="javascript">class Foo {
  static classMethod() {
    return &#39;hello&#39;;
  }
}

class Bar extends Foo {
  static classMethod() {
    return super.classMethod() + &#39;, too&#39;;
  }
}

Bar.classMethod();
</code></pre>
<h2 id="Classçš„é™æ€å±æ€§å’Œå®ä¾‹å±æ€§"><a href="#Classçš„é™æ€å±æ€§å’Œå®ä¾‹å±æ€§" class="headerlink" title="Classçš„é™æ€å±æ€§å’Œå®ä¾‹å±æ€§"></a>Classçš„é™æ€å±æ€§å’Œå®ä¾‹å±æ€§</h2><p>é™æ€å±æ€§æŒ‡çš„æ˜¯Classæœ¬èº«çš„å±æ€§ï¼Œå³<code>Class.propname</code>ï¼Œè€Œä¸æ˜¯å®šä¹‰åœ¨å®ä¾‹å¯¹è±¡ï¼ˆ<code>this</code>ï¼‰ä¸Šçš„å±æ€§ã€‚</p>
<pre><code class="javascript">class Foo {
}

Foo.prop = 1;
Foo.prop // 1
</code></pre>
<p>ä¸Šé¢çš„å†™æ³•ä¸º<code>Foo</code>ç±»å®šä¹‰äº†ä¸€ä¸ªé™æ€å±æ€§<code>prop</code>ã€‚</p>
<p>ç›®å‰ï¼Œåªæœ‰è¿™ç§å†™æ³•å¯è¡Œï¼Œå› ä¸ºES6æ˜ç¡®è§„å®šï¼ŒClasså†…éƒ¨åªæœ‰é™æ€æ–¹æ³•ï¼Œæ²¡æœ‰é™æ€å±æ€§ã€‚</p>
<pre><code class="javascript">// ä»¥ä¸‹ä¸¤ç§å†™æ³•éƒ½æ— æ•ˆ
class Foo {
  // å†™æ³•ä¸€
  prop: 2

  // å†™æ³•äºŒ
  static prop: 2
}

Foo.prop // undefined
</code></pre>
<p>ES7æœ‰ä¸€ä¸ªé™æ€å±æ€§çš„<a href="https://github.com/jeffmo/es-class-properties" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œç›®å‰Babelè½¬ç å™¨æ”¯æŒã€‚</p>
<p>è¿™ä¸ªææ¡ˆå¯¹å®ä¾‹å±æ€§å’Œé™æ€å±æ€§ï¼Œéƒ½è§„å®šäº†æ–°çš„å†™æ³•ã€‚</p>
<p>ï¼ˆ1ï¼‰ç±»çš„å®ä¾‹å±æ€§</p>
<p>ç±»çš„å®ä¾‹å±æ€§å¯ä»¥ç”¨ç­‰å¼ï¼Œå†™å…¥ç±»çš„å®šä¹‰ä¹‹ä¸­ã€‚</p>
<pre><code class="javascript">class MyClass {
  myProp = 42;

  constructor() {
    console.log(this.myProp); // 42
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>myProp</code>å°±æ˜¯<code>MyClass</code>çš„å®ä¾‹å±æ€§ã€‚åœ¨<code>MyClass</code>çš„å®ä¾‹ä¸Šï¼Œå¯ä»¥è¯»å–è¿™ä¸ªå±æ€§ã€‚</p>
<p>ä»¥å‰ï¼Œæˆ‘ä»¬å®šä¹‰å®ä¾‹å±æ€§ï¼Œåªèƒ½å†™åœ¨ç±»çš„<code>constructor</code>æ–¹æ³•é‡Œé¢ã€‚</p>
<pre><code class="javascript">class ReactCounter extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      count: 0
    };
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ„é€ æ–¹æ³•<code>constructor</code>é‡Œé¢ï¼Œå®šä¹‰äº†<code>this.state</code>å±æ€§ã€‚</p>
<p>æœ‰äº†æ–°çš„å†™æ³•ä»¥åï¼Œå¯ä»¥ä¸åœ¨<code>constructor</code>æ–¹æ³•é‡Œé¢å®šä¹‰ã€‚</p>
<pre><code class="javascript">class ReactCounter extends React.Component {
  state = {
    count: 0
  };
}
</code></pre>
<p>è¿™ç§å†™æ³•æ¯”ä»¥å‰æ›´æ¸…æ™°ã€‚</p>
<p>ä¸ºäº†å¯è¯»æ€§çš„ç›®çš„ï¼Œå¯¹äºé‚£äº›åœ¨<code>constructor</code>é‡Œé¢å·²ç»å®šä¹‰çš„å®ä¾‹å±æ€§ï¼Œæ–°å†™æ³•å…è®¸ç›´æ¥åˆ—å‡ºã€‚</p>
<pre><code class="javascript">class ReactCounter extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      count: 0
    };
  }
  state;
}
</code></pre>
<p>ï¼ˆ2ï¼‰ç±»çš„é™æ€å±æ€§</p>
<p>ç±»çš„é™æ€å±æ€§åªè¦åœ¨ä¸Šé¢çš„å®ä¾‹å±æ€§å†™æ³•å‰é¢ï¼ŒåŠ ä¸Š<code>static</code>å…³é”®å­—å°±å¯ä»¥äº†ã€‚</p>
<pre><code class="javascript">class MyClass {
  static myStaticProp = 42;

  constructor() {
    console.log(MyClass.myProp); // 42
  }
}
</code></pre>
<p>åŒæ ·çš„ï¼Œè¿™ä¸ªæ–°å†™æ³•å¤§å¤§æ–¹ä¾¿äº†é™æ€å±æ€§çš„è¡¨è¾¾ã€‚</p>
<pre><code class="javascript">// è€å†™æ³•
class Foo {
}
Foo.prop = 1;

// æ–°å†™æ³•
class Foo {
  static prop = 1;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè€å†™æ³•çš„é™æ€å±æ€§å®šä¹‰åœ¨ç±»çš„å¤–éƒ¨ã€‚æ•´ä¸ªç±»ç”Ÿæˆä»¥åï¼Œå†ç”Ÿæˆé™æ€å±æ€§ã€‚è¿™æ ·è®©äººå¾ˆå®¹æ˜“å¿½ç•¥è¿™ä¸ªé™æ€å±æ€§ï¼Œä¹Ÿä¸ç¬¦åˆç›¸å…³ä»£ç åº”è¯¥æ”¾åœ¨ä¸€èµ·çš„ä»£ç ç»„ç»‡åŸåˆ™ã€‚å¦å¤–ï¼Œæ–°å†™æ³•æ˜¯æ˜¾å¼å£°æ˜ï¼ˆdeclarativeï¼‰ï¼Œè€Œä¸æ˜¯èµ‹å€¼å¤„ç†ï¼Œè¯­ä¹‰æ›´å¥½ã€‚</p>
<h2 id="new-targetå±æ€§"><a href="#new-targetå±æ€§" class="headerlink" title="new.targetå±æ€§"></a>new.targetå±æ€§</h2><p><code>new</code>æ˜¯ä»æ„é€ å‡½æ•°ç”Ÿæˆå®ä¾‹çš„å‘½ä»¤ã€‚ES6ä¸º<code>new</code>å‘½ä»¤å¼•å…¥äº†ä¸€ä¸ª<code>new.target</code>å±æ€§ï¼Œï¼ˆåœ¨æ„é€ å‡½æ•°ä¸­ï¼‰è¿”å›<code>new</code>å‘½ä»¤ä½œç”¨äºçš„é‚£ä¸ªæ„é€ å‡½æ•°ã€‚å¦‚æœæ„é€ å‡½æ•°ä¸æ˜¯é€šè¿‡<code>new</code>å‘½ä»¤è°ƒç”¨çš„ï¼Œ<code>new.target</code>ä¼šè¿”å›<code>undefined</code>ï¼Œå› æ­¤è¿™ä¸ªå±æ€§å¯ä»¥ç”¨æ¥ç¡®å®šæ„é€ å‡½æ•°æ˜¯æ€ä¹ˆè°ƒç”¨çš„ã€‚</p>
<pre><code class="javascript">function Person(name) {
  if (new.target !== undefined) {
    this.name = name;
  } else {
    throw new Error(&#39;å¿…é¡»ä½¿ç”¨newç”Ÿæˆå®ä¾‹&#39;);
  }
}

// å¦ä¸€ç§å†™æ³•
function Person(name) {
  if (new.target === Person) {
    this.name = name;
  } else {
    throw new Error(&#39;å¿…é¡»ä½¿ç”¨newç”Ÿæˆå®ä¾‹&#39;);
  }
}

var person = new Person(&#39;å¼ ä¸‰&#39;); // æ­£ç¡®
var notAPerson = Person.call(person, &#39;å¼ ä¸‰&#39;);  // æŠ¥é”™
</code></pre>
<p>ä¸Šé¢ä»£ç ç¡®ä¿æ„é€ å‡½æ•°åªèƒ½é€šè¿‡<code>new</code>å‘½ä»¤è°ƒç”¨ã€‚</p>
<p>Classå†…éƒ¨è°ƒç”¨<code>new.target</code>ï¼Œè¿”å›å½“å‰Classã€‚</p>
<pre><code class="javascript">class Rectangle {
  constructor(length, width) {
    console.log(new.target === Rectangle);
    this.length = length;
    this.width = width;
  }
}

var obj = new Rectangle(3, 4); // è¾“å‡º true
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œ<code>new.target</code>ä¼šè¿”å›å­ç±»ã€‚</p>
<pre><code class="javascript">class Rectangle {
  constructor(length, width) {
    console.log(new.target === Rectangle);
    // ...
  }
}

class Square extends Rectangle {
  constructor(length) {
    super(length, length);
  }
}

var obj = new Square(3); // è¾“å‡º false
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>new.target</code>ä¼šè¿”å›å­ç±»ã€‚</p>
<p>åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹ï¼Œå¯ä»¥å†™å‡ºä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ã€å¿…é¡»ç»§æ‰¿åæ‰èƒ½ä½¿ç”¨çš„ç±»ã€‚</p>
<pre><code class="javascript">class Shape {
  constructor() {
    if (new.target === Shape) {
      throw new Error(&#39;æœ¬ç±»ä¸èƒ½å®ä¾‹åŒ–&#39;);
    }
  }
}

class Rectangle extends Shape {
  constructor(length, width) {
    super();
    // ...
  }
}

var x = new Shape();  // æŠ¥é”™
var y = new Rectangle(3, 4);  // æ­£ç¡®
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Shape</code>ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½ç”¨äºç»§æ‰¿ã€‚</p>
<p>æ³¨æ„ï¼Œåœ¨å‡½æ•°å¤–éƒ¨ï¼Œä½¿ç”¨<code>new.target</code>ä¼šæŠ¥é”™ã€‚</p>
<h2 id="Mixinæ¨¡å¼çš„å®ç°"><a href="#Mixinæ¨¡å¼çš„å®ç°" class="headerlink" title="Mixinæ¨¡å¼çš„å®ç°"></a>Mixinæ¨¡å¼çš„å®ç°</h2><p>Mixinæ¨¡å¼æŒ‡çš„æ˜¯ï¼Œå°†å¤šä¸ªç±»çš„æ¥å£â€œæ··å…¥â€ï¼ˆmix inï¼‰å¦ä¸€ä¸ªç±»ã€‚å®ƒåœ¨ES6çš„å®ç°å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">function mix(...mixins) {
  class Mix {}

  for (let mixin of mixins) {
    copyProperties(Mix, mixin);
    copyProperties(Mix.prototype, mixin.prototype);
  }

  return Mix;
}

function copyProperties(target, source) {
  for (let key of Reflect.ownKeys(source)) {
    if ( key !== &quot;constructor&quot;
      &amp;&amp; key !== &quot;prototype&quot;
      &amp;&amp; key !== &quot;name&quot;
    ) {
      let desc = Object.getOwnPropertyDescriptor(source, key);
      Object.defineProperty(target, key, desc);
    }
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç çš„<code>mix</code>å‡½æ•°ï¼Œå¯ä»¥å°†å¤šä¸ªå¯¹è±¡åˆæˆä¸ºä¸€ä¸ªç±»ã€‚ä½¿ç”¨çš„æ—¶å€™ï¼Œåªè¦ç»§æ‰¿è¿™ä¸ªç±»å³å¯ã€‚</p>
<pre><code class="javascript">class DistributedEdit extends mix(Loggable, Serializable) {
  // ...
}
</code></pre>
<blockquote>
<p>æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Class&quot;&gt;&lt;a href=&quot;#Class&quot; class=&quot;headerlink&quot; title=&quot;Class&quot;&gt;&lt;/a&gt;Class&lt;/h1&gt;&lt;h2 id=&quot;ClassåŸºæœ¬è¯­æ³•&quot;&gt;&lt;a href=&quot;#ClassåŸºæœ¬è¯­æ³•&quot; class=&quot;headerlink&quot; ti
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Class" scheme="https://microzz.com/tags/Class/"/>
    
  </entry>
  
  <entry>
    <title>å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°</title>
    <link href="https://microzz.com/2017/01/15/async/"/>
    <id>https://microzz.com/2017/01/15/async/</id>
    <published>2017-01-15T06:58:52.000Z</published>
    <updated>2017-08-21T11:33:03.047Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°"><a href="#å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°" class="headerlink" title="å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°"></a>å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°</h1><p>å¼‚æ­¥ç¼–ç¨‹å¯¹ JavaScript è¯­è¨€å¤ªé‡è¦ã€‚Javascript è¯­è¨€çš„æ‰§è¡Œç¯å¢ƒæ˜¯â€œå•çº¿ç¨‹â€çš„ï¼Œå¦‚æœæ²¡æœ‰å¼‚æ­¥ç¼–ç¨‹ï¼Œæ ¹æœ¬æ²¡æ³•ç”¨ï¼Œéå¡æ­»ä¸å¯ã€‚æœ¬ç« ä¸»è¦ä»‹ç»å¦‚ä½• Generator å‡½æ•°å®Œæˆå¼‚æ­¥æ“ä½œã€‚</p>
<p>ES6è¯ç”Ÿä»¥å‰ï¼Œå¼‚æ­¥ç¼–ç¨‹çš„æ–¹æ³•ï¼Œå¤§æ¦‚æœ‰ä¸‹é¢å››ç§ã€‚</p>
<ul>
<li>å›è°ƒå‡½æ•°</li>
<li>äº‹ä»¶ç›‘å¬</li>
<li>å‘å¸ƒ/è®¢é˜…</li>
<li>Promise å¯¹è±¡</li>
</ul>
<p>Generator å‡½æ•°å°† JavaScript å¼‚æ­¥ç¼–ç¨‹å¸¦å…¥äº†ä¸€ä¸ªå…¨æ–°çš„é˜¶æ®µã€‚</p>
<h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><h3 id="å¼‚æ­¥"><a href="#å¼‚æ­¥" class="headerlink" title="å¼‚æ­¥"></a>å¼‚æ­¥</h3><p>æ‰€è°“â€å¼‚æ­¥â€ï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªä»»åŠ¡ä¸æ˜¯è¿ç»­å®Œæˆçš„ï¼Œå¯ä»¥ç†è§£æˆè¯¥ä»»åŠ¡è¢«äººä¸ºåˆ†æˆä¸¤æ®µï¼Œå…ˆæ‰§è¡Œç¬¬ä¸€æ®µï¼Œç„¶åè½¬è€Œæ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œç­‰åšå¥½äº†å‡†å¤‡ï¼Œå†å›è¿‡å¤´æ‰§è¡Œç¬¬äºŒæ®µã€‚</p>
<p>æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªä»»åŠ¡æ˜¯è¯»å–æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œä»»åŠ¡çš„ç¬¬ä¸€æ®µæ˜¯å‘æ“ä½œç³»ç»Ÿå‘å‡ºè¯·æ±‚ï¼Œè¦æ±‚è¯»å–æ–‡ä»¶ã€‚ç„¶åï¼Œç¨‹åºæ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œç­‰åˆ°æ“ä½œç³»ç»Ÿè¿”å›æ–‡ä»¶ï¼Œå†æ¥ç€æ‰§è¡Œä»»åŠ¡çš„ç¬¬äºŒæ®µï¼ˆå¤„ç†æ–‡ä»¶ï¼‰ã€‚è¿™ç§ä¸è¿ç»­çš„æ‰§è¡Œï¼Œå°±å«åšå¼‚æ­¥ã€‚</p>
<p>ç›¸åº”åœ°ï¼Œè¿ç»­çš„æ‰§è¡Œå°±å«åšåŒæ­¥ã€‚ç”±äºæ˜¯è¿ç»­æ‰§è¡Œï¼Œä¸èƒ½æ’å…¥å…¶ä»–ä»»åŠ¡ï¼Œæ‰€ä»¥æ“ä½œç³»ç»Ÿä»ç¡¬ç›˜è¯»å–æ–‡ä»¶çš„è¿™æ®µæ—¶é—´ï¼Œç¨‹åºåªèƒ½å¹²ç­‰ç€ã€‚</p>
<h3 id="å›è°ƒå‡½æ•°"><a href="#å›è°ƒå‡½æ•°" class="headerlink" title="å›è°ƒå‡½æ•°"></a>å›è°ƒå‡½æ•°</h3><p>JavaScript è¯­è¨€å¯¹å¼‚æ­¥ç¼–ç¨‹çš„å®ç°ï¼Œå°±æ˜¯å›è°ƒå‡½æ•°ã€‚æ‰€è°“å›è°ƒå‡½æ•°ï¼Œå°±æ˜¯æŠŠä»»åŠ¡çš„ç¬¬äºŒæ®µå•ç‹¬å†™åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œç­‰åˆ°é‡æ–°æ‰§è¡Œè¿™ä¸ªä»»åŠ¡çš„æ—¶å€™ï¼Œå°±ç›´æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚å›è°ƒå‡½æ•°çš„è‹±è¯­åå­—<code>callback</code>ï¼Œç›´è¯‘è¿‡æ¥å°±æ˜¯â€é‡æ–°è°ƒç”¨â€ã€‚</p>
<p>è¯»å–æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œæ˜¯è¿™æ ·å†™çš„ã€‚</p>
<pre><code class="javascript">fs.readFile(&#39;/etc/passwd&#39;, &#39;utf-8&#39;, function (err, data) {
  if (err) throw err;
  console.log(data);
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>readFile</code>å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå°±æ˜¯å›è°ƒå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä»»åŠ¡çš„ç¬¬äºŒæ®µã€‚ç­‰åˆ°æ“ä½œç³»ç»Ÿè¿”å›äº†<code>/etc/passwd</code>è¿™ä¸ªæ–‡ä»¶ä»¥åï¼Œå›è°ƒå‡½æ•°æ‰ä¼šæ‰§è¡Œã€‚</p>
<p>ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜æ˜¯ï¼Œä¸ºä»€ä¹ˆ Node çº¦å®šï¼Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¿…é¡»æ˜¯é”™è¯¯å¯¹è±¡<code>err</code>ï¼ˆå¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œè¯¥å‚æ•°å°±æ˜¯<code>null</code>ï¼‰ï¼Ÿ</p>
<p>åŸå› æ˜¯æ‰§è¡Œåˆ†æˆä¸¤æ®µï¼Œç¬¬ä¸€æ®µæ‰§è¡Œå®Œä»¥åï¼Œä»»åŠ¡æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒå°±å·²ç»ç»“æŸäº†ã€‚åœ¨è¿™ä»¥åæŠ›å‡ºçš„é”™è¯¯ï¼ŒåŸæ¥çš„ä¸Šä¸‹æ–‡ç¯å¢ƒå·²ç»æ— æ³•æ•æ‰ï¼Œåªèƒ½å½“ä½œå‚æ•°ï¼Œä¼ å…¥ç¬¬äºŒæ®µã€‚</p>
<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p>å›è°ƒå‡½æ•°æœ¬èº«å¹¶æ²¡æœ‰é—®é¢˜ï¼Œå®ƒçš„é—®é¢˜å‡ºç°åœ¨å¤šä¸ªå›è°ƒå‡½æ•°åµŒå¥—ã€‚å‡å®šè¯»å–<code>A</code>æ–‡ä»¶ä¹‹åï¼Œå†è¯»å–<code>B</code>æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">fs.readFile(fileA, &#39;utf-8&#39;, function (err, data) {
  fs.readFile(fileB, &#39;utf-8&#39;, function (err, data) {
    // ...
  });
});
</code></pre>
<p>ä¸éš¾æƒ³è±¡ï¼Œå¦‚æœä¾æ¬¡è¯»å–ä¸¤ä¸ªä»¥ä¸Šçš„æ–‡ä»¶ï¼Œå°±ä¼šå‡ºç°å¤šé‡åµŒå¥—ã€‚ä»£ç ä¸æ˜¯çºµå‘å‘å±•ï¼Œè€Œæ˜¯æ¨ªå‘å‘å±•ï¼Œå¾ˆå¿«å°±ä¼šä¹±æˆä¸€å›¢ï¼Œæ— æ³•ç®¡ç†ã€‚å› ä¸ºå¤šä¸ªå¼‚æ­¥æ“ä½œå½¢æˆäº†å¼ºè€¦åˆï¼Œåªè¦æœ‰ä¸€ä¸ªæ“ä½œéœ€è¦ä¿®æ”¹ï¼Œå®ƒçš„ä¸Šå±‚å›è°ƒå‡½æ•°å’Œä¸‹å±‚å›è°ƒå‡½æ•°ï¼Œå¯èƒ½éƒ½è¦è·Ÿç€ä¿®æ”¹ã€‚è¿™ç§æƒ…å†µå°±ç§°ä¸ºâ€å›è°ƒå‡½æ•°åœ°ç‹±â€ï¼ˆcallback hellï¼‰ã€‚</p>
<p>Promise å¯¹è±¡å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œæå‡ºçš„ã€‚å®ƒä¸æ˜¯æ–°çš„è¯­æ³•åŠŸèƒ½ï¼Œè€Œæ˜¯ä¸€ç§æ–°çš„å†™æ³•ï¼Œå…è®¸å°†å›è°ƒå‡½æ•°çš„åµŒå¥—ï¼Œæ”¹æˆé“¾å¼è°ƒç”¨ã€‚é‡‡ç”¨ Promiseï¼Œè¿ç»­è¯»å–å¤šä¸ªæ–‡ä»¶ï¼Œå†™æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">var readFile = require(&#39;fs-readfile-promise&#39;);

readFile(fileA)
.then(function (data) {
  console.log(data.toString());
})
.then(function () {
  return readFile(fileB);
})
.then(function (data) {
  console.log(data.toString());
})
.catch(function (err) {
  console.log(err);
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†<code>fs-readfile-promise</code>æ¨¡å—ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯è¿”å›ä¸€ä¸ª Promise ç‰ˆæœ¬çš„<code>readFile</code>å‡½æ•°ã€‚Promise æä¾›<code>then</code>æ–¹æ³•åŠ è½½å›è°ƒå‡½æ•°ï¼Œ<code>catch</code>æ–¹æ³•æ•æ‰æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºçš„é”™è¯¯ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒPromise çš„å†™æ³•åªæ˜¯å›è°ƒå‡½æ•°çš„æ”¹è¿›ï¼Œä½¿ç”¨<code>then</code>æ–¹æ³•ä»¥åï¼Œå¼‚æ­¥ä»»åŠ¡çš„ä¸¤æ®µæ‰§è¡Œçœ‹å¾—æ›´æ¸…æ¥šäº†ï¼Œé™¤æ­¤ä»¥å¤–ï¼Œå¹¶æ— æ–°æ„ã€‚</p>
<p>Promise çš„æœ€å¤§é—®é¢˜æ˜¯ä»£ç å†—ä½™ï¼ŒåŸæ¥çš„ä»»åŠ¡è¢« Promise åŒ…è£…äº†ä¸€ä¸‹ï¼Œä¸ç®¡ä»€ä¹ˆæ“ä½œï¼Œä¸€çœ¼çœ‹å»éƒ½æ˜¯ä¸€å †<code>then</code>ï¼ŒåŸæ¥çš„è¯­ä¹‰å˜å¾—å¾ˆä¸æ¸…æ¥šã€‚</p>
<p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„å†™æ³•å‘¢ï¼Ÿ</p>
<h2 id="Generatorå‡½æ•°"><a href="#Generatorå‡½æ•°" class="headerlink" title="Generatorå‡½æ•°"></a>Generatorå‡½æ•°</h2><h3 id="åç¨‹"><a href="#åç¨‹" class="headerlink" title="åç¨‹"></a>åç¨‹</h3><p>ä¼ ç»Ÿçš„ç¼–ç¨‹è¯­è¨€ï¼Œæ—©æœ‰å¼‚æ­¥ç¼–ç¨‹çš„è§£å†³æ–¹æ¡ˆï¼ˆå…¶å®æ˜¯å¤šä»»åŠ¡çš„è§£å†³æ–¹æ¡ˆï¼‰ã€‚å…¶ä¸­æœ‰ä¸€ç§å«åšâ€åç¨‹â€ï¼ˆcoroutineï¼‰ï¼Œæ„æ€æ˜¯å¤šä¸ªçº¿ç¨‹äº’ç›¸åä½œï¼Œå®Œæˆå¼‚æ­¥ä»»åŠ¡ã€‚</p>
<p>åç¨‹æœ‰ç‚¹åƒå‡½æ•°ï¼Œåˆæœ‰ç‚¹åƒçº¿ç¨‹ã€‚å®ƒçš„è¿è¡Œæµç¨‹å¤§è‡´å¦‚ä¸‹ã€‚</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼Œåç¨‹<code>A</code>å¼€å§‹æ‰§è¡Œã€‚</li>
<li>ç¬¬äºŒæ­¥ï¼Œåç¨‹<code>A</code>æ‰§è¡Œåˆ°ä¸€åŠï¼Œè¿›å…¥æš‚åœï¼Œæ‰§è¡Œæƒè½¬ç§»åˆ°åç¨‹<code>B</code>ã€‚</li>
<li>ç¬¬ä¸‰æ­¥ï¼Œï¼ˆä¸€æ®µæ—¶é—´åï¼‰åç¨‹<code>B</code>äº¤è¿˜æ‰§è¡Œæƒã€‚</li>
<li>ç¬¬å››æ­¥ï¼Œåç¨‹<code>A</code>æ¢å¤æ‰§è¡Œã€‚</li>
</ul>
<p>ä¸Šé¢æµç¨‹çš„åç¨‹<code>A</code>ï¼Œå°±æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼Œå› ä¸ºå®ƒåˆ†æˆä¸¤æ®µï¼ˆæˆ–å¤šæ®µï¼‰æ‰§è¡Œã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œè¯»å–æ–‡ä»¶çš„åç¨‹å†™æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">function *asyncJob() {
  // ...å…¶ä»–ä»£ç 
  var f = yield readFile(fileA);
  // ...å…¶ä»–ä»£ç 
}
</code></pre>
<p>ä¸Šé¢ä»£ç çš„å‡½æ•°<code>asyncJob</code>æ˜¯ä¸€ä¸ªåç¨‹ï¼Œå®ƒçš„å¥¥å¦™å°±åœ¨å…¶ä¸­çš„<code>yield</code>å‘½ä»¤ã€‚å®ƒè¡¨ç¤ºæ‰§è¡Œåˆ°æ­¤å¤„ï¼Œæ‰§è¡Œæƒå°†äº¤ç»™å…¶ä»–åç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>yield</code>å‘½ä»¤æ˜¯å¼‚æ­¥ä¸¤ä¸ªé˜¶æ®µçš„åˆ†ç•Œçº¿ã€‚</p>
<p>åç¨‹é‡åˆ°<code>yield</code>å‘½ä»¤å°±æš‚åœï¼Œç­‰åˆ°æ‰§è¡Œæƒè¿”å›ï¼Œå†ä»æš‚åœçš„åœ°æ–¹ç»§ç»­å¾€åæ‰§è¡Œã€‚å®ƒçš„æœ€å¤§ä¼˜ç‚¹ï¼Œå°±æ˜¯ä»£ç çš„å†™æ³•éå¸¸åƒåŒæ­¥æ“ä½œï¼Œå¦‚æœå»é™¤<code>yield</code>å‘½ä»¤ï¼Œç®€ç›´ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<h3 id="Generator-å‡½æ•°çš„æ¦‚å¿µ"><a href="#Generator-å‡½æ•°çš„æ¦‚å¿µ" class="headerlink" title="Generator å‡½æ•°çš„æ¦‚å¿µ"></a>Generator å‡½æ•°çš„æ¦‚å¿µ</h3><p>Generator å‡½æ•°æ˜¯åç¨‹åœ¨ ES6 çš„å®ç°ï¼Œæœ€å¤§ç‰¹ç‚¹å°±æ˜¯å¯ä»¥äº¤å‡ºå‡½æ•°çš„æ‰§è¡Œæƒï¼ˆå³æš‚åœæ‰§è¡Œï¼‰ã€‚</p>
<p>æ•´ä¸ª Generator å‡½æ•°å°±æ˜¯ä¸€ä¸ªå°è£…çš„å¼‚æ­¥ä»»åŠ¡ï¼Œæˆ–è€…è¯´æ˜¯å¼‚æ­¥ä»»åŠ¡çš„å®¹å™¨ã€‚å¼‚æ­¥æ“ä½œéœ€è¦æš‚åœçš„åœ°æ–¹ï¼Œéƒ½ç”¨<code>yield</code>è¯­å¥æ³¨æ˜ã€‚Generator å‡½æ•°çš„æ‰§è¡Œæ–¹æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">function* gen(x) {
  var y = yield x + 2;
  return y;
}

var g = gen(1);
g.next() // { value: 3, done: false }
g.next() // { value: undefined, done: true }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨ Generator å‡½æ•°ï¼Œä¼šè¿”å›ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆï¼ˆå³éå†å™¨ï¼‰<code>g</code>ã€‚è¿™æ˜¯ Generator å‡½æ•°ä¸åŒäºæ™®é€šå‡½æ•°çš„å¦ä¸€ä¸ªåœ°æ–¹ï¼Œå³æ‰§è¡Œå®ƒä¸ä¼šè¿”å›ç»“æœï¼Œè¿”å›çš„æ˜¯æŒ‡é’ˆå¯¹è±¡ã€‚è°ƒç”¨æŒ‡é’ˆ<code>g</code>çš„<code>next</code>æ–¹æ³•ï¼Œä¼šç§»åŠ¨å†…éƒ¨æŒ‡é’ˆï¼ˆå³æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„ç¬¬ä¸€æ®µï¼‰ï¼ŒæŒ‡å‘ç¬¬ä¸€ä¸ªé‡åˆ°çš„<code>yield</code>è¯­å¥ï¼Œä¸Šä¾‹æ˜¯æ‰§è¡Œåˆ°<code>x + 2</code>ä¸ºæ­¢ã€‚</p>
<p>æ¢è¨€ä¹‹ï¼Œ<code>next</code>æ–¹æ³•çš„ä½œç”¨æ˜¯åˆ†é˜¶æ®µæ‰§è¡Œ<code>Generator</code>å‡½æ•°ã€‚æ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰é˜¶æ®µçš„ä¿¡æ¯ï¼ˆ<code>value</code>å±æ€§å’Œ<code>done</code>å±æ€§ï¼‰ã€‚<code>value</code>å±æ€§æ˜¯<code>yield</code>è¯­å¥åé¢è¡¨è¾¾å¼çš„å€¼ï¼Œè¡¨ç¤ºå½“å‰é˜¶æ®µçš„å€¼ï¼›<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤º Generator å‡½æ•°æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼Œå³æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚</p>
<h3 id="Generator-å‡½æ•°çš„æ•°æ®äº¤æ¢å’Œé”™è¯¯å¤„ç†"><a href="#Generator-å‡½æ•°çš„æ•°æ®äº¤æ¢å’Œé”™è¯¯å¤„ç†" class="headerlink" title="Generator å‡½æ•°çš„æ•°æ®äº¤æ¢å’Œé”™è¯¯å¤„ç†"></a>Generator å‡½æ•°çš„æ•°æ®äº¤æ¢å’Œé”™è¯¯å¤„ç†</h3><p>Generatorå‡½æ•°å¯ä»¥æš‚åœæ‰§è¡Œå’Œæ¢å¤æ‰§è¡Œï¼Œè¿™æ˜¯å®ƒèƒ½å°è£…å¼‚æ­¥ä»»åŠ¡çš„æ ¹æœ¬åŸå› ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜æœ‰ä¸¤ä¸ªç‰¹æ€§ï¼Œä½¿å®ƒå¯ä»¥ä½œä¸ºå¼‚æ­¥ç¼–ç¨‹çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼šå‡½æ•°ä½“å†…å¤–çš„æ•°æ®äº¤æ¢å’Œé”™è¯¯å¤„ç†æœºåˆ¶ã€‚</p>
<p>nextæ–¹æ³•è¿”å›å€¼çš„valueå±æ€§ï¼Œæ˜¯Generatorå‡½æ•°å‘å¤–è¾“å‡ºæ•°æ®ï¼›nextæ–¹æ³•è¿˜å¯ä»¥æ¥å—å‚æ•°ï¼Œè¿™æ˜¯å‘Generatorå‡½æ•°ä½“å†…è¾“å…¥æ•°æ®ã€‚</p>
<pre><code class="javascript">function* gen(x){
  var y = yield x + 2;
  return y;
}

var g = gen(1);
g.next() // { value: 3, done: false }
g.next(2) // { value: 2, done: true }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ªnextæ–¹æ³•çš„valueå±æ€§ï¼Œè¿”å›è¡¨è¾¾å¼<code>x + 2</code>çš„å€¼ï¼ˆ3ï¼‰ã€‚ç¬¬äºŒä¸ªnextæ–¹æ³•å¸¦æœ‰å‚æ•°2ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥ä¼ å…¥ Generator å‡½æ•°ï¼Œä½œä¸ºä¸Šä¸ªé˜¶æ®µå¼‚æ­¥ä»»åŠ¡çš„è¿”å›ç»“æœï¼Œè¢«å‡½æ•°ä½“å†…çš„å˜é‡yæ¥æ”¶ã€‚å› æ­¤ï¼Œè¿™ä¸€æ­¥çš„ value å±æ€§ï¼Œè¿”å›çš„å°±æ˜¯2ï¼ˆå˜é‡yçš„å€¼ï¼‰ã€‚</p>
<p>Generator å‡½æ•°å†…éƒ¨è¿˜å¯ä»¥éƒ¨ç½²é”™è¯¯å¤„ç†ä»£ç ï¼Œæ•è·å‡½æ•°ä½“å¤–æŠ›å‡ºçš„é”™è¯¯ã€‚</p>
<pre><code class="javascript">function* gen(x){
  try {
    var y = yield x + 2;
  } catch (e){
    console.log(e);
  }
  return y;
}

var g = gen(1);
g.next();
g.throw(&#39;å‡ºé”™äº†&#39;);
// å‡ºé”™äº†
</code></pre>
<p>ä¸Šé¢ä»£ç çš„æœ€åä¸€è¡Œï¼ŒGeneratorå‡½æ•°ä½“å¤–ï¼Œä½¿ç”¨æŒ‡é’ˆå¯¹è±¡çš„throwæ–¹æ³•æŠ›å‡ºçš„é”™è¯¯ï¼Œå¯ä»¥è¢«å‡½æ•°ä½“å†…çš„try â€¦catchä»£ç å—æ•è·ã€‚è¿™æ„å‘³ç€ï¼Œå‡ºé”™çš„ä»£ç ä¸å¤„ç†é”™è¯¯çš„ä»£ç ï¼Œå®ç°äº†æ—¶é—´å’Œç©ºé—´ä¸Šçš„åˆ†ç¦»ï¼Œè¿™å¯¹äºå¼‚æ­¥ç¼–ç¨‹æ— ç–‘æ˜¯å¾ˆé‡è¦çš„ã€‚</p>
<h3 id="å¼‚æ­¥ä»»åŠ¡çš„å°è£…"><a href="#å¼‚æ­¥ä»»åŠ¡çš„å°è£…" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡çš„å°è£…"></a>å¼‚æ­¥ä»»åŠ¡çš„å°è£…</h3><p>ä¸‹é¢çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ Generator å‡½æ•°ï¼Œæ‰§è¡Œä¸€ä¸ªçœŸå®çš„å¼‚æ­¥ä»»åŠ¡ã€‚</p>
<pre><code class="javascript">var fetch = require(&#39;node-fetch&#39;);

function* gen(){
  var url = &#39;https://api.github.com/users/github&#39;;
  var result = yield fetch(url);
  console.log(result.bio);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°å°è£…äº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œè¯¥æ“ä½œå…ˆè¯»å–ä¸€ä¸ªè¿œç¨‹æ¥å£ï¼Œç„¶åä»JSONæ ¼å¼çš„æ•°æ®è§£æä¿¡æ¯ã€‚å°±åƒå‰é¢è¯´è¿‡çš„ï¼Œè¿™æ®µä»£ç éå¸¸åƒåŒæ­¥æ“ä½œï¼Œé™¤äº†åŠ ä¸Šäº†yieldå‘½ä»¤ã€‚</p>
<p>æ‰§è¡Œè¿™æ®µä»£ç çš„æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">var g = gen();
var result = g.next();

result.value.then(function(data){
  return data.json();
}).then(function(data){
  g.next(data);
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œé¦–å…ˆæ‰§è¡ŒGeneratorå‡½æ•°ï¼Œè·å–éå†å™¨å¯¹è±¡ï¼Œç„¶åä½¿ç”¨next æ–¹æ³•ï¼ˆç¬¬äºŒè¡Œï¼‰ï¼Œæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„ç¬¬ä¸€é˜¶æ®µã€‚ç”±äºFetchæ¨¡å—è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå› æ­¤è¦ç”¨thenæ–¹æ³•è°ƒç”¨ä¸‹ä¸€ä¸ªnext æ–¹æ³•ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶ Generator å‡½æ•°å°†å¼‚æ­¥æ“ä½œè¡¨ç¤ºå¾—å¾ˆç®€æ´ï¼Œä½†æ˜¯æµç¨‹ç®¡ç†å´ä¸æ–¹ä¾¿ï¼ˆå³ä½•æ—¶æ‰§è¡Œç¬¬ä¸€é˜¶æ®µã€ä½•æ—¶æ‰§è¡Œç¬¬äºŒé˜¶æ®µï¼‰ã€‚</p>
<h2 id="Thunkå‡½æ•°"><a href="#Thunkå‡½æ•°" class="headerlink" title="Thunkå‡½æ•°"></a>Thunkå‡½æ•°</h2><h3 id="å‚æ•°çš„æ±‚å€¼ç­–ç•¥"><a href="#å‚æ•°çš„æ±‚å€¼ç­–ç•¥" class="headerlink" title="å‚æ•°çš„æ±‚å€¼ç­–ç•¥"></a>å‚æ•°çš„æ±‚å€¼ç­–ç•¥</h3><p>Thunkå‡½æ•°æ—©åœ¨ä¸Šä¸ªä¸–çºª60å¹´ä»£å°±è¯ç”Ÿäº†ã€‚</p>
<p>é‚£æ—¶ï¼Œç¼–ç¨‹è¯­è¨€åˆšåˆšèµ·æ­¥ï¼Œè®¡ç®—æœºå­¦å®¶è¿˜åœ¨ç ”ç©¶ï¼Œç¼–è¯‘å™¨æ€ä¹ˆå†™æ¯”è¾ƒå¥½ã€‚ä¸€ä¸ªäº‰è®ºçš„ç„¦ç‚¹æ˜¯â€æ±‚å€¼ç­–ç•¥â€ï¼Œå³å‡½æ•°çš„å‚æ•°åˆ°åº•åº”è¯¥ä½•æ—¶æ±‚å€¼ã€‚</p>
<pre><code class="javascript">var x = 1;

function f(m){
  return m * 2;
}

f(x + 5)
</code></pre>
<p>ä¸Šé¢ä»£ç å…ˆå®šä¹‰å‡½æ•°fï¼Œç„¶åå‘å®ƒä¼ å…¥è¡¨è¾¾å¼<code>x + 5</code>ã€‚è¯·é—®ï¼Œè¿™ä¸ªè¡¨è¾¾å¼åº”è¯¥ä½•æ—¶æ±‚å€¼ï¼Ÿ</p>
<p>ä¸€ç§æ„è§æ˜¯â€ä¼ å€¼è°ƒç”¨â€ï¼ˆcall by valueï¼‰ï¼Œå³åœ¨è¿›å…¥å‡½æ•°ä½“ä¹‹å‰ï¼Œå°±è®¡ç®—<code>x + 5</code>çš„å€¼ï¼ˆç­‰äº6ï¼‰ï¼Œå†å°†è¿™ä¸ªå€¼ä¼ å…¥å‡½æ•°f ã€‚Cè¯­è¨€å°±é‡‡ç”¨è¿™ç§ç­–ç•¥ã€‚</p>
<pre><code class="javascript">f(x + 5)
// ä¼ å€¼è°ƒç”¨æ—¶ï¼Œç­‰åŒäº
f(6)
</code></pre>
<p>å¦ä¸€ç§æ„è§æ˜¯â€ä¼ åè°ƒç”¨â€ï¼ˆcall by nameï¼‰ï¼Œå³ç›´æ¥å°†è¡¨è¾¾å¼<code>x + 5</code>ä¼ å…¥å‡½æ•°ä½“ï¼Œåªåœ¨ç”¨åˆ°å®ƒçš„æ—¶å€™æ±‚å€¼ã€‚Haskellè¯­è¨€é‡‡ç”¨è¿™ç§ç­–ç•¥ã€‚</p>
<pre><code class="javascript">f(x + 5)
// ä¼ åè°ƒç”¨æ—¶ï¼Œç­‰åŒäº
(x + 5) * 2
</code></pre>
<p>ä¼ å€¼è°ƒç”¨å’Œä¼ åè°ƒç”¨ï¼Œå“ªä¸€ç§æ¯”è¾ƒå¥½ï¼Ÿå›ç­”æ˜¯å„æœ‰åˆ©å¼Šã€‚ä¼ å€¼è°ƒç”¨æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å¯¹å‚æ•°æ±‚å€¼çš„æ—¶å€™ï¼Œå®é™…ä¸Šè¿˜æ²¡ç”¨åˆ°è¿™ä¸ªå‚æ•°ï¼Œæœ‰å¯èƒ½é€ æˆæ€§èƒ½æŸå¤±ã€‚</p>
<pre><code class="javascript">function f(a, b){
  return b;
}

f(3 * x * x - 2 * x - 1, x);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¤æ‚çš„è¡¨è¾¾å¼ï¼Œä½†æ˜¯å‡½æ•°ä½“å†…æ ¹æœ¬æ²¡ç”¨åˆ°ã€‚å¯¹è¿™ä¸ªå‚æ•°æ±‚å€¼ï¼Œå®é™…ä¸Šæ˜¯ä¸å¿…è¦çš„ã€‚å› æ­¤ï¼Œæœ‰ä¸€äº›è®¡ç®—æœºå­¦å®¶å€¾å‘äºâ€ä¼ åè°ƒç”¨â€ï¼Œå³åªåœ¨æ‰§è¡Œæ—¶æ±‚å€¼ã€‚</p>
<h3 id="Thunkå‡½æ•°çš„å«ä¹‰"><a href="#Thunkå‡½æ•°çš„å«ä¹‰" class="headerlink" title="Thunkå‡½æ•°çš„å«ä¹‰"></a>Thunkå‡½æ•°çš„å«ä¹‰</h3><p>ç¼–è¯‘å™¨çš„â€ä¼ åè°ƒç”¨â€å®ç°ï¼Œå¾€å¾€æ˜¯å°†å‚æ•°æ”¾åˆ°ä¸€ä¸ªä¸´æ—¶å‡½æ•°ä¹‹ä¸­ï¼Œå†å°†è¿™ä¸ªä¸´æ—¶å‡½æ•°ä¼ å…¥å‡½æ•°ä½“ã€‚è¿™ä¸ªä¸´æ—¶å‡½æ•°å°±å«åšThunkå‡½æ•°ã€‚</p>
<pre><code class="javascript">function f(m){
  return m * 2;
}

f(x + 5);

// ç­‰åŒäº

var thunk = function () {
  return x + 5;
};

function f(thunk){
  return thunk() * 2;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fçš„å‚æ•°<code>x + 5</code>è¢«ä¸€ä¸ªå‡½æ•°æ›¿æ¢äº†ã€‚å‡¡æ˜¯ç”¨åˆ°åŸå‚æ•°çš„åœ°æ–¹ï¼Œå¯¹<code>Thunk</code>å‡½æ•°æ±‚å€¼å³å¯ã€‚</p>
<p>è¿™å°±æ˜¯Thunkå‡½æ•°çš„å®šä¹‰ï¼Œå®ƒæ˜¯â€ä¼ åè°ƒç”¨â€çš„ä¸€ç§å®ç°ç­–ç•¥ï¼Œç”¨æ¥æ›¿æ¢æŸä¸ªè¡¨è¾¾å¼ã€‚</p>
<h3 id="JavaScriptè¯­è¨€çš„Thunkå‡½æ•°"><a href="#JavaScriptè¯­è¨€çš„Thunkå‡½æ•°" class="headerlink" title="JavaScriptè¯­è¨€çš„Thunkå‡½æ•°"></a>JavaScriptè¯­è¨€çš„Thunkå‡½æ•°</h3><p>JavaScriptè¯­è¨€æ˜¯ä¼ å€¼è°ƒç”¨ï¼Œå®ƒçš„Thunkå‡½æ•°å«ä¹‰æœ‰æ‰€ä¸åŒã€‚åœ¨JavaScriptè¯­è¨€ä¸­ï¼ŒThunkå‡½æ•°æ›¿æ¢çš„ä¸æ˜¯è¡¨è¾¾å¼ï¼Œè€Œæ˜¯å¤šå‚æ•°å‡½æ•°ï¼Œå°†å…¶æ›¿æ¢æˆå•å‚æ•°çš„ç‰ˆæœ¬ï¼Œä¸”åªæ¥å—å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚</p>
<pre><code class="javascript">// æ­£å¸¸ç‰ˆæœ¬çš„readFileï¼ˆå¤šå‚æ•°ç‰ˆæœ¬ï¼‰
fs.readFile(fileName, callback);

// Thunkç‰ˆæœ¬çš„readFileï¼ˆå•å‚æ•°ç‰ˆæœ¬ï¼‰
var Thunk = function (fileName){
  return function (callback){
    return fs.readFile(fileName, callback);
  };
};

var readFileThunk = Thunk(fileName);
readFileThunk(callback);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œfsæ¨¡å—çš„readFileæ–¹æ³•æ˜¯ä¸€ä¸ªå¤šå‚æ•°å‡½æ•°ï¼Œä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä¸ºæ–‡ä»¶åå’Œå›è°ƒå‡½æ•°ã€‚ç»è¿‡è½¬æ¢å™¨å¤„ç†ï¼Œå®ƒå˜æˆäº†ä¸€ä¸ªå•å‚æ•°å‡½æ•°ï¼Œåªæ¥å—å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªå•å‚æ•°ç‰ˆæœ¬ï¼Œå°±å«åšThunkå‡½æ•°ã€‚</p>
<p>ä»»ä½•å‡½æ•°ï¼Œåªè¦å‚æ•°æœ‰å›è°ƒå‡½æ•°ï¼Œå°±èƒ½å†™æˆThunkå‡½æ•°çš„å½¢å¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„Thunkå‡½æ•°è½¬æ¢å™¨ã€‚</p>
<pre><code class="javascript">// ES5ç‰ˆæœ¬
var Thunk = function(fn){
  return function (){
    var args = Array.prototype.slice.call(arguments);
    return function (callback){
      args.push(callback);
      return fn.apply(this, args);
    }
  };
};

// ES6ç‰ˆæœ¬
var Thunk = function(fn) {
  return function (...args) {
    return function (callback) {
      return fn.call(this, ...args, callback);
    }
  };
};
</code></pre>
<p>ä½¿ç”¨ä¸Šé¢çš„è½¬æ¢å™¨ï¼Œç”Ÿæˆ<code>fs.readFile</code>çš„Thunkå‡½æ•°ã€‚</p>
<pre><code class="javascript">var readFileThunk = Thunk(fs.readFile);
readFileThunk(fileA)(callback);
</code></pre>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">function f(a, cb) {
  cb(a);
}
let ft = Thunk(f);

let log = console.log.bind(console);
ft(1)(log) // 1
</code></pre>
<h3 id="Thunkifyæ¨¡å—"><a href="#Thunkifyæ¨¡å—" class="headerlink" title="Thunkifyæ¨¡å—"></a>Thunkifyæ¨¡å—</h3><p>ç”Ÿäº§ç¯å¢ƒçš„è½¬æ¢å™¨ï¼Œå»ºè®®ä½¿ç”¨Thunkifyæ¨¡å—ã€‚</p>
<p>é¦–å…ˆæ˜¯å®‰è£…ã€‚</p>
<pre><code class="bash">$ npm install thunkify
</code></pre>
<p>ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">var thunkify = require(&#39;thunkify&#39;);
var fs = require(&#39;fs&#39;);

var read = thunkify(fs.readFile);
read(&#39;package.json&#39;)(function(err, str){
  // ...
});
</code></pre>
<p>Thunkifyçš„æºç ä¸ä¸Šä¸€èŠ‚é‚£ä¸ªç®€å•çš„è½¬æ¢å™¨éå¸¸åƒã€‚</p>
<pre><code class="javascript">function thunkify(fn){
  return function(){
    var args = new Array(arguments.length);
    var ctx = this;

    for(var i = 0; i &lt; args.length; ++i) {
      args[i] = arguments[i];
    }

    return function(done){
      var called;

      args.push(function(){
        if (called) return;
        called = true;
        done.apply(null, arguments);
      });

      try {
        fn.apply(ctx, args);
      } catch (err) {
        done(err);
      }
    }
  }
};
</code></pre>
<p>å®ƒçš„æºç ä¸»è¦å¤šäº†ä¸€ä¸ªæ£€æŸ¥æœºåˆ¶ï¼Œå˜é‡<code>called</code>ç¡®ä¿å›è°ƒå‡½æ•°åªè¿è¡Œä¸€æ¬¡ã€‚è¿™æ ·çš„è®¾è®¡ä¸ä¸‹æ–‡çš„Generatorå‡½æ•°ç›¸å…³ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">function f(a, b, callback){
  var sum = a + b;
  callback(sum);
  callback(sum);
}

var ft = thunkify(f);
var print = console.log.bind(console);
ft(1, 2)(print);
// 3
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äº<code>thunkify</code>åªå…è®¸å›è°ƒå‡½æ•°æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥åªè¾“å‡ºä¸€è¡Œç»“æœã€‚</p>
<h3 id="Generator-å‡½æ•°çš„æµç¨‹ç®¡ç†"><a href="#Generator-å‡½æ•°çš„æµç¨‹ç®¡ç†" class="headerlink" title="Generator å‡½æ•°çš„æµç¨‹ç®¡ç†"></a>Generator å‡½æ•°çš„æµç¨‹ç®¡ç†</h3><p>ä½ å¯èƒ½ä¼šé—®ï¼Œ Thunkå‡½æ•°æœ‰ä»€ä¹ˆç”¨ï¼Ÿå›ç­”æ˜¯ä»¥å‰ç¡®å®æ²¡ä»€ä¹ˆç”¨ï¼Œä½†æ˜¯ES6æœ‰äº†Generatorå‡½æ•°ï¼ŒThunkå‡½æ•°ç°åœ¨å¯ä»¥ç”¨äºGeneratorå‡½æ•°çš„è‡ªåŠ¨æµç¨‹ç®¡ç†ã€‚</p>
<p>Generatorå‡½æ•°å¯ä»¥è‡ªåŠ¨æ‰§è¡Œã€‚</p>
<pre><code class="javascript">function* gen() {
  // ...
}

var g = gen();
var res = g.next();

while(!res.done){
  console.log(res.value);
  res = g.next();
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°<code>gen</code>ä¼šè‡ªåŠ¨æ‰§è¡Œå®Œæ‰€æœ‰æ­¥éª¤ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™ä¸é€‚åˆå¼‚æ­¥æ“ä½œã€‚å¦‚æœå¿…é¡»ä¿è¯å‰ä¸€æ­¥æ‰§è¡Œå®Œï¼Œæ‰èƒ½æ‰§è¡Œåä¸€æ­¥ï¼Œä¸Šé¢çš„è‡ªåŠ¨æ‰§è¡Œå°±ä¸å¯è¡Œã€‚è¿™æ—¶ï¼ŒThunkå‡½æ•°å°±èƒ½æ´¾ä¸Šç”¨å¤„ã€‚ä»¥è¯»å–æ–‡ä»¶ä¸ºä¾‹ã€‚ä¸‹é¢çš„Generatorå‡½æ•°å°è£…äº†ä¸¤ä¸ªå¼‚æ­¥æ“ä½œã€‚</p>
<pre><code class="javascript">var fs = require(&#39;fs&#39;);
var thunkify = require(&#39;thunkify&#39;);
var readFile = thunkify(fs.readFile);

var gen = function* (){
  var r1 = yield readFile(&#39;/etc/fstab&#39;);
  console.log(r1.toString());
  var r2 = yield readFile(&#39;/etc/shells&#39;);
  console.log(r2.toString());
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œyieldå‘½ä»¤ç”¨äºå°†ç¨‹åºçš„æ‰§è¡Œæƒç§»å‡ºGeneratorå‡½æ•°ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ç§æ–¹æ³•ï¼Œå°†æ‰§è¡Œæƒå†äº¤è¿˜ç»™Generatorå‡½æ•°ã€‚</p>
<p>è¿™ç§æ–¹æ³•å°±æ˜¯Thunkå‡½æ•°ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨å›è°ƒå‡½æ•°é‡Œï¼Œå°†æ‰§è¡Œæƒäº¤è¿˜ç»™Generatorå‡½æ•°ã€‚ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬å…ˆçœ‹å¦‚ä½•æ‰‹åŠ¨æ‰§è¡Œä¸Šé¢è¿™ä¸ªGeneratorå‡½æ•°ã€‚</p>
<pre><code class="javascript">var g = gen();

var r1 = g.next();
r1.value(function(err, data){
  if (err) throw err;
  var r2 = g.next(data);
  r2.value(function(err, data){
    if (err) throw err;
    g.next(data);
  });
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡gæ˜¯Generatorå‡½æ•°çš„å†…éƒ¨æŒ‡é’ˆï¼Œè¡¨ç¤ºç›®å‰æ‰§è¡Œåˆ°å“ªä¸€æ­¥ã€‚nextæ–¹æ³•è´Ÿè´£å°†æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€æ­¥ï¼Œå¹¶è¿”å›è¯¥æ­¥çš„ä¿¡æ¯ï¼ˆvalueå±æ€§å’Œdoneå±æ€§ï¼‰ã€‚</p>
<p>ä»”ç»†æŸ¥çœ‹ä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥å‘ç°Generatorå‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå…¶å®æ˜¯å°†åŒä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåå¤ä¼ å…¥nextæ–¹æ³•çš„valueå±æ€§ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥ç”¨é€’å½’æ¥è‡ªåŠ¨å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<h3 id="Thunkå‡½æ•°çš„è‡ªåŠ¨æµç¨‹ç®¡ç†"><a href="#Thunkå‡½æ•°çš„è‡ªåŠ¨æµç¨‹ç®¡ç†" class="headerlink" title="Thunkå‡½æ•°çš„è‡ªåŠ¨æµç¨‹ç®¡ç†"></a>Thunkå‡½æ•°çš„è‡ªåŠ¨æµç¨‹ç®¡ç†</h3><p>Thunkå‡½æ•°çœŸæ­£çš„å¨åŠ›ï¼Œåœ¨äºå¯ä»¥è‡ªåŠ¨æ‰§è¡ŒGeneratorå‡½æ•°ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªåŸºäºThunkå‡½æ•°çš„Generatoræ‰§è¡Œå™¨ã€‚</p>
<pre><code class="javascript">function run(fn) {
  var gen = fn();

  function next(err, data) {
    var result = gen.next(data);
    if (result.done) return;
    result.value(next);
  }

  next();
}

function* g() {
  // ...
}

run(g);
</code></pre>
<p>ä¸Šé¢ä»£ç çš„<code>run</code>å‡½æ•°ï¼Œå°±æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚å†…éƒ¨çš„<code>next</code>å‡½æ•°å°±æ˜¯Thunkçš„å›è°ƒå‡½æ•°ã€‚<code>next</code>å‡½æ•°å…ˆå°†æŒ‡é’ˆç§»åˆ°Generatorå‡½æ•°çš„ä¸‹ä¸€æ­¥ï¼ˆ<code>gen.next</code>æ–¹æ³•ï¼‰ï¼Œç„¶ååˆ¤æ–­Generatorå‡½æ•°æ˜¯å¦ç»“æŸï¼ˆ<code>result.done</code>å±æ€§ï¼‰ï¼Œå¦‚æœæ²¡ç»“æŸï¼Œå°±å°†<code>next</code>å‡½æ•°å†ä¼ å…¥Thunkå‡½æ•°ï¼ˆ<code>result.value</code>å±æ€§ï¼‰ï¼Œå¦åˆ™å°±ç›´æ¥é€€å‡ºã€‚</p>
<p>æœ‰äº†è¿™ä¸ªæ‰§è¡Œå™¨ï¼Œæ‰§è¡ŒGeneratorå‡½æ•°æ–¹ä¾¿å¤šäº†ã€‚ä¸ç®¡å†…éƒ¨æœ‰å¤šå°‘ä¸ªå¼‚æ­¥æ“ä½œï¼Œç›´æ¥æŠŠGeneratorå‡½æ•°ä¼ å…¥<code>run</code>å‡½æ•°å³å¯ã€‚å½“ç„¶ï¼Œå‰ææ˜¯æ¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œéƒ½è¦æ˜¯Thunkå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè·Ÿåœ¨<code>yield</code>å‘½ä»¤åé¢çš„å¿…é¡»æ˜¯Thunkå‡½æ•°ã€‚</p>
<pre><code class="javascript">var g = function* (){
  var f1 = yield readFile(&#39;fileA&#39;);
  var f2 = yield readFile(&#39;fileB&#39;);
  // ...
  var fn = yield readFile(&#39;fileN&#39;);
};

run(g);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>g</code>å°è£…äº†<code>n</code>ä¸ªå¼‚æ­¥çš„è¯»å–æ–‡ä»¶æ“ä½œï¼Œåªè¦æ‰§è¡Œ<code>run</code>å‡½æ•°ï¼Œè¿™äº›æ“ä½œå°±ä¼šè‡ªåŠ¨å®Œæˆã€‚è¿™æ ·ä¸€æ¥ï¼Œå¼‚æ­¥æ“ä½œä¸ä»…å¯ä»¥å†™å¾—åƒåŒæ­¥æ“ä½œï¼Œè€Œä¸”ä¸€è¡Œä»£ç å°±å¯ä»¥æ‰§è¡Œã€‚</p>
<p>Thunkå‡½æ•°å¹¶ä¸æ˜¯Generatorå‡½æ•°è‡ªåŠ¨æ‰§è¡Œçš„å”¯ä¸€æ–¹æ¡ˆã€‚å› ä¸ºè‡ªåŠ¨æ‰§è¡Œçš„å…³é”®æ˜¯ï¼Œå¿…é¡»æœ‰ä¸€ç§æœºåˆ¶ï¼Œè‡ªåŠ¨æ§åˆ¶Generatorå‡½æ•°çš„æµç¨‹ï¼Œæ¥æ”¶å’Œäº¤è¿˜ç¨‹åºçš„æ‰§è¡Œæƒã€‚å›è°ƒå‡½æ•°å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼ŒPromise å¯¹è±¡ä¹Ÿå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<h2 id="coæ¨¡å—"><a href="#coæ¨¡å—" class="headerlink" title="coæ¨¡å—"></a>coæ¨¡å—</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p><a href="https://github.com/tj/co" target="_blank" rel="external">coæ¨¡å—</a>æ˜¯è‘—åç¨‹åºå‘˜TJ Holowaychukäº2013å¹´6æœˆå‘å¸ƒçš„ä¸€ä¸ªå°å·¥å…·ï¼Œç”¨äºGeneratorå‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œã€‚</p>
<p>æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªGeneratorå‡½æ•°ï¼Œç”¨äºä¾æ¬¡è¯»å–ä¸¤ä¸ªæ–‡ä»¶ã€‚</p>
<pre><code class="javascript">var gen = function* (){
  var f1 = yield readFile(&#39;/etc/fstab&#39;);
  var f2 = yield readFile(&#39;/etc/shells&#39;);
  console.log(f1.toString());
  console.log(f2.toString());
};
</code></pre>
<p>coæ¨¡å—å¯ä»¥è®©ä½ ä¸ç”¨ç¼–å†™Generatorå‡½æ•°çš„æ‰§è¡Œå™¨ã€‚</p>
<pre><code class="javascript">var co = require(&#39;co&#39;);
co(gen);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°åªè¦ä¼ å…¥coå‡½æ•°ï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚</p>
<p>coå‡½æ•°è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå› æ­¤å¯ä»¥ç”¨thenæ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚</p>
<pre><code class="javascript">co(gen).then(function (){
  console.log(&#39;Generator å‡½æ•°æ‰§è¡Œå®Œæˆ&#39;);
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç­‰åˆ°Generatorå‡½æ•°æ‰§è¡Œç»“æŸï¼Œå°±ä¼šè¾“å‡ºä¸€è¡Œæç¤ºã€‚</p>
<h3 id="coæ¨¡å—çš„åŸç†"><a href="#coæ¨¡å—çš„åŸç†" class="headerlink" title="coæ¨¡å—çš„åŸç†"></a>coæ¨¡å—çš„åŸç†</h3><p>ä¸ºä»€ä¹ˆ co å¯ä»¥è‡ªåŠ¨æ‰§è¡Œ Generator å‡½æ•°ï¼Ÿ</p>
<p>å‰é¢è¯´è¿‡ï¼ŒGenerator å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„å®¹å™¨ã€‚å®ƒçš„è‡ªåŠ¨æ‰§è¡Œéœ€è¦ä¸€ç§æœºåˆ¶ï¼Œå½“å¼‚æ­¥æ“ä½œæœ‰äº†ç»“æœï¼Œèƒ½å¤Ÿè‡ªåŠ¨äº¤å›æ‰§è¡Œæƒã€‚</p>
<p>ä¸¤ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<p>ï¼ˆ1ï¼‰å›è°ƒå‡½æ•°ã€‚å°†å¼‚æ­¥æ“ä½œåŒ…è£…æˆ Thunk å‡½æ•°ï¼Œåœ¨å›è°ƒå‡½æ•°é‡Œé¢äº¤å›æ‰§è¡Œæƒã€‚</p>
<p>ï¼ˆ2ï¼‰Promise å¯¹è±¡ã€‚å°†å¼‚æ­¥æ“ä½œåŒ…è£…æˆ Promise å¯¹è±¡ï¼Œç”¨<code>then</code>æ–¹æ³•äº¤å›æ‰§è¡Œæƒã€‚</p>
<p>co æ¨¡å—å…¶å®å°±æ˜¯å°†ä¸¤ç§è‡ªåŠ¨æ‰§è¡Œå™¨ï¼ˆThunk å‡½æ•°å’Œ Promise å¯¹è±¡ï¼‰ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ¨¡å—ã€‚ä½¿ç”¨ co çš„å‰ææ¡ä»¶æ˜¯ï¼ŒGenerator å‡½æ•°çš„<code>yield</code>å‘½ä»¤åé¢ï¼Œåªèƒ½æ˜¯ Thunk å‡½æ•°æˆ– Promise å¯¹è±¡ã€‚</p>
<p>ä¸Šä¸€èŠ‚å·²ç»ä»‹ç»äº†åŸºäº Thunk å‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚ä¸‹é¢æ¥çœ‹ï¼ŒåŸºäº Promise å¯¹è±¡çš„è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚è¿™æ˜¯ç†è§£ co æ¨¡å—å¿…é¡»çš„ã€‚</p>
<h3 id="åŸºäº-Promise-å¯¹è±¡çš„è‡ªåŠ¨æ‰§è¡Œ"><a href="#åŸºäº-Promise-å¯¹è±¡çš„è‡ªåŠ¨æ‰§è¡Œ" class="headerlink" title="åŸºäº Promise å¯¹è±¡çš„è‡ªåŠ¨æ‰§è¡Œ"></a>åŸºäº Promise å¯¹è±¡çš„è‡ªåŠ¨æ‰§è¡Œ</h3><p>è¿˜æ˜¯æ²¿ç”¨ä¸Šé¢çš„ä¾‹å­ã€‚é¦–å…ˆï¼ŒæŠŠ<code>fs</code>æ¨¡å—çš„<code>readFile</code>æ–¹æ³•åŒ…è£…æˆä¸€ä¸ª Promise å¯¹è±¡ã€‚</p>
<pre><code class="javascript">var fs = require(&#39;fs&#39;);

var readFile = function (fileName){
  return new Promise(function (resolve, reject){
    fs.readFile(fileName, function(error, data){
      if (error) return reject(error);
      resolve(data);
    });
  });
};

var gen = function* (){
  var f1 = yield readFile(&#39;/etc/fstab&#39;);
  var f2 = yield readFile(&#39;/etc/shells&#39;);
  console.log(f1.toString());
  console.log(f2.toString());
};
</code></pre>
<p>ç„¶åï¼Œæ‰‹åŠ¨æ‰§è¡Œä¸Šé¢çš„ Generator å‡½æ•°ã€‚</p>
<pre><code class="javascript">var g = gen();

g.next().value.then(function(data){
  g.next(data).value.then(function(data){
    g.next(data);
  });
});
</code></pre>
<p>æ‰‹åŠ¨æ‰§è¡Œå…¶å®å°±æ˜¯ç”¨<code>then</code>æ–¹æ³•ï¼Œå±‚å±‚æ·»åŠ å›è°ƒå‡½æ•°ã€‚ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œå°±å¯ä»¥å†™å‡ºä¸€ä¸ªè‡ªåŠ¨æ‰§è¡Œå™¨ã€‚</p>
<pre><code class="javascript">function run(gen){
  var g = gen();

  function next(data){
    var result = g.next(data);
    if (result.done) return result.value;
    result.value.then(function(data){
      next(data);
    });
  }

  next();
}

run(gen);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦ Generator å‡½æ•°è¿˜æ²¡æ‰§è¡Œåˆ°æœ€åä¸€æ­¥ï¼Œ<code>next</code>å‡½æ•°å°±è°ƒç”¨è‡ªèº«ï¼Œä»¥æ­¤å®ç°è‡ªåŠ¨æ‰§è¡Œã€‚</p>
<h3 id="co-æ¨¡å—çš„æºç "><a href="#co-æ¨¡å—çš„æºç " class="headerlink" title="co æ¨¡å—çš„æºç "></a>co æ¨¡å—çš„æºç </h3><p>co å°±æ˜¯ä¸Šé¢é‚£ä¸ªè‡ªåŠ¨æ‰§è¡Œå™¨çš„æ‰©å±•ï¼Œå®ƒçš„æºç åªæœ‰å‡ åè¡Œï¼Œéå¸¸ç®€å•ã€‚</p>
<p>é¦–å…ˆï¼Œco å‡½æ•°æ¥å— Generator å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚</p>
<pre><code class="javascript">function co(gen) {
  var ctx = this;

  return new Promise(function(resolve, reject) {
  });
}
</code></pre>
<p>åœ¨è¿”å›çš„ Promise å¯¹è±¡é‡Œé¢ï¼Œco å…ˆæ£€æŸ¥å‚æ•°<code>gen</code>æ˜¯å¦ä¸º Generator å‡½æ•°ã€‚å¦‚æœæ˜¯ï¼Œå°±æ‰§è¡Œè¯¥å‡½æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆå¯¹è±¡ï¼›å¦‚æœä¸æ˜¯å°±è¿”å›ï¼Œå¹¶å°† Promise å¯¹è±¡çš„çŠ¶æ€æ”¹ä¸º<code>resolved</code>ã€‚</p>
<pre><code class="javascript">function co(gen) {
  var ctx = this;

  return new Promise(function(resolve, reject) {
    if (typeof gen === &#39;function&#39;) gen = gen.call(ctx);
    if (!gen || typeof gen.next !== &#39;function&#39;) return resolve(gen);
  });
}
</code></pre>
<p>æ¥ç€ï¼Œco å°† Generator å‡½æ•°çš„å†…éƒ¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼ŒåŒ…è£…æˆ<code>onFulfilled</code>å‡½æ•°ã€‚è¿™ä¸»è¦æ˜¯ä¸ºäº†èƒ½å¤Ÿæ•æ‰æŠ›å‡ºçš„é”™è¯¯ã€‚</p>
<pre><code class="javascript">function co(gen) {
  var ctx = this;

  return new Promise(function(resolve, reject) {
    if (typeof gen === &#39;function&#39;) gen = gen.call(ctx);
    if (!gen || typeof gen.next !== &#39;function&#39;) return resolve(gen);

    onFulfilled();
    function onFulfilled(res) {
      var ret;
      try {
        ret = gen.next(res);
      } catch (e) {
        return reject(e);
      }
      next(ret);
    }
  });
}
</code></pre>
<p>æœ€åï¼Œå°±æ˜¯å…³é”®çš„<code>next</code>å‡½æ•°ï¼Œå®ƒä¼šåå¤è°ƒç”¨è‡ªèº«ã€‚</p>
<pre><code class="javascript">function next(ret) {
  if (ret.done) return resolve(ret.value);
  var value = toPromise.call(ctx, ret.value);
  if (value &amp;&amp; isPromise(value)) return value.then(onFulfilled, onRejected);
  return onRejected(
    new TypeError(
      &#39;You may only yield a function, promise, generator, array, or object, &#39;
      + &#39;but the following object was passed: &quot;&#39;
      + String(ret.value)
      + &#39;&quot;&#39;
    )
  );
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>next</code>å‡½æ•°çš„å†…éƒ¨ä»£ç ï¼Œä¸€å…±åªæœ‰å››è¡Œå‘½ä»¤ã€‚</p>
<p>ç¬¬ä¸€è¡Œï¼Œæ£€æŸ¥å½“å‰æ˜¯å¦ä¸º Generator å‡½æ•°çš„æœ€åä¸€æ­¥ï¼Œå¦‚æœæ˜¯å°±è¿”å›ã€‚</p>
<p>ç¬¬äºŒè¡Œï¼Œç¡®ä¿æ¯ä¸€æ­¥çš„è¿”å›å€¼ï¼Œæ˜¯ Promise å¯¹è±¡ã€‚</p>
<p>ç¬¬ä¸‰è¡Œï¼Œä½¿ç”¨<code>then</code>æ–¹æ³•ï¼Œä¸ºè¿”å›å€¼åŠ ä¸Šå›è°ƒå‡½æ•°ï¼Œç„¶åé€šè¿‡<code>onFulfilled</code>å‡½æ•°å†æ¬¡è°ƒç”¨<code>next</code>å‡½æ•°ã€‚</p>
<p>ç¬¬å››è¡Œï¼Œåœ¨å‚æ•°ä¸ç¬¦åˆè¦æ±‚çš„æƒ…å†µä¸‹ï¼ˆå‚æ•°é Thunk å‡½æ•°å’Œ Promise å¯¹è±¡ï¼‰ï¼Œå°† Promise å¯¹è±¡çš„çŠ¶æ€æ”¹ä¸º<code>rejected</code>ï¼Œä»è€Œç»ˆæ­¢æ‰§è¡Œã€‚</p>
<h3 id="å¤„ç†å¹¶å‘çš„å¼‚æ­¥æ“ä½œ"><a href="#å¤„ç†å¹¶å‘çš„å¼‚æ­¥æ“ä½œ" class="headerlink" title="å¤„ç†å¹¶å‘çš„å¼‚æ­¥æ“ä½œ"></a>å¤„ç†å¹¶å‘çš„å¼‚æ­¥æ“ä½œ</h3><p>co æ”¯æŒå¹¶å‘çš„å¼‚æ­¥æ“ä½œï¼Œå³å…è®¸æŸäº›æ“ä½œåŒæ—¶è¿›è¡Œï¼Œç­‰åˆ°å®ƒä»¬å…¨éƒ¨å®Œæˆï¼Œæ‰è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p>
<p>è¿™æ—¶ï¼Œè¦æŠŠå¹¶å‘çš„æ“ä½œéƒ½æ”¾åœ¨æ•°ç»„æˆ–å¯¹è±¡é‡Œé¢ï¼Œè·Ÿåœ¨<code>yield</code>è¯­å¥åé¢ã€‚</p>
<pre><code class="javascript">// æ•°ç»„çš„å†™æ³•
co(function* () {
  var res = yield [
    Promise.resolve(1),
    Promise.resolve(2)
  ];
  console.log(res);
}).catch(onerror);

// å¯¹è±¡çš„å†™æ³•
co(function* () {
  var res = yield {
    1: Promise.resolve(1),
    2: Promise.resolve(2),
  };
  console.log(res);
}).catch(onerror);
</code></pre>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">co(function* () {
  var values = [n1, n2, n3];
  yield values.map(somethingAsync);
});

function* somethingAsync(x) {
  // do something async
  return y
}
</code></pre>
<p>ä¸Šé¢çš„ä»£ç å…è®¸å¹¶å‘ä¸‰ä¸ª<code>somethingAsync</code>å¼‚æ­¥æ“ä½œï¼Œç­‰åˆ°å®ƒä»¬å…¨éƒ¨å®Œæˆï¼Œæ‰ä¼šè¿›è¡Œä¸‹ä¸€æ­¥ã€‚<br>ITæŠ€æœ¯åˆ†äº«å°½åœ¨ğŸ”— <a href="http://microzz.com">æ¶µæœˆå¤©-microzz.com</a><br><a href="https://microzz.com">https://microzz.com</a></p>
<h2 id="asyncå‡½æ•°"><a href="#asyncå‡½æ•°" class="headerlink" title="asyncå‡½æ•°"></a>asyncå‡½æ•°</h2><h3 id="å«ä¹‰"><a href="#å«ä¹‰" class="headerlink" title="å«ä¹‰"></a>å«ä¹‰</h3><p>ES2017 æ ‡å‡†æä¾›äº†<code>async</code>å‡½æ•°ï¼Œä½¿å¾—å¼‚æ­¥æ“ä½œå˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚</p>
<p><code>async</code>å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿä¸€å¥è¯ï¼Œ<code>async</code>å‡½æ•°å°±æ˜¯ Generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚å‰æ–‡æœ‰ä¸€ä¸ª Generator å‡½æ•°ï¼Œä¾æ¬¡è¯»å–ä¸¤ä¸ªæ–‡ä»¶ã€‚</p>
<pre><code class="javascript">var fs = require(&#39;fs&#39;);

var readFile = function (fileName) {
  return new Promise(function (resolve, reject) {
    fs.readFile(fileName, function(error, data) {
      if (error) reject(error);
      resolve(data);
    });
  });
};

var gen = function* (){
  var f1 = yield readFile(&#39;/etc/fstab&#39;);
  var f2 = yield readFile(&#39;/etc/shells&#39;);
  console.log(f1.toString());
  console.log(f2.toString());
};
</code></pre>
<p>å†™æˆ<code>async</code>å‡½æ•°ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">var asyncReadFile = async function (){
  var f1 = await readFile(&#39;/etc/fstab&#39;);
  var f2 = await readFile(&#39;/etc/shells&#39;);
  console.log(f1.toString());
  console.log(f2.toString());
};
</code></pre>
<p>ä¸€æ¯”è¾ƒå°±ä¼šå‘ç°ï¼Œ<code>async</code>å‡½æ•°å°±æ˜¯å°† Generator å‡½æ•°çš„æ˜Ÿå·ï¼ˆ<code>*</code>ï¼‰æ›¿æ¢æˆ<code>async</code>ï¼Œå°†<code>yield</code>æ›¿æ¢æˆ<code>await</code>ï¼Œä»…æ­¤è€Œå·²ã€‚</p>
<p><code>async</code>å‡½æ•°å¯¹ Generator å‡½æ•°çš„æ”¹è¿›ï¼Œä½“ç°åœ¨ä»¥ä¸‹å››ç‚¹ã€‚</p>
<p>ï¼ˆ1ï¼‰å†…ç½®æ‰§è¡Œå™¨ã€‚Generator å‡½æ•°çš„æ‰§è¡Œå¿…é¡»é æ‰§è¡Œå™¨ï¼Œæ‰€ä»¥æ‰æœ‰äº†<code>co</code>æ¨¡å—ï¼Œè€Œ<code>async</code>å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>async</code>å‡½æ•°çš„æ‰§è¡Œï¼Œä¸æ™®é€šå‡½æ•°ä¸€æ¨¡ä¸€æ ·ï¼Œåªè¦ä¸€è¡Œã€‚</p>
<pre><code class="javascript">var result = asyncReadFile();
</code></pre>
<p>ä¸Šé¢çš„ä»£ç è°ƒç”¨äº†<code>asyncReadFile</code>å‡½æ•°ï¼Œç„¶åå®ƒå°±ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œè¾“å‡ºæœ€åç»“æœã€‚è¿™å®Œå…¨ä¸åƒ Generator å‡½æ•°ï¼Œéœ€è¦è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œæˆ–è€…ç”¨<code>co</code>æ¨¡å—ï¼Œæ‰èƒ½å¾—åˆ°çœŸæ­£æ‰§è¡Œï¼Œå¾—åˆ°æœ€åç»“æœã€‚</p>
<p>ï¼ˆ2ï¼‰æ›´å¥½çš„è¯­ä¹‰ã€‚<code>async</code>å’Œ<code>await</code>ï¼Œæ¯”èµ·æ˜Ÿå·å’Œ<code>yield</code>ï¼Œè¯­ä¹‰æ›´æ¸…æ¥šäº†ã€‚<code>async</code>è¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œ<code>await</code>è¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚</p>
<p>ï¼ˆ3ï¼‰æ›´å¹¿çš„é€‚ç”¨æ€§ã€‚ <code>co</code>æ¨¡å—çº¦å®šï¼Œ<code>yield</code>å‘½ä»¤åé¢åªèƒ½æ˜¯ Thunk å‡½æ•°æˆ– Promise å¯¹è±¡ï¼Œè€Œ<code>async</code>å‡½æ•°çš„<code>await</code>å‘½ä»¤åé¢ï¼Œå¯ä»¥æ˜¯Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œä½†è¿™æ—¶ç­‰åŒäºåŒæ­¥æ“ä½œï¼‰ã€‚</p>
<p>ï¼ˆ4ï¼‰è¿”å›å€¼æ˜¯ Promiseã€‚<code>async</code>å‡½æ•°çš„è¿”å›å€¼æ˜¯ Promise å¯¹è±¡ï¼Œè¿™æ¯” Generator å‡½æ•°çš„è¿”å›å€¼æ˜¯ Iterator å¯¹è±¡æ–¹ä¾¿å¤šäº†ã€‚ä½ å¯ä»¥ç”¨<code>then</code>æ–¹æ³•æŒ‡å®šä¸‹ä¸€æ­¥çš„æ“ä½œã€‚</p>
<p>è¿›ä¸€æ­¥è¯´ï¼Œ<code>async</code>å‡½æ•°å®Œå…¨å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œ<code>await</code>å‘½ä»¤å°±æ˜¯å†…éƒ¨<code>then</code>å‘½ä»¤çš„è¯­æ³•ç³–ã€‚</p>
<h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p><code>async</code>å‡½æ•°çš„è¯­æ³•è§„åˆ™æ€»ä½“ä¸Šæ¯”è¾ƒç®€å•ï¼Œéš¾ç‚¹æ˜¯é”™è¯¯å¤„ç†æœºåˆ¶ã€‚</p>
<p>ï¼ˆ1ï¼‰<code>async</code>å‡½æ•°è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚</p>
<p><code>async</code>å‡½æ•°å†…éƒ¨<code>return</code>è¯­å¥è¿”å›çš„å€¼ï¼Œä¼šæˆä¸º<code>then</code>æ–¹æ³•å›è°ƒå‡½æ•°çš„å‚æ•°ã€‚</p>
<pre><code class="javascript">async function f() {
  return &#39;hello world&#39;;
}

f().then(v =&gt; console.log(v))
// &quot;hello world&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>f</code>å†…éƒ¨<code>return</code>å‘½ä»¤è¿”å›çš„å€¼ï¼Œä¼šè¢«<code>then</code>æ–¹æ³•å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚</p>
<p><code>async</code>å‡½æ•°å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œä¼šå¯¼è‡´è¿”å›çš„ Promise å¯¹è±¡å˜ä¸º<code>reject</code>çŠ¶æ€ã€‚æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡ä¼šè¢«<code>catch</code>æ–¹æ³•å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚</p>
<pre><code class="javascript">async function f() {
  throw new Error(&#39;å‡ºé”™äº†&#39;);
}

f().then(
  v =&gt; console.log(v),
  e =&gt; console.log(e)
)
// Error: å‡ºé”™äº†
</code></pre>
<p>ï¼ˆ2ï¼‰<code>async</code>å‡½æ•°è¿”å›çš„ Promise å¯¹è±¡ï¼Œå¿…é¡»ç­‰åˆ°å†…éƒ¨æ‰€æœ‰<code>await</code>å‘½ä»¤çš„ Promise å¯¹è±¡æ‰§è¡Œå®Œï¼Œæ‰ä¼šå‘ç”ŸçŠ¶æ€æ”¹å˜ï¼Œé™¤éé‡åˆ°<code>return</code>è¯­å¥æˆ–è€…æŠ›å‡ºé”™è¯¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰<code>async</code>å‡½æ•°å†…éƒ¨çš„å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œï¼Œæ‰ä¼šæ‰§è¡Œ<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">async function getTitle(url) {
  let response = await fetch(url);
  let html = await response.text();
  return html.match(/&lt;title&gt;([\s\S]+)&lt;\/title&gt;/i)[1];
}
getTitle(&#39;https://tc39.github.io/ecma262/&#39;).then(console.log)
// &quot;ECMAScript 2017 Language Specification&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>getTitle</code>å†…éƒ¨æœ‰ä¸‰ä¸ªæ“ä½œï¼šæŠ“å–ç½‘é¡µã€å–å‡ºæ–‡æœ¬ã€åŒ¹é…é¡µé¢æ ‡é¢˜ã€‚åªæœ‰è¿™ä¸‰ä¸ªæ“ä½œå…¨éƒ¨å®Œæˆï¼Œæ‰ä¼šæ‰§è¡Œ<code>then</code>æ–¹æ³•é‡Œé¢çš„<code>console.log</code>ã€‚</p>
<p>ï¼ˆ3ï¼‰æ­£å¸¸æƒ…å†µä¸‹ï¼Œ<code>await</code>å‘½ä»¤åé¢æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ã€‚å¦‚æœä¸æ˜¯ï¼Œä¼šè¢«è½¬æˆä¸€ä¸ªç«‹å³<code>resolve</code>çš„ Promise å¯¹è±¡ã€‚</p>
<pre><code class="javascript">async function f() {
  return await 123;
}

f().then(v =&gt; console.log(v))
// 123
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>await</code>å‘½ä»¤çš„å‚æ•°æ˜¯æ•°å€¼<code>123</code>ï¼Œå®ƒè¢«è½¬æˆPromiseå¯¹è±¡ï¼Œå¹¶ç«‹å³<code>resolve</code>ã€‚</p>
<p><code>await</code>å‘½ä»¤åé¢çš„Promiseå¯¹è±¡å¦‚æœå˜ä¸º<code>reject</code>çŠ¶æ€ï¼Œåˆ™<code>reject</code>çš„å‚æ•°ä¼šè¢«<code>catch</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚</p>
<pre><code class="javascript">async function f() {
  await Promise.reject(&#39;å‡ºé”™äº†&#39;);
}

f()
.then(v =&gt; console.log(v))
.catch(e =&gt; console.log(e))
// å‡ºé”™äº†
</code></pre>
<p>æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œ<code>await</code>è¯­å¥å‰é¢æ²¡æœ‰<code>return</code>ï¼Œä½†æ˜¯<code>reject</code>æ–¹æ³•çš„å‚æ•°ä¾ç„¶ä¼ å…¥äº†<code>catch</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°ã€‚è¿™é‡Œå¦‚æœåœ¨<code>await</code>å‰é¢åŠ ä¸Š<code>return</code>ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p>
<p>åªè¦ä¸€ä¸ª<code>await</code>è¯­å¥åé¢çš„Promiseå˜ä¸º<code>reject</code>ï¼Œé‚£ä¹ˆæ•´ä¸ª<code>async</code>å‡½æ•°éƒ½ä¼šä¸­æ–­æ‰§è¡Œã€‚</p>
<pre><code class="javascript">async function f() {
  await Promise.reject(&#39;å‡ºé”™äº†&#39;);
  await Promise.resolve(&#39;hello world&#39;); // ä¸ä¼šæ‰§è¡Œ
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒä¸ª<code>await</code>è¯­å¥æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œå› ä¸ºç¬¬ä¸€ä¸ª<code>await</code>è¯­å¥çŠ¶æ€å˜æˆäº†<code>reject</code>ã€‚</p>
<p>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†ç¬¬ä¸€ä¸ª<code>await</code>æ”¾åœ¨<code>try...catch</code>ç»“æ„é‡Œé¢ï¼Œè¿™æ ·ç¬¬äºŒä¸ª<code>await</code>å°±ä¼šæ‰§è¡Œã€‚</p>
<pre><code class="javascript">async function f() {
  try {
    await Promise.reject(&#39;å‡ºé”™äº†&#39;);
  } catch(e) {
  }
  return await Promise.resolve(&#39;hello world&#39;);
}

f()
.then(v =&gt; console.log(v))
// hello world
</code></pre>
<p>å¦ä¸€ç§æ–¹æ³•æ˜¯<code>await</code>åé¢çš„Promiseå¯¹è±¡å†è·Ÿä¸€ä¸ª<code>catch</code>æ–¹æ³•ï¼Œå¤„ç†å‰é¢å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚</p>
<pre><code class="javascript">async function f() {
  await Promise.reject(&#39;å‡ºé”™äº†&#39;)
    .catch(e =&gt; console.log(e));
  return await Promise.resolve(&#39;hello world&#39;);
}

f()
.then(v =&gt; console.log(v))
// å‡ºé”™äº†
// hello world
</code></pre>
<p>å¦‚æœæœ‰å¤šä¸ª<code>await</code>å‘½ä»¤ï¼Œå¯ä»¥ç»Ÿä¸€æ”¾åœ¨<code>try...catch</code>ç»“æ„ä¸­ã€‚</p>
<pre><code class="javascript">async function main() {
  try {
    var val1 = await firstStep();
    var val2 = await secondStep(val1);
    var val3 = await thirdStep(val1, val2);

    console.log(&#39;Final: &#39;, val3);
  }
  catch (err) {
    console.error(err);
  }
}
</code></pre>
<p>ï¼ˆ4ï¼‰å¦‚æœ<code>await</code>åé¢çš„å¼‚æ­¥æ“ä½œå‡ºé”™ï¼Œé‚£ä¹ˆç­‰åŒäº<code>async</code>å‡½æ•°è¿”å›çš„Promiseå¯¹è±¡è¢«<code>reject</code>ã€‚</p>
<pre><code class="javascript">async function f() {
  await new Promise(function (resolve, reject) {
    throw new Error(&#39;å‡ºé”™äº†&#39;);
  });
}

f()
.then(v =&gt; console.log(v))
.catch(e =&gt; console.log(e))
// Errorï¼šå‡ºé”™äº†
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>async</code>å‡½æ•°<code>f</code>æ‰§è¡Œåï¼Œ<code>await</code>åé¢çš„Promiseå¯¹è±¡ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œå¯¼è‡´<code>catch</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°è¢«è°ƒç”¨ï¼Œå®ƒçš„å‚æ•°å°±æ˜¯æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡ã€‚å…·ä½“çš„æ‰§è¡Œæœºåˆ¶ï¼Œå¯ä»¥å‚è€ƒåæ–‡çš„â€œasyncå‡½æ•°çš„å®ç°â€ã€‚</p>
<p>é˜²æ­¢å‡ºé”™çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯å°†å…¶æ”¾åœ¨<code>try...catch</code>ä»£ç å—ä¹‹ä¸­ã€‚</p>
<pre><code class="javascript">async function f() {
  try {
    await new Promise(function (resolve, reject) {
      throw new Error(&#39;å‡ºé”™äº†&#39;);
    });
  } catch(e) {
  }
  return await(&#39;hello world&#39;);
}
</code></pre>
<h3 id="asyncå‡½æ•°çš„å®ç°"><a href="#asyncå‡½æ•°çš„å®ç°" class="headerlink" title="asyncå‡½æ•°çš„å®ç°"></a>asyncå‡½æ•°çš„å®ç°</h3><p>async å‡½æ•°çš„å®ç°ï¼Œå°±æ˜¯å°† Generator å‡½æ•°å’Œè‡ªåŠ¨æ‰§è¡Œå™¨ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œã€‚</p>
<pre><code class="javascript">async function fn(args){
  // ...
}

// ç­‰åŒäº

function fn(args){
  return spawn(function*() {
    // ...
  });
}
</code></pre>
<p>æ‰€æœ‰çš„<code>async</code>å‡½æ•°éƒ½å¯ä»¥å†™æˆä¸Šé¢çš„ç¬¬äºŒç§å½¢å¼ï¼Œå…¶ä¸­çš„ spawn å‡½æ•°å°±æ˜¯è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚</p>
<p>ä¸‹é¢ç»™å‡º<code>spawn</code>å‡½æ•°çš„å®ç°ï¼ŒåŸºæœ¬å°±æ˜¯å‰æ–‡è‡ªåŠ¨æ‰§è¡Œå™¨çš„ç¿»ç‰ˆã€‚</p>
<pre><code class="javascript">function spawn(genF) {
  return new Promise(function(resolve, reject) {
    var gen = genF();
    function step(nextF) {
      try {
        var next = nextF();
      } catch(e) {
        return reject(e);
      }
      if(next.done) {
        return resolve(next.value);
      }
      Promise.resolve(next.value).then(function(v) {
        step(function() { return gen.next(v); });
      }, function(e) {
        step(function() { return gen.throw(e); });
      });
    }
    step(function() { return gen.next(undefined); });
  });
}
</code></pre>
<h3 id="async-å‡½æ•°çš„ç”¨æ³•"><a href="#async-å‡½æ•°çš„ç”¨æ³•" class="headerlink" title="async å‡½æ•°çš„ç”¨æ³•"></a>async å‡½æ•°çš„ç”¨æ³•</h3><p><code>async</code>å‡½æ•°è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>then</code>æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ°<code>await</code>å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°è§¦å‘çš„å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ¥ç€æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">async function getStockPriceByName(name) {
  var symbol = await getStockSymbol(name);
  var stockPrice = await getStockPrice(symbol);
  return stockPrice;
}

getStockPriceByName(&#39;goog&#39;).then(function (result) {
  console.log(result);
});
</code></pre>
<p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªè·å–è‚¡ç¥¨æŠ¥ä»·çš„å‡½æ•°ï¼Œå‡½æ•°å‰é¢çš„<code>async</code>å…³é”®å­—ï¼Œè¡¨æ˜è¯¥å‡½æ•°å†…éƒ¨æœ‰å¼‚æ­¥æ“ä½œã€‚è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œä¼šç«‹å³è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­ï¼ŒæŒ‡å®šå¤šå°‘æ¯«ç§’åè¾“å‡ºä¸€ä¸ªå€¼ã€‚</p>
<pre><code class="javascript">function timeout(ms) {
  return new Promise((resolve) =&gt; {
    setTimeout(resolve, ms);
  });
}

async function asyncPrint(value, ms) {
  await timeout(ms);
  console.log(value)
}

asyncPrint(&#39;hello world&#39;, 50);
</code></pre>
<p>ä¸Šé¢ä»£ç æŒ‡å®š50æ¯«ç§’ä»¥åï¼Œè¾“å‡º<code>hello world</code>ã€‚</p>
<p>Asyncå‡½æ•°æœ‰å¤šç§ä½¿ç”¨å½¢å¼ã€‚</p>
<pre><code class="javascript">// å‡½æ•°å£°æ˜
async function foo() {}

// å‡½æ•°è¡¨è¾¾å¼
const foo = async function () {};

// å¯¹è±¡çš„æ–¹æ³•
let obj = { async foo() {} };
obj.foo().then(...)

// Class çš„æ–¹æ³•
class Storage {
  constructor() {
    this.cachePromise = caches.open(&#39;avatars&#39;);
  }

  async getAvatar(name) {
    const cache = await this.cachePromise;
    return cache.match(`/avatars/${name}.jpg`);
  }
}

const storage = new Storage();
storage.getAvatar(&#39;jake&#39;).then(â€¦);

// ç®­å¤´å‡½æ•°
const foo = async () =&gt; {};
</code></pre>
<h3 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><p>ç¬¬ä¸€ç‚¹ï¼Œ<code>await</code>å‘½ä»¤åé¢çš„<code>Promise</code>å¯¹è±¡ï¼Œè¿è¡Œç»“æœå¯èƒ½æ˜¯<code>rejected</code>ï¼Œæ‰€ä»¥æœ€å¥½æŠŠ<code>await</code>å‘½ä»¤æ”¾åœ¨<code>try...catch</code>ä»£ç å—ä¸­ã€‚</p>
<pre><code class="javascript">async function myFunction() {
  try {
    await somethingThatReturnsAPromise();
  } catch (err) {
    console.log(err);
  }
}

// å¦ä¸€ç§å†™æ³•

async function myFunction() {
  await somethingThatReturnsAPromise()
  .catch(function (err) {
    console.log(err);
  };
}
</code></pre>
<p>ç¬¬äºŒç‚¹ï¼Œå¤šä¸ª<code>await</code>å‘½ä»¤åé¢çš„å¼‚æ­¥æ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨ç»§å‘å…³ç³»ï¼Œæœ€å¥½è®©å®ƒä»¬åŒæ—¶è§¦å‘ã€‚</p>
<pre><code class="javascript">let foo = await getFoo();
let bar = await getBar();
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>getFoo</code>å’Œ<code>getBar</code>æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å¼‚æ­¥æ“ä½œï¼ˆå³äº’ä¸ä¾èµ–ï¼‰ï¼Œè¢«å†™æˆç»§å‘å…³ç³»ã€‚è¿™æ ·æ¯”è¾ƒè€—æ—¶ï¼Œå› ä¸ºåªæœ‰<code>getFoo</code>å®Œæˆä»¥åï¼Œæ‰ä¼šæ‰§è¡Œ<code>getBar</code>ï¼Œå®Œå…¨å¯ä»¥è®©å®ƒä»¬åŒæ—¶è§¦å‘ã€‚</p>
<pre><code class="javascript">// å†™æ³•ä¸€
let [foo, bar] = await Promise.all([getFoo(), getBar()]);

// å†™æ³•äºŒ
let fooPromise = getFoo();
let barPromise = getBar();
let foo = await fooPromise;
let bar = await barPromise;
</code></pre>
<p>ä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œ<code>getFoo</code>å’Œ<code>getBar</code>éƒ½æ˜¯åŒæ—¶è§¦å‘ï¼Œè¿™æ ·å°±ä¼šç¼©çŸ­ç¨‹åºçš„æ‰§è¡Œæ—¶é—´ã€‚</p>
<p>ç¬¬ä¸‰ç‚¹ï¼Œ<code>await</code>å‘½ä»¤åªèƒ½ç”¨åœ¨<code>async</code>å‡½æ•°ä¹‹ä¸­ï¼Œå¦‚æœç”¨åœ¨æ™®é€šå‡½æ•°ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">async function dbFuc(db) {
  let docs = [{}, {}, {}];

  // æŠ¥é”™
  docs.forEach(function (doc) {
    await db.post(doc);
  });
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸ºawaitç”¨åœ¨æ™®é€šå‡½æ•°ä¹‹ä¸­äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœå°†<code>forEach</code>æ–¹æ³•çš„å‚æ•°æ”¹æˆ<code>async</code>å‡½æ•°ï¼Œä¹Ÿæœ‰é—®é¢˜ã€‚</p>
<pre><code class="javascript">async function dbFuc(db) {
  let docs = [{}, {}, {}];

  // å¯èƒ½å¾—åˆ°é”™è¯¯ç»“æœ
  docs.forEach(async function (doc) {
    await db.post(doc);
  });
}
</code></pre>
<p>ä¸Šé¢ä»£ç å¯èƒ½ä¸ä¼šæ­£å¸¸å·¥ä½œï¼ŒåŸå› æ˜¯è¿™æ—¶ä¸‰ä¸ª<code>db.post</code>æ“ä½œå°†æ˜¯å¹¶å‘æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åŒæ—¶æ‰§è¡Œï¼Œè€Œä¸æ˜¯ç»§å‘æ‰§è¡Œã€‚æ­£ç¡®çš„å†™æ³•æ˜¯é‡‡ç”¨<code>for</code>å¾ªç¯ã€‚</p>
<pre><code class="javascript">async function dbFuc(db) {
  let docs = [{}, {}, {}];

  for (let doc of docs) {
    await db.post(doc);
  }
}
</code></pre>
<p>å¦‚æœç¡®å®å¸Œæœ›å¤šä¸ªè¯·æ±‚å¹¶å‘æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨<code>Promise.all</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">async function dbFuc(db) {
  let docs = [{}, {}, {}];
  let promises = docs.map((doc) =&gt; db.post(doc));

  let results = await Promise.all(promises);
  console.log(results);
}

// æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„å†™æ³•

async function dbFuc(db) {
  let docs = [{}, {}, {}];
  let promises = docs.map((doc) =&gt; db.post(doc));

  let results = [];
  for (let promise of promises) {
    results.push(await promise);
  }
  console.log(results);
}
</code></pre>
<p>ES6å°†<code>await</code>å¢åŠ ä¸ºä¿ç•™å­—ã€‚ä½¿ç”¨è¿™ä¸ªè¯ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œåœ¨ES5æ˜¯åˆæ³•çš„ï¼Œåœ¨ES6å°†æŠ›å‡ºSyntaxErrorã€‚</p>
<h3 id="ä¸Promiseã€Generatorçš„æ¯”è¾ƒ"><a href="#ä¸Promiseã€Generatorçš„æ¯”è¾ƒ" class="headerlink" title="ä¸Promiseã€Generatorçš„æ¯”è¾ƒ"></a>ä¸Promiseã€Generatorçš„æ¯”è¾ƒ</h3><p>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œæ¥çœ‹Asyncå‡½æ•°ä¸Promiseã€Generatorå‡½æ•°çš„åŒºåˆ«ã€‚</p>
<p>å‡å®šæŸä¸ªDOMå…ƒç´ ä¸Šé¢ï¼Œéƒ¨ç½²äº†ä¸€ç³»åˆ—çš„åŠ¨ç”»ï¼Œå‰ä¸€ä¸ªåŠ¨ç”»ç»“æŸï¼Œæ‰èƒ½å¼€å§‹åä¸€ä¸ªã€‚å¦‚æœå½“ä¸­æœ‰ä¸€ä¸ªåŠ¨ç”»å‡ºé”™ï¼Œå°±ä¸å†å¾€ä¸‹æ‰§è¡Œï¼Œè¿”å›ä¸Šä¸€ä¸ªæˆåŠŸæ‰§è¡Œçš„åŠ¨ç”»çš„è¿”å›å€¼ã€‚</p>
<p>é¦–å…ˆæ˜¯Promiseçš„å†™æ³•ã€‚</p>
<pre><code class="javascript">function chainAnimationsPromise(elem, animations) {

  // å˜é‡retç”¨æ¥ä¿å­˜ä¸Šä¸€ä¸ªåŠ¨ç”»çš„è¿”å›å€¼
  var ret = null;

  // æ–°å»ºä¸€ä¸ªç©ºçš„Promise
  var p = Promise.resolve();

  // ä½¿ç”¨thenæ–¹æ³•ï¼Œæ·»åŠ æ‰€æœ‰åŠ¨ç”»
  for(var anim of animations) {
    p = p.then(function(val) {
      ret = val;
      return anim(elem);
    });
  }

  // è¿”å›ä¸€ä¸ªéƒ¨ç½²äº†é”™è¯¯æ•æ‰æœºåˆ¶çš„Promise
  return p.catch(function(e) {
    /* å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ */
  }).then(function() {
    return ret;
  });

}
</code></pre>
<p>è™½ç„¶Promiseçš„å†™æ³•æ¯”å›è°ƒå‡½æ•°çš„å†™æ³•å¤§å¤§æ”¹è¿›ï¼Œä½†æ˜¯ä¸€çœ¼çœ‹ä¸Šå»ï¼Œä»£ç å®Œå…¨éƒ½æ˜¯Promiseçš„APIï¼ˆthenã€catchç­‰ç­‰ï¼‰ï¼Œæ“ä½œæœ¬èº«çš„è¯­ä¹‰åè€Œä¸å®¹æ˜“çœ‹å‡ºæ¥ã€‚</p>
<p>æ¥ç€æ˜¯Generatorå‡½æ•°çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">function chainAnimationsGenerator(elem, animations) {

  return spawn(function*() {
    var ret = null;
    try {
      for(var anim of animations) {
        ret = yield anim(elem);
      }
    } catch(e) {
      /* å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ */
    }
    return ret;
  });

}
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨Generatorå‡½æ•°éå†äº†æ¯ä¸ªåŠ¨ç”»ï¼Œè¯­ä¹‰æ¯”Promiseå†™æ³•æ›´æ¸…æ™°ï¼Œç”¨æˆ·å®šä¹‰çš„æ“ä½œå…¨éƒ¨éƒ½å‡ºç°åœ¨spawnå‡½æ•°çš„å†…éƒ¨ã€‚è¿™ä¸ªå†™æ³•çš„é—®é¢˜åœ¨äºï¼Œå¿…é¡»æœ‰ä¸€ä¸ªä»»åŠ¡è¿è¡Œå™¨ï¼Œè‡ªåŠ¨æ‰§è¡ŒGeneratorå‡½æ•°ï¼Œä¸Šé¢ä»£ç çš„spawnå‡½æ•°å°±æ˜¯è‡ªåŠ¨æ‰§è¡Œå™¨ï¼Œå®ƒè¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè€Œä¸”å¿…é¡»ä¿è¯yieldè¯­å¥åé¢çš„è¡¨è¾¾å¼ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªPromiseã€‚</p>
<p>æœ€åæ˜¯Asyncå‡½æ•°çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">async function chainAnimationsAsync(elem, animations) {
  var ret = null;
  try {
    for(var anim of animations) {
      ret = await anim(elem);
    }
  } catch(e) {
    /* å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ */
  }
  return ret;
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°Asyncå‡½æ•°çš„å®ç°æœ€ç®€æ´ï¼Œæœ€ç¬¦åˆè¯­ä¹‰ï¼Œå‡ ä¹æ²¡æœ‰è¯­ä¹‰ä¸ç›¸å…³çš„ä»£ç ã€‚å®ƒå°†Generatorå†™æ³•ä¸­çš„è‡ªåŠ¨æ‰§è¡Œå™¨ï¼Œæ”¹åœ¨è¯­è¨€å±‚é¢æä¾›ï¼Œä¸æš´éœ²ç»™ç”¨æˆ·ï¼Œå› æ­¤ä»£ç é‡æœ€å°‘ã€‚å¦‚æœä½¿ç”¨Generatorå†™æ³•ï¼Œè‡ªåŠ¨æ‰§è¡Œå™¨éœ€è¦ç”¨æˆ·è‡ªå·±æä¾›ã€‚</p>
<h3 id="å®ä¾‹ï¼šæŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ"><a href="#å®ä¾‹ï¼šæŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ" class="headerlink" title="å®ä¾‹ï¼šæŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ"></a>å®ä¾‹ï¼šæŒ‰é¡ºåºå®Œæˆå¼‚æ­¥æ“ä½œ</h3><p>å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸é‡åˆ°ä¸€ç»„å¼‚æ­¥æ“ä½œï¼Œéœ€è¦æŒ‰ç…§é¡ºåºå®Œæˆã€‚æ¯”å¦‚ï¼Œä¾æ¬¡è¿œç¨‹è¯»å–ä¸€ç»„URLï¼Œç„¶åæŒ‰ç…§è¯»å–çš„é¡ºåºè¾“å‡ºç»“æœã€‚</p>
<p>Promise çš„å†™æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">function logInOrder(urls) {
  // è¿œç¨‹è¯»å–æ‰€æœ‰URL
  const textPromises = urls.map(url =&gt; {
    return fetch(url).then(response =&gt; response.text());
  });

  // æŒ‰æ¬¡åºè¾“å‡º
  textPromises.reduce((chain, textPromise) =&gt; {
    return chain.then(() =&gt; textPromise)
      .then(text =&gt; console.log(text));
  }, Promise.resolve());
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨<code>fetch</code>æ–¹æ³•ï¼ŒåŒæ—¶è¿œç¨‹è¯»å–ä¸€ç»„URLã€‚æ¯ä¸ª<code>fetch</code>æ“ä½œéƒ½è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œæ”¾å…¥<code>textPromises</code>æ•°ç»„ã€‚ç„¶åï¼Œ<code>reduce</code>æ–¹æ³•ä¾æ¬¡å¤„ç†æ¯ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œç„¶åä½¿ç”¨<code>then</code>ï¼Œå°†æ‰€æœ‰<code>Promise</code>å¯¹è±¡è¿èµ·æ¥ï¼Œå› æ­¤å°±å¯ä»¥ä¾æ¬¡è¾“å‡ºç»“æœã€‚</p>
<p>è¿™ç§å†™æ³•ä¸å¤ªç›´è§‚ï¼Œå¯è¯»æ€§æ¯”è¾ƒå·®ã€‚ä¸‹é¢æ˜¯<code>async</code>å‡½æ•°å®ç°ã€‚</p>
<pre><code class="javascript">async function logInOrder(urls) {
  for (const url of urls) {
    const response = await fetch(url);
    console.log(await response.text());
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ç¡®å®å¤§å¤§ç®€åŒ–ï¼Œé—®é¢˜æ˜¯æ‰€æœ‰è¿œç¨‹æ“ä½œéƒ½æ˜¯ç»§å‘ã€‚åªæœ‰å‰ä¸€ä¸ªURLè¿”å›ç»“æœï¼Œæ‰ä¼šå»è¯»å–ä¸‹ä¸€ä¸ªURLï¼Œè¿™æ ·åšæ•ˆç‡å¾ˆå·®ï¼Œéå¸¸æµªè´¹æ—¶é—´ã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯å¹¶å‘å‘å‡ºè¿œç¨‹è¯·æ±‚ã€‚</p>
<pre><code class="javascript">async function logInOrder(urls) {
  // å¹¶å‘è¯»å–è¿œç¨‹URL
  const textPromises = urls.map(async url =&gt; {
    const response = await fetch(url);
    return response.text();
  });

  // æŒ‰æ¬¡åºè¾“å‡º
  for (const textPromise of textPromises) {
    console.log(await textPromise);
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè™½ç„¶<code>map</code>æ–¹æ³•çš„å‚æ•°æ˜¯<code>async</code>å‡½æ•°ï¼Œä½†å®ƒæ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œå› ä¸ºåªæœ‰<code>async</code>å‡½æ•°å†…éƒ¨æ˜¯ç»§å‘æ‰§è¡Œï¼Œå¤–éƒ¨ä¸å—å½±å“ã€‚åé¢çš„<code>for..of</code>å¾ªç¯å†…éƒ¨ä½¿ç”¨äº†<code>await</code>ï¼Œå› æ­¤å®ç°äº†æŒ‰é¡ºåºè¾“å‡ºã€‚</p>
<h2 id="å¼‚æ­¥éå†å™¨"><a href="#å¼‚æ­¥éå†å™¨" class="headerlink" title="å¼‚æ­¥éå†å™¨"></a>å¼‚æ­¥éå†å™¨</h2><p>ã€Šéå†å™¨ã€‹ä¸€ç« è¯´è¿‡ï¼ŒIterator æ¥å£æ˜¯ä¸€ç§æ•°æ®éå†çš„åè®®ï¼Œåªè¦è°ƒç”¨éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰éå†æŒ‡é’ˆæ‰€åœ¨çš„é‚£ä¸ªä½ç½®çš„ä¿¡æ¯ã€‚<code>next</code>æ–¹æ³•è¿”å›çš„å¯¹è±¡çš„ç»“æ„æ˜¯<code>{value, done}</code>ï¼Œå…¶ä¸­<code>value</code>è¡¨ç¤ºå½“å‰çš„æ•°æ®çš„å€¼ï¼Œ<code>done</code>æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéå†æ˜¯å¦ç»“æŸã€‚</p>
<p>è¿™é‡Œéšå«ç€ä¸€ä¸ªè§„å®šï¼Œ<code>next</code>æ–¹æ³•å¿…é¡»æ˜¯åŒæ­¥çš„ï¼Œåªè¦è°ƒç”¨å°±å¿…é¡»ç«‹åˆ»è¿”å›å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦æ‰§è¡Œ<code>next</code>æ–¹æ³•ï¼Œå°±å¿…é¡»åŒæ­¥åœ°å¾—åˆ°<code>value</code>å’Œ<code>done</code>è¿™ä¸¤ä¸ªå±æ€§ã€‚å¦‚æœéå†æŒ‡é’ˆæ­£å¥½æŒ‡å‘åŒæ­¥æ“ä½œï¼Œå½“ç„¶æ²¡æœ‰é—®é¢˜ï¼Œä½†å¯¹äºå¼‚æ­¥æ“ä½œï¼Œå°±ä¸å¤ªåˆé€‚äº†ã€‚ç›®å‰çš„è§£å†³æ–¹æ³•æ˜¯ï¼ŒGenerator å‡½æ•°é‡Œé¢çš„å¼‚æ­¥æ“ä½œï¼Œè¿”å›ä¸€ä¸ª Thunk å‡½æ•°æˆ–è€… Promise å¯¹è±¡ï¼Œå³<code>value</code>å±æ€§æ˜¯ä¸€ä¸ª Thunk å‡½æ•°æˆ–è€… Promise å¯¹è±¡ï¼Œç­‰å¾…ä»¥åè¿”å›çœŸæ­£çš„å€¼ï¼Œè€Œ<code>done</code>å±æ€§åˆ™è¿˜æ˜¯åŒæ­¥äº§ç”Ÿçš„ã€‚</p>
<p>ç›®å‰ï¼Œæœ‰ä¸€ä¸ª<a href="https://github.com/tc39/proposal-async-iteration" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œä¸ºå¼‚æ­¥æ“ä½œæä¾›åŸç”Ÿçš„éå†å™¨æ¥å£ï¼Œå³<code>value</code>å’Œ<code>done</code>è¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯å¼‚æ­¥äº§ç”Ÿï¼Œè¿™ç§°ä¸ºâ€å¼‚æ­¥éå†å™¨â€œï¼ˆAsync Iteratorï¼‰ã€‚</p>
<h3 id="å¼‚æ­¥éå†çš„æ¥å£"><a href="#å¼‚æ­¥éå†çš„æ¥å£" class="headerlink" title="å¼‚æ­¥éå†çš„æ¥å£"></a>å¼‚æ­¥éå†çš„æ¥å£</h3><p>å¼‚æ­¥éå†å™¨çš„æœ€å¤§çš„è¯­æ³•ç‰¹ç‚¹ï¼Œå°±æ˜¯è°ƒç”¨éå†å™¨çš„<code>next</code>æ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ã€‚</p>
<pre><code class="javascript">asyncIterator
  .next()
  .then(
    ({ value, done }) =&gt; /* ... */
  );
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>asyncIterator</code>æ˜¯ä¸€ä¸ªå¼‚æ­¥éå†å™¨ï¼Œè°ƒç”¨<code>next</code>æ–¹æ³•ä»¥åï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨<code>then</code>æ–¹æ³•æŒ‡å®šï¼Œè¿™ä¸ª Promise å¯¹è±¡çš„çŠ¶æ€å˜ä¸º<code>resolve</code>ä»¥åçš„å›è°ƒå‡½æ•°ã€‚å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œåˆ™æ˜¯ä¸€ä¸ªå…·æœ‰<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ï¼Œè¿™ä¸ªè·ŸåŒæ­¥éå†å™¨æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªå¯¹è±¡çš„åŒæ­¥éå†å™¨çš„æ¥å£ï¼Œéƒ¨ç½²åœ¨<code>Symbol.iterator</code>å±æ€§ä¸Šé¢ã€‚åŒæ ·åœ°ï¼Œå¯¹è±¡çš„å¼‚æ­¥éå†å™¨æ¥å£ï¼Œéƒ¨ç½²åœ¨<code>Symbol.asyncIterator</code>å±æ€§ä¸Šé¢ã€‚ä¸ç®¡æ˜¯ä»€ä¹ˆæ ·çš„å¯¹è±¡ï¼Œåªè¦å®ƒçš„<code>Symbol.asyncIterator</code>å±æ€§æœ‰å€¼ï¼Œå°±è¡¨ç¤ºåº”è¯¥å¯¹å®ƒè¿›è¡Œå¼‚æ­¥éå†ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¼‚æ­¥éå†å™¨çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">const asyncIterable = createAsyncIterable([&#39;a&#39;, &#39;b&#39;]);
const asyncIterator = asyncIterable[Symbol.asyncIterator]();

asyncIterator
.next()
.then(iterResult1 =&gt; {
  console.log(iterResult1); // { value: &#39;a&#39;, done: false }
  return asyncIterator.next();
})
.then(iterResult2 =&gt; {
  console.log(iterResult2); // { value: &#39;b&#39;, done: false }
  return asyncIterator.next();
})
.then(iterResult3 =&gt; {
  console.log(iterResult3); // { value: undefined, done: true }
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¼‚æ­¥éå†å™¨å…¶å®è¿”å›äº†ä¸¤æ¬¡å€¼ã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼›ç­‰åˆ° Promise å¯¹è±¡<code>resolve</code>äº†ï¼Œå†è¿”å›ä¸€ä¸ªè¡¨ç¤ºå½“å‰æ•°æ®æˆå‘˜ä¿¡æ¯çš„å¯¹è±¡ã€‚è¿™å°±æ˜¯è¯´ï¼Œå¼‚æ­¥éå†å™¨ä¸åŒæ­¥éå†å™¨æœ€ç»ˆè¡Œä¸ºæ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯ä¼šå…ˆè¿”å› Promise å¯¹è±¡ï¼Œä½œä¸ºä¸­ä»‹ã€‚</p>
<p>ç”±äºå¼‚æ­¥éå†å™¨çš„<code>next</code>æ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ã€‚å› æ­¤ï¼Œå¯ä»¥æŠŠå®ƒæ”¾åœ¨<code>await</code>å‘½ä»¤åé¢ã€‚</p>
<pre><code class="javascript">async function f() {
  const asyncIterable = createAsyncIterable([&#39;a&#39;, &#39;b&#39;]);
  const asyncIterator = asyncIterable[Symbol.asyncIterator]();
  console.log(await asyncIterator.next());
  // { value: &#39;a&#39;, done: false }
  console.log(await asyncIterator.next());
  // { value: &#39;b&#39;, done: false }
  console.log(await asyncIterator.next());
  // { value: undefined, done: true }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>next</code>æ–¹æ³•ç”¨<code>await</code>å¤„ç†ä»¥åï¼Œå°±ä¸å¿…ä½¿ç”¨<code>then</code>æ–¹æ³•äº†ã€‚æ•´ä¸ªæµç¨‹å·²ç»å¾ˆæ¥è¿‘åŒæ­¥å¤„ç†äº†ã€‚</p>
<p>æ³¨æ„ï¼Œå¼‚æ­¥éå†å™¨çš„<code>next</code>æ–¹æ³•æ˜¯å¯ä»¥è¿ç»­è°ƒç”¨çš„ï¼Œä¸å¿…ç­‰åˆ°ä¸Šä¸€æ­¥äº§ç”Ÿçš„Promiseå¯¹è±¡<code>resolve</code>ä»¥åå†è°ƒç”¨ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>next</code>æ–¹æ³•ä¼šç´¯ç§¯èµ·æ¥ï¼Œè‡ªåŠ¨æŒ‰ç…§æ¯ä¸€æ­¥çš„é¡ºåºè¿è¡Œä¸‹å»ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ŒæŠŠæ‰€æœ‰çš„<code>next</code>æ–¹æ³•æ”¾åœ¨<code>Promise.all</code>æ–¹æ³•é‡Œé¢ã€‚</p>
<pre><code class="javascript">const asyncGenObj = createAsyncIterable([&#39;a&#39;, &#39;b&#39;]);
const [{value: v1}, {value: v2}] = await Promise.all([
  asyncGenObj.next(), asyncGenObj.next()
]);

console.log(v1, v2); // a b
</code></pre>
<p>å¦ä¸€ç§ç”¨æ³•æ˜¯ä¸€æ¬¡æ€§è°ƒç”¨æ‰€æœ‰çš„<code>next</code>æ–¹æ³•ï¼Œç„¶å<code>await</code>æœ€åä¸€æ­¥æ“ä½œã€‚</p>
<pre><code class="javascript">const writer = openFile(&#39;someFile.txt&#39;);
writer.next(&#39;hello&#39;);
writer.next(&#39;world&#39;);
await writer.return();
</code></pre>
<h3 id="for-awaitâ€¦of"><a href="#for-awaitâ€¦of" class="headerlink" title="for awaitâ€¦of"></a>for awaitâ€¦of</h3><p>å‰é¢ä»‹ç»è¿‡ï¼Œ<code>for...of</code>å¾ªç¯ç”¨äºéå†åŒæ­¥çš„ Iterator æ¥å£ã€‚æ–°å¼•å…¥çš„<code>for await...of</code>å¾ªç¯ï¼Œåˆ™æ˜¯ç”¨äºéå†å¼‚æ­¥çš„ Iterator æ¥å£ã€‚</p>
<pre><code class="javascript">async function f() {
  for await (const x of createAsyncIterable([&#39;a&#39;, &#39;b&#39;])) {
    console.log(x);
  }
}
// a
// b
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>createAsyncIterable()</code>è¿”å›ä¸€ä¸ªå¼‚æ­¥éå†å™¨ï¼Œ<code>for...of</code>å¾ªç¯è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªéå†å™¨çš„<code>next</code>æ–¹æ³•ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªPromiseå¯¹è±¡ã€‚<code>await</code>ç”¨æ¥å¤„ç†è¿™ä¸ªPromiseå¯¹è±¡ï¼Œä¸€æ—¦<code>resolve</code>ï¼Œå°±æŠŠå¾—åˆ°çš„å€¼ï¼ˆ<code>x</code>ï¼‰ä¼ å…¥<code>for...of</code>çš„å¾ªç¯ä½“ã€‚</p>
<p><code>for await...of</code>å¾ªç¯çš„ä¸€ä¸ªç”¨é€”ï¼Œæ˜¯éƒ¨ç½²äº† asyncIterable æ“ä½œçš„å¼‚æ­¥æ¥å£ï¼Œå¯ä»¥ç›´æ¥æ”¾å…¥è¿™ä¸ªå¾ªç¯ã€‚</p>
<pre><code class="javascript">let body = &#39;&#39;;
for await(const data of req) body += data;
const parsed = JSON.parse(body);
console.log(&#39;got&#39;, parsed);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>req</code>æ˜¯ä¸€ä¸ª asyncIterable å¯¹è±¡ï¼Œç”¨æ¥å¼‚æ­¥è¯»å–æ•°æ®ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨<code>for await...of</code>å¾ªç¯ä»¥åï¼Œä»£ç ä¼šéå¸¸ç®€æ´ã€‚</p>
<p>å¦‚æœ<code>next</code>æ–¹æ³•è¿”å›çš„Promiseå¯¹è±¡è¢«<code>reject</code>ï¼Œé‚£ä¹ˆå°±è¦ç”¨<code>try...catch</code>æ•æ‰ã€‚</p>
<pre><code class="javascript">async function () {
  try {
    for await (const x of createRejectingIterable()) {
      console.log(x);
    }
  } catch (e) {
    console.error(e);
  }
}
</code></pre>
<p>æ³¨æ„ï¼Œ<code>for await...of</code>å¾ªç¯ä¹Ÿå¯ä»¥ç”¨äºåŒæ­¥éå†å™¨ã€‚</p>
<pre><code class="javascript">(async function () {
  for await (const x of [&#39;a&#39;, &#39;b&#39;]) {
    console.log(x);
  }
})();
// a
// b
</code></pre>
<h3 id="å¼‚æ­¥Generatorå‡½æ•°"><a href="#å¼‚æ­¥Generatorå‡½æ•°" class="headerlink" title="å¼‚æ­¥Generatorå‡½æ•°"></a>å¼‚æ­¥Generatorå‡½æ•°</h3><p>å°±åƒ Generator å‡½æ•°è¿”å›ä¸€ä¸ªåŒæ­¥éå†å™¨å¯¹è±¡ä¸€æ ·ï¼Œå¼‚æ­¥ Generator å‡½æ•°çš„ä½œç”¨ï¼Œæ˜¯è¿”å›ä¸€ä¸ªå¼‚æ­¥éå†å™¨å¯¹è±¡ã€‚</p>
<p>åœ¨è¯­æ³•ä¸Šï¼Œå¼‚æ­¥ Generator å‡½æ•°å°±æ˜¯<code>async</code>å‡½æ•°ä¸ Generator å‡½æ•°çš„ç»“åˆã€‚</p>
<pre><code class="javascript">async function* readLines(path) {
  let file = await fileOpen(path);

  try {
    while (!file.EOF) {
      yield await file.readLine();
    }
  } finally {
    await file.close();
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¼‚æ­¥æ“ä½œå‰é¢ä½¿ç”¨<code>await</code>å…³é”®å­—æ ‡æ˜ï¼Œå³<code>await</code>åé¢çš„æ“ä½œï¼Œåº”è¯¥è¿”å›Promiseå¯¹è±¡ã€‚å‡¡æ˜¯ä½¿ç”¨<code>yield</code>å…³é”®å­—çš„åœ°æ–¹ï¼Œå°±æ˜¯<code>next</code>æ–¹æ³•çš„åœä¸‹æ¥çš„åœ°æ–¹ï¼Œå®ƒåé¢çš„è¡¨è¾¾å¼çš„å€¼ï¼ˆå³<code>await file.readLine()</code>çš„å€¼ï¼‰ï¼Œä¼šä½œä¸º<code>next()</code>è¿”å›å¯¹è±¡çš„<code>value</code>å±æ€§ï¼Œè¿™ä¸€ç‚¹æ˜¯äºåŒæ­¥Generatorå‡½æ•°ä¸€è‡´çš„ã€‚</p>
<p>å¯ä»¥åƒä¸‹é¢è¿™æ ·ï¼Œä½¿ç”¨ä¸Šé¢ä»£ç å®šä¹‰çš„å¼‚æ­¥Generatorå‡½æ•°ã€‚</p>
<pre><code class="javascript">for await (const line of readLines(filePath)) {
  console.log(line);
}
</code></pre>
<p>å¼‚æ­¥Generatorå‡½æ•°å¯ä»¥ä¸<code>for await...of</code>å¾ªç¯ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚</p>
<pre><code class="javascript">async function* prefixLines(asyncIterable) {
  for await (const line of asyncIterable) {
    yield &#39;&gt; &#39; + line;
  }
}
</code></pre>
<p><code>yield</code>å‘½ä»¤ä¾ç„¶æ˜¯ç«‹åˆ»è¿”å›çš„ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ã€‚</p>
<pre><code class="javascript">async function* asyncGenerator() {
  console.log(&#39;Start&#39;);
  const result = await doSomethingAsync(); // (A)
  yield &#39;Result: &#39;+ result; // (B)
  console.log(&#39;Done&#39;);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨<code>next</code>æ–¹æ³•ä»¥åï¼Œä¼šåœ¨<code>B</code>å¤„æš‚åœæ‰§è¡Œï¼Œ<code>yield</code>å‘½ä»¤ç«‹åˆ»è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚è¿™ä¸ªPromiseå¯¹è±¡ä¸åŒäº<code>A</code>å¤„<code>await</code>å‘½ä»¤åé¢çš„é‚£ä¸ªPromiseå¯¹è±¡ã€‚ä¸»è¦æœ‰ä¸¤ç‚¹ä¸åŒï¼Œä¸€æ˜¯<code>A</code>å¤„çš„Promiseå¯¹è±¡<code>resolve</code>ä»¥åäº§ç”Ÿçš„å€¼ï¼Œä¼šæ”¾å…¥<code>result</code>å˜é‡ï¼›äºŒæ˜¯<code>B</code>å¤„çš„Promiseå¯¹è±¡<code>resolve</code>ä»¥åäº§ç”Ÿçš„å€¼ï¼Œæ˜¯è¡¨è¾¾å¼<code>&#39;Resultï¼š &#39; + result</code>çš„å€¼ï¼›äºŒæ˜¯<code>A</code>å¤„çš„Promiseå¯¹è±¡ä¸€å®šå…ˆäº<code>B</code>å¤„çš„Promiseå¯¹è±¡<code>resolve</code>ã€‚</p>
<p>å¦‚æœå¼‚æ­¥Generatorå‡½æ•°æŠ›å‡ºé”™è¯¯ï¼Œä¼šè¢«Promiseå¯¹è±¡<code>reject</code>ï¼Œç„¶åæŠ›å‡ºçš„é”™è¯¯è¢«<code>catch</code>æ–¹æ³•æ•è·ã€‚</p>
<pre><code class="javascript">async function* asyncGenerator() {
  throw new Error(&#39;Problem!&#39;);
}

asyncGenerator()
.next()
.catch(err =&gt; console.log(err)); // Error: Problem!
</code></pre>
<p>æ³¨æ„ï¼Œæ™®é€šçš„<code>async</code>å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè€Œå¼‚æ­¥Generatorå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå¼‚æ­¥Iteratorå¯¹è±¡ã€‚åŸºæœ¬ä¸Šï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼Œ<code>async</code>å‡½æ•°å’Œå¼‚æ­¥Generatorå‡½æ•°ï¼Œæ˜¯å°è£…å¼‚æ­¥æ“ä½œçš„ä¸¤ç§æ–¹æ³•ï¼Œéƒ½ç”¨æ¥è¾¾åˆ°åŒä¸€ç§ç›®çš„ã€‚åŒºåˆ«åœ¨äºï¼Œå‰è€…è‡ªå¸¦æ‰§è¡Œå™¨ï¼Œåè€…é€šè¿‡<code>for await...of</code>æ‰§è¡Œï¼Œæˆ–è€…è‡ªå·±ç¼–å†™æ‰§è¡Œå™¨ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥Generatorå‡½æ•°çš„æ‰§è¡Œå™¨ã€‚</p>
<pre><code class="javascript">async function takeAsync(asyncIterable, count=Infinity) {
  const result = [];
  const iterator = asyncIterable[Symbol.asyncIterator]();
  while (result.length &lt; count) {
    const {value,done} = await iterator.next();
    if (done) break;
    result.push(value);
  }
  return result;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¼‚æ­¥Generatorå‡½æ•°äº§ç”Ÿçš„å¼‚æ­¥éå†å™¨ï¼Œä¼šé€šè¿‡<code>while</code>å¾ªç¯è‡ªåŠ¨æ‰§è¡Œï¼Œæ¯å½“<code>await iterator.next()</code>å®Œæˆï¼Œå°±ä¼šè¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ã€‚</p>
<p>ä¸‹é¢æ˜¯è¿™ä¸ªè‡ªåŠ¨æ‰§è¡Œå™¨çš„ä¸€ä¸ªä½¿ç”¨å®ä¾‹ã€‚</p>
<pre><code class="javascript">async function f() {
  async function* gen() {
    yield &#39;a&#39;;
    yield &#39;b&#39;;
    yield &#39;c&#39;;
  }

  return await takeAsync(gen());
}

f().then(function (result) {
  console.log(result); // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]
})
</code></pre>
<p>å¼‚æ­¥Generatorå‡½æ•°å‡ºç°ä»¥åï¼ŒJavaScriptå°±æœ‰äº†å››ç§å‡½æ•°å½¢å¼ï¼šæ™®é€šå‡½æ•°ã€<code>async</code>å‡½æ•°ã€Generatorå‡½æ•°å’Œå¼‚æ­¥Generatorå‡½æ•°ã€‚è¯·æ³¨æ„åŒºåˆ†æ¯ç§å‡½æ•°çš„ä¸åŒä¹‹å¤„ã€‚</p>
<p>æœ€åï¼ŒåŒæ­¥çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¼‚æ­¥Generatorå‡½æ•°ã€‚</p>
<pre><code class="javascript">async function* createAsyncIterable(syncIterable) {
  for (const elem of syncIterable) {
    yield elem;
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºæ²¡æœ‰å¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æœ‰ä½¿ç”¨<code>await</code>å…³é”®å­—ã€‚</p>
<h3 id="yield-è¯­å¥"><a href="#yield-è¯­å¥" class="headerlink" title="yield* è¯­å¥"></a>yield* è¯­å¥</h3><p><code>yield*</code>è¯­å¥ä¹Ÿå¯ä»¥è·Ÿä¸€ä¸ªå¼‚æ­¥éå†å™¨ã€‚</p>
<pre><code class="javascript">async function* gen1() {
  yield &#39;a&#39;;
  yield &#39;b&#39;;
  return 2;
}

async function* gen2() {
  const result = yield* gen1();
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>gen2</code>å‡½æ•°é‡Œé¢çš„<code>result</code>å˜é‡ï¼Œæœ€åçš„å€¼æ˜¯<code>2</code>ã€‚</p>
<p>ä¸åŒæ­¥Generatorå‡½æ•°ä¸€æ ·ï¼Œ<code>for await...of</code>å¾ªç¯ä¼šå±•å¼€<code>yield*</code>ã€‚</p>
<pre><code class="javascript">(async function () {
  for await (const x of gen2()) {
    console.log(x);
  }
})();
// a
// b
</code></pre>
<blockquote>
<p>æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°&quot;&gt;&lt;a href=&quot;#å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°&quot;&gt;&lt;/a&gt;å¼‚æ­¥æ“ä½œå’ŒAsyncå‡½æ•°&lt;/h1&gt;&lt;p&gt;å¼‚æ­¥ç¼–ç¨‹å¯¹ JavaScript è¯­è¨€å¤ªé‡è¦ã€‚Javascr
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Async" scheme="https://microzz.com/tags/Async/"/>
    
  </entry>
  
  <entry>
    <title>Promiseå¯¹è±¡</title>
    <link href="https://microzz.com/2017/01/14/promise/"/>
    <id>https://microzz.com/2017/01/14/promise/</id>
    <published>2017-01-14T06:11:38.000Z</published>
    <updated>2017-01-15T07:06:34.861Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Promiseå¯¹è±¡"><a href="#Promiseå¯¹è±¡" class="headerlink" title="Promiseå¯¹è±¡"></a>Promiseå¯¹è±¡</h1><h2 id="Promiseçš„å«ä¹‰"><a href="#Promiseçš„å«ä¹‰" class="headerlink" title="Promiseçš„å«ä¹‰"></a>Promiseçš„å«ä¹‰</h2><p>Promiseæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆâ€”â€”å›è°ƒå‡½æ•°å’Œäº‹ä»¶â€”â€”æ›´åˆç†å’Œæ›´å¼ºå¤§ã€‚å®ƒç”±ç¤¾åŒºæœ€æ—©æå‡ºå’Œå®ç°ï¼ŒES6å°†å…¶å†™è¿›äº†è¯­è¨€æ ‡å‡†ï¼Œç»Ÿä¸€äº†ç”¨æ³•ï¼ŒåŸç”Ÿæä¾›äº†<code>Promise</code>å¯¹è±¡ã€‚</p>
<p>æ‰€è°“<code>Promise</code>ï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromiseæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promiseæä¾›ç»Ÿä¸€çš„APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p>
<p><code>Promise</code>å¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ã€‚</p>
<p>ï¼ˆ1ï¼‰å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚<code>Promise</code>å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼š<code>Pending</code>ï¼ˆè¿›è¡Œä¸­ï¼‰ã€<code>Resolved</code>ï¼ˆå·²å®Œæˆï¼Œåˆç§°Fulfilledï¼‰å’Œ<code>Rejected</code>ï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™ä¹Ÿæ˜¯<code>Promise</code>è¿™ä¸ªåå­—çš„ç”±æ¥ï¼Œå®ƒçš„è‹±è¯­æ„æ€å°±æ˜¯â€œæ‰¿è¯ºâ€ï¼Œè¡¨ç¤ºå…¶ä»–æ‰‹æ®µæ— æ³•æ”¹å˜ã€‚</p>
<p>ï¼ˆ2ï¼‰ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚<code>Promise</code>å¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»<code>Pending</code>å˜ä¸º<code>Resolved</code>å’Œä»<code>Pending</code>å˜ä¸º<code>Rejected</code>ã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœã€‚å°±ç®—æ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹<code>Promise</code>å¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœã€‚è¿™ä¸äº‹ä»¶ï¼ˆEventï¼‰å®Œå…¨ä¸åŒï¼Œäº‹ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼Œå¦‚æœä½ é”™è¿‡äº†å®ƒï¼Œå†å»ç›‘å¬ï¼Œæ˜¯å¾—ä¸åˆ°ç»“æœçš„ã€‚</p>
<p>æœ‰äº†<code>Promise</code>å¯¹è±¡ï¼Œå°±å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥ï¼Œé¿å…äº†å±‚å±‚åµŒå¥—çš„å›è°ƒå‡½æ•°ã€‚æ­¤å¤–ï¼Œ<code>Promise</code>å¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œä½¿å¾—æ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“ã€‚</p>
<p><code>Promise</code>ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œæ— æ³•å–æ¶ˆ<code>Promise</code>ï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆã€‚å…¶æ¬¡ï¼Œå¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°ï¼Œ<code>Promise</code>å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨ã€‚ç¬¬ä¸‰ï¼Œå½“å¤„äº<code>Pending</code>çŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆï¼‰ã€‚</p>
<p>å¦‚æœæŸäº›äº‹ä»¶ä¸æ–­åœ°åå¤å‘ç”Ÿï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨streamæ¨¡å¼æ˜¯æ¯”éƒ¨ç½²<code>Promise</code>æ›´å¥½çš„é€‰æ‹©ã€‚</p>
<h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><p>ES6è§„å®šï¼ŒPromiseå¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆPromiseå®ä¾‹ã€‚</p>
<p>ä¸‹é¢ä»£ç åˆ›é€ äº†ä¸€ä¸ªPromiseå®ä¾‹ã€‚</p>
<pre><code class="javascript">var promise = new Promise(function(resolve, reject) {
  // ... some code

  if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){
    resolve(value);
  } else {
    reject(error);
  }
});
</code></pre>
<p>Promiseæ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯<code>resolve</code>å’Œ<code>reject</code>ã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”±JavaScriptå¼•æ“æä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²ã€‚</p>
<p><code>resolve</code>å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œæˆåŠŸâ€ï¼ˆå³ä»Pendingå˜ä¸ºResolvedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼›<code>reject</code>å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œå¤±è´¥â€ï¼ˆå³ä»Pendingå˜ä¸ºRejectedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚</p>
<p>Promiseå®ä¾‹ç”Ÿæˆä»¥åï¼Œå¯ä»¥ç”¨<code>then</code>æ–¹æ³•åˆ†åˆ«æŒ‡å®š<code>Resolved</code>çŠ¶æ€å’Œ<code>Reject</code>çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚</p>
<pre><code class="javascript">promise.then(function(value) {
  // success
}, function(error) {
  // failure
});
</code></pre>
<p><code>then</code>æ–¹æ³•å¯ä»¥æ¥å—ä¸¤ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°æ˜¯Promiseå¯¹è±¡çš„çŠ¶æ€å˜ä¸ºResolvedæ—¶è°ƒç”¨ï¼Œç¬¬äºŒä¸ªå›è°ƒå‡½æ•°æ˜¯Promiseå¯¹è±¡çš„çŠ¶æ€å˜ä¸ºRejectæ—¶è°ƒç”¨ã€‚å…¶ä¸­ï¼Œç¬¬äºŒä¸ªå‡½æ•°æ˜¯å¯é€‰çš„ï¼Œä¸ä¸€å®šè¦æä¾›ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ¥å—Promiseå¯¹è±¡ä¼ å‡ºçš„å€¼ä½œä¸ºå‚æ•°ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡çš„ç®€å•ä¾‹å­ã€‚</p>
<pre><code class="javascript">function timeout(ms) {
  return new Promise((resolve, reject) =&gt; {
    setTimeout(resolve, ms, &#39;done&#39;);
  });
}

timeout(100).then((value) =&gt; {
  console.log(value);
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>timeout</code>æ–¹æ³•è¿”å›ä¸€ä¸ªPromiseå®ä¾‹ï¼Œè¡¨ç¤ºä¸€æ®µæ—¶é—´ä»¥åæ‰ä¼šå‘ç”Ÿçš„ç»“æœã€‚è¿‡äº†æŒ‡å®šçš„æ—¶é—´ï¼ˆ<code>ms</code>å‚æ•°ï¼‰ä»¥åï¼ŒPromiseå®ä¾‹çš„çŠ¶æ€å˜ä¸ºResolvedï¼Œå°±ä¼šè§¦å‘<code>then</code>æ–¹æ³•ç»‘å®šçš„å›è°ƒå‡½æ•°ã€‚</p>
<p>Promiseæ–°å»ºåå°±ä¼šç«‹å³æ‰§è¡Œã€‚</p>
<pre><code class="javascript">let promise = new Promise(function(resolve, reject) {
  console.log(&#39;Promise&#39;);
  resolve();
});

promise.then(function() {
  console.log(&#39;Resolved.&#39;);
});

console.log(&#39;Hi!&#39;);

// Promise
// Hi!
// Resolved
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒPromiseæ–°å»ºåç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥é¦–å…ˆè¾“å‡ºçš„æ˜¯â€œPromiseâ€ã€‚ç„¶åï¼Œ<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°†åœ¨å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥â€œResolvedâ€æœ€åè¾“å‡ºã€‚</p>
<p>ä¸‹é¢æ˜¯å¼‚æ­¥åŠ è½½å›¾ç‰‡çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">function loadImageAsync(url) {
  return new Promise(function(resolve, reject) {
    var image = new Image();

    image.onload = function() {
      resolve(image);
    };

    image.onerror = function() {
      reject(new Error(&#39;Could not load image at &#39; + url));
    };

    image.src = url;
  });
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä½¿ç”¨PromiseåŒ…è£…äº†ä¸€ä¸ªå›¾ç‰‡åŠ è½½çš„å¼‚æ­¥æ“ä½œã€‚å¦‚æœåŠ è½½æˆåŠŸï¼Œå°±è°ƒç”¨<code>resolve</code>æ–¹æ³•ï¼Œå¦åˆ™å°±è°ƒç”¨<code>reject</code>æ–¹æ³•ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨Promiseå¯¹è±¡å®ç°çš„Ajaxæ“ä½œçš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var getJSON = function(url) {
  var promise = new Promise(function(resolve, reject){
    var client = new XMLHttpRequest();
    client.open(&quot;GET&quot;, url);
    client.onreadystatechange = handler;
    client.responseType = &quot;json&quot;;
    client.setRequestHeader(&quot;Accept&quot;, &quot;application/json&quot;);
    client.send();

    function handler() {
      if (this.readyState !== 4) {
        return;
      }
      if (this.status === 200) {
        resolve(this.response);
      } else {
        reject(new Error(this.statusText));
      }
    };
  });

  return promise;
};

getJSON(&quot;/posts.json&quot;).then(function(json) {
  console.log(&#39;Contents: &#39; + json);
}, function(error) {
  console.error(&#39;å‡ºé”™äº†&#39;, error);
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>getJSON</code>æ˜¯å¯¹XMLHttpRequestå¯¹è±¡çš„å°è£…ï¼Œç”¨äºå‘å‡ºä¸€ä¸ªé’ˆå¯¹JSONæ•°æ®çš„HTTPè¯·æ±‚ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨<code>getJSON</code>å†…éƒ¨ï¼Œ<code>resolve</code>å‡½æ•°å’Œ<code>reject</code>å‡½æ•°è°ƒç”¨æ—¶ï¼Œéƒ½å¸¦æœ‰å‚æ•°ã€‚</p>
<p>å¦‚æœè°ƒç”¨<code>resolve</code>å‡½æ•°å’Œ<code>reject</code>å‡½æ•°æ—¶å¸¦æœ‰å‚æ•°ï¼Œé‚£ä¹ˆå®ƒä»¬çš„å‚æ•°ä¼šè¢«ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚<code>reject</code>å‡½æ•°çš„å‚æ•°é€šå¸¸æ˜¯Errorå¯¹è±¡çš„å®ä¾‹ï¼Œè¡¨ç¤ºæŠ›å‡ºçš„é”™è¯¯ï¼›<code>resolve</code>å‡½æ•°çš„å‚æ•°é™¤äº†æ­£å¸¸çš„å€¼ä»¥å¤–ï¼Œè¿˜å¯èƒ½æ˜¯å¦ä¸€ä¸ªPromiseå®ä¾‹ï¼Œè¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„ç»“æœæœ‰å¯èƒ½æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å¦ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚åƒä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">var p1 = new Promise(function (resolve, reject) {
  // ...
});

var p2 = new Promise(function (resolve, reject) {
  // ...
  resolve(p1);
})
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p1</code>å’Œ<code>p2</code>éƒ½æ˜¯Promiseçš„å®ä¾‹ï¼Œä½†æ˜¯<code>p2</code>çš„<code>resolve</code>æ–¹æ³•å°†<code>p1</code>ä½œä¸ºå‚æ•°ï¼Œå³ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœæ˜¯è¿”å›å¦ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚</p>
<p>æ³¨æ„ï¼Œè¿™æ—¶<code>p1</code>çš„çŠ¶æ€å°±ä¼šä¼ é€’ç»™<code>p2</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>p1</code>çš„çŠ¶æ€å†³å®šäº†<code>p2</code>çš„çŠ¶æ€ã€‚å¦‚æœ<code>p1</code>çš„çŠ¶æ€æ˜¯<code>Pending</code>ï¼Œé‚£ä¹ˆ<code>p2</code>çš„å›è°ƒå‡½æ•°å°±ä¼šç­‰å¾…<code>p1</code>çš„çŠ¶æ€æ”¹å˜ï¼›å¦‚æœ<code>p1</code>çš„çŠ¶æ€å·²ç»æ˜¯<code>Resolved</code>æˆ–è€…<code>Rejected</code>ï¼Œé‚£ä¹ˆ<code>p2</code>çš„å›è°ƒå‡½æ•°å°†ä¼šç«‹åˆ»æ‰§è¡Œã€‚</p>
<pre><code class="javascript">var p1 = new Promise(function (resolve, reject) {
  setTimeout(() =&gt; reject(new Error(&#39;fail&#39;)), 3000)
})

var p2 = new Promise(function (resolve, reject) {
  setTimeout(() =&gt; resolve(p1), 1000)
})

p2
  .then(result =&gt; console.log(result))
  .catch(error =&gt; console.log(error))
// Error: fail
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p1</code>æ˜¯ä¸€ä¸ªPromiseï¼Œ3ç§’ä¹‹åå˜ä¸º<code>rejected</code>ã€‚<code>p2</code>çš„çŠ¶æ€åœ¨1ç§’ä¹‹åæ”¹å˜ï¼Œ<code>resolve</code>æ–¹æ³•è¿”å›çš„æ˜¯<code>p1</code>ã€‚æ­¤æ—¶ï¼Œç”±äº<code>p2</code>è¿”å›çš„æ˜¯å¦ä¸€ä¸ªPromiseï¼Œæ‰€ä»¥åé¢çš„<code>then</code>è¯­å¥éƒ½å˜æˆé’ˆå¯¹åè€…ï¼ˆ<code>p1</code>ï¼‰ã€‚åˆè¿‡äº†2ç§’ï¼Œ<code>p1</code>å˜ä¸º<code>rejected</code>ï¼Œå¯¼è‡´è§¦å‘<code>catch</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</p>
<h2 id="Promise-prototype-then"><a href="#Promise-prototype-then" class="headerlink" title="Promise.prototype.then()"></a>Promise.prototype.then()</h2><p>Promiseå®ä¾‹å…·æœ‰<code>then</code>æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>then</code>æ–¹æ³•æ˜¯å®šä¹‰åœ¨åŸå‹å¯¹è±¡Promise.prototypeä¸Šçš„ã€‚å®ƒçš„ä½œç”¨æ˜¯ä¸ºPromiseå®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ã€‚å‰é¢è¯´è¿‡ï¼Œ<code>then</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ResolvedçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰æ˜¯RejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚</p>
<p><code>then</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯åŸæ¥é‚£ä¸ªPromiseå®ä¾‹ï¼‰ã€‚å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³<code>then</code>æ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ª<code>then</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">getJSON(&quot;/posts.json&quot;).then(function(json) {
  return json.post;
}).then(function(post) {
  // ...
});
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä½¿ç”¨<code>then</code>æ–¹æ³•ï¼Œä¾æ¬¡æŒ‡å®šäº†ä¸¤ä¸ªå›è°ƒå‡½æ•°ã€‚ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°å®Œæˆä»¥åï¼Œä¼šå°†è¿”å›ç»“æœä½œä¸ºå‚æ•°ï¼Œä¼ å…¥ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°ã€‚</p>
<p>é‡‡ç”¨é“¾å¼çš„<code>then</code>ï¼Œå¯ä»¥æŒ‡å®šä¸€ç»„æŒ‰ç…§æ¬¡åºè°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚è¿™æ—¶ï¼Œå‰ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæœ‰å¯èƒ½è¿”å›çš„è¿˜æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼ˆå³æœ‰å¼‚æ­¥æ“ä½œï¼‰ï¼Œè¿™æ—¶åä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå°±ä¼šç­‰å¾…è¯¥Promiseå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šè¢«è°ƒç”¨ã€‚</p>
<pre><code class="javascript">getJSON(&quot;/post/1.json&quot;).then(function(post) {
  return getJSON(post.commentURL);
}).then(function funcA(comments) {
  console.log(&quot;Resolved: &quot;, comments);
}, function funcB(err){
  console.log(&quot;Rejected: &quot;, err);
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬ä¸€ä¸ª<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œè¿”å›çš„æ˜¯å¦ä¸€ä¸ªPromiseå¯¹è±¡ã€‚è¿™æ—¶ï¼Œç¬¬äºŒä¸ª<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°±ä¼šç­‰å¾…è¿™ä¸ªæ–°çš„Promiseå¯¹è±¡çŠ¶æ€å‘ç”Ÿå˜åŒ–ã€‚å¦‚æœå˜ä¸ºResolvedï¼Œå°±è°ƒç”¨<code>funcA</code>ï¼Œå¦‚æœçŠ¶æ€å˜ä¸ºRejectedï¼Œå°±è°ƒç”¨<code>funcB</code>ã€‚</p>
<p>å¦‚æœé‡‡ç”¨ç®­å¤´å‡½æ•°ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥å†™å¾—æ›´ç®€æ´ã€‚</p>
<pre><code class="javascript">getJSON(&quot;/post/1.json&quot;).then(
  post =&gt; getJSON(post.commentURL)
).then(
  comments =&gt; console.log(&quot;Resolved: &quot;, comments),
  err =&gt; console.log(&quot;Rejected: &quot;, err)
);
</code></pre>
<h2 id="Promise-prototype-catch"><a href="#Promise-prototype-catch" class="headerlink" title="Promise.prototype.catch()"></a>Promise.prototype.catch()</h2><p><code>Promise.prototype.catch</code>æ–¹æ³•æ˜¯<code>.then(null, rejection)</code>çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚</p>
<pre><code class="javascript">getJSON(&quot;/posts.json&quot;).then(function(posts) {
  // ...
}).catch(function(error) {
  // å¤„ç† getJSON å’Œ å‰ä¸€ä¸ªå›è°ƒå‡½æ•°è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯
  console.log(&#39;å‘ç”Ÿé”™è¯¯ï¼&#39;, error);
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>getJSON</code>æ–¹æ³•è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå¦‚æœè¯¥å¯¹è±¡çŠ¶æ€å˜ä¸º<code>Resolved</code>ï¼Œåˆ™ä¼šè°ƒç”¨<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼›å¦‚æœå¼‚æ­¥æ“ä½œæŠ›å‡ºé”™è¯¯ï¼ŒçŠ¶æ€å°±ä¼šå˜ä¸º<code>Rejected</code>ï¼Œå°±ä¼šè°ƒç”¨<code>catch</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¤„ç†è¿™ä¸ªé”™è¯¯ã€‚å¦å¤–ï¼Œ<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœè¿è¡Œä¸­æŠ›å‡ºé”™è¯¯ï¼Œä¹Ÿä¼šè¢«<code>catch</code>æ–¹æ³•æ•è·ã€‚</p>
<pre><code class="javascript">p.then((val) =&gt; console.log(&quot;fulfilled:&quot;, val))
  .catch((err) =&gt; console.log(&quot;rejected:&quot;, err));

// ç­‰åŒäº
p.then((val) =&gt; console.log(&quot;fulfilled:&quot;, val))
  .then(null, (err) =&gt; console.log(&quot;rejected:&quot;, err));
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var promise = new Promise(function(resolve, reject) {
  throw new Error(&#39;test&#39;);
});
promise.catch(function(error) {
  console.log(error);
});
// Error: test
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>promise</code>æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå°±è¢«<code>catch</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°æ•è·ã€‚æ³¨æ„ï¼Œä¸Šé¢çš„å†™æ³•ä¸ä¸‹é¢ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ã€‚</p>
<pre><code class="javascript">// å†™æ³•ä¸€
var promise = new Promise(function(resolve, reject) {
  try {
    throw new Error(&#39;test&#39;);
  } catch(e) {
    reject(e);
  }
});
promise.catch(function(error) {
  console.log(error);
});

// å†™æ³•äºŒ
var promise = new Promise(function(resolve, reject) {
  reject(new Error(&#39;test&#39;));
});
promise.catch(function(error) {
  console.log(error);
});
</code></pre>
<p>æ¯”è¾ƒä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œå¯ä»¥å‘ç°<code>reject</code>æ–¹æ³•çš„ä½œç”¨ï¼Œç­‰åŒäºæŠ›å‡ºé”™è¯¯ã€‚</p>
<p>å¦‚æœPromiseçŠ¶æ€å·²ç»å˜æˆ<code>Resolved</code>ï¼Œå†æŠ›å‡ºé”™è¯¯æ˜¯æ— æ•ˆçš„ã€‚</p>
<pre><code class="javascript">var promise = new Promise(function(resolve, reject) {
  resolve(&#39;ok&#39;);
  throw new Error(&#39;test&#39;);
});
promise
  .then(function(value) { console.log(value) })
  .catch(function(error) { console.log(error) });
// ok
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒPromiseåœ¨<code>resolve</code>è¯­å¥åé¢ï¼Œå†æŠ›å‡ºé”™è¯¯ï¼Œä¸ä¼šè¢«æ•è·ï¼Œç­‰äºæ²¡æœ‰æŠ›å‡ºã€‚</p>
<p>Promiseå¯¹è±¡çš„é”™è¯¯å…·æœ‰â€œå†’æ³¡â€æ€§è´¨ï¼Œä¼šä¸€ç›´å‘åä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·ä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ª<code>catch</code>è¯­å¥æ•è·ã€‚</p>
<pre><code class="javascript">getJSON(&quot;/post/1.json&quot;).then(function(post) {
  return getJSON(post.commentURL);
}).then(function(comments) {
  // some code
}).catch(function(error) {
  // å¤„ç†å‰é¢ä¸‰ä¸ªPromiseäº§ç”Ÿçš„é”™è¯¯
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¸€å…±æœ‰ä¸‰ä¸ªPromiseå¯¹è±¡ï¼šä¸€ä¸ªç”±<code>getJSON</code>äº§ç”Ÿï¼Œä¸¤ä¸ªç”±<code>then</code>äº§ç”Ÿã€‚å®ƒä»¬ä¹‹ä¸­ä»»ä½•ä¸€ä¸ªæŠ›å‡ºçš„é”™è¯¯ï¼Œéƒ½ä¼šè¢«æœ€åä¸€ä¸ª<code>catch</code>æ•è·ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸è¦åœ¨<code>then</code>æ–¹æ³•é‡Œé¢å®šä¹‰RejectçŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼ˆå³<code>then</code>çš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œæ€»æ˜¯ä½¿ç”¨<code>catch</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">// bad
promise
  .then(function(data) {
    // success
  }, function(err) {
    // error
  });

// good
promise
  .then(function(data) { //cb
    // success
  })
  .catch(function(err) {
    // error
  });
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒç§å†™æ³•è¦å¥½äºç¬¬ä¸€ç§å†™æ³•ï¼Œç†ç”±æ˜¯ç¬¬äºŒç§å†™æ³•å¯ä»¥æ•è·å‰é¢<code>then</code>æ–¹æ³•æ‰§è¡Œä¸­çš„é”™è¯¯ï¼Œä¹Ÿæ›´æ¥è¿‘åŒæ­¥çš„å†™æ³•ï¼ˆ<code>try/catch</code>ï¼‰ã€‚å› æ­¤ï¼Œå»ºè®®æ€»æ˜¯ä½¿ç”¨<code>catch</code>æ–¹æ³•ï¼Œè€Œä¸ä½¿ç”¨<code>then</code>æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚</p>
<p>è·Ÿä¼ ç»Ÿçš„<code>try/catch</code>ä»£ç å—ä¸åŒçš„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨<code>catch</code>æ–¹æ³•æŒ‡å®šé”™è¯¯å¤„ç†çš„å›è°ƒå‡½æ•°ï¼ŒPromiseå¯¹è±¡æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç ï¼Œå³ä¸ä¼šæœ‰ä»»ä½•ååº”ã€‚</p>
<pre><code class="javascript">var someAsyncThing = function() {
  return new Promise(function(resolve, reject) {
    // ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºxæ²¡æœ‰å£°æ˜
    resolve(x + 2);
  });
};

someAsyncThing().then(function() {
  console.log(&#39;everything is great&#39;);
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>someAsyncThing</code>å‡½æ•°äº§ç”Ÿçš„Promiseå¯¹è±¡ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ç”±äºæ²¡æœ‰æŒ‡å®š<code>catch</code>æ–¹æ³•ï¼Œè¿™ä¸ªé”™è¯¯ä¸ä¼šè¢«æ•è·ï¼Œä¹Ÿä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç ï¼Œå¯¼è‡´è¿è¡Œåæ²¡æœ‰ä»»ä½•è¾“å‡ºã€‚æ³¨æ„ï¼ŒChromeæµè§ˆå™¨ä¸éµå®ˆè¿™æ¡è§„å®šï¼Œå®ƒä¼šæŠ›å‡ºé”™è¯¯â€œReferenceError: x is not definedâ€ã€‚</p>
<pre><code class="javascript">var promise = new Promise(function(resolve, reject) {
  resolve(&#39;ok&#39;);
  setTimeout(function() { throw new Error(&#39;test&#39;) }, 0)
});
promise.then(function(value) { console.log(value) });
// ok
// Uncaught Error: test
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒPromise æŒ‡å®šåœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€å†æŠ›å‡ºé”™è¯¯ï¼Œç»“æœç”±äºæ²¡æœ‰æŒ‡å®šä½¿ç”¨<code>try...catch</code>è¯­å¥ï¼Œå°±å†’æ³¡åˆ°æœ€å¤–å±‚ï¼Œæˆäº†æœªæ•è·çš„é”™è¯¯ã€‚å› ä¸ºæ­¤æ—¶ï¼ŒPromiseçš„å‡½æ•°ä½“å·²ç»è¿è¡Œç»“æŸäº†ï¼Œæ‰€ä»¥è¿™ä¸ªé”™è¯¯æ˜¯åœ¨Promiseå‡½æ•°ä½“å¤–æŠ›å‡ºçš„ã€‚</p>
<p>Node æœ‰ä¸€ä¸ª<code>unhandledRejection</code>äº‹ä»¶ï¼Œä¸“é—¨ç›‘å¬æœªæ•è·çš„<code>reject</code>é”™è¯¯ã€‚</p>
<pre><code class="javascript">process.on(&#39;unhandledRejection&#39;, function (err, p) {
  console.error(err.stack)
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>unhandledRejection</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯é”™è¯¯å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯æŠ¥é”™çš„Promiseå®ä¾‹ï¼Œå®ƒå¯ä»¥ç”¨æ¥äº†è§£å‘ç”Ÿé”™è¯¯çš„ç¯å¢ƒä¿¡æ¯ã€‚ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>catch</code>æ–¹æ³•è¿”å›çš„è¿˜æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå› æ­¤åé¢è¿˜å¯ä»¥æ¥ç€è°ƒç”¨<code>then</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">var someAsyncThing = function() {
  return new Promise(function(resolve, reject) {
    // ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºxæ²¡æœ‰å£°æ˜
    resolve(x + 2);
  });
};

someAsyncThing()
.catch(function(error) {
  console.log(&#39;oh no&#39;, error);
})
.then(function() {
  console.log(&#39;carry on&#39;);
});
// oh no [ReferenceError: x is not defined]
// carry on
</code></pre>
<p>ä¸Šé¢ä»£ç è¿è¡Œå®Œ<code>catch</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œä¼šæ¥ç€è¿è¡Œåé¢é‚£ä¸ª<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚å¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œåˆ™ä¼šè·³è¿‡<code>catch</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">Promise.resolve()
.catch(function(error) {
  console.log(&#39;oh no&#39;, error);
})
.then(function() {
  console.log(&#39;carry on&#39;);
});
// carry on
</code></pre>
<p>ä¸Šé¢çš„ä»£ç å› ä¸ºæ²¡æœ‰æŠ¥é”™ï¼Œè·³è¿‡äº†<code>catch</code>æ–¹æ³•ï¼Œç›´æ¥æ‰§è¡Œåé¢çš„<code>then</code>æ–¹æ³•ã€‚æ­¤æ—¶ï¼Œè¦æ˜¯<code>then</code>æ–¹æ³•é‡Œé¢æŠ¥é”™ï¼Œå°±ä¸å‰é¢çš„<code>catch</code>æ— å…³äº†ã€‚</p>
<p><code>catch</code>æ–¹æ³•ä¹‹ä¸­ï¼Œè¿˜èƒ½å†æŠ›å‡ºé”™è¯¯ã€‚</p>
<pre><code class="javascript">var someAsyncThing = function() {
  return new Promise(function(resolve, reject) {
    // ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºxæ²¡æœ‰å£°æ˜
    resolve(x + 2);
  });
};

someAsyncThing().then(function() {
  return someOtherAsyncThing();
}).catch(function(error) {
  console.log(&#39;oh no&#39;, error);
  // ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºyæ²¡æœ‰å£°æ˜
  y + 2;
}).then(function() {
  console.log(&#39;carry on&#39;);
});
// oh no [ReferenceError: x is not defined]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>catch</code>æ–¹æ³•æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºåé¢æ²¡æœ‰åˆ«çš„<code>catch</code>æ–¹æ³•äº†ï¼Œå¯¼è‡´è¿™ä¸ªé”™è¯¯ä¸ä¼šè¢«æ•è·ï¼Œä¹Ÿä¸ä¼šä¼ é€’åˆ°å¤–å±‚ã€‚å¦‚æœæ”¹å†™ä¸€ä¸‹ï¼Œç»“æœå°±ä¸ä¸€æ ·äº†ã€‚</p>
<pre><code class="javascript">someAsyncThing().then(function() {
  return someOtherAsyncThing();
}).catch(function(error) {
  console.log(&#39;oh no&#39;, error);
  // ä¸‹é¢ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºyæ²¡æœ‰å£°æ˜
  y + 2;
}).catch(function(error) {
  console.log(&#39;carry on&#39;, error);
});
// oh no [ReferenceError: x is not defined]
// carry on [ReferenceError: y is not defined]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒä¸ª<code>catch</code>æ–¹æ³•ç”¨æ¥æ•è·ï¼Œå‰ä¸€ä¸ª<code>catch</code>æ–¹æ³•æŠ›å‡ºçš„é”™è¯¯ã€‚</p>
<h2 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all()"></a>Promise.all()</h2><p><code>Promise.all</code>æ–¹æ³•ç”¨äºå°†å¤šä¸ªPromiseå®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚</p>
<pre><code class="javascript">var p = Promise.all([p1, p2, p3]);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Promise.all</code>æ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œ<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>éƒ½æ˜¯Promiseå¯¹è±¡çš„å®ä¾‹ï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±ä¼šå…ˆè°ƒç”¨ä¸‹é¢è®²åˆ°çš„<code>Promise.resolve</code>æ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸ºPromiseå®ä¾‹ï¼Œå†è¿›ä¸€æ­¥å¤„ç†ã€‚ï¼ˆ<code>Promise.all</code>æ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸æ˜¯æ•°ç»„ï¼Œä½†å¿…é¡»å…·æœ‰Iteratoræ¥å£ï¼Œä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯Promiseå®ä¾‹ã€‚ï¼‰</p>
<p><code>p</code>çš„çŠ¶æ€ç”±<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µã€‚</p>
<p>ï¼ˆ1ï¼‰åªæœ‰<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>çš„çŠ¶æ€éƒ½å˜æˆ<code>fulfilled</code>ï¼Œ<code>p</code>çš„çŠ¶æ€æ‰ä¼šå˜æˆ<code>fulfilled</code>ï¼Œæ­¤æ—¶<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™<code>p</code>çš„å›è°ƒå‡½æ•°ã€‚</p>
<p>ï¼ˆ2ï¼‰åªè¦<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>ä¹‹ä¸­æœ‰ä¸€ä¸ªè¢«<code>rejected</code>ï¼Œ<code>p</code>çš„çŠ¶æ€å°±å˜æˆ<code>rejected</code>ï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªè¢«<code>reject</code>çš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼šä¼ é€’ç»™<code>p</code>çš„å›è°ƒå‡½æ•°ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">// ç”Ÿæˆä¸€ä¸ªPromiseå¯¹è±¡çš„æ•°ç»„
var promises = [2, 3, 5, 7, 11, 13].map(function (id) {
  return getJSON(&quot;/post/&quot; + id + &quot;.json&quot;);
});

Promise.all(promises).then(function (posts) {
  // ...
}).catch(function(reason){
  // ...
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>promises</code>æ˜¯åŒ…å«6ä¸ªPromiseå®ä¾‹çš„æ•°ç»„ï¼Œåªæœ‰è¿™6ä¸ªå®ä¾‹çš„çŠ¶æ€éƒ½å˜æˆ<code>fulfilled</code>ï¼Œæˆ–è€…å…¶ä¸­æœ‰ä¸€ä¸ªå˜ä¸º<code>rejected</code>ï¼Œæ‰ä¼šè°ƒç”¨<code>Promise.all</code>æ–¹æ³•åé¢çš„å›è°ƒå‡½æ•°ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">const databasePromise = connectDatabase();

const booksPromise = databaseProimse
  .then(findAllBooks);

const userPromise = databasePromise
  .then(getCurrentUser);

Promise.all([
  booksPromise,
  userPromise
])
.then(([books, user]) =&gt; pickTopRecommentations(books, user));
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>booksPromise</code>å’Œ<code>userPromise</code>æ˜¯ä¸¤ä¸ªå¼‚æ­¥æ“ä½œï¼Œåªæœ‰ç­‰åˆ°å®ƒä»¬çš„ç»“æœéƒ½è¿”å›äº†ï¼Œæ‰ä¼šè§¦å‘<code>pickTopRecommentations</code>è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚</p>
<h2 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race()"></a>Promise.race()</h2><p><code>Promise.race</code>æ–¹æ³•åŒæ ·æ˜¯å°†å¤šä¸ªPromiseå®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚</p>
<pre><code class="javascript">var p = Promise.race([p1, p2, p3]);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦<code>p1</code>ã€<code>p2</code>ã€<code>p3</code>ä¹‹ä¸­æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œ<code>p</code>çš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚é‚£ä¸ªç‡å…ˆæ”¹å˜çš„ Promise å®ä¾‹çš„è¿”å›å€¼ï¼Œå°±ä¼ é€’ç»™<code>p</code>çš„å›è°ƒå‡½æ•°ã€‚</p>
<p><code>Promise.race</code>æ–¹æ³•çš„å‚æ•°ä¸<code>Promise.all</code>æ–¹æ³•ä¸€æ ·ï¼Œå¦‚æœä¸æ˜¯ Promise å®ä¾‹ï¼Œå°±ä¼šå…ˆè°ƒç”¨ä¸‹é¢è®²åˆ°çš„<code>Promise.resolve</code>æ–¹æ³•ï¼Œå°†å‚æ•°è½¬ä¸º Promise å®ä¾‹ï¼Œå†è¿›ä¸€æ­¥å¤„ç†ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœæŒ‡å®šæ—¶é—´å†…æ²¡æœ‰è·å¾—ç»“æœï¼Œå°±å°†Promiseçš„çŠ¶æ€å˜ä¸º<code>reject</code>ï¼Œå¦åˆ™å˜ä¸º<code>resolve</code>ã€‚</p>
<pre><code class="javascript">var p = Promise.race([
  fetch(&#39;/resource-that-may-take-a-while&#39;),
  new Promise(function (resolve, reject) {
    setTimeout(() =&gt; reject(new Error(&#39;request timeout&#39;)), 5000)
  })
])
p.then(response =&gt; console.log(response))
p.catch(error =&gt; console.log(error))
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœ5ç§’ä¹‹å†…<code>fetch</code>æ–¹æ³•æ— æ³•è¿”å›ç»“æœï¼Œå˜é‡<code>p</code>çš„çŠ¶æ€å°±ä¼šå˜ä¸º<code>rejected</code>ï¼Œä»è€Œè§¦å‘<code>catch</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</p>
<h2 id="Promise-resolve"><a href="#Promise-resolve" class="headerlink" title="Promise.resolve()"></a>Promise.resolve()</h2><p>æœ‰æ—¶éœ€è¦å°†ç°æœ‰å¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œ<code>Promise.resolve</code>æ–¹æ³•å°±èµ·åˆ°è¿™ä¸ªä½œç”¨ã€‚</p>
<pre><code class="javascript">var jsPromise = Promise.resolve($.ajax(&#39;/whatever.json&#39;));
</code></pre>
<p>ä¸Šé¢ä»£ç å°†jQueryç”Ÿæˆçš„<code>deferred</code>å¯¹è±¡ï¼Œè½¬ä¸ºä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ã€‚</p>
<p><code>Promise.resolve</code>ç­‰ä»·äºä¸‹é¢çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">Promise.resolve(&#39;foo&#39;)
// ç­‰ä»·äº
new Promise(resolve =&gt; resolve(&#39;foo&#39;))
</code></pre>
<p><code>Promise.resolve</code>æ–¹æ³•çš„å‚æ•°åˆ†æˆå››ç§æƒ…å†µã€‚</p>
<p><strong>ï¼ˆ1ï¼‰å‚æ•°æ˜¯ä¸€ä¸ªPromiseå®ä¾‹</strong></p>
<p>å¦‚æœå‚æ•°æ˜¯Promiseå®ä¾‹ï¼Œé‚£ä¹ˆ<code>Promise.resolve</code>å°†ä¸åšä»»ä½•ä¿®æ”¹ã€åŸå°ä¸åŠ¨åœ°è¿”å›è¿™ä¸ªå®ä¾‹ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰å‚æ•°æ˜¯ä¸€ä¸ª<code>thenable</code>å¯¹è±¡</strong></p>
<p><code>thenable</code>å¯¹è±¡æŒ‡çš„æ˜¯å…·æœ‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªå¯¹è±¡ã€‚</p>
<pre><code class="javascript">let thenable = {
  then: function(resolve, reject) {
    resolve(42);
  }
};
</code></pre>
<p><code>Promise.resolve</code>æ–¹æ³•ä¼šå°†è¿™ä¸ªå¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œç„¶åå°±ç«‹å³æ‰§è¡Œ<code>thenable</code>å¯¹è±¡çš„<code>then</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">let thenable = {
  then: function(resolve, reject) {
    resolve(42);
  }
};

let p1 = Promise.resolve(thenable);
p1.then(function(value) {
  console.log(value);  // 42
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>thenable</code>å¯¹è±¡çš„<code>then</code>æ–¹æ³•æ‰§è¡Œåï¼Œå¯¹è±¡<code>p1</code>çš„çŠ¶æ€å°±å˜ä¸º<code>resolved</code>ï¼Œä»è€Œç«‹å³æ‰§è¡Œæœ€åé‚£ä¸ª<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œè¾“å‡º42ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰å‚æ•°ä¸æ˜¯å…·æœ‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼Œæˆ–æ ¹æœ¬å°±ä¸æ˜¯å¯¹è±¡</strong></p>
<p>å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼Œåˆ™<code>Promise.resolve</code>æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼ŒçŠ¶æ€ä¸º<code>Resolved</code>ã€‚</p>
<pre><code class="javascript">var p = Promise.resolve(&#39;Hello&#39;);

p.then(function (s){
  console.log(s)
});
// Hello
</code></pre>
<p>ä¸Šé¢ä»£ç ç”Ÿæˆä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡çš„å®ä¾‹<code>p</code>ã€‚ç”±äºå­—ç¬¦ä¸²<code>Hello</code>ä¸å±äºå¼‚æ­¥æ“ä½œï¼ˆåˆ¤æ–­æ–¹æ³•æ˜¯å®ƒä¸æ˜¯å…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼‰ï¼Œè¿”å›Promiseå®ä¾‹çš„çŠ¶æ€ä»ä¸€ç”Ÿæˆå°±æ˜¯<code>Resolved</code>ï¼Œæ‰€ä»¥å›è°ƒå‡½æ•°ä¼šç«‹å³æ‰§è¡Œã€‚<code>Promise.resolve</code>æ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŒæ—¶ä¼ ç»™å›è°ƒå‡½æ•°ã€‚</p>
<p><strong>ï¼ˆ4ï¼‰ä¸å¸¦æœ‰ä»»ä½•å‚æ•°</strong></p>
<p><code>Promise.resolve</code>æ–¹æ³•å…è®¸è°ƒç”¨æ—¶ä¸å¸¦å‚æ•°ï¼Œç›´æ¥è¿”å›ä¸€ä¸ª<code>Resolved</code>çŠ¶æ€çš„Promiseå¯¹è±¡ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¦‚æœå¸Œæœ›å¾—åˆ°ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œæ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•å°±æ˜¯ç›´æ¥è°ƒç”¨<code>Promise.resolve</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">var p = Promise.resolve();

p.then(function () {
  // ...
});
</code></pre>
<p>ä¸Šé¢ä»£ç çš„å˜é‡<code>p</code>å°±æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç«‹å³<code>resolve</code>çš„Promiseå¯¹è±¡ï¼Œæ˜¯åœ¨æœ¬è½®â€œäº‹ä»¶å¾ªç¯â€ï¼ˆevent loopï¼‰çš„ç»“æŸæ—¶ï¼Œè€Œä¸æ˜¯åœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€çš„å¼€å§‹æ—¶ã€‚</p>
<pre><code class="javascript">setTimeout(function () {
  console.log(&#39;three&#39;);
}, 0);

Promise.resolve().then(function () {
  console.log(&#39;two&#39;);
});

console.log(&#39;one&#39;);

// one
// two
// three
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>setTimeout(fn, 0)</code>åœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€å¼€å§‹æ—¶æ‰§è¡Œï¼Œ<code>Promise.resolve()</code>åœ¨æœ¬è½®â€œäº‹ä»¶å¾ªç¯â€ç»“æŸæ—¶æ‰§è¡Œï¼Œ<code>console.log(â€™oneâ€˜)</code>åˆ™æ˜¯ç«‹å³æ‰§è¡Œï¼Œå› æ­¤æœ€å…ˆè¾“å‡ºã€‚</p>
<h2 id="Promise-reject"><a href="#Promise-reject" class="headerlink" title="Promise.reject()"></a>Promise.reject()</h2><p><code>Promise.reject(reason)</code>æ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ï¼Œè¯¥å®ä¾‹çš„çŠ¶æ€ä¸º<code>rejected</code>ã€‚</p>
<pre><code class="javascript">var p = Promise.reject(&#39;å‡ºé”™äº†&#39;);
// ç­‰åŒäº
var p = new Promise((resolve, reject) =&gt; reject(&#39;å‡ºé”™äº†&#39;))

p.then(null, function (s) {
  console.log(s)
});
// å‡ºé”™äº†
</code></pre>
<p>ä¸Šé¢ä»£ç ç”Ÿæˆä¸€ä¸ªPromiseå¯¹è±¡çš„å®ä¾‹<code>p</code>ï¼ŒçŠ¶æ€ä¸º<code>rejected</code>ï¼Œå›è°ƒå‡½æ•°ä¼šç«‹å³æ‰§è¡Œã€‚</p>
<p>æ³¨æ„ï¼Œ<code>Promise.reject()</code>æ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŸå°ä¸åŠ¨åœ°ä½œä¸º<code>reject</code>çš„ç†ç”±ï¼Œå˜æˆåç»­æ–¹æ³•çš„å‚æ•°ã€‚è¿™ä¸€ç‚¹ä¸<code>Promise.resolve</code>æ–¹æ³•ä¸ä¸€è‡´ã€‚</p>
<pre><code class="javascript">const thenable = {
  then(resolve, reject) {
    reject(&#39;å‡ºé”™äº†&#39;);
  }
};

Promise.reject(thenable)
.catch(e =&gt; {
  console.log(e === thenable)
})
// true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Promise.reject</code>æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ª<code>thenable</code>å¯¹è±¡ï¼Œæ‰§è¡Œä»¥åï¼Œåé¢<code>catch</code>æ–¹æ³•çš„å‚æ•°ä¸æ˜¯<code>reject</code>æŠ›å‡ºçš„â€œå‡ºé”™äº†â€è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯<code>thenable</code>å¯¹è±¡ã€‚</p>
<h2 id="ä¸¤ä¸ªæœ‰ç”¨çš„é™„åŠ æ–¹æ³•"><a href="#ä¸¤ä¸ªæœ‰ç”¨çš„é™„åŠ æ–¹æ³•" class="headerlink" title="ä¸¤ä¸ªæœ‰ç”¨çš„é™„åŠ æ–¹æ³•"></a>ä¸¤ä¸ªæœ‰ç”¨çš„é™„åŠ æ–¹æ³•</h2><p>ES6çš„Promise APIæä¾›çš„æ–¹æ³•ä¸æ˜¯å¾ˆå¤šï¼Œæœ‰äº›æœ‰ç”¨çš„æ–¹æ³•å¯ä»¥è‡ªå·±éƒ¨ç½²ã€‚ä¸‹é¢ä»‹ç»å¦‚ä½•éƒ¨ç½²ä¸¤ä¸ªä¸åœ¨ES6ä¹‹ä¸­ã€ä½†å¾ˆæœ‰ç”¨çš„æ–¹æ³•ã€‚</p>
<h3 id="done"><a href="#done" class="headerlink" title="done()"></a>done()</h3><p>Promiseå¯¹è±¡çš„å›è°ƒé“¾ï¼Œä¸ç®¡ä»¥<code>then</code>æ–¹æ³•æˆ–<code>catch</code>æ–¹æ³•ç»“å°¾ï¼Œè¦æ˜¯æœ€åä¸€ä¸ªæ–¹æ³•æŠ›å‡ºé”™è¯¯ï¼Œéƒ½æœ‰å¯èƒ½æ— æ³•æ•æ‰åˆ°ï¼ˆå› ä¸ºPromiseå†…éƒ¨çš„é”™è¯¯ä¸ä¼šå†’æ³¡åˆ°å…¨å±€ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›ä¸€ä¸ª<code>done</code>æ–¹æ³•ï¼Œæ€»æ˜¯å¤„äºå›è°ƒé“¾çš„å°¾ç«¯ï¼Œä¿è¯æŠ›å‡ºä»»ä½•å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚</p>
<pre><code class="javascript">asyncFunc()
  .then(f1)
  .catch(r1)
  .then(f2)
  .done();
</code></pre>
<p>å®ƒçš„å®ç°ä»£ç ç›¸å½“ç®€å•ã€‚</p>
<pre><code class="javascript">Promise.prototype.done = function (onFulfilled, onRejected) {
  this.then(onFulfilled, onRejected)
    .catch(function (reason) {
      // æŠ›å‡ºä¸€ä¸ªå…¨å±€é”™è¯¯
      setTimeout(() =&gt; { throw reason }, 0);
    });
};
</code></pre>
<p>ä»ä¸Šé¢ä»£ç å¯è§ï¼Œ<code>done</code>æ–¹æ³•çš„ä½¿ç”¨ï¼Œå¯ä»¥åƒ<code>then</code>æ–¹æ³•é‚£æ ·ç”¨ï¼Œæä¾›<code>Fulfilled</code>å’Œ<code>Rejected</code>çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä¸æä¾›ä»»ä½•å‚æ•°ã€‚ä½†ä¸ç®¡æ€æ ·ï¼Œ<code>done</code>éƒ½ä¼šæ•æ‰åˆ°ä»»ä½•å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼Œå¹¶å‘å…¨å±€æŠ›å‡ºã€‚</p>
<h3 id="finally"><a href="#finally" class="headerlink" title="finally()"></a>finally()</h3><p><code>finally</code>æ–¹æ³•ç”¨äºæŒ‡å®šä¸ç®¡Promiseå¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚å®ƒä¸<code>done</code>æ–¹æ³•çš„æœ€å¤§åŒºåˆ«ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ™®é€šçš„å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¸ç®¡æ€æ ·éƒ½å¿…é¡»æ‰§è¡Œã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ŒæœåŠ¡å™¨ä½¿ç”¨Promiseå¤„ç†è¯·æ±‚ï¼Œç„¶åä½¿ç”¨<code>finally</code>æ–¹æ³•å…³æ‰æœåŠ¡å™¨ã€‚</p>
<pre><code class="javascript">server.listen(0)
  .then(function () {
    // run test
  })
  .finally(server.stop);
</code></pre>
<p>å®ƒçš„å®ç°ä¹Ÿå¾ˆç®€å•ã€‚</p>
<pre><code class="javascript">Promise.prototype.finally = function (callback) {
  let P = this.constructor;
  return this.then(
    value  =&gt; P.resolve(callback()).then(() =&gt; value),
    reason =&gt; P.resolve(callback()).then(() =&gt; { throw reason })
  );
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¸ç®¡å‰é¢çš„Promiseæ˜¯<code>fulfilled</code>è¿˜æ˜¯<code>rejected</code>ï¼Œéƒ½ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°<code>callback</code>ã€‚</p>
<p>æ›´å¤šITæŠ€æœ¯åˆ†äº«å°½åœ¨ ğŸ”—<a href="http://microzz.com">æ¶µæœˆå¤©-microzz.com</a></p>
<h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><h3 id="åŠ è½½å›¾ç‰‡"><a href="#åŠ è½½å›¾ç‰‡" class="headerlink" title="åŠ è½½å›¾ç‰‡"></a>åŠ è½½å›¾ç‰‡</h3><p>æˆ‘ä»¬å¯ä»¥å°†å›¾ç‰‡çš„åŠ è½½å†™æˆä¸€ä¸ª<code>Promise</code>ï¼Œä¸€æ—¦åŠ è½½å®Œæˆï¼Œ<code>Promise</code>çš„çŠ¶æ€å°±å‘ç”Ÿå˜åŒ–ã€‚</p>
<pre><code class="javascript">const preloadImage = function (path) {
  return new Promise(function (resolve, reject) {
    var image = new Image();
    image.onload  = resolve;
    image.onerror = reject;
    image.src = path;
  });
};
</code></pre>
<h3 id="Generatorå‡½æ•°ä¸Promiseçš„ç»“åˆ"><a href="#Generatorå‡½æ•°ä¸Promiseçš„ç»“åˆ" class="headerlink" title="Generatorå‡½æ•°ä¸Promiseçš„ç»“åˆ"></a>Generatorå‡½æ•°ä¸Promiseçš„ç»“åˆ</h3><p>ä½¿ç”¨Generatorå‡½æ•°ç®¡ç†æµç¨‹ï¼Œé‡åˆ°å¼‚æ­¥æ“ä½œçš„æ—¶å€™ï¼Œé€šå¸¸è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ã€‚</p>
<pre><code class="javascript">function getFoo () {
  return new Promise(function (resolve, reject){
    resolve(&#39;foo&#39;);
  });
}

var g = function* () {
  try {
    var foo = yield getFoo();
    console.log(foo);
  } catch (e) {
    console.log(e);
  }
};

function run (generator) {
  var it = generator();

  function go(result) {
    if (result.done) return result.value;

    return result.value.then(function (value) {
      return go(it.next(value));
    }, function (error) {
      return go(it.throw(error));
    });
  }

  go(it.next());
}

run(g);
</code></pre>
<p>ä¸Šé¢ä»£ç çš„Generatorå‡½æ•°<code>g</code>ä¹‹ä¸­ï¼Œæœ‰ä¸€ä¸ªå¼‚æ­¥æ“ä½œ<code>getFoo</code>ï¼Œå®ƒè¿”å›çš„å°±æ˜¯ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ã€‚å‡½æ•°<code>run</code>ç”¨æ¥å¤„ç†è¿™ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œå¹¶è°ƒç”¨ä¸‹ä¸€ä¸ª<code>next</code>æ–¹æ³•ã€‚</p>
<h2 id="Promise-try"><a href="#Promise-try" class="headerlink" title="Promise.try()"></a>Promise.try()</h2><p>å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸é‡åˆ°ä¸€ç§æƒ…å†µï¼šä¸çŸ¥é“æˆ–è€…ä¸æƒ³åŒºåˆ†ï¼Œå‡½æ•°<code>f</code>æ˜¯åŒæ­¥å‡½æ•°è¿˜æ˜¯å¼‚æ­¥æ“ä½œï¼Œä½†æ˜¯æƒ³ç”¨ Promise æ¥å¤„ç†å®ƒã€‚å› ä¸ºè¿™æ ·å°±å¯ä»¥ä¸ç®¡<code>f</code>æ˜¯å¦åŒ…å«å¼‚æ­¥æ“ä½œï¼Œéƒ½ç”¨<code>then</code>æ–¹æ³•æŒ‡å®šä¸‹ä¸€æ­¥æµç¨‹ï¼Œç”¨<code>catch</code>æ–¹æ³•å¤„ç†<code>f</code>æŠ›å‡ºçš„é”™è¯¯ã€‚ä¸€èˆ¬å°±ä¼šé‡‡ç”¨ä¸‹é¢çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">Promise.resolve().then(f)
</code></pre>
<p>ä¸Šé¢çš„å†™æ³•æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å¦‚æœ<code>f</code>æ˜¯åŒæ­¥å‡½æ•°ï¼Œé‚£ä¹ˆå®ƒä¼šåœ¨æœ¬è½®äº‹ä»¶å¾ªç¯çš„æœ«å°¾æ‰§è¡Œã€‚</p>
<pre><code class="javascript">const f = () =&gt; console.log(&#39;now&#39;);
Promise.resolve().then(f);
console.log(&#39;next&#39;);
// next
// now
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>f</code>æ˜¯åŒæ­¥çš„ï¼Œä½†æ˜¯ç”¨ Promise åŒ…è£…äº†ä»¥åï¼Œå°±å˜æˆå¼‚æ­¥æ‰§è¡Œäº†ã€‚</p>
<p>é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•ï¼Œè®©åŒæ­¥å‡½æ•°åŒæ­¥æ‰§è¡Œï¼Œå¼‚æ­¥å‡½æ•°å¼‚æ­¥æ‰§è¡Œï¼Œå¹¶ä¸”è®©å®ƒä»¬å…·æœ‰ç»Ÿä¸€çš„ API å‘¢ï¼Ÿå›ç­”æ˜¯å¯ä»¥çš„ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸¤ç§å†™æ³•ã€‚ç¬¬ä¸€ç§å†™æ³•æ˜¯ç”¨<code>async</code>å‡½æ•°æ¥å†™ã€‚</p>
<pre><code class="javascript">const f = () =&gt; console.log(&#39;now&#39;);
(async () =&gt; f())();
console.log(&#39;next&#39;);
// now
// next
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒè¡Œæ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œçš„åŒ¿åå‡½æ•°ï¼Œä¼šç«‹å³æ‰§è¡Œé‡Œé¢çš„<code>async</code>å‡½æ•°ï¼Œå› æ­¤å¦‚æœ<code>f</code>æ˜¯åŒæ­¥çš„ï¼Œå°±ä¼šå¾—åˆ°åŒæ­¥çš„ç»“æœï¼›å¦‚æœ<code>f</code>æ˜¯å¼‚æ­¥çš„ï¼Œå°±å¯ä»¥ç”¨<code>then</code>æŒ‡å®šä¸‹ä¸€æ­¥ï¼Œå°±åƒä¸‹é¢çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">(async () =&gt; f())()
.then(...)
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>async () =&gt; f()</code>ä¼šåƒæ‰<code>f()</code>æŠ›å‡ºçš„é”™è¯¯ã€‚æ‰€ä»¥ï¼Œå¦‚æœæƒ³æ•è·é”™è¯¯ï¼Œè¦ä½¿ç”¨<code>promise.catch</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">(async () =&gt; f())()
.then(...)
.catch(...)
</code></pre>
<p>ç¬¬äºŒç§å†™æ³•æ˜¯ä½¿ç”¨<code>new Promise()</code>ã€‚</p>
<pre><code class="javascript">const f = () =&gt; console.log(&#39;now&#39;);
(
  () =&gt; new Promise(
    resolve =&gt; resolve(f())
  )
)();
console.log(&#39;next&#39;);
// now
// next
</code></pre>
<p>ä¸Šé¢ä»£ç ä¹Ÿæ˜¯ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„åŒ¿åå‡½æ•°ï¼Œæ‰§è¡Œ<code>new Promise()</code>ã€‚è¿™ç§æƒ…å†µä¸‹ï¼ŒåŒæ­¥å‡½æ•°ä¹Ÿæ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚</p>
<p>é‰´äºè¿™æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œæ‰€ä»¥ç°åœ¨æœ‰ä¸€ä¸ª<a href="https://github.com/ljharb/proposal-promise-try" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œæä¾›<code>Promise.try</code>æ–¹æ³•æ›¿ä»£ä¸Šé¢çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">const f = () =&gt; console.log(&#39;now&#39;);
Promise.try(f);
console.log(&#39;next&#39;);
// now
// next
</code></pre>
<p>äº‹å®ä¸Šï¼Œ<code>Promise.try</code>å­˜åœ¨å·²ä¹…ï¼ŒPromise åº“<a href="http://bluebirdjs.com/docs/api/promise.try.html" target="_blank" rel="external"><code>Bluebird</code></a>ã€<a href="https://github.com/kriskowal/q/wiki/API-Reference#promisefcallargs" target="_blank" rel="external"><code>Q</code></a>å’Œ<a href="https://github.com/cujojs/when/blob/master/docs/api.md#whentry" target="_blank" rel="external"><code>when</code></a>ï¼Œæ—©å°±æä¾›äº†è¿™ä¸ªæ–¹æ³•ã€‚</p>
<p>ç”±äº<code>Promise.try</code>ä¸ºæ‰€æœ‰æ“ä½œæä¾›äº†ç»Ÿä¸€çš„å¤„ç†æœºåˆ¶ï¼Œæ‰€ä»¥å¦‚æœæƒ³ç”¨<code>then</code>æ–¹æ³•ç®¡ç†æµç¨‹ï¼Œæœ€å¥½éƒ½ç”¨<code>Promise.try</code>åŒ…è£…ä¸€ä¸‹ã€‚è¿™æ ·æœ‰<a href="http://cryto.net/~joepie91/blog/2016/05/11/what-is-promise-try-and-why-does-it-matter/" target="_blank" rel="external">è®¸å¤šå¥½å¤„</a>ï¼Œå…¶ä¸­ä¸€ç‚¹å°±æ˜¯å¯ä»¥æ›´å¥½åœ°ç®¡ç†å¼‚å¸¸ã€‚</p>
<pre><code class="javascript">function getUsername(userId) {
  return database.users.get({id: userId})
  .then(function(user) {
    return user.name;
  });
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>database.users.get()</code>è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¦‚æœæŠ›å‡ºå¼‚æ­¥é”™è¯¯ï¼Œå¯ä»¥ç”¨<code>catch</code>æ–¹æ³•æ•è·ï¼Œå°±åƒä¸‹é¢è¿™æ ·å†™ã€‚</p>
<pre><code class="javascript">database.users.get({id: userId})
.then(...)
.catch(...)
</code></pre>
<p>ä½†æ˜¯<code>database.users.get()</code>å¯èƒ½è¿˜ä¼šæŠ›å‡ºåŒæ­¥é”™è¯¯ï¼ˆæ¯”å¦‚æ•°æ®åº“è¿æ¥é”™è¯¯ï¼Œå…·ä½“è¦çœ‹å®ç°æ–¹æ³•ï¼‰ï¼Œè¿™æ—¶ä½ å°±ä¸å¾—ä¸ç”¨<code>try...catch</code>å»æ•è·ã€‚</p>
<pre><code class="javascript">try {
  database.users.get({id: userId})
  .then(...)
  .catch(...)
} catch (e) {
  // ...
}
</code></pre>
<p>ä¸Šé¢è¿™æ ·çš„å†™æ³•å°±å¾ˆç¬¨æ‹™äº†ï¼Œè¿™æ—¶å°±å¯ä»¥ç»Ÿä¸€ç”¨<code>promise.catch()</code>æ•è·æ‰€æœ‰åŒæ­¥å’Œå¼‚æ­¥çš„é”™è¯¯ã€‚</p>
<pre><code class="javascript">Promise.try(database.users.get({id: userId}))
  .then(...)
  .catch(...)
</code></pre>
<p>äº‹å®ä¸Šï¼Œ<code>Promise.try</code>å°±æ˜¯æ¨¡æ‹Ÿ<code>try</code>ä»£ç å—ï¼Œå°±åƒ<code>promise.catch</code>æ¨¡æ‹Ÿçš„æ˜¯<code>catch</code>ä»£ç å—ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Promiseå¯¹è±¡&quot;&gt;&lt;a href=&quot;#Promiseå¯¹è±¡&quot; class=&quot;headerlink&quot; title=&quot;Promiseå¯¹è±¡&quot;&gt;&lt;/a&gt;Promiseå¯¹è±¡&lt;/h1&gt;&lt;h2 id=&quot;Promiseçš„å«ä¹‰&quot;&gt;&lt;a href=&quot;#Promiseçš„å«ä¹‰&quot; cla
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Promise" scheme="https://microzz.com/tags/Promise/"/>
    
  </entry>
  
  <entry>
    <title>Generator å‡½æ•°</title>
    <link href="https://microzz.com/2017/01/13/generator/"/>
    <id>https://microzz.com/2017/01/13/generator/</id>
    <published>2017-01-13T06:51:58.000Z</published>
    <updated>2017-08-21T11:34:56.763Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Generator-å‡½æ•°"><a href="#Generator-å‡½æ•°" class="headerlink" title="Generator å‡½æ•°"></a>Generator å‡½æ•°</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><p>Generatorå‡½æ•°æ˜¯ES6æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œè¯­æ³•è¡Œä¸ºä¸ä¼ ç»Ÿå‡½æ•°å®Œå…¨ä¸åŒã€‚æœ¬ç« è¯¦ç»†ä»‹ç»Generatorå‡½æ•°çš„è¯­æ³•å’ŒAPIï¼Œå®ƒçš„å¼‚æ­¥ç¼–ç¨‹åº”ç”¨è¯·çœ‹ã€Šå¼‚æ­¥æ“ä½œã€‹ä¸€ç« ã€‚</p>
<p>Generatorå‡½æ•°æœ‰å¤šç§ç†è§£è§’åº¦ã€‚ä»è¯­æ³•ä¸Šï¼Œé¦–å…ˆå¯ä»¥æŠŠå®ƒç†è§£æˆï¼ŒGeneratorå‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ã€‚</p>
<p>æ‰§è¡ŒGeneratorå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒGeneratorå‡½æ•°é™¤äº†çŠ¶æ€æœºï¼Œè¿˜æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°ã€‚è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œå¯ä»¥ä¾æ¬¡éå†Generatorå‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€ã€‚</p>
<p>å½¢å¼ä¸Šï¼ŒGeneratorå‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªç‰¹å¾ã€‚ä¸€æ˜¯ï¼Œ<code>function</code>å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼›äºŒæ˜¯ï¼Œå‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨<code>yield</code>è¯­å¥ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ï¼ˆyieldè¯­å¥åœ¨è‹±è¯­é‡Œçš„æ„æ€å°±æ˜¯â€œäº§å‡ºâ€ï¼‰ã€‚</p>
<pre><code class="javascript">function* helloWorldGenerator() {
  yield &#39;hello&#39;;
  yield &#39;world&#39;;
  return &#39;ending&#39;;
}

var hw = helloWorldGenerator();
</code></pre>
<p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªGeneratorå‡½æ•°<code>helloWorldGenerator</code>ï¼Œå®ƒå†…éƒ¨æœ‰ä¸¤ä¸ª<code>yield</code>è¯­å¥â€œhelloâ€å’Œâ€œworldâ€ï¼Œå³è¯¥å‡½æ•°æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼šhelloï¼Œworldå’Œreturnè¯­å¥ï¼ˆç»“æŸæ‰§è¡Œï¼‰ã€‚</p>
<p>ç„¶åï¼ŒGeneratorå‡½æ•°çš„è°ƒç”¨æ–¹æ³•ä¸æ™®é€šå‡½æ•°ä¸€æ ·ï¼Œä¹Ÿæ˜¯åœ¨å‡½æ•°ååé¢åŠ ä¸Šä¸€å¯¹åœ†æ‹¬å·ã€‚ä¸åŒçš„æ˜¯ï¼Œè°ƒç”¨Generatorå‡½æ•°åï¼Œè¯¥å‡½æ•°å¹¶ä¸æ‰§è¡Œï¼Œè¿”å›çš„ä¹Ÿä¸æ˜¯å‡½æ•°è¿è¡Œç»“æœï¼Œè€Œæ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸€ç« ä»‹ç»çš„éå†å™¨å¯¹è±¡ï¼ˆIterator Objectï¼‰ã€‚</p>
<p>ä¸‹ä¸€æ­¥ï¼Œå¿…é¡»è°ƒç”¨éå†å™¨å¯¹è±¡çš„nextæ–¹æ³•ï¼Œä½¿å¾—æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå†…éƒ¨æŒ‡é’ˆå°±ä»å‡½æ•°å¤´éƒ¨æˆ–ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¯­å¥ï¼ˆæˆ–<code>return</code>è¯­å¥ï¼‰ä¸ºæ­¢ã€‚æ¢è¨€ä¹‹ï¼ŒGeneratorå‡½æ•°æ˜¯åˆ†æ®µæ‰§è¡Œçš„ï¼Œ<code>yield</code>è¯­å¥æ˜¯æš‚åœæ‰§è¡Œçš„æ ‡è®°ï¼Œè€Œ<code>next</code>æ–¹æ³•å¯ä»¥æ¢å¤æ‰§è¡Œã€‚</p>
<pre><code class="javascript">hw.next()
// { value: &#39;hello&#39;, done: false }

hw.next()
// { value: &#39;world&#39;, done: false }

hw.next()
// { value: &#39;ending&#39;, done: true }

hw.next()
// { value: undefined, done: true }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸€å…±è°ƒç”¨äº†å››æ¬¡<code>next</code>æ–¹æ³•ã€‚</p>
<p>ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼ŒGeneratorå‡½æ•°å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ª<code>yield</code>è¯­å¥ä¸ºæ­¢ã€‚<code>next</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„<code>value</code>å±æ€§å°±æ˜¯å½“å‰<code>yield</code>è¯­å¥çš„å€¼helloï¼Œ<code>done</code>å±æ€§çš„å€¼falseï¼Œè¡¨ç¤ºéå†è¿˜æ²¡æœ‰ç»“æŸã€‚</p>
<p>ç¬¬äºŒæ¬¡è°ƒç”¨ï¼ŒGeneratorå‡½æ•°ä»ä¸Šæ¬¡<code>yield</code>è¯­å¥åœä¸‹çš„åœ°æ–¹ï¼Œä¸€ç›´æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¯­å¥ã€‚<code>next</code>æ–¹æ³•è¿”å›çš„å¯¹è±¡çš„<code>value</code>å±æ€§å°±æ˜¯å½“å‰<code>yield</code>è¯­å¥çš„å€¼worldï¼Œ<code>done</code>å±æ€§çš„å€¼falseï¼Œè¡¨ç¤ºéå†è¿˜æ²¡æœ‰ç»“æŸã€‚</p>
<p>ç¬¬ä¸‰æ¬¡è°ƒç”¨ï¼ŒGeneratorå‡½æ•°ä»ä¸Šæ¬¡<code>yield</code>è¯­å¥åœä¸‹çš„åœ°æ–¹ï¼Œä¸€ç›´æ‰§è¡Œåˆ°<code>return</code>è¯­å¥ï¼ˆå¦‚æœæ²¡æœ‰returnè¯­å¥ï¼Œå°±æ‰§è¡Œåˆ°å‡½æ•°ç»“æŸï¼‰ã€‚<code>next</code>æ–¹æ³•è¿”å›çš„å¯¹è±¡çš„<code>value</code>å±æ€§ï¼Œå°±æ˜¯ç´§è·Ÿåœ¨<code>return</code>è¯­å¥åé¢çš„è¡¨è¾¾å¼çš„å€¼ï¼ˆå¦‚æœæ²¡æœ‰<code>return</code>è¯­å¥ï¼Œåˆ™<code>value</code>å±æ€§çš„å€¼ä¸ºundefinedï¼‰ï¼Œ<code>done</code>å±æ€§çš„å€¼trueï¼Œè¡¨ç¤ºéå†å·²ç»ç»“æŸã€‚</p>
<p>ç¬¬å››æ¬¡è°ƒç”¨ï¼Œæ­¤æ—¶Generatorå‡½æ•°å·²ç»è¿è¡Œå®Œæ¯•ï¼Œ<code>next</code>æ–¹æ³•è¿”å›å¯¹è±¡çš„<code>value</code>å±æ€§ä¸ºundefinedï¼Œ<code>done</code>å±æ€§ä¸ºtrueã€‚ä»¥åå†è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œè¿”å›çš„éƒ½æ˜¯è¿™ä¸ªå€¼ã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œè°ƒç”¨Generatorå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œä»£è¡¨Generatorå‡½æ•°çš„å†…éƒ¨æŒ‡é’ˆã€‚ä»¥åï¼Œæ¯æ¬¡è°ƒç”¨éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæœ‰ç€<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚<code>value</code>å±æ€§è¡¨ç¤ºå½“å‰çš„å†…éƒ¨çŠ¶æ€çš„å€¼ï¼Œæ˜¯<code>yield</code>è¯­å¥åé¢é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼›<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦éå†ç»“æŸã€‚</p>
<p>ES6æ²¡æœ‰è§„å®šï¼Œ<code>function</code>å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´çš„æ˜Ÿå·ï¼Œå†™åœ¨å“ªä¸ªä½ç½®ã€‚è¿™å¯¼è‡´ä¸‹é¢çš„å†™æ³•éƒ½èƒ½é€šè¿‡ã€‚</p>
<pre><code class="javascript">function * foo(x, y) { Â·Â·Â· }

function *foo(x, y) { Â·Â·Â· }

function* foo(x, y) { Â·Â·Â· }

function*foo(x, y) { Â·Â·Â· }
</code></pre>
<p>ç”±äºGeneratorå‡½æ•°ä»ç„¶æ˜¯æ™®é€šå‡½æ•°ï¼Œæ‰€ä»¥ä¸€èˆ¬çš„å†™æ³•æ˜¯ä¸Šé¢çš„ç¬¬ä¸‰ç§ï¼Œå³æ˜Ÿå·ç´§è·Ÿåœ¨<code>function</code>å…³é”®å­—åé¢ã€‚æœ¬ä¹¦ä¹Ÿé‡‡ç”¨è¿™ç§å†™æ³•ã€‚</p>
<h3 id="yieldè¯­å¥"><a href="#yieldè¯­å¥" class="headerlink" title="yieldè¯­å¥"></a>yieldè¯­å¥</h3><p>ç”±äºGeneratorå‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œåªæœ‰è°ƒç”¨<code>next</code>æ–¹æ³•æ‰ä¼šéå†ä¸‹ä¸€ä¸ªå†…éƒ¨çŠ¶æ€ï¼Œæ‰€ä»¥å…¶å®æä¾›äº†ä¸€ç§å¯ä»¥æš‚åœæ‰§è¡Œçš„å‡½æ•°ã€‚<code>yield</code>è¯­å¥å°±æ˜¯æš‚åœæ ‡å¿—ã€‚</p>
<p>éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•çš„è¿è¡Œé€»è¾‘å¦‚ä¸‹ã€‚</p>
<p>ï¼ˆ1ï¼‰é‡åˆ°<code>yield</code>è¯­å¥ï¼Œå°±æš‚åœæ‰§è¡Œåé¢çš„æ“ä½œï¼Œå¹¶å°†ç´§è·Ÿåœ¨<code>yield</code>åé¢çš„é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›çš„å¯¹è±¡çš„<code>value</code>å±æ€§å€¼ã€‚</p>
<p>ï¼ˆ2ï¼‰ä¸‹ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•æ—¶ï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¯­å¥ã€‚</p>
<p>ï¼ˆ3ï¼‰å¦‚æœæ²¡æœ‰å†é‡åˆ°æ–°çš„<code>yield</code>è¯­å¥ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ°å‡½æ•°ç»“æŸï¼Œç›´åˆ°<code>return</code>è¯­å¥ä¸ºæ­¢ï¼Œå¹¶å°†<code>return</code>è¯­å¥åé¢çš„è¡¨è¾¾å¼çš„å€¼ï¼Œä½œä¸ºè¿”å›çš„å¯¹è±¡çš„<code>value</code>å±æ€§å€¼ã€‚</p>
<p>ï¼ˆ4ï¼‰å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰<code>return</code>è¯­å¥ï¼Œåˆ™è¿”å›çš„å¯¹è±¡çš„<code>value</code>å±æ€§å€¼ä¸º<code>undefined</code>ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>yield</code>è¯­å¥åé¢çš„è¡¨è¾¾å¼ï¼Œåªæœ‰å½“è°ƒç”¨<code>next</code>æ–¹æ³•ã€å†…éƒ¨æŒ‡é’ˆæŒ‡å‘è¯¥è¯­å¥æ—¶æ‰ä¼šæ‰§è¡Œï¼Œå› æ­¤ç­‰äºä¸ºJavaScriptæä¾›äº†æ‰‹åŠ¨çš„â€œæƒ°æ€§æ±‚å€¼â€ï¼ˆLazy Evaluationï¼‰çš„è¯­æ³•åŠŸèƒ½ã€‚</p>
<pre><code class="javascript">function* gen() {
  yield  123 + 456;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œyieldåé¢çš„è¡¨è¾¾å¼<code>123 + 456</code>ï¼Œä¸ä¼šç«‹å³æ±‚å€¼ï¼Œåªä¼šåœ¨<code>next</code>æ–¹æ³•å°†æŒ‡é’ˆç§»åˆ°è¿™ä¸€å¥æ—¶ï¼Œæ‰ä¼šæ±‚å€¼ã€‚</p>
<p><code>yield</code>è¯­å¥ä¸<code>return</code>è¯­å¥æ—¢æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä¹Ÿæœ‰åŒºåˆ«ã€‚ç›¸ä¼¼ä¹‹å¤„åœ¨äºï¼Œéƒ½èƒ½è¿”å›ç´§è·Ÿåœ¨è¯­å¥åé¢çš„é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚åŒºåˆ«åœ¨äºæ¯æ¬¡é‡åˆ°<code>yield</code>ï¼Œå‡½æ•°æš‚åœæ‰§è¡Œï¼Œä¸‹ä¸€æ¬¡å†ä»è¯¥ä½ç½®ç»§ç»­å‘åæ‰§è¡Œï¼Œè€Œ<code>return</code>è¯­å¥ä¸å…·å¤‡ä½ç½®è®°å¿†çš„åŠŸèƒ½ã€‚ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼Œåªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼ˆæˆ–è€…è¯´ä¸€ä¸ªï¼‰<code>return</code>è¯­å¥ï¼Œä½†æ˜¯å¯ä»¥æ‰§è¡Œå¤šæ¬¡ï¼ˆæˆ–è€…è¯´å¤šä¸ªï¼‰<code>yield</code>è¯­å¥ã€‚æ­£å¸¸å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œå› ä¸ºåªèƒ½æ‰§è¡Œä¸€æ¬¡<code>return</code>ï¼›Generatorå‡½æ•°å¯ä»¥è¿”å›ä¸€ç³»åˆ—çš„å€¼ï¼Œå› ä¸ºå¯ä»¥æœ‰ä»»æ„å¤šä¸ª<code>yield</code>ã€‚ä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œä¹Ÿå¯ä»¥è¯´Generatorç”Ÿæˆäº†ä¸€ç³»åˆ—çš„å€¼ï¼Œè¿™ä¹Ÿå°±æ˜¯å®ƒçš„åç§°çš„æ¥å†ï¼ˆåœ¨è‹±è¯­ä¸­ï¼Œgeneratorè¿™ä¸ªè¯æ˜¯â€œç”Ÿæˆå™¨â€çš„æ„æ€ï¼‰ã€‚</p>
<p>Generatorå‡½æ•°å¯ä»¥ä¸ç”¨<code>yield</code>è¯­å¥ï¼Œè¿™æ—¶å°±å˜æˆäº†ä¸€ä¸ªå•çº¯çš„æš‚ç¼“æ‰§è¡Œå‡½æ•°ã€‚</p>
<pre><code class="javascript">function* f() {
  console.log(&#39;æ‰§è¡Œäº†ï¼&#39;)
}

var generator = f();

setTimeout(function () {
  generator.next()
}, 2000);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>f</code>å¦‚æœæ˜¯æ™®é€šå‡½æ•°ï¼Œåœ¨ä¸ºå˜é‡<code>generator</code>èµ‹å€¼æ—¶å°±ä¼šæ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå‡½æ•°<code>f</code>æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼Œå°±å˜æˆåªæœ‰è°ƒç”¨<code>next</code>æ–¹æ³•æ—¶ï¼Œå‡½æ•°<code>f</code>æ‰ä¼šæ‰§è¡Œã€‚</p>
<p>å¦å¤–éœ€è¦æ³¨æ„ï¼Œ<code>yield</code>è¯­å¥ä¸èƒ½ç”¨åœ¨æ™®é€šå‡½æ•°ä¸­ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">(function (){
  yield 1;
})()
// SyntaxError: Unexpected number
</code></pre>
<p>ä¸Šé¢ä»£ç åœ¨ä¸€ä¸ªæ™®é€šå‡½æ•°ä¸­ä½¿ç”¨<code>yield</code>è¯­å¥ï¼Œç»“æœäº§ç”Ÿä¸€ä¸ªå¥æ³•é”™è¯¯ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var arr = [1, [[2, 3], 4], [5, 6]];

var flat = function* (a) {
  a.forEach(function (item) {
    if (typeof item !== &#39;number&#39;) {
      yield* flat(item);
    } else {
      yield item;
    }
  }
};

for (var f of flat(arr)){
  console.log(f);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¹Ÿä¼šäº§ç”Ÿå¥æ³•é”™è¯¯ï¼Œå› ä¸º<code>forEach</code>æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä½†æ˜¯åœ¨é‡Œé¢ä½¿ç”¨äº†<code>yield</code>è¯­å¥ï¼ˆè¿™ä¸ªå‡½æ•°é‡Œé¢è¿˜ä½¿ç”¨äº†<code>yield*</code>è¯­å¥ï¼Œè¿™é‡Œå¯ä»¥ä¸ç”¨ç†ä¼šï¼Œè¯¦ç»†è¯´æ˜è§åæ–‡ï¼‰ã€‚ä¸€ç§ä¿®æ”¹æ–¹æ³•æ˜¯æ”¹ç”¨<code>for</code>å¾ªç¯ã€‚</p>
<pre><code class="javascript">var arr = [1, [[2, 3], 4], [5, 6]];

var flat = function* (a) {
  var length = a.length;
  for (var i = 0; i &lt; length; i++) {
    var item = a[i];
    if (typeof item !== &#39;number&#39;) {
      yield* flat(item);
    } else {
      yield item;
    }
  }
};

for (var f of flat(arr)) {
  console.log(f);
}
// 1, 2, 3, 4, 5, 6
</code></pre>
<p>å¦å¤–ï¼Œ<code>yield</code>è¯­å¥å¦‚æœç”¨åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¹‹ä¸­ï¼Œå¿…é¡»æ”¾åœ¨åœ†æ‹¬å·é‡Œé¢ã€‚</p>
<pre><code class="javascript">console.log(&#39;Hello&#39; + yield); // SyntaxError
console.log(&#39;Hello&#39; + yield 123); // SyntaxError

console.log(&#39;Hello&#39; + (yield)); // OK
console.log(&#39;Hello&#39; + (yield 123)); // OK
</code></pre>
<p><code>yield</code>è¯­å¥ç”¨ä½œå‡½æ•°å‚æ•°æˆ–èµ‹å€¼è¡¨è¾¾å¼çš„å³è¾¹ï¼Œå¯ä»¥ä¸åŠ æ‹¬å·ã€‚</p>
<pre><code class="javascript">foo(yield &#39;a&#39;, yield &#39;b&#39;); // OK
let input = yield; // OK
</code></pre>
<h3 id="ä¸Iteratoræ¥å£çš„å…³ç³»"><a href="#ä¸Iteratoræ¥å£çš„å…³ç³»" class="headerlink" title="ä¸Iteratoræ¥å£çš„å…³ç³»"></a>ä¸Iteratoræ¥å£çš„å…³ç³»</h3><p>ä¸Šä¸€ç« è¯´è¿‡ï¼Œä»»æ„ä¸€ä¸ªå¯¹è±¡çš„<code>Symbol.iterator</code>æ–¹æ³•ï¼Œç­‰äºè¯¥å¯¹è±¡çš„éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œè°ƒç”¨è¯¥å‡½æ•°ä¼šè¿”å›è¯¥å¯¹è±¡çš„ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚</p>
<p>ç”±äºGeneratorå‡½æ•°å°±æ˜¯éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œå› æ­¤å¯ä»¥æŠŠGeneratorèµ‹å€¼ç»™å¯¹è±¡çš„<code>Symbol.iterator</code>å±æ€§ï¼Œä»è€Œä½¿å¾—è¯¥å¯¹è±¡å…·æœ‰Iteratoræ¥å£ã€‚</p>
<pre><code class="javascript">var myIterable = {};
myIterable[Symbol.iterator] = function* () {
  yield 1;
  yield 2;
  yield 3;
};

[...myIterable] // [1, 2, 3]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°èµ‹å€¼ç»™<code>Symbol.iterator</code>å±æ€§ï¼Œä»è€Œä½¿å¾—<code>myIterable</code>å¯¹è±¡å…·æœ‰äº†Iteratoræ¥å£ï¼Œå¯ä»¥è¢«<code>...</code>è¿ç®—ç¬¦éå†äº†ã€‚</p>
<p>Generatorå‡½æ•°æ‰§è¡Œåï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚è¯¥å¯¹è±¡æœ¬èº«ä¹Ÿå…·æœ‰<code>Symbol.iterator</code>å±æ€§ï¼Œæ‰§è¡Œåè¿”å›è‡ªèº«ã€‚</p>
<pre><code class="javascript">function* gen(){
  // some code
}

var g = gen();

g[Symbol.iterator]() === g
// true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>gen</code>æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼Œè°ƒç”¨å®ƒä¼šç”Ÿæˆä¸€ä¸ªéå†å™¨å¯¹è±¡<code>g</code>ã€‚å®ƒçš„<code>Symbol.iterator</code>å±æ€§ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°ï¼Œæ‰§è¡Œåè¿”å›å®ƒè‡ªå·±ã€‚</p>
<h2 id="nextæ–¹æ³•çš„å‚æ•°"><a href="#nextæ–¹æ³•çš„å‚æ•°" class="headerlink" title="nextæ–¹æ³•çš„å‚æ•°"></a>nextæ–¹æ³•çš„å‚æ•°</h2><p><code>yield</code>å¥æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è€…è¯´æ€»æ˜¯è¿”å›<code>undefined</code>ã€‚<code>next</code>æ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°±ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ª<code>yield</code>è¯­å¥çš„è¿”å›å€¼ã€‚</p>
<pre><code class="javascript">function* f() {
  for(var i = 0; true; i++) {
    var reset = yield i;
    if(reset) { i = -1; }
  }
}

var g = f();

g.next() // { value: 0, done: false }
g.next() // { value: 1, done: false }
g.next(true) // { value: 0, done: false }
</code></pre>
<p>ä¸Šé¢ä»£ç å…ˆå®šä¹‰äº†ä¸€ä¸ªå¯ä»¥æ— é™è¿è¡Œçš„ Generator å‡½æ•°<code>f</code>ï¼Œå¦‚æœ<code>next</code>æ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œæ¯æ¬¡è¿è¡Œåˆ°<code>yield</code>è¯­å¥ï¼Œå˜é‡<code>reset</code>çš„å€¼æ€»æ˜¯<code>undefined</code>ã€‚å½“<code>next</code>æ–¹æ³•å¸¦ä¸€ä¸ªå‚æ•°<code>true</code>æ—¶ï¼Œå˜é‡<code>reset</code>å°±è¢«é‡ç½®ä¸ºè¿™ä¸ªå‚æ•°ï¼ˆå³<code>true</code>ï¼‰ï¼Œå› æ­¤<code>i</code>ä¼šç­‰äº<code>-1</code>ï¼Œä¸‹ä¸€è½®å¾ªç¯å°±ä¼šä»<code>-1</code>å¼€å§‹é€’å¢ã€‚</p>
<p>è¿™ä¸ªåŠŸèƒ½æœ‰å¾ˆé‡è¦çš„è¯­æ³•æ„ä¹‰ã€‚Generator å‡½æ•°ä»æš‚åœçŠ¶æ€åˆ°æ¢å¤è¿è¡Œï¼Œå®ƒçš„ä¸Šä¸‹æ–‡çŠ¶æ€ï¼ˆcontextï¼‰æ˜¯ä¸å˜çš„ã€‚é€šè¿‡<code>next</code>æ–¹æ³•çš„å‚æ•°ï¼Œå°±æœ‰åŠæ³•åœ¨ Generator å‡½æ•°å¼€å§‹è¿è¡Œä¹‹åï¼Œç»§ç»­å‘å‡½æ•°ä½“å†…éƒ¨æ³¨å…¥å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥åœ¨ Generator å‡½æ•°è¿è¡Œçš„ä¸åŒé˜¶æ®µï¼Œä»å¤–éƒ¨å‘å†…éƒ¨æ³¨å…¥ä¸åŒçš„å€¼ï¼Œä»è€Œè°ƒæ•´å‡½æ•°è¡Œä¸ºã€‚</p>
<p>å†çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">function* foo(x) {
  var y = 2 * (yield (x + 1));
  var z = yield (y / 3);
  return (x + y + z);
}

var a = foo(5);
a.next() // Object{value:6, done:false}
a.next() // Object{value:NaN, done:false}
a.next() // Object{value:NaN, done:true}

var b = foo(5);
b.next() // { value:6, done:false }
b.next(12) // { value:8, done:false }
b.next(13) // { value:42, done:true }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒæ¬¡è¿è¡Œ<code>next</code>æ–¹æ³•çš„æ—¶å€™ä¸å¸¦å‚æ•°ï¼Œå¯¼è‡´yçš„å€¼ç­‰äº<code>2 * undefined</code>ï¼ˆå³<code>NaN</code>ï¼‰ï¼Œé™¤ä»¥3ä»¥åè¿˜æ˜¯<code>NaN</code>ï¼Œå› æ­¤è¿”å›å¯¹è±¡çš„<code>value</code>å±æ€§ä¹Ÿç­‰äº<code>NaN</code>ã€‚ç¬¬ä¸‰æ¬¡è¿è¡Œ<code>Next</code>æ–¹æ³•çš„æ—¶å€™ä¸å¸¦å‚æ•°ï¼Œæ‰€ä»¥<code>z</code>ç­‰äº<code>undefined</code>ï¼Œè¿”å›å¯¹è±¡çš„<code>value</code>å±æ€§ç­‰äº<code>5 + NaN + undefined</code>ï¼Œå³<code>NaN</code>ã€‚</p>
<p>å¦‚æœå‘<code>next</code>æ–¹æ³•æä¾›å‚æ•°ï¼Œè¿”å›ç»“æœå°±å®Œå…¨ä¸ä¸€æ ·äº†ã€‚ä¸Šé¢ä»£ç ç¬¬ä¸€æ¬¡è°ƒç”¨<code>b</code>çš„<code>next</code>æ–¹æ³•æ—¶ï¼Œè¿”å›<code>x+1</code>çš„å€¼6ï¼›ç¬¬äºŒæ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå°†ä¸Šä¸€æ¬¡<code>yield</code>è¯­å¥çš„å€¼è®¾ä¸º12ï¼Œå› æ­¤<code>y</code>ç­‰äº24ï¼Œè¿”å›<code>y / 3</code>çš„å€¼8ï¼›ç¬¬ä¸‰æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå°†ä¸Šä¸€æ¬¡<code>yield</code>è¯­å¥çš„å€¼è®¾ä¸º13ï¼Œå› æ­¤<code>z</code>ç­‰äº13ï¼Œè¿™æ—¶<code>x</code>ç­‰äº5ï¼Œ<code>y</code>ç­‰äº24ï¼Œæ‰€ä»¥<code>return</code>è¯­å¥çš„å€¼ç­‰äº42ã€‚</p>
<p>æ³¨æ„ï¼Œç”±äº<code>next</code>æ–¹æ³•çš„å‚æ•°è¡¨ç¤ºä¸Šä¸€ä¸ª<code>yield</code>è¯­å¥çš„è¿”å›å€¼ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡ä½¿ç”¨<code>next</code>æ–¹æ³•æ—¶ï¼Œä¸èƒ½å¸¦æœ‰å‚æ•°ã€‚V8å¼•æ“ç›´æ¥å¿½ç•¥ç¬¬ä¸€æ¬¡ä½¿ç”¨<code>next</code>æ–¹æ³•æ—¶çš„å‚æ•°ï¼Œåªæœ‰ä»ç¬¬äºŒæ¬¡ä½¿ç”¨<code>next</code>æ–¹æ³•å¼€å§‹ï¼Œå‚æ•°æ‰æ˜¯æœ‰æ•ˆçš„ã€‚ä»è¯­ä¹‰ä¸Šè®²ï¼Œç¬¬ä¸€ä¸ª<code>next</code>æ–¹æ³•ç”¨æ¥å¯åŠ¨éå†å™¨å¯¹è±¡ï¼Œæ‰€ä»¥ä¸ç”¨å¸¦æœ‰å‚æ•°ã€‚</p>
<p>å¦‚æœæƒ³è¦ç¬¬ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•æ—¶ï¼Œå°±èƒ½å¤Ÿè¾“å…¥å€¼ï¼Œå¯ä»¥åœ¨Generatorå‡½æ•°å¤–é¢å†åŒ…ä¸€å±‚ã€‚</p>
<pre><code class="javascript">function wrapper(generatorFunction) {
  return function (...args) {
    let generatorObject = generatorFunction(...args);
    generatorObject.next();
    return generatorObject;
  };
}

const wrapped = wrapper(function* () {
  console.log(`First input: ${yield}`);
  return &#39;DONE&#39;;
});

wrapped().next(&#39;hello!&#39;)
// First input: hello!
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°å¦‚æœä¸ç”¨<code>wrapper</code>å…ˆåŒ…ä¸€å±‚ï¼Œæ˜¯æ— æ³•ç¬¬ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå°±è¾“å…¥å‚æ•°çš„ã€‚</p>
<p>å†çœ‹ä¸€ä¸ªé€šè¿‡<code>next</code>æ–¹æ³•çš„å‚æ•°ï¼Œå‘Generatorå‡½æ•°å†…éƒ¨è¾“å…¥å€¼çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">function* dataConsumer() {
  console.log(&#39;Started&#39;);
  console.log(`1. ${yield}`);
  console.log(`2. ${yield}`);
  return &#39;result&#39;;
}

let genObj = dataConsumer();
genObj.next();
// Started
genObj.next(&#39;a&#39;)
// 1. a
genObj.next(&#39;b&#39;)
// 2. b
</code></pre>
<p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªå¾ˆç›´è§‚çš„ä¾‹å­ï¼Œæ¯æ¬¡é€šè¿‡<code>next</code>æ–¹æ³•å‘Generatorå‡½æ•°è¾“å…¥å€¼ï¼Œç„¶åæ‰“å°å‡ºæ¥ã€‚</p>
<h2 id="forâ€¦ofå¾ªç¯"><a href="#forâ€¦ofå¾ªç¯" class="headerlink" title="forâ€¦ofå¾ªç¯"></a>forâ€¦ofå¾ªç¯</h2><p><code>for...of</code>å¾ªç¯å¯ä»¥è‡ªåŠ¨éå†Generatorå‡½æ•°æ—¶ç”Ÿæˆçš„<code>Iterator</code>å¯¹è±¡ï¼Œä¸”æ­¤æ—¶ä¸å†éœ€è¦è°ƒç”¨<code>next</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">function *foo() {
  yield 1;
  yield 2;
  yield 3;
  yield 4;
  yield 5;
  return 6;
}

for (let v of foo()) {
  console.log(v);
}
// 1 2 3 4 5
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨<code>for...of</code>å¾ªç¯ï¼Œä¾æ¬¡æ˜¾ç¤º5ä¸ª<code>yield</code>è¯­å¥çš„å€¼ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä¸€æ—¦<code>next</code>æ–¹æ³•çš„è¿”å›å¯¹è±¡çš„<code>done</code>å±æ€§ä¸º<code>true</code>ï¼Œ<code>for...of</code>å¾ªç¯å°±ä¼šä¸­æ­¢ï¼Œä¸”ä¸åŒ…å«è¯¥è¿”å›å¯¹è±¡ï¼Œæ‰€ä»¥ä¸Šé¢ä»£ç çš„<code>return</code>è¯­å¥è¿”å›çš„6ï¼Œä¸åŒ…æ‹¬åœ¨<code>for...of</code>å¾ªç¯ä¹‹ä¸­ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ©ç”¨Generatorå‡½æ•°å’Œ<code>for...of</code>å¾ªç¯ï¼Œå®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">function* fibonacci() {
  let [prev, curr] = [0, 1];
  for (;;) {
    [prev, curr] = [curr, prev + curr];
    yield curr;
  }
}

for (let n of fibonacci()) {
  if (n &gt; 1000) break;
  console.log(n);
}
</code></pre>
<p>ä»ä¸Šé¢ä»£ç å¯è§ï¼Œä½¿ç”¨<code>for...of</code>è¯­å¥æ—¶ä¸éœ€è¦ä½¿ç”¨<code>next</code>æ–¹æ³•ã€‚</p>
<p>åˆ©ç”¨<code>for...of</code>å¾ªç¯ï¼Œå¯ä»¥å†™å‡ºéå†ä»»æ„å¯¹è±¡ï¼ˆobjectï¼‰çš„æ–¹æ³•ã€‚åŸç”Ÿçš„JavaScriptå¯¹è±¡æ²¡æœ‰éå†æ¥å£ï¼Œæ— æ³•ä½¿ç”¨<code>for...of</code>å¾ªç¯ï¼Œé€šè¿‡Generatorå‡½æ•°ä¸ºå®ƒåŠ ä¸Šè¿™ä¸ªæ¥å£ï¼Œå°±å¯ä»¥ç”¨äº†ã€‚</p>
<pre><code class="javascript">function* objectEntries(obj) {
  let propKeys = Reflect.ownKeys(obj);

  for (let propKey of propKeys) {
    yield [propKey, obj[propKey]];
  }
}

let jane = { first: &#39;Jane&#39;, last: &#39;Doe&#39; };

for (let [key, value] of objectEntries(jane)) {
  console.log(`${key}: ${value}`);
}
// first: Jane
// last: Doe
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡<code>jane</code>åŸç”Ÿä¸å…·å¤‡Iteratoræ¥å£ï¼Œæ— æ³•ç”¨<code>for...of</code>éå†ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡Generatorå‡½æ•°<code>objectEntries</code>ä¸ºå®ƒåŠ ä¸Šéå†å™¨æ¥å£ï¼Œå°±å¯ä»¥ç”¨<code>for...of</code>éå†äº†ã€‚åŠ ä¸Šéå†å™¨æ¥å£çš„å¦ä¸€ç§å†™æ³•æ˜¯ï¼Œå°†Generatorå‡½æ•°åŠ åˆ°å¯¹è±¡çš„<code>Symbol.iterator</code>å±æ€§ä¸Šé¢ã€‚</p>
<pre><code class="javascript">function* objectEntries() {
  let propKeys = Object.keys(this);

  for (let propKey of propKeys) {
    yield [propKey, this[propKey]];
  }
}

let jane = { first: &#39;Jane&#39;, last: &#39;Doe&#39; };

jane[Symbol.iterator] = objectEntries;

for (let [key, value] of jane) {
  console.log(`${key}: ${value}`);
}
// first: Jane
// last: Doe
</code></pre>
<p>é™¤äº†<code>for...of</code>å¾ªç¯ä»¥å¤–ï¼Œæ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ã€è§£æ„èµ‹å€¼å’Œ<code>Array.from</code>æ–¹æ³•å†…éƒ¨è°ƒç”¨çš„ï¼Œéƒ½æ˜¯éå†å™¨æ¥å£ã€‚è¿™æ„å‘³ç€ï¼Œå®ƒä»¬éƒ½å¯ä»¥å°†Generatorå‡½æ•°è¿”å›çš„Iteratorå¯¹è±¡ï¼Œä½œä¸ºå‚æ•°ã€‚</p>
<pre><code class="javascript">function* numbers () {
  yield 1
  yield 2
  return 3
  yield 4
}

// æ‰©å±•è¿ç®—ç¬¦
[...numbers()] // [1, 2]

// Array.from æ–¹æ³•
Array.from(numbers()) // [1, 2]

// è§£æ„èµ‹å€¼
let [x, y] = numbers();
x // 1
y // 2

// for...of å¾ªç¯
for (let n of numbers()) {
  console.log(n)
}
// 1
// 2
</code></pre>
<h2 id="Generator-prototype-throw"><a href="#Generator-prototype-throw" class="headerlink" title="Generator.prototype.throw()"></a>Generator.prototype.throw()</h2><p>Generatorå‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œéƒ½æœ‰ä¸€ä¸ª<code>throw</code>æ–¹æ³•ï¼Œå¯ä»¥åœ¨å‡½æ•°ä½“å¤–æŠ›å‡ºé”™è¯¯ï¼Œç„¶ååœ¨Generatorå‡½æ•°ä½“å†…æ•è·ã€‚</p>
<pre><code class="javascript">var g = function* () {
  try {
    yield;
  } catch (e) {
    console.log(&#39;å†…éƒ¨æ•è·&#39;, e);
  }
};

var i = g();
i.next();

try {
  i.throw(&#39;a&#39;);
  i.throw(&#39;b&#39;);
} catch (e) {
  console.log(&#39;å¤–éƒ¨æ•è·&#39;, e);
}
// å†…éƒ¨æ•è· a
// å¤–éƒ¨æ•è· b
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œéå†å™¨å¯¹è±¡<code>i</code>è¿ç»­æŠ›å‡ºä¸¤ä¸ªé”™è¯¯ã€‚ç¬¬ä¸€ä¸ªé”™è¯¯è¢«Generatorå‡½æ•°ä½“å†…çš„<code>catch</code>è¯­å¥æ•è·ã€‚<code>i</code>ç¬¬äºŒæ¬¡æŠ›å‡ºé”™è¯¯ï¼Œç”±äºGeneratorå‡½æ•°å†…éƒ¨çš„<code>catch</code>è¯­å¥å·²ç»æ‰§è¡Œè¿‡äº†ï¼Œä¸ä¼šå†æ•æ‰åˆ°è¿™ä¸ªé”™è¯¯äº†ï¼Œæ‰€ä»¥è¿™ä¸ªé”™è¯¯å°±è¢«æŠ›å‡ºäº†Generatorå‡½æ•°ä½“ï¼Œè¢«å‡½æ•°ä½“å¤–çš„<code>catch</code>è¯­å¥æ•è·ã€‚</p>
<p><code>throw</code>æ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ä¼šè¢«<code>catch</code>è¯­å¥æ¥æ”¶ï¼Œå»ºè®®æŠ›å‡º<code>Error</code>å¯¹è±¡çš„å®ä¾‹ã€‚</p>
<pre><code class="javascript">var g = function* () {
  try {
    yield;
  } catch (e) {
    console.log(e);
  }
};

var i = g();
i.next();
i.throw(new Error(&#39;å‡ºé”™äº†ï¼&#39;));
// Error: å‡ºé”™äº†ï¼(â€¦)
</code></pre>
<p>æ³¨æ„ï¼Œä¸è¦æ··æ·†éå†å™¨å¯¹è±¡çš„<code>throw</code>æ–¹æ³•å’Œå…¨å±€çš„<code>throw</code>å‘½ä»¤ã€‚ä¸Šé¢ä»£ç çš„é”™è¯¯ï¼Œæ˜¯ç”¨éå†å™¨å¯¹è±¡çš„<code>throw</code>æ–¹æ³•æŠ›å‡ºçš„ï¼Œè€Œä¸æ˜¯ç”¨<code>throw</code>å‘½ä»¤æŠ›å‡ºçš„ã€‚åè€…åªèƒ½è¢«å‡½æ•°ä½“å¤–çš„<code>catch</code>è¯­å¥æ•è·ã€‚</p>
<pre><code class="javascript">var g = function* () {
  while (true) {
    try {
      yield;
    } catch (e) {
      if (e != &#39;a&#39;) throw e;
      console.log(&#39;å†…éƒ¨æ•è·&#39;, e);
    }
  }
};

var i = g();
i.next();

try {
  throw new Error(&#39;a&#39;);
  throw new Error(&#39;b&#39;);
} catch (e) {
  console.log(&#39;å¤–éƒ¨æ•è·&#39;, e);
}
// å¤–éƒ¨æ•è· [Error: a]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¹‹æ‰€ä»¥åªæ•è·äº†<code>a</code>ï¼Œæ˜¯å› ä¸ºå‡½æ•°ä½“å¤–çš„<code>catch</code>è¯­å¥å—ï¼Œæ•è·äº†æŠ›å‡ºçš„<code>a</code>é”™è¯¯ä»¥åï¼Œå°±ä¸ä¼šå†ç»§ç»­<code>try</code>ä»£ç å—é‡Œé¢å‰©ä½™çš„è¯­å¥äº†ã€‚</p>
<p>å¦‚æœGeneratorå‡½æ•°å†…éƒ¨æ²¡æœ‰éƒ¨ç½²<code>try...catch</code>ä»£ç å—ï¼Œé‚£ä¹ˆ<code>throw</code>æ–¹æ³•æŠ›å‡ºçš„é”™è¯¯ï¼Œå°†è¢«å¤–éƒ¨<code>try...catch</code>ä»£ç å—æ•è·ã€‚</p>
<pre><code class="javascript">var g = function* () {
  while (true) {
    yield;
    console.log(&#39;å†…éƒ¨æ•è·&#39;, e);
  }
};

var i = g();
i.next();

try {
  i.throw(&#39;a&#39;);
  i.throw(&#39;b&#39;);
} catch (e) {
  console.log(&#39;å¤–éƒ¨æ•è·&#39;, e);
}
// å¤–éƒ¨æ•è· a
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°<code>g</code>å†…éƒ¨æ²¡æœ‰éƒ¨ç½²<code>try...catch</code>ä»£ç å—ï¼Œæ‰€ä»¥æŠ›å‡ºçš„é”™è¯¯ç›´æ¥è¢«å¤–éƒ¨<code>catch</code>ä»£ç å—æ•è·ã€‚</p>
<p>å¦‚æœGeneratorå‡½æ•°å†…éƒ¨å’Œå¤–éƒ¨ï¼Œéƒ½æ²¡æœ‰éƒ¨ç½²<code>try...catch</code>ä»£ç å—ï¼Œé‚£ä¹ˆç¨‹åºå°†æŠ¥é”™ï¼Œç›´æ¥ä¸­æ–­æ‰§è¡Œã€‚</p>
<pre><code class="javascript">var gen = function* gen(){
  yield console.log(&#39;hello&#39;);
  yield console.log(&#39;world&#39;);
}

var g = gen();
g.next();
g.throw();
// hello
// Uncaught undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>g.throw</code>æŠ›å‡ºé”™è¯¯ä»¥åï¼Œæ²¡æœ‰ä»»ä½•<code>try...catch</code>ä»£ç å—å¯ä»¥æ•è·è¿™ä¸ªé”™è¯¯ï¼Œå¯¼è‡´ç¨‹åºæŠ¥é”™ï¼Œä¸­æ–­æ‰§è¡Œã€‚</p>
<p><code>throw</code>æ–¹æ³•è¢«æ•è·ä»¥åï¼Œä¼šé™„å¸¦æ‰§è¡Œä¸‹ä¸€æ¡<code>yield</code>è¯­å¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼šé™„å¸¦æ‰§è¡Œä¸€æ¬¡<code>next</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">var gen = function* gen(){
  try {
    yield console.log(&#39;a&#39;);
  } catch (e) {
    // ...
  }
  yield console.log(&#39;b&#39;);
  yield console.log(&#39;c&#39;);
}

var g = gen();
g.next() // a
g.throw() // b
g.next() // c
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>g.throw</code>æ–¹æ³•è¢«æ•è·ä»¥åï¼Œè‡ªåŠ¨æ‰§è¡Œäº†ä¸€æ¬¡<code>next</code>æ–¹æ³•ï¼Œæ‰€ä»¥ä¼šæ‰“å°<code>b</code>ã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œåªè¦Generatorå‡½æ•°å†…éƒ¨éƒ¨ç½²äº†<code>try...catch</code>ä»£ç å—ï¼Œé‚£ä¹ˆéå†å™¨çš„<code>throw</code>æ–¹æ³•æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸å½±å“ä¸‹ä¸€æ¬¡éå†ã€‚</p>
<p>å¦å¤–ï¼Œ<code>throw</code>å‘½ä»¤ä¸<code>g.throw</code>æ–¹æ³•æ˜¯æ— å…³çš„ï¼Œä¸¤è€…äº’ä¸å½±å“ã€‚</p>
<pre><code class="javascript">var gen = function* gen(){
  yield console.log(&#39;hello&#39;);
  yield console.log(&#39;world&#39;);
}

var g = gen();
g.next();

try {
  throw new Error();
} catch (e) {
  g.next();
}
// hello
// world
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>throw</code>å‘½ä»¤æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šå½±å“åˆ°éå†å™¨çš„çŠ¶æ€ï¼Œæ‰€ä»¥ä¸¤æ¬¡æ‰§è¡Œ<code>next</code>æ–¹æ³•ï¼Œéƒ½è¿›è¡Œäº†æ­£ç¡®çš„æ“ä½œã€‚</p>
<p>è¿™ç§å‡½æ•°ä½“å†…æ•è·é”™è¯¯çš„æœºåˆ¶ï¼Œå¤§å¤§æ–¹ä¾¿äº†å¯¹é”™è¯¯çš„å¤„ç†ã€‚å¤šä¸ª<code>yield</code>è¯­å¥ï¼Œå¯ä»¥åªç”¨ä¸€ä¸ª<code>try...catch</code>ä»£ç å—æ¥æ•è·é”™è¯¯ã€‚å¦‚æœä½¿ç”¨å›è°ƒå‡½æ•°çš„å†™æ³•ï¼Œæƒ³è¦æ•è·å¤šä¸ªé”™è¯¯ï¼Œå°±ä¸å¾—ä¸ä¸ºæ¯ä¸ªå‡½æ•°å†…éƒ¨å†™ä¸€ä¸ªé”™è¯¯å¤„ç†è¯­å¥ï¼Œç°åœ¨åªåœ¨Generatorå‡½æ•°å†…éƒ¨å†™ä¸€æ¬¡<code>catch</code>è¯­å¥å°±å¯ä»¥äº†ã€‚</p>
<p>Generatorå‡½æ•°ä½“å¤–æŠ›å‡ºçš„é”™è¯¯ï¼Œå¯ä»¥åœ¨å‡½æ•°ä½“å†…æ•è·ï¼›åè¿‡æ¥ï¼ŒGeneratorå‡½æ•°ä½“å†…æŠ›å‡ºçš„é”™è¯¯ï¼Œä¹Ÿå¯ä»¥è¢«å‡½æ•°ä½“å¤–çš„<code>catch</code>æ•è·ã€‚</p>
<pre><code class="javascript">function *foo() {
  var x = yield 3;
  var y = x.toUpperCase();
  yield y;
}

var it = foo();

it.next(); // { value:3, done:false }

try {
  it.next(42);
} catch (err) {
  console.log(err);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç¬¬äºŒä¸ª<code>next</code>æ–¹æ³•å‘å‡½æ•°ä½“å†…ä¼ å…¥ä¸€ä¸ªå‚æ•°42ï¼Œæ•°å€¼æ˜¯æ²¡æœ‰<code>toUpperCase</code>æ–¹æ³•çš„ï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºä¸€ä¸ªTypeErroré”™è¯¯ï¼Œè¢«å‡½æ•°ä½“å¤–çš„<code>catch</code>æ•è·ã€‚</p>
<p>ä¸€æ—¦Generatoræ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºé”™è¯¯ï¼Œä¸”æ²¡æœ‰è¢«å†…éƒ¨æ•è·ï¼Œå°±ä¸ä¼šå†æ‰§è¡Œä¸‹å»äº†ã€‚å¦‚æœæ­¤åè¿˜è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå°†è¿”å›ä¸€ä¸ª<code>value</code>å±æ€§ç­‰äº<code>undefined</code>ã€<code>done</code>å±æ€§ç­‰äº<code>true</code>çš„å¯¹è±¡ï¼Œå³JavaScriptå¼•æ“è®¤ä¸ºè¿™ä¸ªGeneratorå·²ç»è¿è¡Œç»“æŸäº†ã€‚</p>
<pre><code class="javascript">function* g() {
  yield 1;
  console.log(&#39;throwing an exception&#39;);
  throw new Error(&#39;generator broke!&#39;);
  yield 2;
  yield 3;
}

function log(generator) {
  var v;
  console.log(&#39;starting generator&#39;);
  try {
    v = generator.next();
    console.log(&#39;ç¬¬ä¸€æ¬¡è¿è¡Œnextæ–¹æ³•&#39;, v);
  } catch (err) {
    console.log(&#39;æ•æ‰é”™è¯¯&#39;, v);
  }
  try {
    v = generator.next();
    console.log(&#39;ç¬¬äºŒæ¬¡è¿è¡Œnextæ–¹æ³•&#39;, v);
  } catch (err) {
    console.log(&#39;æ•æ‰é”™è¯¯&#39;, v);
  }
  try {
    v = generator.next();
    console.log(&#39;ç¬¬ä¸‰æ¬¡è¿è¡Œnextæ–¹æ³•&#39;, v);
  } catch (err) {
    console.log(&#39;æ•æ‰é”™è¯¯&#39;, v);
  }
  console.log(&#39;caller done&#39;);
}

log(g());
// starting generator
// ç¬¬ä¸€æ¬¡è¿è¡Œnextæ–¹æ³• { value: 1, done: false }
// throwing an exception
// æ•æ‰é”™è¯¯ { value: 1, done: false }
// ç¬¬ä¸‰æ¬¡è¿è¡Œnextæ–¹æ³• { value: undefined, done: true }
// caller done
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸€å…±ä¸‰æ¬¡è¿è¡Œ<code>next</code>æ–¹æ³•ï¼Œç¬¬äºŒæ¬¡è¿è¡Œçš„æ—¶å€™ä¼šæŠ›å‡ºé”™è¯¯ï¼Œç„¶åç¬¬ä¸‰æ¬¡è¿è¡Œçš„æ—¶å€™ï¼ŒGeneratorå‡½æ•°å°±å·²ç»ç»“æŸäº†ï¼Œä¸å†æ‰§è¡Œä¸‹å»äº†ã€‚</p>
<h2 id="Generator-prototype-return"><a href="#Generator-prototype-return" class="headerlink" title="Generator.prototype.return()"></a>Generator.prototype.return()</h2><p>Generatorå‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>return</code>æ–¹æ³•ï¼Œå¯ä»¥è¿”å›ç»™å®šçš„å€¼ï¼Œå¹¶ä¸”ç»ˆç»“éå†Generatorå‡½æ•°ã€‚</p>
<pre><code class="javascript">function* gen() {
  yield 1;
  yield 2;
  yield 3;
}

var g = gen();

g.next()        // { value: 1, done: false }
g.return(&#39;foo&#39;) // { value: &quot;foo&quot;, done: true }
g.next()        // { value: undefined, done: true }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œéå†å™¨å¯¹è±¡<code>g</code>è°ƒç”¨<code>return</code>æ–¹æ³•åï¼Œè¿”å›å€¼çš„<code>value</code>å±æ€§å°±æ˜¯<code>return</code>æ–¹æ³•çš„å‚æ•°<code>foo</code>ã€‚å¹¶ä¸”ï¼ŒGeneratorå‡½æ•°çš„éå†å°±ç»ˆæ­¢äº†ï¼Œè¿”å›å€¼çš„<code>done</code>å±æ€§ä¸º<code>true</code>ï¼Œä»¥åå†è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œ<code>done</code>å±æ€§æ€»æ˜¯è¿”å›<code>true</code>ã€‚</p>
<p>å¦‚æœ<code>return</code>æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¸æä¾›å‚æ•°ï¼Œåˆ™è¿”å›å€¼çš„<code>value</code>å±æ€§ä¸º<code>undefined</code>ã€‚</p>
<pre><code class="javascript">function* gen() {
  yield 1;
  yield 2;
  yield 3;
}

var g = gen();

g.next()        // { value: 1, done: false }
g.return() // { value: undefined, done: true }
</code></pre>
<p>å¦‚æœGeneratorå‡½æ•°å†…éƒ¨æœ‰<code>try...finally</code>ä»£ç å—ï¼Œé‚£ä¹ˆ<code>return</code>æ–¹æ³•ä¼šæ¨è¿Ÿåˆ°<code>finally</code>ä»£ç å—æ‰§è¡Œå®Œå†æ‰§è¡Œã€‚</p>
<pre><code class="javascript">function* numbers () {
  yield 1;
  try {
    yield 2;
    yield 3;
  } finally {
    yield 4;
    yield 5;
  }
  yield 6;
}
var g = numbers()
g.next() // { done: false, value: 1 }
g.next() // { done: false, value: 2 }
g.return(7) // { done: false, value: 4 }
g.next() // { done: false, value: 5 }
g.next() // { done: true, value: 7 }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨<code>return</code>æ–¹æ³•åï¼Œå°±å¼€å§‹æ‰§è¡Œ<code>finally</code>ä»£ç å—ï¼Œç„¶åç­‰åˆ°<code>finally</code>ä»£ç å—æ‰§è¡Œå®Œï¼Œå†æ‰§è¡Œ<code>return</code>æ–¹æ³•ã€‚</p>
<h2 id="yield-è¯­å¥"><a href="#yield-è¯­å¥" class="headerlink" title="yield* è¯­å¥"></a>yield* è¯­å¥</h2><p>å¦‚æœåœ¨ Generator å‡½æ•°å†…éƒ¨ï¼Œè°ƒç”¨å¦ä¸€ä¸ª Generator å‡½æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯æ²¡æœ‰æ•ˆæœçš„ã€‚</p>
<pre><code class="javascript">function* foo() {
  yield &#39;a&#39;;
  yield &#39;b&#39;;
}

function* bar() {
  yield &#39;x&#39;;
  foo();
  yield &#39;y&#39;;
}

for (let v of bar()){
  console.log(v);
}
// &quot;x&quot;
// &quot;y&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>foo</code>å’Œ<code>bar</code>éƒ½æ˜¯ Generator å‡½æ•°ï¼Œåœ¨<code>bar</code>é‡Œé¢è°ƒç”¨<code>foo</code>ï¼Œæ˜¯ä¸ä¼šæœ‰æ•ˆæœçš„ã€‚</p>
<p>è¿™ä¸ªå°±éœ€è¦ç”¨åˆ°<code>yield*</code>è¯­å¥ï¼Œç”¨æ¥åœ¨ä¸€ä¸ª Generator å‡½æ•°é‡Œé¢æ‰§è¡Œå¦ä¸€ä¸ª Generator å‡½æ•°ã€‚</p>
<pre><code class="javascript">function* bar() {
  yield &#39;x&#39;;
  yield* foo();
  yield &#39;y&#39;;
}

// ç­‰åŒäº
function* bar() {
  yield &#39;x&#39;;
  yield &#39;a&#39;;
  yield &#39;b&#39;;
  yield &#39;y&#39;;
}

// ç­‰åŒäº
function* bar() {
  yield &#39;x&#39;;
  for (let v of foo()) {
    yield v;
  }
  yield &#39;y&#39;;
}

for (let v of bar()){
  console.log(v);
}
// &quot;x&quot;
// &quot;a&quot;
// &quot;b&quot;
// &quot;y&quot;
</code></pre>
<p>å†æ¥çœ‹ä¸€ä¸ªå¯¹æ¯”çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">function* inner() {
  yield &#39;hello!&#39;;
}

function* outer1() {
  yield &#39;open&#39;;
  yield inner();
  yield &#39;close&#39;;
}

var gen = outer1()
gen.next().value // &quot;open&quot;
gen.next().value // è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡
gen.next().value // &quot;close&quot;

function* outer2() {
  yield &#39;open&#39;
  yield* inner()
  yield &#39;close&#39;
}

var gen = outer2()
gen.next().value // &quot;open&quot;
gen.next().value // &quot;hello!&quot;
gen.next().value // &quot;close&quot;
</code></pre>
<p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œ<code>outer2</code>ä½¿ç”¨äº†<code>yield*</code>ï¼Œ<code>outer1</code>æ²¡ä½¿ç”¨ã€‚ç»“æœå°±æ˜¯ï¼Œ<code>outer1</code>è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œ<code>outer2</code>è¿”å›è¯¥éå†å™¨å¯¹è±¡çš„å†…éƒ¨å€¼ã€‚</p>
<p>ä»è¯­æ³•è§’åº¦çœ‹ï¼Œå¦‚æœ<code>yield</code>å‘½ä»¤åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œéœ€è¦åœ¨<code>yield</code>å‘½ä»¤åé¢åŠ ä¸Šæ˜Ÿå·ï¼Œè¡¨æ˜å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚è¿™è¢«ç§°ä¸º<code>yield*</code>è¯­å¥ã€‚</p>
<pre><code class="javascript">let delegatedIterator = (function* () {
  yield &#39;Hello!&#39;;
  yield &#39;Bye!&#39;;
}());

let delegatingIterator = (function* () {
  yield &#39;Greetings!&#39;;
  yield* delegatedIterator;
  yield &#39;Ok, bye.&#39;;
}());

for(let value of delegatingIterator) {
  console.log(value);
}
// &quot;Greetings!
// &quot;Hello!&quot;
// &quot;Bye!&quot;
// &quot;Ok, bye.&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>delegatingIterator</code>æ˜¯ä»£ç†è€…ï¼Œ<code>delegatedIterator</code>æ˜¯è¢«ä»£ç†è€…ã€‚ç”±äº<code>yield* delegatedIterator</code>è¯­å¥å¾—åˆ°çš„å€¼ï¼Œæ˜¯ä¸€ä¸ªéå†å™¨ï¼Œæ‰€ä»¥è¦ç”¨æ˜Ÿå·è¡¨ç¤ºã€‚è¿è¡Œç»“æœå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªéå†å™¨ï¼Œéå†äº†å¤šä¸ªGeneratorå‡½æ•°ï¼Œæœ‰é€’å½’çš„æ•ˆæœã€‚</p>
<p><code>yield*</code>åé¢çš„Generatorå‡½æ•°ï¼ˆæ²¡æœ‰<code>return</code>è¯­å¥æ—¶ï¼‰ï¼Œç­‰åŒäºåœ¨Generatorå‡½æ•°å†…éƒ¨ï¼Œéƒ¨ç½²ä¸€ä¸ª<code>for...of</code>å¾ªç¯ã€‚</p>
<pre><code class="javascript">function* concat(iter1, iter2) {
  yield* iter1;
  yield* iter2;
}

// ç­‰åŒäº

function* concat(iter1, iter2) {
  for (var value of iter1) {
    yield value;
  }
  for (var value of iter2) {
    yield value;
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç è¯´æ˜ï¼Œ<code>yield*</code>åé¢çš„Generatorå‡½æ•°ï¼ˆæ²¡æœ‰<code>return</code>è¯­å¥æ—¶ï¼‰ï¼Œä¸è¿‡æ˜¯<code>for...of</code>çš„ä¸€ç§ç®€å†™å½¢å¼ï¼Œå®Œå…¨å¯ä»¥ç”¨åè€…æ›¿ä»£å‰è€…ã€‚åä¹‹ï¼Œåˆ™éœ€è¦ç”¨<code>var value = yield* iterator</code>çš„å½¢å¼è·å–<code>return</code>è¯­å¥çš„å€¼ã€‚</p>
<p>å¦‚æœ<code>yield*</code>åé¢è·Ÿç€ä¸€ä¸ªæ•°ç»„ï¼Œç”±äºæ•°ç»„åŸç”Ÿæ”¯æŒéå†å™¨ï¼Œå› æ­¤å°±ä¼šéå†æ•°ç»„æˆå‘˜ã€‚</p>
<pre><code class="javascript">function* gen(){
  yield* [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];
}

gen().next() // { value:&quot;a&quot;, done:false }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>yield</code>å‘½ä»¤åé¢å¦‚æœä¸åŠ æ˜Ÿå·ï¼Œè¿”å›çš„æ˜¯æ•´ä¸ªæ•°ç»„ï¼ŒåŠ äº†æ˜Ÿå·å°±è¡¨ç¤ºè¿”å›çš„æ˜¯æ•°ç»„çš„éå†å™¨å¯¹è±¡ã€‚</p>
<p>å®é™…ä¸Šï¼Œä»»ä½•æ•°æ®ç»“æ„åªè¦æœ‰Iteratoræ¥å£ï¼Œå°±å¯ä»¥è¢«<code>yield*</code>éå†ã€‚</p>
<pre><code class="javascript">let read = (function* () {
  yield &#39;hello&#39;;
  yield* &#39;hello&#39;;
})();

read.next().value // &quot;hello&quot;
read.next().value // &quot;h&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>yield</code>è¯­å¥è¿”å›æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œ<code>yield*</code>è¯­å¥è¿”å›å•ä¸ªå­—ç¬¦ã€‚å› ä¸ºå­—ç¬¦ä¸²å…·æœ‰Iteratoræ¥å£ï¼Œæ‰€ä»¥è¢«<code>yield*</code>éå†ã€‚</p>
<p>å¦‚æœè¢«ä»£ç†çš„Generatorå‡½æ•°æœ‰<code>return</code>è¯­å¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥å‘ä»£ç†å®ƒçš„Generatorå‡½æ•°è¿”å›æ•°æ®ã€‚</p>
<pre><code class="javascript">function *foo() {
  yield 2;
  yield 3;
  return &quot;foo&quot;;
}

function *bar() {
  yield 1;
  var v = yield *foo();
  console.log( &quot;v: &quot; + v );
  yield 4;
}

var it = bar();

it.next()
// {value: 1, done: false}
it.next()
// {value: 2, done: false}
it.next()
// {value: 3, done: false}
it.next();
// &quot;v: foo&quot;
// {value: 4, done: false}
it.next()
// {value: undefined, done: true}
</code></pre>
<p>ä¸Šé¢ä»£ç åœ¨ç¬¬å››æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•çš„æ—¶å€™ï¼Œå±å¹•ä¸Šä¼šæœ‰è¾“å‡ºï¼Œè¿™æ˜¯å› ä¸ºå‡½æ•°<code>foo</code>çš„<code>return</code>è¯­å¥ï¼Œå‘å‡½æ•°<code>bar</code>æä¾›äº†è¿”å›å€¼ã€‚</p>
<p>å†çœ‹ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">function* genFuncWithReturn() {
  yield &#39;a&#39;;
  yield &#39;b&#39;;
  return &#39;The result&#39;;
}
function* logReturned(genObj) {
  let result = yield* genObj;
  console.log(result);
}

[...logReturned(genFuncWithReturn())]
// The result
// å€¼ä¸º [ &#39;a&#39;, &#39;b&#39; ]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­˜åœ¨ä¸¤æ¬¡éå†ã€‚ç¬¬ä¸€æ¬¡æ˜¯æ‰©å±•è¿ç®—ç¬¦éå†å‡½æ•°<code>logReturned</code>è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œç¬¬äºŒæ¬¡æ˜¯<code>yield*</code>è¯­å¥éå†å‡½æ•°<code>genFuncWithReturn</code>è¿”å›çš„éå†å™¨å¯¹è±¡ã€‚è¿™ä¸¤æ¬¡éå†çš„æ•ˆæœæ˜¯å åŠ çš„ï¼Œæœ€ç»ˆè¡¨ç°ä¸ºæ‰©å±•è¿ç®—ç¬¦éå†å‡½æ•°<code>genFuncWithReturn</code>è¿”å›çš„éå†å™¨å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œæœ€åçš„æ•°æ®è¡¨è¾¾å¼å¾—åˆ°çš„å€¼ç­‰äº<code>[ &#39;a&#39;, &#39;b&#39; ]</code>ã€‚ä½†æ˜¯ï¼Œå‡½æ•°<code>genFuncWithReturn</code>çš„<code>return</code>è¯­å¥çš„è¿”å›å€¼<code>The result</code>ï¼Œä¼šè¿”å›ç»™å‡½æ•°<code>logReturned</code>å†…éƒ¨çš„<code>result</code>å˜é‡ï¼Œå› æ­¤ä¼šæœ‰ç»ˆç«¯è¾“å‡ºã€‚</p>
<p><code>yield*</code>å‘½ä»¤å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å–å‡ºåµŒå¥—æ•°ç»„çš„æ‰€æœ‰æˆå‘˜ã€‚</p>
<pre><code class="javascript">function* iterTree(tree) {
  if (Array.isArray(tree)) {
    for(let i=0; i &lt; tree.length; i++) {
      yield* iterTree(tree[i]);
    }
  } else {
    yield tree;
  }
}

const tree = [ &#39;a&#39;, [&#39;b&#39;, &#39;c&#39;], [&#39;d&#39;, &#39;e&#39;] ];

for(let x of iterTree(tree)) {
  console.log(x);
}
// a
// b
// c
// d
// e
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¨å¾®å¤æ‚çš„ä¾‹å­ï¼Œä½¿ç”¨<code>yield*</code>è¯­å¥éå†å®Œå…¨äºŒå‰æ ‘ã€‚</p>
<pre><code class="javascript">// ä¸‹é¢æ˜¯äºŒå‰æ ‘çš„æ„é€ å‡½æ•°ï¼Œ
// ä¸‰ä¸ªå‚æ•°åˆ†åˆ«æ˜¯å·¦æ ‘ã€å½“å‰èŠ‚ç‚¹å’Œå³æ ‘
function Tree(left, label, right) {
  this.left = left;
  this.label = label;
  this.right = right;
}

// ä¸‹é¢æ˜¯ä¸­åºï¼ˆinorderï¼‰éå†å‡½æ•°ã€‚
// ç”±äºè¿”å›çš„æ˜¯ä¸€ä¸ªéå†å™¨ï¼Œæ‰€ä»¥è¦ç”¨generatorå‡½æ•°ã€‚
// å‡½æ•°ä½“å†…é‡‡ç”¨é€’å½’ç®—æ³•ï¼Œæ‰€ä»¥å·¦æ ‘å’Œå³æ ‘è¦ç”¨yield*éå†
function* inorder(t) {
  if (t) {
    yield* inorder(t.left);
    yield t.label;
    yield* inorder(t.right);
  }
}

// ä¸‹é¢ç”ŸæˆäºŒå‰æ ‘
function make(array) {
  // åˆ¤æ–­æ˜¯å¦ä¸ºå¶èŠ‚ç‚¹
  if (array.length == 1) return new Tree(null, array[0], null);
  return new Tree(make(array[0]), array[1], make(array[2]));
}
let tree = make([[[&#39;a&#39;], &#39;b&#39;, [&#39;c&#39;]], &#39;d&#39;, [[&#39;e&#39;], &#39;f&#39;, [&#39;g&#39;]]]);

// éå†äºŒå‰æ ‘
var result = [];
for (let node of inorder(tree)) {
  result.push(node);
}

result
// [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;]
</code></pre>
<h2 id="ä½œä¸ºå¯¹è±¡å±æ€§çš„Generatorå‡½æ•°"><a href="#ä½œä¸ºå¯¹è±¡å±æ€§çš„Generatorå‡½æ•°" class="headerlink" title="ä½œä¸ºå¯¹è±¡å±æ€§çš„Generatorå‡½æ•°"></a>ä½œä¸ºå¯¹è±¡å±æ€§çš„Generatorå‡½æ•°</h2><p>å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ˜¯Generatorå‡½æ•°ï¼Œå¯ä»¥ç®€å†™æˆä¸‹é¢çš„å½¢å¼ã€‚</p>
<pre><code class="javascript">let obj = {
  * myGeneratorMethod() {
    Â·Â·Â·
  }
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>myGeneratorMethod</code>å±æ€§å‰é¢æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼Œè¡¨ç¤ºè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ã€‚</p>
<p>å®ƒçš„å®Œæ•´å½¢å¼å¦‚ä¸‹ï¼Œä¸ä¸Šé¢çš„å†™æ³•æ˜¯ç­‰ä»·çš„ã€‚</p>
<pre><code class="javascript">let obj = {
  myGeneratorMethod: function* () {
    // Â·Â·Â·
  }
};
</code></pre>
<h2 id="Generatorå‡½æ•°çš„this"><a href="#Generatorå‡½æ•°çš„this" class="headerlink" title="Generatorå‡½æ•°çš„this"></a>Generatorå‡½æ•°çš„<code>this</code></h2><p>Generatorå‡½æ•°æ€»æ˜¯è¿”å›ä¸€ä¸ªéå†å™¨ï¼ŒES6è§„å®šè¿™ä¸ªéå†å™¨æ˜¯Generatorå‡½æ•°çš„å®ä¾‹ï¼Œä¹Ÿç»§æ‰¿äº†Generatorå‡½æ•°çš„<code>prototype</code>å¯¹è±¡ä¸Šçš„æ–¹æ³•ã€‚</p>
<pre><code class="javascript">function* g() {}

g.prototype.hello = function () {
  return &#39;hi!&#39;;
};

let obj = g();

obj instanceof g // true
obj.hello() // &#39;hi!&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨æ˜ï¼ŒGeneratorå‡½æ•°<code>g</code>è¿”å›çš„éå†å™¨<code>obj</code>ï¼Œæ˜¯<code>g</code>çš„å®ä¾‹ï¼Œè€Œä¸”ç»§æ‰¿äº†<code>g.prototype</code>ã€‚ä½†æ˜¯ï¼Œå¦‚æœæŠŠ<code>g</code>å½“ä½œæ™®é€šçš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸º<code>g</code>è¿”å›çš„æ€»æ˜¯éå†å™¨å¯¹è±¡ï¼Œè€Œä¸æ˜¯<code>this</code>å¯¹è±¡ã€‚</p>
<pre><code class="javascript">function* g() {
  this.a = 11;
}

let obj = g();
obj.a // undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒGeneratorå‡½æ•°<code>g</code>åœ¨<code>this</code>å¯¹è±¡ä¸Šé¢æ·»åŠ äº†ä¸€ä¸ªå±æ€§<code>a</code>ï¼Œä½†æ˜¯<code>obj</code>å¯¹è±¡æ‹¿ä¸åˆ°è¿™ä¸ªå±æ€§ã€‚</p>
<p>Generatorå‡½æ•°ä¹Ÿä¸èƒ½è·Ÿ<code>new</code>å‘½ä»¤ä¸€èµ·ç”¨ï¼Œä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">function* F() {
  yield this.x = 2;
  yield this.y = 3;
}

new F()
// TypeError: F is not a constructor
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>new</code>å‘½ä»¤è·Ÿæ„é€ å‡½æ•°<code>F</code>ä¸€èµ·ä½¿ç”¨ï¼Œç»“æœæŠ¥é”™ï¼Œå› ä¸º<code>F</code>ä¸æ˜¯æ„é€ å‡½æ•°ã€‚</p>
<p>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰åŠæ³•è®©Generatorå‡½æ•°è¿”å›ä¸€ä¸ªæ­£å¸¸çš„å¯¹è±¡å®ä¾‹ï¼Œæ—¢å¯ä»¥ç”¨<code>next</code>æ–¹æ³•ï¼Œåˆå¯ä»¥è·å¾—æ­£å¸¸çš„<code>this</code>ï¼Ÿ</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå˜é€šæ–¹æ³•ã€‚é¦–å…ˆï¼Œç”Ÿæˆä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä½¿ç”¨<code>call</code>æ–¹æ³•ç»‘å®šGeneratorå‡½æ•°å†…éƒ¨çš„<code>this</code>ã€‚è¿™æ ·ï¼Œæ„é€ å‡½æ•°è°ƒç”¨ä»¥åï¼Œè¿™ä¸ªç©ºå¯¹è±¡å°±æ˜¯Generatorå‡½æ•°çš„å®ä¾‹å¯¹è±¡äº†ã€‚</p>
<pre><code class="javascript">function* F() {
  this.a = 1;
  yield this.b = 2;
  yield this.c = 3;
}
var obj = {};
var f = F.call(obj);

f.next();  // Object {value: 2, done: false}
f.next();  // Object {value: 3, done: false}
f.next();  // Object {value: undefined, done: true}

obj.a // 1
obj.b // 2
obj.c // 3
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œé¦–å…ˆæ˜¯<code>F</code>å†…éƒ¨çš„<code>this</code>å¯¹è±¡ç»‘å®š<code>obj</code>å¯¹è±¡ï¼Œç„¶åè°ƒç”¨å®ƒï¼Œè¿”å›ä¸€ä¸ªIteratorå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡æ‰§è¡Œä¸‰æ¬¡<code>next</code>æ–¹æ³•ï¼ˆå› ä¸º<code>F</code>å†…éƒ¨æœ‰ä¸¤ä¸ª<code>yield</code>è¯­å¥ï¼‰ï¼Œå®ŒæˆFå†…éƒ¨æ‰€æœ‰ä»£ç çš„è¿è¡Œã€‚è¿™æ—¶ï¼Œæ‰€æœ‰å†…éƒ¨å±æ€§éƒ½ç»‘å®šåœ¨<code>obj</code>å¯¹è±¡ä¸Šäº†ï¼Œå› æ­¤<code>obj</code>å¯¹è±¡ä¹Ÿå°±æˆäº†<code>F</code>çš„å®ä¾‹ã€‚</p>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ‰§è¡Œçš„æ˜¯éå†å™¨å¯¹è±¡<code>f</code>ï¼Œä½†æ˜¯ç”Ÿæˆçš„å¯¹è±¡å®ä¾‹æ˜¯<code>obj</code>ï¼Œæœ‰æ²¡æœ‰åŠæ³•å°†è¿™ä¸¤ä¸ªå¯¹è±¡ç»Ÿä¸€å‘¢ï¼Ÿ</p>
<p>ä¸€ä¸ªåŠæ³•å°±æ˜¯å°†<code>obj</code>æ¢æˆ<code>F.prototype</code>ã€‚</p>
<pre><code class="javascript">function* F() {
  this.a = 1;
  yield this.b = 2;
  yield this.c = 3;
}
var f = F.call(F.prototype);

f.next();  // Object {value: 2, done: false}
f.next();  // Object {value: 3, done: false}
f.next();  // Object {value: undefined, done: true}

f.a // 1
f.b // 2
f.c // 3
</code></pre>
<p>å†å°†<code>F</code>æ”¹æˆæ„é€ å‡½æ•°ï¼Œå°±å¯ä»¥å¯¹å®ƒæ‰§è¡Œ<code>new</code>å‘½ä»¤äº†ã€‚</p>
<pre><code class="javascript">function* gen() {
  this.a = 1;
  yield this.b = 2;
  yield this.c = 3;
}

function F() {
  return gen.call(gen.prototype);
}

var f = new F();

f.next();  // Object {value: 2, done: false}
f.next();  // Object {value: 3, done: false}
f.next();  // Object {value: undefined, done: true}

f.a // 1
f.b // 2
f.c // 3
</code></pre>
<h2 id="å«ä¹‰"><a href="#å«ä¹‰" class="headerlink" title="å«ä¹‰"></a>å«ä¹‰</h2><h3 id="Generatorä¸çŠ¶æ€æœº"><a href="#Generatorä¸çŠ¶æ€æœº" class="headerlink" title="Generatorä¸çŠ¶æ€æœº"></a>Generatorä¸çŠ¶æ€æœº</h3><p>Generatoræ˜¯å®ç°çŠ¶æ€æœºçš„æœ€ä½³ç»“æ„ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„clockå‡½æ•°å°±æ˜¯ä¸€ä¸ªçŠ¶æ€æœºã€‚</p>
<pre><code class="javascript">var ticking = true;
var clock = function() {
  if (ticking)
    console.log(&#39;Tick!&#39;);
  else
    console.log(&#39;Tock!&#39;);
  ticking = !ticking;
}
</code></pre>
<p>ä¸Šé¢ä»£ç çš„clockå‡½æ•°ä¸€å…±æœ‰ä¸¤ç§çŠ¶æ€ï¼ˆTickå’ŒTockï¼‰ï¼Œæ¯è¿è¡Œä¸€æ¬¡ï¼Œå°±æ”¹å˜ä¸€æ¬¡çŠ¶æ€ã€‚è¿™ä¸ªå‡½æ•°å¦‚æœç”¨Generatorå®ç°ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">var clock = function*() {
  while (true) {
    console.log(&#39;Tick!&#39;);
    yield;
    console.log(&#39;Tock!&#39;);
    yield;
  }
};
</code></pre>
<p>ä¸Šé¢çš„Generatorå®ç°ä¸ES5å®ç°å¯¹æ¯”ï¼Œå¯ä»¥çœ‹åˆ°å°‘äº†ç”¨æ¥ä¿å­˜çŠ¶æ€çš„å¤–éƒ¨å˜é‡<code>ticking</code>ï¼Œè¿™æ ·å°±æ›´ç®€æ´ï¼Œæ›´å®‰å…¨ï¼ˆçŠ¶æ€ä¸ä¼šè¢«éæ³•ç¯¡æ”¹ï¼‰ã€æ›´ç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ï¼Œåœ¨å†™æ³•ä¸Šä¹Ÿæ›´ä¼˜é›…ã€‚Generatorä¹‹æ‰€ä»¥å¯ä»¥ä¸ç”¨å¤–éƒ¨å˜é‡ä¿å­˜çŠ¶æ€ï¼Œæ˜¯å› ä¸ºå®ƒæœ¬èº«å°±åŒ…å«äº†ä¸€ä¸ªçŠ¶æ€ä¿¡æ¯ï¼Œå³ç›®å‰æ˜¯å¦å¤„äºæš‚åœæ€ã€‚</p>
<h3 id="Generatorä¸åç¨‹"><a href="#Generatorä¸åç¨‹" class="headerlink" title="Generatorä¸åç¨‹"></a>Generatorä¸åç¨‹</h3><p>åç¨‹ï¼ˆcoroutineï¼‰æ˜¯ä¸€ç§ç¨‹åºè¿è¡Œçš„æ–¹å¼ï¼Œå¯ä»¥ç†è§£æˆâ€œåä½œçš„çº¿ç¨‹â€æˆ–â€œåä½œçš„å‡½æ•°â€ã€‚åç¨‹æ—¢å¯ä»¥ç”¨å•çº¿ç¨‹å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨å¤šçº¿ç¨‹å®ç°ã€‚å‰è€…æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­ä¾‹ç¨‹ï¼Œåè€…æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿ç¨‹ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰åç¨‹ä¸å­ä¾‹ç¨‹çš„å·®å¼‚</strong></p>
<p>ä¼ ç»Ÿçš„â€œå­ä¾‹ç¨‹â€ï¼ˆsubroutineï¼‰é‡‡ç”¨å †æ ˆå¼â€œåè¿›å…ˆå‡ºâ€çš„æ‰§è¡Œæ–¹å¼ï¼Œåªæœ‰å½“è°ƒç”¨çš„å­å‡½æ•°å®Œå…¨æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ä¼šç»“æŸæ‰§è¡Œçˆ¶å‡½æ•°ã€‚åç¨‹ä¸å…¶ä¸åŒï¼Œå¤šä¸ªçº¿ç¨‹ï¼ˆå•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œå³å¤šä¸ªå‡½æ•°ï¼‰å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰å¤„äºæ­£åœ¨è¿è¡Œçš„çŠ¶æ€ï¼Œå…¶ä»–çº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰éƒ½å¤„äºæš‚åœæ€ï¼ˆsuspendedï¼‰ï¼Œçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ä¹‹é—´å¯ä»¥äº¤æ¢æ‰§è¡Œæƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰æ‰§è¡Œåˆ°ä¸€åŠï¼Œå¯ä»¥æš‚åœæ‰§è¡Œï¼Œå°†æ‰§è¡Œæƒäº¤ç»™å¦ä¸€ä¸ªçº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ï¼Œç­‰åˆ°ç¨åæ”¶å›æ‰§è¡Œæƒçš„æ—¶å€™ï¼Œå†æ¢å¤æ‰§è¡Œã€‚è¿™ç§å¯ä»¥å¹¶è¡Œæ‰§è¡Œã€äº¤æ¢æ‰§è¡Œæƒçš„çº¿ç¨‹ï¼ˆæˆ–å‡½æ•°ï¼‰ï¼Œå°±ç§°ä¸ºåç¨‹ã€‚</p>
<p>ä»å®ç°ä¸Šçœ‹ï¼Œåœ¨å†…å­˜ä¸­ï¼Œå­ä¾‹ç¨‹åªä½¿ç”¨ä¸€ä¸ªæ ˆï¼ˆstackï¼‰ï¼Œè€Œåç¨‹æ˜¯åŒæ—¶å­˜åœ¨å¤šä¸ªæ ˆï¼Œä½†åªæœ‰ä¸€ä¸ªæ ˆæ˜¯åœ¨è¿è¡ŒçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåç¨‹æ˜¯ä»¥å¤šå ç”¨å†…å­˜ä¸ºä»£ä»·ï¼Œå®ç°å¤šä»»åŠ¡çš„å¹¶è¡Œã€‚</p>
<p><strong>ï¼ˆ2ï¼‰åç¨‹ä¸æ™®é€šçº¿ç¨‹çš„å·®å¼‚</strong></p>
<p>ä¸éš¾çœ‹å‡ºï¼Œåç¨‹é€‚åˆç”¨äºå¤šä»»åŠ¡è¿è¡Œçš„ç¯å¢ƒã€‚åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œå®ƒä¸æ™®é€šçš„çº¿ç¨‹å¾ˆç›¸ä¼¼ï¼Œéƒ½æœ‰è‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€å¯ä»¥åˆ†äº«å…¨å±€å˜é‡ã€‚å®ƒä»¬çš„ä¸åŒä¹‹å¤„åœ¨äºï¼ŒåŒä¸€æ—¶é—´å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œä½†æ˜¯è¿è¡Œçš„åç¨‹åªèƒ½æœ‰ä¸€ä¸ªï¼Œå…¶ä»–åç¨‹éƒ½å¤„äºæš‚åœçŠ¶æ€ã€‚æ­¤å¤–ï¼Œæ™®é€šçš„çº¿ç¨‹æ˜¯æŠ¢å…ˆå¼çš„ï¼Œåˆ°åº•å“ªä¸ªçº¿ç¨‹ä¼˜å…ˆå¾—åˆ°èµ„æºï¼Œå¿…é¡»ç”±è¿è¡Œç¯å¢ƒå†³å®šï¼Œä½†æ˜¯åç¨‹æ˜¯åˆä½œå¼çš„ï¼Œæ‰§è¡Œæƒç”±åç¨‹è‡ªå·±åˆ†é…ã€‚</p>
<p>ç”±äºECMAScriptæ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œåªèƒ½ä¿æŒä¸€ä¸ªè°ƒç”¨æ ˆã€‚å¼•å…¥åç¨‹ä»¥åï¼Œæ¯ä¸ªä»»åŠ¡å¯ä»¥ä¿æŒè‡ªå·±çš„è°ƒç”¨æ ˆã€‚è¿™æ ·åšçš„æœ€å¤§å¥½å¤„ï¼Œå°±æ˜¯æŠ›å‡ºé”™è¯¯çš„æ—¶å€™ï¼Œå¯ä»¥æ‰¾åˆ°åŸå§‹çš„è°ƒç”¨æ ˆã€‚ä¸è‡³äºåƒå¼‚æ­¥æ“ä½œçš„å›è°ƒå‡½æ•°é‚£æ ·ï¼Œä¸€æ—¦å‡ºé”™ï¼ŒåŸå§‹çš„è°ƒç”¨æ ˆæ—©å°±ç»“æŸã€‚</p>
<p>Generatorå‡½æ•°æ˜¯ECMAScript 6å¯¹åç¨‹çš„å®ç°ï¼Œä½†å±äºä¸å®Œå…¨å®ç°ã€‚Generatorå‡½æ•°è¢«ç§°ä¸ºâ€œåŠåç¨‹â€ï¼ˆsemi-coroutineï¼‰ï¼Œæ„æ€æ˜¯åªæœ‰Generatorå‡½æ•°çš„è°ƒç”¨è€…ï¼Œæ‰èƒ½å°†ç¨‹åºçš„æ‰§è¡Œæƒè¿˜ç»™Generatorå‡½æ•°ã€‚å¦‚æœæ˜¯å®Œå…¨æ‰§è¡Œçš„åç¨‹ï¼Œä»»ä½•å‡½æ•°éƒ½å¯ä»¥è®©æš‚åœçš„åç¨‹ç»§ç»­æ‰§è¡Œã€‚</p>
<p>å¦‚æœå°†Generatorå‡½æ•°å½“ä½œåç¨‹ï¼Œå®Œå…¨å¯ä»¥å°†å¤šä¸ªéœ€è¦äº’ç›¸åä½œçš„ä»»åŠ¡å†™æˆGeneratorå‡½æ•°ï¼Œå®ƒä»¬ä¹‹é—´ä½¿ç”¨yieldè¯­å¥äº¤æ¢æ§åˆ¶æƒã€‚</p>
<h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><p>Generatorå¯ä»¥æš‚åœå‡½æ•°æ‰§è¡Œï¼Œè¿”å›ä»»æ„è¡¨è¾¾å¼çš„å€¼ã€‚è¿™ç§ç‰¹ç‚¹ä½¿å¾—Generatoræœ‰å¤šç§åº”ç”¨åœºæ™¯ã€‚</p>
<h3 id="ï¼ˆ1ï¼‰å¼‚æ­¥æ“ä½œçš„åŒæ­¥åŒ–è¡¨è¾¾"><a href="#ï¼ˆ1ï¼‰å¼‚æ­¥æ“ä½œçš„åŒæ­¥åŒ–è¡¨è¾¾" class="headerlink" title="ï¼ˆ1ï¼‰å¼‚æ­¥æ“ä½œçš„åŒæ­¥åŒ–è¡¨è¾¾"></a>ï¼ˆ1ï¼‰å¼‚æ­¥æ“ä½œçš„åŒæ­¥åŒ–è¡¨è¾¾</h3><p>Generatorå‡½æ•°çš„æš‚åœæ‰§è¡Œçš„æ•ˆæœï¼Œæ„å‘³ç€å¯ä»¥æŠŠå¼‚æ­¥æ“ä½œå†™åœ¨yieldè¯­å¥é‡Œé¢ï¼Œç­‰åˆ°è°ƒç”¨nextæ–¹æ³•æ—¶å†å¾€åæ‰§è¡Œã€‚è¿™å®é™…ä¸Šç­‰åŒäºä¸éœ€è¦å†™å›è°ƒå‡½æ•°äº†ï¼Œå› ä¸ºå¼‚æ­¥æ“ä½œçš„åç»­æ“ä½œå¯ä»¥æ”¾åœ¨yieldè¯­å¥ä¸‹é¢ï¼Œåæ­£è¦ç­‰åˆ°è°ƒç”¨nextæ–¹æ³•æ—¶å†æ‰§è¡Œã€‚æ‰€ä»¥ï¼ŒGeneratorå‡½æ•°çš„ä¸€ä¸ªé‡è¦å®é™…æ„ä¹‰å°±æ˜¯ç”¨æ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œæ”¹å†™å›è°ƒå‡½æ•°ã€‚</p>
<pre><code class="javascript">function* loadUI() {
  showLoadingScreen();
  yield loadUIDataAsynchronously();
  hideLoadingScreen();
}
var loader = loadUI();
// åŠ è½½UI
loader.next()

// å¸è½½UI
loader.next()
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨loadUIå‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°ä¸ä¼šæ‰§è¡Œï¼Œä»…è¿”å›ä¸€ä¸ªéå†å™¨ã€‚ä¸‹ä¸€æ¬¡å¯¹è¯¥éå†å™¨è°ƒç”¨nextæ–¹æ³•ï¼Œåˆ™ä¼šæ˜¾ç¤ºLoadingç•Œé¢ï¼Œå¹¶ä¸”å¼‚æ­¥åŠ è½½æ•°æ®ã€‚ç­‰åˆ°æ•°æ®åŠ è½½å®Œæˆï¼Œå†ä¸€æ¬¡ä½¿ç”¨nextæ–¹æ³•ï¼Œåˆ™ä¼šéšè—Loadingç•Œé¢ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§å†™æ³•çš„å¥½å¤„æ˜¯æ‰€æœ‰Loadingç•Œé¢çš„é€»è¾‘ï¼Œéƒ½è¢«å°è£…åœ¨ä¸€ä¸ªå‡½æ•°ï¼ŒæŒ‰éƒ¨å°±ç­éå¸¸æ¸…æ™°ã€‚</p>
<p>Ajaxæ˜¯å…¸å‹çš„å¼‚æ­¥æ“ä½œï¼Œé€šè¿‡Generatorå‡½æ•°éƒ¨ç½²Ajaxæ“ä½œï¼Œå¯ä»¥ç”¨åŒæ­¥çš„æ–¹å¼è¡¨è¾¾ã€‚</p>
<pre><code class="javascript">function* main() {
  var result = yield request(&quot;http://some.url&quot;);
  var resp = JSON.parse(result);
    console.log(resp.value);
}

function request(url) {
  makeAjaxCall(url, function(response){
    it.next(response);
  });
}

var it = main();
it.next();
</code></pre>
<p>ä¸Šé¢ä»£ç çš„mainå‡½æ•°ï¼Œå°±æ˜¯é€šè¿‡Ajaxæ“ä½œè·å–æ•°æ®ã€‚å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†å¤šäº†ä¸€ä¸ªyieldï¼Œå®ƒå‡ ä¹ä¸åŒæ­¥æ“ä½œçš„å†™æ³•å®Œå…¨ä¸€æ ·ã€‚æ³¨æ„ï¼ŒmakeAjaxCallå‡½æ•°ä¸­çš„nextæ–¹æ³•ï¼Œå¿…é¡»åŠ ä¸Šresponseå‚æ•°ï¼Œå› ä¸ºyieldè¯­å¥æ„æˆçš„è¡¨è¾¾å¼ï¼Œæœ¬èº«æ˜¯æ²¡æœ‰å€¼çš„ï¼Œæ€»æ˜¯ç­‰äºundefinedã€‚</p>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œé€šè¿‡Generatorå‡½æ•°é€è¡Œè¯»å–æ–‡æœ¬æ–‡ä»¶ã€‚</p>
<pre><code class="javascript">function* numbers() {
  let file = new FileReader(&quot;numbers.txt&quot;);
  try {
    while(!file.eof) {
      yield parseInt(file.readLine(), 10);
    }
  } finally {
    file.close();
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç æ‰“å¼€æ–‡æœ¬æ–‡ä»¶ï¼Œä½¿ç”¨yieldè¯­å¥å¯ä»¥æ‰‹åŠ¨é€è¡Œè¯»å–æ–‡ä»¶ã€‚</p>
<h3 id="ï¼ˆ2ï¼‰æ§åˆ¶æµç®¡ç†"><a href="#ï¼ˆ2ï¼‰æ§åˆ¶æµç®¡ç†" class="headerlink" title="ï¼ˆ2ï¼‰æ§åˆ¶æµç®¡ç†"></a>ï¼ˆ2ï¼‰æ§åˆ¶æµç®¡ç†</h3><p>å¦‚æœæœ‰ä¸€ä¸ªå¤šæ­¥æ“ä½œéå¸¸è€—æ—¶ï¼Œé‡‡ç”¨å›è°ƒå‡½æ•°ï¼Œå¯èƒ½ä¼šå†™æˆä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">step1(function (value1) {
  step2(value1, function(value2) {
    step3(value2, function(value3) {
      step4(value3, function(value4) {
        // Do something with value4
      });
    });
  });
});
</code></pre>
<p>é‡‡ç”¨Promiseæ”¹å†™ä¸Šé¢çš„ä»£ç ã€‚</p>
<pre><code class="javascript">Promise.resolve(step1)
  .then(step2)
  .then(step3)
  .then(step4)
  .then(function (value4) {
    // Do something with value4
  }, function (error) {
    // Handle any error from step1 through step4
  })
  .done();
</code></pre>
<p>ä¸Šé¢ä»£ç å·²ç»æŠŠå›è°ƒå‡½æ•°ï¼Œæ”¹æˆäº†ç›´çº¿æ‰§è¡Œçš„å½¢å¼ï¼Œä½†æ˜¯åŠ å…¥äº†å¤§é‡Promiseçš„è¯­æ³•ã€‚Generatorå‡½æ•°å¯ä»¥è¿›ä¸€æ­¥æ”¹å–„ä»£ç è¿è¡Œæµç¨‹ã€‚</p>
<pre><code class="javascript">function* longRunningTask(value1) {
  try {
    var value2 = yield step1(value1);
    var value3 = yield step2(value2);
    var value4 = yield step3(value3);
    var value5 = yield step4(value4);
    // Do something with value4
  } catch (e) {
    // Handle any error from step1 through step4
  }
}
</code></pre>
<p>ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‡½æ•°ï¼ŒæŒ‰æ¬¡åºè‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰æ­¥éª¤ã€‚</p>
<pre><code class="javascript">scheduler(longRunningTask(initialValue));

function scheduler(task) {
  var taskObj = task.next(task.value);
  // å¦‚æœGeneratorå‡½æ•°æœªç»“æŸï¼Œå°±ç»§ç»­è°ƒç”¨
  if (!taskObj.done) {
    task.value = taskObj.value
    scheduler(task);
  }
}
</code></pre>
<p>æ³¨æ„ï¼Œä¸Šé¢è¿™ç§åšæ³•ï¼Œåªé€‚åˆåŒæ­¥æ“ä½œï¼Œå³æ‰€æœ‰çš„<code>task</code>éƒ½å¿…é¡»æ˜¯åŒæ­¥çš„ï¼Œä¸èƒ½æœ‰å¼‚æ­¥æ“ä½œã€‚å› ä¸ºè¿™é‡Œçš„ä»£ç ä¸€å¾—åˆ°è¿”å›å€¼ï¼Œå°±ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œæ²¡æœ‰åˆ¤æ–­å¼‚æ­¥æ“ä½œä½•æ—¶å®Œæˆã€‚å¦‚æœè¦æ§åˆ¶å¼‚æ­¥çš„æ“ä½œæµç¨‹ï¼Œè¯¦è§åé¢çš„ã€Šå¼‚æ­¥æ“ä½œã€‹ä¸€ç« ã€‚</p>
<p>ä¸‹é¢ï¼Œåˆ©ç”¨<code>for...of</code>å¾ªç¯ä¼šè‡ªåŠ¨ä¾æ¬¡æ‰§è¡Œ<code>yield</code>å‘½ä»¤çš„ç‰¹æ€§ï¼Œæä¾›ä¸€ç§æ›´ä¸€èˆ¬çš„æ§åˆ¶æµç®¡ç†çš„æ–¹æ³•ã€‚</p>
<pre><code class="javascript">let steps = [step1Func, step2Func, step3Func];

function *iterateSteps(steps){
  for (var i=0; i&lt; steps.length; i++){
    var step = steps[i];
    yield step();
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„<code>steps</code>å°è£…äº†ä¸€ä¸ªä»»åŠ¡çš„å¤šä¸ªæ­¥éª¤ï¼ŒGeneratorå‡½æ•°<code>iterateSteps</code>åˆ™æ˜¯ä¾æ¬¡ä¸ºè¿™äº›æ­¥éª¤åŠ ä¸Š<code>yield</code>å‘½ä»¤ã€‚</p>
<p>å°†ä»»åŠ¡åˆ†è§£æˆæ­¥éª¤ä¹‹åï¼Œè¿˜å¯ä»¥å°†é¡¹ç›®åˆ†è§£æˆå¤šä¸ªä¾æ¬¡æ‰§è¡Œçš„ä»»åŠ¡ã€‚</p>
<pre><code class="javascript">let jobs = [job1, job2, job3];

function *iterateJobs(jobs){
  for (var i=0; i&lt; jobs.length; i++){
    var job = jobs[i];
    yield *iterateSteps(job.steps);
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„<code>jobs</code>å°è£…äº†ä¸€ä¸ªé¡¹ç›®çš„å¤šä¸ªä»»åŠ¡ï¼ŒGeneratorå‡½æ•°<code>iterateJobs</code>åˆ™æ˜¯ä¾æ¬¡ä¸ºè¿™äº›ä»»åŠ¡åŠ ä¸Š<code>yield *</code>å‘½ä»¤ã€‚</p>
<p>æœ€åï¼Œå°±å¯ä»¥ç”¨<code>for...of</code>å¾ªç¯ä¸€æ¬¡æ€§ä¾æ¬¡æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡çš„æ‰€æœ‰æ­¥éª¤ã€‚</p>
<pre><code class="javascript">for (var step of iterateJobs(jobs)){
  console.log(step.id);
}
</code></pre>
<p>å†æ¬¡æé†’ï¼Œä¸Šé¢çš„åšæ³•åªèƒ½ç”¨äºæ‰€æœ‰æ­¥éª¤éƒ½æ˜¯åŒæ­¥æ“ä½œçš„æƒ…å†µï¼Œä¸èƒ½æœ‰å¼‚æ­¥æ“ä½œçš„æ­¥éª¤ã€‚å¦‚æœæƒ³è¦ä¾æ¬¡æ‰§è¡Œå¼‚æ­¥çš„æ­¥éª¤ï¼Œå¿…é¡»ä½¿ç”¨åé¢çš„ã€Šå¼‚æ­¥æ“ä½œã€‹ä¸€ç« ä»‹ç»çš„æ–¹æ³•ã€‚</p>
<p><code>for...of</code>çš„æœ¬è´¨æ˜¯ä¸€ä¸ª<code>while</code>å¾ªç¯ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å®è´¨ä¸Šæ‰§è¡Œçš„æ˜¯ä¸‹é¢çš„é€»è¾‘ã€‚</p>
<pre><code class="javascript">var it = iterateJobs(jobs);
var res = it.next();

while (!res.done){
  var result = res.value;
  // ...
  res = it.next();
}
</code></pre>
<h3 id="ï¼ˆ3ï¼‰éƒ¨ç½²Iteratoræ¥å£"><a href="#ï¼ˆ3ï¼‰éƒ¨ç½²Iteratoræ¥å£" class="headerlink" title="ï¼ˆ3ï¼‰éƒ¨ç½²Iteratoræ¥å£"></a>ï¼ˆ3ï¼‰éƒ¨ç½²Iteratoræ¥å£</h3><p>åˆ©ç”¨Generatorå‡½æ•°ï¼Œå¯ä»¥åœ¨ä»»æ„å¯¹è±¡ä¸Šéƒ¨ç½²Iteratoræ¥å£ã€‚</p>
<pre><code class="javascript">function* iterEntries(obj) {
  let keys = Object.keys(obj);
  for (let i=0; i &lt; keys.length; i++) {
    let key = keys[i];
    yield [key, obj[key]];
  }
}

let myObj = { foo: 3, bar: 7 };

for (let [key, value] of iterEntries(myObj)) {
  console.log(key, value);
}

// foo 3
// bar 7
</code></pre>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>myObj</code>æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œé€šè¿‡<code>iterEntries</code>å‡½æ•°ï¼Œå°±æœ‰äº†Iteratoræ¥å£ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥åœ¨ä»»æ„å¯¹è±¡ä¸Šéƒ¨ç½²<code>next</code>æ–¹æ³•ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹æ•°ç»„éƒ¨ç½²Iteratoræ¥å£çš„ä¾‹å­ï¼Œå°½ç®¡æ•°ç»„åŸç”Ÿå…·æœ‰è¿™ä¸ªæ¥å£ã€‚</p>
<pre><code class="javascript">function* makeSimpleGenerator(array){
  var nextIndex = 0;

  while(nextIndex &lt; array.length){
    yield array[nextIndex++];
  }
}

var gen = makeSimpleGenerator([&#39;yo&#39;, &#39;ya&#39;]);

gen.next().value // &#39;yo&#39;
gen.next().value // &#39;ya&#39;
gen.next().done  // true
</code></pre>
<h3 id="ï¼ˆ4ï¼‰ä½œä¸ºæ•°æ®ç»“æ„"><a href="#ï¼ˆ4ï¼‰ä½œä¸ºæ•°æ®ç»“æ„" class="headerlink" title="ï¼ˆ4ï¼‰ä½œä¸ºæ•°æ®ç»“æ„"></a>ï¼ˆ4ï¼‰ä½œä¸ºæ•°æ®ç»“æ„</h3><p>Generatorå¯ä»¥çœ‹ä½œæ˜¯æ•°æ®ç»“æ„ï¼Œæ›´ç¡®åˆ‡åœ°è¯´ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªæ•°ç»„ç»“æ„ï¼Œå› ä¸ºGeneratorå‡½æ•°å¯ä»¥è¿”å›ä¸€ç³»åˆ—çš„å€¼ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥å¯¹ä»»æ„è¡¨è¾¾å¼ï¼Œæä¾›ç±»ä¼¼æ•°ç»„çš„æ¥å£ã€‚</p>
<pre><code class="javascript">function *doStuff() {
  yield fs.readFile.bind(null, &#39;hello.txt&#39;);
  yield fs.readFile.bind(null, &#39;world.txt&#39;);
  yield fs.readFile.bind(null, &#39;and-such.txt&#39;);
}
</code></pre>
<p>ä¸Šé¢ä»£ç å°±æ˜¯ä¾æ¬¡è¿”å›ä¸‰ä¸ªå‡½æ•°ï¼Œä½†æ˜¯ç”±äºä½¿ç”¨äº†Generatorå‡½æ•°ï¼Œå¯¼è‡´å¯ä»¥åƒå¤„ç†æ•°ç»„é‚£æ ·ï¼Œå¤„ç†è¿™ä¸‰ä¸ªè¿”å›çš„å‡½æ•°ã€‚</p>
<pre><code class="javascript">for (task of doStuff()) {
  // taskæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥åƒå›è°ƒå‡½æ•°é‚£æ ·ä½¿ç”¨å®ƒ
}
</code></pre>
<p>å®é™…ä¸Šï¼Œå¦‚æœç”¨ES5è¡¨è¾¾ï¼Œå®Œå…¨å¯ä»¥ç”¨æ•°ç»„æ¨¡æ‹ŸGeneratorçš„è¿™ç§ç”¨æ³•ã€‚</p>
<pre><code class="javascript">function doStuff() {
  return [
    fs.readFile.bind(null, &#39;hello.txt&#39;),
    fs.readFile.bind(null, &#39;world.txt&#39;),
    fs.readFile.bind(null, &#39;and-such.txt&#39;)
  ];
}
</code></pre>
<p>ä¸Šé¢çš„å‡½æ•°ï¼Œå¯ä»¥ç”¨ä¸€æ¨¡ä¸€æ ·çš„forâ€¦ofå¾ªç¯å¤„ç†ï¼ä¸¤ç›¸ä¸€æ¯”è¾ƒï¼Œå°±ä¸éš¾çœ‹å‡ºGeneratorä½¿å¾—æ•°æ®æˆ–è€…æ“ä½œï¼Œå…·å¤‡äº†ç±»ä¼¼æ•°ç»„çš„æ¥å£ã€‚</p>
<blockquote>
<p>æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Generator-å‡½æ•°&quot;&gt;&lt;a href=&quot;#Generator-å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;Generator å‡½æ•°&quot;&gt;&lt;/a&gt;Generator å‡½æ•°&lt;/h1&gt;&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Generator" scheme="https://microzz.com/tags/Generator/"/>
    
  </entry>
  
  <entry>
    <title>Iteratorå’Œfor...ofå¾ªç¯</title>
    <link href="https://microzz.com/2017/01/12/iterator/"/>
    <id>https://microzz.com/2017/01/12/iterator/</id>
    <published>2017-01-12T07:45:19.000Z</published>
    <updated>2017-08-21T11:35:18.015Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Iteratorå’Œforâ€¦ofå¾ªç¯"><a href="#Iteratorå’Œforâ€¦ofå¾ªç¯" class="headerlink" title="Iteratorå’Œforâ€¦ofå¾ªç¯"></a>Iteratorå’Œforâ€¦ofå¾ªç¯</h1><h2 id="Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ"><a href="#Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ" class="headerlink" title="Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ"></a>Iteratorï¼ˆéå†å™¨ï¼‰çš„æ¦‚å¿µ</h2><p>JavaScriptåŸæœ‰çš„è¡¨ç¤ºâ€œé›†åˆâ€çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦æ˜¯æ•°ç»„ï¼ˆArrayï¼‰å’Œå¯¹è±¡ï¼ˆObjectï¼‰ï¼ŒES6åˆæ·»åŠ äº†Mapå’ŒSetã€‚è¿™æ ·å°±æœ‰äº†å››ç§æ•°æ®é›†åˆï¼Œç”¨æˆ·è¿˜å¯ä»¥ç»„åˆä½¿ç”¨å®ƒä»¬ï¼Œå®šä¹‰è‡ªå·±çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚æ•°ç»„çš„æˆå‘˜æ˜¯Mapï¼ŒMapçš„æˆå‘˜æ˜¯å¯¹è±¡ã€‚è¿™æ ·å°±éœ€è¦ä¸€ç§ç»Ÿä¸€çš„æ¥å£æœºåˆ¶ï¼Œæ¥å¤„ç†æ‰€æœ‰ä¸åŒçš„æ•°æ®ç»“æ„ã€‚</p>
<p>éå†å™¨ï¼ˆIteratorï¼‰å°±æ˜¯è¿™æ ·ä¸€ç§æœºåˆ¶ã€‚å®ƒæ˜¯ä¸€ç§æ¥å£ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½²Iteratoræ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œï¼ˆå³ä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æ„çš„æ‰€æœ‰æˆå‘˜ï¼‰ã€‚</p>
<p>Iteratorçš„ä½œç”¨æœ‰ä¸‰ä¸ªï¼šä¸€æ˜¯ä¸ºå„ç§æ•°æ®ç»“æ„ï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€çš„ã€ç®€ä¾¿çš„è®¿é—®æ¥å£ï¼›äºŒæ˜¯ä½¿å¾—æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ—ï¼›ä¸‰æ˜¯ES6åˆ›é€ äº†ä¸€ç§æ–°çš„éå†å‘½ä»¤<code>for...of</code>å¾ªç¯ï¼ŒIteratoræ¥å£ä¸»è¦ä¾›<code>for...of</code>æ¶ˆè´¹ã€‚</p>
<p>Iteratorçš„éå†è¿‡ç¨‹æ˜¯è¿™æ ·çš„ã€‚</p>
<p>ï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œéå†å™¨å¯¹è±¡æœ¬è´¨ä¸Šï¼Œå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚</p>
<p>ï¼ˆ2ï¼‰ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œå¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ã€‚</p>
<p>ï¼ˆ3ï¼‰ç¬¬äºŒæ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼ŒæŒ‡é’ˆå°±æŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬äºŒä¸ªæˆå‘˜ã€‚</p>
<p>ï¼ˆ4ï¼‰ä¸æ–­è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œç›´åˆ°å®ƒæŒ‡å‘æ•°æ®ç»“æ„çš„ç»“æŸä½ç½®ã€‚</p>
<p>æ¯ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œéƒ½ä¼šè¿”å›æ•°æ®ç»“æ„çš„å½“å‰æˆå‘˜çš„ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªåŒ…å«<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚å…¶ä¸­ï¼Œ<code>value</code>å±æ€§æ˜¯å½“å‰æˆå‘˜çš„å€¼ï¼Œ<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéå†æ˜¯å¦ç»“æŸã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿ<code>next</code>æ–¹æ³•è¿”å›å€¼çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var it = makeIterator([&#39;a&#39;, &#39;b&#39;]);

it.next() // { value: &quot;a&quot;, done: false }
it.next() // { value: &quot;b&quot;, done: false }
it.next() // { value: undefined, done: true }

function makeIterator(array) {
  var nextIndex = 0;
  return {
    next: function() {
      return nextIndex &lt; array.length ?
        {value: array[nextIndex++], done: false} :
        {value: undefined, done: true};
    }
  };
}
</code></pre>
<p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ª<code>makeIterator</code>å‡½æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªéå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œä½œç”¨å°±æ˜¯è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚å¯¹æ•°ç»„<code>[&#39;a&#39;, &#39;b&#39;]</code>æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå°±ä¼šè¿”å›è¯¥æ•°ç»„çš„éå†å™¨å¯¹è±¡ï¼ˆå³æŒ‡é’ˆå¯¹è±¡ï¼‰<code>it</code>ã€‚</p>
<p>æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œç”¨æ¥ç§»åŠ¨æŒ‡é’ˆã€‚å¼€å§‹æ—¶ï¼ŒæŒ‡é’ˆæŒ‡å‘æ•°ç»„çš„å¼€å§‹ä½ç½®ã€‚ç„¶åï¼Œæ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼ŒæŒ‡é’ˆå°±ä¼šæŒ‡å‘æ•°ç»„çš„ä¸‹ä¸€ä¸ªæˆå‘˜ã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼ŒæŒ‡å‘<code>a</code>ï¼›ç¬¬äºŒæ¬¡è°ƒç”¨ï¼ŒæŒ‡å‘<code>b</code>ã€‚</p>
<p><code>next</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰æ•°æ®æˆå‘˜çš„ä¿¡æ¯ã€‚è¿™ä¸ªå¯¹è±¡å…·æœ‰<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§ï¼Œ<code>value</code>å±æ€§è¿”å›å½“å‰ä½ç½®çš„æˆå‘˜ï¼Œ<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéå†æ˜¯å¦ç»“æŸï¼Œå³æ˜¯å¦è¿˜æœ‰å¿…è¦å†ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ã€‚</p>
<p>æ€»ä¹‹ï¼Œè°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œå°±å¯ä»¥éå†äº‹å…ˆç»™å®šçš„æ•°æ®ç»“æ„ã€‚</p>
<p>å¯¹äºéå†å™¨å¯¹è±¡æ¥è¯´ï¼Œ<code>done: false</code>å’Œ<code>value: undefined</code>å±æ€§éƒ½æ˜¯å¯ä»¥çœç•¥çš„ï¼Œå› æ­¤ä¸Šé¢çš„<code>makeIterator</code>å‡½æ•°å¯ä»¥ç®€å†™æˆä¸‹é¢çš„å½¢å¼ã€‚</p>
<pre><code class="javascript">function makeIterator(array) {
  var nextIndex = 0;
  return {
    next: function() {
      return nextIndex &lt; array.length ?
        {value: array[nextIndex++]} :
        {done: true};
    }
  };
}
</code></pre>
<p>ç”±äºIteratoråªæ˜¯æŠŠæ¥å£è§„æ ¼åŠ åˆ°æ•°æ®ç»“æ„ä¹‹ä¸Šï¼Œæ‰€ä»¥ï¼Œéå†å™¨ä¸å®ƒæ‰€éå†çš„é‚£ä¸ªæ•°æ®ç»“æ„ï¼Œå®é™…ä¸Šæ˜¯åˆ†å¼€çš„ï¼Œå®Œå…¨å¯ä»¥å†™å‡ºæ²¡æœ‰å¯¹åº”æ•°æ®ç»“æ„çš„éå†å™¨å¯¹è±¡ï¼Œæˆ–è€…è¯´ç”¨éå†å™¨å¯¹è±¡æ¨¡æ‹Ÿå‡ºæ•°æ®ç»“æ„ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ— é™è¿è¡Œçš„éå†å™¨å¯¹è±¡çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var it = idMaker();

it.next().value // &#39;0&#39;
it.next().value // &#39;1&#39;
it.next().value // &#39;2&#39;
// ...

function idMaker() {
  var index = 0;

  return {
    next: function() {
      return {value: index++, done: false};
    }
  };
}
</code></pre>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œéå†å™¨ç”Ÿæˆå‡½æ•°<code>idMaker</code>ï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼ˆå³æŒ‡é’ˆå¯¹è±¡ï¼‰ã€‚ä½†æ˜¯å¹¶æ²¡æœ‰å¯¹åº”çš„æ•°æ®ç»“æ„ï¼Œæˆ–è€…è¯´ï¼Œéå†å™¨å¯¹è±¡è‡ªå·±æè¿°äº†ä¸€ä¸ªæ•°æ®ç»“æ„å‡ºæ¥ã€‚</p>
<p>åœ¨ES6ä¸­ï¼Œæœ‰äº›æ•°æ®ç»“æ„åŸç”Ÿå…·å¤‡Iteratoræ¥å£ï¼ˆæ¯”å¦‚æ•°ç»„ï¼‰ï¼Œå³ä¸ç”¨ä»»ä½•å¤„ç†ï¼Œå°±å¯ä»¥è¢«<code>for...of</code>å¾ªç¯éå†ï¼Œæœ‰äº›å°±ä¸è¡Œï¼ˆæ¯”å¦‚å¯¹è±¡ï¼‰ã€‚åŸå› åœ¨äºï¼Œè¿™äº›æ•°æ®ç»“æ„åŸç”Ÿéƒ¨ç½²äº†<code>Symbol.iterator</code>å±æ€§ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œå¦å¤–ä¸€äº›æ•°æ®ç»“æ„æ²¡æœ‰ã€‚å‡¡æ˜¯éƒ¨ç½²äº†<code>Symbol.iterator</code>å±æ€§çš„æ•°æ®ç»“æ„ï¼Œå°±ç§°ä¸ºéƒ¨ç½²äº†éå†å™¨æ¥å£ã€‚è°ƒç”¨è¿™ä¸ªæ¥å£ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚</p>
<p>å¦‚æœä½¿ç”¨TypeScriptçš„å†™æ³•ï¼Œéå†å™¨æ¥å£ï¼ˆIterableï¼‰ã€æŒ‡é’ˆå¯¹è±¡ï¼ˆIteratorï¼‰å’Œnextæ–¹æ³•è¿”å›å€¼çš„è§„æ ¼å¯ä»¥æè¿°å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">interface Iterable {
  [Symbol.iterator]() : Iterator,
}

interface Iterator {
  next(value?: any) : IterationResult,
}

interface IterationResult {
  value: any,
  done: boolean,
}
</code></pre>
<h2 id="æ•°æ®ç»“æ„çš„é»˜è®¤Iteratoræ¥å£"><a href="#æ•°æ®ç»“æ„çš„é»˜è®¤Iteratoræ¥å£" class="headerlink" title="æ•°æ®ç»“æ„çš„é»˜è®¤Iteratoræ¥å£"></a>æ•°æ®ç»“æ„çš„é»˜è®¤Iteratoræ¥å£</h2><p>Iteratoræ¥å£çš„ç›®çš„ï¼Œå°±æ˜¯ä¸ºæ‰€æœ‰æ•°æ®ç»“æ„ï¼Œæä¾›äº†ä¸€ç§ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ï¼Œå³<code>for...of</code>å¾ªç¯ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ã€‚å½“ä½¿ç”¨<code>for...of</code>å¾ªç¯éå†æŸç§æ•°æ®ç»“æ„æ—¶ï¼Œè¯¥å¾ªç¯ä¼šè‡ªåŠ¨å»å¯»æ‰¾Iteratoræ¥å£ã€‚</p>
<p>ä¸€ç§æ•°æ®ç»“æ„åªè¦éƒ¨ç½²äº†Iteratoræ¥å£ï¼Œæˆ‘ä»¬å°±ç§°è¿™ç§æ•°æ®ç»“æ„æ˜¯â€å¯éå†çš„â€œï¼ˆiterableï¼‰ã€‚</p>
<p>ES6è§„å®šï¼Œé»˜è®¤çš„Iteratoræ¥å£éƒ¨ç½²åœ¨æ•°æ®ç»“æ„çš„<code>Symbol.iterator</code>å±æ€§ï¼Œæˆ–è€…è¯´ï¼Œä¸€ä¸ªæ•°æ®ç»“æ„åªè¦å…·æœ‰<code>Symbol.iterator</code>å±æ€§ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯â€œå¯éå†çš„â€ï¼ˆiterableï¼‰ã€‚<code>Symbol.iterator</code>å±æ€§æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±æ˜¯å½“å‰æ•°æ®ç»“æ„é»˜è®¤çš„éå†å™¨ç”Ÿæˆå‡½æ•°ã€‚æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªéå†å™¨ã€‚è‡³äºå±æ€§å<code>Symbol.iterator</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿”å›<code>Symbol</code>å¯¹è±¡çš„<code>iterator</code>å±æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªé¢„å®šä¹‰å¥½çš„ã€ç±»å‹ä¸ºSymbolçš„ç‰¹æ®Šå€¼ï¼Œæ‰€ä»¥è¦æ”¾åœ¨æ–¹æ‹¬å·å†…ã€‚ï¼ˆå‚è§Symbolä¸€ç« ï¼‰ã€‚</p>
<pre><code class="javascript">const obj = {
  [Symbol.iterator] : function () {
    return {
      next: function () {
        return {
          value: 1,
          done: true
        };
      }
    };
  }
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡<code>obj</code>æ˜¯å¯éå†çš„ï¼ˆiterableï¼‰ï¼Œå› ä¸ºå…·æœ‰<code>Symbol.iterator</code>å±æ€§ã€‚æ‰§è¡Œè¿™ä¸ªå±æ€§ï¼Œä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„æ ¹æœ¬ç‰¹å¾å°±æ˜¯å…·æœ‰<code>next</code>æ–¹æ³•ã€‚æ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªä»£è¡¨å½“å‰æˆå‘˜çš„ä¿¡æ¯å¯¹è±¡ï¼Œå…·æœ‰<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§ã€‚</p>
<p>åœ¨ES6ä¸­ï¼Œæœ‰ä¸‰ç±»æ•°æ®ç»“æ„åŸç”Ÿå…·å¤‡Iteratoræ¥å£ï¼šæ•°ç»„ã€æŸäº›ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€Setå’ŒMapç»“æ„ã€‚</p>
<pre><code class="javascript">let arr = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];
let iter = arr[Symbol.iterator]();

iter.next() // { value: &#39;a&#39;, done: false }
iter.next() // { value: &#39;b&#39;, done: false }
iter.next() // { value: &#39;c&#39;, done: false }
iter.next() // { value: undefined, done: true }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>arr</code>æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŸç”Ÿå°±å…·æœ‰éå†å™¨æ¥å£ï¼Œéƒ¨ç½²åœ¨<code>arr</code>çš„<code>Symbol.iterator</code>å±æ€§ä¸Šé¢ã€‚æ‰€ä»¥ï¼Œè°ƒç”¨è¿™ä¸ªå±æ€§ï¼Œå°±å¾—åˆ°éå†å™¨å¯¹è±¡ã€‚</p>
<p>ä¸Šé¢æåˆ°ï¼ŒåŸç”Ÿå°±éƒ¨ç½²Iteratoræ¥å£çš„æ•°æ®ç»“æ„æœ‰ä¸‰ç±»ï¼Œå¯¹äºè¿™ä¸‰ç±»æ•°æ®ç»“æ„ï¼Œä¸ç”¨è‡ªå·±å†™éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œ<code>for...of</code>å¾ªç¯ä¼šè‡ªåŠ¨éå†å®ƒä»¬ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå…¶ä»–æ•°æ®ç»“æ„ï¼ˆä¸»è¦æ˜¯å¯¹è±¡ï¼‰çš„Iteratoræ¥å£ï¼Œéƒ½éœ€è¦è‡ªå·±åœ¨<code>Symbol.iterator</code>å±æ€§ä¸Šé¢éƒ¨ç½²ï¼Œè¿™æ ·æ‰ä¼šè¢«<code>for...of</code>å¾ªç¯éå†ã€‚</p>
<p>å¯¹è±¡ï¼ˆObjectï¼‰ä¹‹æ‰€ä»¥æ²¡æœ‰é»˜è®¤éƒ¨ç½²Iteratoræ¥å£ï¼Œæ˜¯å› ä¸ºå¯¹è±¡çš„å“ªä¸ªå±æ€§å…ˆéå†ï¼Œå“ªä¸ªå±æ€§åéå†æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨æŒ‡å®šã€‚æœ¬è´¨ä¸Šï¼Œéå†å™¨æ˜¯ä¸€ç§çº¿æ€§å¤„ç†ï¼Œå¯¹äºä»»ä½•éçº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œéƒ¨ç½²éå†å™¨æ¥å£ï¼Œå°±ç­‰äºéƒ¨ç½²ä¸€ç§çº¿æ€§è½¬æ¢ã€‚ä¸è¿‡ï¼Œä¸¥æ ¼åœ°è¯´ï¼Œå¯¹è±¡éƒ¨ç½²éå†å™¨æ¥å£å¹¶ä¸æ˜¯å¾ˆå¿…è¦ï¼Œå› ä¸ºè¿™æ—¶å¯¹è±¡å®é™…ä¸Šè¢«å½“ä½œMapç»“æ„ä½¿ç”¨ï¼ŒES5æ²¡æœ‰Mapç»“æ„ï¼Œè€ŒES6åŸç”Ÿæä¾›äº†ã€‚</p>
<p>ä¸€ä¸ªå¯¹è±¡å¦‚æœè¦æœ‰å¯è¢«<code>for...of</code>å¾ªç¯è°ƒç”¨çš„Iteratoræ¥å£ï¼Œå°±å¿…é¡»åœ¨<code>Symbol.iterator</code>çš„å±æ€§ä¸Šéƒ¨ç½²éå†å™¨ç”Ÿæˆæ–¹æ³•ï¼ˆåŸå‹é“¾ä¸Šçš„å¯¹è±¡å…·æœ‰è¯¥æ–¹æ³•ä¹Ÿå¯ï¼‰ã€‚</p>
<pre><code class="javascript">class RangeIterator {
  constructor(start, stop) {
    this.value = start;
    this.stop = stop;
  }

  [Symbol.iterator]() { return this; }

  next() {
    var value = this.value;
    if (value &lt; this.stop) {
      this.value++;
      return {done: false, value: value};
    } else {
      return {done: true, value: undefined};
    }
  }
}

function range(start, stop) {
  return new RangeIterator(start, stop);
}

for (var value of range(0, 3)) {
  console.log(value);
}
</code></pre>
<p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªç±»éƒ¨ç½²Iteratoræ¥å£çš„å†™æ³•ã€‚<code>Symbol.iterator</code>å±æ€§å¯¹åº”ä¸€ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œåè¿”å›å½“å‰å¯¹è±¡çš„éå†å™¨å¯¹è±¡ã€‚</p>
<p>ä¸‹é¢æ˜¯é€šè¿‡éå†å™¨å®ç°æŒ‡é’ˆç»“æ„çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">function Obj(value) {
  this.value = value;
  this.next = null;
}

Obj.prototype[Symbol.iterator] = function() {
  var iterator = {
    next: next
  };

  var current = this;

  function next() {
    if (current) {
      var value = current.value;
      current = current.next;
      return {
        done: false,
        value: value
      };
    } else {
      return {
        done: true
      };
    }
  }
  return iterator;
}

var one = new Obj(1);
var two = new Obj(2);
var three = new Obj(3);

one.next = two;
two.next = three;

for (var i of one){
  console.log(i);
}
// 1
// 2
// 3
</code></pre>
<p>ä¸Šé¢ä»£ç é¦–å…ˆåœ¨æ„é€ å‡½æ•°çš„åŸå‹é“¾ä¸Šéƒ¨ç½²<code>Symbol.iterator</code>æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ä¼šè¿”å›éå†å™¨å¯¹è±¡<code>iterator</code>ï¼Œè°ƒç”¨è¯¥å¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œåœ¨è¿”å›ä¸€ä¸ªå€¼çš„åŒæ—¶ï¼Œè‡ªåŠ¨å°†å†…éƒ¨æŒ‡é’ˆç§»åˆ°ä¸‹ä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¸ºå¯¹è±¡æ·»åŠ Iteratoræ¥å£çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">let obj = {
  data: [ &#39;hello&#39;, &#39;world&#39; ],
  [Symbol.iterator]() {
    const self = this;
    let index = 0;
    return {
      next() {
        if (index &lt; self.data.length) {
          return {
            value: self.data[index++],
            done: false
          };
        } else {
          return { value: undefined, done: true };
        }
      }
    };
  }
};
</code></pre>
<p>å¯¹äºç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆå­˜åœ¨æ•°å€¼é”®åå’Œlengthå±æ€§ï¼‰ï¼Œéƒ¨ç½²Iteratoræ¥å£ï¼Œæœ‰ä¸€ä¸ªç®€ä¾¿æ–¹æ³•ï¼Œå°±æ˜¯<code>Symbol.iterator</code>æ–¹æ³•ç›´æ¥å¼•ç”¨æ•°ç»„çš„Iteratoræ¥å£ã€‚</p>
<pre><code class="javascript">NodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];
// æˆ–è€…
NodeList.prototype[Symbol.iterator] = [][Symbol.iterator];

[...document.querySelectorAll(&#39;div&#39;)] // å¯ä»¥æ‰§è¡Œäº†
</code></pre>
<p>ä¸‹é¢æ˜¯ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡è°ƒç”¨æ•°ç»„çš„<code>Symbol.iterator</code>æ–¹æ³•çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">let iterable = {
  0: &#39;a&#39;,
  1: &#39;b&#39;,
  2: &#39;c&#39;,
  length: 3,
  [Symbol.iterator]: Array.prototype[Symbol.iterator]
};
for (let item of iterable) {
  console.log(item); // &#39;a&#39;, &#39;b&#39;, &#39;c&#39;
}
</code></pre>
<p>æ³¨æ„ï¼Œæ™®é€šå¯¹è±¡éƒ¨ç½²æ•°ç»„çš„<code>Symbol.iterator</code>æ–¹æ³•ï¼Œå¹¶æ— æ•ˆæœã€‚</p>
<pre><code class="javascript">let iterable = {
  a: &#39;a&#39;,
  b: &#39;b&#39;,
  c: &#39;c&#39;,
  length: 3,
  [Symbol.iterator]: Array.prototype[Symbol.iterator]
};
for (let item of iterable) {
  console.log(item); // undefined, undefined, undefined
}
</code></pre>
<p>å¦‚æœ<code>Symbol.iterator</code>æ–¹æ³•å¯¹åº”çš„ä¸æ˜¯éå†å™¨ç”Ÿæˆå‡½æ•°ï¼ˆå³ä¼šè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼‰ï¼Œè§£é‡Šå¼•æ“å°†ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">var obj = {};

obj[Symbol.iterator] = () =&gt; 1;

[...obj] // TypeError: [] is not a function
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡objçš„Symbol.iteratoræ–¹æ³•å¯¹åº”çš„ä¸æ˜¯éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œå› æ­¤æŠ¥é”™ã€‚</p>
<p>æœ‰äº†éå†å™¨æ¥å£ï¼Œæ•°æ®ç»“æ„å°±å¯ä»¥ç”¨<code>for...of</code>å¾ªç¯éå†ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>while</code>å¾ªç¯éå†ã€‚</p>
<pre><code class="javascript">var $iterator = ITERABLE[Symbol.iterator]();
var $result = $iterator.next();
while (!$result.done) {
  var x = $result.value;
  // ...
  $result = $iterator.next();
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>ITERABLE</code>ä»£è¡¨æŸç§å¯éå†çš„æ•°æ®ç»“æ„ï¼Œ<code>$iterator</code>æ˜¯å®ƒçš„éå†å™¨å¯¹è±¡ã€‚éå†å™¨å¯¹è±¡æ¯æ¬¡ç§»åŠ¨æŒ‡é’ˆï¼ˆ<code>next</code>æ–¹æ³•ï¼‰ï¼Œéƒ½æ£€æŸ¥ä¸€ä¸‹è¿”å›å€¼çš„<code>done</code>å±æ€§ï¼Œå¦‚æœéå†è¿˜æ²¡ç»“æŸï¼Œå°±ç§»åŠ¨éå†å™¨å¯¹è±¡çš„æŒ‡é’ˆåˆ°ä¸‹ä¸€æ­¥ï¼ˆ<code>next</code>æ–¹æ³•ï¼‰ï¼Œä¸æ–­å¾ªç¯ã€‚</p>
<h2 id="è°ƒç”¨Iteratoræ¥å£çš„åœºåˆ"><a href="#è°ƒç”¨Iteratoræ¥å£çš„åœºåˆ" class="headerlink" title="è°ƒç”¨Iteratoræ¥å£çš„åœºåˆ"></a>è°ƒç”¨Iteratoræ¥å£çš„åœºåˆ</h2><p>æœ‰ä¸€äº›åœºåˆä¼šé»˜è®¤è°ƒç”¨Iteratoræ¥å£ï¼ˆå³<code>Symbol.iterator</code>æ–¹æ³•ï¼‰ï¼Œé™¤äº†ä¸‹æ–‡ä¼šä»‹ç»çš„<code>for...of</code>å¾ªç¯ï¼Œè¿˜æœ‰å‡ ä¸ªåˆ«çš„åœºåˆã€‚</p>
<p><strong>ï¼ˆ1ï¼‰è§£æ„èµ‹å€¼</strong></p>
<p>å¯¹æ•°ç»„å’ŒSetç»“æ„è¿›è¡Œè§£æ„èµ‹å€¼æ—¶ï¼Œä¼šé»˜è®¤è°ƒç”¨<code>Symbol.iterator</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">let set = new Set().add(&#39;a&#39;).add(&#39;b&#39;).add(&#39;c&#39;);

let [x,y] = set;
// x=&#39;a&#39;; y=&#39;b&#39;

let [first, ...rest] = set;
// first=&#39;a&#39;; rest=[&#39;b&#39;,&#39;c&#39;];
</code></pre>
<p><strong>ï¼ˆ2ï¼‰æ‰©å±•è¿ç®—ç¬¦</strong></p>
<p>æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰ä¹Ÿä¼šè°ƒç”¨é»˜è®¤çš„iteratoræ¥å£ã€‚</p>
<pre><code class="javascript">// ä¾‹ä¸€
var str = &#39;hello&#39;;
[...str] //  [&#39;h&#39;,&#39;e&#39;,&#39;l&#39;,&#39;l&#39;,&#39;o&#39;]

// ä¾‹äºŒ
let arr = [&#39;b&#39;, &#39;c&#39;];
[&#39;a&#39;, ...arr, &#39;d&#39;]
// [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç çš„æ‰©å±•è¿ç®—ç¬¦å†…éƒ¨å°±è°ƒç”¨Iteratoræ¥å£ã€‚</p>
<p>å®é™…ä¸Šï¼Œè¿™æä¾›äº†ä¸€ç§ç®€ä¾¿æœºåˆ¶ï¼Œå¯ä»¥å°†ä»»ä½•éƒ¨ç½²äº†Iteratoræ¥å£çš„æ•°æ®ç»“æ„ï¼Œè½¬ä¸ºæ•°ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æŸä¸ªæ•°æ®ç»“æ„éƒ¨ç½²äº†Iteratoræ¥å£ï¼Œå°±å¯ä»¥å¯¹å®ƒä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œå°†å…¶è½¬ä¸ºæ•°ç»„ã€‚</p>
<pre><code class="javascript">let arr = [...iterable];
</code></pre>
<p><strong>ï¼ˆ3ï¼‰yield* </strong></p>
<p>yield*åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå¯éå†çš„ç»“æ„ï¼Œå®ƒä¼šè°ƒç”¨è¯¥ç»“æ„çš„éå†å™¨æ¥å£ã€‚</p>
<pre><code class="javascript">let generator = function* () {
  yield 1;
  yield* [2,3,4];
  yield 5;
};

var iterator = generator();

iterator.next() // { value: 1, done: false }
iterator.next() // { value: 2, done: false }
iterator.next() // { value: 3, done: false }
iterator.next() // { value: 4, done: false }
iterator.next() // { value: 5, done: false }
iterator.next() // { value: undefined, done: true }
</code></pre>
<p><strong>ï¼ˆ4ï¼‰å…¶ä»–åœºåˆ</strong></p>
<p>ç”±äºæ•°ç»„çš„éå†ä¼šè°ƒç”¨éå†å™¨æ¥å£ï¼Œæ‰€ä»¥ä»»ä½•æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°çš„åœºåˆï¼Œå…¶å®éƒ½è°ƒç”¨äº†éå†å™¨æ¥å£ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ã€‚</p>
<ul>
<li>forâ€¦of</li>
<li>Array.from()</li>
<li>Map(), Set(), WeakMap(), WeakSet()ï¼ˆæ¯”å¦‚<code>new Map([[&#39;a&#39;,1],[&#39;b&#39;,2]])</code>ï¼‰</li>
<li>Promise.all()</li>
<li>Promise.race()</li>
</ul>
<h2 id="å­—ç¬¦ä¸²çš„Iteratoræ¥å£"><a href="#å­—ç¬¦ä¸²çš„Iteratoræ¥å£" class="headerlink" title="å­—ç¬¦ä¸²çš„Iteratoræ¥å£"></a>å­—ç¬¦ä¸²çš„Iteratoræ¥å£</h2><p>å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œä¹ŸåŸç”Ÿå…·æœ‰Iteratoræ¥å£ã€‚</p>
<pre><code class="javascript">var someString = &quot;hi&quot;;
typeof someString[Symbol.iterator]
// &quot;function&quot;

var iterator = someString[Symbol.iterator]();

iterator.next()  // { value: &quot;h&quot;, done: false }
iterator.next()  // { value: &quot;i&quot;, done: false }
iterator.next()  // { value: undefined, done: true }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨<code>Symbol.iterator</code>æ–¹æ³•è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œåœ¨è¿™ä¸ªéå†å™¨ä¸Šå¯ä»¥è°ƒç”¨nextæ–¹æ³•ï¼Œå®ç°å¯¹äºå­—ç¬¦ä¸²çš„éå†ã€‚</p>
<p>å¯ä»¥è¦†ç›–åŸç”Ÿçš„<code>Symbol.iterator</code>æ–¹æ³•ï¼Œè¾¾åˆ°ä¿®æ”¹éå†å™¨è¡Œä¸ºçš„ç›®çš„ã€‚</p>
<pre><code class="javascript">var str = new String(&quot;hi&quot;);

[...str] // [&quot;h&quot;, &quot;i&quot;]

str[Symbol.iterator] = function() {
  return {
    next: function() {
      if (this._first) {
        this._first = false;
        return { value: &quot;bye&quot;, done: false };
      } else {
        return { done: true };
      }
    },
    _first: true
  };
};

[...str] // [&quot;bye&quot;]
str // &quot;hi&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²strçš„<code>Symbol.iterator</code>æ–¹æ³•è¢«ä¿®æ”¹äº†ï¼Œæ‰€ä»¥æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰è¿”å›çš„å€¼å˜æˆäº†<code>bye</code>ï¼Œè€Œå­—ç¬¦ä¸²æœ¬èº«è¿˜æ˜¯<code>hi</code>ã€‚</p>
<h2 id="Iteratoræ¥å£ä¸Generatorå‡½æ•°"><a href="#Iteratoræ¥å£ä¸Generatorå‡½æ•°" class="headerlink" title="Iteratoræ¥å£ä¸Generatorå‡½æ•°"></a>Iteratoræ¥å£ä¸Generatorå‡½æ•°</h2><p><code>Symbol.iterator</code>æ–¹æ³•çš„æœ€ç®€å•å®ç°ï¼Œè¿˜æ˜¯ä½¿ç”¨ä¸‹ä¸€ç« è¦ä»‹ç»çš„Generatorå‡½æ•°ã€‚</p>
<pre><code class="javascript">var myIterable = {};

myIterable[Symbol.iterator] = function* () {
  yield 1;
  yield 2;
  yield 3;
};
[...myIterable] // [1, 2, 3]

// æˆ–è€…é‡‡ç”¨ä¸‹é¢çš„ç®€æ´å†™æ³•

let obj = {
  * [Symbol.iterator]() {
    yield &#39;hello&#39;;
    yield &#39;world&#39;;
  }
};

for (let x of obj) {
  console.log(x);
}
// hello
// world
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Symbol.iterator</code>æ–¹æ³•å‡ ä¹ä¸ç”¨éƒ¨ç½²ä»»ä½•ä»£ç ï¼Œåªè¦ç”¨yieldå‘½ä»¤ç»™å‡ºæ¯ä¸€æ­¥çš„è¿”å›å€¼å³å¯ã€‚</p>
<h2 id="éå†å™¨å¯¹è±¡çš„return-ï¼Œthrow"><a href="#éå†å™¨å¯¹è±¡çš„return-ï¼Œthrow" class="headerlink" title="éå†å™¨å¯¹è±¡çš„return()ï¼Œthrow()"></a>éå†å™¨å¯¹è±¡çš„return()ï¼Œthrow()</h2><p>éå†å™¨å¯¹è±¡é™¤äº†å…·æœ‰<code>next</code>æ–¹æ³•ï¼Œè¿˜å¯ä»¥å…·æœ‰<code>return</code>æ–¹æ³•å’Œ<code>throw</code>æ–¹æ³•ã€‚å¦‚æœä½ è‡ªå·±å†™éå†å™¨å¯¹è±¡ç”Ÿæˆå‡½æ•°ï¼Œé‚£ä¹ˆ<code>next</code>æ–¹æ³•æ˜¯å¿…é¡»éƒ¨ç½²çš„ï¼Œ<code>return</code>æ–¹æ³•å’Œ<code>throw</code>æ–¹æ³•æ˜¯å¦éƒ¨ç½²æ˜¯å¯é€‰çš„ã€‚</p>
<p><code>return</code>æ–¹æ³•çš„ä½¿ç”¨åœºåˆæ˜¯ï¼Œå¦‚æœ<code>for...of</code>å¾ªç¯æå‰é€€å‡ºï¼ˆé€šå¸¸æ˜¯å› ä¸ºå‡ºé”™ï¼Œæˆ–è€…æœ‰<code>break</code>è¯­å¥æˆ–<code>continue</code>è¯­å¥ï¼‰ï¼Œå°±ä¼šè°ƒç”¨<code>return</code>æ–¹æ³•ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡åœ¨å®Œæˆéå†å‰ï¼Œéœ€è¦æ¸…ç†æˆ–é‡Šæ”¾èµ„æºï¼Œå°±å¯ä»¥éƒ¨ç½²<code>return</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">function readLinesSync(file) {
  return {
    next() {
      if (file.isAtEndOfFile()) {
        file.close();
        return { done: true };
      }
    },
    return() {
      file.close();
      return { done: true };
    },
  };
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>readLinesSync</code>æ¥å—ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå…¶ä¸­é™¤äº†<code>next</code>æ–¹æ³•ï¼Œè¿˜éƒ¨ç½²äº†<code>return</code>æ–¹æ³•ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬è®©æ–‡ä»¶çš„éå†æå‰è¿”å›ï¼Œè¿™æ ·å°±ä¼šè§¦å‘æ‰§è¡Œ<code>return</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">for (let line of readLinesSync(fileName)) {
  console.log(line);
  break;
}
</code></pre>
<p>æ³¨æ„ï¼Œ<code>return</code>æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ˜¯Generatorè§„æ ¼å†³å®šçš„ã€‚</p>
<p><code>throw</code>æ–¹æ³•ä¸»è¦æ˜¯é…åˆGeneratorå‡½æ•°ä½¿ç”¨ï¼Œä¸€èˆ¬çš„éå†å™¨å¯¹è±¡ç”¨ä¸åˆ°è¿™ä¸ªæ–¹æ³•ã€‚è¯·å‚é˜…ã€ŠGeneratorå‡½æ•°ã€‹ä¸€ç« ã€‚</p>
<h2 id="forâ€¦ofå¾ªç¯"><a href="#forâ€¦ofå¾ªç¯" class="headerlink" title="forâ€¦ofå¾ªç¯"></a>forâ€¦ofå¾ªç¯</h2><p>ES6 å€Ÿé‰´ C++ã€Javaã€C# å’Œ Python è¯­è¨€ï¼Œå¼•å…¥äº†<code>for...of</code>å¾ªç¯ï¼Œä½œä¸ºéå†æ‰€æœ‰æ•°æ®ç»“æ„çš„ç»Ÿä¸€çš„æ–¹æ³•ã€‚</p>
<p>ä¸€ä¸ªæ•°æ®ç»“æ„åªè¦éƒ¨ç½²äº†<code>Symbol.iterator</code>å±æ€§ï¼Œå°±è¢«è§†ä¸ºå…·æœ‰iteratoræ¥å£ï¼Œå°±å¯ä»¥ç”¨<code>for...of</code>å¾ªç¯éå†å®ƒçš„æˆå‘˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>for...of</code>å¾ªç¯å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„<code>Symbol.iterator</code>æ–¹æ³•ã€‚</p>
<p><code>for...of</code>å¾ªç¯å¯ä»¥ä½¿ç”¨çš„èŒƒå›´åŒ…æ‹¬æ•°ç»„ã€Set å’Œ Map ç»“æ„ã€æŸäº›ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆæ¯”å¦‚<code>arguments</code>å¯¹è±¡ã€DOM NodeList å¯¹è±¡ï¼‰ã€åæ–‡çš„ Generator å¯¹è±¡ï¼Œä»¥åŠå­—ç¬¦ä¸²ã€‚</p>
<h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><p>æ•°ç»„åŸç”Ÿå…·å¤‡<code>iterator</code>æ¥å£ï¼ˆå³é»˜è®¤éƒ¨ç½²äº†<code>Symbol.iterator</code>å±æ€§ï¼‰ï¼Œ<code>for...of</code>å¾ªç¯æœ¬è´¨ä¸Šå°±æ˜¯è°ƒç”¨è¿™ä¸ªæ¥å£äº§ç”Ÿçš„éå†å™¨ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç è¯æ˜ã€‚</p>
<pre><code class="javascript">const arr = [&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;];

for(let v of arr) {
  console.log(v); // red green blue
}

const obj = {};
obj[Symbol.iterator] = arr[Symbol.iterator].bind(arr);

for(let v of obj) {
  console.log(v); // red green blue
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç©ºå¯¹è±¡<code>obj</code>éƒ¨ç½²äº†æ•°ç»„<code>arr</code>çš„<code>Symbol.iterator</code>å±æ€§ï¼Œç»“æœ<code>obj</code>çš„<code>for...of</code>å¾ªç¯ï¼Œäº§ç”Ÿäº†ä¸<code>arr</code>å®Œå…¨ä¸€æ ·çš„ç»“æœã€‚</p>
<p><code>for...of</code>å¾ªç¯å¯ä»¥ä»£æ›¿æ•°ç»„å®ä¾‹çš„<code>forEach</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">const arr = [&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;];

arr.forEach(function (element, index) {
  console.log(element); // red green blue
  console.log(index);   // 0 1 2
});
</code></pre>
<p>JavaScriptåŸæœ‰çš„<code>for...in</code>å¾ªç¯ï¼Œåªèƒ½è·å¾—å¯¹è±¡çš„é”®åï¼Œä¸èƒ½ç›´æ¥è·å–é”®å€¼ã€‚ES6æä¾›<code>for...of</code>å¾ªç¯ï¼Œå…è®¸éå†è·å¾—é”®å€¼ã€‚</p>
<pre><code class="javascript">var arr = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;];

for (let a in arr) {
  console.log(a); // 0 1 2 3
}

for (let a of arr) {
  console.log(a); // a b c d
}
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨æ˜ï¼Œ<code>for...in</code>å¾ªç¯è¯»å–é”®åï¼Œ<code>for...of</code>å¾ªç¯è¯»å–é”®å€¼ã€‚å¦‚æœè¦é€šè¿‡<code>for...of</code>å¾ªç¯ï¼Œè·å–æ•°ç»„çš„ç´¢å¼•ï¼Œå¯ä»¥å€ŸåŠ©æ•°ç»„å®ä¾‹çš„<code>entries</code>æ–¹æ³•å’Œ<code>keys</code>æ–¹æ³•ï¼Œå‚è§ã€Šæ•°ç»„çš„æ‰©å±•ã€‹ç« èŠ‚ã€‚</p>
<p><code>for...of</code>å¾ªç¯è°ƒç”¨éå†å™¨æ¥å£ï¼Œæ•°ç»„çš„éå†å™¨æ¥å£åªè¿”å›å…·æœ‰æ•°å­—ç´¢å¼•çš„å±æ€§ã€‚è¿™ä¸€ç‚¹è·Ÿ<code>for...in</code>å¾ªç¯ä¹Ÿä¸ä¸€æ ·ã€‚</p>
<pre><code class="javascript">let arr = [3, 5, 7];
arr.foo = &#39;hello&#39;;

for (let i in arr) {
  console.log(i); // &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;foo&quot;
}

for (let i of arr) {
  console.log(i); //  &quot;3&quot;, &quot;5&quot;, &quot;7&quot;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>for...of</code>å¾ªç¯ä¸ä¼šè¿”å›æ•°ç»„<code>arr</code>çš„<code>foo</code>å±æ€§ã€‚</p>
<h3 id="Setå’ŒMapç»“æ„"><a href="#Setå’ŒMapç»“æ„" class="headerlink" title="Setå’ŒMapç»“æ„"></a>Setå’ŒMapç»“æ„</h3><p>Setå’ŒMapç»“æ„ä¹ŸåŸç”Ÿå…·æœ‰Iteratoræ¥å£ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>for...of</code>å¾ªç¯ã€‚</p>
<pre><code class="javascript">var engines = new Set([&quot;Gecko&quot;, &quot;Trident&quot;, &quot;Webkit&quot;, &quot;Webkit&quot;]);
for (var e of engines) {
  console.log(e);
}
// Gecko
// Trident
// Webkit

var es6 = new Map();
es6.set(&quot;edition&quot;, 6);
es6.set(&quot;committee&quot;, &quot;TC39&quot;);
es6.set(&quot;standard&quot;, &quot;ECMA-262&quot;);
for (var [name, value] of es6) {
  console.log(name + &quot;: &quot; + value);
}
// edition: 6
// committee: TC39
// standard: ECMA-262
</code></pre>
<p>ä¸Šé¢ä»£ç æ¼”ç¤ºäº†å¦‚ä½•éå†Setç»“æ„å’ŒMapç»“æ„ã€‚å€¼å¾—æ³¨æ„çš„åœ°æ–¹æœ‰ä¸¤ä¸ªï¼Œé¦–å…ˆï¼Œéå†çš„é¡ºåºæ˜¯æŒ‰ç…§å„ä¸ªæˆå‘˜è¢«æ·»åŠ è¿›æ•°æ®ç»“æ„çš„é¡ºåºã€‚å…¶æ¬¡ï¼ŒSetç»“æ„éå†æ—¶ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå€¼ï¼Œè€ŒMapç»“æ„éå†æ—¶ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„ä¸¤ä¸ªæˆå‘˜åˆ†åˆ«ä¸ºå½“å‰Mapæˆå‘˜çš„é”®åå’Œé”®å€¼ã€‚</p>
<pre><code class="javascript">let map = new Map().set(&#39;a&#39;, 1).set(&#39;b&#39;, 2);
for (let pair of map) {
  console.log(pair);
}
// [&#39;a&#39;, 1]
// [&#39;b&#39;, 2]

for (let [key, value] of map) {
  console.log(key + &#39; : &#39; + value);
}
// a : 1
// b : 2
</code></pre>
<h3 id="è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„"><a href="#è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„" class="headerlink" title="è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„"></a>è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„</h3><p>æœ‰äº›æ•°æ®ç»“æ„æ˜¯åœ¨ç°æœ‰æ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šï¼Œè®¡ç®—ç”Ÿæˆçš„ã€‚æ¯”å¦‚ï¼ŒES6çš„æ•°ç»„ã€Setã€Mapéƒ½éƒ¨ç½²äº†ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨åéƒ½è¿”å›éå†å™¨å¯¹è±¡ã€‚</p>
<ul>
<li><code>entries()</code> è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†<code>[é”®å, é”®å€¼]</code>ç»„æˆçš„æ•°ç»„ã€‚å¯¹äºæ•°ç»„ï¼Œé”®åå°±æ˜¯ç´¢å¼•å€¼ï¼›å¯¹äºSetï¼Œé”®åä¸é”®å€¼ç›¸åŒã€‚Mapç»“æ„çš„iteratoræ¥å£ï¼Œé»˜è®¤å°±æ˜¯è°ƒç”¨entriesæ–¹æ³•ã€‚</li>
<li><code>keys()</code> è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†æ‰€æœ‰çš„é”®åã€‚</li>
<li><code>values()</code> è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œç”¨æ¥éå†æ‰€æœ‰çš„é”®å€¼ã€‚</li>
</ul>
<p>è¿™ä¸‰ä¸ªæ–¹æ³•è°ƒç”¨åç”Ÿæˆçš„éå†å™¨å¯¹è±¡ï¼Œæ‰€éå†çš„éƒ½æ˜¯è®¡ç®—ç”Ÿæˆçš„æ•°æ®ç»“æ„ã€‚</p>
<pre><code class="javascript">let arr = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];
for (let pair of arr.entries()) {
  console.log(pair);
}
// [0, &#39;a&#39;]
// [1, &#39;b&#39;]
// [2, &#39;c&#39;]
</code></pre>
<h3 id="ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡"><a href="#ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡" class="headerlink" title="ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡"></a>ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡</h3><p>ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡åŒ…æ‹¬å¥½å‡ ç±»ã€‚ä¸‹é¢æ˜¯<code>for...of</code>å¾ªç¯ç”¨äºå­—ç¬¦ä¸²ã€DOM NodeListå¯¹è±¡ã€argumentså¯¹è±¡çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">// å­—ç¬¦ä¸²
let str = &quot;hello&quot;;

for (let s of str) {
  console.log(s); // h e l l o
}

// DOM NodeListå¯¹è±¡
let paras = document.querySelectorAll(&quot;p&quot;);

for (let p of paras) {
  p.classList.add(&quot;test&quot;);
}

// argumentså¯¹è±¡
function printArgs() {
  for (let x of arguments) {
    console.log(x);
  }
}
printArgs(&#39;a&#39;, &#39;b&#39;);
// &#39;a&#39;
// &#39;b&#39;
</code></pre>
<p>å¯¹äºå­—ç¬¦ä¸²æ¥è¯´ï¼Œ<code>for...of</code>å¾ªç¯è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯ä¼šæ­£ç¡®è¯†åˆ«32ä½UTF-16å­—ç¬¦ã€‚</p>
<pre><code class="javascript">for (let x of &#39;a\uD83D\uDC0A&#39;) {
  console.log(x);
}
// &#39;a&#39;
// &#39;\uD83D\uDC0A&#39;
</code></pre>
<p>å¹¶ä¸æ˜¯æ‰€æœ‰ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡éƒ½å…·æœ‰iteratoræ¥å£ï¼Œä¸€ä¸ªç®€ä¾¿çš„è§£å†³æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨Array.fromæ–¹æ³•å°†å…¶è½¬ä¸ºæ•°ç»„ã€‚</p>
<pre><code class="javascript">let arrayLike = { length: 2, 0: &#39;a&#39;, 1: &#39;b&#39; };

// æŠ¥é”™
for (let x of arrayLike) {
  console.log(x);
}

// æ­£ç¡®
for (let x of Array.from(arrayLike)) {
  console.log(x);
}
</code></pre>
<h3 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h3><p>å¯¹äºæ™®é€šçš„å¯¹è±¡ï¼Œ<code>for...of</code>ç»“æ„ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œä¼šæŠ¥é”™ï¼Œå¿…é¡»éƒ¨ç½²äº†iteratoræ¥å£åæ‰èƒ½ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œè¿™æ ·æƒ…å†µä¸‹ï¼Œ<code>for...in</code>å¾ªç¯ä¾ç„¶å¯ä»¥ç”¨æ¥éå†é”®åã€‚</p>
<pre><code class="javascript">var es6 = {
  edition: 6,
  committee: &quot;TC39&quot;,
  standard: &quot;ECMA-262&quot;
};

for (let e in es6) {
  console.log(e);
}
// edition
// committee
// standard

for (let e of es6) {
  console.log(e);
}
// TypeError: es6 is not iterable
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¯¹äºæ™®é€šçš„å¯¹è±¡ï¼Œ<code>for...in</code>å¾ªç¯å¯ä»¥éå†é”®åï¼Œ<code>for...of</code>å¾ªç¯ä¼šæŠ¥é”™ã€‚</p>
<p>ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ï¼Œä½¿ç”¨<code>Object.keys</code>æ–¹æ³•å°†å¯¹è±¡çš„é”®åç”Ÿæˆä¸€ä¸ªæ•°ç»„ï¼Œç„¶åéå†è¿™ä¸ªæ•°ç»„ã€‚</p>
<pre><code class="javascript">for (var key of Object.keys(someObject)) {
  console.log(key + &quot;: &quot; + someObject[key]);
}
</code></pre>
<p>åœ¨å¯¹è±¡ä¸Šéƒ¨ç½²iteratoræ¥å£çš„ä»£ç ï¼Œå‚è§æœ¬ç« å‰é¢éƒ¨åˆ†ã€‚ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹æ³•æ˜¯å°†æ•°ç»„çš„<code>Symbol.iterator</code>å±æ€§ï¼Œç›´æ¥èµ‹å€¼ç»™å…¶ä»–å¯¹è±¡çš„<code>Symbol.iterator</code>å±æ€§ã€‚æ¯”å¦‚ï¼Œæƒ³è¦è®©<code>for...of</code>ç¯éå†jQueryå¯¹è±¡ï¼Œåªè¦åŠ ä¸Šä¸‹é¢è¿™ä¸€è¡Œå°±å¯ä»¥äº†ã€‚</p>
<pre><code class="javascript">jQuery.prototype[Symbol.iterator] =
  Array.prototype[Symbol.iterator];
</code></pre>
<p>å¦ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨Generatorå‡½æ•°å°†å¯¹è±¡é‡æ–°åŒ…è£…ä¸€ä¸‹ã€‚</p>
<pre><code class="javascript">function* entries(obj) {
  for (let key of Object.keys(obj)) {
    yield [key, obj[key]];
  }
}

for (let [key, value] of entries(obj)) {
  console.log(key, &quot;-&gt;&quot;, value);
}
// a -&gt; 1
// b -&gt; 2
// c -&gt; 3
</code></pre>
<h3 id="ä¸å…¶ä»–éå†è¯­æ³•çš„æ¯”è¾ƒ"><a href="#ä¸å…¶ä»–éå†è¯­æ³•çš„æ¯”è¾ƒ" class="headerlink" title="ä¸å…¶ä»–éå†è¯­æ³•çš„æ¯”è¾ƒ"></a>ä¸å…¶ä»–éå†è¯­æ³•çš„æ¯”è¾ƒ</h3><p>ä»¥æ•°ç»„ä¸ºä¾‹ï¼ŒJavaScriptæä¾›å¤šç§éå†è¯­æ³•ã€‚æœ€åŸå§‹çš„å†™æ³•å°±æ˜¯forå¾ªç¯ã€‚</p>
<pre><code class="javascript">for (var index = 0; index &lt; myArray.length; index++) {
  console.log(myArray[index]);
}
</code></pre>
<p>è¿™ç§å†™æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œå› æ­¤æ•°ç»„æä¾›å†…ç½®çš„forEachæ–¹æ³•ã€‚</p>
<pre><code class="javascript">myArray.forEach(function (value) {
  console.log(value);
});
</code></pre>
<p>è¿™ç§å†™æ³•çš„é—®é¢˜åœ¨äºï¼Œæ— æ³•ä¸­é€”è·³å‡º<code>forEach</code>å¾ªç¯ï¼Œbreakå‘½ä»¤æˆ–returnå‘½ä»¤éƒ½ä¸èƒ½å¥æ•ˆã€‚</p>
<p><code>for...in</code>å¾ªç¯å¯ä»¥éå†æ•°ç»„çš„é”®åã€‚</p>
<pre><code class="javascript">for (var index in myArray) {
  console.log(myArray[index]);
}
</code></pre>
<p>forâ€¦inå¾ªç¯æœ‰å‡ ä¸ªç¼ºç‚¹ã€‚</p>
<ul>
<li>æ•°ç»„çš„é”®åæ˜¯æ•°å­—ï¼Œä½†æ˜¯forâ€¦inå¾ªç¯æ˜¯ä»¥å­—ç¬¦ä¸²ä½œä¸ºé”®åâ€œ0â€ã€â€œ1â€ã€â€œ2â€ç­‰ç­‰ã€‚</li>
<li>forâ€¦inå¾ªç¯ä¸ä»…éå†æ•°å­—é”®åï¼Œè¿˜ä¼šéå†æ‰‹åŠ¨æ·»åŠ çš„å…¶ä»–é”®ï¼Œç”šè‡³åŒ…æ‹¬åŸå‹é“¾ä¸Šçš„é”®ã€‚</li>
<li>æŸäº›æƒ…å†µä¸‹ï¼Œforâ€¦inå¾ªç¯ä¼šä»¥ä»»æ„é¡ºåºéå†é”®åã€‚</li>
</ul>
<p>æ€»ä¹‹ï¼Œ<code>for...in</code>å¾ªç¯ä¸»è¦æ˜¯ä¸ºéå†å¯¹è±¡è€Œè®¾è®¡çš„ï¼Œä¸é€‚ç”¨äºéå†æ•°ç»„ã€‚</p>
<p><code>for...of</code>å¾ªç¯ç›¸æ¯”ä¸Šé¢å‡ ç§åšæ³•ï¼Œæœ‰ä¸€äº›æ˜¾è‘—çš„ä¼˜ç‚¹ã€‚</p>
<pre><code class="javascript">for (let value of myArray) {
  console.log(value);
}
</code></pre>
<ul>
<li>æœ‰ç€åŒforâ€¦inä¸€æ ·çš„ç®€æ´è¯­æ³•ï¼Œä½†æ˜¯æ²¡æœ‰forâ€¦iné‚£äº›ç¼ºç‚¹ã€‚</li>
<li>ä¸åŒç”¨äºforEachæ–¹æ³•ï¼Œå®ƒå¯ä»¥ä¸breakã€continueå’Œreturné…åˆä½¿ç”¨ã€‚</li>
<li>æä¾›äº†éå†æ‰€æœ‰æ•°æ®ç»“æ„çš„ç»Ÿä¸€æ“ä½œæ¥å£ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨breakè¯­å¥ï¼Œè·³å‡º<code>for...of</code>å¾ªç¯çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">for (var n of fibonacci) {
  if (n &gt; 1000)
    break;
  console.log(n);
}
</code></pre>
<p>ä¸Šé¢çš„ä¾‹å­ï¼Œä¼šè¾“å‡ºæ–æ³¢çº³å¥‘æ•°åˆ—å°äºç­‰äº1000çš„é¡¹ã€‚å¦‚æœå½“å‰é¡¹å¤§äº1000ï¼Œå°±ä¼šä½¿ç”¨breakè¯­å¥è·³å‡º<code>for...of</code>å¾ªç¯ã€‚</p>
<blockquote>
<p>æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Iteratorå’Œforâ€¦ofå¾ªç¯&quot;&gt;&lt;a href=&quot;#Iteratorå’Œforâ€¦ofå¾ªç¯&quot; class=&quot;headerlink&quot; title=&quot;Iteratorå’Œforâ€¦ofå¾ªç¯&quot;&gt;&lt;/a&gt;Iteratorå’Œforâ€¦ofå¾ªç¯&lt;/h1&gt;&lt;h2 id=&quot;Itera
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Iterator" scheme="https://microzz.com/tags/Iterator/"/>
    
      <category term="for" scheme="https://microzz.com/tags/for/"/>
    
  </entry>
  
  <entry>
    <title>Reflect</title>
    <link href="https://microzz.com/2017/01/11/reflect/"/>
    <id>https://microzz.com/2017/01/11/reflect/</id>
    <published>2017-01-11T00:25:19.000Z</published>
    <updated>2017-01-12T08:19:34.607Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Reflect"><a href="#Reflect" class="headerlink" title="Reflect"></a>Reflect</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p><code>Reflect</code>å¯¹è±¡ä¸<code>Proxy</code>å¯¹è±¡ä¸€æ ·ï¼Œä¹Ÿæ˜¯ ES6 ä¸ºäº†æ“ä½œå¯¹è±¡è€Œæä¾›çš„æ–° APIã€‚<code>Reflect</code>å¯¹è±¡çš„è®¾è®¡ç›®çš„æœ‰è¿™æ ·å‡ ä¸ªã€‚</p>
<p>ï¼ˆ1ï¼‰ å°†<code>Object</code>å¯¹è±¡çš„ä¸€äº›æ˜æ˜¾å±äºè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚<code>Object.defineProperty</code>ï¼‰ï¼Œæ”¾åˆ°<code>Reflect</code>å¯¹è±¡ä¸Šã€‚ç°é˜¶æ®µï¼ŒæŸäº›æ–¹æ³•åŒæ—¶åœ¨<code>Object</code>å’Œ<code>Reflect</code>å¯¹è±¡ä¸Šéƒ¨ç½²ï¼Œæœªæ¥çš„æ–°æ–¹æ³•å°†åªéƒ¨ç½²åœ¨<code>Reflect</code>å¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»<code>Reflect</code>å¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ã€‚</p>
<p>ï¼ˆ2ï¼‰ ä¿®æ”¹æŸäº›<code>Object</code>æ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚æ¯”å¦‚ï¼Œ<code>Object.defineProperty(obj, name, desc)</code>åœ¨æ— æ³•å®šä¹‰å±æ€§æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè€Œ<code>Reflect.defineProperty(obj, name, desc)</code>åˆ™ä¼šè¿”å›<code>false</code>ã€‚</p>
<pre><code class="javascript">// è€å†™æ³•
try {
  Object.defineProperty(target, property, attributes);
  // success
} catch (e) {
  // failure
}

// æ–°å†™æ³•
if (Reflect.defineProperty(target, property, attributes)) {
  // success
} else {
  // failure
}
</code></pre>
<p>ï¼ˆ3ï¼‰ è®©<code>Object</code>æ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æŸäº›<code>Object</code>æ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚<code>name in obj</code>å’Œ<code>delete obj[name]</code>ï¼Œè€Œ<code>Reflect.has(obj, name)</code>å’Œ<code>Reflect.deleteProperty(obj, name)</code>è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸ºã€‚</p>
<pre><code class="javascript">// è€å†™æ³•
&#39;assign&#39; in Object // true

// æ–°å†™æ³•
Reflect.has(Object, &#39;assign&#39;) // true
</code></pre>
<p>ï¼ˆ4ï¼‰<code>Reflect</code>å¯¹è±¡çš„æ–¹æ³•ä¸<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œåªè¦æ˜¯<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•ï¼Œå°±èƒ½åœ¨<code>Reflect</code>å¯¹è±¡ä¸Šæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚è¿™å°±è®©<code>Proxy</code>å¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„<code>Reflect</code>æ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸ºï¼Œä½œä¸ºä¿®æ”¹è¡Œä¸ºçš„åŸºç¡€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡<code>Proxy</code>æ€ä¹ˆä¿®æ”¹é»˜è®¤è¡Œä¸ºï¼Œä½ æ€»å¯ä»¥åœ¨<code>Reflect</code>ä¸Šè·å–é»˜è®¤è¡Œä¸ºã€‚</p>
<pre><code class="javascript">Proxy(target, {
  set: function(target, name, value, receiver) {
    var success = Reflect.set(target,name, value, receiver);
    if (success) {
      log(&#39;property &#39; + name + &#39; on &#39; + target + &#39; set to &#39; + value);
    }
    return success;
  }
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Proxy</code>æ–¹æ³•æ‹¦æˆª<code>target</code>å¯¹è±¡çš„å±æ€§èµ‹å€¼è¡Œä¸ºã€‚å®ƒé‡‡ç”¨<code>Reflect.set</code>æ–¹æ³•å°†å€¼èµ‹å€¼ç»™å¯¹è±¡çš„å±æ€§ï¼Œç¡®ä¿å®ŒæˆåŸæœ‰çš„è¡Œä¸ºï¼Œç„¶åå†éƒ¨ç½²é¢å¤–çš„åŠŸèƒ½ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var loggedObj = new Proxy(obj, {
  get(target, name) {
    console.log(&#39;get&#39;, target, name);
    return Reflect.get(target, name);
  },
  deleteProperty(target, name) {
    console.log(&#39;delete&#39; + name);
    return Reflect.deleteProperty(target, name);
  },
  has(target, name) {
    console.log(&#39;has&#39; + name);
    return Reflect.has(target, name);
  }
});
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¯ä¸€ä¸ª<code>Proxy</code>å¯¹è±¡çš„æ‹¦æˆªæ“ä½œï¼ˆ<code>get</code>ã€<code>delete</code>ã€<code>has</code>ï¼‰ï¼Œå†…éƒ¨éƒ½è°ƒç”¨å¯¹åº”çš„<code>Reflect</code>æ–¹æ³•ï¼Œä¿è¯åŸç”Ÿè¡Œä¸ºèƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œã€‚æ·»åŠ çš„å·¥ä½œï¼Œå°±æ˜¯å°†æ¯ä¸€ä¸ªæ“ä½œè¾“å‡ºä¸€è¡Œæ—¥å¿—ã€‚</p>
<p>æœ‰äº†<code>Reflect</code>å¯¹è±¡ä»¥åï¼Œå¾ˆå¤šæ“ä½œä¼šæ›´æ˜“è¯»ã€‚</p>
<pre><code class="javascript">// è€å†™æ³•
Function.prototype.apply.call(Math.floor, undefined, [1.75]) // 1

// æ–°å†™æ³•
Reflect.apply(Math.floor, undefined, [1.75]) // 1
</code></pre>
<h2 id="é™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³•</h2><p><code>Reflect</code>å¯¹è±¡ä¸€å…±æœ‰13ä¸ªé™æ€æ–¹æ³•ã€‚</p>
<ul>
<li>Reflect.apply(target,thisArg,args)</li>
<li>Reflect.construct(target,args)</li>
<li>Reflect.get(target,name,receiver)</li>
<li>Reflect.set(target,name,value,receiver)</li>
<li>Reflect.defineProperty(target,name,desc)</li>
<li>Reflect.deleteProperty(target,name)</li>
<li>Reflect.has(target,name)</li>
<li>Reflect.ownKeys(target)</li>
<li>Reflect.isExtensible(target)</li>
<li>Reflect.preventExtensions(target)</li>
<li>Reflect.getOwnPropertyDescriptor(target, name)</li>
<li>Reflect.getPrototypeOf(target)</li>
<li>Reflect.setPrototypeOf(target, prototype)</li>
</ul>
<p>ä¸Šé¢è¿™äº›æ–¹æ³•çš„ä½œç”¨ï¼Œå¤§éƒ¨åˆ†ä¸<code>Object</code>å¯¹è±¡çš„åŒåæ–¹æ³•çš„ä½œç”¨éƒ½æ˜¯ç›¸åŒçš„ï¼Œè€Œä¸”å®ƒä¸<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ä¸‹é¢æ˜¯å¯¹å®ƒä»¬çš„è§£é‡Šã€‚</p>
<h3 id="Reflect-get-target-name-receiver"><a href="#Reflect-get-target-name-receiver" class="headerlink" title="Reflect.get(target, name, receiver)"></a>Reflect.get(target, name, receiver)</h3><p><code>Reflect.get</code>æ–¹æ³•æŸ¥æ‰¾å¹¶è¿”å›<code>target</code>å¯¹è±¡çš„<code>name</code>å±æ€§ï¼Œå¦‚æœæ²¡æœ‰è¯¥å±æ€§ï¼Œåˆ™è¿”å›<code>undefined</code>ã€‚</p>
<pre><code class="javascript">var myObject = {
  foo: 1,
  bar: 2,
  get baz() {
    return this.foo + this.bar;
  },
}

Reflect.get(myObject, &#39;foo&#39;) // 1
Reflect.get(myObject, &#39;bar&#39;) // 2
Reflect.get(myObject, &#39;baz&#39;) // 3
</code></pre>
<p>å¦‚æœ<code>name</code>å±æ€§éƒ¨ç½²äº†è¯»å–å‡½æ•°ï¼ˆgetterï¼‰ï¼Œåˆ™è¯»å–å‡½æ•°çš„<code>this</code>ç»‘å®š<code>receiver</code>ã€‚</p>
<pre><code class="javascript">var myObject = {
  foo: 1,
  bar: 2,
  get baz() {
    return this.foo + this.bar;
  },
};

var myReceiverObject = {
  foo: 4,
  bar: 4,
};

Reflect.get(myObject, &#39;baz&#39;, myReceiverObject) // 8
</code></pre>
<p>å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œ<code>Reflect.get</code>æ–¹æ³•ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">Reflect.get(1, &#39;foo&#39;) // æŠ¥é”™
Reflect.get(false, &#39;foo&#39;) // æŠ¥é”™
</code></pre>
<h3 id="Reflect-set-target-name-value-receiver"><a href="#Reflect-set-target-name-value-receiver" class="headerlink" title="Reflect.set(target, name, value, receiver)"></a>Reflect.set(target, name, value, receiver)</h3><p><code>Reflect.set</code>æ–¹æ³•è®¾ç½®<code>target</code>å¯¹è±¡çš„<code>name</code>å±æ€§ç­‰äº<code>value</code>ã€‚</p>
<pre><code class="javascript">var myObject = {
  foo: 1,
  set bar(value) {
    return this.foo = value;
  },
}

myObject.foo // 1

Reflect.set(myObject, &#39;foo&#39;, 2);
myObject.foo // 2

Reflect.set(myObject, &#39;bar&#39;, 3)
myObject.foo // 3
</code></pre>
<p>å¦‚æœ<code>name</code>å±æ€§è®¾ç½®äº†èµ‹å€¼å‡½æ•°ï¼Œåˆ™èµ‹å€¼å‡½æ•°çš„<code>this</code>ç»‘å®š<code>receiver</code>ã€‚</p>
<pre><code class="javascript">var myObject = {
  foo: 4,
  set bar(value) {
    return this.foo = value;
  },
};

var myReceiverObject = {
  foo: 0,
};

Reflect.set(myObject, &#39;bar&#39;, 1, myReceiverObject);
myObject.foo // 4
myReceiverObject.foo // 1
</code></pre>
<p>å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œ<code>Reflect.set</code>ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">Reflect.set(1, &#39;foo&#39;, {}) // æŠ¥é”™
Reflect.set(false, &#39;foo&#39;, {}) // æŠ¥é”™
</code></pre>
<h3 id="Reflect-has-obj-name"><a href="#Reflect-has-obj-name" class="headerlink" title="Reflect.has(obj, name)"></a>Reflect.has(obj, name)</h3><p><code>Reflect.has</code>æ–¹æ³•å¯¹åº”<code>name in obj</code>é‡Œé¢çš„<code>in</code>è¿ç®—ç¬¦ã€‚</p>
<pre><code class="javascript">var myObject = {
  foo: 1,
};

// æ—§å†™æ³•
&#39;foo&#39; in myObject // true

// æ–°å†™æ³•
Reflect.has(myObject, &#39;foo&#39;) // true
</code></pre>
<p>å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œ<code>Reflect.has</code>å’Œ<code>in</code>è¿ç®—ç¬¦éƒ½ä¼šæŠ¥é”™ã€‚</p>
<h3 id="Reflect-deleteProperty-obj-name"><a href="#Reflect-deleteProperty-obj-name" class="headerlink" title="Reflect.deleteProperty(obj, name)"></a>Reflect.deleteProperty(obj, name)</h3><p><code>Reflect.deleteProperty</code>æ–¹æ³•ç­‰åŒäº<code>delete obj[name]</code>ï¼Œç”¨äºåˆ é™¤å¯¹è±¡çš„å±æ€§ã€‚</p>
<pre><code class="javascript">const myObj = { foo: &#39;bar&#39; };

// æ—§å†™æ³•
delete myObj.foo;

// æ–°å†™æ³•
Reflect.deleteProperty(myObj, &#39;foo&#39;);
</code></pre>
<p>è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å¦‚æœåˆ é™¤æˆåŠŸï¼Œæˆ–è€…è¢«åˆ é™¤çš„å±æ€§ä¸å­˜åœ¨ï¼Œè¿”å›<code>true</code>ï¼›åˆ é™¤å¤±è´¥ï¼Œè¢«åˆ é™¤çš„å±æ€§ä¾ç„¶å­˜åœ¨ï¼Œè¿”å›<code>false</code>ã€‚</p>
<h3 id="Reflect-construct-target-args"><a href="#Reflect-construct-target-args" class="headerlink" title="Reflect.construct(target, args)"></a>Reflect.construct(target, args)</h3><p><code>Reflect.construct</code>æ–¹æ³•ç­‰åŒäº<code>new target(...args)</code>ï¼Œè¿™æä¾›äº†ä¸€ç§ä¸ä½¿ç”¨<code>new</code>ï¼Œæ¥è°ƒç”¨æ„é€ å‡½æ•°çš„æ–¹æ³•ã€‚</p>
<pre><code class="javascript">function Greeting(name) {
  this.name = name;
}

// new çš„å†™æ³•
const instance = new Greeting(&#39;å¼ ä¸‰&#39;);

// Reflect.construct çš„å†™æ³•
const instance = Reflect.construct(Greeting, &#39;å¼ ä¸‰&#39;);
</code></pre>
<h3 id="Reflect-getPrototypeOf-obj"><a href="#Reflect-getPrototypeOf-obj" class="headerlink" title="Reflect.getPrototypeOf(obj)"></a>Reflect.getPrototypeOf(obj)</h3><p><code>Reflect.getPrototypeOf</code>æ–¹æ³•ç”¨äºè¯»å–å¯¹è±¡çš„<code>__proto__</code>å±æ€§ï¼Œå¯¹åº”<code>Object.getPrototypeOf(obj)</code>ã€‚</p>
<pre><code class="javascript">const myObj = new FancyThing();

// æ—§å†™æ³•
Object.getPrototypeOf(myObj) === FancyThing.prototype;

// æ–°å†™æ³•
Reflect.getPrototypeOf(myObj) === FancyThing.prototype;
</code></pre>
<p><code>Reflect.getPrototypeOf</code>å’Œ<code>Object.getPrototypeOf</code>çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼ˆåŒ…æ‹¬<code>null</code>å’Œ<code>undefined</code>ï¼‰ï¼Œ<code>Object.getPrototypeOf</code>ä¼šå°†è¿™ä¸ªå‚æ•°è½¬ä¸ºå¯¹è±¡ï¼Œç„¶åå†è¿è¡Œï¼Œè€Œ<code>Reflect.getPrototypeOf</code>ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">Object.getPrototypeOf(1) // undefined
Reflect.getPrototypeOf(1) // æŠ¥é”™
</code></pre>
<h3 id="Reflect-setPrototypeOf-obj-newProto"><a href="#Reflect-setPrototypeOf-obj-newProto" class="headerlink" title="Reflect.setPrototypeOf(obj, newProto)"></a>Reflect.setPrototypeOf(obj, newProto)</h3><p><code>Reflect.setPrototypeOf</code>æ–¹æ³•ç”¨äºè®¾ç½®å¯¹è±¡çš„<code>__proto__</code>å±æ€§ï¼Œå¯¹åº”<code>Object.setPrototypeOf(obj, newProto)</code>ã€‚</p>
<pre><code class="javascript">const myObj = new FancyThing();

// æ—§å†™æ³•
Object.setPrototypeOf(myObj, OtherThing.prototype);

// æ–°å†™æ³•
Reflect.setPrototypeOf(myObj, OtherThing.prototype);
</code></pre>
<p>å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œ<code>Reflect.setPrototypeOf</code>å’Œ<code>Object.setPrototypeOf</code>éƒ½ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">Object.setPrototypeOf(1) // æŠ¥é”™
Reflect.setPrototypeOf(1) // æŠ¥é”™
</code></pre>
<h3 id="Reflect-apply-func-thisArg-args"><a href="#Reflect-apply-func-thisArg-args" class="headerlink" title="Reflect.apply(func, thisArg, args)"></a>Reflect.apply(func, thisArg, args)</h3><p><code>Reflect.apply</code>æ–¹æ³•ç­‰åŒäº<code>Function.prototype.apply.call(func, thisArg, args)</code>ï¼Œç”¨äºç»‘å®š<code>this</code>å¯¹è±¡åæ‰§è¡Œç»™å®šå‡½æ•°ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœè¦ç»‘å®šä¸€ä¸ªå‡½æ•°çš„<code>this</code>å¯¹è±¡ï¼Œå¯ä»¥è¿™æ ·å†™<code>fn.apply(obj, args)</code>ï¼Œä½†æ˜¯å¦‚æœå‡½æ•°å®šä¹‰äº†è‡ªå·±çš„<code>apply</code>æ–¹æ³•ï¼Œå°±åªèƒ½å†™æˆ<code>Function.prototype.apply.call(fn, obj, args)</code>ï¼Œé‡‡ç”¨<code>Reflect</code>å¯¹è±¡å¯ä»¥ç®€åŒ–è¿™ç§æ“ä½œã€‚</p>
<pre><code class="javascript">const ages = [11, 33, 12, 54, 18, 96];

// æ—§å†™æ³•
const youngest = Math.min.apply(Math, ages);
const oldest = Math.max.apply(Math, ages);
const type = Object.prototype.toString.call(youngest);

// æ–°å†™æ³•
const youngest = Reflect.apply(Math.min, Math, ages);
const oldest = Reflect.apply(Math.max, Math, ages);
const type = Reflect.apply(Object.prototype.toString, youngest);
</code></pre>
<h3 id="Reflect-defineProperty-target-propertyKey-attributes"><a href="#Reflect-defineProperty-target-propertyKey-attributes" class="headerlink" title="Reflect.defineProperty(target, propertyKey, attributes)"></a>Reflect.defineProperty(target, propertyKey, attributes)</h3><p><code>Reflect.defineProperty</code>æ–¹æ³•åŸºæœ¬ç­‰åŒäº<code>Object.defineProperty</code>ï¼Œç”¨æ¥ä¸ºå¯¹è±¡å®šä¹‰å±æ€§ã€‚æœªæ¥ï¼Œåè€…ä¼šè¢«é€æ¸åºŸé™¤ï¼Œè¯·ä»ç°åœ¨å¼€å§‹å°±ä½¿ç”¨<code>Reflect.defineProperty</code>ä»£æ›¿å®ƒã€‚</p>
<pre><code class="javascript">function MyDate() {
  /*â€¦*/
}

// æ—§å†™æ³•
Object.defineProperty(MyDate, &#39;now&#39;, {
  value: () =&gt; new Date.now()
});

// æ–°å†™æ³•
Reflect.defineProperty(MyDate, &#39;now&#39;, {
  value: () =&gt; new Date.now()
});
</code></pre>
<p>å¦‚æœ<code>Reflect.defineProperty</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œå°±ä¼šæŠ›å‡ºé”™è¯¯ï¼Œæ¯”å¦‚<code>Reflect.defineProperty(1, &#39;foo&#39;)</code>ã€‚</p>
<h3 id="Reflect-getOwnPropertyDescriptor-target-propertyKey"><a href="#Reflect-getOwnPropertyDescriptor-target-propertyKey" class="headerlink" title="Reflect.getOwnPropertyDescriptor(target, propertyKey)"></a>Reflect.getOwnPropertyDescriptor(target, propertyKey)</h3><p><code>Reflect.getOwnPropertyDescriptor</code>åŸºæœ¬ç­‰åŒäº<code>Object.getOwnPropertyDescriptor</code>ï¼Œç”¨äºå¾—åˆ°æŒ‡å®šå±æ€§çš„æè¿°å¯¹è±¡ï¼Œå°†æ¥ä¼šæ›¿ä»£æ‰åè€…ã€‚</p>
<pre><code class="javascript">var myObject = {};
Object.defineProperty(myObject, &#39;hidden&#39;, {
  value: true,
  enumerable: false,
});

// æ—§å†™æ³•
var theDescriptor = Object.getOwnPropertyDescriptor(myObject, &#39;hidden&#39;);

// æ–°å†™æ³•
var theDescriptor = Reflect.getOwnPropertyDescriptor(myObject, &#39;hidden&#39;);
</code></pre>
<p><code>Reflect.getOwnPropertyDescriptor</code>å’Œ<code>Object.getOwnPropertyDescriptor</code>çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œ<code>Object.getOwnPropertyDescriptor(1, &#39;foo&#39;)</code>ä¸æŠ¥é”™ï¼Œè¿”å›<code>undefined</code>ï¼Œè€Œ<code>Reflect.getOwnPropertyDescriptor(1, &#39;foo&#39;)</code>ä¼šæŠ›å‡ºé”™è¯¯ï¼Œè¡¨ç¤ºå‚æ•°éæ³•ã€‚</p>
<h3 id="Reflect-isExtensible-target"><a href="#Reflect-isExtensible-target" class="headerlink" title="Reflect.isExtensible (target)"></a>Reflect.isExtensible (target)</h3><p><code>Reflect.isExtensible</code>æ–¹æ³•å¯¹åº”<code>Object.isExtensible</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å¯¹è±¡æ˜¯å¦å¯æ‰©å±•ã€‚</p>
<pre><code class="javascript">const myObject = {};

// æ—§å†™æ³•
Object.isExtensible(myObject) // true

// æ–°å†™æ³•
Reflect.isExtensible(myObject) // true
</code></pre>
<p>å¦‚æœå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œ<code>Object.isExtensible</code>ä¼šè¿”å›<code>false</code>ï¼Œå› ä¸ºéå¯¹è±¡æœ¬æ¥å°±æ˜¯ä¸å¯æ‰©å±•çš„ï¼Œè€Œ<code>Reflect.isExtensible</code>ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">Object.isExtensible(1) // false
Reflect.isExtensible(1) // æŠ¥é”™
</code></pre>
<h3 id="Reflect-preventExtensions-target"><a href="#Reflect-preventExtensions-target" class="headerlink" title="Reflect.preventExtensions(target)"></a>Reflect.preventExtensions(target)</h3><p><code>Reflect.preventExtensions</code>å¯¹åº”<code>Object.preventExtensions</code>æ–¹æ³•ï¼Œç”¨äºè®©ä¸€ä¸ªå¯¹è±¡å˜ä¸ºä¸å¯æ‰©å±•ã€‚å®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ“ä½œæˆåŠŸã€‚</p>
<pre><code class="javascript">var myObject = {};

// æ—§å†™æ³•
Object.isExtensible(myObject) // true

// æ–°å†™æ³•
Reflect.preventExtensions(myObject) // true
</code></pre>
<p>å¦‚æœå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œ<code>Object.isExtensible</code>åœ¨ ES5 ç¯å¢ƒæŠ¥é”™ï¼Œåœ¨ ES6 ç¯å¢ƒè¿”å›è¿™ä¸ªå‚æ•°ï¼Œè€Œ<code>Reflect.preventExtensions</code>ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// ES5
Object.preventExtensions(1) // æŠ¥é”™

// ES6
Object.preventExtensions(1) // 1

// æ–°å†™æ³•
Reflect.preventExtensions(1) // æŠ¥é”™
</code></pre>
<h3 id="Reflect-ownKeys-target"><a href="#Reflect-ownKeys-target" class="headerlink" title="Reflect.ownKeys (target)"></a>Reflect.ownKeys (target)</h3><p><code>Reflect.ownKeys</code>æ–¹æ³•ç”¨äºè¿”å›å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼ŒåŸºæœ¬ç­‰åŒäº<code>Object.getOwnPropertyNames</code>ä¸<code>Object.getOwnPropertySymbols</code>ä¹‹å’Œã€‚</p>
<pre><code class="javascript">var myObject = {
  foo: 1,
  bar: 2,
  [Symbol.for(&#39;baz&#39;)]: 3,
  [Symbol.for(&#39;bing&#39;)]: 4,
};

// æ—§å†™æ³•
Object.getOwnPropertyNames(myObject)
// [&#39;foo&#39;, &#39;bar&#39;]

Object.getOwnPropertySymbols(myObject)
//[Symbol.for(&#39;baz&#39;), Symbol.for(&#39;bing&#39;)]

// æ–°å†™æ³•
Reflect.ownKeys(myObject)
// [&#39;foo&#39;, &#39;bar&#39;, Symbol.for(&#39;baz&#39;), Symbol.for(&#39;bing&#39;)]
</code></pre>
<h2 id="å®ä¾‹ï¼šä½¿ç”¨-Proxy-å®ç°è§‚å¯Ÿè€…æ¨¡å¼"><a href="#å®ä¾‹ï¼šä½¿ç”¨-Proxy-å®ç°è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="å®ä¾‹ï¼šä½¿ç”¨ Proxy å®ç°è§‚å¯Ÿè€…æ¨¡å¼"></a>å®ä¾‹ï¼šä½¿ç”¨ Proxy å®ç°è§‚å¯Ÿè€…æ¨¡å¼</h2><p>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver modeï¼‰æŒ‡çš„æ˜¯å‡½æ•°è‡ªåŠ¨è§‚å¯Ÿæ•°æ®å¯¹è±¡ï¼Œä¸€æ—¦å¯¹è±¡æœ‰å˜åŒ–ï¼Œå‡½æ•°å°±ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚</p>
<pre><code class="javascript">const person = observable({
  name: &#39;å¼ ä¸‰&#39;,
  age: 20
});

function print() {
  console.log(`${person.name}, ${person.age}`)
}

observe(print);
person.name = &#39;æå››&#39;;
// è¾“å‡º
// æå››, 20
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°æ®å¯¹è±¡<code>person</code>æ˜¯è§‚å¯Ÿç›®æ ‡ï¼Œå‡½æ•°<code>print</code>æ˜¯è§‚å¯Ÿè€…ã€‚ä¸€æ—¦æ•°æ®å¯¹è±¡å‘ç”Ÿå˜åŒ–ï¼Œ<code>print</code>å°±ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚</p>
<p>ä¸‹é¢ï¼Œä½¿ç”¨ Proxy å†™ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼çš„æœ€ç®€å•å®ç°ï¼Œå³å®ç°<code>observable</code>å’Œ<code>observe</code>è¿™ä¸¤ä¸ªå‡½æ•°ã€‚æ€è·¯æ˜¯<code>observable</code>å‡½æ•°è¿”å›ä¸€ä¸ªåŸå§‹å¯¹è±¡çš„ Proxy ä»£ç†ï¼Œæ‹¦æˆªèµ‹å€¼æ“ä½œï¼Œè§¦å‘å……å½“è§‚å¯Ÿè€…çš„å„ä¸ªå‡½æ•°ã€‚</p>
<pre><code class="javascript">const queuedObservers = new Set();

const observe = fn =&gt; queuedObservers.add(fn);
const observable = obj =&gt; new Proxy(obj, {set});

function set(target, key, value, receiver) {
  const result = Reflect.set(target, key, value, receiver);
  queuedObservers.forEach(observer =&gt; observer());
  return result;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå…ˆå®šä¹‰äº†ä¸€ä¸ª<code>Set</code>é›†åˆï¼Œæ‰€æœ‰è§‚å¯Ÿè€…å‡½æ•°éƒ½æ”¾è¿›è¿™ä¸ªé›†åˆã€‚ç„¶åï¼Œ<code>observable</code>å‡½æ•°è¿”å›åŸå§‹å¯¹è±¡çš„ä»£ç†ï¼Œæ‹¦æˆªèµ‹å€¼æ“ä½œã€‚æ‹¦æˆªå‡½æ•°<code>set</code>ä¹‹ä¸­ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰è§‚å¯Ÿè€…ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Reflect&quot;&gt;&lt;a href=&quot;#Reflect&quot; class=&quot;headerlink&quot; title=&quot;Reflect&quot;&gt;&lt;/a&gt;Reflect&lt;/h1&gt;&lt;h2 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Reflect" scheme="https://microzz.com/tags/Reflect/"/>
    
  </entry>
  
  <entry>
    <title>Proxy</title>
    <link href="https://microzz.com/2017/01/09/proxy/"/>
    <id>https://microzz.com/2017/01/09/proxy/</id>
    <published>2017-01-09T02:40:19.000Z</published>
    <updated>2017-01-12T08:18:16.020Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Proxy ç”¨äºä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œç­‰åŒäºåœ¨è¯­è¨€å±‚é¢åšå‡ºä¿®æ”¹ï¼Œæ‰€ä»¥å±äºä¸€ç§â€œå…ƒç¼–ç¨‹â€ï¼ˆmeta programmingï¼‰ï¼Œå³å¯¹ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç¨‹ã€‚</p>
<p>Proxy å¯ä»¥ç†è§£æˆï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚Proxy è¿™ä¸ªè¯çš„åŸæ„æ˜¯ä»£ç†ï¼Œç”¨åœ¨è¿™é‡Œè¡¨ç¤ºç”±å®ƒæ¥â€œä»£ç†â€æŸäº›æ“ä½œï¼Œå¯ä»¥è¯‘ä¸ºâ€œä»£ç†å™¨â€ã€‚</p>
<pre><code class="javascript">var obj = new Proxy({}, {
  get: function (target, key, receiver) {
    console.log(`getting ${key}!`);
    return Reflect.get(target, key, receiver);
  },
  set: function (target, key, value, receiver) {
    console.log(`setting ${key}!`);
    return Reflect.set(target, key, value, receiver);
  }
});
</code></pre>
<p>ä¸Šé¢ä»£ç å¯¹ä¸€ä¸ªç©ºå¯¹è±¡æ¶è®¾äº†ä¸€å±‚æ‹¦æˆªï¼Œé‡å®šä¹‰äº†å±æ€§çš„è¯»å–ï¼ˆ<code>get</code>ï¼‰å’Œè®¾ç½®ï¼ˆ<code>set</code>ï¼‰è¡Œä¸ºã€‚è¿™é‡Œæš‚æ—¶å…ˆä¸è§£é‡Šå…·ä½“çš„è¯­æ³•ï¼Œåªçœ‹è¿è¡Œç»“æœã€‚å¯¹è®¾ç½®äº†æ‹¦æˆªè¡Œä¸ºçš„å¯¹è±¡<code>obj</code>ï¼Œå»è¯»å†™å®ƒçš„å±æ€§ï¼Œå°±ä¼šå¾—åˆ°ä¸‹é¢çš„ç»“æœã€‚</p>
<pre><code class="javascript">obj.count = 1
//  setting count!
++obj.count
//  getting count!
//  setting count!
//  2
</code></pre>
<p>ä¸Šé¢ä»£ç è¯´æ˜ï¼ŒProxy å®é™…ä¸Šé‡è½½ï¼ˆoverloadï¼‰äº†ç‚¹è¿ç®—ç¬¦ï¼Œå³ç”¨è‡ªå·±çš„å®šä¹‰è¦†ç›–äº†è¯­è¨€çš„åŸå§‹å®šä¹‰ã€‚</p>
<p>ES6 åŸç”Ÿæä¾› Proxy æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Proxy å®ä¾‹ã€‚</p>
<pre><code class="javascript">var proxy = new Proxy(target, handler);
</code></pre>
<p>Proxy å¯¹è±¡çš„æ‰€æœ‰ç”¨æ³•ï¼Œéƒ½æ˜¯ä¸Šé¢è¿™ç§å½¢å¼ï¼Œä¸åŒçš„åªæ˜¯<code>handler</code>å‚æ•°çš„å†™æ³•ã€‚å…¶ä¸­ï¼Œ<code>new Proxy()</code>è¡¨ç¤ºç”Ÿæˆä¸€ä¸ª<code>Proxy</code>å®ä¾‹ï¼Œ<code>target</code>å‚æ•°è¡¨ç¤ºæ‰€è¦æ‹¦æˆªçš„ç›®æ ‡å¯¹è±¡ï¼Œ<code>handler</code>å‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥å®šåˆ¶æ‹¦æˆªè¡Œä¸ºã€‚</p>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªæ‹¦æˆªè¯»å–å±æ€§è¡Œä¸ºçš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var proxy = new Proxy({}, {
  get: function(target, property) {
    return 35;
  }
});

proxy.time // 35
proxy.name // 35
proxy.title // 35
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä½œä¸ºæ„é€ å‡½æ•°ï¼Œ<code>Proxy</code>æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰€è¦ä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼ˆä¸Šä¾‹æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼‰ï¼Œå³å¦‚æœæ²¡æœ‰<code>Proxy</code>çš„ä»‹å…¥ï¼Œæ“ä½œåŸæ¥è¦è®¿é—®çš„å°±æ˜¯è¿™ä¸ªå¯¹è±¡ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œå¯¹äºæ¯ä¸€ä¸ªè¢«ä»£ç†çš„æ“ä½œï¼Œéœ€è¦æä¾›ä¸€ä¸ªå¯¹åº”çš„å¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†æ‹¦æˆªå¯¹åº”çš„æ“ä½œã€‚æ¯”å¦‚ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œé…ç½®å¯¹è±¡æœ‰ä¸€ä¸ª<code>get</code>æ–¹æ³•ï¼Œç”¨æ¥æ‹¦æˆªå¯¹ç›®æ ‡å¯¹è±¡å±æ€§çš„è®¿é—®è¯·æ±‚ã€‚<code>get</code>æ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ç›®æ ‡å¯¹è±¡å’Œæ‰€è¦è®¿é—®çš„å±æ€§ã€‚å¯ä»¥çœ‹åˆ°ï¼Œç”±äºæ‹¦æˆªå‡½æ•°æ€»æ˜¯è¿”å›<code>35</code>ï¼Œæ‰€ä»¥è®¿é—®ä»»ä½•å±æ€§éƒ½å¾—åˆ°<code>35</code>ã€‚</p>
<p>æ³¨æ„ï¼Œè¦ä½¿å¾—<code>Proxy</code>èµ·ä½œç”¨ï¼Œå¿…é¡»é’ˆå¯¹<code>Proxy</code>å®ä¾‹ï¼ˆä¸Šä¾‹æ˜¯<code>proxy</code>å¯¹è±¡ï¼‰è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç›®æ ‡å¯¹è±¡ï¼ˆä¸Šä¾‹æ˜¯ç©ºå¯¹è±¡ï¼‰è¿›è¡Œæ“ä½œã€‚</p>
<p>å¦‚æœ<code>handler</code>æ²¡æœ‰è®¾ç½®ä»»ä½•æ‹¦æˆªï¼Œé‚£å°±ç­‰åŒäºç›´æ¥é€šå‘åŸå¯¹è±¡ã€‚</p>
<pre><code class="javascript">var target = {};
var handler = {};
var proxy = new Proxy(target, handler);
proxy.a = &#39;b&#39;;
target.a // &quot;b&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>handler</code>æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œæ²¡æœ‰ä»»ä½•æ‹¦æˆªæ•ˆæœï¼Œè®¿é—®<code>handler</code>å°±ç­‰åŒäºè®¿é—®<code>target</code>ã€‚</p>
<p>ä¸€ä¸ªæŠ€å·§æ˜¯å°† Proxy å¯¹è±¡ï¼Œè®¾ç½®åˆ°<code>object.proxy</code>å±æ€§ï¼Œä»è€Œå¯ä»¥åœ¨<code>object</code>å¯¹è±¡ä¸Šè°ƒç”¨ã€‚</p>
<pre><code class="javascript">var object = { proxy: new Proxy(target, handler) };
</code></pre>
<p>Proxy å®ä¾‹ä¹Ÿå¯ä»¥ä½œä¸ºå…¶ä»–å¯¹è±¡çš„åŸå‹å¯¹è±¡ã€‚</p>
<pre><code class="javascript">var proxy = new Proxy({}, {
  get: function(target, property) {
    return 35;
  }
});

let obj = Object.create(proxy);
obj.time // 35
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>proxy</code>å¯¹è±¡æ˜¯<code>obj</code>å¯¹è±¡çš„åŸå‹ï¼Œ<code>obj</code>å¯¹è±¡æœ¬èº«å¹¶æ²¡æœ‰<code>time</code>å±æ€§ï¼Œæ‰€ä»¥æ ¹æ®åŸå‹é“¾ï¼Œä¼šåœ¨<code>proxy</code>å¯¹è±¡ä¸Šè¯»å–è¯¥å±æ€§ï¼Œå¯¼è‡´è¢«æ‹¦æˆªã€‚</p>
<p>åŒä¸€ä¸ªæ‹¦æˆªå™¨å‡½æ•°ï¼Œå¯ä»¥è®¾ç½®æ‹¦æˆªå¤šä¸ªæ“ä½œã€‚</p>
<pre><code class="javascript">var handler = {
  get: function(target, name) {
    if (name === &#39;prototype&#39;) {
      return Object.prototype;
    }
    return &#39;Hello, &#39; + name;
  },

  apply: function(target, thisBinding, args) {
    return args[0];
  },

  construct: function(target, args) {
    return {value: args[1]};
  }
};

var fproxy = new Proxy(function(x, y) {
  return x + y;
}, handler);

fproxy(1, 2) // 1
new fproxy(1,2) // {value: 2}
fproxy.prototype === Object.prototype // true
fproxy.foo // &quot;Hello, foo&quot;
</code></pre>
<p>ä¸‹é¢æ˜¯ Proxy æ”¯æŒçš„æ‹¦æˆªæ“ä½œä¸€è§ˆã€‚</p>
<p>å¯¹äºå¯ä»¥è®¾ç½®ã€ä½†æ²¡æœ‰è®¾ç½®æ‹¦æˆªçš„æ“ä½œï¼Œåˆ™ç›´æ¥è½åœ¨ç›®æ ‡å¯¹è±¡ä¸Šï¼ŒæŒ‰ç…§åŸå…ˆçš„æ–¹å¼äº§ç”Ÿç»“æœã€‚</p>
<p><strong>ï¼ˆ1ï¼‰get(target, propKey, receiver)</strong></p>
<p>æ‹¦æˆªå¯¹è±¡å±æ€§çš„è¯»å–ï¼Œæ¯”å¦‚<code>proxy.foo</code>å’Œ<code>proxy[&#39;foo&#39;]</code>ã€‚</p>
<p>æœ€åä¸€ä¸ªå‚æ•°<code>receiver</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯é€‰ï¼Œå‚è§ä¸‹é¢<code>Reflect.get</code>çš„éƒ¨åˆ†ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰set(target, propKey, value, receiver)</strong></p>
<p>æ‹¦æˆªå¯¹è±¡å±æ€§çš„è®¾ç½®ï¼Œæ¯”å¦‚<code>proxy.foo = v</code>æˆ–<code>proxy[&#39;foo&#39;] = v</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰has(target, propKey)</strong></p>
<p>æ‹¦æˆª<code>propKey in proxy</code>çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p>
<p><strong>ï¼ˆ4ï¼‰deleteProperty(target, propKey)</strong></p>
<p>æ‹¦æˆª<code>delete proxy[propKey]</code>çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p>
<p><strong>ï¼ˆ5ï¼‰ownKeys(target)</strong></p>
<p>æ‹¦æˆª<code>Object.getOwnPropertyNames(proxy)</code>ã€<code>Object.getOwnPropertySymbols(proxy)</code>ã€<code>Object.keys(proxy)</code>ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ç›®æ ‡å¯¹è±¡æ‰€æœ‰è‡ªèº«çš„å±æ€§çš„å±æ€§åï¼Œè€Œ<code>Object.keys()</code>çš„è¿”å›ç»“æœä»…åŒ…æ‹¬ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚</p>
<p><strong>ï¼ˆ6ï¼‰getOwnPropertyDescriptor(target, propKey)</strong></p>
<p>æ‹¦æˆª<code>Object.getOwnPropertyDescriptor(proxy, propKey)</code>ï¼Œè¿”å›å±æ€§çš„æè¿°å¯¹è±¡ã€‚</p>
<p><strong>ï¼ˆ7ï¼‰defineProperty(target, propKey, propDesc)</strong></p>
<p>æ‹¦æˆª<code>Object.defineProperty(proxy, propKey, propDescï¼‰</code>ã€<code>Object.defineProperties(proxy, propDescs)</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p>
<p><strong>ï¼ˆ8ï¼‰preventExtensions(target)</strong></p>
<p>æ‹¦æˆª<code>Object.preventExtensions(proxy)</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p>
<p><strong>ï¼ˆ9ï¼‰getPrototypeOf(target)</strong></p>
<p>æ‹¦æˆª<code>Object.getPrototypeOf(proxy)</code>ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p><strong>ï¼ˆ10ï¼‰isExtensible(target)</strong></p>
<p>æ‹¦æˆª<code>Object.isExtensible(proxy)</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p>
<p><strong>ï¼ˆ11ï¼‰setPrototypeOf(target, proto)</strong></p>
<p>æ‹¦æˆª<code>Object.setPrototypeOf(proxy, proto)</code>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p>
<p>å¦‚æœç›®æ ‡å¯¹è±¡æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸¤ç§é¢å¤–æ“ä½œå¯ä»¥æ‹¦æˆªã€‚</p>
<p><strong>ï¼ˆ12ï¼‰apply(target, object, args)</strong></p>
<p>æ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºå‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚<code>proxy(...args)</code>ã€<code>proxy.call(object, ...args)</code>ã€<code>proxy.apply(...)</code>ã€‚</p>
<p><strong>ï¼ˆ13ï¼‰construct(target, args)</strong></p>
<p>æ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚<code>new proxy(...args)</code>ã€‚</p>
<h2 id="Proxy-å®ä¾‹çš„æ–¹æ³•"><a href="#Proxy-å®ä¾‹çš„æ–¹æ³•" class="headerlink" title="Proxy å®ä¾‹çš„æ–¹æ³•"></a>Proxy å®ä¾‹çš„æ–¹æ³•</h2><p>ä¸‹é¢æ˜¯ä¸Šé¢è¿™äº›æ‹¦æˆªæ–¹æ³•çš„è¯¦ç»†ä»‹ç»ã€‚</p>
<h3 id="get"><a href="#get" class="headerlink" title="get()"></a>get()</h3><p><code>get</code>æ–¹æ³•ç”¨äºæ‹¦æˆªæŸä¸ªå±æ€§çš„è¯»å–æ“ä½œã€‚ä¸Šæ–‡å·²ç»æœ‰ä¸€ä¸ªä¾‹å­ï¼Œä¸‹é¢æ˜¯å¦ä¸€ä¸ªæ‹¦æˆªè¯»å–æ“ä½œçš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var person = {
  name: &quot;å¼ ä¸‰&quot;
};

var proxy = new Proxy(person, {
  get: function(target, property) {
    if (property in target) {
      return target[property];
    } else {
      throw new ReferenceError(&quot;Property \&quot;&quot; + property + &quot;\&quot; does not exist.&quot;);
    }
  }
});

proxy.name // &quot;å¼ ä¸‰&quot;
proxy.age // æŠ›å‡ºä¸€ä¸ªé”™è¯¯
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœè®¿é—®ç›®æ ‡å¯¹è±¡ä¸å­˜åœ¨çš„å±æ€§ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªæ‹¦æˆªå‡½æ•°ï¼Œè®¿é—®ä¸å­˜åœ¨çš„å±æ€§ï¼Œåªä¼šè¿”å›<code>undefined</code>ã€‚</p>
<p><code>get</code>æ–¹æ³•å¯ä»¥ç»§æ‰¿ã€‚</p>
<pre><code class="javascript">let proto = new Proxy({}, {
  get(target, propertyKey, receiver) {
    console.log(&#39;GET &#39;+propertyKey);
    return target[propertyKey];
  }
});

let obj = Object.create(proto);
obj.xxx // &quot;GET xxx&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ‹¦æˆªæ“ä½œå®šä¹‰åœ¨<code>Prototype</code>å¯¹è±¡ä¸Šé¢ï¼Œæ‰€ä»¥å¦‚æœè¯»å–<code>obj</code>å¯¹è±¡ç»§æ‰¿çš„å±æ€§æ—¶ï¼Œæ‹¦æˆªä¼šç”Ÿæ•ˆã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨<code>get</code>æ‹¦æˆªï¼Œå®ç°æ•°ç»„è¯»å–è´Ÿæ•°çš„ç´¢å¼•ã€‚</p>
<pre><code class="javascript">function createArray(...elements) {
  let handler = {
    get(target, propKey, receiver) {
      let index = Number(propKey);
      if (index &lt; 0) {
        propKey = String(target.length + index);
      }
      return Reflect.get(target, propKey, receiver);
    }
  };

  let target = [];
  target.push(...elements);
  return new Proxy(target, handler);
}

let arr = createArray(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;);
arr[-1] // c
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„çš„ä½ç½®å‚æ•°æ˜¯<code>-1</code>ï¼Œå°±ä¼šè¾“å‡ºæ•°ç»„çš„å€’æ•°æœ€åä¸€ä¸ªæˆå‘˜ã€‚</p>
<p>åˆ©ç”¨ Proxyï¼Œå¯ä»¥å°†è¯»å–å±æ€§çš„æ“ä½œï¼ˆ<code>get</code>ï¼‰ï¼Œè½¬å˜ä¸ºæ‰§è¡ŒæŸä¸ªå‡½æ•°ï¼Œä»è€Œå®ç°å±æ€§çš„é“¾å¼æ“ä½œã€‚</p>
<pre><code class="javascript">var pipe = (function () {
  return function (value) {
    var funcStack = [];
    var oproxy = new Proxy({} , {
      get : function (pipeObject, fnName) {
        if (fnName === &#39;get&#39;) {
          return funcStack.reduce(function (val, fn) {
            return fn(val);
          },value);
        }
        funcStack.push(window[fnName]);
        return oproxy;
      }
    });

    return oproxy;
  }
}());

var double = n =&gt; n * 2;
var pow    = n =&gt; n * n;
var reverseInt = n =&gt; n.toString().split(&quot;&quot;).reverse().join(&quot;&quot;) | 0;

pipe(3).double.pow.reverseInt.get; // 63
</code></pre>
<p>ä¸Šé¢ä»£ç è®¾ç½® Proxy ä»¥åï¼Œè¾¾åˆ°äº†å°†å‡½æ•°åé“¾å¼ä½¿ç”¨çš„æ•ˆæœã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­åˆ™æ˜¯åˆ©ç”¨<code>get</code>æ‹¦æˆªï¼Œå®ç°ä¸€ä¸ªç”Ÿæˆå„ç§DOMèŠ‚ç‚¹çš„é€šç”¨å‡½æ•°<code>dom</code>ã€‚</p>
<pre><code class="javascript">const dom = new Proxy({}, {
  get(target, property) {
    return function(attrs = {}, ...children) {
      const el = document.createElement(property);
      for (let prop of Object.keys(attrs)) {
        el.setAttribute(prop, attrs[prop]);
      }
      for (let child of children) {
        if (typeof child === &#39;string&#39;) {
          child = document.createTextNode(child);
        }
        el.appendChild(child);
      }
      return el;
    }
  }
});

const el = dom.div({},
  &#39;Hello, my name is &#39;,
  dom.a({href: &#39;//example.com&#39;}, &#39;Mark&#39;),
  &#39;. I like:&#39;,
  dom.ul({},
    dom.li({}, &#39;The web&#39;),
    dom.li({}, &#39;Food&#39;),
    dom.li({}, &#39;â€¦actually that\&#39;s it&#39;)
  )
);

document.body.appendChild(el);
</code></pre>
<p>å¦‚æœä¸€ä¸ªå±æ€§ä¸å¯é…ç½®ï¼ˆconfigurableï¼‰å’Œä¸å¯å†™ï¼ˆwritableï¼‰ï¼Œåˆ™è¯¥å±æ€§ä¸èƒ½è¢«ä»£ç†ï¼Œé€šè¿‡ Proxy å¯¹è±¡è®¿é—®è¯¥å±æ€§ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">const target = Object.defineProperties({}, {
  foo: {
    value: 123,
    writable: false,
    configurable: false
  },
});

const handler = {
  get(target, propKey) {
    return &#39;abc&#39;;
  }
};

const proxy = new Proxy(target, handler);

proxy.foo
// TypeError: Invariant check failed
</code></pre>
<h3 id="set"><a href="#set" class="headerlink" title="set()"></a>set()</h3><p><code>set</code>æ–¹æ³•ç”¨æ¥æ‹¦æˆªæŸä¸ªå±æ€§çš„èµ‹å€¼æ“ä½œã€‚</p>
<p>å‡å®š<code>Person</code>å¯¹è±¡æœ‰ä¸€ä¸ª<code>age</code>å±æ€§ï¼Œè¯¥å±æ€§åº”è¯¥æ˜¯ä¸€ä¸ªä¸å¤§äº200çš„æ•´æ•°ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>Proxy</code>ä¿è¯<code>age</code>çš„å±æ€§å€¼ç¬¦åˆè¦æ±‚ã€‚</p>
<pre><code class="javascript">let validator = {
  set: function(obj, prop, value) {
    if (prop === &#39;age&#39;) {
      if (!Number.isInteger(value)) {
        throw new TypeError(&#39;The age is not an integer&#39;);
      }
      if (value &gt; 200) {
        throw new RangeError(&#39;The age seems invalid&#39;);
      }
    }

    // å¯¹äºageä»¥å¤–çš„å±æ€§ï¼Œç›´æ¥ä¿å­˜
    obj[prop] = value;
  }
};

let person = new Proxy({}, validator);

person.age = 100;

person.age // 100
person.age = &#39;young&#39; // æŠ¥é”™
person.age = 300 // æŠ¥é”™
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºè®¾ç½®äº†å­˜å€¼å‡½æ•°<code>set</code>ï¼Œä»»ä½•ä¸ç¬¦åˆè¦æ±‚çš„<code>age</code>å±æ€§èµ‹å€¼ï¼Œéƒ½ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¿™æ˜¯æ•°æ®éªŒè¯çš„ä¸€ç§å®ç°æ–¹æ³•ã€‚åˆ©ç”¨<code>set</code>æ–¹æ³•ï¼Œè¿˜å¯ä»¥æ•°æ®ç»‘å®šï¼Œå³æ¯å½“å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨æ›´æ–° DOMã€‚</p>
<p>æœ‰æ—¶ï¼Œæˆ‘ä»¬ä¼šåœ¨å¯¹è±¡ä¸Šé¢è®¾ç½®å†…éƒ¨å±æ€§ï¼Œå±æ€§åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä½¿ç”¨ä¸‹åˆ’çº¿å¼€å¤´ï¼Œè¡¨ç¤ºè¿™äº›å±æ€§ä¸åº”è¯¥è¢«å¤–éƒ¨ä½¿ç”¨ã€‚ç»“åˆ<code>get</code>å’Œ<code>set</code>æ–¹æ³•ï¼Œå°±å¯ä»¥åšåˆ°é˜²æ­¢è¿™äº›å†…éƒ¨å±æ€§è¢«å¤–éƒ¨è¯»å†™ã€‚</p>
<pre><code class="javascript">var handler = {
  get (target, key) {
    invariant(key, &#39;get&#39;);
    return target[key];
  },
  set (target, key, value) {
    invariant(key, &#39;set&#39;);
    target[key] = value;
    return true;
  }
};
function invariant (key, action) {
  if (key[0] === &#39;_&#39;) {
    throw new Error(`Invalid attempt to ${action} private &quot;${key}&quot; property`);
  }
}
var target = {};
var proxy = new Proxy(target, handler);
proxy._prop
// Error: Invalid attempt to get private &quot;_prop&quot; property
proxy._prop = &#39;c&#39;
// Error: Invalid attempt to set private &quot;_prop&quot; property
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦è¯»å†™çš„å±æ€§åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ä¸‹åˆ’çº¿ï¼Œä¸€å¾‹æŠ›é”™ï¼Œä»è€Œè¾¾åˆ°ç¦æ­¢è¯»å†™å†…éƒ¨å±æ€§çš„ç›®çš„ã€‚</p>
<p>æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡è‡ªèº«çš„æŸä¸ªå±æ€§ï¼Œä¸å¯å†™ä¹Ÿä¸å¯é…ç½®ï¼Œé‚£ä¹ˆ<code>set</code>ä¸å¾—æ”¹å˜è¿™ä¸ªå±æ€§çš„å€¼ï¼Œåªèƒ½è¿”å›åŒæ ·çš„å€¼ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p>
<h3 id="apply"><a href="#apply" class="headerlink" title="apply()"></a>apply()</h3><p><code>apply</code>æ–¹æ³•æ‹¦æˆªå‡½æ•°çš„è°ƒç”¨ã€<code>call</code>å’Œ<code>apply</code>æ“ä½œã€‚</p>
<p><code>apply</code>æ–¹æ³•å¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ç›®æ ‡å¯¹è±¡ã€ç›®æ ‡å¯¹è±¡çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆ<code>this</code>ï¼‰å’Œç›®æ ‡å¯¹è±¡çš„å‚æ•°æ•°ç»„ã€‚</p>
<pre><code class="javascript">var handler = {
  apply (target, ctx, args) {
    return Reflect.apply(...arguments);
  }
};
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var target = function () { return &#39;I am the target&#39;; };
var handler = {
  apply: function () {
    return &#39;I am the proxy&#39;;
  }
};

var p = new Proxy(target, handler);

p()
// &quot;I am the proxy&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>p</code>æ˜¯ Proxy çš„å®ä¾‹ï¼Œå½“å®ƒä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼ˆ<code>p()</code>ï¼‰ï¼Œå°±ä¼šè¢«<code>apply</code>æ–¹æ³•æ‹¦æˆªï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var twice = {
  apply (target, ctx, args) {
    return Reflect.apply(...arguments) * 2;
  }
};
function sum (left, right) {
  return left + right;
};
var proxy = new Proxy(sum, twice);
proxy(1, 2) // 6
proxy.call(null, 5, 6) // 22
proxy.apply(null, [7, 8]) // 30
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¯å½“æ‰§è¡Œ<code>proxy</code>å‡½æ•°ï¼ˆç›´æ¥è°ƒç”¨æˆ–<code>call</code>å’Œ<code>apply</code>è°ƒç”¨ï¼‰ï¼Œå°±ä¼šè¢«<code>apply</code>æ–¹æ³•æ‹¦æˆªã€‚</p>
<p>å¦å¤–ï¼Œç›´æ¥è°ƒç”¨<code>Reflect.apply</code>æ–¹æ³•ï¼Œä¹Ÿä¼šè¢«æ‹¦æˆªã€‚</p>
<pre><code class="javascript">Reflect.apply(proxy, null, [9, 10]) // 38
</code></pre>
<h3 id="has"><a href="#has" class="headerlink" title="has()"></a>has()</h3><p><code>has</code>æ–¹æ³•ç”¨æ¥æ‹¦æˆª<code>HasProperty</code>æ“ä½œï¼Œå³åˆ¤æ–­å¯¹è±¡æ˜¯å¦å…·æœ‰æŸä¸ªå±æ€§æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šç”Ÿæ•ˆã€‚å…¸å‹çš„æ“ä½œå°±æ˜¯<code>in</code>è¿ç®—ç¬¦ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨<code>has</code>æ–¹æ³•éšè—æŸäº›å±æ€§ï¼Œä¸è¢«<code>in</code>è¿ç®—ç¬¦å‘ç°ã€‚</p>
<pre><code class="javascript">var handler = {
  has (target, key) {
    if (key[0] === &#39;_&#39;) {
      return false;
    }
    return key in target;
  }
};
var target = { _prop: &#39;foo&#39;, prop: &#39;foo&#39; };
var proxy = new Proxy(target, handler);
&#39;_prop&#39; in proxy // false
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœåŸå¯¹è±¡çš„å±æ€§åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯ä¸‹åˆ’çº¿ï¼Œ<code>proxy.has</code>å°±ä¼šè¿”å›<code>false</code>ï¼Œä»è€Œä¸ä¼šè¢«<code>in</code>è¿ç®—ç¬¦å‘ç°ã€‚</p>
<p>å¦‚æœåŸå¯¹è±¡ä¸å¯é…ç½®æˆ–è€…ç¦æ­¢æ‰©å±•ï¼Œè¿™æ—¶<code>has</code>æ‹¦æˆªä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">var obj = { a: 10 };
Object.preventExtensions(obj);

var p = new Proxy(obj, {
  has: function(target, prop) {
    return false;
  }
});

&#39;a&#39; in p // TypeError is thrown
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>obj</code>å¯¹è±¡ç¦æ­¢æ‰©å±•ï¼Œç»“æœä½¿ç”¨<code>has</code>æ‹¦æˆªå°±ä¼šæŠ¥é”™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæŸä¸ªå±æ€§ä¸å¯é…ç½®ï¼ˆæˆ–è€…ç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•ï¼‰ï¼Œåˆ™<code>has</code>æ–¹æ³•å°±ä¸å¾—â€œéšè—â€ï¼ˆå³è¿”å›<code>false</code>ï¼‰ç›®æ ‡å¯¹è±¡çš„è¯¥å±æ€§ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>has</code>æ–¹æ³•æ‹¦æˆªçš„æ˜¯<code>HasProperty</code>æ“ä½œï¼Œè€Œä¸æ˜¯<code>HasOwnProperty</code>æ“ä½œï¼Œå³<code>has</code>æ–¹æ³•ä¸åˆ¤æ–­ä¸€ä¸ªå±æ€§æ˜¯å¯¹è±¡è‡ªèº«çš„å±æ€§ï¼Œè¿˜æ˜¯ç»§æ‰¿çš„å±æ€§ã€‚</p>
<p>å¦å¤–ï¼Œè™½ç„¶<code>for...in</code>å¾ªç¯ä¹Ÿç”¨åˆ°äº†<code>in</code>è¿ç®—ç¬¦ï¼Œä½†æ˜¯<code>has</code>æ‹¦æˆªå¯¹<code>for...in</code>å¾ªç¯ä¸ç”Ÿæ•ˆã€‚</p>
<pre><code class="javascript">let stu1 = {name: &#39;å¼ ä¸‰&#39;, score: 59};
let stu2 = {name: &#39;æå››&#39;, score: 99};

let handler = {
  has(target, prop) {
    if (prop === &#39;score&#39; &amp;&amp; target[prop] &lt; 60) {
      console.log(`${target.name} ä¸åŠæ ¼`);
      return false;
    }
    return prop in target;
  }
}

let oproxy1 = new Proxy(stu1, handler);
let oproxy2 = new Proxy(stu2, handler);

&#39;score&#39; in oproxy1
// å¼ ä¸‰ ä¸åŠæ ¼
// false

&#39;score&#39; in oproxy2
// true

for (let a in oproxy1) {
  console.log(oproxy1[a]);
}
// å¼ ä¸‰
// 59

for (let b in oproxy2) {
  console.log(oproxy2[b]);
}
// æå››
// 99
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>has</code>æ‹¦æˆªåªå¯¹<code>in</code>å¾ªç¯ç”Ÿæ•ˆï¼Œå¯¹<code>for...in</code>å¾ªç¯ä¸ç”Ÿæ•ˆï¼Œå¯¼è‡´ä¸ç¬¦åˆè¦æ±‚çš„å±æ€§æ²¡æœ‰è¢«æ’é™¤åœ¨<code>for...in</code>å¾ªç¯ä¹‹å¤–ã€‚</p>
<h3 id="construct"><a href="#construct" class="headerlink" title="construct()"></a>construct()</h3><p><code>construct</code>æ–¹æ³•ç”¨äºæ‹¦æˆª<code>new</code>å‘½ä»¤ï¼Œä¸‹é¢æ˜¯æ‹¦æˆªå¯¹è±¡çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">var handler = {
  construct (target, args, newTarget) {
    return new target(...args);
  }
};
</code></pre>
<p><code>construct</code>æ–¹æ³•å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚</p>
<ul>
<li><code>target</code>: ç›®æ ‡å¯¹è±¡</li>
<li><code>args</code>ï¼šæ„å»ºå‡½æ•°çš„å‚æ•°å¯¹è±¡</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var p = new Proxy(function () {}, {
  construct: function(target, args) {
    console.log(&#39;called: &#39; + args.join(&#39;, &#39;));
    return { value: args[0] * 10 };
  }
});

(new p(1)).value
// &quot;called: 1&quot;
// 10
</code></pre>
<p><code>construct</code>æ–¹æ³•è¿”å›çš„å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">var p = new Proxy(function() {}, {
  construct: function(target, argumentsList) {
    return 1;
  }
});

new p() // æŠ¥é”™
</code></pre>
<h3 id="deleteProperty"><a href="#deleteProperty" class="headerlink" title="deleteProperty()"></a>deleteProperty()</h3><p><code>deleteProperty</code>æ–¹æ³•ç”¨äºæ‹¦æˆª<code>delete</code>æ“ä½œï¼Œå¦‚æœè¿™ä¸ªæ–¹æ³•æŠ›å‡ºé”™è¯¯æˆ–è€…è¿”å›<code>false</code>ï¼Œå½“å‰å±æ€§å°±æ— æ³•è¢«<code>delete</code>å‘½ä»¤åˆ é™¤ã€‚</p>
<pre><code class="javascript">var handler = {
  deleteProperty (target, key) {
    invariant(key, &#39;delete&#39;);
    return true;
  }
};
function invariant (key, action) {
  if (key[0] === &#39;_&#39;) {
    throw new Error(`Invalid attempt to ${action} private &quot;${key}&quot; property`);
  }
}

var target = { _prop: &#39;foo&#39; };
var proxy = new Proxy(target, handler);
delete proxy._prop
// Error: Invalid attempt to delete private &quot;_prop&quot; property
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>deleteProperty</code>æ–¹æ³•æ‹¦æˆªäº†<code>delete</code>æ“ä½œç¬¦ï¼Œåˆ é™¤ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºä¸‹åˆ’çº¿çš„å±æ€§ä¼šæŠ¥é”™ã€‚</p>
<p>æ³¨æ„ï¼Œç›®æ ‡å¯¹è±¡è‡ªèº«çš„ä¸å¯é…ç½®ï¼ˆconfigurableï¼‰çš„å±æ€§ï¼Œä¸èƒ½è¢«<code>deleteProperty</code>æ–¹æ³•åˆ é™¤ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p>
<h3 id="defineProperty"><a href="#defineProperty" class="headerlink" title="defineProperty()"></a>defineProperty()</h3><p><code>defineProperty</code>æ–¹æ³•æ‹¦æˆªäº†<code>Object.defineProperty</code>æ“ä½œã€‚</p>
<pre><code class="javascript">var handler = {
  defineProperty (target, key, descriptor) {
    return false;
  }
};
var target = {};
var proxy = new Proxy(target, handler);
proxy.foo = &#39;bar&#39;
// TypeError: proxy defineProperty handler returned false for property &#39;&quot;foo&quot;&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>defineProperty</code>æ–¹æ³•è¿”å›<code>false</code>ï¼Œå¯¼è‡´æ·»åŠ æ–°å±æ€§ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p>
<p>æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•ï¼ˆextensibleï¼‰ï¼Œåˆ™<code>defineProperty</code>ä¸èƒ½å¢åŠ ç›®æ ‡å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å±æ€§ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚å¦å¤–ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡çš„æŸä¸ªå±æ€§ä¸å¯å†™ï¼ˆwritableï¼‰æˆ–ä¸å¯é…ç½®ï¼ˆconfigurableï¼‰ï¼Œåˆ™<code>defineProperty</code>æ–¹æ³•ä¸å¾—æ”¹å˜è¿™ä¸¤ä¸ªè®¾ç½®ã€‚</p>
<h3 id="getOwnPropertyDescriptor"><a href="#getOwnPropertyDescriptor" class="headerlink" title="getOwnPropertyDescriptor()"></a>getOwnPropertyDescriptor()</h3><p><code>getOwnPropertyDescriptor</code>æ–¹æ³•æ‹¦æˆª<code>Object.getOwnPropertyDescriptor</code>ï¼Œè¿”å›ä¸€ä¸ªå±æ€§æè¿°å¯¹è±¡æˆ–è€…<code>undefined</code>ã€‚</p>
<pre><code class="javascript">var handler = {
  getOwnPropertyDescriptor (target, key) {
    if (key[0] === &#39;_&#39;) {
      return;
    }
    return Object.getOwnPropertyDescriptor(target, key);
  }
};
var target = { _foo: &#39;bar&#39;, baz: &#39;tar&#39; };
var proxy = new Proxy(target, handler);
Object.getOwnPropertyDescriptor(proxy, &#39;wat&#39;)
// undefined
Object.getOwnPropertyDescriptor(proxy, &#39;_foo&#39;)
// undefined
Object.getOwnPropertyDescriptor(proxy, &#39;baz&#39;)
// { value: &#39;tar&#39;, writable: true, enumerable: true, configurable: true }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>handler.getOwnPropertyDescriptor</code>æ–¹æ³•å¯¹äºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºä¸‹åˆ’çº¿çš„å±æ€§åä¼šè¿”å›<code>undefined</code>ã€‚</p>
<h3 id="getPrototypeOf"><a href="#getPrototypeOf" class="headerlink" title="getPrototypeOf()"></a>getPrototypeOf()</h3><p><code>getPrototypeOf</code>æ–¹æ³•ä¸»è¦ç”¨æ¥æ‹¦æˆª<code>Object.getPrototypeOf()</code>è¿ç®—ç¬¦ï¼Œä»¥åŠå…¶ä»–ä¸€äº›æ“ä½œã€‚</p>
<ul>
<li><code>Object.prototype.__proto__</code></li>
<li><code>Object.prototype.isPrototypeOf()</code></li>
<li><code>Object.getPrototypeOf()</code></li>
<li><code>Reflect.getPrototypeOf()</code></li>
<li><code>instanceof</code>è¿ç®—ç¬¦</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var proto = {};
var p = new Proxy({}, {
  getPrototypeOf(target) {
    return proto;
  }
});
Object.getPrototypeOf(p) === proto // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>getPrototypeOf</code>æ–¹æ³•æ‹¦æˆª<code>Object.getPrototypeOf()</code>ï¼Œè¿”å›<code>proto</code>å¯¹è±¡ã€‚</p>
<p>æ³¨æ„ï¼Œ<code>getPrototypeOf</code>æ–¹æ³•çš„è¿”å›å€¼å¿…é¡»æ˜¯å¯¹è±¡æˆ–è€…<code>null</code>ï¼Œå¦åˆ™æŠ¥é”™ã€‚å¦å¤–ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•ï¼ˆextensibleï¼‰ï¼Œ <code>getPrototypeOf</code>æ–¹æ³•å¿…é¡»è¿”å›ç›®æ ‡å¯¹è±¡çš„åŸå‹å¯¹è±¡ã€‚</p>
<h3 id="isExtensible"><a href="#isExtensible" class="headerlink" title="isExtensible()"></a>isExtensible()</h3><p><code>isExtensible</code>æ–¹æ³•æ‹¦æˆª<code>Object.isExtensible</code>æ“ä½œã€‚</p>
<pre><code class="javascript">var p = new Proxy({}, {
  isExtensible: function(target) {
    console.log(&quot;called&quot;);
    return true;
  }
});

Object.isExtensible(p)
// &quot;called&quot;
// true
</code></pre>
<p>ä¸Šé¢ä»£ç è®¾ç½®äº†<code>isExtensible</code>æ–¹æ³•ï¼Œåœ¨è°ƒç”¨<code>Object.isExtensible</code>æ—¶ä¼šè¾“å‡º<code>called</code>ã€‚</p>
<p>æ³¨æ„ï¼Œè¯¥æ–¹æ³•åªèƒ½è¿”å›å¸ƒå°”å€¼ï¼Œå¦åˆ™è¿”å›å€¼ä¼šè¢«è‡ªåŠ¨è½¬ä¸ºå¸ƒå°”å€¼ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªå¼ºé™åˆ¶ï¼Œå®ƒçš„è¿”å›å€¼å¿…é¡»ä¸ç›®æ ‡å¯¹è±¡çš„<code>isExtensible</code>å±æ€§ä¿æŒä¸€è‡´ï¼Œå¦åˆ™å°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p>
<pre><code class="javascript">Object.isExtensible(proxy) === Object.isExtensible(target)
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var p = new Proxy({}, {
  isExtensible: function(target) {
    return false;
  }
});

Object.isExtensible(p) // æŠ¥é”™
</code></pre>
<h3 id="ownKeys"><a href="#ownKeys" class="headerlink" title="ownKeys()"></a>ownKeys()</h3><p><code>ownKeys</code>æ–¹æ³•ç”¨æ¥æ‹¦æˆªä»¥ä¸‹æ“ä½œã€‚</p>
<ul>
<li><code>Object.getOwnPropertyNames()</code></li>
<li><code>Object.getOwnPropertySymbols()</code></li>
<li><code>Object.keys()</code></li>
</ul>
<p>ä¸‹é¢æ˜¯æ‹¦æˆª<code>Object.keys()</code>çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">let target = {
  a: 1,
  b: 2,
  c: 3
};

let handler = {
  ownKeys(target) {
    return [&#39;a&#39;];
  }
};

let proxy = new Proxy(target, handler);

Object.keys(proxy)
// [ &#39;a&#39; ]
</code></pre>
<p>ä¸Šé¢ä»£ç æ‹¦æˆªäº†å¯¹äº<code>target</code>å¯¹è±¡çš„<code>Object.keys()</code>æ“ä½œï¼Œåªè¿”å›<code>a</code>ã€<code>b</code>ã€<code>c</code>ä¸‰ä¸ªå±æ€§ä¹‹ä¸­çš„<code>a</code>å±æ€§ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­æ˜¯æ‹¦æˆªç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºä¸‹åˆ’çº¿çš„å±æ€§åã€‚</p>
<pre><code class="javascript">let target = {
  _bar: &#39;foo&#39;,
  _prop: &#39;bar&#39;,
  prop: &#39;baz&#39;
};

let handler = {
  ownKeys (target) {
    return Reflect.ownKeys(target).filter(key =&gt; key[0] !== &#39;_&#39;);
  }
};

let proxy = new Proxy(target, handler);
for (let key of Object.keys(proxy)) {
  console.log(target[key]);
}
// &quot;baz&quot;
</code></pre>
<p>æ³¨æ„ï¼Œä½¿ç”¨<code>Object.keys</code>æ–¹æ³•æ—¶ï¼Œæœ‰ä¸‰ç±»å±æ€§ä¼šè¢«<code>ownKeys</code>æ–¹æ³•è‡ªåŠ¨è¿‡æ»¤ï¼Œä¸ä¼šè¿”å›ã€‚</p>
<ul>
<li>ç›®æ ‡å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„å±æ€§</li>
<li>å±æ€§åä¸º Symbol å€¼</li>
<li>ä¸å¯éå†ï¼ˆ<code>enumerable</code>ï¼‰çš„å±æ€§</li>
</ul>
<pre><code class="javascript">let target = {
  a: 1,
  b: 2,
  c: 3,
  [Symbol.for(&#39;secret&#39;)]: &#39;4&#39;,
};

Object.defineProperty(target, &#39;key&#39;, {
  enumerable: false,
  configurable: true,
  writable: true,
  value: &#39;static&#39;
});

let handler = {
  ownKeys(target) {
    return [&#39;a&#39;, &#39;d&#39;, Symbol.for(&#39;secret&#39;), &#39;key&#39;];
  }
};

let proxy = new Proxy(target, handler);

Object.keys(proxy)
// [&#39;a&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>ownKeys</code>æ–¹æ³•ä¹‹ä¸­ï¼Œæ˜¾å¼è¿”å›ä¸å­˜åœ¨çš„å±æ€§ï¼ˆ<code>d</code>ï¼‰ã€Symbol å€¼ï¼ˆ<code>Symbol.for(&#39;secret&#39;)</code>ï¼‰ã€ä¸å¯éå†çš„å±æ€§ï¼ˆ<code>key</code>ï¼‰ï¼Œç»“æœéƒ½è¢«è‡ªåŠ¨è¿‡æ»¤æ‰ã€‚</p>
<p><code>ownKeys</code>æ–¹æ³•è¿˜å¯ä»¥æ‹¦æˆª<code>Object.getOwnPropertyNames()</code>ã€‚</p>
<pre><code class="javascript">var p = new Proxy({}, {
  ownKeys: function(target) {
    return [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];
  }
});

Object.getOwnPropertyNames(p)
// [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39; ]
</code></pre>
<p><code>ownKeys</code>æ–¹æ³•è¿”å›çš„æ•°ç»„æˆå‘˜ï¼Œåªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ– Symbol å€¼ã€‚å¦‚æœæœ‰å…¶ä»–ç±»å‹çš„å€¼ï¼Œæˆ–è€…è¿”å›çš„æ ¹æœ¬ä¸æ˜¯æ•°ç»„ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">var obj = {};

var p = new Proxy(obj, {
  ownKeys: function(target) {
    return [123, true, undefined, null, {}, []];
  }
});

Object.getOwnPropertyNames(p)
// Uncaught TypeError: 123 is not a valid property name
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>ownKeys</code>æ–¹æ³•è™½ç„¶è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯æ¯ä¸€ä¸ªæ•°ç»„æˆå‘˜éƒ½ä¸æ˜¯å­—ç¬¦ä¸²æˆ– Symbol å€¼ï¼Œå› æ­¤å°±æŠ¥é”™äº†ã€‚</p>
<p>å¦‚æœç›®æ ‡å¯¹è±¡è‡ªèº«åŒ…å«ä¸å¯é…ç½®çš„å±æ€§ï¼Œåˆ™è¯¥å±æ€§å¿…é¡»è¢«<code>ownKeys</code>æ–¹æ³•è¿”å›ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p>
<pre><code class="javascript">var obj = {};
Object.defineProperty(obj, &#39;a&#39;, {
  configurable: false,
  enumerable: true,
  value: 10 }
);

var p = new Proxy(obj, {
  ownKeys: function(target) {
    return [&#39;b&#39;];
  }
});

Object.getOwnPropertyNames(p)
// Uncaught TypeError: &#39;ownKeys&#39; on proxy: trap result did not include &#39;a&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>obj</code>å¯¹è±¡çš„<code>a</code>å±æ€§æ˜¯ä¸å¯é…ç½®çš„ï¼Œè¿™æ—¶<code>ownKeys</code>æ–¹æ³•è¿”å›çš„æ•°ç»„ä¹‹ä¸­ï¼Œå¿…é¡»åŒ…å«<code>a</code>ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡æ˜¯ä¸å¯æ‰©å±•çš„ï¼ˆnon-extensitionï¼‰ï¼Œè¿™æ—¶<code>ownKeys</code>æ–¹æ³•è¿”å›çš„æ•°ç»„ä¹‹ä¸­ï¼Œå¿…é¡»åŒ…å«åŸå¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œä¸”ä¸èƒ½åŒ…å«å¤šä½™çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p>
<pre><code class="javascript">var obj = {
  a: 1
};

Object.preventExtensions(obj);

var p = new Proxy(obj, {
  ownKeys: function(target) {
    return [&#39;a&#39;, &#39;b&#39;];
  }
});

Object.getOwnPropertyNames(p)
// Uncaught TypeError: &#39;ownKeys&#39; on proxy: trap returned extra keys but proxy target is non-extensible
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Obj</code>å¯¹è±¡æ˜¯ä¸å¯æ‰©å±•çš„ï¼Œè¿™æ—¶<code>ownKeys</code>æ–¹æ³•è¿”å›çš„æ•°ç»„ä¹‹ä¸­ï¼ŒåŒ…å«äº†<code>obj</code>å¯¹è±¡çš„å¤šä½™å±æ€§<code>b</code>ï¼Œæ‰€ä»¥å¯¼è‡´äº†æŠ¥é”™ã€‚</p>
<h3 id="preventExtensions"><a href="#preventExtensions" class="headerlink" title="preventExtensions()"></a>preventExtensions()</h3><p><code>preventExtensions</code>æ–¹æ³•æ‹¦æˆª<code>Object.preventExtensions()</code>ã€‚è¯¥æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦åˆ™ä¼šè¢«è‡ªåŠ¨è½¬ä¸ºå¸ƒå°”å€¼ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªé™åˆ¶ï¼Œåªæœ‰ç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•æ—¶ï¼ˆå³<code>Object.isExtensible(proxy)</code>ä¸º<code>false</code>ï¼‰ï¼Œ<code>proxy.preventExtensions</code>æ‰èƒ½è¿”å›<code>true</code>ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">var p = new Proxy({}, {
  preventExtensions: function(target) {
    return true;
  }
});

Object.preventExtensions(p) // æŠ¥é”™
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>proxy.preventExtensions</code>æ–¹æ³•è¿”å›<code>true</code>ï¼Œä½†è¿™æ—¶<code>Object.isExtensible(proxy)</code>ä¼šè¿”å›<code>true</code>ï¼Œå› æ­¤æŠ¥é”™ã€‚</p>
<p>ä¸ºäº†é˜²æ­¢å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œé€šå¸¸è¦åœ¨<code>proxy.preventExtensions</code>æ–¹æ³•é‡Œé¢ï¼Œè°ƒç”¨ä¸€æ¬¡<code>Object.preventExtensions</code>ã€‚</p>
<pre><code class="javascript">var p = new Proxy({}, {
  preventExtensions: function(target) {
    console.log(&#39;called&#39;);
    Object.preventExtensions(target);
    return true;
  }
});

Object.preventExtensions(p)
// &quot;called&quot;
// true
</code></pre>
<h3 id="setPrototypeOf"><a href="#setPrototypeOf" class="headerlink" title="setPrototypeOf()"></a>setPrototypeOf()</h3><p><code>setPrototypeOf</code>æ–¹æ³•ä¸»è¦ç”¨æ¥æ‹¦æˆª<code>Object.setPrototypeOf</code>æ–¹æ³•ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var handler = {
  setPrototypeOf (target, proto) {
    throw new Error(&#39;Changing the prototype is forbidden&#39;);
  }
};
var proto = {};
var target = function () {};
var proxy = new Proxy(target, handler);
proxy.setPrototypeOf(proxy, proto);
// Error: Changing the prototype is forbidden
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦ä¿®æ”¹<code>target</code>çš„åŸå‹å¯¹è±¡ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<p>æ³¨æ„ï¼Œè¯¥æ–¹æ³•åªèƒ½è¿”å›å¸ƒå°”å€¼ï¼Œå¦åˆ™ä¼šè¢«è‡ªåŠ¨è½¬ä¸ºå¸ƒå°”å€¼ã€‚å¦å¤–ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸å¯æ‰©å±•ï¼ˆextensibleï¼‰ï¼Œ<code>setPrototypeOf</code>æ–¹æ³•ä¸å¾—æ”¹å˜ç›®æ ‡å¯¹è±¡çš„åŸå‹ã€‚</p>
<h2 id="Proxy-revocable"><a href="#Proxy-revocable" class="headerlink" title="Proxy.revocable()"></a>Proxy.revocable()</h2><p><code>Proxy.revocable</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¯å–æ¶ˆçš„ Proxy å®ä¾‹ã€‚</p>
<pre><code class="javascript">let target = {};
let handler = {};

let {proxy, revoke} = Proxy.revocable(target, handler);

proxy.foo = 123;
proxy.foo // 123

revoke();
proxy.foo // TypeError: Revoked
</code></pre>
<p><code>Proxy.revocable</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„<code>proxy</code>å±æ€§æ˜¯<code>Proxy</code>å®ä¾‹ï¼Œ<code>revoke</code>å±æ€§æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥å–æ¶ˆ<code>Proxy</code>å®ä¾‹ã€‚ä¸Šé¢ä»£ç ä¸­ï¼Œå½“æ‰§è¡Œ<code>revoke</code>å‡½æ•°ä¹‹åï¼Œå†è®¿é—®<code>Proxy</code>å®ä¾‹ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p>
<p><code>Proxy.revocable</code>çš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯æ˜¯ï¼Œç›®æ ‡å¯¹è±¡ä¸å…è®¸ç›´æ¥è®¿é—®ï¼Œå¿…é¡»é€šè¿‡ä»£ç†è®¿é—®ï¼Œä¸€æ—¦è®¿é—®ç»“æŸï¼Œå°±æ”¶å›ä»£ç†æƒï¼Œä¸å…è®¸å†æ¬¡è®¿é—®ã€‚</p>
<h2 id="this-é—®é¢˜"><a href="#this-é—®é¢˜" class="headerlink" title="this é—®é¢˜"></a>this é—®é¢˜</h2><p>è™½ç„¶ Proxy å¯ä»¥ä»£ç†é’ˆå¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ï¼Œä½†å®ƒä¸æ˜¯ç›®æ ‡å¯¹è±¡çš„é€æ˜ä»£ç†ï¼Œå³ä¸åšä»»ä½•æ‹¦æˆªçš„æƒ…å†µä¸‹ï¼Œä¹Ÿæ— æ³•ä¿è¯ä¸ç›®æ ‡å¯¹è±¡çš„è¡Œä¸ºä¸€è‡´ã€‚ä¸»è¦åŸå› å°±æ˜¯åœ¨ Proxy ä»£ç†çš„æƒ…å†µä¸‹ï¼Œç›®æ ‡å¯¹è±¡å†…éƒ¨çš„<code>this</code>å…³é”®å­—ä¼šæŒ‡å‘ Proxy ä»£ç†ã€‚</p>
<pre><code class="javascript">const target = {
  m: function () {
    console.log(this === proxy);
  }
};
const handler = {};

const proxy = new Proxy(target, handler);

target.m() // false
proxy.m()  // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¸€æ—¦<code>proxy</code>ä»£ç†<code>target.m</code>ï¼Œåè€…å†…éƒ¨çš„<code>this</code>å°±æ˜¯æŒ‡å‘<code>proxy</code>ï¼Œè€Œä¸æ˜¯<code>target</code>ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œç”±äº<code>this</code>æŒ‡å‘çš„å˜åŒ–ï¼Œå¯¼è‡´ Proxy æ— æ³•ä»£ç†ç›®æ ‡å¯¹è±¡ã€‚</p>
<pre><code class="javascript">const _name = new WeakMap();

class Person {
  constructor(name) {
    _name.set(this, name);
  }
  get name() {
    return _name.get(this);
  }
}

const jane = new Person(&#39;Jane&#39;);
jane.name // &#39;Jane&#39;

const proxy = new Proxy(jane, {});
proxy.name // undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç›®æ ‡å¯¹è±¡<code>jane</code>çš„<code>name</code>å±æ€§ï¼Œå®é™…ä¿å­˜åœ¨å¤–éƒ¨<code>WeakMap</code>å¯¹è±¡<code>_name</code>ä¸Šé¢ï¼Œé€šè¿‡<code>this</code>é”®åŒºåˆ†ã€‚ç”±äºé€šè¿‡<code>proxy.name</code>è®¿é—®æ—¶ï¼Œ<code>this</code>æŒ‡å‘<code>proxy</code>ï¼Œå¯¼è‡´æ— æ³•å–åˆ°å€¼ï¼Œæ‰€ä»¥è¿”å›<code>undefined</code>ã€‚</p>
<p>æ­¤å¤–ï¼Œæœ‰äº›åŸç”Ÿå¯¹è±¡çš„å†…éƒ¨å±æ€§ï¼Œåªæœ‰é€šè¿‡æ­£ç¡®çš„<code>this</code>æ‰èƒ½æ‹¿åˆ°ï¼Œæ‰€ä»¥ Proxy ä¹Ÿæ— æ³•ä»£ç†è¿™äº›åŸç”Ÿå¯¹è±¡çš„å±æ€§ã€‚</p>
<pre><code class="javascript">const target = new Date();
const handler = {};
const proxy = new Proxy(target, handler);

proxy.getDate();
// TypeError: this is not a Date object.
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>getDate</code>æ–¹æ³•åªèƒ½åœ¨<code>Date</code>å¯¹è±¡å®ä¾‹ä¸Šé¢æ‹¿åˆ°ï¼Œå¦‚æœ<code>this</code>ä¸æ˜¯<code>Date</code>å¯¹è±¡å®ä¾‹å°±ä¼šæŠ¥é”™ã€‚è¿™æ—¶ï¼Œ<code>this</code>ç»‘å®šåŸå§‹å¯¹è±¡ï¼Œå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<pre><code class="javascript">const target = new Date(&#39;2015-01-01&#39;);
const handler = {
  get(target, prop) {
    if (prop === &#39;getDate&#39;) {
      return target.getDate.bind(target);
    }
    return Reflect.get(target, prop);
  }
};
const proxy = new Proxy(target, handler);

proxy.getDate() // 1
</code></pre>
<h2 id="å®ä¾‹ï¼šWeb-æœåŠ¡çš„å®¢æˆ·ç«¯"><a href="#å®ä¾‹ï¼šWeb-æœåŠ¡çš„å®¢æˆ·ç«¯" class="headerlink" title="å®ä¾‹ï¼šWeb æœåŠ¡çš„å®¢æˆ·ç«¯"></a>å®ä¾‹ï¼šWeb æœåŠ¡çš„å®¢æˆ·ç«¯</h2><p>Proxy å¯¹è±¡å¯ä»¥æ‹¦æˆªç›®æ ‡å¯¹è±¡çš„ä»»æ„å±æ€§ï¼Œè¿™ä½¿å¾—å®ƒå¾ˆåˆé€‚ç”¨æ¥å†™ Web æœåŠ¡çš„å®¢æˆ·ç«¯ã€‚</p>
<pre><code class="javascript">const service = createWebService(&#39;http://example.com/data&#39;);

service.employees().then(json =&gt; {
  const employees = JSON.parse(json);
  // Â·Â·Â·
});
</code></pre>
<p>ä¸Šé¢ä»£ç æ–°å»ºäº†ä¸€ä¸ª Web æœåŠ¡çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£è¿”å›å„ç§æ•°æ®ã€‚Proxy å¯ä»¥æ‹¦æˆªè¿™ä¸ªå¯¹è±¡çš„ä»»æ„å±æ€§ï¼Œæ‰€ä»¥ä¸ç”¨ä¸ºæ¯ä¸€ç§æ•°æ®å†™ä¸€ä¸ªé€‚é…æ–¹æ³•ï¼Œåªè¦å†™ä¸€ä¸ª Proxy æ‹¦æˆªå°±å¯ä»¥äº†ã€‚</p>
<pre><code class="javascript">function createWebService(baseUrl) {
  return new Proxy({}, {
    get(target, propKey, receiver) {
      return () =&gt; httpGet(baseUrl+&#39;/&#39; + propKey);
    }
  });
}
</code></pre>
<p>åŒç†ï¼ŒProxy ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°æ•°æ®åº“çš„ ORM å±‚ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Proxy&quot;&gt;&lt;a href=&quot;#Proxy&quot; class=&quot;headerlink&quot; title=&quot;Proxy&quot;&gt;&lt;/a&gt;Proxy&lt;/h1&gt;&lt;h2 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ¦‚
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Proxy" scheme="https://microzz.com/tags/Proxy/"/>
    
  </entry>
  
  <entry>
    <title>Setå’ŒMapæ•°æ®ç»“æ„</title>
    <link href="https://microzz.com/2017/01/05/set-map/"/>
    <id>https://microzz.com/2017/01/05/set-map/</id>
    <published>2017-01-05T03:40:19.000Z</published>
    <updated>2017-01-12T08:16:10.817Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Setå’ŒMapæ•°æ®ç»“æ„"><a href="#Setå’ŒMapæ•°æ®ç»“æ„" class="headerlink" title="Setå’ŒMapæ•°æ®ç»“æ„"></a>Setå’ŒMapæ•°æ®ç»“æ„</h1><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>ES6æä¾›äº†æ–°çš„æ•°æ®ç»“æ„Setã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚</p>
<p>Setæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆSetæ•°æ®ç»“æ„ã€‚</p>
<pre><code class="javascript">var s = new Set();

[2, 3, 5, 4, 5, 2, 2].map(x =&gt; s.add(x));

for (let i of s) {
  console.log(i);
}
// 2 3 5 4
</code></pre>
<p>ä¸Šé¢ä»£ç é€šè¿‡<code>add</code>æ–¹æ³•å‘Setç»“æ„åŠ å…¥æˆå‘˜ï¼Œç»“æœè¡¨æ˜Setç»“æ„ä¸ä¼šæ·»åŠ é‡å¤çš„å€¼ã€‚</p>
<p>Setå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼‰ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–ã€‚</p>
<pre><code class="javascript">// ä¾‹ä¸€
var set = new Set([1, 2, 3, 4, 4]);
[...set]
// [1, 2, 3, 4]

// ä¾‹äºŒ
var items = new Set([1, 2, 3, 4, 5, 5, 5, 5]);
items.size // 5

// ä¾‹ä¸‰
function divs () {
  return [...document.querySelectorAll(&#39;div&#39;)];
}

var set = new Set(divs());
set.size // 56

// ç±»ä¼¼äº
divs().forEach(div =&gt; set.add(div));
set.size // 56
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¾‹ä¸€å’Œä¾‹äºŒéƒ½æ˜¯<code>Set</code>å‡½æ•°æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œä¾‹ä¸‰æ˜¯æ¥å—ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚</p>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¹Ÿå±•ç¤ºäº†ä¸€ç§å»é™¤æ•°ç»„é‡å¤æˆå‘˜çš„æ–¹æ³•ã€‚</p>
<pre><code class="javascript">// å»é™¤æ•°ç»„çš„é‡å¤æˆå‘˜
[...new Set(array)]
</code></pre>
<p>å‘SetåŠ å…¥å€¼çš„æ—¶å€™ï¼Œä¸ä¼šå‘ç”Ÿç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥<code>5</code>å’Œ<code>&quot;5&quot;</code>æ˜¯ä¸¤ä¸ªä¸åŒçš„å€¼ã€‚Setå†…éƒ¨åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ä¸åŒï¼Œä½¿ç”¨çš„ç®—æ³•å«åšâ€œSame-value equalityâ€ï¼Œå®ƒç±»ä¼¼äºç²¾ç¡®ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ<code>===</code>ï¼‰ï¼Œä¸»è¦çš„åŒºåˆ«æ˜¯<code>NaN</code>ç­‰äºè‡ªèº«ï¼Œè€Œç²¾ç¡®ç›¸ç­‰è¿ç®—ç¬¦è®¤ä¸º<code>NaN</code>ä¸ç­‰äºè‡ªèº«ã€‚</p>
<pre><code class="javascript">let set = new Set();
let a = NaN;
let b = NaN;
set.add(a);
set.add(b);
set // Set {NaN}
</code></pre>
<p>ä¸Šé¢ä»£ç å‘Setå®ä¾‹æ·»åŠ äº†ä¸¤ä¸ª<code>NaN</code>ï¼Œä½†æ˜¯åªèƒ½åŠ å…¥ä¸€ä¸ªã€‚è¿™è¡¨æ˜ï¼Œåœ¨Setå†…éƒ¨ï¼Œä¸¤ä¸ª<code>NaN</code>æ˜¯ç›¸ç­‰ã€‚</p>
<p>å¦å¤–ï¼Œä¸¤ä¸ªå¯¹è±¡æ€»æ˜¯ä¸ç›¸ç­‰çš„ã€‚</p>
<pre><code class="javascript">let set = new Set();

set.add({});
set.size // 1

set.add({});
set.size // 2
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œç”±äºä¸¤ä¸ªç©ºå¯¹è±¡ä¸ç›¸ç­‰ï¼Œæ‰€ä»¥å®ƒä»¬è¢«è§†ä¸ºä¸¤ä¸ªå€¼ã€‚</p>
<h3 id="Setå®ä¾‹çš„å±æ€§å’Œæ–¹æ³•"><a href="#Setå®ä¾‹çš„å±æ€§å’Œæ–¹æ³•" class="headerlink" title="Setå®ä¾‹çš„å±æ€§å’Œæ–¹æ³•"></a>Setå®ä¾‹çš„å±æ€§å’Œæ–¹æ³•</h3><p>Setç»“æ„çš„å®ä¾‹æœ‰ä»¥ä¸‹å±æ€§ã€‚</p>
<ul>
<li><code>Set.prototype.constructor</code>ï¼šæ„é€ å‡½æ•°ï¼Œé»˜è®¤å°±æ˜¯<code>Set</code>å‡½æ•°ã€‚</li>
<li><code>Set.prototype.size</code>ï¼šè¿”å›<code>Set</code>å®ä¾‹çš„æˆå‘˜æ€»æ•°ã€‚</li>
</ul>
<p>Setå®ä¾‹çš„æ–¹æ³•åˆ†ä¸ºä¸¤å¤§ç±»ï¼šæ“ä½œæ–¹æ³•ï¼ˆç”¨äºæ“ä½œæ•°æ®ï¼‰å’Œéå†æ–¹æ³•ï¼ˆç”¨äºéå†æˆå‘˜ï¼‰ã€‚ä¸‹é¢å…ˆä»‹ç»å››ä¸ªæ“ä½œæ–¹æ³•ã€‚</p>
<ul>
<li><code>add(value)</code>ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å›Setç»“æ„æœ¬èº«ã€‚</li>
<li><code>delete(value)</code>ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸã€‚</li>
<li><code>has(value)</code>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸º<code>Set</code>çš„æˆå‘˜ã€‚</li>
<li><code>clear()</code>ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</li>
</ul>
<p>ä¸Šé¢è¿™äº›å±æ€§å’Œæ–¹æ³•çš„å®ä¾‹å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">s.add(1).add(2).add(2);
// æ³¨æ„2è¢«åŠ å…¥äº†ä¸¤æ¬¡

s.size // 2

s.has(1) // true
s.has(2) // true
s.has(3) // false

s.delete(2);
s.has(2) // false
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹æ¯”ï¼Œçœ‹çœ‹åœ¨åˆ¤æ–­æ˜¯å¦åŒ…æ‹¬ä¸€ä¸ªé”®ä¸Šé¢ï¼Œ<code>Object</code>ç»“æ„å’Œ<code>Set</code>ç»“æ„çš„å†™æ³•ä¸åŒã€‚</p>
<pre><code class="javascript">// å¯¹è±¡çš„å†™æ³•
var properties = {
  &#39;width&#39;: 1,
  &#39;height&#39;: 1
};

if (properties[someName]) {
  // do something
}

// Setçš„å†™æ³•
var properties = new Set();

properties.add(&#39;width&#39;);
properties.add(&#39;height&#39;);

if (properties.has(someName)) {
  // do something
}
</code></pre>
<p><code>Array.from</code>æ–¹æ³•å¯ä»¥å°†Setç»“æ„è½¬ä¸ºæ•°ç»„ã€‚</p>
<pre><code class="javascript">var items = new Set([1, 2, 3, 4, 5]);
var array = Array.from(items);
</code></pre>
<p>è¿™å°±æä¾›äº†å»é™¤æ•°ç»„é‡å¤æˆå‘˜çš„å¦ä¸€ç§æ–¹æ³•ã€‚</p>
<pre><code class="javascript">function dedupe(array) {
  return Array.from(new Set(array));
}

dedupe([1, 1, 2, 3]) // [1, 2, 3]
</code></pre>
<h3 id="éå†æ“ä½œ"><a href="#éå†æ“ä½œ" class="headerlink" title="éå†æ“ä½œ"></a>éå†æ“ä½œ</h3><p>Setç»“æ„çš„å®ä¾‹æœ‰å››ä¸ªéå†æ–¹æ³•ï¼Œå¯ä»¥ç”¨äºéå†æˆå‘˜ã€‚</p>
<ul>
<li><code>keys()</code>ï¼šè¿”å›é”®åçš„éå†å™¨</li>
<li><code>values()</code>ï¼šè¿”å›é”®å€¼çš„éå†å™¨</li>
<li><code>entries()</code>ï¼šè¿”å›é”®å€¼å¯¹çš„éå†å™¨</li>
<li><code>forEach()</code>ï¼šä½¿ç”¨å›è°ƒå‡½æ•°éå†æ¯ä¸ªæˆå‘˜</li>
</ul>
<p>éœ€è¦ç‰¹åˆ«æŒ‡å‡ºçš„æ˜¯ï¼Œ<code>Set</code>çš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºã€‚è¿™ä¸ªç‰¹æ€§æœ‰æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ä½¿ç”¨Setä¿å­˜ä¸€ä¸ªå›è°ƒå‡½æ•°åˆ—è¡¨ï¼Œè°ƒç”¨æ—¶å°±èƒ½ä¿è¯æŒ‰ç…§æ·»åŠ é¡ºåºè°ƒç”¨ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰<code>keys()</code>ï¼Œ<code>values()</code>ï¼Œ<code>entries()</code></strong></p>
<p><code>keys</code>æ–¹æ³•ã€<code>values</code>æ–¹æ³•ã€<code>entries</code>æ–¹æ³•è¿”å›çš„éƒ½æ˜¯éå†å™¨å¯¹è±¡ï¼ˆè¯¦è§ã€ŠIterator å¯¹è±¡ã€‹ä¸€ç« ï¼‰ã€‚ç”±äº Set ç»“æ„æ²¡æœ‰é”®åï¼Œåªæœ‰é”®å€¼ï¼ˆæˆ–è€…è¯´é”®åå’Œé”®å€¼æ˜¯åŒä¸€ä¸ªå€¼ï¼‰ï¼Œæ‰€ä»¥<code>keys</code>æ–¹æ³•å’Œ<code>values</code>æ–¹æ³•çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚</p>
<pre><code class="javascript">let set = new Set([&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;]);

for (let item of set.keys()) {
  console.log(item);
}
// red
// green
// blue

for (let item of set.values()) {
  console.log(item);
}
// red
// green
// blue

for (let item of set.entries()) {
  console.log(item);
}
// [&quot;red&quot;, &quot;red&quot;]
// [&quot;green&quot;, &quot;green&quot;]
// [&quot;blue&quot;, &quot;blue&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>entries</code>æ–¹æ³•è¿”å›çš„éå†å™¨ï¼ŒåŒæ—¶åŒ…æ‹¬é”®åå’Œé”®å€¼ï¼Œæ‰€ä»¥æ¯æ¬¡è¾“å‡ºä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ä¸¤ä¸ªæˆå‘˜å®Œå…¨ç›¸ç­‰ã€‚</p>
<p>Setç»“æ„çš„å®ä¾‹é»˜è®¤å¯éå†ï¼Œå®ƒçš„é»˜è®¤éå†å™¨ç”Ÿæˆå‡½æ•°å°±æ˜¯å®ƒçš„<code>values</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">Set.prototype[Symbol.iterator] === Set.prototype.values
// true
</code></pre>
<p>è¿™æ„å‘³ç€ï¼Œå¯ä»¥çœç•¥<code>values</code>æ–¹æ³•ï¼Œç›´æ¥ç”¨<code>for...of</code>å¾ªç¯éå†Setã€‚</p>
<pre><code class="javascript">let set = new Set([&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;]);

for (let x of set) {
  console.log(x);
}
// red
// green
// blue
</code></pre>
<p><strong>ï¼ˆ2ï¼‰<code>forEach()</code></strong></p>
<p>Setç»“æ„çš„å®ä¾‹çš„<code>forEach</code>æ–¹æ³•ï¼Œç”¨äºå¯¹æ¯ä¸ªæˆå‘˜æ‰§è¡ŒæŸç§æ“ä½œï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</p>
<pre><code class="javascript">let set = new Set([1, 2, 3]);
set.forEach((value, key) =&gt; console.log(value * 2) )
// 2
// 4
// 6
</code></pre>
<p>ä¸Šé¢ä»£ç è¯´æ˜ï¼Œ<code>forEach</code>æ–¹æ³•çš„å‚æ•°å°±æ˜¯ä¸€ä¸ªå¤„ç†å‡½æ•°ã€‚è¯¥å‡½æ•°çš„å‚æ•°ä¾æ¬¡ä¸ºé”®å€¼ã€é”®åã€é›†åˆæœ¬èº«ï¼ˆä¸Šä¾‹çœç•¥äº†è¯¥å‚æ•°ï¼‰ã€‚å¦å¤–ï¼Œ<code>forEach</code>æ–¹æ³•è¿˜å¯ä»¥æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºç»‘å®šçš„thiså¯¹è±¡ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰éå†çš„åº”ç”¨</strong></p>
<p>æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰å†…éƒ¨ä½¿ç”¨<code>for...of</code>å¾ªç¯ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç”¨äºSetç»“æ„ã€‚</p>
<pre><code class="javascript">let set = new Set([&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;]);
let arr = [...set];
// [&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;]
</code></pre>
<p>æ‰©å±•è¿ç®—ç¬¦å’ŒSetç»“æ„ç›¸ç»“åˆï¼Œå°±å¯ä»¥å»é™¤æ•°ç»„çš„é‡å¤æˆå‘˜ã€‚</p>
<pre><code class="javascript">let arr = [3, 5, 2, 2, 5, 5];
let unique = [...new Set(arr)];
// [3, 5, 2]
</code></pre>
<p>è€Œä¸”ï¼Œæ•°ç»„çš„<code>map</code>å’Œ<code>filter</code>æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨äºSetäº†ã€‚</p>
<pre><code class="javascript">let set = new Set([1, 2, 3]);
set = new Set([...set].map(x =&gt; x * 2));
// è¿”å›Setç»“æ„ï¼š{2, 4, 6}

let set = new Set([1, 2, 3, 4, 5]);
set = new Set([...set].filter(x =&gt; (x % 2) == 0));
// è¿”å›Setç»“æ„ï¼š{2, 4}
</code></pre>
<p>å› æ­¤ä½¿ç”¨Setå¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°å¹¶é›†ï¼ˆUnionï¼‰ã€äº¤é›†ï¼ˆIntersectï¼‰å’Œå·®é›†ï¼ˆDifferenceï¼‰ã€‚</p>
<pre><code class="javascript">let a = new Set([1, 2, 3]);
let b = new Set([4, 3, 2]);

// å¹¶é›†
let union = new Set([...a, ...b]);
// Set {1, 2, 3, 4}

// äº¤é›†
let intersect = new Set([...a].filter(x =&gt; b.has(x)));
// set {2, 3}

// å·®é›†
let difference = new Set([...a].filter(x =&gt; !b.has(x)));
// Set {1}
</code></pre>
<p>å¦‚æœæƒ³åœ¨éå†æ“ä½œä¸­ï¼ŒåŒæ­¥æ”¹å˜åŸæ¥çš„Setç»“æ„ï¼Œç›®å‰æ²¡æœ‰ç›´æ¥çš„æ–¹æ³•ï¼Œä½†æœ‰ä¸¤ç§å˜é€šæ–¹æ³•ã€‚ä¸€ç§æ˜¯åˆ©ç”¨åŸSetç»“æ„æ˜ å°„å‡ºä¸€ä¸ªæ–°çš„ç»“æ„ï¼Œç„¶åèµ‹å€¼ç»™åŸæ¥çš„Setç»“æ„ï¼›å¦ä¸€ç§æ˜¯åˆ©ç”¨<code>Array.from</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">// æ–¹æ³•ä¸€
let set = new Set([1, 2, 3]);
set = new Set([...set].map(val =&gt; val * 2));
// setçš„å€¼æ˜¯2, 4, 6

// æ–¹æ³•äºŒ
let set = new Set([1, 2, 3]);
set = new Set(Array.from(set, val =&gt; val * 2));
// setçš„å€¼æ˜¯2, 4, 6
</code></pre>
<p>ä¸Šé¢ä»£ç æä¾›äº†ä¸¤ç§æ–¹æ³•ï¼Œç›´æ¥åœ¨éå†æ“ä½œä¸­æ”¹å˜åŸæ¥çš„Setç»“æ„ã€‚</p>
<h2 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h2><p>WeakSetç»“æ„ä¸Setç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸é‡å¤çš„å€¼çš„é›†åˆã€‚ä½†æ˜¯ï¼Œå®ƒä¸Setæœ‰ä¸¤ä¸ªåŒºåˆ«ã€‚</p>
<p>é¦–å…ˆï¼ŒWeakSetçš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ï¼Œè€Œä¸èƒ½æ˜¯å…¶ä»–ç±»å‹çš„å€¼ã€‚</p>
<p>å…¶æ¬¡ï¼ŒWeakSetä¸­çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘WeakSetå¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå…¶ä»–å¯¹è±¡éƒ½ä¸å†å¼•ç”¨è¯¥å¯¹è±¡ï¼Œé‚£ä¹ˆåƒåœ¾å›æ”¶æœºåˆ¶ä¼šè‡ªåŠ¨å›æ”¶è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ï¼Œä¸è€ƒè™‘è¯¥å¯¹è±¡è¿˜å­˜åœ¨äºWeakSetä¹‹ä¸­ã€‚è¿™ä¸ªç‰¹ç‚¹æ„å‘³ç€ï¼Œæ— æ³•å¼•ç”¨WeakSetçš„æˆå‘˜ï¼Œå› æ­¤WeakSetæ˜¯ä¸å¯éå†çš„ã€‚</p>
<pre><code class="javascript">var ws = new WeakSet();
ws.add(1)
// TypeError: Invalid value used in weak set
ws.add(Symbol())
// TypeError: invalid value used in weak set
</code></pre>
<p>ä¸Šé¢ä»£ç è¯•å›¾å‘WeakSetæ·»åŠ ä¸€ä¸ªæ•°å€¼å’Œ<code>Symbol</code>å€¼ï¼Œç»“æœæŠ¥é”™ï¼Œå› ä¸ºWeakSetåªèƒ½æ”¾ç½®å¯¹è±¡ã€‚</p>
<p>WeakSetæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨<code>new</code>å‘½ä»¤ï¼Œåˆ›å»ºWeakSetæ•°æ®ç»“æ„ã€‚</p>
<pre><code class="javascript">var ws = new WeakSet();
</code></pre>
<p>ä½œä¸ºæ„é€ å‡½æ•°ï¼ŒWeakSetå¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„æˆ–ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚ï¼ˆå®é™…ä¸Šï¼Œä»»ä½•å…·æœ‰iterableæ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½œä¸ºWeakSetçš„å‚æ•°ã€‚ï¼‰è¯¥æ•°ç»„çš„æ‰€æœ‰æˆå‘˜ï¼Œéƒ½ä¼šè‡ªåŠ¨æˆä¸ºWeakSetå®ä¾‹å¯¹è±¡çš„æˆå‘˜ã€‚</p>
<pre><code class="javascript">var a = [[1,2], [3,4]];
var ws = new WeakSet(a);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>a</code>æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒæœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œä¹Ÿéƒ½æ˜¯æ•°ç»„ã€‚å°†<code>a</code>ä½œä¸ºWeakSetæ„é€ å‡½æ•°çš„å‚æ•°ï¼Œ<code>a</code>çš„æˆå‘˜ä¼šè‡ªåŠ¨æˆä¸ºWeakSetçš„æˆå‘˜ã€‚</p>
<p>æ³¨æ„ï¼Œæ˜¯<code>a</code>æ•°ç»„çš„æˆå‘˜æˆä¸ºWeakSetçš„æˆå‘˜ï¼Œè€Œä¸æ˜¯<code>a</code>æ•°ç»„æœ¬èº«ã€‚è¿™æ„å‘³ç€ï¼Œæ•°ç»„çš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ã€‚</p>
<pre><code class="javascript">var b = [3, 4];
var ws = new WeakSet(b);
// Uncaught TypeError: Invalid value used in weak set(â€¦)
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„<code>b</code>çš„æˆå‘˜ä¸æ˜¯å¯¹è±¡ï¼ŒåŠ å…¥WeaKSetå°±ä¼šæŠ¥é”™ã€‚</p>
<p>WeakSetç»“æ„æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ã€‚</p>
<ul>
<li><strong>WeakSet.prototype.add(value)</strong>ï¼šå‘WeakSetå®ä¾‹æ·»åŠ ä¸€ä¸ªæ–°æˆå‘˜ã€‚</li>
<li><strong>WeakSet.prototype.delete(value)</strong>ï¼šæ¸…é™¤WeakSetå®ä¾‹çš„æŒ‡å®šæˆå‘˜ã€‚</li>
<li><strong>WeakSet.prototype.has(value)</strong>ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªå€¼æ˜¯å¦åœ¨WeakSetå®ä¾‹ä¹‹ä¸­ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var ws = new WeakSet();
var obj = {};
var foo = {};

ws.add(window);
ws.add(obj);

ws.has(window); // true
ws.has(foo);    // false

ws.delete(window);
ws.has(window);    // false
</code></pre>
<p>WeakSetæ²¡æœ‰<code>size</code>å±æ€§ï¼Œæ²¡æœ‰åŠæ³•éå†å®ƒçš„æˆå‘˜ã€‚</p>
<pre><code class="javascript">ws.size // undefined
ws.forEach // undefined

ws.forEach(function(item){ console.log(&#39;WeakSet has &#39; + item)})
// TypeError: undefined is not a function
</code></pre>
<p>ä¸Šé¢ä»£ç è¯•å›¾è·å–<code>size</code>å’Œ<code>forEach</code>å±æ€§ï¼Œç»“æœéƒ½ä¸èƒ½æˆåŠŸã€‚</p>
<p>WeakSetä¸èƒ½éå†ï¼Œæ˜¯å› ä¸ºæˆå‘˜éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œéšæ—¶å¯èƒ½æ¶ˆå¤±ï¼Œéå†æœºåˆ¶æ— æ³•ä¿è¯æˆå‘˜çš„å­˜åœ¨ï¼Œå¾ˆå¯èƒ½åˆšåˆšéå†ç»“æŸï¼Œæˆå‘˜å°±å–ä¸åˆ°äº†ã€‚WeakSetçš„ä¸€ä¸ªç”¨å¤„ï¼Œæ˜¯å‚¨å­˜DOMèŠ‚ç‚¹ï¼Œè€Œä¸ç”¨æ‹…å¿ƒè¿™äº›èŠ‚ç‚¹ä»æ–‡æ¡£ç§»é™¤æ—¶ï¼Œä¼šå¼•å‘å†…å­˜æ³„æ¼ã€‚</p>
<p>ä¸‹é¢æ˜¯WeakSetçš„å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">const foos = new WeakSet()
class Foo {
  constructor() {
    foos.add(this)
  }
  method () {
    if (!foos.has(this)) {
      throw new TypeError(&#39;Foo.prototype.method åªèƒ½åœ¨Fooçš„å®ä¾‹ä¸Šè°ƒç”¨ï¼&#39;);
    }
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¿è¯äº†<code>Foo</code>çš„å®ä¾‹æ–¹æ³•ï¼Œåªèƒ½åœ¨<code>Foo</code>çš„å®ä¾‹ä¸Šè°ƒç”¨ã€‚è¿™é‡Œä½¿ç”¨WeakSetçš„å¥½å¤„æ˜¯ï¼Œ<code>foos</code>å¯¹å®ä¾‹çš„å¼•ç”¨ï¼Œä¸ä¼šè¢«è®¡å…¥å†…å­˜å›æ”¶æœºåˆ¶ï¼Œæ‰€ä»¥åˆ é™¤å®ä¾‹çš„æ—¶å€™ï¼Œä¸ç”¨è€ƒè™‘<code>foos</code>ï¼Œä¹Ÿä¸ä¼šå‡ºç°å†…å­˜æ³„æ¼ã€‚</p>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="Mapç»“æ„çš„ç›®çš„å’ŒåŸºæœ¬ç”¨æ³•"><a href="#Mapç»“æ„çš„ç›®çš„å’ŒåŸºæœ¬ç”¨æ³•" class="headerlink" title="Mapç»“æ„çš„ç›®çš„å’ŒåŸºæœ¬ç”¨æ³•"></a>Mapç»“æ„çš„ç›®çš„å’ŒåŸºæœ¬ç”¨æ³•</h3><p>JavaScriptçš„å¯¹è±¡ï¼ˆObjectï¼‰ï¼Œæœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼ˆHashç»“æ„ï¼‰ï¼Œä½†æ˜¯ä¼ ç»Ÿä¸Šåªèƒ½ç”¨å­—ç¬¦ä¸²å½“ä½œé”®ã€‚è¿™ç»™å®ƒçš„ä½¿ç”¨å¸¦æ¥äº†å¾ˆå¤§çš„é™åˆ¶ã€‚</p>
<pre><code class="javascript">var data = {};
var element = document.getElementById(&#39;myDiv&#39;);

data[element] = &#39;metadata&#39;;
data[&#39;[object HTMLDivElement]&#39;] // &quot;metadata&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç åŸæ„æ˜¯å°†ä¸€ä¸ªDOMèŠ‚ç‚¹ä½œä¸ºå¯¹è±¡<code>data</code>çš„é”®ï¼Œä½†æ˜¯ç”±äºå¯¹è±¡åªæ¥å—å­—ç¬¦ä¸²ä½œä¸ºé”®åï¼Œæ‰€ä»¥<code>element</code>è¢«è‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ä¸²<code>[object HTMLDivElement]</code>ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒES6æä¾›äº†Mapæ•°æ®ç»“æ„ã€‚å®ƒç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒObjectç»“æ„æä¾›äº†â€œå­—ç¬¦ä¸²â€”å€¼â€çš„å¯¹åº”ï¼ŒMapç»“æ„æä¾›äº†â€œå€¼â€”å€¼â€çš„å¯¹åº”ï¼Œæ˜¯ä¸€ç§æ›´å®Œå–„çš„Hashç»“æ„å®ç°ã€‚å¦‚æœä½ éœ€è¦â€œé”®å€¼å¯¹â€çš„æ•°æ®ç»“æ„ï¼ŒMapæ¯”Objectæ›´åˆé€‚ã€‚</p>
<pre><code class="javascript">var m = new Map();
var o = {p: &#39;Hello World&#39;};

m.set(o, &#39;content&#39;)
m.get(o) // &quot;content&quot;

m.has(o) // true
m.delete(o) // true
m.has(o) // false
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨<code>set</code>æ–¹æ³•ï¼Œå°†å¯¹è±¡<code>o</code>å½“ä½œ<code>m</code>çš„ä¸€ä¸ªé”®ï¼Œç„¶ååˆä½¿ç”¨<code>get</code>æ–¹æ³•è¯»å–è¿™ä¸ªé”®ï¼Œæ¥ç€ä½¿ç”¨<code>delete</code>æ–¹æ³•åˆ é™¤äº†è¿™ä¸ªé”®ã€‚</p>
<p>ä½œä¸ºæ„é€ å‡½æ•°ï¼ŒMapä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ã€‚è¯¥æ•°ç»„çš„æˆå‘˜æ˜¯ä¸€ä¸ªä¸ªè¡¨ç¤ºé”®å€¼å¯¹çš„æ•°ç»„ã€‚</p>
<pre><code class="javascript">var map = new Map([
  [&#39;name&#39;, &#39;å¼ ä¸‰&#39;],
  [&#39;title&#39;, &#39;Author&#39;]
]);

map.size // 2
map.has(&#39;name&#39;) // true
map.get(&#39;name&#39;) // &quot;å¼ ä¸‰&quot;
map.has(&#39;title&#39;) // true
map.get(&#39;title&#39;) // &quot;Author&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç åœ¨æ–°å»ºMapå®ä¾‹æ—¶ï¼Œå°±æŒ‡å®šäº†ä¸¤ä¸ªé”®<code>name</code>å’Œ<code>title</code>ã€‚</p>
<p>Mapæ„é€ å‡½æ•°æ¥å—æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯ä¸‹é¢çš„ç®—æ³•ã€‚</p>
<pre><code class="javascript">var items = [
  [&#39;name&#39;, &#39;å¼ ä¸‰&#39;],
  [&#39;title&#39;, &#39;Author&#39;]
];
var map = new Map();
items.forEach(([key, value]) =&gt; map.set(key, value));
</code></pre>
<p>ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå­—ç¬¦ä¸²<code>true</code>å’Œå¸ƒå°”å€¼<code>true</code>æ˜¯ä¸¤ä¸ªä¸åŒçš„é”®ã€‚</p>
<pre><code class="javascript">var m = new Map([
  [true, &#39;foo&#39;],
  [&#39;true&#39;, &#39;bar&#39;]
]);

m.get(true) // &#39;foo&#39;
m.get(&#39;true&#39;) // &#39;bar&#39;
</code></pre>
<p>å¦‚æœå¯¹åŒä¸€ä¸ªé”®å¤šæ¬¡èµ‹å€¼ï¼Œåé¢çš„å€¼å°†è¦†ç›–å‰é¢çš„å€¼ã€‚</p>
<pre><code class="javascript">let map = new Map();

map
.set(1, &#39;aaa&#39;)
.set(1, &#39;bbb&#39;);

map.get(1) // &quot;bbb&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç å¯¹é”®<code>1</code>è¿ç»­èµ‹å€¼ä¸¤æ¬¡ï¼Œåä¸€æ¬¡çš„å€¼è¦†ç›–å‰ä¸€æ¬¡çš„å€¼ã€‚</p>
<p>å¦‚æœè¯»å–ä¸€ä¸ªæœªçŸ¥çš„é”®ï¼Œåˆ™è¿”å›<code>undefined</code>ã€‚</p>
<pre><code class="javascript">new Map().get(&#39;asfddfsasadf&#39;)
// undefined
</code></pre>
<p>æ³¨æ„ï¼Œåªæœ‰å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼ŒMapç»“æ„æ‰å°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚è¿™ä¸€ç‚¹è¦éå¸¸å°å¿ƒã€‚</p>
<pre><code class="javascript">var map = new Map();

map.set([&#39;a&#39;], 555);
map.get([&#39;a&#39;]) // undefined
</code></pre>
<p>ä¸Šé¢ä»£ç çš„<code>set</code>å’Œ<code>get</code>æ–¹æ³•ï¼Œè¡¨é¢æ˜¯é’ˆå¯¹åŒä¸€ä¸ªé”®ï¼Œä½†å®é™…ä¸Šè¿™æ˜¯ä¸¤ä¸ªå€¼ï¼Œå†…å­˜åœ°å€æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤<code>get</code>æ–¹æ³•æ— æ³•è¯»å–è¯¥é”®ï¼Œè¿”å›<code>undefined</code>ã€‚</p>
<p>åŒç†ï¼ŒåŒæ ·çš„å€¼çš„ä¸¤ä¸ªå®ä¾‹ï¼Œåœ¨Mapç»“æ„ä¸­è¢«è§†ä¸ºä¸¤ä¸ªé”®ã€‚</p>
<pre><code class="javascript">var map = new Map();

var k1 = [&#39;a&#39;];
var k2 = [&#39;a&#39;];

map
.set(k1, 111)
.set(k2, 222);

map.get(k1) // 111
map.get(k2) // 222
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>k1</code>å’Œ<code>k2</code>çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒä»¬åœ¨Mapç»“æ„ä¸­è¢«è§†ä¸ºä¸¤ä¸ªé”®ã€‚</p>
<p>ç”±ä¸Šå¯çŸ¥ï¼ŒMapçš„é”®å®é™…ä¸Šæ˜¯è·Ÿå†…å­˜åœ°å€ç»‘å®šçš„ï¼Œåªè¦å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œå°±è§†ä¸ºä¸¤ä¸ªé”®ã€‚è¿™å°±è§£å†³äº†åŒåå±æ€§ç¢°æ’ï¼ˆclashï¼‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ‰©å±•åˆ«äººçš„åº“çš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®åï¼Œå°±ä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„å±æ€§ä¸åŸä½œè€…çš„å±æ€§åŒåã€‚</p>
<p>å¦‚æœMapçš„é”®æ˜¯ä¸€ä¸ªç®€å•ç±»å‹çš„å€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œåˆ™åªè¦ä¸¤ä¸ªå€¼ä¸¥æ ¼ç›¸ç­‰ï¼ŒMapå°†å…¶è§†ä¸ºä¸€ä¸ªé”®ï¼ŒåŒ…æ‹¬<code>0</code>å’Œ<code>-0</code>ã€‚å¦å¤–ï¼Œè™½ç„¶<code>NaN</code>ä¸ä¸¥æ ¼ç›¸ç­‰äºè‡ªèº«ï¼Œä½†Mapå°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚</p>
<pre><code class="javascript">let map = new Map();

map.set(NaN, 123);
map.get(NaN) // 123

map.set(-0, 123);
map.get(+0) // 123
</code></pre>
<h3 id="å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"><a href="#å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•" class="headerlink" title="å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•"></a>å®ä¾‹çš„å±æ€§å’Œæ“ä½œæ–¹æ³•</h3><p>Mapç»“æ„çš„å®ä¾‹æœ‰ä»¥ä¸‹å±æ€§å’Œæ“ä½œæ–¹æ³•ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰sizeå±æ€§</strong></p>
<p><code>size</code>å±æ€§è¿”å›Mapç»“æ„çš„æˆå‘˜æ€»æ•°ã€‚</p>
<pre><code class="javascript">let map = new Map();
map.set(&#39;foo&#39;, true);
map.set(&#39;bar&#39;, false);

map.size // 2
</code></pre>
<p><strong>ï¼ˆ2ï¼‰set(key, value)</strong></p>
<p><code>set</code>æ–¹æ³•è®¾ç½®<code>key</code>æ‰€å¯¹åº”çš„é”®å€¼ï¼Œç„¶åè¿”å›æ•´ä¸ªMapç»“æ„ã€‚å¦‚æœ<code>key</code>å·²ç»æœ‰å€¼ï¼Œåˆ™é”®å€¼ä¼šè¢«æ›´æ–°ï¼Œå¦åˆ™å°±æ–°ç”Ÿæˆè¯¥é”®ã€‚</p>
<pre><code class="javascript">var m = new Map();

m.set(&quot;edition&quot;, 6)        // é”®æ˜¯å­—ç¬¦ä¸²
m.set(262, &quot;standard&quot;)     // é”®æ˜¯æ•°å€¼
m.set(undefined, &quot;nah&quot;)    // é”®æ˜¯undefined
</code></pre>
<p><code>set</code>æ–¹æ³•è¿”å›çš„æ˜¯Mapæœ¬èº«ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ã€‚</p>
<pre><code class="javascript">let map = new Map()
  .set(1, &#39;a&#39;)
  .set(2, &#39;b&#39;)
  .set(3, &#39;c&#39;);
</code></pre>
<p><strong>ï¼ˆ3ï¼‰get(key)</strong></p>
<p><code>get</code>æ–¹æ³•è¯»å–<code>key</code>å¯¹åº”çš„é”®å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°<code>key</code>ï¼Œè¿”å›<code>undefined</code>ã€‚</p>
<pre><code class="javascript">var m = new Map();

var hello = function() {console.log(&quot;hello&quot;);}
m.set(hello, &quot;Hello ES6!&quot;) // é”®æ˜¯å‡½æ•°

m.get(hello)  // Hello ES6!
</code></pre>
<p><strong>ï¼ˆ4ï¼‰has(key)</strong></p>
<p><code>has</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªé”®æ˜¯å¦åœ¨Mapæ•°æ®ç»“æ„ä¸­ã€‚</p>
<pre><code class="javascript">var m = new Map();

m.set(&quot;edition&quot;, 6);
m.set(262, &quot;standard&quot;);
m.set(undefined, &quot;nah&quot;);

m.has(&quot;edition&quot;)     // true
m.has(&quot;years&quot;)       // false
m.has(262)           // true
m.has(undefined)     // true
</code></pre>
<p><strong>ï¼ˆ5ï¼‰delete(key)</strong></p>
<p><code>delete</code>æ–¹æ³•åˆ é™¤æŸä¸ªé”®ï¼Œè¿”å›trueã€‚å¦‚æœåˆ é™¤å¤±è´¥ï¼Œè¿”å›falseã€‚</p>
<pre><code class="javascript">var m = new Map();
m.set(undefined, &quot;nah&quot;);
m.has(undefined)     // true

m.delete(undefined)
m.has(undefined)       // false
</code></pre>
<p><strong>ï¼ˆ6ï¼‰clear()</strong></p>
<p><code>clear</code>æ–¹æ³•æ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</p>
<pre><code class="javascript">let map = new Map();
map.set(&#39;foo&#39;, true);
map.set(&#39;bar&#39;, false);

map.size // 2
map.clear()
map.size // 0
</code></pre>
<h3 id="éå†æ–¹æ³•"><a href="#éå†æ–¹æ³•" class="headerlink" title="éå†æ–¹æ³•"></a>éå†æ–¹æ³•</h3><p>MapåŸç”Ÿæä¾›ä¸‰ä¸ªéå†å™¨ç”Ÿæˆå‡½æ•°å’Œä¸€ä¸ªéå†æ–¹æ³•ã€‚</p>
<ul>
<li><code>keys()</code>ï¼šè¿”å›é”®åçš„éå†å™¨ã€‚</li>
<li><code>values()</code>ï¼šè¿”å›é”®å€¼çš„éå†å™¨ã€‚</li>
<li><code>entries()</code>ï¼šè¿”å›æ‰€æœ‰æˆå‘˜çš„éå†å™¨ã€‚</li>
<li><code>forEach()</code>ï¼šéå†Mapçš„æ‰€æœ‰æˆå‘˜ã€‚</li>
</ul>
<p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒMapçš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºã€‚</p>
<p>ä¸‹é¢æ˜¯ä½¿ç”¨å®ä¾‹ã€‚</p>
<pre><code class="javascript">let map = new Map([
  [&#39;F&#39;, &#39;no&#39;],
  [&#39;T&#39;,  &#39;yes&#39;],
]);

for (let key of map.keys()) {
  console.log(key);
}
// &quot;F&quot;
// &quot;T&quot;

for (let value of map.values()) {
  console.log(value);
}
// &quot;no&quot;
// &quot;yes&quot;

for (let item of map.entries()) {
  console.log(item[0], item[1]);
}
// &quot;F&quot; &quot;no&quot;
// &quot;T&quot; &quot;yes&quot;

// æˆ–è€…
for (let [key, value] of map.entries()) {
  console.log(key, value);
}

// ç­‰åŒäºä½¿ç”¨map.entries()
for (let [key, value] of map) {
  console.log(key, value);
}
</code></pre>
<p>ä¸Šé¢ä»£ç æœ€åçš„é‚£ä¸ªä¾‹å­ï¼Œè¡¨ç¤ºMapç»“æ„çš„é»˜è®¤éå†å™¨æ¥å£ï¼ˆ<code>Symbol.iterator</code>å±æ€§ï¼‰ï¼Œå°±æ˜¯<code>entries</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">map[Symbol.iterator] === map.entries
// true
</code></pre>
<p>Mapç»“æ„è½¬ä¸ºæ•°ç»„ç»“æ„ï¼Œæ¯”è¾ƒå¿«é€Ÿçš„æ–¹æ³•æ˜¯ç»“åˆä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ã€‚</p>
<pre><code class="javascript">let map = new Map([
  [1, &#39;one&#39;],
  [2, &#39;two&#39;],
  [3, &#39;three&#39;],
]);

[...map.keys()]
// [1, 2, 3]

[...map.values()]
// [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;]

[...map.entries()]
// [[1,&#39;one&#39;], [2, &#39;two&#39;], [3, &#39;three&#39;]]

[...map]
// [[1,&#39;one&#39;], [2, &#39;two&#39;], [3, &#39;three&#39;]]
</code></pre>
<p>ç»“åˆæ•°ç»„çš„<code>map</code>æ–¹æ³•ã€<code>filter</code>æ–¹æ³•ï¼Œå¯ä»¥å®ç°Mapçš„éå†å’Œè¿‡æ»¤ï¼ˆMapæœ¬èº«æ²¡æœ‰<code>map</code>å’Œ<code>filter</code>æ–¹æ³•ï¼‰ã€‚</p>
<pre><code class="javascript">let map0 = new Map()
  .set(1, &#39;a&#39;)
  .set(2, &#39;b&#39;)
  .set(3, &#39;c&#39;);

let map1 = new Map(
  [...map0].filter(([k, v]) =&gt; k &lt; 3)
);
// äº§ç”ŸMapç»“æ„ {1 =&gt; &#39;a&#39;, 2 =&gt; &#39;b&#39;}

let map2 = new Map(
  [...map0].map(([k, v]) =&gt; [k * 2, &#39;_&#39; + v])
    );
// äº§ç”ŸMapç»“æ„ {2 =&gt; &#39;_a&#39;, 4 =&gt; &#39;_b&#39;, 6 =&gt; &#39;_c&#39;}
</code></pre>
<p>æ­¤å¤–ï¼ŒMapè¿˜æœ‰ä¸€ä¸ª<code>forEach</code>æ–¹æ³•ï¼Œä¸æ•°ç»„çš„<code>forEach</code>æ–¹æ³•ç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥å®ç°éå†ã€‚</p>
<pre><code class="javascript">map.forEach(function(value, key, map) {
  console.log(&quot;Key: %s, Value: %s&quot;, key, value);
});
</code></pre>
<p><code>forEach</code>æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®š<code>this</code>ã€‚</p>
<pre><code class="javascript">var reporter = {
  report: function(key, value) {
    console.log(&quot;Key: %s, Value: %s&quot;, key, value);
  }
};

map.forEach(function(value, key, map) {
  this.report(key, value);
}, reporter);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>forEach</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°çš„<code>this</code>ï¼Œå°±æŒ‡å‘<code>reporter</code>ã€‚</p>
<h3 id="ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"><a href="#ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢" class="headerlink" title="ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢"></a>ä¸å…¶ä»–æ•°æ®ç»“æ„çš„äº’ç›¸è½¬æ¢</h3><p><strong>ï¼ˆ1ï¼‰Mapè½¬ä¸ºæ•°ç»„</strong></p>
<p>å‰é¢å·²ç»æè¿‡ï¼ŒMapè½¬ä¸ºæ•°ç»„æœ€æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå°±æ˜¯ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦ï¼‰ã€‚</p>
<pre><code class="javascript">let myMap = new Map().set(true, 7).set({foo: 3}, [&#39;abc&#39;]);
[...myMap]
// [ [ true, 7 ], [ { foo: 3 }, [ &#39;abc&#39; ] ] ]
</code></pre>
<p><strong>ï¼ˆ2ï¼‰æ•°ç»„è½¬ä¸ºMap</strong></p>
<p>å°†æ•°ç»„è½¬å…¥Mapæ„é€ å‡½æ•°ï¼Œå°±å¯ä»¥è½¬ä¸ºMapã€‚</p>
<pre><code class="javascript">new Map([[true, 7], [{foo: 3}, [&#39;abc&#39;]]])
// Map {true =&gt; 7, Object {foo: 3} =&gt; [&#39;abc&#39;]}
</code></pre>
<p><strong>ï¼ˆ3ï¼‰Mapè½¬ä¸ºå¯¹è±¡</strong></p>
<p>å¦‚æœæ‰€æœ‰Mapçš„é”®éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒå¯ä»¥è½¬ä¸ºå¯¹è±¡ã€‚</p>
<pre><code class="javascript">function strMapToObj(strMap) {
  let obj = Object.create(null);
  for (let [k,v] of strMap) {
    obj[k] = v;
  }
  return obj;
}

let myMap = new Map().set(&#39;yes&#39;, true).set(&#39;no&#39;, false);
strMapToObj(myMap)
// { yes: true, no: false }
</code></pre>
<p><strong>ï¼ˆ4ï¼‰å¯¹è±¡è½¬ä¸ºMap</strong></p>
<pre><code class="javascript">function objToStrMap(obj) {
  let strMap = new Map();
  for (let k of Object.keys(obj)) {
    strMap.set(k, obj[k]);
  }
  return strMap;
}

objToStrMap({yes: true, no: false})
// [ [ &#39;yes&#39;, true ], [ &#39;no&#39;, false ] ]
</code></pre>
<p><strong>ï¼ˆ5ï¼‰Mapè½¬ä¸ºJSON</strong></p>
<p>Mapè½¬ä¸ºJSONè¦åŒºåˆ†ä¸¤ç§æƒ…å†µã€‚ä¸€ç§æƒ…å†µæ˜¯ï¼ŒMapçš„é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©è½¬ä¸ºå¯¹è±¡JSONã€‚</p>
<pre><code class="javascript">function strMapToJson(strMap) {
  return JSON.stringify(strMapToObj(strMap));
}

let myMap = new Map().set(&#39;yes&#39;, true).set(&#39;no&#39;, false);
strMapToJson(myMap)
// &#39;{&quot;yes&quot;:true,&quot;no&quot;:false}&#39;
</code></pre>
<p>å¦ä¸€ç§æƒ…å†µæ˜¯ï¼ŒMapçš„é”®åæœ‰éå­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©è½¬ä¸ºæ•°ç»„JSONã€‚</p>
<pre><code class="javascript">function mapToArrayJson(map) {
  return JSON.stringify([...map]);
}

let myMap = new Map().set(true, 7).set({foo: 3}, [&#39;abc&#39;]);
mapToArrayJson(myMap)
// &#39;[[true,7],[{&quot;foo&quot;:3},[&quot;abc&quot;]]]&#39;
</code></pre>
<p><strong>ï¼ˆ6ï¼‰JSONè½¬ä¸ºMap</strong></p>
<p>JSONè½¬ä¸ºMapï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œæ‰€æœ‰é”®åéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">function jsonToStrMap(jsonStr) {
  return objToStrMap(JSON.parse(jsonStr));
}

jsonToStrMap(&#39;{&quot;yes&quot;:true,&quot;no&quot;:false}&#39;)
// Map {&#39;yes&#39; =&gt; true, &#39;no&#39; =&gt; false}
</code></pre>
<p>ä½†æ˜¯ï¼Œæœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œæ•´ä¸ªJSONå°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¸”æ¯ä¸ªæ•°ç»„æˆå‘˜æœ¬èº«ï¼Œåˆæ˜¯ä¸€ä¸ªæœ‰ä¸¤ä¸ªæˆå‘˜çš„æ•°ç»„ã€‚è¿™æ—¶ï¼Œå®ƒå¯ä»¥ä¸€ä¸€å¯¹åº”åœ°è½¬ä¸ºMapã€‚è¿™å¾€å¾€æ˜¯æ•°ç»„è½¬ä¸ºJSONçš„é€†æ“ä½œã€‚</p>
<pre><code class="javascript">function jsonToMap(jsonStr) {
  return new Map(JSON.parse(jsonStr));
}

jsonToMap(&#39;[[true,7],[{&quot;foo&quot;:3},[&quot;abc&quot;]]]&#39;)
// Map {true =&gt; 7, Object {foo: 3} =&gt; [&#39;abc&#39;]}
</code></pre>
<h2 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h2><p><code>WeakMap</code>ç»“æ„ä¸<code>Map</code>ç»“æ„åŸºæœ¬ç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯å®ƒåªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆ<code>null</code>é™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®åï¼Œè€Œä¸”é”®åæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p>
<pre><code class="javascript">var map = new WeakMap()
map.set(1, 2)
// TypeError: 1 is not an object!
map.set(Symbol(), 2)
// TypeError: Invalid value used as weak map key
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå°†<code>1</code>å’Œ<code>Symbol</code>ä½œä¸ºWeakMapçš„é”®åï¼Œéƒ½ä¼šæŠ¥é”™ã€‚</p>
<p><code>WeakMap</code>çš„è®¾è®¡ç›®çš„åœ¨äºï¼Œé”®åæ˜¯å¯¹è±¡çš„å¼±å¼•ç”¨ï¼ˆåƒåœ¾å›æ”¶æœºåˆ¶ä¸å°†è¯¥å¼•ç”¨è€ƒè™‘åœ¨å†…ï¼‰ï¼Œæ‰€ä»¥å…¶æ‰€å¯¹åº”çš„å¯¹è±¡å¯èƒ½ä¼šè¢«è‡ªåŠ¨å›æ”¶ã€‚å½“å¯¹è±¡è¢«å›æ”¶åï¼Œ<code>WeakMap</code>è‡ªåŠ¨ç§»é™¤å¯¹åº”çš„é”®å€¼å¯¹ã€‚å…¸å‹åº”ç”¨æ˜¯ï¼Œä¸€ä¸ªå¯¹åº”DOMå…ƒç´ çš„<code>WeakMap</code>ç»“æ„ï¼Œå½“æŸä¸ªDOMå…ƒç´ è¢«æ¸…é™¤ï¼Œå…¶æ‰€å¯¹åº”çš„<code>WeakMap</code>è®°å½•å°±ä¼šè‡ªåŠ¨è¢«ç§»é™¤ã€‚åŸºæœ¬ä¸Šï¼Œ<code>WeakMap</code>çš„ä¸“ç”¨åœºåˆå°±æ˜¯ï¼Œå®ƒçš„é”®æ‰€å¯¹åº”çš„å¯¹è±¡ï¼Œå¯èƒ½ä¼šåœ¨å°†æ¥æ¶ˆå¤±ã€‚<code>WeakMap</code>ç»“æ„æœ‰åŠ©äºé˜²æ­¢å†…å­˜æ³„æ¼ã€‚</p>
<p>ä¸‹é¢æ˜¯<code>WeakMap</code>ç»“æ„çš„ä¸€ä¸ªä¾‹å­ï¼Œå¯ä»¥çœ‹åˆ°ç”¨æ³•ä¸Šä¸<code>Map</code>å‡ ä¹ä¸€æ ·ã€‚</p>
<pre><code class="javascript">var wm = new WeakMap();
var element = document.querySelector(&quot;.element&quot;);

wm.set(element, &quot;Original&quot;);
wm.get(element) // &quot;Original&quot;

element.parentNode.removeChild(element);
element = null;
wm.get(element) // undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>wm</code>æ˜¯ä¸€ä¸ª<code>WeakMap</code>å®ä¾‹ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ª<code>DOM</code>èŠ‚ç‚¹<code>element</code>ä½œä¸ºé”®åï¼Œç„¶åé”€æ¯è¿™ä¸ªèŠ‚ç‚¹ï¼Œ<code>element</code>å¯¹åº”çš„é”®å°±è‡ªåŠ¨æ¶ˆå¤±äº†ï¼Œå†å¼•ç”¨è¿™ä¸ªé”®åå°±è¿”å›<code>undefined</code>ã€‚</p>
<p>WeakMapä¸Mapåœ¨APIä¸Šçš„åŒºåˆ«ä¸»è¦æ˜¯ä¸¤ä¸ªï¼Œä¸€æ˜¯æ²¡æœ‰éå†æ“ä½œï¼ˆå³æ²¡æœ‰<code>key()</code>ã€<code>values()</code>å’Œ<code>entries()</code>æ–¹æ³•ï¼‰ï¼Œä¹Ÿæ²¡æœ‰<code>size</code>å±æ€§ï¼›äºŒæ˜¯æ— æ³•æ¸…ç©ºï¼Œå³ä¸æ”¯æŒ<code>clear</code>æ–¹æ³•ã€‚è¿™ä¸<code>WeakMap</code>çš„é”®ä¸è¢«è®¡å…¥å¼•ç”¨ã€è¢«åƒåœ¾å›æ”¶æœºåˆ¶å¿½ç•¥æœ‰å…³ã€‚å› æ­¤ï¼Œ<code>WeakMap</code>åªæœ‰å››ä¸ªæ–¹æ³•å¯ç”¨ï¼š<code>get()</code>ã€<code>set()</code>ã€<code>has()</code>ã€<code>delete()</code>ã€‚</p>
<pre><code class="javascript">var wm = new WeakMap();

wm.size
// undefined

wm.forEach
// undefined
</code></pre>
<p>å‰æ–‡è¯´è¿‡ï¼ŒWeakMapåº”ç”¨çš„å…¸å‹åœºåˆå°±æ˜¯DOMèŠ‚ç‚¹ä½œä¸ºé”®åã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">let myElement = document.getElementById(&#39;logo&#39;);
let myWeakmap = new WeakMap();

myWeakmap.set(myElement, {timesClicked: 0});

myElement.addEventListener(&#39;click&#39;, function() {
  let logoData = myWeakmap.get(myElement);
  logoData.timesClicked++;
}, false);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>myElement</code>æ˜¯ä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œæ¯å½“å‘ç”Ÿ<code>click</code>äº‹ä»¶ï¼Œå°±æ›´æ–°ä¸€ä¸‹çŠ¶æ€ã€‚æˆ‘ä»¬å°†è¿™ä¸ªçŠ¶æ€ä½œä¸ºé”®å€¼æ”¾åœ¨ WeakMap é‡Œï¼Œå¯¹åº”çš„é”®åå°±æ˜¯<code>myElement</code>ã€‚ä¸€æ—¦è¿™ä¸ª DOM èŠ‚ç‚¹åˆ é™¤ï¼Œè¯¥çŠ¶æ€å°±ä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼Œä¸å­˜åœ¨å†…å­˜æ³„æ¼é£é™©ã€‚</p>
<p>WeakMap çš„å¦ä¸€ä¸ªç”¨å¤„æ˜¯éƒ¨ç½²ç§æœ‰å±æ€§ã€‚</p>
<pre><code class="javascript">let _counter = new WeakMap();
let _action = new WeakMap();

class Countdown {
  constructor(counter, action) {
    _counter.set(this, counter);
    _action.set(this, action);
  }
  dec() {
    let counter = _counter.get(this);
    if (counter &lt; 1) return;
    counter--;
    _counter.set(this, counter);
    if (counter === 0) {
      _action.get(this)();
    }
  }
}

let c = new Countdown(2, () =&gt; console.log(&#39;DONE&#39;));

c.dec()
c.dec()
// DONE
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒCountdownç±»çš„ä¸¤ä¸ªå†…éƒ¨å±æ€§<code>_counter</code>å’Œ<code>_action</code>ï¼Œæ˜¯å®ä¾‹çš„å¼±å¼•ç”¨ï¼Œæ‰€ä»¥å¦‚æœåˆ é™¤å®ä¾‹ï¼Œå®ƒä»¬ä¹Ÿå°±éšä¹‹æ¶ˆå¤±ï¼Œä¸ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Setå’ŒMapæ•°æ®ç»“æ„&quot;&gt;&lt;a href=&quot;#Setå’ŒMapæ•°æ®ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;Setå’ŒMapæ•°æ®ç»“æ„&quot;&gt;&lt;/a&gt;Setå’ŒMapæ•°æ®ç»“æ„&lt;/h1&gt;&lt;h2 id=&quot;Set&quot;&gt;&lt;a href=&quot;#Set&quot; class=&quot;he
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Set" scheme="https://microzz.com/tags/Set/"/>
    
      <category term="Map" scheme="https://microzz.com/tags/Map/"/>
    
  </entry>
  
  <entry>
    <title>Symbol</title>
    <link href="https://microzz.com/2017/01/01/symbol/"/>
    <id>https://microzz.com/2017/01/01/symbol/</id>
    <published>2017-01-01T05:43:19.000Z</published>
    <updated>2017-01-12T08:14:04.572Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ES5çš„å¯¹è±¡å±æ€§åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™å®¹æ˜“é€ æˆå±æ€§åçš„å†²çªã€‚æ¯”å¦‚ï¼Œä½ ä½¿ç”¨äº†ä¸€ä¸ªä»–äººæä¾›çš„å¯¹è±¡ï¼Œä½†åˆæƒ³ä¸ºè¿™ä¸ªå¯¹è±¡æ·»åŠ æ–°çš„æ–¹æ³•ï¼ˆmixinæ¨¡å¼ï¼‰ï¼Œæ–°æ–¹æ³•çš„åå­—å°±æœ‰å¯èƒ½ä¸ç°æœ‰æ–¹æ³•äº§ç”Ÿå†²çªã€‚å¦‚æœæœ‰ä¸€ç§æœºåˆ¶ï¼Œä¿è¯æ¯ä¸ªå±æ€§çš„åå­—éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„å°±å¥½äº†ï¼Œè¿™æ ·å°±ä»æ ¹æœ¬ä¸Šé˜²æ­¢å±æ€§åçš„å†²çªã€‚è¿™å°±æ˜¯ES6å¼•å…¥Symbolçš„åŸå› ã€‚</p>
<p>ES6å¼•å…¥äº†ä¸€ç§æ–°çš„åŸå§‹æ•°æ®ç±»å‹Symbolï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼ã€‚å®ƒæ˜¯JavaScriptè¯­è¨€çš„ç¬¬ä¸ƒç§æ•°æ®ç±»å‹ï¼Œå‰å…­ç§æ˜¯ï¼šUndefinedã€Nullã€å¸ƒå°”å€¼ï¼ˆBooleanï¼‰ã€å­—ç¬¦ä¸²ï¼ˆStringï¼‰ã€æ•°å€¼ï¼ˆNumberï¼‰ã€å¯¹è±¡ï¼ˆObjectï¼‰ã€‚</p>
<p>Symbolå€¼é€šè¿‡<code>Symbol</code>å‡½æ•°ç”Ÿæˆã€‚è¿™å°±æ˜¯è¯´ï¼Œå¯¹è±¡çš„å±æ€§åç°åœ¨å¯ä»¥æœ‰ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯åŸæ¥å°±æœ‰çš„å­—ç¬¦ä¸²ï¼Œå¦ä¸€ç§å°±æ˜¯æ–°å¢çš„Symbolç±»å‹ã€‚å‡¡æ˜¯å±æ€§åå±äºSymbolç±»å‹ï¼Œå°±éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå¯ä»¥ä¿è¯ä¸ä¼šä¸å…¶ä»–å±æ€§åäº§ç”Ÿå†²çªã€‚</p>
<pre><code class="javascript">let s = Symbol();

typeof s
// &quot;symbol&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>s</code>å°±æ˜¯ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å€¼ã€‚<code>typeof</code>è¿ç®—ç¬¦çš„ç»“æœï¼Œè¡¨æ˜å˜é‡<code>s</code>æ˜¯Symbolæ•°æ®ç±»å‹ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ä¹‹ç±»çš„å…¶ä»–ç±»å‹ã€‚</p>
<p>æ³¨æ„ï¼Œ<code>Symbol</code>å‡½æ•°å‰ä¸èƒ½ä½¿ç”¨<code>new</code>å‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºç”Ÿæˆçš„Symbolæ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ï¼Œä¸æ˜¯å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”±äºSymbolå€¼ä¸æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½æ·»åŠ å±æ€§ã€‚åŸºæœ¬ä¸Šï¼Œå®ƒæ˜¯ä¸€ç§ç±»ä¼¼äºå­—ç¬¦ä¸²çš„æ•°æ®ç±»å‹ã€‚</p>
<p><code>Symbol</code>å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºå¯¹Symbolå®ä¾‹çš„æè¿°ï¼Œä¸»è¦æ˜¯ä¸ºäº†åœ¨æ§åˆ¶å°æ˜¾ç¤ºï¼Œæˆ–è€…è½¬ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œæ¯”è¾ƒå®¹æ˜“åŒºåˆ†ã€‚</p>
<pre><code class="javascript">var s1 = Symbol(&#39;foo&#39;);
var s2 = Symbol(&#39;bar&#39;);

s1 // Symbol(foo)
s2 // Symbol(bar)

s1.toString() // &quot;Symbol(foo)&quot;
s2.toString() // &quot;Symbol(bar)&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>s1</code>å’Œ<code>s2</code>æ˜¯ä¸¤ä¸ªSymbolå€¼ã€‚å¦‚æœä¸åŠ å‚æ•°ï¼Œå®ƒä»¬åœ¨æ§åˆ¶å°çš„è¾“å‡ºéƒ½æ˜¯<code>Symbol()</code>ï¼Œä¸åˆ©äºåŒºåˆ†ã€‚æœ‰äº†å‚æ•°ä»¥åï¼Œå°±ç­‰äºä¸ºå®ƒä»¬åŠ ä¸Šäº†æè¿°ï¼Œè¾“å‡ºçš„æ—¶å€™å°±èƒ½å¤Ÿåˆ†æ¸…ï¼Œåˆ°åº•æ˜¯å“ªä¸€ä¸ªå€¼ã€‚</p>
<p>å¦‚æœ Symbol çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„<code>toString</code>æ–¹æ³•ï¼Œå°†å…¶è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæ‰ç”Ÿæˆä¸€ä¸ª Symbol å€¼ã€‚</p>
<pre><code class="javascript">const obj = {
  toString() {
    return &#39;abc&#39;;
  }
};
const sym = Symbol(obj);
sym // Symbol(abc)
</code></pre>
<p>æ³¨æ„ï¼Œ<code>Symbol</code>å‡½æ•°çš„å‚æ•°åªæ˜¯è¡¨ç¤ºå¯¹å½“å‰ Symbol å€¼çš„æè¿°ï¼Œå› æ­¤ç›¸åŒå‚æ•°çš„<code>Symbol</code>å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸ç›¸ç­‰çš„ã€‚</p>
<pre><code class="javascript">// æ²¡æœ‰å‚æ•°çš„æƒ…å†µ
var s1 = Symbol();
var s2 = Symbol();

s1 === s2 // false

// æœ‰å‚æ•°çš„æƒ…å†µ
var s1 = Symbol(&#39;foo&#39;);
var s2 = Symbol(&#39;foo&#39;);

s1 === s2 // false
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>s1</code>å’Œ<code>s2</code>éƒ½æ˜¯<code>Symbol</code>å‡½æ•°çš„è¿”å›å€¼ï¼Œè€Œä¸”å‚æ•°ç›¸åŒï¼Œä½†æ˜¯å®ƒä»¬æ˜¯ä¸ç›¸ç­‰çš„ã€‚</p>
<p>Symbolå€¼ä¸èƒ½ä¸å…¶ä»–ç±»å‹çš„å€¼è¿›è¡Œè¿ç®—ï¼Œä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">var sym = Symbol(&#39;My symbol&#39;);

&quot;your symbol is &quot; + sym
// TypeError: can&#39;t convert symbol to string
`your symbol is ${sym}`
// TypeError: can&#39;t convert symbol to string
</code></pre>
<p>ä½†æ˜¯ï¼ŒSymbolå€¼å¯ä»¥æ˜¾å¼è½¬ä¸ºå­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">var sym = Symbol(&#39;My symbol&#39;);

String(sym) // &#39;Symbol(My symbol)&#39;
sym.toString() // &#39;Symbol(My symbol)&#39;
</code></pre>
<p>å¦å¤–ï¼ŒSymbolå€¼ä¹Ÿå¯ä»¥è½¬ä¸ºå¸ƒå°”å€¼ï¼Œä½†æ˜¯ä¸èƒ½è½¬ä¸ºæ•°å€¼ã€‚</p>
<pre><code class="javascript">var sym = Symbol();
Boolean(sym) // true
!sym  // false

if (sym) {
  // ...
}

Number(sym) // TypeError
sym + 2 // TypeError
</code></pre>
<h2 id="ä½œä¸ºå±æ€§åçš„Symbol"><a href="#ä½œä¸ºå±æ€§åçš„Symbol" class="headerlink" title="ä½œä¸ºå±æ€§åçš„Symbol"></a>ä½œä¸ºå±æ€§åçš„Symbol</h2><p>ç”±äºæ¯ä¸€ä¸ªSymbolå€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ï¼Œè¿™æ„å‘³ç€Symbolå€¼å¯ä»¥ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œç”¨äºå¯¹è±¡çš„å±æ€§åï¼Œå°±èƒ½ä¿è¯ä¸ä¼šå‡ºç°åŒåçš„å±æ€§ã€‚è¿™å¯¹äºä¸€ä¸ªå¯¹è±¡ç”±å¤šä¸ªæ¨¡å—æ„æˆçš„æƒ…å†µéå¸¸æœ‰ç”¨ï¼Œèƒ½é˜²æ­¢æŸä¸€ä¸ªé”®è¢«ä¸å°å¿ƒæ”¹å†™æˆ–è¦†ç›–ã€‚</p>
<pre><code class="javascript">var mySymbol = Symbol();

// ç¬¬ä¸€ç§å†™æ³•
var a = {};
a[mySymbol] = &#39;Hello!&#39;;

// ç¬¬äºŒç§å†™æ³•
var a = {
  [mySymbol]: &#39;Hello!&#39;
};

// ç¬¬ä¸‰ç§å†™æ³•
var a = {};
Object.defineProperty(a, mySymbol, { value: &#39;Hello!&#39; });

// ä»¥ä¸Šå†™æ³•éƒ½å¾—åˆ°åŒæ ·ç»“æœ
a[mySymbol] // &quot;Hello!&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç é€šè¿‡æ–¹æ‹¬å·ç»“æ„å’Œ<code>Object.defineProperty</code>ï¼Œå°†å¯¹è±¡çš„å±æ€§åæŒ‡å®šä¸ºä¸€ä¸ªSymbolå€¼ã€‚</p>
<p>æ³¨æ„ï¼ŒSymbolå€¼ä½œä¸ºå¯¹è±¡å±æ€§åæ—¶ï¼Œä¸èƒ½ç”¨ç‚¹è¿ç®—ç¬¦ã€‚</p>
<pre><code class="javascript">var mySymbol = Symbol();
var a = {};

a.mySymbol = &#39;Hello!&#39;;
a[mySymbol] // undefined
a[&#39;mySymbol&#39;] // &quot;Hello!&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå› ä¸ºç‚¹è¿ç®—ç¬¦åé¢æ€»æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¸ä¼šè¯»å–<code>mySymbol</code>ä½œä¸ºæ ‡è¯†åæ‰€æŒ‡ä»£çš„é‚£ä¸ªå€¼ï¼Œå¯¼è‡´<code>a</code>çš„å±æ€§åå®é™…ä¸Šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªSymbolå€¼ã€‚</p>
<p>åŒç†ï¼Œåœ¨å¯¹è±¡çš„å†…éƒ¨ï¼Œä½¿ç”¨Symbolå€¼å®šä¹‰å±æ€§æ—¶ï¼ŒSymbolå€¼å¿…é¡»æ”¾åœ¨æ–¹æ‹¬å·ä¹‹ä¸­ã€‚</p>
<pre><code class="javascript">let s = Symbol();

let obj = {
  [s]: function (arg) { ... }
};

obj[s](123);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœ<code>s</code>ä¸æ”¾åœ¨æ–¹æ‹¬å·ä¸­ï¼Œè¯¥å±æ€§çš„é”®åå°±æ˜¯å­—ç¬¦ä¸²<code>s</code>ï¼Œè€Œä¸æ˜¯<code>s</code>æ‰€ä»£è¡¨çš„é‚£ä¸ªSymbolå€¼ã€‚</p>
<p>é‡‡ç”¨å¢å¼ºçš„å¯¹è±¡å†™æ³•ï¼Œä¸Šé¢ä»£ç çš„<code>obj</code>å¯¹è±¡å¯ä»¥å†™å¾—æ›´ç®€æ´ä¸€äº›ã€‚</p>
<pre><code class="javascript">let obj = {
  [s](arg) { ... }
};
</code></pre>
<p>Symbolç±»å‹è¿˜å¯ä»¥ç”¨äºå®šä¹‰ä¸€ç»„å¸¸é‡ï¼Œä¿è¯è¿™ç»„å¸¸é‡çš„å€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ã€‚</p>
<pre><code class="javascript">log.levels = {
  DEBUG: Symbol(&#39;debug&#39;),
  INFO: Symbol(&#39;info&#39;),
  WARN: Symbol(&#39;warn&#39;)
};
log(log.levels.DEBUG, &#39;debug message&#39;);
log(log.levels.INFO, &#39;info message&#39;);
</code></pre>
<p>ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">const COLOR_RED    = Symbol();
const COLOR_GREEN  = Symbol();

function getComplement(color) {
  switch (color) {
    case COLOR_RED:
      return COLOR_GREEN;
    case COLOR_GREEN:
      return COLOR_RED;
    default:
      throw new Error(&#39;Undefined color&#39;);
    }
}
</code></pre>
<p>å¸¸é‡ä½¿ç”¨Symbolå€¼æœ€å¤§çš„å¥½å¤„ï¼Œå°±æ˜¯å…¶ä»–ä»»ä½•å€¼éƒ½ä¸å¯èƒ½æœ‰ç›¸åŒçš„å€¼äº†ï¼Œå› æ­¤å¯ä»¥ä¿è¯ä¸Šé¢çš„<code>switch</code>è¯­å¥ä¼šæŒ‰è®¾è®¡çš„æ–¹å¼å·¥ä½œã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼ŒSymbolå€¼ä½œä¸ºå±æ€§åæ—¶ï¼Œè¯¥å±æ€§è¿˜æ˜¯å…¬å¼€å±æ€§ï¼Œä¸æ˜¯ç§æœ‰å±æ€§ã€‚</p>
<h2 id="å®ä¾‹ï¼šæ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²"><a href="#å®ä¾‹ï¼šæ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²" class="headerlink" title="å®ä¾‹ï¼šæ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²"></a>å®ä¾‹ï¼šæ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²</h2><p>é­”æœ¯å­—ç¬¦ä¸²æŒ‡çš„æ˜¯ï¼Œåœ¨ä»£ç ä¹‹ä¸­å¤šæ¬¡å‡ºç°ã€ä¸ä»£ç å½¢æˆå¼ºè€¦åˆçš„æŸä¸€ä¸ªå…·ä½“çš„å­—ç¬¦ä¸²æˆ–è€…æ•°å€¼ã€‚é£æ ¼è‰¯å¥½çš„ä»£ç ï¼Œåº”è¯¥å°½é‡æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²ï¼Œè¯¥ç”±å«ä¹‰æ¸…æ™°çš„å˜é‡ä»£æ›¿ã€‚</p>
<pre><code class="javascript">function getArea(shape, options) {
  var area = 0;

  switch (shape) {
    case &#39;Triangle&#39;: // é­”æœ¯å­—ç¬¦ä¸²
      area = .5 * options.width * options.height;
      break;
    /* ... more code ... */
  }

  return area;
}

getArea(&#39;Triangle&#39;, { width: 100, height: 100 }); // é­”æœ¯å­—ç¬¦ä¸²
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²â€œTriangleâ€å°±æ˜¯ä¸€ä¸ªé­”æœ¯å­—ç¬¦ä¸²ã€‚å®ƒå¤šæ¬¡å‡ºç°ï¼Œä¸ä»£ç å½¢æˆâ€œå¼ºè€¦åˆâ€ï¼Œä¸åˆ©äºå°†æ¥çš„ä¿®æ”¹å’Œç»´æŠ¤ã€‚</p>
<p>å¸¸ç”¨çš„æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œå°±æ˜¯æŠŠå®ƒå†™æˆä¸€ä¸ªå˜é‡ã€‚</p>
<pre><code class="javascript">var shapeType = {
  triangle: &#39;Triangle&#39;
};

function getArea(shape, options) {
  var area = 0;
  switch (shape) {
    case shapeType.triangle:
      area = .5 * options.width * options.height;
      break;
  }
  return area;
}

getArea(shapeType.triangle, { width: 100, height: 100 });
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬æŠŠâ€œTriangleâ€å†™æˆ<code>shapeType</code>å¯¹è±¡çš„<code>triangle</code>å±æ€§ï¼Œè¿™æ ·å°±æ¶ˆé™¤äº†å¼ºè€¦åˆã€‚</p>
<p>å¦‚æœä»”ç»†åˆ†æï¼Œå¯ä»¥å‘ç°<code>shapeType.triangle</code>ç­‰äºå“ªä¸ªå€¼å¹¶ä¸é‡è¦ï¼Œåªè¦ç¡®ä¿ä¸ä¼šè·Ÿå…¶ä»–<code>shapeType</code>å±æ€§çš„å€¼å†²çªå³å¯ã€‚å› æ­¤ï¼Œè¿™é‡Œå°±å¾ˆé€‚åˆæ”¹ç”¨Symbolå€¼ã€‚</p>
<pre><code class="javascript">const shapeType = {
  triangle: Symbol()
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œé™¤äº†å°†<code>shapeType.triangle</code>çš„å€¼è®¾ä¸ºä¸€ä¸ªSymbolï¼Œå…¶ä»–åœ°æ–¹éƒ½ä¸ç”¨ä¿®æ”¹ã€‚</p>
<h2 id="å±æ€§åçš„éå†"><a href="#å±æ€§åçš„éå†" class="headerlink" title="å±æ€§åçš„éå†"></a>å±æ€§åçš„éå†</h2><p>Symbol ä½œä¸ºå±æ€§åï¼Œè¯¥å±æ€§ä¸ä¼šå‡ºç°åœ¨<code>for...in</code>ã€<code>for...of</code>å¾ªç¯ä¸­ï¼Œä¹Ÿä¸ä¼šè¢«<code>Object.keys()</code>ã€<code>Object.getOwnPropertyNames()</code>ã€<code>JSON.stringify()</code>è¿”å›ã€‚ä½†æ˜¯ï¼Œå®ƒä¹Ÿä¸æ˜¯ç§æœ‰å±æ€§ï¼Œæœ‰ä¸€ä¸ª<code>Object.getOwnPropertySymbols</code>æ–¹æ³•ï¼Œå¯ä»¥è·å–æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰ Symbol å±æ€§åã€‚</p>
<p><code>Object.getOwnPropertySymbols</code>æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å½“å‰å¯¹è±¡çš„æ‰€æœ‰ç”¨ä½œå±æ€§åçš„ Symbol å€¼ã€‚</p>
<pre><code class="javascript">var obj = {};
var a = Symbol(&#39;a&#39;);
var b = Symbol(&#39;b&#39;);

obj[a] = &#39;Hello&#39;;
obj[b] = &#39;World&#39;;

var objectSymbols = Object.getOwnPropertySymbols(obj);

objectSymbols
// [Symbol(a), Symbol(b)]
</code></pre>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œ<code>Object.getOwnPropertySymbols</code>æ–¹æ³•ä¸<code>for...in</code>å¾ªç¯ã€<code>Object.getOwnPropertyNames</code>æ–¹æ³•è¿›è¡Œå¯¹æ¯”çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var obj = {};

var foo = Symbol(&quot;foo&quot;);

Object.defineProperty(obj, foo, {
  value: &quot;foobar&quot;,
});

for (var i in obj) {
  console.log(i); // æ— è¾“å‡º
}

Object.getOwnPropertyNames(obj)
// []

Object.getOwnPropertySymbols(obj)
// [Symbol(foo)]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä½¿ç”¨<code>Object.getOwnPropertyNames</code>æ–¹æ³•å¾—ä¸åˆ°<code>Symbol</code>å±æ€§åï¼Œéœ€è¦ä½¿ç”¨<code>Object.getOwnPropertySymbols</code>æ–¹æ³•ã€‚</p>
<p>å¦ä¸€ä¸ªæ–°çš„APIï¼Œ<code>Reflect.ownKeys</code>æ–¹æ³•å¯ä»¥è¿”å›æ‰€æœ‰ç±»å‹çš„é”®åï¼ŒåŒ…æ‹¬å¸¸è§„é”®åå’Œ Symbol é”®åã€‚</p>
<pre><code class="javascript">let obj = {
  [Symbol(&#39;my_key&#39;)]: 1,
  enum: 2,
  nonEnum: 3
};

Reflect.ownKeys(obj)
//  [&quot;enum&quot;, &quot;nonEnum&quot;, Symbol(my_key)]
</code></pre>
<p>ç”±äºä»¥ Symbol å€¼ä½œä¸ºåç§°çš„å±æ€§ï¼Œä¸ä¼šè¢«å¸¸è§„æ–¹æ³•éå†å¾—åˆ°ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œä¸ºå¯¹è±¡å®šä¹‰ä¸€äº›éç§æœ‰çš„ã€ä½†åˆå¸Œæœ›åªç”¨äºå†…éƒ¨çš„æ–¹æ³•ã€‚</p>
<pre><code class="javascript">var size = Symbol(&#39;size&#39;);

class Collection {
  constructor() {
    this[size] = 0;
  }

  add(item) {
    this[this[size]] = item;
    this[size]++;
  }

  static sizeOf(instance) {
    return instance[size];
  }
}

var x = new Collection();
Collection.sizeOf(x) // 0

x.add(&#39;foo&#39;);
Collection.sizeOf(x) // 1

Object.keys(x) // [&#39;0&#39;]
Object.getOwnPropertyNames(x) // [&#39;0&#39;]
Object.getOwnPropertySymbols(x) // [Symbol(size)]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡<code>x</code>çš„<code>size</code>å±æ€§æ˜¯ä¸€ä¸ª Symbol å€¼ï¼Œæ‰€ä»¥<code>Object.keys(x)</code>ã€<code>Object.getOwnPropertyNames(x)</code>éƒ½æ— æ³•è·å–å®ƒã€‚è¿™å°±é€ æˆäº†ä¸€ç§éç§æœ‰çš„å†…éƒ¨æ–¹æ³•çš„æ•ˆæœã€‚</p>
<h2 id="Symbol-for-ï¼ŒSymbol-keyFor"><a href="#Symbol-for-ï¼ŒSymbol-keyFor" class="headerlink" title="Symbol.for()ï¼ŒSymbol.keyFor()"></a>Symbol.for()ï¼ŒSymbol.keyFor()</h2><p>æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›é‡æ–°ä½¿ç”¨åŒä¸€ä¸ªSymbolå€¼ï¼Œ<code>Symbol.for</code>æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å®ƒæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç„¶åæœç´¢æœ‰æ²¡æœ‰ä»¥è¯¥å‚æ•°ä½œä¸ºåç§°çš„Symbolå€¼ã€‚å¦‚æœæœ‰ï¼Œå°±è¿”å›è¿™ä¸ªSymbolå€¼ï¼Œå¦åˆ™å°±æ–°å»ºå¹¶è¿”å›ä¸€ä¸ªä»¥è¯¥å­—ç¬¦ä¸²ä¸ºåç§°çš„Symbolå€¼ã€‚</p>
<pre><code class="javascript">var s1 = Symbol.for(&#39;foo&#39;);
var s2 = Symbol.for(&#39;foo&#39;);

s1 === s2 // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>s1</code>å’Œ<code>s2</code>éƒ½æ˜¯ Symbol å€¼ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æ˜¯åŒæ ·å‚æ•°çš„<code>Symbol.for</code>æ–¹æ³•ç”Ÿæˆçš„ï¼Œæ‰€ä»¥å®é™…ä¸Šæ˜¯åŒä¸€ä¸ªå€¼ã€‚</p>
<p><code>Symbol.for()</code>ä¸<code>Symbol()</code>è¿™ä¸¤ç§å†™æ³•ï¼Œéƒ½ä¼šç”Ÿæˆæ–°çš„Symbolã€‚å®ƒä»¬çš„åŒºåˆ«æ˜¯ï¼Œå‰è€…ä¼šè¢«ç™»è®°åœ¨å…¨å±€ç¯å¢ƒä¸­ä¾›æœç´¢ï¼Œåè€…ä¸ä¼šã€‚<code>Symbol.for()</code>ä¸ä¼šæ¯æ¬¡è°ƒç”¨å°±è¿”å›ä¸€ä¸ªæ–°çš„ Symbol ç±»å‹çš„å€¼ï¼Œè€Œæ˜¯ä¼šå…ˆæ£€æŸ¥ç»™å®šçš„<code>key</code>æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨æ‰ä¼šæ–°å»ºä¸€ä¸ªå€¼ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ è°ƒç”¨<code>Symbol.for(&quot;cat&quot;)</code>30æ¬¡ï¼Œæ¯æ¬¡éƒ½ä¼šè¿”å›åŒä¸€ä¸ª Symbol å€¼ï¼Œä½†æ˜¯è°ƒç”¨<code>Symbol(&quot;cat&quot;)</code>30æ¬¡ï¼Œä¼šè¿”å›30ä¸ªä¸åŒçš„Symbolå€¼ã€‚</p>
<pre><code class="javascript">Symbol.for(&quot;bar&quot;) === Symbol.for(&quot;bar&quot;)
// true

Symbol(&quot;bar&quot;) === Symbol(&quot;bar&quot;)
// false
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äº<code>Symbol()</code>å†™æ³•æ²¡æœ‰ç™»è®°æœºåˆ¶ï¼Œæ‰€ä»¥æ¯æ¬¡è°ƒç”¨éƒ½ä¼šè¿”å›ä¸€ä¸ªä¸åŒçš„å€¼ã€‚</p>
<p><code>Symbol.keyFor</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå·²ç™»è®°çš„ Symbol ç±»å‹å€¼çš„<code>key</code>ã€‚</p>
<pre><code class="javascript">var s1 = Symbol.for(&quot;foo&quot;);
Symbol.keyFor(s1) // &quot;foo&quot;

var s2 = Symbol(&quot;foo&quot;);
Symbol.keyFor(s2) // undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>s2</code>å±äºæœªç™»è®°çš„Symbolå€¼ï¼Œæ‰€ä»¥è¿”å›<code>undefined</code>ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>Symbol.for</code>ä¸ºSymbolå€¼ç™»è®°çš„åå­—ï¼Œæ˜¯å…¨å±€ç¯å¢ƒçš„ï¼Œå¯ä»¥åœ¨ä¸åŒçš„ iframe æˆ– service worker ä¸­å–åˆ°åŒä¸€ä¸ªå€¼ã€‚</p>
<pre><code class="javascript">iframe = document.createElement(&#39;iframe&#39;);
iframe.src = String(window.location);
document.body.appendChild(iframe);

iframe.contentWindow.Symbol.for(&#39;foo&#39;) === Symbol.for(&#39;foo&#39;)
// true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œiframe çª—å£ç”Ÿæˆçš„ Symbol å€¼ï¼Œå¯ä»¥åœ¨ä¸»é¡µé¢å¾—åˆ°ã€‚</p>
<h2 id="å®ä¾‹ï¼šæ¨¡å—çš„-Singleton-æ¨¡å¼"><a href="#å®ä¾‹ï¼šæ¨¡å—çš„-Singleton-æ¨¡å¼" class="headerlink" title="å®ä¾‹ï¼šæ¨¡å—çš„ Singleton æ¨¡å¼"></a>å®ä¾‹ï¼šæ¨¡å—çš„ Singleton æ¨¡å¼</h2><p>Singletonæ¨¡å¼æŒ‡çš„æ˜¯è°ƒç”¨ä¸€ä¸ªç±»ï¼Œä»»ä½•æ—¶å€™è¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>å¯¹äºNodeæ¥è¯´ï¼Œæ¨¡å—æ–‡ä»¶å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªç±»ã€‚æ€ä¹ˆä¿è¯æ¯æ¬¡æ‰§è¡Œè¿™ä¸ªæ¨¡å—æ–‡ä»¶ï¼Œè¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹å‘¢ï¼Ÿ</p>
<p>å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œå¯ä»¥æŠŠå®ä¾‹æ”¾åˆ°é¡¶å±‚å¯¹è±¡<code>global</code>ã€‚</p>
<pre><code class="javascript">// mod.js
function A() {
  this.foo = &#39;hello&#39;;
}

if (!global._foo) {
  global._foo = new A();
}

module.exports = global._foo;
</code></pre>
<p>ç„¶åï¼ŒåŠ è½½ä¸Šé¢çš„<code>mod.js</code>ã€‚</p>
<pre><code class="javascript">var a = require(&#39;./mod.js&#39;);
console.log(a.foo);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>a</code>ä»»ä½•æ—¶å€™åŠ è½½çš„éƒ½æ˜¯<code>A</code>çš„åŒä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå…¨å±€å˜é‡<code>global._foo</code>æ˜¯å¯å†™çš„ï¼Œä»»ä½•æ–‡ä»¶éƒ½å¯ä»¥ä¿®æ”¹ã€‚</p>
<pre><code class="javascript">var a = require(&#39;./mod.js&#39;);
global._foo = 123;
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ï¼Œä¼šä½¿å¾—åˆ«çš„è„šæœ¬åŠ è½½<code>mod.js</code>éƒ½å¤±çœŸã€‚</p>
<p>ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µå‡ºç°ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Symbolã€‚</p>
<pre><code class="javascript">// mod.js
const FOO_KEY = Symbol.for(&#39;foo&#39;);

function A() {
  this.foo = &#39;hello&#39;;
}

if (!global[FOO_KEY]) {
  global[FOO_KEY] = new A();
}

module.exports = global[FOO_KEY];
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯ä»¥ä¿è¯<code>global[FOO_KEY]</code>ä¸ä¼šè¢«æ— æ„é—´è¦†ç›–ï¼Œä½†è¿˜æ˜¯å¯ä»¥è¢«æ”¹å†™ã€‚</p>
<pre><code class="javascript">var a = require(&#39;./mod.js&#39;);
global[Symbol.for(&#39;foo&#39;)] = 123;
</code></pre>
<p>å¦‚æœé”®åä½¿ç”¨<code>Symbol</code>æ–¹æ³•ç”Ÿæˆï¼Œé‚£ä¹ˆå¤–éƒ¨å°†æ— æ³•å¼•ç”¨è¿™ä¸ªå€¼ï¼Œå½“ç„¶ä¹Ÿå°±æ— æ³•æ”¹å†™ã€‚</p>
<pre><code class="javascript">// mod.js
const FOO_KEY = Symbol(&#39;foo&#39;);

// åé¢ä»£ç ç›¸åŒ â€¦â€¦
</code></pre>
<p>ä¸Šé¢ä»£ç å°†å¯¼è‡´å…¶ä»–è„šæœ¬éƒ½æ— æ³•å¼•ç”¨<code>FOO_KEY</code>ã€‚ä½†è¿™æ ·ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœå¤šæ¬¡æ‰§è¡Œè¿™ä¸ªè„šæœ¬ï¼Œæ¯æ¬¡å¾—åˆ°çš„<code>FOO_KEY</code>éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚è™½ç„¶Nodeä¼šå°†è„šæœ¬çš„æ‰§è¡Œç»“æœç¼“å­˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸ä¼šå¤šæ¬¡æ‰§è¡ŒåŒä¸€ä¸ªè„šæœ¬ï¼Œä½†æ˜¯ç”¨æˆ·å¯ä»¥æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜ï¼Œæ‰€ä»¥ä¹Ÿä¸æ˜¯å®Œå…¨å¯é ã€‚</p>
<h2 id="å†…ç½®çš„Symbolå€¼"><a href="#å†…ç½®çš„Symbolå€¼" class="headerlink" title="å†…ç½®çš„Symbolå€¼"></a>å†…ç½®çš„Symbolå€¼</h2><p>é™¤äº†å®šä¹‰è‡ªå·±ä½¿ç”¨çš„Symbolå€¼ä»¥å¤–ï¼ŒES6è¿˜æä¾›äº†11ä¸ªå†…ç½®çš„Symbolå€¼ï¼ŒæŒ‡å‘è¯­è¨€å†…éƒ¨ä½¿ç”¨çš„æ–¹æ³•ã€‚</p>
<h3 id="Symbol-hasInstance"><a href="#Symbol-hasInstance" class="headerlink" title="Symbol.hasInstance"></a>Symbol.hasInstance</h3><p>å¯¹è±¡çš„<code>Symbol.hasInstance</code>å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå†…éƒ¨æ–¹æ³•ã€‚å½“å…¶ä»–å¯¹è±¡ä½¿ç”¨<code>instanceof</code>è¿ç®—ç¬¦ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºè¯¥å¯¹è±¡çš„å®ä¾‹æ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚æ¯”å¦‚ï¼Œ<code>foo instanceof Foo</code>åœ¨è¯­è¨€å†…éƒ¨ï¼Œå®é™…è°ƒç”¨çš„æ˜¯<code>Foo[Symbol.hasInstance](foo)</code>ã€‚</p>
<pre><code class="javascript">class MyClass {
  [Symbol.hasInstance](foo) {
    return foo instanceof Array;
  }
}

[1, 2, 3] instanceof new MyClass() // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>MyClass</code>æ˜¯ä¸€ä¸ªç±»ï¼Œ<code>new MyClass()</code>ä¼šè¿”å›ä¸€ä¸ªå®ä¾‹ã€‚è¯¥å®ä¾‹çš„<code>Symbol.hasInstance</code>æ–¹æ³•ï¼Œä¼šåœ¨è¿›è¡Œ<code>instanceof</code>è¿ç®—æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œåˆ¤æ–­å·¦ä¾§çš„è¿ç®—å­æ˜¯å¦ä¸º<code>Array</code>çš„å®ä¾‹ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">class Even {
  static [Symbol.hasInstance](obj) {
    return Number(obj) % 2 === 0;
  }
}

1 instanceof Even // false
2 instanceof Even // true
12345 instanceof Even // false
</code></pre>
<h3 id="Symbol-isConcatSpreadable"><a href="#Symbol-isConcatSpreadable" class="headerlink" title="Symbol.isConcatSpreadable"></a>Symbol.isConcatSpreadable</h3><p>å¯¹è±¡çš„<code>Symbol.isConcatSpreadable</code>å±æ€§ç­‰äºä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡ä½¿ç”¨<code>Array.prototype.concat()</code>æ—¶ï¼Œæ˜¯å¦å¯ä»¥å±•å¼€ã€‚</p>
<pre><code class="javascript">let arr1 = [&#39;c&#39;, &#39;d&#39;];
[&#39;a&#39;, &#39;b&#39;].concat(arr1, &#39;e&#39;) // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;]
arr1[Symbol.isConcatSpreadable] // undefined

let arr2 = [&#39;c&#39;, &#39;d&#39;];
arr2[Symbol.isConcatSpreadable] = false;
[&#39;a&#39;, &#39;b&#39;].concat(arr2, &#39;e&#39;) // [&#39;a&#39;, &#39;b&#39;, [&#39;c&#39;,&#39;d&#39;], &#39;e&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç è¯´æ˜ï¼Œæ•°ç»„çš„é»˜è®¤è¡Œä¸ºæ˜¯å¯ä»¥å±•å¼€ã€‚<code>Symbol.isConcatSpreadable</code>å±æ€§ç­‰äº<code>true</code>æˆ–<code>undefined</code>ï¼Œéƒ½æœ‰è¿™ä¸ªæ•ˆæœã€‚</p>
<p>ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ä¹Ÿå¯ä»¥å±•å¼€ï¼Œä½†å®ƒçš„<code>Symbol.isConcatSpreadable</code>å±æ€§é»˜è®¤ä¸º<code>false</code>ï¼Œå¿…é¡»æ‰‹åŠ¨æ‰“å¼€ã€‚</p>
<pre><code class="javascript">let obj = {length: 2, 0: &#39;c&#39;, 1: &#39;d&#39;};
[&#39;a&#39;, &#39;b&#39;].concat(obj, &#39;e&#39;) // [&#39;a&#39;, &#39;b&#39;, obj, &#39;e&#39;]

obj[Symbol.isConcatSpreadable] = true;
[&#39;a&#39;, &#39;b&#39;].concat(obj, &#39;e&#39;) // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;]
</code></pre>
<p>å¯¹äºä¸€ä¸ªç±»æ¥è¯´ï¼Œ<code>Symbol.isConcatSpreadable</code>å±æ€§å¿…é¡»å†™æˆå®ä¾‹çš„å±æ€§ã€‚</p>
<pre><code class="javascript">class A1 extends Array {
  constructor(args) {
    super(args);
    this[Symbol.isConcatSpreadable] = true;
  }
}
class A2 extends Array {
  constructor(args) {
    super(args);
    this[Symbol.isConcatSpreadable] = false;
  }
}
let a1 = new A1();
a1[0] = 3;
a1[1] = 4;
let a2 = new A2();
a2[0] = 5;
a2[1] = 6;
[1, 2].concat(a1).concat(a2)
// [1, 2, 3, 4, [5, 6]]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç±»<code>A1</code>æ˜¯å¯å±•å¼€çš„ï¼Œç±»<code>A2</code>æ˜¯ä¸å¯å±•å¼€çš„ï¼Œæ‰€ä»¥ä½¿ç”¨<code>concat</code>æ—¶æœ‰ä¸ä¸€æ ·çš„ç»“æœã€‚</p>
<h3 id="Symbol-species"><a href="#Symbol-species" class="headerlink" title="Symbol.species"></a>Symbol.species</h3><p>å¯¹è±¡çš„<code>Symbol.species</code>å±æ€§ï¼ŒæŒ‡å‘å½“å‰å¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚åˆ›é€ å®ä¾‹æ—¶ï¼Œé»˜è®¤ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå³ä½¿ç”¨è¿™ä¸ªå±æ€§è¿”å›çš„å‡½æ•°å½“ä½œæ„é€ å‡½æ•°ï¼Œæ¥åˆ›é€ æ–°çš„å®ä¾‹å¯¹è±¡ã€‚</p>
<pre><code class="javascript">class MyArray extends Array {
  // è¦†ç›–çˆ¶ç±» Array çš„æ„é€ å‡½æ•°
  static get [Symbol.species]() { return Array; }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­ç±»<code>MyArray</code>ç»§æ‰¿äº†çˆ¶ç±»<code>Array</code>ã€‚åˆ›å»º<code>MyArray</code>çš„å®ä¾‹å¯¹è±¡æ—¶ï¼Œæœ¬æ¥ä¼šè°ƒç”¨å®ƒè‡ªå·±çš„æ„é€ å‡½æ•°ï¼ˆæœ¬ä¾‹ä¸­è¢«çœç•¥äº†ï¼‰ï¼Œä½†æ˜¯ç”±äºå®šä¹‰äº†<code>Symbol.species</code>å±æ€§ï¼Œæ‰€ä»¥ä¼šä½¿ç”¨è¿™ä¸ªå±æ€§è¿”å›çš„çš„å‡½æ•°ï¼Œåˆ›å»º<code>MyArray</code>çš„å®ä¾‹ã€‚</p>
<p>è¿™ä¸ªä¾‹å­ä¹Ÿè¯´æ˜ï¼Œå®šä¹‰<code>Symbol.species</code>å±æ€§è¦é‡‡ç”¨<code>get</code>è¯»å–å™¨ã€‚é»˜è®¤çš„<code>Symbol.species</code>å±æ€§ç­‰åŒäºä¸‹é¢çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">static get [Symbol.species]() {
  return this;
}
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">class MyArray extends Array {
  static get [Symbol.species]() { return Array; }
}
var a = new MyArray(1,2,3);
var mapped = a.map(x =&gt; x * x);

mapped instanceof MyArray // false
mapped instanceof Array // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºæ„é€ å‡½æ•°è¢«æ›¿æ¢æˆäº†<code>Array</code>ã€‚æ‰€ä»¥ï¼Œ<code>mapped</code>å¯¹è±¡ä¸æ˜¯<code>MyArray</code>çš„å®ä¾‹ï¼Œè€Œæ˜¯<code>Array</code>çš„å®ä¾‹ã€‚</p>
<h3 id="Symbol-match"><a href="#Symbol-match" class="headerlink" title="Symbol.match"></a>Symbol.match</h3><p>å¯¹è±¡çš„<code>Symbol.match</code>å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå‡½æ•°ã€‚å½“æ‰§è¡Œ<code>str.match(myObject)</code>æ—¶ï¼Œå¦‚æœè¯¥å±æ€§å­˜åœ¨ï¼Œä¼šè°ƒç”¨å®ƒï¼Œè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚</p>
<pre><code class="javascript">String.prototype.match(regexp)
// ç­‰åŒäº
regexp[Symbol.match](this)

class MyMatcher {
  [Symbol.match](string) {
    return &#39;hello world&#39;.indexOf(string);
  }
}

&#39;e&#39;.match(new MyMatcher()) // 1
</code></pre>
<h3 id="Symbol-replace"><a href="#Symbol-replace" class="headerlink" title="Symbol.replace"></a>Symbol.replace</h3><p>å¯¹è±¡çš„<code>Symbol.replace</code>å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªæ–¹æ³•ï¼Œå½“è¯¥å¯¹è±¡è¢«<code>String.prototype.replace</code>æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚</p>
<pre><code class="javascript">String.prototype.replace(searchValue, replaceValue)
// ç­‰åŒäº
searchValue[Symbol.replace](this, replaceValue)
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">const x = {};
x[Symbol.replace] = (...s) =&gt; console.log(s);

&#39;Hello&#39;.replace(x, &#39;World&#39;) // [&quot;Hello&quot;, &quot;World&quot;]
</code></pre>
<p><code>Symbol.replace</code>æ–¹æ³•ä¼šæ”¶åˆ°ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>replace</code>æ–¹æ³•æ­£åœ¨ä½œç”¨çš„å¯¹è±¡ï¼Œä¸Šé¢ä¾‹å­æ˜¯<code>Hello</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ›¿æ¢åçš„å€¼ï¼Œä¸Šé¢ä¾‹å­æ˜¯<code>World</code>ã€‚</p>
<h3 id="Symbol-search"><a href="#Symbol-search" class="headerlink" title="Symbol.search"></a>Symbol.search</h3><p>å¯¹è±¡çš„<code>Symbol.search</code>å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªæ–¹æ³•ï¼Œå½“è¯¥å¯¹è±¡è¢«<code>String.prototype.search</code>æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚</p>
<pre><code class="javascript">String.prototype.search(regexp)
// ç­‰åŒäº
regexp[Symbol.search](this)

class MySearch {
  constructor(value) {
    this.value = value;
  }
  [Symbol.search](string) {
    return string.indexOf(this.value);
  }
}
&#39;foobar&#39;.search(new MySearch(&#39;foo&#39;)) // 0
</code></pre>
<h3 id="Symbol-split"><a href="#Symbol-split" class="headerlink" title="Symbol.split"></a>Symbol.split</h3><p>å¯¹è±¡çš„<code>Symbol.split</code>å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªæ–¹æ³•ï¼Œå½“è¯¥å¯¹è±¡è¢«<code>String.prototype.split</code>æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚</p>
<pre><code class="javascript">String.prototype.split(separator, limit)
// ç­‰åŒäº
separator[Symbol.split](this, limit)
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">class MySplitter {
  constructor(value) {
    this.value = value;
  }
  [Symbol.split](string) {
    var index = string.indexOf(this.value);
    if (index === -1) {
      return string;
    }
    return [
      string.substr(0, index),
      string.substr(index + this.value.length)
    ];
  }
}

&#39;foobar&#39;.split(new MySplitter(&#39;foo&#39;))
// [&#39;&#39;, &#39;bar&#39;]

&#39;foobar&#39;.split(new MySplitter(&#39;bar&#39;))
// [&#39;foo&#39;, &#39;&#39;]

&#39;foobar&#39;.split(new MySplitter(&#39;baz&#39;))
// &#39;foobar&#39;
</code></pre>
<p>ä¸Šé¢æ–¹æ³•ä½¿ç”¨<code>Symbol.split</code>æ–¹æ³•ï¼Œé‡æ–°å®šä¹‰äº†å­—ç¬¦ä¸²å¯¹è±¡çš„<code>split</code>æ–¹æ³•çš„è¡Œä¸ºï¼Œ</p>
<h3 id="Symbol-iterator"><a href="#Symbol-iterator" class="headerlink" title="Symbol.iterator"></a>Symbol.iterator</h3><p>å¯¹è±¡çš„<code>Symbol.iterator</code>å±æ€§ï¼ŒæŒ‡å‘è¯¥å¯¹è±¡çš„é»˜è®¤éå†å™¨æ–¹æ³•ã€‚</p>
<pre><code class="javascript">var myIterable = {};
myIterable[Symbol.iterator] = function* () {
  yield 1;
  yield 2;
  yield 3;
};

[...myIterable] // [1, 2, 3]
</code></pre>
<p>å¯¹è±¡è¿›è¡Œ<code>for...of</code>å¾ªç¯æ—¶ï¼Œä¼šè°ƒç”¨<code>Symbol.iterator</code>æ–¹æ³•ï¼Œè¿”å›è¯¥å¯¹è±¡çš„é»˜è®¤éå†å™¨ï¼Œè¯¦ç»†ä»‹ç»å‚è§ã€ŠIteratorå’Œforâ€¦ofå¾ªç¯ã€‹ä¸€ç« ã€‚</p>
<pre><code class="javascript">class Collection {
  *[Symbol.iterator]() {
    let i = 0;
    while(this[i] !== undefined) {
      yield this[i];
      ++i;
    }
  }
}

let myCollection = new Collection();
myCollection[0] = 1;
myCollection[1] = 2;

for(let value of myCollection) {
  console.log(value);
}
// 1
// 2
</code></pre>
<h3 id="Symbol-toPrimitive"><a href="#Symbol-toPrimitive" class="headerlink" title="Symbol.toPrimitive"></a>Symbol.toPrimitive</h3><p>å¯¹è±¡çš„<code>Symbol.toPrimitive</code>å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªæ–¹æ³•ã€‚è¯¥å¯¹è±¡è¢«è½¬ä¸ºåŸå§‹ç±»å‹çš„å€¼æ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿”å›è¯¥å¯¹è±¡å¯¹åº”çš„åŸå§‹ç±»å‹å€¼ã€‚</p>
<p><code>Symbol.toPrimitive</code>è¢«è°ƒç”¨æ—¶ï¼Œä¼šæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œè¡¨ç¤ºå½“å‰è¿ç®—çš„æ¨¡å¼ï¼Œä¸€å…±æœ‰ä¸‰ç§æ¨¡å¼ã€‚</p>
<ul>
<li>Numberï¼šè¯¥åœºåˆéœ€è¦è½¬æˆæ•°å€¼</li>
<li>Stringï¼šè¯¥åœºåˆéœ€è¦è½¬æˆå­—ç¬¦ä¸²</li>
<li>Defaultï¼šè¯¥åœºåˆå¯ä»¥è½¬æˆæ•°å€¼ï¼Œä¹Ÿå¯ä»¥è½¬æˆå­—ç¬¦ä¸²</li>
</ul>
<pre><code class="javascript">let obj = {
  [Symbol.toPrimitive](hint) {
    switch (hint) {
      case &#39;number&#39;:
        return 123;
      case &#39;string&#39;:
        return &#39;str&#39;;
      case &#39;default&#39;:
        return &#39;default&#39;;
      default:
        throw new Error();
     }
   }
};

2 * obj // 246
3 + obj // &#39;3default&#39;
obj == &#39;default&#39; // true
String(obj) // &#39;str&#39;
</code></pre>
<h3 id="Symbol-toStringTag"><a href="#Symbol-toStringTag" class="headerlink" title="Symbol.toStringTag"></a>Symbol.toStringTag</h3><p>å¯¹è±¡çš„<code>Symbol.toStringTag</code>å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªæ–¹æ³•ã€‚åœ¨è¯¥å¯¹è±¡ä¸Šé¢è°ƒç”¨<code>Object.prototype.toString</code>æ–¹æ³•æ—¶ï¼Œå¦‚æœè¿™ä¸ªå±æ€§å­˜åœ¨ï¼Œå®ƒçš„è¿”å›å€¼ä¼šå‡ºç°åœ¨<code>toString</code>æ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²ä¹‹ä¸­ï¼Œè¡¨ç¤ºå¯¹è±¡çš„ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥ç”¨æ¥å®šåˆ¶<code>[object Object]</code>æˆ–<code>[object Array]</code>ä¸­<code>object</code>åé¢çš„é‚£ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">// ä¾‹ä¸€
({[Symbol.toStringTag]: &#39;Foo&#39;}.toString())
// &quot;[object Foo]&quot;

// ä¾‹äºŒ
class Collection {
  get [Symbol.toStringTag]() {
    return &#39;xxx&#39;;
  }
}
var x = new Collection();
Object.prototype.toString.call(x) // &quot;[object xxx]&quot;
</code></pre>
<p>ES6æ–°å¢å†…ç½®å¯¹è±¡çš„<code>Symbol.toStringTag</code>å±æ€§å€¼å¦‚ä¸‹ã€‚</p>
<ul>
<li><code>JSON[Symbol.toStringTag]</code>ï¼šâ€™JSONâ€™</li>
<li><code>Math[Symbol.toStringTag]</code>ï¼šâ€™Mathâ€™</li>
<li>Moduleå¯¹è±¡<code>M[Symbol.toStringTag]</code>ï¼šâ€™Moduleâ€™</li>
<li><code>ArrayBuffer.prototype[Symbol.toStringTag]</code>ï¼šâ€™ArrayBufferâ€™</li>
<li><code>DataView.prototype[Symbol.toStringTag]</code>ï¼šâ€™DataViewâ€™</li>
<li><code>Map.prototype[Symbol.toStringTag]</code>ï¼šâ€™Mapâ€™</li>
<li><code>Promise.prototype[Symbol.toStringTag]</code>ï¼šâ€™Promiseâ€™</li>
<li><code>Set.prototype[Symbol.toStringTag]</code>ï¼šâ€™Setâ€™</li>
<li><code>%TypedArray%.prototype[Symbol.toStringTag]</code>ï¼šâ€™Uint8Arrayâ€™ç­‰</li>
<li><code>WeakMap.prototype[Symbol.toStringTag]</code>ï¼šâ€™WeakMapâ€™</li>
<li><code>WeakSet.prototype[Symbol.toStringTag]</code>ï¼šâ€™WeakSetâ€™</li>
<li><code>%MapIteratorPrototype%[Symbol.toStringTag]</code>ï¼šâ€™Map Iteratorâ€™</li>
<li><code>%SetIteratorPrototype%[Symbol.toStringTag]</code>ï¼šâ€™Set Iteratorâ€™</li>
<li><code>%StringIteratorPrototype%[Symbol.toStringTag]</code>ï¼šâ€™String Iteratorâ€™</li>
<li><code>Symbol.prototype[Symbol.toStringTag]</code>ï¼šâ€™Symbolâ€™</li>
<li><code>Generator.prototype[Symbol.toStringTag]</code>ï¼šâ€™Generatorâ€™</li>
<li><code>GeneratorFunction.prototype[Symbol.toStringTag]</code>ï¼šâ€™GeneratorFunctionâ€™</li>
</ul>
<h3 id="Symbol-unscopables"><a href="#Symbol-unscopables" class="headerlink" title="Symbol.unscopables"></a>Symbol.unscopables</h3><p>å¯¹è±¡çš„<code>Symbol.unscopables</code>å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å¯¹è±¡æŒ‡å®šäº†ä½¿ç”¨<code>with</code>å…³é”®å­—æ—¶ï¼Œå“ªäº›å±æ€§ä¼šè¢«<code>with</code>ç¯å¢ƒæ’é™¤ã€‚</p>
<pre><code class="javascript">Array.prototype[Symbol.unscopables]
// {
//   copyWithin: true,
//   entries: true,
//   fill: true,
//   find: true,
//   findIndex: true,
//   keys: true
// }

Object.keys(Array.prototype[Symbol.unscopables])
// [&#39;copyWithin&#39;, &#39;entries&#39;, &#39;fill&#39;, &#39;find&#39;, &#39;findIndex&#39;, &#39;keys&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç è¯´æ˜ï¼Œæ•°ç»„æœ‰6ä¸ªå±æ€§ï¼Œä¼šè¢«withå‘½ä»¤æ’é™¤ã€‚</p>
<pre><code class="javascript">// æ²¡æœ‰unscopablesæ—¶
class MyClass {
  foo() { return 1; }
}

var foo = function () { return 2; };

with (MyClass.prototype) {
  foo(); // 1
}

// æœ‰unscopablesæ—¶
class MyClass {
  foo() { return 1; }
  get [Symbol.unscopables]() {
    return { foo: true };
  }
}

var foo = function () { return 2; };

with (MyClass.prototype) {
  foo(); // 2
}
</code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Symbol&quot;&gt;&lt;a href=&quot;#Symbol&quot; class=&quot;headerlink&quot; title=&quot;Symbol&quot;&gt;&lt;/a&gt;Symbol&lt;/h1&gt;&lt;h2 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Symbol" scheme="https://microzz.com/tags/Symbol/"/>
    
  </entry>
  
  <entry>
    <title>å¯¹è±¡çš„æ‰©å±•(Object)</title>
    <link href="https://microzz.com/2016/12/25/object/"/>
    <id>https://microzz.com/2016/12/25/object/</id>
    <published>2016-12-25T04:45:19.000Z</published>
    <updated>2017-09-09T14:06:17.705Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¯¹è±¡çš„æ‰©å±•"><a href="#å¯¹è±¡çš„æ‰©å±•" class="headerlink" title="å¯¹è±¡çš„æ‰©å±•"></a>å¯¹è±¡çš„æ‰©å±•</h1><h2 id="å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•"><a href="#å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•" class="headerlink" title="å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•"></a>å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•</h2><p>ES6å…è®¸ç›´æ¥å†™å…¥å˜é‡å’Œå‡½æ•°ï¼Œä½œä¸ºå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚è¿™æ ·çš„ä¹¦å†™æ›´åŠ ç®€æ´ã€‚</p>
<pre><code class="javascript">var foo = &#39;bar&#39;;
var baz = {foo};
baz // {foo: &quot;bar&quot;}

// ç­‰åŒäº
var baz = {foo: foo};
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨æ˜ï¼ŒES6 å…è®¸åœ¨å¯¹è±¡ä¹‹ä¸­ï¼Œç›´æ¥å†™å˜é‡ã€‚è¿™æ—¶ï¼Œå±æ€§åä¸ºå˜é‡å, å±æ€§å€¼ä¸ºå˜é‡çš„å€¼ã€‚ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">function f(x, y) {
  return {x, y};
}

// ç­‰åŒäº

function f(x, y) {
  return {x: x, y: y};
}

f(1, 2) // Object {x: 1, y: 2}
</code></pre>
<p>é™¤äº†å±æ€§ç®€å†™ï¼Œæ–¹æ³•ä¹Ÿå¯ä»¥ç®€å†™ã€‚</p>
<pre><code class="javascript">var o = {
  method() {
    return &quot;Hello!&quot;;
  }
};

// ç­‰åŒäº

var o = {
  method: function() {
    return &quot;Hello!&quot;;
  }
};
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®é™…çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var birth = &#39;2000/01/01&#39;;

var Person = {

  name: &#39;å¼ ä¸‰&#39;,

  //ç­‰åŒäºbirth: birth
  birth,

  // ç­‰åŒäºhello: function ()...
  hello() { console.log(&#39;æˆ‘çš„åå­—æ˜¯&#39;, this.name); }

};
</code></pre>
<p>è¿™ç§å†™æ³•ç”¨äºå‡½æ•°çš„è¿”å›å€¼ï¼Œå°†ä¼šéå¸¸æ–¹ä¾¿ã€‚</p>
<pre><code class="javascript">function getPoint() {
  var x = 1;
  var y = 10;
  return {x, y};
}

getPoint()
// {x:1, y:10}
</code></pre>
<p>CommonJSæ¨¡å—è¾“å‡ºå˜é‡ï¼Œå°±éå¸¸åˆé€‚ä½¿ç”¨ç®€æ´å†™æ³•ã€‚</p>
<pre><code class="javascript">var ms = {};

function getItem (key) {
  return key in ms ? ms[key] : null;
}

function setItem (key, value) {
  ms[key] = value;
}

function clear () {
  ms = {};
}

module.exports = { getItem, setItem, clear };
// ç­‰åŒäº
module.exports = {
  getItem: getItem,
  setItem: setItem,
  clear: clear
};
</code></pre>
<p>å±æ€§çš„èµ‹å€¼å™¨ï¼ˆsetterï¼‰å’Œå–å€¼å™¨ï¼ˆgetterï¼‰ï¼Œäº‹å®ä¸Šä¹Ÿæ˜¯é‡‡ç”¨è¿™ç§å†™æ³•ã€‚</p>
<pre><code class="javascript">var cart = {
  _wheels: 4,

  get wheels () {
    return this._wheels;
  },

  set wheels (value) {
    if (value &lt; this._wheels) {
      throw new Error(&#39;æ•°å€¼å¤ªå°äº†ï¼&#39;);
    }
    this._wheels = value;
  }
}
</code></pre>
<p>æ³¨æ„ï¼Œç®€æ´å†™æ³•çš„å±æ€§åæ€»æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™ä¼šå¯¼è‡´ä¸€äº›çœ‹ä¸Šå»æ¯”è¾ƒå¥‡æ€ªçš„ç»“æœã€‚</p>
<pre><code class="javascript">var obj = {
  class () {}
};

// ç­‰åŒäº

var obj = {
  &#39;class&#39;: function() {}
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>class</code>æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¸ä¼šå› ä¸ºå®ƒå±äºå…³é”®å­—ï¼Œè€Œå¯¼è‡´è¯­æ³•è§£ææŠ¥é”™ã€‚</p>
<p>å¦‚æœæŸä¸ªæ–¹æ³•çš„å€¼æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼Œå‰é¢éœ€è¦åŠ ä¸Šæ˜Ÿå·ã€‚</p>
<pre><code class="javascript">var obj = {
  * m(){
    yield &#39;hello world&#39;;
  }
};
</code></pre>
<h2 id="å±æ€§åè¡¨è¾¾å¼"><a href="#å±æ€§åè¡¨è¾¾å¼" class="headerlink" title="å±æ€§åè¡¨è¾¾å¼"></a>å±æ€§åè¡¨è¾¾å¼</h2><p>JavaScriptè¯­è¨€å®šä¹‰å¯¹è±¡çš„å±æ€§ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ã€‚</p>
<pre><code class="javascript">// æ–¹æ³•ä¸€
obj.foo = true;

// æ–¹æ³•äºŒ
obj[&#39;a&#39; + &#39;bc&#39;] = 123;
</code></pre>
<p>ä¸Šé¢ä»£ç çš„æ–¹æ³•ä¸€æ˜¯ç›´æ¥ç”¨æ ‡è¯†ç¬¦ä½œä¸ºå±æ€§åï¼Œæ–¹æ³•äºŒæ˜¯ç”¨è¡¨è¾¾å¼ä½œä¸ºå±æ€§åï¼Œè¿™æ—¶è¦å°†è¡¨è¾¾å¼æ”¾åœ¨æ–¹æ‹¬å·ä¹‹å†…ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨å­—é¢é‡æ–¹å¼å®šä¹‰å¯¹è±¡ï¼ˆä½¿ç”¨å¤§æ‹¬å·ï¼‰ï¼Œåœ¨ ES5 ä¸­åªèƒ½ä½¿ç”¨æ–¹æ³•ä¸€ï¼ˆæ ‡è¯†ç¬¦ï¼‰å®šä¹‰å±æ€§ã€‚</p>
<pre><code class="javascript">var obj = {
  foo: true,
  abc: 123
};
</code></pre>
<p>ES6 å…è®¸å­—é¢é‡å®šä¹‰å¯¹è±¡æ—¶ï¼Œç”¨æ–¹æ³•äºŒï¼ˆè¡¨è¾¾å¼ï¼‰ä½œä¸ºå¯¹è±¡çš„å±æ€§åï¼Œå³æŠŠè¡¨è¾¾å¼æ”¾åœ¨æ–¹æ‹¬å·å†…ã€‚</p>
<pre><code class="javascript">let propKey = &#39;foo&#39;;

let obj = {
  [propKey]: true,
  [&#39;a&#39; + &#39;bc&#39;]: 123
};
</code></pre>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var lastWord = &#39;last word&#39;;

var a = {
  &#39;first word&#39;: &#39;hello&#39;,
  [lastWord]: &#39;world&#39;
};

a[&#39;first word&#39;] // &quot;hello&quot;
a[lastWord] // &quot;world&quot;
a[&#39;last word&#39;] // &quot;world&quot;
</code></pre>
<p>è¡¨è¾¾å¼è¿˜å¯ä»¥ç”¨äºå®šä¹‰æ–¹æ³•åã€‚</p>
<pre><code class="javascript">let obj = {
  [&#39;h&#39; + &#39;ello&#39;]() {
    return &#39;hi&#39;;
  }
};

obj.hello() // hi
</code></pre>
<p>æ³¨æ„ï¼Œå±æ€§åè¡¨è¾¾å¼ä¸ç®€æ´è¡¨ç¤ºæ³•ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
var foo = &#39;bar&#39;;
var bar = &#39;abc&#39;;
var baz = { [foo] };

// æ­£ç¡®
var foo = &#39;bar&#39;;
var baz = { [foo]: &#39;abc&#39;};
</code></pre>
<p>æ³¨æ„ï¼Œå±æ€§åè¡¨è¾¾å¼å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šè‡ªåŠ¨å°†å¯¹è±¡è½¬ä¸ºå­—ç¬¦ä¸²<code>[object Object]</code>ï¼Œè¿™ä¸€ç‚¹è¦ç‰¹åˆ«å°å¿ƒã€‚</p>
<pre><code class="javascript">const keyA = {a: 1};
const keyB = {b: 2};

const myObject = {
  [keyA]: &#39;valueA&#39;,
  [keyB]: &#39;valueB&#39;
};

myObject // Object {[object Object]: &quot;valueB&quot;}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>[keyA]</code>å’Œ<code>[keyB]</code>å¾—åˆ°çš„éƒ½æ˜¯<code>[object Object]</code>ï¼Œæ‰€ä»¥<code>[keyB]</code>ä¼šæŠŠ<code>[keyA]</code>è¦†ç›–æ‰ï¼Œè€Œ<code>myObject</code>æœ€ååªæœ‰ä¸€ä¸ª<code>[object Object]</code>å±æ€§ã€‚</p>
<h2 id="æ–¹æ³•çš„-name-å±æ€§"><a href="#æ–¹æ³•çš„-name-å±æ€§" class="headerlink" title="æ–¹æ³•çš„ name å±æ€§"></a>æ–¹æ³•çš„ name å±æ€§</h2><p>å‡½æ•°çš„<code>name</code>å±æ€§ï¼Œè¿”å›å‡½æ•°åã€‚å¯¹è±¡æ–¹æ³•ä¹Ÿæ˜¯å‡½æ•°ï¼Œå› æ­¤ä¹Ÿæœ‰<code>name</code>å±æ€§ã€‚</p>
<pre><code class="javascript">const person = {
  sayName() {
    console.log(&#39;hello!&#39;);
  },
};

person.sayName.name   // &quot;sayName&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ–¹æ³•çš„<code>name</code>å±æ€§è¿”å›å‡½æ•°åï¼ˆå³æ–¹æ³•åï¼‰ã€‚</p>
<p>å¦‚æœå¯¹è±¡çš„æ–¹æ³•ä½¿ç”¨äº†å–å€¼å‡½æ•°ï¼ˆ<code>getter</code>ï¼‰å’Œå­˜å€¼å‡½æ•°ï¼ˆ<code>setter</code>ï¼‰ï¼Œåˆ™<code>name</code>å±æ€§ä¸æ˜¯åœ¨è¯¥æ–¹æ³•ä¸Šé¢ï¼Œè€Œæ˜¯è¯¥æ–¹æ³•çš„å±æ€§çš„æè¿°å¯¹è±¡çš„<code>get</code>å’Œ<code>set</code>å±æ€§ä¸Šé¢ï¼Œè¿”å›å€¼æ˜¯æ–¹æ³•åå‰åŠ ä¸Š<code>get</code>å’Œ<code>set</code>ã€‚</p>
<pre><code class="javascript">const obj = {
  get foo() {},
  set foo(x) {}
};

obj.foo.name
// TypeError: Cannot read property &#39;name&#39; of undefined

const descriptor = Object.getOwnPropertyDescriptor(obj, &#39;foo&#39;);

descriptor.get.name // &quot;get foo&quot;
descriptor.set.name // &quot;set foo&quot;
</code></pre>
<p>æœ‰ä¸¤ç§ç‰¹æ®Šæƒ…å†µï¼š<code>bind</code>æ–¹æ³•åˆ›é€ çš„å‡½æ•°ï¼Œ<code>name</code>å±æ€§è¿”å›<code>bound</code>åŠ ä¸ŠåŸå‡½æ•°çš„åå­—ï¼›<code>Function</code>æ„é€ å‡½æ•°åˆ›é€ çš„å‡½æ•°ï¼Œ<code>name</code>å±æ€§è¿”å›<code>anonymous</code>ã€‚</p>
<pre><code class="javascript">(new Function()).name // &quot;anonymous&quot;

var doSomething = function() {
  // ...
};
doSomething.bind().name // &quot;bound doSomething&quot;
</code></pre>
<p>å¦‚æœå¯¹è±¡çš„æ–¹æ³•æ˜¯ä¸€ä¸ª Symbol å€¼ï¼Œé‚£ä¹ˆ<code>name</code>å±æ€§è¿”å›çš„æ˜¯è¿™ä¸ª Symbol å€¼çš„æè¿°ã€‚</p>
<pre><code class="javascript">const key1 = Symbol(&#39;description&#39;);
const key2 = Symbol();
let obj = {
  [key1]() {},
  [key2]() {},
};
obj[key1].name // &quot;[description]&quot;
obj[key2].name // &quot;&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>key1</code>å¯¹åº”çš„ Symbol å€¼æœ‰æè¿°ï¼Œ<code>key2</code>æ²¡æœ‰ã€‚</p>
<h2 id="Object-is"><a href="#Object-is" class="headerlink" title="Object.is()"></a>Object.is()</h2><p>ES5æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œåªæœ‰ä¸¤ä¸ªè¿ç®—ç¬¦ï¼šç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ<code>==</code>ï¼‰å’Œä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ<code>===</code>ï¼‰ã€‚å®ƒä»¬éƒ½æœ‰ç¼ºç‚¹ï¼Œå‰è€…ä¼šè‡ªåŠ¨è½¬æ¢æ•°æ®ç±»å‹ï¼Œåè€…çš„<code>NaN</code>ä¸ç­‰äºè‡ªèº«ï¼Œä»¥åŠ<code>+0</code>ç­‰äº<code>-0</code>ã€‚JavaScriptç¼ºä¹ä¸€ç§è¿ç®—ï¼Œåœ¨æ‰€æœ‰ç¯å¢ƒä¸­ï¼Œåªè¦ä¸¤ä¸ªå€¼æ˜¯ä¸€æ ·çš„ï¼Œå®ƒä»¬å°±åº”è¯¥ç›¸ç­‰ã€‚</p>
<p>ES6æå‡ºâ€œSame-value equalityâ€ï¼ˆåŒå€¼ç›¸ç­‰ï¼‰ç®—æ³•ï¼Œç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<code>Object.is</code>å°±æ˜¯éƒ¨ç½²è¿™ä¸ªç®—æ³•çš„æ–°æ–¹æ³•ã€‚å®ƒç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ï¼Œä¸ä¸¥æ ¼æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆ===ï¼‰çš„è¡Œä¸ºåŸºæœ¬ä¸€è‡´ã€‚</p>
<pre><code class="javascript">Object.is(&#39;foo&#39;, &#39;foo&#39;)
// true
Object.is({}, {})
// false
</code></pre>
<p>ä¸åŒä¹‹å¤„åªæœ‰ä¸¤ä¸ªï¼šä¸€æ˜¯<code>+0</code>ä¸ç­‰äº<code>-0</code>ï¼ŒäºŒæ˜¯<code>NaN</code>ç­‰äºè‡ªèº«ã€‚</p>
<pre><code class="javascript">+0 === -0 //true
NaN === NaN // false

Object.is(+0, -0) // false
Object.is(NaN, NaN) // true
</code></pre>
<p>ES5å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œéƒ¨ç½²<code>Object.is</code>ã€‚</p>
<pre><code class="javascript">Object.defineProperty(Object, &#39;is&#39;, {
  value: function(x, y) {
    if (x === y) {
      // é’ˆå¯¹+0 ä¸ç­‰äº -0çš„æƒ…å†µ
      return x !== 0 || 1 / x === 1 / y;
    }
    // é’ˆå¯¹NaNçš„æƒ…å†µ
    return x !== x &amp;&amp; y !== y;
  },
  configurable: true,
  enumerable: false,
  writable: true
});
</code></pre>
<h2 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign()"></a>Object.assign()</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p><code>Object.assign</code>æ–¹æ³•ç”¨äºå¯¹è±¡çš„åˆå¹¶ï¼Œå°†æºå¯¹è±¡ï¼ˆsourceï¼‰çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆtargetï¼‰ã€‚</p>
<pre><code class="javascript">var target = { a: 1 };

var source1 = { b: 2 };
var source2 = { c: 3 };

Object.assign(target, source1, source2);
target // {a:1, b:2, c:3}
</code></pre>
<p><code>Object.assign</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„å‚æ•°éƒ½æ˜¯æºå¯¹è±¡ã€‚</p>
<p>æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸æºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œæˆ–å¤šä¸ªæºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œåˆ™åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§ã€‚</p>
<pre><code class="javascript">var target = { a: 1, b: 1 };

var source1 = { b: 2, c: 2 };
var source2 = { c: 3 };

Object.assign(target, source1, source2);
target // {a:1, b:2, c:3}
</code></pre>
<p>å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œ<code>Object.assign</code>ä¼šç›´æ¥è¿”å›è¯¥å‚æ•°ã€‚</p>
<pre><code class="javascript">var obj = {a: 1};
Object.assign(obj) === obj // true
</code></pre>
<p>å¦‚æœè¯¥å‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™ä¼šå…ˆè½¬æˆå¯¹è±¡ï¼Œç„¶åè¿”å›ã€‚</p>
<pre><code class="javascript">typeof Object.assign(2) // &quot;object&quot;
</code></pre>
<p>ç”±äº<code>undefined</code>å’Œ<code>null</code>æ— æ³•è½¬æˆå¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœå®ƒä»¬ä½œä¸ºå‚æ•°ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">Object.assign(undefined) // æŠ¥é”™
Object.assign(null) // æŠ¥é”™
</code></pre>
<p>å¦‚æœéå¯¹è±¡å‚æ•°å‡ºç°åœ¨æºå¯¹è±¡çš„ä½ç½®ï¼ˆå³éé¦–å‚æ•°ï¼‰ï¼Œé‚£ä¹ˆå¤„ç†è§„åˆ™æœ‰æ‰€ä¸åŒã€‚é¦–å…ˆï¼Œè¿™äº›å‚æ•°éƒ½ä¼šè½¬æˆå¯¹è±¡ï¼Œå¦‚æœæ— æ³•è½¬æˆå¯¹è±¡ï¼Œå°±ä¼šè·³è¿‡ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœ<code>undefined</code>å’Œ<code>null</code>ä¸åœ¨é¦–å‚æ•°ï¼Œå°±ä¸ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">let obj = {a: 1};
Object.assign(obj, undefined) === obj // true
Object.assign(obj, null) === obj // true
</code></pre>
<p>å…¶ä»–ç±»å‹çš„å€¼ï¼ˆå³æ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼‰ä¸åœ¨é¦–å‚æ•°ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ä½†æ˜¯ï¼Œé™¤äº†å­—ç¬¦ä¸²ä¼šä»¥æ•°ç»„å½¢å¼ï¼Œæ‹·è´å…¥ç›®æ ‡å¯¹è±¡ï¼Œå…¶ä»–å€¼éƒ½ä¸ä¼šäº§ç”Ÿæ•ˆæœã€‚</p>
<pre><code class="javascript">var v1 = &#39;abc&#39;;
var v2 = true;
var v3 = 10;

var obj = Object.assign({}, v1, v2, v3);
console.log(obj); // { &quot;0&quot;: &quot;a&quot;, &quot;1&quot;: &quot;b&quot;, &quot;2&quot;: &quot;c&quot; }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>v1</code>ã€<code>v2</code>ã€<code>v3</code>åˆ†åˆ«æ˜¯å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼å’Œæ•°å€¼ï¼Œç»“æœåªæœ‰å­—ç¬¦ä¸²åˆå…¥ç›®æ ‡å¯¹è±¡ï¼ˆä»¥å­—ç¬¦æ•°ç»„çš„å½¢å¼ï¼‰ï¼Œæ•°å€¼å’Œå¸ƒå°”å€¼éƒ½ä¼šè¢«å¿½ç•¥ã€‚è¿™æ˜¯å› ä¸ºåªæœ‰å­—ç¬¦ä¸²çš„åŒ…è£…å¯¹è±¡ï¼Œä¼šäº§ç”Ÿå¯æšä¸¾å±æ€§ã€‚</p>
<pre><code class="javascript">Object(true) // {[[PrimitiveValue]]: true}
Object(10)  //  {[[PrimitiveValue]]: 10}
Object(&#39;abc&#39;) // {0: &quot;a&quot;, 1: &quot;b&quot;, 2: &quot;c&quot;, length: 3, [[PrimitiveValue]]: &quot;abc&quot;}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¸ƒå°”å€¼ã€æ•°å€¼ã€å­—ç¬¦ä¸²åˆ†åˆ«è½¬æˆå¯¹åº”çš„åŒ…è£…å¯¹è±¡ï¼Œå¯ä»¥çœ‹åˆ°å®ƒä»¬çš„åŸå§‹å€¼éƒ½åœ¨åŒ…è£…å¯¹è±¡çš„å†…éƒ¨å±æ€§<code>[[PrimitiveValue]]</code>ä¸Šé¢ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸ä¼šè¢«<code>Object.assign</code>æ‹·è´çš„ã€‚åªæœ‰å­—ç¬¦ä¸²çš„åŒ…è£…å¯¹è±¡ï¼Œä¼šäº§ç”Ÿå¯æšä¸¾çš„å®ä¹‰å±æ€§ï¼Œé‚£äº›å±æ€§åˆ™ä¼šè¢«æ‹·è´ã€‚</p>
<p><code>Object.assign</code>æ‹·è´çš„å±æ€§æ˜¯æœ‰é™åˆ¶çš„ï¼Œåªæ‹·è´æºå¯¹è±¡çš„è‡ªèº«å±æ€§ï¼ˆä¸æ‹·è´ç»§æ‰¿å±æ€§ï¼‰ï¼Œä¹Ÿä¸æ‹·è´ä¸å¯æšä¸¾çš„å±æ€§ï¼ˆ<code>enumerable: false</code>ï¼‰ã€‚</p>
<pre><code class="javascript">Object.assign({b: &#39;c&#39;},
  Object.defineProperty({}, &#39;invisible&#39;, {
    enumerable: false,
    value: &#39;hello&#39;
  })
)
// { b: &#39;c&#39; }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Object.assign</code>è¦æ‹·è´çš„å¯¹è±¡åªæœ‰ä¸€ä¸ªä¸å¯æšä¸¾å±æ€§<code>invisible</code>ï¼Œè¿™ä¸ªå±æ€§å¹¶æ²¡æœ‰è¢«æ‹·è´è¿›å»ã€‚</p>
<p>å±æ€§åä¸ºSymbolå€¼çš„å±æ€§ï¼Œä¹Ÿä¼šè¢«<code>Object.assign</code>æ‹·è´ã€‚</p>
<pre><code class="javascript">Object.assign({ a: &#39;b&#39; }, { [Symbol(&#39;c&#39;)]: &#39;d&#39; })
// { a: &#39;b&#39;, Symbol(c): &#39;d&#39; }
</code></pre>
<h3 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><p><code>Object.assign</code>æ–¹æ³•å®è¡Œçš„æ˜¯æµ…æ‹·è´ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæºå¯¹è±¡æŸä¸ªå±æ€§çš„å€¼æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆç›®æ ‡å¯¹è±¡æ‹·è´å¾—åˆ°çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚</p>
<pre><code class="javascript">var obj1 = {a: {b: 1}};
var obj2 = Object.assign({}, obj1);

obj1.a.b = 2;
obj2.a.b // 2
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæºå¯¹è±¡<code>obj1</code>çš„<code>a</code>å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ<code>Object.assign</code>æ‹·è´å¾—åˆ°çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚è¿™ä¸ªå¯¹è±¡çš„ä»»ä½•å˜åŒ–ï¼Œéƒ½ä¼šåæ˜ åˆ°ç›®æ ‡å¯¹è±¡ä¸Šé¢ã€‚</p>
<p>å¯¹äºè¿™ç§åµŒå¥—çš„å¯¹è±¡ï¼Œä¸€æ—¦é‡åˆ°åŒåå±æ€§ï¼Œ<code>Object.assign</code>çš„å¤„ç†æ–¹æ³•æ˜¯æ›¿æ¢ï¼Œè€Œä¸æ˜¯æ·»åŠ ã€‚</p>
<pre><code class="javascript">var target = { a: { b: &#39;c&#39;, d: &#39;e&#39; } }
var source = { a: { b: &#39;hello&#39; } }
Object.assign(target, source)
// { a: { b: &#39;hello&#39; } }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>target</code>å¯¹è±¡çš„<code>a</code>å±æ€§è¢«<code>source</code>å¯¹è±¡çš„<code>a</code>å±æ€§æ•´ä¸ªæ›¿æ¢æ‰äº†ï¼Œè€Œä¸ä¼šå¾—åˆ°<code>{ a: { b: &#39;hello&#39;, d: &#39;e&#39; } }</code>çš„ç»“æœã€‚è¿™é€šå¸¸ä¸æ˜¯å¼€å‘è€…æƒ³è¦çš„ï¼Œéœ€è¦ç‰¹åˆ«å°å¿ƒã€‚</p>
<p>æœ‰ä¸€äº›å‡½æ•°åº“æä¾›<code>Object.assign</code>çš„å®šåˆ¶ç‰ˆæœ¬ï¼ˆæ¯”å¦‚Lodashçš„<code>_.defaultsDeep</code>æ–¹æ³•ï¼‰ï¼Œå¯ä»¥è§£å†³æµ…æ‹·è´çš„é—®é¢˜ï¼Œå¾—åˆ°æ·±æ‹·è´çš„åˆå¹¶ã€‚</p>
<p>æ³¨æ„ï¼Œ<code>Object.assign</code>å¯ä»¥ç”¨æ¥å¤„ç†æ•°ç»„ï¼Œä½†æ˜¯ä¼šæŠŠæ•°ç»„è§†ä¸ºå¯¹è±¡ã€‚</p>
<pre><code class="javascript">Object.assign([1, 2, 3], [4, 5])
// [4, 5, 3]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Object.assign</code>æŠŠæ•°ç»„è§†ä¸ºå±æ€§åä¸º0ã€1ã€2çš„å¯¹è±¡ï¼Œå› æ­¤æºæ•°ç»„çš„0å·å±æ€§<code>4</code>è¦†ç›–äº†ç›®æ ‡æ•°ç»„çš„0å·å±æ€§<code>1</code>ã€‚</p>
<h3 id="å¸¸è§ç”¨é€”"><a href="#å¸¸è§ç”¨é€”" class="headerlink" title="å¸¸è§ç”¨é€”"></a>å¸¸è§ç”¨é€”</h3><p><code>Object.assign</code>æ–¹æ³•æœ‰å¾ˆå¤šç”¨å¤„ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰ä¸ºå¯¹è±¡æ·»åŠ å±æ€§</strong></p>
<pre><code class="javascript">class Point {
  constructor(x, y) {
    Object.assign(this, {x, y});
  }
}
</code></pre>
<p>ä¸Šé¢æ–¹æ³•é€šè¿‡<code>Object.assign</code>æ–¹æ³•ï¼Œå°†<code>x</code>å±æ€§å’Œ<code>y</code>å±æ€§æ·»åŠ åˆ°<code>Point</code>ç±»çš„å¯¹è±¡å®ä¾‹ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰ä¸ºå¯¹è±¡æ·»åŠ æ–¹æ³•</strong></p>
<pre><code class="javascript">Object.assign(SomeClass.prototype, {
  someMethod(arg1, arg2) {
    Â·Â·Â·
  },
  anotherMethod() {
    Â·Â·Â·
  }
});

// ç­‰åŒäºä¸‹é¢çš„å†™æ³•
SomeClass.prototype.someMethod = function (arg1, arg2) {
  Â·Â·Â·
};
SomeClass.prototype.anotherMethod = function () {
  Â·Â·Â·
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨äº†å¯¹è±¡å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•ï¼Œç›´æ¥å°†ä¸¤ä¸ªå‡½æ•°æ”¾åœ¨å¤§æ‹¬å·ä¸­ï¼Œå†ä½¿ç”¨assignæ–¹æ³•æ·»åŠ åˆ°SomeClass.prototypeä¹‹ä¸­ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰å…‹éš†å¯¹è±¡</strong></p>
<pre><code class="javascript">function clone(origin) {
  return Object.assign({}, origin);
}
</code></pre>
<p>ä¸Šé¢ä»£ç å°†åŸå§‹å¯¹è±¡æ‹·è´åˆ°ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå°±å¾—åˆ°äº†åŸå§‹å¯¹è±¡çš„å…‹éš†ã€‚</p>
<p>ä¸è¿‡ï¼Œé‡‡ç”¨è¿™ç§æ–¹æ³•å…‹éš†ï¼Œåªèƒ½å…‹éš†åŸå§‹å¯¹è±¡è‡ªèº«çš„å€¼ï¼Œä¸èƒ½å…‹éš†å®ƒç»§æ‰¿çš„å€¼ã€‚å¦‚æœæƒ³è¦ä¿æŒç»§æ‰¿é“¾ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„ä»£ç ã€‚</p>
<pre><code class="javascript">function clone(origin) {
  let originProto = Object.getPrototypeOf(origin);
  return Object.assign(Object.create(originProto), origin);
}
</code></pre>
<p><strong>ï¼ˆ4ï¼‰åˆå¹¶å¤šä¸ªå¯¹è±¡</strong></p>
<p>å°†å¤šä¸ªå¯¹è±¡åˆå¹¶åˆ°æŸä¸ªå¯¹è±¡ã€‚</p>
<pre><code class="javascript">const merge =
  (target, ...sources) =&gt; Object.assign(target, ...sources);
</code></pre>
<p>å¦‚æœå¸Œæœ›åˆå¹¶åè¿”å›ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¯ä»¥æ”¹å†™ä¸Šé¢å‡½æ•°ï¼Œå¯¹ä¸€ä¸ªç©ºå¯¹è±¡åˆå¹¶ã€‚</p>
<pre><code class="javascript">const merge =
  (...sources) =&gt; Object.assign({}, ...sources);
</code></pre>
<p><strong>ï¼ˆ5ï¼‰ä¸ºå±æ€§æŒ‡å®šé»˜è®¤å€¼</strong></p>
<pre><code class="javascript">const DEFAULTS = {
  logLevel: 0,
  outputFormat: &#39;html&#39;
};

function processContent(options) {
  options = Object.assign({}, DEFAULTS, options);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>DEFAULTS</code>å¯¹è±¡æ˜¯é»˜è®¤å€¼ï¼Œ<code>options</code>å¯¹è±¡æ˜¯ç”¨æˆ·æä¾›çš„å‚æ•°ã€‚<code>Object.assign</code>æ–¹æ³•å°†<code>DEFAULTS</code>å’Œ<code>options</code>åˆå¹¶æˆä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¦‚æœä¸¤è€…æœ‰åŒåå±æ€§ï¼Œåˆ™<code>option</code>çš„å±æ€§å€¼ä¼šè¦†ç›–<code>DEFAULTS</code>çš„å±æ€§å€¼ã€‚</p>
<p>æ³¨æ„ï¼Œç”±äºå­˜åœ¨æ·±æ‹·è´çš„é—®é¢˜ï¼Œ<code>DEFAULTS</code>å¯¹è±¡å’Œ<code>options</code>å¯¹è±¡çš„æ‰€æœ‰å±æ€§çš„å€¼ï¼Œéƒ½åªèƒ½æ˜¯ç®€å•ç±»å‹ï¼Œè€Œä¸èƒ½æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚å¦åˆ™ï¼Œå°†å¯¼è‡´<code>DEFAULTS</code>å¯¹è±¡çš„è¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚</p>
<h2 id="å±æ€§çš„å¯æšä¸¾æ€§"><a href="#å±æ€§çš„å¯æšä¸¾æ€§" class="headerlink" title="å±æ€§çš„å¯æšä¸¾æ€§"></a>å±æ€§çš„å¯æšä¸¾æ€§</h2><p>å¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªæè¿°å¯¹è±¡ï¼ˆDescriptorï¼‰ï¼Œç”¨æ¥æ§åˆ¶è¯¥å±æ€§çš„è¡Œä¸ºã€‚<code>Object.getOwnPropertyDescriptor</code>æ–¹æ³•å¯ä»¥è·å–è¯¥å±æ€§çš„æè¿°å¯¹è±¡ã€‚</p>
<pre><code class="javascript">let obj = { foo: 123 };
Object.getOwnPropertyDescriptor(obj, &#39;foo&#39;)
//  {
//    value: 123,
//    writable: true,
//    enumerable: true,
//    configurable: true
//  }
</code></pre>
<p>æè¿°å¯¹è±¡çš„<code>enumerable</code>å±æ€§ï¼Œç§°ä¸ºâ€å¯æšä¸¾æ€§â€œï¼Œå¦‚æœè¯¥å±æ€§ä¸º<code>false</code>ï¼Œå°±è¡¨ç¤ºæŸäº›æ“ä½œä¼šå¿½ç•¥å½“å‰å±æ€§ã€‚</p>
<p>ES5æœ‰ä¸‰ä¸ªæ“ä½œä¼šå¿½ç•¥<code>enumerable</code>ä¸º<code>false</code>çš„å±æ€§ã€‚</p>
<ul>
<li><code>for...in</code>å¾ªç¯ï¼šåªéå†å¯¹è±¡è‡ªèº«çš„å’Œç»§æ‰¿çš„å¯æšä¸¾çš„å±æ€§</li>
<li><code>Object.keys()</code>ï¼šè¿”å›å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å¯æšä¸¾çš„å±æ€§çš„é”®å</li>
<li><code>JSON.stringify()</code>ï¼šåªä¸²è¡ŒåŒ–å¯¹è±¡è‡ªèº«çš„å¯æšä¸¾çš„å±æ€§</li>
</ul>
<p>ES6æ–°å¢äº†ä¸€ä¸ªæ“ä½œ<code>Object.assign()</code>ï¼Œä¼šå¿½ç•¥<code>enumerable</code>ä¸º<code>false</code>çš„å±æ€§ï¼Œåªæ‹·è´å¯¹è±¡è‡ªèº«çš„å¯æšä¸¾çš„å±æ€§ã€‚</p>
<p>è¿™å››ä¸ªæ“ä½œä¹‹ä¸­ï¼Œåªæœ‰<code>for...in</code>ä¼šè¿”å›ç»§æ‰¿çš„å±æ€§ã€‚å®é™…ä¸Šï¼Œå¼•å…¥<code>enumerable</code>çš„æœ€åˆç›®çš„ï¼Œå°±æ˜¯è®©æŸäº›å±æ€§å¯ä»¥è§„é¿æ‰<code>for...in</code>æ“ä½œã€‚æ¯”å¦‚ï¼Œå¯¹è±¡åŸå‹çš„<code>toString</code>æ–¹æ³•ï¼Œä»¥åŠæ•°ç»„çš„<code>length</code>å±æ€§ï¼Œå°±é€šè¿‡è¿™ç§æ‰‹æ®µï¼Œä¸ä¼šè¢«<code>for...in</code>éå†åˆ°ã€‚</p>
<pre><code class="javascript">Object.getOwnPropertyDescriptor(Object.prototype, &#39;toString&#39;).enumerable
// false

Object.getOwnPropertyDescriptor([], &#39;length&#39;).enumerable
// false
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>toString</code>å’Œ<code>length</code>å±æ€§çš„<code>enumerable</code>éƒ½æ˜¯<code>false</code>ï¼Œå› æ­¤<code>for...in</code>ä¸ä¼šéå†åˆ°è¿™ä¸¤ä¸ªç»§æ‰¿è‡ªåŸå‹çš„å±æ€§ã€‚</p>
<p>å¦å¤–ï¼ŒES6è§„å®šï¼Œæ‰€æœ‰Classçš„åŸå‹çš„æ–¹æ³•éƒ½æ˜¯ä¸å¯æšä¸¾çš„ã€‚</p>
<pre><code class="javascript">Object.getOwnPropertyDescriptor(class {foo() {}}.prototype, &#39;foo&#39;).enumerable
// false
</code></pre>
<p>æ€»çš„æ¥è¯´ï¼Œæ“ä½œä¸­å¼•å…¥ç»§æ‰¿çš„å±æ€§ä¼šè®©é—®é¢˜å¤æ‚åŒ–ï¼Œå¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬åªå…³å¿ƒå¯¹è±¡è‡ªèº«çš„å±æ€§ã€‚æ‰€ä»¥ï¼Œå°½é‡ä¸è¦ç”¨<code>for...in</code>å¾ªç¯ï¼Œè€Œç”¨<code>Object.keys()</code>ä»£æ›¿ã€‚</p>
<h2 id="å±æ€§çš„éå†"><a href="#å±æ€§çš„éå†" class="headerlink" title="å±æ€§çš„éå†"></a>å±æ€§çš„éå†</h2><p>ES6ä¸€å…±æœ‰5ç§æ–¹æ³•å¯ä»¥éå†å¯¹è±¡çš„å±æ€§ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰forâ€¦in</strong></p>
<p><code>for...in</code>å¾ªç¯éå†å¯¹è±¡è‡ªèº«çš„å’Œç»§æ‰¿çš„å¯æšä¸¾å±æ€§ï¼ˆä¸å«Symbolå±æ€§ï¼‰ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰Object.keys(obj)</strong></p>
<p><code>Object.keys</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…æ‹¬å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼ˆä¸å«Symbolå±æ€§ï¼‰ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰Object.getOwnPropertyNames(obj)</strong></p>
<p><code>Object.getOwnPropertyNames</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ï¼ˆä¸å«Symbolå±æ€§ï¼Œä½†æ˜¯åŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ï¼‰ã€‚</p>
<p><strong>ï¼ˆ4ï¼‰Object.getOwnPropertySymbols(obj)</strong></p>
<p><code>Object.getOwnPropertySymbols</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰Symbolå±æ€§ã€‚</p>
<p><strong>ï¼ˆ5ï¼‰Reflect.ownKeys(obj)</strong></p>
<p><code>Reflect.ownKeys</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ï¼Œä¸ç®¡æ˜¯å±æ€§åæ˜¯Symbolæˆ–å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸ç®¡æ˜¯å¦å¯æšä¸¾ã€‚</p>
<p>ä»¥ä¸Šçš„5ç§æ–¹æ³•éå†å¯¹è±¡çš„å±æ€§ï¼Œéƒ½éµå®ˆåŒæ ·çš„å±æ€§éå†çš„æ¬¡åºè§„åˆ™ã€‚</p>
<ul>
<li>é¦–å…ˆéå†æ‰€æœ‰å±æ€§åä¸ºæ•°å€¼çš„å±æ€§ï¼ŒæŒ‰ç…§æ•°å­—æ’åºã€‚</li>
<li>å…¶æ¬¡éå†æ‰€æœ‰å±æ€§åä¸ºå­—ç¬¦ä¸²çš„å±æ€§ï¼ŒæŒ‰ç…§ç”Ÿæˆæ—¶é—´æ’åºã€‚</li>
<li>æœ€åéå†æ‰€æœ‰å±æ€§åä¸ºSymbolå€¼çš„å±æ€§ï¼ŒæŒ‰ç…§ç”Ÿæˆæ—¶é—´æ’åºã€‚</li>
</ul>
<pre><code class="javascript">Reflect.ownKeys({ [Symbol()]:0, b:0, 10:0, 2:0, a:0 })
// [&#39;2&#39;, &#39;10&#39;, &#39;b&#39;, &#39;a&#39;, Symbol()]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Reflect.ownKeys</code>æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†å‚æ•°å¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚è¿™ä¸ªæ•°ç»„çš„å±æ€§æ¬¡åºæ˜¯è¿™æ ·çš„ï¼Œé¦–å…ˆæ˜¯æ•°å€¼å±æ€§<code>2</code>å’Œ<code>10</code>ï¼Œå…¶æ¬¡æ˜¯å­—ç¬¦ä¸²å±æ€§<code>b</code>å’Œ<code>a</code>ï¼Œæœ€åæ˜¯Symbolå±æ€§ã€‚</p>
<h2 id="proto-å±æ€§ï¼ŒObject-setPrototypeOf-ï¼ŒObject-getPrototypeOf"><a href="#proto-å±æ€§ï¼ŒObject-setPrototypeOf-ï¼ŒObject-getPrototypeOf" class="headerlink" title="__proto__å±æ€§ï¼ŒObject.setPrototypeOf()ï¼ŒObject.getPrototypeOf()"></a><code>__proto__</code>å±æ€§ï¼ŒObject.setPrototypeOf()ï¼ŒObject.getPrototypeOf()</h2><p><strong>ï¼ˆ1ï¼‰<code>__proto__</code>å±æ€§</strong></p>
<p><code>__proto__</code>å±æ€§ï¼ˆå‰åå„ä¸¤ä¸ªä¸‹åˆ’çº¿ï¼‰ï¼Œç”¨æ¥è¯»å–æˆ–è®¾ç½®å½“å‰å¯¹è±¡çš„<code>prototype</code>å¯¹è±¡ã€‚ç›®å‰ï¼Œæ‰€æœ‰æµè§ˆå™¨ï¼ˆåŒ…æ‹¬IE11ï¼‰éƒ½éƒ¨ç½²äº†è¿™ä¸ªå±æ€§ã€‚</p>
<pre><code class="javascript">// es6çš„å†™æ³•
var obj = {
  method: function() { ... }
};
obj.__proto__ = someOtherObj;

// es5çš„å†™æ³•
var obj = Object.create(someOtherObj);
obj.method = function() { ... };
</code></pre>
<p>è¯¥å±æ€§æ²¡æœ‰å†™å…¥ES6çš„æ­£æ–‡ï¼Œè€Œæ˜¯å†™å…¥äº†é™„å½•ï¼ŒåŸå› æ˜¯<code>__proto__</code>å‰åçš„åŒä¸‹åˆ’çº¿ï¼Œè¯´æ˜å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå†…éƒ¨å±æ€§ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ­£å¼çš„å¯¹å¤–çš„APIï¼Œåªæ˜¯ç”±äºæµè§ˆå™¨å¹¿æ³›æ”¯æŒï¼Œæ‰è¢«åŠ å…¥äº†ES6ã€‚æ ‡å‡†æ˜ç¡®è§„å®šï¼Œåªæœ‰æµè§ˆå™¨å¿…é¡»éƒ¨ç½²è¿™ä¸ªå±æ€§ï¼Œå…¶ä»–è¿è¡Œç¯å¢ƒä¸ä¸€å®šéœ€è¦éƒ¨ç½²ï¼Œè€Œä¸”æ–°çš„ä»£ç æœ€å¥½è®¤ä¸ºè¿™ä¸ªå±æ€§æ˜¯ä¸å­˜åœ¨çš„ã€‚å› æ­¤ï¼Œæ— è®ºä»è¯­ä¹‰çš„è§’åº¦ï¼Œè¿˜æ˜¯ä»å…¼å®¹æ€§çš„è§’åº¦ï¼Œéƒ½ä¸è¦ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸‹é¢çš„<code>Object.setPrototypeOf()</code>ï¼ˆå†™æ“ä½œï¼‰ã€<code>Object.getPrototypeOf()</code>ï¼ˆè¯»æ“ä½œï¼‰ã€<code>Object.create()</code>ï¼ˆç”Ÿæˆæ“ä½œï¼‰ä»£æ›¿ã€‚</p>
<p>åœ¨å®ç°ä¸Šï¼Œ<code>__proto__</code>è°ƒç”¨çš„æ˜¯<code>Object.prototype.__proto__</code>ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">Object.defineProperty(Object.prototype, &#39;__proto__&#39;, {
  get() {
    let _thisObj = Object(this);
    return Object.getPrototypeOf(_thisObj);
  },
  set(proto) {
    if (this === undefined || this === null) {
      throw new TypeError();
    }
    if (!isObject(this)) {
      return undefined;
    }
    if (!isObject(proto)) {
      return undefined;
    }
    let status = Reflect.setPrototypeOf(this, proto);
    if (!status) {
      throw new TypeError();
    }
  },
});
function isObject(value) {
  return Object(value) === value;
}
</code></pre>
<p>å¦‚æœä¸€ä¸ªå¯¹è±¡æœ¬èº«éƒ¨ç½²äº†<code>__proto__</code>å±æ€§ï¼Œåˆ™è¯¥å±æ€§çš„å€¼å°±æ˜¯å¯¹è±¡çš„åŸå‹ã€‚</p>
<pre><code class="javascript">Object.getPrototypeOf({ __proto__: null })
// null
</code></pre>
<p><strong>ï¼ˆ2ï¼‰Object.setPrototypeOf()</strong></p>
<p><code>Object.setPrototypeOf</code>æ–¹æ³•çš„ä½œç”¨ä¸<code>__proto__</code>ç›¸åŒï¼Œç”¨æ¥è®¾ç½®ä¸€ä¸ªå¯¹è±¡çš„<code>prototype</code>å¯¹è±¡ã€‚å®ƒæ˜¯ES6æ­£å¼æ¨èçš„è®¾ç½®åŸå‹å¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<pre><code class="javascript">// æ ¼å¼
Object.setPrototypeOf(object, prototype)

// ç”¨æ³•
var o = Object.setPrototypeOf({}, null);
</code></pre>
<p>è¯¥æ–¹æ³•ç­‰åŒäºä¸‹é¢çš„å‡½æ•°ã€‚</p>
<pre><code class="javascript">function (obj, proto) {
  obj.__proto__ = proto;
  return obj;
}
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">let proto = {};
let obj = { x: 10 };
Object.setPrototypeOf(obj, proto);

proto.y = 20;
proto.z = 40;

obj.x // 10
obj.y // 20
obj.z // 40
</code></pre>
<p>ä¸Šé¢ä»£ç å°†protoå¯¹è±¡è®¾ä¸ºobjå¯¹è±¡çš„åŸå‹ï¼Œæ‰€ä»¥ä»objå¯¹è±¡å¯ä»¥è¯»å–protoå¯¹è±¡çš„å±æ€§ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰Object.getPrototypeOf()</strong></p>
<p>è¯¥æ–¹æ³•ä¸setPrototypeOfæ–¹æ³•é…å¥—ï¼Œç”¨äºè¯»å–ä¸€ä¸ªå¯¹è±¡çš„prototypeå¯¹è±¡ã€‚</p>
<pre><code class="javascript">Object.getPrototypeOf(obj);
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">function Rectangle() {
}

var rec = new Rectangle();

Object.getPrototypeOf(rec) === Rectangle.prototype
// true

Object.setPrototypeOf(rec, Object.prototype);
Object.getPrototypeOf(rec) === Rectangle.prototype
// false
</code></pre>
<h2 id="Object-keys-ï¼ŒObject-values-ï¼ŒObject-entries"><a href="#Object-keys-ï¼ŒObject-values-ï¼ŒObject-entries" class="headerlink" title="Object.keys()ï¼ŒObject.values()ï¼ŒObject.entries()"></a>Object.keys()ï¼ŒObject.values()ï¼ŒObject.entries()</h2><h3 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys()"></a>Object.keys()</h3><p>ES5 å¼•å…¥äº†<code>Object.keys</code>æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®åã€‚</p>
<pre><code class="javascript">var obj = { foo: &#39;bar&#39;, baz: 42 };
Object.keys(obj)
// [&quot;foo&quot;, &quot;baz&quot;]
</code></pre>
<p>ES2017 <a href="https://github.com/tc39/proposal-object-values-entries" target="_blank" rel="external">å¼•å…¥</a>äº†è·Ÿ<code>Object.keys</code>é…å¥—çš„<code>Object.values</code>å’Œ<code>Object.entries</code>ï¼Œä½œä¸ºéå†ä¸€ä¸ªå¯¹è±¡çš„è¡¥å……æ‰‹æ®µã€‚</p>
<pre><code class="javascript">let {keys, values, entries} = Object;
let obj = { a: 1, b: 2, c: 3 };

for (let key of keys(obj)) {
  console.log(key); // &#39;a&#39;, &#39;b&#39;, &#39;c&#39;
}

for (let value of values(obj)) {
  console.log(value); // 1, 2, 3
}

for (let [key, value] of entries(obj)) {
  console.log([key, value]); // [&#39;a&#39;, 1], [&#39;b&#39;, 2], [&#39;c&#39;, 3]
}
</code></pre>
<h3 id="Object-values"><a href="#Object-values" class="headerlink" title="Object.values()"></a>Object.values()</h3><p><code>Object.values</code>æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®å€¼ã€‚</p>
<pre><code class="javascript">var obj = { foo: &#39;bar&#39;, baz: 42 };
Object.values(obj)
// [&quot;bar&quot;, 42]
</code></pre>
<p>è¿”å›æ•°ç»„çš„æˆå‘˜é¡ºåºï¼Œä¸æœ¬ç« çš„ã€Šå±æ€§çš„éå†ã€‹éƒ¨åˆ†ä»‹ç»çš„æ’åˆ—è§„åˆ™ä¸€è‡´ã€‚</p>
<pre><code class="javascript">var obj = { 100: &#39;a&#39;, 2: &#39;b&#39;, 7: &#39;c&#39; };
Object.values(obj)
// [&quot;b&quot;, &quot;c&quot;, &quot;a&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå±æ€§åä¸ºæ•°å€¼çš„å±æ€§ï¼Œæ˜¯æŒ‰ç…§æ•°å€¼å¤§å°ï¼Œä»å°åˆ°å¤§éå†çš„ï¼Œå› æ­¤è¿”å›çš„é¡ºåºæ˜¯<code>b</code>ã€<code>c</code>ã€<code>a</code>ã€‚</p>
<p><code>Object.values</code>åªè¿”å›å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§ã€‚</p>
<pre><code class="javascript">var obj = Object.create({}, {p: {value: 42}});
Object.values(obj) // []
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Object.create</code>æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ·»åŠ çš„å¯¹è±¡å±æ€§ï¼ˆå±æ€§<code>p</code>ï¼‰ï¼Œå¦‚æœä¸æ˜¾å¼å£°æ˜ï¼Œé»˜è®¤æ˜¯ä¸å¯éå†çš„ï¼Œå› ä¸º<code>p</code>æ˜¯ç»§æ‰¿çš„å±æ€§ï¼Œè€Œä¸æ˜¯å¯¹è±¡è‡ªèº«çš„å±æ€§ã€‚<code>Object.values</code>ä¸ä¼šè¿”å›è¿™ä¸ªå±æ€§ã€‚</p>
<p><code>Object.values</code>ä¼šè¿‡æ»¤å±æ€§åä¸º Symbol å€¼çš„å±æ€§ã€‚</p>
<pre><code class="javascript">Object.values({ [Symbol()]: 123, foo: &#39;abc&#39; });
// [&#39;abc&#39;]
</code></pre>
<p>å¦‚æœ<code>Object.values</code>æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¼šè¿”å›å„ä¸ªå­—ç¬¦ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ã€‚</p>
<pre><code class="javascript">Object.values(&#39;foo&#39;)
// [&#39;f&#39;, &#39;o&#39;, &#39;o&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²ä¼šå…ˆè½¬æˆä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ï¼Œå°±æ˜¯è¯¥å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚å› æ­¤ï¼Œ<code>Object.values</code>è¿”å›æ¯ä¸ªå±æ€§çš„é”®å€¼ï¼Œå°±æ˜¯å„ä¸ªå­—ç¬¦ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ã€‚</p>
<p>å¦‚æœå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œ<code>Object.values</code>ä¼šå…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡ã€‚ç”±äºæ•°å€¼å’Œå¸ƒå°”å€¼çš„åŒ…è£…å¯¹è±¡ï¼Œéƒ½ä¸ä¼šä¸ºå®ä¾‹æ·»åŠ éç»§æ‰¿çš„å±æ€§ã€‚æ‰€ä»¥ï¼Œ<code>Object.values</code>ä¼šè¿”å›ç©ºæ•°ç»„ã€‚</p>
<pre><code class="javascript">Object.values(42) // []
Object.values(true) // []
</code></pre>
<h3 id="Object-entries"><a href="#Object-entries" class="headerlink" title="Object.entries"></a>Object.entries</h3><p><code>Object.entries</code>æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®å€¼å¯¹æ•°ç»„ã€‚</p>
<pre><code class="javascript">var obj = { foo: &#39;bar&#39;, baz: 42 };
Object.entries(obj)
// [ [&quot;foo&quot;, &quot;bar&quot;], [&quot;baz&quot;, 42] ]
</code></pre>
<p>é™¤äº†è¿”å›å€¼ä¸ä¸€æ ·ï¼Œè¯¥æ–¹æ³•çš„è¡Œä¸ºä¸<code>Object.values</code>åŸºæœ¬ä¸€è‡´ã€‚</p>
<p>å¦‚æœåŸå¯¹è±¡çš„å±æ€§åæ˜¯ä¸€ä¸ªSymbolå€¼ï¼Œè¯¥å±æ€§ä¼šè¢«çœç•¥ã€‚</p>
<pre><code class="javascript">Object.entries({ [Symbol()]: 123, foo: &#39;abc&#39; });
// [ [ &#39;foo&#39;, &#39;abc&#39; ] ]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒåŸå¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§ï¼Œ<code>Object.entries</code>åªè¾“å‡ºå±æ€§åéSymbolå€¼çš„å±æ€§ã€‚å°†æ¥å¯èƒ½ä¼šæœ‰<code>Reflect.ownEntries()</code>æ–¹æ³•ï¼Œè¿”å›å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ã€‚</p>
<p><code>Object.entries</code>çš„åŸºæœ¬ç”¨é€”æ˜¯éå†å¯¹è±¡çš„å±æ€§ã€‚</p>
<pre><code class="javascript">let obj = { one: 1, two: 2 };
for (let [k, v] of Object.entries(obj)) {
  console.log(`${JSON.stringify(k)}: ${JSON.stringify(v)}`);
}
// &quot;one&quot;: 1
// &quot;two&quot;: 2
</code></pre>
<p><code>Object.entries</code>æ–¹æ³•çš„ä¸€ä¸ªç”¨å¤„æ˜¯ï¼Œå°†å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„<code>Map</code>ç»“æ„ã€‚</p>
<pre><code class="javascript">var obj = { foo: &#39;bar&#39;, baz: 42 };
var map = new Map(Object.entries(obj));
map // Map { foo: &quot;bar&quot;, baz: 42 }
</code></pre>
<p>è‡ªå·±å®ç°<code>Object.entries</code>æ–¹æ³•ï¼Œéå¸¸ç®€å•ã€‚</p>
<pre><code class="javascript">// Generatorå‡½æ•°çš„ç‰ˆæœ¬
function* entries(obj) {
  for (let key of Object.keys(obj)) {
    yield [key, obj[key]];
  }
}

// éGeneratorå‡½æ•°çš„ç‰ˆæœ¬
function entries(obj) {
  let arr = [];
  for (let key of Object.keys(obj)) {
    arr.push([key, obj[key]]);
  }
  return arr;
}
</code></pre>
<h2 id="å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦"><a href="#å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦"></a>å¯¹è±¡çš„æ‰©å±•è¿ç®—ç¬¦</h2><p>ç›®å‰ï¼ŒES7æœ‰ä¸€ä¸ª<a href="https://github.com/sebmarkbage/ecmascript-rest-spread" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œå°†Restè¿ç®—ç¬¦ï¼ˆè§£æ„èµ‹å€¼ï¼‰/æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰å¼•å…¥å¯¹è±¡ã€‚Babelè½¬ç å™¨å·²ç»æ”¯æŒè¿™é¡¹åŠŸèƒ½ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰è§£æ„èµ‹å€¼</strong></p>
<p>å¯¹è±¡çš„è§£æ„èµ‹å€¼ç”¨äºä»ä¸€ä¸ªå¯¹è±¡å–å€¼ï¼Œç›¸å½“äºå°†æ‰€æœ‰å¯éå†çš„ã€ä½†å°šæœªè¢«è¯»å–çš„å±æ€§ï¼Œåˆ†é…åˆ°æŒ‡å®šçš„å¯¹è±¡ä¸Šé¢ã€‚æ‰€æœ‰çš„é”®å’Œå®ƒä»¬çš„å€¼ï¼Œéƒ½ä¼šæ‹·è´åˆ°æ–°å¯¹è±¡ä¸Šé¢ã€‚</p>
<pre><code class="javascript">let { x, y, ...z } = { x: 1, y: 2, a: 3, b: 4 };
x // 1
y // 2
z // { a: 3, b: 4 }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>z</code>æ˜¯è§£æ„èµ‹å€¼æ‰€åœ¨çš„å¯¹è±¡ã€‚å®ƒè·å–ç­‰å·å³è¾¹çš„æ‰€æœ‰å°šæœªè¯»å–çš„é”®ï¼ˆ<code>a</code>å’Œ<code>b</code>ï¼‰ï¼Œå°†å®ƒä»¬è¿åŒå€¼ä¸€èµ·æ‹·è´è¿‡æ¥ã€‚</p>
<p>ç”±äºè§£æ„èµ‹å€¼è¦æ±‚ç­‰å·å³è¾¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœç­‰å·å³è¾¹æ˜¯<code>undefined</code>æˆ–<code>null</code>ï¼Œå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒä»¬æ— æ³•è½¬ä¸ºå¯¹è±¡ã€‚</p>
<pre><code class="javascript">let { x, y, ...z } = null; // è¿è¡Œæ—¶é”™è¯¯
let { x, y, ...z } = undefined; // è¿è¡Œæ—¶é”™è¯¯
</code></pre>
<p>è§£æ„èµ‹å€¼å¿…é¡»æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">let { ...x, y, z } = obj; // å¥æ³•é”™è¯¯
let { x, ...y, ...z } = obj; // å¥æ³•é”™è¯¯
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè§£æ„èµ‹å€¼ä¸æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚</p>
<p>æ³¨æ„ï¼Œè§£æ„èµ‹å€¼çš„æ‹·è´æ˜¯æµ…æ‹·è´ï¼Œå³å¦‚æœä¸€ä¸ªé”®çš„å€¼æ˜¯å¤åˆç±»å‹çš„å€¼ï¼ˆæ•°ç»„ã€å¯¹è±¡ã€å‡½æ•°ï¼‰ã€é‚£ä¹ˆè§£æ„èµ‹å€¼æ‹·è´çš„æ˜¯è¿™ä¸ªå€¼çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯è¿™ä¸ªå€¼çš„å‰¯æœ¬ã€‚</p>
<pre><code class="javascript">let obj = { a: { b: 1 } };
let { ...x } = obj;
obj.a.b = 2;
x.a.b // 2
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>x</code>æ˜¯è§£æ„èµ‹å€¼æ‰€åœ¨çš„å¯¹è±¡ï¼Œæ‹·è´äº†å¯¹è±¡<code>obj</code>çš„<code>a</code>å±æ€§ã€‚<code>a</code>å±æ€§å¼•ç”¨äº†ä¸€ä¸ªå¯¹è±¡ï¼Œä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„å€¼ï¼Œä¼šå½±å“åˆ°è§£æ„èµ‹å€¼å¯¹å®ƒçš„å¼•ç”¨ã€‚</p>
<p>å¦å¤–ï¼Œè§£æ„èµ‹å€¼ä¸ä¼šæ‹·è´ç»§æ‰¿è‡ªåŸå‹å¯¹è±¡çš„å±æ€§ã€‚</p>
<pre><code class="javascript">let o1 = { a: 1 };
let o2 = { b: 2 };
o2.__proto__ = o1;
let o3 = { ...o2 };
o3 // { b: 2 }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡<code>o3</code>æ˜¯<code>o2</code>çš„æ‹·è´ï¼Œä½†æ˜¯åªå¤åˆ¶äº†<code>o2</code>è‡ªèº«çš„å±æ€§ï¼Œæ²¡æœ‰å¤åˆ¶å®ƒçš„åŸå‹å¯¹è±¡<code>o1</code>çš„å±æ€§ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">var o = Object.create({ x: 1, y: 2 });
o.z = 3;

let { x, ...{ y, z } } = o;
x // 1
y // undefined
z // 3
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>x</code>æ˜¯å•çº¯çš„è§£æ„èµ‹å€¼ï¼Œæ‰€ä»¥å¯ä»¥è¯»å–ç»§æ‰¿çš„å±æ€§ï¼›è§£æ„èµ‹å€¼äº§ç”Ÿçš„å˜é‡<code>y</code>å’Œ<code>z</code>ï¼Œåªèƒ½è¯»å–å¯¹è±¡è‡ªèº«çš„å±æ€§ï¼Œæ‰€ä»¥åªæœ‰å˜é‡<code>z</code>å¯ä»¥èµ‹å€¼æˆåŠŸã€‚</p>
<p>è§£æ„èµ‹å€¼çš„ä¸€ä¸ªç”¨å¤„ï¼Œæ˜¯æ‰©å±•æŸä¸ªå‡½æ•°çš„å‚æ•°ï¼Œå¼•å…¥å…¶ä»–æ“ä½œã€‚</p>
<pre><code class="javascript">function baseFunction({ a, b }) {
  // ...
}
function wrapperFunction({ x, y, ...restConfig }) {
  // ä½¿ç”¨xå’Œyå‚æ•°è¿›è¡Œæ“ä½œ
  // å…¶ä½™å‚æ•°ä¼ ç»™åŸå§‹å‡½æ•°
  return baseFunction(restConfig);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒåŸå§‹å‡½æ•°<code>baseFunction</code>æ¥å—<code>a</code>å’Œ<code>b</code>ä½œä¸ºå‚æ•°ï¼Œå‡½æ•°<code>wrapperFunction</code>åœ¨<code>baseFunction</code>çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ‰©å±•ï¼Œèƒ½å¤Ÿæ¥å—å¤šä½™çš„å‚æ•°ï¼Œå¹¶ä¸”ä¿ç•™åŸå§‹å‡½æ•°çš„è¡Œä¸ºã€‚</p>
<p><strong>ï¼ˆ2ï¼‰æ‰©å±•è¿ç®—ç¬¦</strong></p>
<p>æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ç”¨äºå–å‡ºå‚æ•°å¯¹è±¡çš„æ‰€æœ‰å¯éå†å±æ€§ï¼Œæ‹·è´åˆ°å½“å‰å¯¹è±¡ä¹‹ä¸­ã€‚</p>
<pre><code class="javascript">let z = { a: 3, b: 4 };
let n = { ...z };
n // { a: 3, b: 4 }
</code></pre>
<p>è¿™ç­‰åŒäºä½¿ç”¨<code>Object.assign</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">let aClone = { ...a };
// ç­‰åŒäº
let aClone = Object.assign({}, a);
</code></pre>
<p>æ‰©å±•è¿ç®—ç¬¦å¯ä»¥ç”¨äºåˆå¹¶ä¸¤ä¸ªå¯¹è±¡ã€‚</p>
<pre><code class="javascript">let ab = { ...a, ...b };
// ç­‰åŒäº
let ab = Object.assign({}, a, b);
</code></pre>
<p>å¦‚æœç”¨æˆ·è‡ªå®šä¹‰çš„å±æ€§ï¼Œæ”¾åœ¨æ‰©å±•è¿ç®—ç¬¦åé¢ï¼Œåˆ™æ‰©å±•è¿ç®—ç¬¦å†…éƒ¨çš„åŒåå±æ€§ä¼šè¢«è¦†ç›–æ‰ã€‚</p>
<pre><code class="javascript">let aWithOverrides = { ...a, x: 1, y: 2 };
// ç­‰åŒäº
let aWithOverrides = { ...a, ...{ x: 1, y: 2 } };
// ç­‰åŒäº
let x = 1, y = 2, aWithOverrides = { ...a, x, y };
// ç­‰åŒäº
let aWithOverrides = Object.assign({}, a, { x: 1, y: 2 });
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>a</code>å¯¹è±¡çš„<code>x</code>å±æ€§å’Œ<code>y</code>å±æ€§ï¼Œæ‹·è´åˆ°æ–°å¯¹è±¡åä¼šè¢«è¦†ç›–æ‰ã€‚</p>
<p>è¿™ç”¨æ¥ä¿®æ”¹ç°æœ‰å¯¹è±¡éƒ¨åˆ†çš„éƒ¨åˆ†å±æ€§å°±å¾ˆæ–¹ä¾¿äº†ã€‚</p>
<pre><code class="javascript">let newVersion = {
  ...previousVersion,
  name: &#39;New Name&#39; // Override the name property
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>newVersion</code>å¯¹è±¡è‡ªå®šä¹‰äº†<code>name</code>å±æ€§ï¼Œå…¶ä»–å±æ€§å…¨éƒ¨å¤åˆ¶è‡ª<code>previousVersion</code>å¯¹è±¡ã€‚</p>
<p>å¦‚æœæŠŠè‡ªå®šä¹‰å±æ€§æ”¾åœ¨æ‰©å±•è¿ç®—ç¬¦å‰é¢ï¼Œå°±å˜æˆäº†è®¾ç½®æ–°å¯¹è±¡çš„é»˜è®¤å±æ€§å€¼ã€‚</p>
<pre><code class="javascript">let aWithDefaults = { x: 1, y: 2, ...a };
// ç­‰åŒäº
let aWithDefaults = Object.assign({}, { x: 1, y: 2 }, a);
// ç­‰åŒäº
let aWithDefaults = Object.assign({ x: 1, y: 2 }, a);
</code></pre>
<p>æ‰©å±•è¿ç®—ç¬¦çš„å‚æ•°å¯¹è±¡ä¹‹ä¸­ï¼Œå¦‚æœæœ‰å–å€¼å‡½æ•°<code>get</code>ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¼šæ‰§è¡Œçš„ã€‚</p>
<pre><code class="javascript">// å¹¶ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸ºxå±æ€§åªæ˜¯è¢«å®šä¹‰ï¼Œä½†æ²¡æ‰§è¡Œ
let aWithXGetter = {
  ...a,
  get x() {
    throws new Error(&#39;not thrown yet&#39;);
  }
};

// ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸ºxå±æ€§è¢«æ‰§è¡Œäº†
let runtimeError = {
  ...a,
  ...{
    get x() {
      throws new Error(&#39;thrown now&#39;);
    }
  }
};
</code></pre>
<p>å¦‚æœæ‰©å±•è¿ç®—ç¬¦çš„å‚æ•°æ˜¯<code>null</code>æˆ–<code>undefined</code>ï¼Œè¿™ä¸ªä¸¤ä¸ªå€¼ä¼šè¢«å¿½ç•¥ï¼Œä¸ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">let emptyObject = { ...null, ...undefined }; // ä¸æŠ¥é”™
</code></pre>
<h2 id="Object-getOwnPropertyDescriptors"><a href="#Object-getOwnPropertyDescriptors" class="headerlink" title="Object.getOwnPropertyDescriptors()"></a>Object.getOwnPropertyDescriptors()</h2><p>ES5æœ‰ä¸€ä¸ª<code>Object.getOwnPropertyDescriptor</code>æ–¹æ³•ï¼Œè¿”å›æŸä¸ªå¯¹è±¡å±æ€§çš„æè¿°å¯¹è±¡ï¼ˆdescriptorï¼‰ã€‚</p>
<pre><code class="javascript">var obj = { p: &#39;a&#39; };

Object.getOwnPropertyDescriptor(obj, &#39;p&#39;)
// Object { value: &quot;a&quot;,
//   writable: true,
//   enumerable: true,
//   configurable: true
// }
</code></pre>
<p>ES7æœ‰ä¸€ä¸ªææ¡ˆï¼Œæå‡ºäº†<code>Object.getOwnPropertyDescriptors</code>æ–¹æ³•ï¼Œè¿”å›æŒ‡å®šå¯¹è±¡æ‰€æœ‰è‡ªèº«å±æ€§ï¼ˆéç»§æ‰¿å±æ€§ï¼‰çš„æè¿°å¯¹è±¡ã€‚</p>
<pre><code class="javascript">const obj = {
  foo: 123,
  get bar() { return &#39;abc&#39; }
};

Object.getOwnPropertyDescriptors(obj)
// { foo:
//    { value: 123,
//      writable: true,
//      enumerable: true,
//      configurable: true },
//   bar:
//    { get: [Function: bar],
//      set: undefined,
//      enumerable: true,
//      configurable: true } }
</code></pre>
<p><code>Object.getOwnPropertyDescriptors</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰åŸå¯¹è±¡çš„å±æ€§åéƒ½æ˜¯è¯¥å¯¹è±¡çš„å±æ€§åï¼Œå¯¹åº”çš„å±æ€§å€¼å°±æ˜¯è¯¥å±æ€§çš„æè¿°å¯¹è±¡ã€‚</p>
<p>è¯¥æ–¹æ³•çš„å®ç°éå¸¸å®¹æ˜“ã€‚</p>
<pre><code class="javascript">function getOwnPropertyDescriptors(obj) {
  const result = {};
  for (let key of Reflect.ownKeys(obj)) {
    result[key] = Object.getOwnPropertyDescriptor(obj, key);
  }
  return result;
}
</code></pre>
<p>è¯¥æ–¹æ³•çš„æå‡ºç›®çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³<code>Object.assign()</code>æ— æ³•æ­£ç¡®æ‹·è´<code>get</code>å±æ€§å’Œ<code>set</code>å±æ€§çš„é—®é¢˜ã€‚</p>
<pre><code class="javascript">const source = {
  set foo(value) {
    console.log(value);
  }
};

const target1 = {};
Object.assign(target1, source);

Object.getOwnPropertyDescriptor(target1, &#39;foo&#39;)
// { value: undefined,
//   writable: true,
//   enumerable: true,
//   configurable: true }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>source</code>å¯¹è±¡çš„<code>foo</code>å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªèµ‹å€¼å‡½æ•°ï¼Œ<code>Object.assign</code>æ–¹æ³•å°†è¿™ä¸ªå±æ€§æ‹·è´ç»™<code>target1</code>å¯¹è±¡ï¼Œç»“æœè¯¥å±æ€§çš„å€¼å˜æˆäº†<code>undefined</code>ã€‚è¿™æ˜¯å› ä¸º<code>Object.assign</code>æ–¹æ³•æ€»æ˜¯æ‹·è´ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œè€Œä¸ä¼šæ‹·è´å®ƒèƒŒåçš„èµ‹å€¼æ–¹æ³•æˆ–å–å€¼æ–¹æ³•ã€‚</p>
<p>è¿™æ—¶ï¼Œ<code>Object.getOwnPropertyDescriptors</code>æ–¹æ³•é…åˆ<code>Object.defineProperties</code>æ–¹æ³•ï¼Œå°±å¯ä»¥å®ç°æ­£ç¡®æ‹·è´ã€‚</p>
<pre><code class="javascript">const source = {
  set foo(value) {
    console.log(value);
  }
};

const target2 = {};
Object.defineProperties(target2, Object.getOwnPropertyDescriptors(source));
Object.getOwnPropertyDescriptor(target2, &#39;foo&#39;)
// { get: undefined,
//   set: [Function: foo],
//   enumerable: true,
//   configurable: true }
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå°†ä¸¤ä¸ªå¯¹è±¡åˆå¹¶çš„é€»è¾‘æç‚¼å‡ºæ¥ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">const shallowMerge = (target, source) =&gt; Object.defineProperties(
  target,
  Object.getOwnPropertyDescriptors(source)
);
</code></pre>
<p><code>Object.getOwnPropertyDescriptors</code>æ–¹æ³•çš„å¦ä¸€ä¸ªç”¨å¤„ï¼Œæ˜¯é…åˆ<code>Object.create</code>æ–¹æ³•ï¼Œå°†å¯¹è±¡å±æ€§å…‹éš†åˆ°ä¸€ä¸ªæ–°å¯¹è±¡ã€‚è¿™å±äºæµ…æ‹·è´ã€‚</p>
<pre><code class="javascript">const clone = Object.create(Object.getPrototypeOf(obj),
  Object.getOwnPropertyDescriptors(obj));

// æˆ–è€…

const shallowClone = (obj) =&gt; Object.create(
  Object.getPrototypeOf(obj),
  Object.getOwnPropertyDescriptors(obj)
);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¼šå…‹éš†å¯¹è±¡<code>obj</code>ã€‚</p>
<p>å¦å¤–ï¼Œ<code>Object.getOwnPropertyDescriptors</code>æ–¹æ³•å¯ä»¥å®ç°ï¼Œä¸€ä¸ªå¯¹è±¡ç»§æ‰¿å¦ä¸€ä¸ªå¯¹è±¡ã€‚ä»¥å‰ï¼Œç»§æ‰¿å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå¸¸å¸¸å†™æˆä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">const obj = {
  __proto__: prot,
  foo: 123,
};
</code></pre>
<p>ES6è§„å®š<code>__proto__</code>åªæœ‰æµè§ˆå™¨è¦éƒ¨ç½²ï¼Œå…¶ä»–ç¯å¢ƒä¸ç”¨éƒ¨ç½²ã€‚å¦‚æœå»é™¤<code>__proto__</code>ï¼Œä¸Šé¢ä»£ç å°±è¦æ”¹æˆä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">const obj = Object.create(prot);
obj.foo = 123;

// æˆ–è€…

const obj = Object.assign(
  Object.create(prot),
  {
    foo: 123,
  }
);
</code></pre>
<p>æœ‰äº†<code>Object.getOwnPropertyDescriptors</code>ï¼Œæˆ‘ä»¬å°±æœ‰äº†å¦ä¸€ç§å†™æ³•ã€‚</p>
<pre><code class="javascript">const obj = Object.create(
  prot,
  Object.getOwnPropertyDescriptors({
    foo: 123,
  })
);
</code></pre>
<p><code>Object.getOwnPropertyDescriptors</code>ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°Mixinï¼ˆæ··å…¥ï¼‰æ¨¡å¼ã€‚</p>
<pre><code class="javascript">let mix = (object) =&gt; ({
  with: (...mixins) =&gt; mixins.reduce(
    (c, mixin) =&gt; Object.create(
      c, Object.getOwnPropertyDescriptors(mixin)
    ), object)
});

// multiple mixins example
let a = {a: &#39;a&#39;};
let b = {b: &#39;b&#39;};
let c = {c: &#39;c&#39;};
let d = mix(c).with(a, b);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡<code>a</code>å’Œ<code>b</code>è¢«æ··å…¥äº†å¯¹è±¡<code>c</code>ã€‚</p>
<p>å‡ºäºå®Œæ•´æ€§çš„è€ƒè™‘ï¼Œ<code>Object.getOwnPropertyDescriptors</code>è¿›å…¥æ ‡å‡†ä»¥åï¼Œè¿˜ä¼šæœ‰<code>Reflect.getOwnPropertyDescriptors</code>æ–¹æ³•ã€‚</p>
<h2 id="å…³äº"><a href="#å…³äº" class="headerlink" title="å…³äº"></a>å…³äº</h2><p>å†…å®¹æ¥è‡ªé˜®ä¸€å³°è€å¸ˆçš„ã€ŠES6æ ‡å‡†å…¥é—¨ã€‹ï¼Œæ„Ÿè°¢</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å¯¹è±¡çš„æ‰©å±•&quot;&gt;&lt;a href=&quot;#å¯¹è±¡çš„æ‰©å±•&quot; class=&quot;headerlink&quot; title=&quot;å¯¹è±¡çš„æ‰©å±•&quot;&gt;&lt;/a&gt;å¯¹è±¡çš„æ‰©å±•&lt;/h1&gt;&lt;h2 id=&quot;å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•&quot;&gt;&lt;a href=&quot;#å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•&quot; class=&quot;headerlink&quot; titl
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Object" scheme="https://microzz.com/tags/Object/"/>
    
  </entry>
  
  <entry>
    <title>å‡½æ•°çš„æ‰©å±•(Function)</title>
    <link href="https://microzz.com/2016/12/10/function/"/>
    <id>https://microzz.com/2016/12/10/function/</id>
    <published>2016-12-10T07:45:19.000Z</published>
    <updated>2017-08-21T11:34:41.790Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‡½æ•°çš„æ‰©å±•"><a href="#å‡½æ•°çš„æ‰©å±•" class="headerlink" title="å‡½æ•°çš„æ‰©å±•"></a>å‡½æ•°çš„æ‰©å±•</h1><h2 id="å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼"><a href="#å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼" class="headerlink" title="å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼"></a>å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>åœ¨ES6ä¹‹å‰ï¼Œä¸èƒ½ç›´æ¥ä¸ºå‡½æ•°çš„å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œåªèƒ½é‡‡ç”¨å˜é€šçš„æ–¹æ³•ã€‚</p>
<pre><code class="javascript">function log(x, y) {
  y = y || &#39;World&#39;;
  console.log(x, y);
}

log(&#39;Hello&#39;) // Hello World
log(&#39;Hello&#39;, &#39;China&#39;) // Hello China
log(&#39;Hello&#39;, &#39;&#39;) // Hello World
</code></pre>
<p>ä¸Šé¢ä»£ç æ£€æŸ¥å‡½æ•°<code>log</code>çš„å‚æ•°<code>y</code>æœ‰æ²¡æœ‰èµ‹å€¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æŒ‡å®šé»˜è®¤å€¼ä¸º<code>World</code>ã€‚è¿™ç§å†™æ³•çš„ç¼ºç‚¹åœ¨äºï¼Œå¦‚æœå‚æ•°<code>y</code>èµ‹å€¼äº†ï¼Œä½†æ˜¯å¯¹åº”çš„å¸ƒå°”å€¼ä¸º<code>false</code>ï¼Œåˆ™è¯¥èµ‹å€¼ä¸èµ·ä½œç”¨ã€‚å°±åƒä¸Šé¢ä»£ç çš„æœ€åä¸€è¡Œï¼Œå‚æ•°<code>y</code>ç­‰äºç©ºå­—ç¬¦ï¼Œç»“æœè¢«æ”¹ä¸ºé»˜è®¤å€¼ã€‚</p>
<p>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œé€šå¸¸éœ€è¦å…ˆåˆ¤æ–­ä¸€ä¸‹å‚æ•°<code>y</code>æ˜¯å¦è¢«èµ‹å€¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå†ç­‰äºé»˜è®¤å€¼ã€‚</p>
<pre><code class="javascript">if (typeof y === &#39;undefined&#39;) {
  y = &#39;World&#39;;
}
</code></pre>
<p>ES6å…è®¸ä¸ºå‡½æ•°çš„å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œå³ç›´æ¥å†™åœ¨å‚æ•°å®šä¹‰çš„åé¢ã€‚</p>
<pre><code class="javascript">function log(x, y = &#39;World&#39;) {
  console.log(x, y);
}

log(&#39;Hello&#39;) // Hello World
log(&#39;Hello&#39;, &#39;China&#39;) // Hello China
log(&#39;Hello&#39;, &#39;&#39;) // Hello
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒES6çš„å†™æ³•æ¯”ES5ç®€æ´è®¸å¤šï¼Œè€Œä¸”éå¸¸è‡ªç„¶ã€‚ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">function Point(x = 0, y = 0) {
  this.x = x;
  this.y = y;
}

var p = new Point();
p // { x: 0, y: 0 }
</code></pre>
<p>é™¤äº†ç®€æ´ï¼ŒES6çš„å†™æ³•è¿˜æœ‰ä¸¤ä¸ªå¥½å¤„ï¼šé¦–å…ˆï¼Œé˜…è¯»ä»£ç çš„äººï¼Œå¯ä»¥ç«‹åˆ»æ„è¯†åˆ°å“ªäº›å‚æ•°æ˜¯å¯ä»¥çœç•¥çš„ï¼Œä¸ç”¨æŸ¥çœ‹å‡½æ•°ä½“æˆ–æ–‡æ¡£ï¼›å…¶æ¬¡ï¼Œæœ‰åˆ©äºå°†æ¥çš„ä»£ç ä¼˜åŒ–ï¼Œå³ä½¿æœªæ¥çš„ç‰ˆæœ¬åœ¨å¯¹å¤–æ¥å£ä¸­ï¼Œå½»åº•æ‹¿æ‰è¿™ä¸ªå‚æ•°ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ä»¥å‰çš„ä»£ç æ— æ³•è¿è¡Œã€‚</p>
<p>å‚æ•°å˜é‡æ˜¯é»˜è®¤å£°æ˜çš„ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨<code>let</code>æˆ–<code>const</code>å†æ¬¡å£°æ˜ã€‚</p>
<pre><code class="javascript">function foo(x = 5) {
  let x = 1; // error
  const x = 2; // error
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°å˜é‡<code>x</code>æ˜¯é»˜è®¤å£°æ˜çš„ï¼Œåœ¨å‡½æ•°ä½“ä¸­ï¼Œä¸èƒ½ç”¨<code>let</code>æˆ–<code>const</code>å†æ¬¡å£°æ˜ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<h3 id="ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨"><a href="#ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨" class="headerlink" title="ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨"></a>ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨</h3><p>å‚æ•°é»˜è®¤å€¼å¯ä»¥ä¸è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ï¼Œç»“åˆèµ·æ¥ä½¿ç”¨ã€‚</p>
<pre><code class="javascript">function foo({x, y = 5}) {
  console.log(x, y);
}

foo({}) // undefined, 5
foo({x: 1}) // 1, 5
foo({x: 1, y: 2}) // 1, 2
foo() // TypeError: Cannot read property &#39;x&#39; of undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨äº†å¯¹è±¡çš„è§£æ„èµ‹å€¼é»˜è®¤å€¼ï¼Œè€Œæ²¡æœ‰ä½¿ç”¨å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ã€‚åªæœ‰å½“å‡½æ•°<code>foo</code>çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå˜é‡<code>x</code>å’Œ<code>y</code>æ‰ä¼šé€šè¿‡è§£æ„èµ‹å€¼è€Œç”Ÿæˆã€‚å¦‚æœå‡½æ•°<code>foo</code>è°ƒç”¨æ—¶å‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œå˜é‡<code>x</code>å’Œ<code>y</code>å°±ä¸ä¼šç”Ÿæˆï¼Œä»è€ŒæŠ¥é”™ã€‚å¦‚æœå‚æ•°å¯¹è±¡æ²¡æœ‰<code>y</code>å±æ€§ï¼Œ<code>y</code>çš„é»˜è®¤å€¼5æ‰ä¼šç”Ÿæ•ˆã€‚</p>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªå¯¹è±¡çš„è§£æ„èµ‹å€¼é»˜è®¤å€¼çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">function fetch(url, { body = &#39;&#39;, method = &#39;GET&#39;, headers = {} }) {
  console.log(method);
}

fetch(&#39;http://example.com&#39;, {})
// &quot;GET&quot;

fetch(&#39;http://example.com&#39;)
// æŠ¥é”™
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå‡½æ•°<code>fetch</code>çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°±å¯ä»¥ä¸ºå®ƒçš„ä¸‰ä¸ªå±æ€§è®¾ç½®é»˜è®¤å€¼ã€‚</p>
<p>ä¸Šé¢çš„å†™æ³•ä¸èƒ½çœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚æœç»“åˆå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ï¼Œå°±å¯ä»¥çœç•¥ç¬¬äºŒä¸ªå‚æ•°ã€‚è¿™æ—¶ï¼Œå°±å‡ºç°äº†åŒé‡é»˜è®¤å€¼ã€‚</p>
<pre><code class="javascript">function fetch(url, { method = &#39;GET&#39; } = {}) {
  console.log(method);
}

fetch(&#39;http://example.com&#39;)
// &quot;GET&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>fetch</code>æ²¡æœ‰ç¬¬äºŒä¸ªå‚æ•°æ—¶ï¼Œå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼å°±ä¼šç”Ÿæ•ˆï¼Œç„¶åæ‰æ˜¯è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ç”Ÿæ•ˆï¼Œå˜é‡<code>method</code>æ‰ä¼šå–åˆ°é»˜è®¤å€¼<code>GET</code>ã€‚</p>
<p>å†è¯·é—®ä¸‹é¢ä¸¤ç§å†™æ³•æœ‰ä»€ä¹ˆå·®åˆ«ï¼Ÿ</p>
<pre><code class="javascript">// å†™æ³•ä¸€
function m1({x = 0, y = 0} = {}) {
  return [x, y];
}

// å†™æ³•äºŒ
function m2({x, y} = { x: 0, y: 0 }) {
  return [x, y];
}
</code></pre>
<p>ä¸Šé¢ä¸¤ç§å†™æ³•éƒ½å¯¹å‡½æ•°çš„å‚æ•°è®¾å®šäº†é»˜è®¤å€¼ï¼ŒåŒºåˆ«æ˜¯å†™æ³•ä¸€å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼æ˜¯ç©ºå¯¹è±¡ï¼Œä½†æ˜¯è®¾ç½®äº†å¯¹è±¡è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ï¼›å†™æ³•äºŒå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªæœ‰å…·ä½“å±æ€§çš„å¯¹è±¡ï¼Œä½†æ˜¯æ²¡æœ‰è®¾ç½®å¯¹è±¡è§£æ„èµ‹å€¼çš„é»˜è®¤å€¼ã€‚</p>
<pre><code class="javascript">// å‡½æ•°æ²¡æœ‰å‚æ•°çš„æƒ…å†µ
m1() // [0, 0]
m2() // [0, 0]

// xå’Œyéƒ½æœ‰å€¼çš„æƒ…å†µ
m1({x: 3, y: 8}) // [3, 8]
m2({x: 3, y: 8}) // [3, 8]

// xæœ‰å€¼ï¼Œyæ— å€¼çš„æƒ…å†µ
m1({x: 3}) // [3, 0]
m2({x: 3}) // [3, undefined]

// xå’Œyéƒ½æ— å€¼çš„æƒ…å†µ
m1({}) // [0, 0];
m2({}) // [undefined, undefined]

m1({z: 3}) // [0, 0]
m2({z: 3}) // [undefined, undefined]
</code></pre>
<h3 id="å‚æ•°é»˜è®¤å€¼çš„ä½ç½®"><a href="#å‚æ•°é»˜è®¤å€¼çš„ä½ç½®" class="headerlink" title="å‚æ•°é»˜è®¤å€¼çš„ä½ç½®"></a>å‚æ•°é»˜è®¤å€¼çš„ä½ç½®</h3><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå®šä¹‰äº†é»˜è®¤å€¼çš„å‚æ•°ï¼Œåº”è¯¥æ˜¯å‡½æ•°çš„å°¾å‚æ•°ã€‚å› ä¸ºè¿™æ ·æ¯”è¾ƒå®¹æ˜“çœ‹å‡ºæ¥ï¼Œåˆ°åº•çœç•¥äº†å“ªäº›å‚æ•°ã€‚å¦‚æœéå°¾éƒ¨çš„å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œå®é™…ä¸Šè¿™ä¸ªå‚æ•°æ˜¯æ²¡æ³•çœç•¥çš„ã€‚</p>
<pre><code class="javascript">// ä¾‹ä¸€
function f(x = 1, y) {
  return [x, y];
}

f() // [1, undefined]
f(2) // [2, undefined])
f(, 1) // æŠ¥é”™
f(undefined, 1) // [1, 1]

// ä¾‹äºŒ
function f(x, y = 5, z) {
  return [x, y, z];
}

f() // [undefined, 5, undefined]
f(1) // [1, 5, undefined]
f(1, ,2) // æŠ¥é”™
f(1, undefined, 2) // [1, 5, 2]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæœ‰é»˜è®¤å€¼çš„å‚æ•°éƒ½ä¸æ˜¯å°¾å‚æ•°ã€‚è¿™æ—¶ï¼Œæ— æ³•åªçœç•¥è¯¥å‚æ•°ï¼Œè€Œä¸çœç•¥å®ƒåé¢çš„å‚æ•°ï¼Œé™¤éæ˜¾å¼è¾“å…¥<code>undefined</code>ã€‚</p>
<p>å¦‚æœä¼ å…¥<code>undefined</code>ï¼Œå°†è§¦å‘è¯¥å‚æ•°ç­‰äºé»˜è®¤å€¼ï¼Œ<code>null</code>åˆ™æ²¡æœ‰è¿™ä¸ªæ•ˆæœã€‚</p>
<pre><code class="javascript">function foo(x = 5, y = 6) {
  console.log(x, y);
}

foo(undefined, null)
// 5 null
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>x</code>å‚æ•°å¯¹åº”<code>undefined</code>ï¼Œç»“æœè§¦å‘äº†é»˜è®¤å€¼ï¼Œ<code>y</code>å‚æ•°ç­‰äº<code>null</code>ï¼Œå°±æ²¡æœ‰è§¦å‘é»˜è®¤å€¼ã€‚</p>
<h3 id="å‡½æ•°çš„lengthå±æ€§"><a href="#å‡½æ•°çš„lengthå±æ€§" class="headerlink" title="å‡½æ•°çš„lengthå±æ€§"></a>å‡½æ•°çš„lengthå±æ€§</h3><p>æŒ‡å®šäº†é»˜è®¤å€¼ä»¥åï¼Œå‡½æ•°çš„<code>length</code>å±æ€§ï¼Œå°†è¿”å›æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼çš„å‚æ•°ä¸ªæ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŒ‡å®šäº†é»˜è®¤å€¼åï¼Œ<code>length</code>å±æ€§å°†å¤±çœŸã€‚</p>
<pre><code class="javascript">(function (a) {}).length // 1
(function (a = 5) {}).length // 0
(function (a, b, c = 5) {}).length // 2
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>length</code>å±æ€§çš„è¿”å›å€¼ï¼Œç­‰äºå‡½æ•°çš„å‚æ•°ä¸ªæ•°å‡å»æŒ‡å®šäº†é»˜è®¤å€¼çš„å‚æ•°ä¸ªæ•°ã€‚æ¯”å¦‚ï¼Œä¸Šé¢æœ€åä¸€ä¸ªå‡½æ•°ï¼Œå®šä¹‰äº†3ä¸ªå‚æ•°ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå‚æ•°<code>c</code>æŒ‡å®šäº†é»˜è®¤å€¼ï¼Œå› æ­¤<code>length</code>å±æ€§ç­‰äº<code>3</code>å‡å»<code>1</code>ï¼Œæœ€åå¾—åˆ°<code>2</code>ã€‚</p>
<p>è¿™æ˜¯å› ä¸º<code>length</code>å±æ€§çš„å«ä¹‰æ˜¯ï¼Œè¯¥å‡½æ•°é¢„æœŸä¼ å…¥çš„å‚æ•°ä¸ªæ•°ã€‚æŸä¸ªå‚æ•°æŒ‡å®šé»˜è®¤å€¼ä»¥åï¼Œé¢„æœŸä¼ å…¥çš„å‚æ•°ä¸ªæ•°å°±ä¸åŒ…æ‹¬è¿™ä¸ªå‚æ•°äº†ã€‚åŒç†ï¼Œrestå‚æ•°ä¹Ÿä¸ä¼šè®¡å…¥<code>length</code>å±æ€§ã€‚</p>
<pre><code class="javascript">(function(...args) {}).length // 0
</code></pre>
<p>å¦‚æœè®¾ç½®äº†é»˜è®¤å€¼çš„å‚æ•°ä¸æ˜¯å°¾å‚æ•°ï¼Œé‚£ä¹ˆ<code>length</code>å±æ€§ä¹Ÿä¸å†è®¡å…¥åé¢çš„å‚æ•°äº†ã€‚</p>
<pre><code class="javascript">(function (a = 0, b, c) {}).length // 0
(function (a, b = 1, c) {}).length // 1
</code></pre>
<h3 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h3><p>ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œå¦‚æœå‚æ•°é»˜è®¤å€¼æ˜¯ä¸€ä¸ªå˜é‡ï¼Œåˆ™è¯¥å˜é‡æ‰€å¤„çš„ä½œç”¨åŸŸï¼Œä¸å…¶ä»–å˜é‡çš„ä½œç”¨åŸŸè§„åˆ™æ˜¯ä¸€æ ·çš„ï¼Œå³å…ˆæ˜¯å½“å‰å‡½æ•°çš„ä½œç”¨åŸŸï¼Œç„¶åæ‰æ˜¯å…¨å±€ä½œç”¨åŸŸã€‚</p>
<pre><code class="javascript">var x = 1;

function f(x, y = x) {
  console.log(y);
}

f(2) // 2
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°<code>y</code>çš„é»˜è®¤å€¼ç­‰äº<code>x</code>ã€‚è°ƒç”¨æ—¶ï¼Œç”±äºå‡½æ•°ä½œç”¨åŸŸå†…éƒ¨çš„å˜é‡<code>x</code>å·²ç»ç”Ÿæˆï¼Œæ‰€ä»¥<code>y</code>ç­‰äºå‚æ•°<code>x</code>ï¼Œè€Œä¸æ˜¯å…¨å±€å˜é‡<code>x</code>ã€‚</p>
<p>å¦‚æœè°ƒç”¨æ—¶ï¼Œå‡½æ•°ä½œç”¨åŸŸå†…éƒ¨çš„å˜é‡<code>x</code>æ²¡æœ‰ç”Ÿæˆï¼Œç»“æœå°±ä¼šä¸ä¸€æ ·ã€‚</p>
<pre><code class="javascript">let x = 1;

function f(y = x) {
  let x = 2;
  console.log(y);
}

f() // 1
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°è°ƒç”¨æ—¶ï¼Œ<code>y</code>çš„é»˜è®¤å€¼å˜é‡<code>x</code>å°šæœªåœ¨å‡½æ•°å†…éƒ¨ç”Ÿæˆï¼Œæ‰€ä»¥<code>x</code>æŒ‡å‘å…¨å±€å˜é‡ã€‚</p>
<p>å¦‚æœæ­¤æ—¶ï¼Œå…¨å±€å˜é‡<code>x</code>ä¸å­˜åœ¨ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">function f(y = x) {
  let x = 2;
  console.log(y);
}

f() // ReferenceError: x is not defined
</code></pre>
<p>ä¸‹é¢è¿™æ ·å†™ï¼Œä¹Ÿä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">var x = 1;

function foo(x = x) {
  // ...
}

foo() // ReferenceError: x is not defined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>foo</code>çš„å‚æ•°<code>x</code>çš„é»˜è®¤å€¼ä¹Ÿæ˜¯<code>x</code>ã€‚è¿™æ—¶ï¼Œé»˜è®¤å€¼<code>x</code>çš„ä½œç”¨åŸŸæ˜¯å‡½æ•°ä½œç”¨åŸŸï¼Œè€Œä¸æ˜¯å…¨å±€ä½œç”¨åŸŸã€‚ç”±äºåœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ï¼Œå­˜åœ¨å˜é‡<code>x</code>ï¼Œä½†æ˜¯é»˜è®¤å€¼åœ¨<code>x</code>èµ‹å€¼ä¹‹å‰å…ˆæ‰§è¡Œäº†ï¼Œæ‰€ä»¥è¿™æ—¶å±äºæš‚æ—¶æ€§æ­»åŒºï¼ˆå‚è§ã€Šletå’Œconstå‘½ä»¤ã€‹ä¸€ç« ï¼‰ï¼Œä»»ä½•å¯¹<code>x</code>çš„æ“ä½œéƒ½ä¼šæŠ¥é”™ã€‚</p>
<p>å¦‚æœå‚æ•°çš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨åŸŸæ˜¯å…¶å£°æ˜æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">let foo = &#39;outer&#39;;

function bar(func = x =&gt; foo) {
  let foo = &#39;inner&#39;;
  console.log(func()); // outer
}

bar();
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>bar</code>çš„å‚æ•°<code>func</code>çš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¿”å›å€¼ä¸ºå˜é‡<code>foo</code>ã€‚è¿™ä¸ªåŒ¿åå‡½æ•°å£°æ˜æ—¶ï¼Œ<code>bar</code>å‡½æ•°çš„ä½œç”¨åŸŸè¿˜æ²¡æœ‰å½¢æˆï¼Œæ‰€ä»¥åŒ¿åå‡½æ•°é‡Œé¢çš„<code>foo</code>æŒ‡å‘å¤–å±‚ä½œç”¨åŸŸçš„<code>foo</code>ï¼Œè¾“å‡º<code>outer</code>ã€‚</p>
<p>å¦‚æœå†™æˆä¸‹é¢è¿™æ ·ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">function bar(func = () =&gt; foo) {
  let foo = &#39;inner&#39;;
  console.log(func());
}

bar() // ReferenceError: foo is not defined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒåŒ¿åå‡½æ•°é‡Œé¢çš„<code>foo</code>æŒ‡å‘å‡½æ•°å¤–å±‚ï¼Œä½†æ˜¯å‡½æ•°å¤–å±‚å¹¶æ²¡æœ‰å£°æ˜<code>foo</code>ï¼Œæ‰€ä»¥å°±æŠ¥é”™äº†ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var x = 1;
function foo(x, y = function() { x = 2; }) {
  var x = 3;
  y();
  console.log(x);
}

foo() // 3
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>foo</code>çš„å‚æ•°<code>y</code>çš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚å‡½æ•°<code>foo</code>è°ƒç”¨æ—¶ï¼Œå®ƒçš„å‚æ•°<code>x</code>çš„å€¼ä¸º<code>undefined</code>ï¼Œæ‰€ä»¥<code>y</code>å‡½æ•°å†…éƒ¨çš„<code>x</code>ä¸€å¼€å§‹æ˜¯<code>undefined</code>ï¼Œåæ¥è¢«é‡æ–°èµ‹å€¼<code>2</code>ã€‚ä½†æ˜¯ï¼Œå‡½æ•°<code>foo</code>å†…éƒ¨é‡æ–°å£°æ˜äº†ä¸€ä¸ª<code>x</code>ï¼Œå€¼ä¸º<code>3</code>ï¼Œè¿™ä¸¤ä¸ª<code>x</code>æ˜¯ä¸ä¸€æ ·çš„ï¼Œäº’ç›¸ä¸äº§ç”Ÿå½±å“ï¼Œå› æ­¤æœ€åè¾“å‡º<code>3</code>ã€‚</p>
<p>å¦‚æœå°†<code>var x = 3</code>çš„<code>var</code>å»é™¤ï¼Œä¸¤ä¸ª<code>x</code>å°±æ˜¯ä¸€æ ·çš„ï¼Œæœ€åè¾“å‡ºçš„å°±æ˜¯<code>2</code>ã€‚</p>
<pre><code class="javascript">var x = 1;
function foo(x, y = function() { x = 2; }) {
  x = 3;
  y();
  console.log(x);
}

foo() // 2
</code></pre>
<h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><p>åˆ©ç”¨å‚æ•°é»˜è®¤å€¼ï¼Œå¯ä»¥æŒ‡å®šæŸä¸€ä¸ªå‚æ•°ä¸å¾—çœç•¥ï¼Œå¦‚æœçœç•¥å°±æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p>
<pre><code class="javascript">function throwIfMissing() {
  throw new Error(&#39;Missing parameter&#39;);
}

function foo(mustBeProvided = throwIfMissing()) {
  return mustBeProvided;
}

foo()
// Error: Missing parameter
</code></pre>
<p>ä¸Šé¢ä»£ç çš„<code>foo</code>å‡½æ•°ï¼Œå¦‚æœè°ƒç”¨çš„æ—¶å€™æ²¡æœ‰å‚æ•°ï¼Œå°±ä¼šè°ƒç”¨é»˜è®¤å€¼<code>throwIfMissing</code>å‡½æ•°ï¼Œä»è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p>
<p>ä»ä¸Šé¢ä»£ç è¿˜å¯ä»¥çœ‹åˆ°ï¼Œå‚æ•°<code>mustBeProvided</code>çš„é»˜è®¤å€¼ç­‰äº<code>throwIfMissing</code>å‡½æ•°çš„è¿è¡Œç»“æœï¼ˆå³å‡½æ•°åä¹‹åæœ‰ä¸€å¯¹åœ†æ‹¬å·ï¼‰ï¼Œè¿™è¡¨æ˜å‚æ•°çš„é»˜è®¤å€¼ä¸æ˜¯åœ¨å®šä¹‰æ—¶æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡Œï¼ˆå³å¦‚æœå‚æ•°å·²ç»èµ‹å€¼ï¼Œé»˜è®¤å€¼ä¸­çš„å‡½æ•°å°±ä¸ä¼šè¿è¡Œï¼‰ï¼Œè¿™ä¸pythonè¯­è¨€ä¸ä¸€æ ·ã€‚</p>
<p>å¦å¤–ï¼Œå¯ä»¥å°†å‚æ•°é»˜è®¤å€¼è®¾ä¸º<code>undefined</code>ï¼Œè¡¨æ˜è¿™ä¸ªå‚æ•°æ˜¯å¯ä»¥çœç•¥çš„ã€‚</p>
<pre><code class="javascript">function foo(optional = undefined) { Â·Â·Â· }
</code></pre>
<h2 id="restå‚æ•°"><a href="#restå‚æ•°" class="headerlink" title="restå‚æ•°"></a>restå‚æ•°</h2><p>ES6å¼•å…¥restå‚æ•°ï¼ˆå½¢å¼ä¸ºâ€œâ€¦å˜é‡åâ€ï¼‰ï¼Œç”¨äºè·å–å‡½æ•°çš„å¤šä½™å‚æ•°ï¼Œè¿™æ ·å°±ä¸éœ€è¦ä½¿ç”¨argumentså¯¹è±¡äº†ã€‚restå‚æ•°æ­é…çš„å˜é‡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥å˜é‡å°†å¤šä½™çš„å‚æ•°æ”¾å…¥æ•°ç»„ä¸­ã€‚</p>
<pre><code class="javascript">function add(...values) {
  let sum = 0;

  for (var val of values) {
    sum += val;
  }

  return sum;
}

add(2, 5, 3) // 10
</code></pre>
<p>ä¸Šé¢ä»£ç çš„addå‡½æ•°æ˜¯ä¸€ä¸ªæ±‚å’Œå‡½æ•°ï¼Œåˆ©ç”¨restå‚æ•°ï¼Œå¯ä»¥å‘è¯¥å‡½æ•°ä¼ å…¥ä»»æ„æ•°ç›®çš„å‚æ•°ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªrestå‚æ•°ä»£æ›¿argumentså˜é‡çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">// argumentså˜é‡çš„å†™æ³•
function sortNumbers() {
  return Array.prototype.slice.call(arguments).sort();
}

// restå‚æ•°çš„å†™æ³•
const sortNumbers = (...numbers) =&gt; numbers.sort();
</code></pre>
<p>ä¸Šé¢ä»£ç çš„ä¸¤ç§å†™æ³•ï¼Œæ¯”è¾ƒåå¯ä»¥å‘ç°ï¼Œrestå‚æ•°çš„å†™æ³•æ›´è‡ªç„¶ä¹Ÿæ›´ç®€æ´ã€‚</p>
<p>restå‚æ•°ä¸­çš„å˜é‡ä»£è¡¨ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æ•°ç»„ç‰¹æœ‰çš„æ–¹æ³•éƒ½å¯ä»¥ç”¨äºè¿™ä¸ªå˜é‡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ©ç”¨restå‚æ•°æ”¹å†™æ•°ç»„pushæ–¹æ³•çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">function push(array, ...items) {
  items.forEach(function(item) {
    array.push(item);
    console.log(item);
  });
}

var a = [];
push(a, 1, 2, 3)
</code></pre>
<p>æ³¨æ„ï¼Œrestå‚æ•°ä¹‹åä¸èƒ½å†æœ‰å…¶ä»–å‚æ•°ï¼ˆå³åªèƒ½æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼‰ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
function f(a, ...b, c) {
  // ...
}
</code></pre>
<p>å‡½æ•°çš„lengthå±æ€§ï¼Œä¸åŒ…æ‹¬restå‚æ•°ã€‚</p>
<pre><code class="javascript">(function(a) {}).length  // 1
(function(...a) {}).length  // 0
(function(a, ...b) {}).length  // 1
</code></pre>
<h2 id="æ‰©å±•è¿ç®—ç¬¦"><a href="#æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="æ‰©å±•è¿ç®—ç¬¦"></a>æ‰©å±•è¿ç®—ç¬¦</h2><h3 id="å«ä¹‰"><a href="#å«ä¹‰" class="headerlink" title="å«ä¹‰"></a>å«ä¹‰</h3><p>æ‰©å±•è¿ç®—ç¬¦ï¼ˆspreadï¼‰æ˜¯ä¸‰ä¸ªç‚¹ï¼ˆ<code>...</code>ï¼‰ã€‚å®ƒå¥½æ¯”restå‚æ•°çš„é€†è¿ç®—ï¼Œå°†ä¸€ä¸ªæ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—ã€‚</p>
<pre><code class="javascript">console.log(...[1, 2, 3])
// 1 2 3

console.log(1, ...[2, 3, 4], 5)
// 1 2 3 4 5

[...document.querySelectorAll(&#39;div&#39;)]
// [&lt;div&gt;, &lt;div&gt;, &lt;div&gt;]
</code></pre>
<p>è¯¥è¿ç®—ç¬¦ä¸»è¦ç”¨äºå‡½æ•°è°ƒç”¨ã€‚</p>
<pre><code class="javascript">function push(array, ...items) {
  array.push(...items);
}

function add(x, y) {
  return x + y;
}

var numbers = [4, 38];
add(...numbers) // 42
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>array.push(...items)</code>å’Œ<code>add(...numbers)</code>è¿™ä¸¤è¡Œï¼Œéƒ½æ˜¯å‡½æ•°çš„è°ƒç”¨ï¼Œå®ƒä»¬çš„éƒ½ä½¿ç”¨äº†æ‰©å±•è¿ç®—ç¬¦ã€‚è¯¥è¿ç®—ç¬¦å°†ä¸€ä¸ªæ•°ç»„ï¼Œå˜ä¸ºå‚æ•°åºåˆ—ã€‚</p>
<p>æ‰©å±•è¿ç®—ç¬¦ä¸æ­£å¸¸çš„å‡½æ•°å‚æ•°å¯ä»¥ç»“åˆä½¿ç”¨ï¼Œéå¸¸çµæ´»ã€‚</p>
<pre><code class="javascript">function f(v, w, x, y, z) { }
var args = [0, 1];
f(-1, ...args, 2, ...[3]);
</code></pre>
<h3 id="æ›¿ä»£æ•°ç»„çš„applyæ–¹æ³•"><a href="#æ›¿ä»£æ•°ç»„çš„applyæ–¹æ³•" class="headerlink" title="æ›¿ä»£æ•°ç»„çš„applyæ–¹æ³•"></a>æ›¿ä»£æ•°ç»„çš„applyæ–¹æ³•</h3><p>ç”±äºæ‰©å±•è¿ç®—ç¬¦å¯ä»¥å±•å¼€æ•°ç»„ï¼Œæ‰€ä»¥ä¸å†éœ€è¦<code>apply</code>æ–¹æ³•ï¼Œå°†æ•°ç»„è½¬ä¸ºå‡½æ•°çš„å‚æ•°äº†ã€‚</p>
<pre><code class="javascript">// ES5çš„å†™æ³•
function f(x, y, z) {
  // ...
}
var args = [0, 1, 2];
f.apply(null, args);

// ES6çš„å†™æ³•
function f(x, y, z) {
  // ...
}
var args = [0, 1, 2];
f(...args);
</code></pre>
<p>ä¸‹é¢æ˜¯æ‰©å±•è¿ç®—ç¬¦å–ä»£<code>apply</code>æ–¹æ³•çš„ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œåº”ç”¨<code>Math.max</code>æ–¹æ³•ï¼Œç®€åŒ–æ±‚å‡ºä¸€ä¸ªæ•°ç»„æœ€å¤§å…ƒç´ çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">// ES5çš„å†™æ³•
Math.max.apply(null, [14, 3, 77])

// ES6çš„å†™æ³•
Math.max(...[14, 3, 77])

// ç­‰åŒäº
Math.max(14, 3, 77);
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œç”±äºJavaScriptä¸æä¾›æ±‚æ•°ç»„æœ€å¤§å…ƒç´ çš„å‡½æ•°ï¼Œæ‰€ä»¥åªèƒ½å¥—ç”¨<code>Math.max</code>å‡½æ•°ï¼Œå°†æ•°ç»„è½¬ä¸ºä¸€ä¸ªå‚æ•°åºåˆ—ï¼Œç„¶åæ±‚æœ€å¤§å€¼ã€‚æœ‰äº†æ‰©å±•è¿ç®—ç¬¦ä»¥åï¼Œå°±å¯ä»¥ç›´æ¥ç”¨<code>Math.max</code>äº†ã€‚</p>
<p>å¦ä¸€ä¸ªä¾‹å­æ˜¯é€šè¿‡<code>push</code>å‡½æ•°ï¼Œå°†ä¸€ä¸ªæ•°ç»„æ·»åŠ åˆ°å¦ä¸€ä¸ªæ•°ç»„çš„å°¾éƒ¨ã€‚</p>
<pre><code class="javascript">// ES5çš„å†™æ³•
var arr1 = [0, 1, 2];
var arr2 = [3, 4, 5];
Array.prototype.push.apply(arr1, arr2);

// ES6çš„å†™æ³•
var arr1 = [0, 1, 2];
var arr2 = [3, 4, 5];
arr1.push(...arr2);
</code></pre>
<p>ä¸Šé¢ä»£ç çš„ES5å†™æ³•ä¸­ï¼Œ<code>push</code>æ–¹æ³•çš„å‚æ•°ä¸èƒ½æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥åªå¥½é€šè¿‡<code>apply</code>æ–¹æ³•å˜é€šä½¿ç”¨<code>push</code>æ–¹æ³•ã€‚æœ‰äº†æ‰©å±•è¿ç®—ç¬¦ï¼Œå°±å¯ä»¥ç›´æ¥å°†æ•°ç»„ä¼ å…¥<code>push</code>æ–¹æ³•ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">// ES5
new (Date.bind.apply(Date, [null, 2015, 1, 1]))
// ES6
new Date(...[2015, 1, 1]);
</code></pre>
<h3 id="æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨"><a href="#æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨" class="headerlink" title="æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨"></a>æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨</h3><p><strong>ï¼ˆ1ï¼‰åˆå¹¶æ•°ç»„</strong></p>
<p>æ‰©å±•è¿ç®—ç¬¦æä¾›äº†æ•°ç»„åˆå¹¶çš„æ–°å†™æ³•ã€‚</p>
<pre><code class="javascript">// ES5
[1, 2].concat(more)
// ES6
[1, 2, ...more]

var arr1 = [&#39;a&#39;, &#39;b&#39;];
var arr2 = [&#39;c&#39;];
var arr3 = [&#39;d&#39;, &#39;e&#39;];

// ES5çš„åˆå¹¶æ•°ç»„
arr1.concat(arr2, arr3);
// [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39; ]

// ES6çš„åˆå¹¶æ•°ç»„
[...arr1, ...arr2, ...arr3]
// [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39; ]
</code></pre>
<p><strong>ï¼ˆ2ï¼‰ä¸è§£æ„èµ‹å€¼ç»“åˆ</strong></p>
<p>æ‰©å±•è¿ç®—ç¬¦å¯ä»¥ä¸è§£æ„èµ‹å€¼ç»“åˆèµ·æ¥ï¼Œç”¨äºç”Ÿæˆæ•°ç»„ã€‚</p>
<pre><code class="javascript">// ES5
a = list[0], rest = list.slice(1)
// ES6
[a, ...rest] = list
</code></pre>
<p>ä¸‹é¢æ˜¯å¦å¤–ä¸€äº›ä¾‹å­ã€‚</p>
<pre><code class="javascript">const [first, ...rest] = [1, 2, 3, 4, 5];
first // 1
rest  // [2, 3, 4, 5]

const [first, ...rest] = [];
first // undefined
rest  // []:

const [first, ...rest] = [&quot;foo&quot;];
first  // &quot;foo&quot;
rest   // []
</code></pre>
<p>å¦‚æœå°†æ‰©å±•è¿ç®—ç¬¦ç”¨äºæ•°ç»„èµ‹å€¼ï¼Œåªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åä¸€ä½ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">const [...butLast, last] = [1, 2, 3, 4, 5];
// æŠ¥é”™

const [first, ...middle, last] = [1, 2, 3, 4, 5];
// æŠ¥é”™
</code></pre>
<p><strong>ï¼ˆ3ï¼‰å‡½æ•°çš„è¿”å›å€¼</strong></p>
<p>JavaScriptçš„å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚æœéœ€è¦è¿”å›å¤šä¸ªå€¼ï¼Œåªèƒ½è¿”å›æ•°ç»„æˆ–å¯¹è±¡ã€‚æ‰©å±•è¿ç®—ç¬¦æä¾›äº†è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§å˜é€šæ–¹æ³•ã€‚</p>
<pre><code class="javascript">var dateFields = readDateFields(database);
var d = new Date(...dateFields);
</code></pre>
<p>ä¸Šé¢ä»£ç ä»æ•°æ®åº“å–å‡ºä¸€è¡Œæ•°æ®ï¼Œé€šè¿‡æ‰©å±•è¿ç®—ç¬¦ï¼Œç›´æ¥å°†å…¶ä¼ å…¥æ„é€ å‡½æ•°<code>Date</code>ã€‚</p>
<p><strong>ï¼ˆ4ï¼‰å­—ç¬¦ä¸²</strong></p>
<p>æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚</p>
<pre><code class="javascript">[...&#39;hello&#39;]
// [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]
</code></pre>
<p>ä¸Šé¢çš„å†™æ³•ï¼Œæœ‰ä¸€ä¸ªé‡è¦çš„å¥½å¤„ï¼Œé‚£å°±æ˜¯èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«32ä½çš„Unicodeå­—ç¬¦ã€‚</p>
<pre><code class="javascript">&#39;x\uD83D\uDE80y&#39;.length // 4
[...&#39;x\uD83D\uDE80y&#39;].length // 3
</code></pre>
<p>ä¸Šé¢ä»£ç çš„ç¬¬ä¸€ç§å†™æ³•ï¼ŒJavaScriptä¼šå°†32ä½Unicodeå­—ç¬¦ï¼Œè¯†åˆ«ä¸º2ä¸ªå­—ç¬¦ï¼Œé‡‡ç”¨æ‰©å±•è¿ç®—ç¬¦å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚å› æ­¤ï¼Œæ­£ç¡®è¿”å›å­—ç¬¦ä¸²é•¿åº¦çš„å‡½æ•°ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ã€‚</p>
<pre><code class="javascript">function length(str) {
  return [...str].length;
}

length(&#39;x\uD83D\uDE80y&#39;) // 3
</code></pre>
<p>å‡¡æ˜¯æ¶‰åŠåˆ°æ“ä½œ32ä½Unicodeå­—ç¬¦çš„å‡½æ•°ï¼Œéƒ½æœ‰è¿™ä¸ªé—®é¢˜ã€‚å› æ­¤ï¼Œæœ€å¥½éƒ½ç”¨æ‰©å±•è¿ç®—ç¬¦æ”¹å†™ã€‚</p>
<pre><code class="javascript">let str = &#39;x\uD83D\uDE80y&#39;;

str.split(&#39;&#39;).reverse().join(&#39;&#39;)
// &#39;y\uDE80\uD83Dx&#39;

[...str].reverse().join(&#39;&#39;)
// &#39;y\uD83D\uDE80x&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœä¸ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œå­—ç¬¦ä¸²çš„<code>reverse</code>æ“ä½œå°±ä¸æ­£ç¡®ã€‚</p>
<p><strong>ï¼ˆ5ï¼‰å®ç°äº†Iteratoræ¥å£çš„å¯¹è±¡</strong></p>
<p>ä»»ä½•Iteratoræ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨æ‰©å±•è¿ç®—ç¬¦è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚</p>
<pre><code class="javascript">var nodeList = document.querySelectorAll(&#39;div&#39;);
var array = [...nodeList];
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>querySelectorAll</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª<code>nodeList</code>å¯¹è±¡ã€‚å®ƒä¸æ˜¯æ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚è¿™æ—¶ï¼Œæ‰©å±•è¿ç®—ç¬¦å¯ä»¥å°†å…¶è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼ŒåŸå› å°±åœ¨äº<code>NodeList</code>å¯¹è±¡å®ç°äº†Iteratoræ¥å£ã€‚</p>
<p>å¯¹äºé‚£äº›æ²¡æœ‰éƒ¨ç½²Iteratoræ¥å£çš„ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œæ‰©å±•è¿ç®—ç¬¦å°±æ— æ³•å°†å…¶è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚</p>
<pre><code class="javascript">let arrayLike = {
  &#39;0&#39;: &#39;a&#39;,
  &#39;1&#39;: &#39;b&#39;,
  &#39;2&#39;: &#39;c&#39;,
  length: 3
};

// TypeError: Cannot spread non-iterable object.
let arr = [...arrayLike];
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>arrayLike</code>æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œä½†æ˜¯æ²¡æœ‰éƒ¨ç½²Iteratoræ¥å£ï¼Œæ‰©å±•è¿ç®—ç¬¦å°±ä¼šæŠ¥é”™ã€‚è¿™æ—¶ï¼Œå¯ä»¥æ”¹ä¸ºä½¿ç”¨<code>Array.from</code>æ–¹æ³•å°†<code>arrayLike</code>è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚</p>
<p><strong>ï¼ˆ6ï¼‰Mapå’ŒSetç»“æ„ï¼ŒGeneratorå‡½æ•°</strong></p>
<p>æ‰©å±•è¿ç®—ç¬¦å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„Iteratoræ¥å£ï¼Œå› æ­¤åªè¦å…·æœ‰Iteratoræ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œæ¯”å¦‚Mapç»“æ„ã€‚</p>
<pre><code class="javascript">let map = new Map([
  [1, &#39;one&#39;],
  [2, &#39;two&#39;],
  [3, &#39;three&#39;],
]);

let arr = [...map.keys()]; // [1, 2, 3]
</code></pre>
<p>Generatorå‡½æ•°è¿è¡Œåï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ã€‚</p>
<pre><code class="javascript">var go = function*(){
  yield 1;
  yield 2;
  yield 3;
};

[...go()] // [1, 2, 3]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>go</code>æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼Œæ‰§è¡Œåè¿”å›çš„æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå¯¹è¿™ä¸ªéå†å™¨å¯¹è±¡æ‰§è¡Œæ‰©å±•è¿ç®—ç¬¦ï¼Œå°±ä¼šå°†å†…éƒ¨éå†å¾—åˆ°çš„å€¼ï¼Œè½¬ä¸ºä¸€ä¸ªæ•°ç»„ã€‚</p>
<p>å¦‚æœå¯¹æ²¡æœ‰<code>iterator</code>æ¥å£çš„å¯¹è±¡ï¼Œä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼Œå°†ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">var obj = {a: 1, b: 2};
let arr = [...obj]; // TypeError: Cannot spread non-iterable object
</code></pre>
<h2 id="ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼</h2><p>ä»ES5å¼€å§‹ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è®¾å®šä¸ºä¸¥æ ¼æ¨¡å¼ã€‚</p>
<pre><code class="javascript">function doSomething(a, b) {
  &#39;use strict&#39;;
  // code
}
</code></pre>
<p>ã€ŠECMAScript 2016æ ‡å‡†ã€‹åšäº†ä¸€ç‚¹ä¿®æ”¹ï¼Œè§„å®šåªè¦å‡½æ•°å‚æ•°ä½¿ç”¨äº†é»˜è®¤å€¼ã€è§£æ„èµ‹å€¼ã€æˆ–è€…æ‰©å±•è¿ç®—ç¬¦ï¼Œé‚£ä¹ˆå‡½æ•°å†…éƒ¨å°±ä¸èƒ½æ˜¾å¼è®¾å®šä¸ºä¸¥æ ¼æ¨¡å¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
function doSomething(a, b = a) {
  &#39;use strict&#39;;
  // code
}

// æŠ¥é”™
const doSomething = function ({a, b}) {
  &#39;use strict&#39;;
  // code
};

// æŠ¥é”™
const doSomething = (...a) =&gt; {
  &#39;use strict&#39;;
  // code
};

const obj = {
  // æŠ¥é”™
  doSomething({a, b}) {
    &#39;use strict&#39;;
    // code
  }
};
</code></pre>
<p>è¿™æ ·è§„å®šçš„åŸå› æ˜¯ï¼Œå‡½æ•°å†…éƒ¨çš„ä¸¥æ ¼æ¨¡å¼ï¼ŒåŒæ—¶é€‚ç”¨äºå‡½æ•°ä½“ä»£ç å’Œå‡½æ•°å‚æ•°ä»£ç ã€‚ä½†æ˜¯ï¼Œå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œå…ˆæ‰§è¡Œå‡½æ•°å‚æ•°ä»£ç ï¼Œç„¶åå†æ‰§è¡Œå‡½æ•°ä½“ä»£ç ã€‚è¿™æ ·å°±æœ‰ä¸€ä¸ªä¸åˆç†çš„åœ°æ–¹ï¼Œåªæœ‰ä»å‡½æ•°ä½“ä»£ç ä¹‹ä¸­ï¼Œæ‰èƒ½çŸ¥é“å‚æ•°ä»£ç æ˜¯å¦åº”è¯¥ä»¥ä¸¥æ ¼æ¨¡å¼æ‰§è¡Œï¼Œä½†æ˜¯å‚æ•°ä»£ç å´åº”è¯¥å…ˆäºå‡½æ•°ä½“ä»£ç æ‰§è¡Œã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
function doSomething(value = 070) {
  &#39;use strict&#39;;
  return value;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•°<code>value</code>çš„é»˜è®¤å€¼æ˜¯å…«è¿›åˆ¶æ•°<code>070</code>ï¼Œä½†æ˜¯ä¸¥æ ¼æ¨¡å¼ä¸‹ä¸èƒ½ç”¨å‰ç¼€<code>0</code>è¡¨ç¤ºå…«è¿›åˆ¶ï¼Œæ‰€ä»¥åº”è¯¥æŠ¥é”™ã€‚ä½†æ˜¯å®é™…ä¸Šï¼ŒJavaScriptå¼•æ“ä¼šå…ˆæˆåŠŸæ‰§è¡Œ<code>value = 070</code>ï¼Œç„¶åè¿›å…¥å‡½æ•°ä½“å†…éƒ¨ï¼Œå‘ç°éœ€è¦ç”¨ä¸¥æ ¼æ¨¡å¼æ‰§è¡Œï¼Œè¿™æ—¶æ‰ä¼šæŠ¥é”™ã€‚</p>
<p>è™½ç„¶å¯ä»¥å…ˆè§£æå‡½æ•°ä½“ä»£ç ï¼Œå†æ‰§è¡Œå‚æ•°ä»£ç ï¼Œä½†æ˜¯è¿™æ ·æ— ç–‘å°±å¢åŠ äº†å¤æ‚æ€§ã€‚å› æ­¤ï¼Œæ ‡å‡†ç´¢æ€§ç¦æ­¢äº†è¿™ç§ç”¨æ³•ï¼Œåªè¦å‚æ•°ä½¿ç”¨äº†é»˜è®¤å€¼ã€è§£æ„èµ‹å€¼ã€æˆ–è€…æ‰©å±•è¿ç®—ç¬¦ï¼Œå°±ä¸èƒ½æ˜¾å¼æŒ‡å®šä¸¥æ ¼æ¨¡å¼ã€‚</p>
<p>ä¸¤ç§æ–¹æ³•å¯ä»¥è§„é¿è¿™ç§é™åˆ¶ã€‚ç¬¬ä¸€ç§æ˜¯è®¾å®šå…¨å±€æ€§çš„ä¸¥æ ¼æ¨¡å¼ï¼Œè¿™æ˜¯åˆæ³•çš„ã€‚</p>
<pre><code class="javascript">&#39;use strict&#39;;

function doSomething(a, b = a) {
  // code
}
</code></pre>
<p>ç¬¬äºŒç§æ˜¯æŠŠå‡½æ•°åŒ…åœ¨ä¸€ä¸ªæ— å‚æ•°çš„ç«‹å³æ‰§è¡Œå‡½æ•°é‡Œé¢ã€‚</p>
<pre><code class="javascript">const doSomething = (function () {
  &#39;use strict&#39;;
  return function(value = 42) {
    return value;
  };
}());
</code></pre>
<h2 id="name-å±æ€§"><a href="#name-å±æ€§" class="headerlink" title="name å±æ€§"></a>name å±æ€§</h2><p>å‡½æ•°çš„<code>name</code>å±æ€§ï¼Œè¿”å›è¯¥å‡½æ•°çš„å‡½æ•°åã€‚</p>
<pre><code class="javascript">function foo() {}
foo.name // &quot;foo&quot;
</code></pre>
<p>è¿™ä¸ªå±æ€§æ—©å°±è¢«æµè§ˆå™¨å¹¿æ³›æ”¯æŒï¼Œä½†æ˜¯ç›´åˆ° ES6ï¼Œæ‰å°†å…¶å†™å…¥äº†æ ‡å‡†ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒES6 å¯¹è¿™ä¸ªå±æ€§çš„è¡Œä¸ºåšå‡ºäº†ä¸€äº›ä¿®æ”¹ã€‚å¦‚æœå°†ä¸€ä¸ªåŒ¿åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼ŒES5 çš„<code>name</code>å±æ€§ï¼Œä¼šè¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œè€Œ ES6 çš„<code>name</code>å±æ€§ä¼šè¿”å›å®é™…çš„å‡½æ•°åã€‚</p>
<pre><code class="javascript">var f = function () {};

// ES5
f.name // &quot;&quot;

// ES6
f.name // &quot;f&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>f</code>ç­‰äºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼ŒES5 å’Œ ES6 çš„<code>name</code>å±æ€§è¿”å›çš„å€¼ä¸ä¸€æ ·ã€‚</p>
<p>å¦‚æœå°†ä¸€ä¸ªå…·åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œåˆ™ ES5 å’Œ ES6 çš„<code>name</code>å±æ€§éƒ½è¿”å›è¿™ä¸ªå…·åå‡½æ•°åŸæœ¬çš„åå­—ã€‚</p>
<pre><code class="javascript">const bar = function baz() {};

// ES5
bar.name // &quot;baz&quot;

// ES6
bar.name // &quot;baz&quot;
</code></pre>
<p><code>Function</code>æ„é€ å‡½æ•°è¿”å›çš„å‡½æ•°å®ä¾‹ï¼Œ<code>name</code>å±æ€§çš„å€¼ä¸º<code>anonymous</code>ã€‚</p>
<pre><code class="javascript">(new Function).name // &quot;anonymous&quot;
</code></pre>
<p><code>bind</code>è¿”å›çš„å‡½æ•°ï¼Œ<code>name</code>å±æ€§å€¼ä¼šåŠ ä¸Š<code>bound</code>å‰ç¼€ã€‚</p>
<pre><code class="javascript">function foo() {};
foo.bind({}).name // &quot;bound foo&quot;

(function(){}).bind({}).name // &quot;bound &quot;
</code></pre>
<h2 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h2><h3 id="åŸºæœ¬ç”¨æ³•-1"><a href="#åŸºæœ¬ç”¨æ³•-1" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>ES6å…è®¸ä½¿ç”¨â€œç®­å¤´â€ï¼ˆ<code>=&gt;</code>ï¼‰å®šä¹‰å‡½æ•°ã€‚</p>
<pre><code class="javascript">var f = v =&gt; v;
</code></pre>
<p>ä¸Šé¢çš„ç®­å¤´å‡½æ•°ç­‰åŒäºï¼š</p>
<pre><code class="javascript">var f = function(v) {
  return v;
};
</code></pre>
<p>å¦‚æœç®­å¤´å‡½æ•°ä¸éœ€è¦å‚æ•°æˆ–éœ€è¦å¤šä¸ªå‚æ•°ï¼Œå°±ä½¿ç”¨ä¸€ä¸ªåœ†æ‹¬å·ä»£è¡¨å‚æ•°éƒ¨åˆ†ã€‚</p>
<pre><code class="javascript">var f = () =&gt; 5;
// ç­‰åŒäº
var f = function () { return 5 };

var sum = (num1, num2) =&gt; num1 + num2;
// ç­‰åŒäº
var sum = function(num1, num2) {
  return num1 + num2;
};
</code></pre>
<p>å¦‚æœç®­å¤´å‡½æ•°çš„ä»£ç å—éƒ¨åˆ†å¤šäºä¸€æ¡è¯­å¥ï¼Œå°±è¦ä½¿ç”¨å¤§æ‹¬å·å°†å®ƒä»¬æ‹¬èµ·æ¥ï¼Œå¹¶ä¸”ä½¿ç”¨<code>return</code>è¯­å¥è¿”å›ã€‚</p>
<pre><code class="javascript">var sum = (num1, num2) =&gt; { return num1 + num2; }
</code></pre>
<p>ç”±äºå¤§æ‹¬å·è¢«è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰€ä»¥å¦‚æœç®­å¤´å‡½æ•°ç›´æ¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»åœ¨å¯¹è±¡å¤–é¢åŠ ä¸Šæ‹¬å·ã€‚</p>
<pre><code class="javascript">var getTempItem = id =&gt; ({ id: id, name: &quot;Temp&quot; });
</code></pre>
<p>ç®­å¤´å‡½æ•°å¯ä»¥ä¸å˜é‡è§£æ„ç»“åˆä½¿ç”¨ã€‚</p>
<pre><code class="javascript">const full = ({ first, last }) =&gt; first + &#39; &#39; + last;

// ç­‰åŒäº
function full(person) {
  return person.first + &#39; &#39; + person.last;
}
</code></pre>
<p>ç®­å¤´å‡½æ•°ä½¿å¾—è¡¨è¾¾æ›´åŠ ç®€æ´ã€‚</p>
<pre><code class="javascript">const isEven = n =&gt; n % 2 == 0;
const square = n =&gt; n * n;
</code></pre>
<p>ä¸Šé¢ä»£ç åªç”¨äº†ä¸¤è¡Œï¼Œå°±å®šä¹‰äº†ä¸¤ä¸ªç®€å•çš„å·¥å…·å‡½æ•°ã€‚å¦‚æœä¸ç”¨ç®­å¤´å‡½æ•°ï¼Œå¯èƒ½å°±è¦å ç”¨å¤šè¡Œï¼Œè€Œä¸”è¿˜ä¸å¦‚ç°åœ¨è¿™æ ·å†™é†’ç›®ã€‚</p>
<p>ç®­å¤´å‡½æ•°çš„ä¸€ä¸ªç”¨å¤„æ˜¯ç®€åŒ–å›è°ƒå‡½æ•°ã€‚</p>
<pre><code class="javascript">// æ­£å¸¸å‡½æ•°å†™æ³•
[1,2,3].map(function (x) {
  return x * x;
});

// ç®­å¤´å‡½æ•°å†™æ³•
[1,2,3].map(x =&gt; x * x);
</code></pre>
<p>å¦ä¸€ä¸ªä¾‹å­æ˜¯</p>
<pre><code class="javascript">// æ­£å¸¸å‡½æ•°å†™æ³•
var result = values.sort(function (a, b) {
  return a - b;
});

// ç®­å¤´å‡½æ•°å†™æ³•
var result = values.sort((a, b) =&gt; a - b);
</code></pre>
<p>ä¸‹é¢æ˜¯restå‚æ•°ä¸ç®­å¤´å‡½æ•°ç»“åˆçš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">const numbers = (...nums) =&gt; nums;

numbers(1, 2, 3, 4, 5)
// [1,2,3,4,5]

const headAndTail = (head, ...tail) =&gt; [head, tail];

headAndTail(1, 2, 3, 4, 5)
// [1,[2,3,4,5]]
</code></pre>
<h3 id="ä½¿ç”¨æ³¨æ„ç‚¹"><a href="#ä½¿ç”¨æ³¨æ„ç‚¹" class="headerlink" title="ä½¿ç”¨æ³¨æ„ç‚¹"></a>ä½¿ç”¨æ³¨æ„ç‚¹</h3><p>ç®­å¤´å‡½æ•°æœ‰å‡ ä¸ªä½¿ç”¨æ³¨æ„ç‚¹ã€‚</p>
<p>ï¼ˆ1ï¼‰å‡½æ•°ä½“å†…çš„<code>this</code>å¯¹è±¡ï¼Œå°±æ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚</p>
<p>ï¼ˆ2ï¼‰ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯ä»¥ä½¿ç”¨<code>new</code>å‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p>
<p>ï¼ˆ3ï¼‰ä¸å¯ä»¥ä½¿ç”¨<code>arguments</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ã€‚å¦‚æœè¦ç”¨ï¼Œå¯ä»¥ç”¨Restå‚æ•°ä»£æ›¿ã€‚</p>
<p>ï¼ˆ4ï¼‰ä¸å¯ä»¥ä½¿ç”¨<code>yield</code>å‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œGeneratorå‡½æ•°ã€‚</p>
<p>ä¸Šé¢å››ç‚¹ä¸­ï¼Œç¬¬ä¸€ç‚¹å°¤å…¶å€¼å¾—æ³¨æ„ã€‚<code>this</code>å¯¹è±¡çš„æŒ‡å‘æ˜¯å¯å˜çš„ï¼Œä½†æ˜¯åœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œå®ƒæ˜¯å›ºå®šçš„ã€‚</p>
<pre><code class="javascript">function foo() {
  setTimeout(() =&gt; {
    console.log(&#39;id:&#39;, this.id);
  }, 100);
}

var id = 21;

foo.call({ id: 42 });
// id: 42
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>setTimeout</code>çš„å‚æ•°æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œè¿™ä¸ªç®­å¤´å‡½æ•°çš„å®šä¹‰ç”Ÿæ•ˆæ˜¯åœ¨<code>foo</code>å‡½æ•°ç”Ÿæˆæ—¶ï¼Œè€Œå®ƒçš„çœŸæ­£æ‰§è¡Œè¦ç­‰åˆ°100æ¯«ç§’åã€‚å¦‚æœæ˜¯æ™®é€šå‡½æ•°ï¼Œæ‰§è¡Œæ—¶<code>this</code>åº”è¯¥æŒ‡å‘å…¨å±€å¯¹è±¡<code>window</code>ï¼Œè¿™æ—¶åº”è¯¥è¾“å‡º<code>21</code>ã€‚ä½†æ˜¯ï¼Œç®­å¤´å‡½æ•°å¯¼è‡´<code>this</code>æ€»æ˜¯æŒ‡å‘å‡½æ•°å®šä¹‰ç”Ÿæ•ˆæ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼ˆæœ¬ä¾‹æ˜¯<code>{id: 42}</code>ï¼‰ï¼Œæ‰€ä»¥è¾“å‡ºçš„æ˜¯<code>42</code>ã€‚</p>
<p>ç®­å¤´å‡½æ•°å¯ä»¥è®©<code>setTimeout</code>é‡Œé¢çš„<code>this</code>ï¼Œç»‘å®šå®šä¹‰æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œè€Œä¸æ˜¯æŒ‡å‘è¿è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">function Timer() {
  this.s1 = 0;
  this.s2 = 0;
  // ç®­å¤´å‡½æ•°
  setInterval(() =&gt; this.s1++, 1000);
  // æ™®é€šå‡½æ•°
  setInterval(function () {
    this.s2++;
  }, 1000);
}

var timer = new Timer();

setTimeout(() =&gt; console.log(&#39;s1: &#39;, timer.s1), 3100);
setTimeout(() =&gt; console.log(&#39;s2: &#39;, timer.s2), 3100);
// s1: 3
// s2: 0
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Timer</code>å‡½æ•°å†…éƒ¨è®¾ç½®äº†ä¸¤ä¸ªå®šæ—¶å™¨ï¼Œåˆ†åˆ«ä½¿ç”¨äº†ç®­å¤´å‡½æ•°å’Œæ™®é€šå‡½æ•°ã€‚å‰è€…çš„<code>this</code>ç»‘å®šå®šä¹‰æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼ˆå³<code>Timer</code>å‡½æ•°ï¼‰ï¼Œåè€…çš„<code>this</code>æŒ‡å‘è¿è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼ˆå³å…¨å±€å¯¹è±¡ï¼‰ã€‚æ‰€ä»¥ï¼Œ3100æ¯«ç§’ä¹‹åï¼Œ<code>timer.s1</code>è¢«æ›´æ–°äº†3æ¬¡ï¼Œè€Œ<code>timer.s2</code>ä¸€æ¬¡éƒ½æ²¡æ›´æ–°ã€‚</p>
<p>ç®­å¤´å‡½æ•°å¯ä»¥è®©<code>this</code>æŒ‡å‘å›ºå®šåŒ–ï¼Œè¿™ç§ç‰¹æ€§å¾ˆæœ‰åˆ©äºå°è£…å›è°ƒå‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼ŒDOMäº‹ä»¶çš„å›è°ƒå‡½æ•°å°è£…åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ã€‚</p>
<pre><code class="javascript">var handler = {
  id: &#39;123456&#39;,

  init: function() {
    document.addEventListener(&#39;click&#39;,
      event =&gt; this.doSomething(event.type), false);
  },

  doSomething: function(type) {
    console.log(&#39;Handling &#39; + type  + &#39; for &#39; + this.id);
  }
};
</code></pre>
<p>ä¸Šé¢ä»£ç çš„<code>init</code>æ–¹æ³•ä¸­ï¼Œä½¿ç”¨äº†ç®­å¤´å‡½æ•°ï¼Œè¿™å¯¼è‡´è¿™ä¸ªç®­å¤´å‡½æ•°é‡Œé¢çš„<code>this</code>ï¼Œæ€»æ˜¯æŒ‡å‘<code>handler</code>å¯¹è±¡ã€‚å¦åˆ™ï¼Œå›è°ƒå‡½æ•°è¿è¡Œæ—¶ï¼Œ<code>this.doSomething</code>è¿™ä¸€è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºæ­¤æ—¶<code>this</code>æŒ‡å‘<code>document</code>å¯¹è±¡ã€‚</p>
<p><code>this</code>æŒ‡å‘çš„å›ºå®šåŒ–ï¼Œå¹¶ä¸æ˜¯å› ä¸ºç®­å¤´å‡½æ•°å†…éƒ¨æœ‰ç»‘å®š<code>this</code>çš„æœºåˆ¶ï¼Œå®é™…åŸå› æ˜¯ç®­å¤´å‡½æ•°æ ¹æœ¬æ²¡æœ‰è‡ªå·±çš„<code>this</code>ï¼Œå¯¼è‡´å†…éƒ¨çš„<code>this</code>å°±æ˜¯å¤–å±‚ä»£ç å—çš„<code>this</code>ã€‚æ­£æ˜¯å› ä¸ºå®ƒæ²¡æœ‰<code>this</code>ï¼Œæ‰€ä»¥ä¹Ÿå°±ä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ã€‚</p>
<p>æ‰€ä»¥ï¼Œç®­å¤´å‡½æ•°è½¬æˆES5çš„ä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">// ES6
function foo() {
  setTimeout(() =&gt; {
    console.log(&#39;id:&#39;, this.id);
  }, 100);
}

// ES5
function foo() {
  var _this = this;

  setTimeout(function () {
    console.log(&#39;id:&#39;, _this.id);
  }, 100);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè½¬æ¢åçš„ES5ç‰ˆæœ¬æ¸…æ¥šåœ°è¯´æ˜äº†ï¼Œç®­å¤´å‡½æ•°é‡Œé¢æ ¹æœ¬æ²¡æœ‰è‡ªå·±çš„<code>this</code>ï¼Œè€Œæ˜¯å¼•ç”¨å¤–å±‚çš„<code>this</code>ã€‚</p>
<p>è¯·é—®ä¸‹é¢çš„ä»£ç ä¹‹ä¸­æœ‰å‡ ä¸ª<code>this</code>ï¼Ÿ</p>
<pre><code class="javascript">function foo() {
  return () =&gt; {
    return () =&gt; {
      return () =&gt; {
        console.log(&#39;id:&#39;, this.id);
      };
    };
  };
}

var f = foo.call({id: 1});

var t1 = f.call({id: 2})()(); // id: 1
var t2 = f().call({id: 3})(); // id: 1
var t3 = f()().call({id: 4}); // id: 1
</code></pre>
<p>ä¸Šé¢ä»£ç ä¹‹ä¸­ï¼Œåªæœ‰ä¸€ä¸ª<code>this</code>ï¼Œå°±æ˜¯å‡½æ•°<code>foo</code>çš„<code>this</code>ï¼Œæ‰€ä»¥<code>t1</code>ã€<code>t2</code>ã€<code>t3</code>éƒ½è¾“å‡ºåŒæ ·çš„ç»“æœã€‚å› ä¸ºæ‰€æœ‰çš„å†…å±‚å‡½æ•°éƒ½æ˜¯ç®­å¤´å‡½æ•°ï¼Œéƒ½æ²¡æœ‰è‡ªå·±çš„<code>this</code>ï¼Œå®ƒä»¬çš„<code>this</code>å…¶å®éƒ½æ˜¯æœ€å¤–å±‚<code>foo</code>å‡½æ•°çš„<code>this</code>ã€‚</p>
<p>é™¤äº†<code>this</code>ï¼Œä»¥ä¸‹ä¸‰ä¸ªå˜é‡åœ¨ç®­å¤´å‡½æ•°ä¹‹ä¸­ä¹Ÿæ˜¯ä¸å­˜åœ¨çš„ï¼ŒæŒ‡å‘å¤–å±‚å‡½æ•°çš„å¯¹åº”å˜é‡ï¼š<code>arguments</code>ã€<code>super</code>ã€<code>new.target</code>ã€‚</p>
<pre><code class="javascript">function foo() {
  setTimeout(() =&gt; {
    console.log(&#39;args:&#39;, arguments);
  }, 100);
}

foo(2, 4, 6, 8)
// args: [2, 4, 6, 8]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç®­å¤´å‡½æ•°å†…éƒ¨çš„å˜é‡<code>arguments</code>ï¼Œå…¶å®æ˜¯å‡½æ•°<code>foo</code>çš„<code>arguments</code>å˜é‡ã€‚</p>
<p>å¦å¤–ï¼Œç”±äºç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„<code>this</code>ï¼Œæ‰€ä»¥å½“ç„¶ä¹Ÿå°±ä¸èƒ½ç”¨<code>call()</code>ã€<code>apply()</code>ã€<code>bind()</code>è¿™äº›æ–¹æ³•å»æ”¹å˜<code>this</code>çš„æŒ‡å‘ã€‚</p>
<pre><code class="javascript">(function() {
  return [
    (() =&gt; this.x).bind({ x: &#39;inner&#39; })()
  ];
}).call({ x: &#39;outer&#39; });
// [&#39;outer&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„<code>this</code>ï¼Œæ‰€ä»¥<code>bind</code>æ–¹æ³•æ— æ•ˆï¼Œå†…éƒ¨çš„<code>this</code>æŒ‡å‘å¤–éƒ¨çš„<code>this</code>ã€‚</p>
<p>é•¿æœŸä»¥æ¥ï¼ŒJavaScriptè¯­è¨€çš„<code>this</code>å¯¹è±¡ä¸€ç›´æ˜¯ä¸€ä¸ªä»¤äººå¤´ç—›çš„é—®é¢˜ï¼Œåœ¨å¯¹è±¡æ–¹æ³•ä¸­ä½¿ç”¨<code>this</code>ï¼Œå¿…é¡»éå¸¸å°å¿ƒã€‚ç®­å¤´å‡½æ•°â€ç»‘å®šâ€<code>this</code>ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šè§£å†³äº†è¿™ä¸ªå›°æ‰°ã€‚</p>
<h3 id="åµŒå¥—çš„ç®­å¤´å‡½æ•°"><a href="#åµŒå¥—çš„ç®­å¤´å‡½æ•°" class="headerlink" title="åµŒå¥—çš„ç®­å¤´å‡½æ•°"></a>åµŒå¥—çš„ç®­å¤´å‡½æ•°</h3><p>ç®­å¤´å‡½æ•°å†…éƒ¨ï¼Œè¿˜å¯ä»¥å†ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªES5è¯­æ³•çš„å¤šé‡åµŒå¥—å‡½æ•°ã€‚</p>
<pre><code class="javascript">function insert(value) {
  return {into: function (array) {
    return {after: function (afterValue) {
      array.splice(array.indexOf(afterValue) + 1, 0, value);
      return array;
    }};
  }};
}

insert(2).into([1, 3]).after(1); //[1, 2, 3]
</code></pre>
<p>ä¸Šé¢è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°æ”¹å†™ã€‚</p>
<pre><code class="javascript">let insert = (value) =&gt; ({into: (array) =&gt; ({after: (afterValue) =&gt; {
  array.splice(array.indexOf(afterValue) + 1, 0, value);
  return array;
}})});

insert(2).into([1, 3]).after(1); //[1, 2, 3]
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªéƒ¨ç½²ç®¡é“æœºåˆ¶ï¼ˆpipelineï¼‰çš„ä¾‹å­ï¼Œå³å‰ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºæ˜¯åä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ã€‚</p>
<pre><code class="javascript">const pipeline = (...funcs) =&gt;
  val =&gt; funcs.reduce((a, b) =&gt; b(a), val);

const plus1 = a =&gt; a + 1;
const mult2 = a =&gt; a * 2;
const addThenMult = pipeline(plus1, mult2);

addThenMult(5)
// 12
</code></pre>
<p>å¦‚æœè§‰å¾—ä¸Šé¢çš„å†™æ³•å¯è¯»æ€§æ¯”è¾ƒå·®ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„å†™æ³•ã€‚</p>
<pre><code class="javascript">const plus1 = a =&gt; a + 1;
const mult2 = a =&gt; a * 2;

mult2(plus1(5))
// 12
</code></pre>
<p>ç®­å¤´å‡½æ•°è¿˜æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ”¹å†™Î»æ¼”ç®—ã€‚</p>
<pre><code class="javascript">// Î»æ¼”ç®—çš„å†™æ³•
fix = Î»f.(Î»x.f(Î»v.x(x)(v)))(Î»x.f(Î»v.x(x)(v)))

// ES6çš„å†™æ³•
var fix = f =&gt; (x =&gt; f(v =&gt; x(x)(v)))
               (x =&gt; f(v =&gt; x(x)(v)));
</code></pre>
<p>ä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œå‡ ä¹æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ç”±äºÎ»æ¼”ç®—å¯¹äºè®¡ç®—æœºç§‘å­¦éå¸¸é‡è¦ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥ç”¨ES6ä½œä¸ºæ›¿ä»£å·¥å…·ï¼Œæ¢ç´¢è®¡ç®—æœºç§‘å­¦ã€‚</p>
<h2 id="ç»‘å®š-this"><a href="#ç»‘å®š-this" class="headerlink" title="ç»‘å®š this"></a>ç»‘å®š this</h2><p>ç®­å¤´å‡½æ•°å¯ä»¥ç»‘å®š<code>this</code>å¯¹è±¡ï¼Œå¤§å¤§å‡å°‘äº†æ˜¾å¼ç»‘å®š<code>this</code>å¯¹è±¡çš„å†™æ³•ï¼ˆ<code>call</code>ã€<code>apply</code>ã€<code>bind</code>ï¼‰ã€‚ä½†æ˜¯ï¼Œç®­å¤´å‡½æ•°å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰åœºåˆï¼Œæ‰€ä»¥ES7æå‡ºäº†â€œå‡½æ•°ç»‘å®šâ€ï¼ˆfunction bindï¼‰è¿ç®—ç¬¦ï¼Œç”¨æ¥å–ä»£<code>call</code>ã€<code>apply</code>ã€<code>bind</code>è°ƒç”¨ã€‚è™½ç„¶è¯¥è¯­æ³•è¿˜æ˜¯ES7çš„ä¸€ä¸ª<a href="https://github.com/zenparsing/es-function-bind" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œä½†æ˜¯Babelè½¬ç å™¨å·²ç»æ”¯æŒã€‚</p>
<p>å‡½æ•°ç»‘å®šè¿ç®—ç¬¦æ˜¯å¹¶æ’çš„ä¸¤ä¸ªåŒå†’å·ï¼ˆ::ï¼‰ï¼ŒåŒå†’å·å·¦è¾¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå³è¾¹æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚è¯¥è¿ç®—ç¬¦ä¼šè‡ªåŠ¨å°†å·¦è¾¹çš„å¯¹è±¡ï¼Œä½œä¸ºä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆå³thiså¯¹è±¡ï¼‰ï¼Œç»‘å®šåˆ°å³è¾¹çš„å‡½æ•°ä¸Šé¢ã€‚</p>
<pre><code class="javascript">foo::bar;
// ç­‰åŒäº
bar.bind(foo);

foo::bar(...arguments);
// ç­‰åŒäº
bar.apply(foo, arguments);

const hasOwnProperty = Object.prototype.hasOwnProperty;
function hasOwn(obj, key) {
  return obj::hasOwnProperty(key);
}
</code></pre>
<p>å¦‚æœåŒå†’å·å·¦è¾¹ä¸ºç©ºï¼Œå³è¾¹æ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œåˆ™ç­‰äºå°†è¯¥æ–¹æ³•ç»‘å®šåœ¨è¯¥å¯¹è±¡ä¸Šé¢ã€‚</p>
<pre><code class="javascript">var method = obj::obj.foo;
// ç­‰åŒäº
var method = ::obj.foo;

let log = ::console.log;
// ç­‰åŒäº
var log = console.log.bind(console);
</code></pre>
<p>ç”±äºåŒå†’å·è¿ç®—ç¬¦è¿”å›çš„è¿˜æ˜¯åŸå¯¹è±¡ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ã€‚</p>
<pre><code class="javascript">// ä¾‹ä¸€
import { map, takeWhile, forEach } from &quot;iterlib&quot;;

getPlayers()
::map(x =&gt; x.character())
::takeWhile(x =&gt; x.strength &gt; 100)
::forEach(x =&gt; console.log(x));

// ä¾‹äºŒ
let { find, html } = jake;

document.querySelectorAll(&quot;div.myClass&quot;)
::find(&quot;p&quot;)
::html(&quot;hahaha&quot;);
</code></pre>
<h2 id="å°¾è°ƒç”¨ä¼˜åŒ–"><a href="#å°¾è°ƒç”¨ä¼˜åŒ–" class="headerlink" title="å°¾è°ƒç”¨ä¼˜åŒ–"></a>å°¾è°ƒç”¨ä¼˜åŒ–</h2><h3 id="ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å°¾è°ƒç”¨ï¼Ÿ</h3><p>å°¾è°ƒç”¨ï¼ˆTail Callï¼‰æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œæœ¬èº«éå¸¸ç®€å•ï¼Œä¸€å¥è¯å°±èƒ½è¯´æ¸…æ¥šï¼Œå°±æ˜¯æŒ‡æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ã€‚</p>
<pre><code class="javascript">function f(x){
  return g(x);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fçš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å‡½æ•°gï¼Œè¿™å°±å«å°¾è°ƒç”¨ã€‚</p>
<p>ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼Œéƒ½ä¸å±äºå°¾è°ƒç”¨ã€‚</p>
<pre><code class="javascript">// æƒ…å†µä¸€
function f(x){
  let y = g(x);
  return y;
}

// æƒ…å†µäºŒ
function f(x){
  return g(x) + 1;
}

// æƒ…å†µä¸‰
function f(x){
  g(x);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæƒ…å†µä¸€æ˜¯è°ƒç”¨å‡½æ•°gä¹‹åï¼Œè¿˜æœ‰èµ‹å€¼æ“ä½œï¼Œæ‰€ä»¥ä¸å±äºå°¾è°ƒç”¨ï¼Œå³ä½¿è¯­ä¹‰å®Œå…¨ä¸€æ ·ã€‚æƒ…å†µäºŒä¹Ÿå±äºè°ƒç”¨åè¿˜æœ‰æ“ä½œï¼Œå³ä½¿å†™åœ¨ä¸€è¡Œå†…ã€‚æƒ…å†µä¸‰ç­‰åŒäºä¸‹é¢çš„ä»£ç ã€‚</p>
<pre><code class="javascript">function f(x){
  g(x);
  return undefined;
}
</code></pre>
<p>å°¾è°ƒç”¨ä¸ä¸€å®šå‡ºç°åœ¨å‡½æ•°å°¾éƒ¨ï¼Œåªè¦æ˜¯æœ€åä¸€æ­¥æ“ä½œå³å¯ã€‚</p>
<pre><code class="javascript">function f(x) {
  if (x &gt; 0) {
    return m(x)
  }
  return n(x);
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°må’Œnéƒ½å±äºå°¾è°ƒç”¨ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯å‡½æ•°fçš„æœ€åä¸€æ­¥æ“ä½œã€‚</p>
<h3 id="å°¾è°ƒç”¨ä¼˜åŒ–-1"><a href="#å°¾è°ƒç”¨ä¼˜åŒ–-1" class="headerlink" title="å°¾è°ƒç”¨ä¼˜åŒ–"></a>å°¾è°ƒç”¨ä¼˜åŒ–</h3><p>å°¾è°ƒç”¨ä¹‹æ‰€ä»¥ä¸å…¶ä»–è°ƒç”¨ä¸åŒï¼Œå°±åœ¨äºå®ƒçš„ç‰¹æ®Šçš„è°ƒç”¨ä½ç½®ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°è°ƒç”¨ä¼šåœ¨å†…å­˜å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨è®°å½•â€ï¼Œåˆç§°â€œè°ƒç”¨å¸§â€ï¼ˆcall frameï¼‰ï¼Œä¿å­˜è°ƒç”¨ä½ç½®å’Œå†…éƒ¨å˜é‡ç­‰ä¿¡æ¯ã€‚å¦‚æœåœ¨å‡½æ•°Açš„å†…éƒ¨è°ƒç”¨å‡½æ•°Bï¼Œé‚£ä¹ˆåœ¨Açš„è°ƒç”¨å¸§ä¸Šæ–¹ï¼Œè¿˜ä¼šå½¢æˆä¸€ä¸ªBçš„è°ƒç”¨å¸§ã€‚ç­‰åˆ°Bè¿è¡Œç»“æŸï¼Œå°†ç»“æœè¿”å›åˆ°Aï¼ŒBçš„è°ƒç”¨å¸§æ‰ä¼šæ¶ˆå¤±ã€‚å¦‚æœå‡½æ•°Bå†…éƒ¨è¿˜è°ƒç”¨å‡½æ•°Cï¼Œé‚£å°±è¿˜æœ‰ä¸€ä¸ªCçš„è°ƒç”¨å¸§ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ‰€æœ‰çš„è°ƒç”¨å¸§ï¼Œå°±å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨æ ˆâ€ï¼ˆcall stackï¼‰ã€‚</p>
<p>å°¾è°ƒç”¨ç”±äºæ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿ç•™å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå› ä¸ºè°ƒç”¨ä½ç½®ã€å†…éƒ¨å˜é‡ç­‰ä¿¡æ¯éƒ½ä¸ä¼šå†ç”¨åˆ°äº†ï¼Œåªè¦ç›´æ¥ç”¨å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§å°±å¯ä»¥äº†ã€‚</p>
<pre><code class="javascript">function f() {
  let m = 1;
  let n = 2;
  return g(m + n);
}
f();

// ç­‰åŒäº
function f() {
  return g(3);
}
f();

// ç­‰åŒäº
g(3);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå‡½æ•°gä¸æ˜¯å°¾è°ƒç”¨ï¼Œå‡½æ•°få°±éœ€è¦ä¿å­˜å†…éƒ¨å˜é‡må’Œnçš„å€¼ã€gçš„è°ƒç”¨ä½ç½®ç­‰ä¿¡æ¯ã€‚ä½†ç”±äºè°ƒç”¨gä¹‹åï¼Œå‡½æ•°få°±ç»“æŸäº†ï¼Œæ‰€ä»¥æ‰§è¡Œåˆ°æœ€åä¸€æ­¥ï¼Œå®Œå…¨å¯ä»¥åˆ é™¤ f(x) çš„è°ƒç”¨å¸§ï¼Œåªä¿ç•™ g(3) çš„è°ƒç”¨å¸§ã€‚</p>
<p>è¿™å°±å«åšâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€ï¼ˆTail call optimizationï¼‰ï¼Œå³åªä¿ç•™å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§ã€‚å¦‚æœæ‰€æœ‰å‡½æ•°éƒ½æ˜¯å°¾è°ƒç”¨ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥åšåˆ°æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œè°ƒç”¨å¸§åªæœ‰ä¸€é¡¹ï¼Œè¿™å°†å¤§å¤§èŠ‚çœå†…å­˜ã€‚è¿™å°±æ˜¯â€œå°¾è°ƒç”¨ä¼˜åŒ–â€çš„æ„ä¹‰ã€‚</p>
<p>æ³¨æ„ï¼Œåªæœ‰ä¸å†ç”¨åˆ°å¤–å±‚å‡½æ•°çš„å†…éƒ¨å˜é‡ï¼Œå†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§æ‰ä¼šå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå¦åˆ™å°±æ— æ³•è¿›è¡Œâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€ã€‚</p>
<pre><code class="javascript">function addOne(a){
  var one = 1;
  function inner(b){
    return b + one;
  }
  return inner(a);
}
</code></pre>
<p>ä¸Šé¢çš„å‡½æ•°ä¸ä¼šè¿›è¡Œå°¾è°ƒç”¨ä¼˜åŒ–ï¼Œå› ä¸ºå†…å±‚å‡½æ•°<code>inner</code>ç”¨åˆ°äº†å¤–å±‚å‡½æ•°<code>addOne</code>çš„å†…éƒ¨å˜é‡<code>one</code>ã€‚</p>
<h3 id="å°¾é€’å½’"><a href="#å°¾é€’å½’" class="headerlink" title="å°¾é€’å½’"></a>å°¾é€’å½’</h3><p>å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œç§°ä¸ºé€’å½’ã€‚å¦‚æœå°¾è°ƒç”¨è‡ªèº«ï¼Œå°±ç§°ä¸ºå°¾é€’å½’ã€‚</p>
<p>é€’å½’éå¸¸è€—è´¹å†…å­˜ï¼Œå› ä¸ºéœ€è¦åŒæ—¶ä¿å­˜æˆåƒä¸Šç™¾ä¸ªè°ƒç”¨å¸§ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ï¼ˆstack overflowï¼‰ã€‚ä½†å¯¹äºå°¾é€’å½’æ¥è¯´ï¼Œç”±äºåªå­˜åœ¨ä¸€ä¸ªè°ƒç”¨å¸§ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šå‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ã€‚</p>
<pre><code class="javascript">function factorial(n) {
  if (n === 1) return 1;
  return n * factorial(n - 1);
}

factorial(5) // 120
</code></pre>
<p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªé˜¶ä¹˜å‡½æ•°ï¼Œè®¡ç®—nçš„é˜¶ä¹˜ï¼Œæœ€å¤šéœ€è¦ä¿å­˜nä¸ªè°ƒç”¨è®°å½•ï¼Œå¤æ‚åº¦ O(n) ã€‚</p>
<p>å¦‚æœæ”¹å†™æˆå°¾é€’å½’ï¼Œåªä¿ç•™ä¸€ä¸ªè°ƒç”¨è®°å½•ï¼Œå¤æ‚åº¦ O(1) ã€‚</p>
<pre><code class="javascript">function factorial(n, total) {
  if (n === 1) return total;
  return factorial(n - 1, n * total);
}

factorial(5, 1) // 120
</code></pre>
<p>è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒè‘—åçš„ä¾‹å­ï¼Œå°±æ˜¯è®¡ç®—fibonacci æ•°åˆ—ï¼Œä¹Ÿèƒ½å……åˆ†è¯´æ˜å°¾é€’å½’ä¼˜åŒ–çš„é‡è¦æ€§</p>
<p>å¦‚æœæ˜¯éå°¾é€’å½’çš„fibonacci é€’å½’æ–¹æ³•</p>
<pre><code class="javascript">function Fibonacci (n) {
  if ( n &lt;= 1 ) {return 1};

  return Fibonacci(n - 1) + Fibonacci(n - 2);
}

Fibonacci(10); // 89
// Fibonacci(100)
// Fibonacci(500)
// å †æ ˆæº¢å‡ºäº†
</code></pre>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨å°¾é€’å½’ä¼˜åŒ–è¿‡çš„fibonacci é€’å½’ç®—æ³•</p>
<pre><code class="javascript">function Fibonacci2 (n , ac1 = 1 , ac2 = 1) {
  if( n &lt;= 1 ) {return ac2};

  return Fibonacci2 (n - 1, ac2, ac1 + ac2);
}

Fibonacci2(100) // 573147844013817200000
Fibonacci2(1000) // 7.0330367711422765e+208
Fibonacci2(10000) // Infinity
</code></pre>
<p>ç”±æ­¤å¯è§ï¼Œâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€å¯¹é€’å½’æ“ä½œæ„ä¹‰é‡å¤§ï¼Œæ‰€ä»¥ä¸€äº›å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å°†å…¶å†™å…¥äº†è¯­è¨€è§„æ ¼ã€‚ES6ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œç¬¬ä¸€æ¬¡æ˜ç¡®è§„å®šï¼Œæ‰€æœ‰ECMAScriptçš„å®ç°ï¼Œéƒ½å¿…é¡»éƒ¨ç½²â€œå°¾è°ƒç”¨ä¼˜åŒ–â€ã€‚è¿™å°±æ˜¯è¯´ï¼Œåœ¨ES6ä¸­ï¼Œåªè¦ä½¿ç”¨å°¾é€’å½’ï¼Œå°±ä¸ä¼šå‘ç”Ÿæ ˆæº¢å‡ºï¼Œç›¸å¯¹èŠ‚çœå†…å­˜ã€‚</p>
<h3 id="é€’å½’å‡½æ•°çš„æ”¹å†™"><a href="#é€’å½’å‡½æ•°çš„æ”¹å†™" class="headerlink" title="é€’å½’å‡½æ•°çš„æ”¹å†™"></a>é€’å½’å‡½æ•°çš„æ”¹å†™</h3><p>å°¾é€’å½’çš„å®ç°ï¼Œå¾€å¾€éœ€è¦æ”¹å†™é€’å½’å‡½æ•°ï¼Œç¡®ä¿æœ€åä¸€æ­¥åªè°ƒç”¨è‡ªèº«ã€‚åšåˆ°è¿™ä¸€ç‚¹çš„æ–¹æ³•ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰ç”¨åˆ°çš„å†…éƒ¨å˜é‡æ”¹å†™æˆå‡½æ•°çš„å‚æ•°ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œé˜¶ä¹˜å‡½æ•° factorial éœ€è¦ç”¨åˆ°ä¸€ä¸ªä¸­é—´å˜é‡ total ï¼Œé‚£å°±æŠŠè¿™ä¸ªä¸­é—´å˜é‡æ”¹å†™æˆå‡½æ•°çš„å‚æ•°ã€‚è¿™æ ·åšçš„ç¼ºç‚¹å°±æ˜¯ä¸å¤ªç›´è§‚ï¼Œç¬¬ä¸€çœ¼å¾ˆéš¾çœ‹å‡ºæ¥ï¼Œä¸ºä»€ä¹ˆè®¡ç®—5çš„é˜¶ä¹˜ï¼Œéœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°5å’Œ1ï¼Ÿ</p>
<p>ä¸¤ä¸ªæ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ–¹æ³•ä¸€æ˜¯åœ¨å°¾é€’å½’å‡½æ•°ä¹‹å¤–ï¼Œå†æä¾›ä¸€ä¸ªæ­£å¸¸å½¢å¼çš„å‡½æ•°ã€‚</p>
<pre><code class="javascript">function tailFactorial(n, total) {
  if (n === 1) return total;
  return tailFactorial(n - 1, n * total);
}

function factorial(n) {
  return tailFactorial(n, 1);
}

factorial(5) // 120
</code></pre>
<p>ä¸Šé¢ä»£ç é€šè¿‡ä¸€ä¸ªæ­£å¸¸å½¢å¼çš„é˜¶ä¹˜å‡½æ•° factorial ï¼Œè°ƒç”¨å°¾é€’å½’å‡½æ•° tailFactorial ï¼Œçœ‹èµ·æ¥å°±æ­£å¸¸å¤šäº†ã€‚</p>
<p>å‡½æ•°å¼ç¼–ç¨‹æœ‰ä¸€ä¸ªæ¦‚å¿µï¼Œå«åšæŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰ï¼Œæ„æ€æ˜¯å°†å¤šå‚æ•°çš„å‡½æ•°è½¬æ¢æˆå•å‚æ•°çš„å½¢å¼ã€‚è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨æŸ¯é‡ŒåŒ–ã€‚</p>
<pre><code class="javascript">function currying(fn, n) {
  return function (m) {
    return fn.call(this, m, n);
  };
}

function tailFactorial(n, total) {
  if (n === 1) return total;
  return tailFactorial(n - 1, n * total);
}

const factorial = currying(tailFactorial, 1);

factorial(5) // 120
</code></pre>
<p>ä¸Šé¢ä»£ç é€šè¿‡æŸ¯é‡ŒåŒ–ï¼Œå°†å°¾é€’å½’å‡½æ•° tailFactorial å˜ä¸ºåªæ¥å—1ä¸ªå‚æ•°çš„ factorial ã€‚</p>
<p>ç¬¬äºŒç§æ–¹æ³•å°±ç®€å•å¤šäº†ï¼Œå°±æ˜¯é‡‡ç”¨ES6çš„å‡½æ•°é»˜è®¤å€¼ã€‚</p>
<pre><code class="javascript">function factorial(n, total = 1) {
  if (n === 1) return total;
  return factorial(n - 1, n * total);
}

factorial(5) // 120
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‚æ•° total æœ‰é»˜è®¤å€¼1ï¼Œæ‰€ä»¥è°ƒç”¨æ—¶ä¸ç”¨æä¾›è¿™ä¸ªå€¼ã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œé€’å½’æœ¬è´¨ä¸Šæ˜¯ä¸€ç§å¾ªç¯æ“ä½œã€‚çº¯ç²¹çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€æ²¡æœ‰å¾ªç¯æ“ä½œå‘½ä»¤ï¼Œæ‰€æœ‰çš„å¾ªç¯éƒ½ç”¨é€’å½’å®ç°ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå°¾é€’å½’å¯¹è¿™äº›è¯­è¨€æå…¶é‡è¦ã€‚å¯¹äºå…¶ä»–æ”¯æŒâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€çš„è¯­è¨€ï¼ˆæ¯”å¦‚Luaï¼ŒES6ï¼‰ï¼Œåªéœ€è¦çŸ¥é“å¾ªç¯å¯ä»¥ç”¨é€’å½’ä»£æ›¿ï¼Œè€Œä¸€æ—¦ä½¿ç”¨é€’å½’ï¼Œå°±æœ€å¥½ä½¿ç”¨å°¾é€’å½’ã€‚</p>
<h3 id="ä¸¥æ ¼æ¨¡å¼-1"><a href="#ä¸¥æ ¼æ¨¡å¼-1" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼</h3><p>ES6çš„å°¾è°ƒç”¨ä¼˜åŒ–åªåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¼€å¯ï¼Œæ­£å¸¸æ¨¡å¼æ˜¯æ— æ•ˆçš„ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºåœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œå‡½æ•°å†…éƒ¨æœ‰ä¸¤ä¸ªå˜é‡ï¼Œå¯ä»¥è·Ÿè¸ªå‡½æ•°çš„è°ƒç”¨æ ˆã€‚</p>
<ul>
<li><code>func.arguments</code>ï¼šè¿”å›è°ƒç”¨æ—¶å‡½æ•°çš„å‚æ•°ã€‚</li>
<li><code>func.caller</code>ï¼šè¿”å›è°ƒç”¨å½“å‰å‡½æ•°çš„é‚£ä¸ªå‡½æ•°ã€‚</li>
</ul>
<p>å°¾è°ƒç”¨ä¼˜åŒ–å‘ç”Ÿæ—¶ï¼Œå‡½æ•°çš„è°ƒç”¨æ ˆä¼šæ”¹å†™ï¼Œå› æ­¤ä¸Šé¢ä¸¤ä¸ªå˜é‡å°±ä¼šå¤±çœŸã€‚ä¸¥æ ¼æ¨¡å¼ç¦ç”¨è¿™ä¸¤ä¸ªå˜é‡ï¼Œæ‰€ä»¥å°¾è°ƒç”¨æ¨¡å¼ä»…åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ç”Ÿæ•ˆã€‚</p>
<pre><code class="javascript">function restricted() {
  &quot;use strict&quot;;
  restricted.caller;    // æŠ¥é”™
  restricted.arguments; // æŠ¥é”™
}
restricted();
</code></pre>
<h3 id="å°¾é€’å½’ä¼˜åŒ–çš„å®ç°"><a href="#å°¾é€’å½’ä¼˜åŒ–çš„å®ç°" class="headerlink" title="å°¾é€’å½’ä¼˜åŒ–çš„å®ç°"></a>å°¾é€’å½’ä¼˜åŒ–çš„å®ç°</h3><p>å°¾é€’å½’ä¼˜åŒ–åªåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ç”Ÿæ•ˆï¼Œé‚£ä¹ˆæ­£å¸¸æ¨¡å¼ä¸‹ï¼Œæˆ–è€…é‚£äº›ä¸æ”¯æŒè¯¥åŠŸèƒ½çš„ç¯å¢ƒä¸­ï¼Œæœ‰æ²¡æœ‰åŠæ³•ä¹Ÿä½¿ç”¨å°¾é€’å½’ä¼˜åŒ–å‘¢ï¼Ÿå›ç­”æ˜¯å¯ä»¥çš„ï¼Œå°±æ˜¯è‡ªå·±å®ç°å°¾é€’å½’ä¼˜åŒ–ã€‚</p>
<p>å®ƒçš„åŸç†éå¸¸ç®€å•ã€‚å°¾é€’å½’ä¹‹æ‰€ä»¥éœ€è¦ä¼˜åŒ–ï¼ŒåŸå› æ˜¯è°ƒç”¨æ ˆå¤ªå¤šï¼Œé€ æˆæº¢å‡ºï¼Œé‚£ä¹ˆåªè¦å‡å°‘è°ƒç”¨æ ˆï¼Œå°±ä¸ä¼šæº¢å‡ºã€‚æ€ä¹ˆåšå¯ä»¥å‡å°‘è°ƒç”¨æ ˆå‘¢ï¼Ÿå°±æ˜¯é‡‡ç”¨â€œå¾ªç¯â€æ¢æ‰â€œé€’å½’â€ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ­£å¸¸çš„é€’å½’å‡½æ•°ã€‚</p>
<pre><code class="javascript">function sum(x, y) {
  if (y &gt; 0) {
    return sum(x + 1, y - 1);
  } else {
    return x;
  }
}

sum(1, 100000)
// Uncaught RangeError: Maximum call stack size exceeded(â€¦)
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>sum</code>æ˜¯ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œå‚æ•°<code>x</code>æ˜¯éœ€è¦ç´¯åŠ çš„å€¼ï¼Œå‚æ•°<code>y</code>æ§åˆ¶é€’å½’æ¬¡æ•°ã€‚ä¸€æ—¦æŒ‡å®š<code>sum</code>é€’å½’100000æ¬¡ï¼Œå°±ä¼šæŠ¥é”™ï¼Œæç¤ºè¶…å‡ºè°ƒç”¨æ ˆçš„æœ€å¤§æ¬¡æ•°ã€‚</p>
<p>è¹¦åºŠå‡½æ•°ï¼ˆtrampolineï¼‰å¯ä»¥å°†é€’å½’æ‰§è¡Œè½¬ä¸ºå¾ªç¯æ‰§è¡Œã€‚</p>
<pre><code class="javascript">function trampoline(f) {
  while (f &amp;&amp; f instanceof Function) {
    f = f();
  }
  return f;
}
</code></pre>
<p>ä¸Šé¢å°±æ˜¯è¹¦åºŠå‡½æ•°çš„ä¸€ä¸ªå®ç°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°<code>f</code>ä½œä¸ºå‚æ•°ã€‚åªè¦<code>f</code>æ‰§è¡Œåè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå°±ç»§ç»­æ‰§è¡Œã€‚æ³¨æ„ï¼Œè¿™é‡Œæ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæ‰§è¡Œè¯¥å‡½æ•°ï¼Œè€Œä¸æ˜¯å‡½æ•°é‡Œé¢è°ƒç”¨å‡½æ•°ï¼Œè¿™æ ·å°±é¿å…äº†é€’å½’æ‰§è¡Œï¼Œä»è€Œå°±æ¶ˆé™¤äº†è°ƒç”¨æ ˆè¿‡å¤§çš„é—®é¢˜ã€‚</p>
<p>ç„¶åï¼Œè¦åšçš„å°±æ˜¯å°†åŸæ¥çš„é€’å½’å‡½æ•°ï¼Œæ”¹å†™ä¸ºæ¯ä¸€æ­¥è¿”å›å¦ä¸€ä¸ªå‡½æ•°ã€‚</p>
<pre><code class="javascript">function sum(x, y) {
  if (y &gt; 0) {
    return sum.bind(null, x + 1, y - 1);
  } else {
    return x;
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>sum</code>å‡½æ•°çš„æ¯æ¬¡æ‰§è¡Œï¼Œéƒ½ä¼šè¿”å›è‡ªèº«çš„å¦ä¸€ä¸ªç‰ˆæœ¬ã€‚</p>
<p>ç°åœ¨ï¼Œä½¿ç”¨è¹¦åºŠå‡½æ•°æ‰§è¡Œ<code>sum</code>ï¼Œå°±ä¸ä¼šå‘ç”Ÿè°ƒç”¨æ ˆæº¢å‡ºã€‚</p>
<pre><code class="javascript">trampoline(sum(1, 100000))
// 100001
</code></pre>
<p>è¹¦åºŠå‡½æ•°å¹¶ä¸æ˜¯çœŸæ­£çš„å°¾é€’å½’ä¼˜åŒ–ï¼Œä¸‹é¢çš„å®ç°æ‰æ˜¯ã€‚</p>
<pre><code class="javascript">function tco(f) {
  var value;
  var active = false;
  var accumulated = [];

  return function accumulator() {
    accumulated.push(arguments);
    if (!active) {
      active = true;
      while (accumulated.length) {
        value = f.apply(this, accumulated.shift());
      }
      active = false;
      return value;
    }
  };
}

var sum = tco(function(x, y) {
  if (y &gt; 0) {
    return sum(x + 1, y - 1)
  }
  else {
    return x
  }
});

sum(1, 100000)
// 100001
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>tco</code>å‡½æ•°æ˜¯å°¾é€’å½’ä¼˜åŒ–çš„å®ç°ï¼Œå®ƒçš„å¥¥å¦™å°±åœ¨äºçŠ¶æ€å˜é‡<code>active</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå˜é‡æ˜¯ä¸æ¿€æ´»çš„ã€‚ä¸€æ—¦è¿›å…¥å°¾é€’å½’ä¼˜åŒ–çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªå˜é‡å°±æ¿€æ´»äº†ã€‚ç„¶åï¼Œæ¯ä¸€è½®é€’å½’<code>sum</code>è¿”å›çš„éƒ½æ˜¯<code>undefined</code>ï¼Œæ‰€ä»¥å°±é¿å…äº†é€’å½’æ‰§è¡Œï¼›è€Œ<code>accumulated</code>æ•°ç»„å­˜æ”¾æ¯ä¸€è½®<code>sum</code>æ‰§è¡Œçš„å‚æ•°ï¼Œæ€»æ˜¯æœ‰å€¼çš„ï¼Œè¿™å°±ä¿è¯äº†<code>accumulator</code>å‡½æ•°å†…éƒ¨çš„<code>while</code>å¾ªç¯æ€»æ˜¯ä¼šæ‰§è¡Œã€‚è¿™æ ·å°±å¾ˆå·§å¦™åœ°å°†â€œé€’å½’â€æ”¹æˆäº†â€œå¾ªç¯â€ï¼Œè€Œåä¸€è½®çš„å‚æ•°ä¼šå–ä»£å‰ä¸€è½®çš„å‚æ•°ï¼Œä¿è¯äº†è°ƒç”¨æ ˆåªæœ‰ä¸€å±‚ã€‚</p>
<h2 id="å‡½æ•°å‚æ•°çš„å°¾é€—å·"><a href="#å‡½æ•°å‚æ•°çš„å°¾é€—å·" class="headerlink" title="å‡½æ•°å‚æ•°çš„å°¾é€—å·"></a>å‡½æ•°å‚æ•°çš„å°¾é€—å·</h2><p>ECMAScript 2017å°†<a href="https://github.com/jeffmo/es-trailing-function-commas" target="_blank" rel="external">å…è®¸</a>å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æœ‰å°¾é€—å·ï¼ˆtrailing commaï¼‰ã€‚</p>
<p>æ­¤å‰ï¼Œå‡½æ•°å®šä¹‰å’Œè°ƒç”¨æ—¶ï¼Œéƒ½ä¸å…è®¸æœ€åä¸€ä¸ªå‚æ•°åé¢å‡ºç°é€—å·ã€‚</p>
<pre><code class="javascript">function clownsEverywhere(
  param1,
  param2
) { /* ... */ }

clownsEverywhere(
  &#39;foo&#39;,
  &#39;bar&#39;
);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœåœ¨<code>param2</code>æˆ–<code>bar</code>åé¢åŠ ä¸€ä¸ªé€—å·ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<p>è¿™æ ·çš„è¯ï¼Œå¦‚æœä»¥åä¿®æ”¹ä»£ç ï¼Œæƒ³ä¸ºå‡½æ•°<code>clownsEverywhere</code>æ·»åŠ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå°±åŠ¿å¿…è¦åœ¨ç¬¬äºŒä¸ªå‚æ•°åé¢æ·»åŠ ä¸€ä¸ªé€—å·ã€‚è¿™å¯¹ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿæ¥è¯´ï¼Œå°±ä¼šæ˜¾ç¤ºï¼Œæ·»åŠ é€—å·çš„é‚£ä¸€è¡Œä¹Ÿå‘ç”Ÿäº†å˜åŠ¨ã€‚è¿™çœ‹ä¸Šå»æœ‰ç‚¹å†—ä½™ï¼Œå› æ­¤æ–°çš„è¯­æ³•å…è®¸å®šä¹‰å’Œè°ƒç”¨æ—¶ï¼Œå°¾éƒ¨ç›´æ¥æœ‰ä¸€ä¸ªé€—å·ã€‚</p>
<pre><code class="javascript">function clownsEverywhere(
  param1,
  param2,
) { /* ... */ }

clownsEverywhere(
  &#39;foo&#39;,
  &#39;bar&#39;,
);
</code></pre>
<blockquote>
<p>æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‡½æ•°çš„æ‰©å±•&quot;&gt;&lt;a href=&quot;#å‡½æ•°çš„æ‰©å±•&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°çš„æ‰©å±•&quot;&gt;&lt;/a&gt;å‡½æ•°çš„æ‰©å±•&lt;/h1&gt;&lt;h2 id=&quot;å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼&quot;&gt;&lt;a href=&quot;#å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼&quot; class=&quot;headerlink&quot; titl
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Function" scheme="https://microzz.com/tags/Function/"/>
    
  </entry>
  
  <entry>
    <title>æ•°ç»„çš„æ‰©å±•(Array)</title>
    <link href="https://microzz.com/2016/11/30/array/"/>
    <id>https://microzz.com/2016/11/30/array/</id>
    <published>2016-11-30T04:45:19.000Z</published>
    <updated>2017-08-21T11:31:58.232Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ•°ç»„çš„æ‰©å±•"><a href="#æ•°ç»„çš„æ‰©å±•" class="headerlink" title="æ•°ç»„çš„æ‰©å±•"></a>æ•°ç»„çš„æ‰©å±•</h1><h2 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from()"></a>Array.from()</h2><p><code>Array.from</code>æ–¹æ³•ç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆarray-like objectï¼‰å’Œå¯éå†ï¼ˆiterableï¼‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ES6æ–°å¢çš„æ•°æ®ç»“æ„Setå’ŒMapï¼‰ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œ<code>Array.from</code>å°†å®ƒè½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚</p>
<pre><code class="javascript">let arrayLike = {
    &#39;0&#39;: &#39;a&#39;,
    &#39;1&#39;: &#39;b&#39;,
    &#39;2&#39;: &#39;c&#39;,
    length: 3
};

// ES5çš„å†™æ³•
var arr1 = [].slice.call(arrayLike); // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]

// ES6çš„å†™æ³•
let arr2 = Array.from(arrayLike); // [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]
</code></pre>
<p>å®é™…åº”ç”¨ä¸­ï¼Œå¸¸è§çš„ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡æ˜¯DOMæ“ä½œè¿”å›çš„NodeListé›†åˆï¼Œä»¥åŠå‡½æ•°å†…éƒ¨çš„<code>arguments</code>å¯¹è±¡ã€‚<code>Array.from</code>éƒ½å¯ä»¥å°†å®ƒä»¬è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚</p>
<pre><code class="javascript">// NodeListå¯¹è±¡
let ps = document.querySelectorAll(&#39;p&#39;);
Array.from(ps).forEach(function (p) {
  console.log(p);
});

// argumentså¯¹è±¡
function foo() {
  var args = Array.from(arguments);
  // ...
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>querySelectorAll</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œåªæœ‰å°†è¿™ä¸ªå¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œæ‰èƒ½ä½¿ç”¨<code>forEach</code>æ–¹æ³•ã€‚</p>
<p>åªè¦æ˜¯éƒ¨ç½²äº†Iteratoræ¥å£çš„æ•°æ®ç»“æ„ï¼Œ<code>Array.from</code>éƒ½èƒ½å°†å…¶è½¬ä¸ºæ•°ç»„ã€‚</p>
<pre><code class="javascript">Array.from(&#39;hello&#39;)
// [&#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;]

let namesSet = new Set([&#39;a&#39;, &#39;b&#39;])
Array.from(namesSet) // [&#39;a&#39;, &#39;b&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²å’ŒSetç»“æ„éƒ½å…·æœ‰Iteratoræ¥å£ï¼Œå› æ­¤å¯ä»¥è¢«<code>Array.from</code>è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚</p>
<p>å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ï¼Œ<code>Array.from</code>ä¼šè¿”å›ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„æ–°æ•°ç»„ã€‚</p>
<pre><code class="javascript">Array.from([1, 2, 3])
// [1, 2, 3]
</code></pre>
<p>å€¼å¾—æé†’çš„æ˜¯ï¼Œæ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ä¹Ÿå¯ä»¥å°†æŸäº›æ•°æ®ç»“æ„è½¬ä¸ºæ•°ç»„ã€‚</p>
<pre><code class="javascript">// argumentså¯¹è±¡
function foo() {
  var args = [...arguments];
}

// NodeListå¯¹è±¡
[...document.querySelectorAll(&#39;div&#39;)]
</code></pre>
<p>æ‰©å±•è¿ç®—ç¬¦èƒŒåè°ƒç”¨çš„æ˜¯éå†å™¨æ¥å£ï¼ˆ<code>Symbol.iterator</code>ï¼‰ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ¥å£ï¼Œå°±æ— æ³•è½¬æ¢ã€‚<code>Array.from</code>æ–¹æ³•åˆ™æ˜¯è¿˜æ”¯æŒç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚æ‰€è°“ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œæœ¬è´¨ç‰¹å¾åªæœ‰ä¸€ç‚¹ï¼Œå³å¿…é¡»æœ‰<code>length</code>å±æ€§ã€‚å› æ­¤ï¼Œä»»ä½•æœ‰<code>length</code>å±æ€§çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥é€šè¿‡<code>Array.from</code>æ–¹æ³•è½¬ä¸ºæ•°ç»„ï¼Œè€Œæ­¤æ—¶æ‰©å±•è¿ç®—ç¬¦å°±æ— æ³•è½¬æ¢ã€‚</p>
<pre><code class="javascript">Array.from({ length: 3 });
// [ undefined, undefined, undefined ]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Array.from</code>è¿”å›äº†ä¸€ä¸ªå…·æœ‰ä¸‰ä¸ªæˆå‘˜çš„æ•°ç»„ï¼Œæ¯ä¸ªä½ç½®çš„å€¼éƒ½æ˜¯<code>undefined</code>ã€‚æ‰©å±•è¿ç®—ç¬¦è½¬æ¢ä¸äº†è¿™ä¸ªå¯¹è±¡ã€‚</p>
<p>å¯¹äºè¿˜æ²¡æœ‰éƒ¨ç½²è¯¥æ–¹æ³•çš„æµè§ˆå™¨ï¼Œå¯ä»¥ç”¨<code>Array.prototype.slice</code>æ–¹æ³•æ›¿ä»£ã€‚</p>
<pre><code class="javascript">const toArray = (() =&gt;
  Array.from ? Array.from : obj =&gt; [].slice.call(obj)
)();
</code></pre>
<p><code>Array.from</code>è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºæ•°ç»„çš„<code>map</code>æ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åçš„å€¼æ”¾å…¥è¿”å›çš„æ•°ç»„ã€‚</p>
<pre><code class="javascript">Array.from(arrayLike, x =&gt; x * x);
// ç­‰åŒäº
Array.from(arrayLike).map(x =&gt; x * x);

Array.from([1, 2, 3], (x) =&gt; x * x)
// [1, 4, 9]
</code></pre>
<p>ä¸‹é¢çš„ä¾‹å­æ˜¯å–å‡ºä¸€ç»„DOMèŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ã€‚</p>
<pre><code class="javascript">let spans = document.querySelectorAll(&#39;span.name&#39;);

// map()
let names1 = Array.prototype.map.call(spans, s =&gt; s.textContent);

// Array.from()
let names2 = Array.from(spans, s =&gt; s.textContent)
</code></pre>
<p>ä¸‹é¢çš„ä¾‹å­å°†æ•°ç»„ä¸­å¸ƒå°”å€¼ä¸º<code>false</code>çš„æˆå‘˜è½¬ä¸º<code>0</code>ã€‚</p>
<pre><code class="javascript">Array.from([1, , 2, , 3], (n) =&gt; n || 0)
// [1, 0, 2, 0, 3]
</code></pre>
<p>å¦ä¸€ä¸ªä¾‹å­æ˜¯è¿”å›å„ç§æ•°æ®çš„ç±»å‹ã€‚</p>
<pre><code class="javascript">function typesOf () {
  return Array.from(arguments, value =&gt; typeof value)
}
typesOf(null, [], NaN)
// [&#39;object&#39;, &#39;object&#39;, &#39;number&#39;]
</code></pre>
<p>å¦‚æœ<code>map</code>å‡½æ•°é‡Œé¢ç”¨åˆ°äº†<code>this</code>å…³é”®å­—ï¼Œè¿˜å¯ä»¥ä¼ å…¥<code>Array.from</code>çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®š<code>this</code>ã€‚</p>
<p><code>Array.from()</code>å¯ä»¥å°†å„ç§å€¼è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œå¹¶ä¸”è¿˜æä¾›<code>map</code>åŠŸèƒ½ã€‚è¿™å®é™…ä¸Šæ„å‘³ç€ï¼Œåªè¦æœ‰ä¸€ä¸ªåŸå§‹çš„æ•°æ®ç»“æ„ï¼Œä½ å°±å¯ä»¥å…ˆå¯¹å®ƒçš„å€¼è¿›è¡Œå¤„ç†ï¼Œç„¶åè½¬æˆè§„èŒƒçš„æ•°ç»„ç»“æ„ï¼Œè¿›è€Œå°±å¯ä»¥ä½¿ç”¨æ•°é‡ä¼—å¤šçš„æ•°ç»„æ–¹æ³•ã€‚</p>
<pre><code class="javascript">Array.from({ length: 2 }, () =&gt; &#39;jack&#39;)
// [&#39;jack&#39;, &#39;jack&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Array.from</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†ç¬¬äºŒä¸ªå‚æ•°è¿è¡Œçš„æ¬¡æ•°ã€‚è¿™ç§ç‰¹æ€§å¯ä»¥è®©è¯¥æ–¹æ³•çš„ç”¨æ³•å˜å¾—éå¸¸çµæ´»ã€‚</p>
<p><code>Array.from()</code>çš„å¦ä¸€ä¸ªåº”ç”¨æ˜¯ï¼Œå°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„ï¼Œç„¶åè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å› ä¸ºå®ƒèƒ½æ­£ç¡®å¤„ç†å„ç§Unicodeå­—ç¬¦ï¼Œå¯ä»¥é¿å…JavaScriptå°†å¤§äº<code>\uFFFF</code>çš„Unicodeå­—ç¬¦ï¼Œç®—ä½œä¸¤ä¸ªå­—ç¬¦çš„bugã€‚</p>
<pre><code class="javascript">function countSymbols(string) {
  return Array.from(string).length;
}
</code></pre>
<h2 id="Array-of"><a href="#Array-of" class="headerlink" title="Array.of()"></a>Array.of()</h2><p><code>Array.of</code>æ–¹æ³•ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚</p>
<pre><code class="javascript">Array.of(3, 11, 8) // [3,11,8]
Array.of(3) // [3]
Array.of(3).length // 1
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯å¼¥è¡¥æ•°ç»„æ„é€ å‡½æ•°<code>Array()</code>çš„ä¸è¶³ã€‚å› ä¸ºå‚æ•°ä¸ªæ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´<code>Array()</code>çš„è¡Œä¸ºæœ‰å·®å¼‚ã€‚</p>
<pre><code class="javascript">Array() // []
Array(3) // [, , ,]
Array(3, 11, 8) // [3, 11, 8]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Array</code>æ–¹æ³•æ²¡æœ‰å‚æ•°ã€ä¸€ä¸ªå‚æ•°ã€ä¸‰ä¸ªå‚æ•°æ—¶ï¼Œè¿”å›ç»“æœéƒ½ä¸ä¸€æ ·ã€‚åªæœ‰å½“å‚æ•°ä¸ªæ•°ä¸å°‘äº2ä¸ªæ—¶ï¼Œ<code>Array()</code>æ‰ä¼šè¿”å›ç”±å‚æ•°ç»„æˆçš„æ–°æ•°ç»„ã€‚å‚æ•°ä¸ªæ•°åªæœ‰ä¸€ä¸ªæ—¶ï¼Œå®é™…ä¸Šæ˜¯æŒ‡å®šæ•°ç»„çš„é•¿åº¦ã€‚</p>
<p><code>Array.of</code>åŸºæœ¬ä¸Šå¯ä»¥ç”¨æ¥æ›¿ä»£<code>Array()</code>æˆ–<code>new Array()</code>ï¼Œå¹¶ä¸”ä¸å­˜åœ¨ç”±äºå‚æ•°ä¸åŒè€Œå¯¼è‡´çš„é‡è½½ã€‚å®ƒçš„è¡Œä¸ºéå¸¸ç»Ÿä¸€ã€‚</p>
<pre><code class="javascript">Array.of() // []
Array.of(undefined) // [undefined]
Array.of(1) // [1]
Array.of(1, 2) // [1, 2]
</code></pre>
<p><code>Array.of</code>æ€»æ˜¯è¿”å›å‚æ•°å€¼ç»„æˆçš„æ•°ç»„ã€‚å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå°±è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚</p>
<p><code>Array.of</code>æ–¹æ³•å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿå®ç°ã€‚</p>
<pre><code class="javascript">function ArrayOf(){
  return [].slice.call(arguments);
}
</code></pre>
<h2 id="æ•°ç»„å®ä¾‹çš„copyWithin"><a href="#æ•°ç»„å®ä¾‹çš„copyWithin" class="headerlink" title="æ•°ç»„å®ä¾‹çš„copyWithin()"></a>æ•°ç»„å®ä¾‹çš„copyWithin()</h2><p>æ•°ç»„å®ä¾‹çš„<code>copyWithin</code>æ–¹æ³•ï¼Œåœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼ˆä¼šè¦†ç›–åŸæœ‰æˆå‘˜ï¼‰ï¼Œç„¶åè¿”å›å½“å‰æ•°ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¼šä¿®æ”¹å½“å‰æ•°ç»„ã€‚</p>
<pre><code class="javascript">Array.prototype.copyWithin(target, start = 0, end = this.length)
</code></pre>
<p>å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ã€‚</p>
<ul>
<li>targetï¼ˆå¿…éœ€ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹æ›¿æ¢æ•°æ®ã€‚</li>
<li>startï¼ˆå¯é€‰ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹è¯»å–æ•°æ®ï¼Œé»˜è®¤ä¸º0ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚</li>
<li>endï¼ˆå¯é€‰ï¼‰ï¼šåˆ°è¯¥ä½ç½®å‰åœæ­¢è¯»å–æ•°æ®ï¼Œé»˜è®¤ç­‰äºæ•°ç»„é•¿åº¦ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚</li>
</ul>
<p>è¿™ä¸‰ä¸ªå‚æ•°éƒ½åº”è¯¥æ˜¯æ•°å€¼ï¼Œå¦‚æœä¸æ˜¯ï¼Œä¼šè‡ªåŠ¨è½¬ä¸ºæ•°å€¼ã€‚</p>
<pre><code class="javascript">[1, 2, 3, 4, 5].copyWithin(0, 3)
// [4, 5, 3, 4, 5]
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºå°†ä»3å·ä½ç›´åˆ°æ•°ç»„ç»“æŸçš„æˆå‘˜ï¼ˆ4å’Œ5ï¼‰ï¼Œå¤åˆ¶åˆ°ä»0å·ä½å¼€å§‹çš„ä½ç½®ï¼Œç»“æœè¦†ç›–äº†åŸæ¥çš„1å’Œ2ã€‚</p>
<p>ä¸‹é¢æ˜¯æ›´å¤šä¾‹å­ã€‚</p>
<pre><code class="javascript">// å°†3å·ä½å¤åˆ¶åˆ°0å·ä½
[1, 2, 3, 4, 5].copyWithin(0, 3, 4)
// [4, 2, 3, 4, 5]

// -2ç›¸å½“äº3å·ä½ï¼Œ-1ç›¸å½“äº4å·ä½
[1, 2, 3, 4, 5].copyWithin(0, -2, -1)
// [4, 2, 3, 4, 5]

// å°†3å·ä½å¤åˆ¶åˆ°0å·ä½
[].copyWithin.call({length: 5, 3: 1}, 0, 3)
// {0: 1, 3: 1, length: 5}

// å°†2å·ä½åˆ°æ•°ç»„ç»“æŸï¼Œå¤åˆ¶åˆ°0å·ä½
var i32a = new Int32Array([1, 2, 3, 4, 5]);
i32a.copyWithin(0, 2);
// Int32Array [3, 4, 5, 4, 5]

// å¯¹äºæ²¡æœ‰éƒ¨ç½²TypedArrayçš„copyWithinæ–¹æ³•çš„å¹³å°
// éœ€è¦é‡‡ç”¨ä¸‹é¢çš„å†™æ³•
[].copyWithin.call(new Int32Array([1, 2, 3, 4, 5]), 0, 3, 4);
// Int32Array [4, 2, 3, 4, 5]
</code></pre>
<h2 id="æ•°ç»„å®ä¾‹çš„find-å’ŒfindIndex"><a href="#æ•°ç»„å®ä¾‹çš„find-å’ŒfindIndex" class="headerlink" title="æ•°ç»„å®ä¾‹çš„find()å’ŒfindIndex()"></a>æ•°ç»„å®ä¾‹çš„find()å’ŒfindIndex()</h2><p>æ•°ç»„å®ä¾‹çš„<code>find</code>æ–¹æ³•ï¼Œç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ï¼Œç›´åˆ°æ‰¾å‡ºç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸º<code>true</code>çš„æˆå‘˜ï¼Œç„¶åè¿”å›è¯¥æˆå‘˜ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›<code>undefined</code>ã€‚</p>
<pre><code class="javascript">[1, 4, -5, 10].find((n) =&gt; n &lt; 0)
// -5
</code></pre>
<p>ä¸Šé¢ä»£ç æ‰¾å‡ºæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå°äº0çš„æˆå‘˜ã€‚</p>
<pre><code class="javascript">[1, 5, 10, 15].find(function(value, index, arr) {
  return value &gt; 9;
}) // 10
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>find</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°å¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºå½“å‰çš„å€¼ã€å½“å‰çš„ä½ç½®å’ŒåŸæ•°ç»„ã€‚</p>
<p>æ•°ç»„å®ä¾‹çš„<code>findIndex</code>æ–¹æ³•çš„ç”¨æ³•ä¸<code>find</code>æ–¹æ³•éå¸¸ç±»ä¼¼ï¼Œè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æœæ‰€æœ‰æˆå‘˜éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å›<code>-1</code>ã€‚</p>
<pre><code class="javascript">[1, 5, 10, 15].findIndex(function(value, index, arr) {
  return value &gt; 9;
}) // 2
</code></pre>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå›è°ƒå‡½æ•°çš„<code>this</code>å¯¹è±¡ã€‚</p>
<p>å¦å¤–ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å‘ç°<code>NaN</code>ï¼Œå¼¥è¡¥äº†æ•°ç»„çš„<code>IndexOf</code>æ–¹æ³•çš„ä¸è¶³ã€‚</p>
<pre><code class="javascript">[NaN].indexOf(NaN)
// -1

[NaN].findIndex(y =&gt; Object.is(NaN, y))
// 0
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>indexOf</code>æ–¹æ³•æ— æ³•è¯†åˆ«æ•°ç»„çš„<code>NaN</code>æˆå‘˜ï¼Œä½†æ˜¯<code>findIndex</code>æ–¹æ³•å¯ä»¥å€ŸåŠ©<code>Object.is</code>æ–¹æ³•åšåˆ°ã€‚</p>
<h2 id="æ•°ç»„å®ä¾‹çš„fill"><a href="#æ•°ç»„å®ä¾‹çš„fill" class="headerlink" title="æ•°ç»„å®ä¾‹çš„fill()"></a>æ•°ç»„å®ä¾‹çš„fill()</h2><p><code>fill</code>æ–¹æ³•ä½¿ç”¨ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„ã€‚</p>
<pre><code class="javascript">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;].fill(7)
// [7, 7, 7]

new Array(3).fill(7)
// [7, 7, 7]
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨æ˜ï¼Œ<code>fill</code>æ–¹æ³•ç”¨äºç©ºæ•°ç»„çš„åˆå§‹åŒ–éå¸¸æ–¹ä¾¿ã€‚æ•°ç»„ä¸­å·²æœ‰çš„å…ƒç´ ï¼Œä¼šè¢«å…¨éƒ¨æŠ¹å»ã€‚</p>
<p><code>fill</code>æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚</p>
<pre><code class="javascript">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;].fill(7, 1, 2)
// [&#39;a&#39;, 7, &#39;c&#39;]
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œ<code>fill</code>æ–¹æ³•ä»1å·ä½å¼€å§‹ï¼Œå‘åŸæ•°ç»„å¡«å……7ï¼Œåˆ°2å·ä½ä¹‹å‰ç»“æŸã€‚</p>
<h2 id="æ•°ç»„å®ä¾‹çš„entries-ï¼Œkeys-å’Œvalues"><a href="#æ•°ç»„å®ä¾‹çš„entries-ï¼Œkeys-å’Œvalues" class="headerlink" title="æ•°ç»„å®ä¾‹çš„entries()ï¼Œkeys()å’Œvalues()"></a>æ•°ç»„å®ä¾‹çš„entries()ï¼Œkeys()å’Œvalues()</h2><p>ES6æä¾›ä¸‰ä¸ªæ–°çš„æ–¹æ³•â€”â€”<code>entries()</code>ï¼Œ<code>keys()</code>å’Œ<code>values()</code>â€”â€”ç”¨äºéå†æ•°ç»„ã€‚å®ƒä»¬éƒ½è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼ˆè¯¦è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œå¯ä»¥ç”¨<code>for...of</code>å¾ªç¯è¿›è¡Œéå†ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯<code>keys()</code>æ˜¯å¯¹é”®åçš„éå†ã€<code>values()</code>æ˜¯å¯¹é”®å€¼çš„éå†ï¼Œ<code>entries()</code>æ˜¯å¯¹é”®å€¼å¯¹çš„éå†ã€‚</p>
<pre><code class="javascript">for (let index of [&#39;a&#39;, &#39;b&#39;].keys()) {
  console.log(index);
}
// 0
// 1

for (let elem of [&#39;a&#39;, &#39;b&#39;].values()) {
  console.log(elem);
}
// &#39;a&#39;
// &#39;b&#39;

for (let [index, elem] of [&#39;a&#39;, &#39;b&#39;].entries()) {
  console.log(index, elem);
}
// 0 &quot;a&quot;
// 1 &quot;b&quot;
</code></pre>
<p>å¦‚æœä¸ä½¿ç”¨<code>for...of</code>å¾ªç¯ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œè¿›è¡Œéå†ã€‚</p>
<pre><code class="javascript">let letter = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;];
let entries = letter.entries();
console.log(entries.next().value); // [0, &#39;a&#39;]
console.log(entries.next().value); // [1, &#39;b&#39;]
console.log(entries.next().value); // [2, &#39;c&#39;]
</code></pre>
<h2 id="æ•°ç»„å®ä¾‹çš„includes"><a href="#æ•°ç»„å®ä¾‹çš„includes" class="headerlink" title="æ•°ç»„å®ä¾‹çš„includes()"></a>æ•°ç»„å®ä¾‹çš„includes()</h2><p><code>Array.prototype.includes</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œä¸å­—ç¬¦ä¸²çš„<code>includes</code>æ–¹æ³•ç±»ä¼¼ã€‚è¯¥æ–¹æ³•å±äºES7ï¼Œä½†Babelè½¬ç å™¨å·²ç»æ”¯æŒã€‚</p>
<pre><code class="javascript">[1, 2, 3].includes(2);     // true
[1, 2, 3].includes(4);     // false
[1, 2, NaN].includes(NaN); // true
</code></pre>
<p>è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœç´¢çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º0ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¡¨ç¤ºå€’æ•°çš„ä½ç½®ï¼Œå¦‚æœè¿™æ—¶å®ƒå¤§äºæ•°ç»„é•¿åº¦ï¼ˆæ¯”å¦‚ç¬¬äºŒä¸ªå‚æ•°ä¸º-4ï¼Œä½†æ•°ç»„é•¿åº¦ä¸º3ï¼‰ï¼Œåˆ™ä¼šé‡ç½®ä¸ºä»0å¼€å§‹ã€‚</p>
<pre><code class="javascript">[1, 2, 3].includes(3, 3);  // false
[1, 2, 3].includes(3, -1); // true
</code></pre>
<p>æ²¡æœ‰è¯¥æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ•°ç»„çš„<code>indexOf</code>æ–¹æ³•ï¼Œæ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªå€¼ã€‚</p>
<pre><code class="javascript">if (arr.indexOf(el) !== -1) {
  // ...
}
</code></pre>
<p><code>indexOf</code>æ–¹æ³•æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼Œä¸€æ˜¯ä¸å¤Ÿè¯­ä¹‰åŒ–ï¼Œå®ƒçš„å«ä¹‰æ˜¯æ‰¾åˆ°å‚æ•°å€¼çš„ç¬¬ä¸€ä¸ªå‡ºç°ä½ç½®ï¼Œæ‰€ä»¥è¦å»æ¯”è¾ƒæ˜¯å¦ä¸ç­‰äº-1ï¼Œè¡¨è¾¾èµ·æ¥ä¸å¤Ÿç›´è§‚ã€‚äºŒæ˜¯ï¼Œå®ƒå†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸å½“è¿ç®—ç¬¦ï¼ˆ===ï¼‰è¿›è¡Œåˆ¤æ–­ï¼Œè¿™ä¼šå¯¼è‡´å¯¹<code>NaN</code>çš„è¯¯åˆ¤ã€‚</p>
<pre><code class="javascript">[NaN].indexOf(NaN)
// -1
</code></pre>
<p><code>includes</code>ä½¿ç”¨çš„æ˜¯ä¸ä¸€æ ·çš„åˆ¤æ–­ç®—æ³•ï¼Œå°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚</p>
<pre><code class="javascript">[NaN].includes(NaN)
// true
</code></pre>
<p>ä¸‹é¢ä»£ç ç”¨æ¥æ£€æŸ¥å½“å‰ç¯å¢ƒæ˜¯å¦æ”¯æŒè¯¥æ–¹æ³•ï¼Œå¦‚æœä¸æ”¯æŒï¼Œéƒ¨ç½²ä¸€ä¸ªç®€æ˜“çš„æ›¿ä»£ç‰ˆæœ¬ã€‚</p>
<pre><code class="javascript">const contains = (() =&gt;
  Array.prototype.includes
    ? (arr, value) =&gt; arr.includes(value)
    : (arr, value) =&gt; arr.some(el =&gt; el === value)
)();
contains([&quot;foo&quot;, &quot;bar&quot;], &quot;baz&quot;); // =&gt; false
</code></pre>
<p>å¦å¤–ï¼ŒMapå’ŒSetæ•°æ®ç»“æ„æœ‰ä¸€ä¸ª<code>has</code>æ–¹æ³•ï¼Œéœ€è¦æ³¨æ„ä¸<code>includes</code>åŒºåˆ†ã€‚</p>
<ul>
<li>Mapç»“æ„çš„<code>has</code>æ–¹æ³•ï¼Œæ˜¯ç”¨æ¥æŸ¥æ‰¾é”®åçš„ï¼Œæ¯”å¦‚<code>Map.prototype.has(key)</code>ã€<code>WeakMap.prototype.has(key)</code>ã€<code>Reflect.has(target, propertyKey)</code>ã€‚</li>
<li>Setç»“æ„çš„<code>has</code>æ–¹æ³•ï¼Œæ˜¯ç”¨æ¥æŸ¥æ‰¾å€¼çš„ï¼Œæ¯”å¦‚<code>Set.prototype.has(value)</code>ã€<code>WeakSet.prototype.has(value)</code>ã€‚</li>
</ul>
<h2 id="æ•°ç»„çš„ç©ºä½"><a href="#æ•°ç»„çš„ç©ºä½" class="headerlink" title="æ•°ç»„çš„ç©ºä½"></a>æ•°ç»„çš„ç©ºä½</h2><p>æ•°ç»„çš„ç©ºä½æŒ‡ï¼Œæ•°ç»„çš„æŸä¸€ä¸ªä½ç½®æ²¡æœ‰ä»»ä½•å€¼ã€‚æ¯”å¦‚ï¼Œ<code>Array</code>æ„é€ å‡½æ•°è¿”å›çš„æ•°ç»„éƒ½æ˜¯ç©ºä½ã€‚</p>
<pre><code class="javascript">Array(3) // [, , ,]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Array(3)</code>è¿”å›ä¸€ä¸ªå…·æœ‰3ä¸ªç©ºä½çš„æ•°ç»„ã€‚</p>
<p>æ³¨æ„ï¼Œç©ºä½ä¸æ˜¯<code>undefined</code>ï¼Œä¸€ä¸ªä½ç½®çš„å€¼ç­‰äº<code>undefined</code>ï¼Œä¾ç„¶æ˜¯æœ‰å€¼çš„ã€‚ç©ºä½æ˜¯æ²¡æœ‰ä»»ä½•å€¼ï¼Œ<code>in</code>è¿ç®—ç¬¦å¯ä»¥è¯´æ˜è¿™ä¸€ç‚¹ã€‚</p>
<pre><code class="javascript">0 in [undefined, undefined, undefined] // true
0 in [, , ,] // false
</code></pre>
<p>ä¸Šé¢ä»£ç è¯´æ˜ï¼Œç¬¬ä¸€ä¸ªæ•°ç»„çš„0å·ä½ç½®æ˜¯æœ‰å€¼çš„ï¼Œç¬¬äºŒä¸ªæ•°ç»„çš„0å·ä½ç½®æ²¡æœ‰å€¼ã€‚</p>
<p>ES5å¯¹ç©ºä½çš„å¤„ç†ï¼Œå·²ç»å¾ˆä¸ä¸€è‡´äº†ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¼šå¿½ç•¥ç©ºä½ã€‚</p>
<ul>
<li><code>forEach()</code>, <code>filter()</code>, <code>every()</code> å’Œ<code>some()</code>éƒ½ä¼šè·³è¿‡ç©ºä½ã€‚</li>
<li><code>map()</code>ä¼šè·³è¿‡ç©ºä½ï¼Œä½†ä¼šä¿ç•™è¿™ä¸ªå€¼</li>
<li><code>join()</code>å’Œ<code>toString()</code>ä¼šå°†ç©ºä½è§†ä¸º<code>undefined</code>ï¼Œè€Œ<code>undefined</code>å’Œ<code>null</code>ä¼šè¢«å¤„ç†æˆç©ºå­—ç¬¦ä¸²ã€‚</li>
</ul>
<pre><code class="javascript">// forEachæ–¹æ³•
[,&#39;a&#39;].forEach((x,i) =&gt; console.log(i)); // 1

// filteræ–¹æ³•
[&#39;a&#39;,,&#39;b&#39;].filter(x =&gt; true) // [&#39;a&#39;,&#39;b&#39;]

// everyæ–¹æ³•
[,&#39;a&#39;].every(x =&gt; x===&#39;a&#39;) // true

// someæ–¹æ³•
[,&#39;a&#39;].some(x =&gt; x !== &#39;a&#39;) // false

// mapæ–¹æ³•
[,&#39;a&#39;].map(x =&gt; 1) // [,1]

// joinæ–¹æ³•
[,&#39;a&#39;,undefined,null].join(&#39;#&#39;) // &quot;#a##&quot;

// toStringæ–¹æ³•
[,&#39;a&#39;,undefined,null].toString() // &quot;,a,,&quot;
</code></pre>
<p>ES6åˆ™æ˜¯æ˜ç¡®å°†ç©ºä½è½¬ä¸º<code>undefined</code>ã€‚</p>
<p><code>Array.from</code>æ–¹æ³•ä¼šå°†æ•°ç»„çš„ç©ºä½ï¼Œè½¬ä¸º<code>undefined</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šå¿½ç•¥ç©ºä½ã€‚</p>
<pre><code class="javascript">Array.from([&#39;a&#39;,,&#39;b&#39;])
// [ &quot;a&quot;, undefined, &quot;b&quot; ]
</code></pre>
<p>æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ä¹Ÿä¼šå°†ç©ºä½è½¬ä¸º<code>undefined</code>ã€‚</p>
<pre><code class="javascript">[...[&#39;a&#39;,,&#39;b&#39;]]
// [ &quot;a&quot;, undefined, &quot;b&quot; ]
</code></pre>
<p><code>copyWithin()</code>ä¼šè¿ç©ºä½ä¸€èµ·æ‹·è´ã€‚</p>
<pre><code class="javascript">[,&#39;a&#39;,&#39;b&#39;,,].copyWithin(2,0) // [,&quot;a&quot;,,&quot;a&quot;]
</code></pre>
<p><code>fill()</code>ä¼šå°†ç©ºä½è§†ä¸ºæ­£å¸¸çš„æ•°ç»„ä½ç½®ã€‚</p>
<pre><code class="javascript">new Array(3).fill(&#39;a&#39;) // [&quot;a&quot;,&quot;a&quot;,&quot;a&quot;]
</code></pre>
<p><code>for...of</code>å¾ªç¯ä¹Ÿä¼šéå†ç©ºä½ã€‚</p>
<pre><code class="javascript">let arr = [, ,];
for (let i of arr) {
  console.log(1);
}
// 1
// 1
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„<code>arr</code>æœ‰ä¸¤ä¸ªç©ºä½ï¼Œ<code>for...of</code>å¹¶æ²¡æœ‰å¿½ç•¥å®ƒä»¬ã€‚å¦‚æœæ”¹æˆ<code>map</code>æ–¹æ³•éå†ï¼Œç©ºä½æ˜¯ä¼šè·³è¿‡çš„ã€‚</p>
<p><code>entries()</code>ã€<code>keys()</code>ã€<code>values()</code>ã€<code>find()</code>å’Œ<code>findIndex()</code>ä¼šå°†ç©ºä½å¤„ç†æˆ<code>undefined</code>ã€‚</p>
<pre><code class="javascript">// entries()
[...[,&#39;a&#39;].entries()] // [[0,undefined], [1,&quot;a&quot;]]

// keys()
[...[,&#39;a&#39;].keys()] // [0,1]

// values()
[...[,&#39;a&#39;].values()] // [undefined,&quot;a&quot;]

// find()
[,&#39;a&#39;].find(x =&gt; true) // undefined

// findIndex()
[,&#39;a&#39;].findIndex(x =&gt; true) // 0
</code></pre>
<p>ç”±äºç©ºä½çš„å¤„ç†è§„åˆ™éå¸¸ä¸ç»Ÿä¸€ï¼Œæ‰€ä»¥å»ºè®®é¿å…å‡ºç°ç©ºä½ã€‚</p>
<blockquote>
<p>æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ•°ç»„çš„æ‰©å±•&quot;&gt;&lt;a href=&quot;#æ•°ç»„çš„æ‰©å±•&quot; class=&quot;headerlink&quot; title=&quot;æ•°ç»„çš„æ‰©å±•&quot;&gt;&lt;/a&gt;æ•°ç»„çš„æ‰©å±•&lt;/h1&gt;&lt;h2 id=&quot;Array-from&quot;&gt;&lt;a href=&quot;#Array-from&quot; class=&quot;headerlink&quot; 
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Array" scheme="https://microzz.com/tags/Array/"/>
    
  </entry>
  
  <entry>
    <title>æ•°å€¼çš„æ‰©å±•</title>
    <link href="https://microzz.com/2016/11/25/number/"/>
    <id>https://microzz.com/2016/11/25/number/</id>
    <published>2016-11-25T09:45:19.000Z</published>
    <updated>2017-01-12T07:59:12.254Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ•°å€¼çš„æ‰©å±•"><a href="#æ•°å€¼çš„æ‰©å±•" class="headerlink" title="æ•°å€¼çš„æ‰©å±•"></a>æ•°å€¼çš„æ‰©å±•</h1><h2 id="äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶è¡¨ç¤ºæ³•"><a href="#äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶è¡¨ç¤ºæ³•" class="headerlink" title="äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶è¡¨ç¤ºæ³•"></a>äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶è¡¨ç¤ºæ³•</h2><p>ES6æä¾›äº†äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶æ•°å€¼çš„æ–°çš„å†™æ³•ï¼Œåˆ†åˆ«ç”¨å‰ç¼€<code>0b</code>ï¼ˆæˆ–<code>0B</code>ï¼‰å’Œ<code>0o</code>ï¼ˆæˆ–<code>0O</code>ï¼‰è¡¨ç¤ºã€‚</p>
<pre><code class="javascript">0b111110111 === 503 // true
0o767 === 503 // true
</code></pre>
<p>ä»ES5å¼€å§‹ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¹‹ä¸­ï¼Œå…«è¿›åˆ¶å°±ä¸å†å…è®¸ä½¿ç”¨å‰ç¼€<code>0</code>è¡¨ç¤ºï¼ŒES6è¿›ä¸€æ­¥æ˜ç¡®ï¼Œè¦ä½¿ç”¨å‰ç¼€<code>0o</code>è¡¨ç¤ºã€‚</p>
<pre><code class="javascript">// éä¸¥æ ¼æ¨¡å¼
(function(){
  console.log(0o11 === 011);
})() // true

// ä¸¥æ ¼æ¨¡å¼
(function(){
  &#39;use strict&#39;;
  console.log(0o11 === 011);
})() // Uncaught SyntaxError: Octal literals are not allowed in strict mode.
</code></pre>
<p>å¦‚æœè¦å°†<code>0b</code>å’Œ<code>0o</code>å‰ç¼€çš„å­—ç¬¦ä¸²æ•°å€¼è½¬ä¸ºåè¿›åˆ¶ï¼Œè¦ä½¿ç”¨<code>Number</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">Number(&#39;0b111&#39;)  // 7
Number(&#39;0o10&#39;)  // 8
</code></pre>
<h2 id="Number-isFinite-Number-isNaN"><a href="#Number-isFinite-Number-isNaN" class="headerlink" title="Number.isFinite(), Number.isNaN()"></a>Number.isFinite(), Number.isNaN()</h2><p>ES6åœ¨Numberå¯¹è±¡ä¸Šï¼Œæ–°æä¾›äº†<code>Number.isFinite()</code>å’Œ<code>Number.isNaN()</code>ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
<p><code>Number.isFinite()</code>ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªæ•°å€¼æ˜¯å¦ä¸ºæœ‰é™çš„ï¼ˆfiniteï¼‰ã€‚</p>
<pre><code class="javascript">Number.isFinite(15); // true
Number.isFinite(0.8); // true
Number.isFinite(NaN); // false
Number.isFinite(Infinity); // false
Number.isFinite(-Infinity); // false
Number.isFinite(&#39;foo&#39;); // false
Number.isFinite(&#39;15&#39;); // false
Number.isFinite(true); // false
</code></pre>
<p>ES5å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œéƒ¨ç½²<code>Number.isFinite</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">(function (global) {
  var global_isFinite = global.isFinite;

  Object.defineProperty(Number, &#39;isFinite&#39;, {
    value: function isFinite(value) {
      return typeof value === &#39;number&#39; &amp;&amp; global_isFinite(value);
    },
    configurable: true,
    enumerable: false,
    writable: true
  });
})(this);
</code></pre>
<p><code>Number.isNaN()</code>ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º<code>NaN</code>ã€‚</p>
<pre><code class="javascript">Number.isNaN(NaN) // true
Number.isNaN(15) // false
Number.isNaN(&#39;15&#39;) // false
Number.isNaN(true) // false
Number.isNaN(9/NaN) // true
Number.isNaN(&#39;true&#39;/0) // true
Number.isNaN(&#39;true&#39;/&#39;true&#39;) // true
</code></pre>
<p>ES5é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œéƒ¨ç½²<code>Number.isNaN()</code>ã€‚</p>
<pre><code class="javascript">(function (global) {
  var global_isNaN = global.isNaN;

  Object.defineProperty(Number, &#39;isNaN&#39;, {
    value: function isNaN(value) {
      return typeof value === &#39;number&#39; &amp;&amp; global_isNaN(value);
    },
    configurable: true,
    enumerable: false,
    writable: true
  });
})(this);
</code></pre>
<p>å®ƒä»¬ä¸ä¼ ç»Ÿçš„å…¨å±€æ–¹æ³•<code>isFinite()</code>å’Œ<code>isNaN()</code>çš„åŒºåˆ«åœ¨äºï¼Œä¼ ç»Ÿæ–¹æ³•å…ˆè°ƒç”¨<code>Number()</code>å°†éæ•°å€¼çš„å€¼è½¬ä¸ºæ•°å€¼ï¼Œå†è¿›è¡Œåˆ¤æ–­ï¼Œè€Œè¿™ä¸¤ä¸ªæ–°æ–¹æ³•åªå¯¹æ•°å€¼æœ‰æ•ˆï¼Œéæ•°å€¼ä¸€å¾‹è¿”å›<code>false</code>ã€‚</p>
<pre><code class="javascript">isFinite(25) // true
isFinite(&quot;25&quot;) // true
Number.isFinite(25) // true
Number.isFinite(&quot;25&quot;) // false

isNaN(NaN) // true
isNaN(&quot;NaN&quot;) // true
Number.isNaN(NaN) // true
Number.isNaN(&quot;NaN&quot;) // false
</code></pre>
<h2 id="Number-parseInt-Number-parseFloat"><a href="#Number-parseInt-Number-parseFloat" class="headerlink" title="Number.parseInt(), Number.parseFloat()"></a>Number.parseInt(), Number.parseFloat()</h2><p>ES6å°†å…¨å±€æ–¹æ³•<code>parseInt()</code>å’Œ<code>parseFloat()</code>ï¼Œç§»æ¤åˆ°Numberå¯¹è±¡ä¸Šé¢ï¼Œè¡Œä¸ºå®Œå…¨ä¿æŒä¸å˜ã€‚</p>
<pre><code class="javascript">// ES5çš„å†™æ³•
parseInt(&#39;12.34&#39;) // 12
parseFloat(&#39;123.45#&#39;) // 123.45

// ES6çš„å†™æ³•
Number.parseInt(&#39;12.34&#39;) // 12
Number.parseFloat(&#39;123.45#&#39;) // 123.45
</code></pre>
<p>è¿™æ ·åšçš„ç›®çš„ï¼Œæ˜¯é€æ­¥å‡å°‘å…¨å±€æ€§æ–¹æ³•ï¼Œä½¿å¾—è¯­è¨€é€æ­¥æ¨¡å—åŒ–ã€‚</p>
<pre><code class="javascript">Number.parseInt === parseInt // true
Number.parseFloat === parseFloat // true
</code></pre>
<h2 id="Number-isInteger"><a href="#Number-isInteger" class="headerlink" title="Number.isInteger()"></a>Number.isInteger()</h2><p><code>Number.isInteger()</code>ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•´æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨JavaScriptå†…éƒ¨ï¼Œæ•´æ•°å’Œæµ®ç‚¹æ•°æ˜¯åŒæ ·çš„å‚¨å­˜æ–¹æ³•ï¼Œæ‰€ä»¥3å’Œ3.0è¢«è§†ä¸ºåŒä¸€ä¸ªå€¼ã€‚</p>
<pre><code class="javascript">Number.isInteger(25) // true
Number.isInteger(25.0) // true
Number.isInteger(25.1) // false
Number.isInteger(&quot;15&quot;) // false
Number.isInteger(true) // false
</code></pre>
<p>ES5å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œéƒ¨ç½²<code>Number.isInteger()</code>ã€‚</p>
<pre><code class="javascript">(function (global) {
  var floor = Math.floor,
    isFinite = global.isFinite;

  Object.defineProperty(Number, &#39;isInteger&#39;, {
    value: function isInteger(value) {
      return typeof value === &#39;number&#39; &amp;&amp; isFinite(value) &amp;&amp;
        value &gt; -9007199254740992 &amp;&amp; value &lt; 9007199254740992 &amp;&amp;
        floor(value) === value;
    },
    configurable: true,
    enumerable: false,
    writable: true
  });
})(this);
</code></pre>
<h2 id="Number-EPSILON"><a href="#Number-EPSILON" class="headerlink" title="Number.EPSILON"></a>Number.EPSILON</h2><p>ES6åœ¨Numberå¯¹è±¡ä¸Šé¢ï¼Œæ–°å¢ä¸€ä¸ªæå°çš„å¸¸é‡<code>Number.EPSILON</code>ã€‚</p>
<pre><code class="javascript">Number.EPSILON
// 2.220446049250313e-16
Number.EPSILON.toFixed(20)
// &#39;0.00000000000000022204&#39;
</code></pre>
<p>å¼•å…¥ä¸€ä¸ªè¿™ä¹ˆå°çš„é‡çš„ç›®çš„ï¼Œåœ¨äºä¸ºæµ®ç‚¹æ•°è®¡ç®—ï¼Œè®¾ç½®ä¸€ä¸ªè¯¯å·®èŒƒå›´ã€‚æˆ‘ä»¬çŸ¥é“æµ®ç‚¹æ•°è®¡ç®—æ˜¯ä¸ç²¾ç¡®çš„ã€‚</p>
<pre><code class="javascript">0.1 + 0.2
// 0.30000000000000004

0.1 + 0.2 - 0.3
// 5.551115123125783e-17

5.551115123125783e-17.toFixed(20)
// &#39;0.00000000000000005551&#39;
</code></pre>
<p>ä½†æ˜¯å¦‚æœè¿™ä¸ªè¯¯å·®èƒ½å¤Ÿå°äº<code>Number.EPSILON</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºå¾—åˆ°äº†æ­£ç¡®ç»“æœã€‚</p>
<pre><code class="javascript">5.551115123125783e-17 &lt; Number.EPSILON
// true
</code></pre>
<p>å› æ­¤ï¼Œ<code>Number.EPSILON</code>çš„å®è´¨æ˜¯ä¸€ä¸ªå¯ä»¥æ¥å—çš„è¯¯å·®èŒƒå›´ã€‚</p>
<pre><code class="javascript">function withinErrorMargin (left, right) {
  return Math.abs(left - right) &lt; Number.EPSILON;
}
withinErrorMargin(0.1 + 0.2, 0.3)
// true
withinErrorMargin(0.2 + 0.2, 0.3)
// false
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä¸ºæµ®ç‚¹æ•°è¿ç®—ï¼Œéƒ¨ç½²äº†ä¸€ä¸ªè¯¯å·®æ£€æŸ¥å‡½æ•°ã€‚</p>
<h2 id="å®‰å…¨æ•´æ•°å’ŒNumber-isSafeInteger"><a href="#å®‰å…¨æ•´æ•°å’ŒNumber-isSafeInteger" class="headerlink" title="å®‰å…¨æ•´æ•°å’ŒNumber.isSafeInteger()"></a>å®‰å…¨æ•´æ•°å’ŒNumber.isSafeInteger()</h2><p>JavaScriptèƒ½å¤Ÿå‡†ç¡®è¡¨ç¤ºçš„æ•´æ•°èŒƒå›´åœ¨<code>-2^53</code>åˆ°<code>2^53</code>ä¹‹é—´ï¼ˆä¸å«ä¸¤ä¸ªç«¯ç‚¹ï¼‰ï¼Œè¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œæ— æ³•ç²¾ç¡®è¡¨ç¤ºè¿™ä¸ªå€¼ã€‚</p>
<pre><code class="javascript">Math.pow(2, 53) // 9007199254740992

9007199254740992  // 9007199254740992
9007199254740993  // 9007199254740992

Math.pow(2, 53) === Math.pow(2, 53) + 1
// true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè¶…å‡º2çš„53æ¬¡æ–¹ä¹‹åï¼Œä¸€ä¸ªæ•°å°±ä¸ç²¾ç¡®äº†ã€‚</p>
<p>ES6å¼•å…¥äº†<code>Number.MAX_SAFE_INTEGER</code>å’Œ<code>Number.MIN_SAFE_INTEGER</code>è¿™ä¸¤ä¸ªå¸¸é‡ï¼Œç”¨æ¥è¡¨ç¤ºè¿™ä¸ªèŒƒå›´çš„ä¸Šä¸‹é™ã€‚</p>
<pre><code class="javascript">Number.MAX_SAFE_INTEGER === Math.pow(2, 53) - 1
// true
Number.MAX_SAFE_INTEGER === 9007199254740991
// true

Number.MIN_SAFE_INTEGER === -Number.MAX_SAFE_INTEGER
// true
Number.MIN_SAFE_INTEGER === -9007199254740991
// true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ°JavaScriptèƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºçš„æé™ã€‚</p>
<p><code>Number.isSafeInteger()</code>åˆ™æ˜¯ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦è½åœ¨è¿™ä¸ªèŒƒå›´ä¹‹å†…ã€‚</p>
<pre><code class="javascript">Number.isSafeInteger(&#39;a&#39;) // false
Number.isSafeInteger(null) // false
Number.isSafeInteger(NaN) // false
Number.isSafeInteger(Infinity) // false
Number.isSafeInteger(-Infinity) // false

Number.isSafeInteger(3) // true
Number.isSafeInteger(1.2) // false
Number.isSafeInteger(9007199254740990) // true
Number.isSafeInteger(9007199254740992) // false

Number.isSafeInteger(Number.MIN_SAFE_INTEGER - 1) // false
Number.isSafeInteger(Number.MIN_SAFE_INTEGER) // true
Number.isSafeInteger(Number.MAX_SAFE_INTEGER) // true
Number.isSafeInteger(Number.MAX_SAFE_INTEGER + 1) // false
</code></pre>
<p>è¿™ä¸ªå‡½æ•°çš„å®ç°å¾ˆç®€å•ï¼Œå°±æ˜¯è·Ÿå®‰å…¨æ•´æ•°çš„ä¸¤ä¸ªè¾¹ç•Œå€¼æ¯”è¾ƒä¸€ä¸‹ã€‚</p>
<pre><code class="javascript">Number.isSafeInteger = function (n) {
  return (typeof n === &#39;number&#39; &amp;&amp;
    Math.round(n) === n &amp;&amp;
    Number.MIN_SAFE_INTEGER &lt;= n &amp;&amp;
    n &lt;= Number.MAX_SAFE_INTEGER);
}
</code></pre>
<p>å®é™…ä½¿ç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œéœ€è¦æ³¨æ„ã€‚éªŒè¯è¿ç®—ç»“æœæ˜¯å¦è½åœ¨å®‰å…¨æ•´æ•°çš„èŒƒå›´å†…ï¼Œä¸è¦åªéªŒè¯è¿ç®—ç»“æœï¼Œè€Œè¦åŒæ—¶éªŒè¯å‚ä¸è¿ç®—çš„æ¯ä¸ªå€¼ã€‚</p>
<pre><code class="javascript">Number.isSafeInteger(9007199254740993)
// false
Number.isSafeInteger(990)
// true
Number.isSafeInteger(9007199254740993 - 990)
// true
9007199254740993 - 990
// è¿”å›ç»“æœ 9007199254740002
// æ­£ç¡®ç­”æ¡ˆåº”è¯¥æ˜¯ 9007199254740003
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>9007199254740993</code>ä¸æ˜¯ä¸€ä¸ªå®‰å…¨æ•´æ•°ï¼Œä½†æ˜¯<code>Number.isSafeInteger</code>ä¼šè¿”å›ç»“æœï¼Œæ˜¾ç¤ºè®¡ç®—ç»“æœæ˜¯å®‰å…¨çš„ã€‚è¿™æ˜¯å› ä¸ºï¼Œè¿™ä¸ªæ•°è¶…å‡ºäº†ç²¾åº¦èŒƒå›´ï¼Œå¯¼è‡´åœ¨è®¡ç®—æœºå†…éƒ¨ï¼Œä»¥<code>9007199254740992</code>çš„å½¢å¼å‚¨å­˜ã€‚</p>
<pre><code class="javascript">9007199254740993 === 9007199254740992
// true
</code></pre>
<p>æ‰€ä»¥ï¼Œå¦‚æœåªéªŒè¯è¿ç®—ç»“æœæ˜¯å¦ä¸ºå®‰å…¨æ•´æ•°ï¼Œå¾ˆå¯èƒ½å¾—åˆ°é”™è¯¯ç»“æœã€‚ä¸‹é¢çš„å‡½æ•°å¯ä»¥åŒæ—¶éªŒè¯ä¸¤ä¸ªè¿ç®—æ•°å’Œè¿ç®—ç»“æœã€‚</p>
<pre><code class="javascript">function trusty (left, right, result) {
  if (
    Number.isSafeInteger(left) &amp;&amp;
    Number.isSafeInteger(right) &amp;&amp;
    Number.isSafeInteger(result)
  ) {
    return result;
  }
  throw new RangeError(&#39;Operation cannot be trusted!&#39;);
}

trusty(9007199254740993, 990, 9007199254740993 - 990)
// RangeError: Operation cannot be trusted!

trusty(1, 2, 3)
// 3
</code></pre>
<h2 id="Mathå¯¹è±¡çš„æ‰©å±•"><a href="#Mathå¯¹è±¡çš„æ‰©å±•" class="headerlink" title="Mathå¯¹è±¡çš„æ‰©å±•"></a>Mathå¯¹è±¡çš„æ‰©å±•</h2><p>ES6åœ¨Mathå¯¹è±¡ä¸Šæ–°å¢äº†17ä¸ªä¸æ•°å­¦ç›¸å…³çš„æ–¹æ³•ã€‚æ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½æ˜¯é™æ€æ–¹æ³•ï¼Œåªèƒ½åœ¨Mathå¯¹è±¡ä¸Šè°ƒç”¨ã€‚</p>
<h3 id="Math-trunc"><a href="#Math-trunc" class="headerlink" title="Math.trunc()"></a>Math.trunc()</h3><p><code>Math.trunc</code>æ–¹æ³•ç”¨äºå»é™¤ä¸€ä¸ªæ•°çš„å°æ•°éƒ¨åˆ†ï¼Œè¿”å›æ•´æ•°éƒ¨åˆ†ã€‚</p>
<pre><code class="javascript">Math.trunc(4.1) // 4
Math.trunc(4.9) // 4
Math.trunc(-4.1) // -4
Math.trunc(-4.9) // -4
Math.trunc(-0.1234) // -0
</code></pre>
<p>å¯¹äºéæ•°å€¼ï¼Œ<code>Math.trunc</code>å†…éƒ¨ä½¿ç”¨<code>Number</code>æ–¹æ³•å°†å…¶å…ˆè½¬ä¸ºæ•°å€¼ã€‚</p>
<pre><code class="javascript">Math.trunc(&#39;123.456&#39;)
// 123
</code></pre>
<p>å¯¹äºç©ºå€¼å’Œæ— æ³•æˆªå–æ•´æ•°çš„å€¼ï¼Œè¿”å›NaNã€‚</p>
<pre><code class="javascript">Math.trunc(NaN);      // NaN
Math.trunc(&#39;foo&#39;);    // NaN
Math.trunc();         // NaN
</code></pre>
<p>å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚</p>
<pre><code class="javascript">Math.trunc = Math.trunc || function(x) {
  return x &lt; 0 ? Math.ceil(x) : Math.floor(x);
};
</code></pre>
<h3 id="Math-sign"><a href="#Math-sign" class="headerlink" title="Math.sign()"></a>Math.sign()</h3><p><code>Math.sign</code>æ–¹æ³•ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°åˆ°åº•æ˜¯æ­£æ•°ã€è´Ÿæ•°ã€è¿˜æ˜¯é›¶ã€‚</p>
<p>å®ƒä¼šè¿”å›äº”ç§å€¼ã€‚</p>
<ul>
<li>å‚æ•°ä¸ºæ­£æ•°ï¼Œè¿”å›+1ï¼›</li>
<li>å‚æ•°ä¸ºè´Ÿæ•°ï¼Œè¿”å›-1ï¼›</li>
<li>å‚æ•°ä¸º0ï¼Œè¿”å›0ï¼›</li>
<li>å‚æ•°ä¸º-0ï¼Œè¿”å›-0;</li>
<li>å…¶ä»–å€¼ï¼Œè¿”å›NaNã€‚</li>
</ul>
<pre><code class="javascript">Math.sign(-5) // -1
Math.sign(5) // +1
Math.sign(0) // +0
Math.sign(-0) // -0
Math.sign(NaN) // NaN
Math.sign(&#39;foo&#39;); // NaN
Math.sign();      // NaN
</code></pre>
<p>å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚</p>
<pre><code class="javascript">Math.sign = Math.sign || function(x) {
  x = +x; // convert to a number
  if (x === 0 || isNaN(x)) {
    return x;
  }
  return x &gt; 0 ? 1 : -1;
};
</code></pre>
<h3 id="Math-cbrt"><a href="#Math-cbrt" class="headerlink" title="Math.cbrt()"></a>Math.cbrt()</h3><p><code>Math.cbrt</code>æ–¹æ³•ç”¨äºè®¡ç®—ä¸€ä¸ªæ•°çš„ç«‹æ–¹æ ¹ã€‚</p>
<pre><code class="javascript">Math.cbrt(-1) // -1
Math.cbrt(0)  // 0
Math.cbrt(1)  // 1
Math.cbrt(2)  // 1.2599210498948734
</code></pre>
<p>å¯¹äºéæ•°å€¼ï¼Œ<code>Math.cbrt</code>æ–¹æ³•å†…éƒ¨ä¹Ÿæ˜¯å…ˆä½¿ç”¨<code>Number</code>æ–¹æ³•å°†å…¶è½¬ä¸ºæ•°å€¼ã€‚</p>
<pre><code class="javascript">Math.cbrt(&#39;8&#39;) // 2
Math.cbrt(&#39;hello&#39;) // NaN
</code></pre>
<p>å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚</p>
<pre><code class="javascript">Math.cbrt = Math.cbrt || function(x) {
  var y = Math.pow(Math.abs(x), 1/3);
  return x &lt; 0 ? -y : y;
};
</code></pre>
<h3 id="Math-clz32"><a href="#Math-clz32" class="headerlink" title="Math.clz32()"></a>Math.clz32()</h3><p>JavaScriptçš„æ•´æ•°ä½¿ç”¨32ä½äºŒè¿›åˆ¶å½¢å¼è¡¨ç¤ºï¼Œ<code>Math.clz32</code>æ–¹æ³•è¿”å›ä¸€ä¸ªæ•°çš„32ä½æ— ç¬¦å·æ•´æ•°å½¢å¼æœ‰å¤šå°‘ä¸ªå‰å¯¼0ã€‚</p>
<pre><code class="javascript">Math.clz32(0) // 32
Math.clz32(1) // 31
Math.clz32(1000) // 22
Math.clz32(0b01000000000000000000000000000000) // 1
Math.clz32(0b00100000000000000000000000000000) // 2
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ0çš„äºŒè¿›åˆ¶å½¢å¼å…¨ä¸º0ï¼Œæ‰€ä»¥æœ‰32ä¸ªå‰å¯¼0ï¼›1çš„äºŒè¿›åˆ¶å½¢å¼æ˜¯<code>0b1</code>ï¼Œåªå 1ä½ï¼Œæ‰€ä»¥32ä½ä¹‹ä¸­æœ‰31ä¸ªå‰å¯¼0ï¼›1000çš„äºŒè¿›åˆ¶å½¢å¼æ˜¯<code>0b1111101000</code>ï¼Œä¸€å…±æœ‰10ä½ï¼Œæ‰€ä»¥32ä½ä¹‹ä¸­æœ‰22ä¸ªå‰å¯¼0ã€‚</p>
<p><code>clz32</code>è¿™ä¸ªå‡½æ•°åå°±æ¥è‡ªâ€count leading zero bits in 32-bit binary representations of a numberâ€œï¼ˆè®¡ç®—32ä½æ•´æ•°çš„å‰å¯¼0ï¼‰çš„ç¼©å†™ã€‚</p>
<p>å·¦ç§»è¿ç®—ç¬¦ï¼ˆ<code>&lt;&lt;</code>ï¼‰ä¸<code>Math.clz32</code>æ–¹æ³•ç›´æ¥ç›¸å…³ã€‚</p>
<pre><code class="javascript">Math.clz32(0) // 32
Math.clz32(1) // 31
Math.clz32(1 &lt;&lt; 1) // 30
Math.clz32(1 &lt;&lt; 2) // 29
Math.clz32(1 &lt;&lt; 29) // 2
</code></pre>
<p>å¯¹äºå°æ•°ï¼Œ<code>Math.clz32</code>æ–¹æ³•åªè€ƒè™‘æ•´æ•°éƒ¨åˆ†ã€‚</p>
<pre><code class="javascript">Math.clz32(3.2) // 30
Math.clz32(3.9) // 30
</code></pre>
<p>å¯¹äºç©ºå€¼æˆ–å…¶ä»–ç±»å‹çš„å€¼ï¼Œ<code>Math.clz32</code>æ–¹æ³•ä¼šå°†å®ƒä»¬å…ˆè½¬ä¸ºæ•°å€¼ï¼Œç„¶åå†è®¡ç®—ã€‚</p>
<pre><code class="javascript">Math.clz32() // 32
Math.clz32(NaN) // 32
Math.clz32(Infinity) // 32
Math.clz32(null) // 32
Math.clz32(&#39;foo&#39;) // 32
Math.clz32([]) // 32
Math.clz32({}) // 32
Math.clz32(true) // 31
</code></pre>
<h3 id="Math-imul"><a href="#Math-imul" class="headerlink" title="Math.imul()"></a>Math.imul()</h3><p><code>Math.imul</code>æ–¹æ³•è¿”å›ä¸¤ä¸ªæ•°ä»¥32ä½å¸¦ç¬¦å·æ•´æ•°å½¢å¼ç›¸ä¹˜çš„ç»“æœï¼Œè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª32ä½çš„å¸¦ç¬¦å·æ•´æ•°ã€‚</p>
<pre><code class="javascript">Math.imul(2, 4)   // 8
Math.imul(-1, 8)  // -8
Math.imul(-2, -2) // 4
</code></pre>
<p>å¦‚æœåªè€ƒè™‘æœ€å32ä½ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>Math.imul(a, b)</code>ä¸<code>a * b</code>çš„ç»“æœæ˜¯ç›¸åŒçš„ï¼Œå³è¯¥æ–¹æ³•ç­‰åŒäº<code>(a * b)|0</code>çš„æ•ˆæœï¼ˆè¶…è¿‡32ä½çš„éƒ¨åˆ†æº¢å‡ºï¼‰ã€‚ä¹‹æ‰€ä»¥éœ€è¦éƒ¨ç½²è¿™ä¸ªæ–¹æ³•ï¼Œæ˜¯å› ä¸ºJavaScriptæœ‰ç²¾åº¦é™åˆ¶ï¼Œè¶…è¿‡2çš„53æ¬¡æ–¹çš„å€¼æ— æ³•ç²¾ç¡®è¡¨ç¤ºã€‚è¿™å°±æ˜¯è¯´ï¼Œå¯¹äºé‚£äº›å¾ˆå¤§çš„æ•°çš„ä¹˜æ³•ï¼Œä½ä½æ•°å€¼å¾€å¾€éƒ½æ˜¯ä¸ç²¾ç¡®çš„ï¼Œ<code>Math.imul</code>æ–¹æ³•å¯ä»¥è¿”å›æ­£ç¡®çš„ä½ä½æ•°å€¼ã€‚</p>
<pre><code class="javascript">(0x7fffffff * 0x7fffffff)|0 // 0
</code></pre>
<p>ä¸Šé¢è¿™ä¸ªä¹˜æ³•ç®—å¼ï¼Œè¿”å›ç»“æœä¸º0ã€‚ä½†æ˜¯ç”±äºè¿™ä¸¤ä¸ªäºŒè¿›åˆ¶æ•°çš„æœ€ä½ä½éƒ½æ˜¯1ï¼Œæ‰€ä»¥è¿™ä¸ªç»“æœè‚¯å®šæ˜¯ä¸æ­£ç¡®çš„ï¼Œå› ä¸ºæ ¹æ®äºŒè¿›åˆ¶ä¹˜æ³•ï¼Œè®¡ç®—ç»“æœçš„äºŒè¿›åˆ¶æœ€ä½ä½åº”è¯¥ä¹Ÿæ˜¯1ã€‚è¿™ä¸ªé”™è¯¯å°±æ˜¯å› ä¸ºå®ƒä»¬çš„ä¹˜ç§¯è¶…è¿‡äº†2çš„53æ¬¡æ–¹ï¼ŒJavaScriptæ— æ³•ä¿å­˜é¢å¤–çš„ç²¾åº¦ï¼Œå°±æŠŠä½ä½çš„å€¼éƒ½å˜æˆäº†0ã€‚<code>Math.imul</code>æ–¹æ³•å¯ä»¥è¿”å›æ­£ç¡®çš„å€¼1ã€‚</p>
<pre><code class="javascript">Math.imul(0x7fffffff, 0x7fffffff) // 1
</code></pre>
<h3 id="Math-fround"><a href="#Math-fround" class="headerlink" title="Math.fround()"></a>Math.fround()</h3><p>Math.froundæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°çš„å•ç²¾åº¦æµ®ç‚¹æ•°å½¢å¼ã€‚</p>
<pre><code class="javascript">Math.fround(0)     // 0
Math.fround(1)     // 1
Math.fround(1.337) // 1.3370000123977661
Math.fround(1.5)   // 1.5
Math.fround(NaN)   // NaN
</code></pre>
<p>å¯¹äºæ•´æ•°æ¥è¯´ï¼Œ<code>Math.fround</code>æ–¹æ³•è¿”å›ç»“æœä¸ä¼šæœ‰ä»»ä½•ä¸åŒï¼ŒåŒºåˆ«ä¸»è¦æ˜¯é‚£äº›æ— æ³•ç”¨64ä¸ªäºŒè¿›åˆ¶ä½ç²¾ç¡®è¡¨ç¤ºçš„å°æ•°ã€‚è¿™æ—¶ï¼Œ<code>Math.fround</code>æ–¹æ³•ä¼šè¿”å›æœ€æ¥è¿‘è¿™ä¸ªå°æ•°çš„å•ç²¾åº¦æµ®ç‚¹æ•°ã€‚</p>
<p>å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚</p>
<pre><code class="javascript">Math.fround = Math.fround || function(x) {
  return new Float32Array([x])[0];
};
</code></pre>
<h3 id="Math-hypot"><a href="#Math-hypot" class="headerlink" title="Math.hypot()"></a>Math.hypot()</h3><p><code>Math.hypot</code>æ–¹æ³•è¿”å›æ‰€æœ‰å‚æ•°çš„å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹ã€‚</p>
<pre><code class="javascript">Math.hypot(3, 4);        // 5
Math.hypot(3, 4, 5);     // 7.0710678118654755
Math.hypot();            // 0
Math.hypot(NaN);         // NaN
Math.hypot(3, 4, &#39;foo&#39;); // NaN
Math.hypot(3, 4, &#39;5&#39;);   // 7.0710678118654755
Math.hypot(-3);          // 3
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ3çš„å¹³æ–¹åŠ ä¸Š4çš„å¹³æ–¹ï¼Œç­‰äº5çš„å¹³æ–¹ã€‚</p>
<p>å¦‚æœå‚æ•°ä¸æ˜¯æ•°å€¼ï¼Œ<code>Math.hypot</code>æ–¹æ³•ä¼šå°†å…¶è½¬ä¸ºæ•°å€¼ã€‚åªè¦æœ‰ä¸€ä¸ªå‚æ•°æ— æ³•è½¬ä¸ºæ•°å€¼ï¼Œå°±ä¼šè¿”å›NaNã€‚</p>
<h3 id="å¯¹æ•°æ–¹æ³•"><a href="#å¯¹æ•°æ–¹æ³•" class="headerlink" title="å¯¹æ•°æ–¹æ³•"></a>å¯¹æ•°æ–¹æ³•</h3><p>ES6æ–°å¢äº†4ä¸ªå¯¹æ•°ç›¸å…³æ–¹æ³•ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰ Math.expm1()</strong></p>
<p><code>Math.expm1(x)</code>è¿”å›e<sup>x</sup> - 1ï¼Œå³<code>Math.exp(x) - 1</code>ã€‚</p>
<pre><code class="javascript">Math.expm1(-1) // -0.6321205588285577
Math.expm1(0)  // 0
Math.expm1(1)  // 1.718281828459045
</code></pre>
<p>å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚</p>
<pre><code class="javascript">Math.expm1 = Math.expm1 || function(x) {
  return Math.exp(x) - 1;
};
</code></pre>
<p><strong>ï¼ˆ2ï¼‰Math.log1p()</strong></p>
<p><code>Math.log1p(x)</code>æ–¹æ³•è¿”å›<code>1 + x</code>çš„è‡ªç„¶å¯¹æ•°ï¼Œå³<code>Math.log(1 + x)</code>ã€‚å¦‚æœ<code>x</code>å°äº-1ï¼Œè¿”å›<code>NaN</code>ã€‚</p>
<pre><code class="javascript">Math.log1p(1)  // 0.6931471805599453
Math.log1p(0)  // 0
Math.log1p(-1) // -Infinity
Math.log1p(-2) // NaN
</code></pre>
<p>å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚</p>
<pre><code class="javascript">Math.log1p = Math.log1p || function(x) {
  return Math.log(1 + x);
};
</code></pre>
<p><strong>ï¼ˆ3ï¼‰Math.log10()</strong></p>
<p><code>Math.log10(x)</code>è¿”å›ä»¥10ä¸ºåº•çš„<code>x</code>çš„å¯¹æ•°ã€‚å¦‚æœ<code>x</code>å°äº0ï¼Œåˆ™è¿”å›NaNã€‚</p>
<pre><code class="javascript">Math.log10(2)      // 0.3010299956639812
Math.log10(1)      // 0
Math.log10(0)      // -Infinity
Math.log10(-2)     // NaN
Math.log10(100000) // 5
</code></pre>
<p>å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚</p>
<pre><code class="javascript">Math.log10 = Math.log10 || function(x) {
  return Math.log(x) / Math.LN10;
};
</code></pre>
<p><strong>ï¼ˆ4ï¼‰Math.log2()</strong></p>
<p><code>Math.log2(x)</code>è¿”å›ä»¥2ä¸ºåº•çš„<code>x</code>çš„å¯¹æ•°ã€‚å¦‚æœ<code>x</code>å°äº0ï¼Œåˆ™è¿”å›NaNã€‚</p>
<pre><code class="javascript">Math.log2(3)       // 1.584962500721156
Math.log2(2)       // 1
Math.log2(1)       // 0
Math.log2(0)       // -Infinity
Math.log2(-2)      // NaN
Math.log2(1024)    // 10
Math.log2(1 &lt;&lt; 29) // 29
</code></pre>
<p>å¯¹äºæ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ–¹æ³•çš„ç¯å¢ƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿã€‚</p>
<pre><code class="javascript">Math.log2 = Math.log2 || function(x) {
  return Math.log(x) / Math.LN2;
};
</code></pre>
<h3 id="ä¸‰è§’å‡½æ•°æ–¹æ³•"><a href="#ä¸‰è§’å‡½æ•°æ–¹æ³•" class="headerlink" title="ä¸‰è§’å‡½æ•°æ–¹æ³•"></a>ä¸‰è§’å‡½æ•°æ–¹æ³•</h3><p>ES6æ–°å¢äº†6ä¸ªä¸‰è§’å‡½æ•°æ–¹æ³•ã€‚</p>
<ul>
<li><code>Math.sinh(x)</code> è¿”å›<code>x</code>çš„åŒæ›²æ­£å¼¦ï¼ˆhyperbolic sineï¼‰</li>
<li><code>Math.cosh(x)</code> è¿”å›<code>x</code>çš„åŒæ›²ä½™å¼¦ï¼ˆhyperbolic cosineï¼‰</li>
<li><code>Math.tanh(x)</code> è¿”å›<code>x</code>çš„åŒæ›²æ­£åˆ‡ï¼ˆhyperbolic tangentï¼‰</li>
<li><code>Math.asinh(x)</code> è¿”å›<code>x</code>çš„ååŒæ›²æ­£å¼¦ï¼ˆinverse hyperbolic sineï¼‰</li>
<li><code>Math.acosh(x)</code> è¿”å›<code>x</code>çš„ååŒæ›²ä½™å¼¦ï¼ˆinverse hyperbolic cosineï¼‰</li>
<li><code>Math.atanh(x)</code> è¿”å›<code>x</code>çš„ååŒæ›²æ­£åˆ‡ï¼ˆinverse hyperbolic tangentï¼‰</li>
</ul>
<h2 id="æŒ‡æ•°è¿ç®—ç¬¦"><a href="#æŒ‡æ•°è¿ç®—ç¬¦" class="headerlink" title="æŒ‡æ•°è¿ç®—ç¬¦"></a>æŒ‡æ•°è¿ç®—ç¬¦</h2><p>ES7æ–°å¢äº†ä¸€ä¸ªæŒ‡æ•°è¿ç®—ç¬¦ï¼ˆ<code>**</code>ï¼‰ï¼Œç›®å‰Babelè½¬ç å™¨å·²ç»æ”¯æŒã€‚</p>
<pre><code class="javascript">2 ** 2 // 4
2 ** 3 // 8
</code></pre>
<p>æŒ‡æ•°è¿ç®—ç¬¦å¯ä»¥ä¸ç­‰å·ç»“åˆï¼Œå½¢æˆä¸€ä¸ªæ–°çš„èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ<code>**=</code>ï¼‰ã€‚</p>
<pre><code class="javascript">let a = 2;
a **= 2;
// ç­‰åŒäº a = a * a;

let b = 3;
b **= 3;
// ç­‰åŒäº b = b * b * b;
</code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ•°å€¼çš„æ‰©å±•&quot;&gt;&lt;a href=&quot;#æ•°å€¼çš„æ‰©å±•&quot; class=&quot;headerlink&quot; title=&quot;æ•°å€¼çš„æ‰©å±•&quot;&gt;&lt;/a&gt;æ•°å€¼çš„æ‰©å±•&lt;/h1&gt;&lt;h2 id=&quot;äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶è¡¨ç¤ºæ³•&quot;&gt;&lt;a href=&quot;#äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶è¡¨ç¤ºæ³•&quot; class=&quot;headerlink&quot; 
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Number" scheme="https://microzz.com/tags/Number/"/>
    
  </entry>
  
  <entry>
    <title>æ­£åˆ™çš„æ‰©å±•(RegExp)</title>
    <link href="https://microzz.com/2016/11/20/regex/"/>
    <id>https://microzz.com/2016/11/20/regex/</id>
    <published>2016-11-20T07:57:19.000Z</published>
    <updated>2017-01-12T07:58:47.547Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ­£åˆ™çš„æ‰©å±•"><a href="#æ­£åˆ™çš„æ‰©å±•" class="headerlink" title="æ­£åˆ™çš„æ‰©å±•"></a>æ­£åˆ™çš„æ‰©å±•</h1><h2 id="RegExpæ„é€ å‡½æ•°"><a href="#RegExpæ„é€ å‡½æ•°" class="headerlink" title="RegExpæ„é€ å‡½æ•°"></a>RegExpæ„é€ å‡½æ•°</h2><p>åœ¨ES5ä¸­ï¼ŒRegExpæ„é€ å‡½æ•°çš„å‚æ•°æœ‰ä¸¤ç§æƒ…å†µã€‚</p>
<p>ç¬¬ä¸€ç§æƒ…å†µæ˜¯ï¼Œå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™æ—¶ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ï¼ˆflagï¼‰ã€‚</p>
<pre><code class="javascript">var regex = new RegExp(&#39;xyz&#39;, &#39;i&#39;);
// ç­‰ä»·äº
var regex = /xyz/i;
</code></pre>
<p>ç¬¬äºŒç§æƒ…å†µæ˜¯ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨ç¤ºå¼ï¼Œè¿™æ—¶ä¼šè¿”å›ä¸€ä¸ªåŸæœ‰æ­£åˆ™è¡¨è¾¾å¼çš„æ‹·è´ã€‚</p>
<pre><code class="javascript">var regex = new RegExp(/xyz/i);
// ç­‰ä»·äº
var regex = /xyz/i;
</code></pre>
<p>ä½†æ˜¯ï¼ŒES5ä¸å…è®¸æ­¤æ—¶ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ·»åŠ ä¿®é¥°ç¬¦ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">var regex = new RegExp(/xyz/, &#39;i&#39;);
// Uncaught TypeError: Cannot supply flags when constructing one RegExp from another
</code></pre>
<p>ES6æ”¹å˜äº†è¿™ç§è¡Œä¸ºã€‚å¦‚æœRegExpæ„é€ å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ­£åˆ™å¯¹è±¡ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šä¿®é¥°ç¬¦ã€‚è€Œä¸”ï¼Œè¿”å›çš„æ­£åˆ™è¡¨è¾¾å¼ä¼šå¿½ç•¥åŸæœ‰çš„æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ï¼Œåªä½¿ç”¨æ–°æŒ‡å®šçš„ä¿®é¥°ç¬¦ã€‚</p>
<pre><code class="javascript">new RegExp(/abc/ig, &#39;i&#39;).flags
// &quot;i&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼ŒåŸæœ‰æ­£åˆ™å¯¹è±¡çš„ä¿®é¥°ç¬¦æ˜¯<code>ig</code>ï¼Œå®ƒä¼šè¢«ç¬¬äºŒä¸ªå‚æ•°<code>i</code>è¦†ç›–ã€‚</p>
<h2 id="å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•"><a href="#å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•"></a>å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³•</h2><p>å­—ç¬¦ä¸²å¯¹è±¡å…±æœ‰4ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼š<code>match()</code>ã€<code>replace()</code>ã€<code>search()</code>å’Œ<code>split()</code>ã€‚</p>
<p>ES6å°†è¿™4ä¸ªæ–¹æ³•ï¼Œåœ¨è¯­è¨€å†…éƒ¨å…¨éƒ¨è°ƒç”¨RegExpçš„å®ä¾‹æ–¹æ³•ï¼Œä»è€Œåšåˆ°æ‰€æœ‰ä¸æ­£åˆ™ç›¸å…³çš„æ–¹æ³•ï¼Œå…¨éƒ½å®šä¹‰åœ¨RegExpå¯¹è±¡ä¸Šã€‚</p>
<ul>
<li><code>String.prototype.match</code> è°ƒç”¨ <code>RegExp.prototype[Symbol.match]</code></li>
<li><code>String.prototype.replace</code> è°ƒç”¨ <code>RegExp.prototype[Symbol.replace]</code></li>
<li><code>String.prototype.search</code> è°ƒç”¨ <code>RegExp.prototype[Symbol.search]</code></li>
<li><code>String.prototype.split</code> è°ƒç”¨ <code>RegExp.prototype[Symbol.split]</code></li>
</ul>
<h2 id="uä¿®é¥°ç¬¦"><a href="#uä¿®é¥°ç¬¦" class="headerlink" title="uä¿®é¥°ç¬¦"></a>uä¿®é¥°ç¬¦</h2><p>ES6å¯¹æ­£åˆ™è¡¨è¾¾å¼æ·»åŠ äº†<code>u</code>ä¿®é¥°ç¬¦ï¼Œå«ä¹‰ä¸ºâ€œUnicodeæ¨¡å¼â€ï¼Œç”¨æ¥æ­£ç¡®å¤„ç†å¤§äº<code>\uFFFF</code>çš„Unicodeå­—ç¬¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼šæ­£ç¡®å¤„ç†å››ä¸ªå­—èŠ‚çš„UTF-16ç¼–ç ã€‚</p>
<pre><code class="javascript">/^\uD83D/u.test(&#39;\uD83D\uDC2A&#39;)
// false
/^\uD83D/.test(&#39;\uD83D\uDC2A&#39;)
// true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>\uD83D\uDC2A</code>æ˜¯ä¸€ä¸ªå››ä¸ªå­—èŠ‚çš„UTF-16ç¼–ç ï¼Œä»£è¡¨ä¸€ä¸ªå­—ç¬¦ã€‚ä½†æ˜¯ï¼ŒES5ä¸æ”¯æŒå››ä¸ªå­—èŠ‚çš„UTF-16ç¼–ç ï¼Œä¼šå°†å…¶è¯†åˆ«ä¸ºä¸¤ä¸ªå­—ç¬¦ï¼Œå¯¼è‡´ç¬¬äºŒè¡Œä»£ç ç»“æœä¸º<code>true</code>ã€‚åŠ äº†<code>u</code>ä¿®é¥°ç¬¦ä»¥åï¼ŒES6å°±ä¼šè¯†åˆ«å…¶ä¸ºä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç¬¬ä¸€è¡Œä»£ç ç»“æœä¸º<code>false</code>ã€‚</p>
<p>ä¸€æ—¦åŠ ä¸Š<code>u</code>ä¿®é¥°ç¬¦å·ï¼Œå°±ä¼šä¿®æ”¹ä¸‹é¢è¿™äº›æ­£åˆ™è¡¨è¾¾å¼çš„è¡Œä¸ºã€‚</p>
<p><strong>ï¼ˆ1ï¼‰ç‚¹å­—ç¬¦</strong></p>
<p>ç‚¹ï¼ˆ<code>.</code>ï¼‰å­—ç¬¦åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå«ä¹‰æ˜¯é™¤äº†æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦ã€‚å¯¹äºç ç‚¹å¤§äº<code>0xFFFF</code>çš„Unicodeå­—ç¬¦ï¼Œç‚¹å­—ç¬¦ä¸èƒ½è¯†åˆ«ï¼Œå¿…é¡»åŠ ä¸Š<code>u</code>ä¿®é¥°ç¬¦ã€‚</p>
<pre><code class="javascript">var s = &#39;ğ ®·&#39;;

/^.$/.test(s) // false
/^.$/u.test(s) // true
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœä¸æ·»åŠ <code>u</code>ä¿®é¥°ç¬¦ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°±ä¼šè®¤ä¸ºå­—ç¬¦ä¸²ä¸ºä¸¤ä¸ªå­—ç¬¦ï¼Œä»è€ŒåŒ¹é…å¤±è´¥ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰Unicodeå­—ç¬¦è¡¨ç¤ºæ³•</strong></p>
<p>ES6æ–°å¢äº†ä½¿ç”¨å¤§æ‹¬å·è¡¨ç¤ºUnicodeå­—ç¬¦ï¼Œè¿™ç§è¡¨ç¤ºæ³•åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å¿…é¡»åŠ ä¸Š<code>u</code>ä¿®é¥°ç¬¦ï¼Œæ‰èƒ½è¯†åˆ«ã€‚</p>
<pre><code class="javascript">/\u{61}/.test(&#39;a&#39;) // false
/\u{61}/u.test(&#39;a&#39;) // true
/\u{20BB7}/u.test(&#39;ğ ®·&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœä¸åŠ <code>u</code>ä¿®é¥°ç¬¦ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ— æ³•è¯†åˆ«<code>\u{61}</code>è¿™ç§è¡¨ç¤ºæ³•ï¼Œåªä¼šè®¤ä¸ºè¿™åŒ¹é…61ä¸ªè¿ç»­çš„<code>u</code>ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰é‡è¯</strong></p>
<p>ä½¿ç”¨<code>u</code>ä¿®é¥°ç¬¦åï¼Œæ‰€æœ‰é‡è¯éƒ½ä¼šæ­£ç¡®è¯†åˆ«ç ç‚¹å¤§äº<code>0xFFFF</code>çš„Unicodeå­—ç¬¦ã€‚</p>
<pre><code class="javascript">/a{2}/.test(&#39;aa&#39;) // true
/a{2}/u.test(&#39;aa&#39;) // true
/ğ ®·{2}/.test(&#39;ğ ®·ğ ®·&#39;) // false
/ğ ®·{2}/u.test(&#39;ğ ®·ğ ®·&#39;) // true
</code></pre>
<p>å¦å¤–ï¼Œåªæœ‰åœ¨ä½¿ç”¨<code>u</code>ä¿®é¥°ç¬¦çš„æƒ…å†µä¸‹ï¼ŒUnicodeè¡¨è¾¾å¼å½“ä¸­çš„å¤§æ‹¬å·æ‰ä¼šè¢«æ­£ç¡®è§£è¯»ï¼Œå¦åˆ™ä¼šè¢«è§£è¯»ä¸ºé‡è¯ã€‚</p>
<pre><code class="javascript">/^\u{3}$/.test(&#39;uuu&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºæ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰<code>u</code>ä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥å¤§æ‹¬å·è¢«è§£è¯»ä¸ºé‡è¯ã€‚åŠ ä¸Š<code>u</code>ä¿®é¥°ç¬¦ï¼Œå°±ä¼šè¢«è§£è¯»ä¸ºUnicodeè¡¨è¾¾å¼ã€‚</p>
<p><strong>ï¼ˆ4ï¼‰é¢„å®šä¹‰æ¨¡å¼</strong></p>
<p><code>u</code>ä¿®é¥°ç¬¦ä¹Ÿå½±å“åˆ°é¢„å®šä¹‰æ¨¡å¼ï¼Œèƒ½å¦æ­£ç¡®è¯†åˆ«ç ç‚¹å¤§äº<code>0xFFFF</code>çš„Unicodeå­—ç¬¦ã€‚</p>
<pre><code class="javascript">/^\S$/.test(&#39;ğ ®·&#39;) // false
/^\S$/u.test(&#39;ğ ®·&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç çš„<code>\S</code>æ˜¯é¢„å®šä¹‰æ¨¡å¼ï¼ŒåŒ¹é…æ‰€æœ‰ä¸æ˜¯ç©ºæ ¼çš„å­—ç¬¦ã€‚åªæœ‰åŠ äº†<code>u</code>ä¿®é¥°ç¬¦ï¼Œå®ƒæ‰èƒ½æ­£ç¡®åŒ¹é…ç ç‚¹å¤§äº<code>0xFFFF</code>çš„Unicodeå­—ç¬¦ã€‚</p>
<p>åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå¯ä»¥å†™å‡ºä¸€ä¸ªæ­£ç¡®è¿”å›å­—ç¬¦ä¸²é•¿åº¦çš„å‡½æ•°ã€‚</p>
<pre><code class="javascript">function codePointLength(text) {
  var result = text.match(/[\s\S]/gu);
  return result ? result.length : 0;
}

var s = &#39;ğ ®·ğ ®·&#39;;

s.length // 4
codePointLength(s) // 2
</code></pre>
<p><strong>ï¼ˆ5ï¼‰iä¿®é¥°ç¬¦</strong></p>
<p>æœ‰äº›Unicodeå­—ç¬¦çš„ç¼–ç ä¸åŒï¼Œä½†æ˜¯å­—å‹å¾ˆç›¸è¿‘ï¼Œæ¯”å¦‚ï¼Œ<code>\u004B</code>ä¸<code>\u212A</code>éƒ½æ˜¯å¤§å†™çš„<code>K</code>ã€‚</p>
<pre><code class="javascript">/[a-z]/i.test(&#39;\u212A&#39;) // false
/[a-z]/iu.test(&#39;\u212A&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¸åŠ <code>u</code>ä¿®é¥°ç¬¦ï¼Œå°±æ— æ³•è¯†åˆ«éè§„èŒƒçš„Kå­—ç¬¦ã€‚</p>
<h2 id="y-ä¿®é¥°ç¬¦"><a href="#y-ä¿®é¥°ç¬¦" class="headerlink" title="y ä¿®é¥°ç¬¦"></a>y ä¿®é¥°ç¬¦</h2><p>é™¤äº†<code>u</code>ä¿®é¥°ç¬¦ï¼ŒES6è¿˜ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ·»åŠ äº†<code>y</code>ä¿®é¥°ç¬¦ï¼Œå«åšâ€œç²˜è¿â€ï¼ˆstickyï¼‰ä¿®é¥°ç¬¦ã€‚</p>
<p><code>y</code>ä¿®é¥°ç¬¦çš„ä½œç”¨ä¸<code>g</code>ä¿®é¥°ç¬¦ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å…¨å±€åŒ¹é…ï¼Œåä¸€æ¬¡åŒ¹é…éƒ½ä»ä¸Šä¸€æ¬¡åŒ¹é…æˆåŠŸçš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œ<code>g</code>ä¿®é¥°ç¬¦åªè¦å‰©ä½™ä½ç½®ä¸­å­˜åœ¨åŒ¹é…å°±å¯ï¼Œè€Œ<code>y</code>ä¿®é¥°ç¬¦ç¡®ä¿åŒ¹é…å¿…é¡»ä»å‰©ä½™çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œè¿™ä¹Ÿå°±æ˜¯â€œç²˜è¿â€çš„æ¶µä¹‰ã€‚</p>
<pre><code class="javascript">var s = &#39;aaa_aa_a&#39;;
var r1 = /a+/g;
var r2 = /a+/y;

r1.exec(s) // [&quot;aaa&quot;]
r2.exec(s) // [&quot;aaa&quot;]

r1.exec(s) // [&quot;aa&quot;]
r2.exec(s) // null
</code></pre>
<p>ä¸Šé¢ä»£ç æœ‰ä¸¤ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸€ä¸ªä½¿ç”¨<code>g</code>ä¿®é¥°ç¬¦ï¼Œå¦ä¸€ä¸ªä½¿ç”¨<code>y</code>ä¿®é¥°ç¬¦ã€‚è¿™ä¸¤ä¸ªæ­£åˆ™è¡¨è¾¾å¼å„æ‰§è¡Œäº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸¤è€…è¡Œä¸ºç›¸åŒï¼Œå‰©ä½™å­—ç¬¦ä¸²éƒ½æ˜¯<code>_aa_a</code>ã€‚ç”±äº<code>g</code>ä¿®é¥°æ²¡æœ‰ä½ç½®è¦æ±‚ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡æ‰§è¡Œä¼šè¿”å›ç»“æœï¼Œè€Œ<code>y</code>ä¿®é¥°ç¬¦è¦æ±‚åŒ¹é…å¿…é¡»ä»å¤´éƒ¨å¼€å§‹ï¼Œæ‰€ä»¥è¿”å›<code>null</code>ã€‚</p>
<p>å¦‚æœæ”¹ä¸€ä¸‹æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¿è¯æ¯æ¬¡éƒ½èƒ½å¤´éƒ¨åŒ¹é…ï¼Œ<code>y</code>ä¿®é¥°ç¬¦å°±ä¼šè¿”å›ç»“æœäº†ã€‚</p>
<pre><code class="javascript">var s = &#39;aaa_aa_a&#39;;
var r = /a+_/y;

r.exec(s) // [&quot;aaa_&quot;]
r.exec(s) // [&quot;aa_&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç æ¯æ¬¡åŒ¹é…ï¼Œéƒ½æ˜¯ä»å‰©ä½™å­—ç¬¦ä¸²çš„å¤´éƒ¨å¼€å§‹ã€‚</p>
<p>ä½¿ç”¨<code>lastIndex</code>å±æ€§ï¼Œå¯ä»¥æ›´å¥½åœ°è¯´æ˜<code>y</code>ä¿®é¥°ç¬¦ã€‚</p>
<pre><code class="javascript">const REGEX = /a/g;

// æŒ‡å®šä»2å·ä½ç½®ï¼ˆyï¼‰å¼€å§‹åŒ¹é…
REGEX.lastIndex = 2;

// åŒ¹é…æˆåŠŸ
const match = REGEX.exec(&#39;xaya&#39;);

// åœ¨3å·ä½ç½®åŒ¹é…æˆåŠŸ
match.index // 3

// ä¸‹ä¸€æ¬¡åŒ¹é…ä»4å·ä½å¼€å§‹
REGEX.lastIndex // 4

// 4å·ä½å¼€å§‹åŒ¹é…å¤±è´¥
REGEX.exec(&#39;xaxa&#39;) // null
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>lastIndex</code>å±æ€§æŒ‡å®šæ¯æ¬¡æœç´¢çš„å¼€å§‹ä½ç½®ï¼Œ<code>g</code>ä¿®é¥°ç¬¦ä»è¿™ä¸ªä½ç½®å¼€å§‹å‘åæœç´¢ï¼Œç›´åˆ°å‘ç°åŒ¹é…ä¸ºæ­¢ã€‚</p>
<p><code>y</code>ä¿®é¥°ç¬¦åŒæ ·éµå®ˆ<code>lastIndex</code>å±æ€§ï¼Œä½†æ˜¯è¦æ±‚å¿…é¡»åœ¨<code>lastIndex</code>æŒ‡å®šçš„ä½ç½®å‘ç°åŒ¹é…ã€‚</p>
<pre><code class="javascript">const REGEX = /a/y;

// æŒ‡å®šä»2å·ä½ç½®å¼€å§‹åŒ¹é…
REGEX.lastIndex = 2;

// ä¸æ˜¯ç²˜è¿ï¼ŒåŒ¹é…å¤±è´¥
REGEX.exec(&#39;xaya&#39;) // null

// æŒ‡å®šä»3å·ä½ç½®å¼€å§‹åŒ¹é…
REGEX.lastIndex = 3;

// 3å·ä½ç½®æ˜¯ç²˜è¿ï¼ŒåŒ¹é…æˆåŠŸ
const match = REGEX.exec(&#39;xaxa&#39;);
match.index // 3
REGEX.lastIndex // 4
</code></pre>
<p>è¿›ä¸€æ­¥è¯´ï¼Œ<code>y</code>ä¿®é¥°ç¬¦å·éšå«äº†å¤´éƒ¨åŒ¹é…çš„æ ‡å¿—<code>^</code>ã€‚</p>
<pre><code class="javascript">/b/y.exec(&#39;aba&#39;)
// null
</code></pre>
<p>ä¸Šé¢ä»£ç ç”±äºä¸èƒ½ä¿è¯å¤´éƒ¨åŒ¹é…ï¼Œæ‰€ä»¥è¿”å›<code>null</code>ã€‚<code>y</code>ä¿®é¥°ç¬¦çš„è®¾è®¡æœ¬æ„ï¼Œå°±æ˜¯è®©å¤´éƒ¨åŒ¹é…çš„æ ‡å¿—<code>^</code>åœ¨å…¨å±€åŒ¹é…ä¸­éƒ½æœ‰æ•ˆã€‚</p>
<p>åœ¨<code>split</code>æ–¹æ³•ä¸­ä½¿ç”¨<code>y</code>ä¿®é¥°ç¬¦ï¼ŒåŸå­—ç¬¦ä¸²å¿…é¡»ä»¥åˆ†éš”ç¬¦å¼€å¤´ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œåªè¦åŒ¹é…æˆåŠŸï¼Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜è‚¯å®šæ˜¯ç©ºå­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">// æ²¡æœ‰æ‰¾åˆ°åŒ¹é…
&#39;x##&#39;.split(/#/y)
// [ &#39;x##&#39; ]

// æ‰¾åˆ°ä¸¤ä¸ªåŒ¹é…
&#39;##x&#39;.split(/#/y)
// [ &#39;&#39;, &#39;&#39;, &#39;x&#39; ]
</code></pre>
<p>åç»­çš„åˆ†éš”ç¬¦åªæœ‰ç´§è·Ÿå‰é¢çš„åˆ†éš”ç¬¦ï¼Œæ‰ä¼šè¢«è¯†åˆ«ã€‚</p>
<pre><code class="javascript">&#39;#x#&#39;.split(/#/y)
// [ &#39;&#39;, &#39;x#&#39; ]

&#39;##&#39;.split(/#/y)
// [ &#39;&#39;, &#39;&#39;, &#39;&#39; ]
</code></pre>
<p>ä¸‹é¢æ˜¯å­—ç¬¦ä¸²å¯¹è±¡çš„<code>replace</code>æ–¹æ³•çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">const REGEX = /a/gy;
&#39;aaxa&#39;.replace(REGEX, &#39;-&#39;) // &#39;--xa&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæœ€åä¸€ä¸ª<code>a</code>å› ä¸ºä¸æ˜¯å‡ºç°ä¸‹ä¸€æ¬¡åŒ¹é…çš„å¤´éƒ¨ï¼Œæ‰€ä»¥ä¸ä¼šè¢«æ›¿æ¢ã€‚</p>
<p>å•å•ä¸€ä¸ª<code>y</code>ä¿®é¥°ç¬¦å¯¹<code>match</code>æ–¹æ³•ï¼Œåªèƒ½è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…ï¼Œå¿…é¡»ä¸<code>g</code>ä¿®é¥°ç¬¦è”ç”¨ï¼Œæ‰èƒ½è¿”å›æ‰€æœ‰åŒ¹é…ã€‚</p>
<pre><code class="javascript">&#39;a1a2a3&#39;.match(/a\d/y) // [&quot;a1&quot;]
&#39;a1a2a3&#39;.match(/a\d/gy) // [&quot;a1&quot;, &quot;a2&quot;, &quot;a3&quot;]
</code></pre>
<p><code>y</code>ä¿®é¥°ç¬¦çš„ä¸€ä¸ªåº”ç”¨ï¼Œæ˜¯ä»å­—ç¬¦ä¸²æå–tokenï¼ˆè¯å…ƒï¼‰ï¼Œ<code>y</code>ä¿®é¥°ç¬¦ç¡®ä¿äº†åŒ¹é…ä¹‹é—´ä¸ä¼šæœ‰æ¼æ‰çš„å­—ç¬¦ã€‚</p>
<pre><code class="javascript">const TOKEN_Y = /\s*(\+|[0-9]+)\s*/y;
const TOKEN_G  = /\s*(\+|[0-9]+)\s*/g;

tokenize(TOKEN_Y, &#39;3 + 4&#39;)
// [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ]
tokenize(TOKEN_G, &#39;3 + 4&#39;)
// [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ]

function tokenize(TOKEN_REGEX, str) {
  let result = [];
  let match;
  while (match = TOKEN_REGEX.exec(str)) {
    result.push(match[1]);
  }
  return result;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå­—ç¬¦ä¸²é‡Œé¢æ²¡æœ‰éæ³•å­—ç¬¦ï¼Œ<code>y</code>ä¿®é¥°ç¬¦ä¸<code>g</code>ä¿®é¥°ç¬¦çš„æå–ç»“æœæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦å‡ºç°éæ³•å­—ç¬¦ï¼Œä¸¤è€…çš„è¡Œä¸ºå°±ä¸ä¸€æ ·äº†ã€‚</p>
<pre><code class="javascript">tokenize(TOKEN_Y, &#39;3x + 4&#39;)
// [ &#39;3&#39; ]
tokenize(TOKEN_G, &#39;3x + 4&#39;)
// [ &#39;3&#39;, &#39;+&#39;, &#39;4&#39; ]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>g</code>ä¿®é¥°ç¬¦ä¼šå¿½ç•¥éæ³•å­—ç¬¦ï¼Œè€Œ<code>y</code>ä¿®é¥°ç¬¦ä¸ä¼šï¼Œè¿™æ ·å°±å¾ˆå®¹æ˜“å‘ç°é”™è¯¯ã€‚</p>
<h2 id="stickyå±æ€§"><a href="#stickyå±æ€§" class="headerlink" title="stickyå±æ€§"></a>stickyå±æ€§</h2><p>ä¸<code>y</code>ä¿®é¥°ç¬¦ç›¸åŒ¹é…ï¼ŒES6çš„æ­£åˆ™å¯¹è±¡å¤šäº†<code>sticky</code>å±æ€§ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†<code>y</code>ä¿®é¥°ç¬¦ã€‚</p>
<pre><code class="javascript">var r = /hello\d/y;
r.sticky // true
</code></pre>
<h2 id="flagså±æ€§"><a href="#flagså±æ€§" class="headerlink" title="flagså±æ€§"></a>flagså±æ€§</h2><p>ES6ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ–°å¢äº†<code>flags</code>å±æ€§ï¼Œä¼šè¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ã€‚</p>
<pre><code class="javascript">// ES5çš„sourceå±æ€§
// è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„æ­£æ–‡
/abc/ig.source
// &quot;abc&quot;

// ES6çš„flagså±æ€§
// è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦
/abc/ig.flags
// &#39;gi&#39;
</code></pre>
<h2 id="RegExp-escape"><a href="#RegExp-escape" class="headerlink" title="RegExp.escape()"></a>RegExp.escape()</h2><p>å­—ç¬¦ä¸²å¿…é¡»è½¬ä¹‰ï¼Œæ‰èƒ½ä½œä¸ºæ­£åˆ™æ¨¡å¼ã€‚</p>
<pre><code class="javascript">function escapeRegExp(str) {
  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, &#39;\\$&amp;&#39;);
}

let str = &#39;/path/to/resource.html?search=query&#39;;
escapeRegExp(str)
// &quot;\/path\/to\/resource\.html\?search=query&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>str</code>æ˜¯ä¸€ä¸ªæ­£å¸¸å­—ç¬¦ä¸²ï¼Œå¿…é¡»ä½¿ç”¨åæ–œæ å¯¹å…¶ä¸­çš„ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰ï¼Œæ‰èƒ½ç”¨æ¥ä½œä¸ºä¸€ä¸ªæ­£åˆ™åŒ¹é…çš„æ¨¡å¼ã€‚</p>
<p>å·²ç»æœ‰<a href="https://esdiscuss.org/topic/regexp-escape" target="_blank" rel="external">æè®®</a>å°†è¿™ä¸ªéœ€æ±‚æ ‡å‡†åŒ–ï¼Œä½œä¸ºRegExpå¯¹è±¡çš„é™æ€æ–¹æ³•<a href="https://github.com/benjamingr/RexExp.escape" target="_blank" rel="external">RegExp.escape()</a>ï¼Œæ”¾å…¥ES7ã€‚2015å¹´7æœˆ31æ—¥ï¼ŒTC39è®¤ä¸ºï¼Œè¿™ä¸ªæ–¹æ³•æœ‰å®‰å…¨é£é™©ï¼Œåˆä¸æ„¿è¿™ä¸ªæ–¹æ³•å˜å¾—è¿‡äºå¤æ‚ï¼Œæ²¡æœ‰åŒæ„å°†å…¶åˆ—å…¥ES7ï¼Œä½†è¿™ä¸å¤±ä¸ºä¸€ä¸ªçœŸå®çš„éœ€æ±‚ã€‚</p>
<pre><code class="javascript">RegExp.escape(&#39;The Quick Brown Fox&#39;);
// &quot;The Quick Brown Fox&quot;

RegExp.escape(&#39;Buy it. use it. break it. fix it.&#39;);
// &quot;Buy it\. use it\. break it\. fix it\.&quot;

RegExp.escape(&#39;(*.*)&#39;);
// &quot;\(\*\.\*\)&quot;
</code></pre>
<p>å­—ç¬¦ä¸²è½¬ä¹‰ä»¥åï¼Œå¯ä»¥ä½¿ç”¨RegExpæ„é€ å‡½æ•°ç”Ÿæˆæ­£åˆ™æ¨¡å¼ã€‚</p>
<pre><code class="javascript">var str = &#39;hello. how are you?&#39;;
var regex = new RegExp(RegExp.escape(str), &#39;g&#39;);
assert.equal(String(regex), &#39;/hello\. how are you\?/g&#39;);
</code></pre>
<p>ç›®å‰ï¼Œè¯¥æ–¹æ³•å¯ä»¥ç”¨ä¸Šæ–‡çš„<code>escapeRegExp</code>å‡½æ•°æˆ–è€…å«ç‰‡æ¨¡å—<a href="https://github.com/ljharb/regexp.escape" target="_blank" rel="external">regexp.escape</a>å®ç°ã€‚</p>
<pre><code class="javascript">var escape = require(&#39;regexp.escape&#39;);
escape(&#39;hi. how are you?&#39;);
// &quot;hi\\. how are you\\?&quot;
</code></pre>
<h2 id="s-ä¿®é¥°ç¬¦ï¼šdotAll-æ¨¡å¼"><a href="#s-ä¿®é¥°ç¬¦ï¼šdotAll-æ¨¡å¼" class="headerlink" title="s ä¿®é¥°ç¬¦ï¼šdotAll æ¨¡å¼"></a>s ä¿®é¥°ç¬¦ï¼šdotAll æ¨¡å¼</h2><p>æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œç‚¹ï¼ˆ<code>.</code>ï¼‰æ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œä»£è¡¨ä»»æ„çš„å•ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯è¡Œç»ˆæ­¢ç¬¦ï¼ˆline terminator characterï¼‰é™¤å¤–ã€‚</p>
<p>ä»¥ä¸‹å››ä¸ªå­—ç¬¦å±äºâ€è¡Œç»ˆæ­¢ç¬¦â€œã€‚</p>
<ul>
<li>U+000A æ¢è¡Œç¬¦ï¼ˆ<code>\n</code>ï¼‰</li>
<li>U+000D å›è½¦ç¬¦ï¼ˆ<code>\r</code>ï¼‰</li>
<li>U+2028 è¡Œåˆ†éš”ç¬¦ï¼ˆline separatorï¼‰</li>
<li>U+2029 æ®µåˆ†éš”ç¬¦ï¼ˆparagraph separatorï¼‰</li>
</ul>
<pre><code class="javascript">/foo.bar/.test(&#39;foo\nbar&#39;)
// false
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå› ä¸º<code>.</code>ä¸åŒ¹é…<code>\n</code>ï¼Œæ‰€ä»¥æ­£åˆ™è¡¨è¾¾å¼è¿”å›<code>false</code>ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¸Œæœ›åŒ¹é…çš„æ˜¯ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œè¿™æ—¶æœ‰ä¸€ç§å˜é€šçš„å†™æ³•ã€‚</p>
<pre><code class="javascript">/foo[^]bar/.test(&#39;foo\nbar&#39;)
// true
</code></pre>
<p>è¿™ç§è§£å†³æ–¹æ¡ˆæ¯•ç«Ÿä¸å¤ªç¬¦åˆç›´è§‰ï¼Œæ‰€ä»¥ç°åœ¨æœ‰ä¸€ä¸ª<a href="https://github.com/mathiasbynens/es-regexp-dotall-flag" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œå¼•å…¥<code>/s</code>ä¿®é¥°ç¬¦ï¼Œä½¿å¾—<code>.</code>å¯ä»¥åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ã€‚</p>
<pre><code class="javascript">/foo.bar/s.test(&#39;foo\nbar&#39;) // true
</code></pre>
<p>è¿™è¢«ç§°ä¸º<code>dotAll</code>æ¨¡å¼ï¼Œå³ç‚¹ï¼ˆdotï¼‰ä»£è¡¨ä¸€åˆ‡å­—ç¬¦ã€‚æ‰€ä»¥ï¼Œæ­£åˆ™è¡¨è¾¾å¼è¿˜å¼•å…¥äº†ä¸€ä¸ª<code>dotAll</code>å±æ€§ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦å¤„åœ¨<code>dotAll</code>æ¨¡å¼ã€‚</p>
<pre><code class="javascript">const re = /foo.bar/s;
// å¦ä¸€ç§å†™æ³•
// const re = new RegExp(&#39;foo.bar&#39;, &#39;s&#39;);

re.test(&#39;foo\nbar&#39;) // true
re.dotAll // true
re.flags // &#39;s&#39;
</code></pre>
<p><code>/s</code>ä¿®é¥°ç¬¦å’Œå¤šè¡Œä¿®é¥°ç¬¦<code>/m</code>ä¸å†²çªï¼Œä¸¤è€…ä¸€èµ·ä½¿ç”¨çš„æƒ…å†µä¸‹ï¼Œ<code>.</code>åŒ¹é…æ‰€æœ‰å­—ç¬¦ï¼Œè€Œ<code>^</code>å’Œ<code>$</code>åŒ¹é…æ¯ä¸€è¡Œçš„è¡Œé¦–å’Œè¡Œå°¾ã€‚</p>
<h2 id="åè¡Œæ–­è¨€"><a href="#åè¡Œæ–­è¨€" class="headerlink" title="åè¡Œæ–­è¨€"></a>åè¡Œæ–­è¨€</h2><p>JavaScriptè¯­è¨€çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåªæ”¯æŒå…ˆè¡Œæ–­è¨€ï¼ˆlookaheadï¼‰å’Œå…ˆè¡Œå¦å®šæ–­è¨€ï¼ˆnegative lookaheadï¼‰ï¼Œä¸æ”¯æŒåè¡Œæ–­è¨€ï¼ˆlookbehindï¼‰å’Œåè¡Œå¦å®šæ–­è¨€ï¼ˆnegative lookbehindï¼‰ã€‚</p>
<p>ç›®å‰ï¼Œæœ‰ä¸€ä¸ª<a href="https://github.com/goyakin/es-regexp-lookbehind" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œåœ¨ES7åŠ å…¥åè¡Œæ–­è¨€ã€‚V8å¼•æ“4.9ç‰ˆå·²ç»æ”¯æŒï¼ŒChromeæµè§ˆå™¨49ç‰ˆæ‰“å¼€â€experimental JavaScript featuresâ€œå¼€å…³ï¼ˆåœ°å€æ é”®å…¥<code>about:flags</code>ï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™é¡¹åŠŸèƒ½ã€‚</p>
<p>â€å…ˆè¡Œæ–­è¨€â€œæŒ‡çš„æ˜¯ï¼Œ<code>x</code>åªæœ‰åœ¨<code>y</code>å‰é¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ<code>/x(?=y)/</code>ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ç™¾åˆ†å·ä¹‹å‰çš„æ•°å­—ï¼Œè¦å†™æˆ<code>/\d+(?=%)/</code>ã€‚â€å…ˆè¡Œå¦å®šæ–­è¨€â€œæŒ‡çš„æ˜¯ï¼Œ<code>x</code>åªæœ‰ä¸åœ¨<code>y</code>å‰é¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ<code>/x(?!y)/</code>ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ä¸åœ¨ç™¾åˆ†å·ä¹‹å‰çš„æ•°å­—ï¼Œè¦å†™æˆ<code>/\d+(?!%)/</code>ã€‚</p>
<pre><code class="javascript">/\d+(?=%)/.exec(&#39;100% of US presidents have been male&#39;)  // [&quot;100&quot;]
/\d+(?!%)/.exec(&#39;thatâ€™s all 44 of them&#39;)                 // [&quot;44&quot;]
</code></pre>
<p>ä¸Šé¢ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœäº’æ¢æ­£åˆ™è¡¨è¾¾å¼ï¼Œå°±ä¼šåŒ¹é…å¤±è´¥ã€‚å¦å¤–ï¼Œè¿˜å¯ä»¥çœ‹åˆ°ï¼Œâ€å…ˆè¡Œæ–­è¨€â€œæ‹¬å·ä¹‹ä¸­çš„éƒ¨åˆ†ï¼ˆ<code>(?=%)</code>ï¼‰ï¼Œæ˜¯ä¸è®¡å…¥è¿”å›ç»“æœçš„ã€‚</p>
<p>â€œåè¡Œæ–­è¨€â€æ­£å¥½ä¸â€å…ˆè¡Œæ–­è¨€â€ç›¸åï¼Œ<code>x</code>åªæœ‰åœ¨<code>y</code>åé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ<code>/(?&lt;=y)x/</code>ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ç¾å…ƒç¬¦å·ä¹‹åçš„æ•°å­—ï¼Œè¦å†™æˆ<code>/(?&lt;=\$)\d+/</code>ã€‚â€åè¡Œå¦å®šæ–­è¨€â€œåˆ™ä¸â€å…ˆè¡Œå¦å®šæ–­è¨€â€œç›¸åï¼Œ<code>x</code>åªæœ‰ä¸åœ¨<code>y</code>åé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ<code>/(?&lt;!y)x/</code>ã€‚æ¯”å¦‚ï¼ŒåªåŒ¹é…ä¸åœ¨ç¾å…ƒç¬¦å·åé¢çš„æ•°å­—ï¼Œè¦å†™æˆ<code>/(?&lt;!\$)\d+/</code>ã€‚</p>
<pre><code class="javascript">/(?&lt;=\$)\d+/.exec(&#39;Benjamin Franklin is on the $100 bill&#39;)  // [&quot;100&quot;]
/(?&lt;!\$)\d+/.exec(&#39;itâ€™s is worth about â‚¬90&#39;)                // [&quot;90&quot;]
</code></pre>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œâ€åè¡Œæ–­è¨€â€çš„æ‹¬å·ä¹‹ä¸­çš„éƒ¨åˆ†ï¼ˆ<code>(?&lt;=\$)</code>ï¼‰ï¼Œä¹Ÿæ˜¯ä¸è®¡å…¥è¿”å›ç»“æœã€‚</p>
<p>â€œåè¡Œæ–­è¨€â€çš„å®ç°ï¼Œéœ€è¦å…ˆåŒ¹é…<code>/(?&lt;=y)x/</code>çš„<code>x</code>ï¼Œç„¶åå†å›åˆ°å·¦è¾¹ï¼ŒåŒ¹é…<code>y</code>çš„éƒ¨åˆ†ã€‚è¿™ç§â€å…ˆå³åå·¦â€çš„æ‰§è¡Œé¡ºåºï¼Œä¸æ‰€æœ‰å…¶ä»–æ­£åˆ™æ“ä½œç›¸åï¼Œå¯¼è‡´äº†ä¸€äº›ä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸ºã€‚</p>
<p>é¦–å…ˆï¼Œâ€åè¡Œæ–­è¨€â€œçš„ç»„åŒ¹é…ï¼Œä¸æ­£å¸¸æƒ…å†µä¸‹ç»“æœæ˜¯ä¸ä¸€æ ·çš„ã€‚</p>
<pre><code class="javascript">/(?&lt;=(\d+)(\d+))$/.exec(&#39;1053&#39;) // [&quot;&quot;, &quot;1&quot;, &quot;053&quot;]
/^(\d+)(\d+)$/.exec(&#39;1053&#39;) // [&quot;1053&quot;, &quot;105&quot;, &quot;3&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œéœ€è¦æ•æ‰ä¸¤ä¸ªç»„åŒ¹é…ã€‚æ²¡æœ‰â€åè¡Œæ–­è¨€â€æ—¶ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·æ˜¯è´ªå©ªæ¨¡å¼ï¼Œç¬¬äºŒä¸ªæ‹¬å·åªèƒ½æ•è·ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœæ˜¯<code>105</code>å’Œ<code>3</code>ã€‚è€Œâ€åè¡Œæ–­è¨€â€æ—¶ï¼Œç”±äºæ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦ï¼Œç¬¬äºŒä¸ªæ‹¬å·æ˜¯è´ªå©ªæ¨¡å¼ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·åªèƒ½æ•è·ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœæ˜¯<code>1</code>å’Œ<code>053</code>ã€‚</p>
<p>å…¶æ¬¡ï¼Œâ€åè¡Œæ–­è¨€â€çš„åæ–œæ å¼•ç”¨ï¼Œä¹Ÿä¸é€šå¸¸çš„é¡ºåºç›¸åï¼Œå¿…é¡»æ”¾åœ¨å¯¹åº”çš„é‚£ä¸ªæ‹¬å·ä¹‹å‰ã€‚</p>
<pre><code class="javascript">/(?&lt;=(o)d\1)r/.exec(&#39;hodor&#39;)  // null
/(?&lt;=\1d(o))r/.exec(&#39;hodor&#39;)  // [&quot;r&quot;, &quot;o&quot;]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœåè¡Œæ–­è¨€çš„åæ–œæ å¼•ç”¨ï¼ˆ<code>\1</code>ï¼‰æ”¾åœ¨æ‹¬å·çš„åé¢ï¼Œå°±ä¸ä¼šå¾—åˆ°åŒ¹é…ç»“æœï¼Œå¿…é¡»æ”¾åœ¨å‰é¢æ‰å¯ä»¥ã€‚</p>
<h2 id="Unicodeå±æ€§ç±»"><a href="#Unicodeå±æ€§ç±»" class="headerlink" title="Unicodeå±æ€§ç±»"></a>Unicodeå±æ€§ç±»</h2><p>ç›®å‰ï¼Œæœ‰ä¸€ä¸ª<a href="https://github.com/mathiasbynens/es-regexp-unicode-property-escapes" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œå¼•å…¥äº†ä¸€ç§æ–°çš„ç±»çš„å†™æ³•<code>\p{...}</code>å’Œ<code>\P{...}</code>ï¼Œå…è®¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç¬¦åˆUnicodeæŸç§å±æ€§çš„æ‰€æœ‰å­—ç¬¦ã€‚</p>
<pre><code class="javascript">const regexGreekSymbol = /\p{Script=Greek}/u;
regexGreekSymbol.test(&#39;Ï€&#39;) // u
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>\p{Script=Greek}</code>æŒ‡å®šåŒ¹é…ä¸€ä¸ªå¸Œè…Šæ–‡å­—æ¯ï¼Œæ‰€ä»¥åŒ¹é…<code>Ï€</code>æˆåŠŸã€‚</p>
<p>Unicodeå±æ€§ç±»è¦æŒ‡å®šå±æ€§åå’Œå±æ€§å€¼ã€‚</p>
<pre><code class="javascript">\p{UnicodePropertyName=UnicodePropertyValue}
</code></pre>
<p>å¯¹äºæŸäº›å±æ€§ï¼Œå¯ä»¥åªå†™å±æ€§åã€‚</p>
<pre><code class="javascript">\p{UnicodePropertyName}
</code></pre>
<p><code>\P{â€¦}</code>æ˜¯<code>\p{â€¦}</code>çš„åå‘åŒ¹é…ï¼Œå³åŒ¹é…ä¸æ»¡è¶³æ¡ä»¶çš„å­—ç¬¦ã€‚</p>
<p>æ³¨æ„ï¼Œè¿™ä¸¤ç§ç±»åªå¯¹Unicodeæœ‰æ•ˆï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™ä¸€å®šè¦åŠ ä¸Š<code>u</code>ä¿®é¥°ç¬¦ã€‚å¦‚æœä¸åŠ <code>u</code>ä¿®é¥°ç¬¦ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨<code>\p</code>å’Œ<code>\P</code>ä¼šæŠ¥é”™ï¼ŒECMAScripté¢„ç•™äº†è¿™ä¸¤ä¸ªç±»ã€‚</p>
<p>ç”±äºUnicodeçš„å„ç§å±æ€§éå¸¸å¤šï¼Œæ‰€ä»¥è¿™ç§æ–°çš„ç±»çš„è¡¨è¾¾èƒ½åŠ›éå¸¸å¼ºã€‚</p>
<pre><code class="javascript">const regex = /^\p{Decimal_Number}+$/u;
regex.test(&#39;ğŸğŸğŸ‘ğŸœğŸğŸğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸºğŸ»ğŸ¼&#39;) // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå±æ€§ç±»æŒ‡å®šåŒ¹é…æ‰€æœ‰åè¿›åˆ¶å­—ç¬¦ï¼Œå¯ä»¥çœ‹åˆ°å„ç§å­—å‹çš„åè¿›åˆ¶å­—ç¬¦éƒ½ä¼šåŒ¹é…æˆåŠŸã€‚</p>
<p><code>\p{Number}</code>ç”šè‡³èƒ½åŒ¹é…ç½—é©¬æ•°å­—ã€‚</p>
<pre><code class="javascript">// åŒ¹é…æ‰€æœ‰æ•°å­—
const regex = /^\p{Number}+$/u;
regex.test(&#39;Â²Â³Â¹Â¼Â½Â¾&#39;) // true
regex.test(&#39;ã‰›ã‰œã‰&#39;) // true
regex.test(&#39;â… â…¡â…¢â…£â…¤â…¥â…¦â…§â…¨â…©â…ªâ…«&#39;) // true
</code></pre>
<p>ä¸‹é¢æ˜¯å…¶ä»–ä¸€äº›ä¾‹å­ã€‚</p>
<pre><code class="javascript">// åŒ¹é…å„ç§æ–‡å­—çš„æ‰€æœ‰å­—æ¯ï¼Œç­‰åŒäºUnicodeç‰ˆçš„\w
[\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}\p{Join_Control}]

// åŒ¹é…å„ç§æ–‡å­—çš„æ‰€æœ‰éå­—æ¯çš„å­—ç¬¦ï¼Œç­‰åŒäºUnicodeç‰ˆçš„\W
[^\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}\p{Join_Control}]

// åŒ¹é…æ‰€æœ‰çš„ç®­å¤´å­—ç¬¦
const regexArrows = /^\p{Block=Arrows}+$/u;
regexArrows.test(&#39;â†â†‘â†’â†“â†”â†•â†–â†—â†˜â†™â‡â‡â‡‘â‡’â‡“â‡”â‡•â‡–â‡—â‡˜â‡™â‡§â‡©&#39;) // true
</code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;æ­£åˆ™çš„æ‰©å±•&quot;&gt;&lt;a href=&quot;#æ­£åˆ™çš„æ‰©å±•&quot; class=&quot;headerlink&quot; title=&quot;æ­£åˆ™çš„æ‰©å±•&quot;&gt;&lt;/a&gt;æ­£åˆ™çš„æ‰©å±•&lt;/h1&gt;&lt;h2 id=&quot;RegExpæ„é€ å‡½æ•°&quot;&gt;&lt;a href=&quot;#RegExpæ„é€ å‡½æ•°&quot; class=&quot;headerlink&quot; 
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="RegExp" scheme="https://microzz.com/tags/RegExp/"/>
    
      <category term="æ­£åˆ™è¡¨è¾¾å¼" scheme="https://microzz.com/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>å­—ç¬¦ä¸²çš„æ‰©å±•</title>
    <link href="https://microzz.com/2016/11/15/string/"/>
    <id>https://microzz.com/2016/11/15/string/</id>
    <published>2016-11-15T07:45:19.000Z</published>
    <updated>2017-01-12T07:49:44.277Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å­—ç¬¦ä¸²çš„æ‰©å±•"><a href="#å­—ç¬¦ä¸²çš„æ‰©å±•" class="headerlink" title="å­—ç¬¦ä¸²çš„æ‰©å±•"></a>å­—ç¬¦ä¸²çš„æ‰©å±•</h1><p>ES6åŠ å¼ºäº†å¯¹Unicodeçš„æ”¯æŒï¼Œå¹¶ä¸”æ‰©å±•äº†å­—ç¬¦ä¸²å¯¹è±¡ã€‚</p>
<h2 id="å­—ç¬¦çš„Unicodeè¡¨ç¤ºæ³•"><a href="#å­—ç¬¦çš„Unicodeè¡¨ç¤ºæ³•" class="headerlink" title="å­—ç¬¦çš„Unicodeè¡¨ç¤ºæ³•"></a>å­—ç¬¦çš„Unicodeè¡¨ç¤ºæ³•</h2><p>JavaScriptå…è®¸é‡‡ç”¨<code>\uxxxx</code>å½¢å¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­â€œxxxxâ€è¡¨ç¤ºå­—ç¬¦çš„ç ç‚¹ã€‚</p>
<pre><code class="javascript">&quot;\u0061&quot;
// &quot;a&quot;
</code></pre>
<p>ä½†æ˜¯ï¼Œè¿™ç§è¡¨ç¤ºæ³•åªé™äº<code>\u0000</code>â€”â€”<code>\uFFFF</code>ä¹‹é—´çš„å­—ç¬¦ã€‚è¶…å‡ºè¿™ä¸ªèŒƒå›´çš„å­—ç¬¦ï¼Œå¿…é¡»ç”¨ä¸¤ä¸ªåŒå­—èŠ‚çš„å½¢å¼è¡¨è¾¾ã€‚</p>
<pre><code class="javascript">&quot;\uD842\uDFB7&quot;
// &quot;ğ ®·&quot;

&quot;\u20BB7&quot;
// &quot; 7&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœç›´æ¥åœ¨<code>\u</code>åé¢è·Ÿä¸Šè¶…è¿‡<code>0xFFFF</code>çš„æ•°å€¼ï¼ˆæ¯”å¦‚<code>\u20BB7</code>ï¼‰ï¼ŒJavaScriptä¼šç†è§£æˆ<code>\u20BB+7</code>ã€‚ç”±äº<code>\u20BB</code>æ˜¯ä¸€ä¸ªä¸å¯æ‰“å°å­—ç¬¦ï¼Œæ‰€ä»¥åªä¼šæ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼ï¼Œåé¢è·Ÿç€ä¸€ä¸ª<code>7</code>ã€‚</p>
<p>ES6 å¯¹è¿™ä¸€ç‚¹åšå‡ºäº†æ”¹è¿›ï¼Œåªè¦å°†ç ç‚¹æ”¾å…¥å¤§æ‹¬å·ï¼Œå°±èƒ½æ­£ç¡®è§£è¯»è¯¥å­—ç¬¦ã€‚</p>
<pre><code class="javascript">&quot;\u{20BB7}&quot;
// &quot;ğ ®·&quot;

&quot;\u{41}\u{42}\u{43}&quot;
// &quot;ABC&quot;

let hello = 123;
hell\u{6F} // 123

&#39;\u{1F680}&#39; === &#39;\uD83D\uDE80&#39;
// true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæœ€åä¸€ä¸ªä¾‹å­è¡¨æ˜ï¼Œå¤§æ‹¬å·è¡¨ç¤ºæ³•ä¸å››å­—èŠ‚çš„UTF-16ç¼–ç æ˜¯ç­‰ä»·çš„ã€‚</p>
<p>æœ‰äº†è¿™ç§è¡¨ç¤ºæ³•ä¹‹åï¼ŒJavaScriptå…±æœ‰6ç§æ–¹æ³•å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚</p>
<pre><code class="javascript">&#39;\z&#39; === &#39;z&#39;  // true
&#39;\172&#39; === &#39;z&#39; // true
&#39;\x7A&#39; === &#39;z&#39; // true
&#39;\u007A&#39; === &#39;z&#39; // true
&#39;\u{7A}&#39; === &#39;z&#39; // true
</code></pre>
<h2 id="codePointAt"><a href="#codePointAt" class="headerlink" title="codePointAt()"></a>codePointAt()</h2><p>JavaScriptå†…éƒ¨ï¼Œå­—ç¬¦ä»¥UTF-16çš„æ ¼å¼å‚¨å­˜ï¼Œæ¯ä¸ªå­—ç¬¦å›ºå®šä¸º<code>2</code>ä¸ªå­—èŠ‚ã€‚å¯¹äºé‚£äº›éœ€è¦<code>4</code>ä¸ªå­—èŠ‚å‚¨å­˜çš„å­—ç¬¦ï¼ˆUnicodeç ç‚¹å¤§äº<code>0xFFFF</code>çš„å­—ç¬¦ï¼‰ï¼ŒJavaScriptä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ä¸¤ä¸ªå­—ç¬¦ã€‚</p>
<pre><code class="javascript">var s = &quot;ğ ®·&quot;;

s.length // 2
s.charAt(0) // &#39;&#39;
s.charAt(1) // &#39;&#39;
s.charCodeAt(0) // 55362
s.charCodeAt(1) // 57271
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ±‰å­—â€œğ ®·â€ï¼ˆæ³¨æ„ï¼Œè¿™ä¸ªå­—ä¸æ˜¯â€å‰ç¥¥â€œçš„â€å‰â€œï¼‰çš„ç ç‚¹æ˜¯<code>0x20BB7</code>ï¼ŒUTF-16ç¼–ç ä¸º<code>0xD842 0xDFB7</code>ï¼ˆåè¿›åˆ¶ä¸º<code>55362 57271</code>ï¼‰ï¼Œéœ€è¦<code>4</code>ä¸ªå­—èŠ‚å‚¨å­˜ã€‚å¯¹äºè¿™ç§<code>4</code>ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼ŒJavaScriptä¸èƒ½æ­£ç¡®å¤„ç†ï¼Œå­—ç¬¦ä¸²é•¿åº¦ä¼šè¯¯åˆ¤ä¸º<code>2</code>ï¼Œè€Œä¸”<code>charAt</code>æ–¹æ³•æ— æ³•è¯»å–æ•´ä¸ªå­—ç¬¦ï¼Œ<code>charCodeAt</code>æ–¹æ³•åªèƒ½åˆ†åˆ«è¿”å›å‰ä¸¤ä¸ªå­—èŠ‚å’Œåä¸¤ä¸ªå­—èŠ‚çš„å€¼ã€‚</p>
<p>ES6æä¾›äº†<code>codePointAt</code>æ–¹æ³•ï¼Œèƒ½å¤Ÿæ­£ç¡®å¤„ç†4ä¸ªå­—èŠ‚å‚¨å­˜çš„å­—ç¬¦ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦çš„ç ç‚¹ã€‚</p>
<pre><code class="javascript">var s = &#39;ğ ®·a&#39;;

s.codePointAt(0) // 134071
s.codePointAt(1) // 57271

s.codePointAt(2) // 97
</code></pre>
<p><code>codePointAt</code>æ–¹æ³•çš„å‚æ•°ï¼Œæ˜¯å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰ã€‚ä¸Šé¢ä»£ç ä¸­ï¼ŒJavaScriptå°†â€œğ ®·aâ€è§†ä¸ºä¸‰ä¸ªå­—ç¬¦ï¼ŒcodePointAtæ–¹æ³•åœ¨ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸Šï¼Œæ­£ç¡®åœ°è¯†åˆ«äº†â€œğ ®·â€ï¼Œè¿”å›äº†å®ƒçš„åè¿›åˆ¶ç ç‚¹134071ï¼ˆå³åå…­è¿›åˆ¶çš„<code>20BB7</code>ï¼‰ã€‚åœ¨ç¬¬äºŒä¸ªå­—ç¬¦ï¼ˆå³â€œğ ®·â€çš„åä¸¤ä¸ªå­—èŠ‚ï¼‰å’Œç¬¬ä¸‰ä¸ªå­—ç¬¦â€œaâ€ä¸Šï¼Œ<code>codePointAt</code>æ–¹æ³•çš„ç»“æœä¸<code>charCodeAt</code>æ–¹æ³•ç›¸åŒã€‚</p>
<p>æ€»ä¹‹ï¼Œ<code>codePointAt</code>æ–¹æ³•ä¼šæ­£ç¡®è¿”å›32ä½çš„UTF-16å­—ç¬¦çš„ç ç‚¹ã€‚å¯¹äºé‚£äº›ä¸¤ä¸ªå­—èŠ‚å‚¨å­˜çš„å¸¸è§„å­—ç¬¦ï¼Œå®ƒçš„è¿”å›ç»“æœä¸<code>charCodeAt</code>æ–¹æ³•ç›¸åŒã€‚</p>
<p><code>codePointAt</code>æ–¹æ³•è¿”å›çš„æ˜¯ç ç‚¹çš„åè¿›åˆ¶å€¼ï¼Œå¦‚æœæƒ³è¦åå…­è¿›åˆ¶çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨<code>toString</code>æ–¹æ³•è½¬æ¢ä¸€ä¸‹ã€‚</p>
<pre><code class="javascript">var s = &#39;ğ ®·a&#39;;

s.codePointAt(0).toString(16) // &quot;20bb7&quot;
s.codePointAt(2).toString(16) // &quot;61&quot;
</code></pre>
<p>ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œ<code>codePointAt</code>æ–¹æ³•çš„å‚æ•°ï¼Œä»ç„¶æ˜¯ä¸æ­£ç¡®çš„ã€‚æ¯”å¦‚ï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦<code>a</code>åœ¨å­—ç¬¦ä¸²<code>s</code>çš„æ­£ç¡®ä½ç½®åºå·åº”è¯¥æ˜¯1ï¼Œä½†æ˜¯å¿…é¡»å‘<code>codePointAt</code>æ–¹æ³•ä¼ å…¥2ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªåŠæ³•æ˜¯ä½¿ç”¨<code>for...of</code>å¾ªç¯ï¼Œå› ä¸ºå®ƒä¼šæ­£ç¡®è¯†åˆ«32ä½çš„UTF-16å­—ç¬¦ã€‚</p>
<pre><code class="javascript">var s = &#39;ğ ®·a&#39;;
for (let ch of s) {
  console.log(ch.codePointAt(0).toString(16));
}
// 20bb7
// 61
</code></pre>
<p><code>codePointAt</code>æ–¹æ³•æ˜¯æµ‹è¯•ä¸€ä¸ªå­—ç¬¦ç”±ä¸¤ä¸ªå­—èŠ‚è¿˜æ˜¯ç”±å››ä¸ªå­—èŠ‚ç»„æˆçš„æœ€ç®€å•æ–¹æ³•ã€‚</p>
<pre><code class="javascript">function is32Bit(c) {
  return c.codePointAt(0) &gt; 0xFFFF;
}

is32Bit(&quot;ğ ®·&quot;) // true
is32Bit(&quot;a&quot;) // false
</code></pre>
<h2 id="String-fromCodePoint"><a href="#String-fromCodePoint" class="headerlink" title="String.fromCodePoint()"></a>String.fromCodePoint()</h2><p>ES5æä¾›<code>String.fromCharCode</code>æ–¹æ³•ï¼Œç”¨äºä»ç ç‚¹è¿”å›å¯¹åº”å­—ç¬¦ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸èƒ½è¯†åˆ«32ä½çš„UTF-16å­—ç¬¦ï¼ˆUnicodeç¼–å·å¤§äº<code>0xFFFF</code>ï¼‰ã€‚</p>
<pre><code class="javascript">String.fromCharCode(0x20BB7)
// &quot;à®·&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>String.fromCharCode</code>ä¸èƒ½è¯†åˆ«å¤§äº<code>0xFFFF</code>çš„ç ç‚¹ï¼Œæ‰€ä»¥<code>0x20BB7</code>å°±å‘ç”Ÿäº†æº¢å‡ºï¼Œæœ€é«˜ä½<code>2</code>è¢«èˆå¼ƒäº†ï¼Œæœ€åè¿”å›ç ç‚¹<code>U+0BB7</code>å¯¹åº”çš„å­—ç¬¦ï¼Œè€Œä¸æ˜¯ç ç‚¹<code>U+20BB7</code>å¯¹åº”çš„å­—ç¬¦ã€‚</p>
<p>ES6æä¾›äº†<code>String.fromCodePoint</code>æ–¹æ³•ï¼Œå¯ä»¥è¯†åˆ«<code>0xFFFF</code>çš„å­—ç¬¦ï¼Œå¼¥è¡¥äº†<code>String.fromCharCode</code>æ–¹æ³•çš„ä¸è¶³ã€‚åœ¨ä½œç”¨ä¸Šï¼Œæ­£å¥½ä¸<code>codePointAt</code>æ–¹æ³•ç›¸åã€‚</p>
<pre><code class="javascript">String.fromCodePoint(0x20BB7)
// &quot;ğ ®·&quot;
String.fromCodePoint(0x78, 0x1f680, 0x79) === &#39;x\uD83D\uDE80y&#39;
// true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœ<code>String.fromCodePoint</code>æ–¹æ³•æœ‰å¤šä¸ªå‚æ•°ï¼Œåˆ™å®ƒä»¬ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›ã€‚</p>
<p>æ³¨æ„ï¼Œ<code>fromCodePoint</code>æ–¹æ³•å®šä¹‰åœ¨<code>String</code>å¯¹è±¡ä¸Šï¼Œè€Œ<code>codePointAt</code>æ–¹æ³•å®šä¹‰åœ¨å­—ç¬¦ä¸²çš„å®ä¾‹å¯¹è±¡ä¸Šã€‚</p>
<h2 id="å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£"><a href="#å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£" class="headerlink" title="å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£"></a>å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£</h2><p>ES6ä¸ºå­—ç¬¦ä¸²æ·»åŠ äº†éå†å™¨æ¥å£ï¼ˆè¯¦è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œä½¿å¾—å­—ç¬¦ä¸²å¯ä»¥è¢«<code>for...of</code>å¾ªç¯éå†ã€‚</p>
<pre><code class="javascript">for (let codePoint of &#39;foo&#39;) {
  console.log(codePoint)
}
// &quot;f&quot;
// &quot;o&quot;
// &quot;o&quot;
</code></pre>
<p>é™¤äº†éå†å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªéå†å™¨æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å¯ä»¥è¯†åˆ«å¤§äº<code>0xFFFF</code>çš„ç ç‚¹ï¼Œä¼ ç»Ÿçš„<code>for</code>å¾ªç¯æ— æ³•è¯†åˆ«è¿™æ ·çš„ç ç‚¹ã€‚</p>
<pre><code class="javascript">var text = String.fromCodePoint(0x20BB7);

for (let i = 0; i &lt; text.length; i++) {
  console.log(text[i]);
}
// &quot; &quot;
// &quot; &quot;

for (let i of text) {
  console.log(i);
}
// &quot;ğ ®·&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²<code>text</code>åªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯<code>for</code>å¾ªç¯ä¼šè®¤ä¸ºå®ƒåŒ…å«ä¸¤ä¸ªå­—ç¬¦ï¼ˆéƒ½ä¸å¯æ‰“å°ï¼‰ï¼Œè€Œ<code>for...of</code>å¾ªç¯ä¼šæ­£ç¡®è¯†åˆ«å‡ºè¿™ä¸€ä¸ªå­—ç¬¦ã€‚</p>
<h2 id="at"><a href="#at" class="headerlink" title="at()"></a>at()</h2><p>ES5å¯¹å­—ç¬¦ä¸²å¯¹è±¡æä¾›<code>charAt</code>æ–¹æ³•ï¼Œè¿”å›å­—ç¬¦ä¸²ç»™å®šä½ç½®çš„å­—ç¬¦ã€‚è¯¥æ–¹æ³•ä¸èƒ½è¯†åˆ«ç ç‚¹å¤§äº<code>0xFFFF</code>çš„å­—ç¬¦ã€‚</p>
<pre><code class="javascript">&#39;abc&#39;.charAt(0) // &quot;a&quot;
&#39;ğ ®·&#39;.charAt(0) // &quot;\uD842&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>charAt</code>æ–¹æ³•è¿”å›çš„æ˜¯UTF-16ç¼–ç çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œå®é™…ä¸Šæ˜¯æ— æ³•æ˜¾ç¤ºçš„ã€‚</p>
<p>ç›®å‰ï¼Œæœ‰ä¸€ä¸ªææ¡ˆï¼Œæå‡ºå­—ç¬¦ä¸²å®ä¾‹çš„<code>at</code>æ–¹æ³•ï¼Œå¯ä»¥è¯†åˆ«Unicodeç¼–å·å¤§äº<code>0xFFFF</code>çš„å­—ç¬¦ï¼Œè¿”å›æ­£ç¡®çš„å­—ç¬¦ã€‚</p>
<pre><code class="javascript">&#39;abc&#39;.at(0) // &quot;a&quot;
&#39;ğ ®·&#39;.at(0) // &quot;ğ ®·&quot;
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•å¯ä»¥é€šè¿‡<a href="https://github.com/es-shims/String.prototype.at" target="_blank" rel="external">å«ç‰‡åº“</a>å®ç°ã€‚</p>
<h2 id="normalize"><a href="#normalize" class="headerlink" title="normalize()"></a>normalize()</h2><p>è®¸å¤šæ¬§æ´²è¯­è¨€æœ‰è¯­è°ƒç¬¦å·å’Œé‡éŸ³ç¬¦å·ã€‚ä¸ºäº†è¡¨ç¤ºå®ƒä»¬ï¼ŒUnicodeæä¾›äº†ä¸¤ç§æ–¹æ³•ã€‚ä¸€ç§æ˜¯ç›´æ¥æä¾›å¸¦é‡éŸ³ç¬¦å·çš„å­—ç¬¦ï¼Œæ¯”å¦‚<code>Ç‘</code>ï¼ˆ\u01D1ï¼‰ã€‚å¦ä¸€ç§æ˜¯æä¾›åˆæˆç¬¦å·ï¼ˆcombining characterï¼‰ï¼Œå³åŸå­—ç¬¦ä¸é‡éŸ³ç¬¦å·çš„åˆæˆï¼Œä¸¤ä¸ªå­—ç¬¦åˆæˆä¸€ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚<code>O</code>ï¼ˆ\u004Fï¼‰å’Œ<code>Ë‡</code>ï¼ˆ\u030Cï¼‰åˆæˆ<code>Ç‘</code>ï¼ˆ\u004F\u030Cï¼‰ã€‚</p>
<p>è¿™ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ï¼Œåœ¨è§†è§‰å’Œè¯­ä¹‰ä¸Šéƒ½ç­‰ä»·ï¼Œä½†æ˜¯JavaScriptä¸èƒ½è¯†åˆ«ã€‚</p>
<pre><code class="javascript">&#39;\u01D1&#39;===&#39;\u004F\u030C&#39; //false

&#39;\u01D1&#39;.length // 1
&#39;\u004F\u030C&#39;.length // 2
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼ŒJavaScriptå°†åˆæˆå­—ç¬¦è§†ä¸ºä¸¤ä¸ªå­—ç¬¦ï¼Œå¯¼è‡´ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ä¸ç›¸ç­‰ã€‚</p>
<p>ES6æä¾›å­—ç¬¦ä¸²å®ä¾‹çš„<code>normalize()</code>æ–¹æ³•ï¼Œç”¨æ¥å°†å­—ç¬¦çš„ä¸åŒè¡¨ç¤ºæ–¹æ³•ç»Ÿä¸€ä¸ºåŒæ ·çš„å½¢å¼ï¼Œè¿™ç§°ä¸ºUnicodeæ­£è§„åŒ–ã€‚</p>
<pre><code class="javascript">&#39;\u01D1&#39;.normalize() === &#39;\u004F\u030C&#39;.normalize()
// true
</code></pre>
<p><code>normalize</code>æ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°æ¥æŒ‡å®š<code>normalize</code>çš„æ–¹å¼ï¼Œå‚æ•°çš„å››ä¸ªå¯é€‰å€¼å¦‚ä¸‹ã€‚</p>
<ul>
<li><code>NFC</code>ï¼Œé»˜è®¤å‚æ•°ï¼Œè¡¨ç¤ºâ€œæ ‡å‡†ç­‰ä»·åˆæˆâ€ï¼ˆNormalization Form Canonical Compositionï¼‰ï¼Œè¿”å›å¤šä¸ªç®€å•å­—ç¬¦çš„åˆæˆå­—ç¬¦ã€‚æ‰€è°“â€œæ ‡å‡†ç­‰ä»·â€æŒ‡çš„æ˜¯è§†è§‰å’Œè¯­ä¹‰ä¸Šçš„ç­‰ä»·ã€‚</li>
<li><code>NFD</code>ï¼Œè¡¨ç¤ºâ€œæ ‡å‡†ç­‰ä»·åˆ†è§£â€ï¼ˆNormalization Form Canonical Decompositionï¼‰ï¼Œå³åœ¨æ ‡å‡†ç­‰ä»·çš„å‰æä¸‹ï¼Œè¿”å›åˆæˆå­—ç¬¦åˆ†è§£çš„å¤šä¸ªç®€å•å­—ç¬¦ã€‚</li>
<li><code>NFKC</code>ï¼Œè¡¨ç¤ºâ€œå…¼å®¹ç­‰ä»·åˆæˆâ€ï¼ˆNormalization Form Compatibility Compositionï¼‰ï¼Œè¿”å›åˆæˆå­—ç¬¦ã€‚æ‰€è°“â€œå…¼å®¹ç­‰ä»·â€æŒ‡çš„æ˜¯è¯­ä¹‰ä¸Šå­˜åœ¨ç­‰ä»·ï¼Œä½†è§†è§‰ä¸Šä¸ç­‰ä»·ï¼Œæ¯”å¦‚â€œå›â€å’Œâ€œå–œå–œâ€ã€‚ï¼ˆè¿™åªæ˜¯ç”¨æ¥ä¸¾ä¾‹ï¼Œ<code>normalize</code>æ–¹æ³•ä¸èƒ½è¯†åˆ«ä¸­æ–‡ã€‚ï¼‰</li>
<li><code>NFKD</code>ï¼Œè¡¨ç¤ºâ€œå…¼å®¹ç­‰ä»·åˆ†è§£â€ï¼ˆNormalization Form Compatibility Decompositionï¼‰ï¼Œå³åœ¨å…¼å®¹ç­‰ä»·çš„å‰æä¸‹ï¼Œè¿”å›åˆæˆå­—ç¬¦åˆ†è§£çš„å¤šä¸ªç®€å•å­—ç¬¦ã€‚</li>
</ul>
<pre><code class="javascript">&#39;\u004F\u030C&#39;.normalize(&#39;NFC&#39;).length // 1
&#39;\u004F\u030C&#39;.normalize(&#39;NFD&#39;).length // 2
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œ<code>NFC</code>å‚æ•°è¿”å›å­—ç¬¦çš„åˆæˆå½¢å¼ï¼Œ<code>NFD</code>å‚æ•°è¿”å›å­—ç¬¦çš„åˆ†è§£å½¢å¼ã€‚</p>
<p>ä¸è¿‡ï¼Œ<code>normalize</code>æ–¹æ³•ç›®å‰ä¸èƒ½è¯†åˆ«ä¸‰ä¸ªæˆ–ä¸‰ä¸ªä»¥ä¸Šå­—ç¬¦çš„åˆæˆã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¿˜æ˜¯åªèƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œé€šè¿‡Unicodeç¼–å·åŒºé—´åˆ¤æ–­ã€‚</p>
<h2 id="includes-startsWith-endsWith"><a href="#includes-startsWith-endsWith" class="headerlink" title="includes(), startsWith(), endsWith()"></a>includes(), startsWith(), endsWith()</h2><p>ä¼ ç»Ÿä¸Šï¼ŒJavaScriptåªæœ‰<code>indexOf</code>æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ã€‚ES6åˆæä¾›äº†ä¸‰ç§æ–°æ–¹æ³•ã€‚</p>
<ul>
<li><strong>includes()</strong>ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²ã€‚</li>
<li><strong>startsWith()</strong>ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨æºå­—ç¬¦ä¸²çš„å¤´éƒ¨ã€‚</li>
<li><strong>endsWith()</strong>ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨æºå­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚</li>
</ul>
<pre><code class="javascript">var s = &#39;Hello world!&#39;;

s.startsWith(&#39;Hello&#39;) // true
s.endsWith(&#39;!&#39;) // true
s.includes(&#39;o&#39;) // true
</code></pre>
<p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºå¼€å§‹æœç´¢çš„ä½ç½®ã€‚</p>
<pre><code class="javascript">var s = &#39;Hello world!&#39;;

s.startsWith(&#39;world&#39;, 6) // true
s.endsWith(&#39;Hello&#39;, 5) // true
s.includes(&#39;Hello&#39;, 6) // false
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°<code>n</code>æ—¶ï¼Œ<code>endsWith</code>çš„è¡Œä¸ºä¸å…¶ä»–ä¸¤ä¸ªæ–¹æ³•æœ‰æ‰€ä¸åŒã€‚å®ƒé’ˆå¯¹å‰<code>n</code>ä¸ªå­—ç¬¦ï¼Œè€Œå…¶ä»–ä¸¤ä¸ªæ–¹æ³•é’ˆå¯¹ä»ç¬¬<code>n</code>ä¸ªä½ç½®ç›´åˆ°å­—ç¬¦ä¸²ç»“æŸã€‚</p>
<h2 id="repeat"><a href="#repeat" class="headerlink" title="repeat()"></a>repeat()</h2><p><code>repeat</code>æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå°†åŸå­—ç¬¦ä¸²é‡å¤<code>n</code>æ¬¡ã€‚</p>
<pre><code class="javascript">&#39;x&#39;.repeat(3) // &quot;xxx&quot;
&#39;hello&#39;.repeat(2) // &quot;hellohello&quot;
&#39;na&#39;.repeat(0) // &quot;&quot;
</code></pre>
<p>å‚æ•°å¦‚æœæ˜¯å°æ•°ï¼Œä¼šè¢«å–æ•´ã€‚</p>
<pre><code class="javascript">&#39;na&#39;.repeat(2.9) // &quot;nana&quot;
</code></pre>
<p>å¦‚æœ<code>repeat</code>çš„å‚æ•°æ˜¯è´Ÿæ•°æˆ–è€…<code>Infinity</code>ï¼Œä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">&#39;na&#39;.repeat(Infinity)
// RangeError
&#39;na&#39;.repeat(-1)
// RangeError
</code></pre>
<p>ä½†æ˜¯ï¼Œå¦‚æœå‚æ•°æ˜¯0åˆ°-1ä¹‹é—´çš„å°æ•°ï¼Œåˆ™ç­‰åŒäº0ï¼Œè¿™æ˜¯å› ä¸ºä¼šå…ˆè¿›è¡Œå–æ•´è¿ç®—ã€‚0åˆ°-1ä¹‹é—´çš„å°æ•°ï¼Œå–æ•´ä»¥åç­‰äº<code>-0</code>ï¼Œ<code>repeat</code>è§†åŒä¸º0ã€‚</p>
<pre><code class="javascript">&#39;na&#39;.repeat(-0.9) // &quot;&quot;
</code></pre>
<p>å‚æ•°<code>NaN</code>ç­‰åŒäº0ã€‚</p>
<pre><code class="javascript">&#39;na&#39;.repeat(NaN) // &quot;&quot;
</code></pre>
<p>å¦‚æœ<code>repeat</code>çš„å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šå…ˆè½¬æ¢æˆæ•°å­—ã€‚</p>
<pre><code class="javascript">&#39;na&#39;.repeat(&#39;na&#39;) // &quot;&quot;
&#39;na&#39;.repeat(&#39;3&#39;) // &quot;nanana&quot;
</code></pre>
<h2 id="padStart-ï¼ŒpadEnd"><a href="#padStart-ï¼ŒpadEnd" class="headerlink" title="padStart()ï¼ŒpadEnd()"></a>padStart()ï¼ŒpadEnd()</h2><p>ES7æ¨å‡ºäº†å­—ç¬¦ä¸²è¡¥å…¨é•¿åº¦çš„åŠŸèƒ½ã€‚å¦‚æœæŸä¸ªå­—ç¬¦ä¸²ä¸å¤ŸæŒ‡å®šé•¿åº¦ï¼Œä¼šåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨è¡¥å…¨ã€‚<code>padStart</code>ç”¨äºå¤´éƒ¨è¡¥å…¨ï¼Œ<code>padEnd</code>ç”¨äºå°¾éƒ¨è¡¥å…¨ã€‚</p>
<pre><code class="javascript">&#39;x&#39;.padStart(5, &#39;ab&#39;) // &#39;ababx&#39;
&#39;x&#39;.padStart(4, &#39;ab&#39;) // &#39;abax&#39;

&#39;x&#39;.padEnd(5, &#39;ab&#39;) // &#39;xabab&#39;
&#39;x&#39;.padEnd(4, &#39;ab&#39;) // &#39;xaba&#39;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>padStart</code>å’Œ<code>padEnd</code>ä¸€å…±æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ç”¨æ¥æŒ‡å®šå­—ç¬¦ä¸²çš„æœ€å°é•¿åº¦ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨æ¥è¡¥å…¨çš„å­—ç¬¦ä¸²ã€‚</p>
<p>å¦‚æœåŸå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç­‰äºæˆ–å¤§äºæŒ‡å®šçš„æœ€å°é•¿åº¦ï¼Œåˆ™è¿”å›åŸå­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">&#39;xxx&#39;.padStart(2, &#39;ab&#39;) // &#39;xxx&#39;
&#39;xxx&#39;.padEnd(2, &#39;ab&#39;) // &#39;xxx&#39;
</code></pre>
<p>å¦‚æœç”¨æ¥è¡¥å…¨çš„å­—ç¬¦ä¸²ä¸åŸå­—ç¬¦ä¸²ï¼Œä¸¤è€…çš„é•¿åº¦ä¹‹å’Œè¶…è¿‡äº†æŒ‡å®šçš„æœ€å°é•¿åº¦ï¼Œåˆ™ä¼šæˆªå»è¶…å‡ºä½æ•°çš„è¡¥å…¨å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">&#39;abc&#39;.padStart(10, &#39;0123456789&#39;)
// &#39;0123456abc&#39;
</code></pre>
<p>å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ä¼šç”¨ç©ºæ ¼è¡¥å…¨é•¿åº¦ã€‚</p>
<pre><code class="javascript">&#39;x&#39;.padStart(4) // &#39;   x&#39;
&#39;x&#39;.padEnd(4) // &#39;x   &#39;
</code></pre>
<p><code>padStart</code>çš„å¸¸è§ç”¨é€”æ˜¯ä¸ºæ•°å€¼è¡¥å…¨æŒ‡å®šä½æ•°ã€‚ä¸‹é¢ä»£ç ç”Ÿæˆ10ä½çš„æ•°å€¼å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">&#39;1&#39;.padStart(10, &#39;0&#39;) // &quot;0000000001&quot;
&#39;12&#39;.padStart(10, &#39;0&#39;) // &quot;0000000012&quot;
&#39;123456&#39;.padStart(10, &#39;0&#39;) // &quot;0000123456&quot;
</code></pre>
<p>å¦ä¸€ä¸ªç”¨é€”æ˜¯æç¤ºå­—ç¬¦ä¸²æ ¼å¼ã€‚</p>
<pre><code class="javascript">&#39;12&#39;.padStart(10, &#39;YYYY-MM-DD&#39;) // &quot;YYYY-MM-12&quot;
&#39;09-12&#39;.padStart(10, &#39;YYYY-MM-DD&#39;) // &quot;YYYY-09-12&quot;
</code></pre>
<h2 id="æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="æ¨¡æ¿å­—ç¬¦ä¸²"></a>æ¨¡æ¿å­—ç¬¦ä¸²</h2><p>ä¼ ç»Ÿçš„JavaScriptè¯­è¨€ï¼Œè¾“å‡ºæ¨¡æ¿é€šå¸¸æ˜¯è¿™æ ·å†™çš„ã€‚</p>
<pre><code class="javascript">$(&#39;#result&#39;).append(
  &#39;There are &lt;b&gt;&#39; + basket.count + &#39;&lt;/b&gt; &#39; +
  &#39;items in your basket, &#39; +
  &#39;&lt;em&gt;&#39; + basket.onSale +
  &#39;&lt;/em&gt; are on sale!&#39;
);
</code></pre>
<p>ä¸Šé¢è¿™ç§å†™æ³•ç›¸å½“ç¹çä¸æ–¹ä¾¿ï¼ŒES6å¼•å…¥äº†æ¨¡æ¿å­—ç¬¦ä¸²è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<pre><code class="javascript">$(&#39;#result&#39;).append(`
  There are &lt;b&gt;${basket.count}&lt;/b&gt; items
   in your basket, &lt;em&gt;${basket.onSale}&lt;/em&gt;
  are on sale!
`);
</code></pre>
<p>æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆtemplate stringï¼‰æ˜¯å¢å¼ºç‰ˆçš„å­—ç¬¦ä¸²ï¼Œç”¨åå¼•å·ï¼ˆ&#96;ï¼‰æ ‡è¯†ã€‚å®ƒå¯ä»¥å½“ä½œæ™®é€šå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ã€‚</p>
<pre><code class="javascript">// æ™®é€šå­—ç¬¦ä¸²
`In JavaScript &#39;\n&#39; is a line-feed.`

// å¤šè¡Œå­—ç¬¦ä¸²
`In JavaScript this is
 not legal.`

console.log(`string text line 1
string text line 2`);

// å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡
var name = &quot;Bob&quot;, time = &quot;today&quot;;
`Hello ${name}, how are you ${time}?`
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œéƒ½æ˜¯ç”¨åå¼•å·è¡¨ç¤ºã€‚å¦‚æœåœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­éœ€è¦ä½¿ç”¨åå¼•å·ï¼Œåˆ™å‰é¢è¦ç”¨åæ–œæ è½¬ä¹‰ã€‚</p>
<pre><code class="javascript">var greeting = `\`Yo\` World!`;
</code></pre>
<p>å¦‚æœä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ‰€æœ‰çš„ç©ºæ ¼å’Œç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¹‹ä¸­ã€‚</p>
<pre><code class="javascript">$(&#39;#list&#39;).html(`
&lt;ul&gt;
  &lt;li&gt;first&lt;/li&gt;
  &lt;li&gt;second&lt;/li&gt;
&lt;/ul&gt;
`);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ‰€æœ‰æ¨¡æ¿å­—ç¬¦ä¸²çš„ç©ºæ ¼å’Œæ¢è¡Œï¼Œéƒ½æ˜¯è¢«ä¿ç•™çš„ï¼Œæ¯”å¦‚<code>&lt;ul&gt;</code>æ ‡ç­¾å‰é¢ä¼šæœ‰ä¸€ä¸ªæ¢è¡Œã€‚å¦‚æœä½ ä¸æƒ³è¦è¿™ä¸ªæ¢è¡Œï¼Œå¯ä»¥ä½¿ç”¨<code>trim</code>æ–¹æ³•æ¶ˆé™¤å®ƒã€‚</p>
<pre><code class="javascript">$(&#39;#list&#39;).html(`
&lt;ul&gt;
  &lt;li&gt;first&lt;/li&gt;
  &lt;li&gt;second&lt;/li&gt;
&lt;/ul&gt;
`.trim());
</code></pre>
<p>æ¨¡æ¿å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ï¼Œéœ€è¦å°†å˜é‡åå†™åœ¨<code>${}</code>ä¹‹ä¸­ã€‚</p>
<pre><code class="javascript">function authorize(user, action) {
  if (!user.hasPrivilege(action)) {
    throw new Error(
      // ä¼ ç»Ÿå†™æ³•ä¸º
      // &#39;User &#39;
      // + user.name
      // + &#39; is not authorized to do &#39;
      // + action
      // + &#39;.&#39;
      `User ${user.name} is not authorized to do ${action}.`);
  }
}
</code></pre>
<p>å¤§æ‹¬å·å†…éƒ¨å¯ä»¥æ”¾å…¥ä»»æ„çš„JavaScriptè¡¨è¾¾å¼ï¼Œå¯ä»¥è¿›è¡Œè¿ç®—ï¼Œä»¥åŠå¼•ç”¨å¯¹è±¡å±æ€§ã€‚</p>
<pre><code class="javascript">var x = 1;
var y = 2;

`${x} + ${y} = ${x + y}`
// &quot;1 + 2 = 3&quot;

`${x} + ${y * 2} = ${x + y * 2}`
// &quot;1 + 4 = 5&quot;

var obj = {x: 1, y: 2};
`${obj.x + obj.y}`
// 3
</code></pre>
<p>æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ä¸­è¿˜èƒ½è°ƒç”¨å‡½æ•°ã€‚</p>
<pre><code class="javascript">function fn() {
  return &quot;Hello World&quot;;
}

`foo ${fn()} bar`
// foo Hello World bar
</code></pre>
<p>å¦‚æœå¤§æ‹¬å·ä¸­çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå°†æŒ‰ç…§ä¸€èˆ¬çš„è§„åˆ™è½¬ä¸ºå­—ç¬¦ä¸²ã€‚æ¯”å¦‚ï¼Œå¤§æ‹¬å·ä¸­æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°†é»˜è®¤è°ƒç”¨å¯¹è±¡çš„<code>toString</code>æ–¹æ³•ã€‚</p>
<p>å¦‚æœæ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„å˜é‡æ²¡æœ‰å£°æ˜ï¼Œå°†æŠ¥é”™ã€‚</p>
<pre><code class="javascript">// å˜é‡placeæ²¡æœ‰å£°æ˜
var msg = `Hello, ${place}`;
// æŠ¥é”™
</code></pre>
<p>ç”±äºæ¨¡æ¿å­—ç¬¦ä¸²çš„å¤§æ‹¬å·å†…éƒ¨ï¼Œå°±æ˜¯æ‰§è¡ŒJavaScriptä»£ç ï¼Œå› æ­¤å¦‚æœå¤§æ‹¬å·å†…éƒ¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†ä¼šåŸæ ·è¾“å‡ºã€‚</p>
<pre><code class="javascript">`Hello ${&#39;World&#39;}`
// &quot;Hello World&quot;
</code></pre>
<p>æ¨¡æ¿å­—ç¬¦ä¸²ç”šè‡³è¿˜èƒ½åµŒå¥—ã€‚</p>
<pre><code class="javascript">const tmpl = addrs =&gt; `
  &lt;table&gt;
  ${addrs.map(addr =&gt; `
    &lt;tr&gt;&lt;td&gt;${addr.first}&lt;/td&gt;&lt;/tr&gt;
    &lt;tr&gt;&lt;td&gt;${addr.last}&lt;/td&gt;&lt;/tr&gt;
  `).join(&#39;&#39;)}
  &lt;/table&gt;
`;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²çš„å˜é‡ä¹‹ä¸­ï¼ŒåˆåµŒå…¥äº†å¦ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">const data = [
    { first: &#39;&lt;Jane&gt;&#39;, last: &#39;Bond&#39; },
    { first: &#39;Lars&#39;, last: &#39;&lt;Croft&gt;&#39; },
];

console.log(tmpl(data));
// &lt;table&gt;
//
//   &lt;tr&gt;&lt;td&gt;&lt;Jane&gt;&lt;/td&gt;&lt;/tr&gt;
//   &lt;tr&gt;&lt;td&gt;Bond&lt;/td&gt;&lt;/tr&gt;
//
//   &lt;tr&gt;&lt;td&gt;Lars&lt;/td&gt;&lt;/tr&gt;
//   &lt;tr&gt;&lt;td&gt;&lt;Croft&gt;&lt;/td&gt;&lt;/tr&gt;
//
// &lt;/table&gt;
</code></pre>
<p>å¦‚æœéœ€è¦å¼•ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«ï¼Œåœ¨éœ€è¦æ—¶æ‰§è¡Œï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ã€‚</p>
<pre><code class="javascript">// å†™æ³•ä¸€
let str = &#39;return &#39; + &#39;`Hello ${name}!`&#39;;
let func = new Function(&#39;name&#39;, str);
func(&#39;Jack&#39;) // &quot;Hello Jack!&quot;

// å†™æ³•äºŒ
let str = &#39;(name) =&gt; `Hello ${name}!`&#39;;
let func = eval.call(null, str);
func(&#39;Jack&#39;) // &quot;Hello Jack!&quot;
</code></pre>
<h2 id="å®ä¾‹ï¼šæ¨¡æ¿ç¼–è¯‘"><a href="#å®ä¾‹ï¼šæ¨¡æ¿ç¼–è¯‘" class="headerlink" title="å®ä¾‹ï¼šæ¨¡æ¿ç¼–è¯‘"></a>å®ä¾‹ï¼šæ¨¡æ¿ç¼–è¯‘</h2><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªé€šè¿‡æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œç”Ÿæˆæ­£å¼æ¨¡æ¿çš„å®ä¾‹ã€‚</p>
<pre><code class="javascript">var template = `
&lt;ul&gt;
  &lt;% for(var i=0; i &lt; data.supplies.length; i++) { %&gt;
    &lt;li&gt;&lt;%= data.supplies[i] %&gt;&lt;/li&gt;
  &lt;% } %&gt;
&lt;/ul&gt;
`;
</code></pre>
<p>ä¸Šé¢ä»£ç åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ä¸­ï¼Œæ”¾ç½®äº†ä¸€ä¸ªå¸¸è§„æ¨¡æ¿ã€‚è¯¥æ¨¡æ¿ä½¿ç”¨<code>&lt;%...%&gt;</code>æ”¾ç½®JavaScriptä»£ç ï¼Œä½¿ç”¨<code>&lt;%= ... %&gt;</code>è¾“å‡ºJavaScriptè¡¨è¾¾å¼ã€‚</p>
<p>æ€ä¹ˆç¼–è¯‘è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²å‘¢ï¼Ÿ</p>
<p>ä¸€ç§æ€è·¯æ˜¯å°†å…¶è½¬æ¢ä¸ºJavaScriptè¡¨è¾¾å¼å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">echo(&#39;&lt;ul&gt;&#39;);
for(var i=0; i &lt; data.supplies.length; i++) {
  echo(&#39;&lt;li&gt;&#39;);
  echo(data.supplies[i]);
  echo(&#39;&lt;/li&gt;&#39;);
};
echo(&#39;&lt;/ul&gt;&#39;);
</code></pre>
<p>è¿™ä¸ªè½¬æ¢ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å°±è¡Œäº†ã€‚</p>
<pre><code class="javascript">var evalExpr = /&lt;%=(.+?)%&gt;/g;
var expr = /&lt;%([\s\S]+?)%&gt;/g;

template = template
  .replace(evalExpr, &#39;`); \n  echo( $1 ); \n  echo(`&#39;)
  .replace(expr, &#39;`); \n $1 \n  echo(`&#39;);

template = &#39;echo(`&#39; + template + &#39;`);&#39;;
</code></pre>
<p>ç„¶åï¼Œå°†<code>template</code>å°è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢è¿”å›ï¼Œå°±å¯ä»¥äº†ã€‚</p>
<pre><code class="javascript">var script =
`(function parse(data){
  var output = &quot;&quot;;

  function echo(html){
    output += html;
  }

  ${ template }

  return output;
})`;

return script;
</code></pre>
<p>å°†ä¸Šé¢çš„å†…å®¹æ‹¼è£…æˆä¸€ä¸ªæ¨¡æ¿ç¼–è¯‘å‡½æ•°<code>compile</code>ã€‚</p>
<pre><code class="javascript">function compile(template){
  var evalExpr = /&lt;%=(.+?)%&gt;/g;
  var expr = /&lt;%([\s\S]+?)%&gt;/g;

  template = template
    .replace(evalExpr, &#39;`); \n  echo( $1 ); \n  echo(`&#39;)
    .replace(expr, &#39;`); \n $1 \n  echo(`&#39;);

  template = &#39;echo(`&#39; + template + &#39;`);&#39;;

  var script =
  `(function parse(data){
    var output = &quot;&quot;;

    function echo(html){
      output += html;
    }

    ${ template }

    return output;
  })`;

  return script;
}
</code></pre>
<p><code>compile</code>å‡½æ•°çš„ç”¨æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">var parse = eval(compile(template));
div.innerHTML = parse({ supplies: [ &quot;broom&quot;, &quot;mop&quot;, &quot;cleaner&quot; ] });
//   &lt;ul&gt;
//     &lt;li&gt;broom&lt;/li&gt;
//     &lt;li&gt;mop&lt;/li&gt;
//     &lt;li&gt;cleaner&lt;/li&gt;
//   &lt;/ul&gt;
</code></pre>
<h2 id="æ ‡ç­¾æ¨¡æ¿"><a href="#æ ‡ç­¾æ¨¡æ¿" class="headerlink" title="æ ‡ç­¾æ¨¡æ¿"></a>æ ‡ç­¾æ¨¡æ¿</h2><p>æ¨¡æ¿å­—ç¬¦ä¸²çš„åŠŸèƒ½ï¼Œä¸ä»…ä»…æ˜¯ä¸Šé¢è¿™äº›ã€‚å®ƒå¯ä»¥ç´§è·Ÿåœ¨ä¸€ä¸ªå‡½æ•°ååé¢ï¼Œè¯¥å‡½æ•°å°†è¢«è°ƒç”¨æ¥å¤„ç†è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ã€‚è¿™è¢«ç§°ä¸ºâ€œæ ‡ç­¾æ¨¡æ¿â€åŠŸèƒ½ï¼ˆtagged templateï¼‰ã€‚</p>
<pre><code class="javascript">alert`123`
// ç­‰åŒäº
alert(123)
</code></pre>
<p>æ ‡ç­¾æ¨¡æ¿å…¶å®ä¸æ˜¯æ¨¡æ¿ï¼Œè€Œæ˜¯å‡½æ•°è°ƒç”¨çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚â€œæ ‡ç­¾â€æŒ‡çš„å°±æ˜¯å‡½æ•°ï¼Œç´§è·Ÿåœ¨åé¢çš„æ¨¡æ¿å­—ç¬¦ä¸²å°±æ˜¯å®ƒçš„å‚æ•°ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ¨¡æ¿å­—ç¬¦é‡Œé¢æœ‰å˜é‡ï¼Œå°±ä¸æ˜¯ç®€å•çš„è°ƒç”¨äº†ï¼Œè€Œæ˜¯ä¼šå°†æ¨¡æ¿å­—ç¬¦ä¸²å…ˆå¤„ç†æˆå¤šä¸ªå‚æ•°ï¼Œå†è°ƒç”¨å‡½æ•°ã€‚</p>
<pre><code class="javascript">var a = 5;
var b = 10;

tag`Hello ${ a + b } world ${ a * b }`;
// ç­‰åŒäº
tag([&#39;Hello &#39;, &#39; world &#39;, &#39;&#39;], 15, 50);
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å‰é¢æœ‰ä¸€ä¸ªæ ‡è¯†å<code>tag</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚æ•´ä¸ªè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œå°±æ˜¯<code>tag</code>å‡½æ•°å¤„ç†æ¨¡æ¿å­—ç¬¦ä¸²åçš„è¿”å›å€¼ã€‚</p>
<p>å‡½æ•°<code>tag</code>ä¾æ¬¡ä¼šæ¥æ”¶åˆ°å¤šä¸ªå‚æ•°ã€‚</p>
<pre><code class="javascript">function tag(stringArr, value1, value2){
  // ...
}

// ç­‰åŒäº

function tag(stringArr, ...values){
  // ...
}
</code></pre>
<p><code>tag</code>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„æˆå‘˜æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ä¸­é‚£äº›æ²¡æœ‰å˜é‡æ›¿æ¢çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå˜é‡æ›¿æ¢åªå‘ç”Ÿåœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ä¸ç¬¬äºŒä¸ªæˆå‘˜ä¹‹é—´ã€ç¬¬äºŒä¸ªæˆå‘˜ä¸ç¬¬ä¸‰ä¸ªæˆå‘˜ä¹‹é—´ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p><code>tag</code>å‡½æ•°çš„å…¶ä»–å‚æ•°ï¼Œéƒ½æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²å„ä¸ªå˜é‡è¢«æ›¿æ¢åçš„å€¼ã€‚ç”±äºæœ¬ä¾‹ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å«æœ‰ä¸¤ä¸ªå˜é‡ï¼Œå› æ­¤<code>tag</code>ä¼šæ¥å—åˆ°<code>value1</code>å’Œ<code>value2</code>ä¸¤ä¸ªå‚æ•°ã€‚</p>
<p><code>tag</code>å‡½æ•°æ‰€æœ‰å‚æ•°çš„å®é™…å€¼å¦‚ä¸‹ã€‚</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼š<code>[&#39;Hello &#39;, &#39; world &#39;, &#39;&#39;]</code></li>
<li>ç¬¬äºŒä¸ªå‚æ•°: 15</li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š50</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>tag</code>å‡½æ•°å®é™…ä¸Šä»¥ä¸‹é¢çš„å½¢å¼è°ƒç”¨ã€‚</p>
<pre><code class="javascript">tag([&#39;Hello &#39;, &#39; world &#39;, &#39;&#39;], 15, 50)
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥æŒ‰ç…§éœ€è¦ç¼–å†™<code>tag</code>å‡½æ•°çš„ä»£ç ã€‚ä¸‹é¢æ˜¯<code>tag</code>å‡½æ•°çš„ä¸€ç§å†™æ³•ï¼Œä»¥åŠè¿è¡Œç»“æœã€‚</p>
<pre><code class="javascript">var a = 5;
var b = 10;

function tag(s, v1, v2) {
  console.log(s[0]);
  console.log(s[1]);
  console.log(s[2]);
  console.log(v1);
  console.log(v2);

  return &quot;OK&quot;;
}

tag`Hello ${ a + b } world ${ a * b}`;
// &quot;Hello &quot;
// &quot; world &quot;
// &quot;&quot;
// 15
// 50
// &quot;OK&quot;
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">var total = 30;
var msg = passthru`The total is ${total} (${total*1.05} with tax)`;

function passthru(literals) {
  var result = &#39;&#39;;
  var i = 0;

  while (i &lt; literals.length) {
    result += literals[i++];
    if (i &lt; arguments.length) {
      result += arguments[i];
    }
  }

  return result;
}

msg // &quot;The total is 30 (31.5 with tax)&quot;
</code></pre>
<p>ä¸Šé¢è¿™ä¸ªä¾‹å­å±•ç¤ºäº†ï¼Œå¦‚ä½•å°†å„ä¸ªå‚æ•°æŒ‰ç…§åŸæ¥çš„ä½ç½®æ‹¼åˆå›å»ã€‚</p>
<p><code>passthru</code>å‡½æ•°é‡‡ç”¨restå‚æ•°çš„å†™æ³•å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">function passthru(literals, ...values) {
  var output = &quot;&quot;;
  for (var index = 0; index &lt; values.length; index++) {
    output += literals[index] + values[index];
  }

  output += literals[index]
  return output;
}
</code></pre>
<p>â€œæ ‡ç­¾æ¨¡æ¿â€çš„ä¸€ä¸ªé‡è¦åº”ç”¨ï¼Œå°±æ˜¯è¿‡æ»¤HTMLå­—ç¬¦ä¸²ï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥æ¶æ„å†…å®¹ã€‚</p>
<pre><code class="javascript">var message =
  SaferHTML`&lt;p&gt;${sender} has sent you a message.&lt;/p&gt;`;

function SaferHTML(templateData) {
  var s = templateData[0];
  for (var i = 1; i &lt; arguments.length; i++) {
    var arg = String(arguments[i]);

    // Escape special characters in the substitution.
    s += arg.replace(/&amp;/g, &quot;&amp;amp;&quot;)
            .replace(/&lt;/g, &quot;&amp;lt;&quot;)
            .replace(/&gt;/g, &quot;&amp;gt;&quot;);

    // Don&#39;t escape special characters in the template.
    s += templateData[i];
  }
  return s;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>sender</code>å˜é‡å¾€å¾€æ˜¯ç”¨æˆ·æä¾›çš„ï¼Œç»è¿‡<code>SaferHTML</code>å‡½æ•°å¤„ç†ï¼Œé‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦éƒ½ä¼šè¢«è½¬ä¹‰ã€‚</p>
<pre><code class="javascript">var sender = &#39;&lt;script&gt;alert(&quot;abc&quot;)&lt;/script&gt;&#39;; // æ¶æ„ä»£ç 
var message = SaferHTML`&lt;p&gt;${sender} has sent you a message.&lt;/p&gt;`;

message
// &lt;p&gt;&amp;lt;script&amp;gt;alert(&quot;abc&quot;)&amp;lt;/script&amp;gt; has sent you a message.&lt;/p&gt;
</code></pre>
<p>æ ‡ç­¾æ¨¡æ¿çš„å¦ä¸€ä¸ªåº”ç”¨ï¼Œå°±æ˜¯å¤šè¯­è¨€è½¬æ¢ï¼ˆå›½é™…åŒ–å¤„ç†ï¼‰ã€‚</p>
<pre><code class="javascript">i18n`Welcome to ${siteName}, you are visitor number ${visitorNumber}!`
// &quot;æ¬¢è¿è®¿é—®xxxï¼Œæ‚¨æ˜¯ç¬¬xxxxä½è®¿é—®è€…ï¼&quot;
</code></pre>
<p>æ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«å¹¶ä¸èƒ½å–ä»£Mustacheä¹‹ç±»çš„æ¨¡æ¿åº“ï¼Œå› ä¸ºæ²¡æœ‰æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯å¤„ç†åŠŸèƒ½ï¼Œä½†æ˜¯é€šè¿‡æ ‡ç­¾å‡½æ•°ï¼Œä½ å¯ä»¥è‡ªå·±æ·»åŠ è¿™äº›åŠŸèƒ½ã€‚</p>
<pre><code class="javascript">// ä¸‹é¢çš„hashTemplateå‡½æ•°
// æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ¨¡æ¿å¤„ç†å‡½æ•°
var libraryHtml = hashTemplate`
  &lt;ul&gt;
    #for book in ${myBooks}
      &lt;li&gt;&lt;i&gt;#{book.title}&lt;/i&gt; by #{book.author}&lt;/li&gt;
    #end
  &lt;/ul&gt;
`;
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œä½ ç”šè‡³å¯ä»¥ä½¿ç”¨æ ‡ç­¾æ¨¡æ¿ï¼Œåœ¨JavaScriptè¯­è¨€ä¹‹ä¸­åµŒå…¥å…¶ä»–è¯­è¨€ã€‚</p>
<pre><code class="javascript">jsx`
  &lt;div&gt;
    &lt;input
      ref=&#39;input&#39;
      onChange=&#39;${this.handleChange}&#39;
      defaultValue=&#39;${this.state.value}&#39; /&gt;
      ${this.state.value}
   &lt;/div&gt;
`
</code></pre>
<p>ä¸Šé¢çš„ä»£ç é€šè¿‡<code>jsx</code>å‡½æ•°ï¼Œå°†ä¸€ä¸ªDOMå­—ç¬¦ä¸²è½¬ä¸ºReactå¯¹è±¡ã€‚ä½ å¯ä»¥åœ¨Githubæ‰¾åˆ°<code>jsx</code>å‡½æ•°çš„<a href="https://gist.github.com/lygaret/a68220defa69174bdec5" target="_blank" rel="external">å…·ä½“å®ç°</a>ã€‚</p>
<p>ä¸‹é¢åˆ™æ˜¯ä¸€ä¸ªå‡æƒ³çš„ä¾‹å­ï¼Œé€šè¿‡<code>java</code>å‡½æ•°ï¼Œåœ¨JavaScriptä»£ç ä¹‹ä¸­è¿è¡ŒJavaä»£ç ã€‚</p>
<pre><code class="javascript">java`
class HelloWorldApp {
  public static void main(String[] args) {
    System.out.println(â€œHello World!â€); // Display the string.
  }
}
`
HelloWorldApp.main();
</code></pre>
<p>æ¨¡æ¿å¤„ç†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆæ¨¡æ¿å­—ç¬¦ä¸²æ•°ç»„ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>raw</code>å±æ€§ã€‚</p>
<pre><code class="javascript">console.log`123`
// [&quot;123&quot;, raw: Array[1]]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>console.log</code>æ¥å—çš„å‚æ•°ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ•°ç»„æœ‰ä¸€ä¸ª<code>raw</code>å±æ€§ï¼Œä¿å­˜çš„æ˜¯è½¬ä¹‰åçš„åŸå­—ç¬¦ä¸²ã€‚</p>
<p>è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">tag`First line\nSecond line`

function tag(strings) {
  console.log(strings.raw[0]);
  // &quot;First line\\nSecond line&quot;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>tag</code>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°<code>strings</code>ï¼Œæœ‰ä¸€ä¸ª<code>raw</code>å±æ€§ï¼Œä¹ŸæŒ‡å‘ä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ•°ç»„çš„æˆå‘˜ä¸<code>strings</code>æ•°ç»„å®Œå…¨ä¸€è‡´ã€‚æ¯”å¦‚ï¼Œ<code>strings</code>æ•°ç»„æ˜¯<code>[&quot;First line\nSecond line&quot;]</code>ï¼Œé‚£ä¹ˆ<code>strings.raw</code>æ•°ç»„å°±æ˜¯<code>[&quot;First line\\nSecond line&quot;]</code>ã€‚ä¸¤è€…å”¯ä¸€çš„åŒºåˆ«ï¼Œå°±æ˜¯å­—ç¬¦ä¸²é‡Œé¢çš„æ–œæ éƒ½è¢«è½¬ä¹‰äº†ã€‚æ¯”å¦‚ï¼Œstrings.rawæ•°ç»„ä¼šå°†<code>\n</code>è§†ä¸º<code>\\</code>å’Œ<code>n</code>ä¸¤ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯æ¢è¡Œç¬¦ã€‚è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿å–å¾—è½¬ä¹‰ä¹‹å‰çš„åŸå§‹æ¨¡æ¿è€Œè®¾è®¡çš„ã€‚</p>
<h2 id="String-raw"><a href="#String-raw" class="headerlink" title="String.raw()"></a>String.raw()</h2><p>ES6è¿˜ä¸ºåŸç”Ÿçš„Stringå¯¹è±¡ï¼Œæä¾›äº†ä¸€ä¸ª<code>raw</code>æ–¹æ³•ã€‚</p>
<p><code>String.raw</code>æ–¹æ³•ï¼Œå¾€å¾€ç”¨æ¥å……å½“æ¨¡æ¿å­—ç¬¦ä¸²çš„å¤„ç†å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–œæ éƒ½è¢«è½¬ä¹‰ï¼ˆå³æ–œæ å‰é¢å†åŠ ä¸€ä¸ªæ–œæ ï¼‰çš„å­—ç¬¦ä¸²ï¼Œå¯¹åº”äºæ›¿æ¢å˜é‡åçš„æ¨¡æ¿å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">String.raw`Hi\n${2+3}!`;
// &quot;Hi\\n5!&quot;

String.raw`Hi\u000A!`;
// &#39;Hi\\u000A!&#39;
</code></pre>
<p>å¦‚æœåŸå­—ç¬¦ä¸²çš„æ–œæ å·²ç»è½¬ä¹‰ï¼Œé‚£ä¹ˆ<code>String.raw</code>ä¸ä¼šåšä»»ä½•å¤„ç†ã€‚</p>
<pre><code class="javascript">String.raw`Hi\\n`
// &quot;Hi\\n&quot;
</code></pre>
<p><code>String.raw</code>çš„ä»£ç åŸºæœ¬å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">String.raw = function (strings, ...values) {
  var output = &quot;&quot;;
  for (var index = 0; index &lt; values.length; index++) {
    output += strings.raw[index] + values[index];
  }

  output += strings.raw[index]
  return output;
}
</code></pre>
<p><code>String.raw</code>æ–¹æ³•å¯ä»¥ä½œä¸ºå¤„ç†æ¨¡æ¿å­—ç¬¦ä¸²çš„åŸºæœ¬æ–¹æ³•ï¼Œå®ƒä¼šå°†æ‰€æœ‰å˜é‡æ›¿æ¢ï¼Œè€Œä¸”å¯¹æ–œæ è¿›è¡Œè½¬ä¹‰ï¼Œæ–¹ä¾¿ä¸‹ä¸€æ­¥ä½œä¸ºå­—ç¬¦ä¸²æ¥ä½¿ç”¨ã€‚</p>
<p><code>String.raw</code>æ–¹æ³•ä¹Ÿå¯ä»¥ä½œä¸ºæ­£å¸¸çš„å‡½æ•°ä½¿ç”¨ã€‚è¿™æ—¶ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªå…·æœ‰<code>raw</code>å±æ€§çš„å¯¹è±¡ï¼Œä¸”<code>raw</code>å±æ€§çš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</p>
<pre><code class="javascript">String.raw({ raw: &#39;test&#39; }, 0, 1, 2);
// &#39;t0e1s2t&#39;

// ç­‰åŒäº
String.raw({ raw: [&#39;t&#39;,&#39;e&#39;,&#39;s&#39;,&#39;t&#39;] }, 0, 1, 2);
</code></pre>
<h2 id="æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶" class="headerlink" title="æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶"></a>æ¨¡æ¿å­—ç¬¦ä¸²çš„é™åˆ¶</h2><p>å‰é¢æåˆ°æ ‡ç­¾æ¨¡æ¿é‡Œé¢ï¼Œå¯ä»¥å†…åµŒå…¶ä»–è¯­è¨€ã€‚ä½†æ˜¯ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²é»˜è®¤ä¼šå°†å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œå› æ­¤å¯¼è‡´äº†æ— æ³•åµŒå…¥å…¶ä»–è¯­è¨€ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨æ ‡ç­¾æ¨¡æ¿é‡Œé¢å¯ä»¥åµŒå…¥Latexè¯­è¨€ã€‚</p>
<pre><code class="javascript">function latex(strings) {
  // ...
}

let document = latex`
\newcommand{\fun}{\textbf{Fun!}}  // æ­£å¸¸å·¥ä½œ
\newcommand{\unicode}{\textbf{Unicode!}} // æŠ¥é”™
\newcommand{\xerxes}{\textbf{King!}} // æŠ¥é”™

Breve over the h goes \u{h}ere // æŠ¥é”™
`
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>document</code>å†…åµŒçš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå¯¹äºLatexè¯­è¨€æ¥è¯´å®Œå…¨æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯JavaScriptå¼•æ“ä¼šæŠ¥é”™ã€‚åŸå› å°±åœ¨äºå­—ç¬¦ä¸²çš„è½¬ä¹‰ã€‚</p>
<p>æ¨¡æ¿å­—ç¬¦ä¸²ä¼šå°†<code>\u00FF</code>å’Œ<code>\u{42}</code>å½“ä½œUnicodeå­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œæ‰€ä»¥<code>\unicode</code>è§£ææ—¶æŠ¥é”™ï¼›è€Œ<code>\x56</code>ä¼šè¢«å½“ä½œåå…­è¿›åˆ¶å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œæ‰€ä»¥<code>\xerxes</code>ä¼šæŠ¥é”™ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç°åœ¨æœ‰ä¸€ä¸ª<a href="https://tc39.github.io/proposal-template-literal-revision/" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œæ”¾æ¾å¯¹æ ‡ç­¾æ¨¡æ¿é‡Œé¢çš„å­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶ã€‚å¦‚æœé‡åˆ°ä¸åˆæ³•çš„å­—ç¬¦ä¸²è½¬ä¹‰ï¼Œå°±è¿”å›<code>undefined</code>ï¼Œè€Œä¸æ˜¯æŠ¥é”™ï¼Œå¹¶ä¸”ä»<code>raw</code>å±æ€§ä¸Šé¢å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="javascript">function tag(strs) {
  strs[0] === undefined
  strs.raw[0] === &quot;\\unicode and \\u{55}&quot;;
}
tag`\unicode and \u{55}`
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²åŸæœ¬æ˜¯åº”è¯¥æŠ¥é”™çš„ï¼Œä½†æ˜¯ç”±äºæ”¾æ¾äº†å¯¹å­—ç¬¦ä¸²è½¬ä¹‰çš„é™åˆ¶ï¼Œæ‰€ä»¥ä¸æŠ¥é”™äº†ï¼ŒJavaScriptå¼•æ“å°†ç¬¬ä¸€ä¸ªå­—ç¬¦è®¾ç½®ä¸º<code>undefined</code>ï¼Œä½†æ˜¯<code>raw</code>å±æ€§ä¾ç„¶å¯ä»¥å¾—åˆ°åŸå§‹å­—ç¬¦ä¸²ï¼Œå› æ­¤<code>tag</code>å‡½æ•°è¿˜æ˜¯å¯ä»¥å¯¹åŸå­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ã€‚</p>
<p>æ³¨æ„ï¼Œè¿™ç§å¯¹å­—ç¬¦ä¸²è½¬ä¹‰çš„æ”¾æ¾ï¼Œåªåœ¨æ ‡ç­¾æ¨¡æ¿è§£æå­—ç¬¦ä¸²æ—¶ç”Ÿæ•ˆï¼Œä¸æ˜¯æ ‡ç­¾æ¨¡æ¿çš„åœºåˆï¼Œä¾ç„¶ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">let bad = `bad escape sequence: \unicode`; // æŠ¥é”™
</code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å­—ç¬¦ä¸²çš„æ‰©å±•&quot;&gt;&lt;a href=&quot;#å­—ç¬¦ä¸²çš„æ‰©å±•&quot; class=&quot;headerlink&quot; title=&quot;å­—ç¬¦ä¸²çš„æ‰©å±•&quot;&gt;&lt;/a&gt;å­—ç¬¦ä¸²çš„æ‰©å±•&lt;/h1&gt;&lt;p&gt;ES6åŠ å¼ºäº†å¯¹Unicodeçš„æ”¯æŒï¼Œå¹¶ä¸”æ‰©å±•äº†å­—ç¬¦ä¸²å¯¹è±¡ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å­—ç¬¦çš„Unicodeè¡¨ç¤º
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Unicode" scheme="https://microzz.com/tags/Unicode/"/>
    
  </entry>
  
  <entry>
    <title>å˜é‡çš„è§£æ„èµ‹å€¼(Destructuring)</title>
    <link href="https://microzz.com/2016/11/13/destructuring/"/>
    <id>https://microzz.com/2016/11/13/destructuring/</id>
    <published>2016-11-13T07:16:19.000Z</published>
    <updated>2017-08-21T11:33:50.685Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å˜é‡çš„è§£æ„èµ‹å€¼"><a href="#å˜é‡çš„è§£æ„èµ‹å€¼" class="headerlink" title="å˜é‡çš„è§£æ„èµ‹å€¼"></a>å˜é‡çš„è§£æ„èµ‹å€¼</h1><h2 id="æ•°ç»„çš„è§£æ„èµ‹å€¼"><a href="#æ•°ç»„çš„è§£æ„èµ‹å€¼" class="headerlink" title="æ•°ç»„çš„è§£æ„èµ‹å€¼"></a>æ•°ç»„çš„è§£æ„èµ‹å€¼</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>ES6å…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸ºè§£æ„ï¼ˆDestructuringï¼‰ã€‚</p>
<p>ä»¥å‰ï¼Œä¸ºå˜é‡èµ‹å€¼ï¼Œåªèƒ½ç›´æ¥æŒ‡å®šå€¼ã€‚</p>
<pre><code class="javascript">var a = 1;
var b = 2;
var c = 3;
</code></pre>
<p>ES6å…è®¸å†™æˆä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">var [a, b, c] = [1, 2, 3];
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¯ä»¥ä»æ•°ç»„ä¸­æå–å€¼ï¼ŒæŒ‰ç…§å¯¹åº”ä½ç½®ï¼Œå¯¹å˜é‡èµ‹å€¼ã€‚</p>
<p>æœ¬è´¨ä¸Šï¼Œè¿™ç§å†™æ³•å±äºâ€œæ¨¡å¼åŒ¹é…â€ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨åµŒå¥—æ•°ç»„è¿›è¡Œè§£æ„çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">let [foo, [[bar], baz]] = [1, [[2], 3]];
foo // 1
bar // 2
baz // 3

let [ , , third] = [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;];
third // &quot;baz&quot;

let [x, , y] = [1, 2, 3];
x // 1
y // 3

let [head, ...tail] = [1, 2, 3, 4];
head // 1
tail // [2, 3, 4]

let [x, y, ...z] = [&#39;a&#39;];
x // &quot;a&quot;
y // undefined
z // []
</code></pre>
<p>å¦‚æœè§£æ„ä¸æˆåŠŸï¼Œå˜é‡çš„å€¼å°±ç­‰äº<code>undefined</code>ã€‚</p>
<pre><code class="javascript">var [foo] = [];
var [bar, foo] = [1];
</code></pre>
<p>ä»¥ä¸Šä¸¤ç§æƒ…å†µéƒ½å±äºè§£æ„ä¸æˆåŠŸï¼Œ<code>foo</code>çš„å€¼éƒ½ä¼šç­‰äº<code>undefined</code>ã€‚</p>
<p>å¦ä¸€ç§æƒ…å†µæ˜¯ä¸å®Œå…¨è§£æ„ï¼Œå³ç­‰å·å·¦è¾¹çš„æ¨¡å¼ï¼ŒåªåŒ¹é…ä¸€éƒ¨åˆ†çš„ç­‰å·å³è¾¹çš„æ•°ç»„ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè§£æ„ä¾ç„¶å¯ä»¥æˆåŠŸã€‚</p>
<pre><code class="javascript">let [x, y] = [1, 2, 3];
x // 1
y // 2

let [a, [b], d] = [1, [2, 3], 4];
a // 1
b // 2
d // 4
</code></pre>
<p>ä¸Šé¢ä¸¤ä¸ªä¾‹å­ï¼Œéƒ½å±äºä¸å®Œå…¨è§£æ„ï¼Œä½†æ˜¯å¯ä»¥æˆåŠŸã€‚</p>
<p>å¦‚æœç­‰å·çš„å³è¾¹ä¸æ˜¯æ•°ç»„ï¼ˆæˆ–è€…ä¸¥æ ¼åœ°è¯´ï¼Œä¸æ˜¯å¯éå†çš„ç»“æ„ï¼Œå‚è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
let [foo] = 1;
let [foo] = false;
let [foo] = NaN;
let [foo] = undefined;
let [foo] = null;
let [foo] = {};
</code></pre>
<p>ä¸Šé¢çš„è¡¨è¾¾å¼éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºç­‰å·å³è¾¹çš„å€¼ï¼Œè¦ä¹ˆè½¬ä¸ºå¯¹è±¡ä»¥åä¸å…·å¤‡Iteratoræ¥å£ï¼ˆå‰äº”ä¸ªè¡¨è¾¾å¼ï¼‰ï¼Œè¦ä¹ˆæœ¬èº«å°±ä¸å…·å¤‡Iteratoræ¥å£ï¼ˆæœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼‰ã€‚</p>
<p>è§£æ„èµ‹å€¼ä¸ä»…é€‚ç”¨äºvarå‘½ä»¤ï¼Œä¹Ÿé€‚ç”¨äºletå’Œconstå‘½ä»¤ã€‚</p>
<pre><code class="javascript">var [v1, v2, ..., vN ] = array;
let [v1, v2, ..., vN ] = array;
const [v1, v2, ..., vN ] = array;
</code></pre>
<p>å¯¹äºSetç»“æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„çš„è§£æ„èµ‹å€¼ã€‚</p>
<pre><code class="javascript">let [x, y, z] = new Set([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]);
x // &quot;a&quot;
</code></pre>
<p>äº‹å®ä¸Šï¼Œåªè¦æŸç§æ•°æ®ç»“æ„å…·æœ‰Iteratoræ¥å£ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼ã€‚</p>
<pre><code class="javascript">function* fibs() {
  var a = 0;
  var b = 1;
  while (true) {
    yield a;
    [a, b] = [b, a + b];
  }
}

var [first, second, third, fourth, fifth, sixth] = fibs();
sixth // 5
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>fibs</code>æ˜¯ä¸€ä¸ªGeneratorå‡½æ•°ï¼ŒåŸç”Ÿå…·æœ‰Iteratoræ¥å£ã€‚è§£æ„èµ‹å€¼ä¼šä¾æ¬¡ä»è¿™ä¸ªæ¥å£è·å–å€¼ã€‚</p>
<h3 id="é»˜è®¤å€¼"><a href="#é»˜è®¤å€¼" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h3><p>è§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼ã€‚</p>
<pre><code class="javascript">var [foo = true] = [];
foo // true

[x, y = &#39;b&#39;] = [&#39;a&#39;]; // x=&#39;a&#39;, y=&#39;b&#39;
[x, y = &#39;b&#39;] = [&#39;a&#39;, undefined]; // x=&#39;a&#39;, y=&#39;b&#39;
</code></pre>
<p>æ³¨æ„ï¼ŒES6å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ<code>===</code>ï¼‰ï¼Œåˆ¤æ–­ä¸€ä¸ªä½ç½®æ˜¯å¦æœ‰å€¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœä¸€ä¸ªæ•°ç»„æˆå‘˜ä¸ä¸¥æ ¼ç­‰äº<code>undefined</code>ï¼Œé»˜è®¤å€¼æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚</p>
<pre><code class="javascript">var [x = 1] = [undefined];
x // 1

var [x = 1] = [null];
x // null
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœä¸€ä¸ªæ•°ç»„æˆå‘˜æ˜¯<code>null</code>ï¼Œé»˜è®¤å€¼å°±ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸º<code>null</code>ä¸ä¸¥æ ¼ç­‰äº<code>undefined</code>ã€‚</p>
<p>å¦‚æœé»˜è®¤å€¼æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œå³åªæœ‰åœ¨ç”¨åˆ°çš„æ—¶å€™ï¼Œæ‰ä¼šæ±‚å€¼ã€‚</p>
<pre><code class="javascript">function f() {
  console.log(&#39;aaa&#39;);
}

let [x = f()] = [1];
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå› ä¸º<code>x</code>èƒ½å–åˆ°å€¼ï¼Œæ‰€ä»¥å‡½æ•°<code>f</code>æ ¹æœ¬ä¸ä¼šæ‰§è¡Œã€‚ä¸Šé¢çš„ä»£ç å…¶å®ç­‰ä»·äºä¸‹é¢çš„ä»£ç ã€‚</p>
<pre><code class="javascript">let x;
if ([1][0] === undefined) {
  x = f();
} else {
  x = [1][0];
}
</code></pre>
<p>é»˜è®¤å€¼å¯ä»¥å¼•ç”¨è§£æ„èµ‹å€¼çš„å…¶ä»–å˜é‡ï¼Œä½†è¯¥å˜é‡å¿…é¡»å·²ç»å£°æ˜ã€‚</p>
<pre><code class="javascript">let [x = 1, y = x] = [];     // x=1; y=1
let [x = 1, y = x] = [2];    // x=2; y=2
let [x = 1, y = x] = [1, 2]; // x=1; y=2
let [x = y, y = 1] = [];     // ReferenceError
</code></pre>
<p>ä¸Šé¢æœ€åä¸€ä¸ªè¡¨è¾¾å¼ä¹‹æ‰€ä»¥ä¼šæŠ¥é”™ï¼Œæ˜¯å› ä¸º<code>x</code>ç”¨åˆ°é»˜è®¤å€¼<code>y</code>æ—¶ï¼Œ<code>y</code>è¿˜æ²¡æœ‰å£°æ˜ã€‚</p>
<h2 id="å¯¹è±¡çš„è§£æ„èµ‹å€¼"><a href="#å¯¹è±¡çš„è§£æ„èµ‹å€¼" class="headerlink" title="å¯¹è±¡çš„è§£æ„èµ‹å€¼"></a>å¯¹è±¡çš„è§£æ„èµ‹å€¼</h2><p>è§£æ„ä¸ä»…å¯ä»¥ç”¨äºæ•°ç»„ï¼Œè¿˜å¯ä»¥ç”¨äºå¯¹è±¡ã€‚</p>
<pre><code class="javascript">var { foo, bar } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; };
foo // &quot;aaa&quot;
bar // &quot;bbb&quot;
</code></pre>
<p>å¯¹è±¡çš„è§£æ„ä¸æ•°ç»„æœ‰ä¸€ä¸ªé‡è¦çš„ä¸åŒã€‚æ•°ç»„çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œå˜é‡çš„å–å€¼ç”±å®ƒçš„ä½ç½®å†³å®šï¼›è€Œå¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼ã€‚</p>
<pre><code class="javascript">var { bar, foo } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; };
foo // &quot;aaa&quot;
bar // &quot;bbb&quot;

var { baz } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; };
baz // undefined
</code></pre>
<p>ä¸Šé¢ä»£ç çš„ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œç­‰å·å·¦è¾¹çš„ä¸¤ä¸ªå˜é‡çš„æ¬¡åºï¼Œä¸ç­‰å·å³è¾¹ä¸¤ä¸ªåŒåå±æ€§çš„æ¬¡åºä¸ä¸€è‡´ï¼Œä½†æ˜¯å¯¹å–å€¼å®Œå…¨æ²¡æœ‰å½±å“ã€‚ç¬¬äºŒä¸ªä¾‹å­çš„å˜é‡æ²¡æœ‰å¯¹åº”çš„åŒåå±æ€§ï¼Œå¯¼è‡´å–ä¸åˆ°å€¼ï¼Œæœ€åç­‰äº<code>undefined</code>ã€‚</p>
<p>å¦‚æœå˜é‡åä¸å±æ€§åä¸ä¸€è‡´ï¼Œå¿…é¡»å†™æˆä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">var { foo: baz } = { foo: &#39;aaa&#39;, bar: &#39;bbb&#39; };
baz // &quot;aaa&quot;

let obj = { first: &#39;hello&#39;, last: &#39;world&#39; };
let { first: f, last: l } = obj;
f // &#39;hello&#39;
l // &#39;world&#39;
</code></pre>
<p>è¿™å®é™…ä¸Šè¯´æ˜ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼æ˜¯ä¸‹é¢å½¢å¼çš„ç®€å†™ï¼ˆå‚è§ã€Šå¯¹è±¡çš„æ‰©å±•ã€‹ä¸€ç« ï¼‰ã€‚</p>
<pre><code class="javascript">var { foo: foo, bar: bar } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; };
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼çš„å†…éƒ¨æœºåˆ¶ï¼Œæ˜¯å…ˆæ‰¾åˆ°åŒåå±æ€§ï¼Œç„¶åå†èµ‹ç»™å¯¹åº”çš„å˜é‡ã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯åè€…ï¼Œè€Œä¸æ˜¯å‰è€…ã€‚</p>
<pre><code class="javascript">var { foo: baz } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; };
baz // &quot;aaa&quot;
foo // error: foo is not defined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>foo</code>æ˜¯åŒ¹é…çš„æ¨¡å¼ï¼Œ<code>baz</code>æ‰æ˜¯å˜é‡ã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯å˜é‡<code>baz</code>ï¼Œè€Œä¸æ˜¯æ¨¡å¼<code>foo</code>ã€‚</p>
<p>æ³¨æ„ï¼Œé‡‡ç”¨è¿™ç§å†™æ³•æ—¶ï¼Œå˜é‡çš„å£°æ˜å’Œèµ‹å€¼æ˜¯ä¸€ä½“çš„ã€‚å¯¹äº<code>let</code>å’Œ<code>const</code>æ¥è¯´ï¼Œå˜é‡ä¸èƒ½é‡æ–°å£°æ˜ï¼Œæ‰€ä»¥ä¸€æ—¦èµ‹å€¼çš„å˜é‡ä»¥å‰å£°æ˜è¿‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">let foo;
let {foo} = {foo: 1}; // SyntaxError: Duplicate declaration &quot;foo&quot;

let baz;
let {bar: baz} = {bar: 1}; // SyntaxError: Duplicate declaration &quot;baz&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè§£æ„èµ‹å€¼çš„å˜é‡éƒ½ä¼šé‡æ–°å£°æ˜ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚ä¸è¿‡ï¼Œå› ä¸º<code>var</code>å‘½ä»¤å…è®¸é‡æ–°å£°æ˜ï¼Œæ‰€ä»¥è¿™ä¸ªé”™è¯¯åªä¼šåœ¨ä½¿ç”¨<code>let</code>å’Œ<code>const</code>å‘½ä»¤æ—¶å‡ºç°ã€‚å¦‚æœæ²¡æœ‰ç¬¬äºŒä¸ª<code>let</code>å‘½ä»¤ï¼Œä¸Šé¢çš„ä»£ç å°±ä¸ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">let foo;
({foo} = {foo: 1}); // æˆåŠŸ

let baz;
({bar: baz} = {bar: 1}); // æˆåŠŸ
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>let</code>å‘½ä»¤ä¸‹é¢ä¸€è¡Œçš„åœ†æ‹¬å·æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚å› ä¸ºè§£æå™¨ä¼šå°†èµ·é¦–çš„å¤§æ‹¬å·ï¼Œç†è§£æˆä¸€ä¸ªä»£ç å—ï¼Œè€Œä¸æ˜¯èµ‹å€¼è¯­å¥ã€‚</p>
<p>å’Œæ•°ç»„ä¸€æ ·ï¼Œè§£æ„ä¹Ÿå¯ä»¥ç”¨äºåµŒå¥—ç»“æ„çš„å¯¹è±¡ã€‚</p>
<pre><code class="javascript">var obj = {
  p: [
    &#39;Hello&#39;,
    { y: &#39;World&#39; }
  ]
};

var { p: [x, { y }] } = obj;
x // &quot;Hello&quot;
y // &quot;World&quot;
</code></pre>
<p>æ³¨æ„ï¼Œè¿™æ—¶<code>p</code>æ˜¯æ¨¡å¼ï¼Œä¸æ˜¯å˜é‡ï¼Œå› æ­¤ä¸ä¼šè¢«èµ‹å€¼ã€‚</p>
<pre><code class="javascript">var node = {
  loc: {
    start: {
      line: 1,
      column: 5
    }
  }
};

var { loc: { start: { line }} } = node;
line // 1
loc  // error: loc is undefined
start // error: start is undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªæœ‰<code>line</code>æ˜¯å˜é‡ï¼Œ<code>loc</code>å’Œ<code>start</code>éƒ½æ˜¯æ¨¡å¼ï¼Œä¸ä¼šè¢«èµ‹å€¼ã€‚</p>
<p>ä¸‹é¢æ˜¯åµŒå¥—èµ‹å€¼çš„ä¾‹å­ã€‚</p>
<pre><code class="javascript">let obj = {};
let arr = [];

({ foo: obj.prop, bar: arr[0] } = { foo: 123, bar: true });

obj // {prop:123}
arr // [true]
</code></pre>
<p>å¯¹è±¡çš„è§£æ„ä¹Ÿå¯ä»¥æŒ‡å®šé»˜è®¤å€¼ã€‚</p>
<pre><code class="javascript">var {x = 3} = {};
x // 3

var {x, y = 5} = {x: 1};
x // 1
y // 5

var {x:y = 3} = {};
y // 3

var {x:y = 3} = {x: 5};
y // 5

var { message: msg = &#39;Something went wrong&#39; } = {};
msg // &quot;Something went wrong&quot;
</code></pre>
<p>é»˜è®¤å€¼ç”Ÿæ•ˆçš„æ¡ä»¶æ˜¯ï¼Œå¯¹è±¡çš„å±æ€§å€¼ä¸¥æ ¼ç­‰äº<code>undefined</code>ã€‚</p>
<pre><code class="javascript">var {x = 3} = {x: undefined};
x // 3

var {x = 3} = {x: null};
x // null
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœ<code>x</code>å±æ€§ç­‰äº<code>null</code>ï¼Œå°±ä¸ä¸¥æ ¼ç›¸ç­‰äº<code>undefined</code>ï¼Œå¯¼è‡´é»˜è®¤å€¼ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<p>å¦‚æœè§£æ„å¤±è´¥ï¼Œå˜é‡çš„å€¼ç­‰äº<code>undefined</code>ã€‚</p>
<pre><code class="javascript">var {foo} = {bar: &#39;baz&#39;};
foo // undefined
</code></pre>
<p>å¦‚æœè§£æ„æ¨¡å¼æ˜¯åµŒå¥—çš„å¯¹è±¡ï¼Œè€Œä¸”å­å¯¹è±¡æ‰€åœ¨çš„çˆ¶å±æ€§ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
var {foo: {bar}} = {baz: &#39;baz&#39;};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œç­‰å·å·¦è¾¹å¯¹è±¡çš„<code>foo</code>å±æ€§ï¼Œå¯¹åº”ä¸€ä¸ªå­å¯¹è±¡ã€‚è¯¥å­å¯¹è±¡çš„<code>bar</code>å±æ€§ï¼Œè§£æ„æ—¶ä¼šæŠ¥é”™ã€‚åŸå› å¾ˆç®€å•ï¼Œå› ä¸º<code>foo</code>è¿™æ—¶ç­‰äº<code>undefined</code>ï¼Œå†å–å­å±æ€§å°±ä¼šæŠ¥é”™ï¼Œè¯·çœ‹ä¸‹é¢çš„ä»£ç ã€‚</p>
<pre><code class="javascript">var _tmp = {baz: &#39;baz&#39;};
_tmp.foo.bar // æŠ¥é”™
</code></pre>
<p>å¦‚æœè¦å°†ä¸€ä¸ªå·²ç»å£°æ˜çš„å˜é‡ç”¨äºè§£æ„èµ‹å€¼ï¼Œå¿…é¡»éå¸¸å°å¿ƒã€‚</p>
<pre><code class="javascript">// é”™è¯¯çš„å†™æ³•
var x;
{x} = {x: 1};
// SyntaxError: syntax error
</code></pre>
<p>ä¸Šé¢ä»£ç çš„å†™æ³•ä¼šæŠ¥é”™ï¼Œå› ä¸ºJavaScriptå¼•æ“ä¼šå°†<code>{x}</code>ç†è§£æˆä¸€ä¸ªä»£ç å—ï¼Œä»è€Œå‘ç”Ÿè¯­æ³•é”™è¯¯ã€‚åªæœ‰ä¸å°†å¤§æ‹¬å·å†™åœ¨è¡Œé¦–ï¼Œé¿å…JavaScriptå°†å…¶è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<pre><code class="javascript">// æ­£ç¡®çš„å†™æ³•
({x} = {x: 1});
</code></pre>
<p>ä¸Šé¢ä»£ç å°†æ•´ä¸ªè§£æ„èµ‹å€¼è¯­å¥ï¼Œæ”¾åœ¨ä¸€ä¸ªåœ†æ‹¬å·é‡Œé¢ï¼Œå°±å¯ä»¥æ­£ç¡®æ‰§è¡Œã€‚å…³äºåœ†æ‹¬å·ä¸è§£æ„èµ‹å€¼çš„å…³ç³»ï¼Œå‚è§ä¸‹æ–‡ã€‚</p>
<p>è§£æ„èµ‹å€¼å…è®¸ï¼Œç­‰å·å·¦è¾¹çš„æ¨¡å¼ä¹‹ä¸­ï¼Œä¸æ”¾ç½®ä»»ä½•å˜é‡åã€‚å› æ­¤ï¼Œå¯ä»¥å†™å‡ºéå¸¸å¤æ€ªçš„èµ‹å€¼è¡¨è¾¾å¼ã€‚</p>
<pre><code class="javascript">({} = [true, false]);
({} = &#39;abc&#39;);
({} = []);
</code></pre>
<p>ä¸Šé¢çš„è¡¨è¾¾å¼è™½ç„¶æ¯«æ— æ„ä¹‰ï¼Œä½†æ˜¯è¯­æ³•æ˜¯åˆæ³•çš„ï¼Œå¯ä»¥æ‰§è¡Œã€‚</p>
<p>å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†ç°æœ‰å¯¹è±¡çš„æ–¹æ³•ï¼Œèµ‹å€¼åˆ°æŸä¸ªå˜é‡ã€‚</p>
<pre><code class="javascript">let { log, sin, cos } = Math;
</code></pre>
<p>ä¸Šé¢ä»£ç å°†<code>Math</code>å¯¹è±¡çš„å¯¹æ•°ã€æ­£å¼¦ã€ä½™å¼¦ä¸‰ä¸ªæ–¹æ³•ï¼Œèµ‹å€¼åˆ°å¯¹åº”çš„å˜é‡ä¸Šï¼Œä½¿ç”¨èµ·æ¥å°±ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚</p>
<p>ç”±äºæ•°ç»„æœ¬è´¨æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡å±æ€§çš„è§£æ„ã€‚</p>
<pre><code class="javascript">var arr = [1, 2, 3];
var {0 : first, [arr.length - 1] : last} = arr;
first // 1
last // 3
</code></pre>
<p>ä¸Šé¢ä»£ç å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡è§£æ„ã€‚æ•°ç»„<code>arr</code>çš„<code>0</code>é”®å¯¹åº”çš„å€¼æ˜¯<code>1</code>ï¼Œ<code>[arr.length - 1]</code>å°±æ˜¯<code>2</code>é”®ï¼Œå¯¹åº”çš„å€¼æ˜¯<code>3</code>ã€‚æ–¹æ‹¬å·è¿™ç§å†™æ³•ï¼Œå±äºâ€œå±æ€§åè¡¨è¾¾å¼â€ï¼Œå‚è§ã€Šå¯¹è±¡çš„æ‰©å±•ã€‹ä¸€ç« ã€‚</p>
<h2 id="å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼"><a href="#å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼" class="headerlink" title="å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼"></a>å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼</h2><p>å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥è§£æ„èµ‹å€¼ã€‚è¿™æ˜¯å› ä¸ºæ­¤æ—¶ï¼Œå­—ç¬¦ä¸²è¢«è½¬æ¢æˆäº†ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚</p>
<pre><code class="javascript">const [a, b, c, d, e] = &#39;hello&#39;;
a // &quot;h&quot;
b // &quot;e&quot;
c // &quot;l&quot;
d // &quot;l&quot;
e // &quot;o&quot;
</code></pre>
<p>ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª<code>length</code>å±æ€§ï¼Œå› æ­¤è¿˜å¯ä»¥å¯¹è¿™ä¸ªå±æ€§è§£æ„èµ‹å€¼ã€‚</p>
<pre><code class="javascript">let {length : len} = &#39;hello&#39;;
len // 5
</code></pre>
<h2 id="æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼"><a href="#æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼" class="headerlink" title="æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼"></a>æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼</h2><p>è§£æ„èµ‹å€¼æ—¶ï¼Œå¦‚æœç­‰å·å³è¾¹æ˜¯æ•°å€¼å’Œå¸ƒå°”å€¼ï¼Œåˆ™ä¼šå…ˆè½¬ä¸ºå¯¹è±¡ã€‚</p>
<pre><code class="javascript">let {toString: s} = 123;
s === Number.prototype.toString // true

let {toString: s} = true;
s === Boolean.prototype.toString // true
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°å€¼å’Œå¸ƒå°”å€¼çš„åŒ…è£…å¯¹è±¡éƒ½æœ‰<code>toString</code>å±æ€§ï¼Œå› æ­¤å˜é‡<code>s</code>éƒ½èƒ½å–åˆ°å€¼ã€‚</p>
<p>è§£æ„èµ‹å€¼çš„è§„åˆ™æ˜¯ï¼Œåªè¦ç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡ï¼Œå°±å…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡ã€‚ç”±äº<code>undefined</code>å’Œ<code>null</code>æ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹å®ƒä»¬è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œéƒ½ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">let { prop: x } = undefined; // TypeError
let { prop: y } = null; // TypeError
</code></pre>
<h2 id="å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼"><a href="#å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼" class="headerlink" title="å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼"></a>å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼</h2><p>å‡½æ•°çš„å‚æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼ã€‚</p>
<pre><code class="javascript">function add([x, y]){
  return x + y;
}

add([1, 2]); // 3
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>add</code>çš„å‚æ•°è¡¨é¢ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†åœ¨ä¼ å…¥å‚æ•°çš„é‚£ä¸€åˆ»ï¼Œæ•°ç»„å‚æ•°å°±è¢«è§£æ„æˆå˜é‡<code>x</code>å’Œ<code>y</code>ã€‚å¯¹äºå‡½æ•°å†…éƒ¨çš„ä»£ç æ¥è¯´ï¼Œå®ƒä»¬èƒ½æ„Ÿå—åˆ°çš„å‚æ•°å°±æ˜¯<code>x</code>å’Œ<code>y</code>ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="javascript">[[1, 2], [3, 4]].map(([a, b]) =&gt; a + b);
// [ 3, 7 ]
</code></pre>
<p>å‡½æ•°å‚æ•°çš„è§£æ„ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ã€‚</p>
<pre><code class="javascript">function move({x = 0, y = 0} = {}) {
  return [x, y];
}

move({x: 3, y: 8}); // [3, 8]
move({x: 3}); // [3, 0]
move({}); // [0, 0]
move(); // [0, 0]
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>move</code>çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œè§£æ„ï¼Œå¾—åˆ°å˜é‡<code>x</code>å’Œ<code>y</code>çš„å€¼ã€‚å¦‚æœè§£æ„å¤±è´¥ï¼Œ<code>x</code>å’Œ<code>y</code>ç­‰äºé»˜è®¤å€¼ã€‚</p>
<p>æ³¨æ„ï¼Œä¸‹é¢çš„å†™æ³•ä¼šå¾—åˆ°ä¸ä¸€æ ·çš„ç»“æœã€‚</p>
<pre><code class="javascript">function move({x, y} = { x: 0, y: 0 }) {
  return [x, y];
}

move({x: 3, y: 8}); // [3, 8]
move({x: 3}); // [3, undefined]
move({}); // [undefined, undefined]
move(); // [0, 0]
</code></pre>
<p>ä¸Šé¢ä»£ç æ˜¯ä¸ºå‡½æ•°<code>move</code>çš„å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯ä¸ºå˜é‡<code>x</code>å’Œ<code>y</code>æŒ‡å®šé»˜è®¤å€¼ï¼Œæ‰€ä»¥ä¼šå¾—åˆ°ä¸å‰ä¸€ç§å†™æ³•ä¸åŒçš„ç»“æœã€‚</p>
<p><code>undefined</code>å°±ä¼šè§¦å‘å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ã€‚</p>
<pre><code class="javascript">[1, undefined, 3].map((x = &#39;yes&#39;) =&gt; x);
// [ 1, &#39;yes&#39;, 3 ]
</code></pre>
<h2 id="åœ†æ‹¬å·é—®é¢˜"><a href="#åœ†æ‹¬å·é—®é¢˜" class="headerlink" title="åœ†æ‹¬å·é—®é¢˜"></a>åœ†æ‹¬å·é—®é¢˜</h2><p>è§£æ„èµ‹å€¼è™½ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯è§£æèµ·æ¥å¹¶ä¸å®¹æ˜“ã€‚å¯¹äºç¼–è¯‘å™¨æ¥è¯´ï¼Œä¸€ä¸ªå¼å­åˆ°åº•æ˜¯æ¨¡å¼ï¼Œè¿˜æ˜¯è¡¨è¾¾å¼ï¼Œæ²¡æœ‰åŠæ³•ä»ä¸€å¼€å§‹å°±çŸ¥é“ï¼Œå¿…é¡»è§£æåˆ°ï¼ˆæˆ–è§£æä¸åˆ°ï¼‰ç­‰å·æ‰èƒ½çŸ¥é“ã€‚</p>
<p>ç”±æ­¤å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæ¨¡å¼ä¸­å‡ºç°åœ†æ‹¬å·æ€ä¹ˆå¤„ç†ã€‚ES6çš„è§„åˆ™æ˜¯ï¼Œåªè¦æœ‰å¯èƒ½å¯¼è‡´è§£æ„çš„æ­§ä¹‰ï¼Œå°±ä¸å¾—ä½¿ç”¨åœ†æ‹¬å·ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™æ¡è§„åˆ™å®é™…ä¸Šä¸é‚£ä¹ˆå®¹æ˜“è¾¨åˆ«ï¼Œå¤„ç†èµ·æ¥ç›¸å½“éº»çƒ¦ã€‚å› æ­¤ï¼Œå»ºè®®åªè¦æœ‰å¯èƒ½ï¼Œå°±ä¸è¦åœ¨æ¨¡å¼ä¸­æ”¾ç½®åœ†æ‹¬å·ã€‚</p>
<h3 id="ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ"><a href="#ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ" class="headerlink" title="ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ"></a>ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ</h3><p>ä»¥ä¸‹ä¸‰ç§è§£æ„èµ‹å€¼ä¸å¾—ä½¿ç”¨åœ†æ‹¬å·ã€‚</p>
<p>ï¼ˆ1ï¼‰å˜é‡å£°æ˜è¯­å¥ä¸­ï¼Œä¸èƒ½å¸¦æœ‰åœ†æ‹¬å·ã€‚</p>
<pre><code class="javascript">// å…¨éƒ¨æŠ¥é”™
var [(a)] = [1];

var {x: (c)} = {};
var ({x: c}) = {};
var {(x: c)} = {};
var {(x): c} = {};

var { o: ({ p: p }) } = { o: { p: 2 } };
</code></pre>
<p>ä¸Šé¢ä¸‰ä¸ªè¯­å¥éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯å˜é‡å£°æ˜è¯­å¥ï¼Œæ¨¡å¼ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·ã€‚</p>
<p>ï¼ˆ2ï¼‰å‡½æ•°å‚æ•°ä¸­ï¼Œæ¨¡å¼ä¸èƒ½å¸¦æœ‰åœ†æ‹¬å·ã€‚</p>
<p>å‡½æ•°å‚æ•°ä¹Ÿå±äºå˜é‡å£°æ˜ï¼Œå› æ­¤ä¸èƒ½å¸¦æœ‰åœ†æ‹¬å·ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
function f([(z)]) { return z; }
</code></pre>
<p>ï¼ˆ3ï¼‰èµ‹å€¼è¯­å¥ä¸­ï¼Œä¸èƒ½å°†æ•´ä¸ªæ¨¡å¼ï¼Œæˆ–åµŒå¥—æ¨¡å¼ä¸­çš„ä¸€å±‚ï¼Œæ”¾åœ¨åœ†æ‹¬å·ä¹‹ä¸­ã€‚</p>
<pre><code class="javascript">// å…¨éƒ¨æŠ¥é”™
({ p: a }) = { p: 42 };
([a]) = [5];
</code></pre>
<p>ä¸Šé¢ä»£ç å°†æ•´ä¸ªæ¨¡å¼æ”¾åœ¨åœ†æ‹¬å·ä¹‹ä¸­ï¼Œå¯¼è‡´æŠ¥é”™ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
[({ p: a }), { x: c }] = [{}, {}];
</code></pre>
<p>ä¸Šé¢ä»£ç å°†åµŒå¥—æ¨¡å¼çš„ä¸€å±‚ï¼Œæ”¾åœ¨åœ†æ‹¬å·ä¹‹ä¸­ï¼Œå¯¼è‡´æŠ¥é”™ã€‚</p>
<h3 id="å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ"><a href="#å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ" class="headerlink" title="å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ"></a>å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µ</h3><p>å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µåªæœ‰ä¸€ç§ï¼šèµ‹å€¼è¯­å¥çš„éæ¨¡å¼éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨åœ†æ‹¬å·ã€‚</p>
<pre><code class="javascript">[(b)] = [3]; // æ­£ç¡®
({ p: (d) } = {}); // æ­£ç¡®
[(parseInt.prop)] = [3]; // æ­£ç¡®
</code></pre>
<p>ä¸Šé¢ä¸‰è¡Œè¯­å¥éƒ½å¯ä»¥æ­£ç¡®æ‰§è¡Œï¼Œå› ä¸ºé¦–å…ˆå®ƒä»¬éƒ½æ˜¯èµ‹å€¼è¯­å¥ï¼Œè€Œä¸æ˜¯å£°æ˜è¯­å¥ï¼›å…¶æ¬¡å®ƒä»¬çš„åœ†æ‹¬å·éƒ½ä¸å±äºæ¨¡å¼çš„ä¸€éƒ¨åˆ†ã€‚ç¬¬ä¸€è¡Œè¯­å¥ä¸­ï¼Œæ¨¡å¼æ˜¯å–æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ï¼Œè·Ÿåœ†æ‹¬å·æ— å…³ï¼›ç¬¬äºŒè¡Œè¯­å¥ä¸­ï¼Œæ¨¡å¼æ˜¯pï¼Œè€Œä¸æ˜¯dï¼›ç¬¬ä¸‰è¡Œè¯­å¥ä¸ç¬¬ä¸€è¡Œè¯­å¥çš„æ€§è´¨ä¸€è‡´ã€‚</p>
<h2 id="ç”¨é€”"><a href="#ç”¨é€”" class="headerlink" title="ç”¨é€”"></a>ç”¨é€”</h2><p>å˜é‡çš„è§£æ„èµ‹å€¼ç”¨é€”å¾ˆå¤šã€‚</p>
<p><strong>ï¼ˆ1ï¼‰äº¤æ¢å˜é‡çš„å€¼</strong></p>
<pre><code class="javascript">[x, y] = [y, x];
</code></pre>
<p>ä¸Šé¢ä»£ç äº¤æ¢å˜é‡<code>x</code>å’Œ<code>y</code>çš„å€¼ï¼Œè¿™æ ·çš„å†™æ³•ä¸ä»…ç®€æ´ï¼Œè€Œä¸”æ˜“è¯»ï¼Œè¯­ä¹‰éå¸¸æ¸…æ™°ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼</strong></p>
<p>å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚æœè¦è¿”å›å¤šä¸ªå€¼ï¼Œåªèƒ½å°†å®ƒä»¬æ”¾åœ¨æ•°ç»„æˆ–å¯¹è±¡é‡Œè¿”å›ã€‚æœ‰äº†è§£æ„èµ‹å€¼ï¼Œå–å‡ºè¿™äº›å€¼å°±éå¸¸æ–¹ä¾¿ã€‚</p>
<pre><code class="javascript">// è¿”å›ä¸€ä¸ªæ•°ç»„

function example() {
  return [1, 2, 3];
}
var [a, b, c] = example();

// è¿”å›ä¸€ä¸ªå¯¹è±¡

function example() {
  return {
    foo: 1,
    bar: 2
  };
}
var { foo, bar } = example();
</code></pre>
<p><strong>ï¼ˆ3ï¼‰å‡½æ•°å‚æ•°çš„å®šä¹‰</strong></p>
<p>è§£æ„èµ‹å€¼å¯ä»¥æ–¹ä¾¿åœ°å°†ä¸€ç»„å‚æ•°ä¸å˜é‡åå¯¹åº”èµ·æ¥ã€‚</p>
<pre><code class="javascript">// å‚æ•°æ˜¯ä¸€ç»„æœ‰æ¬¡åºçš„å€¼
function f([x, y, z]) { ... }
f([1, 2, 3]);

// å‚æ•°æ˜¯ä¸€ç»„æ— æ¬¡åºçš„å€¼
function f({x, y, z}) { ... }
f({z: 3, y: 2, x: 1});
</code></pre>
<p><strong>ï¼ˆ4ï¼‰æå–JSONæ•°æ®</strong></p>
<p>è§£æ„èµ‹å€¼å¯¹æå–JSONå¯¹è±¡ä¸­çš„æ•°æ®ï¼Œå°¤å…¶æœ‰ç”¨ã€‚</p>
<pre><code class="javascript">var jsonData = {
  id: 42,
  status: &quot;OK&quot;,
  data: [867, 5309]
};

let { id, status, data: number } = jsonData;

console.log(id, status, number);
// 42, &quot;OK&quot;, [867, 5309]
</code></pre>
<p>ä¸Šé¢ä»£ç å¯ä»¥å¿«é€Ÿæå–JSONæ•°æ®çš„å€¼ã€‚</p>
<p><strong>ï¼ˆ5ï¼‰å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼</strong></p>
<pre><code class="javascript">jQuery.ajax = function (url, {
  async = true,
  beforeSend = function () {},
  cache = true,
  complete = function () {},
  crossDomain = false,
  global = true,
  // ... more config
}) {
  // ... do stuff
};
</code></pre>
<p>æŒ‡å®šå‚æ•°çš„é»˜è®¤å€¼ï¼Œå°±é¿å…äº†åœ¨å‡½æ•°ä½“å†…éƒ¨å†å†™<code>var foo = config.foo || &#39;default foo&#39;;</code>è¿™æ ·çš„è¯­å¥ã€‚</p>
<p><strong>ï¼ˆ6ï¼‰éå†Mapç»“æ„</strong></p>
<p>ä»»ä½•éƒ¨ç½²äº†Iteratoræ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨<code>for...of</code>å¾ªç¯éå†ã€‚Mapç»“æ„åŸç”Ÿæ”¯æŒIteratoræ¥å£ï¼Œé…åˆå˜é‡çš„è§£æ„èµ‹å€¼ï¼Œè·å–é”®åå’Œé”®å€¼å°±éå¸¸æ–¹ä¾¿ã€‚</p>
<pre><code class="javascript">var map = new Map();
map.set(&#39;first&#39;, &#39;hello&#39;);
map.set(&#39;second&#39;, &#39;world&#39;);

for (let [key, value] of map) {
  console.log(key + &quot; is &quot; + value);
}
// first is hello
// second is world
</code></pre>
<p>å¦‚æœåªæƒ³è·å–é”®åï¼Œæˆ–è€…åªæƒ³è·å–é”®å€¼ï¼Œå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ã€‚</p>
<pre><code class="javascript">// è·å–é”®å
for (let [key] of map) {
  // ...
}

// è·å–é”®å€¼
for (let [,value] of map) {
  // ...
}
</code></pre>
<p><strong>ï¼ˆ7ï¼‰è¾“å…¥æ¨¡å—çš„æŒ‡å®šæ–¹æ³•</strong></p>
<p>åŠ è½½æ¨¡å—æ—¶ï¼Œå¾€å¾€éœ€è¦æŒ‡å®šè¾“å…¥é‚£äº›æ–¹æ³•ã€‚è§£æ„èµ‹å€¼ä½¿å¾—è¾“å…¥è¯­å¥éå¸¸æ¸…æ™°ã€‚</p>
<pre><code class="javascript">const { SourceMapConsumer, SourceNode } = require(&quot;source-map&quot;);
</code></pre>
<blockquote>
<p>æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å˜é‡çš„è§£æ„èµ‹å€¼&quot;&gt;&lt;a href=&quot;#å˜é‡çš„è§£æ„èµ‹å€¼&quot; class=&quot;headerlink&quot; title=&quot;å˜é‡çš„è§£æ„èµ‹å€¼&quot;&gt;&lt;/a&gt;å˜é‡çš„è§£æ„èµ‹å€¼&lt;/h1&gt;&lt;h2 id=&quot;æ•°ç»„çš„è§£æ„èµ‹å€¼&quot;&gt;&lt;a href=&quot;#æ•°ç»„çš„è§£æ„èµ‹å€¼&quot; class=&quot;headerlink
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="Destructuring" scheme="https://microzz.com/tags/Destructuring/"/>
    
  </entry>
  
  <entry>
    <title>letå’Œconstå‘½ä»¤</title>
    <link href="https://microzz.com/2016/11/12/let/"/>
    <id>https://microzz.com/2016/11/12/let/</id>
    <published>2016-11-12T07:16:19.000Z</published>
    <updated>2017-05-29T13:57:59.011Z</updated>
    
    <content type="html"><![CDATA[<h1 id="letå’Œconstå‘½ä»¤"><a href="#letå’Œconstå‘½ä»¤" class="headerlink" title="letå’Œconstå‘½ä»¤"></a>letå’Œconstå‘½ä»¤</h1><h2 id="letå‘½ä»¤"><a href="#letå‘½ä»¤" class="headerlink" title="letå‘½ä»¤"></a>letå‘½ä»¤</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>ES6æ–°å¢äº†<code>let</code>å‘½ä»¤ï¼Œç”¨æ¥å£°æ˜å˜é‡ã€‚å®ƒçš„ç”¨æ³•ç±»ä¼¼äº<code>var</code>ï¼Œä½†æ˜¯æ‰€å£°æ˜çš„å˜é‡ï¼Œåªåœ¨<code>let</code>å‘½ä»¤æ‰€åœ¨çš„ä»£ç å—å†…æœ‰æ•ˆã€‚</p>
<pre><code class="javascript">{
  let a = 10;
  var b = 1;
}

a // ReferenceError: a is not defined.
b // 1
</code></pre>
<p>ä¸Šé¢ä»£ç åœ¨ä»£ç å—ä¹‹ä¸­ï¼Œåˆ†åˆ«ç”¨<code>let</code>å’Œ<code>var</code>å£°æ˜äº†ä¸¤ä¸ªå˜é‡ã€‚ç„¶ååœ¨ä»£ç å—ä¹‹å¤–è°ƒç”¨è¿™ä¸¤ä¸ªå˜é‡ï¼Œç»“æœ<code>let</code>å£°æ˜çš„å˜é‡æŠ¥é”™ï¼Œ<code>var</code>å£°æ˜çš„å˜é‡è¿”å›äº†æ­£ç¡®çš„å€¼ã€‚è¿™è¡¨æ˜ï¼Œ<code>let</code>å£°æ˜çš„å˜é‡åªåœ¨å®ƒæ‰€åœ¨çš„ä»£ç å—æœ‰æ•ˆã€‚</p>
<p><code>for</code>å¾ªç¯çš„è®¡æ•°å™¨ï¼Œå°±å¾ˆåˆé€‚ä½¿ç”¨<code>let</code>å‘½ä»¤ã€‚</p>
<pre><code class="javascript">for (let i = 0; i &lt; 10; i++) {}

console.log(i);
//ReferenceError: i is not defined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè®¡æ•°å™¨<code>i</code>åªåœ¨<code>for</code>å¾ªç¯ä½“å†…æœ‰æ•ˆï¼Œåœ¨å¾ªç¯ä½“å¤–å¼•ç”¨å°±ä¼šæŠ¥é”™ã€‚</p>
<p>ä¸‹é¢çš„ä»£ç å¦‚æœä½¿ç”¨<code>var</code>ï¼Œæœ€åè¾“å‡ºçš„æ˜¯<code>10</code>ã€‚</p>
<pre><code class="javascript">var a = [];
for (var i = 0; i &lt; 10; i++) {
  a[i] = function () {
    console.log(i);
  };
}
a[6](); // 10
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>i</code>æ˜¯<code>var</code>å£°æ˜çš„ï¼Œåœ¨å…¨å±€èŒƒå›´å†…éƒ½æœ‰æ•ˆã€‚æ‰€ä»¥æ¯ä¸€æ¬¡å¾ªç¯ï¼Œæ–°çš„<code>i</code>å€¼éƒ½ä¼šè¦†ç›–æ—§å€¼ï¼Œå¯¼è‡´æœ€åè¾“å‡ºçš„æ˜¯æœ€åä¸€è½®çš„<code>i</code>çš„å€¼ã€‚</p>
<p>å¦‚æœä½¿ç”¨<code>let</code>ï¼Œå£°æ˜çš„å˜é‡ä»…åœ¨å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œæœ€åè¾“å‡ºçš„æ˜¯6ã€‚</p>
<pre><code class="javascript">var a = [];
for (let i = 0; i &lt; 10; i++) {
  a[i] = function () {
    console.log(i);
  };
}
a[6](); // 6
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>i</code>æ˜¯<code>let</code>å£°æ˜çš„ï¼Œå½“å‰çš„<code>i</code>åªåœ¨æœ¬è½®å¾ªç¯æœ‰æ•ˆï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡å¾ªç¯çš„<code>i</code>å…¶å®éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œæ‰€ä»¥æœ€åè¾“å‡ºçš„æ˜¯<code>6</code>ã€‚ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœæ¯ä¸€è½®å¾ªç¯çš„å˜é‡<code>i</code>éƒ½æ˜¯é‡æ–°å£°æ˜çš„ï¼Œé‚£å®ƒæ€ä¹ˆçŸ¥é“ä¸Šä¸€è½®å¾ªç¯çš„å€¼ï¼Œä»è€Œè®¡ç®—å‡ºæœ¬è½®å¾ªç¯çš„å€¼ï¼Ÿè¿™æ˜¯å› ä¸º JavaScript å¼•æ“å†…éƒ¨ä¼šè®°ä½ä¸Šä¸€è½®å¾ªç¯çš„å€¼ï¼Œåˆå§‹åŒ–æœ¬è½®çš„å˜é‡<code>i</code>æ—¶ï¼Œå°±åœ¨ä¸Šä¸€è½®å¾ªç¯çš„åŸºç¡€ä¸Šè¿›è¡Œè®¡ç®—ã€‚</p>
<h3 id="ä¸å­˜åœ¨å˜é‡æå‡"><a href="#ä¸å­˜åœ¨å˜é‡æå‡" class="headerlink" title="ä¸å­˜åœ¨å˜é‡æå‡"></a>ä¸å­˜åœ¨å˜é‡æå‡</h3><p><code>let</code>ä¸åƒ<code>var</code>é‚£æ ·ä¼šå‘ç”Ÿâ€œå˜é‡æå‡â€ç°è±¡ã€‚æ‰€ä»¥ï¼Œå˜é‡ä¸€å®šè¦åœ¨å£°æ˜åä½¿ç”¨ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p>
<pre><code class="javascript">// var çš„æƒ…å†µ
console.log(foo); // è¾“å‡ºundefined
var foo = 2;

// let çš„æƒ…å†µ
console.log(bar); // æŠ¥é”™ReferenceError
let bar = 2;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>foo</code>ç”¨<code>var</code>å‘½ä»¤å£°æ˜ï¼Œä¼šå‘ç”Ÿå˜é‡æå‡ï¼Œå³è„šæœ¬å¼€å§‹è¿è¡Œæ—¶ï¼Œå˜é‡<code>foo</code>å·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯æ²¡æœ‰å€¼ï¼Œæ‰€ä»¥ä¼šè¾“å‡º<code>undefined</code>ã€‚å˜é‡<code>bar</code>ç”¨<code>let</code>å‘½ä»¤å£°æ˜ï¼Œä¸ä¼šå‘ç”Ÿå˜é‡æå‡ã€‚è¿™è¡¨ç¤ºåœ¨å£°æ˜å®ƒä¹‹å‰ï¼Œå˜é‡<code>bar</code>æ˜¯ä¸å­˜åœ¨çš„ï¼Œè¿™æ—¶å¦‚æœç”¨åˆ°å®ƒï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p>
<h3 id="æš‚æ—¶æ€§æ­»åŒº"><a href="#æš‚æ—¶æ€§æ­»åŒº" class="headerlink" title="æš‚æ—¶æ€§æ­»åŒº"></a>æš‚æ—¶æ€§æ­»åŒº</h3><p>åªè¦å—çº§ä½œç”¨åŸŸå†…å­˜åœ¨<code>let</code>å‘½ä»¤ï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡å°±â€œç»‘å®šâ€ï¼ˆbindingï¼‰è¿™ä¸ªåŒºåŸŸï¼Œä¸å†å—å¤–éƒ¨çš„å½±å“ã€‚</p>
<pre><code class="javascript">var tmp = 123;

if (true) {
  tmp = &#39;abc&#39;; // ReferenceError
  let tmp;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­˜åœ¨å…¨å±€å˜é‡<code>tmp</code>ï¼Œä½†æ˜¯å—çº§ä½œç”¨åŸŸå†…<code>let</code>åˆå£°æ˜äº†ä¸€ä¸ªå±€éƒ¨å˜é‡<code>tmp</code>ï¼Œå¯¼è‡´åè€…ç»‘å®šè¿™ä¸ªå—çº§ä½œç”¨åŸŸï¼Œæ‰€ä»¥åœ¨<code>let</code>å£°æ˜å˜é‡å‰ï¼Œå¯¹<code>tmp</code>èµ‹å€¼ä¼šæŠ¥é”™ã€‚</p>
<p>ES6æ˜ç¡®è§„å®šï¼Œå¦‚æœåŒºå—ä¸­å­˜åœ¨<code>let</code>å’Œ<code>const</code>å‘½ä»¤ï¼Œè¿™ä¸ªåŒºå—å¯¹è¿™äº›å‘½ä»¤å£°æ˜çš„å˜é‡ï¼Œä»ä¸€å¼€å§‹å°±å½¢æˆäº†å°é—­ä½œç”¨åŸŸã€‚å‡¡æ˜¯åœ¨å£°æ˜ä¹‹å‰å°±ä½¿ç”¨è¿™äº›å˜é‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<p>æ€»ä¹‹ï¼Œåœ¨ä»£ç å—å†…ï¼Œä½¿ç”¨<code>let</code>å‘½ä»¤å£°æ˜å˜é‡ä¹‹å‰ï¼Œè¯¥å˜é‡éƒ½æ˜¯ä¸å¯ç”¨çš„ã€‚è¿™åœ¨è¯­æ³•ä¸Šï¼Œç§°ä¸ºâ€œæš‚æ—¶æ€§æ­»åŒºâ€ï¼ˆtemporal dead zoneï¼Œç®€ç§° TDZï¼‰ã€‚</p>
<pre><code class="javascript">if (true) {
  // TDZå¼€å§‹
  tmp = &#39;abc&#39;; // ReferenceError
  console.log(tmp); // ReferenceError

  let tmp; // TDZç»“æŸ
  console.log(tmp); // undefined

  tmp = 123;
  console.log(tmp); // 123
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œåœ¨<code>let</code>å‘½ä»¤å£°æ˜å˜é‡<code>tmp</code>ä¹‹å‰ï¼Œéƒ½å±äºå˜é‡<code>tmp</code>çš„â€œæ­»åŒºâ€ã€‚</p>
<p>â€œæš‚æ—¶æ€§æ­»åŒºâ€ä¹Ÿæ„å‘³ç€<code>typeof</code>ä¸å†æ˜¯ä¸€ä¸ªç™¾åˆ†ä¹‹ç™¾å®‰å…¨çš„æ“ä½œã€‚</p>
<pre><code class="javascript">typeof x; // ReferenceError
let x;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>x</code>ä½¿ç”¨<code>let</code>å‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥åœ¨å£°æ˜ä¹‹å‰ï¼Œéƒ½å±äº<code>x</code>çš„â€œæ­»åŒºâ€ï¼Œåªè¦ç”¨åˆ°è¯¥å˜é‡å°±ä¼šæŠ¥é”™ã€‚å› æ­¤ï¼Œ<code>typeof</code>è¿è¡Œæ—¶å°±ä¼šæŠ›å‡ºä¸€ä¸ª<code>ReferenceError</code>ã€‚</p>
<p>ä½œä¸ºæ¯”è¾ƒï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ ¹æœ¬æ²¡æœ‰è¢«å£°æ˜ï¼Œä½¿ç”¨<code>typeof</code>åè€Œä¸ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">typeof undeclared_variable // &quot;undefined&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>undeclared_variable</code>æ˜¯ä¸€ä¸ªä¸å­˜åœ¨çš„å˜é‡åï¼Œç»“æœè¿”å›â€œundefinedâ€ã€‚æ‰€ä»¥ï¼Œåœ¨æ²¡æœ‰<code>let</code>ä¹‹å‰ï¼Œ<code>typeof</code>è¿ç®—ç¬¦æ˜¯ç™¾åˆ†ä¹‹ç™¾å®‰å…¨çš„ï¼Œæ°¸è¿œä¸ä¼šæŠ¥é”™ã€‚ç°åœ¨è¿™ä¸€ç‚¹ä¸æˆç«‹äº†ã€‚è¿™æ ·çš„è®¾è®¡æ˜¯ä¸ºäº†è®©å¤§å®¶å…»æˆè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œå˜é‡ä¸€å®šè¦åœ¨å£°æ˜ä¹‹åä½¿ç”¨ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚</p>
<p>æœ‰äº›â€œæ­»åŒºâ€æ¯”è¾ƒéšè”½ï¼Œä¸å¤ªå®¹æ˜“å‘ç°ã€‚</p>
<pre><code class="javascript">function bar(x = y, y = 2) {
  return [x, y];
}

bar(); // æŠ¥é”™
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨<code>bar</code>å‡½æ•°ä¹‹æ‰€ä»¥æŠ¥é”™ï¼ˆæŸäº›å®ç°å¯èƒ½ä¸æŠ¥é”™ï¼‰ï¼Œæ˜¯å› ä¸ºå‚æ•°<code>x</code>é»˜è®¤å€¼ç­‰äºå¦ä¸€ä¸ªå‚æ•°<code>y</code>ï¼Œè€Œæ­¤æ—¶<code>y</code>è¿˜æ²¡æœ‰å£°æ˜ï¼Œå±äºâ€æ­»åŒºâ€œã€‚å¦‚æœ<code>y</code>çš„é»˜è®¤å€¼æ˜¯<code>x</code>ï¼Œå°±ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ­¤æ—¶<code>x</code>å·²ç»å£°æ˜äº†ã€‚</p>
<pre><code class="javascript">function bar(x = 2, y = x) {
  return [x, y];
}
bar(); // [2, 2]
</code></pre>
<p>ES6è§„å®šæš‚æ—¶æ€§æ­»åŒºå’Œ<code>let</code>ã€<code>const</code>è¯­å¥ä¸å‡ºç°å˜é‡æå‡ï¼Œä¸»è¦æ˜¯ä¸ºäº†å‡å°‘è¿è¡Œæ—¶é”™è¯¯ï¼Œé˜²æ­¢åœ¨å˜é‡å£°æ˜å‰å°±ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼Œä»è€Œå¯¼è‡´æ„æ–™ä¹‹å¤–çš„è¡Œä¸ºã€‚è¿™æ ·çš„é”™è¯¯åœ¨ES5æ˜¯å¾ˆå¸¸è§çš„ï¼Œç°åœ¨æœ‰äº†è¿™ç§è§„å®šï¼Œé¿å…æ­¤ç±»é”™è¯¯å°±å¾ˆå®¹æ˜“äº†ã€‚</p>
<p>æ€»ä¹‹ï¼Œæš‚æ—¶æ€§æ­»åŒºçš„æœ¬è´¨å°±æ˜¯ï¼Œåªè¦ä¸€è¿›å…¥å½“å‰ä½œç”¨åŸŸï¼Œæ‰€è¦ä½¿ç”¨çš„å˜é‡å°±å·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯ä¸å¯è·å–ï¼Œåªæœ‰ç­‰åˆ°å£°æ˜å˜é‡çš„é‚£ä¸€è¡Œä»£ç å‡ºç°ï¼Œæ‰å¯ä»¥è·å–å’Œä½¿ç”¨è¯¥å˜é‡ã€‚</p>
<h3 id="ä¸å…è®¸é‡å¤å£°æ˜"><a href="#ä¸å…è®¸é‡å¤å£°æ˜" class="headerlink" title="ä¸å…è®¸é‡å¤å£°æ˜"></a>ä¸å…è®¸é‡å¤å£°æ˜</h3><p>letä¸å…è®¸åœ¨ç›¸åŒä½œç”¨åŸŸå†…ï¼Œé‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ã€‚</p>
<pre><code class="javascript">// æŠ¥é”™
function () {
  let a = 10;
  var a = 1;
}

// æŠ¥é”™
function () {
  let a = 10;
  let a = 1;
}
</code></pre>
<p>å› æ­¤ï¼Œä¸èƒ½åœ¨å‡½æ•°å†…éƒ¨é‡æ–°å£°æ˜å‚æ•°ã€‚</p>
<pre><code class="javascript">function func(arg) {
  let arg; // æŠ¥é”™
}

function func(arg) {
  {
    let arg; // ä¸æŠ¥é”™
  }
}
</code></pre>
<h2 id="å—çº§ä½œç”¨åŸŸ"><a href="#å—çº§ä½œç”¨åŸŸ" class="headerlink" title="å—çº§ä½œç”¨åŸŸ"></a>å—çº§ä½œç”¨åŸŸ</h2><h3 id="ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼Ÿ</h3><p>ES5åªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œè¿™å¸¦æ¥å¾ˆå¤šä¸åˆç†çš„åœºæ™¯ã€‚</p>
<p>ç¬¬ä¸€ç§åœºæ™¯ï¼Œå†…å±‚å˜é‡å¯èƒ½ä¼šè¦†ç›–å¤–å±‚å˜é‡ã€‚</p>
<pre><code class="javascript">var tmp = new Date();

function f() {
  console.log(tmp);
  if (false) {
    var tmp = &quot;hello world&quot;;
  }
}

f(); // undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fæ‰§è¡Œåï¼Œè¾“å‡ºç»“æœä¸º<code>undefined</code>ï¼ŒåŸå› åœ¨äºå˜é‡æå‡ï¼Œå¯¼è‡´å†…å±‚çš„tmpå˜é‡è¦†ç›–äº†å¤–å±‚çš„tmpå˜é‡ã€‚</p>
<p>ç¬¬äºŒç§åœºæ™¯ï¼Œç”¨æ¥è®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡ã€‚</p>
<pre><code class="javascript">var s = &#39;hello&#39;;

for (var i = 0; i &lt; s.length; i++) {
  console.log(s[i]);
}

console.log(i); // 5
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡iåªç”¨æ¥æ§åˆ¶å¾ªç¯ï¼Œä½†æ˜¯å¾ªç¯ç»“æŸåï¼Œå®ƒå¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œæ³„éœ²æˆäº†å…¨å±€å˜é‡ã€‚</p>
<h3 id="ES6çš„å—çº§ä½œç”¨åŸŸ"><a href="#ES6çš„å—çº§ä½œç”¨åŸŸ" class="headerlink" title="ES6çš„å—çº§ä½œç”¨åŸŸ"></a>ES6çš„å—çº§ä½œç”¨åŸŸ</h3><p><code>let</code>å®é™…ä¸Šä¸ºJavaScriptæ–°å¢äº†å—çº§ä½œç”¨åŸŸã€‚</p>
<pre><code class="javascript">function f1() {
  let n = 5;
  if (true) {
    let n = 10;
  }
  console.log(n); // 5
}
</code></pre>
<p>ä¸Šé¢çš„å‡½æ•°æœ‰ä¸¤ä¸ªä»£ç å—ï¼Œéƒ½å£°æ˜äº†å˜é‡<code>n</code>ï¼Œè¿è¡Œåè¾“å‡º5ã€‚è¿™è¡¨ç¤ºå¤–å±‚ä»£ç å—ä¸å—å†…å±‚ä»£ç å—çš„å½±å“ã€‚å¦‚æœä½¿ç”¨<code>var</code>å®šä¹‰å˜é‡<code>n</code>ï¼Œæœ€åè¾“å‡ºçš„å€¼å°±æ˜¯10ã€‚</p>
<p>ES6å…è®¸å—çº§ä½œç”¨åŸŸçš„ä»»æ„åµŒå¥—ã€‚</p>
<pre><code class="javascript">{{{{{let insane = 'Hello World'}}}}};
</code></pre>
<p>ä¸Šé¢ä»£ç ä½¿ç”¨äº†ä¸€ä¸ªäº”å±‚çš„å—çº§ä½œç”¨åŸŸã€‚å¤–å±‚ä½œç”¨åŸŸæ— æ³•è¯»å–å†…å±‚ä½œç”¨åŸŸçš„å˜é‡ã€‚</p>
<pre><code class="javascript">{{{{
  {let insane = 'Hello World'}
  console.log(insane); // æŠ¥é”™
}}}};
</code></pre>
<p>å†…å±‚ä½œç”¨åŸŸå¯ä»¥å®šä¹‰å¤–å±‚ä½œç”¨åŸŸçš„åŒåå˜é‡ã€‚</p>
<pre><code class="javascript">{{{{
  let insane = 'Hello World';
  {let insane = 'Hello World'}
}}}};
</code></pre>
<p>å—çº§ä½œç”¨åŸŸçš„å‡ºç°ï¼Œå®é™…ä¸Šä½¿å¾—è·å¾—å¹¿æ³›åº”ç”¨çš„ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰ä¸å†å¿…è¦äº†ã€‚</p>
<pre><code class="javascript">// IIFE å†™æ³•
(function () {
  var tmp = ...;
  ...
}());

// å—çº§ä½œç”¨åŸŸå†™æ³•
{
  let tmp = ...;
  ...
}
</code></pre>
<h3 id="å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜"><a href="#å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜" class="headerlink" title="å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜"></a>å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜</h3><p>å‡½æ•°èƒ½ä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜ï¼Œæ˜¯ä¸€ä¸ªç›¸å½“ä»¤äººæ··æ·†çš„é—®é¢˜ã€‚</p>
<p>ES5è§„å®šï¼Œå‡½æ•°åªèƒ½åœ¨é¡¶å±‚ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜ï¼Œä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸå£°æ˜ã€‚</p>
<pre><code class="javascript">// æƒ…å†µä¸€
if (true) {
  function f() {}
}

// æƒ…å†µäºŒ
try {
  function f() {}
} catch(e) {
}
</code></pre>
<p>ä¸Šé¢ä»£ç çš„ä¸¤ç§å‡½æ•°å£°æ˜ï¼Œæ ¹æ®ES5çš„è§„å®šéƒ½æ˜¯éæ³•çš„ã€‚</p>
<p>ä½†æ˜¯ï¼Œæµè§ˆå™¨æ²¡æœ‰éµå®ˆè¿™ä¸ªè§„å®šï¼Œä¸ºäº†å…¼å®¹ä»¥å‰çš„æ—§ä»£ç ï¼Œè¿˜æ˜¯æ”¯æŒåœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜å‡½æ•°ï¼Œå› æ­¤ä¸Šé¢ä¸¤ç§æƒ…å†µå®é™…éƒ½èƒ½è¿è¡Œï¼Œä¸ä¼šæŠ¥é”™ã€‚ä¸è¿‡ï¼Œâ€œä¸¥æ ¼æ¨¡å¼â€ä¸‹è¿˜æ˜¯ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// ES5ä¸¥æ ¼æ¨¡å¼
&#39;use strict&#39;;
if (true) {
  function f() {}
}
// æŠ¥é”™
</code></pre>
<p>ES6 å¼•å…¥äº†å—çº§ä½œç”¨åŸŸï¼Œæ˜ç¡®å…è®¸åœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜å‡½æ•°ã€‚</p>
<pre><code class="javascript">// ES6ä¸¥æ ¼æ¨¡å¼
&#39;use strict&#39;;
if (true) {
  function f() {}
}
// ä¸æŠ¥é”™
</code></pre>
<p>ES6 è§„å®šï¼Œå—çº§ä½œç”¨åŸŸä¹‹ä¸­ï¼Œå‡½æ•°å£°æ˜è¯­å¥çš„è¡Œä¸ºç±»ä¼¼äº<code>let</code>ï¼Œåœ¨å—çº§ä½œç”¨åŸŸä¹‹å¤–ä¸å¯å¼•ç”¨ã€‚</p>
<pre><code class="javascript">function f() { console.log(&#39;I am outside!&#39;); }
(function () {
  if (false) {
    // é‡å¤å£°æ˜ä¸€æ¬¡å‡½æ•°f
    function f() { console.log(&#39;I am inside!&#39;); }
  }

  f();
}());
</code></pre>
<p>ä¸Šé¢ä»£ç åœ¨ ES5 ä¸­è¿è¡Œï¼Œä¼šå¾—åˆ°â€œI am inside!â€ï¼Œå› ä¸ºåœ¨<code>if</code>å†…å£°æ˜çš„å‡½æ•°<code>f</code>ä¼šè¢«æå‡åˆ°å‡½æ•°å¤´éƒ¨ï¼Œå®é™…è¿è¡Œçš„ä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">// ES5ç‰ˆæœ¬
function f() { console.log(&#39;I am outside!&#39;); }
(function () {
  function f() { console.log(&#39;I am inside!&#39;); }
  if (false) {
  }
  f();
}());
</code></pre>
<p>ES6 çš„è¿è¡Œç»“æœå°±å®Œå…¨ä¸ä¸€æ ·äº†ï¼Œä¼šå¾—åˆ°â€œI am outside!â€ã€‚å› ä¸ºå—çº§ä½œç”¨åŸŸå†…å£°æ˜çš„å‡½æ•°ç±»ä¼¼äº<code>let</code>ï¼Œå¯¹ä½œç”¨åŸŸä¹‹å¤–æ²¡æœ‰å½±å“ï¼Œå®é™…è¿è¡Œçš„ä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="javascript">// ES6ç‰ˆæœ¬
function f() { console.log(&#39;I am outside!&#39;); }
(function () {
  f();
}());
</code></pre>
<p>å¾ˆæ˜¾ç„¶ï¼Œè¿™ç§è¡Œä¸ºå·®å¼‚ä¼šå¯¹è€ä»£ç äº§ç”Ÿå¾ˆå¤§å½±å“ã€‚ä¸ºäº†å‡è½»å› æ­¤äº§ç”Ÿçš„ä¸å…¼å®¹é—®é¢˜ï¼ŒES6åœ¨<a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-block-level-function-declarations-web-legacy-compatibility-semantics" target="_blank" rel="external">é™„å½•B</a>é‡Œé¢è§„å®šï¼Œæµè§ˆå™¨çš„å®ç°å¯ä»¥ä¸éµå®ˆä¸Šé¢çš„è§„å®šï¼Œæœ‰è‡ªå·±çš„<a href="http://stackoverflow.com/questions/31419897/what-are-the-precise-semantics-of-block-level-functions-in-es6" target="_blank" rel="external">è¡Œä¸ºæ–¹å¼</a>ã€‚</p>
<ul>
<li>å…è®¸åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•°ã€‚</li>
<li>å‡½æ•°å£°æ˜ç±»ä¼¼äº<code>var</code>ï¼Œå³ä¼šæå‡åˆ°å…¨å±€ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸçš„å¤´éƒ¨ã€‚</li>
<li>åŒæ—¶ï¼Œå‡½æ•°å£°æ˜è¿˜ä¼šæå‡åˆ°æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸçš„å¤´éƒ¨ã€‚</li>
</ul>
<p>æ³¨æ„ï¼Œä¸Šé¢ä¸‰æ¡è§„åˆ™åªå¯¹ES6çš„æµè§ˆå™¨å®ç°æœ‰æ•ˆï¼Œå…¶ä»–ç¯å¢ƒçš„å®ç°ä¸ç”¨éµå®ˆï¼Œè¿˜æ˜¯å°†å—çº§ä½œç”¨åŸŸçš„å‡½æ•°å£°æ˜å½“ä½œ<code>let</code>å¤„ç†ã€‚</p>
<p>å‰é¢é‚£æ®µä»£ç ï¼Œåœ¨ Chrome ç¯å¢ƒä¸‹è¿è¡Œä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// ES6çš„æµè§ˆå™¨ç¯å¢ƒ
function f() { console.log(&#39;I am outside!&#39;); }
(function () {
  if (false) {
    // é‡å¤å£°æ˜ä¸€æ¬¡å‡½æ•°f
    function f() { console.log(&#39;I am inside!&#39;); }
  }

  f();
}());
// Uncaught TypeError: f is not a function
</code></pre>
<p>ä¸Šé¢çš„ä»£ç æŠ¥é”™ï¼Œæ˜¯å› ä¸ºå®é™…è¿è¡Œçš„æ˜¯ä¸‹é¢çš„ä»£ç ã€‚</p>
<pre><code class="javascript">// ES6çš„æµè§ˆå™¨ç¯å¢ƒ
function f() { console.log(&#39;I am outside!&#39;); }
(function () {
  var f = undefined;
  if (false) {
    function f() { console.log(&#39;I am inside!&#39;); }
  }

  f();
}());
// Uncaught TypeError: f is not a function
</code></pre>
<p>è€ƒè™‘åˆ°ç¯å¢ƒå¯¼è‡´çš„è¡Œä¸ºå·®å¼‚å¤ªå¤§ï¼Œåº”è¯¥é¿å…åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•°ã€‚å¦‚æœç¡®å®éœ€è¦ï¼Œä¹Ÿåº”è¯¥å†™æˆå‡½æ•°è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯å‡½æ•°å£°æ˜è¯­å¥ã€‚</p>
<pre><code class="javascript">// å‡½æ•°å£°æ˜è¯­å¥
{
  let a = &#39;secret&#39;;
  function f() {
    return a;
  }
}

// å‡½æ•°è¡¨è¾¾å¼
{
  let a = &#39;secret&#39;;
  let f = function () {
    return a;
  };
}
</code></pre>
<p>å¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ES6çš„å—çº§ä½œç”¨åŸŸå…è®¸å£°æ˜å‡½æ•°çš„è§„åˆ™ï¼Œåªåœ¨ä½¿ç”¨å¤§æ‹¬å·çš„æƒ…å†µä¸‹æˆç«‹ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨å¤§æ‹¬å·ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="javascript">// ä¸æŠ¥é”™
&#39;use strict&#39;;
if (true) {
  function f() {}
}

// æŠ¥é”™
&#39;use strict&#39;;
if (true)
  function f() {}
</code></pre>
<h3 id="do-è¡¨è¾¾å¼"><a href="#do-è¡¨è¾¾å¼" class="headerlink" title="do è¡¨è¾¾å¼"></a>do è¡¨è¾¾å¼</h3><p>æœ¬è´¨ä¸Šï¼Œå—çº§ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªè¯­å¥ï¼Œå°†å¤šä¸ªæ“ä½œå°è£…åœ¨ä¸€èµ·ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</p>
<pre><code class="javascript">{
  let t = f();
  t = t * t + 1;
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå—çº§ä½œç”¨åŸŸå°†ä¸¤ä¸ªè¯­å¥å°è£…åœ¨ä¸€èµ·ã€‚ä½†æ˜¯ï¼Œåœ¨å—çº§ä½œç”¨åŸŸä»¥å¤–ï¼Œæ²¡æœ‰åŠæ³•å¾—åˆ°<code>t</code>çš„å€¼ï¼Œå› ä¸ºå—çº§ä½œç”¨åŸŸä¸è¿”å›å€¼ï¼Œé™¤é<code>t</code>æ˜¯å…¨å±€å˜é‡ã€‚</p>
<p>ç°åœ¨æœ‰ä¸€ä¸ª<a href="http://wiki.ecmascript.org/doku.php?id=strawman:do_expressions" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œä½¿å¾—å—çº§ä½œç”¨åŸŸå¯ä»¥å˜ä¸ºè¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è¿”å›å€¼ï¼ŒåŠæ³•å°±æ˜¯åœ¨å—çº§ä½œç”¨åŸŸä¹‹å‰åŠ ä¸Š<code>do</code>ï¼Œä½¿å®ƒå˜ä¸º<code>do</code>è¡¨è¾¾å¼ã€‚</p>
<pre><code class="javascript">let x = do {
  let t = f();
  t * t + 1;
};
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡<code>x</code>ä¼šå¾—åˆ°æ•´ä¸ªå—çº§ä½œç”¨åŸŸçš„è¿”å›å€¼ã€‚</p>
<h2 id="constå‘½ä»¤"><a href="#constå‘½ä»¤" class="headerlink" title="constå‘½ä»¤"></a>constå‘½ä»¤</h2><p><code>const</code>å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ã€‚ä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜ã€‚</p>
<pre><code class="javascript">const PI = 3.1415;
PI // 3.1415

PI = 3;
// TypeError: Assignment to constant variable.
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨æ˜æ”¹å˜å¸¸é‡çš„å€¼ä¼šæŠ¥é”™ã€‚</p>
<p><code>const</code>å£°æ˜çš„å˜é‡ä¸å¾—æ”¹å˜å€¼ï¼Œè¿™æ„å‘³ç€ï¼Œconstä¸€æ—¦å£°æ˜å˜é‡ï¼Œå°±å¿…é¡»ç«‹å³åˆå§‹åŒ–ï¼Œä¸èƒ½ç•™åˆ°ä»¥åèµ‹å€¼ã€‚</p>
<pre><code class="javascript">const foo;
// SyntaxError: Missing initializer in const declaration
</code></pre>
<p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¯¹äº<code>const</code>æ¥è¯´ï¼Œåªå£°æ˜ä¸èµ‹å€¼ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<p><code>const</code>çš„ä½œç”¨åŸŸä¸<code>let</code>å‘½ä»¤ç›¸åŒï¼šåªåœ¨å£°æ˜æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆã€‚</p>
<pre><code class="javascript">if (true) {
  const MAX = 5;
}

MAX // Uncaught ReferenceError: MAX is not defined
</code></pre>
<p><code>const</code>å‘½ä»¤å£°æ˜çš„å¸¸é‡ä¹Ÿæ˜¯ä¸æå‡ï¼ŒåŒæ ·å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œåªèƒ½åœ¨å£°æ˜çš„ä½ç½®åé¢ä½¿ç”¨ã€‚</p>
<pre><code class="javascript">if (true) {
  console.log(MAX); // ReferenceError
  const MAX = 5;
}
</code></pre>
<p>ä¸Šé¢ä»£ç åœ¨å¸¸é‡<code>MAX</code>å£°æ˜ä¹‹å‰å°±è°ƒç”¨ï¼Œç»“æœæŠ¥é”™ã€‚</p>
<p><code>const</code>å£°æ˜çš„å¸¸é‡ï¼Œä¹Ÿä¸<code>let</code>ä¸€æ ·ä¸å¯é‡å¤å£°æ˜ã€‚</p>
<pre><code class="javascript">var message = &quot;Hello!&quot;;
let age = 25;

// ä»¥ä¸‹ä¸¤è¡Œéƒ½ä¼šæŠ¥é”™
const message = &quot;Goodbye!&quot;;
const age = 30;
</code></pre>
<p>å¯¹äºå¤åˆç±»å‹çš„å˜é‡ï¼Œå˜é‡åä¸æŒ‡å‘æ•°æ®ï¼Œè€Œæ˜¯æŒ‡å‘æ•°æ®æ‰€åœ¨çš„åœ°å€ã€‚<code>const</code>å‘½ä»¤åªæ˜¯ä¿è¯å˜é‡åæŒ‡å‘çš„åœ°å€ä¸å˜ï¼Œå¹¶ä¸ä¿è¯è¯¥åœ°å€çš„æ•°æ®ä¸å˜ï¼Œæ‰€ä»¥å°†ä¸€ä¸ªå¯¹è±¡å£°æ˜ä¸ºå¸¸é‡å¿…é¡»éå¸¸å°å¿ƒã€‚</p>
<pre><code class="javascript">const foo = {};
foo.prop = 123;

foo.prop
// 123

foo = {}; // TypeError: &quot;foo&quot; is read-only
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¸¸é‡<code>foo</code>å‚¨å­˜çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚ä¸å¯å˜çš„åªæ˜¯è¿™ä¸ªåœ°å€ï¼Œå³ä¸èƒ½æŠŠ<code>foo</code>æŒ‡å‘å¦ä¸€ä¸ªåœ°å€ï¼Œä½†å¯¹è±¡æœ¬èº«æ˜¯å¯å˜çš„ï¼Œæ‰€ä»¥ä¾ç„¶å¯ä»¥ä¸ºå…¶æ·»åŠ æ–°å±æ€§ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="js">const a = [];
a.push(&#39;Hello&#39;); // å¯æ‰§è¡Œ
a.length = 0;    // å¯æ‰§è¡Œ
a = [&#39;Dave&#39;];    // æŠ¥é”™
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¸¸é‡<code>a</code>æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æœ¬èº«æ˜¯å¯å†™çš„ï¼Œä½†æ˜¯å¦‚æœå°†å¦ä¸€ä¸ªæ•°ç»„èµ‹å€¼ç»™<code>a</code>ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<p>å¦‚æœçœŸçš„æƒ³å°†å¯¹è±¡å†»ç»“ï¼Œåº”è¯¥ä½¿ç”¨<code>Object.freeze</code>æ–¹æ³•ã€‚</p>
<pre><code class="javascript">const foo = Object.freeze({});

// å¸¸è§„æ¨¡å¼æ—¶ï¼Œä¸‹é¢ä¸€è¡Œä¸èµ·ä½œç”¨ï¼›
// ä¸¥æ ¼æ¨¡å¼æ—¶ï¼Œè¯¥è¡Œä¼šæŠ¥é”™
foo.prop = 123;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¸¸é‡<code>foo</code>æŒ‡å‘ä¸€ä¸ªå†»ç»“çš„å¯¹è±¡ï¼Œæ‰€ä»¥æ·»åŠ æ–°å±æ€§ä¸èµ·ä½œç”¨ï¼Œä¸¥æ ¼æ¨¡å¼æ—¶è¿˜ä¼šæŠ¥é”™ã€‚</p>
<p>é™¤äº†å°†å¯¹è±¡æœ¬èº«å†»ç»“ï¼Œå¯¹è±¡çš„å±æ€§ä¹Ÿåº”è¯¥å†»ç»“ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå°†å¯¹è±¡å½»åº•å†»ç»“çš„å‡½æ•°ã€‚</p>
<pre><code class="javascript">var constantize = (obj) =&gt; {
  Object.freeze(obj);
  Object.keys(obj).forEach( (key, value) =&gt; {
    if ( typeof obj[key] === &#39;object&#39; ) {
      constantize( obj[key] );
    }
  });
};
</code></pre>
<p>ES5åªæœ‰ä¸¤ç§å£°æ˜å˜é‡çš„æ–¹æ³•ï¼š<code>var</code>å‘½ä»¤å’Œ<code>function</code>å‘½ä»¤ã€‚ES6é™¤äº†æ·»åŠ <code>let</code>å’Œ<code>const</code>å‘½ä»¤ï¼Œåé¢ç« èŠ‚è¿˜ä¼šæåˆ°ï¼Œå¦å¤–ä¸¤ç§å£°æ˜å˜é‡çš„æ–¹æ³•ï¼š<code>import</code>å‘½ä»¤å’Œ<code>class</code>å‘½ä»¤ã€‚æ‰€ä»¥ï¼ŒES6ä¸€å…±æœ‰6ç§å£°æ˜å˜é‡çš„æ–¹æ³•ã€‚</p>
<h2 id="é¡¶å±‚å¯¹è±¡çš„å±æ€§"><a href="#é¡¶å±‚å¯¹è±¡çš„å±æ€§" class="headerlink" title="é¡¶å±‚å¯¹è±¡çš„å±æ€§"></a>é¡¶å±‚å¯¹è±¡çš„å±æ€§</h2><p>é¡¶å±‚å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒæŒ‡çš„æ˜¯<code>window</code>å¯¹è±¡ï¼Œåœ¨NodeæŒ‡çš„æ˜¯<code>global</code>å¯¹è±¡ã€‚ES5ä¹‹ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æ˜¯ç­‰ä»·çš„ã€‚</p>
<pre><code class="javascript">window.a = 1;
a // 1

a = 2;
window.a // 2
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§èµ‹å€¼ä¸å…¨å±€å˜é‡çš„èµ‹å€¼ï¼Œæ˜¯åŒä¸€ä»¶äº‹ã€‚</p>
<p>é¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æŒ‚é’©ï¼Œè¢«è®¤ä¸ºæ˜¯JavaScriptè¯­è¨€æœ€å¤§çš„è®¾è®¡è´¥ç¬”ä¹‹ä¸€ã€‚è¿™æ ·çš„è®¾è®¡å¸¦æ¥äº†å‡ ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œé¦–å…ˆæ˜¯æ²¡æ³•åœ¨ç¼–è¯‘æ—¶å°±æŠ¥å‡ºå˜é‡æœªå£°æ˜çš„é”™è¯¯ï¼Œåªæœ‰è¿è¡Œæ—¶æ‰èƒ½çŸ¥é“ï¼ˆå› ä¸ºå…¨å±€å˜é‡å¯èƒ½æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§åˆ›é€ çš„ï¼Œè€Œå±æ€§çš„åˆ›é€ æ˜¯åŠ¨æ€çš„ï¼‰ï¼›å…¶æ¬¡ï¼Œç¨‹åºå‘˜å¾ˆå®¹æ˜“ä¸çŸ¥ä¸è§‰åœ°å°±åˆ›å»ºäº†å…¨å±€å˜é‡ï¼ˆæ¯”å¦‚æ‰“å­—å‡ºé”™ï¼‰ï¼›æœ€åï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§æ˜¯åˆ°å¤„å¯ä»¥è¯»å†™çš„ï¼Œè¿™éå¸¸ä¸åˆ©äºæ¨¡å—åŒ–ç¼–ç¨‹ã€‚å¦ä¸€æ–¹é¢ï¼Œ<code>window</code>å¯¹è±¡æœ‰å®ä½“å«ä¹‰ï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨çš„çª—å£å¯¹è±¡ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯ä¸€ä¸ªæœ‰å®ä½“å«ä¹‰çš„å¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸åˆé€‚çš„ã€‚</p>
<p>ES6ä¸ºäº†æ”¹å˜è¿™ä¸€ç‚¹ï¼Œä¸€æ–¹é¢è§„å®šï¼Œä¸ºäº†ä¿æŒå…¼å®¹æ€§ï¼Œ<code>var</code>å‘½ä»¤å’Œ<code>function</code>å‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¾æ—§æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼›å¦ä¸€æ–¹é¢è§„å®šï¼Œ<code>let</code>å‘½ä»¤ã€<code>const</code>å‘½ä»¤ã€<code>class</code>å‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºé¡¶å±‚å¯¹è±¡çš„å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»ES6å¼€å§‹ï¼Œå…¨å±€å˜é‡å°†é€æ­¥ä¸é¡¶å±‚å¯¹è±¡çš„å±æ€§è„±é’©ã€‚</p>
<pre><code class="javascript">var a = 1;
// å¦‚æœåœ¨Nodeçš„REPLç¯å¢ƒï¼Œå¯ä»¥å†™æˆglobal.a
// æˆ–è€…é‡‡ç”¨é€šç”¨æ–¹æ³•ï¼Œå†™æˆthis.a
window.a // 1

let b = 1;
window.b // undefined
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå…¨å±€å˜é‡<code>a</code>ç”±<code>var</code>å‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥å®ƒæ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼›å…¨å±€å˜é‡<code>b</code>ç”±<code>let</code>å‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼Œè¿”å›<code>undefined</code>ã€‚</p>
<h2 id="global-å¯¹è±¡"><a href="#global-å¯¹è±¡" class="headerlink" title="global å¯¹è±¡"></a>global å¯¹è±¡</h2><p>ES5çš„é¡¶å±‚å¯¹è±¡ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒåœ¨å„ç§å®ç°é‡Œé¢æ˜¯ä¸ç»Ÿä¸€çš„ã€‚</p>
<ul>
<li>æµè§ˆå™¨é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯<code>window</code>ï¼Œä½† Node å’Œ Web Worker æ²¡æœ‰<code>window</code>ã€‚</li>
<li>æµè§ˆå™¨å’Œ Web Worker é‡Œé¢ï¼Œ<code>self</code>ä¹ŸæŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œä½†æ˜¯Nodeæ²¡æœ‰<code>self</code>ã€‚</li>
<li>Node é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯<code>global</code>ï¼Œä½†å…¶ä»–ç¯å¢ƒéƒ½ä¸æ”¯æŒã€‚</li>
</ul>
<p>åŒä¸€æ®µä»£ç ä¸ºäº†èƒ½å¤Ÿåœ¨å„ç§ç¯å¢ƒï¼Œéƒ½èƒ½å–åˆ°é¡¶å±‚å¯¹è±¡ï¼Œç°åœ¨ä¸€èˆ¬æ˜¯ä½¿ç”¨<code>this</code>å˜é‡ï¼Œä½†æ˜¯æœ‰å±€é™æ€§ã€‚</p>
<ul>
<li>å…¨å±€ç¯å¢ƒä¸­ï¼Œ<code>this</code>ä¼šè¿”å›é¡¶å±‚å¯¹è±¡ã€‚ä½†æ˜¯ï¼ŒNodeæ¨¡å—å’ŒES6æ¨¡å—ä¸­ï¼Œ<code>this</code>è¿”å›çš„æ˜¯å½“å‰æ¨¡å—ã€‚</li>
<li>å‡½æ•°é‡Œé¢çš„<code>this</code>ï¼Œå¦‚æœå‡½æ•°ä¸æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¿è¡Œï¼Œè€Œæ˜¯å•çº¯ä½œä¸ºå‡½æ•°è¿è¡Œï¼Œ<code>this</code>ä¼šæŒ‡å‘é¡¶å±‚å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™æ—¶<code>this</code>ä¼šè¿”å›<code>undefined</code>ã€‚</li>
<li>ä¸ç®¡æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œè¿˜æ˜¯æ™®é€šæ¨¡å¼ï¼Œ<code>new Function(&#39;return this&#39;)()</code>ï¼Œæ€»æ˜¯ä¼šè¿”å›å…¨å±€å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå¦‚æœæµè§ˆå™¨ç”¨äº†CSPï¼ˆContent Security Policyï¼Œå†…å®¹å®‰å…¨æ”¿ç­–ï¼‰ï¼Œé‚£ä¹ˆ<code>eval</code>ã€<code>new Function</code>è¿™äº›æ–¹æ³•éƒ½å¯èƒ½æ— æ³•ä½¿ç”¨ã€‚</li>
</ul>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¾ˆéš¾æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œéƒ½å–åˆ°é¡¶å±‚å¯¹è±¡ã€‚ä¸‹é¢æ˜¯ä¸¤ç§å‹‰å¼ºå¯ä»¥ä½¿ç”¨çš„æ–¹æ³•ã€‚</p>
<pre><code class="javascript">// æ–¹æ³•ä¸€
(typeof window !== &#39;undefined&#39;
   ? window
   : (typeof process === &#39;object&#39; &amp;&amp;
      typeof require === &#39;function&#39; &amp;&amp;
      typeof global === &#39;object&#39;)
     ? global
     : this);

// æ–¹æ³•äºŒ
var getGlobal = function () {
  if (typeof self !== &#39;undefined&#39;) { return self; }
  if (typeof window !== &#39;undefined&#39;) { return window; }
  if (typeof global !== &#39;undefined&#39;) { return global; }
  throw new Error(&#39;unable to locate global object&#39;);
};
</code></pre>
<p>ç°åœ¨æœ‰ä¸€ä¸ª<a href="https://github.com/tc39/proposal-global" target="_blank" rel="external">ææ¡ˆ</a>ï¼Œåœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ï¼Œå¼•å…¥<code>global</code>ä½œä¸ºé¡¶å±‚å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰€æœ‰ç¯å¢ƒä¸‹ï¼Œ<code>global</code>éƒ½æ˜¯å­˜åœ¨çš„ï¼Œéƒ½å¯ä»¥ä»å®ƒæ‹¿åˆ°é¡¶å±‚å¯¹è±¡ã€‚</p>
<p>å«ç‰‡åº“<a href="https://github.com/ljharb/System.global" target="_blank" rel="external"><code>system.global</code></a>æ¨¡æ‹Ÿäº†è¿™ä¸ªææ¡ˆï¼Œå¯ä»¥åœ¨æ‰€æœ‰ç¯å¢ƒæ‹¿åˆ°<code>global</code>ã€‚</p>
<pre><code class="javascript">// CommonJSçš„å†™æ³•
require(&#39;system.global/shim&#39;)();

// ES6æ¨¡å—çš„å†™æ³•
import shim from &#39;system.global/shim&#39;; shim();
</code></pre>
<p>ä¸Šé¢ä»£ç å¯ä»¥ä¿è¯å„ç§ç¯å¢ƒé‡Œé¢ï¼Œ<code>global</code>å¯¹è±¡éƒ½æ˜¯å­˜åœ¨çš„ã€‚</p>
<pre><code class="javascript">// CommonJSçš„å†™æ³•
var global = require(&#39;system.global&#39;)();

// ES6æ¨¡å—çš„å†™æ³•
import getGlobal from &#39;system.global&#39;;
const global = getGlobal();
</code></pre>
<p>ä¸Šé¢ä»£ç å°†é¡¶å±‚å¯¹è±¡æ”¾å…¥å˜é‡<code>global</code>ã€‚</p>
<h2 id="å…³äº"><a href="#å…³äº" class="headerlink" title="å…³äº"></a>å…³äº</h2><p>å†…å®¹æ¥è‡ªé˜®ä¸€å³°è€å¸ˆçš„ã€ŠES6æ ‡å‡†å…¥é—¨ã€‹ï¼Œæ„Ÿè°¢</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;letå’Œconstå‘½ä»¤&quot;&gt;&lt;a href=&quot;#letå’Œconstå‘½ä»¤&quot; class=&quot;headerlink&quot; title=&quot;letå’Œconstå‘½ä»¤&quot;&gt;&lt;/a&gt;letå’Œconstå‘½ä»¤&lt;/h1&gt;&lt;h2 id=&quot;letå‘½ä»¤&quot;&gt;&lt;a href=&quot;#letå‘½ä»¤&quot; class
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ES6" scheme="https://microzz.com/tags/ES6/"/>
    
      <category term="ECMAScript6" scheme="https://microzz.com/tags/ECMAScript6/"/>
    
      <category term="const" scheme="https://microzz.com/tags/const/"/>
    
      <category term="let" scheme="https://microzz.com/tags/let/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptç¼–ç è§„èŒƒæŒ‡å—</title>
    <link href="https://microzz.com/2016/10/01/javascript-code-style/"/>
    <id>https://microzz.com/2016/10/01/javascript-code-style/</id>
    <published>2016-10-01T01:26:09.000Z</published>
    <updated>2017-09-09T14:04:21.528Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Airbnbçš„JavaScriptç¼–ç è§„èŒƒæŒ‡å—"><a href="#Airbnbçš„JavaScriptç¼–ç è§„èŒƒæŒ‡å—" class="headerlink" title="Airbnbçš„JavaScriptç¼–ç è§„èŒƒæŒ‡å—"></a>Airbnbçš„JavaScriptç¼–ç è§„èŒƒæŒ‡å—</h1><p>=====================<br><em>å¸¸ç”¨çš„ä¸€äº›javascriptè§„èŒƒ</em></p>
<h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><ul>
<li><p><strong>åŸå§‹ç±»å‹(Primitives)</strong>ï¼šå½“ä½ ç»™ä¸€ä¸ªåŸå§‹ç±»å‹èµ‹å€¼æ—¶ï¼Œè¿”å›çš„æ˜¯è¿™ä¸ªå€¼çš„æœ¬èº«ã€‚</p>
<ul>
<li><code>string</code></li>
<li><code>number</code></li>
<li><code>boolean</code></li>
<li><code>null</code></li>
<li><p><code>undefined</code></p>
<pre><code class="javascript">var foo = 1,
  bar = foo;

bar = 9;

console.log(foo, bar); // =&gt; 1, 9
</code></pre>
</li>
</ul>
</li>
<li><p><strong>å¯¹è±¡ç±»å‹</strong>:å½“ä½ ç»™ä¸€ä¸ªå¯¹è±¡ç±»å‹èµ‹å€¼æ—¶ï¼Œè¿”å›çš„æ˜¯è¿™ä¸ªå€¼çš„å¼•ç”¨ã€‚</p>
<ul>
<li><code>object</code></li>
<li><code>array</code></li>
<li><p><code>function</code></p>
<pre><code class="javascript">var foo = [1, 2],
  bar = foo;

bar[0] = 9;

console.log(foo[0], bar[0]); // =&gt; 9, 9
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h2><ul>
<li><p>æ–°å»ºä¸€ä¸ªå¯¹è±¡çš„è¯­æ³•</p>
<pre><code class="javascript">  //ä¸æ¨è
  var item = new Object();

  //æ¨è
  var item = {};
</code></pre>
</li>
<li><p>ä¸è¦ä½¿ç”¨<a href="http://es5.github.io/#x7.6.1" target="_blank" rel="external">ä¿ç•™å­—</a>ä½œä¸ºé”®å€¼ï¼Œå¦åˆ™åœ¨IE8ä¸‹é¢ä¼šå‡ºç°é—®é¢˜(<a href="https://github.com/airbnb/javascript/issues/61" target="_blank" rel="external">è¯¦æƒ…</a>)ã€‚</p>
<pre><code class="javascript">  //ä¸æ¨è
  var superman = {
    default: { clark: &#39;kent&#39;},
    private: true
  };

  //æ¨è
  var superman ={
    defaults: { clark: &#39;kent&#39;},
    hidden: true
  };
</code></pre>
</li>
<li><p>ä½¿ç”¨å¯è¯»æ€§å¼ºçš„åŒä¹‰è¯ä»£æ›¿ä¿ç•™å­—</p>
<pre><code class="javascript">  //ä¸æ¨è
  var superman = {
    class: &#39;alien&#39;
  };

  //ä¸æ¨è
  var superman = {
    klass: &#39;alien&#39;
  };

  //æ¨è
  var superman = {
    type: &#39;alien&#39;
  };
</code></pre>
</li>
</ul>
<h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><ul>
<li><p>æ–°å»ºä¸€ä¸ªæ•°ç»„çš„è¯­æ³•</p>
<pre><code class="javascript">  //ä¸æ¨è
  var items = new Array();

  //æ¨è
  var items = [];
</code></pre>
</li>
<li><p>å¦‚æœä½ ä¸çŸ¥é“æ•°ç»„çš„é•¿åº¦å¯ä»¥ä½¿ç”¨pushå°†å…ƒç´ åŠ å…¥ã€‚</p>
<pre><code class="javascript">  var someStack = [];

  //ä¸æ¨è
  someStack[someStack.length] = &#39;something&#39;;

  //æ¨è
  someStack.push(&#39;something&#39;);
</code></pre>
</li>
<li><p>å½“ä½ éœ€è¦å¤åˆ¶ä¸€ä¸ªæ•°ç»„çš„æ—¶å€™ä½¿ç”¨sliceã€‚<a href="http://jsperf.com/converting-arguments-to-an-array/7" target="_blank" rel="external">jsPerf</a></p>
<pre><code class="javascript">  var len = items.length,
    itemsCopy = [],
    i;

  //ä¸æ¨è
  for (i = 0; i &lt; len; i++){
    itemsCopy[i] = items[i];
  }

  //æ¨è
  itemsCopy = items.slice();
</code></pre>
</li>
<li><p>ç”¨sliceè½¬æ¢ä¼ªæ•°ç»„å¯¹è±¡åˆ°æ•°ç»„</p>
<pre><code class="javascript">  function trigger() {
    var args = Array.prototype.slice.call(arguments);
    ...
  }
</code></pre>
</li>
</ul>
<h2 id="Stringç±»å‹"><a href="#Stringç±»å‹" class="headerlink" title="Stringç±»å‹"></a>Stringç±»å‹</h2><ul>
<li><p>ä½¿ç”¨å•å¼•å·<code>&#39;&#39;</code></p>
<pre><code class="javascript">  //ä¸æ¨è
  var name = &quot;Bob Parr&quot;;

  //æ¨è
  var name = &#39;Bob Parr&#39;;

  //ä¸æ¨è
  var fullName - &quot;Bob &quot; + this.lastName;

  //æ¨è
  var fullName = &#39;Bob &#39; + this.lastName;
</code></pre>
</li>
<li><p>å½“å­—ç¬¦ä¸²é•¿åº¦è¶…è¿‡80ä¸ªæ—¶ï¼Œåº”è¯¥é€šè¿‡å­—ç¬¦ä¸²è¿æ¥å¤šè¡Œæ˜¾ç¤ºã€‚</p>
</li>
<li><p>æ³¨æ„ï¼šè¿‡åº¦ä½¿ç”¨å­—ç¬¦ä¸²è¿æ¥å°†ä¼šå½±å“æ€§èƒ½ã€‚<a href="http://jsperf.com/ya-string-concat" target="_blank" rel="external">jsPerf</a>&amp;<a href="https://github.com/airbnb/javascript/issues/40" target="_blank" rel="external">Discussion</a></p>
<pre><code class="javascript">  //ä¸æ¨è
  var errorMessage = &#39;This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.&#39;;

  //ä¸æ¨è
  var errorMessage = &#39;This is a super long error that \
  was thrown because of Batman. \
  When you stop to think about \
  how Batman had anything to do \
  with this, you would get nowhere \
  fast.&#39;;

  //æ¨è
  var errorMessage = &#39;This is a super long error that &#39; +
    &#39;was thrown because of Batman.&#39; +
    &#39;When you stop to think about &#39; +
    &#39;how Batman had anything to do &#39; +
    &#39;with this, you would get nowhere &#39; +
    &#39;fast.&#39;;
</code></pre>
</li>
<li><p>å½“ç¨‹åºå»ºç«‹ä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œ ä½¿ç”¨joinä»£æ›¿å­—ç¬¦ä¸²è¿æ¥ã€‚ç‰¹åˆ«æ˜¯åœ¨IEä¸‹ï¼š<a href="http://jsperf.com/string-vs-array-concat/2" target="_blank" rel="external">jsPerf</a></p>
<pre><code class="javascript">  var items,
      messages,
      length, i;

  messages = [{
      state: &#39;success&#39;,
      message: &#39;This one worked.&#39;
  },{
      state: &#39;success&#39;,
      message: &#39;This one worked as well.&#39;
  },{
      state: &#39;error&#39;,
      message: &#39;This one did not work.&#39;
  }];

  length = messages.length;

  // ä¸æ¨è
  function inbox(messages) {
    items = &#39;&lt;ul&gt;&#39;;

    for (i = 0; i &lt; length; i++) {
      items += &#39;&lt;li&gt;&#39; + messages[i].message + &#39;&lt;/li&gt;&#39;;
    }

    return items + &#39;&lt;/ul&gt;&#39;;
  }

  // æ¨è
  function inbox(messages) {
    items = [];

    for (i = 0; i &lt; length; i++) {
      items[i] = messages[i].message;
    }

    return &#39;&lt;ul&gt;&lt;li&gt;&#39; + items.join(&#39;&lt;/li&gt;&lt;li&gt;&#39;) + &#39;&lt;/li&gt;&lt;/ul&gt;&#39;;
  }
</code></pre>
</li>
</ul>
<h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><ul>
<li><p>å‡½æ•°è¡¨è¾¾å¼ï¼š</p>
<pre><code class="javascript">  // åŒ¿åå‡½æ•°è¡¨è¾¾å¼
  var anonymous = function(){
    return true;
  }

  // å‘½åå‡½æ•°è¡¨è¾¾å¼
  var named = function named() {
    return true;
  };

  // ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰
  (function(){
    console.log(&#39;Welcome to the Internet. Please follow me.&#39;);
  })();
</code></pre>
</li>
<li><p>ä¸è¦å°†å‡½æ•°å£°æ˜æ”¾åœ¨å¦‚if/whileå¾ªç¯æˆ–å…¶ä»–ä»»ä½•è¯­å¥ä¸­ã€‚ä½†å¯ä»¥ç”¨å‡½æ•°è¡¨è¾¾å¼æ¥æ›¿ä»£å‡½æ•°å£°æ˜è¿™ä¹ˆåšã€‚ä¸€äº›æµè§ˆå™¨å¯èƒ½çš„ç¡®å¯ä»¥åœ¨è¯­å¥ä¸­ä½¿ç”¨å‡½æ•°å£°æ˜ã€‚ä½†æ˜¯åœ¨è§£ææ–¹é¢çš„å¤„ç†å„ä¸ç›¸åŒï¼Œå„ç§æµè§ˆå™¨ä¸‹å…¼å®¹æ€§å¾ˆä¸å¥½ã€‚</p>
</li>
<li><p><strong>æ³¨æ„:</strong> ECMA-262å®šä¹‰äº†ä¸€ç³»åˆ—çš„è¯­å¥ï¼Œä½†æ˜¯å‡½æ•°å£°æ˜å¹¶æ²¡æœ‰è¢«å½’ç±»ä¸ºçœŸæ­£çš„è¯­å¥ã€‚<a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf#page=97" target="_blank" rel="external">å…³äºè¿™ç‚¹å¯æŸ¥çœ‹ECMA-262çš„æ–‡æ¡£</a></p>
<pre><code class="javascript">  //ä¸æ¨è
  if (currentUser){
    function test() {
      console.log(&#39;Nope.&#39;);
    }
  }

  //æ¨è
  if (currentUser){
    var test = function test() {
      console.log(&#39;Yup.&#39;);
    }
  }
</code></pre>
</li>
<li><p><code>arguments</code> ä¸èƒ½ä½œä¸ºä¸€ä¸ªå‚æ•°çš„åå­—ï¼Œ å› ä¸ºè¿™ä¼šè¦†ç›–æ¯ä¸€ä¸ªå‡½æ•°å†…çš„<code>arguments</code>å¯¹è±¡ã€‚</p>
<pre><code class="javascript">  //ä¸æ¨è
  function nope(name, options, arguments) {
    // ...stuff...
  }

  //æ¨è
  function yup(name, options, args) {
    // ...stuff...
  }
</code></pre>
</li>
</ul>
<h2 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h2><ul>
<li><p>è®¿é—®ä¸€ä¸ªå±æ€§æ—¶ï¼Œä½¿ç”¨ç‚¹çš„å½¢å¼å–å€¼ã€‚</p>
<pre><code class="javascript">  var luke = {
    jedi: true,
    age: 28
  };

  // ä¸æ¨è
  var isJedi = luke[&#39;jedi&#39;];

  // æ¨è
  var isJedi = luke.jedi;
</code></pre>
</li>
<li><p>éœ€è¦ä¸€ä¸ªå˜é‡è®¿é—®ä¸€ä¸ªå±æ€§æ—¶ï¼Œä½¿ç”¨â€œ[]â€æ¥å–å€¼ã€‚</p>
<pre><code class="javascript">  var luke = {
    jedi: true,
    age: 28
  };

  function getProp(prop) {
    return luke[prop];
  }

  var isJedi = getProp(&#39;jedi&#39;);
</code></pre>
</li>
</ul>
<h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><ul>
<li><p>æ€»æ˜¯ä½¿ç”¨ <code>var</code> æ¥å®šä¹‰å˜é‡ã€‚å¦‚æœä¸è¿™ä¹ˆåšå°†å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡å‡ºæ¥ã€‚æˆ‘ä»¬å¸Œæœ›é¿å…å…¨å±€å‘½åç©ºé—´çš„æ±¡æŸ“ã€‚</p>
<pre><code class="javascript">  // ä¸æ¨è
  superPower = new SuperPower();

  // æ¨è
  var superPower = new SuperPower();
</code></pre>
</li>
<li><p>ä½¿ç”¨ä¸€ä¸ª<code>var</code> å£°æ˜å¤šä¸ªå˜é‡ï¼Œå¹¶ä¸”æ¯å£°æ˜ä¸€ä¸ªå˜é‡å°±æ¢ä¸€è¡Œã€‚</p>
<pre><code class="javascript">  // ä¸æ¨è
  var items = getItems();
  var goSportsTeam = true;
  var dragonball = &#39;z&#39;;

  // æ¨è
  var items = getItems(),
      goSportsTeam = true,
      dragonball = &#39;z&#39;;
</code></pre>
</li>
<li><p>å£°æ˜å¤šä¸ªå˜é‡æ—¶ï¼ŒæŠŠä¸èµ‹å€¼çš„å˜é‡æ”¾åœ¨åé¢ã€‚è¿™æ ·åšæ˜¯æœ‰å¥½å¤„çš„ï¼Œå¦‚æœæ—¥åä½ æƒ³ç»™æœªèµ‹å€¼å˜é‡èµ‹å€¼çš„æ—¶å€™ï¼Œå¯èƒ½è¦å¼•ç”¨åˆ°ä¸Šé¢å·²ç»èµ‹å€¼çš„å˜é‡ã€‚</p>
<pre><code class="javascript">  // ä¸æ¨è
  var i, len, dragonball,
      items = getItems(),
      goSportsTeam = true;

  // ä¸æ¨è
  var i, items = getItems(),
      dragonball,
      goSportsTeam = true,
      len;

  // æ¨è
  var items = getItems(),
      goSportsTeam = true,
      dragonball,
      length,
      i;
</code></pre>
</li>
<li><p>åœ¨ä¸€ä¸ªä½œç”¨åŸŸçš„é¡¶éƒ¨ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ã€‚è¿™æ ·æœ‰åŠ©äºé¿å¼€ï¼Œå˜é‡å£°æ˜å’Œå£°æ˜æå‰çš„åˆ†é…é—®é¢˜ã€‚</p>
<pre><code class="javascript">  // ä¸æ¨è
  function() {
    test();
    console.log(&#39;doing stuff..&#39;);

    //..other stuff..

    var name = getName();

    if (name === &#39;test&#39;) {
      return false;
    }

    return name;
  }

  // æ¨è
  function() {
    var name = getName();

    test();
    console.log(&#39;doing stuff..&#39;);

    //..other stuff..

    if (name === &#39;test&#39;) {
      return false;
    }

    return name;
  }

  // ä¸æ¨è
  function() {
    var name = getName();

    if (!arguments.length) {
      return false;
    }

    return true;
  }

  // æ¨è
  function() {
    if (!arguments.length) {
      return false;
    }

    var name = getName();

    return true;
  }
</code></pre>
</li>
</ul>
<h2 id="å£°æ˜æå‰"><a href="#å£°æ˜æå‰" class="headerlink" title="å£°æ˜æå‰"></a>å£°æ˜æå‰</h2><ul>
<li><p>ä¸ç®¡ä½ åœ¨ä½•å¤„ç»™ä¸€ä¸ªå˜é‡å£°æ˜æˆ–èµ‹å€¼ï¼Œjavascriptè§£æå™¨éƒ½ä¼šäº‹å…ˆåœ¨ä½œç”¨åŸŸçš„é¡¶ç«¯åšå£°æ˜æå‰ï¼ˆHoistingï¼‰ã€‚</p>
<pre><code class="javascript">  // æˆ‘ä»¬çŸ¥é“ä¸‹é¢å°†ä¸èƒ½æ­£å¸¸è¿è¡Œï¼ˆå‡è®¾æ²¡æœ‰å…¨å±€å˜é‡ï¼‰
  function example() {
    console.log(notDefined); // =&gt; æŠ›å‡ºä¸€ä¸ªå¼•ç”¨é”™è¯¯
  }

  // åœ¨å¼•ç”¨è¿™ä¸ªå˜é‡ä¹‹åï¼Œç»™è¿™ä¸ªå˜é‡èµ‹å€¼å°†ä¸ä¼šæŠ›å¼‚å¸¸ï¼Œè¿™æ˜¯å› ä¸ºjavascriptè§£æå™¨æœ‰å£°æ˜æå‰ã€‚
  // æ³¨æ„ï¼šèµ‹çš„â€œtrueâ€å€¼ï¼Œä¸ä¼šè¢«æå‰ã€‚
  function example() {
    console.log(declaredButNotAssigned); // =&gt; undefined
    var declaredButNotAssigned = true;
  }

  // javascriptè§£æå™¨,ä¼šåœ¨ä½œç”¨åŸŸçš„é¡¶éƒ¨æå‰å£°æ˜å˜é‡ã€‚
  // ç”¨ä»£ç æè¿°å‡ºæ¥ï¼Œå…¶å®å°±ç­‰åŒäºä¸‹é¢è¿™ç§æƒ…å†µã€‚
  function example() {
    var declaredButNotAssigned;
    console.log(declaredButNotAssigned); // =&gt; undefined
    declaredButNotAssigned = true;
  }
</code></pre>
</li>
<li><p>åŒ¿åå‡½æ•°è¡¨è¾¾å¼å°†è¯¥å˜é‡ååšäº†æå‰å£°æ˜ï¼Œæ²¡æœ‰ç»™è¯¥å˜é‡èµ‹å€¼å‡½æ•°ã€‚</p>
<pre><code class="javascript">  function example() {
    console.log(anonymous); // =&gt; undefined

    anonymous(); // =&gt; æŠ›å‡ºå¼‚å¸¸ï¼Œanonymous ä¸æ˜¯ä¸€ä¸ªå‡½æ•°

    var anonymous = function() {
      console.log(&#39;anonymous function expression&#39;);
    };
  }
</code></pre>
</li>
<li><p>å’ŒåŒ¿åä¸€æ ·ï¼Œæœ‰åå‡½æ•°è¡¨è¾¾å¼å°†è¯¥å˜é‡ååšäº†æå‰å£°æ˜ï¼Œæ²¡æœ‰ç»™è¯¥å˜é‡èµ‹å€¼å‡½æ•°åå’Œå‡½æ•°ä½“ã€‚</p>
<pre><code class="javascript">  function example() {
    console.log(named); // =&gt; undefined

    named(); // =&gt; æŠ›å‡ºå¼‚å¸¸ï¼Œ named ä¸æ˜¯ä¸€ä¸ªå‡½æ•°

    superPower(); // =&gt; æŠ›å‡ºå¼‚å¸¸ï¼Œ superPower æ²¡å®šä¹‰

    var named = function superPower() {
      console.log(&#39;Flying&#39;);
    };
  }

  // æŠŠå‡½æ•°åæ”¹æˆå’Œå˜é‡åä¸€æ ·ï¼Œä¹Ÿå¾—å‡ºåŒæ ·çš„ç»“æœã€‚
  function example() {
    console.log(named); // =&gt; undefined

    named(); // =&gt; æŠ›å‡ºå¼‚å¸¸ï¼Œ named ä¸æ˜¯ä¸€ä¸ªå‡½æ•°

    var named = function named() {
      console.log(&#39;named&#39;);
    };
  }
</code></pre>
</li>
<li><p>å‡½æ•°å£°æ˜ä¼šå°†å‡½æ•°åå’Œå‡½æ•°ä½“å£°æ˜æå‰ã€‚</p>
<pre><code class="javascript">  function example() {
    superPower(); // =&gt; Flying

    function superPower() {
      console.log(&#39;Flying&#39;);
    }
  }
</code></pre>
</li>
<li><p>æ›´å¤šä¿¡æ¯è¯·å‚ç…§ <a href="http://www.adequatelygood.com/" target="_blank" rel="external">Ben Cherry</a> çš„ <a href="http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting" target="_blank" rel="external">JavaScript Scoping &amp; Hoisting</a></p>
</li>
</ul>
<h2 id="æ¡ä»¶è¡¨è¾¾å¼ä¸ç­‰å¼"><a href="#æ¡ä»¶è¡¨è¾¾å¼ä¸ç­‰å¼" class="headerlink" title="æ¡ä»¶è¡¨è¾¾å¼ä¸ç­‰å¼"></a>æ¡ä»¶è¡¨è¾¾å¼ä¸ç­‰å¼</h2><ul>
<li><p>ä½¿ç”¨ <code>===</code> å’Œ <code>!==</code> ä»£æ›¿ <code>==</code> å’Œ <code>!=</code>ã€‚</p>
</li>
<li><p>æ¡ä»¶è¡¨è¾¾å¼ ä¼šé€šè¿‡ <code>ToBoolean</code> æ¥è¿›è¡Œå¼ºåˆ¶è½¬åŒ–ï¼Œè€Œä¸”éµå¾ªä»¥ä¸‹çš„è§„åˆ™ï¼š</p>
<ul>
<li><strong>å¯¹è±¡</strong>è¢«è½¬åŒ–ä¸º<strong>true</strong></li>
<li><strong>Undefined</strong>è¢«è½¬åŒ–ä¸º<strong>false</strong></li>
<li><strong>Null</strong>è¢«è½¬åŒ–ä¸º<strong>false</strong></li>
<li><strong>å¸ƒå°”å€¼</strong>è¢«è½¬åŒ–ä¸º<strong>ç›¸åº”çš„å¸ƒå°”å€¼</strong></li>
<li><strong>æ•°å­—</strong>å½“å€¼ä¸º<strong>+0</strong>,<strong>-0</strong>æˆ–<strong>NaN</strong>æ—¶è½¬åŒ–ä¸º<strong>false</strong>ï¼Œå…¶ä»–çš„è½¬åŒ–ä¸º<strong>true</strong></li>
<li><p><strong>Stringsç±»å‹</strong>å¦‚æœä¸ºç©ºæ—¶è½¬åŒ–ä¸º<strong>false</strong>,å¦åˆ™è½¬åŒ–ä¸º<strong>true</strong></p>
<pre><code class="javascript">if ([0]) {
  // true    
  // å› ä¸ºæ•°ç»„æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡ä¼šè¢«è½¬åŒ–ä¸º true
}
</code></pre>
</li>
</ul>
</li>
<li><p>ä½¿ç”¨å¿«æ·æ–¹å¼</p>
<pre><code class="javascript">  // ä¸æ¨è
  if (name !== &#39;&#39;) {
    // ...stuff...
  }

  // æ¨è
  if (name) {
    // ...stuff...
  }

  // ä¸æ¨è
  if (collection.length &gt; 0) {
    // ...stuff...
  }

  // æ¨è
  if (collection.length) {
    // ...stuff...
  }
</code></pre>
</li>
<li>æ›´å¤šçš„ä¿¡æ¯ è¯·çœ‹ Angus Croll çš„ <a href="http://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/#more-2108" target="_blank" rel="external">Truth Equality and JavaScript</a></li>
</ul>
<h2 id="å—"><a href="#å—" class="headerlink" title="å—"></a>å—</h2><ul>
<li><p>ç»™å¤šè¡Œçš„å—ï¼Œä½¿ç”¨å¤§æ‹¬å·</p>
<pre><code class="javascript">  // ä¸æ¨è
  if (test)
    return false;

  // æ¨è
  if (test) return false;

  // æ¨è
  if (test) {
    return false;
  }

  // ä¸æ¨è
  function() { return false; }

  // æ¨è
  function() {
    return false;
  }
</code></pre>
</li>
</ul>
<h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><ul>
<li><p>ä½¿ç”¨ <code>/**...*/</code> è¿›è¡Œå¤šè¡Œæ³¨é‡Šã€‚æ³¨é‡Šè¦åŒ…æ‹¬æè¿°ã€æŒ‡å®šç±»å‹ã€å‚æ•°å€¼å’Œè¿”å›å€¼ã€‚</p>
<pre><code class="javascript">  // ä¸æ¨è

  // make() returns a new element
  // based on the passed in tag name
  //
  // @param &lt;String&gt; tag
  // @return &lt;Element&gt; element
  function make(tag) {

    // ...stuff...

    return element;
  }

  // æ¨è
  /**
   * make() returns a new element
   * based on the passed in tag name
   *
   * @param &lt;String&gt; tag
   * @return &lt;Element&gt; element
   */
  function make(tag) {

    // ...stuff...

    return element;
  }
</code></pre>
</li>
<li><p>ä½¿ç”¨ <code>//</code> è¿›è¡Œå•è¡Œæ³¨é‡Šã€‚æ³¨é‡Šå•ç‹¬å ä¸€è¡Œï¼Œå¹¶å†™åœ¨éœ€è¦æ³¨é‡Šå¯¹è±¡çš„ä¸Šé¢ã€‚åœ¨æ³¨é‡Šçš„ä¸Šé¢ç•™ä¸€ä¸ªç©ºè¡Œã€‚</p>
<pre><code class="javascript">  // ä¸æ¨è
  var active = true;  // is current tab

  // æ¨è
  // is current tab
  var active = true;

  // ä¸æ¨è
  function getType() {
    console.log(&#39;fetching type...&#39;);
    // set the default type to &#39;no type&#39;
    var type = this._type || &#39;no type&#39;;

    return type;
  }

  // æ¨è
  function getType() {
    console.log(&#39;fetching type...&#39;);

    // set the default type to &#39;no type&#39;
    var type = this._type || &#39;no type&#39;;

    return type;
  }
</code></pre>
</li>
<li><p>ç»™ä½ çš„ä»£ç åŠ å‰ç¼€ï¼Œæ¯”å¦‚<code>FIXME</code>æˆ–<code>TODO</code>ï¼Œè¿™æ ·æœ‰åŠ©äºå…¶ä»–å¼€å‘è€…å¯ä»¥è¿…é€Ÿç†è§£ä½ æŒ‡å‡ºçš„éœ€è¦è¢«å¤„ç†çš„é—®é¢˜ã€‚<br>å¦‚æœæƒ³æ›´æ¸…æ™°ä¸€ç‚¹ä½ è¿˜å¯ä»¥åœ¨åé¢åŠ ä¸Šæè¿°ï¼Œæ¯”å¦‚: <code>FIXME -- need to figure this out</code>æˆ–<code>TODO -- need to implement.</code></p>
</li>
<li><p>ä½¿ç”¨ <code>// FIXME:</code> å»æ³¨é‡Šé—®é¢˜</p>
<pre><code class="javascript">  function Calculator() {

    // FIXME: shouldn&#39;t use a global here
    total = 0;

    return this;
  }
</code></pre>
</li>
<li><p>ä½¿ç”¨ <code>// TODO:</code> æ¥æ³¨é‡Šè§£å†³æ–¹æ³•</p>
<pre><code class="javascript">  function Calculator() {

    // TODO: total should be configurable by an options param
    this.total = 0;

    return this;
  }
</code></pre>
</li>
</ul>
<h2 id="ç©ºæ ¼"><a href="#ç©ºæ ¼" class="headerlink" title="ç©ºæ ¼"></a>ç©ºæ ¼</h2><ul>
<li><p>å°†tabé”®è®¾æˆ2ä¸ªç©ºæ ¼</p>
<pre><code class="javascript">
  // ä¸æ¨è
  function() {
  âˆ™âˆ™âˆ™âˆ™var name;
  }

  // ä¸æ¨è
  function() {
  âˆ™var name;
  }

  // æ¨è
  function() {
  âˆ™âˆ™var name;
  }
</code></pre>
</li>
<li><p>é€—å·/å†’å·/å°æ‹¬å·åé¢ç•™ä¸€ä¸ªç©ºæ ¼</p>
<pre><code class="javascript">  // ä¸æ¨è
  function test(){
    console.log(&#39;test&#39;);
  }

  // æ¨è
  function test() {
    console.log(&#39;test&#39;);
  }

  // ä¸æ¨è
  dog.set(&#39;attr&#39;,{
    age: &#39;1 year&#39;,
    breed: &#39;Bernese Mountain Dog&#39;
  });

  // æ¨è
  dog.set(&#39;attr&#39;, {
    age: &#39;1 year&#39;,
    breed: &#39;Bernese Mountain Dog&#39;
  });
</code></pre>
</li>
<li><p>åœ¨æ–‡ä»¶çš„æœ€åç•™ä¸€ä¸ªç©ºè¡Œ</p>
<pre><code class="javascript">  // ä¸æ¨è
  (function(global) {
    // ...stuff...
  })(this);
</code></pre>
<pre><code class="javascript">  // æ¨è
  (function(global) {
    // ...stuff...
  })(this);
</code></pre>
</li>
</ul>
<h2 id="é€—å·"><a href="#é€—å·" class="headerlink" title="é€—å·"></a>é€—å·</h2><ul>
<li><p>é€—å·ä¸è¦å‰ç½®</p>
<pre><code class="javascript">  // ä¸æ¨è
  var once
    , upon
    , aTime;

  // æ¨è
  var once,
      upon,
      aTime;

  // ä¸æ¨è
  var hero = {
      firstName: &#39;Bob&#39;
    , lastName: &#39;Parr&#39;
    , heroName: &#39;Mr. Incredible&#39;
    , superPower: &#39;strength&#39;
  };

  // æ¨è
  var hero = {
    firstName: &#39;Bob&#39;,
    lastName: &#39;Parr&#39;,
    heroName: &#39;Mr. Incredible&#39;,
    superPower: &#39;strength&#39;
  };
</code></pre>
</li>
<li><p>æœ€åä¸€ä¸ªå…ƒç´ ä¸å¯ä»¥åŠ é€—å·ã€‚è¿™åœ¨IE6å’ŒIE7è¿˜æœ‰IE9çš„æ€ªå¼‚æ¨¡å¼ä¸‹å‡ºé”™ã€‚</p>
</li>
</ul>
<blockquote>
<p>æ„Ÿè°¢é˜®ä¸€å³°è€å¸ˆçš„åŸåˆ›ï¼Œæœ¬åˆ†äº«ä»…ä¾›å­¦ä¹ äº¤æµ</p>
</blockquote>
<pre><code>## å…³äº
GitHub: ğŸ‘‰https://github.com/microzz
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Airbnbçš„JavaScriptç¼–ç è§„èŒƒæŒ‡å—&quot;&gt;&lt;a href=&quot;#Airbnbçš„JavaScriptç¼–ç è§„èŒƒæŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Airbnbçš„JavaScriptç¼–ç è§„èŒƒæŒ‡å—&quot;&gt;&lt;/a&gt;Airbnbçš„JavaScript
    
    </summary>
    
    
      <category term="JavaScript" scheme="https://microzz.com/tags/JavaScript/"/>
    
      <category term="JS" scheme="https://microzz.com/tags/JS/"/>
    
      <category term="ç¼–ç è§„èŒƒ" scheme="https://microzz.com/tags/%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/"/>
    
      <category term="Airbnb" scheme="https://microzz.com/tags/Airbnb/"/>
    
  </entry>
  
</feed>
